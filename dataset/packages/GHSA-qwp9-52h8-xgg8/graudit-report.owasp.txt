/src/demo/ports/ports.html-35-        return new joint.dia.Paper({
/src/demo/ports/ports.html:36:            el: $('<div/>').appendTo(document.body),
/src/demo/ports/ports.html-37-            width: 800,
##############################################
/src/demo/embedding/custom-embedding.js-19-new joint.dia.Paper({
/src/demo/embedding/custom-embedding.js:20:    el: Backbone.$('<div/>').prependTo(document.body).css({
/src/demo/embedding/custom-embedding.js-21-        border: '1px solid gray',
##############################################
/src/demo/embedding/nested-clone.js:1:var $info = $('<pre>').css({ position: 'fixed', top: 50, right: 100 }).appendTo(document.body);
/src/demo/embedding/nested-clone.js-2-resetInfo();
##############################################
/src/demo/chess/src/garbochess.js-10-// Checks in first q?
/src/demo/chess/src/garbochess.js:11:// Pawn eval.
/src/demo/chess/src/garbochess.js:12:// Better king evaluation
/src/demo/chess/src/garbochess.js-13-// Better move sorting in PV nodes (especially root)
##############################################
/src/demo/chess/src/garbochess.js-421-
/src/demo/chess/src/garbochess.js:422:    var evalAdjust = 0;
/src/demo/chess/src/garbochess.js-423-    // Black queen gone, then cancel white's penalty for king movement
/src/demo/chess/src/garbochess.js-424-    if (g_pieceList[pieceQueen << 4] == 0)
/src/demo/chess/src/garbochess.js:425:        evalAdjust -= pieceSquareAdj[pieceKing][g_pieceList[(colorWhite | pieceKing) << 4]];
/src/demo/chess/src/garbochess.js-426-    // White queen gone, then cancel black's penalty for king movement
/src/demo/chess/src/garbochess.js-427-    if (g_pieceList[(colorWhite | pieceQueen) << 4] == 0)
/src/demo/chess/src/garbochess.js:428:        evalAdjust += pieceSquareAdj[pieceKing][flipTable[g_pieceList[pieceKing << 4]]];
/src/demo/chess/src/garbochess.js-429-
##############################################
/src/demo/chess/src/garbochess.js-431-    if (g_pieceCount[pieceBishop] >= 2)
/src/demo/chess/src/garbochess.js:432:        evalAdjust -= 500;
/src/demo/chess/src/garbochess.js-433-    // White bishop pair
/src/demo/chess/src/garbochess.js-434-    if (g_pieceCount[pieceBishop | colorWhite] >= 2)
/src/demo/chess/src/garbochess.js:435:        evalAdjust += 500;
/src/demo/chess/src/garbochess.js-436-
##############################################
/src/demo/chess/src/garbochess.js-441-        curEval -= mobility;
/src/demo/chess/src/garbochess.js:442:        curEval -= evalAdjust;
/src/demo/chess/src/garbochess.js-443-    }
##############################################
/src/demo/chess/src/garbochess.js-445-        curEval += mobility;
/src/demo/chess/src/garbochess.js:446:        curEval += evalAdjust;
/src/demo/chess/src/garbochess.js-447-    }
##############################################
/src/demo/vectorizer/text.js-2-
/src/demo/vectorizer/text.js:3:    var svg = V('svg', { width: '100%', height: '100%' }).appendTo(document.body);
/src/demo/vectorizer/text.js-4-
##############################################
/src/demo/vectorizer/vectorizer.js-5-svg.attr('height', 600);
/src/demo/vectorizer/vectorizer.js:6:document.body.appendChild(svg.node);
/src/demo/vectorizer/vectorizer.js-7-
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/package.json-49-    "browser",
/src/demo/ts-demo/node_modules/vm-browserify/package.json:50:    "eval"
/src/demo/ts-demo/node_modules/vm-browserify/package.json-51-  ],
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/index.js-40-'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',
/src/demo/ts-demo/node_modules/vm-browserify/index.js:41:'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];
/src/demo/ts-demo/node_modules/vm-browserify/index.js-42-
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/index.js-55-    
/src/demo/ts-demo/node_modules/vm-browserify/index.js:56:    var iframe = document.createElement('iframe');
/src/demo/ts-demo/node_modules/vm-browserify/index.js-57-    if (!iframe.style) iframe.style = {};
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/index.js-59-    
/src/demo/ts-demo/node_modules/vm-browserify/index.js:60:    document.body.appendChild(iframe);
/src/demo/ts-demo/node_modules/vm-browserify/index.js-61-    
/src/demo/ts-demo/node_modules/vm-browserify/index.js-62-    var win = iframe.contentWindow;
/src/demo/ts-demo/node_modules/vm-browserify/index.js:63:    var wEval = win.eval, wExecScript = win.execScript;
/src/demo/ts-demo/node_modules/vm-browserify/index.js-64-
/src/demo/ts-demo/node_modules/vm-browserify/index.js-65-    if (!wEval && wExecScript) {
/src/demo/ts-demo/node_modules/vm-browserify/index.js:66:        // win.eval() magically appears when this is called in IE:
/src/demo/ts-demo/node_modules/vm-browserify/index.js-67-        wExecScript.call(win, 'null');
/src/demo/ts-demo/node_modules/vm-browserify/index.js:68:        wEval = win.eval;
/src/demo/ts-demo/node_modules/vm-browserify/index.js-69-    }
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/index.js-86-        // updating existing context properties or new properties in the `win`
/src/demo/ts-demo/node_modules/vm-browserify/index.js:87:        // that was only introduced after the eval.
/src/demo/ts-demo/node_modules/vm-browserify/index.js-88-        if (key in context || indexOf(winKeys, key) === -1) {
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/index.js-98-    
/src/demo/ts-demo/node_modules/vm-browserify/index.js:99:    document.body.removeChild(iframe);
/src/demo/ts-demo/node_modules/vm-browserify/index.js-100-    
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/index.js-104-Script.prototype.runInThisContext = function () {
/src/demo/ts-demo/node_modules/vm-browserify/index.js:105:    return eval(this.code); // maybe...
/src/demo/ts-demo/node_modules/vm-browserify/index.js-106-};
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-198-if (!process.binding) process.binding = function (name) {
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:199:    if (name === 'evals') return require('vm')
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-200-    else throw new Error('No such module')
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-364-
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:365:var iframe = document.createElement('iframe');
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-366-if (!iframe.style) iframe.style = {};
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-390-    
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:391:    document.body.appendChild(iframe);
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-392-    
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-402-     
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:403:    if (win.eval) {
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:404:        // chrome and ff can just .eval()
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:405:        var res = win.eval(this.code);
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-406-    }
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-424-    
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:425:    document.body.removeChild(iframe);
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-426-    
##############################################
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-430-Script.prototype.runInThisContext = function () {
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js:431:    return eval(this.code); // maybe...
/src/demo/ts-demo/node_modules/vm-browserify/example/run/bundle.js-432-};
##############################################
/src/demo/ts-demo/node_modules/extend-shallow/README.md-69-* [extend-shallow](https://www.npmjs.com/package/extend-shallow): Extend an object with the properties of additional objects. node.js/javascript util. | [homepage](https://github.com/jonschlinkert/extend-shallow "Extend an object with the properties of additional objects. node.js/javascript util.")
/src/demo/ts-demo/node_modules/extend-shallow/README.md:70:* [for-in](https://www.npmjs.com/package/for-in): Iterate over the own and inherited enumerable properties of an object, and return an object… [more](https://github.com/jonschlinkert/for-in) | [homepage](https://github.com/jonschlinkert/for-in "Iterate over the own and inherited enumerable properties of an object, and return an object with properties that evaluate to true from the callback. Exit early by returning `false`. JavaScript/Node.js")
/src/demo/ts-demo/node_modules/extend-shallow/README.md:71:* [for-own](https://www.npmjs.com/package/for-own): Iterate over the own enumerable properties of an object, and return an object with properties… [more](https://github.com/jonschlinkert/for-own) | [homepage](https://github.com/jonschlinkert/for-own "Iterate over the own enumerable properties of an object, and return an object with properties that evaluate to true from the callback. Exit early by returning `false`. JavaScript/Node.js.")
/src/demo/ts-demo/node_modules/extend-shallow/README.md-72-* [is-plain-object](https://www.npmjs.com/package/is-plain-object): Returns true if an object was created by the `Object` constructor. | [homepage](https://github.com/jonschlinkert/is-plain-object "Returns true if an object was created by the `Object` constructor.")
##############################################
/src/demo/ts-demo/node_modules/braces/README.md-142-
/src/demo/ts-demo/node_modules/braces/README.md:143:A brace pattern will not be expanded or evaluted if _either the opening or closing brace is escaped_:
/src/demo/ts-demo/node_modules/braces/README.md-144-
##############################################
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock-3406-
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock:3407:static-eval@~0.2.0:
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock-3408-  version "0.2.4"
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock:3409:  resolved "https://registry.yarnpkg.com/static-eval/-/static-eval-0.2.4.tgz#b7d34d838937b969f9641ca07d48f8ede263ea7b"
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock-3410-  dependencies:
##############################################
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock-3425-    shallow-copy "~0.0.1"
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock:3426:    static-eval "~0.2.0"
/src/demo/ts-demo/node_modules/browserify-zlib/yarn.lock-3427-    through2 "~0.4.1"
##############################################
/src/demo/ts-demo/node_modules/stream-http/node_modules/readable-stream/lib/_stream_readable.js-445-    // If _read pushed data synchronously, then `reading` will be false,
/src/demo/ts-demo/node_modules/stream-http/node_modules/readable-stream/lib/_stream_readable.js:446:    // and we need to re-evaluate how much data we can return to the user.
/src/demo/ts-demo/node_modules/stream-http/node_modules/readable-stream/lib/_stream_readable.js-447-    if (!state.reading) n = howMuchToRead(nOrig, state);
##############################################
/src/demo/ts-demo/node_modules/stream-http/test/browser/text.js-25-		if (!skipResponseUrl) {
/src/demo/ts-demo/node_modules/stream-http/test/browser/text.js:26:			var testUrl = url.resolve(global.location.href, '/basic.txt')
/src/demo/ts-demo/node_modules/stream-http/test/browser/text.js-27-			// Redirects aren't tested, but presumably only browser bugs
##############################################
/src/demo/ts-demo/node_modules/stream-http/test/browser/cookie.js-7-  var cookie = 'hello=world'
/src/demo/ts-demo/node_modules/stream-http/test/browser/cookie.js:8:  window.document.cookie = cookie
/src/demo/ts-demo/node_modules/stream-http/test/browser/cookie.js-9-
##############################################
/src/demo/ts-demo/node_modules/stream-http/test/browser/webworker.js-22-	// which doesn't have a proper location
/src/demo/ts-demo/node_modules/stream-http/test/browser/webworker.js:23:	var testUrl = url.resolve(global.location.href, '/browserify.png')
/src/demo/ts-demo/node_modules/stream-http/test/browser/webworker.js-24-	var worker = work(require('./lib/webworker-worker.js'))
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone-min.js:1:(function(t){var e=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(i,n,r){e.Backbone=t(e,r,i,n)})}else if(typeof exports!=="undefined"){var i=require("underscore"),n;try{n=require("jquery")}catch(r){}t(e,exports,i,n)}else{e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}})(function(t,e,i,n){var r=t.Backbone;var s=Array.prototype.slice;e.VERSION="1.4.0";e.$=n;e.noConflict=function(){t.Backbone=r;return this};e.emulateHTTP=false;e.emulateJSON=false;var a=e.Events={};var o=/\s+/;var h;var u=function(t,e,n,r,s){var a=0,h;if(n&&typeof n==="object"){if(r!==void 0&&"context"in s&&s.context===void 0)s.context=r;for(h=i.keys(n);a<h.length;a++){e=u(t,e,h[a],n[h[a]],s)}}else if(n&&o.test(n)){for(h=n.split(o);a<h.length;a++){e=t(e,h[a],r,s)}}else{e=t(e,n,r,s)}return e};a.on=function(t,e,i){this._events=u(l,this._events||{},t,e,{context:i,ctx:this,listening:h});if(h){var n=this._listeners||(this._listeners={});n[h.id]=h;h.interop=false}return this};a.listenTo=function(t,e,n){if(!t)return this;var r=t._listenId||(t._listenId=i.uniqueId("l"));var s=this._listeningTo||(this._listeningTo={});var a=h=s[r];if(!a){this._listenId||(this._listenId=i.uniqueId("l"));a=h=s[r]=new g(this,t)}var o=c(t,e,n,this);h=void 0;if(o)throw o;if(a.interop)a.on(e,n);return this};var l=function(t,e,i,n){if(i){var r=t[e]||(t[e]=[]);var s=n.context,a=n.ctx,o=n.listening;if(o)o.count++;r.push({callback:i,context:s,ctx:s||a,listening:o})}return t};var c=function(t,e,i,n){try{t.on(e,i,n)}catch(r){return r}};a.off=function(t,e,i){if(!this._events)return this;this._events=u(f,this._events,t,e,{context:i,listeners:this._listeners});return this};a.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;var s=t?[t._listenId]:i.keys(r);for(var a=0;a<s.length;a++){var o=r[s[a]];if(!o)break;o.obj.off(e,n,this);if(o.interop)o.off(e,n)}if(i.isEmpty(r))this._listeningTo=void 0;return this};var f=function(t,e,n,r){if(!t)return;var s=r.context,a=r.listeners;var o=0,h;if(!e&&!s&&!n){for(h=i.keys(a);o<h.length;o++){a[h[o]].cleanup()}return}h=e?[e]:i.keys(t);for(;o<h.length;o++){e=h[o];var u=t[e];if(!u)break;var l=[];for(var c=0;c<u.length;c++){var f=u[c];if(n&&n!==f.callback&&n!==f.callback._callback||s&&s!==f.context){l.push(f)}else{var d=f.listening;if(d)d.off(e,n)}}if(l.length){t[e]=l}else{delete t[e]}}return t};a.once=function(t,e,i){var n=u(d,{},t,e,this.off.bind(this));if(typeof t==="string"&&i==null)e=void 0;return this.on(n,e,i)};a.listenToOnce=function(t,e,i){var n=u(d,{},e,i,this.stopListening.bind(this,t));return this.listenTo(t,n)};var d=function(t,e,n,r){if(n){var s=t[e]=i.once(function(){r(e,s);n.apply(this,arguments)});s._callback=n}return t};a.trigger=function(t){if(!this._events)return this;var e=Math.max(0,arguments.length-1);var i=Array(e);for(var n=0;n<e;n++)i[n]=arguments[n+1];u(v,this._events,t,void 0,i);return this};var v=function(t,e,i,n){if(t){var r=t[e];var s=t.all;if(r&&s)s=s.slice();if(r)p(r,n);if(s)p(s,[e].concat(n))}return t};var p=function(t,e){var i,n=-1,r=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:while(++n<r)(i=t[n]).callback.call(i.ctx);return;case 1:while(++n<r)(i=t[n]).callback.call(i.ctx,s);return;case 2:while(++n<r)(i=t[n]).callback.call(i.ctx,s,a);return;case 3:while(++n<r)(i=t[n]).callback.call(i.ctx,s,a,o);return;default:while(++n<r)(i=t[n]).callback.apply(i.ctx,e);return}};var g=function(t,e){this.id=t._listenId;this.listener=t;this.obj=e;this.interop=true;this.count=0;this._events=void 0};g.prototype.on=a.on;g.prototype.off=function(t,e){var i;if(this.interop){this._events=u(f,this._events,t,e,{context:void 0,listeners:void 0});i=!this._events}else{this.count--;i=this.count===0}if(i)this.cleanup()};g.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId];if(!this.interop)delete this.obj._listeners[this.id]};a.bind=a.on;a.unbind=a.off;i.extend(e,a);var m=e.Model=function(t,e){var n=t||{};e||(e={});this.preinitialize.apply(this,arguments);this.cid=i.uniqueId(this.cidPrefix);this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)n=this.parse(n,e)||{};var r=i.result(this,"defaults");n=i.defaults(i.extend({},r,n),r);this.set(n,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(m.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(t==null)return this;var r;if(typeof t==="object"){r=t;n=e}else{(r={})[t]=e}n||(n={});if(!this._validate(r,n))return false;var s=n.unset;var a=n.silent;var o=[];var h=this._changing;this._changing=true;if(!h){this._previousAttributes=i.clone(this.attributes);this.changed={}}var u=this.attributes;var l=this.changed;var c=this._previousAttributes;for(var f in r){e=r[f];if(!i.isEqual(u[f],e))o.push(f);if(!i.isEqual(c[f],e)){l[f]=e}else{delete l[f]}s?delete u[f]:u[f]=e}if(this.idAttribute in r)this.id=this.get(this.idAttribute);if(!a){if(o.length)this._pending=n;for(var d=0;d<o.length;d++){this.trigger("change:"+o[d],this,u[o[d]],n)}}if(h)return this;if(!a){while(this._pending){n=this._pending;this._pending=false;this.trigger("change",this,n)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e=this._changing?this._previousAttributes:this.attributes;var n={};var r;for(var s in t){var a=t[s];if(i.isEqual(e[s],a))continue;n[s]=a;r=true}return r?n:false},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:true},t);var e=this;var n=t.success;t.success=function(i){var r=t.parse?e.parse(i,t):i;if(!e.set(r,t))return false;if(n)n.call(t.context,e,i,t);e.trigger("sync",e,i,t)};G(this,t);return this.sync("read",this,t)},save:function(t,e,n){var r;if(t==null||typeof t==="object"){r=t;n=e}else{(r={})[t]=e}n=i.extend({validate:true,parse:true},n);var s=n.wait;if(r&&!s){if(!this.set(r,n))return false}else if(!this._validate(r,n)){return false}var a=this;var o=n.success;var h=this.attributes;n.success=function(t){a.attributes=h;var e=n.parse?a.parse(t,n):t;if(s)e=i.extend({},r,e);if(e&&!a.set(e,n))return false;if(o)o.call(n.context,a,t,n);a.trigger("sync",a,t,n)};G(this,n);if(r&&s)this.attributes=i.extend({},h,r);var u=this.isNew()?"create":n.patch?"patch":"update";if(u==="patch"&&!n.attrs)n.attrs=r;var l=this.sync(u,this,n);this.attributes=h;return l},destroy:function(t){t=t?i.clone(t):{};var e=this;var n=t.success;var r=t.wait;var s=function(){e.stopListening();e.trigger("destroy",e,e.collection,t)};t.success=function(i){if(r)s();if(n)n.call(t.context,e,i,t);if(!e.isNew())e.trigger("sync",e,i,t)};var a=false;if(this.isNew()){i.defer(t.success)}else{G(this,t);a=this.sync("delete",this,t)}if(!r)s();return a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||V();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;if(!n)return true;this.trigger("invalid",this,n,i.extend(e,{validationError:n}));return false}});var _=e.Collection=function(t,e){e||(e={});this.preinitialize.apply(this,arguments);if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var y={add:true,remove:true,merge:true};var b={add:true,remove:false};var x=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n=Array(t.length-i);var r=e.length;var s;for(s=0;s<n.length;s++)n[s]=t[s+i];for(s=0;s<r;s++)t[s+i]=e[s];for(s=0;s<n.length;s++)t[s+r+i]=n[s]};i.extend(_.prototype,a,{model:m,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,b))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var r=this._removeModels(t,e);if(!e.silent&&r.length){e.changes={added:[],merged:[],removed:r};this.trigger("update",this,e)}return n?r[0]:r},set:function(t,e){if(t==null)return;e=i.extend({},y,e);if(e.parse&&!this._isModel(t)){t=this.parse(t,e)||[]}var n=!i.isArray(t);t=n?[t]:t.slice();var r=e.at;if(r!=null)r=+r;if(r>this.length)r=this.length;if(r<0)r+=this.length+1;var s=[];var a=[];var o=[];var h=[];var u={};var l=e.add;var c=e.merge;var f=e.remove;var d=false;var v=this.comparator&&r==null&&e.sort!==false;var p=i.isString(this.comparator)?this.comparator:null;var g,m;for(m=0;m<t.length;m++){g=t[m];var _=this.get(g);if(_){if(c&&g!==_){var b=this._isModel(g)?g.attributes:g;if(e.parse)b=_.parse(b,e);_.set(b,e);o.push(_);if(v&&!d)d=_.hasChanged(p)}if(!u[_.cid]){u[_.cid]=true;s.push(_)}t[m]=_}else if(l){g=t[m]=this._prepareModel(g,e);if(g){a.push(g);this._addReference(g,e);u[g.cid]=true;s.push(g)}}}if(f){for(m=0;m<this.length;m++){g=this.models[m];if(!u[g.cid])h.push(g)}if(h.length)this._removeModels(h,e)}var w=false;var E=!v&&l&&f;if(s.length&&E){w=this.length!==s.length||i.some(this.models,function(t,e){return t!==s[e]});this.models.length=0;x(this.models,s,0);this.length=this.models.length}else if(a.length){if(v)d=true;x(this.models,a,r==null?this.length:r);this.length=this.models.length}if(d)this.sort({silent:true});if(!e.silent){for(m=0;m<a.length;m++){if(r!=null)e.index=r+m;g=a[m];g.trigger("add",g,this,e)}if(d||w)this.trigger("sort",this,e);if(a.length||h.length||o.length){e.changes={added:a,removed:h,merged:o};this.trigger("update",this,e)}}return n?t[0]:t},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++){this._removeReference(this.models[n],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t)]||t.cid&&this._byId[t.cid]},has:function(t){return this.get(t)!=null},at:function(t){if(t<0)t+=this.length;return this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,true)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;if(i.isFunction(e))e=e.bind(this);if(n===1||i.isString(e)){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:true},t);var e=t.success;var n=this;t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t);if(e)e.call(t.context,n,i,t);n.trigger("sync",n,i,t)};G(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;t=this._prepareModel(t,e);if(!t)return false;if(!n)this.add(t,e);var r=this;var s=e.success;e.success=function(t,e,i){if(n)r.add(t,i);if(s)s.call(i.context,t,e,i)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},values:function(){return new E(this,k)},keys:function(){return new E(this,I)},entries:function(){return new E(this,S)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(this._isModel(t)){if(!t.collection)t.collection=this;return t}e=e?i.clone(e):{};e.collection=this;var n=new this.model(t,e);if(!n.validationError)return n;this.trigger("invalid",this,n.validationError,e);return false},_removeModels:function(t,e){var i=[];for(var n=0;n<t.length;n++){var r=this.get(t[n]);if(!r)continue;var s=this.indexOf(r);this.models.splice(s,1);this.length--;delete this._byId[r.cid];var a=this.modelId(r.attributes);if(a!=null)delete this._byId[a];if(!e.silent){e.index=s;r.trigger("remove",r,this,e)}i.push(r);this._removeReference(r,e)}return i},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);if(i!=null)this._byId[i]=t;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);if(i!=null)delete this._byId[i];if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,n);if(t==="change"){var r=this.modelId(e.previousAttributes());var s=this.modelId(e.attributes);if(r!==s){if(r!=null)delete this._byId[r];if(s!=null)this._byId[s]=e}}}this.trigger.apply(this,arguments)}});var w=typeof Symbol==="function"&&Symbol.iterator;if(w){_.prototype[w]=_.prototype.values}var E=function(t,e){this._collection=t;this._kind=e;this._index=0};var k=1;var I=2;var S=3;if(w){E.prototype[w]=function(){return this}}E.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t=this._collection.at(this._index);this._index++;var e;if(this._kind===k){e=t}else{var i=this._collection.modelId(t.attributes);if(this._kind===I){e=i}else{e=[i,t]}}return{value:e,done:false}}this._collection=void 0}return{value:void 0,done:true}};var T=e.View=function(t){this.cid=i.uniqueId("view");this.preinitialize.apply(this,arguments);i.extend(this,i.pick(t,H));this._ensureElement();this.initialize.apply(this,arguments)};var P=/^(\S+)\s*(.*)$/;var H=["model","collection","el","id","attributes","className","tagName","events"];i.extend(T.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(t){this.undelegateEvents();this._setElement(t);this.delegateEvents();return this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0]},delegateEvents:function(t){t||(t=i.result(this,"events"));if(!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(!i.isFunction(n))n=this[n];if(!n)continue;var r=e.match(P);this.delegate(r[1],r[2],n.bind(this))}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i);return this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,"attributes"));if(this.id)t.id=i.result(this,"id");if(this.className)t["class"]=i.result(this,"className");this.setElement(this._createElement(i.result(this,"tagName")));this._setAttributes(t)}else{this.setElement(i.result(this,"el"))}},_setAttributes:function(t){this.$el.attr(t)}});var $=function(t,e,i,n){switch(e){case 1:return function(){return t[i](this[n])};case 2:return function(e){return t[i](this[n],e)};case 3:return function(e,r){return t[i](this[n],C(e,this),r)};case 4:return function(e,r,s){return t[i](this[n],C(e,this),r,s)};default:return function(){var e=s.call(arguments);e.unshift(this[n]);return t[i].apply(t,e)}}};var A=function(t,e,n,r){i.each(n,function(i,n){if(e[n])t.prototype[n]=$(e,i,n,r)})};var C=function(t,e){if(i.isFunction(t))return t;if(i.isObject(t)&&!e._isModel(t))return R(t);if(i.isString(t))return function(e){return e.get(t)};return t};var R=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}};var M={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};var N={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};i.each([[_,M,"models"],[m,N,"attributes"]],function(t){var e=t[0],n=t[1],r=t[2];e.mixin=function(t){var n=i.reduce(i.functions(t),function(t,e){t[e]=0;return t},{});A(e,t,n,r)};A(e,i,n,r)});e.sync=function(t,n,r){var s=j[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(!r.url){a.url=i.result(n,"url")||V()}if(r.data==null&&n&&(t==="create"||t==="update"||t==="patch")){a.contentType="application/json";a.data=JSON.stringify(r.attrs||n.toJSON(r))}if(r.emulateJSON){a.contentType="application/x-www-form-urlencoded";a.data=a.data?{model:a.data}:{}}if(r.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){a.type="POST";if(r.emulateJSON)a.data._method=s;var o=r.beforeSend;r.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",s);if(o)return o.apply(this,arguments)}}if(a.type!=="GET"&&!r.emulateJSON){a.processData=false}var h=r.error;r.error=function(t,e,i){r.textStatus=e;r.errorThrown=i;if(h)h.call(r.context,t,e,i)};var u=r.xhr=e.ajax(i.extend(a,r));n.trigger("request",n,u,r);return u};var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var O=e.Router=function(t){t||(t={});this.preinitialize.apply(this,arguments);if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var U=/\((.*?)\)/g;var z=/(\(\?)?:\w+/g;var q=/\*\w+/g;var F=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(O.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,n,r){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(n)){r=n;n=""}if(!r)r=this[n];var s=this;e.history.route(t,function(i){var a=s._extractParameters(t,i);if(s.execute(r,a,n)!==false){s.trigger.apply(s,["route:"+n].concat(a));s.trigger("route",n,a);e.history.trigger("route",s,n,a)}});return this},execute:function(t,e,i){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,"routes");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(F,"\\$&").replace(U,"(?:$1)?").replace(z,function(t,e){return e?t:"([^/?]+)"}).replace(q,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){if(e===n.length-1)return t||null;return t?decodeURIComponent(t):null})}});var B=e.History=function(){this.handlers=[];this.checkUrl=this.checkUrl.bind(this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var J=/^[#\/]|\s+$/g;var L=/^\/+|\/+$/g;var W=/#.*$/;B.started=false;i.extend(B.prototype,a,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname);var e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return t.charAt(0)==="/"?t.slice(1):t},getFragment:function(t){if(t==null){if(this._usePushState||!this._wantsHashChange){t=this.getPath()}else{t=this.getHash()}}return t.replace(J,"")},start:function(t){if(B.started)throw new Error("Backbone.history has already been started");B.started=true;this.options=i.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(L,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";this.location.replace(e+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var n=document.body;var r=n.insertBefore(this.iframe,n.firstChild).contentWindow;r.document.open();r.document.close();r.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState){s("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){s("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};if(this._usePushState){t("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){t("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);B.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getHash(this.iframe.contentWindow)}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){if(!this.matchRoot())return false;t=this.fragment=this.getFragment(t);return i.some(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!B.started)return false;if(!e||e===true)e={trigger:!!e};t=this.getFragment(t||"");var i=this.root;if(t===""||t.charAt(0)==="?"){i=i.slice(0,-1)||"/"}var n=i+t;t=t.replace(W,"");var r=this.decodeFragment(t);if(this.fragment===r)return;this.fragment=r;if(this._usePushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,n)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;if(!e.replace){s.document.open();s.document.close()}this._updateHash(s.location,t,e.replace)}}else{return this.location.assign(n)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else{t.hash="#"+e}}});e.history=new B;var D=function(t,e){var n=this;var r;if(t&&i.has(t,"constructor")){r=t.constructor}else{r=function(){return n.apply(this,arguments)}}i.extend(r,n,e);r.prototype=i.create(n.prototype,t);r.prototype.constructor=r;r.__super__=n.prototype;return r};m.extend=_.extend=O.extend=T.extend=B.extend=D;var V=function(){throw new Error('A "url" property or function must be specified')};var G=function(t,e){var i=e.error;e.error=function(n){if(i)i.call(e.context,t,n,e);t.trigger("error",t,n,e)}};return e});
/src/demo/ts-demo/node_modules/backbone/backbone-min.js-2-//# sourceMappingURL=backbone-min.map
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1422-    _createElement: function(tagName) {
/src/demo/ts-demo/node_modules/backbone/backbone.js:1423:      return document.createElement(tagName);
/src/demo/ts-demo/node_modules/backbone/backbone.js-1424-    },
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1711-    // Convert a route string into a regular expression, suitable for matching
/src/demo/ts-demo/node_modules/backbone/backbone.js:1712:    // against the current location hash.
/src/demo/ts-demo/node_modules/backbone/backbone.js-1713-    _routeToRegExp: function(route) {
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1750-    if (typeof window !== 'undefined') {
/src/demo/ts-demo/node_modules/backbone/backbone.js:1751:      this.location = window.location;
/src/demo/ts-demo/node_modules/backbone/backbone.js-1752-      this.history = window.history;
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1797-    getSearch: function() {
/src/demo/ts-demo/node_modules/backbone/backbone.js:1798:      var match = this.location.href.replace(/#.*/, '').match(/\?.+/);
/src/demo/ts-demo/node_modules/backbone/backbone.js-1799-      return match ? match[0] : '';
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1801-
/src/demo/ts-demo/node_modules/backbone/backbone.js:1802:    // Gets the true hash value. Cannot use location.hash directly due to bug
/src/demo/ts-demo/node_modules/backbone/backbone.js:1803:    // in Firefox where location.hash will always be decoded.
/src/demo/ts-demo/node_modules/backbone/backbone.js-1804-    getHash: function(window) {
/src/demo/ts-demo/node_modules/backbone/backbone.js:1805:      var match = (window || this).location.href.match(/#(.*)$/);
/src/demo/ts-demo/node_modules/backbone/backbone.js-1806-      return match ? match[1] : '';
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1873-      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {
/src/demo/ts-demo/node_modules/backbone/backbone.js:1874:        this.iframe = document.createElement('iframe');
/src/demo/ts-demo/node_modules/backbone/backbone.js-1875-        this.iframe.src = 'javascript:0';
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1877-        this.iframe.tabIndex = -1;
/src/demo/ts-demo/node_modules/backbone/backbone.js:1878:        var body = document.body;
/src/demo/ts-demo/node_modules/backbone/backbone.js-1879-        // Using `appendChild` will throw on IE < 9 if the document is not ready.
/src/demo/ts-demo/node_modules/backbone/backbone.js-1880-        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;
/src/demo/ts-demo/node_modules/backbone/backbone.js:1881:        iWindow.document.open();
/src/demo/ts-demo/node_modules/backbone/backbone.js:1882:        iWindow.document.close();
/src/demo/ts-demo/node_modules/backbone/backbone.js:1883:        iWindow.location.hash = '#' + this.fragment;
/src/demo/ts-demo/node_modules/backbone/backbone.js-1884-      }
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-1920-      if (this.iframe) {
/src/demo/ts-demo/node_modules/backbone/backbone.js:1921:        document.body.removeChild(this.iframe);
/src/demo/ts-demo/node_modules/backbone/backbone.js-1922-        this.iframe = null;
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-2011-          if (!options.replace) {
/src/demo/ts-demo/node_modules/backbone/backbone.js:2012:            iWindow.document.open();
/src/demo/ts-demo/node_modules/backbone/backbone.js:2013:            iWindow.document.close();
/src/demo/ts-demo/node_modules/backbone/backbone.js-2014-          }
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-2030-      if (replace) {
/src/demo/ts-demo/node_modules/backbone/backbone.js:2031:        var href = location.href.replace(/(javascript:|#).*$/, '');
/src/demo/ts-demo/node_modules/backbone/backbone.js-2032-        location.replace(href + '#' + fragment);
##############################################
/src/demo/ts-demo/node_modules/backbone/backbone.js-2034-        // Some browsers require that `hash` contains a leading #.
/src/demo/ts-demo/node_modules/backbone/backbone.js:2035:        location.hash = '#' + fragment;
/src/demo/ts-demo/node_modules/backbone/backbone.js-2036-      }
##############################################
/src/demo/ts-demo/node_modules/upath/upath.d.ts-170-   *
/src/demo/ts-demo/node_modules/upath/upath.d.ts:171:   * @param p the path to evaluate.
/src/demo/ts-demo/node_modules/upath/upath.d.ts-172-   */
##############################################
/src/demo/ts-demo/node_modules/upath/upath.d.ts-177-   *
/src/demo/ts-demo/node_modules/upath/upath.d.ts:178:   * @param p the path to evaluate.
/src/demo/ts-demo/node_modules/upath/upath.d.ts-179-   * @param ext optionally, an extension to remove from the result.
##############################################
/src/demo/ts-demo/node_modules/upath/upath.d.ts-185-   *
/src/demo/ts-demo/node_modules/upath/upath.d.ts:186:   * @param p the path to evaluate.
/src/demo/ts-demo/node_modules/upath/upath.d.ts-187-   */
##############################################
/src/demo/ts-demo/node_modules/upath/upath.d.ts-199-   *
/src/demo/ts-demo/node_modules/upath/upath.d.ts:200:   * @param pathString path to evaluate.
/src/demo/ts-demo/node_modules/upath/upath.d.ts-201-   */
##############################################
/src/demo/ts-demo/node_modules/upath/upath.d.ts-205-   *
/src/demo/ts-demo/node_modules/upath/upath.d.ts:206:   * @param pathString path to evaluate.
/src/demo/ts-demo/node_modules/upath/upath.d.ts-207-   */
##############################################
/src/demo/ts-demo/node_modules/serialize-javascript/README.md-110-function deserialize(serializedJavascript){
/src/demo/ts-demo/node_modules/serialize-javascript/README.md:111:  return eval('(' + serializedJavascript + ')');
/src/demo/ts-demo/node_modules/serialize-javascript/README.md-112-}
##############################################
/src/demo/ts-demo/node_modules/webpack/README.md-287-webpack supports ES2015+, CommonJS and AMD modules **out of the box**. It performs clever static
/src/demo/ts-demo/node_modules/webpack/README.md:288:analysis on the AST of your code. It even has an evaluation engine to evaluate
/src/demo/ts-demo/node_modules/webpack/README.md-289-simple expressions. This allows you to **support most existing libraries** out of the box.
##############################################
/src/demo/ts-demo/node_modules/webpack/hot/dev-server.js-21-					);
/src/demo/ts-demo/node_modules/webpack/hot/dev-server.js:22:					window.location.reload();
/src/demo/ts-demo/node_modules/webpack/hot/dev-server.js-23-					return;
##############################################
/src/demo/ts-demo/node_modules/webpack/hot/dev-server.js-43-					log("warning", "[HMR] " + (err.stack || err.message));
/src/demo/ts-demo/node_modules/webpack/hot/dev-server.js:44:					window.location.reload();
/src/demo/ts-demo/node_modules/webpack/hot/dev-server.js-45-				} else {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsDefaulter.js-38-			"make",
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsDefaulter.js:39:			options => (options.mode === "development" ? "eval" : false)
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsDefaulter.js-40-		);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-121-					parser.hooks.statementIf.tap("ConstPlugin", statement => {
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js:122:						const param = parser.evaluateExpression(statement.test);
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-123-						const bool = param.asBool();
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-191-						expression => {
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js:192:							const param = parser.evaluateExpression(expression.test);
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-193-							const bool = param.asBool();
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-230-							) {
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js:231:								const param = parser.evaluateExpression(expression.left);
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-232-								const bool = param.asBool();
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-308-					);
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js:309:					parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-310-						.for("__resourceQuery")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-312-							if (!parser.state.module) return;
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js:313:							return ParserHelpers.evaluateToString(
/src/demo/ts-demo/node_modules/webpack/lib/ConstPlugin.js-314-								getQuery(parser.state.module.resource)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ExtendedAPIPlugin.js-64-							);
/src/demo/ts-demo/node_modules/webpack/lib/ExtendedAPIPlugin.js:65:						parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/ExtendedAPIPlugin.js-66-							.for(key)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ExtendedAPIPlugin.js-68-								"ExtendedAPIPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/ExtendedAPIPlugin.js:69:								ParserHelpers.evaluateToString(REPLACEMENT_TYPES[key])
/src/demo/ts-demo/node_modules/webpack/lib/ExtendedAPIPlugin.js-70-							);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-722-			"enum",
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js:723:			"eval",
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-724-			"export",
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-775-			"Date",
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js:776:			"eval",
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-777-			"function",
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-1106-
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js:1107:		// define required namespace objects (must be before evaluation modules)
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-1108-		for (const info of modulesWithInfo) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-1113-
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js:1114:		// evaluate modules in order
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ConcatenatedModule.js-1115-		for (const info of modulesWithInfo) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ModuleConcatenationPlugin.js-28-				const handler = (parser, parserOptions) => {
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ModuleConcatenationPlugin.js:29:					parser.hooks.call.for("eval").tap("ModuleConcatenationPlugin", () => {
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ModuleConcatenationPlugin.js:30:						// Because of variable renaming we can't use modules with eval.
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ModuleConcatenationPlugin.js:31:						parser.state.module.buildMeta.moduleConcatenationBailout = "eval()";
/src/demo/ts-demo/node_modules/webpack/lib/optimize/ModuleConcatenationPlugin.js-32-					});
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/FlagDependencyUsagePlugin.js-51-						// for a module without side effects we stop tracking usage here when no export is used
/src/demo/ts-demo/node_modules/webpack/lib/FlagDependencyUsagePlugin.js:52:						// This module won't be evaluated in this case
/src/demo/ts-demo/node_modules/webpack/lib/FlagDependencyUsagePlugin.js-53-						if (module.factoryMeta.sideEffectFree) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-48-				);
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js:49:			parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-50-				.for("__webpack_hash__")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-52-					"HotModuleReplacementPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js:53:					ParserHelpers.evaluateToString("string")
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-54-				);
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js:55:			parser.hooks.evaluateIdentifier.for("module.hot").tap(
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-56-				{
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-60-				expr => {
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js:61:					return ParserHelpers.evaluateToIdentifier(
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-62-						"module.hot",
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-86-					if (expr.arguments.length >= 1) {
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js:87:						const arg = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-88-						let params = [];
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-125-					if (expr.arguments.length === 1) {
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js:126:						const arg = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/HotModuleReplacementPlugin.js-127-						let params = [];
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/EvalDevToolModuleTemplatePlugin.js-47-				const result = new RawSource(
/src/demo/ts-demo/node_modules/webpack/lib/EvalDevToolModuleTemplatePlugin.js:48:					`eval(${JSON.stringify(content + footer)});`
/src/demo/ts-demo/node_modules/webpack/lib/EvalDevToolModuleTemplatePlugin.js-49-				);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-25-					const setNotSupported = name => {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js:26:						parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-27-							.for(name)
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js:28:							.tap("SystemPlugin", ParserHelpers.evaluateToString("undefined"));
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-29-						parser.hooks.expression
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-48-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js:49:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-50-						.for("System.import")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js:51:						.tap("SystemPlugin", ParserHelpers.evaluateToString("function"));
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-52-					parser.hooks.typeof
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-60-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js:61:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-62-						.for("System")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js:63:						.tap("SystemPlugin", ParserHelpers.evaluateToString("object"));
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/SystemPlugin.js-64-
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-127-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:128:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-129-						.for("define.amd")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-131-							"AMDPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:132:							ParserHelpers.evaluateToString(typeof amdOptions)
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-133-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:134:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-135-						.for("require.amd")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-137-							"AMDPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:138:							ParserHelpers.evaluateToString(typeof amdOptions)
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-139-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:140:					parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-141-						.for("define.amd")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-143-							"AMDPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:144:							ParserHelpers.evaluateToIdentifier("define.amd", true)
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-145-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:146:					parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-147-						.for("require.amd")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-149-							"AMDPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:150:							ParserHelpers.evaluateToIdentifier("require.amd", true)
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-151-						);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-160-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:161:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-162-						.for("define")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:163:						.tap("AMDPlugin", ParserHelpers.evaluateToString("function"));
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-164-					parser.hooks.canRename
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-185-						);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:186:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-187-						.for("require")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js:188:						.tap("AMDPlugin", ParserHelpers.evaluateToString("function"));
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDPlugin.js-189-				};
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/ImportParserPlugin.js-27-
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/ImportParserPlugin.js:28:			const param = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/ImportParserPlugin.js-29-
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludePlugin.js-33-					new RequireIncludeDependencyParserPlugin().apply(parser);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludePlugin.js:34:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludePlugin.js-35-						.for("require.include")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludePlugin.js-37-							"RequireIncludePlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludePlugin.js:38:							ParserHelpers.evaluateToString("function")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludePlugin.js-39-						);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-103-							);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:104:						parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-105-							.for(expression)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-107-								"CommonJsPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:108:								ParserHelpers.evaluateToString("function")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-109-							);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:110:						parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-111-							.for(expression)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-113-								"CommonJsPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:114:								ParserHelpers.evaluateToIdentifier(expression, true)
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-115-							);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-117-
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:118:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-119-						.for("module")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:120:						.tap("CommonJsPlugin", ParserHelpers.evaluateToString("object"));
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-121-					parser.hooks.assign.for("require").tap("CommonJsPlugin", expr => {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-139-					parser.hooks.typeof.for("module").tap("CommonJsPlugin", () => true);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:140:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-141-						.for("exports")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js:142:						.tap("CommonJsPlugin", ParserHelpers.evaluateToString("object"));
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsPlugin.js-143-
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireResolveDependencyParserPlugin.js-21-			if (expr.arguments.length !== 1) return;
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireResolveDependencyParserPlugin.js:22:			const param = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireResolveDependencyParserPlugin.js-23-			if (param.isConditional()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-18-					case 4: {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js:19:						const modeExpr = parser.evaluateExpression(expr.arguments[3]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-20-						if (!modeExpr.isString()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-24-					case 3: {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js:25:						const regExpExpr = parser.evaluateExpression(expr.arguments[2]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-26-						if (!regExpExpr.isRegExp()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-30-					case 2: {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js:31:						const recursiveExpr = parser.evaluateExpression(expr.arguments[1]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-32-						if (!recursiveExpr.isBoolean()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-36-					case 1: {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js:37:						const requestExpr = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireContextDependencyParserPlugin.js-38-						if (!requestExpr.isString()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyImportSideEffectDependency.js-19-	get type() {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyImportSideEffectDependency.js:20:		return "harmony side effect evaluation";
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyImportSideEffectDependency.js-21-	}
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsurePlugin.js-46-					new RequireEnsureDependenciesBlockParserPlugin().apply(parser);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsurePlugin.js:47:					parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsurePlugin.js-48-						.for("require.ensure")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsurePlugin.js-50-							"RequireEnsurePlugin",
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsurePlugin.js:51:							ParserHelpers.evaluateToString("function")
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsurePlugin.js-52-						);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludeDependencyParserPlugin.js-14-				if (expr.arguments.length !== 1) return;
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludeDependencyParserPlugin.js:15:				const param = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireIncludeDependencyParserPlugin.js-16-				if (!param.isString()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDDefineDependencyParserPlugin.js-228-			const identifiers = {};
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDDefineDependencyParserPlugin.js:229:			const param = parser.evaluateExpression(array);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDDefineDependencyParserPlugin.js-230-			const result = this.processArray(
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js-21-					case 4: {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js:22:						const chunkNameExpr = parser.evaluateExpression(expr.arguments[3]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js-23-						if (!chunkNameExpr.isString()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js-32-						if (!errorExpression && !chunkName) {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js:33:							const chunkNameExpr = parser.evaluateExpression(
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js-34-								expr.arguments[2]
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js-42-					case 2: {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js:43:						const dependenciesExpr = parser.evaluateExpression(
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/RequireEnsureDependenciesBlockParserPlugin.js-44-							expr.arguments[0]
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyDetectionParserPlugin.js-74-		for (const identifer of nonHarmonyIdentifiers) {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyDetectionParserPlugin.js:75:			parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyDetectionParserPlugin.js-76-				.for(identifer)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyDetectionParserPlugin.js-80-				.tap("HarmonyDetectionParserPlugin", skipInHarmony);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyDetectionParserPlugin.js:81:			parser.hooks.evaluate
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/HarmonyDetectionParserPlugin.js-82-				.for(identifer)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDRequireDependenciesBlockParserPlugin.js-183-		if (expr.arguments.length >= 1) {
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDRequireDependenciesBlockParserPlugin.js:184:			param = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/AMDRequireDependenciesBlockParserPlugin.js-185-			dep = this.newRequireDependenciesBlock(
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsRequireDependencyParserPlugin.js-79-			let localModule;
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsRequireDependencyParserPlugin.js:80:			const param = parser.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/dependencies/CommonJsRequireDependencyParserPlugin.js-81-			if (param.isConditional()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js-250-			const inline = options.devtool.includes("inline");
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js:251:			const evalWrapped = options.devtool.includes("eval");
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js-252-			const cheap = options.devtool.includes("cheap");
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js-266-							: null;
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js:267:			const Plugin = evalWrapped
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js-268-				? EvalSourceMapDevToolPlugin
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js-281-			}).apply(compiler);
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js:282:		} else if (options.devtool && options.devtool.includes("eval")) {
/src/demo/ts-demo/node_modules/webpack/lib/WebpackOptionsApply.js-283-			legacy = options.devtool.includes("@");
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplate.runtime.js-15-		var head = document.getElementsByTagName("head")[0];
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplate.runtime.js:16:		var script = document.createElement("script");
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplate.runtime.js-17-		script.charset = "utf-8";
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-149-				return Template.asString([
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js:150:					"var script = document.createElement('script');",
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-151-					"var onScriptComplete;",
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-164-						? Template.asString([
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js:165:								"if (script.src.indexOf(window.location.origin + '/') !== 0) {",
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-166-								Template.indent(
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-211-				return Template.asString([
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js:212:					"var link = document.createElement('link');",
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-213-					jsonpScriptType
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-226-						? Template.asString([
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js:227:								"if (link.href.indexOf(window.location.origin + '/') !== 0) {",
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-228-								Template.indent(
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-243-				return Template.asString([
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js:244:					"var link = document.createElement('link');",
/src/demo/ts-demo/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js-245-					crossOriginLoading
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/APIPlugin.js-60-							);
/src/demo/ts-demo/node_modules/webpack/lib/APIPlugin.js:61:						parser.hooks.evaluateTypeof
/src/demo/ts-demo/node_modules/webpack/lib/APIPlugin.js-62-							.for(key)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/APIPlugin.js-64-								"APIPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/APIPlugin.js:65:								ParserHelpers.evaluateToString(REPLACEMENT_TYPES[key])
/src/demo/ts-demo/node_modules/webpack/lib/APIPlugin.js-66-							);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js-96-
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js:97:				const evalSource = new RawSource(
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js:98:					`eval(${JSON.stringify(content + footer)});`
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js-99-				);
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js-100-
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js:101:				cache.set(source, evalSource);
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js-102-
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js:103:				return evalSource;
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js-104-			}
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js-108-			hash => {
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js:109:				hash.update("eval-source-map");
/src/demo/ts-demo/node_modules/webpack/lib/EvalSourceMapDevToolModuleTemplatePlugin.js-110-				hash.update("2");
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/CompatibilityPlugin.js-42-								if (expr.arguments.length !== 2) return;
/src/demo/ts-demo/node_modules/webpack/lib/CompatibilityPlugin.js:43:								const second = parser.evaluateExpression(expr.arguments[1]);
/src/demo/ts-demo/node_modules/webpack/lib/CompatibilityPlugin.js-44-								if (!second.isBoolean()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-45-/**
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:46: * Convert code to a string that evaluates
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:47: * @param {CodeValue} code Code to evaluate
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-48- * @param {Parser} parser Parser
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:49: * @returns {string} code converted to string that evaluates
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-50- */
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-162-								.tap("DefinePlugin", ParserHelpers.approve);
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:163:							parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-164-								.for(key)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-175-									recurse = true;
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:176:									const res = parser.evaluate(toCode(code, parser));
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-177-									recurse = false;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-194-						}
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:195:						parser.hooks.evaluateTypeof.for(key).tap("DefinePlugin", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-196-							/**
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-208-								: "typeof (" + toCode(code, parser) + ")";
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:209:							const res = parser.evaluate(typeofCode);
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-210-							recurseTypeof = false;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-217-								: "typeof (" + toCode(code, parser) + ")";
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:218:							const res = parser.evaluate(typeofCode);
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-219-							if (!res.isString()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-236-							.tap("DefinePlugin", ParserHelpers.approve);
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:237:						parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-238-							.for(key)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-241-							);
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:242:						parser.hooks.evaluateTypeof.for(key).tap("DefinePlugin", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js:243:							return ParserHelpers.evaluateToString("object")(expr);
/src/demo/ts-demo/node_modules/webpack/lib/DefinePlugin.js-244-						});
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-67-					}
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js:68:					parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-69-						.for("__filename")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-73-							const i = resource.indexOf("?");
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js:74:							return ParserHelpers.evaluateToString(
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-75-								i < 0 ? resource : resource.substr(0, i)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-84-					}
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js:85:					parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-86-						.for("__dirname")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-88-							if (!parser.state.module) return;
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js:89:							return ParserHelpers.evaluateToString(
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-90-								parser.state.module.context
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-154-						});
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js:155:					parser.hooks.evaluateIdentifier
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-156-						.for("module.hot")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-158-							"NodeStuffPlugin",
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js:159:							ParserHelpers.evaluateToIdentifier("module.hot", false)
/src/demo/ts-demo/node_modules/webpack/lib/NodeStuffPlugin.js-160-						);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js-55-
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js:56:ParserHelpers.evaluateToString = value => {
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js-57-	return function stringExpression(expr) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js-61-
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js:62:ParserHelpers.evaluateToBoolean = value => {
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js-63-	return function booleanExpression(expr) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js-69-
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js:70:ParserHelpers.evaluateToIdentifier = (identifier, truthy) => {
/src/demo/ts-demo/node_modules/webpack/lib/ParserHelpers.js-71-	return function identifierExpression(expr) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-47-		this.hooks = {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:48:			evaluateTypeof: new HookMap(() => new SyncBailHook(["expression"])),
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:49:			evaluate: new HookMap(() => new SyncBailHook(["expression"])),
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:50:			evaluateIdentifier: new HookMap(() => new SyncBailHook(["expression"])),
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:51:			evaluateDefinedIdentifier: new HookMap(
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-52-				() => new SyncBailHook(["expression"])
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-53-			),
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:54:			evaluateCallExpressionMember: new HookMap(
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-55-				() => new SyncBailHook(["expression", "param"])
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-103-		const HOOK_MAP_COMPAT_CONFIG = {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:104:			evaluateTypeof: /^evaluate typeof (.+)$/,
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:105:			evaluateIdentifier: /^evaluate Identifier (.+)$/,
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:106:			evaluateDefinedIdentifier: /^evaluate defined Identifier (.+)$/,
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:107:			evaluateCallExpressionMember: /^evaluate CallExpression .(.+)$/,
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:108:			evaluate: /^evaluate (.+)$/,
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-109-			label: /^label (.+)$/,
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-155-	initializeEvaluating() {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:156:		this.hooks.evaluate.for("Literal").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-157-			switch (typeof expr.value) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-179-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:180:		this.hooks.evaluate.for("LogicalExpression").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-181-			let left;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-184-			if (expr.operator === "&&") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:185:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-186-				leftAsBool = left && left.asBool();
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-188-				if (leftAsBool !== true) return;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:189:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-190-				return right.setRange(expr.range);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-191-			} else if (expr.operator === "||") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:192:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-193-				leftAsBool = left && left.asBool();
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-195-				if (leftAsBool !== false) return;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:196:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-197-				return right.setRange(expr.range);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-199-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:200:		this.hooks.evaluate.for("BinaryExpression").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-201-			let left;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-204-			if (expr.operator === "+") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:205:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:206:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-207-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-279-			} else if (expr.operator === "-") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:280:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:281:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-282-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-288-			} else if (expr.operator === "*") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:289:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:290:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-291-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-297-			} else if (expr.operator === "/") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:298:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:299:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-300-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-306-			} else if (expr.operator === "**") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:307:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:308:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-309-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-315-			} else if (expr.operator === "==" || expr.operator === "===") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:316:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:317:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-318-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-328-			} else if (expr.operator === "!=" || expr.operator === "!==") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:329:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:330:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-331-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-341-			} else if (expr.operator === "&") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:342:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:343:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-344-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-350-			} else if (expr.operator === "|") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:351:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:352:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-353-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-359-			} else if (expr.operator === "^") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:360:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:361:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-362-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-368-			} else if (expr.operator === ">>>") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:369:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:370:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-371-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-377-			} else if (expr.operator === ">>") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:378:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:379:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-380-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-386-			} else if (expr.operator === "<<") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:387:				left = this.evaluateExpression(expr.left);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:388:				right = this.evaluateExpression(expr.right);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-389-				if (!left || !right) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-396-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:397:		this.hooks.evaluate.for("UnaryExpression").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-398-			if (expr.operator === "typeof") {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-404-					if (!this.scope.definitions.has(name)) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:405:						const hook = this.hooks.evaluateTypeof.get(name);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-406-						if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-414-					if (exprName && exprName.free) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:415:						const hook = this.hooks.evaluateTypeof.get(exprName.name);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-416-						if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-426-				}
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:427:				const arg = this.evaluateExpression(expr.argument);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-428-				if (arg.isString() || arg.isWrapped()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-448-			} else if (expr.operator === "!") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:449:				const argument = this.evaluateExpression(expr.argument);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-450-				if (!argument) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-476-			} else if (expr.operator === "~") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:477:				const argument = this.evaluateExpression(expr.argument);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-478-				if (!argument) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-485-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:486:		this.hooks.evaluateTypeof.for("undefined").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-487-			return new BasicEvaluatedExpression()
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-490-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:491:		this.hooks.evaluate.for("Identifier").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-492-			const name = this.scope.renames.get(expr.name) || expr.name;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-493-			if (!this.scope.definitions.has(expr.name)) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:494:				const hook = this.hooks.evaluateIdentifier.get(name);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-495-				if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-502-			} else {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:503:				const hook = this.hooks.evaluateDefinedIdentifier.get(name);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-504-				if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-508-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:509:		this.hooks.evaluate.for("ThisExpression").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-510-			const name = this.scope.renames.get("this");
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-511-			if (name) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:512:				const hook = this.hooks.evaluateIdentifier.get(name);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-513-				if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-521-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:522:		this.hooks.evaluate.for("MemberExpression").tap("Parser", expression => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-523-			let exprName = this.getNameForExpression(expression);
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-525-				if (exprName.free) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:526:					const hook = this.hooks.evaluateIdentifier.get(exprName.name);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-527-					if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-534-				} else {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:535:					const hook = this.hooks.evaluateDefinedIdentifier.get(exprName.name);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-536-					if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-541-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:542:		this.hooks.evaluate.for("CallExpression").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-543-			if (expr.callee.type !== "MemberExpression") return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-548-				return;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:549:			const param = this.evaluateExpression(expr.callee.object);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-550-			if (!param) return;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-551-			const property = expr.callee.property.name || expr.callee.property.value;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:552:			const hook = this.hooks.evaluateCallExpressionMember.get(property);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-553-			if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-556-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:557:		this.hooks.evaluateCallExpressionMember
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-558-			.for("replace")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-561-				if (expr.arguments.length !== 2) return;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:562:				let arg1 = this.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:563:				let arg2 = this.evaluateExpression(expr.arguments[1]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-564-				if (!arg1.isString() && !arg1.isRegExp()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-572-		["substr", "substring"].forEach(fn => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:573:			this.hooks.evaluateCallExpressionMember
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-574-				.for(fn)
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-581-						case 1:
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:582:							arg1 = this.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-583-							if (!arg1.isNumber()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-586-						case 2: {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:587:							arg1 = this.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:588:							const arg2 = this.evaluateExpression(expr.arguments[1]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-589-							if (!arg1.isNumber()) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-621-						lastExpr = parts[parts.length - 1];
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:622:					const expr = this.evaluateExpression(expressions[i - 1]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-623-					if (!(expr.isString() || expr.isNumber())) continue;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-636-
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:637:		this.hooks.evaluate.for("TemplateLiteral").tap("Parser", node => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-638-			const parts = getSimplifiedTemplateResult.call(
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-650-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:651:		this.hooks.evaluate.for("TaggedTemplateExpression").tap("Parser", node => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:652:			if (this.evaluateExpression(node.tag).identifier !== "String.raw") return;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-653-			const parts = getSimplifiedTemplateResult.call(
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-663-
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:664:		this.hooks.evaluateCallExpressionMember
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-665-			.for("concat")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-671-				for (let i = expr.arguments.length - 1; i >= 0; i--) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:672:					const argExpr = this.evaluateExpression(expr.arguments[i]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-673-					if (!argExpr.isString() && !argExpr.isNumber()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-709-			});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:710:		this.hooks.evaluateCallExpressionMember
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-711-			.for("split")
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-715-				let result;
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:716:				const arg = this.evaluateExpression(expr.arguments[0]);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-717-				if (arg.isString()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-727-			});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:728:		this.hooks.evaluate.for("ConditionalExpression").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:729:			const condition = this.evaluateExpression(expr.test);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-730-			const conditionValue = condition.asBool();
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-732-			if (conditionValue === undefined) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:733:				const consequent = this.evaluateExpression(expr.consequent);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:734:				const alternate = this.evaluateExpression(expr.alternate);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-735-				if (!consequent || !alternate) return;
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-747-			} else {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:748:				res = this.evaluateExpression(
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-749-					conditionValue ? expr.consequent : expr.alternate
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-754-		});
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:755:		this.hooks.evaluate.for("ArrayExpression").tap("Parser", expr => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-756-			const items = expr.elements.map(element => {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:757:				return element !== null && this.evaluateExpression(element);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-758-			});
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-766-	getRenameIdentifier(expr) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:767:		const result = this.evaluateExpression(expr);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-768-		if (result && result.isIdentifier()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-1662-	walkNewExpression(expression) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:1663:		const callee = this.evaluateExpression(expression.callee);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-1664-		if (callee.isIdentifier()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-1767-		} else {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:1768:			const callee = this.evaluateExpression(expression.callee);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-1769-			if (callee.isIdentifier()) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-1923-
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:1924:	evaluateExpression(expression) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-1925-		try {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:1926:			const hook = this.hooks.evaluate.get(expression.type);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-1927-			if (hook !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-2067-
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:2068:	evaluate(source) {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-2069-		const ast = Parser.parse("(" + source + ")", {
##############################################
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-2073-		if (ast.body.length !== 1 || ast.body[0].type !== "ExpressionStatement") {
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:2074:			throw new Error("evaluate: Source is not a expression");
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-2075-		}
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js:2076:		return this.evaluateExpression(ast.body[0].expression);
/src/demo/ts-demo/node_modules/webpack/lib/Parser.js-2077-	}
##############################################
/src/demo/ts-demo/node_modules/webpack/buildin/global.js-8-try {
/src/demo/ts-demo/node_modules/webpack/buildin/global.js:9:	// This works if eval is allowed (see CSP)
/src/demo/ts-demo/node_modules/webpack/buildin/global.js:10:	g = g || Function("return this")() || (1, eval)("this");
/src/demo/ts-demo/node_modules/webpack/buildin/global.js-11-} catch (e) {
##############################################
/src/demo/ts-demo/node_modules/require-directory/index.js-22-
/src/demo/ts-demo/node_modules/require-directory/index.js:23:    // if options.include is a RegExp, evaluate it and make sure the path passes
/src/demo/ts-demo/node_modules/require-directory/index.js-24-    !(options.include && options.include instanceof RegExp && !options.include.test(path)) &&
/src/demo/ts-demo/node_modules/require-directory/index.js-25-
/src/demo/ts-demo/node_modules/require-directory/index.js:26:    // if options.include is a function, evaluate it and make sure the path passes
/src/demo/ts-demo/node_modules/require-directory/index.js-27-    !(options.include && typeof options.include === 'function' && !options.include(path, filename)) &&
/src/demo/ts-demo/node_modules/require-directory/index.js-28-
/src/demo/ts-demo/node_modules/require-directory/index.js:29:    // if options.exclude is a RegExp, evaluate it and make sure the path doesn't pass
/src/demo/ts-demo/node_modules/require-directory/index.js-30-    !(options.exclude && options.exclude instanceof RegExp && options.exclude.test(path)) &&
/src/demo/ts-demo/node_modules/require-directory/index.js-31-
/src/demo/ts-demo/node_modules/require-directory/index.js:32:    // if options.exclude is a function, evaluate it and make sure the path doesn't pass
/src/demo/ts-demo/node_modules/require-directory/index.js-33-    !(options.exclude && typeof options.exclude === 'function' && options.exclude(path, filename))
##############################################
/src/demo/ts-demo/node_modules/webpack-cli/bin/convert-argv.js-18-		if (!argv.devtool) {
/src/demo/ts-demo/node_modules/webpack-cli/bin/convert-argv.js:19:			argv.devtool = "eval-cheap-module-source-map";
/src/demo/ts-demo/node_modules/webpack-cli/bin/convert-argv.js-20-		}
##############################################
/src/demo/ts-demo/node_modules/webpack-cli/bin/config-yargs.js-358-				describe:
/src/demo/ts-demo/node_modules/webpack-cli/bin/config-yargs.js:359:					"shortcut for --debug --devtool eval-cheap-module-source-map --output-pathinfo",
/src/demo/ts-demo/node_modules/webpack-cli/bin/config-yargs.js-360-				group: BASIC_GROUP
##############################################
/src/demo/ts-demo/node_modules/jquery/src/var/isFunction.js-7-      // In some browsers, typeof returns "function" for HTML <object> elements
/src/demo/ts-demo/node_modules/jquery/src/var/isFunction.js:8:      // (i.e., `typeof document.createElement( "object" ) === "function"`).
/src/demo/ts-demo/node_modules/jquery/src/var/isFunction.js-9-      // We don't want to classify *any* DOM node as a function.
##############################################
/src/demo/ts-demo/node_modules/jquery/src/ajax/var/location.js-3-
/src/demo/ts-demo/node_modules/jquery/src/ajax/var/location.js:4:	return window.location;
/src/demo/ts-demo/node_modules/jquery/src/ajax/var/location.js-5-} );
##############################################
/src/demo/ts-demo/node_modules/jquery/src/ajax/xhr.js-135-							// as xhr.onerror cannot be accessed
/src/demo/ts-demo/node_modules/jquery/src/ajax/xhr.js:136:							window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/src/ajax/xhr.js-137-								if ( callback ) {
##############################################
/src/demo/ts-demo/node_modules/jquery/src/effects.js-36-		} else {
/src/demo/ts-demo/node_modules/jquery/src/effects.js:37:			window.setTimeout( schedule, jQuery.fx.interval );
/src/demo/ts-demo/node_modules/jquery/src/effects.js-38-		}
##############################################
/src/demo/ts-demo/node_modules/jquery/src/effects.js-45-function createFxNow() {
/src/demo/ts-demo/node_modules/jquery/src/effects.js:46:	window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/src/effects.js-47-		fxNow = undefined;
##############################################
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-51-	// Anchor tag for parsing the document origin
/src/demo/ts-demo/node_modules/jquery/src/ajax.js:52:	originAnchor = document.createElement( "a" );
/src/demo/ts-demo/node_modules/jquery/src/ajax.js:53:	originAnchor.href = location.href;
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-54-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-302-	ajaxSettings: {
/src/demo/ts-demo/node_modules/jquery/src/ajax.js:303:		url: location.href,
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-304-		type: "GET",
##############################################
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-530-		// We also use the url parameter if available
/src/demo/ts-demo/node_modules/jquery/src/ajax.js:531:		s.url = ( ( url || s.url || location.href ) + "" )
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-532-			.replace( rprotocol, location.protocol + "//" );
##############################################
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-541-		if ( s.crossDomain == null ) {
/src/demo/ts-demo/node_modules/jquery/src/ajax.js:542:			urlAnchor = document.createElement( "a" );
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-543-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-690-			if ( s.async && s.timeout > 0 ) {
/src/demo/ts-demo/node_modules/jquery/src/ajax.js:691:				timeoutTimer = window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/src/ajax.js-692-					jqXHR.abort( "timeout" );
##############################################
/src/demo/ts-demo/node_modules/jquery/src/css/finalPropName.js-8-var cssPrefixes = [ "Webkit", "Moz", "ms" ],
/src/demo/ts-demo/node_modules/jquery/src/css/finalPropName.js:9:	emptyStyle = document.createElement( "div" ).style,
/src/demo/ts-demo/node_modules/jquery/src/css/finalPropName.js-10-	vendorProps = {};
##############################################
/src/demo/ts-demo/node_modules/jquery/src/css/support.js-63-		reliableMarginLeftVal,
/src/demo/ts-demo/node_modules/jquery/src/css/support.js:64:		container = document.createElement( "div" ),
/src/demo/ts-demo/node_modules/jquery/src/css/support.js:65:		div = document.createElement( "div" );
/src/demo/ts-demo/node_modules/jquery/src/css/support.js-66-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation/setGlobalEval.js-6-
/src/demo/ts-demo/node_modules/jquery/src/manipulation/setGlobalEval.js:7:// Mark scripts as having already been evaluated
/src/demo/ts-demo/node_modules/jquery/src/manipulation/setGlobalEval.js-8-function setGlobalEval( elems, refElements ) {
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js-6-
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js:7:jQuery._evalUrl = function( url, options ) {
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js-8-	return jQuery.ajax( {
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js-17-
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js:18:		// Only evaluate the response if it is successful (gh-4126)
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js-19-		// dataFilter is not invoked for failure responses, so using it instead
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js-29-
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js:30:return jQuery._evalUrl;
/src/demo/ts-demo/node_modules/jquery/src/manipulation/_evalUrl.js-31-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation/support.js-8-( function() {
/src/demo/ts-demo/node_modules/jquery/src/manipulation/support.js:9:	var fragment = document.createDocumentFragment(),
/src/demo/ts-demo/node_modules/jquery/src/manipulation/support.js:10:		div = fragment.appendChild( document.createElement( "div" ) ),
/src/demo/ts-demo/node_modules/jquery/src/manipulation/support.js:11:		input = document.createElement( "input" );
/src/demo/ts-demo/node_modules/jquery/src/manipulation/support.js-12-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation/buildFragment.js-85-
/src/demo/ts-demo/node_modules/jquery/src/manipulation/buildFragment.js:86:		// Preserve script evaluation history
/src/demo/ts-demo/node_modules/jquery/src/manipulation/buildFragment.js-87-		if ( attached ) {
##############################################
/src/demo/ts-demo/node_modules/jquery/src/attributes/prop.js-65-				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
/src/demo/ts-demo/node_modules/jquery/src/attributes/prop.js:66:				// Use proper attribute retrieval(#12072)
/src/demo/ts-demo/node_modules/jquery/src/attributes/prop.js-67-				var tabindex = jQuery.find.attr( elem, "tabindex" );
##############################################
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js-8-( function() {
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js:9:	var input = document.createElement( "input" ),
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js:10:		select = document.createElement( "select" ),
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js:11:		opt = select.appendChild( document.createElement( "option" ) );
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js-12-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js-24-	// An input loses its value after becoming a radio
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js:25:	input = document.createElement( "input" );
/src/demo/ts-demo/node_modules/jquery/src/attributes/support.js-26-	input.value = "t";
##############################################
/src/demo/ts-demo/node_modules/jquery/src/queue/delay.js-15-	return this.queue( type, function( next, hooks ) {
/src/demo/ts-demo/node_modules/jquery/src/queue/delay.js:16:		var timeout = window.setTimeout( next, time );
/src/demo/ts-demo/node_modules/jquery/src/queue/delay.js-17-		hooks.stop = function() {
##############################################
/src/demo/ts-demo/node_modules/jquery/src/deferred.js-229-								}
/src/demo/ts-demo/node_modules/jquery/src/deferred.js:230:								window.setTimeout( process );
/src/demo/ts-demo/node_modules/jquery/src/deferred.js-231-							}
##############################################
/src/demo/ts-demo/node_modules/jquery/src/jquery.js-15-	"./manipulation",
/src/demo/ts-demo/node_modules/jquery/src/jquery.js:16:	"./manipulation/_evalUrl",
/src/demo/ts-demo/node_modules/jquery/src/jquery.js-17-	"./wrap",
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation.js-200-							// Optional AJAX dependency, but won't run scripts if not present
/src/demo/ts-demo/node_modules/jquery/src/manipulation.js:201:							if ( jQuery._evalUrl && !node.noModule ) {
/src/demo/ts-demo/node_modules/jquery/src/manipulation.js:202:								jQuery._evalUrl( node.src, {
/src/demo/ts-demo/node_modules/jquery/src/manipulation.js-203-									nonce: node.nonce || node.getAttribute( "nonce" )
##############################################
/src/demo/ts-demo/node_modules/jquery/src/manipulation.js-275-
/src/demo/ts-demo/node_modules/jquery/src/manipulation.js:276:		// Preserve script evaluation history
/src/demo/ts-demo/node_modules/jquery/src/manipulation.js-277-		destElements = getAll( clone, "script" );
##############################################
/src/demo/ts-demo/node_modules/jquery/src/core/parseHTML.js-38-			base = context.createElement( "base" );
/src/demo/ts-demo/node_modules/jquery/src/core/parseHTML.js:39:			base.href = document.location.href;
/src/demo/ts-demo/node_modules/jquery/src/core/parseHTML.js-40-			context.head.appendChild( base );
##############################################
/src/demo/ts-demo/node_modules/jquery/src/core/ready-no-deferred.js-16-		// Not backwards-compatible as this does not execute sync
/src/demo/ts-demo/node_modules/jquery/src/core/ready-no-deferred.js:17:		window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/src/core/ready-no-deferred.js-18-			fn.call( document, jQuery );
##############################################
/src/demo/ts-demo/node_modules/jquery/src/core/ready-no-deferred.js-85-	// Handle it asynchronously to allow scripts the opportunity to delay ready
/src/demo/ts-demo/node_modules/jquery/src/core/ready-no-deferred.js:86:	window.setTimeout( jQuery.ready );
/src/demo/ts-demo/node_modules/jquery/src/core/ready-no-deferred.js-87-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/core/ready.js-74-	// Handle it asynchronously to allow scripts the opportunity to delay ready
/src/demo/ts-demo/node_modules/jquery/src/core/ready.js:75:	window.setTimeout( jQuery.ready );
/src/demo/ts-demo/node_modules/jquery/src/core/ready.js-76-
##############################################
/src/demo/ts-demo/node_modules/jquery/src/core/init.js-16-	// A simple way to check for HTML strings
/src/demo/ts-demo/node_modules/jquery/src/core/init.js:17:	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
/src/demo/ts-demo/node_modules/jquery/src/core/init.js-18-	// Strict HTML recognition (#11290: must start with <)
##############################################
/src/demo/ts-demo/node_modules/jquery/src/core/readyException.js-7-jQuery.readyException = function( error ) {
/src/demo/ts-demo/node_modules/jquery/src/core/readyException.js:8:	window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/src/core/readyException.js-9-		throw error;
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-77-      // In some browsers, typeof returns "function" for HTML <object> elements
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:78:      // (i.e., `typeof document.createElement( "object" ) === "function"`).
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-79-      // We don't want to classify *any* DOM node as a function.
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-817-
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:818:				// qSA considers elements outside a scoping root when evaluating child or
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-819-				// descendant combinators, which is not what we want.
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-898-function assert( fn ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:899:	var el = document.createElement("fieldset");
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-900-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-1133-	support.getElementsByTagName = assert(function( el ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:1134:		el.appendChild( document.createComment("") );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-1135-		return !el.getElementsByTagName("*").length;
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-1311-			// The type and name attributes are restricted during .innerHTML assignment
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:1312:			var input = document.createElement("input");
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-1313-			input.setAttribute( "type", "hidden" );
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-2012-		"target": function( elem ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:2013:			var hash = window.location && window.location.hash;
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-2014-			return hash && hash.slice( 1 ) === elem.id;
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-2725-	// Should return 1, but returns 4 (following)
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:2726:	return el.compareDocumentPosition( document.createElement("fieldset") ) & 1;
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-2727-});
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-2928-	// A simple way to check for HTML strings
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:2929:	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-2930-	// Strict HTML recognition (#11290: must start with <)
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-3662-								}
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:3663:								window.setTimeout( process );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-3664-							}
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-3848-jQuery.readyException = function( error ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:3849:	window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-3850-		throw error;
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-3921-	// Handle it asynchronously to allow scripts the opportunity to delay ready
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:3922:	window.setTimeout( jQuery.ready );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-3923-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-4769-
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:4770:// Mark scripts as having already been evaluated
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-4771-function setGlobalEval( elems, refElements ) {
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-4856-
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:4857:		// Preserve script evaluation history
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-4858-		if ( attached ) {
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-4877-( function() {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:4878:	var fragment = document.createDocumentFragment(),
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:4879:		div = fragment.appendChild( document.createElement( "div" ) ),
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:4880:		input = document.createElement( "input" );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-4881-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-5938-							// Optional AJAX dependency, but won't run scripts if not present
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:5939:							if ( jQuery._evalUrl && !node.noModule ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:5940:								jQuery._evalUrl( node.src, {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-5941-									nonce: node.nonce || node.getAttribute( "nonce" )
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-6013-
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:6014:		// Preserve script evaluation history
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-6015-		destElements = getAll( clone, "script" );
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-6298-		reliableMarginLeftVal,
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:6299:		container = document.createElement( "div" ),
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:6300:		div = document.createElement( "div" );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-6301-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-6411-var cssPrefixes = [ "Webkit", "Moz", "ms" ],
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:6412:	emptyStyle = document.createElement( "div" ).style,
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-6413-	vendorProps = {};
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7031-		} else {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7032:			window.setTimeout( schedule, jQuery.fx.interval );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7033-		}
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7040-function createFxNow() {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7041:	window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7042-		fxNow = undefined;
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7703-	return this.queue( type, function( next, hooks ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7704:		var timeout = window.setTimeout( next, time );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7705-		hooks.stop = function() {
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7712-( function() {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7713:	var input = document.createElement( "input" ),
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7714:		select = document.createElement( "select" ),
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7715:		opt = select.appendChild( document.createElement( "option" ) );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7716-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7728-	// An input loses its value after becoming a radio
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7729:	input = document.createElement( "input" );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7730-	input.value = "t";
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7923-				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:7924:				// Use proper attribute retrieval(#12072)
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-7925-				var tabindex = jQuery.find.attr( elem, "tabindex" );
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-8601-}
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:8602:var location = window.location;
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-8603-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-8787-	// Anchor tag for parsing the document origin
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:8788:	originAnchor = document.createElement( "a" );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:8789:	originAnchor.href = location.href;
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-8790-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9038-	ajaxSettings: {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:9039:		url: location.href,
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9040-		type: "GET",
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9266-		// We also use the url parameter if available
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:9267:		s.url = ( ( url || s.url || location.href ) + "" )
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9268-			.replace( rprotocol, location.protocol + "//" );
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9277-		if ( s.crossDomain == null ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:9278:			urlAnchor = document.createElement( "a" );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9279-
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9426-			if ( s.async && s.timeout > 0 ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:9427:				timeoutTimer = window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9428-					jqXHR.abort( "timeout" );
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9593-
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:9594:jQuery._evalUrl = function( url, options ) {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9595-	return jQuery.ajax( {
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9604-
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:9605:		// Only evaluate the response if it is successful (gh-4126)
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9606-		// dataFilter is not invoked for failure responses, so using it instead
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9821-							// as xhr.onerror cannot be accessed
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:9822:							window.setTimeout( function() {
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-9823-								if ( callback ) {
##############################################
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-10059-			base = context.createElement( "base" );
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js:10060:			base.href = document.location.href;
/src/demo/ts-demo/node_modules/jquery/dist/jquery.js-10061-			context.head.appendChild( base );
##############################################
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist-234-language/statements/class/definition/early-errors-class-method-duplicate-parameters.js (default)
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist:235:language/statements/class/definition/early-errors-class-method-eval-in-formal-parameters.js (default)
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist-236-language/statements/class/definition/early-errors-class-method-formals-contains-super-call.js (default)
##############################################
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist-258-language/statements/class/syntax/early-errors/class-body-static-method-set-contains-direct-super.js (strict mode)
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist:259:language/statements/class/syntax/early-errors/class-definition-evaluation-block-duplicate-binding.js (default)
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist:260:language/statements/class/syntax/early-errors/class-definition-evaluation-block-duplicate-binding.js (strict mode)
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist:261:language/statements/class/syntax/early-errors/class-definition-evaluation-scriptbody-duplicate-binding.js (default)
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist:262:language/statements/class/syntax/early-errors/class-definition-evaluation-scriptbody-duplicate-binding.js (strict mode)
/src/demo/ts-demo/node_modules/acorn/bin/test262.whitelist-263-language/statements/const/syntax/const-declaring-let-split-across-two-lines.js (default)
##############################################
/src/demo/ts-demo/node_modules/acorn/CHANGELOG.md-334-
/src/demo/ts-demo/node_modules/acorn/CHANGELOG.md:335:`arguments` and `eval` can now be used in shorthand properties.
/src/demo/ts-demo/node_modules/acorn/CHANGELOG.md-336-
##############################################
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-13-  strict: "implements interface let package private protected public static yield",
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js:14:  strictBind: "eval arguments"
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-15-};
##############################################
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-2585-      // If this is a strict mode function, verify that argument names
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js:2586:      // are not repeated, and it does not try to bind the words `eval`
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-2587-      // or `arguments`.
##############################################
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-2607-  if (this.strict && node.id) {
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js:2608:    // Ensure the function name isn't a forbidden identifier in strict mode, e.g. 'eval'
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-2609-    this.checkLVal(node.id, "none");
##############################################
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-2623-
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js:2624:// Checks function params for various disallowed patterns such as using "eval"
/src/demo/ts-demo/node_modules/acorn/dist/acorn.js-2625-// or "arguments" and duplicate parameters.
##############################################
/src/demo/ts-demo/node_modules/resolve-url/readme.md-10-
/src/demo/ts-demo/node_modules/resolve-url/readme.md:11:window.location
/src/demo/ts-demo/node_modules/resolve-url/readme.md-12-// https://example.com/articles/resolving-urls/edit
##############################################
/src/demo/ts-demo/node_modules/resolve-url/readme.md-50-Pass one or more urls. Resolves the last one to an absolute url, using the
/src/demo/ts-demo/node_modules/resolve-url/readme.md:51:previous ones and `window.location`.
/src/demo/ts-demo/node_modules/resolve-url/readme.md-52-
/src/demo/ts-demo/node_modules/resolve-url/readme.md:53:It’s like starting out on `window.location`, and then clicking links with the
/src/demo/ts-demo/node_modules/resolve-url/readme.md-54-urls as `href` attributes in order, from left to right.
##############################################
/src/demo/ts-demo/node_modules/resolve-url/resolve-url.js-20-
/src/demo/ts-demo/node_modules/resolve-url/resolve-url.js:21:    var base = document.createElement("base")
/src/demo/ts-demo/node_modules/resolve-url/resolve-url.js-22-    base.href = arguments[0]
##############################################
/src/demo/ts-demo/node_modules/resolve-url/resolve-url.js-30-
/src/demo/ts-demo/node_modules/resolve-url/resolve-url.js:31:    var a = document.createElement("a")
/src/demo/ts-demo/node_modules/resolve-url/resolve-url.js-32-    var resolved
##############################################
/src/demo/ts-demo/node_modules/json5/lib/json5.js-13-// data structure. It is a simple, recursive descent parser. It does not use
/src/demo/ts-demo/node_modules/json5/lib/json5.js:14:// eval or regular expressions, so it can be used as a model for implementing
/src/demo/ts-demo/node_modules/json5/lib/json5.js-15-// a JSON5 parser in other languages.
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-60-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:61:$( document.body )
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-62-  .click(function() {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:63:    $( document.body ).append( $( "<div>" ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-64-    var n = $( "div" ).length;
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-176-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:177:$( "p" ).clone().add( "<span>Again</span>" ).appendTo( document.body );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-178-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-470-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:471:$( "p" ).after( document.createTextNode( "Hello" ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-472-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-942-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:943:$( "p" ).append( document.createTextNode( "Hello" ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-944-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-1267-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:1268:$( "p" ).before( document.createTextNode( "Hello" ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-1269-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-2977-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:2978:$( document.body ).click(function() {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-2979-  $( "div" ).each(function( i ) {
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-3449-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:3450:$( document.body ).click(function() {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-3451-  $( "div:hidden:first" ).fadeIn( "slow" );
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-4477-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:4478:$( "*", document.body ).click(function( event ) {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-4479-  event.stopPropagation();
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-4808-for ( var i = 0; i < 5; i++ ) {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:4809:  $( "<div>" ).appendTo( document.body );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-4810-}
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-5086-$( "div b" )
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:5087:  .append( document.createTextNode( "!!!" ) )
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-5088-  .css( "color", "red" );
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-7407-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:7408:$( "*", document.body ).click(function( event ) {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-7409-  var offset = $( this ).offset();
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-8327-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:8328:$( "*", document.body ).each(function() {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-8329-  var parentTag = $( this ).parent().get( 0 ).tagName;
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:8330:  $( this ).prepend( document.createTextNode( parentTag + " > " ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-8331-});
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-8616-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:8617:$( "p" ).prepend( document.createTextNode( "Hello " ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-8618-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-9208-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:9209:$( document.body ).click(function() {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-9210-  $( "div" )
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-9923-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:9924:$( "p" ).clone().appendTo( document.body );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:9925:$( "p" ).clone().appendTo( document.body );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:9926:$( "p" ).clone().appendTo( document.body );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-9927-$( window ).scroll(function() {
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-10761-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:10762:$( document.body ).click(function () {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-10763-  if ( $( "div:first" ).is( ":hidden" ) ) {
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-11003-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:11004:$( document.body ).click(function() {
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-11005-  if ( $( "div:first" ).is( ":hidden" ) ) {
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-12432-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:12433:$( "p" ).wrap( document.createElement( "div" ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-12434-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-12583-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:12584:$( "p" ).wrapAll( document.createElement( "div" ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-12585-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-12721-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts:12722:$( "p" ).wrapInner( document.createElement( "b" ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQuery.d.ts-12723-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-147-```javascript
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:148:$( document.body ).css( "background", "black" );
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-149-```
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-336-```javascript
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:337:$.contains( document.documentElement, document.body ); // true
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:338:$.contains( document.body, document.documentElement ); // false
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-339-```
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-570-jQuery.each( obj, function( i, val ) {
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:571:  $( "#" + i ).append( document.createTextNode( " - " + val ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-572-});
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-628-jQuery.each( obj, function( i, val ) {
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:629:  $( "#" + i ).append( document.createTextNode( " - " + val ) );
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-630-});
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-2154-jQuery.isXMLDoc( document ) // false
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:2155:jQuery.isXMLDoc( document.body ) // false
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-2156-```
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-2191-arr.reverse();
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:2192:$( arr ).appendTo( document.body );
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-2193-</script>
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-13024-<script>
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts:13025:$( document.body ).click(function() {
/src/demo/ts-demo/node_modules/@types/jquery/JQueryStatic.d.ts-13026-  var divs = $( "div" )
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-86-            /**
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts:87:             * A pre-request callback function that can be used to modify the jqXHR (in jQuery 1.4.x, XMLHTTPRequest) object before it is sent. Use this to set custom headers, etc. The jqXHR and settings objects are passed as arguments. This is an Ajax Event. Returning false in the beforeSend function will cancel the request. As of jQuery 1.5, the beforeSend option will be called regardless of the type of request.
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-88-             */
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-94-            /**
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts:95:             * A function to be called when the request finishes (after success and error callbacks are executed). The function gets passed two arguments: The jqXHR (in jQuery 1.4.x, XMLHTTPRequest) object and a string categorizing the status of the request ("success", "notmodified", "nocontent", "error", "timeout", "abort", or "parsererror"). As of jQuery 1.5, the complete setting can accept an array of functions. Each function will be called in turn. This is an Ajax Event.
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-96-             */
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-130-             *
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts:131:             * "html": Returns HTML as plain text; included script tags are evaluated when inserted in the DOM.
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-132-             *
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-1308-         * @since 1.5
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts:1309:         * @example ​ ````Create a Deferred and set two timer-based functions to either resolve or reject the Deferred after a random interval. Whichever one fires first &quot;wins&quot; and will call one of the callbacks. The second timeout has no effect since the Deferred is already complete (in a resolved or rejected state) from the first timeout action. Also set a timer-based progress notification function, and call a progress handler that adds &quot;working...&quot; to the document body.
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-1310-```javascript
##############################################
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-2510-         * @since 1.5
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts:2511:         * @example ​ ````Create a Deferred and set two timer-based functions to either resolve or reject the Deferred after a random interval. Whichever one fires first &quot;wins&quot; and will call one of the callbacks. The second timeout has no effect since the Deferred is already complete (in a resolved or rejected state) from the first timeout action. Also set a timer-based progress notification function, and call a progress handler that adds &quot;working...&quot; to the document body.
/src/demo/ts-demo/node_modules/@types/jquery/misc.d.ts-2512-```javascript
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-390-         * Creates an array of unique `array` values not included in the other
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:391:         * provided arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-392-         * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-1047-         * Gets the index at which the first occurrence of `value` is found in `array`
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:1048:         * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-1049-         * for equality comparisons. If `fromIndex` is negative, it's used as the offset
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-1292-         * Creates an array of unique `array` values not included in the other
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:1293:         * provided arrays using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-1294-         * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-1955-         * @param array The sorted array to inspect.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:1956:         * @param value The value to evaluate.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-1957-         * @returns Returns the index at which `value` should be inserted into `array`.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2000-         * @param array The sorted array to inspect.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:2001:         * @param value The value to evaluate.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2002-         * @returns Returns the index at which `value` should be inserted into `array`.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2045-         * @param array The sorted array to inspect.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:2046:         * @param value The value to evaluate.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2047-         * @param [iteratee=_.identity] The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2140-         * @param array The sorted array to inspect.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:2141:         * @param value The value to evaluate.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2142-         * @returns Returns the index at which `value` should be inserted into `array`.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2183-         * @param array The sorted array to inspect.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:2184:         * @param value The value to evaluate.
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2185-         * @param [iteratee=_.identity] The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2816-         * Creates a duplicate-free version of an array, using
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts:2817:         * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/@types/lodash/common/array.d.ts-2818-         * for equality comparisons, in which only the first occurrence of each element
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts-18-        *
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts:19:        * Lazy evaluation allows several methods to support shortcut fusion. Shortcut fusion
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts-20-        * is an optimization to merge iteratee calls; this avoids the creation of intermediate
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts-100-        /**
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts:101:        * The "evaluate" delimiter.
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts-102-        **/
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts:103:        evaluate?: RegExp;
/src/demo/ts-demo/node_modules/@types/lodash/common/common.d.ts-104-
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts-244-        /**
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts:245:         * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts-246-         * comparison between two values to determine if they are equivalent.
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts-454-         *
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts:455:         * _.isArrayLike(document.body.children);
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts-456-         * // => true
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts-505-         *
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts:506:         * _.isArrayLikeObject(document.body.children);
/src/demo/ts-demo/node_modules/@types/lodash/common/lang.d.ts-507-         * // => true
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/string.d.ts-665-         * Creates a compiled template function that can interpolate data properties in "interpolate" delimiters,
/src/demo/ts-demo/node_modules/@types/lodash/common/string.d.ts:666:         * HTML-escape interpolated data properties in "escape" delimiters, and execute JavaScript in "evaluate"
/src/demo/ts-demo/node_modules/@types/lodash/common/string.d.ts-667-         * delimiters. Data properties may be accessed as free variables in the template. If a setting object is
##############################################
/src/demo/ts-demo/node_modules/@types/lodash/common/string.d.ts-682-         * @param options.escape The HTML "escape" delimiter.
/src/demo/ts-demo/node_modules/@types/lodash/common/string.d.ts:683:         * @param options.evaluate The "evaluate" delimiter.
/src/demo/ts-demo/node_modules/@types/lodash/common/string.d.ts-684-         * @param options.imports An object to import into the template as free variables.
##############################################
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-40-        **/
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts:41:        evaluate?: RegExp;
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-42-
##############################################
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-241-        * reduceRight, if it exists. `foldr` is not as useful in JavaScript as it would be in a
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts:242:        * language with lazy evaluation.
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-243-        * @param list Reduces the elements of this array.
##############################################
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-4064-        /**
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts:4065:        * Compiles JavaScript templates into functions that can be evaluated for rendering. Useful
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-4066-        * for rendering complicated bits of HTML from JSON data sources. Template functions can both
##############################################
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-4068-        * <% ... %>. If you wish to interpolate a value, and have it be HTML-escaped, use <%- ... %> When
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts:4069:        * you evaluate a template function, pass in a data object that has properties corresponding to
/src/demo/ts-demo/node_modules/@types/underscore/index.d.ts-4070-        * the template's free variables. If you're writing a one-off, you can pass the data object as
##############################################
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js-593- * block state.
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js:594: * This function does not perform lazy evaluation of matches and inserts
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js-595- * new strings in the dictionary only for unmatched strings or for short
##############################################
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js-722- * Same as above, but achieves better compression. We use a lazy
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js:723: * evaluation for matches: a match is finally adopted only if there is
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js-724- * no better match at the next window position.
##############################################
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js-1155-  /* Length of the best match at previous step. Matches not greater than this
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js:1156:   * are discarded. This is used in the lazy match evaluation.
/src/demo/ts-demo/node_modules/pako/lib/zlib/deflate.js-1157-   */
##############################################
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js-1002- * block state.
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js:1003: * This function does not perform lazy evaluation of matches and inserts
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js-1004- * new strings in the dictionary only for unmatched strings or for short
##############################################
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js-1131- * Same as above, but achieves better compression. We use a lazy
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js:1132: * evaluation for matches: a match is finally adopted only if there is
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js-1133- * no better match at the next window position.
##############################################
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js-1564-  /* Length of the best match at previous step. Matches not greater than this
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js:1565:   * are discarded. This is used in the lazy match evaluation.
/src/demo/ts-demo/node_modules/pako/dist/pako_deflate.js-1566-   */
##############################################
/src/demo/ts-demo/node_modules/pako/dist/pako.js-1894- * block state.
/src/demo/ts-demo/node_modules/pako/dist/pako.js:1895: * This function does not perform lazy evaluation of matches and inserts
/src/demo/ts-demo/node_modules/pako/dist/pako.js-1896- * new strings in the dictionary only for unmatched strings or for short
##############################################
/src/demo/ts-demo/node_modules/pako/dist/pako.js-2023- * Same as above, but achieves better compression. We use a lazy
/src/demo/ts-demo/node_modules/pako/dist/pako.js:2024: * evaluation for matches: a match is finally adopted only if there is
/src/demo/ts-demo/node_modules/pako/dist/pako.js-2025- * no better match at the next window position.
##############################################
/src/demo/ts-demo/node_modules/pako/dist/pako.js-2456-  /* Length of the best match at previous step. Matches not greater than this
/src/demo/ts-demo/node_modules/pako/dist/pako.js:2457:   * are discarded. This is used in the lazy match evaluation.
/src/demo/ts-demo/node_modules/pako/dist/pako.js-2458-   */
##############################################
/src/demo/ts-demo/node_modules/browserify-des/node_modules/safe-buffer/index.d.ts-143-     * @param string string to test.
/src/demo/ts-demo/node_modules/browserify-des/node_modules/safe-buffer/index.d.ts:144:     * @param encoding encoding used to evaluate (defaults to 'utf8')
/src/demo/ts-demo/node_modules/browserify-des/node_modules/safe-buffer/index.d.ts-145-     */
##############################################
/src/demo/ts-demo/node_modules/crypto-browserify/example/bundle.js-199-if (!process.binding) process.binding = function (name) {
/src/demo/ts-demo/node_modules/crypto-browserify/example/bundle.js:200:    if (name === 'evals') return require('vm')
/src/demo/ts-demo/node_modules/crypto-browserify/example/bundle.js-201-    else throw new Error('No such module')
##############################################
/src/demo/ts-demo/node_modules/fsevents/build/Makefile-216-  for p in $(POSTBUILDS); do\
/src/demo/ts-demo/node_modules/fsevents/build/Makefile:217:    eval $$p;\
/src/demo/ts-demo/node_modules/fsevents/build/Makefile-218-    E=$$?;\
##############################################
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool-161-      evar = '${%s}' % key
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool:162:      evalue = os.environ[key]
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool:163:      lines = string.replace(lines, evar, evalue)
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool-164-
##############################################
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool-171-      evar = '${%s:identifier}' % key
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool:172:      evalue = IDENT_RE.sub('_', os.environ[key])
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool:173:      lines = string.replace(lines, evar, evalue)
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool-174-
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool-175-      evar = '${%s:rfc1034identifier}' % key
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool:176:      evalue = IDENT_RE.sub('-', os.environ[key])
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool:177:      lines = string.replace(lines, evar, evalue)
/src/demo/ts-demo/node_modules/fsevents/build/gyp-mac-tool-178-
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/gauge/README.md-320-
/src/demo/ts-demo/node_modules/fsevents/node_modules/gauge/README.md:321:A template is an array of objects and strings that, after being evaluated,
/src/demo/ts-demo/node_modules/fsevents/node_modules/gauge/README.md-322-will be turned into the gauge line.  The default template is:
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/iconv-lite/encodings/utf16.js-68-// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.
/src/demo/ts-demo/node_modules/fsevents/node_modules/iconv-lite/encodings/utf16.js:69:// Defaults to UTF-16LE, as it's prevalent and default in Node.
/src/demo/ts-demo/node_modules/fsevents/node_modules/iconv-lite/encodings/utf16.js-70-// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/readable-stream/lib/_stream_readable.js-445-    // If _read pushed data synchronously, then `reading` will be false,
/src/demo/ts-demo/node_modules/fsevents/node_modules/readable-stream/lib/_stream_readable.js:446:    // and we need to re-evaluate how much data we can return to the user.
/src/demo/ts-demo/node_modules/fsevents/node_modules/readable-stream/lib/_stream_readable.js-447-    if (!state.reading) n = howMuchToRead(nOrig, state);
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/nopt/lib/nopt.js-102-      d[k] = val
/src/demo/ts-demo/node_modules/fsevents/node_modules/nopt/lib/nopt.js:103:      debug("prevalidated val", d, val, types[k])
/src/demo/ts-demo/node_modules/fsevents/node_modules/nopt/lib/nopt.js-104-      if (!validate(d, k, val, types[k], typeDefs)) {
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/README.md-634-
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/README.md:635:The `binary` properties of `module_path`, `remote_path`, and `package_name` support variable substitution. The strings are evaluated by `node-pre-gyp` depending on your system and any custom build flags you passed.
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/README.md-636-
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/info.js-15-    var package_json = JSON.parse(fs.readFileSync('./package.json'));
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/info.js:16:    var opts = versioning.evaluate(package_json, gyp.opts);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/info.js-17-    s3_setup.detect(opts.hosted_path,config);
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/clean.js-16-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/clean.js:17:    var opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/clean.js-18-    var to_delete = opts.module_path;
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/pre-binding.js-27-   if (!opts.module_root) opts.module_root = path.dirname(package_json_path);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/pre-binding.js:28:   var meta = versioning.evaluate(package_json,opts,napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/pre-binding.js-29-   return meta.module;
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testbinary.js-20-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testbinary.js:21:    var opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testbinary.js-22-    // skip validation for runtimes we don't explicitly support (like electron)
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testbinary.js-71-    }
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testbinary.js:72:    args.push('--eval');
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testbinary.js-73-    args.push("require('" + binary_module.replace(/'/g, '\'') +"')");
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/publish.js-20-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/publish.js:21:    var opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/publish.js-22-    var tarball = opts.staged_tarball;
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/install.js-181-        try {
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/install.js:182:            opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/install.js-183-        } catch (err) {
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/unpublish.js-18-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/unpublish.js:19:    var opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/unpublish.js-20-    s3_setup.detect(opts.hosted_path,config);
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/package.js-20-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/package.js:21:    var opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/package.js-22-    var from = opts.module_path;
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testpackage.js-19-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testpackage.js:20:    var opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/testpackage.js-21-    var tarball = opts.staged_tarball;
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/reveal.js-17-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/reveal.js:18:    var opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/reveal.js-19-    var hit = false;
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-233-
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js:234:function eval_template(template,opts) {
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-235-    Object.keys(opts).forEach(function(key) {
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-276-
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js:277:module.exports.evaluate = function(package_json,options,napi_build_version) {
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-278-    options = options || {};
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-311-    var host = process.env['npm_config_' + opts.module_name + '_binary_host_mirror'] || package_json.binary.host;
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js:312:    opts.host = fix_slashes(eval_template(host,opts));
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js:313:    opts.module_path = eval_template(package_json.binary.module_path,opts);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-314-    // now we resolve the module_path to ensure it is absolute so that binding.gyp variables work predictably
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-322-    opts.module = path.join(opts.module_path,opts.module_name + '.node');
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js:323:    opts.remote_path = package_json.binary.remote_path ? drop_double_slashes(fix_slashes(eval_template(package_json.binary.remote_path,opts))) : default_remote_path;
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-324-    var package_name = package_json.binary.package_name ? package_json.binary.package_name : default_package_name;
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js:325:    opts.package_name = eval_template(package_name,opts);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/versioning.js-326-    opts.staged_tarball = path.join('build/stage',opts.remote_path,opts.package_name);
##############################################
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/handle_gyp_opts.js-58-    var napi_build_version = napi.get_napi_build_version_from_command_args(argv);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/handle_gyp_opts.js:59:    var opts = versioning.evaluate(JSON.parse(fs.readFileSync('./package.json')), gyp.opts, napi_build_version);
/src/demo/ts-demo/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/handle_gyp_opts.js-60-    share_with_node_gyp.forEach(function(key) {
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-851-        } else {
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js:852:            var event = document.createEvent("CustomEvent");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-853-            event.initCustomEvent("testingtheevent", false, true, {});
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-855-            return function(name, event) {
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js:856:                var domEvent = document.createEvent("CustomEvent");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-857-                domEvent.initCustomEvent(name.toLowerCase(), false, true,
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-4510-    schedule = (function() {
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js:4511:        var div = document.createElement("div");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-4512-        var opts = {attributes: true};
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-4513-        var toggleScheduled = false;
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js:4514:        var div2 = document.createElement("div");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-4515-        var o2 = new MutationObserver(function() {
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-5464-    return obj;
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js:5465:    eval(obj);
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.js-5466-}
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.min.js-28-*/
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.min.js:29:!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new h(16),this._normalQueue=new h(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=p}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}function a(t){for(;t.length()>0;)c(t)}function c(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}var l;try{throw new Error}catch(u){l=u}var p=t("./schedule"),h=t("./queue"),f=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype._drainQueues=function(){a(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,a(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=l},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:l};p._then(e,s,void 0,u,h),l._then(a,c,void 0,u,h),u._setOnCancel(l)}else u._resolveCallback(p);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),c=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(c){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,a){return function(c){var l=a._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p)return o(n).call(l,c)}else if("function"==typeof p){var h=o(p).call(l,c);if(h===s)return h;if(h)return o(n).call(l,c)}else if(r.isObject(c)){for(var f=i(p),_=0;_<f.length;++_){var d=f[_];if(p[d]!=c[d])continue t}return o(n).call(l,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e){return{promise:e}}function i(){return!1}function o(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+N.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?N.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function a(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function f(){this._trace=new O(this._peekContext())}function _(t,e){if(U(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=E(t);N.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),N.notEnumerableProp(t,"__stackCleaned__",!0)}}}function d(){this._trace=void 0}function v(t,e,n,r,i){if(void 0===t&&null!==e&&J){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),c=C(a),l=c.length-1;l>=0;--l){var u=c[l];if(!q.test(u)){var p=u.match($);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(c.length>0)for(var h=c[0],l=0;l<a.length;++l)if(a[l]===h){l>0&&(s="\n"+a[l-1]);break}}var f="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(f,!0,e)}}function y(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),m(n)}function m(t,n,r){if(at.warnings){var i,o=new H(t);if(n)r._attachExtraTrace(o);else if(at.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=E(o);o.stack=s.message+"\n"+s.stack.join("\n")}nt("warning",o)||k(o,"",!0)}}function g(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=r[a];if(e[i]!==c)break;e.pop(),i--}e=r}}function C(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||Q.test(r),o=i&&it(r);i&&!o&&(z&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function j(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||Q.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}function E(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?j(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:C(e)}}function k(t,e,n){if("undefined"!=typeof console){var r;if(N.isObject(t)){var i=t.stack;r=e+G(i,t)}else r=e+String(t);"function"==typeof V?V(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function F(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){L.throwLater(o)}"unhandledRejection"===t?nt(t,n,r)||i||k(n,"Unhandled rejection "):nt(t,r)}function T(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():N.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+x(e)+">, no stack trace)"}function x(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function P(){return"function"==typeof st}function R(t){var e=t.match(ot);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function S(t,e){if(P()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,c=0;c<i.length;++c){var l=R(i[c]);if(l){n=l.fileName,s=l.line;break}}for(var c=0;c<o.length;++c){var l=R(o[c]);if(l){r=l.fileName,a=l.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||(it=function(t){if(M.test(t))return!0;var e=R(t);return e&&e.fileName===n&&s<=e.line&&e.line<=a?!0:!1})}}function O(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);st(this,O),e>32&&this.uncycle()}var A,D,V,I=e._getDomain,L=e._async,H=t("./errors").Warning,N=t("./util"),B=t("./es5"),U=N.canAttachTrace,M=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,$=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,Q=null,G=null,z=!1,X=!(0==N.env("BLUEBIRD_DEBUG")||!N.env("BLUEBIRD_DEBUG")&&"development"!==N.env("NODE_ENV")),W=!(0==N.env("BLUEBIRD_WARNINGS")||!X&&!N.env("BLUEBIRD_WARNINGS")),K=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!X&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),J=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},e.prototype._notifyUnhandledRejectionIsHandled=function(){F("rejectionHandled",A,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),F("unhandledRejection",D,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return m(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=I();D="function"==typeof t?null===e?t:N.domainBind(e,t):void 0},e.onUnhandledRejectionHandled=function(t){var e=I();A="function"==typeof t?null===e?t:N.domainBind(e,t):void 0};var Y=function(){};e.longStackTraces=function(){if(L.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&P()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace,i=e.prototype._dereferenceTrace;at.longStackTraces=!0,Y=function(){if(L.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,e.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),L.enableTrampoline(),at.longStackTraces=!1},e.prototype._captureStackTrace=f,e.prototype._attachExtraTrace=_,e.prototype._dereferenceTrace=d,n.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return at.longStackTraces&&P()};var Z=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return N.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};B.defineProperty(n,"promise",{value:e.promise}),B.defineProperty(n,"reason",{value:e.reason});var r=new CustomEvent(t.toLowerCase(),n);return!N.global.dispatchEvent(r)}}if("function"==typeof Event){var t=new Event("CustomEvent");return N.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,B.defineProperty(n,"promise",{value:e.promise}),B.defineProperty(n,"reason",{value:e.reason}),!N.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!N.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),tt=function(){return N.isNode?function(){return process.emit.apply(process,arguments)}:N.global?function(t){var e="on"+t.toLowerCase(),n=N.global[e];return n?(n.apply(N.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),et={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:r},nt=function(t){var e=!1;try{e=tt.apply(null,arguments)}catch(n){L.throwLater(n),e=!0}var r=!1;try{r=Z(t,et[t].apply(null,arguments))}catch(n){L.throwLater(n),r=!0}return r||e};e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&Y()),"warnings"in t){var n=t.warnings;at.warnings=!!n,J=at.warnings,N.isObject(n)&&"wForgottenReturn"in n&&(J=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!at.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=l,e.prototype._propagateFrom=u,e.prototype._onCancel=a,e.prototype._setOnCancel=c,e.prototype._attachCancellationCallback=s,e.prototype._execute=o,rt=u,at.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!at.monitoring?(at.monitoring=!0,e.prototype._fireEvent=nt):!t.monitoring&&at.monitoring&&(at.monitoring=!1,e.prototype._fireEvent=i)),e},e.prototype._fireEvent=i,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._dereferenceTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var rt=p,it=function(){return!1},ot=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(O,Error),n.CapturedTrace=O,O.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=r-2;u>=0;--u)e[u]._length=l,l++;return}}}},O.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=E(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(C(i.stack.split("\n"))),i=i._parent;w(r),b(r),N.notEnumerableProp(t,"stack",g(n,r)),N.notEnumerableProp(t,"__stackCleaned__",!0)}};var st=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():T(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,Q=t,G=e;var n=Error.captureStackTrace;return it=function(t){return M.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return Q=/@/,G=e,z=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(G=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?T(e):e.toString()},null):(Q=t,G=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(V=function(t){console.warn(t)},N.isNode&&process.stderr.isTTY?V=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(V=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return K&&e.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return rt},boundValueFunction:function(){return h},checkForgottenReturns:v,setBounds:S,warn:m,deprecated:y,CapturedTrace:O,fireDomEvent:Z,fireGlobalEvent:tt}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(p(this,"message","string"==typeof r?r:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return u(n,Error),n}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),c=a.freeze,l=t("./util"),u=l.inherits,p=l.notEnumerableProp,h=r("Warning","warning"),f=r("CancellationError","cancellation error"),_=r("TimeoutError","timeout error"),d=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(v){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(d.prototype[y[m]]=Array.prototype[y[m]]);a.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;d.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return g--,e},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:f,TimeoutError:_,OperationalError:i,RejectionError:i,AggregateError:d}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:p,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function o(t){this.finallyHandler=t}function s(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function a(){return l.call(this,this.promise._target()._settledValue())}function c(t){return s(this,t)?void 0:(h.e=t,h)}function l(t){var i=this.promise,l=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?l.call(i._boundValue()):l.call(i._boundValue(),t);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var f=n(u,i);if(f instanceof e){if(null!=this.cancelPromise){if(f._isCancelled()){var _=new p("late cancellation observer");return i._attachExtraTrace(_),h.e=_,h}f.isPending()&&f._attachCancellationCallback(new o(this))}return f._then(a,c,void 0,this,void 0)}}}return i.isRejected()?(s(this),h.e=t,h):(s(this),t)}var u=t("./util"),p=e.CancellationError,h=u.errorObj,f=t("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){s(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new i(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,l,l)},e.prototype.tap=function(t){return this._passThrough(t,1,l)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,l);var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var s=arguments[r];if(!u.isObject(s))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(s)));i[o++]=s}i.length=o;var a=arguments[r];return this._passThrough(f(i,a,this),1,void 0,l)},i}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=f(n[o])(t);if(r._popContext(),s===h){r._pushContext();var a=e.reject(h.e);return r._popContext(),a}var c=i(s,r);if(c instanceof e)return c}return null}function c(t,n,i,o){if(s.cancellation()){var a=new e(r),c=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{var l=this._promise=new e(r);l._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(_):_,this._yieldedPromise=null,this._cancellationPhase=!1}var l=t("./errors"),u=l.TypeError,p=t("./util"),h=p.errorObj,f=p.tryCatch,_=[];p.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=f(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=f(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.min.js:30:o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("expecting a function but got "+p.classString(t));_.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=l();this._callback=null===i?e:u.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function c(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));s=i.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(t,n,s,o).promise()}var l=e._getDomain,u=t("./util"),p=u.tryCatch,h=u.errorObj,f=e._async;u.inherits(a,n),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var l=this._promise,u=this._callback,f=l._boundValue();l._pushContext();var _=p(u).call(f,t,n,o),d=l._popContext();if(s.checkForgottenReturns(_,d,null!==a?"Promise.filter":"Promise.map",l),_===h)return this._reject(_.e),!0;var v=i(_,this._promise);if(v instanceof e){v=v._target();var y=v._bitField;if(0===(50397184&y))return c>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);_=v._value()}r[n]=_}var m=++this._totalResolved;return m>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=s.isArray(l)?a(t).apply(u,l):a(t).call(u,l)}else c=a(t)();var p=r._popContext();return o.checkForgottenReturns(c,p,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),i=0;i<n.length;++i){var o=n[i];p.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,c=t("./errors"),l=c.OperationalError,u=t("./es5"),p=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===c&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===c&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){function n(){}function r(t,e){if(null==t||t.constructor!==i)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new m("expecting a function but got "+f.classString(e))}function i(t){t!==b&&r(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},p=function(t){return i.reject(new m(t))},h={},f=t("./util");c=f.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},f.notEnumerableProp(i,"_getDomain",c);var _=t("./es5"),d=t("./async"),v=new d;_.defineProperty(i,"_async",{value:v});var y=t("./errors"),m=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var g=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var b=function(){},w={},C={},j=t("./thenables")(i,b),E=t("./promise_array")(i,b,j,p,n),k=t("./context")(i),F=k.create,T=t("./debuggability")(i,k),x=(T.CapturedTrace,t("./finally")(i,j,C)),P=t("./catch_filter")(C),R=t("./nodeback"),S=f.errorObj,O=f.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!f.isObject(o))return p("Catch statement predicate: expecting an object but got "+f.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,P(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(t,e){if(T.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+f.classString(t);arguments.length>1&&(n+=", "+f.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+f.classString(t)):this.all()._then(t,void 0,void 0,w,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},i.prototype.error=function(t){return this.caught(f.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=O(t)(R(e,n));return r===S&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new E(t).promise()},i.cast=function(t){var e=j(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+f.classString(t));return v.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var s=void 0!==o,a=s?o:new i(b),l=this._target(),u=l._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=c();if(0!==(50397184&u)){var h,_,d=l._settlePromiseCtx;0!==(33554432&u)?(_=l._rejectionHandler0,h=t):0!==(16777216&u)?(_=l._fulfillmentHandler0,h=e,l._unsetRejectionIsUnhandled()):(d=l._settlePromiseLateCancellationObserver,_=new g("late cancellation observer"),l._attachExtraTrace(_),h=e),v.invoke(d,l,{handler:null===p?h:"function"==typeof h&&f.domainBind(p,h),promise:a,receiver:r,value:_})}else l._addCallbacks(t,e,a,r,p);return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===h?void 0:void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:f.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:f.domainBind(i,e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:f.domainBind(i,t)),"function"==typeof e&&(this[s+1]=null===i?e:f.domainBind(i,e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=j(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var o=r._bitField;if(0===(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;s>a;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var c=new g("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},i.prototype._rejectCallback=function(t,e,n){var r=f.ensureErrorObject(t),i=r===t;if(!i&&!n&&T.warnings()){var o="a promise was rejected with a non-error: "+f.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){if(t!==b){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===w?n&&"number"==typeof n.length?o=O(t).apply(this._boundValue(),n):(o=S,o.e=new m("cannot .spread() a non-array: "+f.classString(n))):o=O(t).call(e,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===C?r._reject(n):o===S?r._rejectCallback(o.e,!1):(T.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var s=t instanceof i,a=this._bitField,c=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),r instanceof x&&r.isFinallyHandler()?(r.cancelPromise=t,O(e).call(r,o)===S&&t._reject(S.e)):e===u?t._fulfill(u.call(r)):r instanceof n?r._promiseCancelled(t):s||t instanceof E?t._cancel():r.cancel()):"function"==typeof e?s?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):s&&(c&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():v.settlePromises(this),this._dereferenceTrace())}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?v.fatalError(t,f.isNode):void((65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){T.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:s}},f.notEnumerableProp(i,"_makeSelfResolutionError",l),t("./method")(i,b,j,p,T),t("./bind")(i,b,j,T),t("./cancel")(i,E,p,T),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,E,j,b,v,c),i.Promise=i,i.version="3.5.2",t("./map.js")(i,E,p,j,b,T),t("./call_get.js")(i),t("./using.js")(i,p,j,F,b,T),t("./timers.js")(i,b,T),t("./generators.js")(i,p,b,j,n,T),t("./nodeify.js")(i),t("./promisify.js")(i,b),t("./props.js")(i,E,j,p),t("./race.js")(i,b,j,p),t("./reduce.js")(i,E,p,j,b,T),t("./settle.js")(i,E,T),t("./some.js")(i,E,p),t("./filter.js")(i,b),t("./each.js")(i,b),t("./any.js")(i),f.toFastProperties(i),f.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new i(b)),T.setBounds(d.firstLineError,f.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,void 0,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var u=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(u,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var c=r(t[a],i);c instanceof e?(c=c._target(),s=c._bitField):s=null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0===(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!==(33554432&s)?this._promiseFulfilled(c._value(),a):0!==(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!C.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=f.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,n,r){for(var a=f.inheritedDataKeys(t),c=[],l=0;l<a.length;++l){var u=a[l],p=t[u],h=r===j?!0:j(u,p,t);"function"!=typeof p||i(p)||o(t,u,e)||!r(u,p,t,h)||c.push(u,p)}return s(c,e,n),c}function c(t,r,i,o,s,a){function c(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof u&&this!==l?this[u]:t,c=_(o,a);try{s.apply(i,d(arguments,c))}catch(p){o._rejectCallback(v(p),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),u=t;return"string"==typeof u&&(t=o),f.notEnumerableProp(c,"__isPromisified__",!0),c}function l(t,e,n,r,i){for(var o=new RegExp(E(e)+"$"),s=a(t,e,o,n),c=0,l=s.length;l>c;c+=2){var u=s[c],p=s[c+1],_=u+e;if(r===k)t[_]=k(u,h,u,p,e,i);else{var d=r(p,function(){return k(u,h,u,p,e,i)});f.notEnumerableProp(d,"__isPromisified__",!0),t[_]=d}}return f.toFastProperties(t),t}function u(t,e,n){return k(t,e,void 0,t,null,n)}var p,h={},f=t("./util"),_=t("./nodeback"),d=f.withAppended,v=f.maybeWrapAsError,y=f.canEvaluate,m=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),j=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},E=function(t){return t.replace(/([$])/,"\\$")},k=y?p:c;e.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+f.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?h:e.context,o=!!e.multiArgs,s=u(t,n,o);return f.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=g);var i=e.filter;"function"!=typeof i&&(i=j);var o=e.promisifier;if("function"!=typeof o&&(o=k),!f.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=f.inheritedDataKeys(t),a=0;a<s.length;++a){var c=t[s[a]];"constructor"!==s[a]&&f.isClass(c)&&(l(c.prototype,r,i,o,n),l(c,r,i,o,n))}return l(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==a&&t instanceof a)e=p(t),n=!0;else{var r=u.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function s(t){var n,s=r(t);return l(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,c=t("./util"),l=c.isObject,u=t("./es5");"function"==typeof Map&&(a=Map);var p=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new a,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e)return a(c);if(t=s.asArray(t),null===t)return i("expecting an array or an iterable object but got "+s.classString(t));var l=new e(n);void 0!==o&&l._propagateFrom(o,3);for(var u=l._fulfill,p=l._reject,h=0,f=t.length;f>h;++h){var _=t[h];(void 0!==_||h in t)&&e.cast(_)._then(u,p,void 0,l,null)}return l}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=h();this._fn=null===s?n:f.domainBind(s,n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+f.classString(e));var o=new a(t,e,n,i);return o.promise()}function u(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(t){var n=this.array,r=n._promise,i=_(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,f=t("./util"),_=f.tryCatch;f.inherits(a,n),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(u,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,n,r){return l(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,c=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){c.call(process,t)}}else if("function"==typeof s&&"function"==typeof s.resolve){var l=s.resolve();r=function(t){l.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.min.js-31-n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,c=t("./errors").AggregateError,l=s.isArray,u={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(u(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(s(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function s(t){try{return p.call(t,"_promise0")}catch(e){return!1}}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,p,!0),a=null)}var a=new e(n),u=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var p=!0,h=c.tryCatch(r).call(t,o,s);return p=!1,a&&h===l&&(a._rejectCallback(h.e,!0,!0),a=null),u}var c=t("./util"),l=c.errorObj,u=c.isObject,p={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,o){var s,a;return void 0!==o?(s=e.resolve(o)._then(l,null,null,t,void 0),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return u(t,this)};var p=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,c=new i(setTimeout(function(){n.isPending()&&p(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,s,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(s>=l)return u._fulfill();var o=c(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(p){return a(p)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,l=t.length,u=new e(o);return i(),u}function u(t,e,n){this._data=t,this._promise=e,this._context=n}function p(t,e,n){this.constructor$(t,e,n)}function h(t){return u.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function f(t){this.length=t,this.promise=null,this[t-1]=null}var _=t("./util"),d=t("./errors").TypeError,v=t("./util").inherits,y=_.errorObj,m=_.tryCatch,g={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},u.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},u.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(p,u),p.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},f.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+_.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var c=new f(t),p=0;t>p;++p){var d=o[p];if(u.isDisposer(d)){var v=d;d=d.promise(),d._setDisposable(v)}else{var g=r(d);g instanceof e&&(d=g._then(h,null,null,{resources:c,index:p},void 0))}c[p]=d}for(var b=new Array(c.length),p=0;p<b.length;++p)b[p]=e.resolve(c[p]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),i=m(i);var r=a?i.apply(void 0,t):i(t),o=C._popContext();return s.checkForgottenReturns(r,o,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return l(c,t)});return c.promise=C,C._setOnCancel(c),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new p(t,this,i());throw new d}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=P;return P=null,t.apply(this,arguments)}catch(e){return x.e=e,x}}function i(t){return P=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!F.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function u(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return F.defineProperty(t,e,r),t}function p(t){throw t}function h(t){try{if("function"==typeof t){var e=F.names(t.prototype),n=F.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&F.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function f(t){function e(){}function n(){return typeof r.foo}e.prototype=t;var r=new e;return n(),n(),t}function _(t){return D.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function m(t){try{u(t,"isOperational",!0)}catch(e){}}function g(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return y(t)&&F.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function C(t,e,n){for(var r=F.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{F.defineProperty(e,o,F.getDescriptor(t,o))}catch(s){}}}function j(t){return N?process.env[t]:void 0}function E(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}function k(t,e){return t.bind(e)}var F=t("./es5"),T="undefined"==typeof navigator,x={e:{}},P,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,S=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},O=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(F.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&r.push(c)}}t=F.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),A=/this\s*\.\s*\S+\s*=/,D=/^[a-z$_][a-z$_0-9]*$/i,V=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(v(t))}:function(t){if(b(t))return t;try{throw new Error(v(t))}catch(e){return e}}}(),I=function(t){return F.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};I=function(t){return F.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?L(t):null}}var H="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,B={isClass:h,isIdentifier:_,inheritedDataKeys:O,getDataPropertyOrDefault:l,thrower:p,isArray:F.isArray,asArray:I,notEnumerableProp:u,isPrimitive:o,isObject:s,isError:y,canEvaluate:T,errorObj:x,tryCatch:i,inherits:S,withAppended:c,maybeWrapAsError:a,toFastProperties:f,filledRange:d,toString:v,canAttachTrace:b,ensureErrorObject:V,originatesFromRejection:g,markAsOriginatingFromRejection:m,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,hasEnvVariables:N,env:j,global:R,getNativePromise:E,domainBind:k};B.isRecentNode=B.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(U){B.lastLineError=U}e.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.min.js-29-*/
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.min.js:30:!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function r(t,e,n){function i(a,s){if(!e[a]){if(!t[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,r,t,e,n)}return e[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=p}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function a(t){this._normalQueue._pushOne(t),this._queueTick()}function s(t){for(;t.length()>0;)c(t)}function c(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}var l;try{throw new Error}catch(u){l=u}var p=t("./schedule"),f=t("./queue"),h=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype._drainQueues=function(){s(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,s(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=l},{"./queue":17,"./schedule":18,"./util":21}],2:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(l),l instanceof t){var f={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:l};p._then(e,a,void 0,u,f),l._then(s,c,void 0,u,f),u._setOnCancel(l)}else u._resolveCallback(p);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],3:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":15}],4:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(c){var l=s._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p)return o(n).call(l,c)}else if("function"==typeof p){var f=o(p).call(l,c);if(f===a)return f;if(f)return o(n).call(l,c)}else if(r.isObject(c)){for(var h=i(p),_=0;_<h.length;++_){var d=h[_];if(p[d]!=c[d])continue t}return o(n).call(l,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":10,"./util":21}],6:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],7:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e){return{promise:e}}function i(){return!1}function o(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+H.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function a(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?H.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function s(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function f(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function h(){this._trace=new O(this._peekContext())}function _(t,e){if(V(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=k(t);H.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),H.notEnumerableProp(t,"__stackCleaned__",!0)}}}function d(){this._trace=void 0}function v(t,e,n,r,i){if(void 0===t&&null!==e&&J){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),c=w(s),l=c.length-1;l>=0;--l){var u=c[l];if(!q.test(u)){var p=u.match(G);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(c.length>0)for(var f=c[0],l=0;l<s.length;++l)if(s[l]===f){l>0&&(a="\n"+s[l-1]);break}}var h="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(h,!0,e)}}function y(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),g(n)}function g(t,n,r){if(st.warnings){var i,o=new I(t);if(n)r._attachExtraTrace(o);else if(st.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var a=k(o);o.stack=a.message+"\n"+a.stack.join("\n")}nt("warning",o)||j(o,"",!0)}}function m(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function C(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var c=r[s];if(e[i]!==c)break;e.pop(),i--}e=r}}function w(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||M.test(r),o=i&&it(r);i&&!o&&($&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function E(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||M.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}function k(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?E(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:w(e)}}function j(t,e,n){if("undefined"!=typeof console){var r;if(H.isObject(t)){var i=t.stack;r=e+W(i,t)}else r=e+String(t);"function"==typeof L?L(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function F(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){U.throwLater(o)}"unhandledRejection"===t?nt(t,n,r)||i||j(n,"Unhandled rejection "):nt(t,r)}function T(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():H.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+P(e)+">, no stack trace)"}function P(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function R(){return"function"==typeof at}function S(t){var e=t.match(ot);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function x(t,e){if(R()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,c=0;c<i.length;++c){var l=S(i[c]);if(l){n=l.fileName,a=l.line;break}}for(var c=0;c<o.length;++c){var l=S(o[c]);if(l){r=l.fileName,s=l.line;break}}0>a||0>s||!n||!r||n!==r||a>=s||(it=function(t){if(Q.test(t))return!0;var e=S(t);return e&&e.fileName===n&&a<=e.line&&e.line<=s?!0:!1})}}function O(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);at(this,O),e>32&&this.uncycle()}var A,N,L,B=e._getDomain,U=e._async,I=t("./errors").Warning,H=t("./util"),D=t("./es5"),V=H.canAttachTrace,Q=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,G=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,M=null,W=null,$=!1,z=!(0==H.env("BLUEBIRD_DEBUG")||!H.env("BLUEBIRD_DEBUG")&&"development"!==H.env("NODE_ENV")),X=!(0==H.env("BLUEBIRD_WARNINGS")||!z&&!H.env("BLUEBIRD_WARNINGS")),K=!(0==H.env("BLUEBIRD_LONG_STACK_TRACES")||!z&&!H.env("BLUEBIRD_LONG_STACK_TRACES")),J=0!=H.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(X||!!H.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},e.prototype._notifyUnhandledRejectionIsHandled=function(){F("rejectionHandled",A,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),F("unhandledRejection",N,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return g(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=B();N="function"==typeof t?null===e?t:H.domainBind(e,t):void 0},e.onUnhandledRejectionHandled=function(t){var e=B();A="function"==typeof t?null===e?t:H.domainBind(e,t):void 0};var Y=function(){};e.longStackTraces=function(){if(U.haveItemsQueued()&&!st.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!st.longStackTraces&&R()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace,i=e.prototype._dereferenceTrace;st.longStackTraces=!0,Y=function(){if(U.haveItemsQueued()&&!st.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,e.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),U.enableTrampoline(),st.longStackTraces=!1},e.prototype._captureStackTrace=h,e.prototype._attachExtraTrace=_,e.prototype._dereferenceTrace=d,n.activateLongStackTraces(),U.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return st.longStackTraces&&R()};var Z=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return H.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};D.defineProperty(n,"promise",{value:e.promise}),D.defineProperty(n,"reason",{value:e.reason});var r=new CustomEvent(t.toLowerCase(),n);return!H.global.dispatchEvent(r)}}if("function"==typeof Event){var t=new Event("CustomEvent");return H.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,D.defineProperty(n,"promise",{value:e.promise}),D.defineProperty(n,"reason",{value:e.reason}),!H.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),H.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!H.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),tt=function(){return H.isNode?function(){return process.emit.apply(process,arguments)}:H.global?function(t){var e="on"+t.toLowerCase(),n=H.global[e];return n?(n.apply(H.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),et={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:r},nt=function(t){var e=!1;try{e=tt.apply(null,arguments)}catch(n){U.throwLater(n),e=!0}var r=!1;try{r=Z(t,et[t].apply(null,arguments))}catch(n){U.throwLater(n),r=!0}return r||e};e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&Y()),"warnings"in t){var n=t.warnings;st.warnings=!!n,J=st.warnings,H.isObject(n)&&"wForgottenReturn"in n&&(J=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!st.cancellation){if(U.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=l,e.prototype._propagateFrom=u,e.prototype._onCancel=s,e.prototype._setOnCancel=c,e.prototype._attachCancellationCallback=a,e.prototype._execute=o,rt=u,st.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!st.monitoring?(st.monitoring=!0,e.prototype._fireEvent=nt):!t.monitoring&&st.monitoring&&(st.monitoring=!1,e.prototype._fireEvent=i)),e},e.prototype._fireEvent=i,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._dereferenceTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var rt=p,it=function(){return!1},ot=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;H.inherits(O,Error),n.CapturedTrace=O,O.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;t-1>s?(c._parent=e[s+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=r-2;u>=0;--u)e[u]._length=l,l++;return}}}},O.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=k(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(w(i.stack.split("\n"))),i=i._parent;C(r),b(r),H.notEnumerableProp(t,"stack",m(n,r)),H.notEnumerableProp(t,"__stackCleaned__",!0)}};var at=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():T(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,M=t,W=e;var n=Error.captureStackTrace;return it=function(t){return Q.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return M=/@/,W=e,$=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(W=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?T(e):e.toString()},null):(M=t,W=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(L=function(t){console.warn(t)},H.isNode&&process.stderr.isTTY?L=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:H.isNode||"string"!=typeof(new Error).stack||(L=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var st={warnings:X,longStackTraces:!1,cancellation:!1,monitoring:!1};return K&&e.longStackTraces(),{longStackTraces:function(){return st.longStackTraces},warnings:function(){return st.warnings},cancellation:function(){return st.cancellation},monitoring:function(){return st.monitoring},propagateFromFunction:function(){return rt},boundValueFunction:function(){return f},checkForgottenReturns:v,setBounds:x,warn:g,deprecated:y,CapturedTrace:O,fireDomEvent:Z,fireGlobalEvent:tt}}},{"./errors":9,"./es5":10,"./util":21}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],9:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(p(this,"message","string"==typeof r?r:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return u(n,Error),n}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,a,s=t("./es5"),c=s.freeze,l=t("./util"),u=l.inherits,p=l.notEnumerableProp,f=r("Warning","warning"),h=r("CancellationError","cancellation error"),_=r("TimeoutError","timeout error"),d=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(v){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<y.length;++g)"function"==typeof Array.prototype[y[g]]&&(d.prototype[y[g]]=Array.prototype[y[g]]);s.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var m=0;d.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:h,TimeoutError:_,OperationalError:i,RejectionError:i,AggregateError:d}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":10,"./util":21}],10:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return a}},f=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:f,keys:s,names:s,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:p,isES5:r,propertyIsWritable:function(){return!0}}}},{}],11:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function o(t){this.finallyHandler=t}function a(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function s(){return l.call(this,this.promise._target()._settledValue())}function c(t){return a(this,t)?void 0:(f.e=t,f)}function l(t){var i=this.promise,l=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?l.call(i._boundValue()):l.call(i._boundValue(),t);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var h=n(u,i);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var _=new p("late cancellation observer");return i._attachExtraTrace(_),f.e=_,f}h.isPending()&&h._attachCancellationCallback(new o(this))}return h._then(s,c,void 0,this,void 0)}}}return i.isRejected()?(a(this),f.e=t,f):(a(this),t)}var u=t("./util"),p=e.CancellationError,f=u.errorObj,h=t("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new i(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,l,l)},e.prototype.tap=function(t){return this._passThrough(t,1,l)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,l);var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var a=arguments[r];if(!u.isObject(a))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(a)));i[o++]=a}i.length=o;var s=arguments[r];return this._passThrough(h(i,s,this),1,void 0,l)},i}},{"./catch_filter":5,"./util":21}],12:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":21}],13:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=a.isArray(l)?s(t).apply(u,l):s(t).call(u,l)}else c=s(t)();var p=r._popContext();return o.checkForgottenReturns(c,p,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":21}],14:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),i=0;i<n.length;++i){var o=n[i];p.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,c=t("./errors"),l=c.OperationalError,u=t("./es5"),p=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":9,"./es5":10,"./util":21}],15:[function(t,e,n){"use strict";e.exports=function(){function n(){}function r(t,e){if(null==t||t.constructor!==i)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new g("expecting a function but got "+h.classString(e))}function i(t){t!==b&&r(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function a(t){this.promise._rejectCallback(t,!1)}function s(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},p=function(t){return i.reject(new g(t))},f={},h=t("./util");c=h.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(i,"_getDomain",c);var _=t("./es5"),d=t("./async"),v=new d;_.defineProperty(i,"_async",{value:v});var y=t("./errors"),g=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var m=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var b=function(){},C={},w={},E=t("./thenables")(i,b),k=t("./promise_array")(i,b,E,p,n),j=t("./context")(i),F=(j.create,t("./debuggability")(i,j)),T=(F.CapturedTrace,t("./finally")(i,E,w)),P=t("./catch_filter")(w),R=t("./nodeback"),S=h.errorObj,x=h.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!h.isObject(o))return p("Catch statement predicate: expecting an object but got "+h.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,P(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(t,e){if(F.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.min.js:31:var n=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(n+=", "+h.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+h.classString(t)):this.all()._then(t,void 0,void 0,C,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new k(this).promise()},i.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=x(t)(R(e,n));return r===S&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new k(t).promise()},i.cast=function(t){var e=E(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new g("expecting a function but got "+h.classString(t));return v.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var a=void 0!==o,s=a?o:new i(b),l=this._target(),u=l._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var p=c();if(0!==(50397184&u)){var f,_,d=l._settlePromiseCtx;0!==(33554432&u)?(_=l._rejectionHandler0,f=t):0!==(16777216&u)?(_=l._fulfillmentHandler0,f=e,l._unsetRejectionIsUnhandled()):(d=l._settlePromiseLateCancellationObserver,_=new m("late cancellation observer"),l._attachExtraTrace(_),f=e),v.invoke(d,l,{handler:null===p?f:"function"==typeof f&&h.domainBind(p,f),promise:s,receiver:r,value:_})}else l._addCallbacks(t,e,s,r,p);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===f?void 0:void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=f),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=f),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:h.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:h.domainBind(i,e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=E(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var o=r._bitField;if(0===(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;a>s;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var c=new m("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},i.prototype._rejectCallback=function(t,e,n){var r=h.ensureErrorObject(t),i=r===t;if(!i&&!n&&F.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){if(t!==b){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===C?n&&"number"==typeof n.length?o=x(t).apply(this._boundValue(),n):(o=S,o.e=new g("cannot .spread() a non-array: "+h.classString(n))):o=x(t).call(e,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===w?r._reject(n):o===S?r._rejectCallback(o.e,!1):(F.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var a=t instanceof i,s=this._bitField,c=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=t,x(e).call(r,o)===S&&t._reject(S.e)):e===u?t._fulfill(u.call(r)):r instanceof n?r._promiseCancelled(t):a||t instanceof k?t._cancel():r.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):a&&(c&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():v.settlePromises(this),this._dereferenceTrace())}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?v.fatalError(t,h.isNode):void((65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){F.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:a}},h.notEnumerableProp(i,"_makeSelfResolutionError",l),t("./method")(i,b,E,p,F),t("./bind")(i,b,E,F),t("./cancel")(i,k,p,F),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,k,E,b,v,c),i.Promise=i,i.version="3.5.2",h.toFastProperties(i),h.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),F.setBounds(d.firstLineError,h.lastLineError),i}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var u=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(u,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;n>s;++s){var c=r(t[s],i);c instanceof e?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0===(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!==(33554432&a)?this._promiseFulfilled(c._value(),s):0!==(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":21}],17:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],18:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},a=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,c=process.nextTick;r=i.isRecentNode?function(t){s.call(global,t)}:function(t){c.call(process,t)}}else if("function"==typeof a&&"function"==typeof a.resolve){var l=a.resolve();r=function(t){l.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();e.exports=r},{"./util":21}],19:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],20:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(u(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(a(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function a(t){try{return p.call(t,"_promise0")}catch(e){return!1}}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,p,!0),s=null)}var s=new e(n),u=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var p=!0,f=c.tryCatch(r).call(t,o,a);return p=!1,s&&f===l&&(s._rejectCallback(f.e,!0,!0),s=null),u}var c=t("./util"),l=c.errorObj,u=c.isObject,p={}.hasOwnProperty;return r}},{"./util":21}],21:[function(t,e,n){"use strict";function r(){try{var t=R;return R=null,t.apply(this,arguments)}catch(e){return P.e=e,P}}function i(t){return R=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return o(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!F.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function u(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return F.defineProperty(t,e,r),t}function p(t){throw t}function f(t){try{if("function"==typeof t){var e=F.names(t.prototype),n=F.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&F.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function h(t){function e(){}function n(){return typeof r.foo}e.prototype=t;var r=new e;return n(),n(),t}function _(t){return N.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function g(t){try{u(t,"isOperational",!0)}catch(e){}}function m(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return y(t)&&F.propertyIsWritable(t,"stack")}function C(t){return{}.toString.call(t)}function w(t,e,n){for(var r=F.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{F.defineProperty(e,o,F.getDescriptor(t,o))}catch(a){}}}function E(t){return H?process.env[t]:void 0}function k(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}function j(t,e){return t.bind(e)}var F=t("./es5"),T="undefined"==typeof navigator,P={e:{}},R,S="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,x=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},O=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(F.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(a){return r}for(var s=0;s<o.length;++s){var c=o[s];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&r.push(c)}}t=F.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),A=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(v(t))}:function(t){if(b(t))return t;try{throw new Error(v(t))}catch(e){return e}}}(),B=function(t){return F.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};B=function(t){return F.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?U(t):null}}var I="undefined"!=typeof process&&"[object process]"===C(process).toLowerCase(),H="undefined"!=typeof process&&"undefined"!=typeof process.env,D={isClass:f,isIdentifier:_,inheritedDataKeys:O,getDataPropertyOrDefault:l,thrower:p,isArray:F.isArray,asArray:B,notEnumerableProp:u,isPrimitive:o,isObject:a,isError:y,canEvaluate:T,errorObj:P,tryCatch:i,inherits:x,withAppended:c,maybeWrapAsError:s,toFastProperties:h,filledRange:d,toString:v,canAttachTrace:b,ensureErrorObject:L,originatesFromRejection:m,markAsOriginatingFromRejection:g,classString:C,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:I,hasEnvVariables:H,env:E,global:S,getNativePromise:k,domainBind:j};D.isRecentNode=D.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),D.isNode&&D.toFastProperties(process);try{throw new Error}catch(V){D.lastLineError=V}e.exports=D},{"./es5":10}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-704-        } else {
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js:705:            var event = document.createEvent("CustomEvent");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-706-            event.initCustomEvent("testingtheevent", false, true, {});
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-708-            return function(name, event) {
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js:709:                var domEvent = document.createEvent("CustomEvent");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-710-                domEvent.initCustomEvent(name.toLowerCase(), false, true,
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-3186-    schedule = (function() {
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js:3187:        var div = document.createElement("div");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-3188-        var opts = {attributes: true};
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-3189-        var toggleScheduled = false;
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js:3190:        var div2 = document.createElement("div");
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-3191-        var o2 = new MutationObserver(function() {
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-3622-    return obj;
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js:3623:    eval(obj);
/src/demo/ts-demo/node_modules/bluebird/js/browser/bluebird.core.js-3624-}
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/release/debuggability.js-179-        } else {
/src/demo/ts-demo/node_modules/bluebird/js/release/debuggability.js:180:            var event = document.createEvent("CustomEvent");
/src/demo/ts-demo/node_modules/bluebird/js/release/debuggability.js-181-            event.initCustomEvent("testingtheevent", false, true, {});
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/release/debuggability.js-183-            return function(name, event) {
/src/demo/ts-demo/node_modules/bluebird/js/release/debuggability.js:184:                var domEvent = document.createEvent("CustomEvent");
/src/demo/ts-demo/node_modules/bluebird/js/release/debuggability.js-185-                domEvent.initCustomEvent(name.toLowerCase(), false, true,
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/release/util.js-204-    return obj;
/src/demo/ts-demo/node_modules/bluebird/js/release/util.js:205:    eval(obj);
/src/demo/ts-demo/node_modules/bluebird/js/release/util.js-206-}
##############################################
/src/demo/ts-demo/node_modules/bluebird/js/release/schedule.js-24-    schedule = (function() {
/src/demo/ts-demo/node_modules/bluebird/js/release/schedule.js:25:        var div = document.createElement("div");
/src/demo/ts-demo/node_modules/bluebird/js/release/schedule.js-26-        var opts = {attributes: true};
/src/demo/ts-demo/node_modules/bluebird/js/release/schedule.js-27-        var toggleScheduled = false;
/src/demo/ts-demo/node_modules/bluebird/js/release/schedule.js:28:        var div2 = document.createElement("div");
/src/demo/ts-demo/node_modules/bluebird/js/release/schedule.js-29-        var o2 = new MutationObserver(function() {
##############################################
/src/demo/ts-demo/node_modules/for-in/README.md-2-
/src/demo/ts-demo/node_modules/for-in/README.md:3:> Iterate over the own and inherited enumerable properties of an object, and return an object with properties that evaluate to true from the callback. Exit early by returning `false`. JavaScript/Node.js
/src/demo/ts-demo/node_modules/for-in/README.md-4-
##############################################
/src/demo/ts-demo/node_modules/for-in/README.md-39-* [collection-map](https://www.npmjs.com/package/collection-map): Returns an array of mapped values from an array or object. | [homepage](https://github.com/jonschlinkert/collection-map "Returns an array of mapped values from an array or object.")
/src/demo/ts-demo/node_modules/for-in/README.md:40:* [for-own](https://www.npmjs.com/package/for-own): Iterate over the own enumerable properties of an object, and return an object with properties… [more](https://github.com/jonschlinkert/for-own) | [homepage](https://github.com/jonschlinkert/for-own "Iterate over the own enumerable properties of an object, and return an object with properties that evaluate to true from the callback. Exit early by returning `false`. JavaScript/Node.js.")
/src/demo/ts-demo/node_modules/for-in/README.md-41-
##############################################
/src/demo/ts-demo/node_modules/for-in/package.json-48-  ],
/src/demo/ts-demo/node_modules/for-in/package.json:49:  "description": "Iterate over the own and inherited enumerable properties of an object, and return an object with properties that evaluate to true from the callback. Exit early by returning `false`. JavaScript/Node.js",
/src/demo/ts-demo/node_modules/for-in/package.json-50-  "devDependencies": {
##############################################
/src/demo/ts-demo/node_modules/lodash/wrapperLodash.js-27- *
/src/demo/ts-demo/node_modules/lodash/wrapperLodash.js:28: * Lazy evaluation allows several methods to support shortcut fusion.
/src/demo/ts-demo/node_modules/lodash/wrapperLodash.js-29- * Shortcut fusion is an optimization to merge iteratee calls; this avoids
##############################################
/src/demo/ts-demo/node_modules/lodash/_assignValue.js-11- * Assigns `value` to `key` of `object` if the existing value is not equivalent
/src/demo/ts-demo/node_modules/lodash/_assignValue.js:12: * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/_assignValue.js-13- * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/indexOf.js-8- * Gets the index at which the first occurrence of `value` is found in `array`
/src/demo/ts-demo/node_modules/lodash/indexOf.js:9: * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/indexOf.js-10- * for equality comparisons. If `fromIndex` is negative, it's used as the
##############################################
/src/demo/ts-demo/node_modules/lodash/pull.js-5- * Removes all given values from `array` using
/src/demo/ts-demo/node_modules/lodash/pull.js:6: * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/pull.js-7- * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/union.js-7- * Creates an array of unique values, in order, from all given arrays using
/src/demo/ts-demo/node_modules/lodash/union.js:8: * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/union.js-9- * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/sortedLastIndex.js-12- * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/sortedLastIndex.js:13: * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/sortedLastIndex.js-14- * @returns {number} Returns the index at which `value` should be inserted
##############################################
/src/demo/ts-demo/node_modules/lodash/core.js-250-   *
/src/demo/ts-demo/node_modules/lodash/core.js:251:   * Lazy evaluation allows several methods to support shortcut fusion.
/src/demo/ts-demo/node_modules/lodash/core.js-252-   * Shortcut fusion is an optimization to merge iteratee calls; this avoids
##############################################
/src/demo/ts-demo/node_modules/lodash/core.js-403-   * Assigns `value` to `key` of `object` if the existing value is not equivalent
/src/demo/ts-demo/node_modules/lodash/core.js:404:   * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/core.js-405-   * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/core.js-1630-   * Gets the index at which the first occurrence of `value` is found in `array`
/src/demo/ts-demo/node_modules/lodash/core.js:1631:   * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/core.js-1632-   * for equality comparisons. If `fromIndex` is negative, it's used as the
##############################################
/src/demo/ts-demo/node_modules/lodash/core.js-2420-   * Performs a
/src/demo/ts-demo/node_modules/lodash/core.js:2421:   * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/core.js-2422-   * comparison between two values to determine if they are equivalent.
##############################################
/src/demo/ts-demo/node_modules/lodash/core.js-2491-   *
/src/demo/ts-demo/node_modules/lodash/core.js:2492:   * _.isArray(document.body.children);
/src/demo/ts-demo/node_modules/lodash/core.js-2493-   * // => false
##############################################
/src/demo/ts-demo/node_modules/lodash/core.js-2518-   *
/src/demo/ts-demo/node_modules/lodash/core.js:2519:   * _.isArrayLike(document.body.children);
/src/demo/ts-demo/node_modules/lodash/core.js-2520-   * // => true
##############################################
/src/demo/ts-demo/node_modules/lodash/sortedLastIndexBy.js-13- * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/sortedLastIndexBy.js:14: * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/sortedLastIndexBy.js-15- * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/lodash/cloneDeepWith.js-25- *
/src/demo/ts-demo/node_modules/lodash/cloneDeepWith.js:26: * var el = _.cloneDeepWith(document.body, customizer);
/src/demo/ts-demo/node_modules/lodash/cloneDeepWith.js-27- *
/src/demo/ts-demo/node_modules/lodash/cloneDeepWith.js:28: * console.log(el === document.body);
/src/demo/ts-demo/node_modules/lodash/cloneDeepWith.js-29- * // => false
##############################################
/src/demo/ts-demo/node_modules/lodash/difference.js-7- * Creates an array of `array` values not included in the other given arrays
/src/demo/ts-demo/node_modules/lodash/difference.js:8: * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/difference.js-9- * for equality comparisons. The order and references of result values are
##############################################
/src/demo/ts-demo/node_modules/lodash/_baseSortedIndexBy.js-17- * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/_baseSortedIndexBy.js:18: * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/_baseSortedIndexBy.js-19- * @param {Function} iteratee The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/lodash/isArray.js-14- *
/src/demo/ts-demo/node_modules/lodash/isArray.js:15: * _.isArray(document.body.children);
/src/demo/ts-demo/node_modules/lodash/isArray.js-16- * // => false
##############################################
/src/demo/ts-demo/node_modules/lodash/sortedIndexBy.js-13- * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/sortedIndexBy.js:14: * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/sortedIndexBy.js-15- * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/lodash/cloneWith.js-27- *
/src/demo/ts-demo/node_modules/lodash/cloneWith.js:28: * var el = _.cloneWith(document.body, customizer);
/src/demo/ts-demo/node_modules/lodash/cloneWith.js-29- *
/src/demo/ts-demo/node_modules/lodash/cloneWith.js:30: * console.log(el === document.body);
/src/demo/ts-demo/node_modules/lodash/cloneWith.js-31- * // => false
##############################################
/src/demo/ts-demo/node_modules/lodash/_LazyWrapper.js-7-/**
/src/demo/ts-demo/node_modules/lodash/_LazyWrapper.js:8: * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.
/src/demo/ts-demo/node_modules/lodash/_LazyWrapper.js-9- *
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.min.js-78-return n({},"",{}),n}catch(n){}}(),ki=mn.clearTimeout!==$n.clearTimeout&&mn.clearTimeout,Ei=Gu&&Gu.now!==$n.Date.now&&Gu.now,Si=mn.setTimeout!==$n.setTimeout&&mn.setTimeout,Oi=Yu.ceil,Ii=Yu.floor,Ri=Qu.getOwnPropertySymbols,zi=pi?pi.isBuffer:T,Wi=mn.isFinite,Ui=ri.join,Bi=U(Qu.keys,Qu),Li=Yu.max,Ci=Yu.min,Di=Gu.now,Mi=mn.parseInt,Ti=Yu.random,$i=ri.reverse,Fi=je(mn,"DataView"),Ni=je(mn,"Map"),Pi=je(mn,"Promise"),Zi=je(mn,"Set"),qi=je(mn,"WeakMap"),Vi=je(Qu,"create"),Ki=qi&&new qi,Gi={},Hi=Te(Fi),Ji=Te(Ni),Yi=Te(Pi),Qi=Te(Zi),Xi=Te(qi),no=_i?_i.prototype:T,to=no?no.valueOf:T,ro=no?no.toString:T,eo=function(){
/src/demo/ts-demo/node_modules/lodash/lodash.min.js:79:function n(){}return function(t){return du(t)?yi?yi(t):(n.prototype=t,t=new n,n.prototype=T,t):{}}}();An.templateSettings={escape:J,evaluate:Y,interpolate:Q,variable:"",imports:{_:An}},An.prototype=kn.prototype,An.prototype.constructor=An,On.prototype=eo(kn.prototype),On.prototype.constructor=On,Ln.prototype=eo(kn.prototype),Ln.prototype.constructor=Ln,Mn.prototype.clear=function(){this.__data__=Vi?Vi(null):{},this.size=0},Mn.prototype.delete=function(n){return n=this.has(n)&&delete this.__data__[n],
/src/demo/ts-demo/node_modules/lodash/lodash.min.js-80-this.size-=n?1:0,n},Mn.prototype.get=function(n){var t=this.__data__;return Vi?(n=t[n],"__lodash_hash_undefined__"===n?T:n):oi.call(t,n)?t[n]:T},Mn.prototype.has=function(n){var t=this.__data__;return Vi?t[n]!==T:oi.call(t,n)},Mn.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=Vi&&t===T?"__lodash_hash_undefined__":t,this},Tn.prototype.clear=function(){this.__data__=[],this.size=0},Tn.prototype.delete=function(n){var t=this.__data__;return n=ft(t,n),!(0>n)&&(n==t.length-1?t.pop():xi.call(t,n,1),
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.min.js-122-return vr(n,t,ye(r,2),true)},An.sortedLastIndexOf=function(n,t){if(null==n?0:n.length){var r=_r(n,t,true)-1;if(lu(n[r],t))return r}return-1},An.startCase=Mf,An.startsWith=function(n,t,r){return n=Iu(n),r=null==r?0:pt(ku(r),0,n.length),t=yr(t),n.slice(r,r+t.length)==t},An.subtract=uc,An.sum=function(n){return n&&n.length?m(n,$u):0},An.sumBy=function(n,t){return n&&n.length?m(n,ye(t,2)):0},An.template=function(n,t,r){var e=An.templateSettings;r&&Oe(n,t,r)&&(t=T),n=Iu(n),t=bf({},t,e,ce),r=bf({},t.imports,e.imports,ce);
/src/demo/ts-demo/node_modules/lodash/lodash.min.js:123:var u,i,o=Wu(r),f=S(r,o),c=0;r=t.interpolate||jn;var a="__p+='";r=Xu((t.escape||jn).source+"|"+r.source+"|"+(r===Q?pn:jn).source+"|"+(t.evaluate||jn).source+"|$","g");var l="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,o,f,l){return e||(e=o),a+=n.slice(c,l).replace(wn,z),r&&(u=true,a+="'+__e("+r+")+'"),f&&(i=true,a+="';"+f+";\n__p+='"),e&&(a+="'+((__t=("+e+"))==null?'':__t)+'"),c=l+t.length,t}),a+="';",(t=t.variable)||(a="with(obj){"+a+"}"),a=(i?a.replace(P,""):a).replace(Z,"$1").replace(q,"$1;"),
/src/demo/ts-demo/node_modules/lodash/lodash.min.js-124-a="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(u?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+a+"return __p}",t=Ff(function(){return Ju(o,l+"return "+a).apply(T,f)}),t.source=a,pu(t))throw t;return t},An.times=function(n,t){if(n=ku(n),1>n||9007199254740991<n)return[];var r=4294967295,e=Ci(n,4294967295);for(t=ye(t),n-=4294967295,e=A(e,t);++r<n;)t(r);return e},An.toFinite=Au,An.toInteger=ku,An.toLength=Eu,An.toLower=function(n){
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-1544-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:1545:     * Lazy evaluation allows several methods to support shortcut fusion.
/src/demo/ts-demo/node_modules/lodash/lodash.js-1546-     * Shortcut fusion is an optimization to merge iteratee calls; this avoids
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-1727-      /**
/src/demo/ts-demo/node_modules/lodash/lodash.js:1728:       * Used to detect code to be evaluated.
/src/demo/ts-demo/node_modules/lodash/lodash.js-1729-       *
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-1732-       */
/src/demo/ts-demo/node_modules/lodash/lodash.js:1733:      'evaluate': reEvaluate,
/src/demo/ts-demo/node_modules/lodash/lodash.js-1734-
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-1778-    /**
/src/demo/ts-demo/node_modules/lodash/lodash.js:1779:     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.
/src/demo/ts-demo/node_modules/lodash/lodash.js-1780-     *
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-2462-     * Assigns `value` to `key` of `object` if the existing value is not equivalent
/src/demo/ts-demo/node_modules/lodash/lodash.js:2463:     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-2464-     * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-4097-     * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/lodash.js:4098:     * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/lodash.js-4099-     * @param {boolean} [retHighest] Specify returning the highest qualified index.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-4130-     * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/lodash.js:4131:     * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/lodash.js-4132-     * @param {Function} iteratee The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-6929-     * Creates an array of `array` values not included in the other given arrays
/src/demo/ts-demo/node_modules/lodash/lodash.js:6930:     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-6931-     * for equality comparisons. The order and references of result values are
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-7430-     * Gets the index at which the first occurrence of `value` is found in `array`
/src/demo/ts-demo/node_modules/lodash/lodash.js:7431:     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-7432-     * for equality comparisons. If `fromIndex` is negative, it's used as the
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-7484-     * Creates an array of unique values that are included in all given arrays
/src/demo/ts-demo/node_modules/lodash/lodash.js:7485:     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-7486-     * for equality comparisons. The order and references of result values are
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-7678-     * Removes all given values from `array` using
/src/demo/ts-demo/node_modules/lodash/lodash.js:7679:     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-7680-     * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-7937-     * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/lodash.js:7938:     * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/lodash.js-7939-     * @returns {number} Returns the index at which `value` should be inserted
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-7959-     * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/lodash.js:7960:     * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/lodash.js-7961-     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-8015-     * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/lodash.js:8016:     * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/lodash.js-8017-     * @returns {number} Returns the index at which `value` should be inserted
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-8037-     * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/lodash.js:8038:     * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/lodash.js-8039-     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-8297-     * Creates an array of unique values, in order, from all given arrays using
/src/demo/ts-demo/node_modules/lodash/lodash.js:8298:     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-8299-     * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-8375-     * Creates a duplicate-free version of an array, using
/src/demo/ts-demo/node_modules/lodash/lodash.js:8376:     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-8377-     * for equality comparisons, in which only the first occurrence of each element
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-8518-     * Creates an array excluding all given values using
/src/demo/ts-demo/node_modules/lodash/lodash.js:8519:     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-8520-     * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-9405-     * checked for a substring of `value`, otherwise
/src/demo/ts-demo/node_modules/lodash/lodash.js:9406:     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-9407-     * is used for equality comparisons. If `fromIndex` is negative, it's used as
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-11055-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11056:     * var el = _.cloneWith(document.body, customizer);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11057-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11058:     * console.log(el === document.body);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11059-     * // => false
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-11110-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11111:     * var el = _.cloneDeepWith(document.body, customizer);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11112-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11113:     * console.log(el === document.body);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11114-     * // => false
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-11154-     * Performs a
/src/demo/ts-demo/node_modules/lodash/lodash.js:11155:     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/lodash.js-11156-     * comparison between two values to determine if they are equivalent.
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-11277-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11278:     * _.isArray(document.body.children);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11279-     * // => false
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-11323-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11324:     * _.isArrayLike(document.body.children);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11325-     * // => true
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-11352-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11353:     * _.isArrayLikeObject(document.body.children);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11354-     * // => true
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-11436-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:11437:     * _.isElement(document.body);
/src/demo/ts-demo/node_modules/lodash/lodash.js-11438-     * // => true
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-14669-     * in "interpolate" delimiters, HTML-escape interpolated data properties in
/src/demo/ts-demo/node_modules/lodash/lodash.js:14670:     * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
/src/demo/ts-demo/node_modules/lodash/lodash.js-14671-     * properties may be accessed as free variables in the template. If a setting
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-14691-     *  The HTML "escape" delimiter.
/src/demo/ts-demo/node_modules/lodash/lodash.js:14692:     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]
/src/demo/ts-demo/node_modules/lodash/lodash.js:14693:     *  The "evaluate" delimiter.
/src/demo/ts-demo/node_modules/lodash/lodash.js-14694-     * @param {Object} [options.imports=_.templateSettings.imports]
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-14715-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:14716:     * // Use the "evaluate" delimiter to execute JavaScript and generate HTML.
/src/demo/ts-demo/node_modules/lodash/lodash.js-14717-     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-14720-     *
/src/demo/ts-demo/node_modules/lodash/lodash.js:14721:     * // Use the internal `print` function in "evaluate" delimiters.
/src/demo/ts-demo/node_modules/lodash/lodash.js-14722-     * var compiled = _.template('<% print("hello " + user); %>!');
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-14797-        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
/src/demo/ts-demo/node_modules/lodash/lodash.js:14798:        (options.evaluate || reNoMatch).source + '|$'
/src/demo/ts-demo/node_modules/lodash/lodash.js-14799-      , 'g');
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-14807-
/src/demo/ts-demo/node_modules/lodash/lodash.js:14808:      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
/src/demo/ts-demo/node_modules/lodash/lodash.js-14809-        interpolateValue || (interpolateValue = esTemplateValue);
##############################################
/src/demo/ts-demo/node_modules/lodash/lodash.js-14818-        }
/src/demo/ts-demo/node_modules/lodash/lodash.js:14819:        if (evaluateValue) {
/src/demo/ts-demo/node_modules/lodash/lodash.js-14820-          isEvaluating = true;
/src/demo/ts-demo/node_modules/lodash/lodash.js:14821:          source += "';\n" + evaluateValue + ";\n__p += '";
/src/demo/ts-demo/node_modules/lodash/lodash.js-14822-        }
##############################################
/src/demo/ts-demo/node_modules/lodash/includes.js-12- * checked for a substring of `value`, otherwise
/src/demo/ts-demo/node_modules/lodash/includes.js:13: * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/includes.js-14- * is used for equality comparisons. If `fromIndex` is negative, it's used as
##############################################
/src/demo/ts-demo/node_modules/lodash/_baseSortedIndex.js-15- * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/_baseSortedIndex.js:16: * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/_baseSortedIndex.js-17- * @param {boolean} [retHighest] Specify returning the highest qualified index.
##############################################
/src/demo/ts-demo/node_modules/lodash/templateSettings.js-25-  /**
/src/demo/ts-demo/node_modules/lodash/templateSettings.js:26:   * Used to detect code to be evaluated.
/src/demo/ts-demo/node_modules/lodash/templateSettings.js-27-   *
##############################################
/src/demo/ts-demo/node_modules/lodash/templateSettings.js-30-   */
/src/demo/ts-demo/node_modules/lodash/templateSettings.js:31:  'evaluate': reEvaluate,
/src/demo/ts-demo/node_modules/lodash/templateSettings.js-32-
##############################################
/src/demo/ts-demo/node_modules/lodash/without.js-6- * Creates an array excluding all given values using
/src/demo/ts-demo/node_modules/lodash/without.js:7: * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/without.js-8- * for equality comparisons.
##############################################
/src/demo/ts-demo/node_modules/lodash/sortedIndex.js-11- * @param {Array} array The sorted array to inspect.
/src/demo/ts-demo/node_modules/lodash/sortedIndex.js:12: * @param {*} value The value to evaluate.
/src/demo/ts-demo/node_modules/lodash/sortedIndex.js-13- * @returns {number} Returns the index at which `value` should be inserted
##############################################
/src/demo/ts-demo/node_modules/lodash/template.js-32- * in "interpolate" delimiters, HTML-escape interpolated data properties in
/src/demo/ts-demo/node_modules/lodash/template.js:33: * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
/src/demo/ts-demo/node_modules/lodash/template.js-34- * properties may be accessed as free variables in the template. If a setting
##############################################
/src/demo/ts-demo/node_modules/lodash/template.js-54- *  The HTML "escape" delimiter.
/src/demo/ts-demo/node_modules/lodash/template.js:55: * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]
/src/demo/ts-demo/node_modules/lodash/template.js:56: *  The "evaluate" delimiter.
/src/demo/ts-demo/node_modules/lodash/template.js-57- * @param {Object} [options.imports=_.templateSettings.imports]
##############################################
/src/demo/ts-demo/node_modules/lodash/template.js-78- *
/src/demo/ts-demo/node_modules/lodash/template.js:79: * // Use the "evaluate" delimiter to execute JavaScript and generate HTML.
/src/demo/ts-demo/node_modules/lodash/template.js-80- * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
##############################################
/src/demo/ts-demo/node_modules/lodash/template.js-83- *
/src/demo/ts-demo/node_modules/lodash/template.js:84: * // Use the internal `print` function in "evaluate" delimiters.
/src/demo/ts-demo/node_modules/lodash/template.js-85- * var compiled = _.template('<% print("hello " + user); %>!');
##############################################
/src/demo/ts-demo/node_modules/lodash/template.js-160-    (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
/src/demo/ts-demo/node_modules/lodash/template.js:161:    (options.evaluate || reNoMatch).source + '|$'
/src/demo/ts-demo/node_modules/lodash/template.js-162-  , 'g');
##############################################
/src/demo/ts-demo/node_modules/lodash/template.js-166-
/src/demo/ts-demo/node_modules/lodash/template.js:167:  string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
/src/demo/ts-demo/node_modules/lodash/template.js-168-    interpolateValue || (interpolateValue = esTemplateValue);
##############################################
/src/demo/ts-demo/node_modules/lodash/template.js-177-    }
/src/demo/ts-demo/node_modules/lodash/template.js:178:    if (evaluateValue) {
/src/demo/ts-demo/node_modules/lodash/template.js-179-      isEvaluating = true;
/src/demo/ts-demo/node_modules/lodash/template.js:180:      source += "';\n" + evaluateValue + ";\n__p += '";
/src/demo/ts-demo/node_modules/lodash/template.js-181-    }
##############################################
/src/demo/ts-demo/node_modules/lodash/eq.js-2- * Performs a
/src/demo/ts-demo/node_modules/lodash/eq.js:3: * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/eq.js-4- * comparison between two values to determine if they are equivalent.
##############################################
/src/demo/ts-demo/node_modules/lodash/isElement.js-14- *
/src/demo/ts-demo/node_modules/lodash/isElement.js:15: * _.isElement(document.body);
/src/demo/ts-demo/node_modules/lodash/isElement.js-16- * // => true
##############################################
/src/demo/ts-demo/node_modules/lodash/isArrayLikeObject.js-19- *
/src/demo/ts-demo/node_modules/lodash/isArrayLikeObject.js:20: * _.isArrayLikeObject(document.body.children);
/src/demo/ts-demo/node_modules/lodash/isArrayLikeObject.js-21- * // => true
##############################################
/src/demo/ts-demo/node_modules/lodash/intersection.js-7- * Creates an array of unique values that are included in all given arrays
/src/demo/ts-demo/node_modules/lodash/intersection.js:8: * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/intersection.js-9- * for equality comparisons. The order and references of result values are
##############################################
/src/demo/ts-demo/node_modules/lodash/uniq.js-4- * Creates a duplicate-free version of an array, using
/src/demo/ts-demo/node_modules/lodash/uniq.js:5: * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
/src/demo/ts-demo/node_modules/lodash/uniq.js-6- * for equality comparisons, in which only the first occurrence of each element
##############################################
/src/demo/ts-demo/node_modules/lodash/isArrayLike.js-19- *
/src/demo/ts-demo/node_modules/lodash/isArrayLike.js:20: * _.isArrayLike(document.body.children);
/src/demo/ts-demo/node_modules/lodash/isArrayLike.js-21- * // => true
##############################################
/src/demo/ts-demo/node_modules/graceful-fs/README.md-92-
/src/demo/ts-demo/node_modules/graceful-fs/README.md:93:* Monkey-patch fs, because the eval approach no longer works on recent
/src/demo/ts-demo/node_modules/graceful-fs/README.md-94-  node.
##############################################
/src/demo/ts-demo/node_modules/graceful-fs/README.md-101-
/src/demo/ts-demo/node_modules/graceful-fs/README.md:102:* Use eval rather than monkey-patching fs.
/src/demo/ts-demo/node_modules/graceful-fs/README.md-103-* readdir: Always sort the results
##############################################
/src/demo/ts-demo/node_modules/public-encrypt/node_modules/safe-buffer/index.d.ts-143-     * @param string string to test.
/src/demo/ts-demo/node_modules/public-encrypt/node_modules/safe-buffer/index.d.ts:144:     * @param encoding encoding used to evaluate (defaults to 'utf8')
/src/demo/ts-demo/node_modules/public-encrypt/node_modules/safe-buffer/index.d.ts-145-     */
##############################################
/src/demo/ts-demo/node_modules/underscore/package.json-73-    "lint": "eslint underscore.js test/*.js",
/src/demo/ts-demo/node_modules/underscore/package.json:74:    "minify": "uglifyjs underscore.js -c \"evaluate=false\" --comments \"/    .*/\" -m",
/src/demo/ts-demo/node_modules/underscore/package.json-75-    "test": "npm run lint && npm run test-node",
##############################################
/src/demo/ts-demo/node_modules/underscore/underscore-min.js-4-//     Underscore may be freely distributed under the MIT license.
/src/demo/ts-demo/node_modules/underscore/underscore-min.js:5:!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},r=n._,e=Array.prototype,o=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,u=e.push,c=e.slice,p=o.toString,i=o.hasOwnProperty,t=Array.isArray,a=Object.keys,l=Object.create,f=function(){},h=function(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)};"undefined"==typeof exports||exports.nodeType?n._=h:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=h),exports._=h),h.VERSION="1.9.1";var v,y=function(u,i,n){if(void 0===i)return u;switch(null==n?3:n){case 1:return function(n){return u.call(i,n)};case 3:return function(n,r,t){return u.call(i,n,r,t)};case 4:return function(n,r,t,e){return u.call(i,n,r,t,e)}}return function(){return u.apply(i,arguments)}},d=function(n,r,t){return h.iteratee!==v?h.iteratee(n,r):null==n?h.identity:h.isFunction(n)?y(n,r,t):h.isObject(n)&&!h.isArray(n)?h.matcher(n):h.property(n)};h.iteratee=v=function(n,r){return d(n,r,1/0)};var g=function(u,i){return i=null==i?u.length-1:+i,function(){for(var n=Math.max(arguments.length-i,0),r=Array(n),t=0;t<n;t++)r[t]=arguments[t+i];switch(i){case 0:return u.call(this,r);case 1:return u.call(this,arguments[0],r);case 2:return u.call(this,arguments[0],arguments[1],r)}var e=Array(i+1);for(t=0;t<i;t++)e[t]=arguments[t];return e[i]=r,u.apply(this,e)}},m=function(n){if(!h.isObject(n))return{};if(l)return l(n);f.prototype=n;var r=new f;return f.prototype=null,r},b=function(r){return function(n){return null==n?void 0:n[r]}},j=function(n,r){return null!=n&&i.call(n,r)},x=function(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0},_=Math.pow(2,53)-1,A=b("length"),w=function(n){var r=A(n);return"number"==typeof r&&0<=r&&r<=_};h.each=h.forEach=function(n,r,t){var e,u;if(r=y(r,t),w(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var i=h.keys(n);for(e=0,u=i.length;e<u;e++)r(n[i[e]],i[e],n)}return n},h.map=h.collect=function(n,r,t){r=d(r,t);for(var e=!w(n)&&h.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=r(n[a],a,n)}return i};var O=function(c){return function(n,r,t,e){var u=3<=arguments.length;return function(n,r,t,e){var u=!w(n)&&h.keys(n),i=(u||n).length,o=0<c?0:i-1;for(e||(t=n[u?u[o]:o],o+=c);0<=o&&o<i;o+=c){var a=u?u[o]:o;t=r(t,n[a],a,n)}return t}(n,y(r,e,4),t,u)}};h.reduce=h.foldl=h.inject=O(1),h.reduceRight=h.foldr=O(-1),h.find=h.detect=function(n,r,t){var e=(w(n)?h.findIndex:h.findKey)(n,r,t);if(void 0!==e&&-1!==e)return n[e]},h.filter=h.select=function(n,e,r){var u=[];return e=d(e,r),h.each(n,function(n,r,t){e(n,r,t)&&u.push(n)}),u},h.reject=function(n,r,t){return h.filter(n,h.negate(d(r)),t)},h.every=h.all=function(n,r,t){r=d(r,t);for(var e=!w(n)&&h.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!r(n[o],o,n))return!1}return!0},h.some=h.any=function(n,r,t){r=d(r,t);for(var e=!w(n)&&h.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(r(n[o],o,n))return!0}return!1},h.contains=h.includes=h.include=function(n,r,t,e){return w(n)||(n=h.values(n)),("number"!=typeof t||e)&&(t=0),0<=h.indexOf(n,r,t)},h.invoke=g(function(n,t,e){var u,i;return h.isFunction(t)?i=t:h.isArray(t)&&(u=t.slice(0,-1),t=t[t.length-1]),h.map(n,function(n){var r=i;if(!r){if(u&&u.length&&(n=x(n,u)),null==n)return;r=n[t]}return null==r?r:r.apply(n,e)})}),h.pluck=function(n,r){return h.map(n,h.property(r))},h.where=function(n,r){return h.filter(n,h.matcher(r))},h.findWhere=function(n,r){return h.find(n,h.matcher(r))},h.max=function(n,e,r){var t,u,i=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=w(n)?n:h.values(n)).length;a<c;a++)null!=(t=n[a])&&i<t&&(i=t);else e=d(e,r),h.each(n,function(n,r,t){u=e(n,r,t),(o<u||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},h.min=function(n,e,r){var t,u,i=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=w(n)?n:h.values(n)).length;a<c;a++)null!=(t=n[a])&&t<i&&(i=t);else e=d(e,r),h.each(n,function(n,r,t){((u=e(n,r,t))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},h.shuffle=function(n){return h.sample(n,1/0)},h.sample=function(n,r,t){if(null==r||t)return w(n)||(n=h.values(n)),n[h.random(n.length-1)];var e=w(n)?h.clone(n):h.values(n),u=A(e);r=Math.max(Math.min(r,u),0);for(var i=u-1,o=0;o<r;o++){var a=h.random(o,i),c=e[o];e[o]=e[a],e[a]=c}return e.slice(0,r)},h.sortBy=function(n,e,r){var u=0;return e=d(e,r),h.pluck(h.map(n,function(n,r,t){return{value:n,index:u++,criteria:e(n,r,t)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(e<t||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")};var k=function(o,r){return function(e,u,n){var i=r?[[],[]]:{};return u=d(u,n),h.each(e,function(n,r){var t=u(n,r,e);o(i,n,t)}),i}};h.groupBy=k(function(n,r,t){j(n,t)?n[t].push(r):n[t]=[r]}),h.indexBy=k(function(n,r,t){n[t]=r}),h.countBy=k(function(n,r,t){j(n,t)?n[t]++:n[t]=1});var S=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;h.toArray=function(n){return n?h.isArray(n)?c.call(n):h.isString(n)?n.match(S):w(n)?h.map(n,h.identity):h.values(n):[]},h.size=function(n){return null==n?0:w(n)?n.length:h.keys(n).length},h.partition=k(function(n,r,t){n[t?0:1].push(r)},!0),h.first=h.head=h.take=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[0]:h.initial(n,n.length-r)},h.initial=function(n,r,t){return c.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))},h.last=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[n.length-1]:h.rest(n,Math.max(0,n.length-r))},h.rest=h.tail=h.drop=function(n,r,t){return c.call(n,null==r||t?1:r)},h.compact=function(n){return h.filter(n,Boolean)};var M=function(n,r,t,e){for(var u=(e=e||[]).length,i=0,o=A(n);i<o;i++){var a=n[i];if(w(a)&&(h.isArray(a)||h.isArguments(a)))if(r)for(var c=0,l=a.length;c<l;)e[u++]=a[c++];else M(a,r,t,e),u=e.length;else t||(e[u++]=a)}return e};h.flatten=function(n,r){return M(n,r,!1)},h.without=g(function(n,r){return h.difference(n,r)}),h.uniq=h.unique=function(n,r,t,e){h.isBoolean(r)||(e=t,t=r,r=!1),null!=t&&(t=d(t,e));for(var u=[],i=[],o=0,a=A(n);o<a;o++){var c=n[o],l=t?t(c,o,n):c;r&&!t?(o&&i===l||u.push(c),i=l):t?h.contains(i,l)||(i.push(l),u.push(c)):h.contains(u,c)||u.push(c)}return u},h.union=g(function(n){return h.uniq(M(n,!0,!0))}),h.intersection=function(n){for(var r=[],t=arguments.length,e=0,u=A(n);e<u;e++){var i=n[e];if(!h.contains(r,i)){var o;for(o=1;o<t&&h.contains(arguments[o],i);o++);o===t&&r.push(i)}}return r},h.difference=g(function(n,r){return r=M(r,!0,!0),h.filter(n,function(n){return!h.contains(r,n)})}),h.unzip=function(n){for(var r=n&&h.max(n,A).length||0,t=Array(r),e=0;e<r;e++)t[e]=h.pluck(n,e);return t},h.zip=g(h.unzip),h.object=function(n,r){for(var t={},e=0,u=A(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t};var F=function(i){return function(n,r,t){r=d(r,t);for(var e=A(n),u=0<i?0:e-1;0<=u&&u<e;u+=i)if(r(n[u],u,n))return u;return-1}};h.findIndex=F(1),h.findLastIndex=F(-1),h.sortedIndex=function(n,r,t,e){for(var u=(t=d(t,e,1))(r),i=0,o=A(n);i<o;){var a=Math.floor((i+o)/2);t(n[a])<u?i=a+1:o=a}return i};var E=function(i,o,a){return function(n,r,t){var e=0,u=A(n);if("number"==typeof t)0<i?e=0<=t?t:Math.max(t+u,e):u=0<=t?Math.min(t+1,u):t+u+1;else if(a&&t&&u)return n[t=a(n,r)]===r?t:-1;if(r!=r)return 0<=(t=o(c.call(n,e,u),h.isNaN))?t+e:-1;for(t=0<i?e:u-1;0<=t&&t<u;t+=i)if(n[t]===r)return t;return-1}};h.indexOf=E(1,h.findIndex,h.sortedIndex),h.lastIndexOf=E(-1,h.findLastIndex),h.range=function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),i=0;i<e;i++,n+=t)u[i]=n;return u},h.chunk=function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(c.call(n,e,e+=r));return t};var N=function(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var i=m(n.prototype),o=n.apply(i,u);return h.isObject(o)?o:i};h.bind=g(function(r,t,e){if(!h.isFunction(r))throw new TypeError("Bind must be called on a function");var u=g(function(n){return N(r,u,t,this,e.concat(n))});return u}),h.partial=g(function(u,i){var o=h.partial.placeholder,a=function(){for(var n=0,r=i.length,t=Array(r),e=0;e<r;e++)t[e]=i[e]===o?arguments[n++]:i[e];for(;n<arguments.length;)t.push(arguments[n++]);return N(u,a,this,this,t)};return a}),(h.partial.placeholder=h).bindAll=g(function(n,r){var t=(r=M(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=h.bind(n[e],n)}}),h.memoize=function(e,u){var i=function(n){var r=i.cache,t=""+(u?u.apply(this,arguments):n);return j(r,t)||(r[t]=e.apply(this,arguments)),r[t]};return i.cache={},i},h.delay=g(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),h.defer=h.partial(h.delay,h,1),h.throttle=function(t,e,u){var i,o,a,c,l=0;u||(u={});var f=function(){l=!1===u.leading?0:h.now(),i=null,c=t.apply(o,a),i||(o=a=null)},n=function(){var n=h.now();l||!1!==u.leading||(l=n);var r=e-(n-l);return o=this,a=arguments,r<=0||e<r?(i&&(clearTimeout(i),i=null),l=n,c=t.apply(o,a),i||(o=a=null)):i||!1===u.trailing||(i=setTimeout(f,r)),c};return n.cancel=function(){clearTimeout(i),l=0,i=o=a=null},n},h.debounce=function(t,e,u){var i,o,a=function(n,r){i=null,r&&(o=t.apply(n,r))},n=g(function(n){if(i&&clearTimeout(i),u){var r=!i;i=setTimeout(a,e),r&&(o=t.apply(this,n))}else i=h.delay(a,e,this,n);return o});return n.cancel=function(){clearTimeout(i),i=null},n},h.wrap=function(n,r){return h.partial(r,n)},h.negate=function(n){return function(){return!n.apply(this,arguments)}},h.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},h.after=function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},h.before=function(n,r){var t;return function(){return 0<--n&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}},h.once=h.partial(h.before,2),h.restArguments=g;var I=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(n,r){var t=T.length,e=n.constructor,u=h.isFunction(e)&&e.prototype||o,i="constructor";for(j(n,i)&&!h.contains(r,i)&&r.push(i);t--;)(i=T[t])in n&&n[i]!==u[i]&&!h.contains(r,i)&&r.push(i)};h.keys=function(n){if(!h.isObject(n))return[];if(a)return a(n);var r=[];for(var t in n)j(n,t)&&r.push(t);return I&&B(n,r),r},h.allKeys=function(n){if(!h.isObject(n))return[];var r=[];for(var t in n)r.push(t);return I&&B(n,r),r},h.values=function(n){for(var r=h.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e},h.mapObject=function(n,r,t){r=d(r,t);for(var e=h.keys(n),u=e.length,i={},o=0;o<u;o++){var a=e[o];i[a]=r(n[a],a,n)}return i},h.pairs=function(n){for(var r=h.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},h.invert=function(n){for(var r={},t=h.keys(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r},h.functions=h.methods=function(n){var r=[];for(var t in n)h.isFunction(n[t])&&r.push(t);return r.sort()};var R=function(c,l){return function(n){var r=arguments.length;if(l&&(n=Object(n)),r<2||null==n)return n;for(var t=1;t<r;t++)for(var e=arguments[t],u=c(e),i=u.length,o=0;o<i;o++){var a=u[o];l&&void 0!==n[a]||(n[a]=e[a])}return n}};h.extend=R(h.allKeys),h.extendOwn=h.assign=R(h.keys),h.findKey=function(n,r,t){r=d(r,t);for(var e,u=h.keys(n),i=0,o=u.length;i<o;i++)if(r(n[e=u[i]],e,n))return e};var q,K,z=function(n,r,t){return r in t};h.pick=g(function(n,r){var t={},e=r[0];if(null==n)return t;h.isFunction(e)?(1<r.length&&(e=y(e,r[1])),r=h.allKeys(n)):(e=z,r=M(r,!1,!1),n=Object(n));for(var u=0,i=r.length;u<i;u++){var o=r[u],a=n[o];e(a,o,n)&&(t[o]=a)}return t}),h.omit=g(function(n,t){var r,e=t[0];return h.isFunction(e)?(e=h.negate(e),1<t.length&&(r=t[1])):(t=h.map(M(t,!1,!1),String),e=function(n,r){return!h.contains(t,r)}),h.pick(n,e,r)}),h.defaults=R(h.allKeys,!0),h.create=function(n,r){var t=m(n);return r&&h.extendOwn(t,r),t},h.clone=function(n){return h.isObject(n)?h.isArray(n)?n.slice():h.extend({},n):n},h.tap=function(n,r){return r(n),n},h.isMatch=function(n,r){var t=h.keys(r),e=t.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=t[i];if(r[o]!==u[o]||!(o in u))return!1}return!0},q=function(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var u=typeof n;return("function"===u||"object"===u||"object"==typeof r)&&K(n,r,t,e)},K=function(n,r,t,e){n instanceof h&&(n=n._wrapped),r instanceof h&&(r=r._wrapped);var u=p.call(n);if(u!==p.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return s.valueOf.call(n)===s.valueOf.call(r)}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof r)return!1;var o=n.constructor,a=r.constructor;if(o!==a&&!(h.isFunction(o)&&o instanceof o&&h.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in r)return!1}e=e||[];for(var c=(t=t||[]).length;c--;)if(t[c]===n)return e[c]===r;if(t.push(n),e.push(r),i){if((c=n.length)!==r.length)return!1;for(;c--;)if(!q(n[c],r[c],t,e))return!1}else{var l,f=h.keys(n);if(c=f.length,h.keys(r).length!==c)return!1;for(;c--;)if(l=f[c],!j(r,l)||!q(n[l],r[l],t,e))return!1}return t.pop(),e.pop(),!0},h.isEqual=function(n,r){return q(n,r)},h.isEmpty=function(n){return null==n||(w(n)&&(h.isArray(n)||h.isString(n)||h.isArguments(n))?0===n.length:0===h.keys(n).length)},h.isElement=function(n){return!(!n||1!==n.nodeType)},h.isArray=t||function(n){return"[object Array]"===p.call(n)},h.isObject=function(n){var r=typeof n;return"function"===r||"object"===r&&!!n},h.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(r){h["is"+r]=function(n){return p.call(n)==="[object "+r+"]"}}),h.isArguments(arguments)||(h.isArguments=function(n){return j(n,"callee")});var D=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof D&&(h.isFunction=function(n){return"function"==typeof n||!1}),h.isFinite=function(n){return!h.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},h.isNaN=function(n){return h.isNumber(n)&&isNaN(n)},h.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===p.call(n)},h.isNull=function(n){return null===n},h.isUndefined=function(n){return void 0===n},h.has=function(n,r){if(!h.isArray(r))return j(n,r);for(var t=r.length,e=0;e<t;e++){var u=r[e];if(null==n||!i.call(n,u))return!1;n=n[u]}return!!t},h.noConflict=function(){return n._=r,this},h.identity=function(n){return n},h.constant=function(n){return function(){return n}},h.noop=function(){},h.property=function(r){return h.isArray(r)?function(n){return x(n,r)}:b(r)},h.propertyOf=function(r){return null==r?function(){}:function(n){return h.isArray(n)?x(r,n):r[n]}},h.matcher=h.matches=function(r){return r=h.extendOwn({},r),function(n){return h.isMatch(n,r)}},h.times=function(n,r,t){var e=Array(Math.max(0,n));r=y(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},h.random=function(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))},h.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=h.invert(L),W=function(r){var t=function(n){return r[n]},n="(?:"+h.keys(r).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};h.escape=W(L),h.unescape=W(P),h.result=function(n,r,t){h.isArray(r)||(r=[r]);var e=r.length;if(!e)return h.isFunction(t)?t.call(n):t;for(var u=0;u<e;u++){var i=null==n?void 0:n[r[u]];void 0===i&&(i=t,u=e),n=h.isFunction(i)?i.call(n):i}return n};var C=0;h.uniqueId=function(n){var r=++C+"";return n?n+r:r},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,$=function(n){return"\\"+U[n]};h.template=function(i,n,r){!n&&r&&(n=r),n=h.defaults({},n,h.templateSettings);var t,e=RegExp([(n.escape||J).source,(n.interpolate||J).source,(n.evaluate||J).source].join("|")+"|$","g"),o=0,a="__p+='";i.replace(e,function(n,r,t,e,u){return a+=i.slice(o,u).replace(V,$),o=u+n.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":t?a+="'+\n((__t=("+t+"))==null?'':__t)+\n'":e&&(a+="';\n"+e+"\n__p+='"),n}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{t=new Function(n.variable||"obj","_",a)}catch(n){throw n.source=a,n}var u=function(n){return t.call(this,n,h)},c=n.variable||"obj";return u.source="function("+c+"){\n"+a+"}",u},h.chain=function(n){var r=h(n);return r._chain=!0,r};var G=function(n,r){return n._chain?h(r).chain():r};h.mixin=function(t){return h.each(h.functions(t),function(n){var r=h[n]=t[n];h.prototype[n]=function(){var n=[this._wrapped];return u.apply(n,arguments),G(this,r.apply(h,n))}}),h},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=e[r];h.prototype[r]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==r&&"splice"!==r||0!==n.length||delete n[0],G(this,n)}}),h.each(["concat","join","slice"],function(n){var r=e[n];h.prototype[n]=function(){return G(this,r.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},h.prototype.valueOf=h.prototype.toJSON=h.prototype.value,h.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}();
##############################################
/src/demo/ts-demo/node_modules/underscore/underscore-min.js.map:1:{"version":3,"sources":["underscore.js"],"names":["root","self","global","this","previousUnderscore","_","ArrayProto","Array","prototype","ObjProto","Object","SymbolProto","Symbol","push","slice","toString","hasOwnProperty","nativeIsArray","isArray","nativeKeys","keys","nativeCreate","create","Ctor","obj","_wrapped","exports","nodeType","module","VERSION","builtinIteratee","optimizeCb","func","context","argCount","value","call","index","collection","accumulator","apply","arguments","cb","iteratee","identity","isFunction","isObject","matcher","property","Infinity","restArguments","startIndex","length","Math","max","rest","args","baseCreate","result","shallowProperty","key","has","path","deepGet","i","MAX_ARRAY_INDEX","pow","getLength","isArrayLike","each","forEach","map","collect","results","currentKey","createReduce","dir","memo","initial","reducer","reduce","foldl","inject","reduceRight","foldr","find","detect","predicate","findIndex","findKey","filter","select","list","reject","negate","every","all","some","any","contains","includes","include","item","fromIndex","guard","values","indexOf","invoke","contextPath","method","pluck","where","attrs","findWhere","computed","lastComputed","v","min","shuffle","sample","n","random","clone","last","rand","temp","sortBy","criteria","sort","left","right","a","b","group","behavior","partition","groupBy","indexBy","countBy","reStrSymbol","toArray","isString","match","size","pass","first","head","take","array","tail","drop","compact","Boolean","flatten","input","shallow","strict","output","idx","isArguments","j","len","without","otherArrays","difference","uniq","unique","isSorted","isBoolean","seen","union","arrays","intersection","argsLength","unzip","zip","object","createPredicateIndexFinder","findLastIndex","sortedIndex","low","high","mid","floor","createIndexFinder","predicateFind","isNaN","lastIndexOf","range","start","stop","step","ceil","chunk","count","executeBound","sourceFunc","boundFunc","callingContext","bind","TypeError","bound","callArgs","concat","partial","boundArgs","placeholder","position","bindAll","Error","memoize","hasher","cache","address","delay","wait","setTimeout","defer","throttle","options","timeout","previous","later","leading","now","throttled","remaining","clearTimeout","trailing","cancel","debounce","immediate","debounced","callNow","wrap","wrapper","compose","after","times","before","once","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","collectNonEnumProps","nonEnumIdx","constructor","proto","prop","allKeys","mapObject","pairs","invert","functions","methods","names","createAssigner","keysFunc","defaults","source","l","extend","extendOwn","assign","eq","deepEq","keyInObj","pick","omit","String","props","tap","interceptor","isMatch","aStack","bStack","type","className","valueOf","areArrays","aCtor","bCtor","pop","isEqual","isEmpty","isElement","name","nodelist","document","childNodes","Int8Array","isFinite","isSymbol","parseFloat","isNumber","isNull","isUndefined","noConflict","constant","noop","propertyOf","matches","accum","Date","getTime","escapeMap","&","<",">","\"","'","`","unescapeMap","createEscaper","escaper","join","testRegexp","RegExp","replaceRegexp","string","test","replace","escape","unescape","fallback","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","\\","\r","\n"," "," ","escapeRegExp","escapeChar","template","text","settings","oldSettings","render","offset","variable","Function","e","data","argument","chain","instance","_chain","chainResult","mixin","toJSON","define","amd"],"mappings":";;;;CAKC,WAQC,IAAIA,EAAsB,iBAARC,MAAoBA,KAAKA,OAASA,MAAQA,MACjC,iBAAVC,QAAsBA,OAAOA,SAAWA,QAAUA,QACzDC,MACA,GAGNC,EAAqBJ,EAAKK,EAG1BC,EAAaC,MAAMC,UAAWC,EAAWC,OAAOF,UAChDG,EAAgC,oBAAXC,OAAyBA,OAAOJ,UAAY,KAGjEK,EAAOP,EAAWO,KAClBC,EAAQR,EAAWQ,MACnBC,EAAWN,EAASM,SACpBC,EAAiBP,EAASO,eAI1BC,EAAgBV,MAAMW,QACtBC,EAAaT,OAAOU,KACpBC,EAAeX,OAAOY,OAGtBC,EAAO,aAGPlB,EAAI,SAASmB,GACf,OAAIA,aAAenB,EAAUmB,EACvBrB,gBAAgBE,OACtBF,KAAKsB,SAAWD,GADiB,IAAInB,EAAEmB,IASnB,oBAAXE,SAA2BA,QAAQC,SAM5C3B,EAAKK,EAAIA,GALY,oBAAVuB,SAA0BA,OAAOD,UAAYC,OAAOF,UAC7DA,QAAUE,OAAOF,QAAUrB,GAE7BqB,QAAQrB,EAAIA,GAMdA,EAAEwB,QAAU,QAKZ,IAmBIC,EAnBAC,EAAa,SAASC,EAAMC,EAASC,GACvC,QAAgB,IAAZD,EAAoB,OAAOD,EAC/B,OAAoB,MAAZE,EAAmB,EAAIA,GAC7B,KAAK,EAAG,OAAO,SAASC,GACtB,OAAOH,EAAKI,KAAKH,EAASE,IAG5B,KAAK,EAAG,OAAO,SAASA,EAAOE,EAAOC,GACpC,OAAON,EAAKI,KAAKH,EAASE,EAAOE,EAAOC,IAE1C,KAAK,EAAG,OAAO,SAASC,EAAaJ,EAAOE,EAAOC,GACjD,OAAON,EAAKI,KAAKH,EAASM,EAAaJ,EAAOE,EAAOC,IAGzD,OAAO,WACL,OAAON,EAAKQ,MAAMP,EAASQ,aAS3BC,EAAK,SAASP,EAAOF,EAASC,GAChC,OAAI7B,EAAEsC,WAAab,EAAwBzB,EAAEsC,SAASR,EAAOF,GAChD,MAATE,EAAsB9B,EAAEuC,SACxBvC,EAAEwC,WAAWV,GAAeJ,EAAWI,EAAOF,EAASC,GACvD7B,EAAEyC,SAASX,KAAW9B,EAAEa,QAAQiB,GAAe9B,EAAE0C,QAAQZ,GACtD9B,EAAE2C,SAASb,IAMpB9B,EAAEsC,SAAWb,EAAkB,SAASK,EAAOF,GAC7C,OAAOS,EAAGP,EAAOF,EAASgB,EAAAA,IAQ5B,IAAIC,EAAgB,SAASlB,EAAMmB,GAEjC,OADAA,EAA2B,MAAdA,EAAqBnB,EAAKoB,OAAS,GAAKD,EAC9C,WAIL,IAHA,IAAIC,EAASC,KAAKC,IAAIb,UAAUW,OAASD,EAAY,GACjDI,EAAOhD,MAAM6C,GACbf,EAAQ,EACLA,EAAQe,EAAQf,IACrBkB,EAAKlB,GAASI,UAAUJ,EAAQc,GAElC,OAAQA,GACN,KAAK,EAAG,OAAOnB,EAAKI,KAAKjC,KAAMoD,GAC/B,KAAK,EAAG,OAAOvB,EAAKI,KAAKjC,KAAMsC,UAAU,GAAIc,GAC7C,KAAK,EAAG,OAAOvB,EAAKI,KAAKjC,KAAMsC,UAAU,GAAIA,UAAU,GAAIc,GAE7D,IAAIC,EAAOjD,MAAM4C,EAAa,GAC9B,IAAKd,EAAQ,EAAGA,EAAQc,EAAYd,IAClCmB,EAAKnB,GAASI,UAAUJ,GAG1B,OADAmB,EAAKL,GAAcI,EACZvB,EAAKQ,MAAMrC,KAAMqD,KAKxBC,EAAa,SAASjD,GACxB,IAAKH,EAAEyC,SAAStC,GAAY,MAAO,GACnC,GAAIa,EAAc,OAAOA,EAAab,GACtCe,EAAKf,UAAYA,EACjB,IAAIkD,EAAS,IAAInC,EAEjB,OADAA,EAAKf,UAAY,KACVkD,GAGLC,EAAkB,SAASC,GAC7B,OAAO,SAASpC,GACd,OAAc,MAAPA,OAAc,EAASA,EAAIoC,KAIlCC,EAAM,SAASrC,EAAKsC,GACtB,OAAc,MAAPtC,GAAeR,EAAeoB,KAAKZ,EAAKsC,IAG7CC,EAAU,SAASvC,EAAKsC,GAE1B,IADA,IAAIV,EAASU,EAAKV,OACTY,EAAI,EAAGA,EAAIZ,EAAQY,IAAK,CAC/B,GAAW,MAAPxC,EAAa,OACjBA,EAAMA,EAAIsC,EAAKE,IAEjB,OAAOZ,EAAS5B,OAAM,GAOpByC,EAAkBZ,KAAKa,IAAI,EAAG,IAAM,EACpCC,EAAYR,EAAgB,UAC5BS,EAAc,SAAS9B,GACzB,IAAIc,EAASe,EAAU7B,GACvB,MAAwB,iBAAVc,GAAgC,GAAVA,GAAeA,GAAUa,GAS/D5D,EAAEgE,KAAOhE,EAAEiE,QAAU,SAAS9C,EAAKmB,EAAUV,GAE3C,IAAI+B,EAAGZ,EACP,GAFAT,EAAWZ,EAAWY,EAAUV,GAE5BmC,EAAY5C,GACd,IAAKwC,EAAI,EAAGZ,EAAS5B,EAAI4B,OAAQY,EAAIZ,EAAQY,IAC3CrB,EAASnB,EAAIwC,GAAIA,EAAGxC,OAEjB,CACL,IAAIJ,EAAOf,EAAEe,KAAKI,GAClB,IAAKwC,EAAI,EAAGZ,EAAShC,EAAKgC,OAAQY,EAAIZ,EAAQY,IAC5CrB,EAASnB,EAAIJ,EAAK4C,IAAK5C,EAAK4C,GAAIxC,GAGpC,OAAOA,GAITnB,EAAEkE,IAAMlE,EAAEmE,QAAU,SAAShD,EAAKmB,EAAUV,GAC1CU,EAAWD,EAAGC,EAAUV,GAIxB,IAHA,IAAIb,GAAQgD,EAAY5C,IAAQnB,EAAEe,KAAKI,GACnC4B,GAAUhC,GAAQI,GAAK4B,OACvBqB,EAAUlE,MAAM6C,GACXf,EAAQ,EAAGA,EAAQe,EAAQf,IAAS,CAC3C,IAAIqC,EAAatD,EAAOA,EAAKiB,GAASA,EACtCoC,EAAQpC,GAASM,EAASnB,EAAIkD,GAAaA,EAAYlD,GAEzD,OAAOiD,GAIT,IAAIE,EAAe,SAASC,GAkB1B,OAAO,SAASpD,EAAKmB,EAAUkC,EAAM5C,GACnC,IAAI6C,EAA8B,GAApBrC,UAAUW,OACxB,OAjBY,SAAS5B,EAAKmB,EAAUkC,EAAMC,GAC1C,IAAI1D,GAAQgD,EAAY5C,IAAQnB,EAAEe,KAAKI,GACnC4B,GAAUhC,GAAQI,GAAK4B,OACvBf,EAAc,EAANuC,EAAU,EAAIxB,EAAS,EAKnC,IAJK0B,IACHD,EAAOrD,EAAIJ,EAAOA,EAAKiB,GAASA,GAChCA,GAASuC,GAEK,GAATvC,GAAcA,EAAQe,EAAQf,GAASuC,EAAK,CACjD,IAAIF,EAAatD,EAAOA,EAAKiB,GAASA,EACtCwC,EAAOlC,EAASkC,EAAMrD,EAAIkD,GAAaA,EAAYlD,GAErD,OAAOqD,EAKAE,CAAQvD,EAAKO,EAAWY,EAAUV,EAAS,GAAI4C,EAAMC,KAMhEzE,EAAE2E,OAAS3E,EAAE4E,MAAQ5E,EAAE6E,OAASP,EAAa,GAG7CtE,EAAE8E,YAAc9E,EAAE+E,MAAQT,GAAc,GAGxCtE,EAAEgF,KAAOhF,EAAEiF,OAAS,SAAS9D,EAAK+D,EAAWtD,GAC3C,IACI2B,GADYQ,EAAY5C,GAAOnB,EAAEmF,UAAYnF,EAAEoF,SAC/BjE,EAAK+D,EAAWtD,GACpC,QAAY,IAAR2B,IAA2B,IAATA,EAAY,OAAOpC,EAAIoC,IAK/CvD,EAAEqF,OAASrF,EAAEsF,OAAS,SAASnE,EAAK+D,EAAWtD,GAC7C,IAAIwC,EAAU,GAKd,OAJAc,EAAY7C,EAAG6C,EAAWtD,GAC1B5B,EAAEgE,KAAK7C,EAAK,SAASW,EAAOE,EAAOuD,GAC7BL,EAAUpD,EAAOE,EAAOuD,IAAOnB,EAAQ5D,KAAKsB,KAE3CsC,GAITpE,EAAEwF,OAAS,SAASrE,EAAK+D,EAAWtD,GAClC,OAAO5B,EAAEqF,OAAOlE,EAAKnB,EAAEyF,OAAOpD,EAAG6C,IAAatD,IAKhD5B,EAAE0F,MAAQ1F,EAAE2F,IAAM,SAASxE,EAAK+D,EAAWtD,GACzCsD,EAAY7C,EAAG6C,EAAWtD,GAG1B,IAFA,IAAIb,GAAQgD,EAAY5C,IAAQnB,EAAEe,KAAKI,GACnC4B,GAAUhC,GAAQI,GAAK4B,OAClBf,EAAQ,EAAGA,EAAQe,EAAQf,IAAS,CAC3C,IAAIqC,EAAatD,EAAOA,EAAKiB,GAASA,EACtC,IAAKkD,EAAU/D,EAAIkD,GAAaA,EAAYlD,GAAM,OAAO,EAE3D,OAAO,GAKTnB,EAAE4F,KAAO5F,EAAE6F,IAAM,SAAS1E,EAAK+D,EAAWtD,GACxCsD,EAAY7C,EAAG6C,EAAWtD,GAG1B,IAFA,IAAIb,GAAQgD,EAAY5C,IAAQnB,EAAEe,KAAKI,GACnC4B,GAAUhC,GAAQI,GAAK4B,OAClBf,EAAQ,EAAGA,EAAQe,EAAQf,IAAS,CAC3C,IAAIqC,EAAatD,EAAOA,EAAKiB,GAASA,EACtC,GAAIkD,EAAU/D,EAAIkD,GAAaA,EAAYlD,GAAM,OAAO,EAE1D,OAAO,GAKTnB,EAAE8F,SAAW9F,EAAE+F,SAAW/F,EAAEgG,QAAU,SAAS7E,EAAK8E,EAAMC,EAAWC,GAGnE,OAFKpC,EAAY5C,KAAMA,EAAMnB,EAAEoG,OAAOjF,KACd,iBAAb+E,GAAyBC,KAAOD,EAAY,GACb,GAAnClG,EAAEqG,QAAQlF,EAAK8E,EAAMC,IAI9BlG,EAAEsG,OAASzD,EAAc,SAAS1B,EAAKsC,EAAMN,GAC3C,IAAIoD,EAAa5E,EAOjB,OANI3B,EAAEwC,WAAWiB,GACf9B,EAAO8B,EACEzD,EAAEa,QAAQ4C,KACnB8C,EAAc9C,EAAKhD,MAAM,GAAI,GAC7BgD,EAAOA,EAAKA,EAAKV,OAAS,IAErB/C,EAAEkE,IAAI/C,EAAK,SAASS,GACzB,IAAI4E,EAAS7E,EACb,IAAK6E,EAAQ,CAIX,GAHID,GAAeA,EAAYxD,SAC7BnB,EAAU8B,EAAQ9B,EAAS2E,IAEd,MAAX3E,EAAiB,OACrB4E,EAAS5E,EAAQ6B,GAEnB,OAAiB,MAAV+C,EAAiBA,EAASA,EAAOrE,MAAMP,EAASuB,OAK3DnD,EAAEyG,MAAQ,SAAStF,EAAKoC,GACtB,OAAOvD,EAAEkE,IAAI/C,EAAKnB,EAAE2C,SAASY,KAK/BvD,EAAE0G,MAAQ,SAASvF,EAAKwF,GACtB,OAAO3G,EAAEqF,OAAOlE,EAAKnB,EAAE0C,QAAQiE,KAKjC3G,EAAE4G,UAAY,SAASzF,EAAKwF,GAC1B,OAAO3G,EAAEgF,KAAK7D,EAAKnB,EAAE0C,QAAQiE,KAI/B3G,EAAEiD,IAAM,SAAS9B,EAAKmB,EAAUV,GAC9B,IACIE,EAAO+E,EADPxD,GAAUT,EAAAA,EAAUkE,GAAgBlE,EAAAA,EAExC,GAAgB,MAAZN,GAAuC,iBAAZA,GAAyC,iBAAVnB,EAAI,IAAyB,MAAPA,EAElF,IAAK,IAAIwC,EAAI,EAAGZ,GADhB5B,EAAM4C,EAAY5C,GAAOA,EAAMnB,EAAEoG,OAAOjF,IACX4B,OAAQY,EAAIZ,EAAQY,IAElC,OADb7B,EAAQX,EAAIwC,KACiBN,EAARvB,IACnBuB,EAASvB,QAIbQ,EAAWD,EAAGC,EAAUV,GACxB5B,EAAEgE,KAAK7C,EAAK,SAAS4F,EAAG/E,EAAOuD,GAC7BsB,EAAWvE,EAASyE,EAAG/E,EAAOuD,IACfuB,EAAXD,GAA2BA,KAAcjE,EAAAA,GAAYS,KAAYT,EAAAA,KACnES,EAAS0D,EACTD,EAAeD,KAIrB,OAAOxD,GAITrD,EAAEgH,IAAM,SAAS7F,EAAKmB,EAAUV,GAC9B,IACIE,EAAO+E,EADPxD,EAAST,EAAAA,EAAUkE,EAAelE,EAAAA,EAEtC,GAAgB,MAAZN,GAAuC,iBAAZA,GAAyC,iBAAVnB,EAAI,IAAyB,MAAPA,EAElF,IAAK,IAAIwC,EAAI,EAAGZ,GADhB5B,EAAM4C,EAAY5C,GAAOA,EAAMnB,EAAEoG,OAAOjF,IACX4B,OAAQY,EAAIZ,EAAQY,IAElC,OADb7B,EAAQX,EAAIwC,KACS7B,EAAQuB,IAC3BA,EAASvB,QAIbQ,EAAWD,EAAGC,EAAUV,GACxB5B,EAAEgE,KAAK7C,EAAK,SAAS4F,EAAG/E,EAAOuD,KAC7BsB,EAAWvE,EAASyE,EAAG/E,EAAOuD,IACfuB,GAAgBD,IAAajE,EAAAA,GAAYS,IAAWT,EAAAA,KACjES,EAAS0D,EACTD,EAAeD,KAIrB,OAAOxD,GAITrD,EAAEiH,QAAU,SAAS9F,GACnB,OAAOnB,EAAEkH,OAAO/F,EAAKyB,EAAAA,IAOvB5C,EAAEkH,OAAS,SAAS/F,EAAKgG,EAAGhB,GAC1B,GAAS,MAALgB,GAAahB,EAEf,OADKpC,EAAY5C,KAAMA,EAAMnB,EAAEoG,OAAOjF,IAC/BA,EAAInB,EAAEoH,OAAOjG,EAAI4B,OAAS,IAEnC,IAAImE,EAASnD,EAAY5C,GAAOnB,EAAEqH,MAAMlG,GAAOnB,EAAEoG,OAAOjF,GACpD4B,EAASe,EAAUoD,GACvBC,EAAInE,KAAKC,IAAID,KAAKgE,IAAIG,EAAGpE,GAAS,GAElC,IADA,IAAIuE,EAAOvE,EAAS,EACXf,EAAQ,EAAGA,EAAQmF,EAAGnF,IAAS,CACtC,IAAIuF,EAAOvH,EAAEoH,OAAOpF,EAAOsF,GACvBE,EAAON,EAAOlF,GAClBkF,EAAOlF,GAASkF,EAAOK,GACvBL,EAAOK,GAAQC,EAEjB,OAAON,EAAOzG,MAAM,EAAG0G,IAIzBnH,EAAEyH,OAAS,SAAStG,EAAKmB,EAAUV,GACjC,IAAII,EAAQ,EAEZ,OADAM,EAAWD,EAAGC,EAAUV,GACjB5B,EAAEyG,MAAMzG,EAAEkE,IAAI/C,EAAK,SAASW,EAAOyB,EAAKgC,GAC7C,MAAO,CACLzD,MAAOA,EACPE,MAAOA,IACP0F,SAAUpF,EAASR,EAAOyB,EAAKgC,MAEhCoC,KAAK,SAASC,EAAMC,GACrB,IAAIC,EAAIF,EAAKF,SACTK,EAAIF,EAAMH,SACd,GAAII,IAAMC,EAAG,CACX,GAAQA,EAAJD,QAAe,IAANA,EAAc,OAAO,EAClC,GAAIA,EAAIC,QAAW,IAANA,EAAc,OAAQ,EAErC,OAAOH,EAAK5F,MAAQ6F,EAAM7F,QACxB,UAIN,IAAIgG,EAAQ,SAASC,EAAUC,GAC7B,OAAO,SAAS/G,EAAKmB,EAAUV,GAC7B,IAAIyB,EAAS6E,EAAY,CAAC,GAAI,IAAM,GAMpC,OALA5F,EAAWD,EAAGC,EAAUV,GACxB5B,EAAEgE,KAAK7C,EAAK,SAASW,EAAOE,GAC1B,IAAIuB,EAAMjB,EAASR,EAAOE,EAAOb,GACjC8G,EAAS5E,EAAQvB,EAAOyB,KAEnBF,IAMXrD,EAAEmI,QAAUH,EAAM,SAAS3E,EAAQvB,EAAOyB,GACpCC,EAAIH,EAAQE,GAAMF,EAAOE,GAAK/C,KAAKsB,GAAauB,EAAOE,GAAO,CAACzB,KAKrE9B,EAAEoI,QAAUJ,EAAM,SAAS3E,EAAQvB,EAAOyB,GACxCF,EAAOE,GAAOzB,IAMhB9B,EAAEqI,QAAUL,EAAM,SAAS3E,EAAQvB,EAAOyB,GACpCC,EAAIH,EAAQE,GAAMF,EAAOE,KAAaF,EAAOE,GAAO,IAG1D,IAAI+E,EAAc,mEAElBtI,EAAEuI,QAAU,SAASpH,GACnB,OAAKA,EACDnB,EAAEa,QAAQM,GAAaV,EAAMsB,KAAKZ,GAClCnB,EAAEwI,SAASrH,GAENA,EAAIsH,MAAMH,GAEfvE,EAAY5C,GAAanB,EAAEkE,IAAI/C,EAAKnB,EAAEuC,UACnCvC,EAAEoG,OAAOjF,GAPC,IAWnBnB,EAAE0I,KAAO,SAASvH,GAChB,OAAW,MAAPA,EAAoB,EACjB4C,EAAY5C,GAAOA,EAAI4B,OAAS/C,EAAEe,KAAKI,GAAK4B,QAKrD/C,EAAEkI,UAAYF,EAAM,SAAS3E,EAAQvB,EAAO6G,GAC1CtF,EAAOsF,EAAO,EAAI,GAAGnI,KAAKsB,KACzB,GAQH9B,EAAE4I,MAAQ5I,EAAE6I,KAAO7I,EAAE8I,KAAO,SAASC,EAAO5B,EAAGhB,GAC7C,OAAa,MAAT4C,GAAiBA,EAAMhG,OAAS,EAAe,MAALoE,OAAY,EAAS,GAC1D,MAALA,GAAahB,EAAc4C,EAAM,GAC9B/I,EAAEyE,QAAQsE,EAAOA,EAAMhG,OAASoE,IAMzCnH,EAAEyE,QAAU,SAASsE,EAAO5B,EAAGhB,GAC7B,OAAO1F,EAAMsB,KAAKgH,EAAO,EAAG/F,KAAKC,IAAI,EAAG8F,EAAMhG,QAAe,MAALoE,GAAahB,EAAQ,EAAIgB,MAKnFnH,EAAEsH,KAAO,SAASyB,EAAO5B,EAAGhB,GAC1B,OAAa,MAAT4C,GAAiBA,EAAMhG,OAAS,EAAe,MAALoE,OAAY,EAAS,GAC1D,MAALA,GAAahB,EAAc4C,EAAMA,EAAMhG,OAAS,GAC7C/C,EAAEkD,KAAK6F,EAAO/F,KAAKC,IAAI,EAAG8F,EAAMhG,OAASoE,KAMlDnH,EAAEkD,KAAOlD,EAAEgJ,KAAOhJ,EAAEiJ,KAAO,SAASF,EAAO5B,EAAGhB,GAC5C,OAAO1F,EAAMsB,KAAKgH,EAAY,MAAL5B,GAAahB,EAAQ,EAAIgB,IAIpDnH,EAAEkJ,QAAU,SAASH,GACnB,OAAO/I,EAAEqF,OAAO0D,EAAOI,UAIzB,IAAIC,EAAU,SAASC,EAAOC,EAASC,EAAQC,GAG7C,IADA,IAAIC,GADJD,EAASA,GAAU,IACFzG,OACRY,EAAI,EAAGZ,EAASe,EAAUuF,GAAQ1F,EAAIZ,EAAQY,IAAK,CAC1D,IAAI7B,EAAQuH,EAAM1F,GAClB,GAAII,EAAYjC,KAAW9B,EAAEa,QAAQiB,IAAU9B,EAAE0J,YAAY5H,IAE3D,GAAIwH,EAEF,IADA,IAAIK,EAAI,EAAGC,EAAM9H,EAAMiB,OAChB4G,EAAIC,GAAKJ,EAAOC,KAAS3H,EAAM6H,UAEtCP,EAAQtH,EAAOwH,EAASC,EAAQC,GAChCC,EAAMD,EAAOzG,YAELwG,IACVC,EAAOC,KAAS3H,GAGpB,OAAO0H,GAITxJ,EAAEoJ,QAAU,SAASL,EAAOO,GAC1B,OAAOF,EAAQL,EAAOO,GAAS,IAIjCtJ,EAAE6J,QAAUhH,EAAc,SAASkG,EAAOe,GACxC,OAAO9J,EAAE+J,WAAWhB,EAAOe,KAS7B9J,EAAEgK,KAAOhK,EAAEiK,OAAS,SAASlB,EAAOmB,EAAU5H,EAAUV,GACjD5B,EAAEmK,UAAUD,KACftI,EAAUU,EACVA,EAAW4H,EACXA,GAAW,GAEG,MAAZ5H,IAAkBA,EAAWD,EAAGC,EAAUV,IAG9C,IAFA,IAAIyB,EAAS,GACT+G,EAAO,GACFzG,EAAI,EAAGZ,EAASe,EAAUiF,GAAQpF,EAAIZ,EAAQY,IAAK,CAC1D,IAAI7B,EAAQiH,EAAMpF,GACdkD,EAAWvE,EAAWA,EAASR,EAAO6B,EAAGoF,GAASjH,EAClDoI,IAAa5H,GACVqB,GAAKyG,IAASvD,GAAUxD,EAAO7C,KAAKsB,GACzCsI,EAAOvD,GACEvE,EACJtC,EAAE8F,SAASsE,EAAMvD,KACpBuD,EAAK5J,KAAKqG,GACVxD,EAAO7C,KAAKsB,IAEJ9B,EAAE8F,SAASzC,EAAQvB,IAC7BuB,EAAO7C,KAAKsB,GAGhB,OAAOuB,GAKTrD,EAAEqK,MAAQxH,EAAc,SAASyH,GAC/B,OAAOtK,EAAEgK,KAAKZ,EAAQkB,GAAQ,GAAM,MAKtCtK,EAAEuK,aAAe,SAASxB,GAGxB,IAFA,IAAI1F,EAAS,GACTmH,EAAapI,UAAUW,OAClBY,EAAI,EAAGZ,EAASe,EAAUiF,GAAQpF,EAAIZ,EAAQY,IAAK,CAC1D,IAAIsC,EAAO8C,EAAMpF,GACjB,IAAI3D,EAAE8F,SAASzC,EAAQ4C,GAAvB,CACA,IAAI0D,EACJ,IAAKA,EAAI,EAAGA,EAAIa,GACTxK,EAAE8F,SAAS1D,UAAUuH,GAAI1D,GADJ0D,KAGxBA,IAAMa,GAAYnH,EAAO7C,KAAKyF,IAEpC,OAAO5C,GAKTrD,EAAE+J,WAAalH,EAAc,SAASkG,EAAO7F,GAE3C,OADAA,EAAOkG,EAAQlG,GAAM,GAAM,GACpBlD,EAAEqF,OAAO0D,EAAO,SAASjH,GAC9B,OAAQ9B,EAAE8F,SAAS5C,EAAMpB,OAM7B9B,EAAEyK,MAAQ,SAAS1B,GAIjB,IAHA,IAAIhG,EAASgG,GAAS/I,EAAEiD,IAAI8F,EAAOjF,GAAWf,QAAU,EACpDM,EAASnD,MAAM6C,GAEVf,EAAQ,EAAGA,EAAQe,EAAQf,IAClCqB,EAAOrB,GAAShC,EAAEyG,MAAMsC,EAAO/G,GAEjC,OAAOqB,GAKTrD,EAAE0K,IAAM7H,EAAc7C,EAAEyK,OAKxBzK,EAAE2K,OAAS,SAASpF,EAAMa,GAExB,IADA,IAAI/C,EAAS,GACJM,EAAI,EAAGZ,EAASe,EAAUyB,GAAO5B,EAAIZ,EAAQY,IAChDyC,EACF/C,EAAOkC,EAAK5B,IAAMyC,EAAOzC,GAEzBN,EAAOkC,EAAK5B,GAAG,IAAM4B,EAAK5B,GAAG,GAGjC,OAAON,GAIT,IAAIuH,EAA6B,SAASrG,GACxC,OAAO,SAASwE,EAAO7D,EAAWtD,GAChCsD,EAAY7C,EAAG6C,EAAWtD,GAG1B,IAFA,IAAImB,EAASe,EAAUiF,GACnB/G,EAAc,EAANuC,EAAU,EAAIxB,EAAS,EACnB,GAATf,GAAcA,EAAQe,EAAQf,GAASuC,EAC5C,GAAIW,EAAU6D,EAAM/G,GAAQA,EAAO+G,GAAQ,OAAO/G,EAEpD,OAAQ,IAKZhC,EAAEmF,UAAYyF,EAA2B,GACzC5K,EAAE6K,cAAgBD,GAA4B,GAI9C5K,EAAE8K,YAAc,SAAS/B,EAAO5H,EAAKmB,EAAUV,GAI7C,IAFA,IAAIE,GADJQ,EAAWD,EAAGC,EAAUV,EAAS,IACZT,GACjB4J,EAAM,EAAGC,EAAOlH,EAAUiF,GACvBgC,EAAMC,GAAM,CACjB,IAAIC,EAAMjI,KAAKkI,OAAOH,EAAMC,GAAQ,GAChC1I,EAASyG,EAAMkC,IAAQnJ,EAAOiJ,EAAME,EAAM,EAAQD,EAAOC,EAE/D,OAAOF,GAIT,IAAII,EAAoB,SAAS5G,EAAK6G,EAAeN,GACnD,OAAO,SAAS/B,EAAO9C,EAAMwD,GAC3B,IAAI9F,EAAI,EAAGZ,EAASe,EAAUiF,GAC9B,GAAkB,iBAAPU,EACC,EAANlF,EACFZ,EAAW,GAAP8F,EAAWA,EAAMzG,KAAKC,IAAIwG,EAAM1G,EAAQY,GAE5CZ,EAAgB,GAAP0G,EAAWzG,KAAKgE,IAAIyC,EAAM,EAAG1G,GAAU0G,EAAM1G,EAAS,OAE5D,GAAI+H,GAAerB,GAAO1G,EAE/B,OAAOgG,EADPU,EAAMqB,EAAY/B,EAAO9C,MACHA,EAAOwD,GAAO,EAEtC,GAAIxD,GAASA,EAEX,OAAc,IADdwD,EAAM2B,EAAc3K,EAAMsB,KAAKgH,EAAOpF,EAAGZ,GAAS/C,EAAEqL,QAClC5B,EAAM9F,GAAK,EAE/B,IAAK8F,EAAY,EAANlF,EAAUZ,EAAIZ,EAAS,EAAU,GAAP0G,GAAYA,EAAM1G,EAAQ0G,GAAOlF,EACpE,GAAIwE,EAAMU,KAASxD,EAAM,OAAOwD,EAElC,OAAQ,IAQZzJ,EAAEqG,QAAU8E,EAAkB,EAAGnL,EAAEmF,UAAWnF,EAAE8K,aAChD9K,EAAEsL,YAAcH,GAAmB,EAAGnL,EAAE6K,eAKxC7K,EAAEuL,MAAQ,SAASC,EAAOC,EAAMC,GAClB,MAARD,IACFA,EAAOD,GAAS,EAChBA,EAAQ,GAELE,IACHA,EAAOD,EAAOD,GAAS,EAAI,GAM7B,IAHA,IAAIzI,EAASC,KAAKC,IAAID,KAAK2I,MAAMF,EAAOD,GAASE,GAAO,GACpDH,EAAQrL,MAAM6C,GAET0G,EAAM,EAAGA,EAAM1G,EAAQ0G,IAAO+B,GAASE,EAC9CH,EAAM9B,GAAO+B,EAGf,OAAOD,GAKTvL,EAAE4L,MAAQ,SAAS7C,EAAO8C,GACxB,GAAa,MAATA,GAAiBA,EAAQ,EAAG,MAAO,GAGvC,IAFA,IAAIxI,EAAS,GACTM,EAAI,EAAGZ,EAASgG,EAAMhG,OACnBY,EAAIZ,GACTM,EAAO7C,KAAKC,EAAMsB,KAAKgH,EAAOpF,EAAGA,GAAKkI,IAExC,OAAOxI,GAQT,IAAIyI,EAAe,SAASC,EAAYC,EAAWpK,EAASqK,EAAgB9I,GAC1E,KAAM8I,aAA0BD,GAAY,OAAOD,EAAW5J,MAAMP,EAASuB,GAC7E,IAAIvD,EAAOwD,EAAW2I,EAAW5L,WAC7BkD,EAAS0I,EAAW5J,MAAMvC,EAAMuD,GACpC,OAAInD,EAAEyC,SAASY,GAAgBA,EACxBzD,GAMTI,EAAEkM,KAAOrJ,EAAc,SAASlB,EAAMC,EAASuB,GAC7C,IAAKnD,EAAEwC,WAAWb,GAAO,MAAM,IAAIwK,UAAU,qCAC7C,IAAIC,EAAQvJ,EAAc,SAASwJ,GACjC,OAAOP,EAAanK,EAAMyK,EAAOxK,EAAS9B,KAAMqD,EAAKmJ,OAAOD,MAE9D,OAAOD,IAOTpM,EAAEuM,QAAU1J,EAAc,SAASlB,EAAM6K,GACvC,IAAIC,EAAczM,EAAEuM,QAAQE,YACxBL,EAAQ,WAGV,IAFA,IAAIM,EAAW,EAAG3J,EAASyJ,EAAUzJ,OACjCI,EAAOjD,MAAM6C,GACRY,EAAI,EAAGA,EAAIZ,EAAQY,IAC1BR,EAAKQ,GAAK6I,EAAU7I,KAAO8I,EAAcrK,UAAUsK,KAAcF,EAAU7I,GAE7E,KAAO+I,EAAWtK,UAAUW,QAAQI,EAAK3C,KAAK4B,UAAUsK,MACxD,OAAOZ,EAAanK,EAAMyK,EAAOtM,KAAMA,KAAMqD,IAE/C,OAAOiJ,KAGTpM,EAAEuM,QAAQE,YAAczM,GAKtB2M,QAAU9J,EAAc,SAAS1B,EAAKJ,GAEtC,IAAIiB,GADJjB,EAAOqI,EAAQrI,GAAM,GAAO,IACXgC,OACjB,GAAIf,EAAQ,EAAG,MAAM,IAAI4K,MAAM,yCAC/B,KAAO5K,KAAS,CACd,IAAIuB,EAAMxC,EAAKiB,GACfb,EAAIoC,GAAOvD,EAAEkM,KAAK/K,EAAIoC,GAAMpC,MAKhCnB,EAAE6M,QAAU,SAASlL,EAAMmL,GACzB,IAAID,EAAU,SAAStJ,GACrB,IAAIwJ,EAAQF,EAAQE,MAChBC,EAAU,IAAMF,EAASA,EAAO3K,MAAMrC,KAAMsC,WAAamB,GAE7D,OADKC,EAAIuJ,EAAOC,KAAUD,EAAMC,GAAWrL,EAAKQ,MAAMrC,KAAMsC,YACrD2K,EAAMC,IAGf,OADAH,EAAQE,MAAQ,GACTF,GAKT7M,EAAEiN,MAAQpK,EAAc,SAASlB,EAAMuL,EAAM/J,GAC3C,OAAOgK,WAAW,WAChB,OAAOxL,EAAKQ,MAAM,KAAMgB,IACvB+J,KAKLlN,EAAEoN,MAAQpN,EAAEuM,QAAQvM,EAAEiN,MAAOjN,EAAG,GAOhCA,EAAEqN,SAAW,SAAS1L,EAAMuL,EAAMI,GAChC,IAAIC,EAAS3L,EAASuB,EAAME,EACxBmK,EAAW,EACVF,IAASA,EAAU,IAExB,IAAIG,EAAQ,WACVD,GAA+B,IAApBF,EAAQI,QAAoB,EAAI1N,EAAE2N,MAC7CJ,EAAU,KACVlK,EAAS1B,EAAKQ,MAAMP,EAASuB,GACxBoK,IAAS3L,EAAUuB,EAAO,OAG7ByK,EAAY,WACd,IAAID,EAAM3N,EAAE2N,MACPH,IAAgC,IAApBF,EAAQI,UAAmBF,EAAWG,GACvD,IAAIE,EAAYX,GAAQS,EAAMH,GAc9B,OAbA5L,EAAU9B,KACVqD,EAAOf,UACHyL,GAAa,GAAiBX,EAAZW,GAChBN,IACFO,aAAaP,GACbA,EAAU,MAEZC,EAAWG,EACXtK,EAAS1B,EAAKQ,MAAMP,EAASuB,GACxBoK,IAAS3L,EAAUuB,EAAO,OACrBoK,IAAgC,IAArBD,EAAQS,WAC7BR,EAAUJ,WAAWM,EAAOI,IAEvBxK,GAST,OANAuK,EAAUI,OAAS,WACjBF,aAAaP,GACbC,EAAW,EACXD,EAAU3L,EAAUuB,EAAO,MAGtByK,GAOT5N,EAAEiO,SAAW,SAAStM,EAAMuL,EAAMgB,GAChC,IAAIX,EAASlK,EAEToK,EAAQ,SAAS7L,EAASuB,GAC5BoK,EAAU,KACNpK,IAAME,EAAS1B,EAAKQ,MAAMP,EAASuB,KAGrCgL,EAAYtL,EAAc,SAASM,GAErC,GADIoK,GAASO,aAAaP,GACtBW,EAAW,CACb,IAAIE,GAAWb,EACfA,EAAUJ,WAAWM,EAAOP,GACxBkB,IAAS/K,EAAS1B,EAAKQ,MAAMrC,KAAMqD,SAEvCoK,EAAUvN,EAAEiN,MAAMQ,EAAOP,EAAMpN,KAAMqD,GAGvC,OAAOE,IAQT,OALA8K,EAAUH,OAAS,WACjBF,aAAaP,GACbA,EAAU,MAGLY,GAMTnO,EAAEqO,KAAO,SAAS1M,EAAM2M,GACtB,OAAOtO,EAAEuM,QAAQ+B,EAAS3M,IAI5B3B,EAAEyF,OAAS,SAASP,GAClB,OAAO,WACL,OAAQA,EAAU/C,MAAMrC,KAAMsC,aAMlCpC,EAAEuO,QAAU,WACV,IAAIpL,EAAOf,UACPoJ,EAAQrI,EAAKJ,OAAS,EAC1B,OAAO,WAGL,IAFA,IAAIY,EAAI6H,EACJnI,EAASF,EAAKqI,GAAOrJ,MAAMrC,KAAMsC,WAC9BuB,KAAKN,EAASF,EAAKQ,GAAG5B,KAAKjC,KAAMuD,GACxC,OAAOA,IAKXrD,EAAEwO,MAAQ,SAASC,EAAO9M,GACxB,OAAO,WACL,KAAM8M,EAAQ,EACZ,OAAO9M,EAAKQ,MAAMrC,KAAMsC,aAM9BpC,EAAE0O,OAAS,SAASD,EAAO9M,GACzB,IAAI6C,EACJ,OAAO,WAKL,OAJc,IAARiK,IACJjK,EAAO7C,EAAKQ,MAAMrC,KAAMsC,YAEtBqM,GAAS,IAAG9M,EAAO,MAChB6C,IAMXxE,EAAE2O,KAAO3O,EAAEuM,QAAQvM,EAAE0O,OAAQ,GAE7B1O,EAAE6C,cAAgBA,EAMlB,IAAI+L,GAAc,CAAClO,SAAU,MAAMmO,qBAAqB,YACpDC,EAAqB,CAAC,UAAW,gBAAiB,WACpD,uBAAwB,iBAAkB,kBAExCC,EAAsB,SAAS5N,EAAKJ,GACtC,IAAIiO,EAAaF,EAAmB/L,OAChCkM,EAAc9N,EAAI8N,YAClBC,EAAQlP,EAAEwC,WAAWyM,IAAgBA,EAAY9O,WAAaC,EAG9D+O,EAAO,cAGX,IAFI3L,EAAIrC,EAAKgO,KAAUnP,EAAE8F,SAAS/E,EAAMoO,IAAOpO,EAAKP,KAAK2O,GAElDH,MACLG,EAAOL,EAAmBE,MACd7N,GAAOA,EAAIgO,KAAUD,EAAMC,KAAUnP,EAAE8F,SAAS/E,EAAMoO,IAChEpO,EAAKP,KAAK2O,IAOhBnP,EAAEe,KAAO,SAASI,GAChB,IAAKnB,EAAEyC,SAAStB,GAAM,MAAO,GAC7B,GAAIL,EAAY,OAAOA,EAAWK,GAClC,IAAIJ,EAAO,GACX,IAAK,IAAIwC,KAAOpC,EAASqC,EAAIrC,EAAKoC,IAAMxC,EAAKP,KAAK+C,GAGlD,OADIqL,GAAYG,EAAoB5N,EAAKJ,GAClCA,GAITf,EAAEoP,QAAU,SAASjO,GACnB,IAAKnB,EAAEyC,SAAStB,GAAM,MAAO,GAC7B,IAAIJ,EAAO,GACX,IAAK,IAAIwC,KAAOpC,EAAKJ,EAAKP,KAAK+C,GAG/B,OADIqL,GAAYG,EAAoB5N,EAAKJ,GAClCA,GAITf,EAAEoG,OAAS,SAASjF,GAIlB,IAHA,IAAIJ,EAAOf,EAAEe,KAAKI,GACd4B,EAAShC,EAAKgC,OACdqD,EAASlG,MAAM6C,GACVY,EAAI,EAAGA,EAAIZ,EAAQY,IAC1ByC,EAAOzC,GAAKxC,EAAIJ,EAAK4C,IAEvB,OAAOyC,GAKTpG,EAAEqP,UAAY,SAASlO,EAAKmB,EAAUV,GACpCU,EAAWD,EAAGC,EAAUV,GAIxB,IAHA,IAAIb,EAAOf,EAAEe,KAAKI,GACd4B,EAAShC,EAAKgC,OACdqB,EAAU,GACLpC,EAAQ,EAAGA,EAAQe,EAAQf,IAAS,CAC3C,IAAIqC,EAAatD,EAAKiB,GACtBoC,EAAQC,GAAc/B,EAASnB,EAAIkD,GAAaA,EAAYlD,GAE9D,OAAOiD,GAKTpE,EAAEsP,MAAQ,SAASnO,GAIjB,IAHA,IAAIJ,EAAOf,EAAEe,KAAKI,GACd4B,EAAShC,EAAKgC,OACduM,EAAQpP,MAAM6C,GACTY,EAAI,EAAGA,EAAIZ,EAAQY,IAC1B2L,EAAM3L,GAAK,CAAC5C,EAAK4C,GAAIxC,EAAIJ,EAAK4C,KAEhC,OAAO2L,GAITtP,EAAEuP,OAAS,SAASpO,GAGlB,IAFA,IAAIkC,EAAS,GACTtC,EAAOf,EAAEe,KAAKI,GACTwC,EAAI,EAAGZ,EAAShC,EAAKgC,OAAQY,EAAIZ,EAAQY,IAChDN,EAAOlC,EAAIJ,EAAK4C,KAAO5C,EAAK4C,GAE9B,OAAON,GAKTrD,EAAEwP,UAAYxP,EAAEyP,QAAU,SAAStO,GACjC,IAAIuO,EAAQ,GACZ,IAAK,IAAInM,KAAOpC,EACVnB,EAAEwC,WAAWrB,EAAIoC,KAAOmM,EAAMlP,KAAK+C,GAEzC,OAAOmM,EAAM/H,QAIf,IAAIgI,EAAiB,SAASC,EAAUC,GACtC,OAAO,SAAS1O,GACd,IAAI4B,EAASX,UAAUW,OAEvB,GADI8M,IAAU1O,EAAMd,OAAOc,IACvB4B,EAAS,GAAY,MAAP5B,EAAa,OAAOA,EACtC,IAAK,IAAIa,EAAQ,EAAGA,EAAQe,EAAQf,IAIlC,IAHA,IAAI8N,EAAS1N,UAAUJ,GACnBjB,EAAO6O,EAASE,GAChBC,EAAIhP,EAAKgC,OACJY,EAAI,EAAGA,EAAIoM,EAAGpM,IAAK,CAC1B,IAAIJ,EAAMxC,EAAK4C,GACVkM,QAAyB,IAAb1O,EAAIoC,KAAiBpC,EAAIoC,GAAOuM,EAAOvM,IAG5D,OAAOpC,IAKXnB,EAAEgQ,OAASL,EAAe3P,EAAEoP,SAI5BpP,EAAEiQ,UAAYjQ,EAAEkQ,OAASP,EAAe3P,EAAEe,MAG1Cf,EAAEoF,QAAU,SAASjE,EAAK+D,EAAWtD,GACnCsD,EAAY7C,EAAG6C,EAAWtD,GAE1B,IADA,IAAwB2B,EAApBxC,EAAOf,EAAEe,KAAKI,GACTwC,EAAI,EAAGZ,EAAShC,EAAKgC,OAAQY,EAAIZ,EAAQY,IAEhD,GAAIuB,EAAU/D,EADdoC,EAAMxC,EAAK4C,IACaJ,EAAKpC,GAAM,OAAOoC,GAK9C,IA+EI4M,EAAIC,EA/EJC,EAAW,SAASvO,EAAOyB,EAAKpC,GAClC,OAAOoC,KAAOpC,GAIhBnB,EAAEsQ,KAAOzN,EAAc,SAAS1B,EAAKJ,GACnC,IAAIsC,EAAS,GAAIf,EAAWvB,EAAK,GACjC,GAAW,MAAPI,EAAa,OAAOkC,EACpBrD,EAAEwC,WAAWF,IACG,EAAdvB,EAAKgC,SAAYT,EAAWZ,EAAWY,EAAUvB,EAAK,KAC1DA,EAAOf,EAAEoP,QAAQjO,KAEjBmB,EAAW+N,EACXtP,EAAOqI,EAAQrI,GAAM,GAAO,GAC5BI,EAAMd,OAAOc,IAEf,IAAK,IAAIwC,EAAI,EAAGZ,EAAShC,EAAKgC,OAAQY,EAAIZ,EAAQY,IAAK,CACrD,IAAIJ,EAAMxC,EAAK4C,GACX7B,EAAQX,EAAIoC,GACZjB,EAASR,EAAOyB,EAAKpC,KAAMkC,EAAOE,GAAOzB,GAE/C,OAAOuB,IAITrD,EAAEuQ,KAAO1N,EAAc,SAAS1B,EAAKJ,GACnC,IAAwBa,EAApBU,EAAWvB,EAAK,GAUpB,OATIf,EAAEwC,WAAWF,IACfA,EAAWtC,EAAEyF,OAAOnD,GACF,EAAdvB,EAAKgC,SAAYnB,EAAUb,EAAK,MAEpCA,EAAOf,EAAEkE,IAAIkF,EAAQrI,GAAM,GAAO,GAAQyP,QAC1ClO,EAAW,SAASR,EAAOyB,GACzB,OAAQvD,EAAE8F,SAAS/E,EAAMwC,KAGtBvD,EAAEsQ,KAAKnP,EAAKmB,EAAUV,KAI/B5B,EAAE6P,SAAWF,EAAe3P,EAAEoP,SAAS,GAKvCpP,EAAEiB,OAAS,SAASd,EAAWsQ,GAC7B,IAAIpN,EAASD,EAAWjD,GAExB,OADIsQ,GAAOzQ,EAAEiQ,UAAU5M,EAAQoN,GACxBpN,GAITrD,EAAEqH,MAAQ,SAASlG,GACjB,OAAKnB,EAAEyC,SAAStB,GACTnB,EAAEa,QAAQM,GAAOA,EAAIV,QAAUT,EAAEgQ,OAAO,GAAI7O,GADtBA,GAO/BnB,EAAE0Q,IAAM,SAASvP,EAAKwP,GAEpB,OADAA,EAAYxP,GACLA,GAITnB,EAAE4Q,QAAU,SAASjG,EAAQhE,GAC3B,IAAI5F,EAAOf,EAAEe,KAAK4F,GAAQ5D,EAAShC,EAAKgC,OACxC,GAAc,MAAV4H,EAAgB,OAAQ5H,EAE5B,IADA,IAAI5B,EAAMd,OAAOsK,GACRhH,EAAI,EAAGA,EAAIZ,EAAQY,IAAK,CAC/B,IAAIJ,EAAMxC,EAAK4C,GACf,GAAIgD,EAAMpD,KAASpC,EAAIoC,MAAUA,KAAOpC,GAAM,OAAO,EAEvD,OAAO,GAMTgP,EAAK,SAASrI,EAAGC,EAAG8I,EAAQC,GAG1B,GAAIhJ,IAAMC,EAAG,OAAa,IAAND,GAAW,EAAIA,GAAM,EAAIC,EAE7C,GAAS,MAALD,GAAkB,MAALC,EAAW,OAAO,EAEnC,GAAID,GAAMA,EAAG,OAAOC,GAAMA,EAE1B,IAAIgJ,SAAcjJ,EAClB,OAAa,aAATiJ,GAAgC,WAATA,GAAiC,iBAALhJ,IAChDqI,EAAOtI,EAAGC,EAAG8I,EAAQC,IAI9BV,EAAS,SAAStI,EAAGC,EAAG8I,EAAQC,GAE1BhJ,aAAa9H,IAAG8H,EAAIA,EAAE1G,UACtB2G,aAAa/H,IAAG+H,EAAIA,EAAE3G,UAE1B,IAAI4P,EAAYtQ,EAASqB,KAAK+F,GAC9B,GAAIkJ,IAActQ,EAASqB,KAAKgG,GAAI,OAAO,EAC3C,OAAQiJ,GAEN,IAAK,kBAEL,IAAK,kBAGH,MAAO,GAAKlJ,GAAM,GAAKC,EACzB,IAAK,kBAGH,OAAKD,IAAOA,GAAWC,IAAOA,EAEhB,IAAND,EAAU,GAAKA,GAAM,EAAIC,GAAKD,IAAOC,EAC/C,IAAK,gBACL,IAAK,mBAIH,OAAQD,IAAOC,EACjB,IAAK,kBACH,OAAOzH,EAAY2Q,QAAQlP,KAAK+F,KAAOxH,EAAY2Q,QAAQlP,KAAKgG,GAGpE,IAAImJ,EAA0B,mBAAdF,EAChB,IAAKE,EAAW,CACd,GAAgB,iBAALpJ,GAA6B,iBAALC,EAAe,OAAO,EAIzD,IAAIoJ,EAAQrJ,EAAEmH,YAAamC,EAAQrJ,EAAEkH,YACrC,GAAIkC,IAAUC,KAAWpR,EAAEwC,WAAW2O,IAAUA,aAAiBA,GACxCnR,EAAEwC,WAAW4O,IAAUA,aAAiBA,IACzC,gBAAiBtJ,GAAK,gBAAiBC,EAC7D,OAAO,EASX+I,EAASA,GAAU,GAEnB,IADA,IAAI/N,GAFJ8N,EAASA,GAAU,IAEC9N,OACbA,KAGL,GAAI8N,EAAO9N,KAAY+E,EAAG,OAAOgJ,EAAO/N,KAAYgF,EAQtD,GAJA8I,EAAOrQ,KAAKsH,GACZgJ,EAAOtQ,KAAKuH,GAGRmJ,EAAW,CAGb,IADAnO,EAAS+E,EAAE/E,UACIgF,EAAEhF,OAAQ,OAAO,EAEhC,KAAOA,KACL,IAAKoN,EAAGrI,EAAE/E,GAASgF,EAAEhF,GAAS8N,EAAQC,GAAS,OAAO,MAEnD,CAEL,IAAsBvN,EAAlBxC,EAAOf,EAAEe,KAAK+G,GAGlB,GAFA/E,EAAShC,EAAKgC,OAEV/C,EAAEe,KAAKgH,GAAGhF,SAAWA,EAAQ,OAAO,EACxC,KAAOA,KAGL,GADAQ,EAAMxC,EAAKgC,IACLS,EAAIuE,EAAGxE,KAAQ4M,EAAGrI,EAAEvE,GAAMwE,EAAExE,GAAMsN,EAAQC,GAAU,OAAO,EAMrE,OAFAD,EAAOQ,MACPP,EAAOO,OACA,GAITrR,EAAEsR,QAAU,SAASxJ,EAAGC,GACtB,OAAOoI,EAAGrI,EAAGC,IAKf/H,EAAEuR,QAAU,SAASpQ,GACnB,OAAW,MAAPA,IACA4C,EAAY5C,KAASnB,EAAEa,QAAQM,IAAQnB,EAAEwI,SAASrH,IAAQnB,EAAE0J,YAAYvI,IAA6B,IAAfA,EAAI4B,OAChE,IAAvB/C,EAAEe,KAAKI,GAAK4B,SAIrB/C,EAAEwR,UAAY,SAASrQ,GACrB,SAAUA,GAAwB,IAAjBA,EAAIG,WAKvBtB,EAAEa,QAAUD,GAAiB,SAASO,GACpC,MAA8B,mBAAvBT,EAASqB,KAAKZ,IAIvBnB,EAAEyC,SAAW,SAAStB,GACpB,IAAI4P,SAAc5P,EAClB,MAAgB,aAAT4P,GAAgC,WAATA,KAAuB5P,GAIvDnB,EAAEgE,KAAK,CAAC,YAAa,WAAY,SAAU,SAAU,OAAQ,SAAU,QAAS,SAAU,MAAO,UAAW,MAAO,WAAY,SAASyN,GACtIzR,EAAE,KAAOyR,GAAQ,SAAStQ,GACxB,OAAOT,EAASqB,KAAKZ,KAAS,WAAasQ,EAAO,OAMjDzR,EAAE0J,YAAYtH,aACjBpC,EAAE0J,YAAc,SAASvI,GACvB,OAAOqC,EAAIrC,EAAK,YAMpB,IAAIuQ,EAAW/R,EAAKgS,UAAYhS,EAAKgS,SAASC,WAC5B,kBAAP,KAAyC,iBAAbC,WAA4C,mBAAZH,IACrE1R,EAAEwC,WAAa,SAASrB,GACtB,MAAqB,mBAAPA,IAAqB,IAKvCnB,EAAE8R,SAAW,SAAS3Q,GACpB,OAAQnB,EAAE+R,SAAS5Q,IAAQ2Q,SAAS3Q,KAASkK,MAAM2G,WAAW7Q,KAIhEnB,EAAEqL,MAAQ,SAASlK,GACjB,OAAOnB,EAAEiS,SAAS9Q,IAAQkK,MAAMlK,IAIlCnB,EAAEmK,UAAY,SAAShJ,GACrB,OAAe,IAARA,IAAwB,IAARA,GAAwC,qBAAvBT,EAASqB,KAAKZ,IAIxDnB,EAAEkS,OAAS,SAAS/Q,GAClB,OAAe,OAARA,GAITnB,EAAEmS,YAAc,SAAShR,GACvB,YAAe,IAARA,GAKTnB,EAAEwD,IAAM,SAASrC,EAAKsC,GACpB,IAAKzD,EAAEa,QAAQ4C,GACb,OAAOD,EAAIrC,EAAKsC,GAGlB,IADA,IAAIV,EAASU,EAAKV,OACTY,EAAI,EAAGA,EAAIZ,EAAQY,IAAK,CAC/B,IAAIJ,EAAME,EAAKE,GACf,GAAW,MAAPxC,IAAgBR,EAAeoB,KAAKZ,EAAKoC,GAC3C,OAAO,EAETpC,EAAMA,EAAIoC,GAEZ,QAASR,GAQX/C,EAAEoS,WAAa,WAEb,OADAzS,EAAKK,EAAID,EACFD,MAITE,EAAEuC,SAAW,SAAST,GACpB,OAAOA,GAIT9B,EAAEqS,SAAW,SAASvQ,GACpB,OAAO,WACL,OAAOA,IAIX9B,EAAEsS,KAAO,aAITtS,EAAE2C,SAAW,SAASc,GACpB,OAAKzD,EAAEa,QAAQ4C,GAGR,SAAStC,GACd,OAAOuC,EAAQvC,EAAKsC,IAHbH,EAAgBG,IAQ3BzD,EAAEuS,WAAa,SAASpR,GACtB,OAAW,MAAPA,EACK,aAEF,SAASsC,GACd,OAAQzD,EAAEa,QAAQ4C,GAAoBC,EAAQvC,EAAKsC,GAAzBtC,EAAIsC,KAMlCzD,EAAE0C,QAAU1C,EAAEwS,QAAU,SAAS7L,GAE/B,OADAA,EAAQ3G,EAAEiQ,UAAU,GAAItJ,GACjB,SAASxF,GACd,OAAOnB,EAAE4Q,QAAQzP,EAAKwF,KAK1B3G,EAAEyO,MAAQ,SAAStH,EAAG7E,EAAUV,GAC9B,IAAI6Q,EAAQvS,MAAM8C,KAAKC,IAAI,EAAGkE,IAC9B7E,EAAWZ,EAAWY,EAAUV,EAAS,GACzC,IAAK,IAAI+B,EAAI,EAAGA,EAAIwD,EAAGxD,IAAK8O,EAAM9O,GAAKrB,EAASqB,GAChD,OAAO8O,GAITzS,EAAEoH,OAAS,SAASJ,EAAK/D,GAKvB,OAJW,MAAPA,IACFA,EAAM+D,EACNA,EAAM,GAEDA,EAAMhE,KAAKkI,MAAMlI,KAAKoE,UAAYnE,EAAM+D,EAAM,KAIvDhH,EAAE2N,IAAM+E,KAAK/E,KAAO,WAClB,OAAO,IAAI+E,MAAOC,WAIpB,IAAIC,EAAY,CACdC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,UAEHC,EAAcnT,EAAEuP,OAAOqD,GAGvBQ,EAAgB,SAASlP,GAC3B,IAAImP,EAAU,SAAS5K,GACrB,OAAOvE,EAAIuE,IAGTqH,EAAS,MAAQ9P,EAAEe,KAAKmD,GAAKoP,KAAK,KAAO,IACzCC,EAAaC,OAAO1D,GACpB2D,EAAgBD,OAAO1D,EAAQ,KACnC,OAAO,SAAS4D,GAEd,OADAA,EAAmB,MAAVA,EAAiB,GAAK,GAAKA,EAC7BH,EAAWI,KAAKD,GAAUA,EAAOE,QAAQH,EAAeJ,GAAWK,IAG9E1T,EAAE6T,OAAST,EAAcR,GACzB5S,EAAE8T,SAAWV,EAAcD,GAK3BnT,EAAEqD,OAAS,SAASlC,EAAKsC,EAAMsQ,GACxB/T,EAAEa,QAAQ4C,KAAOA,EAAO,CAACA,IAC9B,IAAIV,EAASU,EAAKV,OAClB,IAAKA,EACH,OAAO/C,EAAEwC,WAAWuR,GAAYA,EAAShS,KAAKZ,GAAO4S,EAEvD,IAAK,IAAIpQ,EAAI,EAAGA,EAAIZ,EAAQY,IAAK,CAC/B,IAAIwL,EAAc,MAAPhO,OAAc,EAASA,EAAIsC,EAAKE,SAC9B,IAATwL,IACFA,EAAO4E,EACPpQ,EAAIZ,GAEN5B,EAAMnB,EAAEwC,WAAW2M,GAAQA,EAAKpN,KAAKZ,GAAOgO,EAE9C,OAAOhO,GAKT,IAAI6S,EAAY,EAChBhU,EAAEiU,SAAW,SAASC,GACpB,IAAIC,IAAOH,EAAY,GACvB,OAAOE,EAASA,EAASC,EAAKA,GAKhCnU,EAAEoU,iBAAmB,CACnBC,SAAU,kBACVC,YAAa,mBACbT,OAAQ,oBAMV,IAAIU,EAAU,OAIVC,EAAU,CACZvB,IAAK,IACLwB,KAAM,KACNC,KAAM,IACNC,KAAM,IACNC,SAAU,QACVC,SAAU,SAGRC,EAAe,4BAEfC,EAAa,SAAStM,GACxB,MAAO,KAAO+L,EAAQ/L,IAOxBzI,EAAEgV,SAAW,SAASC,EAAMC,EAAUC,IAC/BD,GAAYC,IAAaD,EAAWC,GACzCD,EAAWlV,EAAE6P,SAAS,GAAIqF,EAAUlV,EAAEoU,kBAGtC,IAiCIgB,EAjCA1S,EAAU8Q,OAAO,EAClB0B,EAASrB,QAAUU,GAASzE,QAC5BoF,EAASZ,aAAeC,GAASzE,QACjCoF,EAASb,UAAYE,GAASzE,QAC/BwD,KAAK,KAAO,KAAM,KAGhBtR,EAAQ,EACR8N,EAAS,SACbmF,EAAKrB,QAAQlR,EAAS,SAAS+F,EAAOoL,EAAQS,EAAaD,EAAUgB,GAanE,OAZAvF,GAAUmF,EAAKxU,MAAMuB,EAAOqT,GAAQzB,QAAQkB,EAAcC,GAC1D/S,EAAQqT,EAAS5M,EAAM1F,OAEnB8Q,EACF/D,GAAU,cAAgB+D,EAAS,iCAC1BS,EACTxE,GAAU,cAAgBwE,EAAc,uBAC/BD,IACTvE,GAAU,OAASuE,EAAW,YAIzB5L,IAETqH,GAAU,OAGLoF,EAASI,WAAUxF,EAAS,mBAAqBA,EAAS,OAE/DA,EAAS,2CACP,oDACAA,EAAS,gBAGX,IACEsF,EAAS,IAAIG,SAASL,EAASI,UAAY,MAAO,IAAKxF,GACvD,MAAO0F,GAEP,MADAA,EAAE1F,OAASA,EACL0F,EAGR,IAAIR,EAAW,SAASS,GACtB,OAAOL,EAAOrT,KAAKjC,KAAM2V,EAAMzV,IAI7B0V,EAAWR,EAASI,UAAY,MAGpC,OAFAN,EAASlF,OAAS,YAAc4F,EAAW,OAAS5F,EAAS,IAEtDkF,GAIThV,EAAE2V,MAAQ,SAASxU,GACjB,IAAIyU,EAAW5V,EAAEmB,GAEjB,OADAyU,EAASC,QAAS,EACXD,GAUT,IAAIE,EAAc,SAASF,EAAUzU,GACnC,OAAOyU,EAASC,OAAS7V,EAAEmB,GAAKwU,QAAUxU,GAI5CnB,EAAE+V,MAAQ,SAAS5U,GASjB,OARAnB,EAAEgE,KAAKhE,EAAEwP,UAAUrO,GAAM,SAASsQ,GAChC,IAAI9P,EAAO3B,EAAEyR,GAAQtQ,EAAIsQ,GACzBzR,EAAEG,UAAUsR,GAAQ,WAClB,IAAItO,EAAO,CAACrD,KAAKsB,UAEjB,OADAZ,EAAK2B,MAAMgB,EAAMf,WACV0T,EAAYhW,KAAM6B,EAAKQ,MAAMnC,EAAGmD,OAGpCnD,GAITA,EAAE+V,MAAM/V,GAGRA,EAAEgE,KAAK,CAAC,MAAO,OAAQ,UAAW,QAAS,OAAQ,SAAU,WAAY,SAASyN,GAChF,IAAIjL,EAASvG,EAAWwR,GACxBzR,EAAEG,UAAUsR,GAAQ,WAClB,IAAItQ,EAAMrB,KAAKsB,SAGf,OAFAoF,EAAOrE,MAAMhB,EAAKiB,WACJ,UAATqP,GAA6B,WAATA,GAAqC,IAAftQ,EAAI4B,eAAqB5B,EAAI,GACrE2U,EAAYhW,KAAMqB,MAK7BnB,EAAEgE,KAAK,CAAC,SAAU,OAAQ,SAAU,SAASyN,GAC3C,IAAIjL,EAASvG,EAAWwR,GACxBzR,EAAEG,UAAUsR,GAAQ,WAClB,OAAOqE,EAAYhW,KAAM0G,EAAOrE,MAAMrC,KAAKsB,SAAUgB,eAKzDpC,EAAEG,UAAU2B,MAAQ,WAClB,OAAOhC,KAAKsB,UAKdpB,EAAEG,UAAU8Q,QAAUjR,EAAEG,UAAU6V,OAAShW,EAAEG,UAAU2B,MAEvD9B,EAAEG,UAAUO,SAAW,WACrB,OAAO8P,OAAO1Q,KAAKsB,WAUA,mBAAV6U,QAAwBA,OAAOC,KACxCD,OAAO,aAAc,GAAI,WACvB,OAAOjW,IAnpDb"}
##############################################
/src/demo/ts-demo/node_modules/underscore/underscore.js-1525-  _.templateSettings = {
/src/demo/ts-demo/node_modules/underscore/underscore.js:1526:    evaluate: /<%([\s\S]+?)%>/g,
/src/demo/ts-demo/node_modules/underscore/underscore.js-1527-    interpolate: /<%=([\s\S]+?)%>/g,
##############################################
/src/demo/ts-demo/node_modules/underscore/underscore.js-1531-  // When customizing `templateSettings`, if you don't want to define an
/src/demo/ts-demo/node_modules/underscore/underscore.js:1532:  // interpolation, evaluation or escaping regex, we need one that is
/src/demo/ts-demo/node_modules/underscore/underscore.js-1533-  // guaranteed not to match.
##############################################
/src/demo/ts-demo/node_modules/underscore/underscore.js-1564-      (settings.interpolate || noMatch).source,
/src/demo/ts-demo/node_modules/underscore/underscore.js:1565:      (settings.evaluate || noMatch).source
/src/demo/ts-demo/node_modules/underscore/underscore.js-1566-    ].join('|') + '|$', 'g');
##############################################
/src/demo/ts-demo/node_modules/underscore/underscore.js-1570-    var source = "__p+='";
/src/demo/ts-demo/node_modules/underscore/underscore.js:1571:    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
/src/demo/ts-demo/node_modules/underscore/underscore.js-1572-      source += text.slice(index, offset).replace(escapeRegExp, escapeChar);
##############################################
/src/demo/ts-demo/node_modules/underscore/underscore.js-1578-        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
/src/demo/ts-demo/node_modules/underscore/underscore.js:1579:      } else if (evaluate) {
/src/demo/ts-demo/node_modules/underscore/underscore.js:1580:        source += "';\n" + evaluate + "\n__p+='";
/src/demo/ts-demo/node_modules/underscore/underscore.js-1581-      }
##############################################
/src/demo/ts-demo/node_modules/chokidar/lib/nodefs-handler.js-452-
/src/demo/ts-demo/node_modules/chokidar/lib/nodefs-handler.js:453:  // evaluate what is at the path we're being asked to watch
/src/demo/ts-demo/node_modules/chokidar/lib/nodefs-handler.js-454-  fs[wh.statMethod](wh.watchPath, function(error, stats) {
##############################################
/src/demo/ts-demo/node_modules/chokidar/lib/fsevents-handler.js-334-
/src/demo/ts-demo/node_modules/chokidar/lib/fsevents-handler.js:335:  // evaluate what is at the path we're being asked to watch
/src/demo/ts-demo/node_modules/chokidar/lib/fsevents-handler.js-336-  fs[wh.statMethod](wh.watchPath, function(error, stats) {
##############################################
/src/demo/ts-demo/node_modules/ts-loader/README.md-125-* `devtool: 'inline-source-map'` - Solid sourcemap support; the best "all-rounder". Works well with karma-webpack (not all strategies do)
/src/demo/ts-demo/node_modules/ts-loader/README.md:126:* `devtool: 'cheap-module-eval-source-map'` - Best support for sourcemaps whilst debugging.
/src/demo/ts-demo/node_modules/ts-loader/README.md-127-* `devtool: 'source-map'` - Approach that plays well with UglifyJsPlugin; typically you might use this in Production
##############################################
/src/demo/ts-demo/node_modules/readable-stream/lib/_stream_readable.js-438-    // If _read pushed data synchronously, then `reading` will be false,
/src/demo/ts-demo/node_modules/readable-stream/lib/_stream_readable.js:439:    // and we need to re-evaluate how much data we can return to the user.
/src/demo/ts-demo/node_modules/readable-stream/lib/_stream_readable.js-440-    if (!state.reading) n = howMuchToRead(nOrig, state);
##############################################
/src/demo/ts-demo/node_modules/unique-filename/coverage/prettify.js:1:window.PR_SHOULD_USE_CONTINUATION=true;(function(){var h=["break,continue,do,else,for,if,return,while"];var u=[h,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"];var p=[u,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"];var l=[p,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"];var x=[p,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"];var R=[x,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"];var r="all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes";var w=[p,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"];var s="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END";var I=[h,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"];var f=[h,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"];var H=[h,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"];var A=[l,R,w,s+I,f,H];var e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/;var C="str";var z="kwd";var j="com";var O="typ";var G="lit";var L="pun";var F="pln";var m="tag";var E="dec";var J="src";var P="atn";var n="atv";var N="nocode";var M="(?:^^\\.?|[+-]|\\!|\\!=|\\!==|\\#|\\%|\\%=|&|&&|&&=|&=|\\(|\\*|\\*=|\\+=|\\,|\\-=|\\->|\\/|\\/=|:|::|\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\@|\\[|\\^|\\^=|\\^\\^|\\^\\^=|\\{|\\||\\|=|\\|\\||\\|\\|=|\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*";function k(Z){var ad=0;var S=false;var ac=false;for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.ignoreCase){ac=true}else{if(/[a-z]/i.test(ae.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){S=true;ac=false;break}}}var Y={b:8,t:9,n:10,v:11,f:12,r:13};function ab(ah){var ag=ah.charCodeAt(0);if(ag!==92){return ag}var af=ah.charAt(1);ag=Y[af];if(ag){return ag}else{if("0"<=af&&af<="7"){return parseInt(ah.substring(1),8)}else{if(af==="u"||af==="x"){return parseInt(ah.substring(2),16)}else{return ah.charCodeAt(1)}}}}function T(af){if(af<32){return(af<16?"\\x0":"\\x")+af.toString(16)}var ag=String.fromCharCode(af);if(ag==="\\"||ag==="-"||ag==="["||ag==="]"){ag="\\"+ag}return ag}function X(am){var aq=am.substring(1,am.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g"));var ak=[];var af=[];var ao=aq[0]==="^";for(var ar=ao?1:0,aj=aq.length;ar<aj;++ar){var ah=aq[ar];if(/\\[bdsw]/i.test(ah)){ak.push(ah)}else{var ag=ab(ah);var al;if(ar+2<aj&&"-"===aq[ar+1]){al=ab(aq[ar+2]);ar+=2}else{al=ag}af.push([ag,al]);if(!(al<65||ag>122)){if(!(al<65||ag>90)){af.push([Math.max(65,ag)|32,Math.min(al,90)|32])}if(!(al<97||ag>122)){af.push([Math.max(97,ag)&~32,Math.min(al,122)&~32])}}}}af.sort(function(av,au){return(av[0]-au[0])||(au[1]-av[1])});var ai=[];var ap=[NaN,NaN];for(var ar=0;ar<af.length;++ar){var at=af[ar];if(at[0]<=ap[1]+1){ap[1]=Math.max(ap[1],at[1])}else{ai.push(ap=at)}}var an=["["];if(ao){an.push("^")}an.push.apply(an,ak);for(var ar=0;ar<ai.length;++ar){var at=ai[ar];an.push(T(at[0]));if(at[1]>at[0]){if(at[1]+1>at[0]){an.push("-")}an.push(T(at[1]))}}an.push("]");return an.join("")}function W(al){var aj=al.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g"));var ah=aj.length;var an=[];for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag==="("){++am}else{if("\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){an[af]=-1}}}}for(var ak=1;ak<an.length;++ak){if(-1===an[ak]){an[ak]=++ad}}for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag==="("){++am;if(an[am]===undefined){aj[ak]="(?:"}}else{if("\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){aj[ak]="\\"+an[am]}}}}for(var ak=0,am=0;ak<ah;++ak){if("^"===aj[ak]&&"^"!==aj[ak+1]){aj[ak]=""}}if(al.ignoreCase&&S){for(var ak=0;ak<ah;++ak){var ag=aj[ak];var ai=ag.charAt(0);if(ag.length>=2&&ai==="["){aj[ak]=X(ag)}else{if(ai!=="\\"){aj[ak]=ag.replace(/[a-zA-Z]/g,function(ao){var ap=ao.charCodeAt(0);return"["+String.fromCharCode(ap&~32,ap|32)+"]"})}}}}return aj.join("")}var aa=[];for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.global||ae.multiline){throw new Error(""+ae)}aa.push("(?:"+W(ae)+")")}return new RegExp(aa.join("|"),ac?"gi":"g")}function a(V){var U=/(?:^|\s)nocode(?:\s|$)/;var X=[];var T=0;var Z=[];var W=0;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=document.defaultView.getComputedStyle(V,null).getPropertyValue("white-space")}}var Y=S&&"pre"===S.substring(0,3);function aa(ab){switch(ab.nodeType){case 1:if(U.test(ab.className)){return}for(var ae=ab.firstChild;ae;ae=ae.nextSibling){aa(ae)}var ad=ab.nodeName;if("BR"===ad||"LI"===ad){X[W]="\n";Z[W<<1]=T++;Z[(W++<<1)|1]=ab}break;case 3:case 4:var ac=ab.nodeValue;if(ac.length){if(!Y){ac=ac.replace(/[ \t\r\n]+/g," ")}else{ac=ac.replace(/\r\n?/g,"\n")}X[W]=ac;Z[W<<1]=T;T+=ac.length;Z[(W++<<1)|1]=ab}break}}aa(V);return{sourceCode:X.join("").replace(/\n$/,""),spans:Z}}function B(S,U,W,T){if(!U){return}var V={sourceCode:U,basePos:S};W(V);T.push.apply(T,V.decorations)}var v=/\S/;function o(S){var V=undefined;for(var U=S.firstChild;U;U=U.nextSibling){var T=U.nodeType;V=(T===1)?(V?S:U):(T===3)?(v.test(U.nodeValue)?S:V):V}return V===S?undefined:V}function g(U,T){var S={};var V;(function(){var ad=U.concat(T);var ah=[];var ag={};for(var ab=0,Z=ad.length;ab<Z;++ab){var Y=ad[ab];var ac=Y[3];if(ac){for(var ae=ac.length;--ae>=0;){S[ac.charAt(ae)]=Y}}var af=Y[1];var aa=""+af;if(!ag.hasOwnProperty(aa)){ah.push(af);ag[aa]=null}}ah.push(/[\0-\uffff]/);V=k(ah)})();var X=T.length;var W=function(ah){var Z=ah.sourceCode,Y=ah.basePos;var ad=[Y,F];var af=0;var an=Z.match(V)||[];var aj={};for(var ae=0,aq=an.length;ae<aq;++ae){var ag=an[ae];var ap=aj[ag];var ai=void 0;var am;if(typeof ap==="string"){am=false}else{var aa=S[ag.charAt(0)];if(aa){ai=ag.match(aa[1]);ap=aa[0]}else{for(var ao=0;ao<X;++ao){aa=T[ao];ai=ag.match(aa[1]);if(ai){ap=aa[0];break}}if(!ai){ap=F}}am=ap.length>=5&&"lang-"===ap.substring(0,5);if(am&&!(ai&&typeof ai[1]==="string")){am=false;ap=J}if(!am){aj[ag]=ap}}var ab=af;af+=ag.length;if(!am){ad.push(Y+ab,ap)}else{var al=ai[1];var ak=ag.indexOf(al);var ac=ak+al.length;if(ai[2]){ac=ag.length-ai[2].length;ak=ac-al.length}var ar=ap.substring(5);B(Y+ab,ag.substring(0,ak),W,ad);B(Y+ab+ak,al,q(ar,al),ad);B(Y+ab+ac,ag.substring(ac),W,ad)}}ah.decorations=ad};return W}function i(T){var W=[],S=[];if(T.tripleQuotedStrings){W.push([C,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""])}else{if(T.multiLineStrings){W.push([C,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"])}else{W.push([C,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"])}}if(T.verbatimStrings){S.push([C,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null])}var Y=T.hashComments;if(Y){if(T.cStyleComments){if(Y>1){W.push([j,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"])}else{W.push([j,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"])}S.push([C,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,null])}else{W.push([j,/^#[^\r\n]*/,null,"#"])}}if(T.cStyleComments){S.push([j,/^\/\/[^\r\n]*/,null]);S.push([j,/^\/\*[\s\S]*?(?:\*\/|$)/,null])}if(T.regexLiterals){var X=("/(?=[^/*])(?:[^/\\x5B\\x5C]|\\x5C[\\s\\S]|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S])*(?:\\x5D|$))+/");S.push(["lang-regex",new RegExp("^"+M+"("+X+")")])}var V=T.types;if(V){S.push([O,V])}var U=(""+T.keywords).replace(/^ | $/g,"");if(U.length){S.push([z,new RegExp("^(?:"+U.replace(/[\s,]+/g,"|")+")\\b"),null])}W.push([F,/^\s+/,null," \r\n\t\xA0"]);S.push([G,/^@[a-z_$][a-z_$@0-9]*/i,null],[O,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[F,/^[a-z_$][a-z_$@0-9]*/i,null],[G,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[F,/^\\[\s\S]?/,null],[L,/^.[^\s\w\.$@\'\"\`\/\#\\]*/,null]);return g(W,S)}var K=i({keywords:A,hashComments:true,cStyleComments:true,multiLineStrings:true,regexLiterals:true});function Q(V,ag){var U=/(?:^|\s)nocode(?:\s|$)/;var ab=/\r\n?|\n/;var ac=V.ownerDocument;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=ac.defaultView.getComputedStyle(V,null).getPropertyValue("white-space")}}var Z=S&&"pre"===S.substring(0,3);var af=ac.createElement("LI");while(V.firstChild){af.appendChild(V.firstChild)}var W=[af];function ae(al){switch(al.nodeType){case 1:if(U.test(al.className)){break}if("BR"===al.nodeName){ad(al);if(al.parentNode){al.parentNode.removeChild(al)}}else{for(var an=al.firstChild;an;an=an.nextSibling){ae(an)}}break;case 3:case 4:if(Z){var am=al.nodeValue;var aj=am.match(ab);if(aj){var ai=am.substring(0,aj.index);al.nodeValue=ai;var ah=am.substring(aj.index+aj[0].length);if(ah){var ak=al.parentNode;ak.insertBefore(ac.createTextNode(ah),al.nextSibling)}ad(al);if(!ai){al.parentNode.removeChild(al)}}}break}}function ad(ak){while(!ak.nextSibling){ak=ak.parentNode;if(!ak){return}}function ai(al,ar){var aq=ar?al.cloneNode(false):al;var ao=al.parentNode;if(ao){var ap=ai(ao,1);var an=al.nextSibling;ap.appendChild(aq);for(var am=an;am;am=an){an=am.nextSibling;ap.appendChild(am)}}return aq}var ah=ai(ak.nextSibling,0);for(var aj;(aj=ah.parentNode)&&aj.nodeType===1;){ah=aj}W.push(ah)}for(var Y=0;Y<W.length;++Y){ae(W[Y])}if(ag===(ag|0)){W[0].setAttribute("value",ag)}var aa=ac.createElement("OL");aa.className="linenums";var X=Math.max(0,((ag-1))|0)||0;for(var Y=0,T=W.length;Y<T;++Y){af=W[Y];af.className="L"+((Y+X)%10);if(!af.firstChild){af.appendChild(ac.createTextNode("\xA0"))}aa.appendChild(af)}V.appendChild(aa)}function D(ac){var aj=/\bMSIE\b/.test(navigator.userAgent);var am=/\n/g;var al=ac.sourceCode;var an=al.length;var V=0;var aa=ac.spans;var T=aa.length;var ah=0;var X=ac.decorations;var Y=X.length;var Z=0;X[Y]=an;var ar,aq;for(aq=ar=0;aq<Y;){if(X[aq]!==X[aq+2]){X[ar++]=X[aq++];X[ar++]=X[aq++]}else{aq+=2}}Y=ar;for(aq=ar=0;aq<Y;){var at=X[aq];var ab=X[aq+1];var W=aq+2;while(W+2<=Y&&X[W+1]===ab){W+=2}X[ar++]=at;X[ar++]=ab;aq=W}Y=X.length=ar;var ae=null;while(ah<T){var af=aa[ah];var S=aa[ah+2]||an;var ag=X[Z];var ap=X[Z+2]||an;var W=Math.min(S,ap);var ak=aa[ah+1];var U;if(ak.nodeType!==1&&(U=al.substring(V,W))){if(aj){U=U.replace(am,"\r")}ak.nodeValue=U;var ai=ak.ownerDocument;var ao=ai.createElement("SPAN");ao.className=X[Z+1];var ad=ak.parentNode;ad.replaceChild(ao,ak);ao.appendChild(ak);if(V<S){aa[ah+1]=ak=ai.createTextNode(al.substring(W,S));ad.insertBefore(ak,ao.nextSibling)}}V=W;if(V>=S){ah+=2}if(V>=ap){Z+=2}}}var t={};function c(U,V){for(var S=V.length;--S>=0;){var T=V[S];if(!t.hasOwnProperty(T)){t[T]=U}else{if(window.console){console.warn("cannot override language handler %s",T)}}}}function q(T,S){if(!(T&&t.hasOwnProperty(T))){T=/^\s*</.test(S)?"default-markup":"default-code"}return t[T]}c(K,["default-code"]);c(g([],[[F,/^[^<?]+/],[E,/^<!\w[^>]*(?:>|$)/],[j,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[L,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);c(g([[F,/^[\s]+/,null," \t\r\n"],[n,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[[m,/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],[P,/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[L,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]);c(g([],[[n,/^[\s\S]+/]]),["uq.val"]);c(i({keywords:l,hashComments:true,cStyleComments:true,types:e}),["c","cc","cpp","cxx","cyc","m"]);c(i({keywords:"null,true,false"}),["json"]);c(i({keywords:R,hashComments:true,cStyleComments:true,verbatimStrings:true,types:e}),["cs"]);c(i({keywords:x,cStyleComments:true}),["java"]);c(i({keywords:H,hashComments:true,multiLineStrings:true}),["bsh","csh","sh"]);c(i({keywords:I,hashComments:true,multiLineStrings:true,tripleQuotedStrings:true}),["cv","py"]);c(i({keywords:s,hashComments:true,multiLineStrings:true,regexLiterals:true}),["perl","pl","pm"]);c(i({keywords:f,hashComments:true,multiLineStrings:true,regexLiterals:true}),["rb"]);c(i({keywords:w,cStyleComments:true,regexLiterals:true}),["js"]);c(i({keywords:r,hashComments:3,cStyleComments:true,multilineStrings:true,tripleQuotedStrings:true,regexLiterals:true}),["coffee"]);c(g([],[[C,/^[\s\S]+/]]),["regex"]);function d(V){var U=V.langExtension;try{var S=a(V.sourceNode);var T=S.sourceCode;V.sourceCode=T;V.spans=S.spans;V.basePos=0;q(U,T)(V);D(V)}catch(W){if("console" in window){console.log(W&&W.stack?W.stack:W)}}}function y(W,V,U){var S=document.createElement("PRE");S.innerHTML=W;if(U){Q(S,U)}var T={langExtension:V,numberLines:U,sourceNode:S};d(T);return S.innerHTML}function b(ad){function Y(af){return document.getElementsByTagName(af)}var ac=[Y("pre"),Y("code"),Y("xmp")];var T=[];for(var aa=0;aa<ac.length;++aa){for(var Z=0,V=ac[aa].length;Z<V;++Z){T.push(ac[aa][Z])}}ac=null;var W=Date;if(!W.now){W={now:function(){return +(new Date)}}}var X=0;var S;var ab=/\blang(?:uage)?-([\w.]+)(?!\S)/;var ae=/\bprettyprint\b/;function U(){var ag=(window.PR_SHOULD_USE_CONTINUATION?W.now()+250:Infinity);for(;X<T.length&&W.now()<ag;X++){var aj=T[X];var ai=aj.className;if(ai.indexOf("prettyprint")>=0){var ah=ai.match(ab);var am;if(!ah&&(am=o(aj))&&"CODE"===am.tagName){ah=am.className.match(ab)}if(ah){ah=ah[1]}var al=false;for(var ak=aj.parentNode;ak;ak=ak.parentNode){if((ak.tagName==="pre"||ak.tagName==="code"||ak.tagName==="xmp")&&ak.className&&ak.className.indexOf("prettyprint")>=0){al=true;break}}if(!al){var af=aj.className.match(/\blinenums\b(?::(\d+))?/);af=af?af[1]&&af[1].length?+af[1]:true:false;if(af){Q(aj,af)}S={langExtension:ah,sourceNode:aj,numberLines:af};d(S)}}}if(X<T.length){setTimeout(U,250)}else{if(ad){ad()}}}U()}window.prettyPrintOne=y;window.prettyPrint=b;window.PR={createSimpleLexer:g,registerLangHandler:c,sourceDecorator:i,PR_ATTRIB_NAME:P,PR_ATTRIB_VALUE:n,PR_COMMENT:j,PR_DECLARATION:E,PR_KEYWORD:z,PR_LITERAL:G,PR_NOCODE:N,PR_PLAIN:F,PR_PUNCTUATION:L,PR_SOURCE:J,PR_STRING:C,PR_TAG:m,PR_TYPE:O}})();PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_DECLARATION,/^<!\w[^>]*(?:>|$)/],[PR.PR_COMMENT,/^<\!--[\s\S]*?(?:-\->|$)/],[PR.PR_PUNCTUATION,/^(?:<[%?]|[%?]>)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-handlebars",/^<script\b[^>]*type\s*=\s*['"]?text\/x-handlebars-template['"]?\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i],[PR.PR_DECLARATION,/^{{[#^>/]?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{&?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{{>?\s*[\w.][^}]*}}}/],[PR.PR_COMMENT,/^{{![^}]*}}/]]),["handlebars","hbs"]);PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \t\r\n\f]+/,null," \t\r\n\f"]],[[PR.PR_STRING,/^\"(?:[^\n\r\f\\\"]|\\(?:\r\n?|\n|\f)|\\[\s\S])*\"/,null],[PR.PR_STRING,/^\'(?:[^\n\r\f\\\']|\\(?:\r\n?|\n|\f)|\\[\s\S])*\'/,null],["lang-css-str",/^url\(([^\)\"\']*)\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\!important|@import|@page|@media|@charset|inherit)(?=[^\-\w]|$)/i,null],["lang-css-kw",/^(-?(?:[_a-z]|(?:\\[0-9a-f]+ ?))(?:[_a-z0-9\-]|\\(?:\\[0-9a-f]+ ?))*)\s*:/i],[PR.PR_COMMENT,/^\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\d+|\d*\.\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\s\w\'\"]+/]]),["css"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i]]),["css-kw"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\)\"\']+/]]),["css-str"]);
##############################################
/src/demo/ts-demo/node_modules/des.js/.jshintrc-45-                                 // (ex: `for each`, multiple try/catch, function expression…)
/src/demo/ts-demo/node_modules/des.js/.jshintrc:46:    "evil"          : false,     // true: Tolerate use of `eval` and `new Function()`
/src/demo/ts-demo/node_modules/des.js/.jshintrc-47-    "expr"          : false,     // true: Tolerate `ExpressionStatement` as Programs
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-162-			if ( tests ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:163:				var ol  = document.createElement("ol");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-164-				ol.style.display = "none";
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-168-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:169:					var li = document.createElement("li");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-170-					li.className = assertion.result ? "pass" : "fail";
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:171:					li.appendChild(document.createTextNode(assertion.message || "(no message)"));
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-172-					ol.appendChild( li );
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-182-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:183:				var b = document.createElement("strong");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-184-				b.innerHTML = name + " <b style='color:black;'>(<b class='fail'>" + bad + "</b>, <b class='pass'>" + good + "</b>, " + config.assertions.length + ")</b>";
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-202-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:203:						if ( window.location ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:204:							window.location.href = window.location.href.match(/^(.+?)(\?.*)?$/)[1] + "?" + encodeURIComponent(text);
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-205-						}
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-208-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:209:				var li = document.createElement("li");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-210-				li.className = bad ? "fail" : "pass";
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-235-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:236:			if ( !window.setTimeout && !config.queue.length ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-237-				done();
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-240-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:241:		if ( window.setTimeout && !config.doneTimer ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:242:			config.doneTimer = window.setTimeout(function(){
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-243-				if ( !config.queue.length ) {
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-309-		// A slight delay, to avoid any current callbacks
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:310:		if ( window.setTimeout ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:311:			window.setTimeout(function() {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-312-				if ( config.timeout ) {
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-327-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:328:		if ( timeout && window.setTimeout ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:329:			config.timeout = window.setTimeout(function() {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-330-				QUnit.ok( false, "Test timed out" );
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-349-	 *
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:350:	 * @example triggerEvent( document.body, "click" );
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-351-	 *
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-355-	triggerEvent: function( elem, type, event ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:356:		if ( document.createEvent ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:357:			event = document.createEvent("MouseEvents");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-358-			event.initMouseEvent(type, true, true, elem.ownerDocument.defaultView,
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-395-(function() {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:396:	var location = window.location || { search: "", protocol: "file:" },
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:397:		GETParams = location.search.slice(1).split('&');
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-398-
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-448-		
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:449:		var filter = document.createElement("input");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-450-		filter.type = "checkbox";
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-462-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:463:		var label = document.createElement("label");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-464-		label.setAttribute("for", "qunit-filter-pass");
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-467-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:468:		var missing = document.createElement("input");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-469-		missing.type = "checkbox";
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-481-
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:482:		label = document.createElement("label");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-483-		label.setAttribute("for", "qunit-filter-missing");
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-506-	if ( config.queue.length ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:507:		config.doneTimer = window.setTimeout(function(){
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-508-			if ( !config.queue.length ) {
##############################################
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-538-		if ( !result ) {
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js:539:			result = document.createElement("p");
/src/demo/ts-demo/node_modules/uri-js/tests/qunit.js-540-			result.id = "qunit-testresult";
##############################################
/src/demo/ts-demo/node_modules/eslint-scope/lib/scope.js-182-         * can only decide at runtime which variable a reference refers to.
/src/demo/ts-demo/node_modules/eslint-scope/lib/scope.js:183:         * Moreover, if 'eval()' is used in a scope, it might introduce new
/src/demo/ts-demo/node_modules/eslint-scope/lib/scope.js-184-         * bindings in this or its parent scopes.
##############################################
/src/demo/ts-demo/node_modules/eslint-scope/lib/scope.js-236-         /**
/src/demo/ts-demo/node_modules/eslint-scope/lib/scope.js:237:         * Whether this is a scope that contains an 'eval()' invocation.
/src/demo/ts-demo/node_modules/eslint-scope/lib/scope.js-238-         * @member {boolean} Scope#directCallToEvalScope
##############################################
/src/demo/ts-demo/node_modules/eslint-scope/lib/referencer.js-486-
/src/demo/ts-demo/node_modules/eslint-scope/lib/referencer.js:487:        // Check this is direct call to eval
/src/demo/ts-demo/node_modules/eslint-scope/lib/referencer.js:488:        if (!this.scopeManager.__ignoreEval() && node.callee.type === Syntax.Identifier && node.callee.name === "eval") {
/src/demo/ts-demo/node_modules/eslint-scope/lib/referencer.js-489-
/src/demo/ts-demo/node_modules/eslint-scope/lib/referencer.js:490:            // NOTE: This should be `variableScope`. Since direct eval call always creates Lexical environment and
/src/demo/ts-demo/node_modules/eslint-scope/lib/referencer.js-491-            // let / const should be enclosed into it. Only VariableDeclaration affects on the caller's environment.
##############################################
/src/demo/ts-demo/node_modules/eslint-scope/lib/reference.js-49-        /**
/src/demo/ts-demo/node_modules/eslint-scope/lib/reference.js:50:         * Whether the reference comes from a dynamic scope (such as 'eval',
/src/demo/ts-demo/node_modules/eslint-scope/lib/reference.js-51-         * 'with', etc.), and may be trapped by dynamic scopes.
##############################################
/src/demo/ts-demo/node_modules/eslint-scope/lib/index.js-120- * @param {boolean} [providedOptions.directive=false]- the directive flag
/src/demo/ts-demo/node_modules/eslint-scope/lib/index.js:121: * @param {boolean} [providedOptions.ignoreEval=false]- whether to check 'eval()' calls
/src/demo/ts-demo/node_modules/eslint-scope/lib/index.js-122- * @param {boolean} [providedOptions.nodejsScope=false]- whether the whole
##############################################
/src/demo/ts-demo/node_modules/uglify-es/tools/props.html-40-
/src/demo/ts-demo/node_modules/uglify-es/tools/props.html:41:      var ta = document.createElement("textarea");
/src/demo/ts-demo/node_modules/uglify-es/tools/props.html-42-      ta.style.width = "100%";
##############################################
/src/demo/ts-demo/node_modules/uglify-es/tools/props.html-51-      }, null, 2);
/src/demo/ts-demo/node_modules/uglify-es/tools/props.html:52:      document.body.appendChild(ta);
/src/demo/ts-demo/node_modules/uglify-es/tools/props.html-53-
##############################################
/src/demo/ts-demo/node_modules/uglify-es/tools/domprops.json-2912-    "escape",
/src/demo/ts-demo/node_modules/uglify-es/tools/domprops.json:2913:    "eval",
/src/demo/ts-demo/node_modules/uglify-es/tools/domprops.json:2914:    "evaluate",
/src/demo/ts-demo/node_modules/uglify-es/tools/domprops.json-2915-    "event",
##############################################
/src/demo/ts-demo/node_modules/uglify-es/tools/domprops.json-5274-    "unescape",
/src/demo/ts-demo/node_modules/uglify-es/tools/domprops.json:5275:    "uneval",
/src/demo/ts-demo/node_modules/uglify-es/tools/domprops.json-5276-    "unicode-bidi",
##############################################
/src/demo/ts-demo/node_modules/uglify-es/README.md-211-
/src/demo/ts-demo/node_modules/uglify-es/README.md:212:- `eval` (default `false`) -- mangle names visible in scopes where `eval` or `with` are used.
/src/demo/ts-demo/node_modules/uglify-es/README.md-213-
##############################################
/src/demo/ts-demo/node_modules/uglify-es/README.md-657-
/src/demo/ts-demo/node_modules/uglify-es/README.md:658:- `evaluate` (default: `true`) -- attempt to evaluate constant expressions
/src/demo/ts-demo/node_modules/uglify-es/README.md-659-
##############################################
/src/demo/ts-demo/node_modules/uglify-es/README.md-815-
/src/demo/ts-demo/node_modules/uglify-es/README.md:816:- `eval` (default `false`) -- Pass `true` to mangle names visible in scopes
/src/demo/ts-demo/node_modules/uglify-es/README.md:817:  where `eval` or `with` are used.
/src/demo/ts-demo/node_modules/uglify-es/README.md-818-
##############################################
/src/demo/ts-demo/node_modules/uglify-es/README.md-1032-UglifyJS will notice the constants and, since they cannot be altered, it
/src/demo/ts-demo/node_modules/uglify-es/README.md:1033:will evaluate references to them to the value itself and drop unreachable
/src/demo/ts-demo/node_modules/uglify-es/README.md-1034-code as usual.  The build will contain the `const` declarations if you use
##############################################
/src/demo/ts-demo/node_modules/uglify-es/bin/uglifyjs-13-
/src/demo/ts-demo/node_modules/uglify-es/bin/uglifyjs:14:var skip_keys = [ "cname", "inlined", "parent_scope", "scope", "uses_eval", "uses_with" ];
/src/demo/ts-demo/node_modules/uglify-es/bin/uglifyjs-15-var files = {};
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-69-            || this.undeclared
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:70:            || (!options.eval && (this.scope.uses_eval || this.scope.uses_with))
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-71-            || (options.keep_fnames
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-124-                scope.uses_with = save_scope.uses_with;
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:125:                scope.uses_eval = save_scope.uses_eval;
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-126-                scope.directives = save_scope.directives;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-269-
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:270:    // pass 2: find back references and eval
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-271-    self.globals = new Dictionary();
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-278-            var name = node.name;
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:279:            if (name == "eval" && tw.parent() instanceof AST_Call) {
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:280:                for (var s = node.scope; s && !s.uses_eval; s = s.parent_scope) {
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:281:                    s.uses_eval = true;
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-282-                }
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-361-    this.uses_with = false;             // will be set to true if this or some nested scope uses the `with` statement
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:362:    this.uses_eval = false;             // will be set to true if this or nested scope uses the global `eval`
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-363-    this.parent_scope = parent_scope;   // the parent scope
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-494-    return this.definition().references.length == 0
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:495:        && !(this.scope.uses_eval || this.scope.uses_with);
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-496-});
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-507-    options = defaults(options, {
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js:508:        eval        : false,
/src/demo/ts-demo/node_modules/uglify-es/lib/scope.js-509-        ie8         : false,
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/ast.js-303-
/src/demo/ts-demo/node_modules/uglify-es/lib/ast.js:304:var AST_Scope = DEFNODE("Scope", "variables functions uses_with uses_eval parent_scope enclosed cname", {
/src/demo/ts-demo/node_modules/uglify-es/lib/ast.js-305-    $documentation: "Base class for all statements introducing a lexical scope",
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/ast.js-309-        uses_with: "[boolean/S] tells whether this scope uses the `with` statement",
/src/demo/ts-demo/node_modules/uglify-es/lib/ast.js:310:        uses_eval: "[boolean/S] tells whether this scope contains a direct call to the global `eval`",
/src/demo/ts-demo/node_modules/uglify-es/lib/ast.js-311-        parent_scope: "[AST_Scope?/S] link to the parent scope",
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/minify.js-85-                cache: options.nameCache && (options.nameCache.vars || {}),
/src/demo/ts-demo/node_modules/uglify-es/lib/minify.js:86:                eval: false,
/src/demo/ts-demo/node_modules/uglify-es/lib/minify.js-87-                ie8: false,
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/parse.js-1358-                          case "arguments":
/src/demo/ts-demo/node_modules/uglify-es/lib/parse.js:1359:                          case "eval":
/src/demo/ts-demo/node_modules/uglify-es/lib/parse.js-1360-                          case "yield":
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/parse.js-2621-            }
/src/demo/ts-demo/node_modules/uglify-es/lib/parse.js:2622:            if (sym instanceof AST_SymbolDeclaration && (name == "arguments" || name == "eval")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/parse.js-2623-                token_error(sym.start, "Unexpected " + name + " in strict mode");
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/propmangle.js-69-      DataView, decodeURI, decodeURIComponent,
/src/demo/ts-demo/node_modules/uglify-es/lib/propmangle.js:70:      encodeURI, encodeURIComponent, eval, EvalError,
/src/demo/ts-demo/node_modules/uglify-es/lib/propmangle.js-71-      Float32Array, Float64Array, Int8Array, Int16Array,
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-60-        ecma          : 5,
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:61:        evaluate      : !false_by_default,
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-62-        expression    : false,
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-331-            def.escaped = false;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:332:            if (def.scope.uses_eval || def.scope.uses_with) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-333-                def.fixed = false;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-407-            return compressor.option("unused")
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:408:                && !def.scope.uses_eval
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-409-                && !def.scope.uses_with
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-887-            || parent instanceof AST_Call && parent.expression === orig
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:888:                && (val instanceof AST_PropAccess || val instanceof AST_SymbolRef && val.name == "eval")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-889-            return make_sequence(orig, [ make_node(AST_Number, orig, { value: 0 }), val ]);
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-944-
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:945:    var global_names = makePredicate("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Math Number parseFloat parseInt RangeError ReferenceError RegExp Object setInterval setTimeout String SyntaxError TypeError unescape URIError");
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-946-    AST_SymbolRef.DEFMETHOD("is_declared", function(compressor) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-990-        function collapse(statements, compressor) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:991:            if (scope.uses_eval || scope.uses_with) return statements;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-992-            var args;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-1223-                    && !fn.uses_arguments
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:1224:                    && !fn.uses_eval
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-1225-                    && (iife = compressor.parent()) instanceof AST_Call
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-1865-                if (prop instanceof AST_Node) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:1866:                    prop = prop.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-1867-                }
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2340-
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2341:    // methods to evaluate a constant expression
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2342-    (function(def){
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2347-        // descendant of AST_Node.
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2348:        AST_Node.DEFMETHOD("evaluate", function(compressor){
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2349:            if (!compressor.option("evaluate")) return this;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2350:            var val = this._eval(compressor, 1);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2351-            return !val || val instanceof RegExp || typeof val != "object" ? val : this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2354-        AST_Node.DEFMETHOD("is_constant", function(){
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2355:            // Accomodate when compress option evaluate=false
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2356-            // as well as the common constant expressions !0 and -1
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2365-        def(AST_Statement, function(){
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2366:            throw new Error(string_template("Cannot evaluate a statement [{file}:{line},{col}]", this.start));
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2367-        });
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2386-                    }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2387:                    var value = element._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2388-                    if (element === value) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2404-                    } else if (key instanceof AST_Node) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2405:                        key = key._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2406-                        if (key === prop.key) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2411-                    if (prop.value instanceof AST_Function) continue;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2412:                    val[key] = prop.value._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2413-                    if (val[key] === prop.value) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2420-            var e = this.expression;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2421:            // Function would be evaluated to an array and so typeof would
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2422-            // incorrectly return 'object'. Hence making is a special case.
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2429-            }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2430:            e = e._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2431-            if (e === this.expression) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2435-                // typeof <RegExp> returns "object" or "function" on different platforms
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2436:                // so cannot evaluate reliably
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2437-                if (e instanceof RegExp) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2446-        def(AST_Binary, function(compressor, depth) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2447:            var left = this.left._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2448-            if (left === this.left) return this;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2449:            var right = this.right._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2450-            if (right === this.right) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2484-        def(AST_Conditional, function(compressor, depth) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2485:            var condition = this.condition._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2486-            if (condition === this.condition) return this;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2487-            var node = condition ? this.consequent : this.alternative;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2488:            var value = node._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2489-            return value === node ? this : value;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2494-            var value;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2495:            if (HOP(fixed, "_eval")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2496:                value = fixed._eval();
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2497-            } else {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2498:                this._eval = return_this;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2499:                value = fixed._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2500:                delete this._eval;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2501-                if (value === fixed) return this;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2502:                fixed._eval = function() {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2503-                    return value;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2542-                if (key instanceof AST_Node) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2543:                    key = key._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2544-                    if (key === this.property) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2551-                } else {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2552:                    val = exp._eval(compressor, depth + 1);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2553-                    if (!val || val === exp || !HOP(val, key)) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2563-                if (key instanceof AST_Node) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2564:                    key = key._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2565-                    if (key === exp.property) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2572-                } else {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2573:                    val = e._eval(compressor, depth + 1);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2574-                    if (val === e || !(val && native_fns[val.constructor.name] || return_false)(key)) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2578-                    var arg = this.args[i];
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2579:                    var value = arg._eval(compressor, depth);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2580-                    if (arg === value) return this;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2585-                } catch (ex) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2586:                    compressor.warn("Error evaluating {code} [{file}:{line},{col}]", {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2587-                        code: this.print_to_string(),
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2597-    })(function(node, func){
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:2598:        node.DEFMETHOD("_eval", func);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-2599-    });
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3059-        var self = this;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:3060:        if (self.uses_eval || self.uses_with) return;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3061-        var drop_funcs = !(self instanceof AST_Toplevel) || compressor.toplevel.funcs;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3802-        if (!compressor.option("loops")) return self;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:3803:        var cond = self.condition.tail_node().evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3804-        if (!(cond instanceof AST_Node)) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3908-        if (self.condition) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:3909:            var cond = self.condition.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3910-            if (!(cond instanceof AST_Node)) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3918-            if (compressor.option("dead_code")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:3919:                if (cond instanceof AST_Node) cond = self.condition.tail_node().evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3920-                if (!cond) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3947-        // `x && true`, though it probably should.
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:3948:        var cond = self.condition.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3949-        if (!compressor.option("dead_code") && !(cond instanceof AST_Node)) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3954-        if (compressor.option("dead_code")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:3955:            if (cond instanceof AST_Node) cond = self.condition.tail_node().evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-3956-            if (!cond) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4086-        var branch;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4087:        var value = self.expression.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4088-        if (!(value instanceof AST_Node)) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4094-        if (value instanceof AST_Node) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4095:            value = self.expression.tail_node().evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4096-        }
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4109-            } else if (!(value instanceof AST_Node)) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4110:                var exp = branch.expression.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4111-                if (!(exp instanceof AST_Node) && exp !== value) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4114-                }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4115:                if (exp instanceof AST_Node) exp = branch.expression.tail_node().evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4116-                if (exp === value) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4287-            && !fn.uses_arguments
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4288:            && !fn.uses_eval) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4289-            var pos = 0, last = 0;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4367-                if (all(self.args, function(arg) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4368:                    var value = arg.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4369-                    params.unshift(value);
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4403-                    if (self.args.length > 0) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4404:                        separator = self.args[0].evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4405-                        if (separator === self.args[0]) break EXIT; // not a constant
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4411-                        if (el instanceof AST_Expansion) break EXIT;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4412:                        var value = el.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4413-                        if (value !== el) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4468-                    var arg = self.args[0];
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4469:                    var index = arg ? arg.evaluate(compressor) : 0;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4470-                    if (index !== arg) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4592-                && !fn.uses_arguments
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4593:                && !fn.uses_eval
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4594-                && !(fn.name && fn instanceof AST_Function)
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4626-        }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4627:        var ev = self.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4628-        if (ev !== self) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4950-            || !(e instanceof AST_Number || e instanceof AST_Infinity)) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:4951:            var ev = self.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-4952-            if (ev !== self) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5066-        if (self.operator == "+" && compressor.in_boolean_context()) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5067:            var ll = self.left.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5068:            var rr = self.right.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5069-            if (ll && typeof ll == "string") {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5119-        }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5120:        if (compressor.option("evaluate")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5121-            switch (self.operator) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5122-              case "&&":
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5123:                var ll = self.left.truthy ? true : self.left.falsy ? false : self.left.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5124-                if (!ll) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5130-                }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5131:                var rr = self.right.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5132-                if (!rr) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5148-                if (self.left.operator == "||") {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5149:                    var lr = self.left.right.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5150-                    if (!lr) return make_node(AST_Conditional, self, {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5157-              case "||":
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5158:                var ll = self.left.truthy ? true : self.left.falsy ? false : self.left.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5159-                if (!ll) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5165-                }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5166:                var rr = self.right.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5167-                if (!rr) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5182-                if (self.left.operator == "&&") {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5183:                    var lr = self.left.right.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5184-                    if (lr && !(lr instanceof AST_Node)) return make_node(AST_Conditional, self, {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5389-        }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5390:        var ev = self.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5391-        if (ev !== self) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5497-                } else {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5498:                    var ev = fixed.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5499-                    if (ev !== fixed && (compressor.option("unsafe_regexp") || !(ev instanceof RegExp))) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5684-    OPT(AST_DefaultAssign, function(self, compressor){
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5685:        if (!compressor.option("evaluate")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5686-            return self;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5687-        }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5688:        var evaluateRight = self.right.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5689-
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5690-        // `[x = undefined] = foo` ---> `[x] = foo`
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5691:        if (evaluateRight === undefined) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5692-            self = self.left;
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5693:        } else if (evaluateRight !== self.right) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5694:            evaluateRight = make_node_from_constant(evaluateRight, self.right);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5695:            self.right = best_of_expression(evaluateRight, self.right);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5696-        }
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5709-        }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5710:        var cond = self.condition.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5711-        if (cond !== self.condition) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5939-        if (compressor.option("properties")) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:5940:            var key = prop.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-5941-            if (key !== prop) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6008-        }
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:6009:        var ev = self.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6010-        if (ev !== self) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6119-        if (sub) return sub.optimize(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:6120:        var ev = self.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6121-        if (ev !== self) {
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6165-            && !self.uses_arguments
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:6166:            && !self.uses_eval) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6167-            var has_special_symbol = false;
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6201-    OPT(AST_TemplateString, function(self, compressor){
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:6202:        if (!compressor.option("evaluate")
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6203-        || compressor.parent() instanceof AST_PrefixedTemplateString)
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6209-            if (segment instanceof AST_Node) {
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:6210:                var result = segment.evaluate(compressor);
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6211-                // Evaluate to constant value
##############################################
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6258-            && !self.value.uses_arguments
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js:6259:            && !self.value.uses_eval
/src/demo/ts-demo/node_modules/uglify-es/lib/compress.js-6260-            && self.value.body.length == 1
##############################################
/src/demo/ts-demo/node_modules/@xtuc/long/README.md-17-
/src/demo/ts-demo/node_modules/@xtuc/long/README.md:18:Example: 2<sup>64</sup>-1 is 1844674407370955**1615** but in JavaScript it evaluates to 1844674407370955**2000**.
/src/demo/ts-demo/node_modules/@xtuc/long/README.md-19-
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-146-- The verb (`next`, `throw`, or `return` method) to delegate to the expression of a `yield*`.
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:147:- The result of evaluating the verb delegated to the expression of a `yield*`.
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-148-
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-217-## Running the generator
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:218:The main body of the `step` function consists of a `while` loop which continues to evaluate
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-219-instructions until the generator exits or is suspended:
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-246-
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:247:If evaluation of the body resulted in an exception, we convert this into an Opcode 6 ("catch")
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-248-operation to be handled in the next spin of the `while` loop. We also clear the `y` variable in
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-256-
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:257:Inside of the `try..finally` statement are a series of statements that are used to evaluate the
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-258-operations of the transformed generator body.
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-266-Despite the fact this expression is part of the head of an `if` statement, the comma operator
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:267:causes it to be evaluated and the result thrown out. This is a minification added purely to
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-268-reduce the overall footprint of the helper.
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-319-stored in the `t` variable and the `body` function is invoked. The `body` function should call
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:320:`_.sent()` which will evaluate the appropriate completion result.
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-321-
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-355-Opcode 7 ("endfinally") indicates that we have hit the end of a `finally` clause, and that the last
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:356:operation recorded before entering the `finally` block should be evaluated.
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-357-
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-461-The remaining statements handle the point at which we exit a **protected region**. Here we pop the
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:462:current **protected region** from the stack and spin the `while` statement to evaluate the current
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-463-operation again in the next **protected region** or at the function boundary.
##############################################
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-467-loop will terminate and hand control off to the final statement of the orchestration function,
/src/demo/ts-demo/node_modules/tslib/docs/generator.md:468:which deals with how a completed generator is evaluated:
/src/demo/ts-demo/node_modules/tslib/docs/generator.md-469-
##############################################
/src/demo/ts-demo/node_modules/nanomatch/README.md-96-
/src/demo/ts-demo/node_modules/nanomatch/README.md:97:* Support for bash-like quoted strings for escaping sequences of characters, such as `foo/"**"/bar` where `**` should be matched literally and not evaluated as special characters.
/src/demo/ts-demo/node_modules/nanomatch/README.md-98-
##############################################
/src/demo/ts-demo/node_modules/nanomatch/CHANGELOG.md-37-
/src/demo/ts-demo/node_modules/nanomatch/CHANGELOG.md:38:- Support for bash-like quoted strings for escaping sequences of characters, such as `foo/"**"/bar` where `**` should be matched literally and not evaluated as special characters.
/src/demo/ts-demo/node_modules/nanomatch/CHANGELOG.md-39-
##############################################
/src/demo/ts-demo/node_modules/process/browser.js-52-        try {
/src/demo/ts-demo/node_modules/process/browser.js:53:            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
/src/demo/ts-demo/node_modules/process/browser.js-54-            return cachedSetTimeout.call(null, fun, 0);
##############################################
/src/demo/ts-demo/node_modules/process/browser.js-77-        try {
/src/demo/ts-demo/node_modules/process/browser.js:78:            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
/src/demo/ts-demo/node_modules/process/browser.js-79-            return cachedClearTimeout.call(null, marker);
##############################################
/src/demo/ts-demo/node_modules/http-proxy/coverage/lcov-report/prettify.js:1:window.PR_SHOULD_USE_CONTINUATION=true;(function(){var h=["break,continue,do,else,for,if,return,while"];var u=[h,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"];var p=[u,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"];var l=[p,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"];var x=[p,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"];var R=[x,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"];var r="all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes";var w=[p,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"];var s="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END";var I=[h,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"];var f=[h,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"];var H=[h,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"];var A=[l,R,w,s+I,f,H];var e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/;var C="str";var z="kwd";var j="com";var O="typ";var G="lit";var L="pun";var F="pln";var m="tag";var E="dec";var J="src";var P="atn";var n="atv";var N="nocode";var M="(?:^^\\.?|[+-]|\\!|\\!=|\\!==|\\#|\\%|\\%=|&|&&|&&=|&=|\\(|\\*|\\*=|\\+=|\\,|\\-=|\\->|\\/|\\/=|:|::|\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\@|\\[|\\^|\\^=|\\^\\^|\\^\\^=|\\{|\\||\\|=|\\|\\||\\|\\|=|\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*";function k(Z){var ad=0;var S=false;var ac=false;for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.ignoreCase){ac=true}else{if(/[a-z]/i.test(ae.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){S=true;ac=false;break}}}var Y={b:8,t:9,n:10,v:11,f:12,r:13};function ab(ah){var ag=ah.charCodeAt(0);if(ag!==92){return ag}var af=ah.charAt(1);ag=Y[af];if(ag){return ag}else{if("0"<=af&&af<="7"){return parseInt(ah.substring(1),8)}else{if(af==="u"||af==="x"){return parseInt(ah.substring(2),16)}else{return ah.charCodeAt(1)}}}}function T(af){if(af<32){return(af<16?"\\x0":"\\x")+af.toString(16)}var ag=String.fromCharCode(af);if(ag==="\\"||ag==="-"||ag==="["||ag==="]"){ag="\\"+ag}return ag}function X(am){var aq=am.substring(1,am.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g"));var ak=[];var af=[];var ao=aq[0]==="^";for(var ar=ao?1:0,aj=aq.length;ar<aj;++ar){var ah=aq[ar];if(/\\[bdsw]/i.test(ah)){ak.push(ah)}else{var ag=ab(ah);var al;if(ar+2<aj&&"-"===aq[ar+1]){al=ab(aq[ar+2]);ar+=2}else{al=ag}af.push([ag,al]);if(!(al<65||ag>122)){if(!(al<65||ag>90)){af.push([Math.max(65,ag)|32,Math.min(al,90)|32])}if(!(al<97||ag>122)){af.push([Math.max(97,ag)&~32,Math.min(al,122)&~32])}}}}af.sort(function(av,au){return(av[0]-au[0])||(au[1]-av[1])});var ai=[];var ap=[NaN,NaN];for(var ar=0;ar<af.length;++ar){var at=af[ar];if(at[0]<=ap[1]+1){ap[1]=Math.max(ap[1],at[1])}else{ai.push(ap=at)}}var an=["["];if(ao){an.push("^")}an.push.apply(an,ak);for(var ar=0;ar<ai.length;++ar){var at=ai[ar];an.push(T(at[0]));if(at[1]>at[0]){if(at[1]+1>at[0]){an.push("-")}an.push(T(at[1]))}}an.push("]");return an.join("")}function W(al){var aj=al.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g"));var ah=aj.length;var an=[];for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag==="("){++am}else{if("\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){an[af]=-1}}}}for(var ak=1;ak<an.length;++ak){if(-1===an[ak]){an[ak]=++ad}}for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag==="("){++am;if(an[am]===undefined){aj[ak]="(?:"}}else{if("\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){aj[ak]="\\"+an[am]}}}}for(var ak=0,am=0;ak<ah;++ak){if("^"===aj[ak]&&"^"!==aj[ak+1]){aj[ak]=""}}if(al.ignoreCase&&S){for(var ak=0;ak<ah;++ak){var ag=aj[ak];var ai=ag.charAt(0);if(ag.length>=2&&ai==="["){aj[ak]=X(ag)}else{if(ai!=="\\"){aj[ak]=ag.replace(/[a-zA-Z]/g,function(ao){var ap=ao.charCodeAt(0);return"["+String.fromCharCode(ap&~32,ap|32)+"]"})}}}}return aj.join("")}var aa=[];for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.global||ae.multiline){throw new Error(""+ae)}aa.push("(?:"+W(ae)+")")}return new RegExp(aa.join("|"),ac?"gi":"g")}function a(V){var U=/(?:^|\s)nocode(?:\s|$)/;var X=[];var T=0;var Z=[];var W=0;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=document.defaultView.getComputedStyle(V,null).getPropertyValue("white-space")}}var Y=S&&"pre"===S.substring(0,3);function aa(ab){switch(ab.nodeType){case 1:if(U.test(ab.className)){return}for(var ae=ab.firstChild;ae;ae=ae.nextSibling){aa(ae)}var ad=ab.nodeName;if("BR"===ad||"LI"===ad){X[W]="\n";Z[W<<1]=T++;Z[(W++<<1)|1]=ab}break;case 3:case 4:var ac=ab.nodeValue;if(ac.length){if(!Y){ac=ac.replace(/[ \t\r\n]+/g," ")}else{ac=ac.replace(/\r\n?/g,"\n")}X[W]=ac;Z[W<<1]=T;T+=ac.length;Z[(W++<<1)|1]=ab}break}}aa(V);return{sourceCode:X.join("").replace(/\n$/,""),spans:Z}}function B(S,U,W,T){if(!U){return}var V={sourceCode:U,basePos:S};W(V);T.push.apply(T,V.decorations)}var v=/\S/;function o(S){var V=undefined;for(var U=S.firstChild;U;U=U.nextSibling){var T=U.nodeType;V=(T===1)?(V?S:U):(T===3)?(v.test(U.nodeValue)?S:V):V}return V===S?undefined:V}function g(U,T){var S={};var V;(function(){var ad=U.concat(T);var ah=[];var ag={};for(var ab=0,Z=ad.length;ab<Z;++ab){var Y=ad[ab];var ac=Y[3];if(ac){for(var ae=ac.length;--ae>=0;){S[ac.charAt(ae)]=Y}}var af=Y[1];var aa=""+af;if(!ag.hasOwnProperty(aa)){ah.push(af);ag[aa]=null}}ah.push(/[\0-\uffff]/);V=k(ah)})();var X=T.length;var W=function(ah){var Z=ah.sourceCode,Y=ah.basePos;var ad=[Y,F];var af=0;var an=Z.match(V)||[];var aj={};for(var ae=0,aq=an.length;ae<aq;++ae){var ag=an[ae];var ap=aj[ag];var ai=void 0;var am;if(typeof ap==="string"){am=false}else{var aa=S[ag.charAt(0)];if(aa){ai=ag.match(aa[1]);ap=aa[0]}else{for(var ao=0;ao<X;++ao){aa=T[ao];ai=ag.match(aa[1]);if(ai){ap=aa[0];break}}if(!ai){ap=F}}am=ap.length>=5&&"lang-"===ap.substring(0,5);if(am&&!(ai&&typeof ai[1]==="string")){am=false;ap=J}if(!am){aj[ag]=ap}}var ab=af;af+=ag.length;if(!am){ad.push(Y+ab,ap)}else{var al=ai[1];var ak=ag.indexOf(al);var ac=ak+al.length;if(ai[2]){ac=ag.length-ai[2].length;ak=ac-al.length}var ar=ap.substring(5);B(Y+ab,ag.substring(0,ak),W,ad);B(Y+ab+ak,al,q(ar,al),ad);B(Y+ab+ac,ag.substring(ac),W,ad)}}ah.decorations=ad};return W}function i(T){var W=[],S=[];if(T.tripleQuotedStrings){W.push([C,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""])}else{if(T.multiLineStrings){W.push([C,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"])}else{W.push([C,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"])}}if(T.verbatimStrings){S.push([C,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null])}var Y=T.hashComments;if(Y){if(T.cStyleComments){if(Y>1){W.push([j,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"])}else{W.push([j,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"])}S.push([C,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,null])}else{W.push([j,/^#[^\r\n]*/,null,"#"])}}if(T.cStyleComments){S.push([j,/^\/\/[^\r\n]*/,null]);S.push([j,/^\/\*[\s\S]*?(?:\*\/|$)/,null])}if(T.regexLiterals){var X=("/(?=[^/*])(?:[^/\\x5B\\x5C]|\\x5C[\\s\\S]|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S])*(?:\\x5D|$))+/");S.push(["lang-regex",new RegExp("^"+M+"("+X+")")])}var V=T.types;if(V){S.push([O,V])}var U=(""+T.keywords).replace(/^ | $/g,"");if(U.length){S.push([z,new RegExp("^(?:"+U.replace(/[\s,]+/g,"|")+")\\b"),null])}W.push([F,/^\s+/,null," \r\n\t\xA0"]);S.push([G,/^@[a-z_$][a-z_$@0-9]*/i,null],[O,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[F,/^[a-z_$][a-z_$@0-9]*/i,null],[G,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[F,/^\\[\s\S]?/,null],[L,/^.[^\s\w\.$@\'\"\`\/\#\\]*/,null]);return g(W,S)}var K=i({keywords:A,hashComments:true,cStyleComments:true,multiLineStrings:true,regexLiterals:true});function Q(V,ag){var U=/(?:^|\s)nocode(?:\s|$)/;var ab=/\r\n?|\n/;var ac=V.ownerDocument;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=ac.defaultView.getComputedStyle(V,null).getPropertyValue("white-space")}}var Z=S&&"pre"===S.substring(0,3);var af=ac.createElement("LI");while(V.firstChild){af.appendChild(V.firstChild)}var W=[af];function ae(al){switch(al.nodeType){case 1:if(U.test(al.className)){break}if("BR"===al.nodeName){ad(al);if(al.parentNode){al.parentNode.removeChild(al)}}else{for(var an=al.firstChild;an;an=an.nextSibling){ae(an)}}break;case 3:case 4:if(Z){var am=al.nodeValue;var aj=am.match(ab);if(aj){var ai=am.substring(0,aj.index);al.nodeValue=ai;var ah=am.substring(aj.index+aj[0].length);if(ah){var ak=al.parentNode;ak.insertBefore(ac.createTextNode(ah),al.nextSibling)}ad(al);if(!ai){al.parentNode.removeChild(al)}}}break}}function ad(ak){while(!ak.nextSibling){ak=ak.parentNode;if(!ak){return}}function ai(al,ar){var aq=ar?al.cloneNode(false):al;var ao=al.parentNode;if(ao){var ap=ai(ao,1);var an=al.nextSibling;ap.appendChild(aq);for(var am=an;am;am=an){an=am.nextSibling;ap.appendChild(am)}}return aq}var ah=ai(ak.nextSibling,0);for(var aj;(aj=ah.parentNode)&&aj.nodeType===1;){ah=aj}W.push(ah)}for(var Y=0;Y<W.length;++Y){ae(W[Y])}if(ag===(ag|0)){W[0].setAttribute("value",ag)}var aa=ac.createElement("OL");aa.className="linenums";var X=Math.max(0,((ag-1))|0)||0;for(var Y=0,T=W.length;Y<T;++Y){af=W[Y];af.className="L"+((Y+X)%10);if(!af.firstChild){af.appendChild(ac.createTextNode("\xA0"))}aa.appendChild(af)}V.appendChild(aa)}function D(ac){var aj=/\bMSIE\b/.test(navigator.userAgent);var am=/\n/g;var al=ac.sourceCode;var an=al.length;var V=0;var aa=ac.spans;var T=aa.length;var ah=0;var X=ac.decorations;var Y=X.length;var Z=0;X[Y]=an;var ar,aq;for(aq=ar=0;aq<Y;){if(X[aq]!==X[aq+2]){X[ar++]=X[aq++];X[ar++]=X[aq++]}else{aq+=2}}Y=ar;for(aq=ar=0;aq<Y;){var at=X[aq];var ab=X[aq+1];var W=aq+2;while(W+2<=Y&&X[W+1]===ab){W+=2}X[ar++]=at;X[ar++]=ab;aq=W}Y=X.length=ar;var ae=null;while(ah<T){var af=aa[ah];var S=aa[ah+2]||an;var ag=X[Z];var ap=X[Z+2]||an;var W=Math.min(S,ap);var ak=aa[ah+1];var U;if(ak.nodeType!==1&&(U=al.substring(V,W))){if(aj){U=U.replace(am,"\r")}ak.nodeValue=U;var ai=ak.ownerDocument;var ao=ai.createElement("SPAN");ao.className=X[Z+1];var ad=ak.parentNode;ad.replaceChild(ao,ak);ao.appendChild(ak);if(V<S){aa[ah+1]=ak=ai.createTextNode(al.substring(W,S));ad.insertBefore(ak,ao.nextSibling)}}V=W;if(V>=S){ah+=2}if(V>=ap){Z+=2}}}var t={};function c(U,V){for(var S=V.length;--S>=0;){var T=V[S];if(!t.hasOwnProperty(T)){t[T]=U}else{if(window.console){console.warn("cannot override language handler %s",T)}}}}function q(T,S){if(!(T&&t.hasOwnProperty(T))){T=/^\s*</.test(S)?"default-markup":"default-code"}return t[T]}c(K,["default-code"]);c(g([],[[F,/^[^<?]+/],[E,/^<!\w[^>]*(?:>|$)/],[j,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[L,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);c(g([[F,/^[\s]+/,null," \t\r\n"],[n,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[[m,/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],[P,/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[L,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]);c(g([],[[n,/^[\s\S]+/]]),["uq.val"]);c(i({keywords:l,hashComments:true,cStyleComments:true,types:e}),["c","cc","cpp","cxx","cyc","m"]);c(i({keywords:"null,true,false"}),["json"]);c(i({keywords:R,hashComments:true,cStyleComments:true,verbatimStrings:true,types:e}),["cs"]);c(i({keywords:x,cStyleComments:true}),["java"]);c(i({keywords:H,hashComments:true,multiLineStrings:true}),["bsh","csh","sh"]);c(i({keywords:I,hashComments:true,multiLineStrings:true,tripleQuotedStrings:true}),["cv","py"]);c(i({keywords:s,hashComments:true,multiLineStrings:true,regexLiterals:true}),["perl","pl","pm"]);c(i({keywords:f,hashComments:true,multiLineStrings:true,regexLiterals:true}),["rb"]);c(i({keywords:w,cStyleComments:true,regexLiterals:true}),["js"]);c(i({keywords:r,hashComments:3,cStyleComments:true,multilineStrings:true,tripleQuotedStrings:true,regexLiterals:true}),["coffee"]);c(g([],[[C,/^[\s\S]+/]]),["regex"]);function d(V){var U=V.langExtension;try{var S=a(V.sourceNode);var T=S.sourceCode;V.sourceCode=T;V.spans=S.spans;V.basePos=0;q(U,T)(V);D(V)}catch(W){if("console" in window){console.log(W&&W.stack?W.stack:W)}}}function y(W,V,U){var S=document.createElement("PRE");S.innerHTML=W;if(U){Q(S,U)}var T={langExtension:V,numberLines:U,sourceNode:S};d(T);return S.innerHTML}function b(ad){function Y(af){return document.getElementsByTagName(af)}var ac=[Y("pre"),Y("code"),Y("xmp")];var T=[];for(var aa=0;aa<ac.length;++aa){for(var Z=0,V=ac[aa].length;Z<V;++Z){T.push(ac[aa][Z])}}ac=null;var W=Date;if(!W.now){W={now:function(){return +(new Date)}}}var X=0;var S;var ab=/\blang(?:uage)?-([\w.]+)(?!\S)/;var ae=/\bprettyprint\b/;function U(){var ag=(window.PR_SHOULD_USE_CONTINUATION?W.now()+250:Infinity);for(;X<T.length&&W.now()<ag;X++){var aj=T[X];var ai=aj.className;if(ai.indexOf("prettyprint")>=0){var ah=ai.match(ab);var am;if(!ah&&(am=o(aj))&&"CODE"===am.tagName){ah=am.className.match(ab)}if(ah){ah=ah[1]}var al=false;for(var ak=aj.parentNode;ak;ak=ak.parentNode){if((ak.tagName==="pre"||ak.tagName==="code"||ak.tagName==="xmp")&&ak.className&&ak.className.indexOf("prettyprint")>=0){al=true;break}}if(!al){var af=aj.className.match(/\blinenums\b(?::(\d+))?/);af=af?af[1]&&af[1].length?+af[1]:true:false;if(af){Q(aj,af)}S={langExtension:ah,sourceNode:aj,numberLines:af};d(S)}}}if(X<T.length){setTimeout(U,250)}else{if(ad){ad()}}}U()}window.prettyPrintOne=y;window.prettyPrint=b;window.PR={createSimpleLexer:g,registerLangHandler:c,sourceDecorator:i,PR_ATTRIB_NAME:P,PR_ATTRIB_VALUE:n,PR_COMMENT:j,PR_DECLARATION:E,PR_KEYWORD:z,PR_LITERAL:G,PR_NOCODE:N,PR_PLAIN:F,PR_PUNCTUATION:L,PR_SOURCE:J,PR_STRING:C,PR_TAG:m,PR_TYPE:O}})();PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_DECLARATION,/^<!\w[^>]*(?:>|$)/],[PR.PR_COMMENT,/^<\!--[\s\S]*?(?:-\->|$)/],[PR.PR_PUNCTUATION,/^(?:<[%?]|[%?]>)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-handlebars",/^<script\b[^>]*type\s*=\s*['"]?text\/x-handlebars-template['"]?\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i],[PR.PR_DECLARATION,/^{{[#^>/]?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{&?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{{>?\s*[\w.][^}]*}}}/],[PR.PR_COMMENT,/^{{![^}]*}}/]]),["handlebars","hbs"]);PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \t\r\n\f]+/,null," \t\r\n\f"]],[[PR.PR_STRING,/^\"(?:[^\n\r\f\\\"]|\\(?:\r\n?|\n|\f)|\\[\s\S])*\"/,null],[PR.PR_STRING,/^\'(?:[^\n\r\f\\\']|\\(?:\r\n?|\n|\f)|\\[\s\S])*\'/,null],["lang-css-str",/^url\(([^\)\"\']*)\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\!important|@import|@page|@media|@charset|inherit)(?=[^\-\w]|$)/i,null],["lang-css-kw",/^(-?(?:[_a-z]|(?:\\[0-9a-f]+ ?))(?:[_a-z0-9\-]|\\(?:\\[0-9a-f]+ ?))*)\s*:/i],[PR.PR_COMMENT,/^\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\d+|\d*\.\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\s\w\'\"]+/]]),["css"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i]]),["css-kw"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\)\"\']+/]]),["css-str"]);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/it/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "Le dichiarazioni 'const' devono essere inizializzate.",
/src/demo/ts-demo/node_modules/typescript/lib/it/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "L'inizializzatore del membro di enumerazione 'const' è stato valutato come valore non finito.",
/src/demo/ts-demo/node_modules/typescript/lib/it/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "L'inizializzatore del membro di enumerazione 'const' è stato valutato come valore non consentito 'NaN'.",
/src/demo/ts-demo/node_modules/typescript/lib/it/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "Le enumerazioni 'const' possono essere usate solo in espressioni di accesso a proprietà o indice oppure nella parte destra di un'assegnazione di esportazione, di una dichiarazione di importazione o di una query su tipo.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.d.ts-1821-    interface CustomTransformers {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.d.ts:1822:        /** Custom transformers to evaluate before built-in .js transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.d.ts-1823-        before?: TransformerFactory<SourceFile>[];
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.d.ts:1824:        /** Custom transformers to evaluate after built-in .js transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.d.ts-1825-        after?: TransformerFactory<SourceFile>[];
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.d.ts:1826:        /** Custom transformers to evaluate after built-in .d.ts transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.d.ts-1827-        afterDeclarations?: TransformerFactory<Bundle | SourceFile>[];
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/cs/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "Deklarace const se musejí inicializovat.",
/src/demo/ts-demo/node_modules/typescript/lib/cs/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "Inicializátor člena výčtu const se vyhodnotil na nekonečnou hodnotu.",
/src/demo/ts-demo/node_modules/typescript/lib/cs/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "Inicializátor člena výčtu const se vyhodnotil na nepovolenou hodnotu NaN.",
/src/demo/ts-demo/node_modules/typescript/lib/cs/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "Výčty const se dají použít jenom ve výrazech přístupu k vlastnosti nebo indexu nebo na pravé straně deklarace importu, přiřazení exportu nebo dotazu na typ.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.d.ts-1821-    interface CustomTransformers {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.d.ts:1822:        /** Custom transformers to evaluate before built-in .js transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.d.ts-1823-        before?: TransformerFactory<SourceFile>[];
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.d.ts:1824:        /** Custom transformers to evaluate after built-in .js transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.d.ts-1825-        after?: TransformerFactory<SourceFile>[];
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.d.ts:1826:        /** Custom transformers to evaluate after built-in .d.ts transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.d.ts-1827-        afterDeclarations?: TransformerFactory<Bundle | SourceFile>[];
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/diagnosticMessages.generated.json-416-  "A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476" : "A const enum member can only be accessed using a string literal.",
/src/demo/ts-demo/node_modules/typescript/lib/diagnosticMessages.generated.json:417:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477" : "'const' enum member initializer was evaluated to a non-finite value.",
/src/demo/ts-demo/node_modules/typescript/lib/diagnosticMessages.generated.json:418:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478" : "'const' enum member initializer was evaluated to disallowed value 'NaN'.",
/src/demo/ts-demo/node_modules/typescript/lib/diagnosticMessages.generated.json-419-  "Property_0_does_not_exist_on_const_enum_1_2479" : "Property '{0}' does not exist on 'const' enum '{1}'.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-5338-        A_const_enum_member_can_only_be_accessed_using_a_string_literal: diag(2476, ts.DiagnosticCategory.Error, "A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476", "A const enum member can only be accessed using a string literal."),
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:5339:        const_enum_member_initializer_was_evaluated_to_a_non_finite_value: diag(2477, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477", "'const' enum member initializer was evaluated to a non-finite value."),
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:5340:        const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN: diag(2478, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478", "'const' enum member initializer was evaluated to disallowed value 'NaN'."),
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-5341-        Property_0_does_not_exist_on_const_enum_1: diag(2479, ts.DiagnosticCategory.Error, "Property_0_does_not_exist_on_const_enum_1_2479", "Property '{0}' does not exist on 'const' enum '{1}'."),
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-20807-            node.type = parseTypeAnnotation();
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:20808:            // For instance properties specifically, since they are evaluated inside the constructor,
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-20809-            // we do *not * want to parse yield expressions, so we specifically turn the yield context
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-27773-            // an immediately invoked function expression (IIFE). Initialize the flowNode property to
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:27774:            // the current control flow (which includes evaluation of the IIFE arguments).
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-27775-            var expr = node.expression;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28141-            if (inStrictMode && ts.isLeftHandSideExpression(node.left) && ts.isAssignmentOperator(node.operatorToken.kind)) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:28142:                // ECMA 262 (Annex C) The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28143-                // Assignment operator(11.13) or of a PostfixExpression(11.3)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28148-            // It is a SyntaxError if a TryStatement with a Catch occurs within strict code and the Identifier of the
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:28149:            // Catch production is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28150-            if (inStrictMode && node.variableDeclaration) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28163-        function isEvalOrArgumentsIdentifier(node) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:28164:            return ts.isIdentifier(node) && (node.escapedText === "eval" || node.escapedText === "arguments");
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28165-        }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28189-            if (inStrictMode) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:28190:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a strict mode FunctionDeclaration or FunctionExpression (13.1))
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28191-                checkStrictModeEvalOrArguments(node, node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28224-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:28225:            // The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28226-            // Assignment operator(11.13) or of a PostfixExpression(11.3) or as the UnaryExpression
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28960-            if (inStrictMode && !(node.flags & 4194304 /* Ambient */)) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:28961:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-28962-                // strict mode FunctionLikeDeclaration or FunctionExpression(13.1)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-31385-                        // TypeScript 1.0 spec (April 2014): 8.4.1
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:31386:                        // Initializer expressions for instance member variables are evaluated in the scope
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-31387-                        // of the class constructor body but are not permitted to reference parameters or
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-43921-                // Assignments only narrow the computed type if the declared type is a union type. Thus, we
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:43922:                // only need to evaluate the assigned type if the declared type is a union type.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-43923-                if (isMatchingReference(reference, node)) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-50167-         * This is a *shallow* check: An expression is side-effect-free if the
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:50168:         * evaluation of the expression *itself* cannot produce side effects.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-50169-         * For example, x++ / 3 is side-effect free because the / operator
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-50403-            function isEvalNode(node) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:50404:                return node.kind === 71 /* Identifier */ && node.escapedText === "eval";
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-50405-            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-50892-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:50893:            // It is a SyntaxError if the Identifier "eval" or the Identifier "arguments" occurs as the
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-50894-            // Identifier in a PropertySetParameterList of a PropertyAssignment that is contained in strict code
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54341-            var initializer = member.initializer;
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54342:            var value = enumKind === 1 /* Literal */ && !isLiteralEnumMember(member) ? undefined : evaluate(initializer);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54343-            if (value !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54345-                    error(initializer, isNaN(value) ?
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54346:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN :
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54347:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54348-                }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54364-            return value;
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54365:            function evaluate(expr) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54366-                switch (expr.kind) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54367-                    case 200 /* PrefixUnaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54368:                        var value_2 = evaluate(expr.operand);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54369-                        if (typeof value_2 === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54377-                    case 202 /* BinaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54378:                        var left = evaluate(expr.left);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54379:                        var right = evaluate(expr.right);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54380-                        if (typeof left === "number" && typeof right === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54405-                    case 193 /* ParenthesizedExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54406:                        return evaluate(expr.expression);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54407-                    case 71 /* Identifier */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54411-                        }
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54412:                        return ts.nodeIsMissing(expr) ? 0 : evaluateEnumMember(expr, getSymbolOfNode(member.parent), identifier.escapedText);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54413-                    case 188 /* ElementAccessExpression */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54427-                                }
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54428:                                return evaluateEnumMember(expr, type.symbol, name);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54429-                            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54434-            }
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:54435:            function evaluateEnumMember(expr, enumSymbol, name) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-54436-                var memberSymbol = enumSymbol.exports.get(name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-57644-            // It is a SyntaxError if a VariableDeclaration or VariableDeclarationNoIn occurs within strict code
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:57645:            // and its Identifier is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-57646-            return checkLetConstNames && checkGrammarNameInLetOrConstDeclarations(node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64012-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:64013:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64014-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64077-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:64078:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64079-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64142-     *
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:64143:     * @link https://tc39.github.io/ecma262/#sec-runtime-semantics-keyeddestructuringassignmentevaluation
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64144-     *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64798-            pendingExpressions = savedPendingExpressions;
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:64799:            // Emit static property assignment. Because classDeclaration is lexically evaluated,
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64800-            // it is safe to emit static property assignment after classDeclaration
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64906-            // In the simplest case, we emit the class declaration as a let declaration, and
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:64907:            // evaluate decorators after the close of the class body:
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-64908-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-65523-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:65524:         * Generates an expression used to evaluate class element decorators at runtime.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-65525-         *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-68044-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:68045:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-68046-                return ts.updateParameter(node, 
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-69770-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:69771:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-69772-                return ts.setOriginalNode(ts.setTextRange(ts.createParameter(
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-70455-            //   Without explicit initialization code in /*1*/ can be executed even if
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:70456:            //   some-condition is evaluated to false.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-70457-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-70609-                // Initializer is an expression. Emit the expression in the body, so that it's
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:70610:                // evaluated on every iteration.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-70611-                var assignment = ts.createAssignment(initializer, boundValue);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74149-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74150:         * Emits a Break operation to the specified label when a condition evaluates to a truthy
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74151-         * value at runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74160-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74161:         * Emits a Break to the specified label when a condition evaluates to a falsey value at
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74162-         * runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74645-    //            sent() - A method that returns or throws the current completion value.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74646:    //            label  - The next point at which to resume evaluation of the generator body.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74647-    //            trys   - A stack of protected regions (try/catch/finally blocks).
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74657-    //            of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74658:    //          - The result of evaluating the verb delegated to the expression of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74659-    //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74667-    //  1: throw(error)     - Resume the generator with an exception. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74668:    //                        suspended inside of one or more protected regions, evaluates
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74669-    //                        any intervening finally blocks between the current label and
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74672-    //  2: return(value?)   - Resume the generator as if with a return. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74673:    //                        suspended inside of one or more protected regions, evaluates any
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74674-    //                        intervening finally blocks.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74675-    //  3: break(label)     - Jump to the specified label. If the label is outside of the
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74676:    //                        current protected region, evaluates any intervening finally
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74677-    //                        blocks.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74679-    //                        resumed, the generator will continue at the next label.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74680:    //  5: yield*(value)    - Delegates evaluation to the supplied iterator. When
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74681-    //                        delegation completes, the generator will continue at the next
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74684-    //                        the current label is inside of one or more protected regions,
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:74685:    //                        evaluates any intervening finally blocks between the current
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-74686-    //                        label and the nearest catch block or function boundary. If
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-83746-                // Just clear the cache for now
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:83747:                // For now just clear the cache, since this could mean that multiple level entries might need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-83748-                clearCache();
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-86888-                newReferences && ts.forEachKey(newReferences, function (path) { return !state.fileInfos.has(path) && oldState.fileInfos.has(path); })) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:86889:                // Register file as changed file and do not copy semantic diagnostics, since all changed files need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-86890-                state.changedFilesSet.set(sourceFilePath, true);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-87740-                    if (!resolution.isInvalidated && isInvalidatedResolution(resolution, getResolutionWithResolvedFileName)) {
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:87741:                        // Mark the file as needing re-evaluation of module resolution instead of using it blindly.
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-87742-                        resolution.isInvalidated = true;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-90063-    }
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js:90064:    var ignoredProperties = new Set(["arguments", "caller", "constructor", "eval", "super_"]);
/src/demo/ts-demo/node_modules/typescript/lib/typescriptServices.js-90065-    var reservedFunctionProperties = new Set(Object.getOwnPropertyNames(ts.noop));
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tr/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "'const' bildirimlerinin başlatılması gerekiyor.",
/src/demo/ts-demo/node_modules/typescript/lib/tr/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "'const' sabit listesi üyesi başlatıcısı, sonlu olmayan bir değer olarak hesaplandı.",
/src/demo/ts-demo/node_modules/typescript/lib/tr/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "'const' sabit listesi üyesi başlatıcısı, izin verilmeyen 'NaN' değeri olarak hesaplandı.",
/src/demo/ts-demo/node_modules/typescript/lib/tr/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "'const' sabit listeleri yalnızca bir özellikte, dizin erişim ifadelerinde, içeri aktarma bildiriminin veya dışarı aktarma atamasının sağ tarafında ya da tür sorgusunda kullanılabilir.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/fr/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "Les déclarations 'const' doivent être initialisées.",
/src/demo/ts-demo/node_modules/typescript/lib/fr/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "L'initialiseur de membre enum 'const' donne une valeur non finie.",
/src/demo/ts-demo/node_modules/typescript/lib/fr/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "L'initialiseur de membre enum 'const' donne une valeur non autorisée 'NaN'.",
/src/demo/ts-demo/node_modules/typescript/lib/fr/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "Les enums 'const' ne peuvent être utilisés que dans les expressions d'accès à une propriété ou un index, ou dans la partie droite d'une déclaration d'importation, d'une assignation d'exportation ou d'une requête de type.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-31-  */
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts:32:declare function eval(x: string): any;
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-33-
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-617-      * Returns the larger of a set of supplied numeric expressions.
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts:618:      * @param values Numeric expressions to be evaluated.
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-619-      */
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-622-      * Returns the smaller of a set of supplied numeric expressions.
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts:623:      * @param values Numeric expressions to be evaluated.
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-624-      */
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-657-
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts:658:/** Enables basic storage and retrieval of dates and times. */
/src/demo/ts-demo/node_modules/typescript/lib/lib.es5.d.ts-659-interface Date {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/pt-br/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "Declarações 'const' devem ser inicializadas.",
/src/demo/ts-demo/node_modules/typescript/lib/pt-br/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "O inicializador de membro de enumeração 'const' foi avaliado como um valor não finito.",
/src/demo/ts-demo/node_modules/typescript/lib/pt-br/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "O inicializador de membro de enumeração 'const' foi avaliado como o valor não permitido 'NaN'.",
/src/demo/ts-demo/node_modules/typescript/lib/pt-br/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "Enumerações 'const' só podem ser usadas em expressões de acesso de índice ou propriedade, ou então do lado direito de uma consulta de tipo, declaração de importação ou atribuição de exportação.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/de/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "const-Deklarationen müssen initialisiert werden.",
/src/demo/ts-demo/node_modules/typescript/lib/de/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "Der const-Enumerationsmemberinitialisierer wurde in einen unendlichen Wert ausgewertet.",
/src/demo/ts-demo/node_modules/typescript/lib/de/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "Der const-Enumerationsmemberinitialisierer wurde in den unzulässigen Wert \"NaN\" ausgewertet.",
/src/demo/ts-demo/node_modules/typescript/lib/de/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "const-Enumerationen können nur in Eigenschaften- bzw. Indexzugriffsausdrücken oder auf der rechten Seite einer Importdeklaration oder Exportzuweisung verwendet werden.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/es/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "Las declaraciones \"const\" deben inicializarse.",
/src/demo/ts-demo/node_modules/typescript/lib/es/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "El inicializador de miembros de enumeración \"const\" se evaluó con un valor no finito.",
/src/demo/ts-demo/node_modules/typescript/lib/es/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "El inicializador de miembros de enumeración \"const\" se evaluó con un valor \"NaN\" no permitido.",
/src/demo/ts-demo/node_modules/typescript/lib/es/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "Las enumeraciones \"const\" solo se pueden usar en expresiones de acceso de propiedad o índice, o en la parte derecha de una declaración de importación, una asignación de exportación o una consulta de tipo.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.d.ts-1821-    interface CustomTransformers {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.d.ts:1822:        /** Custom transformers to evaluate before built-in .js transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/typescript.d.ts-1823-        before?: TransformerFactory<SourceFile>[];
/src/demo/ts-demo/node_modules/typescript/lib/typescript.d.ts:1824:        /** Custom transformers to evaluate after built-in .js transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/typescript.d.ts-1825-        after?: TransformerFactory<SourceFile>[];
/src/demo/ts-demo/node_modules/typescript/lib/typescript.d.ts:1826:        /** Custom transformers to evaluate after built-in .d.ts transformations. */
/src/demo/ts-demo/node_modules/typescript/lib/typescript.d.ts-1827-        afterDeclarations?: TransformerFactory<Bundle | SourceFile>[];
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/zh-cn/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "必须初始化 \"const\" 声明。",
/src/demo/ts-demo/node_modules/typescript/lib/zh-cn/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "\"const\" 枚举成员初始化表达式的求值结果为非有限值。",
/src/demo/ts-demo/node_modules/typescript/lib/zh-cn/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "\"const\" 枚举成员初始化表达式的求值结果为不允许使用的值 \"NaN\"。",
/src/demo/ts-demo/node_modules/typescript/lib/zh-cn/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "\"const\" 枚举仅可在属性、索引访问表达式、导入声明的右侧、导出分配或类型查询中使用。",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/ru/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "Объявления \"const\" должны быть инициализированы.",
/src/demo/ts-demo/node_modules/typescript/lib/ru/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "Инициализатор элементов перечисления const был вычислен в неконечное значение.",
/src/demo/ts-demo/node_modules/typescript/lib/ru/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "Инициализатор элементов перечисления const был вычислен в запрещенное значение NaN.",
/src/demo/ts-demo/node_modules/typescript/lib/ru/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "Перечисления const можно использовать только в выражениях доступа к свойству или индексу, а также в правой части объявления импорта, присваивания экспорта или запроса типа.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-5347-        A_const_enum_member_can_only_be_accessed_using_a_string_literal: diag(2476, ts.DiagnosticCategory.Error, "A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476", "A const enum member can only be accessed using a string literal."),
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:5348:        const_enum_member_initializer_was_evaluated_to_a_non_finite_value: diag(2477, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477", "'const' enum member initializer was evaluated to a non-finite value."),
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:5349:        const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN: diag(2478, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478", "'const' enum member initializer was evaluated to disallowed value 'NaN'."),
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-5350-        Property_0_does_not_exist_on_const_enum_1: diag(2479, ts.DiagnosticCategory.Error, "Property_0_does_not_exist_on_const_enum_1_2479", "Property '{0}' does not exist on 'const' enum '{1}'."),
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-20816-            node.type = parseTypeAnnotation();
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:20817:            // For instance properties specifically, since they are evaluated inside the constructor,
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-20818-            // we do *not * want to parse yield expressions, so we specifically turn the yield context
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-27782-            // an immediately invoked function expression (IIFE). Initialize the flowNode property to
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:27783:            // the current control flow (which includes evaluation of the IIFE arguments).
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-27784-            var expr = node.expression;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28150-            if (inStrictMode && ts.isLeftHandSideExpression(node.left) && ts.isAssignmentOperator(node.operatorToken.kind)) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:28151:                // ECMA 262 (Annex C) The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28152-                // Assignment operator(11.13) or of a PostfixExpression(11.3)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28157-            // It is a SyntaxError if a TryStatement with a Catch occurs within strict code and the Identifier of the
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:28158:            // Catch production is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28159-            if (inStrictMode && node.variableDeclaration) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28172-        function isEvalOrArgumentsIdentifier(node) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:28173:            return ts.isIdentifier(node) && (node.escapedText === "eval" || node.escapedText === "arguments");
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28174-        }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28198-            if (inStrictMode) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:28199:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a strict mode FunctionDeclaration or FunctionExpression (13.1))
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28200-                checkStrictModeEvalOrArguments(node, node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28233-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:28234:            // The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28235-            // Assignment operator(11.13) or of a PostfixExpression(11.3) or as the UnaryExpression
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28969-            if (inStrictMode && !(node.flags & 4194304 /* Ambient */)) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:28970:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-28971-                // strict mode FunctionLikeDeclaration or FunctionExpression(13.1)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-31394-                        // TypeScript 1.0 spec (April 2014): 8.4.1
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:31395:                        // Initializer expressions for instance member variables are evaluated in the scope
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-31396-                        // of the class constructor body but are not permitted to reference parameters or
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-43930-                // Assignments only narrow the computed type if the declared type is a union type. Thus, we
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:43931:                // only need to evaluate the assigned type if the declared type is a union type.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-43932-                if (isMatchingReference(reference, node)) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-50176-         * This is a *shallow* check: An expression is side-effect-free if the
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:50177:         * evaluation of the expression *itself* cannot produce side effects.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-50178-         * For example, x++ / 3 is side-effect free because the / operator
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-50412-            function isEvalNode(node) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:50413:                return node.kind === 71 /* Identifier */ && node.escapedText === "eval";
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-50414-            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-50901-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:50902:            // It is a SyntaxError if the Identifier "eval" or the Identifier "arguments" occurs as the
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-50903-            // Identifier in a PropertySetParameterList of a PropertyAssignment that is contained in strict code
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54350-            var initializer = member.initializer;
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54351:            var value = enumKind === 1 /* Literal */ && !isLiteralEnumMember(member) ? undefined : evaluate(initializer);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54352-            if (value !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54354-                    error(initializer, isNaN(value) ?
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54355:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN :
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54356:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54357-                }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54373-            return value;
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54374:            function evaluate(expr) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54375-                switch (expr.kind) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54376-                    case 200 /* PrefixUnaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54377:                        var value_2 = evaluate(expr.operand);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54378-                        if (typeof value_2 === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54386-                    case 202 /* BinaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54387:                        var left = evaluate(expr.left);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54388:                        var right = evaluate(expr.right);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54389-                        if (typeof left === "number" && typeof right === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54414-                    case 193 /* ParenthesizedExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54415:                        return evaluate(expr.expression);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54416-                    case 71 /* Identifier */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54420-                        }
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54421:                        return ts.nodeIsMissing(expr) ? 0 : evaluateEnumMember(expr, getSymbolOfNode(member.parent), identifier.escapedText);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54422-                    case 188 /* ElementAccessExpression */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54436-                                }
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54437:                                return evaluateEnumMember(expr, type.symbol, name);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54438-                            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54443-            }
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:54444:            function evaluateEnumMember(expr, enumSymbol, name) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-54445-                var memberSymbol = enumSymbol.exports.get(name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-57653-            // It is a SyntaxError if a VariableDeclaration or VariableDeclarationNoIn occurs within strict code
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:57654:            // and its Identifier is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-57655-            return checkLetConstNames && checkGrammarNameInLetOrConstDeclarations(node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64021-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:64022:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64023-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64086-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:64087:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64088-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64151-     *
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:64152:     * @link https://tc39.github.io/ecma262/#sec-runtime-semantics-keyeddestructuringassignmentevaluation
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64153-     *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64807-            pendingExpressions = savedPendingExpressions;
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:64808:            // Emit static property assignment. Because classDeclaration is lexically evaluated,
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64809-            // it is safe to emit static property assignment after classDeclaration
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64915-            // In the simplest case, we emit the class declaration as a let declaration, and
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:64916:            // evaluate decorators after the close of the class body:
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-64917-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-65532-        /**
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:65533:         * Generates an expression used to evaluate class element decorators at runtime.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-65534-         *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-68053-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:68054:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-68055-                return ts.updateParameter(node, 
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-69779-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:69780:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-69781-                return ts.setOriginalNode(ts.setTextRange(ts.createParameter(
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-70464-            //   Without explicit initialization code in /*1*/ can be executed even if
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:70465:            //   some-condition is evaluated to false.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-70466-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-70618-                // Initializer is an expression. Emit the expression in the body, so that it's
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:70619:                // evaluated on every iteration.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-70620-                var assignment = ts.createAssignment(initializer, boundValue);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74158-        /**
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74159:         * Emits a Break operation to the specified label when a condition evaluates to a truthy
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74160-         * value at runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74169-        /**
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74170:         * Emits a Break to the specified label when a condition evaluates to a falsey value at
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74171-         * runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74654-    //            sent() - A method that returns or throws the current completion value.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74655:    //            label  - The next point at which to resume evaluation of the generator body.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74656-    //            trys   - A stack of protected regions (try/catch/finally blocks).
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74666-    //            of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74667:    //          - The result of evaluating the verb delegated to the expression of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74668-    //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74676-    //  1: throw(error)     - Resume the generator with an exception. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74677:    //                        suspended inside of one or more protected regions, evaluates
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74678-    //                        any intervening finally blocks between the current label and
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74681-    //  2: return(value?)   - Resume the generator as if with a return. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74682:    //                        suspended inside of one or more protected regions, evaluates any
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74683-    //                        intervening finally blocks.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74684-    //  3: break(label)     - Jump to the specified label. If the label is outside of the
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74685:    //                        current protected region, evaluates any intervening finally
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74686-    //                        blocks.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74688-    //                        resumed, the generator will continue at the next label.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74689:    //  5: yield*(value)    - Delegates evaluation to the supplied iterator. When
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74690-    //                        delegation completes, the generator will continue at the next
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74693-    //                        the current label is inside of one or more protected regions,
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:74694:    //                        evaluates any intervening finally blocks between the current
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-74695-    //                        label and the nearest catch block or function boundary. If
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-83755-                // Just clear the cache for now
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:83756:                // For now just clear the cache, since this could mean that multiple level entries might need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-83757-                clearCache();
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-86897-                newReferences && ts.forEachKey(newReferences, function (path) { return !state.fileInfos.has(path) && oldState.fileInfos.has(path); })) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:86898:                // Register file as changed file and do not copy semantic diagnostics, since all changed files need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-86899-                state.changedFilesSet.set(sourceFilePath, true);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-87749-                    if (!resolution.isInvalidated && isInvalidatedResolution(resolution, getResolutionWithResolvedFileName)) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:87750:                        // Mark the file as needing re-evaluation of module resolution instead of using it blindly.
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-87751-                        resolution.isInvalidated = true;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-90072-    }
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js:90073:    var ignoredProperties = new Set(["arguments", "caller", "constructor", "eval", "super_"]);
/src/demo/ts-demo/node_modules/typescript/lib/tsserverlibrary.js-90074-    var reservedFunctionProperties = new Set(Object.getOwnPropertyNames(ts.noop));
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/ja/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "'const' 宣言は初期化する必要があります。",
/src/demo/ts-demo/node_modules/typescript/lib/ja/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "'const' 列挙型メンバーの初期化子が、無限値に評価されました。",
/src/demo/ts-demo/node_modules/typescript/lib/ja/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "'const' 列挙型メンバーの初期化子が、許可されない値 'NaN' に評価されました。",
/src/demo/ts-demo/node_modules/typescript/lib/ja/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "'const' 列挙型は、プロパティまたはインデックスのアクセス式、インポート宣言またはエクスポートの割り当ての右辺、型のクエリにのみ使用できます。",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-5351-        A_const_enum_member_can_only_be_accessed_using_a_string_literal: diag(2476, ts.DiagnosticCategory.Error, "A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476", "A const enum member can only be accessed using a string literal."),
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:5352:        const_enum_member_initializer_was_evaluated_to_a_non_finite_value: diag(2477, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477", "'const' enum member initializer was evaluated to a non-finite value."),
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:5353:        const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN: diag(2478, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478", "'const' enum member initializer was evaluated to disallowed value 'NaN'."),
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-5354-        Property_0_does_not_exist_on_const_enum_1: diag(2479, ts.DiagnosticCategory.Error, "Property_0_does_not_exist_on_const_enum_1_2479", "Property '{0}' does not exist on 'const' enum '{1}'."),
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-20820-            node.type = parseTypeAnnotation();
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:20821:            // For instance properties specifically, since they are evaluated inside the constructor,
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-20822-            // we do *not * want to parse yield expressions, so we specifically turn the yield context
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-27786-            // an immediately invoked function expression (IIFE). Initialize the flowNode property to
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:27787:            // the current control flow (which includes evaluation of the IIFE arguments).
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-27788-            var expr = node.expression;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28154-            if (inStrictMode && ts.isLeftHandSideExpression(node.left) && ts.isAssignmentOperator(node.operatorToken.kind)) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:28155:                // ECMA 262 (Annex C) The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28156-                // Assignment operator(11.13) or of a PostfixExpression(11.3)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28161-            // It is a SyntaxError if a TryStatement with a Catch occurs within strict code and the Identifier of the
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:28162:            // Catch production is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28163-            if (inStrictMode && node.variableDeclaration) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28176-        function isEvalOrArgumentsIdentifier(node) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:28177:            return ts.isIdentifier(node) && (node.escapedText === "eval" || node.escapedText === "arguments");
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28178-        }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28202-            if (inStrictMode) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:28203:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a strict mode FunctionDeclaration or FunctionExpression (13.1))
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28204-                checkStrictModeEvalOrArguments(node, node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28237-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:28238:            // The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28239-            // Assignment operator(11.13) or of a PostfixExpression(11.3) or as the UnaryExpression
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28973-            if (inStrictMode && !(node.flags & 4194304 /* Ambient */)) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:28974:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-28975-                // strict mode FunctionLikeDeclaration or FunctionExpression(13.1)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-31398-                        // TypeScript 1.0 spec (April 2014): 8.4.1
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:31399:                        // Initializer expressions for instance member variables are evaluated in the scope
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-31400-                        // of the class constructor body but are not permitted to reference parameters or
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-43934-                // Assignments only narrow the computed type if the declared type is a union type. Thus, we
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:43935:                // only need to evaluate the assigned type if the declared type is a union type.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-43936-                if (isMatchingReference(reference, node)) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-50180-         * This is a *shallow* check: An expression is side-effect-free if the
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:50181:         * evaluation of the expression *itself* cannot produce side effects.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-50182-         * For example, x++ / 3 is side-effect free because the / operator
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-50416-            function isEvalNode(node) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:50417:                return node.kind === 71 /* Identifier */ && node.escapedText === "eval";
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-50418-            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-50905-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:50906:            // It is a SyntaxError if the Identifier "eval" or the Identifier "arguments" occurs as the
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-50907-            // Identifier in a PropertySetParameterList of a PropertyAssignment that is contained in strict code
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54354-            var initializer = member.initializer;
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54355:            var value = enumKind === 1 /* Literal */ && !isLiteralEnumMember(member) ? undefined : evaluate(initializer);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54356-            if (value !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54358-                    error(initializer, isNaN(value) ?
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54359:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN :
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54360:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54361-                }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54377-            return value;
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54378:            function evaluate(expr) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54379-                switch (expr.kind) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54380-                    case 200 /* PrefixUnaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54381:                        var value_2 = evaluate(expr.operand);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54382-                        if (typeof value_2 === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54390-                    case 202 /* BinaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54391:                        var left = evaluate(expr.left);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54392:                        var right = evaluate(expr.right);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54393-                        if (typeof left === "number" && typeof right === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54418-                    case 193 /* ParenthesizedExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54419:                        return evaluate(expr.expression);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54420-                    case 71 /* Identifier */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54424-                        }
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54425:                        return ts.nodeIsMissing(expr) ? 0 : evaluateEnumMember(expr, getSymbolOfNode(member.parent), identifier.escapedText);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54426-                    case 188 /* ElementAccessExpression */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54440-                                }
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54441:                                return evaluateEnumMember(expr, type.symbol, name);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54442-                            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54447-            }
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:54448:            function evaluateEnumMember(expr, enumSymbol, name) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-54449-                var memberSymbol = enumSymbol.exports.get(name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-57657-            // It is a SyntaxError if a VariableDeclaration or VariableDeclarationNoIn occurs within strict code
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:57658:            // and its Identifier is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-57659-            return checkLetConstNames && checkGrammarNameInLetOrConstDeclarations(node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64025-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:64026:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64027-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64090-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:64091:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64092-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64155-     *
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:64156:     * @link https://tc39.github.io/ecma262/#sec-runtime-semantics-keyeddestructuringassignmentevaluation
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64157-     *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64811-            pendingExpressions = savedPendingExpressions;
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:64812:            // Emit static property assignment. Because classDeclaration is lexically evaluated,
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64813-            // it is safe to emit static property assignment after classDeclaration
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64919-            // In the simplest case, we emit the class declaration as a let declaration, and
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:64920:            // evaluate decorators after the close of the class body:
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-64921-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-65536-        /**
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:65537:         * Generates an expression used to evaluate class element decorators at runtime.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-65538-         *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-68057-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:68058:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-68059-                return ts.updateParameter(node, 
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-69783-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:69784:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-69785-                return ts.setOriginalNode(ts.setTextRange(ts.createParameter(
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-70468-            //   Without explicit initialization code in /*1*/ can be executed even if
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:70469:            //   some-condition is evaluated to false.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-70470-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-70622-                // Initializer is an expression. Emit the expression in the body, so that it's
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:70623:                // evaluated on every iteration.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-70624-                var assignment = ts.createAssignment(initializer, boundValue);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74162-        /**
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74163:         * Emits a Break operation to the specified label when a condition evaluates to a truthy
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74164-         * value at runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74173-        /**
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74174:         * Emits a Break to the specified label when a condition evaluates to a falsey value at
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74175-         * runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74658-    //            sent() - A method that returns or throws the current completion value.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74659:    //            label  - The next point at which to resume evaluation of the generator body.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74660-    //            trys   - A stack of protected regions (try/catch/finally blocks).
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74670-    //            of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74671:    //          - The result of evaluating the verb delegated to the expression of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74672-    //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74680-    //  1: throw(error)     - Resume the generator with an exception. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74681:    //                        suspended inside of one or more protected regions, evaluates
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74682-    //                        any intervening finally blocks between the current label and
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74685-    //  2: return(value?)   - Resume the generator as if with a return. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74686:    //                        suspended inside of one or more protected regions, evaluates any
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74687-    //                        intervening finally blocks.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74688-    //  3: break(label)     - Jump to the specified label. If the label is outside of the
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74689:    //                        current protected region, evaluates any intervening finally
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74690-    //                        blocks.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74692-    //                        resumed, the generator will continue at the next label.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74693:    //  5: yield*(value)    - Delegates evaluation to the supplied iterator. When
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74694-    //                        delegation completes, the generator will continue at the next
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74697-    //                        the current label is inside of one or more protected regions,
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:74698:    //                        evaluates any intervening finally blocks between the current
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-74699-    //                        label and the nearest catch block or function boundary. If
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-83759-                // Just clear the cache for now
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:83760:                // For now just clear the cache, since this could mean that multiple level entries might need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-83761-                clearCache();
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-86901-                newReferences && ts.forEachKey(newReferences, function (path) { return !state.fileInfos.has(path) && oldState.fileInfos.has(path); })) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:86902:                // Register file as changed file and do not copy semantic diagnostics, since all changed files need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-86903-                state.changedFilesSet.set(sourceFilePath, true);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-87753-                    if (!resolution.isInvalidated && isInvalidatedResolution(resolution, getResolutionWithResolvedFileName)) {
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:87754:                        // Mark the file as needing re-evaluation of module resolution instead of using it blindly.
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-87755-                        resolution.isInvalidated = true;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-90076-    }
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js:90077:    var ignoredProperties = new Set(["arguments", "caller", "constructor", "eval", "super_"]);
/src/demo/ts-demo/node_modules/typescript/lib/tsserver.js-90078-    var reservedFunctionProperties = new Set(Object.getOwnPropertyNames(ts.noop));
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-5338-        A_const_enum_member_can_only_be_accessed_using_a_string_literal: diag(2476, ts.DiagnosticCategory.Error, "A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476", "A const enum member can only be accessed using a string literal."),
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:5339:        const_enum_member_initializer_was_evaluated_to_a_non_finite_value: diag(2477, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477", "'const' enum member initializer was evaluated to a non-finite value."),
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:5340:        const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN: diag(2478, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478", "'const' enum member initializer was evaluated to disallowed value 'NaN'."),
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-5341-        Property_0_does_not_exist_on_const_enum_1: diag(2479, ts.DiagnosticCategory.Error, "Property_0_does_not_exist_on_const_enum_1_2479", "Property '{0}' does not exist on 'const' enum '{1}'."),
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-20807-            node.type = parseTypeAnnotation();
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:20808:            // For instance properties specifically, since they are evaluated inside the constructor,
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-20809-            // we do *not * want to parse yield expressions, so we specifically turn the yield context
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-27773-            // an immediately invoked function expression (IIFE). Initialize the flowNode property to
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:27774:            // the current control flow (which includes evaluation of the IIFE arguments).
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-27775-            var expr = node.expression;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28141-            if (inStrictMode && ts.isLeftHandSideExpression(node.left) && ts.isAssignmentOperator(node.operatorToken.kind)) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:28142:                // ECMA 262 (Annex C) The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28143-                // Assignment operator(11.13) or of a PostfixExpression(11.3)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28148-            // It is a SyntaxError if a TryStatement with a Catch occurs within strict code and the Identifier of the
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:28149:            // Catch production is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28150-            if (inStrictMode && node.variableDeclaration) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28163-        function isEvalOrArgumentsIdentifier(node) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:28164:            return ts.isIdentifier(node) && (node.escapedText === "eval" || node.escapedText === "arguments");
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28165-        }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28189-            if (inStrictMode) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:28190:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a strict mode FunctionDeclaration or FunctionExpression (13.1))
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28191-                checkStrictModeEvalOrArguments(node, node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28224-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:28225:            // The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28226-            // Assignment operator(11.13) or of a PostfixExpression(11.3) or as the UnaryExpression
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28960-            if (inStrictMode && !(node.flags & 4194304 /* Ambient */)) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:28961:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-28962-                // strict mode FunctionLikeDeclaration or FunctionExpression(13.1)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-31385-                        // TypeScript 1.0 spec (April 2014): 8.4.1
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:31386:                        // Initializer expressions for instance member variables are evaluated in the scope
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-31387-                        // of the class constructor body but are not permitted to reference parameters or
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-43921-                // Assignments only narrow the computed type if the declared type is a union type. Thus, we
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:43922:                // only need to evaluate the assigned type if the declared type is a union type.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-43923-                if (isMatchingReference(reference, node)) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-50167-         * This is a *shallow* check: An expression is side-effect-free if the
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:50168:         * evaluation of the expression *itself* cannot produce side effects.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-50169-         * For example, x++ / 3 is side-effect free because the / operator
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-50403-            function isEvalNode(node) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:50404:                return node.kind === 71 /* Identifier */ && node.escapedText === "eval";
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-50405-            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-50892-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:50893:            // It is a SyntaxError if the Identifier "eval" or the Identifier "arguments" occurs as the
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-50894-            // Identifier in a PropertySetParameterList of a PropertyAssignment that is contained in strict code
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54341-            var initializer = member.initializer;
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54342:            var value = enumKind === 1 /* Literal */ && !isLiteralEnumMember(member) ? undefined : evaluate(initializer);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54343-            if (value !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54345-                    error(initializer, isNaN(value) ?
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54346:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN :
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54347:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54348-                }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54364-            return value;
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54365:            function evaluate(expr) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54366-                switch (expr.kind) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54367-                    case 200 /* PrefixUnaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54368:                        var value_2 = evaluate(expr.operand);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54369-                        if (typeof value_2 === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54377-                    case 202 /* BinaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54378:                        var left = evaluate(expr.left);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54379:                        var right = evaluate(expr.right);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54380-                        if (typeof left === "number" && typeof right === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54405-                    case 193 /* ParenthesizedExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54406:                        return evaluate(expr.expression);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54407-                    case 71 /* Identifier */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54411-                        }
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54412:                        return ts.nodeIsMissing(expr) ? 0 : evaluateEnumMember(expr, getSymbolOfNode(member.parent), identifier.escapedText);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54413-                    case 188 /* ElementAccessExpression */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54427-                                }
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54428:                                return evaluateEnumMember(expr, type.symbol, name);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54429-                            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54434-            }
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:54435:            function evaluateEnumMember(expr, enumSymbol, name) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-54436-                var memberSymbol = enumSymbol.exports.get(name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-57644-            // It is a SyntaxError if a VariableDeclaration or VariableDeclarationNoIn occurs within strict code
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:57645:            // and its Identifier is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-57646-            return checkLetConstNames && checkGrammarNameInLetOrConstDeclarations(node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64012-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:64013:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64014-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64077-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:64078:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64079-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64142-     *
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:64143:     * @link https://tc39.github.io/ecma262/#sec-runtime-semantics-keyeddestructuringassignmentevaluation
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64144-     *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64798-            pendingExpressions = savedPendingExpressions;
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:64799:            // Emit static property assignment. Because classDeclaration is lexically evaluated,
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64800-            // it is safe to emit static property assignment after classDeclaration
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64906-            // In the simplest case, we emit the class declaration as a let declaration, and
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:64907:            // evaluate decorators after the close of the class body:
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-64908-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-65523-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:65524:         * Generates an expression used to evaluate class element decorators at runtime.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-65525-         *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-68044-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:68045:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-68046-                return ts.updateParameter(node, 
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-69770-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:69771:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-69772-                return ts.setOriginalNode(ts.setTextRange(ts.createParameter(
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-70455-            //   Without explicit initialization code in /*1*/ can be executed even if
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:70456:            //   some-condition is evaluated to false.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-70457-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-70609-                // Initializer is an expression. Emit the expression in the body, so that it's
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:70610:                // evaluated on every iteration.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-70611-                var assignment = ts.createAssignment(initializer, boundValue);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74149-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74150:         * Emits a Break operation to the specified label when a condition evaluates to a truthy
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74151-         * value at runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74160-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74161:         * Emits a Break to the specified label when a condition evaluates to a falsey value at
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74162-         * runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74645-    //            sent() - A method that returns or throws the current completion value.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74646:    //            label  - The next point at which to resume evaluation of the generator body.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74647-    //            trys   - A stack of protected regions (try/catch/finally blocks).
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74657-    //            of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74658:    //          - The result of evaluating the verb delegated to the expression of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74659-    //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74667-    //  1: throw(error)     - Resume the generator with an exception. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74668:    //                        suspended inside of one or more protected regions, evaluates
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74669-    //                        any intervening finally blocks between the current label and
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74672-    //  2: return(value?)   - Resume the generator as if with a return. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74673:    //                        suspended inside of one or more protected regions, evaluates any
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74674-    //                        intervening finally blocks.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74675-    //  3: break(label)     - Jump to the specified label. If the label is outside of the
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74676:    //                        current protected region, evaluates any intervening finally
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74677-    //                        blocks.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74679-    //                        resumed, the generator will continue at the next label.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74680:    //  5: yield*(value)    - Delegates evaluation to the supplied iterator. When
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74681-    //                        delegation completes, the generator will continue at the next
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74684-    //                        the current label is inside of one or more protected regions,
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:74685:    //                        evaluates any intervening finally blocks between the current
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-74686-    //                        label and the nearest catch block or function boundary. If
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-83746-                // Just clear the cache for now
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:83747:                // For now just clear the cache, since this could mean that multiple level entries might need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-83748-                clearCache();
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-86888-                newReferences && ts.forEachKey(newReferences, function (path) { return !state.fileInfos.has(path) && oldState.fileInfos.has(path); })) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:86889:                // Register file as changed file and do not copy semantic diagnostics, since all changed files need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-86890-                state.changedFilesSet.set(sourceFilePath, true);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-87740-                    if (!resolution.isInvalidated && isInvalidatedResolution(resolution, getResolutionWithResolvedFileName)) {
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:87741:                        // Mark the file as needing re-evaluation of module resolution instead of using it blindly.
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-87742-                        resolution.isInvalidated = true;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-90063-    }
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js:90064:    var ignoredProperties = new Set(["arguments", "caller", "constructor", "eval", "super_"]);
/src/demo/ts-demo/node_modules/typescript/lib/typescript.js-90065-    var reservedFunctionProperties = new Set(Object.getOwnPropertyNames(ts.noop));
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-5351-        A_const_enum_member_can_only_be_accessed_using_a_string_literal: diag(2476, ts.DiagnosticCategory.Error, "A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476", "A const enum member can only be accessed using a string literal."),
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:5352:        const_enum_member_initializer_was_evaluated_to_a_non_finite_value: diag(2477, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477", "'const' enum member initializer was evaluated to a non-finite value."),
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:5353:        const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN: diag(2478, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478", "'const' enum member initializer was evaluated to disallowed value 'NaN'."),
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-5354-        Property_0_does_not_exist_on_const_enum_1: diag(2479, ts.DiagnosticCategory.Error, "Property_0_does_not_exist_on_const_enum_1_2479", "Property '{0}' does not exist on 'const' enum '{1}'."),
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-20820-            node.type = parseTypeAnnotation();
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:20821:            // For instance properties specifically, since they are evaluated inside the constructor,
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-20822-            // we do *not * want to parse yield expressions, so we specifically turn the yield context
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-27786-            // an immediately invoked function expression (IIFE). Initialize the flowNode property to
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:27787:            // the current control flow (which includes evaluation of the IIFE arguments).
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-27788-            var expr = node.expression;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28154-            if (inStrictMode && ts.isLeftHandSideExpression(node.left) && ts.isAssignmentOperator(node.operatorToken.kind)) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:28155:                // ECMA 262 (Annex C) The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28156-                // Assignment operator(11.13) or of a PostfixExpression(11.3)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28161-            // It is a SyntaxError if a TryStatement with a Catch occurs within strict code and the Identifier of the
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:28162:            // Catch production is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28163-            if (inStrictMode && node.variableDeclaration) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28176-        function isEvalOrArgumentsIdentifier(node) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:28177:            return ts.isIdentifier(node) && (node.escapedText === "eval" || node.escapedText === "arguments");
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28178-        }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28202-            if (inStrictMode) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:28203:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a strict mode FunctionDeclaration or FunctionExpression (13.1))
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28204-                checkStrictModeEvalOrArguments(node, node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28237-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:28238:            // The identifier eval or arguments may not appear as the LeftHandSideExpression of an
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28239-            // Assignment operator(11.13) or of a PostfixExpression(11.3) or as the UnaryExpression
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28973-            if (inStrictMode && !(node.flags & 4194304 /* Ambient */)) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:28974:                // It is a SyntaxError if the identifier eval or arguments appears within a FormalParameterList of a
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-28975-                // strict mode FunctionLikeDeclaration or FunctionExpression(13.1)
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-31398-                        // TypeScript 1.0 spec (April 2014): 8.4.1
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:31399:                        // Initializer expressions for instance member variables are evaluated in the scope
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-31400-                        // of the class constructor body but are not permitted to reference parameters or
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-43934-                // Assignments only narrow the computed type if the declared type is a union type. Thus, we
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:43935:                // only need to evaluate the assigned type if the declared type is a union type.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-43936-                if (isMatchingReference(reference, node)) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-50180-         * This is a *shallow* check: An expression is side-effect-free if the
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:50181:         * evaluation of the expression *itself* cannot produce side effects.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-50182-         * For example, x++ / 3 is side-effect free because the / operator
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-50416-            function isEvalNode(node) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:50417:                return node.kind === 71 /* Identifier */ && node.escapedText === "eval";
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-50418-            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-50905-            // Grammar checking
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:50906:            // It is a SyntaxError if the Identifier "eval" or the Identifier "arguments" occurs as the
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-50907-            // Identifier in a PropertySetParameterList of a PropertyAssignment that is contained in strict code
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54354-            var initializer = member.initializer;
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54355:            var value = enumKind === 1 /* Literal */ && !isLiteralEnumMember(member) ? undefined : evaluate(initializer);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54356-            if (value !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54358-                    error(initializer, isNaN(value) ?
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54359:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN :
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54360:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54361-                }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54377-            return value;
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54378:            function evaluate(expr) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54379-                switch (expr.kind) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54380-                    case 200 /* PrefixUnaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54381:                        var value_2 = evaluate(expr.operand);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54382-                        if (typeof value_2 === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54390-                    case 202 /* BinaryExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54391:                        var left = evaluate(expr.left);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54392:                        var right = evaluate(expr.right);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54393-                        if (typeof left === "number" && typeof right === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54418-                    case 193 /* ParenthesizedExpression */:
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54419:                        return evaluate(expr.expression);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54420-                    case 71 /* Identifier */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54424-                        }
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54425:                        return ts.nodeIsMissing(expr) ? 0 : evaluateEnumMember(expr, getSymbolOfNode(member.parent), identifier.escapedText);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54426-                    case 188 /* ElementAccessExpression */:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54440-                                }
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54441:                                return evaluateEnumMember(expr, type.symbol, name);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54442-                            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54447-            }
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:54448:            function evaluateEnumMember(expr, enumSymbol, name) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-54449-                var memberSymbol = enumSymbol.exports.get(name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-57657-            // It is a SyntaxError if a VariableDeclaration or VariableDeclarationNoIn occurs within strict code
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:57658:            // and its Identifier is eval or arguments
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-57659-            return checkLetConstNames && checkGrammarNameInLetOrConstDeclarations(node.name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64025-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:64026:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64027-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64090-            // For anything other than a single-element destructuring we need to generate a temporary
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:64091:            // to ensure value is evaluated exactly once. Additionally, if we have zero elements
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64092-            // we need to emit *something* to ensure that in case a 'var' keyword was already emitted,
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64155-     *
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:64156:     * @link https://tc39.github.io/ecma262/#sec-runtime-semantics-keyeddestructuringassignmentevaluation
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64157-     *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64811-            pendingExpressions = savedPendingExpressions;
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:64812:            // Emit static property assignment. Because classDeclaration is lexically evaluated,
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64813-            // it is safe to emit static property assignment after classDeclaration
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64919-            // In the simplest case, we emit the class declaration as a let declaration, and
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:64920:            // evaluate decorators after the close of the class body:
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-64921-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-65536-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:65537:         * Generates an expression used to evaluate class element decorators at runtime.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-65538-         *
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-68057-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:68058:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-68059-                return ts.updateParameter(node, 
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-69783-                // Binding patterns are converted into a generated name and are
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:69784:                // evaluated inside the function body.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-69785-                return ts.setOriginalNode(ts.setTextRange(ts.createParameter(
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-70468-            //   Without explicit initialization code in /*1*/ can be executed even if
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:70469:            //   some-condition is evaluated to false.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-70470-            //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-70622-                // Initializer is an expression. Emit the expression in the body, so that it's
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:70623:                // evaluated on every iteration.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-70624-                var assignment = ts.createAssignment(initializer, boundValue);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74162-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74163:         * Emits a Break operation to the specified label when a condition evaluates to a truthy
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74164-         * value at runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74173-        /**
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74174:         * Emits a Break to the specified label when a condition evaluates to a falsey value at
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74175-         * runtime.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74658-    //            sent() - A method that returns or throws the current completion value.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74659:    //            label  - The next point at which to resume evaluation of the generator body.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74660-    //            trys   - A stack of protected regions (try/catch/finally blocks).
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74670-    //            of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74671:    //          - The result of evaluating the verb delegated to the expression of a `yield*`.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74672-    //
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74680-    //  1: throw(error)     - Resume the generator with an exception. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74681:    //                        suspended inside of one or more protected regions, evaluates
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74682-    //                        any intervening finally blocks between the current label and
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74685-    //  2: return(value?)   - Resume the generator as if with a return. If the generator is
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74686:    //                        suspended inside of one or more protected regions, evaluates any
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74687-    //                        intervening finally blocks.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74688-    //  3: break(label)     - Jump to the specified label. If the label is outside of the
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74689:    //                        current protected region, evaluates any intervening finally
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74690-    //                        blocks.
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74692-    //                        resumed, the generator will continue at the next label.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74693:    //  5: yield*(value)    - Delegates evaluation to the supplied iterator. When
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74694-    //                        delegation completes, the generator will continue at the next
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74697-    //                        the current label is inside of one or more protected regions,
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:74698:    //                        evaluates any intervening finally blocks between the current
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-74699-    //                        label and the nearest catch block or function boundary. If
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-83759-                // Just clear the cache for now
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:83760:                // For now just clear the cache, since this could mean that multiple level entries might need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-83761-                clearCache();
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-86901-                newReferences && ts.forEachKey(newReferences, function (path) { return !state.fileInfos.has(path) && oldState.fileInfos.has(path); })) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:86902:                // Register file as changed file and do not copy semantic diagnostics, since all changed files need to be re-evaluated
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-86903-                state.changedFilesSet.set(sourceFilePath, true);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-87753-                    if (!resolution.isInvalidated && isInvalidatedResolution(resolution, getResolutionWithResolvedFileName)) {
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:87754:                        // Mark the file as needing re-evaluation of module resolution instead of using it blindly.
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-87755-                        resolution.isInvalidated = true;
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-90076-    }
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js:90077:    var ignoredProperties = new Set(["arguments", "caller", "constructor", "eval", "super_"]);
/src/demo/ts-demo/node_modules/typescript/lib/typingsInstaller.js-90078-    var reservedFunctionProperties = new Set(Object.getOwnPropertyNames(ts.noop));
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-3393-        A_const_enum_member_can_only_be_accessed_using_a_string_literal: diag(2476, ts.DiagnosticCategory.Error, "A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476", "A const enum member can only be accessed using a string literal."),
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:3394:        const_enum_member_initializer_was_evaluated_to_a_non_finite_value: diag(2477, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477", "'const' enum member initializer was evaluated to a non-finite value."),
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:3395:        const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN: diag(2478, ts.DiagnosticCategory.Error, "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478", "'const' enum member initializer was evaluated to disallowed value 'NaN'."),
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-3396-        Property_0_does_not_exist_on_const_enum_1: diag(2479, ts.DiagnosticCategory.Error, "Property_0_does_not_exist_on_const_enum_1_2479", "Property '{0}' does not exist on 'const' enum '{1}'."),
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-22948-        function isEvalOrArgumentsIdentifier(node) {
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:22949:            return ts.isIdentifier(node) && (node.escapedText === "eval" || node.escapedText === "arguments");
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-22950-        }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-42018-            function isEvalNode(node) {
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:42019:                return node.kind === 71 && node.escapedText === "eval";
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-42020-            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45280-            var initializer = member.initializer;
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45281:            var value = enumKind === 1 && !isLiteralEnumMember(member) ? undefined : evaluate(initializer);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45282-            if (value !== undefined) {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45284-                    error(initializer, isNaN(value) ?
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45285:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN :
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45286:                        ts.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45287-                }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45302-            return value;
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45303:            function evaluate(expr) {
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45304-                switch (expr.kind) {
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45305-                    case 200:
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45306:                        var value_2 = evaluate(expr.operand);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45307-                        if (typeof value_2 === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45315-                    case 202:
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45316:                        var left = evaluate(expr.left);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45317:                        var right = evaluate(expr.right);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45318-                        if (typeof left === "number" && typeof right === "number") {
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45343-                    case 193:
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45344:                        return evaluate(expr.expression);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45345-                    case 71:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45349-                        }
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45350:                        return ts.nodeIsMissing(expr) ? 0 : evaluateEnumMember(expr, getSymbolOfNode(member.parent), identifier.escapedText);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45351-                    case 188:
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45365-                                }
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45366:                                return evaluateEnumMember(expr, type.symbol, name);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45367-                            }
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45372-            }
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:45373:            function evaluateEnumMember(expr, enumSymbol, name) {
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-45374-                var memberSymbol = enumSymbol.exports.get(name);
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-73599-    }
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js:73600:    var ignoredProperties = new Set(["arguments", "caller", "constructor", "eval", "super_"]);
/src/demo/ts-demo/node_modules/typescript/lib/tsc.js-73601-    var reservedFunctionProperties = new Set(Object.getOwnPropertyNames(ts.noop));
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/ko/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "'const' 선언은 초기화해야 합니다.",
/src/demo/ts-demo/node_modules/typescript/lib/ko/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "'const' 열거형 멤버 이니셜라이저가 무한 값에 대해 평가되었습니다.",
/src/demo/ts-demo/node_modules/typescript/lib/ko/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "'const' 열거형 멤버 이니셜라이저가 허용되지 않은 'NaN' 값에 대해 평가되었습니다.",
/src/demo/ts-demo/node_modules/typescript/lib/ko/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "'const' 열거형은 속성이나 인덱스 액세스 식, 또는 내보내기 할당이나 가져오기 선언의 오른쪽, 또는 형식 쿼리에서만 사용할 수 있습니다.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-3950-    /**
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts:3951:     * Specifies the beginning and end of the document body.
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-3952-     */
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-4351-    elementsFromPoint(x: number, y: number): Element[];
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts:4352:    evaluate(expression: string, contextNode: Node, resolver: XPathNSResolver | null, type: number, result: XPathResult | null): XPathResult;
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-4353-    /**
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-16774-    createNSResolver(nodeResolver?: Node): XPathNSResolver;
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts:16775:    evaluate(expression: string, contextNode: Node, resolver: XPathNSResolver | null, type: number, result: XPathResult | null): XPathResult;
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-16776-}
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-16783-interface XPathExpression {
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts:16784:    evaluate(contextNode: Node, type: number, result: XPathResult | null): XPathResult;
/src/demo/ts-demo/node_modules/typescript/lib/lib.dom.d.ts-16785-}
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/pl/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "Konieczne jest zainicjowanie deklaracji „const”.",
/src/demo/ts-demo/node_modules/typescript/lib/pl/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "Wynikiem obliczenia inicjatora składowej wyliczenia ze specyfikatorem „const” jest wartość nieskończona.",
/src/demo/ts-demo/node_modules/typescript/lib/pl/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "Wynikiem obliczenia inicjatora składowej wyliczenia ze specyfikatorem „const” jest niedozwolona wartość „NaN”.",
/src/demo/ts-demo/node_modules/typescript/lib/pl/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "Wyliczenia ze specyfikatorem „const” mogą być używane tylko w wyrażeniach dostępu do indeksu lub właściwości albo po prawej stronie deklaracji importu, przypisania eksportu lub typu zapytania.",
##############################################
/src/demo/ts-demo/node_modules/typescript/lib/zh-tw/diagnosticMessages.generated.json-1039-  "const_declarations_must_be_initialized_1155": "'const' 宣告必須初始化。",
/src/demo/ts-demo/node_modules/typescript/lib/zh-tw/diagnosticMessages.generated.json:1040:  "const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477": "'const' 列舉成員初始設定式已評估為非有限值。",
/src/demo/ts-demo/node_modules/typescript/lib/zh-tw/diagnosticMessages.generated.json:1041:  "const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478": "'const' 列舉成員初始設定式已評估為不允許的值 'NaN'。",
/src/demo/ts-demo/node_modules/typescript/lib/zh-tw/diagnosticMessages.generated.json-1042-  "const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475": "'const' 列舉只可用於屬性或索引存取運算式中，或用於匯入宣告、匯出指派或類型查詢的右側。",
##############################################
/src/demo/ts-demo/node_modules/uglifyjs-webpack-plugin/README.md-351-
/src/demo/ts-demo/node_modules/uglifyjs-webpack-plugin/README.md:352:All comments that match the given expression (resp. are evaluated to `true` by the function) will be extracted to the separate file. The `comments` option specifies whether the comment will be preserved, i.e. it is possible to preserve some comments (e.g. annotations) while extracting others or even preserving comments that have been extracted.
/src/demo/ts-demo/node_modules/uglifyjs-webpack-plugin/README.md-353-
##############################################
/src/demo/ts-demo/node_modules/async/README.md-136-  // This fails because the `this.squareExponent` expression in the square
/src/demo/ts-demo/node_modules/async/README.md:137:  // function is not evaluated in the context of AsyncSquaringLibrary, and is
/src/demo/ts-demo/node_modules/async/README.md-138-  // therefore undefined.
##############################################
/src/demo/ts-demo/node_modules/is-number/README.md-14-
/src/demo/ts-demo/node_modules/is-number/README.md:15:To understand some of the rationale behind the decisions made in this library (and to learn about some oddities of number evaluation in JavaScript), [see this gist](https://gist.github.com/jonschlinkert/e30c70c713da325d0e81).
/src/demo/ts-demo/node_modules/is-number/README.md-16-
##############################################
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-90-        const ns = 'http://www.w3.org/2000/svg';
/src/demo/rough/node_modules/roughjs/src/generator-base.ts:91:        const svg = self.document.createElementNS(ns, 'svg');
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-92-        svg.setAttribute('width', '0');
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-93-        svg.setAttribute('height', '0');
/src/demo/rough/node_modules/roughjs/src/generator-base.ts:94:        const pathNode = self.document.createElementNS(ns, 'path');
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-95-        pathNode.setAttribute('d', d);
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-96-        svg.appendChild(pathNode);
/src/demo/rough/node_modules/roughjs/src/generator-base.ts:97:        self.document.body.appendChild(svg);
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-98-        const bb = pathNode.getBBox();
##############################################
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-102-        }
/src/demo/rough/node_modules/roughjs/src/generator-base.ts:103:        self.document.body.removeChild(svg);
/src/demo/rough/node_modules/roughjs/src/generator-base.ts-104-      } catch (err) { }
##############################################
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts-79-        const ns = 'http://www.w3.org/2000/svg';
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts:80:        const svg = document.createElementNS(ns, 'svg');
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts-81-        svg.setAttribute('width', '0');
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts-82-        svg.setAttribute('height', '0');
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts:83:        const pathNode = self.document.createElementNS(ns, 'path');
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts-84-        pathNode.setAttribute('d', d);
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts-85-        svg.appendChild(pathNode);
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts:86:        document.body.appendChild(svg);
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts-87-        const bbox = pathNode.getBBox();
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts:88:        document.body.removeChild(svg);
/src/demo/rough/node_modules/roughjs/src/canvas-base.ts-89-        return bbox;
##############################################
/src/demo/rough/node_modules/roughjs/tslint.json-11-    "no-duplicate-variable": true,
/src/demo/rough/node_modules/roughjs/tslint.json:12:    "no-eval": true,
/src/demo/rough/node_modules/roughjs/tslint.json-13-    "no-internal-module": true,
##############################################
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-76-                const ns = 'http://www.w3.org/2000/svg';
/src/demo/rough/node_modules/roughjs/bin/generator-base.js:77:                const svg = self.document.createElementNS(ns, 'svg');
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-78-                svg.setAttribute('width', '0');
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-79-                svg.setAttribute('height', '0');
/src/demo/rough/node_modules/roughjs/bin/generator-base.js:80:                const pathNode = self.document.createElementNS(ns, 'path');
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-81-                pathNode.setAttribute('d', d);
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-82-                svg.appendChild(pathNode);
/src/demo/rough/node_modules/roughjs/bin/generator-base.js:83:                self.document.body.appendChild(svg);
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-84-                const bb = pathNode.getBBox();
##############################################
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-88-                }
/src/demo/rough/node_modules/roughjs/bin/generator-base.js:89:                self.document.body.removeChild(svg);
/src/demo/rough/node_modules/roughjs/bin/generator-base.js-90-            }
##############################################
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js-71-                const ns = 'http://www.w3.org/2000/svg';
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js:72:                const svg = document.createElementNS(ns, 'svg');
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js-73-                svg.setAttribute('width', '0');
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js-74-                svg.setAttribute('height', '0');
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js:75:                const pathNode = self.document.createElementNS(ns, 'path');
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js-76-                pathNode.setAttribute('d', d);
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js-77-                svg.appendChild(pathNode);
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js:78:                document.body.appendChild(svg);
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js-79-                const bbox = pathNode.getBBox();
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js:80:                document.body.removeChild(svg);
/src/demo/rough/node_modules/roughjs/bin/canvas-base.js-81-                return bbox;
##############################################
/src/demo/rough/node_modules/roughjs/dist/rough.umd.js:1:!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).rough=e()}(this,function(){"use strict";const t="undefined"!=typeof self;class e{constructor(t,e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1},this.config=t||{},this.surface=e,this.config.options&&(this.defaultOptions=this._options(this.config.options))}_options(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_drawable(t,e,s){return{shape:t,sets:e||[],options:s||this.defaultOptions}}getCanvasSize(){const t=t=>t&&"object"==typeof t&&t.baseVal&&t.baseVal.value?t.baseVal.value:t||100;return this.surface?[t(this.surface.width),t(this.surface.height)]:[100,100]}computePolygonSize(t){if(t.length){let e=t[0][0],s=t[0][0],i=t[0][1],h=t[0][1];for(let n=1;n<t.length;n++)e=Math.min(e,t[n][0]),s=Math.max(s,t[n][0]),i=Math.min(i,t[n][1]),h=Math.max(h,t[n][1]);return[s-e,h-i]}return[0,0]}polygonPath(t){let e="";if(t.length){e=`M${t[0][0]},${t[0][1]}`;for(let s=1;s<t.length;s++)e=`${e} L${t[s][0]},${t[s][1]}`}return e}computePathSize(e){let s=[0,0];if(t&&self.document)try{const t="http://www.w3.org/2000/svg",i=self.document.createElementNS(t,"svg");i.setAttribute("width","0"),i.setAttribute("height","0");const h=self.document.createElementNS(t,"path");h.setAttribute("d",e),i.appendChild(h),self.document.body.appendChild(i);const n=h.getBBox();n&&(s[0]=n.width||0,s[1]=n.height||0),self.document.body.removeChild(i)}catch(t){}const i=this.getCanvasSize();return s[0]*s[1]||(s=i),s}toPaths(t){const e=t.sets||[],s=t.options||this.defaultOptions,i=[];for(const t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:s.stroke,strokeWidth:s.strokeWidth,fill:"none"};break;case"fillPath":e={d:this.opsToPath(t),stroke:"none",strokeWidth:0,fill:s.fill||"none"};break;case"fillSketch":e=this.fillSketch(t,s);break;case"path2Dfill":e={d:t.path||"",stroke:"none",strokeWidth:0,fill:s.fill||"none"};break;case"path2Dpattern":{const i=t.size,h={x:0,y:0,width:1,height:1,viewBox:`0 0 ${Math.round(i[0])} ${Math.round(i[1])}`,patternUnits:"objectBoundingBox",path:this.fillSketch(t,s)};e={d:t.path,stroke:"none",strokeWidth:0,pattern:h};break}}e&&i.push(e)}return i}fillSketch(t,e){let s=e.fillWeight;return s<0&&(s=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||"none",strokeWidth:s,fill:"none"}}opsToPath(t){let e="";for(const s of t.ops){const t=s.data;switch(s.op){case"move":e+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":e+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"qcurveTo":e+=`Q${t[0]} ${t[1]}, ${t[2]} ${t[3]} `;break;case"lineTo":e+=`L${t[0]} ${t[1]} `}}return e.trim()}}function s(t,e){return t.type===e}const i={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0};class h{constructor(t){this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.parseData(t),this.processPoints()}tokenize(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:this.COMMAND,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return console.error("Unrecognized segment command: "+t),[];e[e.length]={type:this.NUMBER,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:this.EOD,text:""},e}parseData(t){const e=this.tokenize(t);let h=0,n=e[h],a="BOD";for(this.segments=new Array;!s(n,this.EOD);){let o;const r=new Array;if("BOD"===a){if("M"!==n.text&&"m"!==n.text)return void this.parseData("M0,0"+t);h++,o=i[n.text],a=n.text}else s(n,this.NUMBER)?o=i[a]:(h++,o=i[n.text],a=n.text);if(h+o<e.length){for(let t=h;t<h+o;t++){const i=e[t];if(!s(i,this.NUMBER))return void console.error("Parameter type is not a number: "+a+","+i.text);r[r.length]=+i.text}if("number"!=typeof i[a])return void console.error("Unsupported segment type: "+a);{const t={key:a,data:r};this.segments.push(t),n=e[h+=o],"M"===a&&(a="L"),"m"===a&&(a="l")}}else console.error("Path data ended before all parameters were found")}}get closed(){if(void 0===this._closed){this._closed=!1;for(const t of this.segments)"z"===t.key.toLowerCase()&&(this._closed=!0)}return this._closed}processPoints(){let t=null,e=[0,0];for(let s=0;s<this.segments.length;s++){const i=this.segments[s];switch(i.key){case"M":case"L":case"T":i.point=[i.data[0],i.data[1]];break;case"m":case"l":case"t":i.point=[i.data[0]+e[0],i.data[1]+e[1]];break;case"H":i.point=[i.data[0],e[1]];break;case"h":i.point=[i.data[0]+e[0],e[1]];break;case"V":i.point=[e[0],i.data[0]];break;case"v":i.point=[e[0],i.data[0]+e[1]];break;case"z":case"Z":t&&(i.point=[t[0],t[1]]);break;case"C":i.point=[i.data[4],i.data[5]];break;case"c":i.point=[i.data[4]+e[0],i.data[5]+e[1]];break;case"S":i.point=[i.data[2],i.data[3]];break;case"s":i.point=[i.data[2]+e[0],i.data[3]+e[1]];break;case"Q":i.point=[i.data[2],i.data[3]];break;case"q":i.point=[i.data[2]+e[0],i.data[3]+e[1]];break;case"A":i.point=[i.data[5],i.data[6]];break;case"a":i.point=[i.data[5]+e[0],i.data[6]+e[1]]}"m"!==i.key&&"M"!==i.key||(t=null),i.point&&(e=i.point,t||(t=i.point)),"z"!==i.key&&"Z"!==i.key||(t=null)}}}class n{constructor(t){this._position=[0,0],this._first=null,this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this.parsed=new h(t)}get segments(){return this.parsed.segments}get closed(){return this.parsed.closed}get linearPoints(){if(!this._linearPoints){const t=[];let e=[];for(const s of this.parsed.segments){const i=s.key.toLowerCase();("m"!==i&&"z"!==i||(e.length&&(t.push(e),e=[]),"z"!==i))&&(s.point&&e.push(s.point))}e.length&&(t.push(e),e=[]),this._linearPoints=t}return this._linearPoints}get first(){return this._first}set first(t){this._first=t}setPosition(t,e){this._position=[t,e],this._first||(this._first=[t,e])}get position(){return this._position}get x(){return this._position[0]}get y(){return this._position[1]}}class a{constructor(t,e,s,i,h,n){if(this._segIndex=0,this._numSegs=0,this._rx=0,this._ry=0,this._sinPhi=0,this._cosPhi=0,this._C=[0,0],this._theta=0,this._delta=0,this._T=0,this._from=t,t[0]===e[0]&&t[1]===e[1])return;const a=Math.PI/180;this._rx=Math.abs(s[0]),this._ry=Math.abs(s[1]),this._sinPhi=Math.sin(i*a),this._cosPhi=Math.cos(i*a);const o=this._cosPhi*(t[0]-e[0])/2+this._sinPhi*(t[1]-e[1])/2,r=-this._sinPhi*(t[0]-e[0])/2+this._cosPhi*(t[1]-e[1])/2;let l=0;const c=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*r*r-this._ry*this._ry*o*o;if(c<0){const t=Math.sqrt(1-c/(this._rx*this._rx*this._ry*this._ry));this._rx=this._rx*t,this._ry=this._ry*t,l=0}else l=(h===n?-1:1)*Math.sqrt(c/(this._rx*this._rx*r*r+this._ry*this._ry*o*o));const p=l*this._rx*r/this._ry,u=-l*this._ry*o/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*p-this._sinPhi*u+(t[0]+e[0])/2,this._C[1]=this._sinPhi*p+this._cosPhi*u+(t[1]+e[1])/2,this._theta=this.calculateVectorAngle(1,0,(o-p)/this._rx,(r-u)/this._ry);let f=this.calculateVectorAngle((o-p)/this._rx,(r-u)/this._ry,(-o-p)/this._rx,(-r-u)/this._ry);!n&&f>0?f-=2*Math.PI:n&&f<0&&(f+=2*Math.PI),this._numSegs=Math.ceil(Math.abs(f/(Math.PI/2))),this._delta=f/this._numSegs,this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/2)}getNextSegment(){if(this._segIndex===this._numSegs)return null;const t=Math.cos(this._theta),e=Math.sin(this._theta),s=this._theta+this._delta,i=Math.cos(s),h=Math.sin(s),n=[this._cosPhi*this._rx*i-this._sinPhi*this._ry*h+this._C[0],this._sinPhi*this._rx*i+this._cosPhi*this._ry*h+this._C[1]],a=[this._from[0]+this._T*(-this._cosPhi*this._rx*e-this._sinPhi*this._ry*t),this._from[1]+this._T*(-this._sinPhi*this._rx*e+this._cosPhi*this._ry*t)],o=[n[0]+this._T*(this._cosPhi*this._rx*h+this._sinPhi*this._ry*i),n[1]+this._T*(this._sinPhi*this._rx*h-this._cosPhi*this._ry*i)];return this._theta=s,this._from=[n[0],n[1]],this._segIndex++,{cp1:a,cp2:o,to:n}}calculateVectorAngle(t,e,s,i){const h=Math.atan2(e,t),n=Math.atan2(i,s);return n>=h?n-h:2*Math.PI-(h-n)}}class o{constructor(t,e){this.sets=t,this.closed=e}fit(t){const e=[];for(const s of this.sets){const i=s.length;let h=Math.floor(t*i);if(h<5){if(i<=5)continue;h=5}e.push(this.reduce(s,h))}let s="";for(const t of e){for(let e=0;e<t.length;e++){const i=t[e];s+=0===e?"M"+i[0]+","+i[1]:"L"+i[0]+","+i[1]}this.closed&&(s+="z ")}return s}distance(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}reduce(t,e){if(t.length<=e)return t;const s=t.slice(0);for(;s.length>e;){let t=-1,e=-1;for(let i=1;i<s.length-1;i++){const h=this.distance(s[i-1],s[i]),n=this.distance(s[i],s[i+1]),a=this.distance(s[i-1],s[i+1]),o=(h+n+a)/2,r=Math.sqrt(o*(o-h)*(o-n)*(o-a));(t<0||r<t)&&(t=r,e=i)}if(!(e>0))break;s.splice(e,1)}return s}}class r{constructor(t,e){this.xi=Number.MAX_VALUE,this.yi=Number.MAX_VALUE,this.px1=t[0],this.py1=t[1],this.px2=e[0],this.py2=e[1],this.a=this.py2-this.py1,this.b=this.px1-this.px2,this.c=this.px2*this.py1-this.px1*this.py2,this._undefined=0===this.a&&0===this.b&&0===this.c}isUndefined(){return this._undefined}intersects(t){if(this.isUndefined()||t.isUndefined())return!1;let e=Number.MAX_VALUE,s=Number.MAX_VALUE,i=0,h=0;const n=this.a,a=this.b,o=this.c;return Math.abs(a)>1e-5&&(e=-n/a,i=-o/a),Math.abs(t.b)>1e-5&&(s=-t.a/t.b,h=-t.c/t.b),e===Number.MAX_VALUE?s===Number.MAX_VALUE?-o/n==-t.c/t.a&&(this.py1>=Math.min(t.py1,t.py2)&&this.py1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.py2>=Math.min(t.py1,t.py2)&&this.py2<=Math.max(t.py1,t.py2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=this.px1,this.yi=s*this.xi+h,!((this.py1-this.yi)*(this.yi-this.py2)<-1e-5||(t.py1-this.yi)*(this.yi-t.py2)<-1e-5)&&(!(Math.abs(t.a)<1e-5)||!((t.px1-this.xi)*(this.xi-t.px2)<-1e-5))):s===Number.MAX_VALUE?(this.xi=t.px1,this.yi=e*this.xi+i,!((t.py1-this.yi)*(this.yi-t.py2)<-1e-5||(this.py1-this.yi)*(this.yi-this.py2)<-1e-5)&&(!(Math.abs(n)<1e-5)||!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5))):e===s?i===h&&(this.px1>=Math.min(t.px1,t.px2)&&this.px1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.px2>=Math.min(t.px1,t.px2)&&this.px2<=Math.max(t.px1,t.px2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=(h-i)/(e-s),this.yi=e*this.xi+i,!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5||(t.px1-this.xi)*(this.xi-t.px2)<-1e-5))}}function l(t,e){const s=t[1][1]-t[0][1],i=t[0][0]-t[1][0],h=s*t[0][0]+i*t[0][1],n=e[1][1]-e[0][1],a=e[0][0]-e[1][0],o=n*e[0][0]+a*e[0][1],r=s*a-n*i;return r?[Math.round((a*h-i*o)/r),Math.round((s*o-n*h)/r)]:null}class c{constructor(t,e,s,i,h,n,a,o){this.deltaX=0,this.hGap=0,this.top=t,this.bottom=e,this.left=s,this.right=i,this.gap=h,this.sinAngle=n,this.tanAngle=o,Math.abs(n)<1e-4?this.pos=s+h:Math.abs(n)>.9999?this.pos=t+h:(this.deltaX=(e-t)*Math.abs(o),this.pos=s-Math.abs(this.deltaX),this.hGap=Math.abs(h/a),this.sLeft=new r([s,e],[s,t]),this.sRight=new r([i,e],[i,t]))}nextLine(){if(Math.abs(this.sinAngle)<1e-4){if(this.pos<this.right){const t=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,t}}else if(Math.abs(this.sinAngle)>.9999){if(this.pos<this.bottom){const t=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,t}}else{let t=this.pos-this.deltaX/2,e=this.pos+this.deltaX/2,s=this.bottom,i=this.top;if(this.pos<this.right+this.deltaX){for(;t<this.left&&e<this.left||t>this.right&&e>this.right;)if(this.pos+=this.hGap,t=this.pos-this.deltaX/2,e=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;const h=new r([t,s],[e,i]);this.sLeft&&h.intersects(this.sLeft)&&(t=h.xi,s=h.yi),this.sRight&&h.intersects(this.sRight)&&(e=h.xi,i=h.yi),this.tanAngle>0&&(t=this.right-(t-this.left),e=this.right-(e-this.left));const n=[t,s,e,i];return this.pos+=this.hGap,n}}return null}}function p(t){const e=t[0],s=t[1];return Math.sqrt(Math.pow(e[0]-s[0],2)+Math.pow(e[1]-s[1],2))}function u(t,e){const s=[],i=new r([t[0],t[1]],[t[2],t[3]]);for(let t=0;t<e.length;t++){const h=new r(e[t],e[(t+1)%e.length]);i.intersects(h)&&s.push([i.xi,i.yi])}return s}function f(t,e,s,i,h,n,a){return[-s*n-i*h+s+n*t+h*e,a*(s*h-i*n)+i+-a*h*t+a*n*e]}function d(t,e){const s=[];if(t&&t.length){let i=t[0][0],h=t[0][0],n=t[0][1],a=t[0][1];for(let e=1;e<t.length;e++)i=Math.min(i,t[e][0]),h=Math.max(h,t[e][0]),n=Math.min(n,t[e][1]),a=Math.max(a,t[e][1]);const o=e.hachureAngle;let r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.max(r,.1);const l=o%180*(Math.PI/180),p=Math.cos(l),f=Math.sin(l),d=Math.tan(l),g=new c(n-1,a+1,i-1,h+1,r,f,p,d);let y;for(;null!=(y=g.nextLine());){const e=u(y,t);for(let t=0;t<e.length;t++)if(t<e.length-1){const i=e[t],h=e[t+1];s.push([i,h])}}}return s}function g(t,e,s,i,h,n){const a=[];let o=Math.abs(i/2),r=Math.abs(h/2);o+=t.randOffset(.05*o,n),r+=t.randOffset(.05*r,n);const l=n.hachureAngle;let c=n.hachureGap;c<=0&&(c=4*n.strokeWidth);let p=n.fillWeight;p<0&&(p=n.strokeWidth/2);const u=l%180*(Math.PI/180),d=Math.tan(u),g=r/o,y=Math.sqrt(g*d*g*d+1),M=g*d/y,x=1/y,_=c/(o*r/Math.sqrt(r*x*(r*x)+o*M*(o*M))/o);let m=Math.sqrt(o*o-(e-o+_)*(e-o+_));for(let t=e-o+_;t<e+o;t+=_){const i=f(t,s-(m=Math.sqrt(o*o-(e-t)*(e-t))),e,s,M,x,g),h=f(t,s+m,e,s,M,x,g);a.push([i,h])}return a}class y{constructor(t){this.helper=t}fillPolygon(t,e){return this._fillPolygon(t,e)}fillEllipse(t,e,s,i,h){return this._fillEllipse(t,e,s,i,h)}fillArc(t,e,s,i,h,n,a){return null}_fillPolygon(t,e,s=!1){const i=d(t,e);return{type:"fillSketch",ops:this.renderLines(i,e,s)}}_fillEllipse(t,e,s,i,h,n=!1){const a=g(this.helper,t,e,s,i,h);return{type:"fillSketch",ops:this.renderLines(a,h,n)}}renderLines(t,e,s){let i=[],h=null;for(const n of t)i=i.concat(this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],e)),s&&h&&(i=i.concat(this.helper.doubleLineOps(h[0],h[1],n[0][0],n[0][1],e))),h=n[1];return i}}class M extends y{fillPolygon(t,e){return this._fillPolygon(t,e,!0)}fillEllipse(t,e,s,i,h){return this._fillEllipse(t,e,s,i,h,!0)}}class x extends y{fillPolygon(t,e){const s=this._fillPolygon(t,e),i=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),h=this._fillPolygon(t,i);return s.ops=s.ops.concat(h.ops),s}fillEllipse(t,e,s,i,h){const n=this._fillEllipse(t,e,s,i,h),a=Object.assign({},h,{hachureAngle:h.hachureAngle+90}),o=this._fillEllipse(t,e,s,i,a);return n.ops=n.ops.concat(o.ops),n}}class _{constructor(t){this.helper=t}fillPolygon(t,e){const s=d(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0}));return this.dotsOnLines(s,e)}fillEllipse(t,e,s,i,h){h=Object.assign({},h,{curveStepCount:4,hachureAngle:0});const n=g(this.helper,t,e,s,i,h);return this.dotsOnLines(n,h)}fillArc(t,e,s,i,h,n,a){return null}dotsOnLines(t,e){let s=[],i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.max(i,.1);let h=e.fillWeight;h<0&&(h=e.strokeWidth/2);for(const n of t){const t=p(n)/i,a=Math.ceil(t)-1,o=Math.atan((n[1][1]-n[0][1])/(n[1][0]-n[0][0]));for(let t=0;t<a;t++){const a=i*(t+1),r=a*Math.sin(o),l=a*Math.cos(o),c=[n[0][0]-l,n[0][1]+r],p=this.helper.randOffsetWithRange(c[0]-i/4,c[0]+i/4,e),u=this.helper.randOffsetWithRange(c[1]-i/4,c[1]+i/4,e),f=this.helper.ellipse(p,u,h,h,e);s=s.concat(f.ops)}}return{type:"fillSketch",ops:s}}}class m{constructor(t){this.helper=t}fillPolygon(t,e){const s=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],i=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];t.forEach(t=>{s[0]=Math.min(s[0],t[0]),s[1]=Math.max(s[1],t[0]),i[0]=Math.min(i[0],t[1]),i[1]=Math.max(i[1],t[1])});const h=function(t){let e=0,s=0,i=0;for(let s=0;s<t.length;s++){const i=t[s],h=s===t.length-1?t[0]:t[s+1];e+=i[0]*h[1]-h[0]*i[1]}e/=2;for(let e=0;e<t.length;e++){const h=t[e],n=e===t.length-1?t[0]:t[e+1];s+=(h[0]+n[0])*(h[0]*n[1]-n[0]*h[1]),i+=(h[1]+n[1])*(h[0]*n[1]-n[0]*h[1])}return[s/(6*e),i/(6*e)]}(t),n=Math.max(Math.sqrt(Math.pow(h[0]-s[0],2)+Math.pow(h[1]-i[0],2)),Math.sqrt(Math.pow(h[0]-s[1],2)+Math.pow(h[1]-i[1],2))),a=e.hachureGap>0?e.hachureGap:4*e.strokeWidth,o=[];if(t.length>2)for(let e=0;e<t.length;e++)e===t.length-1?o.push([t[e],t[0]]):o.push([t[e],t[e+1]]);let r=[];const c=Math.max(1,Math.PI*n/a);for(let t=0;t<c;t++){const e=t*Math.PI/c,a=[h,[h[0]+n*Math.cos(e),h[1]+n*Math.sin(e)]];o.forEach(t=>{const e=l(t,a);e&&e[0]>=s[0]&&e[0]<=s[1]&&e[1]>=i[0]&&e[1]<=i[1]&&r.push(e)})}r=this.removeDuplocatePoints(r);const p=this.createLinesFromCenter(h,r);return{type:"fillSketch",ops:this.drawLines(p,e)}}fillEllipse(t,e,s,i,h){return this.fillArcSegment(t,e,s,i,0,2*Math.PI,h)}fillArc(t,e,s,i,h,n,a){return this.fillArcSegment(t,e,s,i,h,n,a)}fillArcSegment(t,e,s,i,h,n,a){const o=[t,e],r=s/2,l=i/2,c=Math.max(s/2,i/2);let p=a.hachureGap;p<0&&(p=4*a.strokeWidth);const u=Math.max(1,Math.abs(n-h)*c/p);let f=[];for(let t=0;t<u;t++){const e=t*((n-h)/u)+h,s=c*Math.cos(e),i=c*Math.sin(e),a=Math.sqrt(r*r*i*i+l*l*s*s),p=r*l*s/a,d=r*l*i/a;f.push([o[0]+p,o[1]+d])}f=this.removeDuplocatePoints(f);const d=this.createLinesFromCenter(o,f);return{type:"fillSketch",ops:this.drawLines(d,a)}}drawLines(t,e){let s=[];return t.forEach(t=>{const i=t[0],h=t[1];s=s.concat(this.helper.doubleLineOps(i[0],i[1],h[0],h[1],e))}),s}createLinesFromCenter(t,e){return e.map(e=>[t,e])}removeDuplocatePoints(t){const e=new Set;return t.filter(t=>{const s=t.join(",");return!e.has(s)&&(e.add(s),!0)})}}class b{constructor(t){this.helper=t}fillPolygon(t,e){const s=d(t,e);return{type:"fillSketch",ops:this.dashedLine(s,e)}}fillEllipse(t,e,s,i,h){const n=g(this.helper,t,e,s,i,h);return{type:"fillSketch",ops:this.dashedLine(n,h)}}fillArc(t,e,s,i,h,n,a){return null}dashedLine(t,e){const s=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,i=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap;let h=[];return t.forEach(t=>{const n=p(t),a=Math.floor(n/(s+i)),o=(n+i-a*(s+i))/2;let r=t[0],l=t[1];r[0]>l[0]&&(r=t[1],l=t[0]);const c=Math.atan((l[1]-r[1])/(l[0]-r[0]));for(let t=0;t<a;t++){const n=t*(s+i),a=n+s,l=[r[0]+n*Math.cos(c)+o*Math.cos(c),r[1]+n*Math.sin(c)+o*Math.sin(c)],p=[r[0]+a*Math.cos(c)+o*Math.cos(c),r[1]+a*Math.sin(c)+o*Math.sin(c)];h=h.concat(this.helper.doubleLineOps(l[0],l[1],p[0],p[1],e))}}),h}}class w{constructor(t){this.helper=t}fillPolygon(t,e){const s=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,i=e.zigzagOffset<0?s:e.zigzagOffset,h=d(t,e=Object.assign({},e,{hachureGap:s+i}));return{type:"fillSketch",ops:this.zigzagLines(h,i,e)}}fillEllipse(t,e,s,i,h){const n=h.hachureGap<0?4*h.strokeWidth:h.hachureGap,a=h.zigzagOffset<0?n:h.zigzagOffset;h=Object.assign({},h,{hachureGap:n+a});const o=g(this.helper,t,e,s,i,h);return{type:"fillSketch",ops:this.zigzagLines(o,a,h)}}fillArc(t,e,s,i,h,n,a){return null}zigzagLines(t,e,s){let i=[];return t.forEach(t=>{const h=p(t),n=Math.round(h/(2*e));let a=t[0],o=t[1];a[0]>o[0]&&(a=t[1],o=t[0]);const r=Math.atan((o[1]-a[1])/(o[0]-a[0]));for(let t=0;t<n;t++){const h=2*t*e,n=2*(t+1)*e,o=Math.sqrt(2*Math.pow(e,2)),l=[a[0]+h*Math.cos(r),a[1]+h*Math.sin(r)],c=[a[0]+n*Math.cos(r),a[1]+n*Math.sin(r)],p=[l[0]+o*Math.cos(r+Math.PI/4),l[1]+o*Math.sin(r+Math.PI/4)];i=(i=i.concat(this.helper.doubleLineOps(l[0],l[1],p[0],p[1],s))).concat(this.helper.doubleLineOps(p[0],p[1],c[0],c[1],s))}}),i}}const k={};function P(t,e){let s=t.fillStyle||"hachure";if(!k[s])switch(s){case"zigzag":k[s]||(k[s]=new M(e));break;case"cross-hatch":k[s]||(k[s]=new x(e));break;case"dots":k[s]||(k[s]=new _(e));break;case"starburst":k[s]||(k[s]=new m(e));break;case"dashed":k[s]||(k[s]=new b(e));break;case"zigzag-line":k[s]||(k[s]=new w(e));break;case"hachure":default:k[s="hachure"]||(k[s]=new y(e))}return k[s]}const v={randOffset:function(t,e){return W(t,e)},randOffsetWithRange:function(t,e,s){return N(t,e,s)},ellipse:T,doubleLineOps:function(t,e,s,i,h){return R(t,e,s,i,h)}};function S(t,e,s,i,h){return{type:"path",ops:R(t,e,s,i,h)}}function A(t,e,s){const i=(t||[]).length;if(i>2){let h=[];for(let e=0;e<i-1;e++)h=h.concat(R(t[e][0],t[e][1],t[e+1][0],t[e+1][1],s));return e&&(h=h.concat(R(t[i-1][0],t[i-1][1],t[0][0],t[0][1],s))),{type:"path",ops:h}}return 2===i?S(t[0][0],t[0][1],t[1][0],t[1][1],s):{type:"path",ops:[]}}function E(t,e,s,i,h){return function(t,e){return A(t,!0,e)}([[t,e],[t+s,e],[t+s,e+i],[t,e+i]],h)}function O(t,e){const s=D(t,1*(1+.2*e.roughness),e),i=D(t,1.5*(1+.22*e.roughness),e);return{type:"path",ops:s.concat(i)}}function T(t,e,s,i,h){const n=2*Math.PI/h.curveStepCount;let a=Math.abs(s/2),o=Math.abs(i/2);const r=$(n,t,e,a+=W(.05*a,h),o+=W(.05*o,h),1,n*N(.1,N(.4,1,h),h),h),l=$(n,t,e,a,o,1.5,0,h);return{type:"path",ops:r.concat(l)}}function C(t,e,s,i,h,n,a,o,r){const l=t,c=e;let p=Math.abs(s/2),u=Math.abs(i/2);p+=W(.01*p,r),u+=W(.01*u,r);let f=h,d=n;for(;f<0;)f+=2*Math.PI,d+=2*Math.PI;d-f>2*Math.PI&&(f=0,d=2*Math.PI);const g=2*Math.PI/r.curveStepCount,y=Math.min(g/2,(d-f)/2),M=G(y,l,c,p,u,f,d,1,r),x=G(y,l,c,p,u,f,d,1.5,r);let _=M.concat(x);return a&&(o?_=(_=_.concat(R(l,c,l+p*Math.cos(f),c+u*Math.sin(f),r))).concat(R(l,c,l+p*Math.cos(d),c+u*Math.sin(d),r)):(_.push({op:"lineTo",data:[l,c]}),_.push({op:"lineTo",data:[l+p*Math.cos(f),c+u*Math.sin(f)]}))),{type:"path",ops:_}}function z(t,e){const s=[];if(t.length){const i=e.maxRandomnessOffset||0,h=t.length;if(h>2){s.push({op:"move",data:[t[0][0]+W(i,e),t[0][1]+W(i,e)]});for(let n=1;n<h;n++)s.push({op:"lineTo",data:[t[n][0]+W(i,e),t[n][1]+W(i,e)]})}}return{type:"fillPath",ops:s}}function L(t,e){return P(e,v).fillPolygon(t,e)}function N(t,e,s){return s.roughness*(Math.random()*(e-t)+t)}function W(t,e){return N(-t,t,e)}function R(t,e,s,i,h){const n=I(t,e,s,i,h,!0,!1),a=I(t,e,s,i,h,!0,!0);return n.concat(a)}function I(t,e,s,i,h,n,a){const o=Math.pow(t-s,2)+Math.pow(e-i,2);let r=h.maxRandomnessOffset||0;r*r*100>o&&(r=Math.sqrt(o)/10);const l=r/2,c=.2+.2*Math.random();let p=h.bowing*h.maxRandomnessOffset*(i-e)/200,u=h.bowing*h.maxRandomnessOffset*(t-s)/200;p=W(p,h),u=W(u,h);const f=[],d=()=>W(l,h),g=()=>W(r,h);return n&&(a?f.push({op:"move",data:[t+d(),e+d()]}):f.push({op:"move",data:[t+W(r,h),e+W(r,h)]})),a?f.push({op:"bcurveTo",data:[p+t+(s-t)*c+d(),u+e+(i-e)*c+d(),p+t+2*(s-t)*c+d(),u+e+2*(i-e)*c+d(),s+d(),i+d()]}):f.push({op:"bcurveTo",data:[p+t+(s-t)*c+g(),u+e+(i-e)*c+g(),p+t+2*(s-t)*c+g(),u+e+2*(i-e)*c+g(),s+g(),i+g()]}),f}function D(t,e,s){const i=[];i.push([t[0][0]+W(e,s),t[0][1]+W(e,s)]),i.push([t[0][0]+W(e,s),t[0][1]+W(e,s)]);for(let h=1;h<t.length;h++)i.push([t[h][0]+W(e,s),t[h][1]+W(e,s)]),h===t.length-1&&i.push([t[h][0]+W(e,s),t[h][1]+W(e,s)]);return q(i,null,s)}function q(t,e,s){const i=t.length;let h=[];if(i>3){const n=[],a=1-s.curveTightness;h.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<i;e++){const s=t[e];n[0]=[s[0],s[1]],n[1]=[s[0]+(a*t[e+1][0]-a*t[e-1][0])/6,s[1]+(a*t[e+1][1]-a*t[e-1][1])/6],n[2]=[t[e+1][0]+(a*t[e][0]-a*t[e+2][0])/6,t[e+1][1]+(a*t[e][1]-a*t[e+2][1])/6],n[3]=[t[e+1][0],t[e+1][1]],h.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]]})}if(e&&2===e.length){const t=s.maxRandomnessOffset;h.push({op:"lineTo",data:[e[0]+W(t,s),e[1]+W(t,s)]})}}else 3===i?(h.push({op:"move",data:[t[1][0],t[1][1]]}),h.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===i&&(h=h.concat(R(t[0][0],t[0][1],t[1][0],t[1][1],s)));return h}function $(t,e,s,i,h,n,a,o){const r=W(.5,o)-Math.PI/2,l=[];l.push([W(n,o)+e+.9*i*Math.cos(r-t),W(n,o)+s+.9*h*Math.sin(r-t)]);for(let a=r;a<2*Math.PI+r-.01;a+=t)l.push([W(n,o)+e+i*Math.cos(a),W(n,o)+s+h*Math.sin(a)]);return l.push([W(n,o)+e+i*Math.cos(r+2*Math.PI+.5*a),W(n,o)+s+h*Math.sin(r+2*Math.PI+.5*a)]),l.push([W(n,o)+e+.98*i*Math.cos(r+a),W(n,o)+s+.98*h*Math.sin(r+a)]),l.push([W(n,o)+e+.9*i*Math.cos(r+.5*a),W(n,o)+s+.9*h*Math.sin(r+.5*a)]),q(l,null,o)}function G(t,e,s,i,h,n,a,o,r){const l=n+W(.1,r),c=[];c.push([W(o,r)+e+.9*i*Math.cos(l-t),W(o,r)+s+.9*h*Math.sin(l-t)]);for(let n=l;n<=a;n+=t)c.push([W(o,r)+e+i*Math.cos(n),W(o,r)+s+h*Math.sin(n)]);return c.push([e+i*Math.cos(a),s+h*Math.sin(a)]),c.push([e+i*Math.cos(a),s+h*Math.sin(a)]),q(c,null,r)}function B(t,e,s,i,h,n,a,o){const r=[],l=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.5];let c=[0,0];for(let p=0;p<2;p++)0===p?r.push({op:"move",data:[a.x,a.y]}):r.push({op:"move",data:[a.x+W(l[0],o),a.y+W(l[0],o)]}),c=[h+W(l[p],o),n+W(l[p],o)],r.push({op:"bcurveTo",data:[t+W(l[p],o),e+W(l[p],o),s+W(l[p],o),i+W(l[p],o),c[0],c[1]]});return a.setPosition(c[0],c[1]),r}function X(t,e,s,i){let h=[];switch(e.key){case"M":case"m":{const s="m"===e.key;if(e.data.length>=2){let n=+e.data[0],a=+e.data[1];s&&(n+=t.x,a+=t.y);const o=1*(i.maxRandomnessOffset||0);n+=W(o,i),a+=W(o,i),t.setPosition(n,a),h.push({op:"move",data:[n,a]})}break}case"L":case"l":{const s="l"===e.key;if(e.data.length>=2){let n=+e.data[0],a=+e.data[1];s&&(n+=t.x,a+=t.y),h=h.concat(R(t.x,t.y,n,a,i)),t.setPosition(n,a)}break}case"H":case"h":{const s="h"===e.key;if(e.data.length){let n=+e.data[0];s&&(n+=t.x),h=h.concat(R(t.x,t.y,n,t.y,i)),t.setPosition(n,t.y)}break}case"V":case"v":{const s="v"===e.key;if(e.data.length){let n=+e.data[0];s&&(n+=t.y),h=h.concat(R(t.x,t.y,t.x,n,i)),t.setPosition(t.x,n)}break}case"Z":case"z":t.first&&(h=h.concat(R(t.x,t.y,t.first[0],t.first[1],i)),t.setPosition(t.first[0],t.first[1]),t.first=null);break;case"C":case"c":{const s="c"===e.key;if(e.data.length>=6){let n=+e.data[0],a=+e.data[1],o=+e.data[2],r=+e.data[3],l=+e.data[4],c=+e.data[5];s&&(n+=t.x,o+=t.x,l+=t.x,a+=t.y,r+=t.y,c+=t.y);const p=B(n,a,o,r,l,c,t,i);h=h.concat(p),t.bezierReflectionPoint=[l+(l-o),c+(c-r)]}break}case"S":case"s":{const n="s"===e.key;if(e.data.length>=4){let a=+e.data[0],o=+e.data[1],r=+e.data[2],l=+e.data[3];n&&(a+=t.x,r+=t.x,o+=t.y,l+=t.y);let c=a,p=o;const u=s?s.key:"";let f=null;"c"!==u&&"C"!==u&&"s"!==u&&"S"!==u||(f=t.bezierReflectionPoint),f&&(c=f[0],p=f[1]);const d=B(c,p,a,o,r,l,t,i);h=h.concat(d),t.bezierReflectionPoint=[r+(r-a),l+(l-o)]}break}case"Q":case"q":{const s="q"===e.key;if(e.data.length>=4){let n=+e.data[0],a=+e.data[1],o=+e.data[2],r=+e.data[3];s&&(n+=t.x,o+=t.x,a+=t.y,r+=t.y);const l=1*(1+.2*i.roughness),c=1.5*(1+.22*i.roughness);h.push({op:"move",data:[t.x+W(l,i),t.y+W(l,i)]});let p=[o+W(l,i),r+W(l,i)];h.push({op:"qcurveTo",data:[n+W(l,i),a+W(l,i),p[0],p[1]]}),h.push({op:"move",data:[t.x+W(c,i),t.y+W(c,i)]}),p=[o+W(c,i),r+W(c,i)],h.push({op:"qcurveTo",data:[n+W(c,i),a+W(c,i),p[0],p[1]]}),t.setPosition(p[0],p[1]),t.quadReflectionPoint=[o+(o-n),r+(r-a)]}break}case"T":case"t":{const n="t"===e.key;if(e.data.length>=2){let a=+e.data[0],o=+e.data[1];n&&(a+=t.x,o+=t.y);let r=a,l=o;const c=s?s.key:"";let p=null;"q"!==c&&"Q"!==c&&"t"!==c&&"T"!==c||(p=t.quadReflectionPoint),p&&(r=p[0],l=p[1]);const u=1*(1+.2*i.roughness),f=1.5*(1+.22*i.roughness);h.push({op:"move",data:[t.x+W(u,i),t.y+W(u,i)]});let d=[a+W(u,i),o+W(u,i)];h.push({op:"qcurveTo",data:[r+W(u,i),l+W(u,i),d[0],d[1]]}),h.push({op:"move",data:[t.x+W(f,i),t.y+W(f,i)]}),d=[a+W(f,i),o+W(f,i)],h.push({op:"qcurveTo",data:[r+W(f,i),l+W(f,i),d[0],d[1]]}),t.setPosition(d[0],d[1]),t.quadReflectionPoint=[a+(a-r),o+(o-l)]}break}case"A":case"a":{const s="a"===e.key;if(e.data.length>=7){const n=+e.data[0],o=+e.data[1],r=+e.data[2],l=+e.data[3],c=+e.data[4];let p=+e.data[5],u=+e.data[6];if(s&&(p+=t.x,u+=t.y),p===t.x&&u===t.y)break;if(0===n||0===o)h=h.concat(R(t.x,t.y,p,u,i)),t.setPosition(p,u);else for(let e=0;e<1;e++){const e=new a([t.x,t.y],[p,u],[n,o],r,!!l,!!c);let s=e.getNextSegment();for(;s;){const n=B(s.cp1[0],s.cp1[1],s.cp2[0],s.cp2[1],s.to[0],s.to[1],t,i);h=h.concat(n),s=e.getNextSegment()}}}break}}return h}class U extends e{line(t,e,s,i,h){const n=this._options(h);return this._drawable("line",[S(t,e,s,i,n)],n)}rectangle(t,e,s,i,h){const n=this._options(h),a=[];if(n.fill){const h=[[t,e],[t+s,e],[t+s,e+i],[t,e+i]];"solid"===n.fillStyle?a.push(z(h,n)):a.push(L(h,n))}return a.push(E(t,e,s,i,n)),this._drawable("rectangle",a,n)}ellipse(t,e,s,i,h){const n=this._options(h),a=[];if(n.fill)if("solid"===n.fillStyle){const h=T(t,e,s,i,n);h.type="fillPath",a.push(h)}else a.push(function(t,e,s,i,h){return P(h,v).fillEllipse(t,e,s,i,h)}(t,e,s,i,n));return a.push(T(t,e,s,i,n)),this._drawable("ellipse",a,n)}circle(t,e,s,i){const h=this.ellipse(t,e,s,s,i);return h.shape="circle",h}linearPath(t,e){const s=this._options(e);return this._drawable("linearPath",[A(t,!1,s)],s)}arc(t,e,s,i,h,n,a=!1,o){const r=this._options(o),l=[];if(a&&r.fill)if("solid"===r.fillStyle){const a=C(t,e,s,i,h,n,!0,!1,r);a.type="fillPath",l.push(a)}else l.push(function(t,e,s,i,h,n,a){const o=P(a,v).fillArc(t,e,s,i,h,n,a);if(o)return o;const r=t,l=e;let c=Math.abs(s/2),p=Math.abs(i/2);c+=W(.01*c,a),p+=W(.01*p,a);let u=h,f=n;for(;u<0;)u+=2*Math.PI,f+=2*Math.PI;f-u>2*Math.PI&&(u=0,f=2*Math.PI);const d=(f-u)/a.curveStepCount,g=[];for(let t=u;t<=f;t+=d)g.push([r+c*Math.cos(t),l+p*Math.sin(t)]);return g.push([r+c*Math.cos(f),l+p*Math.sin(f)]),g.push([r,l]),L(g,a)}(t,e,s,i,h,n,r));return l.push(C(t,e,s,i,h,n,a,!0,r)),this._drawable("arc",l,r)}curve(t,e){const s=this._options(e);return this._drawable("curve",[O(t,s)],s)}polygon(t,e){const s=this._options(e),i=[];if(s.fill)if("solid"===s.fillStyle)i.push(z(t,s));else{const e=this.computePolygonSize(t),h=L([[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],s);h.type="path2Dpattern",h.size=e,h.path=this.polygonPath(t),i.push(h)}return i.push(A(t,!0,s)),this._drawable("polygon",i,s)}path(t,e){const s=this._options(e),i=[];if(!t)return this._drawable("path",i,s);if(s.fill)if("solid"===s.fillStyle){const e={type:"path2Dfill",path:t,ops:[]};i.push(e)}else{const e=this.computePathSize(t),h=L([[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],s);h.type="path2Dpattern",h.size=e,h.path=t,i.push(h)}return i.push(function(t,e){t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let s=new n(t);if(e.simplification){const t=new o(s.linearPoints,s.closed).fit(e.simplification);s=new n(t)}let i=[];const h=s.segments||[];for(let t=0;t<h.length;t++){const n=X(s,h[t],t>0?h[t-1]:null,e);n&&n.length&&(i=i.concat(n))}return{type:"path",ops:i}}(t,s)),this._drawable("path",i,s)}}const V="undefined"!=typeof document;class j{constructor(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),i=this.ctx;for(const t of e)switch(t.type){case"path":i.save(),i.strokeStyle=s.stroke,i.lineWidth=s.strokeWidth,this._drawToContext(i,t),i.restore();break;case"fillPath":i.save(),i.fillStyle=s.fill||"",this._drawToContext(i,t),i.restore();break;case"fillSketch":this.fillSketch(i,t,s);break;case"path2Dfill":{this.ctx.save(),this.ctx.fillStyle=s.fill||"";const e=new Path2D(t.path);this.ctx.fill(e),this.ctx.restore();break}case"path2Dpattern":{const e=this.canvas.ownerDocument||V&&document;if(e){const i=t.size,h=e.createElement("canvas"),n=h.getContext("2d"),a=this.computeBBox(t.path);a&&(a.width||a.height)?(h.width=this.canvas.width,h.height=this.canvas.height,n.translate(a.x||0,a.y||0)):(h.width=i[0],h.height=i[1]),this.fillSketch(n,t,s),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(h,"repeat");const o=new Path2D(t.path);this.ctx.fill(o),this.ctx.restore()}else console.error("Cannot render path2Dpattern. No defs/document defined.");break}}}computeBBox(t){if(V)try{const e="http://www.w3.org/2000/svg",s=document.createElementNS(e,"svg");s.setAttribute("width","0"),s.setAttribute("height","0");const i=self.document.createElementNS(e,"path");i.setAttribute("d",t),s.appendChild(i),document.body.appendChild(s);const h=i.getBBox();return document.body.removeChild(s),h}catch(t){}return null}fillSketch(t,e,s){let i=s.fillWeight;i<0&&(i=s.strokeWidth/2),t.save(),t.strokeStyle=s.fill||"",t.lineWidth=i,this._drawToContext(t,e),t.restore()}_drawToContext(t,e){t.beginPath();for(const s of e.ops){const e=s.data;switch(s.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"qcurveTo":t.quadraticCurveTo(e[0],e[1],e[2],e[3]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill():t.stroke()}}class F extends j{constructor(t,e){super(t),this.gen=new U(e||null,this.canvas)}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,s,i,h){const n=this.gen.line(t,e,s,i,h);return this.draw(n),n}rectangle(t,e,s,i,h){const n=this.gen.rectangle(t,e,s,i,h);return this.draw(n),n}ellipse(t,e,s,i,h){const n=this.gen.ellipse(t,e,s,i,h);return this.draw(n),n}circle(t,e,s,i){const h=this.gen.circle(t,e,s,i);return this.draw(h),h}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s),s}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s),s}arc(t,e,s,i,h,n,a=!1,o){const r=this.gen.arc(t,e,s,i,h,n,a,o);return this.draw(r),r}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s),s}path(t,e){const s=this.gen.path(t,e);return this.draw(s),s}}const Q="undefined"!=typeof document;class Z{constructor(t){this.svg=t}get defs(){const t=this.svg.ownerDocument||Q&&document;if(t&&!this._defs){const e=t.createElementNS("http://www.w3.org/2000/svg","defs");this.svg.firstChild?this.svg.insertBefore(e,this.svg.firstChild):this.svg.appendChild(e),this._defs=e}return this._defs||null}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,h=i.createElementNS("http://www.w3.org/2000/svg","g");for(const t of e){let e=null;switch(t.type){case"path":(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(t)),e.style.stroke=s.stroke,e.style.strokeWidth=s.strokeWidth+"",e.style.fill="none";break;case"fillPath":(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(t)),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=s.fill||null;break;case"fillSketch":e=this.fillSketch(i,t,s);break;case"path2Dfill":(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",t.path||""),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=s.fill||null;break;case"path2Dpattern":if(this.defs){const h=t.size,n=i.createElementNS("http://www.w3.org/2000/svg","pattern"),a=`rough-${Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER||999999))}`;n.setAttribute("id",a),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("height","1"),n.setAttribute("viewBox",`0 0 ${Math.round(h[0])} ${Math.round(h[1])}`),n.setAttribute("patternUnits","objectBoundingBox");const o=this.fillSketch(i,t,s);n.appendChild(o),this.defs.appendChild(n),(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",t.path||""),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=`url(#${a})`}else console.error("Cannot render path2Dpattern. No defs/document defined.")}e&&h.appendChild(e)}return h}fillSketch(t,e,s){let i=s.fillWeight;i<0&&(i=s.strokeWidth/2);const h=t.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",this.opsToPath(e)),h.style.stroke=s.fill||null,h.style.strokeWidth=i+"",h.style.fill="none",h}}class H extends Z{constructor(t,e){super(t),this.gen=new U(e||null,this.svg)}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t){return this.gen.opsToPath(t)}line(t,e,s,i,h){const n=this.gen.line(t,e,s,i,h);return this.draw(n)}rectangle(t,e,s,i,h){const n=this.gen.rectangle(t,e,s,i,h);return this.draw(n)}ellipse(t,e,s,i,h){const n=this.gen.ellipse(t,e,s,i,h);return this.draw(n)}circle(t,e,s,i){const h=this.gen.circle(t,e,s,i);return this.draw(h)}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s)}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s)}arc(t,e,s,i,h,n,a=!1,o){const r=this.gen.arc(t,e,s,i,h,n,a,o);return this.draw(r)}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s)}path(t,e){const s=this.gen.path(t,e);return this.draw(s)}}return{canvas:(t,e)=>new F(t,e),svg:(t,e)=>new H(t,e),generator:(t,e)=>new U(t,e)}});
##############################################
/src/demo/rough/node_modules/roughjs/dist/rough.js:1:var rough=function(){"use strict";const t="undefined"!=typeof self;class e{constructor(t,e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1},this.config=t||{},this.surface=e,this.config.options&&(this.defaultOptions=this._options(this.config.options))}_options(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_drawable(t,e,s){return{shape:t,sets:e||[],options:s||this.defaultOptions}}getCanvasSize(){const t=t=>t&&"object"==typeof t&&t.baseVal&&t.baseVal.value?t.baseVal.value:t||100;return this.surface?[t(this.surface.width),t(this.surface.height)]:[100,100]}computePolygonSize(t){if(t.length){let e=t[0][0],s=t[0][0],i=t[0][1],h=t[0][1];for(let n=1;n<t.length;n++)e=Math.min(e,t[n][0]),s=Math.max(s,t[n][0]),i=Math.min(i,t[n][1]),h=Math.max(h,t[n][1]);return[s-e,h-i]}return[0,0]}polygonPath(t){let e="";if(t.length){e=`M${t[0][0]},${t[0][1]}`;for(let s=1;s<t.length;s++)e=`${e} L${t[s][0]},${t[s][1]}`}return e}computePathSize(e){let s=[0,0];if(t&&self.document)try{const t="http://www.w3.org/2000/svg",i=self.document.createElementNS(t,"svg");i.setAttribute("width","0"),i.setAttribute("height","0");const h=self.document.createElementNS(t,"path");h.setAttribute("d",e),i.appendChild(h),self.document.body.appendChild(i);const n=h.getBBox();n&&(s[0]=n.width||0,s[1]=n.height||0),self.document.body.removeChild(i)}catch(t){}const i=this.getCanvasSize();return s[0]*s[1]||(s=i),s}toPaths(t){const e=t.sets||[],s=t.options||this.defaultOptions,i=[];for(const t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:s.stroke,strokeWidth:s.strokeWidth,fill:"none"};break;case"fillPath":e={d:this.opsToPath(t),stroke:"none",strokeWidth:0,fill:s.fill||"none"};break;case"fillSketch":e=this.fillSketch(t,s);break;case"path2Dfill":e={d:t.path||"",stroke:"none",strokeWidth:0,fill:s.fill||"none"};break;case"path2Dpattern":{const i=t.size,h={x:0,y:0,width:1,height:1,viewBox:`0 0 ${Math.round(i[0])} ${Math.round(i[1])}`,patternUnits:"objectBoundingBox",path:this.fillSketch(t,s)};e={d:t.path,stroke:"none",strokeWidth:0,pattern:h};break}}e&&i.push(e)}return i}fillSketch(t,e){let s=e.fillWeight;return s<0&&(s=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||"none",strokeWidth:s,fill:"none"}}opsToPath(t){let e="";for(const s of t.ops){const t=s.data;switch(s.op){case"move":e+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":e+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"qcurveTo":e+=`Q${t[0]} ${t[1]}, ${t[2]} ${t[3]} `;break;case"lineTo":e+=`L${t[0]} ${t[1]} `}}return e.trim()}}function s(t,e){return t.type===e}const i={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0};class h{constructor(t){this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.parseData(t),this.processPoints()}tokenize(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:this.COMMAND,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return console.error("Unrecognized segment command: "+t),[];e[e.length]={type:this.NUMBER,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:this.EOD,text:""},e}parseData(t){const e=this.tokenize(t);let h=0,n=e[h],a="BOD";for(this.segments=new Array;!s(n,this.EOD);){let o;const r=new Array;if("BOD"===a){if("M"!==n.text&&"m"!==n.text)return void this.parseData("M0,0"+t);h++,o=i[n.text],a=n.text}else s(n,this.NUMBER)?o=i[a]:(h++,o=i[n.text],a=n.text);if(h+o<e.length){for(let t=h;t<h+o;t++){const i=e[t];if(!s(i,this.NUMBER))return void console.error("Parameter type is not a number: "+a+","+i.text);r[r.length]=+i.text}if("number"!=typeof i[a])return void console.error("Unsupported segment type: "+a);{const t={key:a,data:r};this.segments.push(t),n=e[h+=o],"M"===a&&(a="L"),"m"===a&&(a="l")}}else console.error("Path data ended before all parameters were found")}}get closed(){if(void 0===this._closed){this._closed=!1;for(const t of this.segments)"z"===t.key.toLowerCase()&&(this._closed=!0)}return this._closed}processPoints(){let t=null,e=[0,0];for(let s=0;s<this.segments.length;s++){const i=this.segments[s];switch(i.key){case"M":case"L":case"T":i.point=[i.data[0],i.data[1]];break;case"m":case"l":case"t":i.point=[i.data[0]+e[0],i.data[1]+e[1]];break;case"H":i.point=[i.data[0],e[1]];break;case"h":i.point=[i.data[0]+e[0],e[1]];break;case"V":i.point=[e[0],i.data[0]];break;case"v":i.point=[e[0],i.data[0]+e[1]];break;case"z":case"Z":t&&(i.point=[t[0],t[1]]);break;case"C":i.point=[i.data[4],i.data[5]];break;case"c":i.point=[i.data[4]+e[0],i.data[5]+e[1]];break;case"S":i.point=[i.data[2],i.data[3]];break;case"s":i.point=[i.data[2]+e[0],i.data[3]+e[1]];break;case"Q":i.point=[i.data[2],i.data[3]];break;case"q":i.point=[i.data[2]+e[0],i.data[3]+e[1]];break;case"A":i.point=[i.data[5],i.data[6]];break;case"a":i.point=[i.data[5]+e[0],i.data[6]+e[1]]}"m"!==i.key&&"M"!==i.key||(t=null),i.point&&(e=i.point,t||(t=i.point)),"z"!==i.key&&"Z"!==i.key||(t=null)}}}class n{constructor(t){this._position=[0,0],this._first=null,this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this.parsed=new h(t)}get segments(){return this.parsed.segments}get closed(){return this.parsed.closed}get linearPoints(){if(!this._linearPoints){const t=[];let e=[];for(const s of this.parsed.segments){const i=s.key.toLowerCase();("m"!==i&&"z"!==i||(e.length&&(t.push(e),e=[]),"z"!==i))&&(s.point&&e.push(s.point))}e.length&&(t.push(e),e=[]),this._linearPoints=t}return this._linearPoints}get first(){return this._first}set first(t){this._first=t}setPosition(t,e){this._position=[t,e],this._first||(this._first=[t,e])}get position(){return this._position}get x(){return this._position[0]}get y(){return this._position[1]}}class a{constructor(t,e,s,i,h,n){if(this._segIndex=0,this._numSegs=0,this._rx=0,this._ry=0,this._sinPhi=0,this._cosPhi=0,this._C=[0,0],this._theta=0,this._delta=0,this._T=0,this._from=t,t[0]===e[0]&&t[1]===e[1])return;const a=Math.PI/180;this._rx=Math.abs(s[0]),this._ry=Math.abs(s[1]),this._sinPhi=Math.sin(i*a),this._cosPhi=Math.cos(i*a);const o=this._cosPhi*(t[0]-e[0])/2+this._sinPhi*(t[1]-e[1])/2,r=-this._sinPhi*(t[0]-e[0])/2+this._cosPhi*(t[1]-e[1])/2;let l=0;const c=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*r*r-this._ry*this._ry*o*o;if(c<0){const t=Math.sqrt(1-c/(this._rx*this._rx*this._ry*this._ry));this._rx=this._rx*t,this._ry=this._ry*t,l=0}else l=(h===n?-1:1)*Math.sqrt(c/(this._rx*this._rx*r*r+this._ry*this._ry*o*o));const p=l*this._rx*r/this._ry,u=-l*this._ry*o/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*p-this._sinPhi*u+(t[0]+e[0])/2,this._C[1]=this._sinPhi*p+this._cosPhi*u+(t[1]+e[1])/2,this._theta=this.calculateVectorAngle(1,0,(o-p)/this._rx,(r-u)/this._ry);let f=this.calculateVectorAngle((o-p)/this._rx,(r-u)/this._ry,(-o-p)/this._rx,(-r-u)/this._ry);!n&&f>0?f-=2*Math.PI:n&&f<0&&(f+=2*Math.PI),this._numSegs=Math.ceil(Math.abs(f/(Math.PI/2))),this._delta=f/this._numSegs,this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/2)}getNextSegment(){if(this._segIndex===this._numSegs)return null;const t=Math.cos(this._theta),e=Math.sin(this._theta),s=this._theta+this._delta,i=Math.cos(s),h=Math.sin(s),n=[this._cosPhi*this._rx*i-this._sinPhi*this._ry*h+this._C[0],this._sinPhi*this._rx*i+this._cosPhi*this._ry*h+this._C[1]],a=[this._from[0]+this._T*(-this._cosPhi*this._rx*e-this._sinPhi*this._ry*t),this._from[1]+this._T*(-this._sinPhi*this._rx*e+this._cosPhi*this._ry*t)],o=[n[0]+this._T*(this._cosPhi*this._rx*h+this._sinPhi*this._ry*i),n[1]+this._T*(this._sinPhi*this._rx*h-this._cosPhi*this._ry*i)];return this._theta=s,this._from=[n[0],n[1]],this._segIndex++,{cp1:a,cp2:o,to:n}}calculateVectorAngle(t,e,s,i){const h=Math.atan2(e,t),n=Math.atan2(i,s);return n>=h?n-h:2*Math.PI-(h-n)}}class o{constructor(t,e){this.sets=t,this.closed=e}fit(t){const e=[];for(const s of this.sets){const i=s.length;let h=Math.floor(t*i);if(h<5){if(i<=5)continue;h=5}e.push(this.reduce(s,h))}let s="";for(const t of e){for(let e=0;e<t.length;e++){const i=t[e];s+=0===e?"M"+i[0]+","+i[1]:"L"+i[0]+","+i[1]}this.closed&&(s+="z ")}return s}distance(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}reduce(t,e){if(t.length<=e)return t;const s=t.slice(0);for(;s.length>e;){let t=-1,e=-1;for(let i=1;i<s.length-1;i++){const h=this.distance(s[i-1],s[i]),n=this.distance(s[i],s[i+1]),a=this.distance(s[i-1],s[i+1]),o=(h+n+a)/2,r=Math.sqrt(o*(o-h)*(o-n)*(o-a));(t<0||r<t)&&(t=r,e=i)}if(!(e>0))break;s.splice(e,1)}return s}}class r{constructor(t,e){this.xi=Number.MAX_VALUE,this.yi=Number.MAX_VALUE,this.px1=t[0],this.py1=t[1],this.px2=e[0],this.py2=e[1],this.a=this.py2-this.py1,this.b=this.px1-this.px2,this.c=this.px2*this.py1-this.px1*this.py2,this._undefined=0===this.a&&0===this.b&&0===this.c}isUndefined(){return this._undefined}intersects(t){if(this.isUndefined()||t.isUndefined())return!1;let e=Number.MAX_VALUE,s=Number.MAX_VALUE,i=0,h=0;const n=this.a,a=this.b,o=this.c;return Math.abs(a)>1e-5&&(e=-n/a,i=-o/a),Math.abs(t.b)>1e-5&&(s=-t.a/t.b,h=-t.c/t.b),e===Number.MAX_VALUE?s===Number.MAX_VALUE?-o/n==-t.c/t.a&&(this.py1>=Math.min(t.py1,t.py2)&&this.py1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.py2>=Math.min(t.py1,t.py2)&&this.py2<=Math.max(t.py1,t.py2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=this.px1,this.yi=s*this.xi+h,!((this.py1-this.yi)*(this.yi-this.py2)<-1e-5||(t.py1-this.yi)*(this.yi-t.py2)<-1e-5)&&(!(Math.abs(t.a)<1e-5)||!((t.px1-this.xi)*(this.xi-t.px2)<-1e-5))):s===Number.MAX_VALUE?(this.xi=t.px1,this.yi=e*this.xi+i,!((t.py1-this.yi)*(this.yi-t.py2)<-1e-5||(this.py1-this.yi)*(this.yi-this.py2)<-1e-5)&&(!(Math.abs(n)<1e-5)||!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5))):e===s?i===h&&(this.px1>=Math.min(t.px1,t.px2)&&this.px1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.px2>=Math.min(t.px1,t.px2)&&this.px2<=Math.max(t.px1,t.px2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=(h-i)/(e-s),this.yi=e*this.xi+i,!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5||(t.px1-this.xi)*(this.xi-t.px2)<-1e-5))}}function l(t,e){const s=t[1][1]-t[0][1],i=t[0][0]-t[1][0],h=s*t[0][0]+i*t[0][1],n=e[1][1]-e[0][1],a=e[0][0]-e[1][0],o=n*e[0][0]+a*e[0][1],r=s*a-n*i;return r?[Math.round((a*h-i*o)/r),Math.round((s*o-n*h)/r)]:null}class c{constructor(t,e,s,i,h,n,a,o){this.deltaX=0,this.hGap=0,this.top=t,this.bottom=e,this.left=s,this.right=i,this.gap=h,this.sinAngle=n,this.tanAngle=o,Math.abs(n)<1e-4?this.pos=s+h:Math.abs(n)>.9999?this.pos=t+h:(this.deltaX=(e-t)*Math.abs(o),this.pos=s-Math.abs(this.deltaX),this.hGap=Math.abs(h/a),this.sLeft=new r([s,e],[s,t]),this.sRight=new r([i,e],[i,t]))}nextLine(){if(Math.abs(this.sinAngle)<1e-4){if(this.pos<this.right){const t=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,t}}else if(Math.abs(this.sinAngle)>.9999){if(this.pos<this.bottom){const t=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,t}}else{let t=this.pos-this.deltaX/2,e=this.pos+this.deltaX/2,s=this.bottom,i=this.top;if(this.pos<this.right+this.deltaX){for(;t<this.left&&e<this.left||t>this.right&&e>this.right;)if(this.pos+=this.hGap,t=this.pos-this.deltaX/2,e=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;const h=new r([t,s],[e,i]);this.sLeft&&h.intersects(this.sLeft)&&(t=h.xi,s=h.yi),this.sRight&&h.intersects(this.sRight)&&(e=h.xi,i=h.yi),this.tanAngle>0&&(t=this.right-(t-this.left),e=this.right-(e-this.left));const n=[t,s,e,i];return this.pos+=this.hGap,n}}return null}}function p(t){const e=t[0],s=t[1];return Math.sqrt(Math.pow(e[0]-s[0],2)+Math.pow(e[1]-s[1],2))}function u(t,e){const s=[],i=new r([t[0],t[1]],[t[2],t[3]]);for(let t=0;t<e.length;t++){const h=new r(e[t],e[(t+1)%e.length]);i.intersects(h)&&s.push([i.xi,i.yi])}return s}function f(t,e,s,i,h,n,a){return[-s*n-i*h+s+n*t+h*e,a*(s*h-i*n)+i+-a*h*t+a*n*e]}function d(t,e){const s=[];if(t&&t.length){let i=t[0][0],h=t[0][0],n=t[0][1],a=t[0][1];for(let e=1;e<t.length;e++)i=Math.min(i,t[e][0]),h=Math.max(h,t[e][0]),n=Math.min(n,t[e][1]),a=Math.max(a,t[e][1]);const o=e.hachureAngle;let r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.max(r,.1);const l=o%180*(Math.PI/180),p=Math.cos(l),f=Math.sin(l),d=Math.tan(l),g=new c(n-1,a+1,i-1,h+1,r,f,p,d);let y;for(;null!=(y=g.nextLine());){const e=u(y,t);for(let t=0;t<e.length;t++)if(t<e.length-1){const i=e[t],h=e[t+1];s.push([i,h])}}}return s}function g(t,e,s,i,h,n){const a=[];let o=Math.abs(i/2),r=Math.abs(h/2);o+=t.randOffset(.05*o,n),r+=t.randOffset(.05*r,n);const l=n.hachureAngle;let c=n.hachureGap;c<=0&&(c=4*n.strokeWidth);let p=n.fillWeight;p<0&&(p=n.strokeWidth/2);const u=l%180*(Math.PI/180),d=Math.tan(u),g=r/o,y=Math.sqrt(g*d*g*d+1),M=g*d/y,x=1/y,_=c/(o*r/Math.sqrt(r*x*(r*x)+o*M*(o*M))/o);let b=Math.sqrt(o*o-(e-o+_)*(e-o+_));for(let t=e-o+_;t<e+o;t+=_){const i=f(t,s-(b=Math.sqrt(o*o-(e-t)*(e-t))),e,s,M,x,g),h=f(t,s+b,e,s,M,x,g);a.push([i,h])}return a}class y{constructor(t){this.helper=t}fillPolygon(t,e){return this._fillPolygon(t,e)}fillEllipse(t,e,s,i,h){return this._fillEllipse(t,e,s,i,h)}fillArc(t,e,s,i,h,n,a){return null}_fillPolygon(t,e,s=!1){const i=d(t,e);return{type:"fillSketch",ops:this.renderLines(i,e,s)}}_fillEllipse(t,e,s,i,h,n=!1){const a=g(this.helper,t,e,s,i,h);return{type:"fillSketch",ops:this.renderLines(a,h,n)}}renderLines(t,e,s){let i=[],h=null;for(const n of t)i=i.concat(this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],e)),s&&h&&(i=i.concat(this.helper.doubleLineOps(h[0],h[1],n[0][0],n[0][1],e))),h=n[1];return i}}class M extends y{fillPolygon(t,e){return this._fillPolygon(t,e,!0)}fillEllipse(t,e,s,i,h){return this._fillEllipse(t,e,s,i,h,!0)}}class x extends y{fillPolygon(t,e){const s=this._fillPolygon(t,e),i=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),h=this._fillPolygon(t,i);return s.ops=s.ops.concat(h.ops),s}fillEllipse(t,e,s,i,h){const n=this._fillEllipse(t,e,s,i,h),a=Object.assign({},h,{hachureAngle:h.hachureAngle+90}),o=this._fillEllipse(t,e,s,i,a);return n.ops=n.ops.concat(o.ops),n}}class _{constructor(t){this.helper=t}fillPolygon(t,e){const s=d(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0}));return this.dotsOnLines(s,e)}fillEllipse(t,e,s,i,h){h=Object.assign({},h,{curveStepCount:4,hachureAngle:0});const n=g(this.helper,t,e,s,i,h);return this.dotsOnLines(n,h)}fillArc(t,e,s,i,h,n,a){return null}dotsOnLines(t,e){let s=[],i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.max(i,.1);let h=e.fillWeight;h<0&&(h=e.strokeWidth/2);for(const n of t){const t=p(n)/i,a=Math.ceil(t)-1,o=Math.atan((n[1][1]-n[0][1])/(n[1][0]-n[0][0]));for(let t=0;t<a;t++){const a=i*(t+1),r=a*Math.sin(o),l=a*Math.cos(o),c=[n[0][0]-l,n[0][1]+r],p=this.helper.randOffsetWithRange(c[0]-i/4,c[0]+i/4,e),u=this.helper.randOffsetWithRange(c[1]-i/4,c[1]+i/4,e),f=this.helper.ellipse(p,u,h,h,e);s=s.concat(f.ops)}}return{type:"fillSketch",ops:s}}}class b{constructor(t){this.helper=t}fillPolygon(t,e){const s=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],i=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];t.forEach(t=>{s[0]=Math.min(s[0],t[0]),s[1]=Math.max(s[1],t[0]),i[0]=Math.min(i[0],t[1]),i[1]=Math.max(i[1],t[1])});const h=function(t){let e=0,s=0,i=0;for(let s=0;s<t.length;s++){const i=t[s],h=s===t.length-1?t[0]:t[s+1];e+=i[0]*h[1]-h[0]*i[1]}e/=2;for(let e=0;e<t.length;e++){const h=t[e],n=e===t.length-1?t[0]:t[e+1];s+=(h[0]+n[0])*(h[0]*n[1]-n[0]*h[1]),i+=(h[1]+n[1])*(h[0]*n[1]-n[0]*h[1])}return[s/(6*e),i/(6*e)]}(t),n=Math.max(Math.sqrt(Math.pow(h[0]-s[0],2)+Math.pow(h[1]-i[0],2)),Math.sqrt(Math.pow(h[0]-s[1],2)+Math.pow(h[1]-i[1],2))),a=e.hachureGap>0?e.hachureGap:4*e.strokeWidth,o=[];if(t.length>2)for(let e=0;e<t.length;e++)e===t.length-1?o.push([t[e],t[0]]):o.push([t[e],t[e+1]]);let r=[];const c=Math.max(1,Math.PI*n/a);for(let t=0;t<c;t++){const e=t*Math.PI/c,a=[h,[h[0]+n*Math.cos(e),h[1]+n*Math.sin(e)]];o.forEach(t=>{const e=l(t,a);e&&e[0]>=s[0]&&e[0]<=s[1]&&e[1]>=i[0]&&e[1]<=i[1]&&r.push(e)})}r=this.removeDuplocatePoints(r);const p=this.createLinesFromCenter(h,r);return{type:"fillSketch",ops:this.drawLines(p,e)}}fillEllipse(t,e,s,i,h){return this.fillArcSegment(t,e,s,i,0,2*Math.PI,h)}fillArc(t,e,s,i,h,n,a){return this.fillArcSegment(t,e,s,i,h,n,a)}fillArcSegment(t,e,s,i,h,n,a){const o=[t,e],r=s/2,l=i/2,c=Math.max(s/2,i/2);let p=a.hachureGap;p<0&&(p=4*a.strokeWidth);const u=Math.max(1,Math.abs(n-h)*c/p);let f=[];for(let t=0;t<u;t++){const e=t*((n-h)/u)+h,s=c*Math.cos(e),i=c*Math.sin(e),a=Math.sqrt(r*r*i*i+l*l*s*s),p=r*l*s/a,d=r*l*i/a;f.push([o[0]+p,o[1]+d])}f=this.removeDuplocatePoints(f);const d=this.createLinesFromCenter(o,f);return{type:"fillSketch",ops:this.drawLines(d,a)}}drawLines(t,e){let s=[];return t.forEach(t=>{const i=t[0],h=t[1];s=s.concat(this.helper.doubleLineOps(i[0],i[1],h[0],h[1],e))}),s}createLinesFromCenter(t,e){return e.map(e=>[t,e])}removeDuplocatePoints(t){const e=new Set;return t.filter(t=>{const s=t.join(",");return!e.has(s)&&(e.add(s),!0)})}}class m{constructor(t){this.helper=t}fillPolygon(t,e){const s=d(t,e);return{type:"fillSketch",ops:this.dashedLine(s,e)}}fillEllipse(t,e,s,i,h){const n=g(this.helper,t,e,s,i,h);return{type:"fillSketch",ops:this.dashedLine(n,h)}}fillArc(t,e,s,i,h,n,a){return null}dashedLine(t,e){const s=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,i=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap;let h=[];return t.forEach(t=>{const n=p(t),a=Math.floor(n/(s+i)),o=(n+i-a*(s+i))/2;let r=t[0],l=t[1];r[0]>l[0]&&(r=t[1],l=t[0]);const c=Math.atan((l[1]-r[1])/(l[0]-r[0]));for(let t=0;t<a;t++){const n=t*(s+i),a=n+s,l=[r[0]+n*Math.cos(c)+o*Math.cos(c),r[1]+n*Math.sin(c)+o*Math.sin(c)],p=[r[0]+a*Math.cos(c)+o*Math.cos(c),r[1]+a*Math.sin(c)+o*Math.sin(c)];h=h.concat(this.helper.doubleLineOps(l[0],l[1],p[0],p[1],e))}}),h}}class w{constructor(t){this.helper=t}fillPolygon(t,e){const s=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,i=e.zigzagOffset<0?s:e.zigzagOffset,h=d(t,e=Object.assign({},e,{hachureGap:s+i}));return{type:"fillSketch",ops:this.zigzagLines(h,i,e)}}fillEllipse(t,e,s,i,h){const n=h.hachureGap<0?4*h.strokeWidth:h.hachureGap,a=h.zigzagOffset<0?n:h.zigzagOffset;h=Object.assign({},h,{hachureGap:n+a});const o=g(this.helper,t,e,s,i,h);return{type:"fillSketch",ops:this.zigzagLines(o,a,h)}}fillArc(t,e,s,i,h,n,a){return null}zigzagLines(t,e,s){let i=[];return t.forEach(t=>{const h=p(t),n=Math.round(h/(2*e));let a=t[0],o=t[1];a[0]>o[0]&&(a=t[1],o=t[0]);const r=Math.atan((o[1]-a[1])/(o[0]-a[0]));for(let t=0;t<n;t++){const h=2*t*e,n=2*(t+1)*e,o=Math.sqrt(2*Math.pow(e,2)),l=[a[0]+h*Math.cos(r),a[1]+h*Math.sin(r)],c=[a[0]+n*Math.cos(r),a[1]+n*Math.sin(r)],p=[l[0]+o*Math.cos(r+Math.PI/4),l[1]+o*Math.sin(r+Math.PI/4)];i=(i=i.concat(this.helper.doubleLineOps(l[0],l[1],p[0],p[1],s))).concat(this.helper.doubleLineOps(p[0],p[1],c[0],c[1],s))}}),i}}const k={};function P(t,e){let s=t.fillStyle||"hachure";if(!k[s])switch(s){case"zigzag":k[s]||(k[s]=new M(e));break;case"cross-hatch":k[s]||(k[s]=new x(e));break;case"dots":k[s]||(k[s]=new _(e));break;case"starburst":k[s]||(k[s]=new b(e));break;case"dashed":k[s]||(k[s]=new m(e));break;case"zigzag-line":k[s]||(k[s]=new w(e));break;case"hachure":default:k[s="hachure"]||(k[s]=new y(e))}return k[s]}const v={randOffset:function(t,e){return W(t,e)},randOffsetWithRange:function(t,e,s){return N(t,e,s)},ellipse:T,doubleLineOps:function(t,e,s,i,h){return R(t,e,s,i,h)}};function S(t,e,s,i,h){return{type:"path",ops:R(t,e,s,i,h)}}function A(t,e,s){const i=(t||[]).length;if(i>2){let h=[];for(let e=0;e<i-1;e++)h=h.concat(R(t[e][0],t[e][1],t[e+1][0],t[e+1][1],s));return e&&(h=h.concat(R(t[i-1][0],t[i-1][1],t[0][0],t[0][1],s))),{type:"path",ops:h}}return 2===i?S(t[0][0],t[0][1],t[1][0],t[1][1],s):{type:"path",ops:[]}}function E(t,e,s,i,h){return function(t,e){return A(t,!0,e)}([[t,e],[t+s,e],[t+s,e+i],[t,e+i]],h)}function O(t,e){const s=D(t,1*(1+.2*e.roughness),e),i=D(t,1.5*(1+.22*e.roughness),e);return{type:"path",ops:s.concat(i)}}function T(t,e,s,i,h){const n=2*Math.PI/h.curveStepCount;let a=Math.abs(s/2),o=Math.abs(i/2);const r=$(n,t,e,a+=W(.05*a,h),o+=W(.05*o,h),1,n*N(.1,N(.4,1,h),h),h),l=$(n,t,e,a,o,1.5,0,h);return{type:"path",ops:r.concat(l)}}function C(t,e,s,i,h,n,a,o,r){const l=t,c=e;let p=Math.abs(s/2),u=Math.abs(i/2);p+=W(.01*p,r),u+=W(.01*u,r);let f=h,d=n;for(;f<0;)f+=2*Math.PI,d+=2*Math.PI;d-f>2*Math.PI&&(f=0,d=2*Math.PI);const g=2*Math.PI/r.curveStepCount,y=Math.min(g/2,(d-f)/2),M=G(y,l,c,p,u,f,d,1,r),x=G(y,l,c,p,u,f,d,1.5,r);let _=M.concat(x);return a&&(o?_=(_=_.concat(R(l,c,l+p*Math.cos(f),c+u*Math.sin(f),r))).concat(R(l,c,l+p*Math.cos(d),c+u*Math.sin(d),r)):(_.push({op:"lineTo",data:[l,c]}),_.push({op:"lineTo",data:[l+p*Math.cos(f),c+u*Math.sin(f)]}))),{type:"path",ops:_}}function z(t,e){const s=[];if(t.length){const i=e.maxRandomnessOffset||0,h=t.length;if(h>2){s.push({op:"move",data:[t[0][0]+W(i,e),t[0][1]+W(i,e)]});for(let n=1;n<h;n++)s.push({op:"lineTo",data:[t[n][0]+W(i,e),t[n][1]+W(i,e)]})}}return{type:"fillPath",ops:s}}function L(t,e){return P(e,v).fillPolygon(t,e)}function N(t,e,s){return s.roughness*(Math.random()*(e-t)+t)}function W(t,e){return N(-t,t,e)}function R(t,e,s,i,h){const n=I(t,e,s,i,h,!0,!1),a=I(t,e,s,i,h,!0,!0);return n.concat(a)}function I(t,e,s,i,h,n,a){const o=Math.pow(t-s,2)+Math.pow(e-i,2);let r=h.maxRandomnessOffset||0;r*r*100>o&&(r=Math.sqrt(o)/10);const l=r/2,c=.2+.2*Math.random();let p=h.bowing*h.maxRandomnessOffset*(i-e)/200,u=h.bowing*h.maxRandomnessOffset*(t-s)/200;p=W(p,h),u=W(u,h);const f=[],d=()=>W(l,h),g=()=>W(r,h);return n&&(a?f.push({op:"move",data:[t+d(),e+d()]}):f.push({op:"move",data:[t+W(r,h),e+W(r,h)]})),a?f.push({op:"bcurveTo",data:[p+t+(s-t)*c+d(),u+e+(i-e)*c+d(),p+t+2*(s-t)*c+d(),u+e+2*(i-e)*c+d(),s+d(),i+d()]}):f.push({op:"bcurveTo",data:[p+t+(s-t)*c+g(),u+e+(i-e)*c+g(),p+t+2*(s-t)*c+g(),u+e+2*(i-e)*c+g(),s+g(),i+g()]}),f}function D(t,e,s){const i=[];i.push([t[0][0]+W(e,s),t[0][1]+W(e,s)]),i.push([t[0][0]+W(e,s),t[0][1]+W(e,s)]);for(let h=1;h<t.length;h++)i.push([t[h][0]+W(e,s),t[h][1]+W(e,s)]),h===t.length-1&&i.push([t[h][0]+W(e,s),t[h][1]+W(e,s)]);return q(i,null,s)}function q(t,e,s){const i=t.length;let h=[];if(i>3){const n=[],a=1-s.curveTightness;h.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<i;e++){const s=t[e];n[0]=[s[0],s[1]],n[1]=[s[0]+(a*t[e+1][0]-a*t[e-1][0])/6,s[1]+(a*t[e+1][1]-a*t[e-1][1])/6],n[2]=[t[e+1][0]+(a*t[e][0]-a*t[e+2][0])/6,t[e+1][1]+(a*t[e][1]-a*t[e+2][1])/6],n[3]=[t[e+1][0],t[e+1][1]],h.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]]})}if(e&&2===e.length){const t=s.maxRandomnessOffset;h.push({op:"lineTo",data:[e[0]+W(t,s),e[1]+W(t,s)]})}}else 3===i?(h.push({op:"move",data:[t[1][0],t[1][1]]}),h.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===i&&(h=h.concat(R(t[0][0],t[0][1],t[1][0],t[1][1],s)));return h}function $(t,e,s,i,h,n,a,o){const r=W(.5,o)-Math.PI/2,l=[];l.push([W(n,o)+e+.9*i*Math.cos(r-t),W(n,o)+s+.9*h*Math.sin(r-t)]);for(let a=r;a<2*Math.PI+r-.01;a+=t)l.push([W(n,o)+e+i*Math.cos(a),W(n,o)+s+h*Math.sin(a)]);return l.push([W(n,o)+e+i*Math.cos(r+2*Math.PI+.5*a),W(n,o)+s+h*Math.sin(r+2*Math.PI+.5*a)]),l.push([W(n,o)+e+.98*i*Math.cos(r+a),W(n,o)+s+.98*h*Math.sin(r+a)]),l.push([W(n,o)+e+.9*i*Math.cos(r+.5*a),W(n,o)+s+.9*h*Math.sin(r+.5*a)]),q(l,null,o)}function G(t,e,s,i,h,n,a,o,r){const l=n+W(.1,r),c=[];c.push([W(o,r)+e+.9*i*Math.cos(l-t),W(o,r)+s+.9*h*Math.sin(l-t)]);for(let n=l;n<=a;n+=t)c.push([W(o,r)+e+i*Math.cos(n),W(o,r)+s+h*Math.sin(n)]);return c.push([e+i*Math.cos(a),s+h*Math.sin(a)]),c.push([e+i*Math.cos(a),s+h*Math.sin(a)]),q(c,null,r)}function B(t,e,s,i,h,n,a,o){const r=[],l=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.5];let c=[0,0];for(let p=0;p<2;p++)0===p?r.push({op:"move",data:[a.x,a.y]}):r.push({op:"move",data:[a.x+W(l[0],o),a.y+W(l[0],o)]}),c=[h+W(l[p],o),n+W(l[p],o)],r.push({op:"bcurveTo",data:[t+W(l[p],o),e+W(l[p],o),s+W(l[p],o),i+W(l[p],o),c[0],c[1]]});return a.setPosition(c[0],c[1]),r}function X(t,e,s,i){let h=[];switch(e.key){case"M":case"m":{const s="m"===e.key;if(e.data.length>=2){let n=+e.data[0],a=+e.data[1];s&&(n+=t.x,a+=t.y);const o=1*(i.maxRandomnessOffset||0);n+=W(o,i),a+=W(o,i),t.setPosition(n,a),h.push({op:"move",data:[n,a]})}break}case"L":case"l":{const s="l"===e.key;if(e.data.length>=2){let n=+e.data[0],a=+e.data[1];s&&(n+=t.x,a+=t.y),h=h.concat(R(t.x,t.y,n,a,i)),t.setPosition(n,a)}break}case"H":case"h":{const s="h"===e.key;if(e.data.length){let n=+e.data[0];s&&(n+=t.x),h=h.concat(R(t.x,t.y,n,t.y,i)),t.setPosition(n,t.y)}break}case"V":case"v":{const s="v"===e.key;if(e.data.length){let n=+e.data[0];s&&(n+=t.y),h=h.concat(R(t.x,t.y,t.x,n,i)),t.setPosition(t.x,n)}break}case"Z":case"z":t.first&&(h=h.concat(R(t.x,t.y,t.first[0],t.first[1],i)),t.setPosition(t.first[0],t.first[1]),t.first=null);break;case"C":case"c":{const s="c"===e.key;if(e.data.length>=6){let n=+e.data[0],a=+e.data[1],o=+e.data[2],r=+e.data[3],l=+e.data[4],c=+e.data[5];s&&(n+=t.x,o+=t.x,l+=t.x,a+=t.y,r+=t.y,c+=t.y);const p=B(n,a,o,r,l,c,t,i);h=h.concat(p),t.bezierReflectionPoint=[l+(l-o),c+(c-r)]}break}case"S":case"s":{const n="s"===e.key;if(e.data.length>=4){let a=+e.data[0],o=+e.data[1],r=+e.data[2],l=+e.data[3];n&&(a+=t.x,r+=t.x,o+=t.y,l+=t.y);let c=a,p=o;const u=s?s.key:"";let f=null;"c"!==u&&"C"!==u&&"s"!==u&&"S"!==u||(f=t.bezierReflectionPoint),f&&(c=f[0],p=f[1]);const d=B(c,p,a,o,r,l,t,i);h=h.concat(d),t.bezierReflectionPoint=[r+(r-a),l+(l-o)]}break}case"Q":case"q":{const s="q"===e.key;if(e.data.length>=4){let n=+e.data[0],a=+e.data[1],o=+e.data[2],r=+e.data[3];s&&(n+=t.x,o+=t.x,a+=t.y,r+=t.y);const l=1*(1+.2*i.roughness),c=1.5*(1+.22*i.roughness);h.push({op:"move",data:[t.x+W(l,i),t.y+W(l,i)]});let p=[o+W(l,i),r+W(l,i)];h.push({op:"qcurveTo",data:[n+W(l,i),a+W(l,i),p[0],p[1]]}),h.push({op:"move",data:[t.x+W(c,i),t.y+W(c,i)]}),p=[o+W(c,i),r+W(c,i)],h.push({op:"qcurveTo",data:[n+W(c,i),a+W(c,i),p[0],p[1]]}),t.setPosition(p[0],p[1]),t.quadReflectionPoint=[o+(o-n),r+(r-a)]}break}case"T":case"t":{const n="t"===e.key;if(e.data.length>=2){let a=+e.data[0],o=+e.data[1];n&&(a+=t.x,o+=t.y);let r=a,l=o;const c=s?s.key:"";let p=null;"q"!==c&&"Q"!==c&&"t"!==c&&"T"!==c||(p=t.quadReflectionPoint),p&&(r=p[0],l=p[1]);const u=1*(1+.2*i.roughness),f=1.5*(1+.22*i.roughness);h.push({op:"move",data:[t.x+W(u,i),t.y+W(u,i)]});let d=[a+W(u,i),o+W(u,i)];h.push({op:"qcurveTo",data:[r+W(u,i),l+W(u,i),d[0],d[1]]}),h.push({op:"move",data:[t.x+W(f,i),t.y+W(f,i)]}),d=[a+W(f,i),o+W(f,i)],h.push({op:"qcurveTo",data:[r+W(f,i),l+W(f,i),d[0],d[1]]}),t.setPosition(d[0],d[1]),t.quadReflectionPoint=[a+(a-r),o+(o-l)]}break}case"A":case"a":{const s="a"===e.key;if(e.data.length>=7){const n=+e.data[0],o=+e.data[1],r=+e.data[2],l=+e.data[3],c=+e.data[4];let p=+e.data[5],u=+e.data[6];if(s&&(p+=t.x,u+=t.y),p===t.x&&u===t.y)break;if(0===n||0===o)h=h.concat(R(t.x,t.y,p,u,i)),t.setPosition(p,u);else for(let e=0;e<1;e++){const e=new a([t.x,t.y],[p,u],[n,o],r,!!l,!!c);let s=e.getNextSegment();for(;s;){const n=B(s.cp1[0],s.cp1[1],s.cp2[0],s.cp2[1],s.to[0],s.to[1],t,i);h=h.concat(n),s=e.getNextSegment()}}}break}}return h}class U extends e{line(t,e,s,i,h){const n=this._options(h);return this._drawable("line",[S(t,e,s,i,n)],n)}rectangle(t,e,s,i,h){const n=this._options(h),a=[];if(n.fill){const h=[[t,e],[t+s,e],[t+s,e+i],[t,e+i]];"solid"===n.fillStyle?a.push(z(h,n)):a.push(L(h,n))}return a.push(E(t,e,s,i,n)),this._drawable("rectangle",a,n)}ellipse(t,e,s,i,h){const n=this._options(h),a=[];if(n.fill)if("solid"===n.fillStyle){const h=T(t,e,s,i,n);h.type="fillPath",a.push(h)}else a.push(function(t,e,s,i,h){return P(h,v).fillEllipse(t,e,s,i,h)}(t,e,s,i,n));return a.push(T(t,e,s,i,n)),this._drawable("ellipse",a,n)}circle(t,e,s,i){const h=this.ellipse(t,e,s,s,i);return h.shape="circle",h}linearPath(t,e){const s=this._options(e);return this._drawable("linearPath",[A(t,!1,s)],s)}arc(t,e,s,i,h,n,a=!1,o){const r=this._options(o),l=[];if(a&&r.fill)if("solid"===r.fillStyle){const a=C(t,e,s,i,h,n,!0,!1,r);a.type="fillPath",l.push(a)}else l.push(function(t,e,s,i,h,n,a){const o=P(a,v).fillArc(t,e,s,i,h,n,a);if(o)return o;const r=t,l=e;let c=Math.abs(s/2),p=Math.abs(i/2);c+=W(.01*c,a),p+=W(.01*p,a);let u=h,f=n;for(;u<0;)u+=2*Math.PI,f+=2*Math.PI;f-u>2*Math.PI&&(u=0,f=2*Math.PI);const d=(f-u)/a.curveStepCount,g=[];for(let t=u;t<=f;t+=d)g.push([r+c*Math.cos(t),l+p*Math.sin(t)]);return g.push([r+c*Math.cos(f),l+p*Math.sin(f)]),g.push([r,l]),L(g,a)}(t,e,s,i,h,n,r));return l.push(C(t,e,s,i,h,n,a,!0,r)),this._drawable("arc",l,r)}curve(t,e){const s=this._options(e);return this._drawable("curve",[O(t,s)],s)}polygon(t,e){const s=this._options(e),i=[];if(s.fill)if("solid"===s.fillStyle)i.push(z(t,s));else{const e=this.computePolygonSize(t),h=L([[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],s);h.type="path2Dpattern",h.size=e,h.path=this.polygonPath(t),i.push(h)}return i.push(A(t,!0,s)),this._drawable("polygon",i,s)}path(t,e){const s=this._options(e),i=[];if(!t)return this._drawable("path",i,s);if(s.fill)if("solid"===s.fillStyle){const e={type:"path2Dfill",path:t,ops:[]};i.push(e)}else{const e=this.computePathSize(t),h=L([[0,0],[e[0],0],[e[0],e[1]],[0,e[1]]],s);h.type="path2Dpattern",h.size=e,h.path=t,i.push(h)}return i.push(function(t,e){t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let s=new n(t);if(e.simplification){const t=new o(s.linearPoints,s.closed).fit(e.simplification);s=new n(t)}let i=[];const h=s.segments||[];for(let t=0;t<h.length;t++){const n=X(s,h[t],t>0?h[t-1]:null,e);n&&n.length&&(i=i.concat(n))}return{type:"path",ops:i}}(t,s)),this._drawable("path",i,s)}}const V="undefined"!=typeof document;class j{constructor(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),i=this.ctx;for(const t of e)switch(t.type){case"path":i.save(),i.strokeStyle=s.stroke,i.lineWidth=s.strokeWidth,this._drawToContext(i,t),i.restore();break;case"fillPath":i.save(),i.fillStyle=s.fill||"",this._drawToContext(i,t),i.restore();break;case"fillSketch":this.fillSketch(i,t,s);break;case"path2Dfill":{this.ctx.save(),this.ctx.fillStyle=s.fill||"";const e=new Path2D(t.path);this.ctx.fill(e),this.ctx.restore();break}case"path2Dpattern":{const e=this.canvas.ownerDocument||V&&document;if(e){const i=t.size,h=e.createElement("canvas"),n=h.getContext("2d"),a=this.computeBBox(t.path);a&&(a.width||a.height)?(h.width=this.canvas.width,h.height=this.canvas.height,n.translate(a.x||0,a.y||0)):(h.width=i[0],h.height=i[1]),this.fillSketch(n,t,s),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(h,"repeat");const o=new Path2D(t.path);this.ctx.fill(o),this.ctx.restore()}else console.error("Cannot render path2Dpattern. No defs/document defined.");break}}}computeBBox(t){if(V)try{const e="http://www.w3.org/2000/svg",s=document.createElementNS(e,"svg");s.setAttribute("width","0"),s.setAttribute("height","0");const i=self.document.createElementNS(e,"path");i.setAttribute("d",t),s.appendChild(i),document.body.appendChild(s);const h=i.getBBox();return document.body.removeChild(s),h}catch(t){}return null}fillSketch(t,e,s){let i=s.fillWeight;i<0&&(i=s.strokeWidth/2),t.save(),t.strokeStyle=s.fill||"",t.lineWidth=i,this._drawToContext(t,e),t.restore()}_drawToContext(t,e){t.beginPath();for(const s of e.ops){const e=s.data;switch(s.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"qcurveTo":t.quadraticCurveTo(e[0],e[1],e[2],e[3]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill():t.stroke()}}class F extends j{constructor(t,e){super(t),this.gen=new U(e||null,this.canvas)}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,s,i,h){const n=this.gen.line(t,e,s,i,h);return this.draw(n),n}rectangle(t,e,s,i,h){const n=this.gen.rectangle(t,e,s,i,h);return this.draw(n),n}ellipse(t,e,s,i,h){const n=this.gen.ellipse(t,e,s,i,h);return this.draw(n),n}circle(t,e,s,i){const h=this.gen.circle(t,e,s,i);return this.draw(h),h}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s),s}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s),s}arc(t,e,s,i,h,n,a=!1,o){const r=this.gen.arc(t,e,s,i,h,n,a,o);return this.draw(r),r}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s),s}path(t,e){const s=this.gen.path(t,e);return this.draw(s),s}}const Q="undefined"!=typeof document;class Z{constructor(t){this.svg=t}get defs(){const t=this.svg.ownerDocument||Q&&document;if(t&&!this._defs){const e=t.createElementNS("http://www.w3.org/2000/svg","defs");this.svg.firstChild?this.svg.insertBefore(e,this.svg.firstChild):this.svg.appendChild(e),this._defs=e}return this._defs||null}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,h=i.createElementNS("http://www.w3.org/2000/svg","g");for(const t of e){let e=null;switch(t.type){case"path":(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(t)),e.style.stroke=s.stroke,e.style.strokeWidth=s.strokeWidth+"",e.style.fill="none";break;case"fillPath":(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(t)),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=s.fill||null;break;case"fillSketch":e=this.fillSketch(i,t,s);break;case"path2Dfill":(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",t.path||""),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=s.fill||null;break;case"path2Dpattern":if(this.defs){const h=t.size,n=i.createElementNS("http://www.w3.org/2000/svg","pattern"),a=`rough-${Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER||999999))}`;n.setAttribute("id",a),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("height","1"),n.setAttribute("viewBox",`0 0 ${Math.round(h[0])} ${Math.round(h[1])}`),n.setAttribute("patternUnits","objectBoundingBox");const o=this.fillSketch(i,t,s);n.appendChild(o),this.defs.appendChild(n),(e=i.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",t.path||""),e.style.stroke="none",e.style.strokeWidth="0",e.style.fill=`url(#${a})`}else console.error("Cannot render path2Dpattern. No defs/document defined.")}e&&h.appendChild(e)}return h}fillSketch(t,e,s){let i=s.fillWeight;i<0&&(i=s.strokeWidth/2);const h=t.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",this.opsToPath(e)),h.style.stroke=s.fill||null,h.style.strokeWidth=i+"",h.style.fill="none",h}}class H extends Z{constructor(t,e){super(t),this.gen=new U(e||null,this.svg)}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t){return this.gen.opsToPath(t)}line(t,e,s,i,h){const n=this.gen.line(t,e,s,i,h);return this.draw(n)}rectangle(t,e,s,i,h){const n=this.gen.rectangle(t,e,s,i,h);return this.draw(n)}ellipse(t,e,s,i,h){const n=this.gen.ellipse(t,e,s,i,h);return this.draw(n)}circle(t,e,s,i){const h=this.gen.circle(t,e,s,i);return this.draw(h)}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s)}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s)}arc(t,e,s,i,h,n,a=!1,o){const r=this.gen.arc(t,e,s,i,h,n,a,o);return this.draw(r)}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s)}path(t,e){const s=this.gen.path(t,e);return this.draw(s)}}return{canvas:(t,e)=>new F(t,e),svg:(t,e)=>new H(t,e),generator:(t,e)=>new U(t,e)}}();
##############################################
/src/demo/html/src/html.js-19-    // Container for all HTML views inside paper
/src/demo/html/src/html.js:20:    var htmlContainer = document.createElement('div');
/src/demo/html/src/html.js-21-    htmlContainer.style.pointerEvents = 'none';
##############################################
/src/demo/archive/basic.js-146-    var textSpan = textElement.firstChild;
/src/demo/archive/basic.js:147:    var textNode = document.createTextNode('');
/src/demo/archive/basic.js-148-
##############################################
/src/demo/archive/basic.js-150-    svgDocument.appendChild(textElement);
/src/demo/archive/basic.js:151:    document.body.appendChild(svgDocument);
/src/demo/archive/basic.js-152-
##############################################
/src/demo/graph.js-8-});
/src/demo/graph.js:9:$(document.body).append($info);
/src/demo/graph.js-10-
##############################################
/src/demo/links/src/pipes.js-75-
/src/demo/links/src/pipes.js:76:        var canvas = document.createElement('canvas');
/src/demo/links/src/pipes.js-77-        canvas.width = bbox.width;
##############################################
/src/demo/performance/async.js-147-    loader.progress(0);
/src/demo/performance/async.js:148:    loader.$el.appendTo(document.body);
/src/demo/performance/async.js-149-
##############################################
/src/demo/shapes/src/table.js-3-new joint.dia.Paper({
/src/demo/shapes/src/table.js:4:    el: $('<div>').prependTo(document.body).css({ border: '1px solid gray' }),
/src/demo/shapes/src/table.js-5-    width: 1200,
##############################################
/src/src/g/index.mjs-1388-        // we can work with that - if `NaN`, return 0
/src/src/g/index.mjs:1389:        if (cpNormalizedLength !== cpNormalizedLength) return 0; // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`
/src/src/g/index.mjs-1390-        // (`NaN` is the only value that is not equal to itself)
##############################################
/src/src/V/index.mjs-96-
/src/src/V/index.mjs:97:                el = document.createElementNS(ns.svg, el);
/src/src/V/index.mjs-98-            }
##############################################
/src/src/V/index.mjs-431-                if (eol && j === lastJ) annotation += eol;
/src/src/V/index.mjs:432:                tspanNode = document.createTextNode(annotation || ' ');
/src/src/V/index.mjs-433-                if (baseSize && baseSize > maxFontSize) maxFontSize = baseSize;
##############################################
/src/src/V/index.mjs-1269-
/src/src/V/index.mjs:1270:        const svg = document.createElementNS(ns.svg, 'svg');
/src/src/V/index.mjs-1271-        svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);
##############################################
/src/src/routers/manhattan.mjs-609-
/src/src/routers/manhattan.mjs:610:        // The set of tentative points to be evaluated, initially containing the start points.
/src/src/routers/manhattan.mjs-611-        // Rounded to nearest integer for simplicity.
##############################################
/src/src/routers/manhattan.mjs-689-
/src/src/routers/manhattan.mjs:690:                // Closed points from the openSet were already evaluated.
/src/src/routers/manhattan.mjs-691-                if (openSet.isClose(neighborKey) || !map.isPointAccessible(neighborPoint)) continue;
##############################################
/src/src/dia/LinkView.mjs-268-        var children = V(labelMarkup);
/src/src/dia/LinkView.mjs:269:        var fragment = document.createDocumentFragment();
/src/src/dia/LinkView.mjs-270-
##############################################
/src/src/dia/attributes.mjs-389-                    // Create a new title
/src/src/dia/attributes.mjs:390:                    var titleNode = document.createElementNS(node.namespaceURI, 'title');
/src/src/dia/attributes.mjs-391-                    titleNode.textContent = title;
##############################################
/src/src/dia/ports.mjs-92-                var key = groups[i];
/src/src/dia/ports.mjs:93:                this.groups[key] = this._evaluateGroup(data.groups[key]);
/src/src/dia/ports.mjs-94-            }
##############################################
/src/src/dia/ports.mjs-99-        for (var j = 0, m = ports.length; j < m; j++) {
/src/src/dia/ports.mjs:100:            this.ports.push(this._evaluatePort(ports[j]));
/src/src/dia/ports.mjs-101-        }
##############################################
/src/src/dia/ports.mjs-103-
/src/src/dia/ports.mjs:104:    _evaluateGroup: function(group) {
/src/src/dia/ports.mjs-105-
##############################################
/src/src/dia/ports.mjs-111-
/src/src/dia/ports.mjs:112:    _evaluatePort: function(port) {
/src/src/dia/ports.mjs-113-
/src/src/dia/ports.mjs:114:        var evaluated = util.assign({}, port);
/src/src/dia/ports.mjs-115-
##############################################
/src/src/dia/ports.mjs-117-
/src/src/dia/ports.mjs:118:        evaluated.markup = evaluated.markup || group.markup;
/src/src/dia/ports.mjs:119:        evaluated.attrs = util.merge({}, group.attrs, evaluated.attrs);
/src/src/dia/ports.mjs:120:        evaluated.position = this._createPositionNode(group, evaluated);
/src/src/dia/ports.mjs:121:        evaluated.label = util.merge({}, group.label, this._getLabel(evaluated));
/src/src/dia/ports.mjs:122:        evaluated.z = this._getZIndex(group, evaluated);
/src/src/dia/ports.mjs:123:        evaluated.size = util.assign({}, group.size, evaluated.size);
/src/src/dia/ports.mjs-124-
/src/src/dia/ports.mjs:125:        return evaluated;
/src/src/dia/ports.mjs-126-    },
##############################################
/src/src/dia/Paper.mjs-1477-        if (pivot) return pivot;
/src/src/dia/Paper.mjs:1478:        pivot = pivots[z] = document.createComment('z-index:' + (z + 1));
/src/src/dia/Paper.mjs-1479-        var neighborZ = -Infinity;
##############################################
/src/src/dia/Paper.mjs-2501-            opt = this._background = cloneDeep(opt);
/src/src/dia/Paper.mjs:2502:            var img = document.createElement('img');
/src/src/dia/Paper.mjs-2503-            img.onload = this.drawBackgroundImage.bind(this, img, opt);
##############################################
/src/src/dia/Paper.mjs-2653-
/src/src/dia/Paper.mjs:2654:            var canvas = document.createElement('canvas');
/src/src/dia/Paper.mjs-2655-            var imgWidth = img.width;
##############################################
/src/src/dia/Paper.mjs-2680-
/src/src/dia/Paper.mjs:2681:            var canvas = document.createElement('canvas');
/src/src/dia/Paper.mjs-2682-            var imgWidth = img.width;
##############################################
/src/src/dia/Paper.mjs-2702-
/src/src/dia/Paper.mjs:2703:            var canvas = document.createElement('canvas');
/src/src/dia/Paper.mjs-2704-            var imgWidth = img.width;
##############################################
/src/src/dia/Paper.mjs-2729-
/src/src/dia/Paper.mjs:2730:            var canvas = document.createElement('canvas');
/src/src/dia/Paper.mjs-2731-            canvas.width = imgWidth * 3;
##############################################
/src/src/env/index.mjs-7-        svgforeignobject: function() {
/src/src/env/index.mjs:8:            return !!document.createElementNS &&
/src/src/env/index.mjs:9:                /SVGForeignObject/.test(({}).toString.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));
/src/src/env/index.mjs-10-        }
##############################################
/src/src/mvc/index.mjs-108-        if (this.svgElement) {
/src/src/mvc/index.mjs:109:            return document.createElementNS(V.namespace.svg, tagName);
/src/src/mvc/index.mjs-110-        } else {
/src/src/mvc/index.mjs:111:            return document.createElement(tagName);
/src/src/mvc/index.mjs-112-        }
##############################################
/src/src/util/util.mjs-42-    var ns = namespace || svgNamespace;
/src/src/util/util.mjs:43:    var fragment = document.createDocumentFragment();
/src/src/util/util.mjs-44-    var queue = [json, fragment, ns];
##############################################
/src/src/util/util.mjs-55-            if (nodeDef.hasOwnProperty('namespaceURI')) ns = nodeDef.namespaceURI;
/src/src/util/util.mjs:56:            var node = document.createElementNS(ns, tagName);
/src/src/util/util.mjs-57-            var svg = (ns === svgNamespace);
##############################################
/src/src/util/util.mjs-441-    var textElement = V('text').attr(styles).append(textSpan).node;
/src/src/util/util.mjs:442:    var textNode = document.createTextNode('');
/src/src/util/util.mjs-443-
##############################################
/src/src/util/util.mjs-459-
/src/src/util/util.mjs:460:        document.body.appendChild(svgDocument);
/src/src/util/util.mjs-461-    }
##############################################
/src/src/util/util.mjs-669-        // clean svg document
/src/src/util/util.mjs:670:        document.body.removeChild(svgDocument);
/src/src/util/util.mjs-671-    }
##############################################
/src/src/util/util.mjs-725-        var url = window.URL.createObjectURL(blob);
/src/src/util/util.mjs:726:        var link = document.createElement('a');
/src/src/util/util.mjs-727-
##############################################
/src/src/util/util.mjs-729-        link.download = fileName;
/src/src/util/util.mjs:730:        document.body.appendChild(link);
/src/src/util/util.mjs-731-
##############################################
/src/src/util/util.mjs-733-
/src/src/util/util.mjs:734:        document.body.removeChild(link);
/src/src/util/util.mjs-735-        window.URL.revokeObjectURL(url); // mark the url for garbage collection
##############################################
/src/src/util/util.mjs-913-        // the DOM. The easiest way is to have a 'flag' node:
/src/src/util/util.mjs:914:        var nextSibling = parentNode.insertBefore(document.createTextNode(''), sortElement.nextSibling);
/src/src/util/util.mjs-915-
##############################################
/src/src/util/util.mjs-1558-/**
/src/src/util/util.mjs:1559: * @param {Element} el Element, which content is intent to display in full-screen mode, 'window.top.document.body' is default.
/src/src/util/util.mjs-1560- */
##############################################
/src/scripts/checkCompatibility.js-1-(function() {
/src/scripts/checkCompatibility.js:2:    var fs = (document.location.protocol === 'file:');
/src/scripts/checkCompatibility.js-3-    var ff = (navigator.userAgent.toLowerCase().indexOf('firefox') !== -1);
##############################################
/src/scripts/checkCompatibility.js-5-
/src/scripts/checkCompatibility.js:6:        var br = document.createElement('br');
/src/scripts/checkCompatibility.js:7:        var body = document.body;
/src/scripts/checkCompatibility.js-8-        body.innerHTML = '';
/src/scripts/checkCompatibility.js-9-
/src/scripts/checkCompatibility.js:10:        var header1 = document.createElement('h2');
/src/scripts/checkCompatibility.js-11-        header1.innerText = 'This is ES6 demo. It requires ES6 complaint browser and access through the Web Server';
##############################################
/src/scripts/checkCompatibility.js-13-
/src/scripts/checkCompatibility.js:14:        var b1 = document.createElement('b');
/src/scripts/checkCompatibility.js-15-        b1.innerText = 'go to the JointJS ROOT folder, install and run the server:';
##############################################
/src/scripts/checkCompatibility.js-18-
/src/scripts/checkCompatibility.js:19:        var code1 = document.createElement('code');
/src/scripts/checkCompatibility.js-20-        code1.innerText = 'npm install http-server -g';
##############################################
/src/scripts/checkCompatibility.js-23-
/src/scripts/checkCompatibility.js:24:        var code2 = document.createElement('code');
/src/scripts/checkCompatibility.js-25-        code2.innerText = 'http-server -p 8081';
##############################################
/src/scripts/checkCompatibility.js-28-
/src/scripts/checkCompatibility.js:29:        var b2 = document.createElement('b');
/src/scripts/checkCompatibility.js-30-        b2.innerText = 'The demo should be on this location:';
##############################################
/src/scripts/checkCompatibility.js-33-
/src/scripts/checkCompatibility.js:34:        var a = document.createElement('a');
/src/scripts/checkCompatibility.js:35:        var link = 'http://localhost:8081' + window.location.href.substr(window.location.href.indexOf('/demo'));
/src/scripts/checkCompatibility.js-36-        a.href = link;
##############################################
/src/test/vectorizer/vectorizer.js-4-
/src/test/vectorizer/vectorizer.js:5:    var fixture = document.createElement('div');
/src/test/vectorizer/vectorizer.js-6-    fixture.id = 'qunit-fixture';
##############################################
/src/test/vectorizer/vectorizer.js-51-
/src/test/vectorizer/vectorizer.js:52:        document.body.appendChild(fixture);
/src/test/vectorizer/vectorizer.js-53-        fixture.appendChild(V('svg', { id: 'svg-container' }, V(svgContent)).node);
##############################################
/src/test/vectorizer/vectorizer.js-120-    QUnit.test('V.ensureId()', function(assert) {
/src/test/vectorizer/vectorizer.js:121:        var node = document.createElementNS('http://www.w3.org/2000/svg', 'g');
/src/test/vectorizer/vectorizer.js-122-        assert.notOk(node.id);
##############################################
/src/test/vectorizer/vectorizer.js-421-
/src/test/vectorizer/vectorizer.js:422:        var textNode = document.createTextNode('Text node');
/src/test/vectorizer/vectorizer.js-423-        svgGroup.appendChild(textNode);
/src/test/vectorizer/vectorizer.js:424:        var comment = document.createComment('Comment');
/src/test/vectorizer/vectorizer.js-425-        svgGroup.appendChild(comment);
/src/test/vectorizer/vectorizer.js:426:        var attribute = document.createAttribute('Attribute');
/src/test/vectorizer/vectorizer.js-427-        attribute.value = 'Hello World';
##############################################
/src/test/geometry/path.js-4-
/src/test/geometry/path.js:5:    var fixture = document.createElement('div');
/src/test/geometry/path.js-6-    fixture.id = 'qunit-fixture';
##############################################
/src/test/geometry/path.js-8-    var getSvg = function() {
/src/test/geometry/path.js:9:        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/path.js-10-        svg.setAttribute('width',  600);
/src/test/geometry/path.js-11-        svg.setAttribute('height',  800);
/src/test/geometry/path.js:12:        document.body.appendChild(fixture);
/src/test/geometry/path.js-13-        fixture.appendChild(svg);
##############################################
/src/test/geometry/path.js-2588-                var gPath = new g.Path('M 0 0 C 0 200 200 200 200 0');
/src/test/geometry/path.js:2589:                var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/path.js-2590-                path.setAttribute('d',  gPath.serialize());
##############################################
/src/test/geometry/path.js-2929-
/src/test/geometry/path.js:2930:                path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/path.js-2931-                path.setAttribute('d',  gPath.serialize());
##############################################
/src/test/geometry/path.js-2944-                /*gPath = new g.Path('M 0 0 C 0 200 200 200 200 0');
/src/test/geometry/path.js:2945:                path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/path.js-2946-                path.setAttribute('d',  gPath.serialize());
##############################################
/src/test/geometry/path.js-2958-                gPath = new g.Path('M 0 0 C 0 200 200 200 200 0');
/src/test/geometry/path.js:2959:                path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/path.js-2960-                path.setAttribute('d',  gPath.serialize());
##############################################
/src/test/geometry/curve.js-4-
/src/test/geometry/curve.js:5:    var fixture = document.createElement('div');
/src/test/geometry/curve.js-6-    fixture.id = 'qunit-fixture';
##############################################
/src/test/geometry/curve.js-8-    var getSvg = function() {
/src/test/geometry/curve.js:9:        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/curve.js-10-        svg.setAttribute('width',  600);
/src/test/geometry/curve.js-11-        svg.setAttribute('height',  800);
/src/test/geometry/curve.js:12:        document.body.appendChild(fixture);
/src/test/geometry/curve.js-13-        fixture.appendChild(svg);
##############################################
/src/test/geometry/curve.js-835-                var gCurvePath = new g.Path(gCurve);
/src/test/geometry/curve.js:836:                var curvePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/curve.js-837-                curvePath.setAttribute('d',  gCurvePath.serialize());
##############################################
/src/test/geometry/curve.js-1000-                var gCurvePath = new g.Path(gCurve);
/src/test/geometry/curve.js:1001:                var curvePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
/src/test/geometry/curve.js-1002-                curvePath.setAttribute('d',  gCurvePath.serialize());
##############################################
/src/test/utils.js-85-
/src/test/utils.js:86:        var evt = document.createEvent('MouseEvents');
/src/test/utils.js-87-        evt.initMouseEvent(
##############################################
/src/test/jointjs/embedding.js-3-
/src/test/jointjs/embedding.js:4:        var $fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/embedding.js-5-        var $paper = $('<div/>');
##############################################
/src/test/jointjs/paper.js-4-
/src/test/jointjs/paper.js:5:        var $fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/paper.js-6-        var $paper = $('<div/>');
##############################################
/src/test/jointjs/paper.js-1712-
/src/test/jointjs/paper.js:1713:            var img = document.createElement('img');
/src/test/jointjs/paper.js-1714-            img.src = bgImageDataURL;
##############################################
/src/test/jointjs/paper.js-1931-
/src/test/jointjs/paper.js:1932:            var img1 = document.createElement('img');
/src/test/jointjs/paper.js-1933-            img1.src = bgImageDataURL;
##############################################
/src/test/jointjs/paper.js-1946-                _.bind(function() {
/src/test/jointjs/paper.js:1947:                    var img2 = document.createElement('img');
/src/test/jointjs/paper.js-1948-                    img2.src = getUrlFromAttribute(this.paper.$background.css('backgroundImage'));
##############################################
/src/test/jointjs/dia/Paper.js-29-
/src/test/jointjs/dia/Paper.js:30:        var fixtureEl = document.getElementById('qunit-fixture') || document.createElement('div');
/src/test/jointjs/dia/Paper.js:31:        paperEl = document.createElement('div');
/src/test/jointjs/dia/Paper.js-32-        fixtureEl.id = 'qunit-fixture';
/src/test/jointjs/dia/Paper.js-33-        fixtureEl.appendChild(paperEl);
/src/test/jointjs/dia/Paper.js:34:        document.body.appendChild(fixtureEl);
/src/test/jointjs/dia/Paper.js-35-
##############################################
/src/test/jointjs/dia/linkTools.js-6-
/src/test/jointjs/dia/linkTools.js:7:        var fixtureEl = document.getElementById('qunit-fixture') || document.createElement('div');
/src/test/jointjs/dia/linkTools.js:8:        paperEl = document.createElement('div');
/src/test/jointjs/dia/linkTools.js-9-        fixtureEl.id = 'qunit-fixture';
/src/test/jointjs/dia/linkTools.js-10-        fixtureEl.appendChild(paperEl);
/src/test/jointjs/dia/linkTools.js:11:        document.body.appendChild(fixtureEl);
/src/test/jointjs/dia/linkTools.js-12-
##############################################
/src/test/jointjs/dia/attributes.js-34-            var fixtures = document.getElementById('qunit-fixture');
/src/test/jointjs/dia/attributes.js:35:            var paperEl = document.createElement('div');
/src/test/jointjs/dia/attributes.js-36-            fixtures.appendChild(paperEl);
##############################################
/src/test/jointjs/dia/elementTools.js-6-
/src/test/jointjs/dia/elementTools.js:7:        var fixtureEl = document.getElementById('qunit-fixture') || document.createElement('div');
/src/test/jointjs/dia/elementTools.js:8:        paperEl = document.createElement('div');
/src/test/jointjs/dia/elementTools.js-9-        fixtureEl.id = 'qunit-fixture';
/src/test/jointjs/dia/elementTools.js-10-        fixtureEl.appendChild(paperEl);
/src/test/jointjs/dia/elementTools.js:11:        document.body.appendChild(fixtureEl);
/src/test/jointjs/dia/elementTools.js-12-
##############################################
/src/test/jointjs/elementPorts.js-377-
/src/test/jointjs/elementPorts.js:378:        QUnit.module('evaluate from definition', function(hooks) {
/src/test/jointjs/elementPorts.js-379-
##############################################
/src/test/jointjs/mvc.view.js-245-
/src/test/jointjs/mvc.view.js:246:            assert.equal(view.findAttribute('root-attribute', document.body), null);
/src/test/jointjs/mvc.view.js-247-
##############################################
/src/test/jointjs/routers.js-4-
/src/test/jointjs/routers.js:5:        var $fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/routers.js-6-        var $paper = $('<div/>');
##############################################
/src/test/jointjs/cell.js-6-
/src/test/jointjs/cell.js:7:        var $fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/cell.js-8-        var $paper = $('<div/>');
##############################################
/src/test/jointjs/connectors.js-4-
/src/test/jointjs/connectors.js:5:        var $fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/connectors.js-6-        var $paper = $('<div/>');
##############################################
/src/test/jointjs/cellView.js-12-
/src/test/jointjs/cellView.js:13:        var $fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/cellView.js-14-        paper = new joint.dia.Paper;
##############################################
/src/test/jointjs/links.js-4-
/src/test/jointjs/links.js:5:        var $fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/links.js-6-        var $paper = $('<div/>');
##############################################
/src/test/jointjs/basic.js-4-
/src/test/jointjs/basic.js:5:        this.$fixture = $('<div>', { id: 'qunit-fixture' }).appendTo(document.body);
/src/test/jointjs/basic.js-6-        var $paper = $('<div/>');
##############################################
/src/test/jointjs/core/util.js-116-            var svgDoc = V('svg').append(vText);
/src/test/jointjs/core/util.js:117:            document.body.appendChild(svgDoc.node);
/src/test/jointjs/core/util.js-118-            var bbox = vText.getBBox();
##############################################
/src/test/jointjs/core/util.js-850-
/src/test/jointjs/core/util.js:851:                $htmlElement.appendTo(document.body);
/src/test/jointjs/core/util.js-852-            });
##############################################
/src/docs/demo/layout/Port/port.html-38-        return new joint.dia.Paper({
/src/docs/demo/layout/Port/port.html:39:            el: $('<div/>').appendTo(document.body),
/src/docs/demo/layout/Port/port.html-40-            width: 800,
##############################################
/src/docs/demo/layout/Port/portRotationComp.html-38-        return new joint.dia.Paper({
/src/docs/demo/layout/Port/portRotationComp.html:39:            el: $('<div/>').appendTo(document.body),
/src/docs/demo/layout/Port/portRotationComp.html-40-            width: 800,
##############################################
/src/docs/demo/layout/PortLabel/portLabel.html-38-        return new joint.dia.Paper({
/src/docs/demo/layout/PortLabel/portLabel.html:39:            el: $('<div/>').appendTo(document.body),
/src/docs/demo/layout/PortLabel/portLabel.html-40-            width: 800,
##############################################
/src/docs/demo/dia/Paper/interactive/vertexMove.html-35-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/vertexMove.html:36:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/vertexMove.html-37-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/enableAll.html-35-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/enableAll.html:36:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/enableAll.html-37-        width: 380,
##############################################
/src/docs/demo/dia/Paper/interactive/labelMove.html-36-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/labelMove.html:37:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/labelMove.html-38-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/useLinkTools.html-35-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/useLinkTools.html:36:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/useLinkTools.html-37-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/vertexAdd.html-35-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/vertexAdd.html:36:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/vertexAdd.html-37-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/addLinkFromMagnet.html-36-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/addLinkFromMagnet.html:37:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/addLinkFromMagnet.html-38-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/stopDelegation.html-36-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/stopDelegation.html:37:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/stopDelegation.html-38-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/arrowheadMove.html-35-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/arrowheadMove.html:36:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/arrowheadMove.html-37-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/elementMove.html-36-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/elementMove.html:37:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/elementMove.html-38-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/linkMove.html-36-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/linkMove.html:37:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/linkMove.html-38-        width: 190,
##############################################
/src/docs/demo/dia/Paper/interactive/vertexRemove.html-35-    var paper = new joint.dia.Paper({
/src/docs/demo/dia/Paper/interactive/vertexRemove.html:36:        el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Paper/interactive/vertexRemove.html-37-        width: 190,
##############################################
/src/docs/demo/dia/Element/portZIndex.html-38-        return new joint.dia.Paper({
/src/docs/demo/dia/Element/portZIndex.html:39:            el: $('<div/>').appendTo(document.body),
/src/docs/demo/dia/Element/portZIndex.html-40-            width: 800,
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToClientPoint.html-7-// Draw an HTML rectangle next to the element.
/src/docs/src/joint/api/dia/Paper/prototype/localToClientPoint.html:8:var div = document.createElement('div');
/src/docs/src/joint/api/dia/Paper/prototype/localToClientPoint.html-9-div.style.position = 'fixed';
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToClientPoint.html-16-div.style.marginTop = '-20px';
/src/docs/src/joint/api/dia/Paper/prototype/localToClientPoint.html:17:document.body.appendChild(div);</code></pre>
/src/docs/src/joint/api/dia/Paper/prototype/localToClientPoint.html-18-</p>
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToPaperRect.html-7-// Draw an HTML rectangle above the element.
/src/docs/src/joint/api/dia/Paper/prototype/localToPaperRect.html:8:var div = document.createElement('div');
/src/docs/src/joint/api/dia/Paper/prototype/localToPaperRect.html-9-div.style.position = 'absolute';
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToClientRect.html-7-// Draw an HTML rectangle above the element.
/src/docs/src/joint/api/dia/Paper/prototype/localToClientRect.html:8:var div = document.createElement('div');
/src/docs/src/joint/api/dia/Paper/prototype/localToClientRect.html-9-div.style.position = 'fixed';
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToPageRect.html-7-// Draw an HTML rectangle above the element.
/src/docs/src/joint/api/dia/Paper/prototype/localToPageRect.html:8:var div = document.createElement('div');
/src/docs/src/joint/api/dia/Paper/prototype/localToPageRect.html-9-div.style.position = 'absolute';
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToPageRect.html-14-div.style.height = pageRect1.height + 'px';
/src/docs/src/joint/api/dia/Paper/prototype/localToPageRect.html:15:document.body.appendChild(div);</code></pre>
/src/docs/src/joint/api/dia/Paper/prototype/localToPageRect.html-16-</p>
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToPaperPoint.html-7-// Draw an HTML rectangle next to the element.
/src/docs/src/joint/api/dia/Paper/prototype/localToPaperPoint.html:8:var div = document.createElement('div');
/src/docs/src/joint/api/dia/Paper/prototype/localToPaperPoint.html-9-div.style.position = 'absolute';
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToPagePoint.html-7-// Draw an HTML rectangle next to the element.
/src/docs/src/joint/api/dia/Paper/prototype/localToPagePoint.html:8:var div = document.createElement('div');
/src/docs/src/joint/api/dia/Paper/prototype/localToPagePoint.html-9-div.style.position = 'absolute';
##############################################
/src/docs/src/joint/api/dia/Paper/prototype/localToPagePoint.html-16-div.style.marginTop = '-20px';
/src/docs/src/joint/api/dia/Paper/prototype/localToPagePoint.html:17:document.body.appendChild(div);</code></pre>
/src/docs/src/joint/api/dia/Paper/prototype/localToPagePoint.html-18-</p>
##############################################
/src/docs/src/joint/api/dia/Link/labels.html-126-                    <td>
/src/docs/src/joint/api/dia/Link/labels.html:127:                        Optional. A number specifying the rotation of the label along the <code>.connection</code> path, in degrees. Angles 0-180 cause the label to rotate clockwise, angles 360-180 cause the label to rotate couterclockwise. This rotation is added on top of any rotation due to the <code>args.keepGradient</code> option. (Note that the <code>args.ensureLegibility</code> option is evaluated only after all these calculations are finished.)
/src/docs/src/joint/api/dia/Link/labels.html-128-                    </td>
##############################################
/src/docs/src/joint/api/util/toggleFullScreen.html-2-
/src/docs/src/joint/api/util/toggleFullScreen.html:3:<p>Make (or cancel) an <code>element</code> to be displayed full-screen. The default element is <code>window.top.document.body</code>.</p>
/src/docs/src/joint/api/util/toggleFullScreen.html-4-
##############################################
/src/docs/js/api.js-62-
/src/docs/js/api.js:63:            iframe.contentWindow.document.body.style.overflow = 'hidden';
/src/docs/js/api.js-64-
/src/docs/js/api.js-65-            // Set the height of the iframe element equal to the height of its contents.
/src/docs/js/api.js:66:            this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
/src/docs/js/api.js-67-
##############################################
/src/docs/js/api.js-77-        addClassToEl(iframe, 'loading');
/src/docs/js/api.js:78:        loadingElem = document.createElement('div');
/src/docs/js/api.js-79-        loadingElem.className = 'loadIFrame';
/src/docs/js/api.js:80:        loadingElemChild = document.createElement('div');
/src/docs/js/api.js:81:        loadingTextElemChild = document.createElement('p');
/src/docs/js/api.js-82-        top = parseInt(iframe.style.height) / 2 - loadingHeightMiddle;
##############################################
/src/dist/geometry.js-1401-            // we can work with that - if `NaN`, return 0
/src/dist/geometry.js:1402:            if (cpNormalizedLength !== cpNormalizedLength) { return 0; } // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`
/src/dist/geometry.js-1403-            // (`NaN` is the only value that is not equal to itself)
##############################################
/src/dist/joint.nowrap.js-1794-            // we can work with that - if `NaN`, return 0
/src/dist/joint.nowrap.js:1795:            if (cpNormalizedLength !== cpNormalizedLength) { return 0; } // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`
/src/dist/joint.nowrap.js-1796-            // (`NaN` is the only value that is not equal to itself)
##############################################
/src/dist/joint.nowrap.js-6016-
/src/dist/joint.nowrap.js:6017:                    el = document.createElementNS(ns.svg, el);
/src/dist/joint.nowrap.js-6018-                }
##############################################
/src/dist/joint.nowrap.js-6351-                    if (eol && j === lastJ) { annotation += eol; }
/src/dist/joint.nowrap.js:6352:                    tspanNode = document.createTextNode(annotation || ' ');
/src/dist/joint.nowrap.js-6353-                    if (baseSize && baseSize > maxFontSize) { maxFontSize = baseSize; }
##############################################
/src/dist/joint.nowrap.js-7190-
/src/dist/joint.nowrap.js:7191:            var svg = document.createElementNS(ns.svg, 'svg');
/src/dist/joint.nowrap.js-7192-            svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);
##############################################
/src/dist/joint.nowrap.js-8436-        var ns = namespace || svgNamespace;
/src/dist/joint.nowrap.js:8437:        var fragment = document.createDocumentFragment();
/src/dist/joint.nowrap.js-8438-        var queue = [json, fragment, ns];
##############################################
/src/dist/joint.nowrap.js-8449-                if (nodeDef.hasOwnProperty('namespaceURI')) { ns = nodeDef.namespaceURI; }
/src/dist/joint.nowrap.js:8450:                var node = document.createElementNS(ns, tagName);
/src/dist/joint.nowrap.js-8451-                var svg = (ns === svgNamespace);
##############################################
/src/dist/joint.nowrap.js-8841-        var textElement = V('text').attr(styles).append(textSpan).node;
/src/dist/joint.nowrap.js:8842:        var textNode = document.createTextNode('');
/src/dist/joint.nowrap.js-8843-
##############################################
/src/dist/joint.nowrap.js-8859-
/src/dist/joint.nowrap.js:8860:            document.body.appendChild(svgDocument);
/src/dist/joint.nowrap.js-8861-        }
##############################################
/src/dist/joint.nowrap.js-9069-            // clean svg document
/src/dist/joint.nowrap.js:9070:            document.body.removeChild(svgDocument);
/src/dist/joint.nowrap.js-9071-        }
##############################################
/src/dist/joint.nowrap.js-9125-            var url = window.URL.createObjectURL(blob);
/src/dist/joint.nowrap.js:9126:            var link = document.createElement('a');
/src/dist/joint.nowrap.js-9127-
##############################################
/src/dist/joint.nowrap.js-9129-            link.download = fileName;
/src/dist/joint.nowrap.js:9130:            document.body.appendChild(link);
/src/dist/joint.nowrap.js-9131-
##############################################
/src/dist/joint.nowrap.js-9133-
/src/dist/joint.nowrap.js:9134:            document.body.removeChild(link);
/src/dist/joint.nowrap.js-9135-            window.URL.revokeObjectURL(url); // mark the url for garbage collection
##############################################
/src/dist/joint.nowrap.js-9313-            // the DOM. The easiest way is to have a 'flag' node:
/src/dist/joint.nowrap.js:9314:            var nextSibling = parentNode.insertBefore(document.createTextNode(''), sortElement.nextSibling);
/src/dist/joint.nowrap.js-9315-
##############################################
/src/dist/joint.nowrap.js-9958-    /**
/src/dist/joint.nowrap.js:9959:     * @param {Element} el Element, which content is intent to display in full-screen mode, 'window.top.document.body' is default.
/src/dist/joint.nowrap.js-9960-     */
##############################################
/src/dist/joint.nowrap.js-10535-                        // Create a new title
/src/dist/joint.nowrap.js:10536:                        var titleNode = document.createElementNS(node.namespaceURI, 'title');
/src/dist/joint.nowrap.js-10537-                        titleNode.textContent = title;
##############################################
/src/dist/joint.nowrap.js-12823-                    var key = groups[i];
/src/dist/joint.nowrap.js:12824:                    this.groups[key] = this._evaluateGroup(data.groups[key]);
/src/dist/joint.nowrap.js-12825-                }
##############################################
/src/dist/joint.nowrap.js-12830-            for (var j = 0, m = ports.length; j < m; j++) {
/src/dist/joint.nowrap.js:12831:                this.ports.push(this._evaluatePort(ports[j]));
/src/dist/joint.nowrap.js-12832-            }
##############################################
/src/dist/joint.nowrap.js-12834-
/src/dist/joint.nowrap.js:12835:        _evaluateGroup: function(group) {
/src/dist/joint.nowrap.js-12836-
##############################################
/src/dist/joint.nowrap.js-12842-
/src/dist/joint.nowrap.js:12843:        _evaluatePort: function(port) {
/src/dist/joint.nowrap.js-12844-
/src/dist/joint.nowrap.js:12845:            var evaluated = assign({}, port);
/src/dist/joint.nowrap.js-12846-
##############################################
/src/dist/joint.nowrap.js-12848-
/src/dist/joint.nowrap.js:12849:            evaluated.markup = evaluated.markup || group.markup;
/src/dist/joint.nowrap.js:12850:            evaluated.attrs = merge({}, group.attrs, evaluated.attrs);
/src/dist/joint.nowrap.js:12851:            evaluated.position = this._createPositionNode(group, evaluated);
/src/dist/joint.nowrap.js:12852:            evaluated.label = merge({}, group.label, this._getLabel(evaluated));
/src/dist/joint.nowrap.js:12853:            evaluated.z = this._getZIndex(group, evaluated);
/src/dist/joint.nowrap.js:12854:            evaluated.size = assign({}, group.size, evaluated.size);
/src/dist/joint.nowrap.js-12855-
/src/dist/joint.nowrap.js:12856:            return evaluated;
/src/dist/joint.nowrap.js-12857-        },
##############################################
/src/dist/joint.nowrap.js-15219-            if (this.svgElement) {
/src/dist/joint.nowrap.js:15220:                return document.createElementNS(V.namespace.svg, tagName);
/src/dist/joint.nowrap.js-15221-            } else {
/src/dist/joint.nowrap.js:15222:                return document.createElement(tagName);
/src/dist/joint.nowrap.js-15223-            }
##############################################
/src/dist/joint.nowrap.js-18203-
/src/dist/joint.nowrap.js:18204:            // The set of tentative points to be evaluated, initially containing the start points.
/src/dist/joint.nowrap.js-18205-            // Rounded to nearest integer for simplicity.
##############################################
/src/dist/joint.nowrap.js-18283-
/src/dist/joint.nowrap.js:18284:                    // Closed points from the openSet were already evaluated.
/src/dist/joint.nowrap.js-18285-                    if (openSet.isClose(neighborKey) || !map.isPointAccessible(neighborPoint)) { continue; }
##############################################
/src/dist/joint.nowrap.js-19307-            var children = V(labelMarkup);
/src/dist/joint.nowrap.js:19308:            var fragment = document.createDocumentFragment();
/src/dist/joint.nowrap.js-19309-
##############################################
/src/dist/joint.nowrap.js-23442-            if (pivot) { return pivot; }
/src/dist/joint.nowrap.js:23443:            pivot = pivots[z] = document.createComment('z-index:' + (z + 1));
/src/dist/joint.nowrap.js-23444-            var neighborZ = -Infinity;
##############################################
/src/dist/joint.nowrap.js-24474-                opt = this._background = cloneDeep(opt);
/src/dist/joint.nowrap.js:24475:                var img = document.createElement('img');
/src/dist/joint.nowrap.js-24476-                img.onload = this.drawBackgroundImage.bind(this, img, opt);
##############################################
/src/dist/joint.nowrap.js-24626-
/src/dist/joint.nowrap.js:24627:                var canvas = document.createElement('canvas');
/src/dist/joint.nowrap.js-24628-                var imgWidth = img.width;
##############################################
/src/dist/joint.nowrap.js-24653-
/src/dist/joint.nowrap.js:24654:                var canvas = document.createElement('canvas');
/src/dist/joint.nowrap.js-24655-                var imgWidth = img.width;
##############################################
/src/dist/joint.nowrap.js-24675-
/src/dist/joint.nowrap.js:24676:                var canvas = document.createElement('canvas');
/src/dist/joint.nowrap.js-24677-                var imgWidth = img.width;
##############################################
/src/dist/joint.nowrap.js-24702-
/src/dist/joint.nowrap.js:24703:                var canvas = document.createElement('canvas');
/src/dist/joint.nowrap.js-24704-                canvas.width = imgWidth * 3;
##############################################
/src/dist/joint.nowrap.js-25305-            svgforeignobject: function() {
/src/dist/joint.nowrap.js:25306:                return !!document.createElementNS &&
/src/dist/joint.nowrap.js:25307:                    /SVGForeignObject/.test(({}).toString.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));
/src/dist/joint.nowrap.js-25308-            }
##############################################
/src/dist/joint.core.min.js-7-*/
/src/dist/joint.core.min.js:8:if(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("backbone"),require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["exports","backbone","lodash","jquery"],e):e((t=t||self).joint={},t.Backbone,t._,t.$)}(this,function(e,s,n,C){"use strict";var i,h,r,l;s=s&&s.hasOwnProperty("default")?s.default:s,n=n&&n.hasOwnProperty("default")?n.default:n,C=C&&C.hasOwnProperty("default")?C.default:C,Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var r,o,s=0|e,a=Math.max(0<=s?s:i-Math.abs(s),0);for(;a<i;){if((r=n[a])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=e[r];if(t.call(i,o,r,e))return o;r++}}}),Array.from||(Array.from=(i=Object.prototype.toString,h=function(t){return"function"==typeof t||"[object Function]"===i.call(t)},r=Math.pow(2,53)-1,l=function(t){var e,n=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(n,0),r)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!h(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var r,o=l(e.length),s=h(this)?Object(new this(o)):new Array(o),a=0;a<o;)r=e[a],s[a]=i?void 0===n?i(r,a):i.call(n,r,a):r,a+=1;return s.length=o,s})),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=e[r];if(t.call(i,o,r,e))return r;r++}return-1}}),function(){var t=void 0!==e?e:this,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function h(t){this.message=t}(h.prototype=new Error).name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var e,n,i=String(t),r=0,o=a,s="";i.charAt(0|r)||(o="=",r%1);s+=o.charAt(63&e>>8-r%1*8)){if(255<(n=i.charCodeAt(r+=.75)))throw new h("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return s}),t.atob||(t.atob=function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new h("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,r=0,o=0,s="";i=e.charAt(o++);~i&&(n=r%4?64*n+i:i,r++%4)?s+=String.fromCharCode(255&n>>(-2*r&6)):0)i=a.indexOf(i);return s})}(),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isNaN=Number.isNaN||function(t){return t!=t},String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),function(){function i(t,e){return this.slice(t,e)}function r(t,e){arguments.length<2&&(e=0);for(var n=0,i=t.length;n<i;++n,++e)this[e]=255&t[n]}function t(t){var e;if("number"==typeof t){e=new Array(t);for(var n=0;n<t;++n)e[n]=0}else e=t.slice(0);return e.subarray=i,(e.buffer=e).byteLength=e.length,e.set=r,"object"==typeof t&&t.buffer&&(e.buffer=t.buffer),e}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=t,window.Uint32Array=t,window.Int32Array=t)}(),"undefined"!=typeof XMLHttpRequest&&("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}}));var o=Math,F=o.abs,u=o.cos,c=o.sin,_=o.sqrt,R=o.min,B=o.max,d=o.atan2,a=o.round,f=o.floor,p=o.PI,T=o.pow,t={curveThroughPoints:function(t){return console.warn("deprecated"),new D(g.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,n=[],i=[],r=t.length-1;if(1==r)return n[0]=new z((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),i[0]=new z(2*n[0].x-t[0].x,2*n[0].y-t[0].y),[n,i];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var s=this.getFirstControlPoints(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var a=this.getFirstControlPoints(o);for(e=0;e<r;e++)n.push(new z(s[e],a[e])),e<r-1?i.push(new z(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):i.push(new z((t[r].x+s[r-1])/2,(t[r].y+a[r-1])/2));return[n,i]},getCurveDivider:function(t,e,n,i){console.warn("deprecated");var r=new g(t,e,n,i);return function(t){var e=r.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var o=1;o<e;o++)i[o]=1/r,r=(o<e-1?4:3.5)-i[o],n[o]=(t[o]-n[o-1])/r;for(o=1;o<e;o++)n[e-o-1]-=i[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,i){console.warn("deprecated");var r=new g(t,e,n,i);return function(t){return r.closestPointT(t)}}},g=function(t,e,n,i){return this instanceof g?t instanceof g?new g(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new z(t),this.controlPoint1=new z(e),this.controlPoint2=new z(n),void(this.end=new z(i))):new g(t,e,n,i)};g.throughPoints=function(){function h(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var o=1;o<e;o++)i[o]=1/r,r=(o<e-1?4:3.5)-i[o],n[o]=(t[o]-n[o-1])/r;for(o=1;o<e;o++)n[e-o-1]-=i[e-o]*n[e-o];return n}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var e=function(t){var e,n=[],i=[],r=t.length-1;if(1==r)return n[0]=new z((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),i[0]=new z(2*n[0].x-t[0].x,2*n[0].y-t[0].y),[n,i];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var s=h(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var a=h(o);for(e=0;e<r;e++)n.push(new z(s[e],a[e])),e<r-1?i.push(new z(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):i.push(new z((t[r].x+s[r-1])/2,(t[r].y+a[r-1])/2));return[n,i]}(t),n=[],i=e[0].length,r=0;r<i;r++){var o=new z(e[0][r].x,e[0][r].y),s=new z(e[1][r].x,e[1][r].y);n.push(new g(t[r],o,s,t[r+1]))}return n}}(),g.prototype={bbox:function(){for(var t,e,n,i,r,o,s,a,h=this.start,l=this.controlPoint1,u=this.controlPoint2,c=this.end,d=h.x,f=h.y,p=l.x,g=l.y,v=u.x,m=u.y,y=c.x,w=c.y,b=new Array,x=new Array,A=[new Array,new Array],P=0;P<2;++P)if(n=0===P?(e=6*d-12*p+6*v,t=-3*d+9*p-9*v+3*y,3*p-3*d):(e=6*f-12*g+6*m,t=-3*f+9*g-9*m+3*w,3*g-3*f),F(t)<1e-12){if(F(e)<1e-12)continue;0<(i=-n/e)&&i<1&&x.push(i)}else a=_(s=e*e-4*n*t),s<0||(0<(r=(-e+a)/(2*t))&&r<1&&x.push(r),0<(o=(-e-a)/(2*t))&&o<1&&x.push(o));for(var S,k,E,C=x.length,T=C;C--;)k=(S=1-(i=x[C]))*S*S*d+3*S*S*i*p+3*S*i*i*v+i*i*i*y,A[0][C]=k,E=S*S*S*f+3*S*S*i*g+3*S*i*i*m+i*i*i*w,A[1][C]=E,b[C]={X:k,Y:E};x[T]=0,x[T+1]=1,b[T]={X:d,Y:f},b[T+1]={X:y,Y:w},A[0][T]=d,A[1][T]=f,A[0][T+1]=y,A[1][T+1]=w,x.length=T+2,A[0].length=T+2,A[1].length=T+2,b.length=T+2;var L=R.apply(null,A[0]),M=R.apply(null,A[1]),N=B.apply(null,A[0]),V=B.apply(null,A[1]);return new X(L,M,N-L,V-M)},clone:function(){return new g(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},r=this.closestPointLength(t,i);if(!r)return 0;var o=this.length(i);return 0===o?0:r/o},closestPointT:function(t,e){for(var n,i,r,o,s,a,h,l=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.subdivisions?this.getSubdivisions({precision:l}):e.subdivisions,c=u.length,d=c?1/c:0,f=0;f<c;f++){var p=u[f],g=p.start.distance(t),v=p.end.distance(t),m=g+v;(!h||m<h)&&(i=f*d,r=(f+1)*d,o=g,s=v,a=(n=p).start.distance(p.end),h=m)}for(var y=T(10,-l);;){var w=o?F(o-s)/o:0,b=s?F(o-s)/s:0;if(w<y||b<y||(!o||o<a*y||(!s||s<a*y)))return o<=s?i:r;var x=n.divide(.5);d/=2;var A=x[0].start.distance(t),P=x[0].end.distance(t),S=A+P,k=x[1].start.distance(t),E=x[1].end.distance(t);s=S<=k+E?(n=x[0],r-=d,o=A,P):(n=x[1],i+=d,o=k,E)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(1<=t)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,i=this.controlPoint2,r=this.end;if(t<=0)return[new g(e,e,e,e),new g(e,n,i,r)];if(1<=t)return[new g(e,n,i,r),new g(r,r,r,r)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,h=o.divider,l=o.dividerControlPoint1,u=o.dividerControlPoint2;return[new g(e,s,a,h),new g(h,l,u,r)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,i=this.controlPoint2,r=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:i.clone()};if(1<=t)return{startControlPoint1:n.clone(),startControlPoint2:i.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};var o=new O(e,n).pointAt(t),s=new O(n,i).pointAt(t),a=new O(i,r).pointAt(t),h=new O(o,s).pointAt(t),l=new O(s,a).pointAt(t);return{startControlPoint1:o,startControlPoint2:h,divider:new O(h,l).pointAt(t),dividerControlPoint1:l,dividerControlPoint2:a}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=[new g(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return n;for(var i=this.endpointDistance(),r=T(10,-e),o=0;;){o+=1;for(var s=[],a=n.length,h=0;h<a;h++){var l=n[h].divide(.5);s.push(l[0],l[1])}for(var u=0,c=s.length,d=0;d<c;d++){u+=s[d].endpointDistance()}if(1<o&&(0!==u?(u-i)/u:0)<r)return s;n=s,i=u}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(i))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,i=0,r=n.length,o=0;o<r;o++){i+=n[o].endpointDistance()}return i},lengthAtT:function(t,e){if(t<=0)return 0;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():1<=t?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,i=e.dividerControlPoint1,r=e.divider,o=new O(n,i);return o.translate(r.x-n.x,r.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(1<=t)return 1;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},r=this.length(i)*t;return this.tAtLength(r,i)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t);for(var i,r,o,s,a,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.subdivisions?this.getSubdivisions({precision:h}):e.subdivisions,u={precision:h,subdivisions:l},c=0,d=l.length,f=1/d,p=0;p<d;p++){var g=n?p:d-1-p,v=l[p],m=v.endpointDistance();if(t<=c+m){i=v,r=g*f,o=(g+1)*f,s=n?t-c:m+c-t,a=n?m+c-t:t-c;break}c+=m}if(!i)return n?1:0;for(var y=this.length(u),w=T(10,-h);;){var b,x;if((0!==y?s/y:0)<w)return r;if((0!==y?a/y:0)<w)return o;var A=i.divide(.5);f/=2;var P=A[0].endpointDistance(),S=A[1].endpointDistance();x=s<=P?(i=A[0],o-=f,P-(b=s)):(i=A[1],r+=f,S-(b=s-P)),s=b,a=x}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,i=[n[0].start.clone()],r=n.length,o=0;o<r;o++){var s=n[o];i.push(s.end.clone())}return i},toPolyline:function(t){return new L(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},g.prototype.divide=g.prototype.divideAtT;var x=function(t,e,n){return this instanceof x?t instanceof x?new x(new z(t.x,t.y),t.a,t.b):(t=new z(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new x(t,e,n)};x.fromRect=function(t){return t=new X(t),new x(t.center(),t.width/2,t.height/2)},x.prototype={bbox:function(){return new X(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new z(this.x,this.y)},clone:function(){return new x(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,i=t.end,r=this.a,o=this.b,s=t.vector(),a=n.difference(new z(this)),h=new z(s.x/(r*r),s.y/(o*o)),l=new z(a.x/(r*r),a.y/(o*o)),u=s.dot(h),c=s.dot(l),d=c*c-u*(a.dot(l)-1);if(d<0)return null;if(0<d){var f=_(d),p=(-c-f)/u,g=(-c+f)/u;if((p<0||1<p)&&(g<0||1<g))return null;0<=p&&p<=1&&e.push(n.lerp(i,p)),0<=g&&g<=1&&e.push(n.lerp(i,g))}else{var v=-c/u;if(!(0<=v&&v<=1))return null;e.push(n.lerp(i,v))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new z(t),e&&t.rotate(new z(this.x,this.y),e);var n,i=t.x-this.x,r=t.y-this.y;if(0===i)return n=this.bbox().pointNearestToPoint(t),e?n.rotate(new z(this.x,this.y),-e):n;var o=r/i,s=o*o,a=this.a*this.a,h=this.b*this.b,l=_(1/(1/a+s/h)),u=o*(l=i<0?-l:l);return n=new z(this.x+l,this.y+u),e?n.rotate(new z(this.x,this.y),-e):n},normalizedDistance:function(t){var e=t.x,n=t.y,i=this.a,r=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(i*i)+(n-s)*(n-s)/(r*r)},tangentTheta:function(t){var e,n,i=t.x,r=t.y,o=this.a,s=this.b,a=this.bbox().center(),h=a.x,l=a.y,u=i>a.x+o/2,c=i<a.x-o/2;return u||c?n=o*o/(i-h)-o*o*(r-l)*((e=i>a.x?r-30:r+30)-l)/(s*s*(i-h))+h:e=s*s/(r-l)-s*s*(i-h)*((n=r>a.y?i+30:i-30)-h)/(o*o*(r-l))+l,new z(n,e).theta(t)},toString:function(){return new z(this.x,this.y).toString()+" "+this.a+" "+this.b}};var O=function(t,e){return this instanceof O?t instanceof O?new O(t.start,t.end):(this.start=new z(t),void(this.end=new z(e))):new O(t,e)};O.prototype={angle:function(){var t=new z(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=R(this.start.x,this.end.x),e=R(this.start.y,this.end.y),n=B(this.start.x,this.end.x),i=B(this.start.y,this.end.y);return new X(t,e,n-t,i-e)},bearing:function(){var t=A(this.start.y),e=A(this.end.y),n=this.start.x,i=this.end.x,r=A(i-n),o=c(r)*u(e),s=u(t)*c(e)-c(t)*u(e)*u(r),a=y(d(o,s))-22.5;return a<0&&(a+=360),["NE","E","SE","S","SW","W","NW","N"][a=parseInt(a/45)]},clone:function(){return new O(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new O(this.start,t).vector()),n=R(1,B(0,e/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var i=this.length();return!(new O(e,t).length()>i)&&!(new O(t,n).length()>i)},divideAt:function(t){var e=this.pointAt(t);return[new O(this.start,e),new O(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new O(this.start,e),new O(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t instanceof O||t instanceof X||t instanceof L||t instanceof x||t instanceof D){var n=t.intersectionWithLine(this,e);return n&&t instanceof O&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new z(this.end.x-this.start.x,this.end.y-this.start.y),n=new z(t.end.x-t.start.x,t.end.y-t.start.y),i=e.x*n.y-e.y*n.x,r=new z(t.start.x-this.start.x,t.start.y-this.start.y),o=r.x*n.y-r.y*n.x,s=r.x*e.y-r.y*e.x;if(0===i||o*i<0||s*i<0)return null;if(0<i){if(i<o||i<s)return null}else if(o<i||s<i)return null;return[new z(this.start.x+o*e.x/i,this.start.y+o*e.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return _(this.squaredLength())},midpoint:function(){return new z((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){var e=this.clone();if(!this.isDifferentiable())return e;var n=e.start,i=e.end,r=n.clone().rotate(i,270),o=i.clone().rotate(n,90);return n.move(o,t),i.move(r,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():1<=t?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,i=!0;t<0&&(i=!1,t=-t);var r=this.length();return r<=t?i?n.clone():e.clone():this.pointAt((i?t:r-t)/r)},pointOffset:function(t){t=new z(t);var e=this.start,n=this.end;return((n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){var e=T(10,t||0);return this.start.x=a(this.start.x*e)/e,this.start.y=a(this.start.y*e)/e,this.end.x=a(this.end.x*e)/e,this.end.y=a(this.end.y*e)/e,this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){var t=this.start.x,e=this.start.y;return(t-=this.end.x)*t+(e-=this.end.y)*e},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,i=this.pointAt(t),r=new O(e,n);return r.translate(i.x-e.x,i.y-e.y),r},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,i=this.pointAtLength(t),r=new O(e,n);return r.translate(i.x-e.x,i.y-e.y),r},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new z(this.end.x-this.start.x,this.end.y-this.start.y)}},O.prototype.intersection=O.prototype.intersect;var D=function(t){if(!(this instanceof D))return new D(t);if("string"==typeof t)return new D.parse(t);var e,n;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(n=(t=t.reduce(function(t,e){return t.concat(e)},[])).length,t[0].isSegment)for(e=0;e<n;e++){var i=t[e];this.appendSegment(i)}else{var r=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof O||o instanceof g))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(D.createSegment("M",o.start)),r&&!r.end.equals(o.start)&&this.appendSegment(D.createSegment("M",o.start)),o instanceof O?this.appendSegment(D.createSegment("L",o.end)):o instanceof g&&this.appendSegment(D.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),r=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof O)this.appendSegment(D.createSegment("M",t.start)),this.appendSegment(D.createSegment("L",t.end));else if(t instanceof g)this.appendSegment(D.createSegment("M",t.start)),this.appendSegment(D.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof L))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(n=t.points.length,e=0;e<n;e++){var s=t.points[e];0===e?this.appendSegment(D.createSegment("M",s)):this.appendSegment(D.createSegment("L",s))}}else;};D.parse=function(t){if(!t)return new D;for(var e=new D,n=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),i=n.length,r=0;r<i;r++){var o=n[r].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=D.createSegment.apply(this,o);e.appendSegment(s)}return e},D.createSegment=function(t){var e=arguments;if(!t)throw new Error("Type must be provided.");var n=D.segmentTypes[t];if(!n)throw new Error(t+" is not a recognized path segment type.");for(var i=[],r=arguments.length,o=1;o<r;o++)i.push(e[o]);return E(n,i)},D.prototype={appendSegment:function(t){var e,n=this.segments,i=n.length,r=0!==i?n[i-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var o=t.length,s=0;s<o;s++){var a=t[s];e=this.prepareSegment(a,r,null),n.push(e),r=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,r,null),n.push(e)}},bbox:function(){var t,e=this.segments,n=e.length;if(0===n)return null;for(var i=0;i<n;i++){var r=e[i];if(r.isVisible){var o=r.bbox();t=t?t.union(o):o}}if(t)return t;var s=e[n-1];return new X(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new D,i=0;i<e;i++){var r=t[i].clone();n.appendSegment(r)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.closestPointT(t,i);return r?this.lengthAtT(r,i):0},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.closestPointLength(t,i);if(0===r)return 0;var o=this.length(i);return 0===o?0:r/o},closestPointT:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,h=0;h<i;h++){var l=n[h],u=s[h];if(l.isVisible){var c=l.closestPointT(t,{precision:o,subdivisions:u}),d=l.pointAtT(c),f=new O(d,t).squaredLength();f<a&&(r={segmentIndex:h,value:c},a=f)}}return r||{segmentIndex:i-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,h=0;h<i;h++){var l=n[h],u=s[h];if(l.isDifferentiable()){var c=l.closestPointT(t,{precision:o,subdivisions:u}),d=l.pointAtT(c),f=new O(d,t).squaredLength();f<a&&(r=l.tangentAtT(c),a=f)}}return r||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var i=n.length,r=0,o=0;o<i;o++){n[o].containsPoint(t)&&r++}return r%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.divideAtLength(r,i)},divideAtLength:function(t,e){var n=this.segments.length;if(0===n)return null;var i=!0;t<0&&(i=!1,t=-t);var r,o,s,a,h,l,u,c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,d=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):e.segmentSubdivisions,f=0;for(r=0;r<n;r++){var p=i?r:n-1-r;o=this.getSegment(p);var g=d[p],v=o.length({precision:c,subdivisions:g});if(o.isDifferentiable()&&(h=o,l=p,t<=f+v)){a=p,s=o.divideAtLength((i?1:-1)*(t-f),{precision:c,subdivisions:g});break}f+=v}if(!h)return null;s||(a=l,u=i?1:0,s=h.divideAtT(u));var m=this.clone();m.replaceSegment(a,s);var y=a,w=a+1,b=a+2;s[0].isDifferentiable()||(m.removeSegment(y),w-=1,b-=1);var x=m.getSegment(w).start;m.insertSegment(w,D.createSegment("M",x)),b+=1,s[1].isDifferentiable()||(m.removeSegment(b-1),b-=1);var A=b-y-1;for(r=b;r<m.segments.length;r++){var P=this.getSegment(r-A);if("Z"===(o=m.getSegment(r)).type&&!P.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var S=D.createSegment("L",P.end);m.replaceSegment(r,S)}}return[new D(m.segments.slice(0,w)),new D(m.segments.slice(w))]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,i=e.length;if(n.length!==i)return!1;for(var r=0;r<i;r++){var o=e[r],s=n[r];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),n<=t||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,n=e.length,i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=[],o=0;o<n;o++){var s=e[o].getSubdivisions({precision:i});r.push(s)}return r},insertSegment:function(t,e){var n,i=this.segments,r=i.length;if(t<0&&(t=r+t+1),r<t||t<0)throw new Error("Index out of range.");var o=null,s=null;if(0!==r&&(s=1<=t?(o=i[t-1]).nextSegment:i[0]),Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var a=e.length,h=0;h<a;h++){var l=e[h];n=this.prepareSegment(l,o,s),i.splice(t+h,0,n),o=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,o,s),i.splice(t,0,n)}},intersectionWithLine:function(t,e){var n=null,i=this.toPolylines(e);if(!i)return null;for(var r=0,o=i.length;r<o;r++){var s=i[r],a=t.intersect(s);a&&(n||(n=[]),Array.isArray(a)?Array.prototype.push.apply(n,a):n.push(a))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++){if(t[n].isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,n=e.length;if(0===n)return 0;for(var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o=0,s=0;s<n;s++){var a=e[s],h=r[s];o+=a.length({subdivisions:h})}return o},lengthAtT:function(t,e){var n=this.segments,i=n.length;if(0===i)return 0;var r=t.segmentIndex;if(r<0)return 0;var o=t.value;i<=r?(r=i-1,o=1):o<0?o=0:1<o&&(o=1);for(var s,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,h=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,l=0,u=0;u<r;u++){var c=n[u];s=h[u],l+=c.length({precisison:a,subdivisions:s})}return c=n[r],s=h[r],l+=c.lengthAtT(o,{precisison:a,subdivisions:s})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.pointAtLength(r,i)},pointAtLength:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;if(0===t)return this.start.clone();var r=!0;t<0&&(r=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,h=0,l=0;l<i;l++){var u=r?l:i-1-l,c=n[u],d=a[u],f=c.length({precision:s,subdivisions:d});if(c.isVisible){if(t<=h+f)return c.pointAtLength((r?1:-1)*(t-h),{precision:s,subdivisions:d});o=c}h+=f}return o?r?o.end:o.start:n[i-1].end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var i=t.segmentIndex;if(i<0)return e[0].pointAtT(0);if(n<=i)return e[n-1].pointAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[i].pointAtT(r)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var i=t;return t.isSubpathStart&&(t.subpathStartSegment=t,i=n),i&&this.updateSubpathStartSegment(i),t},removeSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),n<=t||t<0)throw new Error("Index out of range.");var i=e.splice(t,1)[0],r=i.previousSegment,o=i.nextSegment;r&&(r.nextSegment=o),o&&(o.previousSegment=r),i.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n,i=this.segments,r=i.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),r<=t||t<0)throw new Error("Index out of range.");var o=i[t],s=o.previousSegment,a=o.nextSegment,h=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");i.splice(t,1);for(var l=e.length,u=0;u<l;u++){var c=e[u];n=this.prepareSegment(c,s,a),i.splice(t+u,0,n),s=n,h&&n.isSubpathStart&&(h=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,s,a),i.splice(t,1,n),h&&n.isSubpathStart&&(h=!1)}h&&a&&this.updateSubpathStartSegment(a)},scale:function(t,e,n){for(var i=this.segments,r=i.length,o=0;o<r;o++){i[o].scale(t,e,n)}return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.segmentIndexAtLength(r,i)},segmentIndexAtLength:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=null,h=0,l=0;l<i;l++){var u=r?l:i-1-l,c=n[u],d=s[u],f=c.length({precision:o,subdivisions:d});if(c.isVisible){if(t<=h+f)return u;a=u}h+=f}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.tangentAtLength(r,i)},tangentAtLength:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,h=0,l=0;l<i;l++){var u=r?l:i-1-l,c=n[u],d=a[u],f=c.length({precision:s,subdivisions:d});if(c.isDifferentiable()){if(t<=h+f)return c.tangentAtLength((r?1:-1)*(t-h),{precision:s,subdivisions:d});o=c}h+=f}if(o){var p=r?1:0;return o.tangentAtT(p)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var i=t.segmentIndex;if(i<0)return e[0].tangentAtT(0);if(n<=i)return e[n-1].tangentAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[i].tangentAtT(r)},toPoints:function(t){var e=this.segments,n=e.length;if(0===n)return null;for(var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o=[],s=[],a=0;a<n;a++){var h=e[a];if(h.isVisible){var l=r[a];if(0<l.length){var u=l.map(function(t){return t.start});Array.prototype.push.apply(s,u)}else s.push(h.start)}else 0<s.length&&(s.push(e[a-1].end),o.push(s),s=[])}return 0<s.length&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var i=0,r=n.length;i<r;i++)e.push(new L(n[i]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",i=0;i<e;i++){n+=t[i].serialize()+" "}return n.trim()},translate:function(t,e){for(var n=this.segments,i=n.length,r=0;r<i;r++){n[r].translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,t=(e=t).nextSegment}},Object.defineProperty(D.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var i=t[n];if(i.isVisible)return i.start}return t[e-1].end}}),Object.defineProperty(D.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;0<=n;n--){var i=t[n];if(i.isVisible)return i.end}return t[e-1].end}});var z=function(t,e){if(!(this instanceof z))return new z(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};z.fromPolar=function(t,e,n){n=n&&new z(n)||new z(0,0);var i=F(t*u(e)),r=F(t*c(e)),o=b(y(e));return o<90?r=-r:o<180?(i=-i,r=-r):o<270&&(i=-i),new z(n.x+i,n.y+r)},z.random=function(t,e,n,i){return new z(m(t,e),m(n,i))},z.prototype={chooseClosest:function(t){var e=t.length;if(1===e)return new z(t[0]);for(var n=null,i=1/0,r=0;r<e;r++){var o=new z(t[r]),s=this.squaredDistance(o);s<i&&(n=o,i=s)}return n},adhereToRect:function(t){return t.containsPoint(this)||(this.x=R(B(this.x,t.x),t.x+t.width),this.y=R(B(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return new O(this,t).bearing()},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new z(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new z(this.x-(t||0),this.y-(e||0))},distance:function(t){return new O(this,t).length()},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,i=this.y;return new z((1-e)*n+e*t.x,(1-e)*i+e*t.y)},magnitude:function(){return _(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return F(t.x-this.x)+F(t.y-this.y)},move:function(t,e){var n=A(new z(t).theta(this));return this.offset(u(n)*e,-c(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new z(t).move(this,this.distance(t))},rotate:function(t,e){t=t||new z(0,0),e=A(b(-e));var n=u(e),i=c(e),r=n*(this.x-t.x)-i*(this.y-t.y)+t.x,o=i*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=r,this.y=o,this},round:function(t){var e=T(10,t||0);return this.x=a(this.x*e)/e,this.y=a(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new z(n)||new z(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=v(this.x,t),this.y=v(this.y,e||t),this},squaredDistance:function(t){return new O(this,t).squaredLength()},theta:function(t){var e=-((t=new z(t)).y-this.y),n=t.x-this.x,i=d(e,n);return i<0&&(i=2*p+i),180*i/p},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new z(t)||new z(0,0);var e=this.x,n=this.y;return this.x=_((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=A(t.theta(new z(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new z(0,0).angleBetween(this,t)}},z.prototype.translate=z.prototype.offset;var L=function(t){return this instanceof L?"string"==typeof t?new L.parse(t):void(this.points=Array.isArray(t)?t.map(z):[]):new L(t)};L.parse=function(t){if(""===(t=t.trim()))return new L;for(var e=[],n=t.split(/\s*,\s*|\s+/),i=n.length,r=0;r<i;r+=2)e.push({x:+n[r],y:+n[r+1]});return new L(e)},L.prototype={bbox:function(){var t=1/0,e=-1/0,n=1/0,i=-1/0,r=this.points,o=r.length;if(0===o)return null;for(var s=0;s<o;s++){var a=r[s],h=a.x,l=a.y;h<t&&(t=h),e<h&&(e=h),l<n&&(n=l),i<l&&(i=l)}return new X(t,n,e-t,i-n)},clone:function(){var t=this.points,e=t.length;if(0===e)return new L;for(var n=[],i=0;i<e;i++){var r=t[i].clone();n.push(r)}return new L(n)},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,n=this.points,i=n.length;if(0===i)return 0;if(1===i)return 0;for(var r=1/0,o=0,s=i-1,a=0;a<s;a++){var h=new O(n[a],n[a+1]),l=h.length(),u=h.closestPointNormalizedLength(t),c=h.pointAt(u).squaredDistance(t);c<r&&(r=c,e=o+u*l),o+=l}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var n=this.length();return 0===n?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(0===n)return!1;for(var i=t.x,r=t.y,o=n-1,s=0,a=0;s<n;s++){var h=e[o],l=e[s];if(t.equals(h))return!0;var u=new O(h,l);if(u.containsPoint(t))return!0;if(r<=h.y&&r>l.y||r>h.y&&r<=l.y){var c=h.x-i>l.x-i?h.x-i:l.x-i;if(0<=c){var d=new z(i+c,r),f=new O(t,d);u.intersect(f)&&a++}}o=s}return a%2==1},convexHull:function(){var t,e,n,i=this.points,r=i.length;if(0===r)return new L;for(t=0;t<r;t++)void 0===n?n=i[t]:i[t].y<n.y?n=i[t]:i[t].y===n.y&&i[t].x>n.x&&(n=i[t]);var o=[];for(t=0;t<r;t++){var s=n.theta(i[t]);0===s&&(s=360);var a=[i[t],t,s];o.push(a)}if(o.sort(function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n}),2<o.length){var h=o[o.length-1];o.unshift(h)}for(var l,u,c,d,f,p,g,v={},m=[];0!==o.length;)if(u=(l=o.pop())[0],!v.hasOwnProperty(l[0]+"@@"+l[1]))for(var y=!1;!y;)if(m.length<2)m.push(l),y=!0;else{d=(c=m.pop())[0];var w=(p=(f=m.pop())[0]).cross(d,u);if(w<0)m.push(f),m.push(c),m.push(l),y=!0;else if(0===w){var b=d.angleBetween(p,u);F(b-180)<1e-10?(v[c[0]+"@@"+c[1]]=d,m.push(f)):d.equals(u)||p.equals(d)?(v[c[0]+"@@"+c[1]]=d,m.push(f)):F((b+1)%360-1)<1e-10&&(m.push(f),o.push(c))}else v[c[0]+"@@"+c[1]]=d,m.push(f)}2<m.length&&m.pop();var x=-1;for(e=m.length,t=0;t<e;t++){var A=m[t][1];(void 0===g||A<g)&&(g=A,x=t)}var P=[];if(0<x){var S=m.slice(x),k=m.slice(0,x);P=S.concat(k)}else P=m;var E=[];for(e=P.length,t=0;t<e;t++)E.push(P[t][0]);return new L(E)},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,i=e.length;if(n.length!==i)return!1;for(var r=0;r<i;r++){var o=e[r],s=t.points[r];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new O(t),n=[],i=this.points,r=0,o=i.length-1;r<o;r++){var s=i[r],a=i[r+1],h=new O(s,a),l=e.intersectionWithLine(h);l&&n.push(l[0])}return 0<n.length?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var n=e-1,i=0;i<n;i++){var r=t[i],o=t[i+1];if(new O(r,o).isDifferentiable())return!0}return!1},length:function(){var t=this.points,e=t.length;if(0===e)return 0;for(var n=0,i=e-1,r=0;r<i;r++)n+=t[r].distance(t[r+1]);return n},pointAt:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(1<=t)return e[n-1].clone();var i=this.length()*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var i=!0;t<0&&(i=!1,t=-t);for(var r=0,o=n-1,s=0;s<o;s++){var a=i?s:o-1-s,h=e[a],l=e[a+1],u=new O(h,l),c=h.distance(l);if(t<=r+c)return u.pointAtLength((i?1:-1)*(t-r));r+=c}return(i?e[n-1]:e[0]).clone()},scale:function(t,e,n){var i=this.points,r=i.length;if(0===r)return this;for(var o=0;o<r;o++)i[o].scale(t,e,n);return this},simplify:function(t){void 0===t&&(t={});var e=this.points;if(e.length<3)return this;for(var n=t.threshold||0,i=0;e[i+2];){var r=i+1,o=i+2,s=e[i],a=e[r],h=e[o];new O(s,h).closestPoint(a).distance(a)<=n?e.splice(r,1):i+=1}return this},tangentAt:function(t){var e=this.points.length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),1<t&&(t=1);var n=this.length()*t;return this.tangentAtLength(n)},tangentAtLength:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return null;var i,r=!0;t<0&&(r=!1,t=-t);for(var o=0,s=n-1,a=0;a<s;a++){var h=r?a:s-1-a,l=e[h],u=e[h+1],c=new O(l,u),d=l.distance(u);if(c.isDifferentiable()){if(t<=o+d)return c.tangentAtLength((r?1:-1)*(t-o));i=c}o+=d}if(i){var f=r?1:0;return i.tangentAt(f)}return null},toString:function(){return this.points+""},translate:function(t,e){var n=this.points,i=n.length;if(0===i)return this;for(var r=0;r<i;r++)n[r].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var n="",i=0;i<e;i++){var r=t[i];n+=r.x+","+r.y+" "}return n.trim()}},Object.defineProperty(L.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(L.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});var X=function(t,e,n,i){if(!(this instanceof X))return new X(t,e,n,i);Object(t)===t&&(e=t.y,n=t.width,i=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===i?0:i};X.fromEllipse=function(t){return t=new x(t),new X(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},X.prototype={bbox:function(t){if(!t)return this.clone();var e=A(t),n=F(c(e)),i=F(u(e)),r=this.width*i+this.height*n,o=this.width*n+this.height*i;return new X(this.x+(this.width-r)/2,this.y+(this.height-o)/2,r,o)},bottomLeft:function(){return new z(this.x,this.y+this.height)},bottomLine:function(){return new O(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new z(this.x+this.width/2,this.y+this.height)},center:function(){return new z(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new X(this)},containsPoint:function(t){return(t=new z(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new X(this).normalize(),n=new X(t).normalize(),i=e.width,r=e.height,o=n.width,s=n.height;if(!(i&&r&&o&&s))return!1;var a=e.x,h=e.y,l=n.x,u=n.y;return o+=l,i+=a,s+=u,r+=h,a<=l&&o<=i&&h<=u&&s<=r},corner:function(){return new z(this.x+this.width,this.y+this.height)},equals:function(t){var e=new X(this).normalize(),n=new X(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),i=t.origin(),r=t.corner();if(r.x<=e.x||r.y<=e.y||i.x>=n.x||i.y>=n.y)return null;var o=B(e.x,i.x),s=B(e.y,i.y);return new X(o,s,R(n.x,r.x)-o,R(n.y,r.y)-s)},intersectionWithLine:function(t){var e,n,i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],r=[],o=[],s=i.length;for(n=0;n<s;n++)null!==(e=t.intersect(i[n]))&&o.indexOf(e.toString())<0&&(r.push(e),o.push(e.toString()));return 0<r.length?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new z(t);var n,i=new z(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(i,e);for(var r=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new O(i,t),s=r.length-1;0<=s;--s){var a=r[s].intersection(o);if(null!==a){n=a;break}}return n&&e&&n.rotate(i,-e),n},leftLine:function(){return new O(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new z(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var n,i,r,o,s,a,h,l;t=new X(t),e||(e=t.center());var u=e.x,c=e.y;n=i=r=o=s=a=h=l=1/0;var d=t.topLeft();d.x<u&&(n=(this.x-u)/(d.x-u)),d.y<c&&(s=(this.y-c)/(d.y-c));var f=t.bottomRight();f.x>u&&(i=(this.x+this.width-u)/(f.x-u)),f.y>c&&(a=(this.y+this.height-c)/(f.y-c));var p=t.topRight();p.x>u&&(r=(this.x+this.width-u)/(p.x-u)),p.y<c&&(h=(this.y-c)/(p.y-c));var g=t.bottomLeft();return g.x<u&&(o=(this.x-u)/(g.x-u)),g.y>c&&(l=(this.y+this.height-c)/(g.y-c)),{sx:R(n,i,r,o),sy:R(s,a,h,l)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return R(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,i=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,i=-this.height),this.x=t,this.y=e,this.width=n,this.height=i,this},offset:function(t,e){return z.prototype.offset.call(this,t,e)},origin:function(){return new z(this.x,this.y)},pointNearestToPoint:function(t){if(t=new z(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new z(this.x+this.width,t.y);case"left":return new z(this.x,t.y);case"bottom":return new z(t.x,this.y+this.height);case"top":return new z(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new O(this.topRight(),this.bottomRight())},rightMiddle:function(){return new z(this.x+this.width,this.y+this.height/2)},round:function(t){var e=T(10,t||0);return this.x=a(this.x*e)/e,this.y=a(this.y*e)/e,this.width=a(this.width*e)/e,this.height=a(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new z(t)).x-this.x,n=this.x+this.width-t.x,i=t.y-this.y,r=e,o="left";return n<r&&(r=n,o="right"),i<r&&(r=i,o="top"),this.y+this.height-t.y<r&&(o="bottom"),o},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),i=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=i.x-n.x,this.height=i.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new O(this.topLeft(),this.topRight())},topMiddle:function(){return new z(this.x+this.width/2,this.y)},topRight:function(){return new z(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){var e=new X(t),n=this.x,i=this.y,r=this.width,o=this.height,s=e.x,a=e.y,h=e.width,l=e.height,u=e.x=R(n,s),c=e.y=R(i,a);return e.width=B(n+r,s+h)-u,e.height=B(i+o,a+l)-c,e}},X.prototype.bottomRight=X.prototype.corner,X.prototype.topLeft=X.prototype.origin,X.prototype.translate=X.prototype.offset;var b=function(t){return t%360+(t<0?360:0)},v=function(t,e){return e*a(t/e)},y=function(t){return 180*t/p%360},A=function(t,e){return(t=(e=e||!1)?t:t%360)*p/180},m=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){var n=t;t=e,e=n}return f(o.random()*(e-t+1)+t)},w=x,P=O,S=z,k=X;function E(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}function M(t){var e,n,i=arguments,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(i[e]);if(!t)throw new Error("Missing a parent object.");var o=Object.create(t);for(n=r.length,e=0;e<n;e++){var s,a,h=r[e];for(a in h)h.hasOwnProperty(a)&&(delete o[a],s=Object.getOwnPropertyDescriptor(h,a),Object.defineProperty(o,a,s))}return o}var N={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return 1<=t?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(N,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(N,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(N,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var V=function(){for(var t,e,n=arguments,i=[],r=arguments.length,o=0;o<r;o++)i.push(n[o]);if(!(this instanceof V))return E(V,i);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof O){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new z(+i[0],+i[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=2)s=i.slice(o,o+2),t.push(E(V,s));return t}if(1===r)return this.end=new z(i[0]),this;for(t=[],o=0;o<r;o+=1)e=i[o],t.push(new V(e));return t},I={clone:function(){return new V(this.end)},divideAt:function(t){var e=new O(this.start,this.end).divideAt(t);return[new V(e[0]),new V(e[1])]},divideAtLength:function(t){var e=new O(this.start,this.end).divideAtLength(t);return[new V(e[0]),new V(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(I,"type",{configurable:!0,enumerable:!0,value:"L"}),V.prototype=M(N,O.prototype,I);var j=function(){for(var t,e,n=arguments,i=[],r=arguments.length,o=0;o<r;o++)i.push(n[o]);if(!(this instanceof j))return E(j,i);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(i[0]instanceof g){if(1===r)return this.controlPoint1=i[0].controlPoint1.clone(),this.controlPoint2=i[0].controlPoint2.clone(),this.end=i[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(6===r)return this.controlPoint1=new z(+i[0],+i[1]),this.controlPoint2=new z(+i[2],+i[3]),this.end=new z(+i[4],+i[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=6)s=i.slice(o,o+6),t.push(E(j,s));return t}if(3===r)return this.controlPoint1=new z(i[0]),this.controlPoint2=new z(i[1]),this.end=new z(i[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],o=0;o<r;o+=3)e=i.slice(o,o+3),t.push(E(j,e));return t},G={clone:function(){return new j(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new g(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new j(n[0]),new j(n[1])]},divideAtLength:function(t,e){var n=new g(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new j(n[0]),new j(n[1])]},divideAtT:function(t){var e=new g(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new j(e[0]),new j(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(i))},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(G,"type",{configurable:!0,enumerable:!0,value:"C"}),j.prototype=M(N,g.prototype,G);var U=function(){for(var t,e,n=arguments,i=[],r=arguments.length,o=0;o<r;o++)i.push(n[o]);if(!(this instanceof U))return E(U,i);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof O){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(i[0]instanceof g){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new z(+i[0],+i[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=2)s=i.slice(o,o+2),0===o?t.push(E(U,s)):t.push(E(V,s));return t}if(1===r)return this.end=new z(i[0]),this;for(t=[],o=0;o<r;o+=1)e=i[o],0===o?t.push(new U(e)):t.push(new V(e));return t},q={bbox:function(){return null},clone:function(){return new U(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(q,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(q,"type",{configurable:!0,enumerable:!0,value:"M"}),U.prototype=M(N,q);var H=function(){for(var t=arguments,e=[],n=arguments.length,i=0;i<n;i++)e.push(t[i]);if(!(this instanceof H))return E(H,e);if(0<n)throw new Error("Closepath constructor expects no arguments.");return this},Y={clone:function(){return new H},divideAt:function(t){var e=new O(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new V(e[0]):this.clone(),new V(e[1])]},divideAtLength:function(t){var e=new O(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new V(e[0]):this.clone(),new V(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Y,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Y,"type",{configurable:!0,enumerable:!0,value:"Z"}),H.prototype=M(N,O.prototype,Y);var $=D.segmentTypes={L:V,C:j,M:U,Z:H,z:H};D.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys($).join("")+",.]*$"),D.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};var W,Z,J={bezier:t,Curve:g,Ellipse:x,Line:O,Path:D,Point:z,Polyline:L,Rect:X,scale:{linear:function(t,e,n){var i=t[1]-t[0],r=e[1]-e[0];return(n-t[0])/i*r+e[0]||0}},normalizeAngle:b,snapToGrid:v,toDeg:y,toRad:A,random:m,ellipse:w,line:P,point:S,rect:k},K=function(){if(!("object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))))return function(){throw new Error("SVG is required to use Vectorizer.")};var M={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},t=Math,g=t.PI,o=t.atan2,s=t.sqrt,c=t.min,d=t.max,v=t.cos,m=t.sin,N=function(t,e,n){if(!(this instanceof N))return N.apply(Object.create(N.prototype),arguments);if(t){if(N.isV(t)&&(t=t.node),e=e||{},N.isString(t)){if("svg"===t.toLowerCase())t=N.createSvgDocument();else if("<"===t[0]){var i=N.createSvgDocument(t);if(1<i.childNodes.length){var r,o,s=[];for(r=0,o=i.childNodes.length;r<o;r++){var a=i.childNodes[r];s.push(new N(document.importNode(a,!0)))}return s}t=document.importNode(i.firstChild,!0)}else t=document.createElementNS(M.svg,t);N.ensureId(t)}return this.node=t,this.setAttributes(e),n&&this.append(n),this}},e=N.prototype;function V(t,e,n){n||(n={});for(var i=n.includeAnnotationIndices,r=n.eol,o=n.lineHeight,s=n.baseSize,a=0,h={},l=e.length-1,u=0;u<=l;u++){var c=e[u],d=null;if(N.isObject(c)){var f=c.attrs,p=N("tspan",f),g=p.node,v=c.t;r&&u===l&&(v+=r),g.textContent=v;var m=f.class;m&&p.addClass(m),i&&p.attr("annotations",c.annotations),void 0===(d=parseFloat(f["font-size"]))&&(d=s),d&&a<d&&(a=d)}else r&&u===l&&(c+=r),g=document.createTextNode(c||" "),s&&a<s&&(a=s);t.appendChild(g)}return a&&(h.maxFontSize=a),o?h.lineHeight=o:a&&(h.lineHeight=1.2*a),h}Object.defineProperty(e,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),e.getTransformToElement=function(t){var e=this.node;if(N.isSVGGraphicsElement(t)&&N.isSVGGraphicsElement(e)){var n=N.toNode(t).getScreenCTM(),i=e.getScreenCTM();if(n&&i)return n.inverse().multiply(i)}return N.createSVGMatrix()},e.transform=function(t,e){var n=this.node;if(N.isUndefined(t))return N.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",N.matrixToTransformString(t));var i=N.createSVGTransform(t);return n.transform.baseVal.appendItem(i),this},e.translate=function(t,e,n){n=n||{},e=e||0;var i=this.attr("transform")||"",r=N.parseTransformString(i);if(i=r.value,N.isUndefined(t))return r.translate;i=i.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(n.absolute?t:r.translate.tx+t)+","+(n.absolute?e:r.translate.ty+e)+")";return this.attr("transform",(o+" "+i).trim()),this},e.rotate=function(t,e,n,i){i=i||{};var r=this.attr("transform")||"",o=N.parseTransformString(r);if(r=o.value,N.isUndefined(t))return o.rotate;r=r.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s="rotate("+(i.absolute?t:o.rotate.angle+t)+(void 0!==e&&void 0!==n?","+e+","+n:"")+")";return this.attr("transform",(r+" "+s).trim()),this},e.scale=function(t,e){e=N.isUndefined(e)?t:e;var n=this.attr("transform")||"",i=N.parseTransformString(n);if(n=i.value,N.isUndefined(t))return i.scale;n=n.replace(/scale\([^)]*\)/g,"").trim();var r="scale("+t+","+e+")";return this.attr("transform",(n+" "+r).trim()),this},e.bbox=function(t,e){var n,i=this.node,r=i.ownerSVGElement;if(!r)return new X(0,0,0,0);try{n=i.getBBox()}catch(t){n={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(t)return new X(n);var o=this.getTransformToElement(e||r);return N.transformRect(n,o)},e.getBBox=function(t){var e,n={},i=this.node;if(!i.ownerSVGElement||!N.isSVGGraphicsElement(i))return new X(0,0,0,0);if(t&&(t.target&&(n.target=N.toNode(t.target)),t.recursive&&(n.recursive=t.recursive)),n.recursive){var r=this.children(),o=r.length;if(0===o)return this.getBBox({target:n.target,recursive:!1});n.target||(n.target=this);for(var s=0;s<o;s++){var a,h=r[s];a=0===h.children().length?h.getBBox({target:n.target,recursive:!1}):h.getBBox({target:n.target,recursive:!0}),e=e?e.union(a):a}return e}try{e=i.getBBox()}catch(t){e={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(n.target){var l=this.getTransformToElement(n.target);return N.transformRect(e,l)}return new X(e)};var F=/em$/;function _(t,e){var n=parseFloat(t);return F.test(t)?n*e:n}e.text=function(t,e){if(t&&"string"!=typeof t)throw new Error("Vectorizer: text() expects the first argument to be a string.");t=N.sanitizeText(t),e||(e={});var n=e.displayEmpty,i=e.eol,r=e.textPath,o=e.textVerticalAnchor,s="middle"===o||"bottom"===o||"top"===o,a=e.x;void 0===a&&(a=this.attr("x")||0);var h=e.includeAnnotationIndices,l=e.annotations;l&&!N.isArray(l)&&(l=[l]);var u=e.lineHeight,c="auto"===u,d=c?"1.5em":u||"1em";this.empty(),this.attr({"xml:space":"preserve",display:t||n?null:"none"});var f=parseFloat(this.attr("font-size"));f||(f=16,(s||l)&&this.attr("font-size",f));var p,g=document;p=r?("string"==typeof r&&(r={d:r}),function(t,e){t||(t={});var n=N("textPath"),i=t.d;if(i&&void 0===t["xlink:href"]){var r=N("path").attr("d",i).appendTo(e.defs());n.attr("xlink:href","#"+r.id)}return N.isObject(t)&&n.attr(t),n.node}(r,this)):g.createDocumentFragment();for(var v,m=0,y=t.split("\n"),w=[],b=0,x=y.length-1;b<=x;b++){var A,P=d,S="v-line",k=g.createElementNS(M.svg,"tspan"),E=y[b];if(E)if(l){var C=(A=V(k,N.annotateString(E,l,{offset:-m,includeAnnotationIndices:h}),{includeAnnotationIndices:h,eol:b!==x&&i,lineHeight:c?null:d,baseSize:f})).lineHeight;C&&c&&0!==b&&(P=C),0===b&&(v=.8*A.maxFontSize)}else i&&b!==x&&(E+=i),k.textContent=E;else{k.textContent="-",S+=" v-empty-line";var T=k.style;T.fillOpacity=0,T.strokeOpacity=0,l&&(A={})}A&&w.push(A),0<b&&k.setAttribute("dy",P),(0<b||r)&&k.setAttribute("x",a),k.className.baseVal=S,p.appendChild(k),m+=E.length+1}if(s)if(l)P=function(t,e,n,i){if(!Array.isArray(e))return 0;var r=e.length;if(!r)return 0;for(var o=e[0],s=_(o.maxFontSize,n)||n,a=0,h=_(i,n),l=1;l<r;l++)a+=_((o=e[l]).lineHeight,n)||h;var u,c=_(o.maxFontSize,n)||n;switch(t){case"middle":u=s/2-.15*c-a/2;break;case"bottom":u=-.25*c-a;break;default:case"top":u=.8*s}return u}(o,w,f,d);else if("top"===o)P="0.8em";else{var L;switch(0<x?(L=parseFloat(d)||1,L*=x,F.test(d)||(L/=f)):L=0,o){case"middle":P=.3-L/2+"em";break;case"bottom":P=-L-.3+"em"}}else 0===o?P="0em":o?P=o:(P=0,null===this.attr("y")&&this.attr("y",v||"0.8em"));return p.firstChild.setAttribute("dy",P),this.append(p),this},e.removeAttr=function(t){var e=N.qualifyAttr(t),n=this.node;return e.ns?n.hasAttributeNS(e.ns,e.local)&&n.removeAttributeNS(e.ns,e.local):n.hasAttribute(t)&&n.removeAttribute(t),this},e.attr=function(t,e){if(N.isUndefined(t)){for(var n=this.node.attributes,i={},r=0;r<n.length;r++)i[n[r].name]=n[r].value;return i}if(N.isString(t)&&N.isUndefined(e))return this.node.getAttribute(t);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,e);return this},e.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",N.normalizePathData(this.attr("d"))),this},e.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},e.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},e.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},e.append=function(t){N.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++)this.node.appendChild(N.toNode(t[e]));return this},e.prepend=function(t){var e=this.node.firstChild;return e?N(e).before(t):this.append(t)},e.before=function(t){var e=this.node,n=e.parentNode;if(n){N.isArray(t)||(t=[t]);for(var i=0,r=t.length;i<r;i++)n.insertBefore(N.toNode(t[i]),e)}return this},e.appendTo=function(t){return N.toNode(t).appendChild(this.node),this},e.svg=function(){return this.node instanceof window.SVGSVGElement?this:N(this.node.ownerSVGElement)},e.tagName=function(){return this.node.tagName.toUpperCase()},e.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?N(e):N("defs").appendTo(t)},e.clone=function(){var t=N(this.node.cloneNode(!0));return t.node.id=N.uniqueId(),t},e.findOne=function(t){var e=this.node.querySelector(t);return e?N(e):void 0},e.find=function(t){var e=[],n=this.node.querySelectorAll(t);if(n)for(var i=0;i<n.length;i++)e.push(N(n[i]));return e},e.children=function(){for(var t=this.node.childNodes,e=[],n=0;n<t.length;n++){1===t[n].nodeType&&e.push(N(t[n]))}return e},e.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},e.findParentByClass=function(t,e){for(var n=this.node.ownerSVGElement,i=this.node.parentNode;i&&i!==e&&i!==n;){var r=N(i);if(r.hasClass(t))return r;i=i.parentNode}return null},e.contains=function(t){var e=this.node,n=N.toNode(t),i=n&&n.parentNode;return e===i||!!(i&&1===i.nodeType&&16&e.compareDocumentPosition(i))},e.toLocalPoint=function(t,e){var n=this.svg().node,i=n.createSVGPoint();i.x=t,i.y=e;try{var r=i.matrixTransform(n.getScreenCTM().inverse()),o=this.getTransformToElement(n).inverse()}catch(t){return i}return r.matrixTransform(o)},e.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},e.translateAndAutoOrient=function(t,e,n){t=new z(t),e=new z(e),n||(n=this.svg());var i=this.scale();this.attr("transform","");var r=this.getBBox({target:n}).scale(i.sx,i.sy),o=N.createSVGTransform();o.setTranslate(-r.x-r.width/2,-r.y-r.height/2);var s=N.createSVGTransform(),a=t.angleBetween(e,t.clone().offset(1,0));a&&s.setRotate(a,0,0);var h=N.createSVGTransform(),l=t.clone().move(e,r.width/2);h.setTranslate(2*t.x-l.x,2*t.y-l.y);var u=this.getTransformToElement(n),c=N.createSVGTransform();return c.setMatrix(h.matrix.multiply(s.matrix.multiply(o.matrix.multiply(u.scale(i.sx,i.sy))))),this.attr("transform",N.matrixToTransformString(c.matrix)),this},e.animateAlongPath=function(t,e){e=N.toNode(e);var n=N.ensureId(e),i=N("animateMotion",t),r=N("mpath",{"xlink:href":"#"+n});i.append(r),this.append(i);try{i.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=i.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),h=0,l=a.length;h<l;h++){var u=a[h],c=new Animator(o,u,h);animators.push(c),(o.animators[h]=c).register()}}}return this},e.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},e.addClass=function(t){if(t&&!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},e.removeClass=function(t){if(t&&this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},e.toggleClass=function(t,e){return(N.isUndefined(e)?this.hasClass(t):!e)?this.removeClass(t):this.addClass(t),this},e.sample=function(t){t=t||1;for(var e,n=this.node,i=n.getTotalLength(),r=[],o=0;o<i;)e=n.getPointAtLength(o),r.push({x:e.x,y:e.y,distance:o}),o+=t;return r},e.convertToPath=function(){var t=N("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},e.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return N.convertLineToPathData(this.node);case"POLYGON":return N.convertPolygonToPathData(this.node);case"POLYLINE":return N.convertPolylineToPathData(this.node);case"ELLIPSE":return N.convertEllipseToPathData(this.node);case"CIRCLE":return N.convertCircleToPathData(this.node);case"RECT":return N.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},N.prototype.toGeometryShape=function(){var t,e,n,i,r,o,s,a,h,l,u,c,d,f,p;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,n=parseFloat(this.attr("width"))||0,i=parseFloat(this.attr("height"))||0,new X(t,e,n,i);case"CIRCLE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new x({x:r,y:o},s,s);case"ELLIPSE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,h=parseFloat(this.attr("ry"))||0,new x({x:r,y:o},a,h);case"POLYLINE":return l=N.getPointsFromSvgNode(this),new L(l);case"POLYGON":return 1<(l=N.getPointsFromSvgNode(this)).length&&l.push(l[0]),new L(l);case"PATH":return u=this.attr("d"),D.isDataSupported(u)||(u=N.normalizePathData(u)),new D(u);case"LINE":return c=parseFloat(this.attr("x1"))||0,f=parseFloat(this.attr("y1"))||0,d=parseFloat(this.attr("x2"))||0,p=parseFloat(this.attr("y2"))||0,new O({x:c,y:f},{x:d,y:p})}return this.getBBox()},e.findIntersection=function(t,e){var n=this.svg().node;e=e||n;var i=this.getBBox({target:e}),r=i.center();if(i.intersectionWithLineFromCenterToPoint(t)){var o,s=this.tagName();if("RECT"===s){var a=new X(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),h=this.getTransformToElement(e),l=N.decomposeMatrix(h),u=n.createSVGTransform();u.setRotate(-l.rotation,r.x,r.y);var c=N.transformRect(a,u.matrix.multiply(h));o=new X(c).intersectionWithLineFromCenterToPoint(t,l.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var d,f,p,g,v,m=("PATH"===s?this:this.convertToPath()).sample(),y=1/0,w=[];for(d=0;d<m.length;d++)f=m[d],p=(p=N.createSVGPoint(f.x,f.y)).matrixTransform(this.getTransformToElement(e)),(v=(f=new z(p)).distance(r)+(g=1.1*f.distance(t)))<y?(y=v,w=[{sample:f,refDistance:g}]):v<y+1&&w.push({sample:f,refDistance:g});w.sort(function(t,e){return t.refDistance-e.refDistance}),w[0]&&(o=w[0].sample)}return o}},e.setAttribute=function(t,e){var n=this.node;if(null===e)return this.removeAttr(t),this;var i=N.qualifyAttr(t);return i.ns?n.setAttributeNS(i.ns,t,e):"id"===t?n.id=e:n.setAttribute(t,e),this},N.createSvgDocument=function(t){if(t){var e='<svg xmlns="'+M.svg+'" xmlns:xlink="'+M.xlink+'" version="1.1">'+t+"</svg>";return N.parseXML(e,{async:!1}).documentElement}var n=document.createElementNS(M.svg,"svg");return n.setAttributeNS(M.xmlns,"xmlns:xlink",M.xlink),n.setAttribute("version","1.1"),n},N.idCounter=0,N.uniqueId=function(){return"v-"+ ++N.idCounter},N.toNode=function(t){return N.isV(t)?t.node:t.nodeName&&t||t[0]},N.ensureId=function(t){return(t=N.toNode(t)).id||(t.id=N.uniqueId())},N.sanitizeText=function(t){return(t||"").replace(/ /g," ")},N.isUndefined=function(t){return void 0===t},N.isString=function(t){return"string"==typeof t},N.isObject=function(t){return t&&"object"==typeof t},N.isArray=Array.isArray,N.parseXML=function(t,e){var n;e=e||{};try{var i=new DOMParser;N.isUndefined(e.async)||(i.async=e.async),n=i.parseFromString(t,"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n},N.qualifyAttr=function(t){if(-1===t.indexOf(":"))return{ns:null,local:t};var e=t.split(":");return{ns:M[e[0]],local:e[1]}},N.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,N.transformSeparatorRegex=/[ ,]+/,N.transformationListRegex=/^(\w+)\((.*)\)/,N.transformStringToMatrix=function(t){var e=N.createSVGMatrix(),n=t&&t.match(N.transformRegex);if(!n)return e;for(var i=0,r=n.length;i<r;i++){var o=n[i].match(N.transformationListRegex);if(o){var s,a,h,l,u,c=N.createSVGMatrix(),d=o[2].split(N.transformSeparatorRegex);switch(o[1].toLowerCase()){case"scale":s=parseFloat(d[0]),a=void 0===d[1]?s:parseFloat(d[1]),c=c.scaleNonUniform(s,a);break;case"translate":h=parseFloat(d[0]),l=parseFloat(d[1]),c=c.translate(h,l);break;case"rotate":u=parseFloat(d[0]),h=parseFloat(d[1])||0,l=parseFloat(d[2])||0,c=0!==h||0!==l?c.translate(h,l).rotate(u).translate(-h,-l):c.rotate(u);break;case"skewx":u=parseFloat(d[0]),c=c.skewX(u);break;case"skewy":u=parseFloat(d[0]),c=c.skewY(u);break;case"matrix":c.a=parseFloat(d[0]),c.b=parseFloat(d[1]),c.c=parseFloat(d[2]),c.d=parseFloat(d[3]),c.e=parseFloat(d[4]),c.f=parseFloat(d[5]);break;default:continue}e=e.multiply(c)}}return e},N.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},N.parseTransformString=function(t){var e,n,i;if(t){var r=N.transformSeparatorRegex;if(0<=t.trim().indexOf("matrix")){var o=N.transformStringToMatrix(t),s=N.decomposeMatrix(o);e=[s.translateX,s.translateY],i=[s.scaleX,s.scaleY],n=[s.rotation];var a=[];0===e[0]&&0===e[1]||a.push("translate("+e+")"),1===i[0]&&1===i[1]||a.push("scale("+i+")"),0!==n[0]&&a.push("rotate("+n+")"),t=a.join(" ")}else{var h=t.match(/translate\((.*?)\)/);h&&(e=h[1].split(r));var l=t.match(/rotate\((.*?)\)/);l&&(n=l[1].split(r));var u=t.match(/scale\((.*?)\)/);u&&(i=u[1].split(r))}}var c=i&&i[0]?parseFloat(i[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:c,sy:i&&i[1]?parseFloat(i[1]):c}}},N.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},N.decomposeMatrix=function(t){var e=N.deltaTransformPoint(t,{x:0,y:1}),n=N.deltaTransformPoint(t,{x:1,y:0}),i=180/g*o(e.y,e.x)-90,r=180/g*o(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:s(t.a*t.a+t.b*t.b),scaleY:s(t.c*t.c+t.d*t.d),skewX:i,skewY:r,rotation:i}},N.matrixToScale=function(t){var e,n,i,r;return t?(e=N.isUndefined(t.a)?1:t.a,r=N.isUndefined(t.d)?1:t.d,n=t.b,i=t.c):e=r=1,{sx:n?s(e*e+n*n):e,sy:i?s(i*i+r*r):r}},N.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=N.deltaTransformPoint(t,e)),{angle:b(y(o(e.y,e.x))-90)}},N.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},N.isV=function(t){return t instanceof N},N.isVElement=N.isV,N.isSVGGraphicsElement=function(t){return!!t&&((t=N.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM)};var f=N("svg").node;return N.createSVGMatrix=function(t){var e=f.createSVGMatrix();for(var n in t)e[n]=t[n];return e},N.createSVGTransform=function(t){return N.isUndefined(t)?f.createSVGTransform():(t instanceof SVGMatrix||(t=N.createSVGMatrix(t)),f.createSVGTransformFromMatrix(t))},N.createSVGPoint=function(t,e){var n=f.createSVGPoint();return n.x=t,n.y=e,n},N.transformRect=function(t,e){var n=f.createSVGPoint();n.x=t.x,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var o=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var s=n.matrixTransform(e),a=c(i.x,r.x,o.x,s.x),h=d(i.x,r.x,o.x,s.x),l=c(i.y,r.y,o.y,s.y),u=d(i.y,r.y,o.y,s.y);return new X(a,l,h-a,u-l)},N.transformPoint=function(t,e){return new z(N.createSVGPoint(t.x,t.y).matrixTransform(e))},N.transformLine=function(t,e){return new O(N.transformPoint(t.start,e),N.transformPoint(t.end,e))},N.transformPolyline=function(t,e){var n=t instanceof L?t.points:t;N.isArray(n)||(n=[]);for(var i=[],r=0,o=n.length;r<o;r++)i[r]=N.transformPoint(n[r],e);return new L(i)},N.styleToObject=function(t){for(var e={},n=t.split(";"),i=0;i<n.length;i++){var r=n[i].split("=");e[r[0].trim()]=r[1].trim()}return e},N.createSlicePathData=function(t,e,n,i){var r=2*g-1e-6,o=t,s=e,a=n,h=i,l=(h<a&&(l=a,a=h,h=l),h-a),u=l<g?"0":"1",c=v(a),d=m(a),f=v(h),p=m(h);return r<=l?o?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":o?"M"+s*c+","+s*d+"A"+s+","+s+" 0 "+u+",1 "+s*f+","+s*p+"L"+o*f+","+o*p+"A"+o+","+o+" 0 "+u+",0 "+o*c+","+o*d+"Z":"M"+s*c+","+s*d+"A"+s+","+s+" 0 "+u+",1 "+s*f+","+s*p+"L0,0Z"},N.mergeAttrs=function(t,e){for(var n in e)"class"===n?t[n]=t[n]?t[n]+" "+e[n]:e[n]:"style"===n?N.isObject(t[n])&&N.isObject(e[n])?t[n]=N.mergeAttrs(t[n],e[n]):N.isObject(t[n])?t[n]=N.mergeAttrs(t[n],N.styleToObject(e[n])):N.isObject(e[n])?t[n]=N.mergeAttrs(N.styleToObject(t[n]),e[n]):t[n]=N.mergeAttrs(N.styleToObject(t[n]),N.styleToObject(e[n])):t[n]=e[n];return t},N.annotateString=function(t,e,n){e=e||[];for(var i,r,o,s=(n=n||{}).offset||0,a=[],h=[],l=0;l<t.length;l++){r=h[l]=t[l];for(var u=0;u<e.length;u++){var c=e[u],d=c.start+s,f=c.end+s;d<=l&&l<f&&(N.isObject(r)?r.attrs=N.mergeAttrs(N.mergeAttrs({},r.attrs),c.attrs):r=h[l]={t:t[l],attrs:c.attrs},n.includeAnnotationIndices&&(r.annotations||(r.annotations=[])).push(u))}(o=h[l-1])?N.isObject(r)&&N.isObject(o)?JSON.stringify(r.attrs)===JSON.stringify(o.attrs)?i.t+=r.t:(a.push(i),i=r):i=N.isObject(r)?(a.push(i),r):N.isObject(o)?(a.push(i),r):(i||"")+r:i=r}return i&&a.push(i),a},N.findAnnotationsAtIndex=function(t,e){var n=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&n.push(t)}),n},N.findAnnotationsBetweenIndexes=function(t,e,n){var i=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&i.push(t)}),i},N.shiftAnnotations=function(t,e,n){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)}),t},N.convertLineToPathData=function(t){return["M",(t=N(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},N.convertPolygonToPathData=function(t){var e=N.getPointsFromSvgNode(t);return 0===e.length?null:N.svgPointsToPath(e)+" Z"},N.convertPolylineToPathData=function(t){var e=N.getPointsFromSvgNode(t);return 0===e.length?null:N.svgPointsToPath(e)},N.svgPointsToPath=function(t){for(var e=0,n=t.length;e<n;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},N.getPointsFromSvgNode=function(t){var e=[],n=(t=N.toNode(t)).points;if(n)for(var i=0,r=n.numberOfItems;i<r;i++)e.push(n.getItem(i));return e},N.KAPPA=.551784,N.convertCircleToPathData=function(t){t=N(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("r")),r=i*N.KAPPA;return["M",e,n-i,"C",e+r,n-i,e+i,n-r,e+i,n,"C",e+i,n+r,e+r,n+i,e,n+i,"C",e-r,n+i,e-i,n+r,e-i,n,"C",e-i,n-r,e-r,n-i,e,n-i,"Z"].join(" ")},N.convertEllipseToPathData=function(t){t=N(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("rx")),r=parseFloat(t.attr("ry"))||i,o=i*N.KAPPA,s=r*N.KAPPA;return["M",e,n-r,"C",e+o,n-r,e+i,n-s,e+i,n,"C",e+i,n+s,e+o,n+r,e,n+r,"C",e-o,n+r,e-i,n+s,e-i,n,"C",e-i,n-s,e-o,n-r,e,n-r,"Z"].join(" ")},N.convertRectToPathData=function(t){return t=N(t),N.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},N.rectToPath=function(t){var e=t.x,n=t.y,i=t.width,r=t.height,o=c(t.rx||t["top-rx"]||0,i/2),s=c(t.rx||t["bottom-rx"]||0,i/2),a=c(t.ry||t["top-ry"]||0,r/2),h=c(t.ry||t["bottom-ry"]||0,r/2);return(o||s||a||h?["M",e,n+a,"v",r-a-h,"a",s,h,0,0,0,s,h,"h",i-2*s,"a",s,h,0,0,0,s,-h,"v",-(r-h-a),"a",o,a,0,0,0,-o,-a,"h",-(i-2*o),"a",o,a,0,0,0,-o,a,"Z"]:["M",e,n,"H",e+i,"V",n+r,"H",e,"V",n,"Z"]).join(" ")},N.normalizePathData=function(){var t="\t\n\v\f\r   ᠎             　\u2028\u2029",g=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),v=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),e=Math,U=e.PI,q=e.sin,H=e.cos,Y=e.tan,$=e.asin,X=e.sqrt,W=e.abs;function d(t,e,n,i,r,o){return[1/3*t+2/3*n,1/3*e+2/3*i,1/3*r+2/3*n,1/3*o+2/3*i,r,o]}function Z(t,e,n){return{x:t*H(n)-e*q(n),y:t*q(n)+e*H(n)}}function f(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return String(t).replace(g,function(t,e,n){var i=[],r=e.toLowerCase();for(n.replace(v,function(t,e){e&&i.push(+e)}),"m"===r&&2<i.length&&(s.push([e].concat(i.splice(0,2))),r="l",e="m"===e?"l":"L");i.length>=o[r]&&(s.push([e].concat(i.splice(0,o[r]))),o[r]););}),s}(t)),!t||!t.length)return[["M",0,0]];for(var e,n=[],i=0,r=0,o=0,s=0,a=t.length,h=0;h<a;h++){var l=[];n.push(l);var u,c,d=t[h];if((e=d[0])!=e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=+d[6]+i,l[7]=+d[7]+r;break;case"V":l[1]=+d[1]+r;break;case"H":l[1]=+d[1]+i;break;case"M":for(o=+d[1]+i,s=+d[2]+r,u=d.length,c=1;c<u;c++)l[c]=+d[c]+(c%2?i:r);break;default:for(u=d.length,c=1;c<u;c++)l[c]=+d[c]+(c%2?i:r)}else for(var f=d.length,p=0;p<f;p++)l[p]=d[p];switch(l[0]){case"Z":i=+o,r=+s;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":o=l[l.length-2],s=l[l.length-1],i=l[l.length-2],r=l[l.length-1];break;default:i=l[l.length-2],r=l[l.length-1]}}return n}function n(t){var i=f(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(function t(e,n,i,r,o,s,a,h,l,u){var c,d=120*U/180,f=U/180*(+o||0),p=[];if(u)P=u[0],S=u[1],x=u[2],A=u[3];else{e=(c=Z(e,n,-f)).x,n=c.y;var g=(e-(h=(c=Z(h,l,-f)).x))/2,v=(n-(l=c.y))/2,m=g*g/(i*i)+v*v/(r*r);1<m&&(i*=m=X(m),r*=m);var y=i*i,w=r*r,b=(s==a?-1:1)*X(W((y*w-y*v*v-w*g*g)/(y*v*v+w*g*g))),x=b*i*v/r+(e+h)/2,A=b*-r*g/i+(n+l)/2,P=$(((n-A)/r).toFixed(9)),S=$(((l-A)/r).toFixed(9));(P=e<x?U-P:P)<0&&(P=2*U+P),(S=h<x?U-S:S)<0&&(S=2*U+S),a&&S<P&&(P-=2*U),!a&&P<S&&(S-=2*U)}var k=S-P;if(W(k)>d){var E=S,C=h,T=l;p=t(h=x+i*H(S=P+d*(a&&P<S?1:-1)),l=A+r*q(S),i,r,o,0,a,C,T,[S,E,x,A])}k=S-P;var L=H(P),M=q(P),N=H(S),V=q(S),F=Y(k/4),_=4/3*(i*F),R=4/3*(r*F),B=[e,n],O=[e+_*M,n-R*L],D=[h+_*V,l-R*N],z=[h,l];if(O[0]=2*B[0]-O[0],O[1]=2*B[1]-O[1],u)return[O,D,z].concat(p);for(var I=[],j=(p=[O,D,z].concat(p).join().split(",")).length,G=0;G<j;G++)I[G]=G%2?Z(p[G-1],p[G],f).y:Z(p[G],p[G+1],f).x;return I}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":r="C"===n||"S"===n?(i=2*e.x-e.bx,2*e.y-e.by):(i=e.x,e.y),t=["C",i,r].concat(t.slice(1));break;case"T":e.qy="Q"===n||"T"===n?(e.qx=2*e.x-e.qx,2*e.y-e.qy):(e.qx=e.x,e.y),t=["C"].concat(d(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(d(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function r(t,e){if(7<t[e].length){t[e].shift();for(var n=t[e];n.length;)o[e]="A",t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),h=i.length}}for(var o=[],s="",a="",h=i.length,l=0;l<h;l++){i[l]&&(s=i[l][0]),"C"!==s&&(o[l]=s,0<l&&(a=o[l-1])),i[l]=n(i[l],e,a),"A"!==o[l]&&"C"===s&&(o[l]="C"),r(i,l);var u=i[l],c=u.length;e.x=u[c-2],e.y=u[c-1],e.bx=parseFloat(u[c-4])||e.x,e.by=parseFloat(u[c-3])||e.y}return i[0][0]&&"M"===i[0][0]||i.unshift(["M",0,0]),i}return function(t){return n(t).join(",").split(",").join(" ")}}(),N.namespace=M,N.g=J,N}(),Q={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default"},tt=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,Q.classNamePrefix.length)!==Q.classNamePrefix&&(t=Q.classNamePrefix+t),t}).join(" "):t},et=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,Q.classNamePrefix.length)===Q.classNamePrefix&&(t=t.substr(Q.classNamePrefix.length)),t}).join(" "):t},nt=function(t,e){for(var n={},i={},r=K.namespace.svg,o=e||r,s=document.createDocumentFragment(),a=[t,s,o];0<a.length;){o=a.pop();for(var h=a.pop(),l=a.pop(),u=0,c=l.length;u<c;u++){var d=l[u];if(!d.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var f=d.tagName;d.hasOwnProperty("namespaceURI")&&(o=d.namespaceURI);var p=document.createElementNS(o,f),g=o===r,v=g?K:C,m=d.attributes;m&&v(p).attr(m);var y=d.style;if(y&&C(p).css(y),d.hasOwnProperty("className")){var w=d.className;g?p.className.baseVal=w:p.className=w}if(d.hasOwnProperty("textContent")&&(p.textContent=d.textContent),d.hasOwnProperty("selector")){var b=d.selector;if(n[b])throw new Error("json-dom-parser: selector must be unique");v(n[b]=p).attr("joint-selector",b)}if(d.hasOwnProperty("groupSelector")){var x=d.groupSelector;Array.isArray(x)||(x=[x]);for(var A=0,P=x.length;A<P;A++){var S=x[A],k=i[S];k||(k=i[S]=[]),k.push(p)}}h.appendChild(p);var E=d.children;Array.isArray(E)&&a.push(E,p,o)}}return{fragment:s,selectors:n,groupSelectors:i}},it=function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e},rt=function(t,e,n){for(var i,r=Array.isArray(e)?e:e.split(n||"/"),o=0,s=r.length;o<s;){if(i=r[o++],!(Object(t)===t&&i in t))return;t=t[i]}return t},ot=function(t,e,n,i){for(var r=Array.isArray(e)?e:e.split(i||"/"),o=t,s=0,a=r.length;s<a-1;s++)o=o[r[s]]||(o[r[s]]={});return o[r[a-1]]=n,t},st=function(t,e,n){n||(n="/");var i=Array.isArray(e)?e.slice():e.split(n),r=i.pop();if(0<i.length){var o=rt(t,i,n);o&&delete o[r]}else delete t[r];return t},at=function(t,e,n){e=e||"/";var i={};for(var r in t)if(t.hasOwnProperty(r)){var o="object"==typeof t[r];if(o&&n&&n(t[r])&&(o=!1),o){var s=at(t[r],e,n);for(var a in s)s.hasOwnProperty(a)&&(i[r+e+a]=s[a])}else i[r]=t[r]}return i},ht=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},lt=function(t){return lt.id=lt.id||1,t.id=void 0===t.id?"j_"+lt.id++:t.id,t.id},ut=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},ct=function(t){var e=t,n=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(n){for(var i in t)void 0===n[i]&&(n[i]=t[i]);e=n}var r=e.target;if(r){var o=r.correspondingUseElement;o&&(e.target=o)}return e},dt=function(){var r;if("undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!r){var o=0;r=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-o)),i=setTimeout(function(){t(e+n)},n);return o=e+n,i}}return function(t,e){for(var n=[],i=arguments.length-2;0<i--;)n[i]=arguments[i+2];return r(void 0!==e?t.bind.apply(t,[e].concat(n)):t)}}(),ft=((Z="undefined"!=typeof window)&&(W=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),W=W||clearTimeout,Z?W.bind(window):W),pt=function(t){return ue(t)&&"%"===t.slice(-1)},gt=function(t,e){var n=parseFloat(t);if(Number.isNaN(n))return null;var i,r={};if(r.value=n,null==e)i="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;i=e.join("|")}else ue(e)&&(i=e);var o,s=(o=new RegExp("(?:\\d+(?:\\.\\d+)*)("+i+")$").exec(t))?o[1]:null;return null===s?null:(r.unit=s,r)},vt=function(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i={});var r=e.width,o=e.height,s=i.svgDocument||K("svg").node,a=K("tspan").node,h=K("text").attr(n).append(a).node,l=document.createTextNode("");h.style.opacity=0,h.style.display="block",a.style.display="block",a.appendChild(l),s.appendChild(h),i.svgDocument||document.body.appendChild(s);var u=i.separator||" ",c=i.eol||"\n",d=i.hyphen?new RegExp(i.hyphen):/[^\w\d]/,f=i.maxLineCount;le(f)||(f=1/0);for(var p,g,v,m=t.split(u),y=[],w=[],b=0,x=0,A=m.length;b<A;b++){var P=m[b];if(P)if(c&&0<=P.indexOf(c))if(1<P.length){for(var S=P.split(c),k=0,E=S.length-1;k<E;k++)S.splice(2*k+1,0,c);m.splice.apply(m,[b,1].concat(S.filter(function(t){return""!==t}))),b--,A=m.length}else w[++x]="";else{if(l.data=w[x]?w[x]+" "+P:P,a.getComputedTextLength()<=r)w[x]=l.data,(p||g)&&(y[x++]=!0,g=p=0);else{if(!w[x]||p){var C=!!p;if(p=P.length-1,C||!p){if(!p){if(!w[x]){w=[];break}m.splice(b,2,P+m[b+1]),A--,y[x++]=!0,b--;continue}m[b]=P.substring(0,p),m[b+1]=P.substring(p)+m[b+1]}else{if(g)m.splice(b,2,m[b]+m[b+1]),g=0;else{var T=P.search(d);-1<T&&T!==P.length-1&&0!==T&&(g=T+1,p=0),m.splice(b,1,P.substring(0,g||p),P.substring(g||p)),A++}x&&!y[x-1]&&x--}b--;continue}x++,b--}var L=null;if(w.length>f)L=f-1;else if(void 0!==o){var M;if(void 0===v)v=(M="auto"===n.lineHeight?{value:1.5,unit:"em"}:gt(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===M.unit&&(v*=h.getBBox().height);v*w.length>o&&(L=Math.floor(o/v)-1)}if(null!==L){w.splice(L+1);var N=i.ellipsis;if(!N||L<0)break;"string"!=typeof N&&(N="…");var V=w[L];if(!V)break;var F,_,R=V.length;do{if(_=V[R],F=V.substring(0,R),_?_.match(u)&&(F+=_):F+="string"==typeof u?u:" ",F+=N,l.data=F,a.getComputedTextLength()<=r){w[L]=F;break}R--}while(0<=R);break}}}return i.svgDocument?s.removeChild(h):document.body.removeChild(s),w.join(c)},mt=function(t){var e=C(C.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var n=this;C.each(n.attributes,function(){var t=this.name,e=this.value;(t.startsWith("on")||e.startsWith("javascript:")||e.startsWith("data:")||e.startsWith("vbscript:"))&&C(n).removeAttr(t)})}),e.html()},yt=function(t,e){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,e);else{var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}},wt=function(t){t=t.replace(/\s/g,"");var e,n=(t=decodeURIComponent(t)).indexOf(","),i=t.slice(0,n),r=i.split(":")[1].split(";")[0],o=t.slice(n+1);e=0<=i.indexOf("base64")?atob(o):unescape(encodeURIComponent(o));for(var s=new Uint8Array(e.length),a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return new Blob([s],{type:r})},bt=function(t,e){var n=C(t),i=n.map(function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}});return Array.prototype.sort.call(n,e).each(function(t){i[t].call(this)})},xt=function(t){if(Object(t)===t)return e=n=i=r=0,isFinite(t.vertical)&&(e=i=+t.vertical),isFinite(t.horizontal)&&(n=r=+t.horizontal),isFinite(t.top)&&(e=+t.top),isFinite(t.right)&&(n=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(r=+t.left),{top:e,right:n,bottom:i,left:r};var e,n,i,r,o=0;return isFinite(t)&&(o=+t),{top:o,right:o,bottom:o,left:o}},At={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if((7-4*e)/11<=t){var i=(11-6*e-11*t)/4;return-i*i+n*n}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(n,i,r){return i=i||0,r=r||1,function(t){var e=n(t);return e<i?i:r<e?r:e}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},Pt={number:function(e,t){var n=t-e;return function(t){return e+n*t}},object:function(r,o){var s=Object.keys(r);return function(t){var e,n,i={};for(e=s.length-1;-1!=e;e--)i[n=s[e]]=r[n]+(o[n]-r[n])*t;return i}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),i=parseInt(e.slice(1),16),r=255&n,o=(255&i)-r,s=65280&n,a=(65280&i)-s,h=16711680&n,l=(16711680&i)-h;return function(t){return"#"+(1<<24|r+o*t&255|s+a*t&65280|h+l*t&16711680).toString(16).slice(1)}},unit:function(e,t){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=n.exec(e),r=n.exec(t),o=r[1].indexOf("."),s=0<o?r[1].length-o-1:0;e=+i[1];var a=+r[1]-e,h=i[2];return function(t){return(e+a*t).toFixed(s)+h}}},St={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return Et('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+n,innerRadius:e})},highlight:function(t){return Et('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Et('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Et(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Et('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Et('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Et('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Et('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Et('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Et('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Et('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},kt={number:function(t,e,o){o=o||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var n=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i.exec(t),i=n[1]||" ",r=n[2]||">",s=n[3]||"",a=n[4]||"",h=n[5],l=+n[6],u=n[7],c=n[8],d=n[9],f=1,p="",g="",v=!1;switch(c&&(c=+c.substring(1)),(h||"0"===i&&"="===r)&&(h=i="0",r="=",u&&(l-=Math.floor((l-1)/4))),d){case"n":u=!0,d="g";break;case"%":f=100,g="%",d="f";break;case"p":f=100,g="%",d="r";break;case"b":case"o":case"x":case"X":"#"===a&&(p="0"+d.toLowerCase());break;case"c":case"d":v=!0,c=0;break;case"s":f=-1,d="r"}"$"===a&&(p=o.currency[0],g=o.currency[1]),"r"!=d||c||(d="g"),null!=c&&("g"==d?c=Math.max(1,Math.min(21,c)):"e"!=d&&"f"!=d||(c=Math.max(0,Math.min(20,c))));var m=h&&u;if(v&&e%1)return"";var y=e<0||0===e&&1/e<0?(e=-e,"-"):s,w=g;if(f<0){var b=this.prefix(e,c);e=b.scale(e),w=b.symbol+g}else e*=f;var x=(e=this.convert(d,e,c)).lastIndexOf("."),A=x<0?e:e.substring(0,x),P=x<0?"":o.decimal+e.substring(x+1);function S(t){for(var e=t.length,n=[],i=0,r=o.grouping[0];0<e&&0<r;)n.push(t.substring(e-=r,e+r)),r=o.grouping[i=(i+1)%o.grouping.length];return n.reverse().join(o.thousands)}!h&&u&&o.grouping&&(A=S(A));var k=p.length+A.length+P.length+(m?0:y.length),E=k<l?new Array(k=l-k+1).join(i):"";return m&&(A=S(E+A)),y+=p,e=A+P,("<"===r?y+e+E:">"===r?E+y+e:"^"===r?E.substring(0,k>>=1)+y+e+E.substring(k):y+(m?e:E+e))+w},string:function(t,e){for(var n,i="{",r=!1,o=[];-1!==(n=t.indexOf(i));){var s,a,h;if(s=t.slice(0,n),r){h=(a=s.split(":")).shift().split("."),s=e;for(var l=0;l<h.length;l++)s=s[h[l]];a.length&&(s=this.number(a,s))}o.push(s),t=t.slice(n+1),i=(r=!r)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,n){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(n);case"e":return e.toExponential(n);case"f":return e.toFixed(n);case"r":return(e=this.round(e,this.precision(e,n))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),n))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var n=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}}),i=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i<=0?i+1:i-1)/3)))),n[8+i/3]}},Et=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(i){return i=i||{},t.replace(e,function(t){for(var e=Array.from(arguments).slice(1,4).find(function(t){return!!t}).split("."),n=i[e.shift()];void 0!==n&&e.length;)n=n[e.shift()];return void 0!==n?n:""})}},Ct=n.assign,Tt=n.defaults,Lt=Ct,Mt=n.defaultsDeep,Nt=n.assign,Vt=n.defaults,Ft=n.defaultsDeep,_t=n.invokeMap||n.invoke,Rt=n.sortedIndexBy||n.sortedIndex,Bt=n.uniqBy||n.uniq,Ot=n.clone,Dt=n.cloneDeep,zt=n.isEmpty,It=n.isEqual,jt=n.isFunction,Gt=n.isPlainObject,Ut=n.toArray,qt=n.debounce,Ht=n.groupBy,Yt=n.sortBy,$t=n.flattenDeep,Xt=n.without,Wt=n.difference,Zt=n.intersection,Jt=n.union,Kt=n.has,Qt=n.result,te=n.omit,ee=n.pick,ne=n.bindAll,ie=n.forIn,re=n.camelCase,oe=n.uniqueId,se=function(){if(n.mergeWith){var t=Array.from(arguments),e=t[t.length-1],i=jt(e)?e:ce;return t.push(function(t,e){var n=i(t,e);return void 0!==n?n:Array.isArray(t)&&!Array.isArray(e)?e:void 0}),n.mergeWith.apply(this,t)}return n.merge.apply(this,arguments)},ae=function(t){var e=Object.prototype.toString;return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===e.call(t)},he=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},le=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===e.call(t)},ue=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===e.call(t)},ce=function(){};function de(t){t=Bt(t);var s=Ut(t).reduce(function(t,e){return t[e.id]=e.clone(),t},{});return Ut(t).forEach(function(t){var e=s[t.id];if(e.isLink()){var n=e.source(),i=e.target();n.id&&s[n.id]&&e.prop("source/id",s[n.id].id),i.id&&s[i.id]&&e.prop("target/id",s[i.id].id)}var r=t.get("parent");r&&s[r]&&e.set("parent",s[r].id);var o=Ut(t.get("embeds")).reduce(function(t,e){return s[e]&&t.push(s[e].id),t},[]);zt(o)||e.set("embeds",o)}),s}function fe(o,s){return function(t,e){var n=pt(t);t=parseFloat(t),n&&(t/=100);var i={};if(isFinite(t)){var r=n||0<=t&&t<=1?t*e[s]:Math.max(t+e[s],0);i[o]=r}return i}}function pe(s,a,h){return function(t,e){var n,i=pt(t);if(t=parseFloat(t),i&&(t/=100),isFinite(t)){var r=e[h]();n=i||0<t&&t<1?r[s]+e[a]*t:r[s]+t}var o=z();return o[s]=n||0,o}}function ge(r,o,s){return function(t,e){var n;n="middle"===t?e[o]/2:t===s?e[o]:isFinite(t)?-1<t&&t<1?-e[o]*t:-t:pt(t)?e[o]*parseFloat(t)/100:0;var i=z();return i[r]=-(e[r]+n),i}}function ve(f,t){var p="joint-shape",g=t&&t.resetOffset;return function(t,e,n){var i=C(n),r=i.data(p);if(!r||r.value!==t){var o=f(t);r={value:t,shape:o,shapeBBox:o.bbox()},i.data(p,r)}var s=r.shape.clone(),a=r.shapeBBox.clone(),h=a.origin(),l=e.origin();a.x=l.x,a.y=l.y;var u=e.maxRectScaleToFit(a,l),c=0===a.width||0===e.width?1:u.sx,d=0===a.height||0===e.height?1:u.sy;return s.scale(c,d,h),g&&s.translate(-h.x,-h.y),s}}function me(t){var i=ve(function(t){return new D(K.normalizePathData(t))},t);return function(t,e,n){return{d:i(t,e,n).serialize()}}}function ye(t){var i=ve(L,t);return function(t,e,n){return{points:i(t,e,n).serialize()}}}function we(r,o){var s=new z(1,0);return function(t){var e,n,i=this[r](t);return i?(n=o.rotate?i.vector().vectorAngle(s):0,e=i.start):(e=this.path.start,n=0),0===n?{transform:"translate("+e.x+","+e.y+")"}:{transform:"translate("+e.x+","+e.y+") rotate("+n+")"}}}function be(t,e,n){return void 0!==n.text}function xe(){return this.model.isLink()}function Ae(t){var e={},n=t.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);var i=t.strokeOpacity;return void 0===i&&(i=t["stroke-opacity"]),void 0===i&&(i=t.opacity),void 0!==i&&(e["stroke-opacity"]=i,e["fill-opacity"]=i),e}var Pe,Se,ke={xlinkHref:{set:"xlink:href"},xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},filter:{qualify:Gt,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Gt,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},stroke:{qualify:Gt,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},sourceMarker:{qualify:Gt,set:function(t,e,n,i){return t=Nt(Ae(i),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Gt,set:function(t,e,n,i){return t=Nt(Ae(i),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Gt,set:function(t,e,n,i){return t=Nt(Ae(i),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!Gt(n.textWrap)},set:function(t,e,n,i){var r=C(n),o="joint-text",s=r.data(o),a=ee(i,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty"),h=a.fontSize=i["font-size"]||i.fontSize,l=JSON.stringify([t,a]);if(void 0===s||s!==l){h&&n.setAttribute("font-size",h);var u=a.textPath;if(he(u)){var c=u.selector;if("string"==typeof c){var d=this.findBySelector(c)[0];d instanceof SVGPathElement&&(a.textPath=Nt({"xlink:href":"#"+d.id},u))}}K(n).text(""+t,a),r.data(o,l)}}},textWrap:{qualify:Gt,set:function(t,e,n,i){var r=t.width||0;pt(r)?e.width*=parseFloat(r)/100:r<=0?e.width+=r:e.width=r;var o,s=t.height||0;pt(s)?e.height*=parseFloat(s)/100:s<=0?e.height+=s:e.height=s;var a=t.text;void 0===a&&(a=i.text),o=void 0!==a?vt(""+a,e,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",ke.text.set.call(this,o,e,n,i)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var i=C(n),r="joint-title",o=i.data(r);if(void 0===o||o!==t){i.data(r,t);var s=n.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=t;else{var a=document.createElementNS(n.namespaceURI,"title");a.textContent=t,n.insertBefore(a,s)}}}},lineHeight:{qualify:be},textVerticalAnchor:{qualify:be},textPath:{qualify:be},annotations:{qualify:be},eol:{qualify:be},displayEmpty:{qualify:be},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:Gt,set:function(t,e,n){C(n).css(t)}},html:{set:function(t,e,n){C(n).html(t+"")}},ref:{},refX:{position:pe("x","width","origin")},refY:{position:pe("y","height","origin")},refDx:{position:pe("x","width","corner")},refDy:{position:pe("y","height","corner")},refWidth:{set:fe("width","width")},refHeight:{set:fe("height","height")},refRx:{set:fe("rx","width")},refRy:{set:fe("ry","height")},refRInscribed:{set:(Pe=fe("r","width"),Se=fe("r","height"),function(t,e){return(e.height>e.width?Pe:Se)(t,e)})},refRCircumscribed:{set:function(t,e){var n=pt(t);t=parseFloat(t),n&&(t/=100);var i,r=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(i=n||0<=t&&t<=1?t*r:Math.max(t+r,0)),{r:i}}},refCx:{set:fe("cx","width")},refCy:{set:fe("cy","height")},xAlignment:{offset:ge("x","width","right")},yAlignment:{offset:ge("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:me({resetOffset:!0})},refDKeepOffset:{set:me({resetOffset:!1})},refPointsResetOffset:{set:ye({resetOffset:!0})},refPointsKeepOffset:{set:ye({resetOffset:!1})},connection:{qualify:xe,set:function(t){var e,n=t.stubs;if(void 0===n&&(n=0),isFinite(n)&&0!==n){var i;i=n<0?(this.getConnectionLength()+n)/2:n;var r=this.getConnection(),o=r.divideAtLength(i),s=r.divideAtLength(-i);o&&s&&(e=o[0].serialize()+" "+s[1].serialize())}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:xe,set:we("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:xe,set:we("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:xe,set:we("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:xe,set:we("getTangentAtRatio",{rotate:!1})}};ke.refR=ke.refRInscribed,ke.refD=ke.refDResetOffset,ke.refPoints=ke.refPointsResetOffset,ke.atConnectionLength=ke.atConnectionLengthKeepGradient,ke.atConnectionRatio=ke.atConnectionRatioKeepGradient,ke.refX2=ke.refX,ke.refY2=ke.refY,ke.refWidth2=ke.refWidth,ke.refHeight2=ke.refHeight,ke["ref-x"]=ke.refX,ke["ref-y"]=ke.refY,ke["ref-dy"]=ke.refDy,ke["ref-dx"]=ke.refDx,ke["ref-width"]=ke.refWidth,ke["ref-height"]=ke.refHeight,ke["x-alignment"]=ke.xAlignment,ke["y-alignment"]=ke.yAlignment;var Ee=ke,Ce=s.Model.extend({constructor:function(t,e){var n,i=t||{};this.cid=oe("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(i=this.parse(i,e)||{}),(n=Qt(this,"defaults"))&&(i=se({},n,i)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){var e=this.constructor.prototype.defaults.attrs||{},t=this.attributes.attrs,o={};ie(t,function(t,i){var r=e[i];ie(t,function(t,n){he(t)&&!Array.isArray(t)?ie(t,function(t,e){r&&r[n]&&It(r[n][e],t)||(o[i]=o[i]||{},(o[i][n]||(o[i][n]={}))[e]=t)}):r&&It(r[n],t)||(o[i]=o[i]||{},o[i][n]=t)})});var n=Dt(te(this.attributes,"attrs"));return n.attrs=o,n},initialize:function(t){t&&t.id||this.set("id",this.generateId(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},generateId:function(){return ht()},processPorts:function(){var t=this.ports,n={};ie(this.get("attrs"),function(t,e){t&&t.port&&(void 0!==t.port.id?n[t.port.id]=t.port:n[t.port]={id:t.port})});var i={};(ie(t,function(t,e){n[e]||(i[e]=!0)}),this.graph&&!zt(i))&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(t){i[t.get("target").port]&&t.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(t){i[t.get("source").port]&&t.remove()}));this.ports=n},remove:function(t){t=t||{};var e=this.graph;if(!e)return this.collection&&this.collection.remove(this,t),this;e.startBatch("remove");var n=this.getParentCell();n&&n.unembed(this);for(var i=this.getEmbeddedCells(),r=0,o=i.length;r<o;r++){var s=i[r];s&&s.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(n){var t=this.graph;if(t){n=n||{};var e,i=t.maxZIndex();n.deep?(e=this.getEmbeddedCells({deep:!0,breadthFirst:!0})).unshift(this):e=[this],i=i-e.length+1;var r=t.get("cells"),o=r.indexOf(this)!==r.length-e.length;o||(o=e.some(function(t,e){return t.get("z")!==i+e})),o&&(this.startBatch("to-front"),i+=e.length,e.forEach(function(t,e){t.set("z",i+e,n)}),this.stopBatch("to-front"))}return this},toBack:function(n){var t=this.graph;if(t){n=n||{};var e,i=t.minZIndex();n.deep?(e=this.getEmbeddedCells({deep:!0,breadthFirst:!0})).unshift(this):e=[this];var r=0!==t.get("cells").indexOf(this);r||(r=e.some(function(t,e){return t.get("z")!==i+e})),r&&(this.startBatch("to-back"),i-=e.length,e.forEach(function(t,e){t.set("z",i+e,n)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var n=Nt([],this.get("embeds"));return n[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e),this.set("embeds",Bt(n),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",Xt(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();0<t.length;){var i=t.shift();n.push(i),t.push.apply(t,i.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(t){n.push.apply(n,t.getEmbeddedCells(e))});else n=Ut(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(t,e){var n=ue(t)?t:t.id,i=this.parent();if(e=Vt({deep:!0},e),this.graph&&e.deep){for(;i;){if(i===n)return!0;i=this.graph.getCell(i).parent()}return!1}return i===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return Ut(de([this].concat(this.getEmbeddedCells({deep:!0}))));var e=s.Model.prototype.clone.apply(this,arguments);return e.set("id",this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var i=ue(t);if(i||Array.isArray(t)){if(1<arguments.length){var r,o,s=(o=i?(r=t).split("/"):(r=t.join("/"),t.slice()))[0],a=o.length;if((n=n||{}).propertyPath=r,n.propertyValue=e,n.propertyPathArray=o,1===a)return this.set(s,e,n);for(var h={},l=h,u=s,c=1;c<a;c++){var d=o[c],f=Number.isFinite(i?Number(d):d);l=l[u]=f?[]:{},u=d}h=ot(h,o,e,"/");var p=se({},this.attributes);n.rewrite&&st(p,r,"/");var g=se(p,h);return this.set(s,g[s],n)}return rt(this.attributes,t,"/")}return this.set(se({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),i=n[0];if("attrs"===i&&(e.dirty=!0),1===n.length)return this.unset(t,e);var r=n.slice(1),o=Dt(this.get(i));return st(o,r,"/"),this.set(i,o,e)},attr:function(t,e,n){var i=Array.from(arguments);return 0===i.length?this.get("attrs"):(Array.isArray(t)?i[0]=["attrs"].concat(t):ue(t)?i[0]="attrs/"+t:i[0]={attrs:t},this.prop.apply(this,i))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(r,e,o,n){n=n||"/",o=Nt({duration:100,delay:10,timingFunction:At.linear,valueFunction:Pt.number},o);var s,a=0,h=function(t){var e,n,i;(n=(t-=a=a||t)/o.duration)<1?this._transitionIds[r]=e=dt(h):(n=1,delete this._transitionIds[r]),i=s(o.timingFunction(n)),o.transitionId=e,this.prop(r,i,o),e||this.trigger("transition:end",this,r)}.bind(this),t=function(t){this.stopTransitions(r),s=o.valueFunction(rt(this.attributes,r,n),e),this._transitionIds[r]=dt(t),this.trigger("transition:start",this,r)}.bind(this);return setTimeout(t,o.delay,h)},getTransitions:function(){return Object.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var n=t&&t.split(e);return Object.keys(this._transitionIds).filter(n&&function(t){return It(n,t.split(e).slice(0,n.length))}).forEach(function(t){ft(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Nt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Nt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&this.hasChanged(n)&&(e|=t[n]);return e},angle:function(){return 0},position:function(){return new z(0,0)},getPointFromConnectedLink:function(){return new z},getBBox:function(){return new X(0,0,0,0)}},{getAttributeDefinition:function(t){var e=this.attributes,n=Ee;return e&&e[t]||n[t]},define:function(t,e,n,i){n=Nt({defaults:Ft({type:t},e,this.prototype.defaults)},n);var r=this.extend(n,i);return"undefined"!=typeof joint&&Kt(joint,"shapes")&&ot(joint.shapes,t,r,"."),r}}),Te=function(e,t,n){if(ue(n)){if(!Le[n])throw new Error('Unknown wrapper: "'+n+'"');n=Le[n]}if(!jt(n))throw new Error("Wrapper must be a function.");Ut(t).forEach(function(t){e[t]=n(e[t])})},Le={cells:function(r){return function(){var t=Array.from(arguments),e=t.length,n=0<e&&t[0]||[],i=1<e&&t[e-1]||{};return Array.isArray(n)||(i instanceof Ce?n=t:n instanceof Ce&&(1<t.length&&t.pop(),n=t)),i instanceof Ce&&(i={}),r.call(this,n,i)}}},Me={wrapWith:Te,wrappers:Le,addClassNamePrefix:tt,removeClassNamePrefix:et,parseDOMJSON:nt,hashCode:it,getByPath:rt,setByPath:ot,unsetByPath:st,flattenObject:at,uuid:ht,guid:lt,toKebabCase:ut,normalizeEvent:ct,nextFrame:dt,cancelFrame:ft,shapePerimeterConnectionPoint:function(t,e,n,i){var r,o;if(!n){var s=e.$(".scalable")[0],a=e.$(".rotatable")[0];s&&s.firstChild?n=s.firstChild:a&&a.firstChild&&(n=a.firstChild)}return n?(o=K(n).findIntersection(i,t.paper.cells))||(r=K(n).getBBox({target:t.paper.cells})):o=(r=e.model.getBBox()).intersectionWithLineFromCenterToPoint(i),o||r.center()},isPercentage:pt,parseCssNumeric:gt,breakText:vt,sanitizeHTML:mt,downloadBlob:yt,downloadDataUri:function(t,e){var n=wt(t);yt(n,e)},dataUriToBlob:wt,imageToDataUri:function(r,t){if(!r||"data:"===r.substr(0,"data:".length))return setTimeout(function(){t(null,r)},0);var e=new XMLHttpRequest;e.open("GET",r,!0),e.addEventListener("error",function(){t(new Error("Failed to load image "+r))}),e.responseType=window.FileReader?"blob":"arraybuffer",e.addEventListener("load",function(){window.FileReader?function(t,n){if(200===t.status){var e=new FileReader;e.onload=function(t){var e=t.target.result;n(null,e)},e.onerror=function(){n(new Error("Failed to load image "+r))},e.readAsDataURL(t.response)}else n(new Error("Failed to load image "+r))}(e,t):function(t,e){if(200===t.status){var n=new Uint8Array(t.response),i=r.split(".").pop()||"png";e(null,"data:image/"+({svg:"svg+xml"}[i]||i)+";base64,"+btoa(function(t){for(var e=[],n=0;n<t.length;n+=32768)e.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return e.join("")}(n)))}else e(new Error("Failed to load image "+r))}(e,t)}),e.send()},getElementBBox:function(t){var e=C(t);if(0===e.length)throw new Error("Element not found");var n=e[0],i=n.ownerDocument,r=n.getBoundingClientRect(),o=0,s=0;if(n.ownerSVGElement){var a=K(n),h=a.getBBox({target:a.svg()});o=r.width-h.width,s=r.height-h.height}return{x:r.left+window.pageXOffset-i.documentElement.offsetLeft+o/2,y:r.top+window.pageYOffset-i.documentElement.offsetTop+s/2,width:r.width-o,height:r.height-s}},sortElements:bt,setAttributesBySelector:function(t,e){var i=C(t);ie(e,function(t,e){var n=i.find(e).addBack().filter(e);Kt(t,"class")&&(n.addClass(t.class),t=te(t,"class")),n.attr(t)})},normalizeSides:xt,timing:At,interpolate:Pt,filter:St,format:kt,template:Et,toggleFullScreen:function(t){var e=window.top.document;function n(t,e){for(var n=["webkit","moz","ms","o",""],i=0;i<n.length;i++){var r=n[i],o=r?r+e:e.substr(0,1).toLowerCase()+e.substr(1);if(void 0!==t[o])return jt(t[o])?t[o]():t[o]}}t=t||e.body,n(e,"FullscreenElement")||n(e,"FullScreenElement")?n(e,"ExitFullscreen")||n(e,"CancelFullScreen"):n(t,"RequestFullscreen")||n(t,"RequestFullScreen")},mixin:Ct,supplement:Tt,deepMixin:Lt,deepSupplement:Mt,assign:Nt,defaults:Vt,defaultsDeep:Ft,invoke:_t,sortedIndex:Rt,uniq:Bt,clone:Ot,cloneDeep:Dt,isEmpty:zt,isEqual:It,isFunction:jt,isPlainObject:Gt,toArray:Ut,debounce:qt,groupBy:Ht,sortBy:Yt,flattenDeep:$t,without:Xt,difference:Wt,intersection:Zt,union:Jt,has:Kt,result:Qt,omit:te,pick:ee,bindAll:ne,forIn:ie,camelCase:re,uniqueId:oe,merge:se,isBoolean:ae,isObject:he,isNumber:le,isString:ue,noop:ce,cloneCells:de};function Ne(t,e,n){var i=t.toJSON();return i.angle=e||0,Vt({},n,i)}function Ve(t,e,n){return t.map(function(t,e,n){var i=this.pointAt((e+.5)/n.length);return(t.dx||t.dy)&&i.offset(t.dx||0,t.dy||0),Ne(i.round(),0,t)},P(e,n))}function Fe(t,e,s,a){var h=e.center(),l=e.width/e.height,u=e.topMiddle(),c=x.fromRect(e);return t.map(function(t,e,n){var i=s+a(e,n.length),r=u.clone().rotate(h,-i).scale(l,1,h),o=t.compensateRotation?-c.tangentTheta(r):0;return(t.dx||t.dy)&&r.offset(t.dx||0,t.dy||0),t.dr&&r.move(h,t.dr),Ne(r.round(),o,t)})}function _e(t,e){var n=e.x;ue(n)&&(n=parseFloat(n)/100*t.width);var i=e.y;return ue(i)&&(i=parseFloat(i)/100*t.height),S(n||0,i||0)}var Re={absolute:function(t,e,n){return t.map(_e.bind(null,e))},fn:function(t,e,n){return n.fn(t,e,n)},line:function(t,e,n){return Ve(t,_e(e,n.start||e.origin()),_e(e,n.end||e.corner()))},left:function(t,e,n){return Ve(t,e.origin(),e.bottomLeft())},right:function(t,e,n){return Ve(t,e.topRight(),e.corner())},top:function(t,e,n){return Ve(t,e.origin(),e.topRight())},bottom:function(t,e,n){return Ve(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,n){var i=n.startAngle||0,r=n.step||360/t.length;return Fe(t,e,i,function(t){return t*r})},ellipse:function(t,e,n){var i=n.startAngle||0,r=n.step||20;return Fe(t,e,i,function(t,e){return(t+.5-e/2)*r})}};function Be(t,e){return Ft({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Oe(t,e,n,i){i=Vt({},i,{offset:15});var r,o,s,a,h=e.center().theta(t),l=De(e),u=i.offset,c=0;a=h<l[1]||h>l[2]?(s=".3em",r=u,o=0,"start"):h<l[0]?(s="0",r=0,o=-u,n?(c=-90,"start"):"middle"):h<l[3]?(s=".3em",r=-u,o=0,"end"):(s=".6em",r=0,o=u,n?(c=90,"start"):"middle");var d=Math.round;return Be({x:d(r),y:d(o),angle:c,attrs:{".":{y:s,"text-anchor":a}}})}function De(t){var e=t.center(),n=e.theta(t.origin()),i=e.theta(t.bottomLeft()),r=e.theta(t.corner());return[n,e.theta(t.topRight()),r,i]}function ze(t,e,n,i){var r,o,s,a,h=e.center().theta(t),l=(i=Vt({},i,{offset:15})).offset,u=0,c=De(e);a=h<c[1]||h>c[2]?(s=".3em",r=-l,o=0,"end"):h<c[0]?(s=".6em",r=0,o=l,n?(u=90,"start"):"middle"):h<c[3]?(s=".3em",r=l,o=0,"start"):(s="0em",r=0,o=-l,n?(u=-90,"start"):"middle");var d=Math.round;return Be({x:d(r),y:d(o),angle:u,attrs:{".":{y:s,"text-anchor":a}}})}function Ie(t,e,n){n=Vt({},n,{offset:20});var i,r=S(0,0),o=-t.theta(r),s=o,a=t.clone().move(r,n.offset).difference(t).round(),h=".3em";(o+90)%180==0?(i=e?"end":"middle",e||-270!==o||(h="0em")):-270<o&&o<-90?(i="start",s=o-180):i="end";var l=Math.round;return Be({x:l(a.x),y:l(a.y),angle:e?s:0,attrs:{".":{y:h,"text-anchor":i}}})}var je={manual:function(t,e,n){return Be(n,e)},left:function(t,e,n){return Be(n,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,n){return Be(n,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,n){return Be(n,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,n){return Be(n,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,n){return Oe(t,e,!0,n)},outside:function(t,e,n){return Oe(t,e,!1,n)},insideOriented:function(t,e,n){return ze(t,e,!0,n)},inside:function(t,e,n){return ze(t,e,!1,n)},radial:function(t,e,n){return Ie(t.difference(e.center()),!1,n)},radialOriented:function(t,e,n){return Ie(t.difference(e.center()),!0,n)}},Ge=function(t){var e=Dt(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Re,this.portLabelLayoutNamespace=je,this._init(e)};Ge.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(t,r){var e=this.getGroup(t),n=this.getPortsByGroup(t),i=e.position||{},o=i.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=i.args||{},h=n.map(function(t){return t&&t.position&&t.position.args}),l=s[o](h,r,a),u={ports:n,result:[]};return Ut(l).reduce(function(t,e,n){var i=t.ports[n];return t.result.push({portId:i.id,portTransformation:e,labelTransformation:this._getPortLabelLayout(i,z(e),r),portAttrs:i.attrs,portSize:i.size,labelSize:i.label.size}),t}.bind(this),u),u.result},_getPortLabelLayout:function(t,e,n){var i=this.portLabelLayoutNamespace,r=t.label.position.name||"left";return i[r]?i[r](e,n,t.label.position.args):null},_init:function(t){if(he(t.groups))for(var e=Object.keys(t.groups),n=0,i=e.length;n<i;n++){var r=e[n];this.groups[r]=this._evaluateGroup(t.groups[r])}for(var o=Ut(t.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return se(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Nt({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=se({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=se({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Nt({},n.size,e.size),e},_getZIndex:function(t,e){return le(e.z)?e.z:le(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return se({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n,i={};jt(t)?(n="fn",i.fn=t):ue(t)?n=t:void 0===t?n=e?"left":null:Array.isArray(t)?(n="absolute",i.x=t[0],i.y=t[1]):he(t)&&(n=t.name,Nt(i,t.args));var r={args:i};return n&&(r.name=n),r},_getLabel:function(t,e){var n=t.label||{},i=n;return i.position=this._getPosition(n.position,e),i}};var Ue={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Ut(t.items).forEach(function(t){e[t.id]=!0});var n=this.previous("ports")||{},i={};Ut(n.items).forEach(function(t){e[t.id]||(i[t.id]=!0)});var r=this.graph;r&&!zt(i)&&(r.getConnectedLinks(this,{inbound:!0}).forEach(function(t){i[t.get("target").port]&&t.remove()}),r.getConnectedLinks(this,{outbound:!0}).forEach(function(t){i[t.get("source").port]&&t.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&0<t.length},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return Dt(this.prop("ports/items"))||[]},getGroupPorts:function(e){var t=Ut(this.prop(["ports","items"])).filter(function(t){return t.group===e});return Dt(t)},getPort:function(e){return Dt(Ut(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,X(this.size())).reduce(function(t,e){var n=e.portTransformation;return t[e.portId]={x:n.x,y:n.y,angle:n.angle},t},{})},getPortIndex:function(t){var e=he(t)?t.id:t;return this._isValidPortId(e)?Ut(this.prop("ports/items")).findIndex(function(t){return t.id===e}):-1},addPort:function(t,e){if(!he(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Nt([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},portProp:function(t,e,n,i){var r=this.getPortIndex(t);if(-1===r)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",r].concat(e):ue(e)?o[0]=["ports/items/",r,"/",e].join(""):(o=["ports/items/"+r],Gt(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],n=Ut((t=t||{}).items);return n.forEach(function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())},this),Bt(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!he(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Nt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){var n=e||{},i=this.getPortIndex(t);if(-1!==i){var r=Nt([],this.prop(["ports","items"]));r.splice(i,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],r,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){var n,i;if(Array.isArray(t)){if(n=e||{},0===t.length)return this.this;i=Nt([],this.prop(["ports","items"])).filter(function(n){return!t.some(function(t){var e=he(t)?t.id:t;return n.id===e})})}else n=t||{},i=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],i,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(0<e.length)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new Ge(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var i=n.filter(function(e){if(!t.find(function(t){return t.id===e.id}))return e}),r=t.filter(function(e){if(!n.find(function(t){return t.id===e.id}))return e});0<r.length&&this.trigger("ports:remove",this,r),0<i.length&&this.trigger("ports:add",this,i)}}},qe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var n=[],i=this._getContainerElement(),t=0,e=i.node.childNodes.length;t<e;t++)n.push(i.node.childNodes[t]);var r=Ht(this.model._portSettingsData.getPorts(),"z");Ut(r.auto).forEach(function(t){var e=this._getPortElement(t);i.append(e),n.push(e)},this);for(var o=Object.keys(r),s=0;s<o.length;s++){var a=o[s];if("auto"!==a){var h=parseInt(a,10);this._appendPorts(r[a],h,n)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var i=this._getContainerElement(),r=Ut(t).map(this._getPortElement,this);n[e]||e<0?K(n[Math.max(e,0)]).before(r):i.append(r)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){var n=this._portElementsCache[t];if(!n)return null;var i=n.portContentElement.node,r=n.portContentSelectors;return this.findBySelector(e,i,r)[0]},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){_t(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e,n,i,r=K(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(t);if(Array.isArray(o)){var s=this.parseDOMJSON(o,r.node),a=s.fragment;e=1<a.childNodes.length?K("g").append(a):K(a.firstChild),i=s.selectors}else e=K(o),Array.isArray(e)&&(e=K("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});var h,l,u=this._getPortLabelMarkup(t.label);if(Array.isArray(u)){var c=this.parseDOMJSON(u,r.node),d=c.fragment;n=1<d.childNodes.length?K("g").append(d):K(d.firstChild),h=c.selectors}else n=K(u),Array.isArray(n)&&(n=K("g").append(n));if(!n)throw new Error("ElementView: Invalid port label markup.");if(i&&h){for(var f in h)if(i[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");l=Nt({},i,h)}else l=i||h;return r.append([e.addClass("joint-port-body"),n.addClass("joint-port-label")]),this._portElementsCache[t.id]={portElement:r,portLabelElement:n,portSelectors:l,portLabelSelectors:h,portContentElement:e,portContentSelectors:i},r},_updatePortGroup:function(t){for(var e=X(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),i=0,r=n.length;i<r;i++){var o=n[i],s=o.portId,a=this._portElementsCache[s]||{},h=o.portTransformation;this.applyPortTransform(a.portElement,h),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new X(o.portSize),selectors:a.portSelectors});var l=o.labelTransformation;l&&(this.applyPortTransform(a.portLabelElement,l,-h.angle||0),this.updateDOMSubtreeAttributes(a.portLabelElement.node,l.attrs,{rootBBox:new X(o.labelSize),selectors:a.portLabelSelectors}))}},applyPortTransform:function(t,e,n){var i=K.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(i,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},He=Ce.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Ce.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){var i=le(e);if((n=(i?n:t)||{}).parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var r=this.getParentCell(),o=r&&!r.isLink()?r.get("position"):{x:0,y:0}}if(i){if(n.parentRelative&&(t+=o.x,e+=o.y),n.deep){var s=this.get("position");this.translate(t-s.x,e-s.y,n)}else this.set("position",{x:t,y:e},n);return this}var a=z(this.get("position"));return n.parentRelative?a.difference(o):a},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var i=this.get("position")||{x:0,y:0};if(n.restrictedArea&&n.translateBy===this.id){var r=this.getBBox({deep:!0}),o=n.restrictedArea,s=i.x-r.x,a=i.y-r.y,h=Math.max(o.x+s,Math.min(o.x+o.width+s-r.width,i.x+t)),l=Math.max(o.y+a,Math.min(o.y+o.height+a-r.height,i.y+e));t=h-i.x,e=l-i.y}var u={x:i.x+t,y:i.y+e};return n.tx=t,n.ty=e,n.transition?(he(n.transition)||(n.transition={}),this.transition("position",u,Nt({},n.transition,{valueFunction:Pt.object})),_t(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",u,n),_t(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var i=this.get("size");return void 0===t?{width:i.width,height:i.height}:(he(t)&&(n=e,e=le(t.height)?t.height:i.height,t=le(t.width)?t.width:i.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var i=this.get("size");switch(n.direction){case"left":case"right":e=i.height;break;case"top":case"bottom":t=i.width}var r=b(this.get("angle")||0),o={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(o+=Math.floor((r+45)/90),o%=4);var s=this.getBBox(),a=s[["bottomLeft","corner","topRight","origin"][o]](),h=z(a).rotate(s.center(),-r),l=Math.sqrt(t*t+e*e)/2,u=o*Math.PI/2;u+=Math.atan(o%2==0?e/t:t/e),u-=A(r);var c=z.fromPolar(l,u,h),d=z(c).offset(t/-2,e/-2);this.set("size",{width:t,height:e},n),this.position(d.x,d.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,i){var r=this.getBBox().scale(t,e,n);return this.startBatch("scale",i),this.position(r.x,r.y,i),this.resize(r.width,r.height,i),this.stopBatch("scale"),this},fitEmbeds:function(t){void 0===t&&(t={});var e=this.graph;if(!e)throw new Error("Element must be part of a graph.");var n=this.getEmbeddedCells().filter(function(t){return t.isElement()});if(0===n.length)return this;this.startBatch("fit-embeds",t),t.deep&&_t(n,"fitEmbeds",t);var i=xt(t.padding),r=i.left,o=i.right,s=i.top,a=i.bottom,h=e.getCellsBBox(n),l=h.x,u=h.y,c=h.width,d=h.height;return l-=r,u-=s,c+=r+o,d+=a+s,this.set({position:{x:l,y:u},size:{width:c,height:d}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,n,i){if(n){var r=this.getBBox().center(),o=this.get("size"),s=this.get("position");r.rotate(n,this.get("angle")-t);var a=r.x-o.width/2-s.x,h=r.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(s.x+a,s.y+h,i),this.rotate(t,e,null,i),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,i);return this},angle:function(){return b(this.get("angle")||0)},getBBox:function(t){if((t=t||{}).deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var n=this.get("position"),i=this.get("size");return new X(n.x,n.y,i.width,i.height)},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),i=n.center(),r=t.get(e);if(!r)return i;var o=r.port;if(!o||!this.hasPort(o))return i;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),h=new z(a[o]).offset(n.origin()),l=this.angle();return l&&h.rotate(i,-l),h}});Nt(He.prototype,Ue);var Ye={},$e=s.View.extend({options:{},theme:null,themeClassNamePrefix:tt("theme-"),requireSetThemeOverride:!1,defaultTheme:Q.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Nt({},this.options,t),s.View.call(this,t)},initialize:function(){(Ye[this.cid]=this).setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=Qt(this,"children")),t){var e=this.svgElement,n=K.namespace[e?"svg":"xhtml"],i=nt(t,n);(e?this.vel:this.$el).empty().append(i.fragment),this.childNodes=i.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&1===n.nodeType;){var i=n.getAttribute(t);if(i)return i;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Qt(this,"el"));else{var t=Qt(this,"tagName"),e=Nt({},Qt(this,"attributes")),n=Nt({},Qt(this,"style"));this.id&&(e.id=Qt(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(K.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof s.$?t:s.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=K(this.el))},_ensureElClassName:function(){var t=Qt(this,"className");if(t){var e=tt(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ye[this.cid]=null,s.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var i=this.getEventNamespace();for(var r in e){var o=e[r];"function"!=typeof o&&(o=this[o]),o&&C(t).on(r+i,n,o.bind(this))}return this},undelegateElementEvents:function(t){return C(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=Qt(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,i="__"+this.cid+"__";return void 0===e?n&&n[i]||{}:(n||(n=t.data={}),n[i]||(n[i]={}),Nt(n[i],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Nt({},t[0])||{},n=t[1]&&Nt({},t[1])||{},i=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof i&&i.apply(this,arguments),this.render.__render__===i&&this.onRender(),this},e.render.__render__=i,s.View.extend.call(this,e,n)}}),Xe={views:Ye,View:$e},We=$e.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var i=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(t,e,n){i.push("type-"+n.slice(0,e+1).join("-"))}),i.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,n,i={},r={},o=0,s=this.presentationAttributes;for(var a in s)if(s.hasOwnProperty(a)){var h=s[a];for(Array.isArray(h)||(h=[h]),t=0,e=h.length;t<e;t++){var l=i[n=h[t]];l||(l=i[n]=1<<o++),r[a]|=l}}var u=this.initFlag;for(Array.isArray(u)||(u=[u]),t=0,e=u.length;t<e;t++)i[n=u[t]]||(i[n]=1<<o++);if(25<o)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=i,this._presentationAttributes=r},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n|=e[t[i]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||lt(this),$e.call(this,t)},initialize:function(){this.setFlags(),$e.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);if(!e.updateHandled&&n){e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1);var i=this.paper;i&&i.requestViewUpdate(this,n,this.UPDATE_PRIORITY,e)}},parseDOMJSON:function(t,e){var n=nt(t),i=n.selectors,r=n.groupSelectors;for(var o in r){if(i[o])throw new Error("dia.CellView: ambiguous group selector");i[o]=r[o]}if(e){var s=this.selector;if(i[s])throw new Error("dia.CellView: ambiguous root selector.");i[s]=e}return{fragment:n.fragment,selectors:i}},can:function(t){var e=jt(this.options.interactive)?this.options.interactive(this):this.options.interactive;return he(e)&&!1!==e[t]||ae(e)&&!1!==e},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||"."===t)return[e];if(n){var i=n[t];if(i)return Array.isArray(i)?i:[i]}return Q.useCSSSelectors?C(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),i=this.getRootTranslateMatrix(),r=this.getRootRotateMatrix();return K.transformRect(e,i.multiply(r).multiply(n))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),i=this.getRootTranslateMatrix();return K.transformRect(e,i.multiply(n))},getRootTranslateMatrix:function(){var t=this.model.position();return K.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=K.createSVGMatrix(),e=this.model,n=e.angle();if(n){var i=e.getBBox(),r=i.width/2,o=i.height/2;t=t.translate(r,o).rotate(n).translate(-r,-o)}return t},highlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!==this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t),n=this.$el;0===e.length&&(e=n);do{var i=e.attr("magnet");if((i||e.is(n))&&"false"!==i)return e[0];e=e.parent()}while(0<e.length)},getSelector:function(t,e){var n;if(t===this.el)return"string"==typeof e&&(n="> "+e),n;if(t){var i=K(t).index()+1;n=t.tagName+":nth-child("+i+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},getLinkEnd:function(t){for(var e,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];var r=this.model,o=r.id,s=this.findAttribute("port",t),a=t.getAttribute("joint-selector"),h={id:o};return null!=a&&(h.magnet=a),null!=s?(h.port=s,r.hasPort(s)||a||(h.selector=this.getSelector(t))):null==a&&this.el!==t&&(h.selector=this.getSelector(t)),(e=this).customizeLinkEnd.apply(e,[h,t].concat(n))},customizeLinkEnd:function(t,e,n,i,r,o){var s=this.paper,a=s.options.connectionStrategy;if("function"==typeof a){var h=a.call(s,t,this,e,new z(n,i),r,o,s);if(h)return h}return t},getMagnetFromLinkEnd:function(t){var e=this.el,n=t.port,i=t.magnet,r=this.model;return null!=n&&r.isElement()&&r.hasPort(n)?this.findPortNode(n,i)||e:(i||(i=t.selector),i||null==n||(i='[port="'+n+'"]'),this.findBySelector(i,e,this.selectors)[0])},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){zt(e)||(t instanceof SVGElement?K(t).attr(e):C(t).attr(e))},processNodeAttributes:function(t,e){var n,i,r,o,s,a,h,l,u,c=[];for(n in e)e.hasOwnProperty(n)&&(i=e[n],!(r=this.getAttributeDefinition(n))||jt(r.qualify)&&!r.qualify.call(this,i,t,e)?(a||(a={}),a[ut(n)]=i):(ue(r.set)&&(a||(a={}),a[r.set]=i),null!==i&&c.push(n,r)));for(o=0,s=c.length;o<s;o+=2)n=c[o],r=c[o+1],i=e[n],jt(r.set)&&(h||(h={}),h[n]=i),jt(r.position)&&(l||(l={}),l[n]=i),jt(r.offset)&&(u||(u={}),u[n]=i);return{raw:e,normal:a,set:h,position:l,offset:u}},updateRelativeAttributes:function(t,e,n,i){var r,o;i||(i={});var s=e.raw||{},a=e.normal||{},h=e.set,l=e.position,u=e.offset;for(r in h){o=h[r];var c=this.getAttributeDefinition(r).set.call(this,o,n.clone(),t,s);he(c)?Nt(a,c):void 0!==c&&(a[r]=c)}if(t instanceof HTMLElement)this.setNodeAttributes(t,a);else{var d,f,p,g=a.transform,v=K.transformStringToMatrix(g),m=z(v.e,v.f);if(g&&(a=te(a,"transform"),v.e=v.f=0),l||u){var y=this.getNodeScale(t,i.scalableNode);d=y.sx,f=y.sy}var w=!1;for(r in l)o=l[r],(p=this.getAttributeDefinition(r).position.call(this,o,n.clone(),t,s))&&(m.offset(z(p).scale(d,f)),w||(w=!0));this.setNodeAttributes(t,a);var b=!1;if(u){var x=this.getNodeBoundingRect(t);if(0<x.width&&0<x.height){var A=K.transformRect(x,v).scale(1/d,1/f);for(r in u)o=u[r],(p=this.getAttributeDefinition(r).offset.call(this,o,A,t,s))&&(m.offset(z(p).scale(d,f)),b||(b=!0))}}(void 0!==g||w||b)&&(m.round(1),v.e=m.x,v.f=m.y,t.setAttribute("transform",K.matrixToTransformString(v)))}},getNodeScale:function(t,e){var n,i;if(e&&e.contains(t)){var r=e.scale();n=1/r.sx,i=1/r.sy}else i=n=1;return{sx:n,sy:i}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=K.ensureId(t),i=e[n];return i||(i=e[n]={}),i},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=K(t).getBBox()),new X(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var n=this.rotatableNode||this.el;e.magnetMatrix=K(t).getTransformToElement(n)}return K.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=K(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,i){var r,o,s,a,h={},l=[];for(var u in t)if(t.hasOwnProperty(u)&&(s=t[u],Gt(s))){var c=n[u]=this.findBySelector(u,e,i);for(r=0,o=c.length;r<o;r++){var d=c[r];a=K.ensureId(d);var f=i&&i[u]===d,p=h[a];if(p){p.array||(l.push(a),p.array=!0,p.attributes=[p.attributes],p.selectedLength=[p.selectedLength]);var g=p.attributes,v=p.selectedLength;if(f)g.unshift(s),v.unshift(-1);else{var m=Rt(v,o);g.splice(m,0,s),v.splice(m,0,o)}}else h[a]={attributes:s,selectedLength:f?-1:o,node:d,array:!1}}}for(r=0,o=l.length;r<o;r++)(s=h[a=l[r]]).attributes=se.apply(void 0,[{}].concat(s.attributes.reverse()));return h},getEventTarget:function(t,e){void 0===e&&(e={});var n=t.target,i=t.type,r=t.clientX;void 0===r&&(r=0);var o=t.clientY;return void 0===o&&(o=0),e.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(r,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=X()),n.selectors||(n.selectors=this.selectors);var i,r,o,s,a,h,l={},u={},c=[],d=n.roAttributes,f=this.findNodesAttributes(d||e,t,l,n.selectors),p=d?this.findNodesAttributes(e,t,l,n.selectors):f;for(var g in f)if(o=(s=f[g]).attributes,r=s.node,(a=this.processNodeAttributes(r,o)).set||a.position||a.offset){var v,m=p[g]&&p[g].attributes,y=m&&void 0===o.ref?m.ref:o.ref;if(y){if(!(v=(l[y]||this.findBySelector(y,t,n.selectors))[0]))throw new Error('dia.ElementView: "'+y+'" reference does not exist.')}else v=null;i={node:r,refNode:v,processedAttributes:a,allAttributes:m};var w=c.findIndex(function(t){return t.refNode===r});-1<w?c.splice(w,0,i):c.push(i)}else this.setNodeAttributes(r,a.normal);for(var b=0,x=c.length;b<x;b++){i=c[b],r=i.node,v=i.refNode;var A=K(n.rotatableNode),P=v?K.ensureId(v):"",S=!!A&&!!v&&A.contains(v),k=u[P];if(!k){var E=S?A:t;k=u[P]=v?K(v).getBBox({target:E}):n.rootBBox}d?(a=this.processNodeAttributes(r,i.allAttributes),this.mergeProcessedAttributes(a,i.processedAttributes)):a=i.processedAttributes;var C=k;S&&!A.contains(r)&&(h||(h=K.transformStringToMatrix(A.attr("transform"))),C=K.transformRect(k,h)),this.updateRelativeAttributes(r,a,C,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Nt(t.set,e.set),Nt(t.position,e.position),Nt(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onRemove:function(){this.removeTools()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!!e&&(!t||e.getName()===t)},addTools:function(t){return this.removeTools(),t&&((this._toolsView=t).configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this)),t.mount()),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){var i=this.model,r=i.graph;r&&(i.startBatch("pointer"),this.eventData(t,{graph:r})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){var i=this.eventData(t).graph;this.notify("cell:pointerup",t,e,n),i&&i.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,i){this.notify("cell:mousewheel",t,e,n,i)},onevent:function(t,e,n,i){this.notify(e,t,n,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave:function(t){var e=this.paper;e.isAsync()&&e.dumpView(this);var n=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(n);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{addPresentationAttributes:function(t){return se({},this.prototype.presentationAttributes,t,function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?Bt(t.concat(e)):void 0})}}),Ze=We.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=We.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){We.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:["UPDATE"],position:["TRANSLATE","TOOLS"],size:["RESIZE","PORTS","TOOLS"],angle:["ROTATE","TOOLS"],markup:["RENDER"],ports:["PORTS"]},initFlag:["RENDER"],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){var n=Q.useCSSSelectors;return this.hasFlag(t,"PORTS")&&(this._removePorts(),this._cleanPortsCache()),this.hasFlag(t,"RENDER")?(this.render(),this.updateTools(e),t=this.removeFlag(t,["RENDER","UPDATE","RESIZE","TRANSLATE","ROTATE","PORTS"])):(this.hasFlag(t,"RESIZE")&&(this.resize(e),t=this.removeFlag(t,["RESIZE","UPDATE"])),this.hasFlag(t,"UPDATE")&&(this.update(this.model,null,e),t=this.removeFlag(t,"UPDATE"),n&&(t=this.removeFlag(t,"PORTS"))),this.hasFlag(t,"TRANSLATE")&&(this.translate(),t=this.removeFlag(t,"TRANSLATE")),this.hasFlag(t,"ROTATE")&&(this.rotate(),t=this.removeFlag(t,"ROTATE")),this.hasFlag(t,"PORTS")&&(this._renderPorts(),t=this.removeFlag(t,"PORTS"))),this.hasFlag(t,"TOOLS")&&(this.updateTools(e),t=this.removeFlag(t,"TOOLS")),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();var n=Q.useCSSSelectors;n&&this._removePorts();var i=this.model,r=i.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:new X(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===r?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=K(n[this.rotatableSelector])||null,this.scalableNode=K(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(K(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Q.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),i=e.size(),r=this.scalableNode,o=!1;0<r.node.getElementsByTagName("path").length&&(o=!0);var s=r.getBBox({recursive:o}),a=i.width/(s.width||1),h=i.height/(s.height||1);r.attr("transform","scale("+a+","+h+")");var l=this.rotatableNode,u=l&&l.attr("transform");if(u){l.attr("transform",u+" rotate("+-n+","+i.width/2+","+i.height/2+")");var c=r.getBBox({target:this.paper.cells});e.set("position",{x:c.x,y:c.y},Nt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t){t||(t={});var e=t.model||this.model,n=(t.paper||this.paper).model;e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});var i=n.getElements().reduce(function(t,e){return Math.max(t,e.attributes.z||0)},0);n.getConnectedLinks(e,{deep:!0,includeEnclosed:!0}).forEach(function(t){t.attributes.z<=i&&t.set("z",i+1,{ui:!0})}),e.stopBatch("to-front");var r=e.parent();r&&n.getCell(r).unembed(e,{ui:!0})},processEmbedding:function(t){t||(t={});var e=t.model||this.model,n=t.paper||this.paper,i=n.options,r=[];jt(i.findParentBy)?r=Ut(i.findParentBy.call(n.model,this)).filter(function(t){return t instanceof Ce&&this.model.id!==t.id&&!t.isEmbeddedIn(this.model)}.bind(this)):r=n.model.findModelsUnderElement(e,{searchBy:i.findParentBy});i.frontParentOnly&&(r=r.slice(-1));for(var o=null,s=t.candidateEmbedView,a=r.length-1;0<=a;a--){var h=r[a];if(s&&s.model.id==h.id){o=s;break}var l=h.findView(n);if(i.validateEmbedding.call(n,this,l)){o=l;break}}o&&o!=s&&(this.clearEmbedding(t),t.candidateEmbedView=o.highlight(null,{embedding:!0})),!o&&s&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(null,{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t){t||(t={});var e=t.candidateEmbedView,n=t.model||this.model,i=t.paper||this.paper;e&&(e.model.embed(n,{ui:!0}),e.unhighlight(null,{embedding:!0}),t.candidateEmbedView=null),_t(i.model.getConnectedLinks(n,{deep:!0}),"reparent",{ui:!0})},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},notifyPointerdown:function(t,e,n){We.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove:function(t,e,n){We.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup:function(t,e,n){this.notify("element:pointerup",t,e,n),We.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){We.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){We.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){We.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,n),this.dragStart(t,e,n))},pointermove:function(t,e,n){var i=this.eventData(t);switch(i.action){case"magnet":this.dragMagnet(t,e,n);break;case"move":(i.delegatedView||this).drag(t,e,n);default:this.notifyPointermove(t,e,n)}this.eventData(t,i)},pointerup:function(t,e,n){var i=this.eventData(t);switch(i.action){case"magnet":this.dragMagnetEnd(t,e,n);break;case"move":(i.delegatedView||this).dragEnd(t,e,n);default:this.notifyPointerup(t,e,n)}var r=i.targetMagnet;r&&this.magnetpointerclick(t,r,e,n),this.checkMouseleave(t)},mouseover:function(t){We.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){We.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){We.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){We.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,i){We.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,i)},onmagnet:function(t,e,n){this.dragMagnetStart(t,e,n)},magnetpointerdblclick:function(t,e,n,i){this.notify("element:magnet:pointerdblclick",t,e,n,i)},magnetcontextmenu:function(t,e,n,i){this.notify("element:magnet:contextmenu",t,e,n,i)},dragStart:function(t,e,n){var i=this.getDelegatedView();i&&i.can("elementMove")&&(this.eventData(t,{action:"move",delegatedView:i}),i.eventData(t,{pointerOffset:i.model.position().difference(e,n),restrictedArea:this.paper.getRestrictedArea(i)}))},dragMagnetStart:function(t,e,n){if(this.can("addLinkFromMagnet")){var i=t.currentTarget,r=this.paper;this.eventData(t,{targetMagnet:i}),t.stopPropagation(),r.options.validateMagnet(this,i,t)?(r.options.magnetThreshold<=0&&this.dragLinkStart(t,i,e,n),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,n),r.delegateDragEvents(this,t.data)}},dragLinkStart:function(t,e,n,i){this.model.startBatch("add-link");var r=this.addLinkFromMagnet(e,n,i);r.notifyPointerdown(t,n,i),r.eventData(t,r.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:r})},addLinkFromMagnet:function(t,e,n){var i=this.paper,r=i.model,o=i.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(r,{async:!1,ui:!0}),o.findView(i)},drag:function(t,e,n){var i=this.paper,r=i.options.gridSize,o=this.model,s=this.eventData(t),a=s.pointerOffset,h=s.restrictedArea,l=s.embedding,u=v(e+a.x,r),c=v(n+a.y,r);o.position(u,c,{restrictedArea:h,deep:!0,ui:!0}),i.options.embeddingMode&&(l||(this.prepareEmbedding(s),l=!0),this.processEmbedding(s)),this.eventData(t,{embedding:l})},dragMagnet:function(t,e,n){var i=this.eventData(t),r=i.linkView;if(r)r.pointermove(t,e,n);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(t),h=i.targetMagnet;if("onleave"===s){if(h===a||K(h).contains(a))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,h,e,n)}},dragEnd:function(t,e,n){var i=this.eventData(t);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(t,e,n){var i=this.eventData(t).linkView;i&&(i.pointerup(t,e,n),this.model.stopBatch("add-link"))},magnetpointerclick:function(t,e,n,i){var r=this.paper;r.eventData(t).mousemoved>r.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,i)}});Nt(Ze.prototype,qe);var Je={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(void 0!==n)return n;try{n=e()}catch(t){n=!1}return this._results[t]=n}},Ke=He.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),Qe=Ke.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),tn=Ze.extend({presentationAttributes:Ze.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=Ze.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),en=Ke.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),nn=Ke.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),rn=Ke.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),on=Ke.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),sn=Ke.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),an=Ke.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),hn=Ke.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),ln=hn.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),un=Je.test("svgforeignobject"),cn=Ke.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',un?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Ke.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Nt({},e),div:{style:Nt({},e)}})},updateContent:function(t,e){un?this.attr({".content":{html:mt(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),dn=Ze.extend({presentationAttributes:un?Ze.prototype.presentationAttributes:Ze.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=Ze.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if(un)Ze.prototype.update.call(this,n,e);else{var i=te(e||n.get("attrs"),".content");Ze.prototype.update.call(this,n,i),e&&!Kt(e,".content")||this.updateContent(n,e)}},updateContent:function(t,e){var n=se({},(e||t.get("attrs"))[".content"]);n=te(n,"text");var i=vt(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),r=ot({},".content",n,"/");r[".content"].text=i,Ze.prototype.update.call(this,t,r)}}),fn={Generic:Ke,Rect:Qe,TextView:tn,Text:en,Circle:nn,Ellipse:rn,Polygon:on,Polyline:sn,Image:an,Path:hn,Rhombus:ln,TextBlock:cn,TextBlockView:dn},pn=Ce.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){return void 0===t?Ot(this.get("source")):(r=t instanceof Ce?((i=Ot(e)||{}).id=t.id,n):Gt(t)?(i=t,e):((i=Ot(e)||{}).x=t.x,i.y=t.y,n),this.set("source",i,r));var i,r},target:function(t,e,n){return void 0===t?Ot(this.get("target")):(r=t instanceof Ce?((i=Ot(e)||{}).id=t.id,n):Gt(t)?(i=t,e):((i=Ot(e)||{}).x=t.x,i.y=t.y,n),this.set("target",i,r));var i,r},router:function(t,e,n){if(void 0===t){var i=this.get("router");return i?"object"==typeof i?Ot(i):i:this.get("manhattan")?{name:"orthogonal"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},s=r?e:n;return this.set("router",o,s)},connector:function(t,e,n){if(void 0===t){var i=this.get("connector");return i?"object"==typeof i?Ot(i):i:this.get("smooth")?{name:"smooth"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},s=r?e:n;return this.set("connector",o,s)},label:function(t,e,n){var i=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=i.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var i=this.labels(),r=i.length;return(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1),i.splice(t,0,e),this.labels(i,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var i=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=i.length+t),arguments.length<=1)return this.prop(["vertices",t]);var r=this._normalizeVertex(e);return this.prop(["vertices",t],r,n)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],i=0;i<t.length;i++){var r=t[i],o=this._normalizeVertex(r);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),r=i.length;(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1);var o=this._normalizeVertex(e);return i.splice(t,0,o),this.vertices(i,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){return!Gt(t)?{x:t.x,y:t.y}:t},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(t){return{x:(t.x||0)+e,y:(t.y||0)+n}},t)},scale:function(e,n,i,t){return this.applyToPoints(function(t){return z(t).scale(e,n,i).toJSON()},t)},applyToPoints:function(t,e){if(!jt(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},i=this.attributes,r=i.source,o=i.target;r.id||(n.source=t(r)),o.id||(n.target=t(o));var s=this.vertices();return 0<s.length&&(n.vertices=s.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new z(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new z(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){var t=[this.getSourcePoint(),this.getTargetPoint()],e=this.vertices();return 0<e.length&&Array.prototype.push.apply(t,e.map(z)),new L(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),i=this.getTargetElement(),r=this.getParentCell();n&&i&&(e=n===i||n.isEmbeddedIn(i)?i:i.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,i)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.attributes,n=e.source,i=e.target,r=n.id,o=i.id;if(!r||!o)return!1;var s=r===o;if(!s&&t.deep&&this.graph){var a=this.getSourceCell(),h=this.getTargetCell();s=a.isEmbeddedIn(h)||h.isEmbeddedIn(a)}return s},getSourceCell:function(){var t=this.graph,e=this.attributes.source;return e&&e.id&&t&&t.getCell(e.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){var t=this.graph,e=this.attributes.target;return e&&e.id&&t&&t.getCell(e.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=ue(t)||le(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}}),gn=He.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),vn=He.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),mn=He.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),yn=He.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),wn=He.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),bn=He.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),xn=He.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),An=He.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Pn=He.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Sn=He.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),kn=He.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),En=He.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var n={lateralArea:t},i=pt(t)?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:n,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var n=pt(t);n&&(t=parseFloat(t)/100);var i=e.x,r=e.y,o=e.width,s=e.height,a=o/2,h=n?s*t:t,l=K.KAPPA,u=l*a,c=l*(n?s*t:t),d=i+o/2,f=i+o,p=r+h,g=p-h,v=r+s-h,m=r+s;return{d:["M",i,p,"L",i,v,"C",i,v+c,d-u,m,d,m,"C",d+u,m,f,v+c,f,v,"L",f,p,"C",f,p-c,d+u,g,d,g,"C",d-u,g,i,p-c,i,p,"Z"].join(" ")}}}}}),Cn=Je.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Tn={Rectangle:gn,Circle:vn,Ellipse:mn,Path:yn,Polygon:wn,Polyline:bn,Image:xn,BorderedImage:An,EmbeddedImage:Pn,InscribedImage:Sn,HeaderedRectangle:kn,Cylinder:En,TextBlock:He.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Cn]},{attributes:{text:{set:function(t,e,n,i){if(!(n instanceof HTMLElement)){var r=i.style||{},o={text:t,width:-5,height:"100%"},s=Nt({textVerticalAnchor:"middle"},r);return Ee.textWrap.set.call(this,o,e,n,s),{fill:r.color||null}}n.textContent=t},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}}),Link:pn.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),DoubleLink:pn.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ShadowLink:pn.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]})},Ln=["arc","gap","cubic"],Mn=["smooth"],Nn=1/3,Vn=2/3;function Fn(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(t,e,n){var i=r[n+1];return null!=i&&(t[n]=P(e,i)),t},[])}function _n(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function Rn(t,e){return P(t,e).squaredLength()}function Bn(C,T,L,M){var N,V=new D;return N=D.createSegment("M",C[0].start),V.appendSegment(N),Ut(C).forEach(function(t,e){if(t.isJump){var n,i,r,o;if("arc"===L){n=-90,i=t.start.difference(t.end);var s=Number(i.x<0||0===i.x&&i.y<0);s&&(n+=180);var a,h=t.midpoint(),l=new O(h,t.end).rotate(h,n);r=(a=new O(t.start,h)).pointAt(2/3).rotate(t.start,n),o=l.pointAt(1/3).rotate(l.end,-n),N=D.createSegment("C",r,o,l.end),V.appendSegment(N),a=new O(h,t.end),r=l.pointAt(1/3).rotate(l.end,n),o=a.pointAt(1/3).rotate(t.end,-n),N=D.createSegment("C",r,o,t.end),V.appendSegment(N)}else if("gap"===L)N=D.createSegment("M",t.end),V.appendSegment(N);else if("cubic"===L){n=t.start.theta(t.end);var u=.6*T,c=1.35*T;i=t.start.difference(t.end),(s=Number(i.x<0||0===i.x&&i.y<0))&&(c*=-1),r=z(t.start.x+u,t.start.y+c).rotate(t.start,n),o=z(t.end.x-u,t.end.y+c).rotate(t.end,n),N=D.createSegment("C",r,o,t.end),V.appendSegment(N)}}else{var d=C[e+1];0==M||!d||d.isJump?(N=D.createSegment("L",t.end),V.appendSegment(N)):(f=M,p=V,g=t.end,v=t.start,m=d.end,w=g.distance(v)/2,b=g.distance(m)/2,x=-Math.min(f,w),A=-Math.min(f,b),P=g.clone().move(v,x).round(),S=g.clone().move(m,A).round(),k=new z(Nn*P.x+Vn*g.x,Vn*g.y+Nn*P.y),E=new z(Nn*S.x+Vn*g.x,Vn*g.y+Nn*S.y),y=D.createSegment("L",P),p.appendSegment(y),y=D.createSegment("C",k,E,S),p.appendSegment(y))}var f,p,g,v,m,y,w,b,x,A,P,S,k,E}),V}var On={jumpover:function(t,e,n,i){var r,o;null==(o=(r=this).paper._jumpOverUpdateList)&&(o=r.paper._jumpOverUpdateList=[],r.paper.on("cell:pointerup",_n),r.paper.model.on("reset",function(){o=r.paper._jumpOverUpdateList=[]})),o.indexOf(r)<0&&(o.push(r),r.listenToOnce(r.model,"change:connector remove",function(){o.splice(o.indexOf(r),1)}));var s=i.raw,a=i.size||5,h=i.jump&&(""+i.jump).toLowerCase(),l=i.radius||0,u=i.ignoreConnectors||Mn;-1===Ln.indexOf(h)&&(h=Ln[0]);var c=this.paper,d=c.model.getLinks();if(1===d.length)return Bn(Fn(t,e,n),a,h,l);var f=this.model,p=d.indexOf(f),g=c.options.defaultConnector||{},v=d.filter(function(t,e){var n=t.get("connector")||g;return!(Ut(u).includes(n.name)||p<e&&"jumpover"===n.name)}),m=v.map(function(t){return c.findViewByModel(t)}),y=Fn(t,e,n),w=m.map(function(t){return null==t?[]:t===this?y:Fn(t.sourcePoint,t.targetPoint,t.route)},this),b=Bn(y.reduce(function(t,s){var l,u,c,e=v.reduce(function(t,e,n){if(e!==f){var i=(r=s,o=w[n],Ut(o).reduce(function(t,e){var n=r.intersection(e);return n&&t.push(n),t},[]));t.push.apply(t,i)}var r,o;return t},[]).sort(function(t,e){return Rn(s.start,t)-Rn(s.start,e)});return 0<e.length?t.push.apply(t,(l=s,c=a,(u=e).reduce(function(t,e,n){if(!0===e.skip)return t;var i=t.pop()||l,r=S(e).move(i.start,-c),o=S(e).move(i.start,+c),s=u[n+1];if(null!=s){var a=o.distance(s);a<=c&&(o=s.move(i.start,a),s.skip=!0)}else if(r.distance(i.end)<2*c+1)return t.push(i),t;if(o.distance(i.start)<2*c+1)return t.push(i),t;var h=P(r,o);return h.isJump=!0,t.push(P(i.start,r),h,P(o,i.end)),t},[]))):t.push(s),t},[]),a,h,l);return s?b:b.serialize()},normal:function(t,e,n,i){var r=i&&i.raw,o=[t].concat(n).concat([e]),s=new L(o),a=new D(s);return r?a:a.serialize()},rounded:function(t,e,n,i){i||(i={});var r,o=i.radius||10,s=i.raw,a=new D;r=D.createSegment("M",t),a.appendSegment(r);for(var h,l,u,c,d,f,p,g,v,m,y,w=0,b=n.length;w<b;w++)h=new z(n[w]),l=n[w-1]||t,u=n[w+1]||e,c=d||h.distance(l)/2,d=h.distance(u)/2,f=-Math.min(o,c),p=-Math.min(o,d),g=h.clone().move(l,f).round(),v=h.clone().move(u,p).round(),m=new z(1/3*g.x+2/3*h.x,2/3*h.y+1/3*g.y),y=new z(1/3*v.x+2/3*h.x,2/3*h.y+1/3*v.y),r=D.createSegment("L",g),a.appendSegment(r),r=D.createSegment("C",m,y,v),a.appendSegment(r);return r=D.createSegment("L",e),a.appendSegment(r),s?a:a.serialize()},smooth:function(t,e,n,i){var r,o=i&&i.raw;if(n&&0!==n.length){var s=[t].concat(n).concat([e]),a=g.throughPoints(s);r=new D(a)}else{var h;if(r=new D,h=D.createSegment("M",t),r.appendSegment(h),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var l=(t.x+e.x)/2;h=D.createSegment("C",l,t.y,l,e.y,e.x,e.y),r.appendSegment(h)}else{var u=(t.y+e.y)/2;h=D.createSegment("C",t.x,u,e.x,u,e.x,e.y),r.appendSegment(h)}}return o?r:r.serialize()}},Dn={stroke:{defaultOptions:{padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},_views:{},getHighlighterId:function(t,e){return t.id+JSON.stringify(e)},removeHighlighter:function(t){this._views[t]&&(this._views[t].remove(),this._views[t]=null)},highlight:function(t,e,n){var i=this.getHighlighterId(e,n);if(!this._views[i]){var r,o=Vt(n||{},this.defaultOptions),s=K(e);try{var a=s.convertToPathData()}catch(t){r=s.bbox(!0),a=K.rectToPath(Nt({},o,r))}var h=K("path").attr({d:a,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"}).attr(o.attrs);if(t.isNodeConnection(e))h.attr("d",t.getSerializedConnection());else{var l=s.getTransformToElement(t.el),u=o.padding;if(u){r||(r=s.bbox(!0));var c=r.x+r.width/2,d=r.y+r.height/2;r=K.transformRect(r,l);var f=Math.max(r.width,1),p=Math.max(r.height,1),g=(f+u)/f,v=(p+u)/p,m=K.createSVGMatrix({a:g,b:0,c:0,d:v,e:c-g*c,f:d-v*d});l=l.multiply(m)}h.transform(l)}var y=this._views[i]=new $e({svgElement:!0,className:"highlight-stroke",el:h.node}),w=this.removeHighlighter.bind(this,i),b=t.model;y.listenTo(b,"remove",w),y.listenTo(b.graph,"reset",w),t.vel.append(h)}},unhighlight:function(t,e,n){this.removeHighlighter(this.getHighlighterId(e,n))}},opacity:{highlight:function(t,e){K(e).addClass(tt("highlight-opacity"))},unhighlight:function(t,e){K(e).removeClass(tt("highlight-opacity"))}},addClass:{className:tt("highlighted"),highlight:function(t,e,n){var i=(n||{}).className||this.className;K(e).addClass(i)},unhighlight:function(t,e,n){var i=(n||{}).className||this.className;K(e).removeClass(i)}}};function zn(t,e,n){if(Gt(n)){var i=n.x,r=n.y;if(isFinite(r)){var o=new O(e,t).parallel(r);e=o.start,t=o.end}n=i}if(!isFinite(n))return t;var s=t.distance(e);return 0===n&&0<s?t:t.move(e,-Math.min(n,s-1))}function In(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function jn(t,e,n,i){var r=e.getNodeBBox(n);i.stroke&&r.inflate(In(n)/2);var o=t.intersect(r);return zn(o?t.start.chooseClosest(o):t.end,t.start,i.offset)}var Gn="segmentSubdivisons",Un="shapeBBox";var qn={anchor:function(t,e,n,i){var r=i.offset,o=i.alignOffset,s=i.align;return s&&function(t,e,n){var i,r,o,s;void 0===n&&(n=0);var a=t.start,h=t.end;switch(e){case"left":i="x",r=h,o=a,s=-1;break;case"right":i="x",r=a,o=h,s=1;break;case"top":i="y",r=h,o=a,s=-1;break;case"bottom":i="y",r=a,o=h,s=1;break;default:return}a[i]<h[i]?r[i]=o[i]:o[i]=r[i],isFinite(n)&&(r[i]+=s*n,o[i]+=s*n)}(t,s,o),zn(t.end,t.start,r)},bbox:jn,rectangle:function(t,e,n,i){var r=e.model.angle();if(0===r)return jn(t,e,n,i);var o=e.getNodeUnrotatedBBox(n);i.stroke&&o.inflate(In(n)/2);var s=o.center(),a=t.clone().rotate(s,r),h=a.setLength(1e6).intersect(o);return zn(h?a.start.chooseClosest(h).rotate(s,-r):t.end,t.start,i.offset)},boundary:function(t,e,n,i){var r,o,s=i.selector,a=t.end;if(r="string"==typeof s?e.findBySelector(s)[0]:Array.isArray(s)?rt(n,s):function(t){if(!t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!K.isSVGGraphicsElement(r)){if(r===n||!K.isSVGGraphicsElement(n))return a;r=n}var h,l=e.getNodeShape(r),u=e.getNodeMatrix(r),c=e.getRootTranslateMatrix(),d=e.getRootRotateMatrix(),f=c.multiply(d).multiply(u),p=f.inverse(),g=K.transformLine(t,p),v=g.start.clone(),m=e.getNodeData(r);if(!1===i.insideout&&(m[Un]||(m[Un]=l.bbox()),m[Un].containsPoint(v)))return a;if(l instanceof D){var y=i.precision||2;m[Gn]||(m[Gn]=l.getSegmentSubdivisions({precision:y})),h={precision:y,segmentSubdivisions:m[Gn]}}!0===i.extrapolate&&g.setLength(1e6),(o=g.intersect(l,h))?K.isArray(o)&&(o=v.chooseClosest(o)):!0===i.sticky&&(o=l instanceof X?l.pointNearestToPoint(v):l instanceof x?l.intersectionWithLineFromCenterToPoint(v):l.closestPoint(v,h));var w=o?K.transformPoint(o,f):a,b=i.offset||0;return i.stroke&&(b+=In(r)/2),zn(w,t.start,b)}};function Hn(t,e){return 0===e?"0%":Math.round(t/e*100)+"%"}function Yn(r){return function(t,e,n,i){return(e.isNodeConnection(n)?Xn:$n)(r,t,e,n,i)}}function $n(t,e,n,i,r){var o=n.model.angle(),s=n.getNodeUnrotatedBBox(i),a=n.model.getBBox().center();r.rotate(a,o);var h=r.x-s.x,l=r.y-s.y;return t&&(h=Hn(h,s.width),l=Hn(l,s.height)),e.anchor={name:"topLeft",args:{dx:h,dy:l,rotate:!0}},e}function Xn(t,e,n,i,r){var o=n.getConnection();if(!o)return e;var s=o.closestPointLength(r);if(t){var a=o.length();e.anchor={name:"connectionRatio",args:{ratio:s/a}}}else e.anchor={name:"connectionLength",args:{length:s}};return e}var Wn=ce,Zn=Yn(!1),Jn=Yn(!0),Kn={useDefaults:Wn,pinAbsolute:Zn,pinRelative:Jn},Qn={N:"S",S:"N",E:"W",W:"E"},ti={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function ei(t,e,n){var i=new z(t.x,e.y);return n.containsPoint(i)&&(i=new z(e.x,t.y)),i}function ni(t,e){return t["W"===e||"E"===e?"width":"height"]}function ii(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function ri(t){return new X(t.x,t.y,0,0)}function oi(t){var e=xt(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function si(t,e){return t.sourceBBox.clone().moveAndExpand(oi(e))}function ai(t,e){return t.targetBBox.clone().moveAndExpand(oi(e))}function hi(t,e,n){var i=new z(t.x,e.y),r=new z(e.x,t.y),o=ii(t,i),s=ii(t,r),a=Qn[n],h=o===n||o!==a&&(s===a||s!==n)?i:r;return{points:[h],direction:ii(h,e)}}function li(t,e,n){var i=ei(t,e,n);return{points:[i],direction:ii(i,e)}}function ui(e,t,n,i){var r,o={},s=[new z(e.x,t.y),new z(t.x,e.y)],a=s.filter(function(t){return!n.containsPoint(t)}),h=a.filter(function(t){return ii(t,e)!==i});if(0<h.length)r=(r=h.filter(function(t){return ii(e,t)===i}).pop())||h[0],o.points=[r],o.direction=ii(r,t);else{r=Wt(s,a)[0];var l=new z(t).move(r,-ni(n,i)/2),u=ei(l,e,n);o.points=[u,l],o.direction=ii(l,t)}return o}function ci(t,e,n,i){var r=li(e,t,i),o=r.points[0];if(n.containsPoint(o)){var s=(r=li(t,e,n)).points[0];if(i.containsPoint(s)){var a=new z(t).move(s,-ni(n,ii(t,s))/2),h=new z(e).move(o,-ni(i,ii(e,o))/2),l=new O(a,h).midpoint(),u=li(t,l,n),c=hi(l,e,u.direction);r.points=[u.points[0],c.points[0]],r.direction=c.direction}}return r}function di(t,e,n,i,r){var o,s,a,h={},l=n.union(i).inflate(1),u=l.center().distance(e)>l.center().distance(t),c=u?e:t,d=u?t:e;return s=ei(o=r?(o=z.fromPolar(l.width+l.height,ti[r],c),l.pointNearestToPoint(o).move(o,-1)):l.pointNearestToPoint(c).move(c,1),d,l),o.round().equals(s.round())?(s=z.fromPolar(l.width+l.height,A(o.theta(c))+Math.PI/2,d),a=ei(o,s=l.pointNearestToPoint(s).move(d,1).round(),l),h.points=u?[s,a,o]:[o,a,s]):h.points=u?[s,o]:[o,s],h.direction=ii(u?o:s,e),h}function fi(t,e,n){var i,r,o,s,a,h=si(n,e),l=ai(n,e),u=(r=e,(i=n).sourceAnchor?i.sourceAnchor:si(i,r).center()),c=(s=e,(o=n).targetAnchor?o.targetAnchor:ai(o,s).center());h=h.union(ri(u)),l=l.union(ri(c)),(t=Ut(t).map(z)).unshift(u),t.push(c);for(var d=[],f=0,p=t.length-1;f<p;f++){var g=null,v=t[f],m=t[f+1],y=!!ii(v,m);if(0===f)f+1===p?h.intersect(l.clone().inflate(1))?g=di(v,m,h,l):y||(g=ci(v,m,h,l)):h.containsPoint(m)?g=di(v,m,h,ri(m).moveAndExpand(oi(e))):y||(g=li(v,m,h));else if(f+1===p){var w=y&&ii(m,v)===a;l.containsPoint(v)||w?g=di(v,m,ri(v).moveAndExpand(oi(e)),l,a):y||(g=ui(v,m,l,a))}else y||(g=hi(v,m,a));a=g?(Array.prototype.push.apply(d,g.points),g.direction):ii(v,m),f+1<p&&d.push(m)}return d}var pi={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},fallbackRouter:function(t,e,n){if(!jt(fi))throw new Error("Manhattan requires the orthogonal router as default fallback.");return fi(t,Nt({},pi,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function gi(t){this.map={},this.options=t,this.mapGridSize=100}function vi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function mi(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function yi(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function wi(t,e){return t.sourceAnchor?t.sourceAnchor:mi(t,e).center()}function bi(t,e,n,i,r){var o,s,a,h,l,u,c,d,f,p,g=360/n,v=t.theta((o=t,s=e,a=i,h=r.step,l=s.x-o.x,u=s.y-o.y,c=l/a.x,d=u/a.y,f=c*h,p=d*h,new z(o.x+f,o.y+p))),m=b(v+g/2);return g*Math.floor(m/g)}function xi(t,e){var n=Math.abs(t-e);return 180<n?360-n:n}function Ai(t,e){if(!t)return e;var n=Math.abs(t),i=Math.round(n/e);return i?e+(n-i*e)/i:n}function Pi(t,e){return t.round(e)}function Si(t,e,n){return Pi((i=t.clone(),o=(r=e).source,s=v(i.x-o.x,r.x)+o.x,a=v(i.y-o.y,r.y)+o.y,new z(s,a)),n);var i,r,o,s,a}function ki(t){return t.clone().toString()}function Ei(t){return new z(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Ci(t,e,n,i,r,o,s){for(var a,h=[],l=Ei(r.difference(n)),u=ki(n),c=t[u];c;){var d=Ei((a=e[u]).difference(c));d.equals(l)||(h.unshift(a),l=d),c=t[u=ki(c)]}var f=e[u];return Ei(f.difference(i)).equals(l)||h.unshift(f),h}function Ti(t,e){for(var n=1/0,i=0,r=e.length;i<r;i++){var o=t.manhattanDistance(e[i]);o<n&&(n=o)}return n}function Li(d,f,t,p,e){var g=e.precision,v=e.directionMap,m=d.difference(f.center()),n=he(v)?Object.keys(v):[],y=Ut(t),i=n.reduce(function(t,e){if(y.includes(e)){for(var n,i=v[e],r=new z(d.x+i.x*(Math.abs(m.x)+f.width),d.y+i.y*(Math.abs(m.y)+f.height)),o=new O(d,r).intersect(f)||[],s=o.length,a=null,h=0;h<s;h++){var l=o[h],u=d.squaredDistance(l);(void 0===n||n<u)&&(n=u,a=l)}if(a){var c=Si(a,p,g);f.containsPoint(c)&&(c=Si(c.offset(i.x*p.x,i.y*p.y),p,g)),t.push(c)}}return t},[]);return f.containsPoint(d)||i.push(Si(d,p,g)),i}function Mi(t,e,n,i){var r,o,s,a,h=i.precision;r=Pi(t instanceof X?wi(this,i).clone():t.clone(),h),o=Pi(e instanceof X?(s=this,a=i,s.targetAnchor?s.targetAnchor:yi(s,a).center()).clone():e.clone(),h);var l,u,c,d,f,p,g,v,m,y,w=(l=i.step,c=o,{source:(u=r).clone(),x:Ai(c.x-u.x,l),y:Ai(c.y-u.y,l)});if(p=t instanceof X?Li(d=r,t,i.startDirections,w,i):[d=r],g=e instanceof X?Li(f=o,e,i.endDirections,w,i):[f=o],p=p.filter(n.isPointAccessible,n),g=g.filter(n.isPointAccessible,n),0<p.length&&0<g.length){for(var b=new vi,x={},A={},P={},S=0,k=p.length;S<k;S++){var E=p[S],C=ki(E);b.add(C,Ti(E,g)),x[C]=E,P[C]=0}var T,L,M=i.previousDirectionAngle,N=void 0===M,V=i.directions;v=w,y=(m=i).step,Ut(m.directions).forEach(function(t){t.gridOffsetX=t.offsetX/y*v.x,t.gridOffsetY=t.offsetY/y*v.y});for(var F=V.length,_=Ut(g).reduce(function(t,e){var n=ki(e);return t.push(n),t},[]),R=i.maximumLoops;!b.isEmpty()&&0<R;){var B,O=b.pop(),D=x[O],z=A[O],I=P[O],j=void 0===z,G=D.equals(d);B=j?N?G?null:bi(d,D,F,w,i):M:bi(z,D,F,w,i);var U=It(p,g);if(!(j&&U)&&0<=_.indexOf(O))return i.previousDirectionAngle=B,Ci(A,x,D,d,f);for(S=0;S<F;S++){var q=(T=V[S]).angle;if(L=xi(B,q),N&&G||!(L>i.maxAllowedDirectionChange)){var H=Si(D.clone().offset(T.gridOffsetX,T.gridOffsetY),w,h),Y=ki(H);if(!b.isClose(Y)&&n.isPointAccessible(H)){if(0<=_.indexOf(Y))if(!H.equals(f))if(xi(q,bi(H,f,F,w,i))>i.maxAllowedDirectionChange)continue;var $=I+T.cost+(G?0:i.penalties[L]);(!b.isOpen(Y)||$<P[Y])&&(x[Y]=H,A[Y]=D,P[Y]=$,b.add(Y,$+Ti(H,g)))}}}R--}}return i.fallbackRoute.call(this,d,f,i)}function Ni(t,e,n){!function(t){if(t.directions=Qt(t,"directions"),t.penalties=Qt(t,"penalties"),t.paddingBox=Qt(t,"paddingBox"),t.padding=Qt(t,"padding"),t.padding){var e=xt(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Ut(t.directions).forEach(function(t){var e=new z(0,0),n=new z(t.offsetX,t.offsetY);t.angle=b(e.theta(n))})}(e),n.options.perpendicular=!!e.perpendicular;for(var i,r,o=mi(n,e),s=yi(n,e),a=wi(n,e),h=new gi(e).build(n.paper.model,n.model),l=Ut(t).map(z),u=[],c=a,d=0,f=l.length;d<=f;d++){var p=null;if(r=i||o,!(i=l[d]))if(i=s,(!n.model.get("source").id||!n.model.get("target").id)&&jt(e.draggingRoute)){var g=r===o?a:r,v=i.origin();p=e.draggingRoute.call(n,g,v,e)}if(null===(p=p||Mi.call(n,r,i,h,e)))return e.fallbackRouter(t,e,n);var m=p[0];m&&m.equals(c)&&p.shift(),c=p[p.length-1]||c,Array.prototype.push.apply(u,p)}return u}gi.prototype.build=function(r,o){var c=this.options,d=Ut(c.excludeEnds).reduce(function(t,e){var n=o.get(e);if(n){var i=r.getCell(n.id);i&&t.push(i)}return t},[]),f=[],t=r.getCell(o.get("source").id);t&&(f=Jt(f,t.getAncestors().map(function(t){return t.id})));var e=r.getCell(o.get("target").id);e&&(f=Jt(f,e.getAncestors().map(function(t){return t.id})));var p=this.mapGridSize;return r.getElements().reduce(function(t,e){var n=Ut(c.excludeTypes).includes(e.get("type")),i=d.find(function(t){return t.id===e.id}),r=f.includes(e.id);if(!(n||i||r))for(var o=e.getBBox().moveAndExpand(c.paddingBox),s=o.origin().snapToGrid(p),a=o.corner().snapToGrid(p),h=s.x;h<=a.x;h+=p)for(var l=s.y;l<=a.y;l+=p){var u=h+"@"+l;t[u]=t[u]||[],t[u].push(o)}return t},this.map),this},gi.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Ut(this.map[t]).every(function(t){return!t.containsPoint(e)})},vi.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=Rt(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(n,0,t)},vi.prototype.remove=function(t){this.hash[t]=this.CLOSE},vi.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},vi.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},vi.prototype.isEmpty=function(){return 0===this.items.length},vi.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};var Vi=function(t,e,n){return Ni(t,Nt({},pi,e),n)},Fi={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var i=t.theta(e),r=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(90<i%180){var a=o;o=s,s=a}var h=i%90<45?o:s,l=new O(t,h),u=90*Math.ceil(i/90),c=z.fromPolar(l.squaredLength(),A(u+135),h),d=new O(e,c),f=l.intersection(d),p=f||e,g=f?p:t,v=360/n.directions.length,m=g.theta(e),y=b(m+v/2),w=v*Math.floor(y/v);return n.previousDirectionAngle=w,p&&r.push(p.round()),r.push(e),r}},_i={normal:function(t,e,n){return t},oneSide:function(t,e,n){var i,r,o,s=e.side||"bottom",a=xt(e.padding||40),h=n.sourceBBox,l=n.targetBBox,u=h.center(),c=l.center();switch(s){case"bottom":o=1,i="y",r="height";break;case"top":o=-1,i="y",r="height";break;case"left":o=-1,i="x",r="width";break;case"right":o=1,i="x",r="width";break;default:throw new Error("Router: invalid side")}return u[i]+=o*(h[r]/2+a[s]),c[i]+=o*(l[r]/2+a[s]),0<o*(u[i]-c[i])?c[i]=u[i]:u[i]=c[i],[u].concat(t,c)},orthogonal:fi,manhattan:Vi,metro:function(t,e,n){if(!jt(Vi))throw new Error("Metro requires the manhattan router.");return Vi(t,Nt({},Fi,e),n)}};function Ri(s){return function(t,e,n,i){if(n instanceof Element){var r,o=this.paper.findView(n);if(o)if(o.isNodeConnection(n))r=Bi(o,"fixedAt"in i?i.fixedAt:"50%");else r=o.getNodeBBox(n).center();else r=new z;return s.call(this,t,e,r,i)}return s.apply(this,arguments)}}function Bi(t,e){var n=parseFloat(e);return pt(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}var Oi=Ri(function(t,e,n,i){var r=t.getConnection(),o=t.getConnectionSubdivisions(),s=new O(n.clone().offset(0,1e6),n.clone().offset(0,-1e6)),a=new O(n.clone().offset(1e6,0),n.clone().offset(-1e6,0)),h=s.intersect(r,{segmentSubdivisions:o}),l=a.intersect(r,{segmentSubdivisions:o}),u=[];return h&&Array.prototype.push.apply(u,h),l&&Array.prototype.push.apply(u,l),0<u.length?n.chooseClosest(u):"fallbackAt"in i?Bi(t,i.fallbackAt):Di(t,e,n,i)}),Di=Ri(function(t,e,n,i){var r=t.getClosestPoint(n);return r||new z}),zi={resolveRef:Ri,connectionRatio:function(t,e,n,i){var r="ratio"in i?i.ratio:.5;return t.getPointAtRatio(r)},connectionLength:function(t,e,n,i){var r="length"in i?i.length:20;return t.getPointAtLength(r)},connectionPerpendicular:Oi,connectionClosest:Di};function Ii(c){return function(t,e,n,i){var r=!!i.rotate,o=r?t.getNodeUnrotatedBBox(e):t.getNodeBBox(e),s=o[c](),a=i.dx;if(a){var h=pt(a);a=parseFloat(a),isFinite(a)&&(h&&(a/=100,a*=o.width),s.x+=a)}var l=i.dy;if(l){var u=pt(l);l=parseFloat(l),isFinite(l)&&(u&&(l/=100,l*=o.height),s.y+=l)}return r?s.rotate(t.model.getBBox().center(),-t.model.angle()):s}}var ji={center:Ii("center"),top:Ii("topMiddle"),bottom:Ii("bottomMiddle"),left:Ii("leftMiddle"),right:Ii("rightMiddle"),topLeft:Ii("origin"),topRight:Ii("topRight"),bottomLeft:Ii("bottomLeft"),bottomRight:Ii("corner"),perpendicular:Ri(function(t,e,n,i){var r=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),a=o.origin(),h=o.corner(),l=i.padding;if(isFinite(l)||(l=0),a.y+l<=n.y&&n.y<=h.y-l){var u=n.y-s.y;s.x+=0===r||180===r?0:1*u/Math.tan(A(r)),s.y+=u}else if(a.x+l<=n.x&&n.x<=h.x-l){var c=n.x-s.x;s.y+=90===r||270===r?0:c*Math.tan(A(r)),s.x+=c}return s}),midSide:Ri(function(t,e,n,i){var r,o,s,a=!!i.rotate;a?(r=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),o=t.model.angle()):r=t.getNodeBBox(e);var h,l=i.padding;switch(isFinite(l)&&r.inflate(l),a&&n.rotate(s,o),r.sideNearestToPoint(n)){case"left":h=r.leftMiddle();break;case"right":h=r.rightMiddle();break;case"top":h=r.topMiddle();break;case"bottom":h=r.bottomMiddle()}return a?h.rotate(s,-o):h}),modelCenter:function(t,e,n,i,r){return t.model.getPointFromConnectedLink(this.model,r).offset(i.dx,i.dy)}},Gi=s.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&Kt(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,i=n.cellNamespace,r=new("link"===t.type?pn:rt(i,t.type,".")||He)(t,e);return e.dry||(r.graph=n.graph),r},comparator:function(t){return t.get("z")||0}}),Ui=s.Model.extend({_batches:{},initialize:function(t,e){var n=new Gi([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});s.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.attributes,n=e.source,i=e.target;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0),i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.attributes,n=e.source,i=e.target;n.id&&this._out[n.id]&&this._out[n.id][t.id]&&delete this._out[n.id][t.id],i.id&&this._in[i.id]&&this._in[i.id][t.id]&&delete this._in[i.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=s.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var i;return"object"==typeof t?(i=t,n=e):(i={})[t]=e,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,n),i=te(i,"cells")),s.Model.prototype.set.call(this,i,n)},clear:function(t){t=Nt({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);for(var n=e.sortBy(function(t){return t.isLink()?1:2});n.shift().remove(t),0<n.length;);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof s.Model?(n=t.attributes,t.graph||e&&e.dry||(t.graph=this)):n=t,!ue(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof s.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=$t(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(t){this.addCell(t,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var n=Ut(t).map(function(t){return this._prepareCell(t,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),_t(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return Object.keys(this._nodes).map(this.getCell,this)},getLinks:function(){return Object.keys(this._edges).map(this.getCell,this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,a){var r=(a=a||{}).indirect,o=a.inbound,s=a.outbound;void 0===o&&void 0===s&&(o=s=!0);var h=[],l={};function u(i,t){if(ie(i.getOutboundEdges(t.id),function(t,e){if(!l[e]){var n=i.getCell(e);h.push(n),l[e]=!0,r&&(o&&c(i,n),s&&u(i,n))}}.bind(i)),r&&t.isLink()){var e=t.getTargetCell();e&&e.isLink()&&(l[e.id]||(h.push(e),u(i,e)))}}function c(i,t){if(ie(i.getInboundEdges(t.id),function(t,e){if(!l[e]){var n=i.getCell(e);h.push(n),l[e]=!0,r&&(o&&c(i,n),s&&u(i,n))}}.bind(i)),r&&t.isLink()){var e=t.getSourceCell();e&&e.isLink()&&(l[e.id]||(h.push(e),c(i,e)))}}if(s&&u(this,t),o&&c(this,t),a.deep){var e=t.getEmbeddedCells({deep:!0}),d={};e.forEach(function(t){t.isElement()&&(d[t.id]=!0)}),e.forEach(function(t){t.isLink()||(s&&ie(this.getOutboundEdges(t.id),function(t,e){if(!l[e]){var n=this.getCell(e).attributes,i=n.source,r=n.target,o=i.id,s=r.id;if(!a.includeEnclosed&&o&&d[o]&&s&&d[s])return;h.push(this.getCell(e)),l[e]=!0}}.bind(this)),o&&ie(this.getInboundEdges(t.id),function(t,e){if(!l[e]){var n=this.getCell(e).attributes,i=n.source,r=n.target,o=i.id,s=r.id;if(!a.includeEnclosed&&o&&d[o]&&s&&d[s])return;h.push(this.getCell(e)),l[e]=!0}}.bind(this)))},this)}return h},getNeighbors:function(h,l){l||(l={});var u=l.inbound,c=l.outbound;void 0===u&&void 0===c&&(u=c=!0);var t=this.getConnectedLinks(h,l).reduce(function(t,e){var n=e.attributes,i=n.source,r=n.target,o=e.hasLoop(l);if(u&&Kt(i,"id")&&!t[i.id]){var s=this.getCell(i.id);s.isElement()&&(!o&&(!s||s===h||l.deep&&s.isEmbeddedIn(h))||(t[i.id]=s))}if(c&&Kt(r,"id")&&!t[r.id]){var a=this.getCell(r.id);a.isElement()&&(!o&&(!a||a===h||l.deep&&a.isEmbeddedIn(h))||(t[r.id]=a))}return t}.bind(this),{});if(h.isLink()){if(u){var e=h.getSourceCell();e&&e.isElement()&&!t[e.id]&&(t[e.id]=e)}if(c){var n=h.getTargetCell();n&&n.isElement()&&!t[n.id]&&(t[n.id]=n)}}return Ut(t)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e},this);t=t.sort(function(t,e){return t.length-e.length});var e=Ut(t.shift()).find(function(e){return t.every(function(t){return t.includes(e)})});return this.getCell(e)},getSuccessors:function(e,t){t=t||{};var n=[];return this.search(e,function(t){t!==e&&n.push(t)},Nt({},t,{outbound:!0})),n},cloneCells:de,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var s=[],a={},h=[],n=[];return Ut(t).forEach(function(t){(a[t.id]||(s.push(t),(a[t.id]=t).isLink()?n.push(t):h.push(t)),e.deep)&&t.getEmbeddedCells({deep:!0}).forEach(function(t){a[t.id]||(s.push(t),(a[t.id]=t).isLink()?n.push(t):h.push(t))})}),n.forEach(function(t){var e=t.attributes,n=e.source,i=e.target;if(n.id&&!a[n.id]){var r=this.getCell(n.id);s.push(r),a[r.id]=r,h.push(r)}if(i.id&&!a[i.id]){var o=this.getCell(i.id);s.push(this.getCell(i.id)),a[o.id]=o,h.push(o)}},this),h.forEach(function(t){this.getConnectedLinks(t,e).forEach(function(t){var e=t.attributes,n=e.source,i=e.target;!a[t.id]&&n.id&&a[n.id]&&i.id&&a[i.id]&&(s.push(t),a[t.id]=t)})},this),s},getPredecessors:function(e,t){t=t||{};var n=[];return this.search(e,function(t){t!==e&&n.push(t)},Nt({},t,{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n){void 0===n&&(n={});var i={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var s=o.shift();if(!i[s.id]&&!(i[s.id]=!0)!==e.call(this,s,r[s.id]))for(var a=this.getNeighbors(s,n),h=0,l=a.length;h<l;h++){var u=a[h];r[u.id]=r[s.id]+1,o.push(u)}}},dfs:function(t,e,n){void 0===n&&(n={});var i={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var s=o.pop();if(!i[s.id]&&!(i[s.id]=!0)!==e.call(this,s,r[s.id]))for(var a=this.getNeighbors(s,n),h=o.length,l=0,u=a.length;l<u;l++){var c=a[l];r[c.id]=r[s.id]+1,o.splice(h,0,c)}}},getSources:function(){var n=[];return ie(this._nodes,function(t,e){this._in[e]&&!zt(this._in[e])||n.push(this.getCell(e))}.bind(this)),n},getSinks:function(){var n=[];return ie(this._nodes,function(t,e){this._out[e]&&!zt(this._out[e])||n.push(this.getCell(e))}.bind(this)),n},isSource:function(t){return!this._in[t.id]||zt(this._in[t.id])},isSink:function(t){return!this._out[t.id]||zt(this._out[t.id])},isSuccessor:function(e,n){var i=!1;return this.search(e,function(t){if(t===n&&t!==e)return!(i=!0)},{outbound:!0}),i},isPredecessor:function(e,n){var i=!1;return this.search(e,function(t){if(t===n&&t!==e)return!(i=!0)},{inbound:!0}),i},isNeighbor:function(t,r,e){var o=(e=e||{}).inbound,s=e.outbound;void 0===o&&void 0===s&&(o=s=!0);var a=!1;return this.getConnectedLinks(t,e).forEach(function(t){var e=t.attributes,n=e.source,i=e.target;return o&&Kt(n,"id")&&n.id===r.id?!(a=!0):s&&Kt(i,"id")&&i.id===r.id?!(a=!0):void 0}),a},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(t,e){_t(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(e){return this.getElements().filter(function(t){return t.getBBox().containsPoint(e)})},findModelsInArea:function(e,t){e=k(e);var n=(t=Vt(t||{},{strict:!1})).strict?"containsRect":"intersect";return this.getElements().filter(function(t){return e[n](t.getBBox())})},findModelsUnderElement:function(e,t){t=Vt(t||{},{searchBy:"bbox"});var n=e.getBBox();return("bbox"===t.searchBy?this.findModelsInArea(n):this.findModelsFromPoint(n[t.searchBy]())).filter(function(t){return e.id!==t.id&&!t.isEmbeddedIn(e)})},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,r){return r||(r={}),Ut(t).reduce(function(t,e){var n=e.getBBox(r);if(!n)return t;var i=e.angle();return i&&(n=n.bbox(i)),t?t.union(n):n},null)},translate:function(t,e,n){var i=this.getCells().filter(function(t){return!t.isEmbedded()});return _t(i,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,i){var r=this.getCellsBBox(n);if(r){var o=Math.max(t/r.width,0),s=Math.max(e/r.height,0);_t(n,"scale",o,s,r.origin(),i)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Nt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Nt({},e,{batchName:t}))},hasActiveBatch:function(t){var e=this._batches;return(0===arguments.length?Ut(e):Array.isArray(t)?t:[t]).some(function(t){return 0<e[t]})}},{validations:{multiLinks:function(t,e){var n=e.attributes,r=n.source,o=n.target;if(r.id&&o.id){var i=e.getSourceCell();if(i)if(1<t.getConnectedLinks(i,{outbound:!0}).filter(function(t){var e=t.attributes,n=e.source,i=e.target;return n&&n.id===r.id&&(!n.port||n.port===r.port)&&i&&i.id===o.id&&(!i.port||i.port===o.port)}).length)return!1}return!0},linkPinning:function(t,e){var n=e.attributes,i=n.source,r=n.target;return i.id&&r.id}}});Te(Ui.prototype,["resetCells","addCells","removeCells"],Le.cells);var qi=We.extend({className:function(){var t=We.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){We.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.metrics={}},presentationAttributes:{markup:["RENDER"],attrs:["UPDATE"],router:["UPDATE"],connector:["UPDATE"],smooth:["UPDATE"],manhattan:["UPDATE"],toolMarkup:["TOOLS"],labels:["LABELS"],labelMarkup:["LABELS"],vertices:["VERTICES","UPDATE"],vertexMarkup:["VERTICES"],source:["SOURCE","UPDATE"],target:["TARGET","UPDATE"]},initFlag:["RENDER","SOURCE","TARGET"],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,"SOURCE")){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,"SOURCE")}if(this.hasFlag(t,"TARGET")){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,"TARGET")}var n=this.paper,i=this.sourceView,r=this.targetView;if(n&&(i&&!n.isViewMounted(i)||r&&!n.isViewMounted(r)))return t;if(this.hasFlag(t,"RENDER"))return this.render(),t=this.removeFlag(t,["RENDER","UPDATE","VERTICES","TOOLS","LABELS"]);this.hasFlag(t,"VERTICES")&&(this.renderVertexMarkers(),t=this.removeFlag(t,"VERTICES"));var o=this.model,s=o.attributes,a=this.hasFlag(t,"LABELS"),h=this.hasFlag(t,"TOOLS");return a&&(this.onLabelsChange(o,s.labels,e),t=this.removeFlag(t,"LABELS")),h&&(this.renderTools(),t=this.removeFlag(t,"TOOLS")),this.hasFlag(t,"UPDATE")&&(this.update(o,null,e),t=this.removeFlag(t,"UPDATE"),h=a=!1),a&&this.updateLabelPositions(),h&&this.updateToolsPosition(),t},requestConnectionUpdate:function(t){var e=this.paper,n=this.UPDATE_PRIORITY;e&&e.requestViewUpdate(this,this.getFlag("UPDATE"),n,t)},isLabelsRenderRequired:function(t){void 0===t&&(t={});var e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],i=n.length;if(1<i)if(!!e[n[1]]){if(2===i)return"markup"in Object(t.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=K(t);Array.isArray(e)||(e=[e]);for(var n=this._V,i=0,r=e.length;i<r;i++){var o=e[i],s=o.attr("class");s&&(s=et(s),n[C.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=K(t),n=document.createDocumentFragment();if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var o=e[i].node;n.appendChild(o)}else n.appendChild(e.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,n=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var i=n.childNodes;return(e=1<i.length||"G"!==i[0].nodeName.toUpperCase()?K("g").append(n):K(i[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},i=this._labelSelectors={},r=this.model,o=r.attributes.labels||[],s=o.length;if(0===s)return e&&e.remove(),this;e?e.empty():e=t.labels=K("g").addClass("labels");for(var a=e.node,h=0;h<s;h++){var l,u,c=o[h],d=this._normalizeLabelMarkup(this._getLabelMarkup(c.markup));if(d)l=d.node,u=d.selectors;else{var f=r._builtins.defaultLabel,p=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup)),g=r._getDefaultLabel(),v=this._normalizeLabelMarkup(this._getLabelMarkup(g.markup))||p;l=v.node,u=v.selectors}l.setAttribute("label-idx",h),a.appendChild(l),n[h]=l;var m=this.selector;if(u[m])throw new Error("dia.LinkView: ambiguous label root selector.");u[m]=l,i[h]=u}return a.parentNode||this.el.appendChild(a),this.updateLabels(),this},_mergeLabelAttrs:function(t,e,n,i){return null===e?null:void 0!==e?t?se({},n,e):se({},i,n,e):null===n?null:void 0!==n?t?n:se({},i,n):t?void 0:i},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),i=t._builtins.defaultLabel.attrs,r=t._getDefaultLabel(),o=r.markup,s=r.attrs,a=0,h=e.length;a<h;a++){var l=this._labelCache[a];l.setAttribute("cursor",n?"move":"default");var u=this._labelSelectors[a],c=e[a],d=c.markup,f=c.attrs,p=this._mergeLabelAttrs(d||o,f,s,i);this.updateDOMSubtreeAttributes(l,p,{rootBBox:new X(c.size),selectors:u})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=C(this._V.linkTools.node).empty(),n=Et(this.model.get("toolMarkup")||this.model.toolMarkup),i=K(n());(e.append(i.node),this._toolCache=i,this.options.doubleLinkTools)&&(t=this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=Et(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),K(n())):i.clone(),e.append(t.node),this._tool2Cache=t);return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var n=C(this._V.markerVertices.node).empty(),i=Et(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,e){n.append(K(i(Nt({idx:e},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=C(this._V.markerArrowheads.node);t.empty();var e=Et(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=K(e({end:"source"})),this._V.targetArrowhead=K(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,n){return n||(n={}),this.cleanNodesCache(),this.updateConnection(n),this.updateDOMSubtreeAttributes(this.el,this.model.attr(),{selectors:this.selectors}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(n),this.options.perpendicular=null,this},removeRedundantLinearVertices:function(t){var e=this.model,n=e.vertices(),i=[this.sourceAnchor].concat(n,[this.targetAnchor]),r=i.length,o=new L(i);o.simplify({threshold:.001});var s=o.points.map(function(t){return t.toJSON()}),a=s.length;return r===a?0:(e.vertices(s.slice(1,a-1),t),r-a)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new z(this.sourceAnchor);case"target":return new z(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new z(this.sourcePoint);case"target":return new z(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},updateConnection:function(t){t=t||{};var e,n,i=this.model;if(t.translateBy&&i.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,o=t.ty||0;e=new L(this.route).translate(r,o).points,this._translateConnectionPoints(r,o),(n=this.path).translate(r,o)}else{var s=i.vertices(),a=this.findAnchors(s),h=this.sourceAnchor=a.source,l=this.targetAnchor=a.target;e=this.findRoute(s,t);var u=this.findConnectionPoints(e,h,l),c=this.sourcePoint=u.source,d=this.targetPoint=u.target,f=this.findMarkerPoints(e,c,d);n=this.findPath(e,f.source||c,f.target||d)}this.route=e,this.path=n,this.metrics={}},findMarkerPoints:function(t,e,n){var i,r,o=t[0],s=t[t.length-1],a=this._markerCache;return this._V.markerSource&&(a.sourceBBox=a.sourceBBox||this._V.markerSource.getBBox(),i=z(e).move(o||n,a.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(a.targetBBox=a.targetBBox||this._V.markerTarget.getBBox(),r=z(n).move(s||e,a.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),a.sourcePoint=i||e.clone(),a.targetPoint=r||n.clone(),{source:i,target:r}},findAnchorsOrdered:function(t,e,n,i){var r,o,s,a,h=this.model,l=h.get(t),u=h.get(n),c=this.getEndView(t),d=this.getEndView(n),f=this.getEndMagnet(t),p=this.getEndMagnet(n);r=c?(s=e?new z(e):d?p:new z(u),this.getAnchor(l.anchor,c,f,s,t)):new z(l),o=d?(a=new z(i||r),this.getAnchor(u.anchor,d,p,a,n)):new z(u);var g={};return g[t]=r,g[n]=o,g},findAnchors:function(t){var e=this.model,n=t[0],i=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",i,"source",n):this.findAnchorsOrdered("source",n,"target",i)},findConnectionPoints:function(t,e,n){var i,r,o,s,a=t[0],h=t[t.length-1],l=this.model,u=l.get("source"),c=l.get("target"),d=this.sourceView,f=this.targetView,p=this.paper.options;if(d&&!d.isNodeConnection(this.sourceMagnet)){i=this.sourceMagnet||d.el;var g=u.connectionPoint||p.defaultConnectionPoint,v=new O(a||n,e);o=this.getConnectionPoint(g,d,i,v,"source")}else o=e;if(f&&!f.isNodeConnection(this.targetMagnet)){r=this.targetMagnet||f.el;var m=c.connectionPoint||p.defaultConnectionPoint,y=new O(h||e,n);s=this.getConnectionPoint(m,f,r,y,"target")}else s=n;return{source:o,target:s}},getAnchor:function(t,e,n,i,r){var o,s=e.isNodeConnection(n),a=this.paper.options;if(t||(t=s?a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)o=t;else{var h=t.name;if("function"!=typeof(o=a[s?"linkAnchorNamespace":"anchorNamespace"][h]))throw new Error("Unknown anchor: "+h)}var l=o.call(this,e,n,i,t.args||{},r,this);return l?l.round(this.decimalsRounding):new z},getConnectionPoint:function(t,e,n,i,r){var o,s,a=i.end,h=this.paper.options;if("function"==typeof h.linkConnectionPoint){var l=n===e.el?void 0:n;if(o=h.linkConnectionPoint(this,e,l,i.start,r))return o}if(!t)return a;if("function"==typeof t)s=t;else{var u=t.name;if("function"!=typeof(s=h.connectionPointNamespace[u]))throw new Error("Unknown connection point: "+u)}return(o=s.call(this,i,e,n,t.args||{},r,this))?o.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model,e=t.get("labels")||[];if(!e.length)return this;for(var n=t._builtins.defaultLabel.position,i=t._getDefaultLabel(),r=this._normalizeLabelPosition(i.position),o=se({},n,r),s=0,a=e.length;s<a;s++){var h=this._labelCache[s];if(h){var l=e[s],u=this._normalizeLabelPosition(l.position),c=se({},o,u),d=this._getLabelTransformationMatrix(c);h.setAttribute("transform",K.matrixToTransformString(d))}}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var i=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+i.x+", "+i.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var r=this.options.doubleLinkToolsOffset||e;i=this.getPointAtLength(n-r),this._tool2Cache.attr("transform","translate("+i.x+", "+i.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===C.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){var e=this.model,n=this.paper,i=t+"View",r=e.get(t),o=r&&r.id;if(!o)return this[i]=null,this.updateEndMagnet(t),!0;var s=n.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");var a=s.findView(n);return!!a&&(this[i]=a,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){var e=t+"Magnet",n=this.getEndView(t);if(n){var i=n.getMagnetFromLinkEnd(this.model.get(t));i===n.el&&(i=null),this[e]=i}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=Ut(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:se({},e,t)},addLabel:function(t,e,n,i){var r,o,s,a=0;s="number"!=typeof t?(r=t.x,o=t.y,"number"==typeof e?(a=e,n):e):(r=t,o=e,"number"==typeof n?(a=n,i):n);var h=this._getDefaultLabelPositionArgs(),l=s,u=this._mergeLabelPositionArgs(l,h),c={position:this.getLabelPosition(r,o,a,u)};return this.model.insertLabel(-1,c,s),-1},addVertex:function(t,e,n){var i="number"!=typeof t,r=i?t.x:t,o=i?t.y:e,s=i?e:n,a={x:r,y:o},h=this.getVertexIndex(r,o);return this.model.insertVertex(h,a,s),h},sendToken:function(t,e,n){var i,r,o;o=he(e)?(i=e.duration,r="reverse"===e.direction,e.connection):(i=e,r=!1,null);var s={dur:(i=i||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};r&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,h,l,u=K(t);if("string"==typeof o)a=this.findBySelector(o,this.el,this.selectors)[0];else{var c=this._V;a=c.connection?c.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout((h=u,l=n,function(){h.remove(),"function"==typeof l&&l()}),i)},findRoute:function(t){t||(t=[]);var e=_i,n=this.model.router(),i=this.paper.options.defaultRouter;if(!n){if(!i)return t.map(z);n=i}var r=jt(n)?n:e[n.name];if(!jt(r))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var o=n.args||{},s=r.call(this,t,o,this);return s||t.map(z)},findPath:function(t,e,n){var i=On,r=this.model.connector(),o=this.paper.options.defaultConnector;r||(r=o||{});var s=jt(r)?r:i[r.name];if(!jt(s))throw new Error('dia.LinkView: unknown connector: "'+r.name+'".');var a=Ot(r.args||{});a.raw=!0;var h=s.call(this,e,n,t,a,this);return"string"==typeof h&&(h=new D(K.normalizePathData(h))),h},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(pt(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,i){var r,o={},s=0;(r="number"==typeof n?(s=n,i):n)&&(o.args=r);var a,h,l=!(r&&r.absoluteDistance),u=r&&r.absoluteDistance&&r.reverseDistance,c=r&&r.absoluteOffset,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},p=new z(t,e),g=d.closestPointT(p,f),v=d.lengthAtT(g,f);if(l&&(v=v/this.getConnectionLength()||0),u&&(v=-1*(this.getConnectionLength()-v)||1),o.distance=v,c||(a=d.tangentAtT(g)),a)h=a.pointOffset(p);else{var m=d.pointAtT(g),y=p.difference(m);h={x:y.x,y:y.y}}return o.offset=h,o.angle=s,o},_getLabelTransformationMatrix:function(t){var e,n=0,i={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");i=t.args||{},e=t.distance,n=t.angle||0}var r=0<e&&e<=1,o=0,s={x:0,y:0};if(t.offset){var a=t.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var h,l=0!==s.x||0!==s.y||0===o,u=i.keepGradient,c=i.ensureLegibility,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},p=r?e*this.getConnectionLength():e,g=d.tangentAtLength(p,f),v=n;if(g){if(l)(h=g.start).offset(s);else{var m=g.clone();m.rotate(g.start,-90),m.setLength(o),h=m.end}u&&(v=g.angle()+n,c&&(v=b((v+90)%180-90)))}else h=d.start,l&&h.offset(s);return K.createSVGMatrix().translate(h.x,h.y).rotate(v)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new z(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model.vertices(),i=this.getClosestPointLength(new z(t,e)),r=0,o=n.length;r<o;r++){var s=n[r];if(i<this.getClosestPointLength(s))break}return r},notifyPointerdown:function(t,e,n){We.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove:function(t,e,n){We.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup:function(t,e,n){this.notify("link:pointerup",t,e,n),We.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){We.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){We.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){We.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){switch(this.notifyPointerdown(t,e,n),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,n);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,n);case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var i=this._dragData;switch(i&&this.eventData(t,i),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n)}i&&Nt(i,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var i=this._dragData;switch(i&&(this.eventData(t,i),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){We.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){We.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){We.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){We.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,i){We.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,i)},onevent:function(t,e,n,i){if(K(t.target).findParentByClass("link-tool",this.el)){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,n,i)}this.notifyPointerdown(t,n,i),this.paper.delegateDragEvents(this,t.data)}else We.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var i=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){var i=t.currentTarget,r=parseInt(i.getAttribute("label-idx"),10),o=this._getLabelPositionAngle(r),s=this._getLabelPositionArgs(r),a=this._getDefaultLabelPositionArgs(),h=this._mergeLabelPositionArgs(s,a);this.eventData(t,{action:"label-move",labelIdx:r,positionAngle:o,positionArgs:h,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var i=t.target,r=parseInt(i.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var i=t.target,r=parseInt(i.getAttribute("idx"),10);this.model.removeVertex(r)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var i=t.target.getAttribute("end"),r=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,r)}},dragStart:function(t,e,n){this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var i=this.eventData(t),r={position:this.getLabelPosition(e,n,i.positionAngle,i.positionArgs)};this.model.label(i.labelIdx,r)},dragVertex:function(t,e,n){var i=this.eventData(t);this.model.vertex(i.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?this._snapArrowhead(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var i=this.eventData(t);this.model.translate(e-i.dx,n-i.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var i=this.eventData(t),r=this.paper;r.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,e,n),r.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,t)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0})}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,i=t.initialEnd,r=this.model.prop(n);if(r&&!pn.endsEqual(i,r)){var o=this.paper;i.id&&this.notify("link:disconnect",e,o.findViewByModel(i.id),t.initialMagnet,n),r.id&&this.notify("link:connect",e,o.findViewByModel(r.id),t.magnetUnderPointer,n)}},_snapArrowhead:function(t,e,n){var r=this.eventData(t),i=this.paper.options.snapLinks.radius||50,o=this.paper.findViewsInArea({x:e-i,y:n-i,width:2*i,height:2*i}),s=r.closestView||null,a=r.closestMagnet||null;r.closestView=r.closestMagnet=null;var h,l=Number.MAX_VALUE,u=new z(e,n),c=this.paper;o.forEach(function(i){var e=[];"false"!==i.el.getAttribute("magnet")&&e.push({bbox:i.model.getBBox(),magnet:i.el}),i.$("[magnet]").toArray().forEach(function(t){e.push({bbox:i.getNodeBBox(t),magnet:t})}),e.forEach(function(t){var e=t.magnet,n=t.bbox.center().squaredDistance(u);n<l&&(a===i.el||c.options.validateConnection.apply(c,r.validateConnectionArgs(i,i.el===e?null:e)))&&(l=n,r.closestView=i,r.closestMagnet=e)})},this);var d=r.closestView,f=r.closestMagnet,p=r.arrowhead,g=a!==f;if(s&&g&&s.unhighlight(a,{connecting:!0,snapping:!0}),d){if(!g)return;d.highlight(f,{connecting:!0,snapping:!0}),h=d.getLinkEnd(f,e,n,this.model,p)}else h={x:e,y:n};this.model.set(p,h||{x:e,y:n},{ui:!0}),s&&this.notify("link:snap:disconnect",t,s,a,p),d&&this.notify("link:snap:connect",t,d,f,p)},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(n,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,i){i.eventTarget!==t&&(i.magnetUnderPointer&&i.viewUnderPointer.unhighlight(i.magnetUnderPointer,{connecting:!0}),i.viewUnderPointer=this.paper.findView(t),i.viewUnderPointer?(i.magnetUnderPointer=i.viewUnderPointer.findMagnet(t),i.magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,i.validateConnectionArgs(i.viewUnderPointer,i.magnetUnderPointer))?i.magnetUnderPointer&&i.viewUnderPointer.highlight(i.magnetUnderPointer,{connecting:!0}):i.magnetUnderPointer=null):i.magnetUnderPointer=null),i.eventTarget=t,this.model.set(i.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t,e,n){var i=t.viewUnderPointer,r=t.magnetUnderPointer;if(r&&i){i.unhighlight(r,{connecting:!0});var o=t.arrowhead,s=i.getLinkEnd(r,e,n,this.model,o);this.model.set(o,s,{ui:!0})}},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,n=[];n[4]=t,n[5]=this;var i=0,r=0;e="source"===t?(i=2,"target"):(r=2,"source");var o=this.model.get(e);if(o.id){var s=n[i]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),n[i+1]=a}return function(t,e){return n[r]=t,n[r+1]=t.el===e?void 0:e,n}},_markAvailableMagnets:function(t){function e(t,e){var n=t.paper;return n.options.validateConnection.apply(n,this.validateConnectionArgs(t,e))}var n=this.paper,i=n.model.getCells();t.marked={};for(var r=0,o=i.length;r<o;r++){var s=i[r].findView(n);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var h=a.filter(e.bind(t,s));if(0<h.length){for(var l=0,u=h.length;l<u;l++)s.highlight(h[l],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=h}}}},_unmarkAvailableMagnets:function(t){for(var e,n,i=Object.keys(t.marked),r=0,o=i.length;r<o;r++){e=i[r],n=t.marked[e];var s=this.paper.findViewByModel(e);if(s){for(var a=0,h=n.length;a<h;a++)s.unhighlight(n[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Ot(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=n),n}});Object.defineProperty(qi.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new X(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new X(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(qi.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new X(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new X(this.targetAnchor):t.getNodeBBox(n||t.el)}});var Hi={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Yi=9007199254740991,$i={default:{name:"stroke",options:{padding:3}},magnetAvailability:{name:"addClass",options:{className:"available-magnet"}},elementAvailability:{name:"addClass",options:{className:"available-cell"}}},Xi=$e.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Ze,linkView:qi,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:$i,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new pn,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,i,r,o){return("target"===r?n:t)instanceof Ze},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Hi.EXACT,frozen:!1,onViewUpdate:function(t,e,n,i,r){e&t.FLAG_INSERT||i.mounting||r.requestConnectedLinksUpdate(t,n,i)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,highlighterNamespace:Dn,anchorNamespace:ji,linkAnchorNamespace:zi,connectionPointNamespace:qn},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_highlights:null,_zPivots:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){var t=this.options,e=this.el;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&Kt(joint,"shapes")?joint.shapes:null);var n=this.model=t.model||new Ui;this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this.setDimensions(),this.startListening(),this._views={},this._zPivots={},this.$document=C(e.ownerDocument),this._highlights={},this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var i=n.position;this.isAsync()||!le(i)?this.renderView(t,n):(n.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(t,n),0===i&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){var i=this.findViewByModel(t);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Hi.APPROX){var n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.removeZPivots(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.updateViews(t)}var r=this.SORT_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.sortViews()}},cloneOptions:function(){var t=this.options,e=t.defaultConnector,n=t.defaultRouter,i=t.defaultConnectionPoint,r=t.defaultAnchor,o=t.defaultLinkAnchor,s=t.origin,a=t.highlighting,h=t.cellViewNamespace,l=t.interactive;!h&&"undefined"!=typeof joint&&Kt(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),jt(e)||(t.defaultConnector=Dt(e)),jt(n)||(t.defaultRouter=Dt(n)),jt(i)||(t.defaultConnectionPoint=Dt(i)),jt(r)||(t.defaultAnchor=Dt(r)),jt(o)||(t.defaultLinkAnchor=Dt(o)),Gt(l)&&(t.interactive=Nt({},l)),t.origin=Nt({},s),t.highlighting=Ft({},a,$i)},children:function(){var t=K.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:tt("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:tt("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:tt("layers"),selector:"layers",children:[{tagName:"g",className:tt("cells-layer viewport"),selector:"cells"},{tagName:"g",className:tt("tools-layer"),selector:"tools"}]}]}]},render:function(){this.renderChildren();var t=this.childNodes,e=this.options,n=t.svg,i=t.cells,r=t.defs,o=t.tools,s=t.layers,a=t.background,h=t.grid;return this.svg=n,this.defs=r,this.tools=o,this.cells=i,this.layers=s,this.$background=C(a),this.$grid=C(h),K.ensureId(n),this.viewport=i,e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),K.createSVGMatrix(t)}t=K.createSVGMatrix(t);var i=K.matrixToTransformString(t);return e.setAttribute("transform",i),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return K.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof We)for(var i=t.model,r=this.model.getConnectedLinks(i),o=0,s=r.length;o<s;o++){var a=r[o],h=this.findViewByModel(a);if(h){var l=["UPDATE"];a.getTargetCell()===i&&l.push("TARGET"),a.getSourceCell()===i&&l.push("SOURCE");var u=Math.max(e+1,h.UPDATE_PRIORITY);this.scheduleViewUpdate(h,h.getFlag(l),u,n)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof We))return!1;var n=t.model;if(n.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var i=0,r=this.findViewByModel(n.getSourceCell());r&&!this.isViewMounted(r)&&(i=this.dumpView(r),t.updateEndMagnet("source"));var o=0,s=this.findViewByModel(n.getTargetCell());if(s&&!this.isViewMounted(s)&&(o=this.dumpView(s),t.updateEndMagnet("target")),0===i&&0===o)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,n,i){i||(i={}),this.scheduleViewUpdate(t,e,n,i);var r=this.isAsync();if(!(this.isFrozen()||r&&!1!==i.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(i);r&&this.notifyAfterRender(o,i)}},scheduleViewUpdate:function(t,e,n,i){var r=this._updates,o=this.options,s=t.FLAG_REMOVE,a=t.FLAG_INSERT,h=t.UPDATE_PRIORITY,l=t.cid,u=r.priorities[n];if(u||(u=r.priorities[n]={}),h<n)for(var c=n-1;h<=c;c--){var d=r.priorities[c];d&&l in d&&(u[l]|=d[l],delete d[l])}var f=u[l]||0;if((f&e)!==e){f||r.count++,e&s&&f&a?u[l]^=a:e&a&&f&s&&(u[l]^=s),u[l]|=e;var p=o.onViewUpdate;"function"==typeof p&&p.call(this,t,e,n,i||{},this)}},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,i=e.priorities[t.UPDATE_PRIORITY],r=this.registerMountedView(t)|i[n];return delete i[n],r},dumpView:function(t,e){var n=this.dumpViewUpdate(t);return n?this.updateView(t,n,e):0},updateView:function(t,e,n){if(!t)return 0;var i=t.FLAG_REMOVE,r=t.FLAG_INSERT,o=t.model;if(t instanceof We){if(e&i)return this.removeView(o),0;e&r&&(this.insertView(t),e^=r)}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var i=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],i},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var i=n.unmounted[e]||0;return delete n.unmounted[e],i},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Vt({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){var e;this.notifyBeforeRender(t);for(var n=0,i=0,r=Yi;i++,n+=(e=this.updateViewsBatch(t)).updated,r=Math.min(e.priority,r),!e.empty;);var o={updated:n,batches:i,priority:r};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){for(var t=this._updates.priorities,e=Object.keys(t),n=e.length;0<n&&n--;)for(var i in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:Yi});var n=this._updates,i=n.id;if(i){ft(i),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var r=this.updateViewsBatch(t),o=Vt({},t,{mountBatchSize:1e3-r.mounted,unmountBatchSize:1e3-r.unmounted}),s=this.checkViewport(o),a=s.unmounted,h=s.mounted,l=e.processed,u=n.count;0<r.updated&&(l+=r.updated+r.unmounted,r.processed=l,e.priority=Math.min(r.priority,e.priority),r.empty&&0===h?(r.unmounted+=a,r.mounted+=h,r.priority=e.priority,this.notifyAfterRender(r,t),e.processed=0,n.count=0):e.processed=l);var c=t.progress;if(u&&"function"==typeof c&&c.call(this,r.empty,l,u,r,this),n.id!==i)return}n.id=dt(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t){void 0===t&&(t={});var e=t.beforeRender;"function"!=typeof e&&"function"!=typeof(e=this.options.beforeRender)||e.call(this,t,this)},notifyAfterRender:function(t,e){void 0===e&&(e={});var n=e.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,n=this._updates,i=0,r=0,o=0,s=0,a=Yi,h=!0,l=this.options,u=n.priorities,c="viewport"in t?t.viewport:l.viewport;"function"!=typeof c&&(c=null);var d=l.onViewPostponed;"function"!=typeof d&&(d=null);var f=Object.keys(u);t:for(var p=0,g=f.length;p<g;p++){var v=f[p],m=u[v];for(var y in m){if(e<=i){h=!1;break t}var w=Ye[y];if(w){var b=m[y];if(0==(b&w.FLAG_REMOVE)){var x=y in n.unmounted;if(w.DETACHABLE&&c&&!c.call(this,w,!x,this)){x||(this.registerUnmountedView(w),w.unmount()),n.unmounted[y]|=b,delete m[y],o++;continue}x&&(b|=w.FLAG_INSERT,s++),b|=this.registerMountedView(w)}var A=this.updateView(w,b,t);0<A&&(m[y]=A,!d||!d.call(this,w,A,this)||m[y])?(r++,h=!1):(v<a&&(a=v),i++,delete m[y])}else delete m[y]}}return{priority:a,updated:i,postponed:r,unmounted:o,mounted:s,empty:h}},getUnmountedViews:function(){for(var t=this._updates,e=Object.keys(t.unmounted),n=e.length,i=new Array(n),r=0;r<n;r++)i[r]=Ye[e[r]];return i},getMountedViews:function(){for(var t=this._updates,e=Object.keys(t.mounted),n=e.length,i=new Array(n),r=0;r<n;r++)i[r]=Ye[e[r]];return i},checkUnmountedViews:function(t,e){e||(e={});var n=0;"function"!=typeof t&&(t=null);for(var i=("mountBatchSize"in e?e.mountBatchSize:1/0),r=this._updates,o=r.unmountedCids,s=r.unmounted,a=0,h=Math.min(o.length,i);a<h;a++){var l=o[a];if(l in s){var u=Ye[l];if(u)if(u.DETACHABLE&&t&&!t.call(this,u,!1,this))o.push(l);else{n++;var c=this.registerMountedView(u);c&&this.scheduleViewUpdate(u,c,u.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),n},checkMountedViews:function(t,e){e||(e={});var n=0;if("function"!=typeof t)return n;for(var i=("unmountBatchSize"in e?e.unmountBatchSize:1/0),r=this._updates,o=r.mountedCids,s=r.mounted,a=0,h=Math.min(o.length,i);a<h;a++){var l=o[a];if(l in s){var u=Ye[l];if(u)if(u.DETACHABLE&&!t.call(this,u,!0,this))n++,this.registerUnmountedView(u)&&u.unmount();else o.push(l)}}return o.splice(0,a),n},checkViewport:function(t){var e=Vt({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,i=this.checkMountedViews(n,e);if(0<i){var r=this._updates.unmountedCids;e.mountBatchSize=Math.min(r.length-i,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(n,e),unmounted:i}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,i=this.options.frozen,r=e.freezeKey;if(n&&n!==r){if(i&&r)return;e.freezeKey=n,e.keyFrozen=i}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&ft(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,i=e.freezeKey;n&&i&&n!==i||(e.freezeKey=null,n&&n===i&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Hi.EXACT},onRemove:function(){this.freeze(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return le(e)||(e=this.el.clientWidth),le(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){var n=this.options,i=void 0===t?n.width:t,r=void 0===e?n.height:e;this.options.width=i,this.options.height=r,le(i)&&(i=Math.round(i)),le(r)&&(r=Math.round(r)),this.$el.css({width:null===i?"":i,height:null===r?"":r});var o=this.getComputedSize();this.trigger("resize",o.width,o.height)},setOrigin:function(t,e){return this.translate(t||0,e||0,{absolute:!0})},fitToContent:function(t,e,n,i){n=he(t)?(t=(i=t).gridWidth||1,e=i.gridHeight||1,i.padding||0):(i||(i={}),t=t||1,e=e||1,n||0),n=xt(n);var r="contentArea"in i?new X(i.contentArea):this.getContentArea(i),o=this.scale(),s=this.translate(),a=o.sx,h=o.sy;r.x*=a,r.y*=h,r.width*=a,r.height*=h;var l=Math.max(Math.ceil((r.width+r.x)/t),1)*t,u=Math.max(Math.ceil((r.height+r.y)/e),1)*e,c=0,d=0;("negative"==i.allowNewOrigin&&r.x<0||"positive"==i.allowNewOrigin&&0<=r.x||"any"==i.allowNewOrigin)&&(c=Math.ceil(-r.x/t)*t,l+=c+=n.left),("negative"==i.allowNewOrigin&&r.y<0||"positive"==i.allowNewOrigin&&0<=r.y||"any"==i.allowNewOrigin)&&(d=Math.ceil(-r.y/e)*e,u+=d+=n.top),l+=n.right,u+=n.bottom,l=Math.max(l,i.minWidth||0),u=Math.max(u,i.minHeight||0),l=Math.min(l,i.maxWidth||Number.MAX_VALUE),u=Math.min(u,i.maxHeight||Number.MAX_VALUE);var f=this.getComputedSize(),p=l!=f.width||u!=f.height;return(c!=s.tx||d!=s.ty)&&this.translate(c,d),p&&this.setDimensions(l,u),new X(-c/a,-d/h,l/a,u/h)},scaleContentToFit:function(t){var e,n;if(t||(t={}),"contentArea"in t){var i=t.contentArea;e=this.localToPaperRect(i),n=new z(i)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(e.width&&e.height){Vt(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var r,o=xt(t.padding),s=t.minScaleX||t.minScale,a=t.maxScaleX||t.maxScale,h=t.minScaleY||t.minScale,l=t.maxScaleY||t.maxScale;if(t.fittingBBox)r=t.fittingBBox;else{var u=this.translate(),c=this.getComputedSize();r={x:u.tx,y:u.ty,width:c.width,height:c.height}}r=new X(r).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var d=this.scale(),f=r.width/e.width*d.sx,p=r.height/e.height*d.sy;if(t.preserveAspectRatio&&(f=p=Math.min(f,p)),t.scaleGrid){var g=t.scaleGrid;f=g*Math.floor(f/g),p=g*Math.floor(p/g)}f=Math.min(a,Math.max(s,f)),p=Math.min(l,Math.max(h,p));var v=this.options.origin,m=r.x-n.x*f-v.x,y=r.y-n.y*p-v.y;this.scale(f,p),this.translate(m,y)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new X:K(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(){return jt(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):!0===this.options.restrictTranslate?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var e,n,i=this.options.cellViewNamespace,r=t.get("type")+"View",o=rt(i,r,".");return n=t.isLink()?(e=this.options.linkView,qi):(e=this.options.elementView,Ze),new(e.prototype instanceof s.View?o||e:e.call(this,t)||o||n)({model:t,interactive:this.options.interactive})},removeView:function(t){var e=t.id,n=this._views,i=this._updates,r=n[e];if(r){var o=r.cid,s=i.mounted,a=i.unmounted;r.remove(),delete n[e],delete s[o],delete a[o]}return r},renderView:function(t,e){var n,i,r=t.id,o=this._views;return i=r in o?(n=o[r]).FLAG_INSERT:((n=o[t.id]=this.createViewForModel(t)).paper=this).registerUnmountedView(n)|n.getFlag(n.initFlag),this.requestViewUpdate(n,i,n.UPDATE_PRIORITY,e),n},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,i=t.length;n<i;n++)this.renderView(t[n],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){_t(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t=C(this.cells).children("[model-id]"),s=this.model.get("cells");bt(t,function(t,e){var n=s.get(t.getAttribute("model-id")),i=s.get(e.getAttribute("model-id")),r=n.attributes.z||0,o=i.attributes.z||0;return r===o?0:r<o?-1:1})},insertView:function(t){var e=this.cells;switch(this.options.sorting){case Hi.APPROX:var n=t.model.get("z"),i=this.addZPivot(n);e.insertBefore(t.el,i);break;case Hi.EXACT:default:e.appendChild(t.el)}},addZPivot:function(t){(t=+t)||(t=0);var e=this._zPivots,n=e[t];if(n)return n;n=e[t]=document.createComment("z-index:"+(t+1));var i=-1/0;for(var r in e)(r=+r)<t&&i<r&&(i=r);var o=this.cells;if(i!==-1/0){var s=e[i];o.insertBefore(n,s.nextSibling)}else o.insertBefore(n,o.firstChild);return n},removeZPivots:function(){var t=this._zPivots,e=this.viewport;for(var n in t)e.removeChild(t[n]);this._zPivots={}},scale:function(t,e,n,i){if(void 0===t)return K.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===n&&(i=n=0);var r=this.translate();if(n||i||r.tx||r.ty){var o=r.tx-n*(t-1),s=r.ty-i*(e-1);this.translate(o,s)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var a=this.matrix();return a.a=t,a.d=e,this.matrix(a),this.trigger("scale",t,e,n,i),this},rotate:function(t,e,n){if(void 0===t)return K.matrixToRotate(this.matrix());if(void 0===e){var i=this.cells.getBBox();e=i.width/2,n=i.height/2}var r=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(r),this},translate:function(t,e){if(void 0===t)return K.matrixToTranslate(this.matrix());var n=this.matrix();n.e=t||0,n.f=e||0,this.matrix(n);var i=this.translate(),r=this.options.origin;return r.x=i.tx,r.y=i.ty,this.trigger("translate",i.tx,i.ty),this.options.drawGrid&&this.drawGrid(),this},findView:function(t){var e=ue(t)?this.cells.querySelector(t):t instanceof C?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=ue(t)||le(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(e){return e=new z(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=Vt(t||{},{strict:!1}),e=new X(e);var n=this.model.getElements().map(this.findViewByModel,this),i=t.strict?"containsRect":"intersect";return n.filter(function(t){return t&&e[i](t.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t){for(var e,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];"string"==typeof t&&(e=this).trigger.apply(e,["tools:event",t].concat(n))},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new z(t,e);return K.transformPoint(n,this.matrix())},localToPaperRect:function(t,e,n,i){var r=new X(t,e,n,i);return K.transformRect(r,this.matrix())},paperToLocalPoint:function(t,e){var n=new z(t,e);return K.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(t,e,n,i){var r=new X(t,e,n,i);return K.transformRect(r,this.matrix().inverse())},localToClientPoint:function(t,e){var n=new z(t,e);return K.transformPoint(n,this.clientMatrix())},localToClientRect:function(t,e,n,i){var r=new X(t,e,n,i);return K.transformRect(r,this.clientMatrix())},clientToLocalPoint:function(t,e){var n=new z(t,e);return K.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,n,i){var r=new X(t,e,n,i);return K.transformRect(r,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,i){return this.localToPaperRect(t,e,n,i).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new z(t,e).difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,n,i){var r=this.pageOffset(),o=new X(t,e,n,i);return o.x-=r.x,o.y-=r.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new z(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof qi))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,i=this.model,r=i.constructor.validations;return!(!n.multiLinks&&!r.multiLinks.call(this,i,e))&&(!(!n.linkPinning&&!r.linkPinning.call(this,i,e))&&!("function"==typeof n.allowLink&&!n.allowLink.call(this,t,this)))},getDefaultLink:function(t,e){return jt(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(e){var t=(e=e||{}).highlighter,n=this.options;if(void 0===t){var i=["embedding","connecting","magnetAvailability","elementAvailability"].find(function(t){return!!e[t]});t=i&&n.highlighting[i]||n.highlighting.default}if(!t)return!1;ue(t)&&(t={name:t});var r=t.name,o=n.highlighterNamespace[r];if(!o)throw new Error('Unknown highlighter ("'+r+'")');if("function"!=typeof o.highlight)throw new Error('Highlighter ("'+r+'") is missing required highlight() method');if("function"!=typeof o.unhighlight)throw new Error('Highlighter ("'+r+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:r}},onCellHighlight:function(t,e,n){if(n=this.resolveHighlighter(n)){e.id||(e.id=K.uniqueId());var i=n.name+e.id+JSON.stringify(n.options);if(!this._highlights[i]){var r=n.highlighter;r.highlight(t,e,Nt({},n.options)),this._highlights[i]={cellView:t,magnetEl:e,opt:n.options,highlighter:r}}}},onCellUnhighlight:function(t,e,n){if(n=this.resolveHighlighter(n)){var i=n.name+e.id+JSON.stringify(n.options),r=this._highlights[i];r&&(r.highlighter.unhighlight(r.cellView,r.magnetEl,r.opt),this._highlights[i]=null)}},pointerdblclick:function(t){t.preventDefault(),t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=ct(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,n.x,n.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,n.x,n.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=ct(t);var n=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=ct(t),n=this.snapToGrid(e.clientX,e.clientY),i=this.eventData(t).sourceView;i?i.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(C.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.findView(t.relatedTarget);if(e){if(n===e)return;e.mouseenter(t)}else{if(n)return;this.trigger("paper:mouseenter",t)}}},mouseleave:function(t){t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.findView(t.relatedTarget);if(e){if(n===e)return;e.mouseleave(t)}else{if(n)return;this.trigger("paper:mouseleave",t)}}},mousewheel:function(t){t=ct(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=t.originalEvent,i=this.snapToGrid(n.clientX,n.clientY),r=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail));e?e.mousewheel(t,i.x,i.y,r):this.trigger("blank:mousewheel",t,i.x,i.y,r)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var i=this.findView(e);if(i){if(t=ct(t),this.guard(t,i))return;var r=this.snapToGrid(t.clientX,t.clientY);i.onevent(t,n,r.x,r.y)}}},magnetEvent:function(t,e){var n=t.currentTarget;if(n.getAttribute("magnet")){var i=this.findView(n);if(i){if(t=ct(t),this.guard(t,i))return;var r=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,n,r.x,r.y)}}},onmagnet:function(t){this.magnetEvent(t,function(t,e,n,i,r){t.onmagnet(e,i,r)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(t,e,n,i,r){t.magnetpointerdblclick(e,n,i,r)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(t,e,n,i,r){t.magnetcontextmenu(e,n,i,r)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(n){if(t=ct(t),this.guard(t,n))return;var i=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,i.x,i.y)}},getPointerArgs:function(t){var e=ct(t),n=this.snapToGrid(e.clientX,e.clientY);return[e,n.x,n.y]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return"mousedown"===t.type&&2===t.button||(!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof Ce)&&(this.svg!==t.target&&this.el!==t.target&&!C.contains(this.svg,t.target))))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:K("svg",{width:"100%",height:"100%"},K("defs")),patterns:{},add:function(t,e){K(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(K("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(ue(t)&&Array.isArray(e[t]))return e[t].map(function(t){return Nt({},t)});var n=t||{args:[{}]},i=Array.isArray(n),r=n.name;if(i||r||n.markup||(r="dot"),r&&Array.isArray(e[r])){var o=e[r].map(function(t){return Nt({},t)}),s=Array.isArray(n.args)?n.args:[n.args||{}];Vt(s[0],te(t,"args"));for(var a=0;a<s.length;a++)o[a]&&Nt(o[a],s[a]);return o}return i?n:[n]},drawGrid:function(t){var a=this.options.gridSize;if(a<=1)return this.clearGrid();var h=Array.isArray(t)?t:[t],l=this.matrix(),u=this._getGridRefs();this._gridSettings.forEach(function(t,e){var n="pattern_"+e,i=se(t,h[e],{sx:l.a||1,sy:l.d||1,ox:l.e||0,oy:l.f||0});i.width=a*(l.a||1)*(i.scaleFactor||1),i.height=a*(l.d||1)*(i.scaleFactor||1),u.exist(n)||u.add(n,K("pattern",{id:n,patternUnits:"userSpaceOnUse"},K(i.markup)));var r=u.get(n);jt(i.update)&&i.update(r.node.childNodes[0],i);var o=i.ox%i.width;o<0&&(o+=i.width);var s=i.oy%i.height;s<0&&(s+=i.height),r.attr({x:o,y:s,width:i.width,height:i.height})});var e=(new XMLSerializer).serializeToString(u.root.node);return e="url(data:image/svg+xml;base64,"+btoa(e)+")",this.$grid.css("backgroundImage",e),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",i=this.scale(),r=this.translate();he(e)&&(e=r.tx+i.sx*(e.x||0)+"px "+(r.ty+i.sy*(e.y||0))+"px");he(n)&&(n=(n=new X(n).scale(i.sx,i.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){var n,i=(e=e||{}).size,r=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[re(r)];if(jt(a)){t.width*=s,t.height*=s;var h=a(t,e);if(!(h instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=h.toDataURL("image/png"),r="repeat",he(i)?(i.width*=h.width/t.width,i.height*=h.height/t.height):void 0===i&&(e.size={width:h.width/s,height:h.height/s})}else n=t.src,void 0===i&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:r,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Dt(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,_t(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!he(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+it(JSON.stringify(t))),!this.isDefined(e)){var i=St,r=i[n]&&i[n](t.args||{});if(!r)throw new Error("Non-existing filter "+n);var o=Nt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});K(r,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!he(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");var e=t.id,n=t.type,i=t.stops;if(e||(e=n+this.svg.id+it(JSON.stringify(t))),!this.isDefined(e)){var r=Et('<stop offset="${offset}" stop-color="${color}" stop-opacity="${opacity}"/>'),o=["<"+n+">",Ut(i).map(function(t){return r({offset:t.offset,color:t.color,opacity:Number.isFinite(t.opacity)?t.opacity:1})}).join(""),"</"+n+">"].join(""),s=Nt({id:e},t.attrs);K(o,s).appendTo(this.defs)}return e},defineMarker:function(t){if(!he(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");var e=t.id;if(e||(e=this.svg.id+it(JSON.stringify(t))),!this.isDefined(e)){var n=te(t,"type","userSpaceOnUse");K("marker",{id:e,orient:"auto",overflow:"visible",markerUnits:t.markerUnits||"userSpaceOnUse"},[K(t.type||"path",n)]).appendTo(this.defs)}return e}},{sorting:Hi,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,i=t.height;e.width=2*n,e.height=2*i;var r=e.getContext("2d");return r.drawImage(t,0,0,n,i),r.setTransform(-1,0,0,-1,e.width,e.height),r.drawImage(t,0,0,n,i),r.setTransform(-1,0,0,1,e.width,0),r.drawImage(t,0,0,n,i),r.setTransform(1,0,0,-1,0,e.height),r.drawImage(t,0,0,n,i),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,i=t.height;e.width=2*n,e.height=i;var r=e.getContext("2d");return r.drawImage(t,0,0,n,i),r.translate(2*n,0),r.scale(-1,1),r.drawImage(t,0,0,n,i),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,i=t.height;e.width=n,e.height=2*i;var r=e.getContext("2d");return r.drawImage(t,0,0,n,i),r.translate(0,2*i),r.scale(1,-1),r.drawImage(t,0,0,n,i),e},watermark:function(t,e){e=e||{};var n=t.width,i=t.height,r=document.createElement("canvas");r.width=3*n,r.height=3*i;for(var o=r.getContext("2d"),s=le(e.watermarkAngle)?-e.watermarkAngle:-20,a=A(s),h=r.width/4,l=r.height/4,u=0;u<4;u++)for(var c=0;c<4;c++)0<(u+c)%2&&(o.setTransform(1,0,0,1,(2*u-1)*h,(2*c-1)*l),o.rotate(a),o.drawImage(t,-n/2,-i/2,n,i));return r}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){K(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;K(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,i=e.width,r=e.height,o=e.thickness;n=0<=i-o&&0<=r-o?["M",i,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",K(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,i=e.width,r=e.height,o=e.thickness;n=0<=i-o&&0<=r-o?["M",i,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",K(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,i=e.width,r=e.height,o=e.thickness;n=0<=i-o&&0<=r-o?["M",i,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",K(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),Wi=$e.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){var e=this.paper,n=this.relatedView;return!e||!n||e.guard(t,n)}}),Zi=$e.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,options:{tools:null,relatedView:null,name:null,component:!1},configure:function(t){var e=(t=Nt(this.options,t)).tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof We))return this;for(var i=this.tools=[],r=0,o=e.length;r<o;r++){var s=e[r];s instanceof Wi&&(s.configure(n,this),s.render(),this.vel.append(s.el),i.push(s))}return this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(e){for(var n=0,i=e.length;n<i;n++){var r=e[n];t.tool!==r.cid&&r.isVisible()&&r.update()}return this}},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,i=e.length;n<i;n++){var r=e[n];t===r?r.show():r.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,i=e.length;n<i;n++){var r=e[n];r===t||r.isVisible()||(r.show(),r.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){var t=this.options,e=t.relatedView;e&&(t.component?e.el:e.paper.tools).appendChild(this.el);return this}}),Ji={Graph:Ui,attributes:Ee,Cell:Ce,CellView:We,Element:He,ElementView:Ze,Link:pn,LinkView:qi,Paper:Xi,ToolView:Wi,ToolsView:Zi};function Ki(t,e,n){return Jn.call(this.paper,{},e,n,t,this.model).anchor}function Qi(t,e){var n=t.model;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}var tr=$e.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){this.vel.attr({cx:t,cy:e})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),er=Wi.extend({name:"vertices",options:{handleClass:tr,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var e=this,t=this.relatedView.model.vertices(),n=0,i=t.length;n<i;n++){var r=t[n],o=new this.options.handleClass({index:n,paper:this.paper,guard:function(t){return e.guard(t)}});o.render(),o.position(r.x,r.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var i=t[e],r=this.handles[e];if(!r)return;r.position(i.x,i.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),i=0<t?n[t-1]:e.sourceAnchor,r=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new z(i),next:new z(r)}},onHandleWillChange:function(t,e){this.focus();var n=this.relatedView,i=this.options;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),i.stopPropagation||n.notifyPointerdown.apply(n,n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){var n=this.options,i=this.relatedView,r=t.options.index,o=i.paper.getPointerArgs(e),s=o[0],a=o[1],h=o[2],l={x:a,y:h};this.snapVertex(l,r),i.model.vertex(r,l,{ui:!0,tool:this.cid}),t.position(l.x,l.y),n.stopPropagation||i.notifyPointermove(s,a,h)},onHandleChanged:function(t,e){var n=this.options,i=this.relatedView;if(n.vertexAdding&&this.updatePath(),n.redundancyRemoval){i.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),i.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&i.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var r=i.paper.getPointerArgs(e),o=r[0],s=r[1],a=r[2];n.stopPropagation||i.notifyPointerup(o,s,a),i.checkMouseleave(o)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(0<n){var i=this.getNeighborPoints(e),r=i.prev,o=i.next;Math.abs(t.x-r.x)<n?t.x=r.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-r.y)<n?t.y=i.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var n=t.options.index,i=this.relatedView;i.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),i.checkMouseleave(ct(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=ct(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),i=this.relatedView;i.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var r=i.getVertexIndex(n.x,n.y);this.snapVertex(n,r),i.model.insertVertex(r,n,{ui:!0,tool:this.cid}),this.render();var o=this.handles[r];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:tr}),nr=$e.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,n,i){var r=K.createSVGMatrix().translate(t,e).rotate(n),o=this.childNodes.handle;o.setAttribute("transform",K.matrixToTransformString(r)),o.setAttribute("cursor",n%180==0?"row-resize":"col-resize");var s=i.getClosestPoint(new z(t,e)),a=this.childNodes.line;a.setAttribute("x1",t),a.setAttribute("y1",e),a.setAttribute("x2",s.x),a.setAttribute("y2",s.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}}),ir=Wi.extend({name:"segments",precision:.5,options:{handleClass:nr,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:Ki,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var n=0,i=e.length;n<i-1;n++){var r=e[n],o=e[n+1],s=this.renderHandle(r,o);this.simulateRelatedView(s.el),this.handles.push(s),s.options.index=n}return this},renderHandle:function(t,e){var n=this,i=new this.options.handleClass({paper:this.paper,guard:function(t){return n.guard(t)}});return i.render(),this.updateHandle(i,t,e),i.vel.appendTo(this.el),this.startHandleListening(i),i},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,n=0,i=e.length;n<i;n++)e[n].options.index+=t},resetAnchor:function(t,e){var n=this.relatedView.model;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,n){var i=t.options.index,r=this.relatedView.model.vertices(),o=t.options.axis,s=r[i-2]||n.sourceAnchor,a=r[i+1]||n.targetAnchor,h=this.options.snapRadius;return Math.abs(e[o]-s[o])<h?e[o]=s[o]:Math.abs(e[o]-a[o])<h&&(e[o]=a[o]),e},onHandleChanging:function(t,e){var n=this.options,i=this.eventData(e),r=this.relatedView,o=r.paper,s=t.options.index-1,a=ct(e),h=o.snapToGrid(a.clientX,a.clientY),l=this.snapHandle(t,h.clone(),i),u=t.options.axis,c=this.options.snapHandle?0:h[u]-l[u],d=r.model,f=Dt(d.vertices()),p=f[s],g=f[s+1],v=this.options.anchor;"function"!=typeof v&&(v=null);var m=r.sourceView,y=r.sourceBBox,w=!1,b=!1;if(p?0===s?y.containsPoint(p)?(f.shift(),this.shiftHandleIndexes(-1),w=!0):(p[u]=l[u],b=!0):p[u]=l[u]:((p=r.sourceAnchor.toJSON())[u]=l[u],y.containsPoint(p)?(p[u]=l[u],w=!0):(f.unshift(p),this.shiftHandleIndexes(1),b=!0)),v&&m){if(w){var x=i.sourceAnchor.clone();x[u]=l[u];var A=v.call(r,x,m,r.sourceMagnet||m.el,"source",r);this.resetAnchor("source",A)}b&&this.resetAnchor("source",i.sourceAnchorDef)}var P=r.targetView,S=r.targetBBox,k=!1,E=!1;if(g?s===f.length-2?S.containsPoint(g)?(f.pop(),k=!0):(g[u]=l[u],E=!0):g[u]=l[u]:((g=r.targetAnchor.toJSON())[u]=l[u],S.containsPoint(g)?k=!0:(f.push(g),E=!0)),v&&P){if(k){var C=i.targetAnchor.clone();C[u]=l[u];var T=v.call(r,C,P,r.targetMagnet||P.el,"target",r);this.resetAnchor("target",T)}E&&this.resetAnchor("target",i.targetAnchorDef)}d.vertices(f,{ui:!0,tool:this.cid}),this.updateHandle(t,p,g,c),n.stopPropagation||r.notifyPointermove(a,h.x,h.y)},onHandleChangeStart:function(t,e){var n=this.options,i=this.handles,r=this.relatedView,o=r.model,s=r.paper,a=t.options.index;if(Array.isArray(i)){for(var h=0,l=i.length;h<l;h++)h!==a&&i[h].hide();this.focus(),this.eventData(e,{sourceAnchor:r.sourceAnchor.clone(),targetAnchor:r.targetAnchor.clone(),sourceAnchorDef:Ot(o.prop(["source","anchor"])),targetAnchorDef:Ot(o.prop(["target","anchor"]))}),o.startBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown.apply(r,s.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){var n=this.options,i=this.relatedView,r=i.paper,o=i.model;n.redundancyRemoval&&i.removeRedundantLinearVertices({ui:!0,tool:this.cid});var s=ct(e),a=r.snapToGrid(s.clientX,s.clientY);this.render(),this.blur(),o.stopBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||i.notifyPointerup(s,a.x,a.y),i.checkMouseleave(s)},updateHandle:function(t,e,n,i){var r=Math.abs(e.x-n.x)<this.precision,o=Math.abs(e.y-n.y)<this.precision;if(r||o){var s=new O(e,n);if(s.length()<this.options.segmentLengthThreshold)t.hide();else{var a=s.midpoint(),h=r?"x":"y";a[h]+=i||0;var l=s.vector().vectorAngle(new z(1,0));t.position(a.x,a.y,l,this.relatedView),t.show(),t.options.axis=h}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:nr}),rr=Wi.extend({tagName:"path",xAxisVector:new z(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},onRender:function(){this.update()},update:function(){var t,e,n=this.ratio,i=this.relatedView,r=i.getTangentAtRatio(n);if(e=r?(t=r.start,r.vector().vectorAngle(this.xAxisVector)||0):(t=i.getPointAtRatio(n),0),!t)return this;var o=K.createSVGMatrix().translate(t.x,t.y).rotate(e);return this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=ct(t),n=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,n.x,n.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,n=e.paper,i=ct(t),r=n.snapToGrid(i.clientX,i.clientY);e.pointerup(i,r.x,r.y),n.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),or=rr.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),sr=rr.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),ar=Wi.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){var t=this.relatedView,e=this.vel,n=t.model.isLink()?this.getLinkMatrix():this.getElementMatrix();e.transform(n,{absolute:!0})},getElementMatrix:function(){var t=this.relatedView,e=this.options,n=e.x;void 0===n&&(n=0);var i=e.y;void 0===i&&(i=0);var r=e.offset;void 0===r&&(r={});var o=e.useModelGeometry,s=e.rotate,a=Qi(t,o),h=t.model.angle();s||(a=a.bbox(h));var l=r.x;void 0===l&&(l=0);var u=r.y;void 0===u&&(u=0),pt(n)&&(n=parseFloat(n)/100*a.width),pt(i)&&(i=parseFloat(i)/100*a.height);var c=K.createSVGMatrix().translate(a.x+a.width/2,a.y+a.height/2);return s&&(c=c.rotate(h)),c=c.translate(n+l-a.width/2,i+u-a.height/2)},getLinkMatrix:function(){var t=this.relatedView,e=this.options,n=e.offset;void 0===n&&(n=0);var i=e.distance;void 0===i&&(i=0);var r,o,s,a=e.rotate;s=(r=pt(i)?t.getTangentAtRatio(parseFloat(i)/100):t.getTangentAtLength(i))?(o=r.start,r.vector().vectorAngle(new z(1,0))||0):(o=t.getConnection().start,0);var h=K.createSVGMatrix().translate(o.x,o.y).rotate(s).translate(0,n);return a||(h=h.rotate(-s)),h},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),hr=ar.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}}),lr=Wi.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){var t=this.relatedView,e=this.options,n=this.vel,i=e.useModelGeometry,r=e.rotate,o=xt(e.padding),s=Qi(t,i).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom}),a=t.model;if(a.isElement()){var h=a.angle();if(h)if(r){var l=a.getBBox().center();n.rotate(h,l.x,l.y,{absolute:!0})}else s=s.bbox(h)}return n.attr(s.toJSON()),this}}),ur=Wi.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:function(t,e,n,i,r,o){var s=o.options.snapRadius,a="source"===i,h=a?0:-1,l=this.model.vertex(h)||this.getEndAnchor(a?"target":"source");return l&&(Math.abs(l.x-t.x)<s&&(t.x=l.x),Math.abs(l.y-t.y)<s&&(t.y=l.y)),t},anchor:Ki,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){var t=this.type,e=this.relatedView.getEndView(t);return this.el.style.display=e?(this.updateAnchor(),this.updateArea(),""):"none",this},updateAnchor:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var n=this.relatedView,i=this.type,r=n.getEndAnchor(i),o=this.options,s=n.model.prop([i,"anchor"]);e.setAttribute("transform","translate("+r.x+","+r.y+")");var a=s?o.customAnchorAttributes:o.defaultAnchorAttributes;for(var h in a)e.setAttribute(h,a[h])}}},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var n,i,r,o=this.relatedView,s=this.type,a=o.getEndView(s),h=a.model,l=o.getEndMagnet(s),u=this.options.areaPadding;isFinite(u)||(u=0),a.isNodeConnection(l)?(i=0,r=(n=a.getBBox()).center()):(n=a.getNodeUnrotatedBBox(l),i=h.angle(),r=n.center(),i&&r.rotate(h.getBBox().center(),-i)),n.inflate(u),e.setAttribute("x",-n.width/2),e.setAttribute("y",-n.height/2),e.setAttribute("width",n.width),e.setAttribute("height",n.height),e.setAttribute("transform","translate("+r.x+","+r.y+") rotate("+i+")")}}},toggleArea:function(t){this.childNodes.area.style.display=t?"":"none"},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,n=this.relatedView.model;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e,n=this.relatedView,i=this.type,r=n.getEndView(i),o=r.model,s=n.getEndMagnet(i),a=ct(t),h=this.paper.clientToLocalPoint(a.clientX,a.clientY),l=this.options.snap;if("function"==typeof l&&(h=l.call(n,h,r,s,i,n,this),h=new z(h)),this.options.restrictArea)if(r.isNodeConnection(s)){var u=r.getClosestPoint(h);u&&(h=u)}else{var c=r.getNodeUnrotatedBBox(s),d=o.angle(),f=o.getBBox().center(),p=h.clone().rotate(f,d);c.containsPoint(p)||(h=c.pointNearestToPoint(p).rotate(f,-d))}var g=this.options.anchor;"function"==typeof g&&(e=g.call(n,h,r,s,i,n)),this.resetAnchor(e),this.update()},onPointerUp:function(t){this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.relatedView;this.options.redundancyRemoval&&e.removeRedundantLinearVertices({ui:!0,tool:this.cid}),e.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;!1!==t&&(!0===t&&(t=null),this.resetAnchor(Dt(t)),this.update())}}),cr={Vertices:er,Segments:ir,SourceArrowhead:sr,TargetArrowhead:or,SourceAnchor:ur.extend({name:"source-anchor",type:"source"}),TargetAnchor:ur.extend({name:"target-anchor",type:"target"}),Button:ar,Remove:hr,Boundary:lr},dr={Button:ar,Remove:hr,Boundary:lr},fr=K,pr={PortLabel:je,Port:Re},gr={basic:fn,standard:Tn};e.V=K,e.Vectorizer=fr,e.anchors=ji,e.config=Q,e.connectionPoints=qn,e.connectionStrategies=Kn,e.connectors=On,e.dia=Ji,e.elementTools=dr,e.env=Je,e.format={},e.g=J,e.highlighters=Dn,e.layout=pr,e.linkAnchors=zi,e.linkTools=cr,e.mvc=Xe,e.routers=_i,e.setTheme=function(t,e){_t(Ye,"setTheme",t,e=e||{}),$e.prototype.defaultTheme=t},e.shapes=gr,e.ui={},e.util=Me,e.version="3.2.0",Object.defineProperty(e,"__esModule",{value:!0})}),"undefined"!=typeof joint)var g=joint.g,V=joint.V,Vectorizer=joint.V;
##############################################
/src/dist/vectorizer.js-1401-            // we can work with that - if `NaN`, return 0
/src/dist/vectorizer.js:1402:            if (cpNormalizedLength !== cpNormalizedLength) { return 0; } // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`
/src/dist/vectorizer.js-1403-            // (`NaN` is the only value that is not equal to itself)
##############################################
/src/dist/vectorizer.js-5620-
/src/dist/vectorizer.js:5621:                    el = document.createElementNS(ns.svg, el);
/src/dist/vectorizer.js-5622-                }
##############################################
/src/dist/vectorizer.js-5955-                    if (eol && j === lastJ) { annotation += eol; }
/src/dist/vectorizer.js:5956:                    tspanNode = document.createTextNode(annotation || ' ');
/src/dist/vectorizer.js-5957-                    if (baseSize && baseSize > maxFontSize) { maxFontSize = baseSize; }
##############################################
/src/dist/vectorizer.js-6794-
/src/dist/vectorizer.js:6795:            var svg = document.createElementNS(ns.svg, 'svg');
/src/dist/vectorizer.js-6796-            svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);
##############################################
/src/dist/joint.nowrap.min.js-7-*/
/src/dist/joint.nowrap.min.js:8:var joint=function(e,s,i,S){"use strict";var n,l,r,c;s=s&&s.hasOwnProperty("default")?s.default:s,i=i&&i.hasOwnProperty("default")?i.default:i,S=S&&S.hasOwnProperty("default")?S.default:S,Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var r,o,s=0|e,a=Math.max(0<=s?s:n-Math.abs(s),0);for(;a<n;){if((r=i[a])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var o=e[r];if(t.call(n,o,r,e))return o;r++}}}),Array.from||(Array.from=(n=Object.prototype.toString,l=function(t){return"function"==typeof t||"[object Function]"===n.call(t)},r=Math.pow(2,53)-1,c=function(t){var e,i=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(i,0),r)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,n=1<arguments.length?arguments[1]:void 0;if(void 0!==n){if(!l(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(i=arguments[2])}for(var r,o=c(e.length),s=l(this)?Object(new this(o)):new Array(o),a=0;a<o;)r=e[a],s[a]=n?void 0===i?n(r,a):n.call(i,r,a):r,a+=1;return s.length=o,s})),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var o=e[r];if(t.call(n,o,r,e))return r;r++}return-1}}),function(){var t=void 0!==e?e:this,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function l(t){this.message=t}(l.prototype=new Error).name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var e,i,n=String(t),r=0,o=a,s="";n.charAt(0|r)||(o="=",r%1);s+=o.charAt(63&e>>8-r%1*8)){if(255<(i=n.charCodeAt(r+=.75)))throw new l("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|i}return s}),t.atob||(t.atob=function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new l("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,r=0,o=0,s="";n=e.charAt(o++);~n&&(i=r%4?64*i+n:n,r++%4)?s+=String.fromCharCode(255&i>>(-2*r&6)):0)n=a.indexOf(n);return s})}(),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isNaN=Number.isNaN||function(t){return t!=t},String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),function(){function n(t,e){return this.slice(t,e)}function r(t,e){arguments.length<2&&(e=0);for(var i=0,n=t.length;i<n;++i,++e)this[e]=255&t[i]}function t(t){var e;if("number"==typeof t){e=new Array(t);for(var i=0;i<t;++i)e[i]=0}else e=t.slice(0);return e.subarray=n,(e.buffer=e).byteLength=e.length,e.set=r,"object"==typeof t&&t.buffer&&(e.buffer=t.buffer),e}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=t,window.Uint32Array=t,window.Int32Array=t)}(),"undefined"!=typeof XMLHttpRequest&&("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}}));var o=Math,L=o.abs,g=o.cos,h=o.sin,Z=o.sqrt,P=o.min,G=o.max,u=o.atan2,a=o.round,d=o.floor,f=o.PI,k=o.pow,t={curveThroughPoints:function(t){return console.warn("deprecated"),new O(p.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,i=[],n=[],r=t.length-1;if(1==r)return i[0]=new E((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new E(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,n];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var s=this.getFirstControlPoints(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var a=this.getFirstControlPoints(o);for(e=0;e<r;e++)i.push(new E(s[e],a[e])),e<r-1?n.push(new E(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):n.push(new E((t[r].x+s[r-1])/2,(t[r].y+a[r-1])/2));return[i,n]},getCurveDivider:function(t,e,i,n){console.warn("deprecated");var r=new p(t,e,i,n);return function(t){var e=r.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var o=1;o<e;o++)n[o]=1/r,r=(o<e-1?4:3.5)-n[o],i[o]=(t[o]-i[o-1])/r;for(o=1;o<e;o++)i[e-o-1]-=n[e-o]*i[e-o];return i},getInversionSolver:function(t,e,i,n){console.warn("deprecated");var r=new p(t,e,i,n);return function(t){return r.closestPointT(t)}}},p=function(t,e,i,n){return this instanceof p?t instanceof p?new p(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new E(t),this.controlPoint1=new E(e),this.controlPoint2=new E(i),void(this.end=new E(n))):new p(t,e,i,n)};p.throughPoints=function(){function l(t){var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var o=1;o<e;o++)n[o]=1/r,r=(o<e-1?4:3.5)-n[o],i[o]=(t[o]-i[o-1])/r;for(o=1;o<e;o++)i[e-o-1]-=n[e-o]*i[e-o];return i}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var e=function(t){var e,i=[],n=[],r=t.length-1;if(1==r)return i[0]=new E((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new E(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,n];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var s=l(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var a=l(o);for(e=0;e<r;e++)i.push(new E(s[e],a[e])),e<r-1?n.push(new E(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):n.push(new E((t[r].x+s[r-1])/2,(t[r].y+a[r-1])/2));return[i,n]}(t),i=[],n=e[0].length,r=0;r<n;r++){var o=new E(e[0][r].x,e[0][r].y),s=new E(e[1][r].x,e[1][r].y);i.push(new p(t[r],o,s,t[r+1]))}return i}}(),p.prototype={bbox:function(){for(var t,e,i,n,r,o,s,a,l=this.start,c=this.controlPoint1,g=this.controlPoint2,h=this.end,u=l.x,d=l.y,f=c.x,p=c.y,I=g.x,m=g.y,A=h.x,v=h.y,C=new Array,w=new Array,y=[new Array,new Array],b=0;b<2;++b)if(i=0===b?(e=6*u-12*f+6*I,t=-3*u+9*f-9*I+3*A,3*f-3*u):(e=6*d-12*p+6*m,t=-3*d+9*p-9*m+3*v,3*p-3*d),L(t)<1e-12){if(L(e)<1e-12)continue;0<(n=-i/e)&&n<1&&w.push(n)}else a=Z(s=e*e-4*i*t),s<0||(0<(r=(-e+a)/(2*t))&&r<1&&w.push(r),0<(o=(-e-a)/(2*t))&&o<1&&w.push(o));for(var N,M,x,S=w.length,k=S;S--;)M=(N=1-(n=w[S]))*N*N*u+3*N*N*n*f+3*N*n*n*I+n*n*n*A,y[0][S]=M,x=N*N*N*d+3*N*N*n*p+3*N*n*n*m+n*n*n*v,y[1][S]=x,C[S]={X:M,Y:x};w[k]=0,w[k+1]=1,C[k]={X:u,Y:d},C[k+1]={X:A,Y:v},y[0][k]=u,y[1][k]=d,y[0][k+1]=A,y[1][k+1]=v,w.length=k+2,y[0].length=k+2,y[1].length=k+2,C.length=k+2;var D=P.apply(null,y[0]),z=P.apply(null,y[1]),T=G.apply(null,y[0]),j=G.apply(null,y[1]);return new H(D,z,T-D,j-z)},clone:function(){return new p(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,n),n)},closestPointNormalizedLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions},r=this.closestPointLength(t,n);if(!r)return 0;var o=this.length(n);return 0===o?0:r/o},closestPointT:function(t,e){for(var i,n,r,o,s,a,l,c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,g=void 0===e.subdivisions?this.getSubdivisions({precision:c}):e.subdivisions,h=g.length,u=h?1/h:0,d=0;d<h;d++){var f=g[d],p=f.start.distance(t),I=f.end.distance(t),m=p+I;(!l||m<l)&&(n=d*u,r=(d+1)*u,o=p,s=I,a=(i=f).start.distance(f.end),l=m)}for(var A=k(10,-c);;){var v=o?L(o-s)/o:0,C=s?L(o-s)/s:0;if(v<A||C<A||(!o||o<a*A||(!s||s<a*A)))return o<=s?n:r;var w=i.divide(.5);u/=2;var y=w[0].start.distance(t),b=w[0].end.distance(t),N=y+b,M=w[1].start.distance(t),x=w[1].end.distance(t);s=N<=M+x?(i=w[0],r-=u,o=y,b):(i=w[1],n+=u,o=M,x)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(1<=t)return this.divideAtT(1);var i=this.tAt(t,e);return this.divideAtT(i)},divideAtLength:function(t,e){var i=this.tAtLength(t,e);return this.divideAtT(i)},divideAtT:function(t){var e=this.start,i=this.controlPoint1,n=this.controlPoint2,r=this.end;if(t<=0)return[new p(e,e,e,e),new p(e,i,n,r)];if(1<=t)return[new p(e,i,n,r),new p(r,r,r,r)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,l=o.divider,c=o.dividerControlPoint1,g=o.dividerControlPoint2;return[new p(e,s,a,l),new p(l,c,g,r)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,i=this.controlPoint1,n=this.controlPoint2,r=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:n.clone()};if(1<=t)return{startControlPoint1:i.clone(),startControlPoint2:n.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};var o=new B(e,i).pointAt(t),s=new B(i,n).pointAt(t),a=new B(n,r).pointAt(t),l=new B(o,s).pointAt(t),c=new B(s,a).pointAt(t);return{startControlPoint1:o,startControlPoint2:l,divider:new B(l,c).pointAt(t),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=[new p(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return i;for(var n=this.endpointDistance(),r=k(10,-e),o=0;;){o+=1;for(var s=[],a=i.length,l=0;l<a;l++){var c=i[l].divide(.5);s.push(c[0],c[1])}for(var g=0,h=s.length,u=0;u<h;u++){g+=s[u].endpointDistance()}if(1<o&&(0!==g?(g-n)/g:0)<r)return s;i=s,n=g}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,i=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(n))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,n=0,r=i.length,o=0;o<r;o++){n+=i[o].endpointDistance()}return n},lengthAtT:function(t,e){if(t<=0)return 0;var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:i})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var i=this.tAt(t,e);return this.pointAtT(i)},pointAtLength:function(t,e){var i=this.tAtLength(t,e);return this.pointAtT(i)},pointAtT:function(t){return t<=0?this.start.clone():1<=t?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,scale:function(t,e,i){return this.start.scale(t,e,i),this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var i=this.tAt(t,e);return this.tangentAtT(i)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var i=this.tAtLength(t,e);return this.tangentAtT(i)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var e=this.getSkeletonPoints(t),i=e.startControlPoint2,n=e.dividerControlPoint1,r=e.divider,o=new B(i,n);return o.translate(r.x-i.x,r.y-i.y),o},tAt:function(t,e){if(t<=0)return 0;if(1<=t)return 1;var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions},r=this.length(n)*t;return this.tAtLength(r,n)},tAtLength:function(t,e){var i=!0;t<0&&(i=!1,t=-t);for(var n,r,o,s,a,l=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.subdivisions?this.getSubdivisions({precision:l}):e.subdivisions,g={precision:l,subdivisions:c},h=0,u=c.length,d=1/u,f=0;f<u;f++){var p=i?f:u-1-f,I=c[f],m=I.endpointDistance();if(t<=h+m){n=I,r=p*d,o=(p+1)*d,s=i?t-h:m+h-t,a=i?m+h-t:t-h;break}h+=m}if(!n)return i?1:0;for(var A=this.length(g),v=k(10,-l);;){var C,w;if((0!==A?s/A:0)<v)return r;if((0!==A?a/A:0)<v)return o;var y=n.divide(.5);d/=2;var b=y[0].endpointDistance(),N=y[1].endpointDistance();w=s<=b?(n=y[0],o-=d,b-(C=s)):(n=y[1],r+=d,N-(C=s-b)),s=C,a=w}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,n=[i[0].start.clone()],r=i.length,o=0;o<r;o++){var s=i[o];n.push(s.end.clone())}return n},toPolyline:function(t){return new D(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},p.prototype.divide=p.prototype.divideAtT;var w=function(t,e,i){return this instanceof w?t instanceof w?new w(new E(t.x,t.y),t.a,t.b):(t=new E(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=i)):new w(t,e,i)};w.fromRect=function(t){return t=new H(t),new w(t.center(),t.width/2,t.height/2)},w.prototype={bbox:function(){return new H(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new E(this.x,this.y)},clone:function(){return new w(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],i=t.start,n=t.end,r=this.a,o=this.b,s=t.vector(),a=i.difference(new E(this)),l=new E(s.x/(r*r),s.y/(o*o)),c=new E(a.x/(r*r),a.y/(o*o)),g=s.dot(l),h=s.dot(c),u=h*h-g*(a.dot(c)-1);if(u<0)return null;if(0<u){var d=Z(u),f=(-h-d)/g,p=(-h+d)/g;if((f<0||1<f)&&(p<0||1<p))return null;0<=f&&f<=1&&e.push(i.lerp(n,f)),0<=p&&p<=1&&e.push(i.lerp(n,p))}else{var I=-h/g;if(!(0<=I&&I<=1))return null;e.push(i.lerp(n,I))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new E(t),e&&t.rotate(new E(this.x,this.y),e);var i,n=t.x-this.x,r=t.y-this.y;if(0===n)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new E(this.x,this.y),-e):i;var o=r/n,s=o*o,a=this.a*this.a,l=this.b*this.b,c=Z(1/(1/a+s/l)),g=o*(c=n<0?-c:c);return i=new E(this.x+c,this.y+g),e?i.rotate(new E(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,i=t.y,n=this.a,r=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(n*n)+(i-s)*(i-s)/(r*r)},tangentTheta:function(t){var e,i,n=t.x,r=t.y,o=this.a,s=this.b,a=this.bbox().center(),l=a.x,c=a.y,g=n>a.x+o/2,h=n<a.x-o/2;return g||h?i=o*o/(n-l)-o*o*(r-c)*((e=n>a.x?r-30:r+30)-c)/(s*s*(n-l))+l:e=s*s/(r-c)-s*s*(n-l)*((i=r>a.y?n+30:n-30)-l)/(o*o*(r-c))+c,new E(i,e).theta(t)},toString:function(){return new E(this.x,this.y).toString()+" "+this.a+" "+this.b}};var B=function(t,e){return this instanceof B?t instanceof B?new B(t.start,t.end):(this.start=new E(t),void(this.end=new E(e))):new B(t,e)};B.prototype={angle:function(){var t=new E(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=P(this.start.x,this.end.x),e=P(this.start.y,this.end.y),i=G(this.start.x,this.end.x),n=G(this.start.y,this.end.y);return new H(t,e,i-t,n-e)},bearing:function(){var t=y(this.start.y),e=y(this.end.y),i=this.start.x,n=this.end.x,r=y(n-i),o=h(r)*g(e),s=g(t)*h(e)-h(t)*g(e)*g(r),a=A(u(o,s))-22.5;return a<0&&(a+=360),["NE","E","SE","S","SW","W","NW","N"][a=parseInt(a/45)]},clone:function(){return new B(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new B(this.start,t).vector()),i=P(1,G(0,e/this.squaredLength()));return i!=i?0:i},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,i=this.end;if(0!==e.cross(t,i))return!1;var n=this.length();return!(new B(e,t).length()>n)&&!(new B(t,i).length()>n)},divideAt:function(t){var e=this.pointAt(t);return[new B(this.start,e),new B(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new B(this.start,e),new B(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t instanceof B||t instanceof H||t instanceof D||t instanceof w||t instanceof O){var i=t.intersectionWithLine(this,e);return i&&t instanceof B&&(i=i[0]),i}return null},intersectionWithLine:function(t){var e=new E(this.end.x-this.start.x,this.end.y-this.start.y),i=new E(t.end.x-t.start.x,t.end.y-t.start.y),n=e.x*i.y-e.y*i.x,r=new E(t.start.x-this.start.x,t.start.y-this.start.y),o=r.x*i.y-r.y*i.x,s=r.x*e.y-r.y*e.x;if(0===n||o*n<0||s*n<0)return null;if(0<n){if(n<o||n<s)return null}else if(o<n||s<n)return null;return[new E(this.start.x+o*e.x/n,this.start.y+o*e.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Z(this.squaredLength())},midpoint:function(){return new E((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){var e=this.clone();if(!this.isDifferentiable())return e;var i=e.start,n=e.end,r=i.clone().rotate(n,270),o=n.clone().rotate(i,90);return i.move(o,t),n.move(r,t),e},pointAt:function(t){var e=this.start,i=this.end;return t<=0?e.clone():1<=t?i.clone():e.lerp(i,t)},pointAtLength:function(t){var e=this.start,i=this.end,n=!0;t<0&&(n=!1,t=-t);var r=this.length();return r<=t?n?i.clone():e.clone():this.pointAt((n?t:r-t)/r)},pointOffset:function(t){t=new E(t);var e=this.start,i=this.end;return((i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){var e=k(10,t||0);return this.start.x=a(this.start.x*e)/e,this.start.y=a(this.start.y*e)/e,this.end.x=a(this.end.x*e)/e,this.end.y=a(this.end.y*e)/e,this},scale:function(t,e,i){return this.start.scale(t,e,i),this.end.scale(t,e,i),this},setLength:function(t){var e=this.length();if(!e)return this;var i=t/e;return this.scale(i,i,this.start)},squaredLength:function(){var t=this.start.x,e=this.start.y;return(t-=this.end.x)*t+(e-=this.end.y)*e},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,i=this.end,n=this.pointAt(t),r=new B(e,i);return r.translate(n.x-e.x,n.y-e.y),r},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,i=this.end,n=this.pointAtLength(t),r=new B(e,i);return r.translate(n.x-e.x,n.y-e.y),r},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new E(this.end.x-this.start.x,this.end.y-this.start.y)}},B.prototype.intersection=B.prototype.intersect;var O=function(t){if(!(this instanceof O))return new O(t);if("string"==typeof t)return new O.parse(t);var e,i;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(i=(t=t.reduce(function(t,e){return t.concat(e)},[])).length,t[0].isSegment)for(e=0;e<i;e++){var n=t[e];this.appendSegment(n)}else{var r=null;for(e=0;e<i;e++){var o=t[e];if(!(o instanceof B||o instanceof p))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(O.createSegment("M",o.start)),r&&!r.end.equals(o.start)&&this.appendSegment(O.createSegment("M",o.start)),o instanceof B?this.appendSegment(O.createSegment("L",o.end)):o instanceof p&&this.appendSegment(O.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),r=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof B)this.appendSegment(O.createSegment("M",t.start)),this.appendSegment(O.createSegment("L",t.end));else if(t instanceof p)this.appendSegment(O.createSegment("M",t.start)),this.appendSegment(O.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof D))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(i=t.points.length,e=0;e<i;e++){var s=t.points[e];0===e?this.appendSegment(O.createSegment("M",s)):this.appendSegment(O.createSegment("L",s))}}else;};O.parse=function(t){if(!t)return new O;for(var e=new O,i=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),n=i.length,r=0;r<n;r++){var o=i[r].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=O.createSegment.apply(this,o);e.appendSegment(s)}return e},O.createSegment=function(t){var e=arguments;if(!t)throw new Error("Type must be provided.");var i=O.segmentTypes[t];if(!i)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,o=1;o<r;o++)n.push(e[o]);return x(i,n)},O.prototype={appendSegment:function(t){var e,i=this.segments,n=i.length,r=0!==n?i[n-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var o=t.length,s=0;s<o;s++){var a=t[s];e=this.prepareSegment(a,r,null),i.push(e),r=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,r,null),i.push(e)}},bbox:function(){var t,e=this.segments,i=e.length;if(0===i)return null;for(var n=0;n<i;n++){var r=e[n];if(r.isVisible){var o=r.bbox();t=t?t.union(o):o}}if(t)return t;var s=e[i-1];return new H(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,i=new O,n=0;n<e;n++){var r=t[n].clone();i.appendSegment(r)}return i},closestPoint:function(t,e){var i=this.closestPointT(t,e);return i?this.pointAtT(i):null},closestPointLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.closestPointT(t,n);return r?this.lengthAtT(r,n):0},closestPointNormalizedLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.closestPointLength(t,n);if(0===r)return 0;var o=this.length(n);return 0===o?0:r/o},closestPointT:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,l=0;l<n;l++){var c=i[l],g=s[l];if(c.isVisible){var h=c.closestPointT(t,{precision:o,subdivisions:g}),u=c.pointAtT(h),d=new B(u,t).squaredLength();d<a&&(r={segmentIndex:l,value:h},a=d)}}return r||{segmentIndex:n-1,value:1}},closestPointTangent:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,l=0;l<n;l++){var c=i[l],g=s[l];if(c.isDifferentiable()){var h=c.closestPointT(t,{precision:o,subdivisions:g}),u=c.pointAtT(h),d=new B(u,t).squaredLength();d<a&&(r=c.tangentAtT(h),a=d)}}return r||null},containsPoint:function(t,e){var i=this.toPolylines(e);if(!i)return!1;for(var n=i.length,r=0,o=0;o<n;o++){i[o].containsPoint(t)&&r++}return r%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.divideAtLength(r,n)},divideAtLength:function(t,e){var i=this.segments.length;if(0===i)return null;var n=!0;t<0&&(n=!1,t=-t);var r,o,s,a,l,c,g,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):e.segmentSubdivisions,d=0;for(r=0;r<i;r++){var f=n?r:i-1-r;o=this.getSegment(f);var p=u[f],I=o.length({precision:h,subdivisions:p});if(o.isDifferentiable()&&(l=o,c=f,t<=d+I)){a=f,s=o.divideAtLength((n?1:-1)*(t-d),{precision:h,subdivisions:p});break}d+=I}if(!l)return null;s||(a=c,g=n?1:0,s=l.divideAtT(g));var m=this.clone();m.replaceSegment(a,s);var A=a,v=a+1,C=a+2;s[0].isDifferentiable()||(m.removeSegment(A),v-=1,C-=1);var w=m.getSegment(v).start;m.insertSegment(v,O.createSegment("M",w)),C+=1,s[1].isDifferentiable()||(m.removeSegment(C-1),C-=1);var y=C-A-1;for(r=C;r<m.segments.length;r++){var b=this.getSegment(r-y);if("Z"===(o=m.getSegment(r)).type&&!b.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var N=O.createSegment("L",b.end);m.replaceSegment(r,N)}}return[new O(m.segments.slice(0,v)),new O(m.segments.slice(v))]},equals:function(t){if(!t)return!1;var e=this.segments,i=t.segments,n=e.length;if(i.length!==n)return!1;for(var r=0;r<n;r++){var o=e[r],s=i[r];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,i=e.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),i<=t||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,i=e.length,n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=[],o=0;o<i;o++){var s=e[o].getSubdivisions({precision:n});r.push(s)}return r},insertSegment:function(t,e){var i,n=this.segments,r=n.length;if(t<0&&(t=r+t+1),r<t||t<0)throw new Error("Index out of range.");var o=null,s=null;if(0!==r&&(s=1<=t?(o=n[t-1]).nextSegment:n[0]),Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var a=e.length,l=0;l<a;l++){var c=e[l];i=this.prepareSegment(c,o,s),n.splice(t+l,0,i),o=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,s),n.splice(t,0,i)}},intersectionWithLine:function(t,e){var i=null,n=this.toPolylines(e);if(!n)return null;for(var r=0,o=n.length;r<o;r++){var s=n[r],a=t.intersect(s);a&&(i||(i=[]),Array.isArray(a)?Array.prototype.push.apply(i,a):i.push(a))}return i},isDifferentiable:function(){for(var t=this.segments,e=t.length,i=0;i<e;i++){if(t[i].isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,i=e.length;if(0===i)return 0;for(var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=0,s=0;s<i;s++){var a=e[s],l=r[s];o+=a.length({subdivisions:l})}return o},lengthAtT:function(t,e){var i=this.segments,n=i.length;if(0===n)return 0;var r=t.segmentIndex;if(r<0)return 0;var o=t.value;n<=r?(r=n-1,o=1):o<0?o=0:1<o&&(o=1);for(var s,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,c=0,g=0;g<r;g++){var h=i[g];s=l[g],c+=h.length({precisison:a,subdivisions:s})}return h=i[r],s=l[r],c+=h.lengthAtT(o,{precisison:a,subdivisions:s})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.pointAtLength(r,n)},pointAtLength:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;if(0===t)return this.start.clone();var r=!0;t<0&&(r=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,l=0,c=0;c<n;c++){var g=r?c:n-1-c,h=i[g],u=a[g],d=h.length({precision:s,subdivisions:u});if(h.isVisible){if(t<=l+d)return h.pointAtLength((r?1:-1)*(t-l),{precision:s,subdivisions:u});o=h}l+=d}return o?r?o.end:o.start:i[n-1].end.clone()},pointAtT:function(t){var e=this.segments,i=e.length;if(0===i)return null;var n=t.segmentIndex;if(n<0)return e[0].pointAtT(0);if(i<=n)return e[i-1].pointAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[n].pointAtT(r)},PRECISION:3,prepareSegment:function(t,e,i){t.previousSegment=e,t.nextSegment=i,e&&(e.nextSegment=t),i&&(i.previousSegment=t);var n=t;return t.isSubpathStart&&(t.subpathStartSegment=t,n=i),n&&this.updateSubpathStartSegment(n),t},removeSegment:function(t){var e=this.segments,i=e.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),i<=t||t<0)throw new Error("Index out of range.");var n=e.splice(t,1)[0],r=n.previousSegment,o=n.nextSegment;r&&(r.nextSegment=o),o&&(o.previousSegment=r),n.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var i,n=this.segments,r=n.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),r<=t||t<0)throw new Error("Index out of range.");var o=n[t],s=o.previousSegment,a=o.nextSegment,l=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var c=e.length,g=0;g<c;g++){var h=e[g];i=this.prepareSegment(h,s,a),n.splice(t+g,0,i),s=i,l&&i.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,a),n.splice(t,1,i),l&&i.isSubpathStart&&(l=!1)}l&&a&&this.updateSubpathStartSegment(a)},scale:function(t,e,i){for(var n=this.segments,r=n.length,o=0;o<r;o++){n[o].scale(t,e,i)}return this},segmentAt:function(t,e){var i=this.segmentIndexAt(t,e);return i?this.getSegment(i):null},segmentAtLength:function(t,e){var i=this.segmentIndexAtLength(t,e);return i?this.getSegment(i):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.segmentIndexAtLength(r,n)},segmentIndexAtLength:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=null,l=0,c=0;c<n;c++){var g=r?c:n-1-c,h=i[g],u=s[g],d=h.length({precision:o,subdivisions:u});if(h.isVisible){if(t<=l+d)return g;a=g}l+=d}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.tangentAtLength(r,n)},tangentAtLength:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,l=0,c=0;c<n;c++){var g=r?c:n-1-c,h=i[g],u=a[g],d=h.length({precision:s,subdivisions:u});if(h.isDifferentiable()){if(t<=l+d)return h.tangentAtLength((r?1:-1)*(t-l),{precision:s,subdivisions:u});o=h}l+=d}if(o){var f=r?1:0;return o.tangentAtT(f)}return null},tangentAtT:function(t){var e=this.segments,i=e.length;if(0===i)return null;var n=t.segmentIndex;if(n<0)return e[0].tangentAtT(0);if(i<=n)return e[i-1].tangentAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[n].tangentAtT(r)},toPoints:function(t){var e=this.segments,i=e.length;if(0===i)return null;for(var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=[],s=[],a=0;a<i;a++){var l=e[a];if(l.isVisible){var c=r[a];if(0<c.length){var g=c.map(function(t){return t.start});Array.prototype.push.apply(s,g)}else s.push(l.start)}else 0<s.length&&(s.push(e[a-1].end),o.push(s),s=[])}return 0<s.length&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],i=this.toPoints(t);if(!i)return null;for(var n=0,r=i.length;n<r;n++)e.push(new D(i[n]));return e},toString:function(){for(var t=this.segments,e=t.length,i="",n=0;n<e;n++){i+=t[n].serialize()+" "}return i.trim()},translate:function(t,e){for(var i=this.segments,n=i.length,r=0;r<n;r++){i[r].translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,t=(e=t).nextSegment}},Object.defineProperty(O.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(n.isVisible)return n.start}return t[e-1].end}}),Object.defineProperty(O.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var i=e-1;0<=i;i--){var n=t[i];if(n.isVisible)return n.end}return t[e-1].end}});var E=function(t,e){if(!(this instanceof E))return new E(t,e);if("string"==typeof t){var i=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(i[0]),e=parseFloat(i[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};E.fromPolar=function(t,e,i){i=i&&new E(i)||new E(0,0);var n=L(t*g(e)),r=L(t*h(e)),o=C(A(e));return o<90?r=-r:o<180?(n=-n,r=-r):o<270&&(n=-n),new E(i.x+n,i.y+r)},E.random=function(t,e,i,n){return new E(m(t,e),m(i,n))},E.prototype={chooseClosest:function(t){var e=t.length;if(1===e)return new E(t[0]);for(var i=null,n=1/0,r=0;r<e;r++){var o=new E(t[r]),s=this.squaredDistance(o);s<n&&(i=o,n=s)}return i},adhereToRect:function(t){return t.containsPoint(this)||(this.x=P(G(this.x,t.x),t.x+t.width),this.y=P(G(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var i=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return i<0&&(i+=360),i},bearing:function(t){return new B(this,t).bearing()},changeInAngle:function(t,e,i){return this.clone().offset(-t,-e).theta(i)-this.theta(i)},clone:function(){return new E(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new E(this.x-(t||0),this.y-(e||0))},distance:function(t){return new B(this,t).length()},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var i=this.x,n=this.y;return new E((1-e)*i+e*t.x,(1-e)*n+e*t.y)},magnitude:function(){return Z(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return L(t.x-this.x)+L(t.y-this.y)},move:function(t,e){var i=y(new E(t).theta(this));return this.offset(g(i)*e,-h(i)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new E(t).move(this,this.distance(t))},rotate:function(t,e){t=t||new E(0,0),e=y(C(-e));var i=g(e),n=h(e),r=i*(this.x-t.x)-n*(this.y-t.y)+t.x,o=n*(this.x-t.x)+i*(this.y-t.y)+t.y;return this.x=r,this.y=o,this},round:function(t){var e=k(10,t||0);return this.x=a(this.x*e)/e,this.y=a(this.y*e)/e,this},scale:function(t,e,i){return i=i&&new E(i)||new E(0,0),this.x=i.x+t*(this.x-i.x),this.y=i.y+e*(this.y-i.y),this},snapToGrid:function(t,e){return this.x=I(this.x,t),this.y=I(this.y,e||t),this},squaredDistance:function(t){return new B(this,t).squaredLength()},theta:function(t){var e=-((t=new E(t)).y-this.y),i=t.x-this.x,n=u(e,i);return n<0&&(n=2*f+n),180*n/f},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new E(t)||new E(0,0);var e=this.x,i=this.y;return this.x=Z((e-t.x)*(e-t.x)+(i-t.y)*(i-t.y)),this.y=y(t.theta(new E(e,i))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new E(0,0).angleBetween(this,t)}},E.prototype.translate=E.prototype.offset;var D=function(t){return this instanceof D?"string"==typeof t?new D.parse(t):void(this.points=Array.isArray(t)?t.map(E):[]):new D(t)};D.parse=function(t){if(""===(t=t.trim()))return new D;for(var e=[],i=t.split(/\s*,\s*|\s+/),n=i.length,r=0;r<n;r+=2)e.push({x:+i[r],y:+i[r+1]});return new D(e)},D.prototype={bbox:function(){var t=1/0,e=-1/0,i=1/0,n=-1/0,r=this.points,o=r.length;if(0===o)return null;for(var s=0;s<o;s++){var a=r[s],l=a.x,c=a.y;l<t&&(t=l),e<l&&(e=l),c<i&&(i=c),n<c&&(n=c)}return new H(t,i,e-t,n-i)},clone:function(){var t=this.points,e=t.length;if(0===e)return new D;for(var i=[],n=0;n<e;n++){var r=t[n].clone();i.push(r)}return new D(i)},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,i=this.points,n=i.length;if(0===n)return 0;if(1===n)return 0;for(var r=1/0,o=0,s=n-1,a=0;a<s;a++){var l=new B(i[a],i[a+1]),c=l.length(),g=l.closestPointNormalizedLength(t),h=l.pointAt(g).squaredDistance(t);h<r&&(r=h,e=o+g*c),o+=c}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var i=this.length();return 0===i?0:e/i},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,i=e.length;if(0===i)return!1;for(var n=t.x,r=t.y,o=i-1,s=0,a=0;s<i;s++){var l=e[o],c=e[s];if(t.equals(l))return!0;var g=new B(l,c);if(g.containsPoint(t))return!0;if(r<=l.y&&r>c.y||r>l.y&&r<=c.y){var h=l.x-n>c.x-n?l.x-n:c.x-n;if(0<=h){var u=new E(n+h,r),d=new B(t,u);g.intersect(d)&&a++}}o=s}return a%2==1},convexHull:function(){var t,e,i,n=this.points,r=n.length;if(0===r)return new D;for(t=0;t<r;t++)void 0===i?i=n[t]:n[t].y<i.y?i=n[t]:n[t].y===i.y&&n[t].x>i.x&&(i=n[t]);var o=[];for(t=0;t<r;t++){var s=i.theta(n[t]);0===s&&(s=360);var a=[n[t],t,s];o.push(a)}if(o.sort(function(t,e){var i=t[2]-e[2];return 0===i&&(i=e[1]-t[1]),i}),2<o.length){var l=o[o.length-1];o.unshift(l)}for(var c,g,h,u,d,f,p,I={},m=[];0!==o.length;)if(g=(c=o.pop())[0],!I.hasOwnProperty(c[0]+"@@"+c[1]))for(var A=!1;!A;)if(m.length<2)m.push(c),A=!0;else{u=(h=m.pop())[0];var v=(f=(d=m.pop())[0]).cross(u,g);if(v<0)m.push(d),m.push(h),m.push(c),A=!0;else if(0===v){var C=u.angleBetween(f,g);L(C-180)<1e-10?(I[h[0]+"@@"+h[1]]=u,m.push(d)):u.equals(g)||f.equals(u)?(I[h[0]+"@@"+h[1]]=u,m.push(d)):L((C+1)%360-1)<1e-10&&(m.push(d),o.push(h))}else I[h[0]+"@@"+h[1]]=u,m.push(d)}2<m.length&&m.pop();var w=-1;for(e=m.length,t=0;t<e;t++){var y=m[t][1];(void 0===p||y<p)&&(p=y,w=t)}var b=[];if(0<w){var N=m.slice(w),M=m.slice(0,w);b=N.concat(M)}else b=m;var x=[];for(e=b.length,t=0;t<e;t++)x.push(b[t][0]);return new D(x)},equals:function(t){if(!t)return!1;var e=this.points,i=t.points,n=e.length;if(i.length!==n)return!1;for(var r=0;r<n;r++){var o=e[r],s=t.points[r];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new B(t),i=[],n=this.points,r=0,o=n.length-1;r<o;r++){var s=n[r],a=n[r+1],l=new B(s,a),c=e.intersectionWithLine(l);c&&i.push(c[0])}return 0<i.length?i:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var i=e-1,n=0;n<i;n++){var r=t[n],o=t[n+1];if(new B(r,o).isDifferentiable())return!0}return!1},length:function(){var t=this.points,e=t.length;if(0===e)return 0;for(var i=0,n=e-1,r=0;r<n;r++)i+=t[r].distance(t[r+1]);return i},pointAt:function(t){var e=this.points,i=e.length;if(0===i)return null;if(1===i)return e[0].clone();if(t<=0)return e[0].clone();if(1<=t)return e[i-1].clone();var n=this.length()*t;return this.pointAtLength(n)},pointAtLength:function(t){var e=this.points,i=e.length;if(0===i)return null;if(1===i)return e[0].clone();var n=!0;t<0&&(n=!1,t=-t);for(var r=0,o=i-1,s=0;s<o;s++){var a=n?s:o-1-s,l=e[a],c=e[a+1],g=new B(l,c),h=l.distance(c);if(t<=r+h)return g.pointAtLength((n?1:-1)*(t-r));r+=h}return(n?e[i-1]:e[0]).clone()},scale:function(t,e,i){var n=this.points,r=n.length;if(0===r)return this;for(var o=0;o<r;o++)n[o].scale(t,e,i);return this},simplify:function(t){void 0===t&&(t={});var e=this.points;if(e.length<3)return this;for(var i=t.threshold||0,n=0;e[n+2];){var r=n+1,o=n+2,s=e[n],a=e[r],l=e[o];new B(s,l).closestPoint(a).distance(a)<=i?e.splice(r,1):n+=1}return this},tangentAt:function(t){var e=this.points.length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),1<t&&(t=1);var i=this.length()*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.points,i=e.length;if(0===i)return null;if(1===i)return null;var n,r=!0;t<0&&(r=!1,t=-t);for(var o=0,s=i-1,a=0;a<s;a++){var l=r?a:s-1-a,c=e[l],g=e[l+1],h=new B(c,g),u=c.distance(g);if(h.isDifferentiable()){if(t<=o+u)return h.tangentAtLength((r?1:-1)*(t-o));n=h}o+=u}if(n){var d=r?1:0;return n.tangentAt(d)}return null},toString:function(){return this.points+""},translate:function(t,e){var i=this.points,n=i.length;if(0===n)return this;for(var r=0;r<n;r++)i[r].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var i="",n=0;n<e;n++){var r=t[n];i+=r.x+","+r.y+" "}return i.trim()}},Object.defineProperty(D.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(D.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});var H=function(t,e,i,n){if(!(this instanceof H))return new H(t,e,i,n);Object(t)===t&&(e=t.y,i=t.width,n=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===i?0:i,this.height=void 0===n?0:n};H.fromEllipse=function(t){return t=new w(t),new H(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},H.prototype={bbox:function(t){if(!t)return this.clone();var e=y(t),i=L(h(e)),n=L(g(e)),r=this.width*n+this.height*i,o=this.width*i+this.height*n;return new H(this.x+(this.width-r)/2,this.y+(this.height-o)/2,r,o)},bottomLeft:function(){return new E(this.x,this.y+this.height)},bottomLine:function(){return new B(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new E(this.x+this.width/2,this.y+this.height)},center:function(){return new E(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new H(this)},containsPoint:function(t){return(t=new E(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new H(this).normalize(),i=new H(t).normalize(),n=e.width,r=e.height,o=i.width,s=i.height;if(!(n&&r&&o&&s))return!1;var a=e.x,l=e.y,c=i.x,g=i.y;return o+=c,n+=a,s+=g,r+=l,a<=c&&o<=n&&l<=g&&s<=r},corner:function(){return new E(this.x+this.width,this.y+this.height)},equals:function(t){var e=new H(this).normalize(),i=new H(t).normalize();return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),i=this.corner(),n=t.origin(),r=t.corner();if(r.x<=e.x||r.y<=e.y||n.x>=i.x||n.y>=i.y)return null;var o=G(e.x,n.x),s=G(e.y,n.y);return new H(o,s,P(i.x,r.x)-o,P(i.y,r.y)-s)},intersectionWithLine:function(t){var e,i,n=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],r=[],o=[],s=n.length;for(i=0;i<s;i++)null!==(e=t.intersect(n[i]))&&o.indexOf(e.toString())<0&&(r.push(e),o.push(e.toString()));return 0<r.length?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new E(t);var i,n=new E(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(n,e);for(var r=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new B(n,t),s=r.length-1;0<=s;--s){var a=r[s].intersection(o);if(null!==a){i=a;break}}return i&&e&&i.rotate(n,-e),i},leftLine:function(){return new B(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new E(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var i,n,r,o,s,a,l,c;t=new H(t),e||(e=t.center());var g=e.x,h=e.y;i=n=r=o=s=a=l=c=1/0;var u=t.topLeft();u.x<g&&(i=(this.x-g)/(u.x-g)),u.y<h&&(s=(this.y-h)/(u.y-h));var d=t.bottomRight();d.x>g&&(n=(this.x+this.width-g)/(d.x-g)),d.y>h&&(a=(this.y+this.height-h)/(d.y-h));var f=t.topRight();f.x>g&&(r=(this.x+this.width-g)/(f.x-g)),f.y<h&&(l=(this.y-h)/(f.y-h));var p=t.bottomLeft();return p.x<g&&(o=(this.x-g)/(p.x-g)),p.y>h&&(c=(this.y+this.height-h)/(p.y-h)),{sx:P(i,n,r,o),sy:P(s,a,l,c)}},maxRectUniformScaleToFit:function(t,e){var i=this.maxRectScaleToFit(t,e);return P(i.sx,i.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,i=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,n=-this.height),this.x=t,this.y=e,this.width=i,this.height=n,this},offset:function(t,e){return E.prototype.offset.call(this,t,e)},origin:function(){return new E(this.x,this.y)},pointNearestToPoint:function(t){if(t=new E(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new E(this.x+this.width,t.y);case"left":return new E(this.x,t.y);case"bottom":return new E(t.x,this.y+this.height);case"top":return new E(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new B(this.topRight(),this.bottomRight())},rightMiddle:function(){return new E(this.x+this.width,this.y+this.height/2)},round:function(t){var e=k(10,t||0);return this.x=a(this.x*e)/e,this.y=a(this.y*e)/e,this.width=a(this.width*e)/e,this.height=a(this.height*e)/e,this},scale:function(t,e,i){return i=this.origin().scale(t,e,i),this.x=i.x,this.y=i.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new E(t)).x-this.x,i=this.x+this.width-t.x,n=t.y-this.y,r=e,o="left";return i<r&&(r=i,o="right"),n<r&&(r=n,o="top"),this.y+this.height-t.y<r&&(o="bottom"),o},snapToGrid:function(t,e){var i=this.origin().snapToGrid(t,e),n=this.corner().snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=n.x-i.x,this.height=n.y-i.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new B(this.topLeft(),this.topRight())},topMiddle:function(){return new E(this.x+this.width/2,this.y)},topRight:function(){return new E(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){var e=new H(t),i=this.x,n=this.y,r=this.width,o=this.height,s=e.x,a=e.y,l=e.width,c=e.height,g=e.x=P(i,s),h=e.y=P(n,a);return e.width=G(i+r,s+l)-g,e.height=G(n+o,a+c)-h,e}},H.prototype.bottomRight=H.prototype.corner,H.prototype.topLeft=H.prototype.origin,H.prototype.translate=H.prototype.offset;var C=function(t){return t%360+(t<0?360:0)},I=function(t,e){return e*a(t/e)},A=function(t){return 180*t/f%360},y=function(t,e){return(t=(e=e||!1)?t:t%360)*f/180},m=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){var i=t;t=e,e=i}return d(o.random()*(e-t+1)+t)},v=w,b=B,N=E,M=H;function x(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}function z(t){var e,i,n=arguments,r=[];for(i=arguments.length,e=1;e<i;e++)r.push(n[e]);if(!t)throw new Error("Missing a parent object.");var o=Object.create(t);for(i=r.length,e=0;e<i;e++){var s,a,l=r[e];for(a in l)l.hasOwnProperty(a)&&(delete o[a],s=Object.getOwnPropertyDescriptor(l,a),Object.defineProperty(o,a,s))}return o}var T={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return 1<=t?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(T,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(T,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(T,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var j=function(){for(var t,e,i=arguments,n=[],r=arguments.length,o=0;o<r;o++)n.push(i[o]);if(!(this instanceof j))return x(j,n);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof B){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new E(+n[0],+n[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=2)s=n.slice(o,o+2),t.push(x(j,s));return t}if(1===r)return this.end=new E(n[0]),this;for(t=[],o=0;o<r;o+=1)e=n[o],t.push(new j(e));return t},Y={clone:function(){return new j(this.end)},divideAt:function(t){var e=new B(this.start,this.end).divideAt(t);return[new j(e[0]),new j(e[1])]},divideAtLength:function(t){var e=new B(this.start,this.end).divideAtLength(t);return[new j(e[0]),new j(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},scale:function(t,e,i){return this.end.scale(t,e,i),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Y,"type",{configurable:!0,enumerable:!0,value:"L"}),j.prototype=z(T,B.prototype,Y);var R=function(){for(var t,e,i=arguments,n=[],r=arguments.length,o=0;o<r;o++)n.push(i[o]);if(!(this instanceof R))return x(R,n);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(n[0]instanceof p){if(1===r)return this.controlPoint1=n[0].controlPoint1.clone(),this.controlPoint2=n[0].controlPoint2.clone(),this.end=n[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(6===r)return this.controlPoint1=new E(+n[0],+n[1]),this.controlPoint2=new E(+n[2],+n[3]),this.end=new E(+n[4],+n[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=6)s=n.slice(o,o+6),t.push(x(R,s));return t}if(3===r)return this.controlPoint1=new E(n[0]),this.controlPoint2=new E(n[1]),this.end=new E(n[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],o=0;o<r;o+=3)e=n.slice(o,o+3),t.push(x(R,e));return t},W={clone:function(){return new R(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var i=new p(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new R(i[0]),new R(i[1])]},divideAtLength:function(t,e){var i=new p(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new R(i[0]),new R(i[1])]},divideAtT:function(t){var e=new p(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new R(e[0]),new R(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,i=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(n))},scale:function(t,e,i){return this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,i=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+i.x+" "+i.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(W,"type",{configurable:!0,enumerable:!0,value:"C"}),R.prototype=z(T,p.prototype,W);var U=function(){for(var t,e,i=arguments,n=[],r=arguments.length,o=0;o<r;o++)n.push(i[o]);if(!(this instanceof U))return x(U,n);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof B){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(n[0]instanceof p){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new E(+n[0],+n[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=2)s=n.slice(o,o+2),0===o?t.push(x(U,s)):t.push(x(j,s));return t}if(1===r)return this.end=new E(n[0]),this;for(t=[],o=0;o<r;o+=1)e=n[o],0===o?t.push(new U(e)):t.push(new j(e));return t},X={bbox:function(){return null},clone:function(){return new U(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},scale:function(t,e,i){return this.end.scale(t,e,i),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(X,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(X,"type",{configurable:!0,enumerable:!0,value:"M"}),U.prototype=z(T,X);var F=function(){for(var t=arguments,e=[],i=arguments.length,n=0;n<i;n++)e.push(t[n]);if(!(this instanceof F))return x(F,e);if(0<i)throw new Error("Closepath constructor expects no arguments.");return this},V={clone:function(){return new F},divideAt:function(t){var e=new B(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new j(e[0]):this.clone(),new j(e[1])]},divideAtLength:function(t){var e=new B(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new j(e[0]):this.clone(),new j(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(V,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(V,"type",{configurable:!0,enumerable:!0,value:"Z"}),F.prototype=z(T,B.prototype,V);var J=O.segmentTypes={L:j,C:R,M:U,Z:F,z:F};O.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(J).join("")+",.]*$"),O.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};var _,Q,K={bezier:t,Curve:p,Ellipse:w,Line:B,Path:O,Point:E,Polyline:D,Rect:H,scale:{linear:function(t,e,i){var n=t[1]-t[0],r=e[1]-e[0];return(i-t[0])/n*r+e[0]||0}},normalizeAngle:C,snapToGrid:I,toDeg:A,toRad:y,random:m,ellipse:v,line:b,point:N,rect:M},q=function(){if(!("object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))))return function(){throw new Error("SVG is required to use Vectorizer.")};var z={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},t=Math,p=t.PI,o=t.atan2,s=t.sqrt,h=t.min,u=t.max,I=t.cos,m=t.sin,T=function(t,e,i){if(!(this instanceof T))return T.apply(Object.create(T.prototype),arguments);if(t){if(T.isV(t)&&(t=t.node),e=e||{},T.isString(t)){if("svg"===t.toLowerCase())t=T.createSvgDocument();else if("<"===t[0]){var n=T.createSvgDocument(t);if(1<n.childNodes.length){var r,o,s=[];for(r=0,o=n.childNodes.length;r<o;r++){var a=n.childNodes[r];s.push(new T(document.importNode(a,!0)))}return s}t=document.importNode(n.firstChild,!0)}else t=document.createElementNS(z.svg,t);T.ensureId(t)}return this.node=t,this.setAttributes(e),i&&this.append(i),this}},e=T.prototype;function j(t,e,i){i||(i={});for(var n=i.includeAnnotationIndices,r=i.eol,o=i.lineHeight,s=i.baseSize,a=0,l={},c=e.length-1,g=0;g<=c;g++){var h=e[g],u=null;if(T.isObject(h)){var d=h.attrs,f=T("tspan",d),p=f.node,I=h.t;r&&g===c&&(I+=r),p.textContent=I;var m=d.class;m&&f.addClass(m),n&&f.attr("annotations",h.annotations),void 0===(u=parseFloat(d["font-size"]))&&(u=s),u&&a<u&&(a=u)}else r&&g===c&&(h+=r),p=document.createTextNode(h||" "),s&&a<s&&(a=s);t.appendChild(p)}return a&&(l.maxFontSize=a),o?l.lineHeight=o:a&&(l.lineHeight=1.2*a),l}Object.defineProperty(e,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),e.getTransformToElement=function(t){var e=this.node;if(T.isSVGGraphicsElement(t)&&T.isSVGGraphicsElement(e)){var i=T.toNode(t).getScreenCTM(),n=e.getScreenCTM();if(i&&n)return i.inverse().multiply(n)}return T.createSVGMatrix()},e.transform=function(t,e){var i=this.node;if(T.isUndefined(t))return T.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",T.matrixToTransformString(t));var n=T.createSVGTransform(t);return i.transform.baseVal.appendItem(n),this},e.translate=function(t,e,i){i=i||{},e=e||0;var n=this.attr("transform")||"",r=T.parseTransformString(n);if(n=r.value,T.isUndefined(t))return r.translate;n=n.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(i.absolute?t:r.translate.tx+t)+","+(i.absolute?e:r.translate.ty+e)+")";return this.attr("transform",(o+" "+n).trim()),this},e.rotate=function(t,e,i,n){n=n||{};var r=this.attr("transform")||"",o=T.parseTransformString(r);if(r=o.value,T.isUndefined(t))return o.rotate;r=r.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s="rotate("+(n.absolute?t:o.rotate.angle+t)+(void 0!==e&&void 0!==i?","+e+","+i:"")+")";return this.attr("transform",(r+" "+s).trim()),this},e.scale=function(t,e){e=T.isUndefined(e)?t:e;var i=this.attr("transform")||"",n=T.parseTransformString(i);if(i=n.value,T.isUndefined(t))return n.scale;i=i.replace(/scale\([^)]*\)/g,"").trim();var r="scale("+t+","+e+")";return this.attr("transform",(i+" "+r).trim()),this},e.bbox=function(t,e){var i,n=this.node,r=n.ownerSVGElement;if(!r)return new H(0,0,0,0);try{i=n.getBBox()}catch(t){i={x:n.clientLeft,y:n.clientTop,width:n.clientWidth,height:n.clientHeight}}if(t)return new H(i);var o=this.getTransformToElement(e||r);return T.transformRect(i,o)},e.getBBox=function(t){var e,i={},n=this.node;if(!n.ownerSVGElement||!T.isSVGGraphicsElement(n))return new H(0,0,0,0);if(t&&(t.target&&(i.target=T.toNode(t.target)),t.recursive&&(i.recursive=t.recursive)),i.recursive){var r=this.children(),o=r.length;if(0===o)return this.getBBox({target:i.target,recursive:!1});i.target||(i.target=this);for(var s=0;s<o;s++){var a,l=r[s];a=0===l.children().length?l.getBBox({target:i.target,recursive:!1}):l.getBBox({target:i.target,recursive:!0}),e=e?e.union(a):a}return e}try{e=n.getBBox()}catch(t){e={x:n.clientLeft,y:n.clientTop,width:n.clientWidth,height:n.clientHeight}}if(i.target){var c=this.getTransformToElement(i.target);return T.transformRect(e,c)}return new H(e)};var L=/em$/;function Z(t,e){var i=parseFloat(t);return L.test(t)?i*e:i}e.text=function(t,e){if(t&&"string"!=typeof t)throw new Error("Vectorizer: text() expects the first argument to be a string.");t=T.sanitizeText(t),e||(e={});var i=e.displayEmpty,n=e.eol,r=e.textPath,o=e.textVerticalAnchor,s="middle"===o||"bottom"===o||"top"===o,a=e.x;void 0===a&&(a=this.attr("x")||0);var l=e.includeAnnotationIndices,c=e.annotations;c&&!T.isArray(c)&&(c=[c]);var g=e.lineHeight,h="auto"===g,u=h?"1.5em":g||"1em";this.empty(),this.attr({"xml:space":"preserve",display:t||i?null:"none"});var d=parseFloat(this.attr("font-size"));d||(d=16,(s||c)&&this.attr("font-size",d));var f,p=document;f=r?("string"==typeof r&&(r={d:r}),function(t,e){t||(t={});var i=T("textPath"),n=t.d;if(n&&void 0===t["xlink:href"]){var r=T("path").attr("d",n).appendTo(e.defs());i.attr("xlink:href","#"+r.id)}return T.isObject(t)&&i.attr(t),i.node}(r,this)):p.createDocumentFragment();for(var I,m=0,A=t.split("\n"),v=[],C=0,w=A.length-1;C<=w;C++){var y,b=u,N="v-line",M=p.createElementNS(z.svg,"tspan"),x=A[C];if(x)if(c){var S=(y=j(M,T.annotateString(x,c,{offset:-m,includeAnnotationIndices:l}),{includeAnnotationIndices:l,eol:C!==w&&n,lineHeight:h?null:u,baseSize:d})).lineHeight;S&&h&&0!==C&&(b=S),0===C&&(I=.8*y.maxFontSize)}else n&&C!==w&&(x+=n),M.textContent=x;else{M.textContent="-",N+=" v-empty-line";var k=M.style;k.fillOpacity=0,k.strokeOpacity=0,c&&(y={})}y&&v.push(y),0<C&&M.setAttribute("dy",b),(0<C||r)&&M.setAttribute("x",a),M.className.baseVal=N,f.appendChild(M),m+=x.length+1}if(s)if(c)b=function(t,e,i,n){if(!Array.isArray(e))return 0;var r=e.length;if(!r)return 0;for(var o=e[0],s=Z(o.maxFontSize,i)||i,a=0,l=Z(n,i),c=1;c<r;c++)a+=Z((o=e[c]).lineHeight,i)||l;var g,h=Z(o.maxFontSize,i)||i;switch(t){case"middle":g=s/2-.15*h-a/2;break;case"bottom":g=-.25*h-a;break;default:case"top":g=.8*s}return g}(o,v,d,u);else if("top"===o)b="0.8em";else{var D;switch(0<w?(D=parseFloat(u)||1,D*=w,L.test(u)||(D/=d)):D=0,o){case"middle":b=.3-D/2+"em";break;case"bottom":b=-D-.3+"em"}}else 0===o?b="0em":o?b=o:(b=0,null===this.attr("y")&&this.attr("y",I||"0.8em"));return f.firstChild.setAttribute("dy",b),this.append(f),this},e.removeAttr=function(t){var e=T.qualifyAttr(t),i=this.node;return e.ns?i.hasAttributeNS(e.ns,e.local)&&i.removeAttributeNS(e.ns,e.local):i.hasAttribute(t)&&i.removeAttribute(t),this},e.attr=function(t,e){if(T.isUndefined(t)){for(var i=this.node.attributes,n={},r=0;r<i.length;r++)n[i[r].name]=i[r].value;return n}if(T.isString(t)&&T.isUndefined(e))return this.node.getAttribute(t);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,e);return this},e.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",T.normalizePathData(this.attr("d"))),this},e.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},e.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},e.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},e.append=function(t){T.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++)this.node.appendChild(T.toNode(t[e]));return this},e.prepend=function(t){var e=this.node.firstChild;return e?T(e).before(t):this.append(t)},e.before=function(t){var e=this.node,i=e.parentNode;if(i){T.isArray(t)||(t=[t]);for(var n=0,r=t.length;n<r;n++)i.insertBefore(T.toNode(t[n]),e)}return this},e.appendTo=function(t){return T.toNode(t).appendChild(this.node),this},e.svg=function(){return this.node instanceof window.SVGSVGElement?this:T(this.node.ownerSVGElement)},e.tagName=function(){return this.node.tagName.toUpperCase()},e.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?T(e):T("defs").appendTo(t)},e.clone=function(){var t=T(this.node.cloneNode(!0));return t.node.id=T.uniqueId(),t},e.findOne=function(t){var e=this.node.querySelector(t);return e?T(e):void 0},e.find=function(t){var e=[],i=this.node.querySelectorAll(t);if(i)for(var n=0;n<i.length;n++)e.push(T(i[n]));return e},e.children=function(){for(var t=this.node.childNodes,e=[],i=0;i<t.length;i++){1===t[i].nodeType&&e.push(T(t[i]))}return e},e.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},e.findParentByClass=function(t,e){for(var i=this.node.ownerSVGElement,n=this.node.parentNode;n&&n!==e&&n!==i;){var r=T(n);if(r.hasClass(t))return r;n=n.parentNode}return null},e.contains=function(t){var e=this.node,i=T.toNode(t),n=i&&i.parentNode;return e===n||!!(n&&1===n.nodeType&&16&e.compareDocumentPosition(n))},e.toLocalPoint=function(t,e){var i=this.svg().node,n=i.createSVGPoint();n.x=t,n.y=e;try{var r=n.matrixTransform(i.getScreenCTM().inverse()),o=this.getTransformToElement(i).inverse()}catch(t){return n}return r.matrixTransform(o)},e.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},e.translateAndAutoOrient=function(t,e,i){t=new E(t),e=new E(e),i||(i=this.svg());var n=this.scale();this.attr("transform","");var r=this.getBBox({target:i}).scale(n.sx,n.sy),o=T.createSVGTransform();o.setTranslate(-r.x-r.width/2,-r.y-r.height/2);var s=T.createSVGTransform(),a=t.angleBetween(e,t.clone().offset(1,0));a&&s.setRotate(a,0,0);var l=T.createSVGTransform(),c=t.clone().move(e,r.width/2);l.setTranslate(2*t.x-c.x,2*t.y-c.y);var g=this.getTransformToElement(i),h=T.createSVGTransform();return h.setMatrix(l.matrix.multiply(s.matrix.multiply(o.matrix.multiply(g.scale(n.sx,n.sy))))),this.attr("transform",T.matrixToTransformString(h.matrix)),this},e.animateAlongPath=function(t,e){e=T.toNode(e);var i=T.ensureId(e),n=T("animateMotion",t),r=T("mpath",{"xlink:href":"#"+i});n.append(r),this.append(n);try{n.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=n.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),l=0,c=a.length;l<c;l++){var g=a[l],h=new Animator(o,g,l);animators.push(h),(o.animators[l]=h).register()}}}return this},e.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},e.addClass=function(t){if(t&&!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},e.removeClass=function(t){if(t&&this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},e.toggleClass=function(t,e){return(T.isUndefined(e)?this.hasClass(t):!e)?this.removeClass(t):this.addClass(t),this},e.sample=function(t){t=t||1;for(var e,i=this.node,n=i.getTotalLength(),r=[],o=0;o<n;)e=i.getPointAtLength(o),r.push({x:e.x,y:e.y,distance:o}),o+=t;return r},e.convertToPath=function(){var t=T("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},e.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return T.convertLineToPathData(this.node);case"POLYGON":return T.convertPolygonToPathData(this.node);case"POLYLINE":return T.convertPolylineToPathData(this.node);case"ELLIPSE":return T.convertEllipseToPathData(this.node);case"CIRCLE":return T.convertCircleToPathData(this.node);case"RECT":return T.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},T.prototype.toGeometryShape=function(){var t,e,i,n,r,o,s,a,l,c,g,h,u,d,f;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,i=parseFloat(this.attr("width"))||0,n=parseFloat(this.attr("height"))||0,new H(t,e,i,n);case"CIRCLE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new w({x:r,y:o},s,s);case"ELLIPSE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,l=parseFloat(this.attr("ry"))||0,new w({x:r,y:o},a,l);case"POLYLINE":return c=T.getPointsFromSvgNode(this),new D(c);case"POLYGON":return 1<(c=T.getPointsFromSvgNode(this)).length&&c.push(c[0]),new D(c);case"PATH":return g=this.attr("d"),O.isDataSupported(g)||(g=T.normalizePathData(g)),new O(g);case"LINE":return h=parseFloat(this.attr("x1"))||0,d=parseFloat(this.attr("y1"))||0,u=parseFloat(this.attr("x2"))||0,f=parseFloat(this.attr("y2"))||0,new B({x:h,y:d},{x:u,y:f})}return this.getBBox()},e.findIntersection=function(t,e){var i=this.svg().node;e=e||i;var n=this.getBBox({target:e}),r=n.center();if(n.intersectionWithLineFromCenterToPoint(t)){var o,s=this.tagName();if("RECT"===s){var a=new H(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),l=this.getTransformToElement(e),c=T.decomposeMatrix(l),g=i.createSVGTransform();g.setRotate(-c.rotation,r.x,r.y);var h=T.transformRect(a,g.matrix.multiply(l));o=new H(h).intersectionWithLineFromCenterToPoint(t,c.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var u,d,f,p,I,m=("PATH"===s?this:this.convertToPath()).sample(),A=1/0,v=[];for(u=0;u<m.length;u++)d=m[u],f=(f=T.createSVGPoint(d.x,d.y)).matrixTransform(this.getTransformToElement(e)),(I=(d=new E(f)).distance(r)+(p=1.1*d.distance(t)))<A?(A=I,v=[{sample:d,refDistance:p}]):I<A+1&&v.push({sample:d,refDistance:p});v.sort(function(t,e){return t.refDistance-e.refDistance}),v[0]&&(o=v[0].sample)}return o}},e.setAttribute=function(t,e){var i=this.node;if(null===e)return this.removeAttr(t),this;var n=T.qualifyAttr(t);return n.ns?i.setAttributeNS(n.ns,t,e):"id"===t?i.id=e:i.setAttribute(t,e),this},T.createSvgDocument=function(t){if(t){var e='<svg xmlns="'+z.svg+'" xmlns:xlink="'+z.xlink+'" version="1.1">'+t+"</svg>";return T.parseXML(e,{async:!1}).documentElement}var i=document.createElementNS(z.svg,"svg");return i.setAttributeNS(z.xmlns,"xmlns:xlink",z.xlink),i.setAttribute("version","1.1"),i},T.idCounter=0,T.uniqueId=function(){return"v-"+ ++T.idCounter},T.toNode=function(t){return T.isV(t)?t.node:t.nodeName&&t||t[0]},T.ensureId=function(t){return(t=T.toNode(t)).id||(t.id=T.uniqueId())},T.sanitizeText=function(t){return(t||"").replace(/ /g," ")},T.isUndefined=function(t){return void 0===t},T.isString=function(t){return"string"==typeof t},T.isObject=function(t){return t&&"object"==typeof t},T.isArray=Array.isArray,T.parseXML=function(t,e){var i;e=e||{};try{var n=new DOMParser;T.isUndefined(e.async)||(n.async=e.async),i=n.parseFromString(t,"text/xml")}catch(t){i=void 0}if(!i||i.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return i},T.qualifyAttr=function(t){if(-1===t.indexOf(":"))return{ns:null,local:t};var e=t.split(":");return{ns:z[e[0]],local:e[1]}},T.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,T.transformSeparatorRegex=/[ ,]+/,T.transformationListRegex=/^(\w+)\((.*)\)/,T.transformStringToMatrix=function(t){var e=T.createSVGMatrix(),i=t&&t.match(T.transformRegex);if(!i)return e;for(var n=0,r=i.length;n<r;n++){var o=i[n].match(T.transformationListRegex);if(o){var s,a,l,c,g,h=T.createSVGMatrix(),u=o[2].split(T.transformSeparatorRegex);switch(o[1].toLowerCase()){case"scale":s=parseFloat(u[0]),a=void 0===u[1]?s:parseFloat(u[1]),h=h.scaleNonUniform(s,a);break;case"translate":l=parseFloat(u[0]),c=parseFloat(u[1]),h=h.translate(l,c);break;case"rotate":g=parseFloat(u[0]),l=parseFloat(u[1])||0,c=parseFloat(u[2])||0,h=0!==l||0!==c?h.translate(l,c).rotate(g).translate(-l,-c):h.rotate(g);break;case"skewx":g=parseFloat(u[0]),h=h.skewX(g);break;case"skewy":g=parseFloat(u[0]),h=h.skewY(g);break;case"matrix":h.a=parseFloat(u[0]),h.b=parseFloat(u[1]),h.c=parseFloat(u[2]),h.d=parseFloat(u[3]),h.e=parseFloat(u[4]),h.f=parseFloat(u[5]);break;default:continue}e=e.multiply(h)}}return e},T.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},T.parseTransformString=function(t){var e,i,n;if(t){var r=T.transformSeparatorRegex;if(0<=t.trim().indexOf("matrix")){var o=T.transformStringToMatrix(t),s=T.decomposeMatrix(o);e=[s.translateX,s.translateY],n=[s.scaleX,s.scaleY],i=[s.rotation];var a=[];0===e[0]&&0===e[1]||a.push("translate("+e+")"),1===n[0]&&1===n[1]||a.push("scale("+n+")"),0!==i[0]&&a.push("rotate("+i+")"),t=a.join(" ")}else{var l=t.match(/translate\((.*?)\)/);l&&(e=l[1].split(r));var c=t.match(/rotate\((.*?)\)/);c&&(i=c[1].split(r));var g=t.match(/scale\((.*?)\)/);g&&(n=g[1].split(r))}}var h=n&&n[0]?parseFloat(n[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:i&&i[0]?parseInt(i[0],10):0,cx:i&&i[1]?parseInt(i[1],10):void 0,cy:i&&i[2]?parseInt(i[2],10):void 0},scale:{sx:h,sy:n&&n[1]?parseFloat(n[1]):h}}},T.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},T.decomposeMatrix=function(t){var e=T.deltaTransformPoint(t,{x:0,y:1}),i=T.deltaTransformPoint(t,{x:1,y:0}),n=180/p*o(e.y,e.x)-90,r=180/p*o(i.y,i.x);return{translateX:t.e,translateY:t.f,scaleX:s(t.a*t.a+t.b*t.b),scaleY:s(t.c*t.c+t.d*t.d),skewX:n,skewY:r,rotation:n}},T.matrixToScale=function(t){var e,i,n,r;return t?(e=T.isUndefined(t.a)?1:t.a,r=T.isUndefined(t.d)?1:t.d,i=t.b,n=t.c):e=r=1,{sx:i?s(e*e+i*i):e,sy:n?s(n*n+r*r):r}},T.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=T.deltaTransformPoint(t,e)),{angle:C(A(o(e.y,e.x))-90)}},T.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},T.isV=function(t){return t instanceof T},T.isVElement=T.isV,T.isSVGGraphicsElement=function(t){return!!t&&((t=T.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM)};var d=T("svg").node;return T.createSVGMatrix=function(t){var e=d.createSVGMatrix();for(var i in t)e[i]=t[i];return e},T.createSVGTransform=function(t){return T.isUndefined(t)?d.createSVGTransform():(t instanceof SVGMatrix||(t=T.createSVGMatrix(t)),d.createSVGTransformFromMatrix(t))},T.createSVGPoint=function(t,e){var i=d.createSVGPoint();return i.x=t,i.y=e,i},T.transformRect=function(t,e){var i=d.createSVGPoint();i.x=t.x,i.y=t.y;var n=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y;var r=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y+t.height;var o=i.matrixTransform(e);i.x=t.x,i.y=t.y+t.height;var s=i.matrixTransform(e),a=h(n.x,r.x,o.x,s.x),l=u(n.x,r.x,o.x,s.x),c=h(n.y,r.y,o.y,s.y),g=u(n.y,r.y,o.y,s.y);return new H(a,c,l-a,g-c)},T.transformPoint=function(t,e){return new E(T.createSVGPoint(t.x,t.y).matrixTransform(e))},T.transformLine=function(t,e){return new B(T.transformPoint(t.start,e),T.transformPoint(t.end,e))},T.transformPolyline=function(t,e){var i=t instanceof D?t.points:t;T.isArray(i)||(i=[]);for(var n=[],r=0,o=i.length;r<o;r++)n[r]=T.transformPoint(i[r],e);return new D(n)},T.styleToObject=function(t){for(var e={},i=t.split(";"),n=0;n<i.length;n++){var r=i[n].split("=");e[r[0].trim()]=r[1].trim()}return e},T.createSlicePathData=function(t,e,i,n){var r=2*p-1e-6,o=t,s=e,a=i,l=n,c=(l<a&&(c=a,a=l,l=c),l-a),g=c<p?"0":"1",h=I(a),u=m(a),d=I(l),f=m(l);return r<=c?o?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":o?"M"+s*h+","+s*u+"A"+s+","+s+" 0 "+g+",1 "+s*d+","+s*f+"L"+o*d+","+o*f+"A"+o+","+o+" 0 "+g+",0 "+o*h+","+o*u+"Z":"M"+s*h+","+s*u+"A"+s+","+s+" 0 "+g+",1 "+s*d+","+s*f+"L0,0Z"},T.mergeAttrs=function(t,e){for(var i in e)"class"===i?t[i]=t[i]?t[i]+" "+e[i]:e[i]:"style"===i?T.isObject(t[i])&&T.isObject(e[i])?t[i]=T.mergeAttrs(t[i],e[i]):T.isObject(t[i])?t[i]=T.mergeAttrs(t[i],T.styleToObject(e[i])):T.isObject(e[i])?t[i]=T.mergeAttrs(T.styleToObject(t[i]),e[i]):t[i]=T.mergeAttrs(T.styleToObject(t[i]),T.styleToObject(e[i])):t[i]=e[i];return t},T.annotateString=function(t,e,i){e=e||[];for(var n,r,o,s=(i=i||{}).offset||0,a=[],l=[],c=0;c<t.length;c++){r=l[c]=t[c];for(var g=0;g<e.length;g++){var h=e[g],u=h.start+s,d=h.end+s;u<=c&&c<d&&(T.isObject(r)?r.attrs=T.mergeAttrs(T.mergeAttrs({},r.attrs),h.attrs):r=l[c]={t:t[c],attrs:h.attrs},i.includeAnnotationIndices&&(r.annotations||(r.annotations=[])).push(g))}(o=l[c-1])?T.isObject(r)&&T.isObject(o)?JSON.stringify(r.attrs)===JSON.stringify(o.attrs)?n.t+=r.t:(a.push(n),n=r):n=T.isObject(r)?(a.push(n),r):T.isObject(o)?(a.push(n),r):(n||"")+r:n=r}return n&&a.push(n),a},T.findAnnotationsAtIndex=function(t,e){var i=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&i.push(t)}),i},T.findAnnotationsBetweenIndexes=function(t,e,i){var n=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||i>t.start&&i<=t.end||t.start>=e&&t.end<i)&&n.push(t)}),n},T.shiftAnnotations=function(t,e,i){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=i:t.start>=e&&(t.start+=i,t.end+=i)}),t},T.convertLineToPathData=function(t){return["M",(t=T(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},T.convertPolygonToPathData=function(t){var e=T.getPointsFromSvgNode(t);return 0===e.length?null:T.svgPointsToPath(e)+" Z"},T.convertPolylineToPathData=function(t){var e=T.getPointsFromSvgNode(t);return 0===e.length?null:T.svgPointsToPath(e)},T.svgPointsToPath=function(t){for(var e=0,i=t.length;e<i;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},T.getPointsFromSvgNode=function(t){var e=[],i=(t=T.toNode(t)).points;if(i)for(var n=0,r=i.numberOfItems;n<r;n++)e.push(i.getItem(n));return e},T.KAPPA=.551784,T.convertCircleToPathData=function(t){t=T(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,n=parseFloat(t.attr("r")),r=n*T.KAPPA;return["M",e,i-n,"C",e+r,i-n,e+n,i-r,e+n,i,"C",e+n,i+r,e+r,i+n,e,i+n,"C",e-r,i+n,e-n,i+r,e-n,i,"C",e-n,i-r,e-r,i-n,e,i-n,"Z"].join(" ")},T.convertEllipseToPathData=function(t){t=T(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,n=parseFloat(t.attr("rx")),r=parseFloat(t.attr("ry"))||n,o=n*T.KAPPA,s=r*T.KAPPA;return["M",e,i-r,"C",e+o,i-r,e+n,i-s,e+n,i,"C",e+n,i+s,e+o,i+r,e,i+r,"C",e-o,i+r,e-n,i+s,e-n,i,"C",e-n,i-s,e-o,i-r,e,i-r,"Z"].join(" ")},T.convertRectToPathData=function(t){return t=T(t),T.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},T.rectToPath=function(t){var e=t.x,i=t.y,n=t.width,r=t.height,o=h(t.rx||t["top-rx"]||0,n/2),s=h(t.rx||t["bottom-rx"]||0,n/2),a=h(t.ry||t["top-ry"]||0,r/2),l=h(t.ry||t["bottom-ry"]||0,r/2);return(o||s||a||l?["M",e,i+a,"v",r-a-l,"a",s,l,0,0,0,s,l,"h",n-2*s,"a",s,l,0,0,0,s,-l,"v",-(r-l-a),"a",o,a,0,0,0,-o,-a,"h",-(n-2*o),"a",o,a,0,0,0,-o,a,"Z"]:["M",e,i,"H",e+n,"V",i+r,"H",e,"V",i,"Z"]).join(" ")},T.normalizePathData=function(){var t="\t\n\v\f\r   ᠎             　\u2028\u2029",p=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),I=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),e=Math,U=e.PI,X=e.sin,F=e.cos,V=e.tan,J=e.asin,H=e.sqrt,_=e.abs;function u(t,e,i,n,r,o){return[1/3*t+2/3*i,1/3*e+2/3*n,1/3*r+2/3*i,1/3*o+2/3*n,r,o]}function Q(t,e,i){return{x:t*F(i)-e*X(i),y:t*X(i)+e*F(i)}}function d(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return String(t).replace(p,function(t,e,i){var n=[],r=e.toLowerCase();for(i.replace(I,function(t,e){e&&n.push(+e)}),"m"===r&&2<n.length&&(s.push([e].concat(n.splice(0,2))),r="l",e="m"===e?"l":"L");n.length>=o[r]&&(s.push([e].concat(n.splice(0,o[r]))),o[r]););}),s}(t)),!t||!t.length)return[["M",0,0]];for(var e,i=[],n=0,r=0,o=0,s=0,a=t.length,l=0;l<a;l++){var c=[];i.push(c);var g,h,u=t[l];if((e=u[0])!=e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+n,c[7]=+u[7]+r;break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+n;break;case"M":for(o=+u[1]+n,s=+u[2]+r,g=u.length,h=1;h<g;h++)c[h]=+u[h]+(h%2?n:r);break;default:for(g=u.length,h=1;h<g;h++)c[h]=+u[h]+(h%2?n:r)}else for(var d=u.length,f=0;f<d;f++)c[f]=u[f];switch(c[0]){case"Z":n=+o,r=+s;break;case"H":n=c[1];break;case"V":r=c[1];break;case"M":o=c[c.length-2],s=c[c.length-1],n=c[c.length-2],r=c[c.length-1];break;default:n=c[c.length-2],r=c[c.length-1]}}return i}function i(t){var n=d(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function i(t,e,i){var n,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(function t(e,i,n,r,o,s,a,l,c,g){var h,u=120*U/180,d=U/180*(+o||0),f=[];if(g)b=g[0],N=g[1],w=g[2],y=g[3];else{e=(h=Q(e,i,-d)).x,i=h.y;var p=(e-(l=(h=Q(l,c,-d)).x))/2,I=(i-(c=h.y))/2,m=p*p/(n*n)+I*I/(r*r);1<m&&(n*=m=H(m),r*=m);var A=n*n,v=r*r,C=(s==a?-1:1)*H(_((A*v-A*I*I-v*p*p)/(A*I*I+v*p*p))),w=C*n*I/r+(e+l)/2,y=C*-r*p/n+(i+c)/2,b=J(((i-y)/r).toFixed(9)),N=J(((c-y)/r).toFixed(9));(b=e<w?U-b:b)<0&&(b=2*U+b),(N=l<w?U-N:N)<0&&(N=2*U+N),a&&N<b&&(b-=2*U),!a&&b<N&&(N-=2*U)}var M=N-b;if(_(M)>u){var x=N,S=l,k=c;f=t(l=w+n*F(N=b+u*(a&&b<N?1:-1)),c=y+r*X(N),n,r,o,0,a,S,k,[N,x,w,y])}M=N-b;var D=F(b),z=X(b),T=F(N),j=X(N),L=V(M/4),Z=4/3*(n*L),P=4/3*(r*L),G=[e,i],B=[e+Z*z,i-P*D],O=[l+Z*j,c-P*T],E=[l,c];if(B[0]=2*G[0]-B[0],B[1]=2*G[1]-B[1],g)return[B,O,E].concat(f);for(var Y=[],R=(f=[B,O,E].concat(f).join().split(",")).length,W=0;W<R;W++)Y[W]=W%2?Q(f[W-1],f[W],d).y:Q(f[W],f[W+1],d).x;return Y}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":r="C"===i||"S"===i?(n=2*e.x-e.bx,2*e.y-e.by):(n=e.x,e.y),t=["C",n,r].concat(t.slice(1));break;case"T":e.qy="Q"===i||"T"===i?(e.qx=2*e.x-e.qx,2*e.y-e.qy):(e.qx=e.x,e.y),t=["C"].concat(u(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(u(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function r(t,e){if(7<t[e].length){t[e].shift();for(var i=t[e];i.length;)o[e]="A",t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),l=n.length}}for(var o=[],s="",a="",l=n.length,c=0;c<l;c++){n[c]&&(s=n[c][0]),"C"!==s&&(o[c]=s,0<c&&(a=o[c-1])),n[c]=i(n[c],e,a),"A"!==o[c]&&"C"===s&&(o[c]="C"),r(n,c);var g=n[c],h=g.length;e.x=g[h-2],e.y=g[h-1],e.bx=parseFloat(g[h-4])||e.x,e.by=parseFloat(g[h-3])||e.y}return n[0][0]&&"M"===n[0][0]||n.unshift(["M",0,0]),n}return function(t){return i(t).join(",").split(",").join(" ")}}(),T.namespace=z,T.g=K,T}(),$={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default"},tt=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,$.classNamePrefix.length)!==$.classNamePrefix&&(t=$.classNamePrefix+t),t}).join(" "):t},et=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,$.classNamePrefix.length)===$.classNamePrefix&&(t=t.substr($.classNamePrefix.length)),t}).join(" "):t},it=function(t,e){for(var i={},n={},r=q.namespace.svg,o=e||r,s=document.createDocumentFragment(),a=[t,s,o];0<a.length;){o=a.pop();for(var l=a.pop(),c=a.pop(),g=0,h=c.length;g<h;g++){var u=c[g];if(!u.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var d=u.tagName;u.hasOwnProperty("namespaceURI")&&(o=u.namespaceURI);var f=document.createElementNS(o,d),p=o===r,I=p?q:S,m=u.attributes;m&&I(f).attr(m);var A=u.style;if(A&&S(f).css(A),u.hasOwnProperty("className")){var v=u.className;p?f.className.baseVal=v:f.className=v}if(u.hasOwnProperty("textContent")&&(f.textContent=u.textContent),u.hasOwnProperty("selector")){var C=u.selector;if(i[C])throw new Error("json-dom-parser: selector must be unique");I(i[C]=f).attr("joint-selector",C)}if(u.hasOwnProperty("groupSelector")){var w=u.groupSelector;Array.isArray(w)||(w=[w]);for(var y=0,b=w.length;y<b;y++){var N=w[y],M=n[N];M||(M=n[N]=[]),M.push(f)}}l.appendChild(f);var x=u.children;Array.isArray(x)&&a.push(x,f,o)}}return{fragment:s,selectors:i,groupSelectors:n}},nt=function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return e},rt=function(t,e,i){for(var n,r=Array.isArray(e)?e:e.split(i||"/"),o=0,s=r.length;o<s;){if(n=r[o++],!(Object(t)===t&&n in t))return;t=t[n]}return t},ot=function(t,e,i,n){for(var r=Array.isArray(e)?e:e.split(n||"/"),o=t,s=0,a=r.length;s<a-1;s++)o=o[r[s]]||(o[r[s]]={});return o[r[a-1]]=i,t},st=function(t,e,i){i||(i="/");var n=Array.isArray(e)?e.slice():e.split(i),r=n.pop();if(0<n.length){var o=rt(t,n,i);o&&delete o[r]}else delete t[r];return t},at=function(t,e,i){e=e||"/";var n={};for(var r in t)if(t.hasOwnProperty(r)){var o="object"==typeof t[r];if(o&&i&&i(t[r])&&(o=!1),o){var s=at(t[r],e,i);for(var a in s)s.hasOwnProperty(a)&&(n[r+e+a]=s[a])}else n[r]=t[r]}return n},lt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},ct=function(t){return ct.id=ct.id||1,t.id=void 0===t.id?"j_"+ct.id++:t.id,t.id},gt=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},ht=function(t){var e=t,i=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(i){for(var n in t)void 0===i[n]&&(i[n]=t[n]);e=i}var r=e.target;if(r){var o=r.correspondingUseElement;o&&(e.target=o)}return e},ut=function(){var r;if("undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!r){var o=0;r=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-o)),n=setTimeout(function(){t(e+i)},i);return o=e+i,n}}return function(t,e){for(var i=[],n=arguments.length-2;0<n--;)i[n]=arguments[n+2];return r(void 0!==e?t.bind.apply(t,[e].concat(i)):t)}}(),dt=((Q="undefined"!=typeof window)&&(_=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),_=_||clearTimeout,Q?_.bind(window):_),ft=function(t){return ge(t)&&"%"===t.slice(-1)},pt=function(t,e){var i=parseFloat(t);if(Number.isNaN(i))return null;var n,r={};if(r.value=i,null==e)n="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;n=e.join("|")}else ge(e)&&(n=e);var o,s=(o=new RegExp("(?:\\d+(?:\\.\\d+)*)("+n+")$").exec(t))?o[1]:null;return null===s?null:(r.unit=s,r)},It=function(t,e,i,n){void 0===i&&(i={}),void 0===n&&(n={});var r=e.width,o=e.height,s=n.svgDocument||q("svg").node,a=q("tspan").node,l=q("text").attr(i).append(a).node,c=document.createTextNode("");l.style.opacity=0,l.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(l),n.svgDocument||document.body.appendChild(s);var g=n.separator||" ",h=n.eol||"\n",u=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,d=n.maxLineCount;ce(d)||(d=1/0);for(var f,p,I,m=t.split(g),A=[],v=[],C=0,w=0,y=m.length;C<y;C++){var b=m[C];if(b)if(h&&0<=b.indexOf(h))if(1<b.length){for(var N=b.split(h),M=0,x=N.length-1;M<x;M++)N.splice(2*M+1,0,h);m.splice.apply(m,[C,1].concat(N.filter(function(t){return""!==t}))),C--,y=m.length}else v[++w]="";else{if(c.data=v[w]?v[w]+" "+b:b,a.getComputedTextLength()<=r)v[w]=c.data,(f||p)&&(A[w++]=!0,p=f=0);else{if(!v[w]||f){var S=!!f;if(f=b.length-1,S||!f){if(!f){if(!v[w]){v=[];break}m.splice(C,2,b+m[C+1]),y--,A[w++]=!0,C--;continue}m[C]=b.substring(0,f),m[C+1]=b.substring(f)+m[C+1]}else{if(p)m.splice(C,2,m[C]+m[C+1]),p=0;else{var k=b.search(u);-1<k&&k!==b.length-1&&0!==k&&(p=k+1,f=0),m.splice(C,1,b.substring(0,p||f),b.substring(p||f)),y++}w&&!A[w-1]&&w--}C--;continue}w++,C--}var D=null;if(v.length>d)D=d-1;else if(void 0!==o){var z;if(void 0===I)I=(z="auto"===i.lineHeight?{value:1.5,unit:"em"}:pt(i.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===z.unit&&(I*=l.getBBox().height);I*v.length>o&&(D=Math.floor(o/I)-1)}if(null!==D){v.splice(D+1);var T=n.ellipsis;if(!T||D<0)break;"string"!=typeof T&&(T="…");var j=v[D];if(!j)break;var L,Z,P=j.length;do{if(Z=j[P],L=j.substring(0,P),Z?Z.match(g)&&(L+=Z):L+="string"==typeof g?g:" ",L+=T,c.data=L,a.getComputedTextLength()<=r){v[D]=L;break}P--}while(0<=P);break}}}return n.svgDocument?s.removeChild(l):document.body.removeChild(s),v.join(h)},mt=function(t){var e=S(S.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var i=this;S.each(i.attributes,function(){var t=this.name,e=this.value;(t.startsWith("on")||e.startsWith("javascript:")||e.startsWith("data:")||e.startsWith("vbscript:"))&&S(i).removeAttr(t)})}),e.html()},At=function(t,e){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,e);else{var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)}},vt=function(t){t=t.replace(/\s/g,"");var e,i=(t=decodeURIComponent(t)).indexOf(","),n=t.slice(0,i),r=n.split(":")[1].split(";")[0],o=t.slice(i+1);e=0<=n.indexOf("base64")?atob(o):unescape(encodeURIComponent(o));for(var s=new Uint8Array(e.length),a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return new Blob([s],{type:r})},Ct=function(t,e){var i=S(t),n=i.map(function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}});return Array.prototype.sort.call(i,e).each(function(t){n[t].call(this)})},wt=function(t){if(Object(t)===t)return e=i=n=r=0,isFinite(t.vertical)&&(e=n=+t.vertical),isFinite(t.horizontal)&&(i=r=+t.horizontal),isFinite(t.top)&&(e=+t.top),isFinite(t.right)&&(i=+t.right),isFinite(t.bottom)&&(n=+t.bottom),isFinite(t.left)&&(r=+t.left),{top:e,right:i,bottom:n,left:r};var e,i,n,r,o=0;return isFinite(t)&&(o=+t),{top:o,right:o,bottom:o,left:o}},yt={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,i=1;;e+=i,i/=2)if((7-4*e)/11<=t){var n=(11-6*e-11*t)/4;return-n*n+i*i}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(i,n,r){return n=n||0,r=r||1,function(t){var e=i(t);return e<n?n:r<e?r:e}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},bt={number:function(e,t){var i=t-e;return function(t){return e+i*t}},object:function(r,o){var s=Object.keys(r);return function(t){var e,i,n={};for(e=s.length-1;-1!=e;e--)n[i=s[e]]=r[i]+(o[i]-r[i])*t;return n}},hexColor:function(t,e){var i=parseInt(t.slice(1),16),n=parseInt(e.slice(1),16),r=255&i,o=(255&n)-r,s=65280&i,a=(65280&n)-s,l=16711680&i,c=(16711680&n)-l;return function(t){return"#"+(1<<24|r+o*t&255|s+a*t&65280|l+c*t&16711680).toString(16).slice(1)}},unit:function(e,t){var i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=i.exec(e),r=i.exec(t),o=r[1].indexOf("."),s=0<o?r[1].length-o-1:0;e=+n[1];var a=+r[1]-e,l=n[2];return function(t){return(e+a*t).toFixed(s)+l}}},Nt={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,i=Number.isFinite(t.width)?t.width:1;return xt('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+i,innerRadius:e})},highlight:function(t){return xt('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return xt('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return xt(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return xt('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return xt('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Mt={number:function(t,e,o){o=o||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var i=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i.exec(t),n=i[1]||" ",r=i[2]||">",s=i[3]||"",a=i[4]||"",l=i[5],c=+i[6],g=i[7],h=i[8],u=i[9],d=1,f="",p="",I=!1;switch(h&&(h=+h.substring(1)),(l||"0"===n&&"="===r)&&(l=n="0",r="=",g&&(c-=Math.floor((c-1)/4))),u){case"n":g=!0,u="g";break;case"%":d=100,p="%",u="f";break;case"p":d=100,p="%",u="r";break;case"b":case"o":case"x":case"X":"#"===a&&(f="0"+u.toLowerCase());break;case"c":case"d":I=!0,h=0;break;case"s":d=-1,u="r"}"$"===a&&(f=o.currency[0],p=o.currency[1]),"r"!=u||h||(u="g"),null!=h&&("g"==u?h=Math.max(1,Math.min(21,h)):"e"!=u&&"f"!=u||(h=Math.max(0,Math.min(20,h))));var m=l&&g;if(I&&e%1)return"";var A=e<0||0===e&&1/e<0?(e=-e,"-"):s,v=p;if(d<0){var C=this.prefix(e,h);e=C.scale(e),v=C.symbol+p}else e*=d;var w=(e=this.convert(u,e,h)).lastIndexOf("."),y=w<0?e:e.substring(0,w),b=w<0?"":o.decimal+e.substring(w+1);function N(t){for(var e=t.length,i=[],n=0,r=o.grouping[0];0<e&&0<r;)i.push(t.substring(e-=r,e+r)),r=o.grouping[n=(n+1)%o.grouping.length];return i.reverse().join(o.thousands)}!l&&g&&o.grouping&&(y=N(y));var M=f.length+y.length+b.length+(m?0:A.length),x=M<c?new Array(M=c-M+1).join(n):"";return m&&(y=N(x+y)),A+=f,e=y+b,("<"===r?A+e+x:">"===r?x+A+e:"^"===r?x.substring(0,M>>=1)+A+e+x.substring(M):A+(m?e:x+e))+v},string:function(t,e){for(var i,n="{",r=!1,o=[];-1!==(i=t.indexOf(n));){var s,a,l;if(s=t.slice(0,i),r){l=(a=s.split(":")).shift().split("."),s=e;for(var c=0;c<l.length;c++)s=s[l[c]];a.length&&(s=this.number(a,s))}o.push(s),t=t.slice(i+1),n=(r=!r)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,i){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(i);case"e":return e.toExponential(i);case"f":return e.toFixed(i);case"r":return(e=this.round(e,this.precision(e,i))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),i))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var i=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:8<e?function(t){return t/i}:function(t){return t*i},symbol:t}}),n=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n<=0?n+1:n-1)/3)))),i[8+n/3]}},xt=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(t){for(var e=Array.from(arguments).slice(1,4).find(function(t){return!!t}).split("."),i=n[e.shift()];void 0!==i&&e.length;)i=i[e.shift()];return void 0!==i?i:""})}},St=i.assign,kt=i.defaults,Dt=St,zt=i.defaultsDeep,Tt=i.assign,jt=i.defaults,Lt=i.defaultsDeep,Zt=i.invokeMap||i.invoke,Pt=i.sortedIndexBy||i.sortedIndex,Gt=i.uniqBy||i.uniq,Bt=i.clone,Ot=i.cloneDeep,Et=i.isEmpty,Yt=i.isEqual,Rt=i.isFunction,Wt=i.isPlainObject,Ut=i.toArray,Xt=i.debounce,Ft=i.groupBy,Vt=i.sortBy,Jt=i.flattenDeep,Ht=i.without,_t=i.difference,Qt=i.intersection,Kt=i.union,qt=i.has,$t=i.result,te=i.omit,ee=i.pick,ie=i.bindAll,ne=i.forIn,re=i.camelCase,oe=i.uniqueId,se=function(){if(i.mergeWith){var t=Array.from(arguments),e=t[t.length-1],n=Rt(e)?e:he;return t.push(function(t,e){var i=n(t,e);return void 0!==i?i:Array.isArray(t)&&!Array.isArray(e)?e:void 0}),i.mergeWith.apply(this,t)}return i.merge.apply(this,arguments)},ae=function(t){var e=Object.prototype.toString;return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===e.call(t)},le=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},ce=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===e.call(t)},ge=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===e.call(t)},he=function(){};function ue(t){t=Gt(t);var s=Ut(t).reduce(function(t,e){return t[e.id]=e.clone(),t},{});return Ut(t).forEach(function(t){var e=s[t.id];if(e.isLink()){var i=e.source(),n=e.target();i.id&&s[i.id]&&e.prop("source/id",s[i.id].id),n.id&&s[n.id]&&e.prop("target/id",s[n.id].id)}var r=t.get("parent");r&&s[r]&&e.set("parent",s[r].id);var o=Ut(t.get("embeds")).reduce(function(t,e){return s[e]&&t.push(s[e].id),t},[]);Et(o)||e.set("embeds",o)}),s}function de(o,s){return function(t,e){var i=ft(t);t=parseFloat(t),i&&(t/=100);var n={};if(isFinite(t)){var r=i||0<=t&&t<=1?t*e[s]:Math.max(t+e[s],0);n[o]=r}return n}}function fe(s,a,l){return function(t,e){var i,n=ft(t);if(t=parseFloat(t),n&&(t/=100),isFinite(t)){var r=e[l]();i=n||0<t&&t<1?r[s]+e[a]*t:r[s]+t}var o=E();return o[s]=i||0,o}}function pe(r,o,s){return function(t,e){var i;i="middle"===t?e[o]/2:t===s?e[o]:isFinite(t)?-1<t&&t<1?-e[o]*t:-t:ft(t)?e[o]*parseFloat(t)/100:0;var n=E();return n[r]=-(e[r]+i),n}}function Ie(d,t){var f="joint-shape",p=t&&t.resetOffset;return function(t,e,i){var n=S(i),r=n.data(f);if(!r||r.value!==t){var o=d(t);r={value:t,shape:o,shapeBBox:o.bbox()},n.data(f,r)}var s=r.shape.clone(),a=r.shapeBBox.clone(),l=a.origin(),c=e.origin();a.x=c.x,a.y=c.y;var g=e.maxRectScaleToFit(a,c),h=0===a.width||0===e.width?1:g.sx,u=0===a.height||0===e.height?1:g.sy;return s.scale(h,u,l),p&&s.translate(-l.x,-l.y),s}}function me(t){var n=Ie(function(t){return new O(q.normalizePathData(t))},t);return function(t,e,i){return{d:n(t,e,i).serialize()}}}function Ae(t){var n=Ie(D,t);return function(t,e,i){return{points:n(t,e,i).serialize()}}}function ve(r,o){var s=new E(1,0);return function(t){var e,i,n=this[r](t);return n?(i=o.rotate?n.vector().vectorAngle(s):0,e=n.start):(e=this.path.start,i=0),0===i?{transform:"translate("+e.x+","+e.y+")"}:{transform:"translate("+e.x+","+e.y+") rotate("+i+")"}}}function Ce(t,e,i){return void 0!==i.text}function we(){return this.model.isLink()}function ye(t){var e={},i=t.stroke;"string"==typeof i&&(e.stroke=i,e.fill=i);var n=t.strokeOpacity;return void 0===n&&(n=t["stroke-opacity"]),void 0===n&&(n=t.opacity),void 0!==n&&(e["stroke-opacity"]=n,e["fill-opacity"]=n),e}var be,Ne,Me={xlinkHref:{set:"xlink:href"},xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},filter:{qualify:Wt,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Wt,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},stroke:{qualify:Wt,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},sourceMarker:{qualify:Wt,set:function(t,e,i,n){return t=Tt(ye(n),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Wt,set:function(t,e,i,n){return t=Tt(ye(n),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Wt,set:function(t,e,i,n){return t=Tt(ye(n),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,i){return!i.textWrap||!Wt(i.textWrap)},set:function(t,e,i,n){var r=S(i),o="joint-text",s=r.data(o),a=ee(n,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty"),l=a.fontSize=n["font-size"]||n.fontSize,c=JSON.stringify([t,a]);if(void 0===s||s!==c){l&&i.setAttribute("font-size",l);var g=a.textPath;if(le(g)){var h=g.selector;if("string"==typeof h){var u=this.findBySelector(h)[0];u instanceof SVGPathElement&&(a.textPath=Tt({"xlink:href":"#"+u.id},g))}}q(i).text(""+t,a),r.data(o,c)}}},textWrap:{qualify:Wt,set:function(t,e,i,n){var r=t.width||0;ft(r)?e.width*=parseFloat(r)/100:r<=0?e.width+=r:e.width=r;var o,s=t.height||0;ft(s)?e.height*=parseFloat(s)/100:s<=0?e.height+=s:e.height=s;var a=t.text;void 0===a&&(a=n.text),o=void 0!==a?It(""+a,e,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":n["font-size"]||n.fontSize,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",Me.text.set.call(this,o,e,i,n)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,i){var n=S(i),r="joint-title",o=n.data(r);if(void 0===o||o!==t){n.data(r,t);var s=i.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=t;else{var a=document.createElementNS(i.namespaceURI,"title");a.textContent=t,i.insertBefore(a,s)}}}},lineHeight:{qualify:Ce},textVerticalAnchor:{qualify:Ce},textPath:{qualify:Ce},annotations:{qualify:Ce},eol:{qualify:Ce},displayEmpty:{qualify:Ce},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:Wt,set:function(t,e,i){S(i).css(t)}},html:{set:function(t,e,i){S(i).html(t+"")}},ref:{},refX:{position:fe("x","width","origin")},refY:{position:fe("y","height","origin")},refDx:{position:fe("x","width","corner")},refDy:{position:fe("y","height","corner")},refWidth:{set:de("width","width")},refHeight:{set:de("height","height")},refRx:{set:de("rx","width")},refRy:{set:de("ry","height")},refRInscribed:{set:(be=de("r","width"),Ne=de("r","height"),function(t,e){return(e.height>e.width?be:Ne)(t,e)})},refRCircumscribed:{set:function(t,e){var i=ft(t);t=parseFloat(t),i&&(t/=100);var n,r=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(n=i||0<=t&&t<=1?t*r:Math.max(t+r,0)),{r:n}}},refCx:{set:de("cx","width")},refCy:{set:de("cy","height")},xAlignment:{offset:pe("x","width","right")},yAlignment:{offset:pe("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:me({resetOffset:!0})},refDKeepOffset:{set:me({resetOffset:!1})},refPointsResetOffset:{set:Ae({resetOffset:!0})},refPointsKeepOffset:{set:Ae({resetOffset:!1})},connection:{qualify:we,set:function(t){var e,i=t.stubs;if(void 0===i&&(i=0),isFinite(i)&&0!==i){var n;n=i<0?(this.getConnectionLength()+i)/2:i;var r=this.getConnection(),o=r.divideAtLength(n),s=r.divideAtLength(-n);o&&s&&(e=o[0].serialize()+" "+s[1].serialize())}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:we,set:ve("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:we,set:ve("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:we,set:ve("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:we,set:ve("getTangentAtRatio",{rotate:!1})}};Me.refR=Me.refRInscribed,Me.refD=Me.refDResetOffset,Me.refPoints=Me.refPointsResetOffset,Me.atConnectionLength=Me.atConnectionLengthKeepGradient,Me.atConnectionRatio=Me.atConnectionRatioKeepGradient,Me.refX2=Me.refX,Me.refY2=Me.refY,Me.refWidth2=Me.refWidth,Me.refHeight2=Me.refHeight,Me["ref-x"]=Me.refX,Me["ref-y"]=Me.refY,Me["ref-dy"]=Me.refDy,Me["ref-dx"]=Me.refDx,Me["ref-width"]=Me.refWidth,Me["ref-height"]=Me.refHeight,Me["x-alignment"]=Me.xAlignment,Me["y-alignment"]=Me.yAlignment;var xe=Me,Se=s.Model.extend({constructor:function(t,e){var i,n=t||{};this.cid=oe("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(i=$t(this,"defaults"))&&(n=se({},i,n)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,i){throw new Error("Must define a translate() method.")},toJSON:function(){var e=this.constructor.prototype.defaults.attrs||{},t=this.attributes.attrs,o={};ne(t,function(t,n){var r=e[n];ne(t,function(t,i){le(t)&&!Array.isArray(t)?ne(t,function(t,e){r&&r[i]&&Yt(r[i][e],t)||(o[n]=o[n]||{},(o[n][i]||(o[n][i]={}))[e]=t)}):r&&Yt(r[i],t)||(o[n]=o[n]||{},o[n][i]=t)})});var i=Ot(te(this.attributes,"attrs"));return i.attrs=o,i},initialize:function(t){t&&t.id||this.set("id",this.generateId(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},generateId:function(){return lt()},processPorts:function(){var t=this.ports,i={};ne(this.get("attrs"),function(t,e){t&&t.port&&(void 0!==t.port.id?i[t.port.id]=t.port:i[t.port]={id:t.port})});var n={};(ne(t,function(t,e){i[e]||(n[e]=!0)}),this.graph&&!Et(n))&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(t){n[t.get("target").port]&&t.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(t){n[t.get("source").port]&&t.remove()}));this.ports=i},remove:function(t){t=t||{};var e=this.graph;if(!e)return this.collection&&this.collection.remove(this,t),this;e.startBatch("remove");var i=this.getParentCell();i&&i.unembed(this);for(var n=this.getEmbeddedCells(),r=0,o=n.length;r<o;r++){var s=n[r];s&&s.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(i){var t=this.graph;if(t){i=i||{};var e,n=t.maxZIndex();i.deep?(e=this.getEmbeddedCells({deep:!0,breadthFirst:!0})).unshift(this):e=[this],n=n-e.length+1;var r=t.get("cells"),o=r.indexOf(this)!==r.length-e.length;o||(o=e.some(function(t,e){return t.get("z")!==n+e})),o&&(this.startBatch("to-front"),n+=e.length,e.forEach(function(t,e){t.set("z",n+e,i)}),this.stopBatch("to-front"))}return this},toBack:function(i){var t=this.graph;if(t){i=i||{};var e,n=t.minZIndex();i.deep?(e=this.getEmbeddedCells({deep:!0,breadthFirst:!0})).unshift(this):e=[this];var r=0!==t.get("cells").indexOf(this);r||(r=e.some(function(t,e){return t.get("z")!==n+e})),r&&(this.startBatch("to-back"),n-=e.length,e.forEach(function(t,e){t.set("z",n+e,i)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var i=Tt([],this.get("embeds"));return i[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e),this.set("embeds",Gt(i),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",Ht(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(e){if(e=e||{},this.graph){var i;if(e.deep)if(e.breadthFirst){i=[];for(var t=this.getEmbeddedCells();0<t.length;){var n=t.shift();i.push(n),t.push.apply(t,n.getEmbeddedCells())}}else(i=this.getEmbeddedCells()).forEach(function(t){i.push.apply(i,t.getEmbeddedCells(e))});else i=Ut(this.get("embeds")).map(this.graph.getCell,this.graph);return i}return[]},isEmbeddedIn:function(t,e){var i=ge(t)?t:t.id,n=this.parent();if(e=jt({deep:!0},e),this.graph&&e.deep){for(;n;){if(n===i)return!0;n=this.graph.getCell(n).parent()}return!1}return n===i},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return Ut(ue([this].concat(this.getEmbeddedCells({deep:!0}))));var e=s.Model.prototype.clone.apply(this,arguments);return e.set("id",this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,i){var n=ge(t);if(n||Array.isArray(t)){if(1<arguments.length){var r,o,s=(o=n?(r=t).split("/"):(r=t.join("/"),t.slice()))[0],a=o.length;if((i=i||{}).propertyPath=r,i.propertyValue=e,i.propertyPathArray=o,1===a)return this.set(s,e,i);for(var l={},c=l,g=s,h=1;h<a;h++){var u=o[h],d=Number.isFinite(n?Number(u):u);c=c[g]=d?[]:{},g=u}l=ot(l,o,e,"/");var f=se({},this.attributes);i.rewrite&&st(f,r,"/");var p=se(f,l);return this.set(s,p[s],i)}return rt(this.attributes,t,"/")}return this.set(se({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var i=Array.isArray(t)?t:t.split("/"),n=i[0];if("attrs"===n&&(e.dirty=!0),1===i.length)return this.unset(t,e);var r=i.slice(1),o=Ot(this.get(n));return st(o,r,"/"),this.set(n,o,e)},attr:function(t,e,i){var n=Array.from(arguments);return 0===n.length?this.get("attrs"):(Array.isArray(t)?n[0]=["attrs"].concat(t):ge(t)?n[0]="attrs/"+t:n[0]={attrs:t},this.prop.apply(this,n))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(r,e,o,i){i=i||"/",o=Tt({duration:100,delay:10,timingFunction:yt.linear,valueFunction:bt.number},o);var s,a=0,l=function(t){var e,i,n;(i=(t-=a=a||t)/o.duration)<1?this._transitionIds[r]=e=ut(l):(i=1,delete this._transitionIds[r]),n=s(o.timingFunction(i)),o.transitionId=e,this.prop(r,n,o),e||this.trigger("transition:end",this,r)}.bind(this),t=function(t){this.stopTransitions(r),s=o.valueFunction(rt(this.attributes,r,i),e),this._transitionIds[r]=ut(t),this.trigger("transition:start",this,r)}.bind(this);return setTimeout(t,o.delay,l)},getTransitions:function(){return Object.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var i=t&&t.split(e);return Object.keys(this._transitionIds).filter(i&&function(t){return Yt(i,t.split(e).slice(0,i.length))}).forEach(function(t){dt(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Tt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Tt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var i in t)t.hasOwnProperty(i)&&this.hasChanged(i)&&(e|=t[i]);return e},angle:function(){return 0},position:function(){return new E(0,0)},getPointFromConnectedLink:function(){return new E},getBBox:function(){return new H(0,0,0,0)}},{getAttributeDefinition:function(t){var e=this.attributes,i=xe;return e&&e[t]||i[t]},define:function(t,e,i,n){i=Tt({defaults:Lt({type:t},e,this.prototype.defaults)},i);var r=this.extend(i,n);return void 0!==joint&&qt(joint,"shapes")&&ot(joint.shapes,t,r,"."),r}}),ke=function(e,t,i){if(ge(i)){if(!De[i])throw new Error('Unknown wrapper: "'+i+'"');i=De[i]}if(!Rt(i))throw new Error("Wrapper must be a function.");Ut(t).forEach(function(t){e[t]=i(e[t])})},De={cells:function(r){return function(){var t=Array.from(arguments),e=t.length,i=0<e&&t[0]||[],n=1<e&&t[e-1]||{};return Array.isArray(i)||(n instanceof Se?i=t:i instanceof Se&&(1<t.length&&t.pop(),i=t)),n instanceof Se&&(n={}),r.call(this,i,n)}}},ze={wrapWith:ke,wrappers:De,addClassNamePrefix:tt,removeClassNamePrefix:et,parseDOMJSON:it,hashCode:nt,getByPath:rt,setByPath:ot,unsetByPath:st,flattenObject:at,uuid:lt,guid:ct,toKebabCase:gt,normalizeEvent:ht,nextFrame:ut,cancelFrame:dt,shapePerimeterConnectionPoint:function(t,e,i,n){var r,o;if(!i){var s=e.$(".scalable")[0],a=e.$(".rotatable")[0];s&&s.firstChild?i=s.firstChild:a&&a.firstChild&&(i=a.firstChild)}return i?(o=q(i).findIntersection(n,t.paper.cells))||(r=q(i).getBBox({target:t.paper.cells})):o=(r=e.model.getBBox()).intersectionWithLineFromCenterToPoint(n),o||r.center()},isPercentage:ft,parseCssNumeric:pt,breakText:It,sanitizeHTML:mt,downloadBlob:At,downloadDataUri:function(t,e){var i=vt(t);At(i,e)},dataUriToBlob:vt,imageToDataUri:function(r,t){if(!r||"data:"===r.substr(0,"data:".length))return setTimeout(function(){t(null,r)},0);var e=new XMLHttpRequest;e.open("GET",r,!0),e.addEventListener("error",function(){t(new Error("Failed to load image "+r))}),e.responseType=window.FileReader?"blob":"arraybuffer",e.addEventListener("load",function(){window.FileReader?function(t,i){if(200===t.status){var e=new FileReader;e.onload=function(t){var e=t.target.result;i(null,e)},e.onerror=function(){i(new Error("Failed to load image "+r))},e.readAsDataURL(t.response)}else i(new Error("Failed to load image "+r))}(e,t):function(t,e){if(200===t.status){var i=new Uint8Array(t.response),n=r.split(".").pop()||"png";e(null,"data:image/"+({svg:"svg+xml"}[n]||n)+";base64,"+btoa(function(t){for(var e=[],i=0;i<t.length;i+=32768)e.push(String.fromCharCode.apply(null,t.subarray(i,i+32768)));return e.join("")}(i)))}else e(new Error("Failed to load image "+r))}(e,t)}),e.send()},getElementBBox:function(t){var e=S(t);if(0===e.length)throw new Error("Element not found");var i=e[0],n=i.ownerDocument,r=i.getBoundingClientRect(),o=0,s=0;if(i.ownerSVGElement){var a=q(i),l=a.getBBox({target:a.svg()});o=r.width-l.width,s=r.height-l.height}return{x:r.left+window.pageXOffset-n.documentElement.offsetLeft+o/2,y:r.top+window.pageYOffset-n.documentElement.offsetTop+s/2,width:r.width-o,height:r.height-s}},sortElements:Ct,setAttributesBySelector:function(t,e){var n=S(t);ne(e,function(t,e){var i=n.find(e).addBack().filter(e);qt(t,"class")&&(i.addClass(t.class),t=te(t,"class")),i.attr(t)})},normalizeSides:wt,timing:yt,interpolate:bt,filter:Nt,format:Mt,template:xt,toggleFullScreen:function(t){var e=window.top.document;function i(t,e){for(var i=["webkit","moz","ms","o",""],n=0;n<i.length;n++){var r=i[n],o=r?r+e:e.substr(0,1).toLowerCase()+e.substr(1);if(void 0!==t[o])return Rt(t[o])?t[o]():t[o]}}t=t||e.body,i(e,"FullscreenElement")||i(e,"FullScreenElement")?i(e,"ExitFullscreen")||i(e,"CancelFullScreen"):i(t,"RequestFullscreen")||i(t,"RequestFullScreen")},mixin:St,supplement:kt,deepMixin:Dt,deepSupplement:zt,assign:Tt,defaults:jt,defaultsDeep:Lt,invoke:Zt,sortedIndex:Pt,uniq:Gt,clone:Bt,cloneDeep:Ot,isEmpty:Et,isEqual:Yt,isFunction:Rt,isPlainObject:Wt,toArray:Ut,debounce:Xt,groupBy:Ft,sortBy:Vt,flattenDeep:Jt,without:Ht,difference:_t,intersection:Qt,union:Kt,has:qt,result:$t,omit:te,pick:ee,bindAll:ie,forIn:ne,camelCase:re,uniqueId:oe,merge:se,isBoolean:ae,isObject:le,isNumber:ce,isString:ge,noop:he,cloneCells:ue};function Te(t,e,i){var n=t.toJSON();return n.angle=e||0,jt({},i,n)}function je(t,e,i){return t.map(function(t,e,i){var n=this.pointAt((e+.5)/i.length);return(t.dx||t.dy)&&n.offset(t.dx||0,t.dy||0),Te(n.round(),0,t)},b(e,i))}function Le(t,e,s,a){var l=e.center(),c=e.width/e.height,g=e.topMiddle(),h=w.fromRect(e);return t.map(function(t,e,i){var n=s+a(e,i.length),r=g.clone().rotate(l,-n).scale(c,1,l),o=t.compensateRotation?-h.tangentTheta(r):0;return(t.dx||t.dy)&&r.offset(t.dx||0,t.dy||0),t.dr&&r.move(l,t.dr),Te(r.round(),o,t)})}function Ze(t,e){var i=e.x;ge(i)&&(i=parseFloat(i)/100*t.width);var n=e.y;return ge(n)&&(n=parseFloat(n)/100*t.height),N(i||0,n||0)}var Pe={absolute:function(t,e,i){return t.map(Ze.bind(null,e))},fn:function(t,e,i){return i.fn(t,e,i)},line:function(t,e,i){return je(t,Ze(e,i.start||e.origin()),Ze(e,i.end||e.corner()))},left:function(t,e,i){return je(t,e.origin(),e.bottomLeft())},right:function(t,e,i){return je(t,e.topRight(),e.corner())},top:function(t,e,i){return je(t,e.origin(),e.topRight())},bottom:function(t,e,i){return je(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,i){var n=i.startAngle||0,r=i.step||360/t.length;return Le(t,e,n,function(t){return t*r})},ellipse:function(t,e,i){var n=i.startAngle||0,r=i.step||20;return Le(t,e,n,function(t,e){return(t+.5-e/2)*r})}};function Ge(t,e){return Lt({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Be(t,e,i,n){n=jt({},n,{offset:15});var r,o,s,a,l=e.center().theta(t),c=Oe(e),g=n.offset,h=0;a=l<c[1]||l>c[2]?(s=".3em",r=g,o=0,"start"):l<c[0]?(s="0",r=0,o=-g,i?(h=-90,"start"):"middle"):l<c[3]?(s=".3em",r=-g,o=0,"end"):(s=".6em",r=0,o=g,i?(h=90,"start"):"middle");var u=Math.round;return Ge({x:u(r),y:u(o),angle:h,attrs:{".":{y:s,"text-anchor":a}}})}function Oe(t){var e=t.center(),i=e.theta(t.origin()),n=e.theta(t.bottomLeft()),r=e.theta(t.corner());return[i,e.theta(t.topRight()),r,n]}function Ee(t,e,i,n){var r,o,s,a,l=e.center().theta(t),c=(n=jt({},n,{offset:15})).offset,g=0,h=Oe(e);a=l<h[1]||l>h[2]?(s=".3em",r=-c,o=0,"end"):l<h[0]?(s=".6em",r=0,o=c,i?(g=90,"start"):"middle"):l<h[3]?(s=".3em",r=c,o=0,"start"):(s="0em",r=0,o=-c,i?(g=-90,"start"):"middle");var u=Math.round;return Ge({x:u(r),y:u(o),angle:g,attrs:{".":{y:s,"text-anchor":a}}})}function Ye(t,e,i){i=jt({},i,{offset:20});var n,r=N(0,0),o=-t.theta(r),s=o,a=t.clone().move(r,i.offset).difference(t).round(),l=".3em";(o+90)%180==0?(n=e?"end":"middle",e||-270!==o||(l="0em")):-270<o&&o<-90?(n="start",s=o-180):n="end";var c=Math.round;return Ge({x:c(a.x),y:c(a.y),angle:e?s:0,attrs:{".":{y:l,"text-anchor":n}}})}var Re={manual:function(t,e,i){return Ge(i,e)},left:function(t,e,i){return Ge(i,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,i){return Ge(i,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,i){return Ge(i,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,i){return Ge(i,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,i){return Be(t,e,!0,i)},outside:function(t,e,i){return Be(t,e,!1,i)},insideOriented:function(t,e,i){return Ee(t,e,!0,i)},inside:function(t,e,i){return Ee(t,e,!1,i)},radial:function(t,e,i){return Ye(t.difference(e.center()),!1,i)},radialOriented:function(t,e,i){return Ye(t.difference(e.center()),!0,i)}},We=Se.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,i){return void 0===t?Bt(this.get("source")):(r=t instanceof Se?((n=Bt(e)||{}).id=t.id,i):Wt(t)?(n=t,e):((n=Bt(e)||{}).x=t.x,n.y=t.y,i),this.set("source",n,r));var n,r},target:function(t,e,i){return void 0===t?Bt(this.get("target")):(r=t instanceof Se?((n=Bt(e)||{}).id=t.id,i):Wt(t)?(n=t,e):((n=Bt(e)||{}).x=t.x,n.y=t.y,i),this.set("target",n,r));var n,r},router:function(t,e,i){if(void 0===t){var n=this.get("router");return n?"object"==typeof n?Bt(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},s=r?e:i;return this.set("router",o,s)},connector:function(t,e,i){if(void 0===t){var n=this.get("connector");return n?"object"==typeof n?Bt(n):n:this.get("smooth")?{name:"smooth"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},s=r?e:i;return this.set("connector",o,s)},label:function(t,e,i){var n=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=n.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,i)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},insertLabel:function(t,e,i){if(!e)throw new Error("dia.Link: no label provided");var n=this.labels(),r=n.length;return(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1),n.splice(t,0,e),this.labels(n,i)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var i=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,i.splice(t,1),this.labels(i,e)},vertex:function(t,e,i){var n=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=n.length+t),arguments.length<=1)return this.prop(["vertices",t]);var r=this._normalizeVertex(e);return this.prop(["vertices",t],r,i)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var i=[],n=0;n<t.length;n++){var r=t[n],o=this._normalizeVertex(r);i.push(o)}return this.set("vertices",i,e)},insertVertex:function(t,e,i){if(!e)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),r=n.length;(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1);var o=this._normalizeVertex(e);return n.splice(t,0,o),this.vertices(n,i)},removeVertex:function(t,e){var i=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,i.splice(t,1),this.vertices(i,e)},_normalizeVertex:function(t){return!Wt(t)?{x:t.x,y:t.y}:t},translate:function(e,i,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=i,this.applyToPoints(function(t){return{x:(t.x||0)+e,y:(t.y||0)+i}},t)},scale:function(e,i,n,t){return this.applyToPoints(function(t){return E(t).scale(e,i,n).toJSON()},t)},applyToPoints:function(t,e){if(!Rt(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var i={},n=this.attributes,r=n.source,o=n.target;r.id||(i.source=t(r)),o.id||(i.target=t(o));var s=this.vertices();return 0<s.length&&(i.vertices=s.map(t)),this.set(i,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new E(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new E(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){var t=[this.getSourcePoint(),this.getTargetPoint()],e=this.vertices();return 0<e.length&&Array.prototype.push.apply(t,e.map(E)),new D(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var i=this.getSourceElement(),n=this.getTargetElement(),r=this.getParentCell();i&&n&&(e=i===n||i.isEmbeddedIn(n)?n:n.isEmbeddedIn(i)?i:this.graph.getCommonAncestor(i,n)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.attributes,i=e.source,n=e.target,r=i.id,o=n.id;if(!r||!o)return!1;var s=r===o;if(!s&&t.deep&&this.graph){var a=this.getSourceCell(),l=this.getTargetCell();s=a.isEmbeddedIn(l)||l.isEmbeddedIn(a)}return s},getSourceCell:function(){var t=this.graph,e=this.attributes.source;return e&&e.id&&t&&t.getCell(e.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){var t=this.graph,e=this.attributes.target;return e&&e.id&&t&&t.getCell(e.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=ge(t)||ce(t)?t:t.id,i=this.getRelationshipAncestor();return!!i&&(i.id===e||i.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var i=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&i}}),Ue=function(t){var e=Ot(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Pe,this.portLabelLayoutNamespace=Re,this._init(e)};Ue.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(t,r){var e=this.getGroup(t),i=this.getPortsByGroup(t),n=e.position||{},o=n.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=n.args||{},l=i.map(function(t){return t&&t.position&&t.position.args}),c=s[o](l,r,a),g={ports:i,result:[]};return Ut(c).reduce(function(t,e,i){var n=t.ports[i];return t.result.push({portId:n.id,portTransformation:e,labelTransformation:this._getPortLabelLayout(n,E(e),r),portAttrs:n.attrs,portSize:n.size,labelSize:n.label.size}),t}.bind(this),g),g.result},_getPortLabelLayout:function(t,e,i){var n=this.portLabelLayoutNamespace,r=t.label.position.name||"left";return n[r]?n[r](e,i,t.label.position.args):null},_init:function(t){if(le(t.groups))for(var e=Object.keys(t.groups),i=0,n=e.length;i<n;i++){var r=e[i];this.groups[r]=this._evaluateGroup(t.groups[r])}for(var o=Ut(t.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return se(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Tt({},t),i=this.getGroup(t.group);return e.markup=e.markup||i.markup,e.attrs=se({},i.attrs,e.attrs),e.position=this._createPositionNode(i,e),e.label=se({},i.label,this._getLabel(e)),e.z=this._getZIndex(i,e),e.size=Tt({},i.size,e.size),e},_getZIndex:function(t,e){return ce(e.z)?e.z:ce(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return se({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var i,n={};Rt(t)?(i="fn",n.fn=t):ge(t)?i=t:void 0===t?i=e?"left":null:Array.isArray(t)?(i="absolute",n.x=t[0],n.y=t[1]):le(t)&&(i=t.name,Tt(n,t.args));var r={args:n};return i&&(r.name=i),r},_getLabel:function(t,e){var i=t.label||{},n=i;return n.position=this._getPosition(i.position,e),n}};var Xe={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Ut(t.items).forEach(function(t){e[t.id]=!0});var i=this.previous("ports")||{},n={};Ut(i.items).forEach(function(t){e[t.id]||(n[t.id]=!0)});var r=this.graph;r&&!Et(n)&&(r.getConnectedLinks(this,{inbound:!0}).forEach(function(t){n[t.get("target").port]&&t.remove()}),r.getConnectedLinks(this,{outbound:!0}).forEach(function(t){n[t.get("source").port]&&t.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&0<t.length},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return Ot(this.prop("ports/items"))||[]},getGroupPorts:function(e){var t=Ut(this.prop(["ports","items"])).filter(function(t){return t.group===e});return Ot(t)},getPort:function(e){return Ot(Ut(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,H(this.size())).reduce(function(t,e){var i=e.portTransformation;return t[e.portId]={x:i.x,y:i.y,angle:i.angle},t},{})},getPortIndex:function(t){var e=le(t)?t.id:t;return this._isValidPortId(e)?Ut(this.prop("ports/items")).findIndex(function(t){return t.id===e}):-1},addPort:function(t,e){if(!le(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var i=Tt([],this.prop("ports/items"));return i.push(t),this.prop("ports/items",i,e),this},portProp:function(t,e,i,n){var r=this.getPortIndex(t);if(-1===r)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",r].concat(e):ge(e)?o[0]=["ports/items/",r,"/",e].join(""):(o=["ports/items/"+r],Wt(e)&&(o.push(e),o.push(i))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],i=Ut((t=t||{}).items);return i.forEach(function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())},this),Gt(i,"id").length!==i.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!le(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Tt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){var i=e||{},n=this.getPortIndex(t);if(-1!==n){var r=Tt([],this.prop(["ports","items"]));r.splice(n,1),i.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],r,i),this.stopBatch("port-remove")}return this},removePorts:function(t,e){var i,n;if(Array.isArray(t)){if(i=e||{},0===t.length)return this.this;n=Tt([],this.prop(["ports","items"])).filter(function(i){return!t.some(function(t){var e=le(t)?t.id:t;return i.id===e})})}else i=t||{},n=[];return this.startBatch("port-remove"),i.rewrite=!0,this.prop(["ports","items"],n,i),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(0<e.length)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new Ue(this.get("ports"));var i=this._portSettingsData.getPorts();if(t){var n=i.filter(function(e){if(!t.find(function(t){return t.id===e.id}))return e}),r=t.filter(function(e){if(!i.find(function(t){return t.id===e.id}))return e});0<r.length&&this.trigger("ports:remove",this,r),0<n.length&&this.trigger("ports:add",this,n)}}},Fe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var i=[],n=this._getContainerElement(),t=0,e=n.node.childNodes.length;t<e;t++)i.push(n.node.childNodes[t]);var r=Ft(this.model._portSettingsData.getPorts(),"z");Ut(r.auto).forEach(function(t){var e=this._getPortElement(t);n.append(e),i.push(e)},this);for(var o=Object.keys(r),s=0;s<o.length;s++){var a=o[s];if("auto"!==a){var l=parseInt(a,10);this._appendPorts(r[a],l,i)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,i){var n=this._getContainerElement(),r=Ut(t).map(this._getPortElement,this);i[e]||e<0?q(i[Math.max(e,0)]).before(r):n.append(r)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){var i=this._portElementsCache[t];if(!i)return null;var n=i.portContentElement.node,r=i.portContentSelectors;return this.findBySelector(e,n,r)[0]},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Zt(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e,i,n,r=q(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(t);if(Array.isArray(o)){var s=this.parseDOMJSON(o,r.node),a=s.fragment;e=1<a.childNodes.length?q("g").append(a):q(a.firstChild),n=s.selectors}else e=q(o),Array.isArray(e)&&(e=q("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});var l,c,g=this._getPortLabelMarkup(t.label);if(Array.isArray(g)){var h=this.parseDOMJSON(g,r.node),u=h.fragment;i=1<u.childNodes.length?q("g").append(u):q(u.firstChild),l=h.selectors}else i=q(g),Array.isArray(i)&&(i=q("g").append(i));if(!i)throw new Error("ElementView: Invalid port label markup.");if(n&&l){for(var d in l)if(n[d]&&d!==this.selector)throw new Error("ElementView: selectors within port must be unique.");c=Tt({},n,l)}else c=n||l;return r.append([e.addClass("joint-port-body"),i.addClass("joint-port-label")]),this._portElementsCache[t.id]={portElement:r,portLabelElement:i,portSelectors:c,portLabelSelectors:l,portContentElement:e,portContentSelectors:n},r},_updatePortGroup:function(t){for(var e=H(this.model.size()),i=this.model._portSettingsData.getGroupPortsMetrics(t,e),n=0,r=i.length;n<r;n++){var o=i[n],s=o.portId,a=this._portElementsCache[s]||{},l=o.portTransformation;this.applyPortTransform(a.portElement,l),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new H(o.portSize),selectors:a.portSelectors});var c=o.labelTransformation;c&&(this.applyPortTransform(a.portLabelElement,c,-l.angle||0),this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new H(o.labelSize),selectors:a.portLabelSelectors}))}},applyPortTransform:function(t,e,i){var n=q.createSVGMatrix().rotate(i||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(n,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ve=Se.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Se.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,i){var n=ce(e);if((i=(n?i:t)||{}).parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var r=this.getParentCell(),o=r&&!r.isLink()?r.get("position"):{x:0,y:0}}if(n){if(i.parentRelative&&(t+=o.x,e+=o.y),i.deep){var s=this.get("position");this.translate(t-s.x,e-s.y,i)}else this.set("position",{x:t,y:e},i);return this}var a=E(this.get("position"));return i.parentRelative?a.difference(o):a},translate:function(t,e,i){if(e=e||0,0===(t=t||0)&&0===e)return this;(i=i||{}).translateBy=i.translateBy||this.id;var n=this.get("position")||{x:0,y:0};if(i.restrictedArea&&i.translateBy===this.id){var r=this.getBBox({deep:!0}),o=i.restrictedArea,s=n.x-r.x,a=n.y-r.y,l=Math.max(o.x+s,Math.min(o.x+o.width+s-r.width,n.x+t)),c=Math.max(o.y+a,Math.min(o.y+o.height+a-r.height,n.y+e));t=l-n.x,e=c-n.y}var g={x:n.x+t,y:n.y+e};return i.tx=t,i.ty=e,i.transition?(le(i.transition)||(i.transition={}),this.transition("position",g,Tt({},i.transition,{valueFunction:bt.object})),Zt(this.getEmbeddedCells(),"translate",t,e,i)):(this.startBatch("translate",i),this.set("position",g,i),Zt(this.getEmbeddedCells(),"translate",t,e,i),this.stopBatch("translate",i)),this},size:function(t,e,i){var n=this.get("size");return void 0===t?{width:n.width,height:n.height}:(le(t)&&(i=e,e=ce(t.height)?t.height:n.height,t=ce(t.width)?t.width:n.width),this.resize(t,e,i))},resize:function(t,e,i){if(i=i||{},this.startBatch("resize",i),i.direction){var n=this.get("size");switch(i.direction){case"left":case"right":e=n.height;break;case"top":case"bottom":t=n.width}var r=C(this.get("angle")||0),o={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(o+=Math.floor((r+45)/90),o%=4);var s=this.getBBox(),a=s[["bottomLeft","corner","topRight","origin"][o]](),l=E(a).rotate(s.center(),-r),c=Math.sqrt(t*t+e*e)/2,g=o*Math.PI/2;g+=Math.atan(o%2==0?e/t:t/e),g-=y(r);var h=E.fromPolar(c,g,l),u=E(h).offset(t/-2,e/-2);this.set("size",{width:t,height:e},i),this.position(u.x,u.y,i)}else this.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this},scale:function(t,e,i,n){var r=this.getBBox().scale(t,e,i);return this.startBatch("scale",n),this.position(r.x,r.y,n),this.resize(r.width,r.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t){void 0===t&&(t={});var e=this.graph;if(!e)throw new Error("Element must be part of a graph.");var i=this.getEmbeddedCells().filter(function(t){return t.isElement()});if(0===i.length)return this;this.startBatch("fit-embeds",t),t.deep&&Zt(i,"fitEmbeds",t);var n=wt(t.padding),r=n.left,o=n.right,s=n.top,a=n.bottom,l=e.getCellsBBox(i),c=l.x,g=l.y,h=l.width,u=l.height;return c-=r,g-=s,h+=r+o,u+=a+s,this.set({position:{x:c,y:g},size:{width:h,height:u}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,i,n){if(i){var r=this.getBBox().center(),o=this.get("size"),s=this.get("position");r.rotate(i,this.get("angle")-t);var a=r.x-o.width/2-s.x,l=r.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:i}),this.position(s.x+a,s.y+l,n),this.rotate(t,e,null,n),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,n);return this},angle:function(){return C(this.get("angle")||0)},getBBox:function(t){if((t=t||{}).deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var i=this.get("position"),n=this.get("size");return new H(i.x,i.y,n.width,n.height)},getPointFromConnectedLink:function(t,e){var i=this.getBBox(),n=i.center(),r=t.get(e);if(!r)return n;var o=r.port;if(!o||!this.hasPort(o))return n;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),l=new E(a[o]).offset(i.origin()),c=this.angle();return c&&l.rotate(n,-c),l}});Tt(Ve.prototype,Xe);var Je=s.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=void 0!==joint&&qt(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var i=e.collection,n=i.cellNamespace,r=new("link"===t.type?We:rt(n,t.type,".")||Ve)(t,e);return e.dry||(r.graph=i.graph),r},comparator:function(t){return t.get("z")||0}}),He=s.Model.extend({_batches:{},initialize:function(t,e){var i=new Je([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});s.Model.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.attributes,i=e.source,n=e.target;i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.attributes,i=e.source,n=e.target;i.id&&this._out[i.id]&&this._out[i.id][t.id]&&delete this._out[i.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var i=t.attributes.source;i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var i=t.get("target");i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=s.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,i){var n;return"object"==typeof t?(n=t,i=e):(n={})[t]=e,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,i),n=te(n,"cells")),s.Model.prototype.set.call(this,n,i)},clear:function(t){t=Tt({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);for(var i=e.sortBy(function(t){return t.isLink()?1:2});i.shift().remove(t),0<i.length;);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var i;if(t instanceof s.Model?(i=t.attributes,t.graph||e&&e.dry||(t.graph=this)):i=t,!ge(i.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof s.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=Jt(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(t){this.addCell(t,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var i=Ut(t).map(function(t){return this._prepareCell(t,e)},this);return this.get("cells").reset(i,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),Zt(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,i){(i=i||{}).clear||(i.disconnectLinks?this.disconnectLinks(t,i):this.removeLinks(t,i)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return Object.keys(this._nodes).map(this.getCell,this)},getLinks:function(){return Object.keys(this._edges).map(this.getCell,this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,a){var r=(a=a||{}).indirect,o=a.inbound,s=a.outbound;void 0===o&&void 0===s&&(o=s=!0);var l=[],c={};function g(n,t){if(ne(n.getOutboundEdges(t.id),function(t,e){if(!c[e]){var i=n.getCell(e);l.push(i),c[e]=!0,r&&(o&&h(n,i),s&&g(n,i))}}.bind(n)),r&&t.isLink()){var e=t.getTargetCell();e&&e.isLink()&&(c[e.id]||(l.push(e),g(n,e)))}}function h(n,t){if(ne(n.getInboundEdges(t.id),function(t,e){if(!c[e]){var i=n.getCell(e);l.push(i),c[e]=!0,r&&(o&&h(n,i),s&&g(n,i))}}.bind(n)),r&&t.isLink()){var e=t.getSourceCell();e&&e.isLink()&&(c[e.id]||(l.push(e),h(n,e)))}}if(s&&g(this,t),o&&h(this,t),a.deep){var e=t.getEmbeddedCells({deep:!0}),u={};e.forEach(function(t){t.isElement()&&(u[t.id]=!0)}),e.forEach(function(t){t.isLink()||(s&&ne(this.getOutboundEdges(t.id),function(t,e){if(!c[e]){var i=this.getCell(e).attributes,n=i.source,r=i.target,o=n.id,s=r.id;if(!a.includeEnclosed&&o&&u[o]&&s&&u[s])return;l.push(this.getCell(e)),c[e]=!0}}.bind(this)),o&&ne(this.getInboundEdges(t.id),function(t,e){if(!c[e]){var i=this.getCell(e).attributes,n=i.source,r=i.target,o=n.id,s=r.id;if(!a.includeEnclosed&&o&&u[o]&&s&&u[s])return;l.push(this.getCell(e)),c[e]=!0}}.bind(this)))},this)}return l},getNeighbors:function(l,c){c||(c={});var g=c.inbound,h=c.outbound;void 0===g&&void 0===h&&(g=h=!0);var t=this.getConnectedLinks(l,c).reduce(function(t,e){var i=e.attributes,n=i.source,r=i.target,o=e.hasLoop(c);if(g&&qt(n,"id")&&!t[n.id]){var s=this.getCell(n.id);s.isElement()&&(!o&&(!s||s===l||c.deep&&s.isEmbeddedIn(l))||(t[n.id]=s))}if(h&&qt(r,"id")&&!t[r.id]){var a=this.getCell(r.id);a.isElement()&&(!o&&(!a||a===l||c.deep&&a.isEmbeddedIn(l))||(t[r.id]=a))}return t}.bind(this),{});if(l.isLink()){if(g){var e=l.getSourceCell();e&&e.isElement()&&!t[e.id]&&(t[e.id]=e)}if(h){var i=l.getTargetCell();i&&i.isElement()&&!t[i.id]&&(t[i.id]=i)}}return Ut(t)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(t){for(var e=[],i=t.get("parent");i;)e.push(i),i=this.getCell(i).get("parent");return e},this);t=t.sort(function(t,e){return t.length-e.length});var e=Ut(t.shift()).find(function(e){return t.every(function(t){return t.includes(e)})});return this.getCell(e)},getSuccessors:function(e,t){t=t||{};var i=[];return this.search(e,function(t){t!==e&&i.push(t)},Tt({},t,{outbound:!0})),i},cloneCells:ue,cloneSubgraph:function(t,e){var i=this.getSubgraph(t,e);return this.cloneCells(i)},getSubgraph:function(t,e){e=e||{};var s=[],a={},l=[],i=[];return Ut(t).forEach(function(t){(a[t.id]||(s.push(t),(a[t.id]=t).isLink()?i.push(t):l.push(t)),e.deep)&&t.getEmbeddedCells({deep:!0}).forEach(function(t){a[t.id]||(s.push(t),(a[t.id]=t).isLink()?i.push(t):l.push(t))})}),i.forEach(function(t){var e=t.attributes,i=e.source,n=e.target;if(i.id&&!a[i.id]){var r=this.getCell(i.id);s.push(r),a[r.id]=r,l.push(r)}if(n.id&&!a[n.id]){var o=this.getCell(n.id);s.push(this.getCell(n.id)),a[o.id]=o,l.push(o)}},this),l.forEach(function(t){this.getConnectedLinks(t,e).forEach(function(t){var e=t.attributes,i=e.source,n=e.target;!a[t.id]&&i.id&&a[i.id]&&n.id&&a[n.id]&&(s.push(t),a[t.id]=t)})},this),s},getPredecessors:function(e,t){t=t||{};var i=[];return this.search(e,function(t){t!==e&&i.push(t)},Tt({},t,{inbound:!0})),i},search:function(t,e,i){(i=i||{}).breadthFirst?this.bfs(t,e,i):this.dfs(t,e,i)},bfs:function(t,e,i){void 0===i&&(i={});var n={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var s=o.shift();if(!n[s.id]&&!(n[s.id]=!0)!==e.call(this,s,r[s.id]))for(var a=this.getNeighbors(s,i),l=0,c=a.length;l<c;l++){var g=a[l];r[g.id]=r[s.id]+1,o.push(g)}}},dfs:function(t,e,i){void 0===i&&(i={});var n={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var s=o.pop();if(!n[s.id]&&!(n[s.id]=!0)!==e.call(this,s,r[s.id]))for(var a=this.getNeighbors(s,i),l=o.length,c=0,g=a.length;c<g;c++){var h=a[c];r[h.id]=r[s.id]+1,o.splice(l,0,h)}}},getSources:function(){var i=[];return ne(this._nodes,function(t,e){this._in[e]&&!Et(this._in[e])||i.push(this.getCell(e))}.bind(this)),i},getSinks:function(){var i=[];return ne(this._nodes,function(t,e){this._out[e]&&!Et(this._out[e])||i.push(this.getCell(e))}.bind(this)),i},isSource:function(t){return!this._in[t.id]||Et(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Et(this._out[t.id])},isSuccessor:function(e,i){var n=!1;return this.search(e,function(t){if(t===i&&t!==e)return!(n=!0)},{outbound:!0}),n},isPredecessor:function(e,i){var n=!1;return this.search(e,function(t){if(t===i&&t!==e)return!(n=!0)},{inbound:!0}),n},isNeighbor:function(t,r,e){var o=(e=e||{}).inbound,s=e.outbound;void 0===o&&void 0===s&&(o=s=!0);var a=!1;return this.getConnectedLinks(t,e).forEach(function(t){var e=t.attributes,i=e.source,n=e.target;return o&&qt(i,"id")&&i.id===r.id?!(a=!0):s&&qt(n,"id")&&n.id===r.id?!(a=!0):void 0}),a},disconnectLinks:function(e,i){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},i)})},removeLinks:function(t,e){Zt(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(e){return this.getElements().filter(function(t){return t.getBBox().containsPoint(e)})},findModelsInArea:function(e,t){e=M(e);var i=(t=jt(t||{},{strict:!1})).strict?"containsRect":"intersect";return this.getElements().filter(function(t){return e[i](t.getBBox())})},findModelsUnderElement:function(e,t){t=jt(t||{},{searchBy:"bbox"});var i=e.getBBox();return("bbox"===t.searchBy?this.findModelsInArea(i):this.findModelsFromPoint(i[t.searchBy]())).filter(function(t){return e.id!==t.id&&!t.isEmbeddedIn(e)})},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,r){return r||(r={}),Ut(t).reduce(function(t,e){var i=e.getBBox(r);if(!i)return t;var n=e.angle();return n&&(i=i.bbox(n)),t?t.union(i):i},null)},translate:function(t,e,i){var n=this.getCells().filter(function(t){return!t.isEmbedded()});return Zt(n,"translate",t,e,i),this},resize:function(t,e,i){return this.resizeCells(t,e,this.getCells(),i)},resizeCells:function(t,e,i,n){var r=this.getCellsBBox(i);if(r){var o=Math.max(t/r.width,0),s=Math.max(e/r.height,0);Zt(i,"scale",o,s,r.origin(),n)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Tt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Tt({},e,{batchName:t}))},hasActiveBatch:function(t){var e=this._batches;return(0===arguments.length?Ut(e):Array.isArray(t)?t:[t]).some(function(t){return 0<e[t]})}},{validations:{multiLinks:function(t,e){var i=e.attributes,r=i.source,o=i.target;if(r.id&&o.id){var n=e.getSourceCell();if(n)if(1<t.getConnectedLinks(n,{outbound:!0}).filter(function(t){var e=t.attributes,i=e.source,n=e.target;return i&&i.id===r.id&&(!i.port||i.port===r.port)&&n&&n.id===o.id&&(!n.port||n.port===o.port)}).length)return!1}return!0},linkPinning:function(t,e){var i=e.attributes,n=i.source,r=i.target;return n.id&&r.id}}});ke(He.prototype,["resetCells","addCells","removeCells"],De.cells);var _e={},Qe=s.View.extend({options:{},theme:null,themeClassNamePrefix:tt("theme-"),requireSetThemeOverride:!1,defaultTheme:$.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Tt({},this.options,t),s.View.call(this,t)},initialize:function(){(_e[this.cid]=this).setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=$t(this,"children")),t){var e=this.svgElement,i=q.namespace[e?"svg":"xhtml"],n=it(t,i);(e?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(t,e){for(var i=e;i&&1===i.nodeType;){var n=i.getAttribute(t);if(n)return n;if(i===this.el)return null;i=i.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement($t(this,"el"));else{var t=$t(this,"tagName"),e=Tt({},$t(this,"attributes")),i=Tt({},$t(this,"style"));this.id&&(e.id=$t(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(i)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(q.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof s.$?t:s.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=q(this.el))},_ensureElClassName:function(){var t=$t(this,"className");if(t){var e=tt(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),_e[this.cid]=null,s.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,i){if(!e)return this;i||(i={});var n=this.getEventNamespace();for(var r in e){var o=e[r];"function"!=typeof o&&(o=this[o]),o&&S(t).on(r+n,i,o.bind(this))}return this},undelegateElementEvents:function(t){return S(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=$t(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var i=t.data,n="__"+this.cid+"__";return void 0===e?i&&i[n]||{}:(i||(i=t.data={}),i[n]||(i[n]={}),Tt(i[n],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Tt({},t[0])||{},i=t[1]&&Tt({},t[1])||{},n=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof n&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},e.render.__render__=n,s.View.extend.call(this,e,i)}}),Ke={views:_e,View:Qe},qe=Qe.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var n=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(t,e,i){n.push("type-"+i.slice(0,e+1).join("-"))}),n.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,i,n={},r={},o=0,s=this.presentationAttributes;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];for(Array.isArray(l)||(l=[l]),t=0,e=l.length;t<e;t++){var c=n[i=l[t]];c||(c=n[i]=1<<o++),r[a]|=c}}var g=this.initFlag;for(Array.isArray(g)||(g=[g]),t=0,e=g.length;t<e;t++)n[i=g[t]]||(n[i]=1<<o++);if(25<o)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=n,this._presentationAttributes=r},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var i=0;if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i|=e[t[n]];else i|=e[t];return i},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||ct(this),Qe.call(this,t)},initialize:function(){this.setFlags(),Qe.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var i=t.getChangeFlag(this._presentationAttributes);if(!e.updateHandled&&i){e.dirty&&this.hasFlag(i,"UPDATE")&&(i|=this.getFlag("RENDER")),e.tool&&(e.async=!1);var n=this.paper;n&&n.requestViewUpdate(this,i,this.UPDATE_PRIORITY,e)}},parseDOMJSON:function(t,e){var i=it(t),n=i.selectors,r=i.groupSelectors;for(var o in r){if(n[o])throw new Error("dia.CellView: ambiguous group selector");n[o]=r[o]}if(e){var s=this.selector;if(n[s])throw new Error("dia.CellView: ambiguous root selector.");n[s]=e}return{fragment:i.fragment,selectors:n}},can:function(t){var e=Rt(this.options.interactive)?this.options.interactive(this):this.options.interactive;return le(e)&&!1!==e[t]||ae(e)&&!1!==e},findBySelector:function(t,e,i){if(e||(e=this.el),i||(i=this.selectors),!t||"."===t)return[e];if(i){var n=i[t];if(n)return Array.isArray(n)?n:[n]}return $.useCSSSelectors?S(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var i=this.model;e=i.getBBox().bbox(i.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),i=this.getNodeMatrix(t),n=this.getRootTranslateMatrix(),r=this.getRootRotateMatrix();return q.transformRect(e,n.multiply(r).multiply(i))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),i=this.getNodeMatrix(t),n=this.getRootTranslateMatrix();return q.transformRect(e,n.multiply(i))},getRootTranslateMatrix:function(){var t=this.model.position();return q.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=q.createSVGMatrix(),e=this.model,i=e.angle();if(i){var n=e.getBBox(),r=n.width/2,o=n.height/2;t=t.translate(r,o).rotate(i).translate(-r,-o)}return t},highlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!==this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t),i=this.$el;0===e.length&&(e=i);do{var n=e.attr("magnet");if((n||e.is(i))&&"false"!==n)return e[0];e=e.parent()}while(0<e.length)},getSelector:function(t,e){var i;if(t===this.el)return"string"==typeof e&&(i="> "+e),i;if(t){var n=q(t).index()+1;i=t.tagName+":nth-child("+n+")",e&&(i+=" > "+e),i=this.getSelector(t.parentNode,i)}return i},getLinkEnd:function(t){for(var e,i=[],n=arguments.length-1;0<n--;)i[n]=arguments[n+1];var r=this.model,o=r.id,s=this.findAttribute("port",t),a=t.getAttribute("joint-selector"),l={id:o};return null!=a&&(l.magnet=a),null!=s?(l.port=s,r.hasPort(s)||a||(l.selector=this.getSelector(t))):null==a&&this.el!==t&&(l.selector=this.getSelector(t)),(e=this).customizeLinkEnd.apply(e,[l,t].concat(i))},customizeLinkEnd:function(t,e,i,n,r,o){var s=this.paper,a=s.options.connectionStrategy;if("function"==typeof a){var l=a.call(s,t,this,e,new E(i,n),r,o,s);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e=this.el,i=t.port,n=t.magnet,r=this.model;return null!=i&&r.isElement()&&r.hasPort(i)?this.findPortNode(i,n)||e:(n||(n=t.selector),n||null==i||(n='[port="'+i+'"]'),this.findBySelector(n,e,this.selectors)[0])},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Et(e)||(t instanceof SVGElement?q(t).attr(e):S(t).attr(e))},processNodeAttributes:function(t,e){var i,n,r,o,s,a,l,c,g,h=[];for(i in e)e.hasOwnProperty(i)&&(n=e[i],!(r=this.getAttributeDefinition(i))||Rt(r.qualify)&&!r.qualify.call(this,n,t,e)?(a||(a={}),a[gt(i)]=n):(ge(r.set)&&(a||(a={}),a[r.set]=n),null!==n&&h.push(i,r)));for(o=0,s=h.length;o<s;o+=2)i=h[o],r=h[o+1],n=e[i],Rt(r.set)&&(l||(l={}),l[i]=n),Rt(r.position)&&(c||(c={}),c[i]=n),Rt(r.offset)&&(g||(g={}),g[i]=n);return{raw:e,normal:a,set:l,position:c,offset:g}},updateRelativeAttributes:function(t,e,i,n){var r,o;n||(n={});var s=e.raw||{},a=e.normal||{},l=e.set,c=e.position,g=e.offset;for(r in l){o=l[r];var h=this.getAttributeDefinition(r).set.call(this,o,i.clone(),t,s);le(h)?Tt(a,h):void 0!==h&&(a[r]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,a);else{var u,d,f,p=a.transform,I=q.transformStringToMatrix(p),m=E(I.e,I.f);if(p&&(a=te(a,"transform"),I.e=I.f=0),c||g){var A=this.getNodeScale(t,n.scalableNode);u=A.sx,d=A.sy}var v=!1;for(r in c)o=c[r],(f=this.getAttributeDefinition(r).position.call(this,o,i.clone(),t,s))&&(m.offset(E(f).scale(u,d)),v||(v=!0));this.setNodeAttributes(t,a);var C=!1;if(g){var w=this.getNodeBoundingRect(t);if(0<w.width&&0<w.height){var y=q.transformRect(w,I).scale(1/u,1/d);for(r in g)o=g[r],(f=this.getAttributeDefinition(r).offset.call(this,o,y,t,s))&&(m.offset(E(f).scale(u,d)),C||(C=!0))}}(void 0!==p||v||C)&&(m.round(1),I.e=m.x,I.f=m.y,t.setAttribute("transform",q.matrixToTransformString(I)))}},getNodeScale:function(t,e){var i,n;if(e&&e.contains(t)){var r=e.scale();i=1/r.sx,n=1/r.sy}else n=i=1;return{sx:i,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var i=q.ensureId(t),n=e[i];return n||(n=e[i]={}),n},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=q(t).getBBox()),new H(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var i=this.rotatableNode||this.el;e.magnetMatrix=q(t).getTransformToElement(i)}return q.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=q(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,i,n){var r,o,s,a,l={},c=[];for(var g in t)if(t.hasOwnProperty(g)&&(s=t[g],Wt(s))){var h=i[g]=this.findBySelector(g,e,n);for(r=0,o=h.length;r<o;r++){var u=h[r];a=q.ensureId(u);var d=n&&n[g]===u,f=l[a];if(f){f.array||(c.push(a),f.array=!0,f.attributes=[f.attributes],f.selectedLength=[f.selectedLength]);var p=f.attributes,I=f.selectedLength;if(d)p.unshift(s),I.unshift(-1);else{var m=Pt(I,o);p.splice(m,0,s),I.splice(m,0,o)}}else l[a]={attributes:s,selectedLength:d?-1:o,node:u,array:!1}}}for(r=0,o=c.length;r<o;r++)(s=l[a=c[r]]).attributes=se.apply(void 0,[{}].concat(s.attributes.reverse()));return l},getEventTarget:function(t,e){void 0===e&&(e={});var i=t.target,n=t.type,r=t.clientX;void 0===r&&(r=0);var o=t.clientY;return void 0===o&&(o=0),e.fromPoint||"touchmove"===n||"touchend"===n?document.elementFromPoint(r,o):i},updateDOMSubtreeAttributes:function(t,e,i){i||(i={}),i.rootBBox||(i.rootBBox=H()),i.selectors||(i.selectors=this.selectors);var n,r,o,s,a,l,c={},g={},h=[],u=i.roAttributes,d=this.findNodesAttributes(u||e,t,c,i.selectors),f=u?this.findNodesAttributes(e,t,c,i.selectors):d;for(var p in d)if(o=(s=d[p]).attributes,r=s.node,(a=this.processNodeAttributes(r,o)).set||a.position||a.offset){var I,m=f[p]&&f[p].attributes,A=m&&void 0===o.ref?m.ref:o.ref;if(A){if(!(I=(c[A]||this.findBySelector(A,t,i.selectors))[0]))throw new Error('dia.ElementView: "'+A+'" reference does not exist.')}else I=null;n={node:r,refNode:I,processedAttributes:a,allAttributes:m};var v=h.findIndex(function(t){return t.refNode===r});-1<v?h.splice(v,0,n):h.push(n)}else this.setNodeAttributes(r,a.normal);for(var C=0,w=h.length;C<w;C++){n=h[C],r=n.node,I=n.refNode;var y=q(i.rotatableNode),b=I?q.ensureId(I):"",N=!!y&&!!I&&y.contains(I),M=g[b];if(!M){var x=N?y:t;M=g[b]=I?q(I).getBBox({target:x}):i.rootBBox}u?(a=this.processNodeAttributes(r,n.allAttributes),this.mergeProcessedAttributes(a,n.processedAttributes)):a=n.processedAttributes;var S=M;N&&!y.contains(r)&&(l||(l=q.transformStringToMatrix(y.attr("transform"))),S=q.transformRect(M,l)),this.updateRelativeAttributes(r,a,S,i)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Tt(t.set,e.set),Tt(t.position,e.position),Tt(t.offset,e.offset);var i=t.normal&&t.normal.transform;void 0!==i&&e.normal&&(e.normal.transform=i),t.normal=e.normal},onRemove:function(){this.removeTools()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!!e&&(!t||e.getName()===t)},addTools:function(t){return this.removeTools(),t&&((this._toolsView=t).configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this)),t.mount()),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},pointerdblclick:function(t,e,i){this.notify("cell:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){this.notify("cell:pointerclick",t,e,i)},contextmenu:function(t,e,i){this.notify("cell:contextmenu",t,e,i)},pointerdown:function(t,e,i){var n=this.model,r=n.graph;r&&(n.startBatch("pointer"),this.eventData(t,{graph:r})),this.notify("cell:pointerdown",t,e,i)},pointermove:function(t,e,i){this.notify("cell:pointermove",t,e,i)},pointerup:function(t,e,i){var n=this.eventData(t).graph;this.notify("cell:pointerup",t,e,i),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,i,n){this.notify("cell:mousewheel",t,e,i,n)},onevent:function(t,e,i,n){this.notify(e,t,i,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave:function(t){var e=this.paper;e.isAsync()&&e.dumpView(this);var i=this.getEventTarget(t,{fromPoint:!0}),n=e.findView(i);n!==this&&(this.mouseleave(t),n&&n.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{addPresentationAttributes:function(t){return se({},this.prototype.presentationAttributes,t,function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?Gt(t.concat(e)):void 0})}}),$e=qe.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=qe.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){qe.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:["UPDATE"],position:["TRANSLATE","TOOLS"],size:["RESIZE","PORTS","TOOLS"],angle:["ROTATE","TOOLS"],markup:["RENDER"],ports:["PORTS"]},initFlag:["RENDER"],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){var i=$.useCSSSelectors;return this.hasFlag(t,"PORTS")&&(this._removePorts(),this._cleanPortsCache()),this.hasFlag(t,"RENDER")?(this.render(),this.updateTools(e),t=this.removeFlag(t,["RENDER","UPDATE","RESIZE","TRANSLATE","ROTATE","PORTS"])):(this.hasFlag(t,"RESIZE")&&(this.resize(e),t=this.removeFlag(t,["RESIZE","UPDATE"])),this.hasFlag(t,"UPDATE")&&(this.update(this.model,null,e),t=this.removeFlag(t,"UPDATE"),i&&(t=this.removeFlag(t,"PORTS"))),this.hasFlag(t,"TRANSLATE")&&(this.translate(),t=this.removeFlag(t,"TRANSLATE")),this.hasFlag(t,"ROTATE")&&(this.rotate(),t=this.removeFlag(t,"ROTATE")),this.hasFlag(t,"PORTS")&&(this._renderPorts(),t=this.removeFlag(t,"PORTS"))),this.hasFlag(t,"TOOLS")&&(this.updateTools(e),t=this.removeFlag(t,"TOOLS")),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();var i=$.useCSSSelectors;i&&this._removePorts();var n=this.model,r=n.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:new H(n.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===r?null:e}),i&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),i=this.selectors=e.selectors;this.rotatableNode=q(i[this.rotatableSelector])||null,this.scalableNode=q(i[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(q(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),$.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var i=t.size;return"rotate("+e+","+i.width/2+","+i.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,i=e.angle(),n=e.size(),r=this.scalableNode,o=!1;0<r.node.getElementsByTagName("path").length&&(o=!0);var s=r.getBBox({recursive:o}),a=n.width/(s.width||1),l=n.height/(s.height||1);r.attr("transform","scale("+a+","+l+")");var c=this.rotatableNode,g=c&&c.attr("transform");if(g){c.attr("transform",g+" rotate("+-i+","+n.width/2+","+n.height/2+")");var h=r.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},Tt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t){t||(t={});var e=t.model||this.model,i=(t.paper||this.paper).model;e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});var n=i.getElements().reduce(function(t,e){return Math.max(t,e.attributes.z||0)},0);i.getConnectedLinks(e,{deep:!0,includeEnclosed:!0}).forEach(function(t){t.attributes.z<=n&&t.set("z",n+1,{ui:!0})}),e.stopBatch("to-front");var r=e.parent();r&&i.getCell(r).unembed(e,{ui:!0})},processEmbedding:function(t){t||(t={});var e=t.model||this.model,i=t.paper||this.paper,n=i.options,r=[];Rt(n.findParentBy)?r=Ut(n.findParentBy.call(i.model,this)).filter(function(t){return t instanceof Se&&this.model.id!==t.id&&!t.isEmbeddedIn(this.model)}.bind(this)):r=i.model.findModelsUnderElement(e,{searchBy:n.findParentBy});n.frontParentOnly&&(r=r.slice(-1));for(var o=null,s=t.candidateEmbedView,a=r.length-1;0<=a;a--){var l=r[a];if(s&&s.model.id==l.id){o=s;break}var c=l.findView(i);if(n.validateEmbedding.call(i,this,c)){o=c;break}}o&&o!=s&&(this.clearEmbedding(t),t.candidateEmbedView=o.highlight(null,{embedding:!0})),!o&&s&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(null,{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t){t||(t={});var e=t.candidateEmbedView,i=t.model||this.model,n=t.paper||this.paper;e&&(e.model.embed(i,{ui:!0}),e.unhighlight(null,{embedding:!0}),t.candidateEmbedView=null),Zt(n.model.getConnectedLinks(i,{deep:!0}),"reparent",{ui:!0})},getDelegatedView:function(){for(var t=this,e=t.model,i=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=i.findViewByModel(e)}return null},notifyPointerdown:function(t,e,i){qe.prototype.pointerdown.call(this,t,e,i),this.notify("element:pointerdown",t,e,i)},notifyPointermove:function(t,e,i){qe.prototype.pointermove.call(this,t,e,i),this.notify("element:pointermove",t,e,i)},notifyPointerup:function(t,e,i){this.notify("element:pointerup",t,e,i),qe.prototype.pointerup.call(this,t,e,i)},pointerdblclick:function(t,e,i){qe.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){qe.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,i)},contextmenu:function(t,e,i){qe.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,i)},pointerdown:function(t,e,i){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,i),this.dragStart(t,e,i))},pointermove:function(t,e,i){var n=this.eventData(t);switch(n.action){case"magnet":this.dragMagnet(t,e,i);break;case"move":(n.delegatedView||this).drag(t,e,i);default:this.notifyPointermove(t,e,i)}this.eventData(t,n)},pointerup:function(t,e,i){var n=this.eventData(t);switch(n.action){case"magnet":this.dragMagnetEnd(t,e,i);break;case"move":(n.delegatedView||this).dragEnd(t,e,i);default:this.notifyPointerup(t,e,i)}var r=n.targetMagnet;r&&this.magnetpointerclick(t,r,e,i),this.checkMouseleave(t)},mouseover:function(t){qe.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){qe.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){qe.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){qe.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,i,n){qe.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,i,n)},onmagnet:function(t,e,i){this.dragMagnetStart(t,e,i)},magnetpointerdblclick:function(t,e,i,n){this.notify("element:magnet:pointerdblclick",t,e,i,n)},magnetcontextmenu:function(t,e,i,n){this.notify("element:magnet:contextmenu",t,e,i,n)},dragStart:function(t,e,i){var n=this.getDelegatedView();n&&n.can("elementMove")&&(this.eventData(t,{action:"move",delegatedView:n}),n.eventData(t,{pointerOffset:n.model.position().difference(e,i),restrictedArea:this.paper.getRestrictedArea(n)}))},dragMagnetStart:function(t,e,i){if(this.can("addLinkFromMagnet")){var n=t.currentTarget,r=this.paper;this.eventData(t,{targetMagnet:n}),t.stopPropagation(),r.options.validateMagnet(this,n,t)?(r.options.magnetThreshold<=0&&this.dragLinkStart(t,n,e,i),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,i),r.delegateDragEvents(this,t.data)}},dragLinkStart:function(t,e,i,n){this.model.startBatch("add-link");var r=this.addLinkFromMagnet(e,i,n);r.notifyPointerdown(t,i,n),r.eventData(t,r.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:r})},addLinkFromMagnet:function(t,e,i){var n=this.paper,r=n.model,o=n.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,i,o,"source"),target:{x:e,y:i}}).addTo(r,{async:!1,ui:!0}),o.findView(n)},drag:function(t,e,i){var n=this.paper,r=n.options.gridSize,o=this.model,s=this.eventData(t),a=s.pointerOffset,l=s.restrictedArea,c=s.embedding,g=I(e+a.x,r),h=I(i+a.y,r);o.position(g,h,{restrictedArea:l,deep:!0,ui:!0}),n.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s)),this.eventData(t,{embedding:c})},dragMagnet:function(t,e,i){var n=this.eventData(t),r=n.linkView;if(r)r.pointermove(t,e,i);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(t),l=n.targetMagnet;if("onleave"===s){if(l===a||q(l).contains(a))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,l,e,i)}},dragEnd:function(t,e,i){var n=this.eventData(t);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(t,e,i){var n=this.eventData(t).linkView;n&&(n.pointerup(t,e,i),this.model.stopBatch("add-link"))},magnetpointerclick:function(t,e,i,n){var r=this.paper;r.eventData(t).mousemoved>r.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,i,n)}});Tt($e.prototype,Fe);var ti={N:"S",S:"N",E:"W",W:"E"},ei={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function ii(t,e,i){var n=new E(t.x,e.y);return i.containsPoint(n)&&(n=new E(e.x,t.y)),n}function ni(t,e){return t["W"===e||"E"===e?"width":"height"]}function ri(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function oi(t){return new H(t.x,t.y,0,0)}function si(t){var e=wt(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function ai(t,e){return t.sourceBBox.clone().moveAndExpand(si(e))}function li(t,e){return t.targetBBox.clone().moveAndExpand(si(e))}function ci(t,e,i){var n=new E(t.x,e.y),r=new E(e.x,t.y),o=ri(t,n),s=ri(t,r),a=ti[i],l=o===i||o!==a&&(s===a||s!==i)?n:r;return{points:[l],direction:ri(l,e)}}function gi(t,e,i){var n=ii(t,e,i);return{points:[n],direction:ri(n,e)}}function hi(e,t,i,n){var r,o={},s=[new E(e.x,t.y),new E(t.x,e.y)],a=s.filter(function(t){return!i.containsPoint(t)}),l=a.filter(function(t){return ri(t,e)!==n});if(0<l.length)r=(r=l.filter(function(t){return ri(e,t)===n}).pop())||l[0],o.points=[r],o.direction=ri(r,t);else{r=_t(s,a)[0];var c=new E(t).move(r,-ni(i,n)/2),g=ii(c,e,i);o.points=[g,c],o.direction=ri(c,t)}return o}function ui(t,e,i,n){var r=gi(e,t,n),o=r.points[0];if(i.containsPoint(o)){var s=(r=gi(t,e,i)).points[0];if(n.containsPoint(s)){var a=new E(t).move(s,-ni(i,ri(t,s))/2),l=new E(e).move(o,-ni(n,ri(e,o))/2),c=new B(a,l).midpoint(),g=gi(t,c,i),h=ci(c,e,g.direction);r.points=[g.points[0],h.points[0]],r.direction=h.direction}}return r}function di(t,e,i,n,r){var o,s,a,l={},c=i.union(n).inflate(1),g=c.center().distance(e)>c.center().distance(t),h=g?e:t,u=g?t:e;return s=ii(o=r?(o=E.fromPolar(c.width+c.height,ei[r],h),c.pointNearestToPoint(o).move(o,-1)):c.pointNearestToPoint(h).move(h,1),u,c),o.round().equals(s.round())?(s=E.fromPolar(c.width+c.height,y(o.theta(h))+Math.PI/2,u),a=ii(o,s=c.pointNearestToPoint(s).move(u,1).round(),c),l.points=g?[s,a,o]:[o,a,s]):l.points=g?[s,o]:[o,s],l.direction=ri(g?o:s,e),l}function fi(t,e,i){var n,r,o,s,a,l=ai(i,e),c=li(i,e),g=(r=e,(n=i).sourceAnchor?n.sourceAnchor:ai(n,r).center()),h=(s=e,(o=i).targetAnchor?o.targetAnchor:li(o,s).center());l=l.union(oi(g)),c=c.union(oi(h)),(t=Ut(t).map(E)).unshift(g),t.push(h);for(var u=[],d=0,f=t.length-1;d<f;d++){var p=null,I=t[d],m=t[d+1],A=!!ri(I,m);if(0===d)d+1===f?l.intersect(c.clone().inflate(1))?p=di(I,m,l,c):A||(p=ui(I,m,l,c)):l.containsPoint(m)?p=di(I,m,l,oi(m).moveAndExpand(si(e))):A||(p=gi(I,m,l));else if(d+1===f){var v=A&&ri(m,I)===a;c.containsPoint(I)||v?p=di(I,m,oi(I).moveAndExpand(si(e)),c,a):A||(p=hi(I,m,c,a))}else A||(p=ci(I,m,a));a=p?(Array.prototype.push.apply(u,p.points),p.direction):ri(I,m),d+1<f&&u.push(m)}return u}var pi={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},fallbackRouter:function(t,e,i){if(!Rt(fi))throw new Error("Manhattan requires the orthogonal router as default fallback.");return fi(t,Tt({},pi,e),i)},fallbackRoute:function(t,e,i){return null},draggingRoute:null};function Ii(t){this.map={},this.options=t,this.mapGridSize=100}function mi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Ai(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function vi(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Ci(t,e){return t.sourceAnchor?t.sourceAnchor:Ai(t,e).center()}function wi(t,e,i,n,r){var o,s,a,l,c,g,h,u,d,f,p=360/i,I=t.theta((o=t,s=e,a=n,l=r.step,c=s.x-o.x,g=s.y-o.y,h=c/a.x,u=g/a.y,d=h*l,f=u*l,new E(o.x+d,o.y+f))),m=C(I+p/2);return p*Math.floor(m/p)}function yi(t,e){var i=Math.abs(t-e);return 180<i?360-i:i}function bi(t,e){if(!t)return e;var i=Math.abs(t),n=Math.round(i/e);return n?e+(i-n*e)/n:i}function Ni(t,e){return t.round(e)}function Mi(t,e,i){return Ni((n=t.clone(),o=(r=e).source,s=I(n.x-o.x,r.x)+o.x,a=I(n.y-o.y,r.y)+o.y,new E(s,a)),i);var n,r,o,s,a}function xi(t){return t.clone().toString()}function Si(t){return new E(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function ki(t,e,i,n,r,o,s){for(var a,l=[],c=Si(r.difference(i)),g=xi(i),h=t[g];h;){var u=Si((a=e[g]).difference(h));u.equals(c)||(l.unshift(a),c=u),h=t[g=xi(h)]}var d=e[g];return Si(d.difference(n)).equals(c)||l.unshift(d),l}function Di(t,e){for(var i=1/0,n=0,r=e.length;n<r;n++){var o=t.manhattanDistance(e[n]);o<i&&(i=o)}return i}function zi(u,d,t,f,e){var p=e.precision,I=e.directionMap,m=u.difference(d.center()),i=le(I)?Object.keys(I):[],A=Ut(t),n=i.reduce(function(t,e){if(A.includes(e)){for(var i,n=I[e],r=new E(u.x+n.x*(Math.abs(m.x)+d.width),u.y+n.y*(Math.abs(m.y)+d.height)),o=new B(u,r).intersect(d)||[],s=o.length,a=null,l=0;l<s;l++){var c=o[l],g=u.squaredDistance(c);(void 0===i||i<g)&&(i=g,a=c)}if(a){var h=Mi(a,f,p);d.containsPoint(h)&&(h=Mi(h.offset(n.x*f.x,n.y*f.y),f,p)),t.push(h)}}return t},[]);return d.containsPoint(u)||n.push(Mi(u,f,p)),n}function Ti(t,e,i,n){var r,o,s,a,l=n.precision;r=Ni(t instanceof H?Ci(this,n).clone():t.clone(),l),o=Ni(e instanceof H?(s=this,a=n,s.targetAnchor?s.targetAnchor:vi(s,a).center()).clone():e.clone(),l);var c,g,h,u,d,f,p,I,m,A,v=(c=n.step,h=o,{source:(g=r).clone(),x:bi(h.x-g.x,c),y:bi(h.y-g.y,c)});if(f=t instanceof H?zi(u=r,t,n.startDirections,v,n):[u=r],p=e instanceof H?zi(d=o,e,n.endDirections,v,n):[d=o],f=f.filter(i.isPointAccessible,i),p=p.filter(i.isPointAccessible,i),0<f.length&&0<p.length){for(var C=new mi,w={},y={},b={},N=0,M=f.length;N<M;N++){var x=f[N],S=xi(x);C.add(S,Di(x,p)),w[S]=x,b[S]=0}var k,D,z=n.previousDirectionAngle,T=void 0===z,j=n.directions;I=v,A=(m=n).step,Ut(m.directions).forEach(function(t){t.gridOffsetX=t.offsetX/A*I.x,t.gridOffsetY=t.offsetY/A*I.y});for(var L=j.length,Z=Ut(p).reduce(function(t,e){var i=xi(e);return t.push(i),t},[]),P=n.maximumLoops;!C.isEmpty()&&0<P;){var G,B=C.pop(),O=w[B],E=y[B],Y=b[B],R=void 0===E,W=O.equals(u);G=R?T?W?null:wi(u,O,L,v,n):z:wi(E,O,L,v,n);var U=Yt(f,p);if(!(R&&U)&&0<=Z.indexOf(B))return n.previousDirectionAngle=G,ki(y,w,O,u,d);for(N=0;N<L;N++){var X=(k=j[N]).angle;if(D=yi(G,X),T&&W||!(D>n.maxAllowedDirectionChange)){var F=Mi(O.clone().offset(k.gridOffsetX,k.gridOffsetY),v,l),V=xi(F);if(!C.isClose(V)&&i.isPointAccessible(F)){if(0<=Z.indexOf(V))if(!F.equals(d))if(yi(X,wi(F,d,L,v,n))>n.maxAllowedDirectionChange)continue;var J=Y+k.cost+(W?0:n.penalties[D]);(!C.isOpen(V)||J<b[V])&&(w[V]=F,y[V]=O,b[V]=J,C.add(V,J+Di(F,p)))}}}P--}}return n.fallbackRoute.call(this,u,d,n)}function ji(t,e,i){!function(t){if(t.directions=$t(t,"directions"),t.penalties=$t(t,"penalties"),t.paddingBox=$t(t,"paddingBox"),t.padding=$t(t,"padding"),t.padding){var e=wt(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Ut(t.directions).forEach(function(t){var e=new E(0,0),i=new E(t.offsetX,t.offsetY);t.angle=C(e.theta(i))})}(e),i.options.perpendicular=!!e.perpendicular;for(var n,r,o=Ai(i,e),s=vi(i,e),a=Ci(i,e),l=new Ii(e).build(i.paper.model,i.model),c=Ut(t).map(E),g=[],h=a,u=0,d=c.length;u<=d;u++){var f=null;if(r=n||o,!(n=c[u]))if(n=s,(!i.model.get("source").id||!i.model.get("target").id)&&Rt(e.draggingRoute)){var p=r===o?a:r,I=n.origin();f=e.draggingRoute.call(i,p,I,e)}if(null===(f=f||Ti.call(i,r,n,l,e)))return e.fallbackRouter(t,e,i);var m=f[0];m&&m.equals(h)&&f.shift(),h=f[f.length-1]||h,Array.prototype.push.apply(g,f)}return g}Ii.prototype.build=function(r,o){var h=this.options,u=Ut(h.excludeEnds).reduce(function(t,e){var i=o.get(e);if(i){var n=r.getCell(i.id);n&&t.push(n)}return t},[]),d=[],t=r.getCell(o.get("source").id);t&&(d=Kt(d,t.getAncestors().map(function(t){return t.id})));var e=r.getCell(o.get("target").id);e&&(d=Kt(d,e.getAncestors().map(function(t){return t.id})));var f=this.mapGridSize;return r.getElements().reduce(function(t,e){var i=Ut(h.excludeTypes).includes(e.get("type")),n=u.find(function(t){return t.id===e.id}),r=d.includes(e.id);if(!(i||n||r))for(var o=e.getBBox().moveAndExpand(h.paddingBox),s=o.origin().snapToGrid(f),a=o.corner().snapToGrid(f),l=s.x;l<=a.x;l+=f)for(var c=s.y;c<=a.y;c+=f){var g=l+"@"+c;t[g]=t[g]||[],t[g].push(o)}return t},this.map),this},Ii.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Ut(this.map[t]).every(function(t){return!t.containsPoint(e)})},mi.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var i=Pt(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(i,0,t)},mi.prototype.remove=function(t){this.hash[t]=this.CLOSE},mi.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},mi.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},mi.prototype.isEmpty=function(){return 0===this.items.length},mi.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};var Li=function(t,e,i){return ji(t,Tt({},pi,e),i)},Zi={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),i=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:i},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:i},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:i},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:i}]},fallbackRoute:function(t,e,i){var n=t.theta(e),r=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(90<n%180){var a=o;o=s,s=a}var l=n%90<45?o:s,c=new B(t,l),g=90*Math.ceil(n/90),h=E.fromPolar(c.squaredLength(),y(g+135),l),u=new B(e,h),d=c.intersection(u),f=d||e,p=d?f:t,I=360/i.directions.length,m=p.theta(e),A=C(m+I/2),v=I*Math.floor(A/I);return i.previousDirectionAngle=v,f&&r.push(f.round()),r.push(e),r}},Pi={normal:function(t,e,i){return t},oneSide:function(t,e,i){var n,r,o,s=e.side||"bottom",a=wt(e.padding||40),l=i.sourceBBox,c=i.targetBBox,g=l.center(),h=c.center();switch(s){case"bottom":o=1,n="y",r="height";break;case"top":o=-1,n="y",r="height";break;case"left":o=-1,n="x",r="width";break;case"right":o=1,n="x",r="width";break;default:throw new Error("Router: invalid side")}return g[n]+=o*(l[r]/2+a[s]),h[n]+=o*(c[r]/2+a[s]),0<o*(g[n]-h[n])?h[n]=g[n]:g[n]=h[n],[g].concat(t,h)},orthogonal:fi,manhattan:Li,metro:function(t,e,i){if(!Rt(Li))throw new Error("Metro requires the manhattan router.");return Li(t,Tt({},Zi,e),i)}},Gi=["arc","gap","cubic"],Bi=["smooth"],Oi=1/3,Ei=2/3;function Yi(t,e,i){var r=[].concat(t,i,e);return r.reduce(function(t,e,i){var n=r[i+1];return null!=n&&(t[i]=b(e,n)),t},[])}function Ri(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function Wi(t,e){return b(t,e).squaredLength()}function Ui(S,k,D,z){var T,j=new O;return T=O.createSegment("M",S[0].start),j.appendSegment(T),Ut(S).forEach(function(t,e){if(t.isJump){var i,n,r,o;if("arc"===D){i=-90,n=t.start.difference(t.end);var s=Number(n.x<0||0===n.x&&n.y<0);s&&(i+=180);var a,l=t.midpoint(),c=new B(l,t.end).rotate(l,i);r=(a=new B(t.start,l)).pointAt(2/3).rotate(t.start,i),o=c.pointAt(1/3).rotate(c.end,-i),T=O.createSegment("C",r,o,c.end),j.appendSegment(T),a=new B(l,t.end),r=c.pointAt(1/3).rotate(c.end,i),o=a.pointAt(1/3).rotate(t.end,-i),T=O.createSegment("C",r,o,t.end),j.appendSegment(T)}else if("gap"===D)T=O.createSegment("M",t.end),j.appendSegment(T);else if("cubic"===D){i=t.start.theta(t.end);var g=.6*k,h=1.35*k;n=t.start.difference(t.end),(s=Number(n.x<0||0===n.x&&n.y<0))&&(h*=-1),r=E(t.start.x+g,t.start.y+h).rotate(t.start,i),o=E(t.end.x-g,t.end.y+h).rotate(t.end,i),T=O.createSegment("C",r,o,t.end),j.appendSegment(T)}}else{var u=S[e+1];0==z||!u||u.isJump?(T=O.createSegment("L",t.end),j.appendSegment(T)):(d=z,f=j,p=t.end,I=t.start,m=u.end,v=p.distance(I)/2,C=p.distance(m)/2,w=-Math.min(d,v),y=-Math.min(d,C),b=p.clone().move(I,w).round(),N=p.clone().move(m,y).round(),M=new E(Oi*b.x+Ei*p.x,Ei*p.y+Oi*b.y),x=new E(Oi*N.x+Ei*p.x,Ei*p.y+Oi*N.y),A=O.createSegment("L",b),f.appendSegment(A),A=O.createSegment("C",M,x,N),f.appendSegment(A))}var d,f,p,I,m,A,v,C,w,y,b,N,M,x}),j}var Xi={jumpover:function(t,e,i,n){var r,o;null==(o=(r=this).paper._jumpOverUpdateList)&&(o=r.paper._jumpOverUpdateList=[],r.paper.on("cell:pointerup",Ri),r.paper.model.on("reset",function(){o=r.paper._jumpOverUpdateList=[]})),o.indexOf(r)<0&&(o.push(r),r.listenToOnce(r.model,"change:connector remove",function(){o.splice(o.indexOf(r),1)}));var s=n.raw,a=n.size||5,l=n.jump&&(""+n.jump).toLowerCase(),c=n.radius||0,g=n.ignoreConnectors||Bi;-1===Gi.indexOf(l)&&(l=Gi[0]);var h=this.paper,u=h.model.getLinks();if(1===u.length)return Ui(Yi(t,e,i),a,l,c);var d=this.model,f=u.indexOf(d),p=h.options.defaultConnector||{},I=u.filter(function(t,e){var i=t.get("connector")||p;return!(Ut(g).includes(i.name)||f<e&&"jumpover"===i.name)}),m=I.map(function(t){return h.findViewByModel(t)}),A=Yi(t,e,i),v=m.map(function(t){return null==t?[]:t===this?A:Yi(t.sourcePoint,t.targetPoint,t.route)},this),C=Ui(A.reduce(function(t,s){var c,g,h,e=I.reduce(function(t,e,i){if(e!==d){var n=(r=s,o=v[i],Ut(o).reduce(function(t,e){var i=r.intersection(e);return i&&t.push(i),t},[]));t.push.apply(t,n)}var r,o;return t},[]).sort(function(t,e){return Wi(s.start,t)-Wi(s.start,e)});return 0<e.length?t.push.apply(t,(c=s,h=a,(g=e).reduce(function(t,e,i){if(!0===e.skip)return t;var n=t.pop()||c,r=N(e).move(n.start,-h),o=N(e).move(n.start,+h),s=g[i+1];if(null!=s){var a=o.distance(s);a<=h&&(o=s.move(n.start,a),s.skip=!0)}else if(r.distance(n.end)<2*h+1)return t.push(n),t;if(o.distance(n.start)<2*h+1)return t.push(n),t;var l=b(r,o);return l.isJump=!0,t.push(b(n.start,r),l,b(o,n.end)),t},[]))):t.push(s),t},[]),a,l,c);return s?C:C.serialize()},normal:function(t,e,i,n){var r=n&&n.raw,o=[t].concat(i).concat([e]),s=new D(o),a=new O(s);return r?a:a.serialize()},rounded:function(t,e,i,n){n||(n={});var r,o=n.radius||10,s=n.raw,a=new O;r=O.createSegment("M",t),a.appendSegment(r);for(var l,c,g,h,u,d,f,p,I,m,A,v=0,C=i.length;v<C;v++)l=new E(i[v]),c=i[v-1]||t,g=i[v+1]||e,h=u||l.distance(c)/2,u=l.distance(g)/2,d=-Math.min(o,h),f=-Math.min(o,u),p=l.clone().move(c,d).round(),I=l.clone().move(g,f).round(),m=new E(1/3*p.x+2/3*l.x,2/3*l.y+1/3*p.y),A=new E(1/3*I.x+2/3*l.x,2/3*l.y+1/3*I.y),r=O.createSegment("L",p),a.appendSegment(r),r=O.createSegment("C",m,A,I),a.appendSegment(r);return r=O.createSegment("L",e),a.appendSegment(r),s?a:a.serialize()},smooth:function(t,e,i,n){var r,o=n&&n.raw;if(i&&0!==i.length){var s=[t].concat(i).concat([e]),a=p.throughPoints(s);r=new O(a)}else{var l;if(r=new O,l=O.createSegment("M",t),r.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var c=(t.x+e.x)/2;l=O.createSegment("C",c,t.y,c,e.y,e.x,e.y),r.appendSegment(l)}else{var g=(t.y+e.y)/2;l=O.createSegment("C",t.x,g,e.x,g,e.x,e.y),r.appendSegment(l)}}return o?r:r.serialize()}},Fi=qe.extend({className:function(){var t=qe.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){qe.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.metrics={}},presentationAttributes:{markup:["RENDER"],attrs:["UPDATE"],router:["UPDATE"],connector:["UPDATE"],smooth:["UPDATE"],manhattan:["UPDATE"],toolMarkup:["TOOLS"],labels:["LABELS"],labelMarkup:["LABELS"],vertices:["VERTICES","UPDATE"],vertexMarkup:["VERTICES"],source:["SOURCE","UPDATE"],target:["TARGET","UPDATE"]},initFlag:["RENDER","SOURCE","TARGET"],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,"SOURCE")){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,"SOURCE")}if(this.hasFlag(t,"TARGET")){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,"TARGET")}var i=this.paper,n=this.sourceView,r=this.targetView;if(i&&(n&&!i.isViewMounted(n)||r&&!i.isViewMounted(r)))return t;if(this.hasFlag(t,"RENDER"))return this.render(),t=this.removeFlag(t,["RENDER","UPDATE","VERTICES","TOOLS","LABELS"]);this.hasFlag(t,"VERTICES")&&(this.renderVertexMarkers(),t=this.removeFlag(t,"VERTICES"));var o=this.model,s=o.attributes,a=this.hasFlag(t,"LABELS"),l=this.hasFlag(t,"TOOLS");return a&&(this.onLabelsChange(o,s.labels,e),t=this.removeFlag(t,"LABELS")),l&&(this.renderTools(),t=this.removeFlag(t,"TOOLS")),this.hasFlag(t,"UPDATE")&&(this.update(o,null,e),t=this.removeFlag(t,"UPDATE"),l=a=!1),a&&this.updateLabelPositions(),l&&this.updateToolsPosition(),t},requestConnectionUpdate:function(t){var e=this.paper,i=this.UPDATE_PRIORITY;e&&e.requestViewUpdate(this,this.getFlag("UPDATE"),i,t)},isLabelsRenderRequired:function(t){void 0===t&&(t={});var e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var i=t.propertyPathArray||[],n=i.length;if(1<n)if(!!e[i[1]]){if(2===n)return"markup"in Object(t.propertyValue);if("markup"!==i[2])return!1}}return!0},onLabelsChange:function(t,e,i){this.isLabelsRenderRequired(i)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=q(t);Array.isArray(e)||(e=[e]);for(var i=this._V,n=0,r=e.length;n<r;n++){var o=e[n],s=o.attr("class");s&&(s=et(s),i[S.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=q(t),i=document.createDocumentFragment();if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var o=e[n].node;i.appendChild(o)}else i.appendChild(e.node);return{fragment:i,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,i=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var n=i.childNodes;return(e=1<n.length||"G"!==n[0].nodeName.toUpperCase()?q("g").append(i):q(n[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,i=this._labelCache={},n=this._labelSelectors={},r=this.model,o=r.attributes.labels||[],s=o.length;if(0===s)return e&&e.remove(),this;e?e.empty():e=t.labels=q("g").addClass("labels");for(var a=e.node,l=0;l<s;l++){var c,g,h=o[l],u=this._normalizeLabelMarkup(this._getLabelMarkup(h.markup));if(u)c=u.node,g=u.selectors;else{var d=r._builtins.defaultLabel,f=this._normalizeLabelMarkup(this._getLabelMarkup(d.markup)),p=r._getDefaultLabel(),I=this._normalizeLabelMarkup(this._getLabelMarkup(p.markup))||f;c=I.node,g=I.selectors}c.setAttribute("label-idx",l),a.appendChild(c),i[l]=c;var m=this.selector;if(g[m])throw new Error("dia.LinkView: ambiguous label root selector.");g[m]=c,n[l]=g}return a.parentNode||this.el.appendChild(a),this.updateLabels(),this},_mergeLabelAttrs:function(t,e,i,n){return null===e?null:void 0!==e?t?se({},i,e):se({},n,i,e):null===i?null:void 0!==i?t?i:se({},n,i):t?void 0:n},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],i=this.can("labelMove"),n=t._builtins.defaultLabel.attrs,r=t._getDefaultLabel(),o=r.markup,s=r.attrs,a=0,l=e.length;a<l;a++){var c=this._labelCache[a];c.setAttribute("cursor",i?"move":"default");var g=this._labelSelectors[a],h=e[a],u=h.markup,d=h.attrs,f=this._mergeLabelAttrs(u||o,d,s,n);this.updateDOMSubtreeAttributes(c,f,{rootBBox:new H(h.size),selectors:g})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=S(this._V.linkTools.node).empty(),i=xt(this.model.get("toolMarkup")||this.model.toolMarkup),n=q(i());(e.append(n.node),this._toolCache=n,this.options.doubleLinkTools)&&(t=this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(i=xt(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),q(i())):n.clone(),e.append(t.node),this._tool2Cache=t);return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var i=S(this._V.markerVertices.node).empty(),n=xt(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,e){i.append(q(n(Tt({idx:e},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=S(this._V.markerArrowheads.node);t.empty();var e=xt(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=q(e({end:"source"})),this._V.targetArrowhead=q(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,i){return i||(i={}),this.cleanNodesCache(),this.updateConnection(i),this.updateDOMSubtreeAttributes(this.el,this.model.attr(),{selectors:this.selectors}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(i),this.options.perpendicular=null,this},removeRedundantLinearVertices:function(t){var e=this.model,i=e.vertices(),n=[this.sourceAnchor].concat(i,[this.targetAnchor]),r=n.length,o=new D(n);o.simplify({threshold:.001});var s=o.points.map(function(t){return t.toJSON()}),a=s.length;return r===a?0:(e.vertices(s.slice(1,a-1),t),r-a)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new E(this.sourceAnchor);case"target":return new E(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new E(this.sourcePoint);case"target":return new E(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var i=this.targetView;if(!i)break;return this.targetMagnet||i.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},updateConnection:function(t){t=t||{};var e,i,n=this.model;if(t.translateBy&&n.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,o=t.ty||0;e=new D(this.route).translate(r,o).points,this._translateConnectionPoints(r,o),(i=this.path).translate(r,o)}else{var s=n.vertices(),a=this.findAnchors(s),l=this.sourceAnchor=a.source,c=this.targetAnchor=a.target;e=this.findRoute(s,t);var g=this.findConnectionPoints(e,l,c),h=this.sourcePoint=g.source,u=this.targetPoint=g.target,d=this.findMarkerPoints(e,h,u);i=this.findPath(e,d.source||h,d.target||u)}this.route=e,this.path=i,this.metrics={}},findMarkerPoints:function(t,e,i){var n,r,o=t[0],s=t[t.length-1],a=this._markerCache;return this._V.markerSource&&(a.sourceBBox=a.sourceBBox||this._V.markerSource.getBBox(),n=E(e).move(o||i,a.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(a.targetBBox=a.targetBBox||this._V.markerTarget.getBBox(),r=E(i).move(s||e,a.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),a.sourcePoint=n||e.clone(),a.targetPoint=r||i.clone(),{source:n,target:r}},findAnchorsOrdered:function(t,e,i,n){var r,o,s,a,l=this.model,c=l.get(t),g=l.get(i),h=this.getEndView(t),u=this.getEndView(i),d=this.getEndMagnet(t),f=this.getEndMagnet(i);r=h?(s=e?new E(e):u?f:new E(g),this.getAnchor(c.anchor,h,d,s,t)):new E(c),o=u?(a=new E(n||r),this.getAnchor(g.anchor,u,f,a,i)):new E(g);var p={};return p[t]=r,p[i]=o,p},findAnchors:function(t){var e=this.model,i=t[0],n=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",n,"source",i):this.findAnchorsOrdered("source",i,"target",n)},findConnectionPoints:function(t,e,i){var n,r,o,s,a=t[0],l=t[t.length-1],c=this.model,g=c.get("source"),h=c.get("target"),u=this.sourceView,d=this.targetView,f=this.paper.options;if(u&&!u.isNodeConnection(this.sourceMagnet)){n=this.sourceMagnet||u.el;var p=g.connectionPoint||f.defaultConnectionPoint,I=new B(a||i,e);o=this.getConnectionPoint(p,u,n,I,"source")}else o=e;if(d&&!d.isNodeConnection(this.targetMagnet)){r=this.targetMagnet||d.el;var m=h.connectionPoint||f.defaultConnectionPoint,A=new B(l||e,i);s=this.getConnectionPoint(m,d,r,A,"target")}else s=i;return{source:o,target:s}},getAnchor:function(t,e,i,n,r){var o,s=e.isNodeConnection(i),a=this.paper.options;if(t||(t=s?a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)o=t;else{var l=t.name;if("function"!=typeof(o=a[s?"linkAnchorNamespace":"anchorNamespace"][l]))throw new Error("Unknown anchor: "+l)}var c=o.call(this,e,i,n,t.args||{},r,this);return c?c.round(this.decimalsRounding):new E},getConnectionPoint:function(t,e,i,n,r){var o,s,a=n.end,l=this.paper.options;if("function"==typeof l.linkConnectionPoint){var c=i===e.el?void 0:i;if(o=l.linkConnectionPoint(this,e,c,n.start,r))return o}if(!t)return a;if("function"==typeof t)s=t;else{var g=t.name;if("function"!=typeof(s=l.connectionPointNamespace[g]))throw new Error("Unknown connection point: "+g)}return(o=s.call(this,n,e,i,t.args||{},r,this))?o.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var i=this._markerCache;i.sourcePoint.offset(t,e),i.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model,e=t.get("labels")||[];if(!e.length)return this;for(var i=t._builtins.defaultLabel.position,n=t._getDefaultLabel(),r=this._normalizeLabelPosition(n.position),o=se({},i,r),s=0,a=e.length;s<a;s++){var l=this._labelCache[s];if(l){var c=e[s],g=this._normalizeLabelPosition(c.position),h=se({},o,g),u=this._getLabelTransformationMatrix(h);l.setAttribute("transform",q.matrixToTransformString(u))}}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,i=this.getConnectionLength();if(!Number.isNaN(i)){i<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var n=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+t),this.options.doubleLinkTools&&i>=this.options.longLinkLength){var r=this.options.doubleLinkToolsOffset||e;n=this.getPointAtLength(i-r),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===S.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){var e=this.model,i=this.paper,n=t+"View",r=e.get(t),o=r&&r.id;if(!o)return this[n]=null,this.updateEndMagnet(t),!0;var s=i.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");var a=s.findView(i);return!!a&&(this[n]=a,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){var e=t+"Magnet",i=this.getEndView(t);if(i){var n=i.getMagnetFromLinkEnd(this.model.get(t));n===i.el&&(n=null),this[e]=n}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var i=Ut(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,i[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,i[i.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:se({},e,t)},addLabel:function(t,e,i,n){var r,o,s,a=0;s="number"!=typeof t?(r=t.x,o=t.y,"number"==typeof e?(a=e,i):e):(r=t,o=e,"number"==typeof i?(a=i,n):i);var l=this._getDefaultLabelPositionArgs(),c=s,g=this._mergeLabelPositionArgs(c,l),h={position:this.getLabelPosition(r,o,a,g)};return this.model.insertLabel(-1,h,s),-1},addVertex:function(t,e,i){var n="number"!=typeof t,r=n?t.x:t,o=n?t.y:e,s=n?e:i,a={x:r,y:o},l=this.getVertexIndex(r,o);return this.model.insertVertex(l,a,s),l},sendToken:function(t,e,i){var n,r,o;o=le(e)?(n=e.duration,r="reverse"===e.direction,e.connection):(n=e,r=!1,null);var s={dur:(n=n||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};r&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,l,c,g=q(t);if("string"==typeof o)a=this.findBySelector(o,this.el,this.selectors)[0];else{var h=this._V;a=h.connection?h.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");g.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout((l=g,c=i,function(){l.remove(),"function"==typeof c&&c()}),n)},findRoute:function(t){t||(t=[]);var e=Pi,i=this.model.router(),n=this.paper.options.defaultRouter;if(!i){if(!n)return t.map(E);i=n}var r=Rt(i)?i:e[i.name];if(!Rt(r))throw new Error('dia.LinkView: unknown router: "'+i.name+'".');var o=i.args||{},s=r.call(this,t,o,this);return s||t.map(E)},findPath:function(t,e,i){var n=Xi,r=this.model.connector(),o=this.paper.options.defaultConnector;r||(r=o||{});var s=Rt(r)?r:n[r.name];if(!Rt(s))throw new Error('dia.LinkView: unknown connector: "'+r.name+'".');var a=Bt(r.args||{});a.raw=!0;var l=s.call(this,e,i,t,a,this);return"string"==typeof l&&(l=new O(q.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var i=t.serialize();return e.data=i},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var i=t.getSegmentSubdivisions();return e.segmentSubdivisions=i},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var i=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=i},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(ft(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,i,n){var r,o={},s=0;(r="number"==typeof i?(s=i,n):i)&&(o.args=r);var a,l,c=!(r&&r.absoluteDistance),g=r&&r.absoluteDistance&&r.reverseDistance,h=r&&r.absoluteOffset,u=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},f=new E(t,e),p=u.closestPointT(f,d),I=u.lengthAtT(p,d);if(c&&(I=I/this.getConnectionLength()||0),g&&(I=-1*(this.getConnectionLength()-I)||1),o.distance=I,h||(a=u.tangentAtT(p)),a)l=a.pointOffset(f);else{var m=u.pointAtT(p),A=f.difference(m);l={x:A.x,y:A.y}}return o.offset=l,o.angle=s,o},_getLabelTransformationMatrix:function(t){var e,i=0,n={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");n=t.args||{},e=t.distance,i=t.angle||0}var r=0<e&&e<=1,o=0,s={x:0,y:0};if(t.offset){var a=t.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var l,c=0!==s.x||0!==s.y||0===o,g=n.keepGradient,h=n.ensureLegibility,u=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},f=r?e*this.getConnectionLength():e,p=u.tangentAtLength(f,d),I=i;if(p){if(c)(l=p.start).offset(s);else{var m=p.clone();m.rotate(p.start,-90),m.setLength(o),l=m.end}g&&(I=p.angle()+i,h&&(I=C((I+90)%180-90)))}else l=u.start,c&&l.offset(s);return q.createSVGMatrix().translate(l.x,l.y).rotate(I)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new E(e.e,e.f)},getVertexIndex:function(t,e){for(var i=this.model.vertices(),n=this.getClosestPointLength(new E(t,e)),r=0,o=i.length;r<o;r++){var s=i[r];if(n<this.getClosestPointLength(s))break}return r},notifyPointerdown:function(t,e,i){qe.prototype.pointerdown.call(this,t,e,i),this.notify("link:pointerdown",t,e,i)},notifyPointermove:function(t,e,i){qe.prototype.pointermove.call(this,t,e,i),this.notify("link:pointermove",t,e,i)},notifyPointerup:function(t,e,i){this.notify("link:pointerup",t,e,i),qe.prototype.pointerup.call(this,t,e,i)},pointerdblclick:function(t,e,i){qe.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){qe.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,i)},contextmenu:function(t,e,i){qe.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,i)},pointerdown:function(t,e,i){switch(this.notifyPointerdown(t,e,i),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,i);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,i);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,i);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,i);case"marker-source":case"marker-target":return}this.dragStart(t,e,i)},pointermove:function(t,e,i){var n=this._dragData;switch(n&&this.eventData(t,n),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,i);break;case"label-move":this.dragLabel(t,e,i);break;case"arrowhead-move":this.dragArrowhead(t,e,i);break;case"move":this.drag(t,e,i)}n&&Tt(n,this.eventData(t)),this.notifyPointermove(t,e,i)},pointerup:function(t,e,i){var n=this._dragData;switch(n&&(this.eventData(t,n),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,i);break;case"label-move":this.dragLabelEnd(t,e,i);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,i);break;case"move":this.dragEnd(t,e,i)}this.notifyPointerup(t,e,i),this.checkMouseleave(t)},mouseover:function(t){qe.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){qe.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){qe.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){qe.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,i,n){qe.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,i,n)},onevent:function(t,e,i,n){if(q(t.target).findParentByClass("link-tool",this.el)){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,i,n)}this.notifyPointerdown(t,i,n),this.paper.delegateDragEvents(this,t.data)}else qe.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,i){this.notifyPointerdown(t,e,i),this.dragLabelStart(t,e,i),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,i){if(this.can("vertexAdd")){var n=this.addVertex({x:e,y:i},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(t,e,i){if(this.can("labelMove")){var n=t.currentTarget,r=parseInt(n.getAttribute("label-idx"),10),o=this._getLabelPositionAngle(r),s=this._getLabelPositionArgs(r),a=this._getDefaultLabelPositionArgs(),l=this._mergeLabelPositionArgs(s,a);this.eventData(t,{action:"label-move",labelIdx:r,positionAngle:o,positionArgs:l,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,i){if(this.can("vertexMove")){var n=t.target,r=parseInt(n.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragVertexRemoveStart:function(t,e,i){if(this.can("vertexRemove")){var n=t.target,r=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(r)}},dragArrowheadStart:function(t,e,i){if(this.can("arrowheadMove")){var n=t.target.getAttribute("end"),r=this.startArrowheadMove(n,{ignoreBackwardsCompatibility:!0});this.eventData(t,r)}},dragStart:function(t,e,i){this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:i})},dragLabel:function(t,e,i){var n=this.eventData(t),r={position:this.getLabelPosition(e,i,n.positionAngle,n.positionArgs)};this.model.label(n.labelIdx,r)},dragVertex:function(t,e,i){var n=this.eventData(t);this.model.vertex(n.vertexIdx,{x:e,y:i},{ui:!0})},dragArrowhead:function(t,e,i){this.paper.options.snapLinks?this._snapArrowhead(t,e,i):this._connectArrowhead(this.getEventTarget(t),e,i,this.eventData(t))},drag:function(t,e,i){var n=this.eventData(t);this.model.translate(e-n.dx,i-n.dy,{ui:!0}),this.eventData(t,{dx:e,dy:i})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,i){var n=this.eventData(t),r=this.paper;r.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,e,i),r.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,t)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0})}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var i=t.arrowhead,n=t.initialEnd,r=this.model.prop(i);if(r&&!We.endsEqual(n,r)){var o=this.paper;n.id&&this.notify("link:disconnect",e,o.findViewByModel(n.id),t.initialMagnet,i),r.id&&this.notify("link:connect",e,o.findViewByModel(r.id),t.magnetUnderPointer,i)}},_snapArrowhead:function(t,e,i){var r=this.eventData(t),n=this.paper.options.snapLinks.radius||50,o=this.paper.findViewsInArea({x:e-n,y:i-n,width:2*n,height:2*n}),s=r.closestView||null,a=r.closestMagnet||null;r.closestView=r.closestMagnet=null;var l,c=Number.MAX_VALUE,g=new E(e,i),h=this.paper;o.forEach(function(n){var e=[];"false"!==n.el.getAttribute("magnet")&&e.push({bbox:n.model.getBBox(),magnet:n.el}),n.$("[magnet]").toArray().forEach(function(t){e.push({bbox:n.getNodeBBox(t),magnet:t})}),e.forEach(function(t){var e=t.magnet,i=t.bbox.center().squaredDistance(g);i<c&&(a===n.el||h.options.validateConnection.apply(h,r.validateConnectionArgs(n,n.el===e?null:e)))&&(c=i,r.closestView=n,r.closestMagnet=e)})},this);var u=r.closestView,d=r.closestMagnet,f=r.arrowhead,p=a!==d;if(s&&p&&s.unhighlight(a,{connecting:!0,snapping:!0}),u){if(!p)return;u.highlight(d,{connecting:!0,snapping:!0}),l=u.getLinkEnd(d,e,i,this.model,f)}else l={x:e,y:i};this.model.set(f,l||{x:e,y:i},{ui:!0}),s&&this.notify("link:snap:disconnect",t,s,a,f),u&&this.notify("link:snap:connect",t,u,d,f)},_snapArrowheadEnd:function(t){var e=t.closestView,i=t.closestMagnet;e&&i&&(e.unhighlight(i,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(i)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,i,n){n.eventTarget!==t&&(n.magnetUnderPointer&&n.viewUnderPointer.unhighlight(n.magnetUnderPointer,{connecting:!0}),n.viewUnderPointer=this.paper.findView(t),n.viewUnderPointer?(n.magnetUnderPointer=n.viewUnderPointer.findMagnet(t),n.magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,n.validateConnectionArgs(n.viewUnderPointer,n.magnetUnderPointer))?n.magnetUnderPointer&&n.viewUnderPointer.highlight(n.magnetUnderPointer,{connecting:!0}):n.magnetUnderPointer=null):n.magnetUnderPointer=null),n.eventTarget=t,this.model.set(n.arrowhead,{x:e,y:i},{ui:!0})},_connectArrowheadEnd:function(t,e,i){var n=t.viewUnderPointer,r=t.magnetUnderPointer;if(r&&n){n.unhighlight(r,{connecting:!0});var o=t.arrowhead,s=n.getLinkEnd(r,e,i,this.model,o);this.model.set(o,s,{ui:!0})}},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,i=[];i[4]=t,i[5]=this;var n=0,r=0;e="source"===t?(n=2,"target"):(r=2,"source");var o=this.model.get(e);if(o.id){var s=i[n]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),i[n+1]=a}return function(t,e){return i[r]=t,i[r+1]=t.el===e?void 0:e,i}},_markAvailableMagnets:function(t){function e(t,e){var i=t.paper;return i.options.validateConnection.apply(i,this.validateConnectionArgs(t,e))}var i=this.paper,n=i.model.getCells();t.marked={};for(var r=0,o=n.length;r<o;r++){var s=n[r].findView(i);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var l=a.filter(e.bind(t,s));if(0<l.length){for(var c=0,g=l.length;c<g;c++)s.highlight(l[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e,i,n=Object.keys(t.marked),r=0,o=n.length;r<o;r++){e=n[r],i=t.marked[e];var s=this.paper.findViewByModel(e);if(s){for(var a=0,l=i.length;a<l;a++)s.unhighlight(i[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var i={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Bt(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(i),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=i),i}});Object.defineProperty(Fi.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new H(e.x,e.y)}var i=this.sourceMagnet;return t.isNodeConnection(i)?new H(this.sourceAnchor):t.getNodeBBox(i||t.el)}}),Object.defineProperty(Fi.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new H(e.x,e.y)}var i=this.targetMagnet;return t.isNodeConnection(i)?new H(this.targetAnchor):t.getNodeBBox(i||t.el)}});var Vi={stroke:{defaultOptions:{padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},_views:{},getHighlighterId:function(t,e){return t.id+JSON.stringify(e)},removeHighlighter:function(t){this._views[t]&&(this._views[t].remove(),this._views[t]=null)},highlight:function(t,e,i){var n=this.getHighlighterId(e,i);if(!this._views[n]){var r,o=jt(i||{},this.defaultOptions),s=q(e);try{var a=s.convertToPathData()}catch(t){r=s.bbox(!0),a=q.rectToPath(Tt({},o,r))}var l=q("path").attr({d:a,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"}).attr(o.attrs);if(t.isNodeConnection(e))l.attr("d",t.getSerializedConnection());else{var c=s.getTransformToElement(t.el),g=o.padding;if(g){r||(r=s.bbox(!0));var h=r.x+r.width/2,u=r.y+r.height/2;r=q.transformRect(r,c);var d=Math.max(r.width,1),f=Math.max(r.height,1),p=(d+g)/d,I=(f+g)/f,m=q.createSVGMatrix({a:p,b:0,c:0,d:I,e:h-p*h,f:u-I*u});c=c.multiply(m)}l.transform(c)}var A=this._views[n]=new Qe({svgElement:!0,className:"highlight-stroke",el:l.node}),v=this.removeHighlighter.bind(this,n),C=t.model;A.listenTo(C,"remove",v),A.listenTo(C.graph,"reset",v),t.vel.append(l)}},unhighlight:function(t,e,i){this.removeHighlighter(this.getHighlighterId(e,i))}},opacity:{highlight:function(t,e){q(e).addClass(tt("highlight-opacity"))},unhighlight:function(t,e){q(e).removeClass(tt("highlight-opacity"))}},addClass:{className:tt("highlighted"),highlight:function(t,e,i){var n=(i||{}).className||this.className;q(e).addClass(n)},unhighlight:function(t,e,i){var n=(i||{}).className||this.className;q(e).removeClass(n)}}};function Ji(s){return function(t,e,i,n){if(i instanceof Element){var r,o=this.paper.findView(i);if(o)if(o.isNodeConnection(i))r=Hi(o,"fixedAt"in n?n.fixedAt:"50%");else r=o.getNodeBBox(i).center();else r=new E;return s.call(this,t,e,r,n)}return s.apply(this,arguments)}}function Hi(t,e){var i=parseFloat(e);return ft(e)?t.getPointAtRatio(i/100):t.getPointAtLength(i)}var _i=Ji(function(t,e,i,n){var r=t.getConnection(),o=t.getConnectionSubdivisions(),s=new B(i.clone().offset(0,1e6),i.clone().offset(0,-1e6)),a=new B(i.clone().offset(1e6,0),i.clone().offset(-1e6,0)),l=s.intersect(r,{segmentSubdivisions:o}),c=a.intersect(r,{segmentSubdivisions:o}),g=[];return l&&Array.prototype.push.apply(g,l),c&&Array.prototype.push.apply(g,c),0<g.length?i.chooseClosest(g):"fallbackAt"in n?Hi(t,n.fallbackAt):Qi(t,e,i,n)}),Qi=Ji(function(t,e,i,n){var r=t.getClosestPoint(i);return r||new E}),Ki={resolveRef:Ji,connectionRatio:function(t,e,i,n){var r="ratio"in n?n.ratio:.5;return t.getPointAtRatio(r)},connectionLength:function(t,e,i,n){var r="length"in n?n.length:20;return t.getPointAtLength(r)},connectionPerpendicular:_i,connectionClosest:Qi};function qi(t,e,i){if(Wt(i)){var n=i.x,r=i.y;if(isFinite(r)){var o=new B(e,t).parallel(r);e=o.start,t=o.end}i=n}if(!isFinite(i))return t;var s=t.distance(e);return 0===i&&0<s?t:t.move(e,-Math.min(i,s-1))}function $i(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function tn(t,e,i,n){var r=e.getNodeBBox(i);n.stroke&&r.inflate($i(i)/2);var o=t.intersect(r);return qi(o?t.start.chooseClosest(o):t.end,t.start,n.offset)}var en="segmentSubdivisons",nn="shapeBBox";var rn={anchor:function(t,e,i,n){var r=n.offset,o=n.alignOffset,s=n.align;return s&&function(t,e,i){var n,r,o,s;void 0===i&&(i=0);var a=t.start,l=t.end;switch(e){case"left":n="x",r=l,o=a,s=-1;break;case"right":n="x",r=a,o=l,s=1;break;case"top":n="y",r=l,o=a,s=-1;break;case"bottom":n="y",r=a,o=l,s=1;break;default:return}a[n]<l[n]?r[n]=o[n]:o[n]=r[n],isFinite(i)&&(r[n]+=s*i,o[n]+=s*i)}(t,s,o),qi(t.end,t.start,r)},bbox:tn,rectangle:function(t,e,i,n){var r=e.model.angle();if(0===r)return tn(t,e,i,n);var o=e.getNodeUnrotatedBBox(i);n.stroke&&o.inflate($i(i)/2);var s=o.center(),a=t.clone().rotate(s,r),l=a.setLength(1e6).intersect(o);return qi(l?a.start.chooseClosest(l).rotate(s,-r):t.end,t.start,n.offset)},boundary:function(t,e,i,n){var r,o,s=n.selector,a=t.end;if(r="string"==typeof s?e.findBySelector(s)[0]:Array.isArray(s)?rt(i,s):function(t){if(!t)return null;var e=t;do{var i=e.tagName;if("string"!=typeof i)return null;if("G"===(i=i.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==i)break;e=e.nextElementSibling}}while(e);return e}(i),!q.isSVGGraphicsElement(r)){if(r===i||!q.isSVGGraphicsElement(i))return a;r=i}var l,c=e.getNodeShape(r),g=e.getNodeMatrix(r),h=e.getRootTranslateMatrix(),u=e.getRootRotateMatrix(),d=h.multiply(u).multiply(g),f=d.inverse(),p=q.transformLine(t,f),I=p.start.clone(),m=e.getNodeData(r);if(!1===n.insideout&&(m[nn]||(m[nn]=c.bbox()),m[nn].containsPoint(I)))return a;if(c instanceof O){var A=n.precision||2;m[en]||(m[en]=c.getSegmentSubdivisions({precision:A})),l={precision:A,segmentSubdivisions:m[en]}}!0===n.extrapolate&&p.setLength(1e6),(o=p.intersect(c,l))?q.isArray(o)&&(o=I.chooseClosest(o)):!0===n.sticky&&(o=c instanceof H?c.pointNearestToPoint(I):c instanceof w?c.intersectionWithLineFromCenterToPoint(I):c.closestPoint(I,l));var v=o?q.transformPoint(o,d):a,C=n.offset||0;return n.stroke&&(C+=$i(r)/2),qi(v,t.start,C)}};function on(h){return function(t,e,i,n){var r=!!n.rotate,o=r?t.getNodeUnrotatedBBox(e):t.getNodeBBox(e),s=o[h](),a=n.dx;if(a){var l=ft(a);a=parseFloat(a),isFinite(a)&&(l&&(a/=100,a*=o.width),s.x+=a)}var c=n.dy;if(c){var g=ft(c);c=parseFloat(c),isFinite(c)&&(g&&(c/=100,c*=o.height),s.y+=c)}return r?s.rotate(t.model.getBBox().center(),-t.model.angle()):s}}var sn={center:on("center"),top:on("topMiddle"),bottom:on("bottomMiddle"),left:on("leftMiddle"),right:on("rightMiddle"),topLeft:on("origin"),topRight:on("topRight"),bottomLeft:on("bottomLeft"),bottomRight:on("corner"),perpendicular:Ji(function(t,e,i,n){var r=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),a=o.origin(),l=o.corner(),c=n.padding;if(isFinite(c)||(c=0),a.y+c<=i.y&&i.y<=l.y-c){var g=i.y-s.y;s.x+=0===r||180===r?0:1*g/Math.tan(y(r)),s.y+=g}else if(a.x+c<=i.x&&i.x<=l.x-c){var h=i.x-s.x;s.y+=90===r||270===r?0:h*Math.tan(y(r)),s.x+=h}return s}),midSide:Ji(function(t,e,i,n){var r,o,s,a=!!n.rotate;a?(r=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),o=t.model.angle()):r=t.getNodeBBox(e);var l,c=n.padding;switch(isFinite(c)&&r.inflate(c),a&&i.rotate(s,o),r.sideNearestToPoint(i)){case"left":l=r.leftMiddle();break;case"right":l=r.rightMiddle();break;case"top":l=r.topMiddle();break;case"bottom":l=r.bottomMiddle()}return a?l.rotate(s,-o):l}),modelCenter:function(t,e,i,n,r){return t.model.getPointFromConnectedLink(this.model,r).offset(n.dx,n.dy)}},an={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},ln=9007199254740991,cn={default:{name:"stroke",options:{padding:3}},magnetAvailability:{name:"addClass",options:{className:"available-magnet"}},elementAvailability:{name:"addClass",options:{className:"available-cell"}}},gn=Qe.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:$e,linkView:Fi,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:cn,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new We,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,i){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,i,n,r,o){return("target"===r?i:t)instanceof $e},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:an.EXACT,frozen:!1,onViewUpdate:function(t,e,i,n,r){e&t.FLAG_INSERT||n.mounting||r.requestConnectedLinksUpdate(t,i,n)},onViewPostponed:function(t,e,i){return i.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,highlighterNamespace:Vi,anchorNamespace:sn,linkAnchorNamespace:Ki,connectionPointNamespace:rn},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_highlights:null,_zPivots:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){var t=this.options,e=this.el;t.cellViewNamespace||(t.cellViewNamespace=void 0!==joint&&qt(joint,"shapes")?joint.shapes:null);var i=this.model=t.model||new He;this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this.setDimensions(),this.startListening(),this._views={},this._zPivots={},this.$document=S(e.ownerDocument),this._highlights={},this.resetViews(i.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,i){var n=i.position;this.isAsync()||!ce(n)?this.renderView(t,i):(i.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(t,i),0===n&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,i){var n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,i)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===an.APPROX){var i=this.findViewByModel(t);i&&this.requestViewUpdate(i,i.FLAG_INSERT,i.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.removeZPivots(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,i=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(e)&&!i.hasActiveBatch(n)&&this.updateViews(t)}var r=this.SORT_DELAYING_BATCHES;r.includes(e)&&!i.hasActiveBatch(r)&&this.sortViews()}},cloneOptions:function(){var t=this.options,e=t.defaultConnector,i=t.defaultRouter,n=t.defaultConnectionPoint,r=t.defaultAnchor,o=t.defaultLinkAnchor,s=t.origin,a=t.highlighting,l=t.cellViewNamespace,c=t.interactive;!l&&void 0!==joint&&qt(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),Rt(e)||(t.defaultConnector=Ot(e)),Rt(i)||(t.defaultRouter=Ot(i)),Rt(n)||(t.defaultConnectionPoint=Ot(n)),Rt(r)||(t.defaultAnchor=Ot(r)),Rt(o)||(t.defaultLinkAnchor=Ot(o)),Wt(c)&&(t.interactive=Tt({},c)),t.origin=Tt({},s),t.highlighting=Lt({},a,cn)},children:function(){var t=q.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:tt("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:tt("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:tt("layers"),selector:"layers",children:[{tagName:"g",className:tt("cells-layer viewport"),selector:"cells"},{tagName:"g",className:tt("tools-layer"),selector:"tools"}]}]}]},render:function(){this.renderChildren();var t=this.childNodes,e=this.options,i=t.svg,n=t.cells,r=t.defs,o=t.tools,s=t.layers,a=t.background,l=t.grid;return this.svg=i,this.defs=r,this.tools=o,this.cells=n,this.layers=s,this.$background=S(a),this.$grid=S(l),q.ensureId(i),this.viewport=n,e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var i=e.getAttribute("transform");return(this._viewportTransformString||null)===i?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=i),q.createSVGMatrix(t)}t=q.createSVGMatrix(t);var n=q.matrixToTransformString(t);return e.setAttribute("transform",n),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return q.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,i){if(t instanceof qe)for(var n=t.model,r=this.model.getConnectedLinks(n),o=0,s=r.length;o<s;o++){var a=r[o],l=this.findViewByModel(a);if(l){var c=["UPDATE"];a.getTargetCell()===n&&c.push("TARGET"),a.getSourceCell()===n&&c.push("SOURCE");var g=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(c),g,i)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof qe))return!1;var i=t.model;if(i.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var n=0,r=this.findViewByModel(i.getSourceCell());r&&!this.isViewMounted(r)&&(n=this.dumpView(r),t.updateEndMagnet("source"));var o=0,s=this.findViewByModel(i.getTargetCell());if(s&&!this.isViewMounted(s)&&(o=this.dumpView(s),t.updateEndMagnet("target")),0===n&&0===o)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,i,n){n||(n={}),this.scheduleViewUpdate(t,e,i,n);var r=this.isAsync();if(!(this.isFrozen()||r&&!1!==n.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(n);r&&this.notifyAfterRender(o,n)}},scheduleViewUpdate:function(t,e,i,n){var r=this._updates,o=this.options,s=t.FLAG_REMOVE,a=t.FLAG_INSERT,l=t.UPDATE_PRIORITY,c=t.cid,g=r.priorities[i];if(g||(g=r.priorities[i]={}),l<i)for(var h=i-1;l<=h;h--){var u=r.priorities[h];u&&c in u&&(g[c]|=u[c],delete u[c])}var d=g[c]||0;if((d&e)!==e){d||r.count++,e&s&&d&a?g[c]^=a:e&a&&d&s&&(g[c]^=s),g[c]|=e;var f=o.onViewUpdate;"function"==typeof f&&f.call(this,t,e,i,n||{},this)}},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,i=t.cid,n=e.priorities[t.UPDATE_PRIORITY],r=this.registerMountedView(t)|n[i];return delete n[i],r},dumpView:function(t,e){var i=this.dumpViewUpdate(t);return i?this.updateView(t,i,e):0},updateView:function(t,e,i){if(!t)return 0;var n=t.FLAG_REMOVE,r=t.FLAG_INSERT,o=t.model;if(t instanceof qe){if(e&n)return this.removeView(o),0;e&r&&(this.insertView(t),e^=r)}return e?t.confirmUpdate(e,i||{}):0},requireView:function(t,e){var i=this.findViewByModel(t);return i?(this.dumpView(i,e),i):null},registerUnmountedView:function(t){var e=t.cid,i=this._updates;if(e in i.unmounted)return 0;var n=i.unmounted[e]|=t.FLAG_INSERT;return i.unmountedCids.push(e),delete i.mounted[e],n},registerMountedView:function(t){var e=t.cid,i=this._updates;if(e in i.mounted)return 0;i.mounted[e]=!0,i.mountedCids.push(e);var n=i.unmounted[e]||0;return delete i.unmounted[e],n},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=jt({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){var e;this.notifyBeforeRender(t);for(var i=0,n=0,r=ln;n++,i+=(e=this.updateViewsBatch(t)).updated,r=Math.min(e.priority,r),!e.empty;);var o={updated:i,batches:n,priority:r};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){for(var t=this._updates.priorities,e=Object.keys(t),i=e.length;0<i&&i--;)for(var n in t[e[i]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:ln});var i=this._updates,n=i.id;if(n){dt(n),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var r=this.updateViewsBatch(t),o=jt({},t,{mountBatchSize:1e3-r.mounted,unmountBatchSize:1e3-r.unmounted}),s=this.checkViewport(o),a=s.unmounted,l=s.mounted,c=e.processed,g=i.count;0<r.updated&&(c+=r.updated+r.unmounted,r.processed=c,e.priority=Math.min(r.priority,e.priority),r.empty&&0===l?(r.unmounted+=a,r.mounted+=l,r.priority=e.priority,this.notifyAfterRender(r,t),e.processed=0,i.count=0):e.processed=c);var h=t.progress;if(g&&"function"==typeof h&&h.call(this,r.empty,c,g,r,this),i.id!==n)return}i.id=ut(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t){void 0===t&&(t={});var e=t.beforeRender;"function"!=typeof e&&"function"!=typeof(e=this.options.beforeRender)||e.call(this,t,this)},notifyAfterRender:function(t,e){void 0===e&&(e={});var i=e.afterRender;"function"!=typeof i&&(i=this.options.afterRender),"function"==typeof i&&i.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,i=this._updates,n=0,r=0,o=0,s=0,a=ln,l=!0,c=this.options,g=i.priorities,h="viewport"in t?t.viewport:c.viewport;"function"!=typeof h&&(h=null);var u=c.onViewPostponed;"function"!=typeof u&&(u=null);var d=Object.keys(g);t:for(var f=0,p=d.length;f<p;f++){var I=d[f],m=g[I];for(var A in m){if(e<=n){l=!1;break t}var v=_e[A];if(v){var C=m[A];if(0==(C&v.FLAG_REMOVE)){var w=A in i.unmounted;if(v.DETACHABLE&&h&&!h.call(this,v,!w,this)){w||(this.registerUnmountedView(v),v.unmount()),i.unmounted[A]|=C,delete m[A],o++;continue}w&&(C|=v.FLAG_INSERT,s++),C|=this.registerMountedView(v)}var y=this.updateView(v,C,t);0<y&&(m[A]=y,!u||!u.call(this,v,y,this)||m[A])?(r++,l=!1):(I<a&&(a=I),n++,delete m[A])}else delete m[A]}}return{priority:a,updated:n,postponed:r,unmounted:o,mounted:s,empty:l}},getUnmountedViews:function(){for(var t=this._updates,e=Object.keys(t.unmounted),i=e.length,n=new Array(i),r=0;r<i;r++)n[r]=_e[e[r]];return n},getMountedViews:function(){for(var t=this._updates,e=Object.keys(t.mounted),i=e.length,n=new Array(i),r=0;r<i;r++)n[r]=_e[e[r]];return n},checkUnmountedViews:function(t,e){e||(e={});var i=0;"function"!=typeof t&&(t=null);for(var n=("mountBatchSize"in e?e.mountBatchSize:1/0),r=this._updates,o=r.unmountedCids,s=r.unmounted,a=0,l=Math.min(o.length,n);a<l;a++){var c=o[a];if(c in s){var g=_e[c];if(g)if(g.DETACHABLE&&t&&!t.call(this,g,!1,this))o.push(c);else{i++;var h=this.registerMountedView(g);h&&this.scheduleViewUpdate(g,h,g.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),i},checkMountedViews:function(t,e){e||(e={});var i=0;if("function"!=typeof t)return i;for(var n=("unmountBatchSize"in e?e.unmountBatchSize:1/0),r=this._updates,o=r.mountedCids,s=r.mounted,a=0,l=Math.min(o.length,n);a<l;a++){var c=o[a];if(c in s){var g=_e[c];if(g)if(g.DETACHABLE&&!t.call(this,g,!0,this))i++,this.registerUnmountedView(g)&&g.unmount();else o.push(c)}}return o.splice(0,a),i},checkViewport:function(t){var e=jt({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),i="viewport"in e?e.viewport:this.options.viewport,n=this.checkMountedViews(i,e);if(0<n){var r=this._updates.unmountedCids;e.mountBatchSize=Math.min(r.length-n,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(i,e),unmounted:n}},freeze:function(t){t||(t={});var e=this._updates,i=t.key,n=this.options.frozen,r=e.freezeKey;if(i&&i!==r){if(n&&r)return;e.freezeKey=i,e.keyFrozen=n}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&dt(o)},unfreeze:function(t){t||(t={});var e=this._updates,i=t.key,n=e.freezeKey;i&&n&&i!==n||(e.freezeKey=null,i&&i===n&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===an.EXACT},onRemove:function(){this.freeze(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,i=t.height;return ce(e)||(e=this.el.clientWidth),ce(i)||(i=this.el.clientHeight),{width:e,height:i}},setDimensions:function(t,e){var i=this.options,n=void 0===t?i.width:t,r=void 0===e?i.height:e;this.options.width=n,this.options.height=r,ce(n)&&(n=Math.round(n)),ce(r)&&(r=Math.round(r)),this.$el.css({width:null===n?"":n,height:null===r?"":r});var o=this.getComputedSize();this.trigger("resize",o.width,o.height)},setOrigin:function(t,e){return this.translate(t||0,e||0,{absolute:!0})},fitToContent:function(t,e,i,n){i=le(t)?(t=(n=t).gridWidth||1,e=n.gridHeight||1,n.padding||0):(n||(n={}),t=t||1,e=e||1,i||0),i=wt(i);var r="contentArea"in n?new H(n.contentArea):this.getContentArea(n),o=this.scale(),s=this.translate(),a=o.sx,l=o.sy;r.x*=a,r.y*=l,r.width*=a,r.height*=l;var c=Math.max(Math.ceil((r.width+r.x)/t),1)*t,g=Math.max(Math.ceil((r.height+r.y)/e),1)*e,h=0,u=0;("negative"==n.allowNewOrigin&&r.x<0||"positive"==n.allowNewOrigin&&0<=r.x||"any"==n.allowNewOrigin)&&(h=Math.ceil(-r.x/t)*t,c+=h+=i.left),("negative"==n.allowNewOrigin&&r.y<0||"positive"==n.allowNewOrigin&&0<=r.y||"any"==n.allowNewOrigin)&&(u=Math.ceil(-r.y/e)*e,g+=u+=i.top),c+=i.right,g+=i.bottom,c=Math.max(c,n.minWidth||0),g=Math.max(g,n.minHeight||0),c=Math.min(c,n.maxWidth||Number.MAX_VALUE),g=Math.min(g,n.maxHeight||Number.MAX_VALUE);var d=this.getComputedSize(),f=c!=d.width||g!=d.height;return(h!=s.tx||u!=s.ty)&&this.translate(h,u),f&&this.setDimensions(c,g),new H(-h/a,-u/l,c/a,g/l)},scaleContentToFit:function(t){var e,i;if(t||(t={}),"contentArea"in t){var n=t.contentArea;e=this.localToPaperRect(n),i=new E(n)}else e=this.getContentBBox(t),i=this.paperToLocalPoint(e);if(e.width&&e.height){jt(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var r,o=wt(t.padding),s=t.minScaleX||t.minScale,a=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,c=t.maxScaleY||t.maxScale;if(t.fittingBBox)r=t.fittingBBox;else{var g=this.translate(),h=this.getComputedSize();r={x:g.tx,y:g.ty,width:h.width,height:h.height}}r=new H(r).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var u=this.scale(),d=r.width/e.width*u.sx,f=r.height/e.height*u.sy;if(t.preserveAspectRatio&&(d=f=Math.min(d,f)),t.scaleGrid){var p=t.scaleGrid;d=p*Math.floor(d/p),f=p*Math.floor(f/p)}d=Math.min(a,Math.max(s,d)),f=Math.min(c,Math.max(l,f));var I=this.options.origin,m=r.x-i.x*d-I.x,A=r.y-i.y*f-I.y;this.scale(d,f),this.translate(m,A)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new H:q(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(){return Rt(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):!0===this.options.restrictTranslate?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var e,i,n=this.options.cellViewNamespace,r=t.get("type")+"View",o=rt(n,r,".");return i=t.isLink()?(e=this.options.linkView,Fi):(e=this.options.elementView,$e),new(e.prototype instanceof s.View?o||e:e.call(this,t)||o||i)({model:t,interactive:this.options.interactive})},removeView:function(t){var e=t.id,i=this._views,n=this._updates,r=i[e];if(r){var o=r.cid,s=n.mounted,a=n.unmounted;r.remove(),delete i[e],delete s[o],delete a[o]}return r},renderView:function(t,e){var i,n,r=t.id,o=this._views;return n=r in o?(i=o[r]).FLAG_INSERT:((i=o[t.id]=this.createViewForModel(t)).paper=this).registerUnmountedView(i)|i.getFlag(i.initFlag),this.requestViewUpdate(i,n,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var i=0,n=t.length;i<n;i++)this.renderView(t[i],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){Zt(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t=S(this.cells).children("[model-id]"),s=this.model.get("cells");Ct(t,function(t,e){var i=s.get(t.getAttribute("model-id")),n=s.get(e.getAttribute("model-id")),r=i.attributes.z||0,o=n.attributes.z||0;return r===o?0:r<o?-1:1})},insertView:function(t){var e=this.cells;switch(this.options.sorting){case an.APPROX:var i=t.model.get("z"),n=this.addZPivot(i);e.insertBefore(t.el,n);break;case an.EXACT:default:e.appendChild(t.el)}},addZPivot:function(t){(t=+t)||(t=0);var e=this._zPivots,i=e[t];if(i)return i;i=e[t]=document.createComment("z-index:"+(t+1));var n=-1/0;for(var r in e)(r=+r)<t&&n<r&&(n=r);var o=this.cells;if(n!==-1/0){var s=e[n];o.insertBefore(i,s.nextSibling)}else o.insertBefore(i,o.firstChild);return i},removeZPivots:function(){var t=this._zPivots,e=this.viewport;for(var i in t)e.removeChild(t[i]);this._zPivots={}},scale:function(t,e,i,n){if(void 0===t)return q.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===i&&(n=i=0);var r=this.translate();if(i||n||r.tx||r.ty){var o=r.tx-i*(t-1),s=r.ty-n*(e-1);this.translate(o,s)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var a=this.matrix();return a.a=t,a.d=e,this.matrix(a),this.trigger("scale",t,e,i,n),this},rotate:function(t,e,i){if(void 0===t)return q.matrixToRotate(this.matrix());if(void 0===e){var n=this.cells.getBBox();e=n.width/2,i=n.height/2}var r=this.matrix().translate(e,i).rotate(t).translate(-e,-i);return this.matrix(r),this},translate:function(t,e){if(void 0===t)return q.matrixToTranslate(this.matrix());var i=this.matrix();i.e=t||0,i.f=e||0,this.matrix(i);var n=this.translate(),r=this.options.origin;return r.x=n.tx,r.y=n.ty,this.trigger("translate",n.tx,n.ty),this.options.drawGrid&&this.drawGrid(),this},findView:function(t){var e=ge(t)?this.cells.querySelector(t):t instanceof S?t[0]:t,i=this.findAttribute("model-id",e);if(i)return this._views[i]},findViewByModel:function(t){var e=ge(t)||ce(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(e){return e=new E(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=jt(t||{},{strict:!1}),e=new H(e);var i=this.model.getElements().map(this.findViewByModel,this),n=t.strict?"containsRect":"intersect";return i.filter(function(t){return t&&e[n](t.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t){for(var e,i=[],n=arguments.length-1;0<n--;)i[n]=arguments[n+1];"string"==typeof t&&(e=this).trigger.apply(e,["tools:event",t].concat(i))},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.matrix())},localToPaperRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.matrix())},paperToLocalPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.matrix().inverse())},paperToLocalRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.matrix().inverse())},localToClientPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.clientMatrix())},localToClientRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.clientMatrix())},clientToLocalPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,i,n){return this.localToPaperRect(t,e,i,n).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var i=new E(t,e).difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(t,e,i,n){var r=this.pageOffset(),o=new H(t,e,i,n);return o.x-=r.x,o.y-=r.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new E(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Fi))throw new Error("Must provide a linkView.");var e=t.model,i=this.options,n=this.model,r=n.constructor.validations;return!(!i.multiLinks&&!r.multiLinks.call(this,n,e))&&(!(!i.linkPinning&&!r.linkPinning.call(this,n,e))&&!("function"==typeof i.allowLink&&!i.allowLink.call(this,t,this)))},getDefaultLink:function(t,e){return Rt(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(e){var t=(e=e||{}).highlighter,i=this.options;if(void 0===t){var n=["embedding","connecting","magnetAvailability","elementAvailability"].find(function(t){return!!e[t]});t=n&&i.highlighting[n]||i.highlighting.default}if(!t)return!1;ge(t)&&(t={name:t});var r=t.name,o=i.highlighterNamespace[r];if(!o)throw new Error('Unknown highlighter ("'+r+'")');if("function"!=typeof o.highlight)throw new Error('Highlighter ("'+r+'") is missing required highlight() method');if("function"!=typeof o.unhighlight)throw new Error('Highlighter ("'+r+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:r}},onCellHighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){e.id||(e.id=q.uniqueId());var n=i.name+e.id+JSON.stringify(i.options);if(!this._highlights[n]){var r=i.highlighter;r.highlight(t,e,Tt({},i.options)),this._highlights[n]={cellView:t,magnetEl:e,opt:i.options,highlighter:r}}}},onCellUnhighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){var n=i.name+e.id+JSON.stringify(i.options),r=this._highlights[n];r&&(r.highlighter.unhighlight(r.cellView,r.magnetEl,r.opt),this._highlights[n]=null)}},pointerdblclick:function(t){t.preventDefault(),t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,i.x,i.y):this.trigger("blank:pointerdblclick",t,i.x,i.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=ht(t);var e=this.findView(t.target);if(this.guard(t,e))return;var i=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,i.x,i.y):this.trigger("blank:pointerclick",t,i.x,i.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,i.x,i.y):this.trigger("blank:contextmenu",t,i.x,i.y)}},pointerdown:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,i.x,i.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,i.x,i.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=ht(t);var i=this.snapToGrid(t.clientX,t.clientY),n=e.sourceView;n?n.pointermove(t,i.x,i.y):this.trigger("blank:pointermove",t,i.x,i.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=ht(t),i=this.snapToGrid(e.clientX,e.clientY),n=this.eventData(t).sourceView;n?n.pointerup(e,i.x,i.y):this.trigger("blank:pointerup",e,i.x,i.y),e.isPropagationStopped()||this.pointerclick(S.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.findView(t.relatedTarget);if(e){if(i===e)return;e.mouseenter(t)}else{if(i)return;this.trigger("paper:mouseenter",t)}}},mouseleave:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.findView(t.relatedTarget);if(e){if(i===e)return;e.mouseleave(t)}else{if(i)return;this.trigger("paper:mouseleave",t)}}},mousewheel:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=t.originalEvent,n=this.snapToGrid(i.clientX,i.clientY),r=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));e?e.mousewheel(t,n.x,n.y,r):this.trigger("blank:mousewheel",t,n.x,n.y,r)}},onevent:function(t){var e=t.currentTarget,i=e.getAttribute("event");if(i){var n=this.findView(e);if(n){if(t=ht(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onevent(t,i,r.x,r.y)}}},magnetEvent:function(t,e){var i=t.currentTarget;if(i.getAttribute("magnet")){var n=this.findView(i);if(n){if(t=ht(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);e.call(this,n,t,i,r.x,r.y)}}},onmagnet:function(t){this.magnetEvent(t,function(t,e,i,n,r){t.onmagnet(e,n,r)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(t,e,i,n,r){t.magnetpointerdblclick(e,i,n,r)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(t,e,i,n,r){t.magnetcontextmenu(e,i,n,r)})},onlabel:function(t){var e=t.currentTarget,i=this.findView(e);if(i){if(t=ht(t),this.guard(t,i))return;var n=this.snapToGrid(t.clientX,t.clientY);i.onlabel(t,n.x,n.y)}},getPointerArgs:function(t){var e=ht(t),i=this.snapToGrid(e.clientX,e.clientY);return[e,i.x,i.y]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return"mousedown"===t.type&&2===t.button||(!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof Se)&&(this.svg!==t.target&&this.el!==t.target&&!S.contains(this.svg,t.target))))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:q("svg",{width:"100%",height:"100%"},q("defs")),patterns:{},add:function(t,e){q(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(q("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(ge(t)&&Array.isArray(e[t]))return e[t].map(function(t){return Tt({},t)});var i=t||{args:[{}]},n=Array.isArray(i),r=i.name;if(n||r||i.markup||(r="dot"),r&&Array.isArray(e[r])){var o=e[r].map(function(t){return Tt({},t)}),s=Array.isArray(i.args)?i.args:[i.args||{}];jt(s[0],te(t,"args"));for(var a=0;a<s.length;a++)o[a]&&Tt(o[a],s[a]);return o}return n?i:[i]},drawGrid:function(t){var a=this.options.gridSize;if(a<=1)return this.clearGrid();var l=Array.isArray(t)?t:[t],c=this.matrix(),g=this._getGridRefs();this._gridSettings.forEach(function(t,e){var i="pattern_"+e,n=se(t,l[e],{sx:c.a||1,sy:c.d||1,ox:c.e||0,oy:c.f||0});n.width=a*(c.a||1)*(n.scaleFactor||1),n.height=a*(c.d||1)*(n.scaleFactor||1),g.exist(i)||g.add(i,q("pattern",{id:i,patternUnits:"userSpaceOnUse"},q(n.markup)));var r=g.get(i);Rt(n.update)&&n.update(r.node.childNodes[0],n);var o=n.ox%n.width;o<0&&(o+=n.width);var s=n.oy%n.height;s<0&&(s+=n.height),r.attr({x:o,y:s,width:n.width,height:n.height})});var e=(new XMLSerializer).serializeToString(g.root.node);return e="url(data:image/svg+xml;base64,"+btoa(e)+")",this.$grid.css("backgroundImage",e),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",i=t.size||"auto auto",n=this.scale(),r=this.translate();le(e)&&(e=r.tx+n.sx*(e.x||0)+"px "+(r.ty+n.sy*(e.y||0))+"px");le(i)&&(i=(i=new H(i).scale(n.sx,n.sy)).width+"px "+i.height+"px"),this.$background.css({backgroundSize:i,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){var i,n=(e=e||{}).size,r=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[re(r)];if(Rt(a)){t.width*=s,t.height*=s;var l=a(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");i=l.toDataURL("image/png"),r="repeat",le(n)?(n.width*=l.width/t.width,n.height*=l.height/t.height):void 0===n&&(e.size={width:l.width/s,height:l.height/s})}else i=t.src,void 0===n&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:r,backgroundImage:"url("+i+")"}),this.updateBackgroundImage(e)}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Ot(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,Zt(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!le(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,i=t.name;if(e||(e=i+this.svg.id+nt(JSON.stringify(t))),!this.isDefined(e)){var n=Nt,r=n[i]&&n[i](t.args||{});if(!r)throw new Error("Non-existing filter "+i);var o=Tt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});q(r,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!le(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");var e=t.id,i=t.type,n=t.stops;if(e||(e=i+this.svg.id+nt(JSON.stringify(t))),!this.isDefined(e)){var r=xt('<stop offset="${offset}" stop-color="${color}" stop-opacity="${opacity}"/>'),o=["<"+i+">",Ut(n).map(function(t){return r({offset:t.offset,color:t.color,opacity:Number.isFinite(t.opacity)?t.opacity:1})}).join(""),"</"+i+">"].join(""),s=Tt({id:e},t.attrs);q(o,s).appendTo(this.defs)}return e},defineMarker:function(t){if(!le(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");var e=t.id;if(e||(e=this.svg.id+nt(JSON.stringify(t))),!this.isDefined(e)){var i=te(t,"type","userSpaceOnUse");q("marker",{id:e,orient:"auto",overflow:"visible",markerUnits:t.markerUnits||"userSpaceOnUse"},[q(t.type||"path",i)]).appendTo(this.defs)}return e}},{sorting:an,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),i=t.width,n=t.height;e.width=2*i,e.height=2*n;var r=e.getContext("2d");return r.drawImage(t,0,0,i,n),r.setTransform(-1,0,0,-1,e.width,e.height),r.drawImage(t,0,0,i,n),r.setTransform(-1,0,0,1,e.width,0),r.drawImage(t,0,0,i,n),r.setTransform(1,0,0,-1,0,e.height),r.drawImage(t,0,0,i,n),e},flipX:function(t){var e=document.createElement("canvas"),i=t.width,n=t.height;e.width=2*i,e.height=n;var r=e.getContext("2d");return r.drawImage(t,0,0,i,n),r.translate(2*i,0),r.scale(-1,1),r.drawImage(t,0,0,i,n),e},flipY:function(t){var e=document.createElement("canvas"),i=t.width,n=t.height;e.width=i,e.height=2*n;var r=e.getContext("2d");return r.drawImage(t,0,0,i,n),r.translate(0,2*n),r.scale(1,-1),r.drawImage(t,0,0,i,n),e},watermark:function(t,e){e=e||{};var i=t.width,n=t.height,r=document.createElement("canvas");r.width=3*i,r.height=3*n;for(var o=r.getContext("2d"),s=ce(e.watermarkAngle)?-e.watermarkAngle:-20,a=y(s),l=r.width/4,c=r.height/4,g=0;g<4;g++)for(var h=0;h<4;h++)0<(g+h)%2&&(o.setTransform(1,0,0,1,(2*g-1)*l,(2*h-1)*c),o.rotate(a),o.drawImage(t,-i/2,-n/2,i,n));return r}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){q(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var i=e.sx<=1?e.thickness*e.sx:e.thickness;q(t).attr({width:i,height:i,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var i,n=e.width,r=e.height,o=e.thickness;i=0<=n-o&&0<=r-o?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",q(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var i,n=e.width,r=e.height,o=e.thickness;i=0<=n-o&&0<=r-o?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",q(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var i,n=e.width,r=e.height,o=e.thickness;i=0<=n-o&&0<=r-o?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",q(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}}]}}),hn=Qe.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){var e=this.paper,i=this.relatedView;return!e||!i||e.guard(t,i)}}),un=Qe.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,options:{tools:null,relatedView:null,name:null,component:!1},configure:function(t){var e=(t=Tt(this.options,t)).tools;if(!Array.isArray(e))return this;var i=t.relatedView;if(!(i instanceof qe))return this;for(var n=this.tools=[],r=0,o=e.length;r<o;r++){var s=e[r];s instanceof hn&&(s.configure(i,this),s.render(),this.vel.append(s.el),n.push(s))}return this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(e){for(var i=0,n=e.length;i<n;i++){var r=e[i];t.tool!==r.cid&&r.isVisible()&&r.update()}return this}},focusTool:function(t){var e=this.tools;if(!e)return this;for(var i=0,n=e.length;i<n;i++){var r=e[i];t===r?r.show():r.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var i=0,n=e.length;i<n;i++){var r=e[i];r===t||r.isVisible()||(r.show(),r.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,i=t.length;e<i;e++)t[e].remove();this.tools=null},mount:function(){var t=this.options,e=t.relatedView;e&&(t.component?e.el:e.paper.tools).appendChild(this.el);return this}}),dn={Graph:He,attributes:xe,Cell:Se,CellView:qe,Element:Ve,ElementView:$e,Link:We,LinkView:Fi,Paper:gn,ToolView:hn,ToolsView:un},fn={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,i){var n=this.getCell(e),r=i.node(e);t.setPosition?t.setPosition(n,r):n.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importLink:function(t,e,i){var n=this.getCell(e.name),r=i.edge(e),o=r.points||[],s=new D(o);if(t.setVertices||t.setLinkVertices)if(Rt(t.setVertices))t.setVertices(n,o);else{s.simplify({threshold:.001});var a=s.points.map(function(t){return t.toJSON()}),l=a.length;n.set("vertices",a.slice(1,l-1))}if(t.setLabels&&"x"in r&&"y"in r){var c={x:r.x,y:r.y};if(Rt(t.setLabels))t.setLabels(n,c,o);else{var g=s.closestPointLength(c),h=s.pointAtLength(g),u=g/s.length(),d=new E(c).difference(h).toJSON();n.label(0,{position:{distance:u,offset:d}})}}},layout:function(t,e){var i;i=t instanceof He?t:(new He).resetCells(t,{dry:!0,sort:!1});var n=(e=jt(e||{},{resizeClusters:!(t=null),clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===n)throw new Error('The the "dagre" utility is a mandatory dependency.');var r=fn.toGraphLib(i,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(t){return t.id}}),o={},s=e.marginX||0,a=e.marginY||0;if(e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),e.ranker&&(o.ranker=e.ranker),s&&(o.marginx=s),a&&(o.marginy=a),r.setGraph(o),n.layout(r,{debugTiming:!!e.debugTiming}),i.startBatch("layout"),fn.fromGraphLib(r,{importNode:this.importElement.bind(i,e),importEdge:this.importLink.bind(i,e)}),e.resizeClusters){var l=r.nodes().filter(function(t){return 0<r.children(t).length}).map(i.getCell.bind(i)).sort(function(t,e){return e.getAncestors().length-t.getAncestors().length});Zt(l,"fitEmbeds",{padding:e.clusterPadding})}i.stopBatch("layout");var c=r.graph();return new H(s,a,Math.abs(c.width-2*s),Math.abs(c.height-2*a))},fromGraphLib:function(e,i){var n=(i=i||{}).importNode||he,r=i.importEdge||he,o=this instanceof He?this:new He;return e.nodes().forEach(function(t){n.call(o,t,e,o,i)}),e.edges().forEach(function(t){r.call(o,t,e,o,i)}),o},toGraphLib:function(t,e){var i=(e=e||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===i)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=ee(e,"directed","compound","multigraph"),r=new i.Graph(n),o=e.setNodeLabel||he,s=e.setEdgeLabel||he,a=e.setEdgeName||he,l=t.get("cells"),c=0,g=l.length;c<g;c++){var h=l.at(c);if(h.isLink()){var u=h.get("source"),d=h.get("target");if(!u.id||!d.id)break;r.setEdge(u.id,d.id,s(h),a(h))}else if(r.setNode(h.id,o(h)),r.isCompound()&&h.has("parent")){var f=h.get("parent");l.has(f)&&r.setParent(h.id,f)}}return r}};He.prototype.toGraphLib=function(t){return fn.toGraphLib(this,t)},He.prototype.fromGraphLib=function(t,e){return fn.fromGraphLib.call(this,t,e)};var pn={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var i=this._results[t];if(void 0!==i)return i;try{i=e()}catch(t){i=!1}return this._results[t]=i}},In=Ve.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),mn=In.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),An=$e.extend({presentationAttributes:$e.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=$e.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),vn=In.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),Cn=In.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),wn=In.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),yn=In.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),bn=In.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),Nn=In.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),Mn=In.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),xn=Mn.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),Sn=pn.test("svgforeignobject"),kn=In.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Sn?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),In.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Tt({},e),div:{style:Tt({},e)}})},updateContent:function(t,e){Sn?this.attr({".content":{html:mt(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),Dn=$e.extend({presentationAttributes:Sn?$e.prototype.presentationAttributes:$e.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=$e.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var i=this.model;if(Sn)$e.prototype.update.call(this,i,e);else{var n=te(e||i.get("attrs"),".content");$e.prototype.update.call(this,i,n),e&&!qt(e,".content")||this.updateContent(i,e)}},updateContent:function(t,e){var i=se({},(e||t.get("attrs"))[".content"]);i=te(i,"text");var n=It(t.get("content"),t.get("size"),i,{svgDocument:this.paper.svg}),r=ot({},".content",i,"/");r[".content"].text=n,$e.prototype.update.call(this,t,r)}}),zn={Generic:In,Rect:mn,TextView:An,Text:vn,Circle:Cn,Ellipse:wn,Polygon:yn,Polyline:bn,Image:Nn,Path:Mn,Rhombus:xn,TextBlock:kn,TextBlockView:Dn},Tn=Ve.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),jn=Ve.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Ln=Ve.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Zn=Ve.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Pn=Ve.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Gn=Ve.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Bn=Ve.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),On=Ve.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),En=Ve.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Yn=Ve.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Rn=Ve.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Wn=Ve.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var i={lateralArea:t},n=ft(t)?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:i,top:n},e)}},{attributes:{lateralArea:{set:function(t,e){var i=ft(t);i&&(t=parseFloat(t)/100);var n=e.x,r=e.y,o=e.width,s=e.height,a=o/2,l=i?s*t:t,c=q.KAPPA,g=c*a,h=c*(i?s*t:t),u=n+o/2,d=n+o,f=r+l,p=f-l,I=r+s-l,m=r+s;return{d:["M",n,f,"L",n,I,"C",n,I+h,u-g,m,u,m,"C",u+g,m,d,I+h,d,I,"L",d,f,"C",d,f-h,u+g,p,u,p,"C",u-g,p,n,f-h,n,f,"Z"].join(" ")}}}}}),Un=pn.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Xn={Rectangle:Tn,Circle:jn,Ellipse:Ln,Path:Zn,Polygon:Pn,Polyline:Gn,Image:Bn,BorderedImage:On,EmbeddedImage:En,InscribedImage:Yn,HeaderedRectangle:Rn,Cylinder:Wn,TextBlock:Ve.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Un]},{attributes:{text:{set:function(t,e,i,n){if(!(i instanceof HTMLElement)){var r=n.style||{},o={text:t,width:-5,height:"100%"},s=Tt({textVerticalAnchor:"middle"},r);return xe.textWrap.set.call(this,o,e,i,s),{fill:r.color||null}}i.textContent=t},position:function(t,e,i){if(i instanceof SVGElement)return e.center()}}}}),Link:We.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),DoubleLink:We.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ShadowLink:We.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]})},Fn=In.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){In.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,i){var n=Gt(this.get("inPorts")),r=_t(Gt(this.get("outPorts")),n),o=this.createPortItems("in",n),s=this.createPortItems("out",r);this.prop("ports/items",o.concat(s),Tt({rewrite:!0},i))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return Ut(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,i){var n=this.get(e);return this.set(e,Array.isArray(n)?n.concat(t):[t],i)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,i){return this.set(e,Ht(this.get(e),t),i)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,i){return this.prop("ports/groups/"+t,le(e)?e:{},i)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),Vn=Fn.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),Jn=Fn.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),Hn={Model:Fn,Atomic:Vn,Coupled:Jn,Link:We.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}})},_n=In.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),Qn=_n.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),Kn=Qn.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),qn=Qn.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),$n=_n.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),tr=_n.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),er=$n.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),ir=$n.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),nr=tr.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),rr=tr.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),or=tr.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),sr=tr.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),ar=tr.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),lr=tr.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),cr={Gate:_n,IO:Qn,Input:Kn,Output:qn,Gate11:$n,Gate21:tr,Repeater:er,Not:ir,Or:nr,And:rr,Nor:or,Nand:sr,Xor:ar,Xnor:lr,Wire:We.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")})},gr={KingWhite:In.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),KingBlack:In.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),QueenWhite:In.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),QueenBlack:In.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),RookWhite:In.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),RookBlack:In.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),BishopWhite:In.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),BishopBlack:In.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),KnightWhite:In.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),KnightBlack:In.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),PawnWhite:In.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),PawnBlack:In.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'})},hr=Ve.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),ur=hr.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),dr=Ve.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),fr=dr.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),pr=Ve.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),Ir=pr.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),mr=pr.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),Ar=pr.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),vr=pr.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),Cr={Entity:hr,WeakEntity:ur,Relationship:dr,IdentifyingRelationship:fr,Attribute:pr,Multivalued:Ir,Derived:mr,Key:Ar,Normal:vr,ISA:Ve.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Line:We.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}})},wr={State:Cn.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),StartState:Ve.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),EndState:Ve.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Arrow:We.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0})},yr={Member:Ve.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Arrow:We.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1})},br={Place:In.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),PlaceView:$e.extend({presentationAttributes:$e.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:$e.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=(t=$e.prototype.confirmUpdate).call.apply(t,[this].concat(e));return this.hasFlag(n,"TOKENS")&&(this.renderTokens(),this.update(),n=this.removeFlag(n,"TOKENS")),n},renderTokens:function(){var e=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(t){e.removeClass(t)});var t=this.model.get("tokens");if(t)switch(t){case 1:e.addClass("one"),e.append(q("circle"));break;case 2:e.addClass("two"),e.append([q("circle"),q("circle")]);break;case 3:e.addClass("three"),e.append([q("circle"),q("circle"),q("circle")]);break;default:e.addClass("alot"),e.append(q("text").text(t+""))}}}),Transition:In.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Link:We.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}})},Nr=In.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),In.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var n=this.get("attrs"),t=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],r=0;t.forEach(function(t){var e=Array.isArray(t.text)?t.text:[t.text],i=20*e.length+20;n[".uml-class-"+t.type+"-text"].text=e.join("\n"),n[".uml-class-"+t.type+"-rect"].height=i,n[".uml-class-"+t.type+"-rect"].transform="translate(0,"+r+")",r+=i})}}),Mr=$e.extend({initialize:function(){$e.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),xr=Nr.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),Sr=Mr,kr=Nr.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),Dr={basic:zn,standard:Xn,devs:Hn,logic:cr,chess:gr,erd:Cr,fsa:wr,org:yr,pn:br,uml:{Class:Nr,ClassView:Mr,Abstract:xr,AbstractView:Sr,Interface:kr,InterfaceView:Mr,Generalization:We.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),Implementation:We.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),Aggregation:We.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),Composition:We.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),Association:We.define("uml.Association"),State:In.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),In.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),StartState:Cn.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),EndState:In.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Transition:We.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}})}};function zr(t,e){return 0===e?"0%":Math.round(t/e*100)+"%"}function Tr(r){return function(t,e,i,n){return(e.isNodeConnection(i)?Lr:jr)(r,t,e,i,n)}}function jr(t,e,i,n,r){var o=i.model.angle(),s=i.getNodeUnrotatedBBox(n),a=i.model.getBBox().center();r.rotate(a,o);var l=r.x-s.x,c=r.y-s.y;return t&&(l=zr(l,s.width),c=zr(c,s.height)),e.anchor={name:"topLeft",args:{dx:l,dy:c,rotate:!0}},e}function Lr(t,e,i,n,r){var o=i.getConnection();if(!o)return e;var s=o.closestPointLength(r);if(t){var a=o.length();e.anchor={name:"connectionRatio",args:{ratio:s/a}}}else e.anchor={name:"connectionLength",args:{length:s}};return e}var Zr=he,Pr=Tr(!1),Gr=Tr(!0),Br={useDefaults:Zr,pinAbsolute:Pr,pinRelative:Gr};function Or(t,e,i){return Gr.call(this.paper,{},e,i,t,this.model).anchor}function Er(t,e){var i=t.model;return e?i.getBBox():i.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}var Yr=Qe.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){this.vel.attr({cx:t,cy:e})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),Rr=hn.extend({name:"vertices",options:{handleClass:Yr,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,i=t.length;e<i;e++)t[e].remove()},renderHandles:function(){for(var e=this,t=this.relatedView.model.vertices(),i=0,n=t.length;i<n;i++){var r=t[i],o=new this.options.handleClass({index:i,paper:this.paper,guard:function(t){return e.guard(t)}});o.render(),o.position(r.x,r.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,i=t.length;e<i;e++){var n=t[e],r=this.handles[e];if(!r)return;r.position(n.x,n.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,i=e.model.vertices(),n=0<t?i[t-1]:e.sourceAnchor,r=t<i.length-1?i[t+1]:e.targetAnchor;return{prev:new E(n),next:new E(r)}},onHandleWillChange:function(t,e){this.focus();var i=this.relatedView,n=this.options;i.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||i.notifyPointerdown.apply(i,i.paper.getPointerArgs(e))},onHandleChanging:function(t,e){var i=this.options,n=this.relatedView,r=t.options.index,o=n.paper.getPointerArgs(e),s=o[0],a=o[1],l=o[2],c={x:a,y:l};this.snapVertex(c,r),n.model.vertex(r,c,{ui:!0,tool:this.cid}),t.position(c.x,c.y),i.stopPropagation||n.notifyPointermove(s,a,l)},onHandleChanged:function(t,e){var i=this.options,n=this.relatedView;if(i.vertexAdding&&this.updatePath(),i.redundancyRemoval){n.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var r=n.paper.getPointerArgs(e),o=r[0],s=r[1],a=r[2];i.stopPropagation||n.notifyPointerup(o,s,a),n.checkMouseleave(o)}},snapVertex:function(t,e){var i=this.options.snapRadius;if(0<i){var n=this.getNeighborPoints(e),r=n.prev,o=n.next;Math.abs(t.x-r.x)<i?t.x=r.x:Math.abs(t.x-o.x)<i&&(t.x=o.x),Math.abs(t.y-r.y)<i?t.y=n.prev.y:Math.abs(t.y-o.y)<i&&(t.y=o.y)}},onHandleRemove:function(t,e){var i=t.options.index,n=this.relatedView;n.model.removeVertex(i,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(ht(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=ht(t),i=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var r=n.getVertexIndex(i.x,i.y);this.snapVertex(i,r),n.model.insertVertex(r,i,{ui:!0,tool:this.cid}),this.render();var o=this.handles[r];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:Yr}),Wr=Qe.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,i,n){var r=q.createSVGMatrix().translate(t,e).rotate(i),o=this.childNodes.handle;o.setAttribute("transform",q.matrixToTransformString(r)),o.setAttribute("cursor",i%180==0?"row-resize":"col-resize");var s=n.getClosestPoint(new E(t,e)),a=this.childNodes.line;a.setAttribute("x1",t),a.setAttribute("y1",e),a.setAttribute("x2",s.x),a.setAttribute("y2",s.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}}),Ur=hn.extend({name:"segments",precision:.5,options:{handleClass:Wr,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:Or,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var i=0,n=e.length;i<n-1;i++){var r=e[i],o=e[i+1],s=this.renderHandle(r,o);this.simulateRelatedView(s.el),this.handles.push(s),s.options.index=i}return this},renderHandle:function(t,e){var i=this,n=new this.options.handleClass({paper:this.paper,guard:function(t){return i.guard(t)}});return n.render(),this.updateHandle(n,t,e),n.vel.appendTo(this.el),this.startHandleListening(n),n},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,i=t.length;e<i;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,i=0,n=e.length;i<n;i++)e[i].options.index+=t},resetAnchor:function(t,e){var i=this.relatedView.model;e?i.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):i.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,i){var n=t.options.index,r=this.relatedView.model.vertices(),o=t.options.axis,s=r[n-2]||i.sourceAnchor,a=r[n+1]||i.targetAnchor,l=this.options.snapRadius;return Math.abs(e[o]-s[o])<l?e[o]=s[o]:Math.abs(e[o]-a[o])<l&&(e[o]=a[o]),e},onHandleChanging:function(t,e){var i=this.options,n=this.eventData(e),r=this.relatedView,o=r.paper,s=t.options.index-1,a=ht(e),l=o.snapToGrid(a.clientX,a.clientY),c=this.snapHandle(t,l.clone(),n),g=t.options.axis,h=this.options.snapHandle?0:l[g]-c[g],u=r.model,d=Ot(u.vertices()),f=d[s],p=d[s+1],I=this.options.anchor;"function"!=typeof I&&(I=null);var m=r.sourceView,A=r.sourceBBox,v=!1,C=!1;if(f?0===s?A.containsPoint(f)?(d.shift(),this.shiftHandleIndexes(-1),v=!0):(f[g]=c[g],C=!0):f[g]=c[g]:((f=r.sourceAnchor.toJSON())[g]=c[g],A.containsPoint(f)?(f[g]=c[g],v=!0):(d.unshift(f),this.shiftHandleIndexes(1),C=!0)),I&&m){if(v){var w=n.sourceAnchor.clone();w[g]=c[g];var y=I.call(r,w,m,r.sourceMagnet||m.el,"source",r);this.resetAnchor("source",y)}C&&this.resetAnchor("source",n.sourceAnchorDef)}var b=r.targetView,N=r.targetBBox,M=!1,x=!1;if(p?s===d.length-2?N.containsPoint(p)?(d.pop(),M=!0):(p[g]=c[g],x=!0):p[g]=c[g]:((p=r.targetAnchor.toJSON())[g]=c[g],N.containsPoint(p)?M=!0:(d.push(p),x=!0)),I&&b){if(M){var S=n.targetAnchor.clone();S[g]=c[g];var k=I.call(r,S,b,r.targetMagnet||b.el,"target",r);this.resetAnchor("target",k)}x&&this.resetAnchor("target",n.targetAnchorDef)}u.vertices(d,{ui:!0,tool:this.cid}),this.updateHandle(t,f,p,h),i.stopPropagation||r.notifyPointermove(a,l.x,l.y)},onHandleChangeStart:function(t,e){var i=this.options,n=this.handles,r=this.relatedView,o=r.model,s=r.paper,a=t.options.index;if(Array.isArray(n)){for(var l=0,c=n.length;l<c;l++)l!==a&&n[l].hide();this.focus(),this.eventData(e,{sourceAnchor:r.sourceAnchor.clone(),targetAnchor:r.targetAnchor.clone(),sourceAnchorDef:Bt(o.prop(["source","anchor"])),targetAnchorDef:Bt(o.prop(["target","anchor"]))}),o.startBatch("segment-move",{ui:!0,tool:this.cid}),i.stopPropagation||r.notifyPointerdown.apply(r,s.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){var i=this.options,n=this.relatedView,r=n.paper,o=n.model;i.redundancyRemoval&&n.removeRedundantLinearVertices({ui:!0,tool:this.cid});var s=ht(e),a=r.snapToGrid(s.clientX,s.clientY);this.render(),this.blur(),o.stopBatch("segment-move",{ui:!0,tool:this.cid}),i.stopPropagation||n.notifyPointerup(s,a.x,a.y),n.checkMouseleave(s)},updateHandle:function(t,e,i,n){var r=Math.abs(e.x-i.x)<this.precision,o=Math.abs(e.y-i.y)<this.precision;if(r||o){var s=new B(e,i);if(s.length()<this.options.segmentLengthThreshold)t.hide();else{var a=s.midpoint(),l=r?"x":"y";a[l]+=n||0;var c=s.vector().vectorAngle(new E(1,0));t.position(a.x,a.y,c,this.relatedView),t.show(),t.options.axis=l}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:Wr}),Xr=hn.extend({tagName:"path",xAxisVector:new E(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},onRender:function(){this.update()},update:function(){var t,e,i=this.ratio,n=this.relatedView,r=n.getTangentAtRatio(i);if(e=r?(t=r.start,r.vector().vectorAngle(this.xAxisVector)||0):(t=n.getPointAtRatio(i),0),!t)return this;var o=q.createSVGMatrix().translate(t.x,t.y).rotate(e);return this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=ht(t),i=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,i.x,i.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,i=e.paper,n=ht(t),r=i.snapToGrid(n.clientX,n.clientY);e.pointerup(n,r.x,r.y),i.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),Fr=Xr.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Vr=Xr.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),Jr=hn.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){var t=this.relatedView,e=this.vel,i=t.model.isLink()?this.getLinkMatrix():this.getElementMatrix();e.transform(i,{absolute:!0})},getElementMatrix:function(){var t=this.relatedView,e=this.options,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var r=e.offset;void 0===r&&(r={});var o=e.useModelGeometry,s=e.rotate,a=Er(t,o),l=t.model.angle();s||(a=a.bbox(l));var c=r.x;void 0===c&&(c=0);var g=r.y;void 0===g&&(g=0),ft(i)&&(i=parseFloat(i)/100*a.width),ft(n)&&(n=parseFloat(n)/100*a.height);var h=q.createSVGMatrix().translate(a.x+a.width/2,a.y+a.height/2);return s&&(h=h.rotate(l)),h=h.translate(i+c-a.width/2,n+g-a.height/2)},getLinkMatrix:function(){var t=this.relatedView,e=this.options,i=e.offset;void 0===i&&(i=0);var n=e.distance;void 0===n&&(n=0);var r,o,s,a=e.rotate;s=(r=ft(n)?t.getTangentAtRatio(parseFloat(n)/100):t.getTangentAtLength(n))?(o=r.start,r.vector().vectorAngle(new E(1,0))||0):(o=t.getConnection().start,0);var l=q.createSVGMatrix().translate(o.x,o.y).rotate(s).translate(0,i);return a||(l=l.rotate(-s)),l},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),Hr=Jr.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,i){e.model.remove({ui:!0,tool:i.cid})}}}),_r=hn.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){var t=this.relatedView,e=this.options,i=this.vel,n=e.useModelGeometry,r=e.rotate,o=wt(e.padding),s=Er(t,n).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom}),a=t.model;if(a.isElement()){var l=a.angle();if(l)if(r){var c=a.getBBox().center();i.rotate(l,c.x,c.y,{absolute:!0})}else s=s.bbox(l)}return i.attr(s.toJSON()),this}}),Qr=hn.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:function(t,e,i,n,r,o){var s=o.options.snapRadius,a="source"===n,l=a?0:-1,c=this.model.vertex(l)||this.getEndAnchor(a?"target":"source");return c&&(Math.abs(c.x-t.x)<s&&(t.x=c.x),Math.abs(c.y-t.y)<s&&(t.y=c.y)),t},anchor:Or,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){var t=this.type,e=this.relatedView.getEndView(t);return this.el.style.display=e?(this.updateAnchor(),this.updateArea(),""):"none",this},updateAnchor:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var i=this.relatedView,n=this.type,r=i.getEndAnchor(n),o=this.options,s=i.model.prop([n,"anchor"]);e.setAttribute("transform","translate("+r.x+","+r.y+")");var a=s?o.customAnchorAttributes:o.defaultAnchorAttributes;for(var l in a)e.setAttribute(l,a[l])}}},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var i,n,r,o=this.relatedView,s=this.type,a=o.getEndView(s),l=a.model,c=o.getEndMagnet(s),g=this.options.areaPadding;isFinite(g)||(g=0),a.isNodeConnection(c)?(n=0,r=(i=a.getBBox()).center()):(i=a.getNodeUnrotatedBBox(c),n=l.angle(),r=i.center(),n&&r.rotate(l.getBBox().center(),-n)),i.inflate(g),e.setAttribute("x",-i.width/2),e.setAttribute("y",-i.height/2),e.setAttribute("width",i.width),e.setAttribute("height",i.height),e.setAttribute("transform","translate("+r.x+","+r.y+") rotate("+n+")")}}},toggleArea:function(t){this.childNodes.area.style.display=t?"":"none"},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,i=this.relatedView.model;t?i.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):i.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e,i=this.relatedView,n=this.type,r=i.getEndView(n),o=r.model,s=i.getEndMagnet(n),a=ht(t),l=this.paper.clientToLocalPoint(a.clientX,a.clientY),c=this.options.snap;if("function"==typeof c&&(l=c.call(i,l,r,s,n,i,this),l=new E(l)),this.options.restrictArea)if(r.isNodeConnection(s)){var g=r.getClosestPoint(l);g&&(l=g)}else{var h=r.getNodeUnrotatedBBox(s),u=o.angle(),d=o.getBBox().center(),f=l.clone().rotate(d,u);h.containsPoint(f)||(l=h.pointNearestToPoint(f).rotate(d,-u))}var p=this.options.anchor;"function"==typeof p&&(e=p.call(i,l,r,s,n,i)),this.resetAnchor(e),this.update()},onPointerUp:function(t){this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.relatedView;this.options.redundancyRemoval&&e.removeRedundantLinearVertices({ui:!0,tool:this.cid}),e.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;!1!==t&&(!0===t&&(t=null),this.resetAnchor(Ot(t)),this.update())}}),Kr={Vertices:Rr,Segments:Ur,SourceArrowhead:Vr,TargetArrowhead:Fr,SourceAnchor:Qr.extend({name:"source-anchor",type:"source"}),TargetAnchor:Qr.extend({name:"target-anchor",type:"target"}),Button:Jr,Remove:Hr,Boundary:_r},qr={Button:Jr,Remove:Hr,Boundary:_r},$r=q,to={DirectedGraph:fn,PortLabel:Re,Port:Pe};return e.V=q,e.Vectorizer=$r,e.anchors=sn,e.config=$,e.connectionPoints=rn,e.connectionStrategies=Br,e.connectors=Xi,e.dia=dn,e.elementTools=qr,e.env=pn,e.format={},e.g=K,e.highlighters=Vi,e.layout=to,e.linkAnchors=Ki,e.linkTools=Kr,e.mvc=Ke,e.routers=Pi,e.setTheme=function(t,e){Zt(_e,"setTheme",t,e=e||{}),Qe.prototype.defaultTheme=t},e.shapes=Dr,e.ui={},e.util=ze,e.version="3.2.0",e}({},Backbone,_,$);if(void 0!==joint)var g=joint.g,V=joint.V,Vectorizer=joint.V;
##############################################
/src/dist/joint.js-1797-            // we can work with that - if `NaN`, return 0
/src/dist/joint.js:1798:            if (cpNormalizedLength !== cpNormalizedLength) { return 0; } // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`
/src/dist/joint.js-1799-            // (`NaN` is the only value that is not equal to itself)
##############################################
/src/dist/joint.js-6019-
/src/dist/joint.js:6020:                    el = document.createElementNS(ns.svg, el);
/src/dist/joint.js-6021-                }
##############################################
/src/dist/joint.js-6354-                    if (eol && j === lastJ) { annotation += eol; }
/src/dist/joint.js:6355:                    tspanNode = document.createTextNode(annotation || ' ');
/src/dist/joint.js-6356-                    if (baseSize && baseSize > maxFontSize) { maxFontSize = baseSize; }
##############################################
/src/dist/joint.js-7193-
/src/dist/joint.js:7194:            var svg = document.createElementNS(ns.svg, 'svg');
/src/dist/joint.js-7195-            svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);
##############################################
/src/dist/joint.js-8439-        var ns = namespace || svgNamespace;
/src/dist/joint.js:8440:        var fragment = document.createDocumentFragment();
/src/dist/joint.js-8441-        var queue = [json, fragment, ns];
##############################################
/src/dist/joint.js-8452-                if (nodeDef.hasOwnProperty('namespaceURI')) { ns = nodeDef.namespaceURI; }
/src/dist/joint.js:8453:                var node = document.createElementNS(ns, tagName);
/src/dist/joint.js-8454-                var svg = (ns === svgNamespace);
##############################################
/src/dist/joint.js-8844-        var textElement = V('text').attr(styles).append(textSpan).node;
/src/dist/joint.js:8845:        var textNode = document.createTextNode('');
/src/dist/joint.js-8846-
##############################################
/src/dist/joint.js-8862-
/src/dist/joint.js:8863:            document.body.appendChild(svgDocument);
/src/dist/joint.js-8864-        }
##############################################
/src/dist/joint.js-9072-            // clean svg document
/src/dist/joint.js:9073:            document.body.removeChild(svgDocument);
/src/dist/joint.js-9074-        }
##############################################
/src/dist/joint.js-9128-            var url = window.URL.createObjectURL(blob);
/src/dist/joint.js:9129:            var link = document.createElement('a');
/src/dist/joint.js-9130-
##############################################
/src/dist/joint.js-9132-            link.download = fileName;
/src/dist/joint.js:9133:            document.body.appendChild(link);
/src/dist/joint.js-9134-
##############################################
/src/dist/joint.js-9136-
/src/dist/joint.js:9137:            document.body.removeChild(link);
/src/dist/joint.js-9138-            window.URL.revokeObjectURL(url); // mark the url for garbage collection
##############################################
/src/dist/joint.js-9316-            // the DOM. The easiest way is to have a 'flag' node:
/src/dist/joint.js:9317:            var nextSibling = parentNode.insertBefore(document.createTextNode(''), sortElement.nextSibling);
/src/dist/joint.js-9318-
##############################################
/src/dist/joint.js-9961-    /**
/src/dist/joint.js:9962:     * @param {Element} el Element, which content is intent to display in full-screen mode, 'window.top.document.body' is default.
/src/dist/joint.js-9963-     */
##############################################
/src/dist/joint.js-10538-                        // Create a new title
/src/dist/joint.js:10539:                        var titleNode = document.createElementNS(node.namespaceURI, 'title');
/src/dist/joint.js-10540-                        titleNode.textContent = title;
##############################################
/src/dist/joint.js-12826-                    var key = groups[i];
/src/dist/joint.js:12827:                    this.groups[key] = this._evaluateGroup(data.groups[key]);
/src/dist/joint.js-12828-                }
##############################################
/src/dist/joint.js-12833-            for (var j = 0, m = ports.length; j < m; j++) {
/src/dist/joint.js:12834:                this.ports.push(this._evaluatePort(ports[j]));
/src/dist/joint.js-12835-            }
##############################################
/src/dist/joint.js-12837-
/src/dist/joint.js:12838:        _evaluateGroup: function(group) {
/src/dist/joint.js-12839-
##############################################
/src/dist/joint.js-12845-
/src/dist/joint.js:12846:        _evaluatePort: function(port) {
/src/dist/joint.js-12847-
/src/dist/joint.js:12848:            var evaluated = assign({}, port);
/src/dist/joint.js-12849-
##############################################
/src/dist/joint.js-12851-
/src/dist/joint.js:12852:            evaluated.markup = evaluated.markup || group.markup;
/src/dist/joint.js:12853:            evaluated.attrs = merge({}, group.attrs, evaluated.attrs);
/src/dist/joint.js:12854:            evaluated.position = this._createPositionNode(group, evaluated);
/src/dist/joint.js:12855:            evaluated.label = merge({}, group.label, this._getLabel(evaluated));
/src/dist/joint.js:12856:            evaluated.z = this._getZIndex(group, evaluated);
/src/dist/joint.js:12857:            evaluated.size = assign({}, group.size, evaluated.size);
/src/dist/joint.js-12858-
/src/dist/joint.js:12859:            return evaluated;
/src/dist/joint.js-12860-        },
##############################################
/src/dist/joint.js-15222-            if (this.svgElement) {
/src/dist/joint.js:15223:                return document.createElementNS(V.namespace.svg, tagName);
/src/dist/joint.js-15224-            } else {
/src/dist/joint.js:15225:                return document.createElement(tagName);
/src/dist/joint.js-15226-            }
##############################################
/src/dist/joint.js-18206-
/src/dist/joint.js:18207:            // The set of tentative points to be evaluated, initially containing the start points.
/src/dist/joint.js-18208-            // Rounded to nearest integer for simplicity.
##############################################
/src/dist/joint.js-18286-
/src/dist/joint.js:18287:                    // Closed points from the openSet were already evaluated.
/src/dist/joint.js-18288-                    if (openSet.isClose(neighborKey) || !map.isPointAccessible(neighborPoint)) { continue; }
##############################################
/src/dist/joint.js-19310-            var children = V(labelMarkup);
/src/dist/joint.js:19311:            var fragment = document.createDocumentFragment();
/src/dist/joint.js-19312-
##############################################
/src/dist/joint.js-23445-            if (pivot) { return pivot; }
/src/dist/joint.js:23446:            pivot = pivots[z] = document.createComment('z-index:' + (z + 1));
/src/dist/joint.js-23447-            var neighborZ = -Infinity;
##############################################
/src/dist/joint.js-24477-                opt = this._background = cloneDeep(opt);
/src/dist/joint.js:24478:                var img = document.createElement('img');
/src/dist/joint.js-24479-                img.onload = this.drawBackgroundImage.bind(this, img, opt);
##############################################
/src/dist/joint.js-24629-
/src/dist/joint.js:24630:                var canvas = document.createElement('canvas');
/src/dist/joint.js-24631-                var imgWidth = img.width;
##############################################
/src/dist/joint.js-24656-
/src/dist/joint.js:24657:                var canvas = document.createElement('canvas');
/src/dist/joint.js-24658-                var imgWidth = img.width;
##############################################
/src/dist/joint.js-24678-
/src/dist/joint.js:24679:                var canvas = document.createElement('canvas');
/src/dist/joint.js-24680-                var imgWidth = img.width;
##############################################
/src/dist/joint.js-24705-
/src/dist/joint.js:24706:                var canvas = document.createElement('canvas');
/src/dist/joint.js-24707-                canvas.width = imgWidth * 3;
##############################################
/src/dist/joint.js-25308-            svgforeignobject: function() {
/src/dist/joint.js:25309:                return !!document.createElementNS &&
/src/dist/joint.js:25310:                    /SVGForeignObject/.test(({}).toString.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));
/src/dist/joint.js-25311-            }
##############################################
/src/dist/vectorizer.min.js-7-*/
/src/dist/vectorizer.min.js:8:if(function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).V=n()}(this,function(){"use strict";var i=Math,F=i.abs,h=i.cos,u=i.sin,R=i.sqrt,q=i.min,M=i.max,c=i.atan2,e=i.round,r=i.floor,s=i.PI,E=i.pow,t={curveThroughPoints:function(t){return console.warn("deprecated"),new T(d.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var n,e=[],i=[],r=t.length-1;if(1==r)return e[0]=new w((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),i[0]=new w(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,i];var s=[];for(n=1;n<r-1;n++)s[n]=4*t[n].x+2*t[n+1].x;s[0]=t[0].x+2*t[1].x,s[r-1]=(8*t[r-1].x+t[r].x)/2;var o=this.getFirstControlPoints(s);for(n=1;n<r-1;++n)s[n]=4*t[n].y+2*t[n+1].y;s[0]=t[0].y+2*t[1].y,s[r-1]=(8*t[r-1].y+t[r].y)/2;var a=this.getFirstControlPoints(s);for(n=0;n<r;n++)e.push(new w(o[n],a[n])),n<r-1?i.push(new w(2*t[n+1].x-o[n+1],2*t[n+1].y-a[n+1])):i.push(new w((t[r].x+o[r-1])/2,(t[r].y+a[r-1])/2));return[e,i]},getCurveDivider:function(t,n,e,i){console.warn("deprecated");var r=new d(t,n,e,i);return function(t){var n=r.divide(t);return[{p0:n[0].start,p1:n[0].controlPoint1,p2:n[0].controlPoint2,p3:n[0].end},{p0:n[1].start,p1:n[1].controlPoint1,p2:n[1].controlPoint2,p3:n[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var n=t.length,e=[],i=[],r=2;e[0]=t[0]/r;for(var s=1;s<n;s++)i[s]=1/r,r=(s<n-1?4:3.5)-i[s],e[s]=(t[s]-e[s-1])/r;for(s=1;s<n;s++)e[n-s-1]-=i[n-s]*e[n-s];return e},getInversionSolver:function(t,n,e,i){console.warn("deprecated");var r=new d(t,n,e,i);return function(t){return r.closestPointT(t)}}},d=function(t,n,e,i){return this instanceof d?t instanceof d?new d(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new w(t),this.controlPoint1=new w(n),this.controlPoint2=new w(e),void(this.end=new w(i))):new d(t,n,e,i)};d.throughPoints=function(){function h(t){var n=t.length,e=[],i=[],r=2;e[0]=t[0]/r;for(var s=1;s<n;s++)i[s]=1/r,r=(s<n-1?4:3.5)-i[s],e[s]=(t[s]-e[s-1])/r;for(s=1;s<n;s++)e[n-s-1]-=i[n-s]*e[n-s];return e}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var n=function(t){var n,e=[],i=[],r=t.length-1;if(1==r)return e[0]=new w((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),i[0]=new w(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,i];var s=[];for(n=1;n<r-1;n++)s[n]=4*t[n].x+2*t[n+1].x;s[0]=t[0].x+2*t[1].x,s[r-1]=(8*t[r-1].x+t[r].x)/2;var o=h(s);for(n=1;n<r-1;++n)s[n]=4*t[n].y+2*t[n+1].y;s[0]=t[0].y+2*t[1].y,s[r-1]=(8*t[r-1].y+t[r].y)/2;var a=h(s);for(n=0;n<r;n++)e.push(new w(o[n],a[n])),n<r-1?i.push(new w(2*t[n+1].x-o[n+1],2*t[n+1].y-a[n+1])):i.push(new w((t[r].x+o[r-1])/2,(t[r].y+a[r-1])/2));return[e,i]}(t),e=[],i=n[0].length,r=0;r<i;r++){var s=new w(n[0][r].x,n[0][r].y),o=new w(n[1][r].x,n[1][r].y);e.push(new d(t[r],s,o,t[r+1]))}return e}}(),d.prototype={bbox:function(){for(var t,n,e,i,r,s,o,a,h=this.start,u=this.controlPoint1,c=this.controlPoint2,l=this.end,f=h.x,d=h.y,g=u.x,v=u.y,p=c.x,m=c.y,y=l.x,x=l.y,w=new Array,b=new Array,S=[new Array,new Array],P=0;P<2;++P)if(e=0===P?(n=6*f-12*g+6*p,t=-3*f+9*g-9*p+3*y,3*g-3*f):(n=6*d-12*v+6*m,t=-3*d+9*v-9*m+3*x,3*v-3*d),F(t)<1e-12){if(F(n)<1e-12)continue;0<(i=-e/n)&&i<1&&b.push(i)}else a=R(o=n*n-4*e*t),o<0||(0<(r=(-n+a)/(2*t))&&r<1&&b.push(r),0<(s=(-n-a)/(2*t))&&s<1&&b.push(s));for(var A,T,L,E=b.length,C=E;E--;)T=(A=1-(i=b[E]))*A*A*f+3*A*A*i*g+3*A*i*i*p+i*i*i*y,S[0][E]=T,L=A*A*A*d+3*A*A*i*v+3*A*i*i*m+i*i*i*x,S[1][E]=L,w[E]={X:T,Y:L};b[C]=0,b[C+1]=1,w[C]={X:f,Y:d},w[C+1]={X:y,Y:x},S[0][C]=f,S[1][C]=d,S[0][C+1]=y,S[1][C+1]=x,b.length=C+2,S[0].length=C+2,S[1].length=C+2,w.length=C+2;var N=q.apply(null,S[0]),I=q.apply(null,S[1]),O=M.apply(null,S[0]),D=M.apply(null,S[1]);return new V(N,I,O-N,D-I)},clone:function(){return new d(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,n){return this.pointAtT(this.closestPointT(t,n))},closestPointLength:function(t,n){var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:e}):n.subdivisions};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,n){var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:e}):n.subdivisions},r=this.closestPointLength(t,i);if(!r)return 0;var s=this.length(i);return 0===s?0:r/s},closestPointT:function(t,n){for(var e,i,r,s,o,a,h,u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.subdivisions?this.getSubdivisions({precision:u}):n.subdivisions,l=c.length,f=l?1/l:0,d=0;d<l;d++){var g=c[d],v=g.start.distance(t),p=g.end.distance(t),m=v+p;(!h||m<h)&&(i=d*f,r=(d+1)*f,s=v,o=p,a=(e=g).start.distance(g.end),h=m)}for(var y=E(10,-u);;){var x=s?F(s-o)/s:0,w=o?F(s-o)/o:0;if(x<y||w<y||(!s||s<a*y||(!o||o<a*y)))return s<=o?i:r;var b=e.divide(.5);f/=2;var S=b[0].start.distance(t),P=b[0].end.distance(t),A=S+P,T=b[1].start.distance(t),L=b[1].end.distance(t);o=A<=T+L?(e=b[0],r-=f,s=S,P):(e=b[1],i+=f,s=T,L)}},closestPointTangent:function(t,n){return this.tangentAtT(this.closestPointT(t,n))},containsPoint:function(t,n){return this.toPolyline(n).containsPoint(t)},divideAt:function(t,n){if(t<=0)return this.divideAtT(0);if(1<=t)return this.divideAtT(1);var e=this.tAt(t,n);return this.divideAtT(e)},divideAtLength:function(t,n){var e=this.tAtLength(t,n);return this.divideAtT(e)},divideAtT:function(t){var n=this.start,e=this.controlPoint1,i=this.controlPoint2,r=this.end;if(t<=0)return[new d(n,n,n,n),new d(n,e,i,r)];if(1<=t)return[new d(n,e,i,r),new d(r,r,r,r)];var s=this.getSkeletonPoints(t),o=s.startControlPoint1,a=s.startControlPoint2,h=s.divider,u=s.dividerControlPoint1,c=s.dividerControlPoint2;return[new d(n,o,a,h),new d(h,u,c,r)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var n=this.start,e=this.controlPoint1,i=this.controlPoint2,r=this.end;if(t<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:e.clone(),dividerControlPoint2:i.clone()};if(1<=t)return{startControlPoint1:e.clone(),startControlPoint2:i.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};var s=new x(n,e).pointAt(t),o=new x(e,i).pointAt(t),a=new x(i,r).pointAt(t),h=new x(s,o).pointAt(t),u=new x(o,a).pointAt(t);return{startControlPoint1:s,startControlPoint2:h,divider:new x(h,u).pointAt(t),dividerControlPoint1:u,dividerControlPoint2:a}},getSubdivisions:function(t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,e=[new d(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return e;for(var i=this.endpointDistance(),r=E(10,-n),s=0;;){s+=1;for(var o=[],a=e.length,h=0;h<a;h++){var u=e[h].divide(.5);o.push(u[0],u[1])}for(var c=0,l=o.length,f=0;f<l;f++){c+=o[f].endpointDistance()}if(1<s&&(0!==c?(c-i)/c:0)<r)return o;e=o,i=c}},isDifferentiable:function(){var t=this.start,n=this.controlPoint1,e=this.controlPoint2,i=this.end;return!(t.equals(n)&&n.equals(e)&&e.equals(i))},length:function(t){for(var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,e=void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions,i=0,r=e.length,s=0;s<r;s++){i+=e[s].endpointDistance()}return i},lengthAtT:function(t,n){if(t<=0)return 0;var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(t)[0].length({precision:e})},pointAt:function(t,n){if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var e=this.tAt(t,n);return this.pointAtT(e)},pointAtLength:function(t,n){var e=this.tAtLength(t,n);return this.pointAtT(e)},pointAtT:function(t){return t<=0?this.start.clone():1<=t?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,scale:function(t,n,e){return this.start.scale(t,n,e),this.controlPoint1.scale(t,n,e),this.controlPoint2.scale(t,n,e),this.end.scale(t,n,e),this},tangentAt:function(t,n){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var e=this.tAt(t,n);return this.tangentAtT(e)},tangentAtLength:function(t,n){if(!this.isDifferentiable())return null;var e=this.tAtLength(t,n);return this.tangentAtT(e)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var n=this.getSkeletonPoints(t),e=n.startControlPoint2,i=n.dividerControlPoint1,r=n.divider,s=new x(e,i);return s.translate(r.x-e.x,r.y-e.y),s},tAt:function(t,n){if(t<=0)return 0;if(1<=t)return 1;var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:e}):n.subdivisions},r=this.length(i)*t;return this.tAtLength(r,i)},tAtLength:function(t,n){var e=!0;t<0&&(e=!1,t=-t);for(var i,r,s,o,a,h=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.subdivisions?this.getSubdivisions({precision:h}):n.subdivisions,c={precision:h,subdivisions:u},l=0,f=u.length,d=1/f,g=0;g<f;g++){var v=e?g:f-1-g,p=u[g],m=p.endpointDistance();if(t<=l+m){i=p,r=v*d,s=(v+1)*d,o=e?t-l:m+l-t,a=e?m+l-t:t-l;break}l+=m}if(!i)return e?1:0;for(var y=this.length(c),x=E(10,-h);;){var w,b;if((0!==y?o/y:0)<x)return r;if((0!==y?a/y:0)<x)return s;var S=i.divide(.5);d/=2;var P=S[0].endpointDistance(),A=S[1].endpointDistance();b=o<=P?(i=S[0],s-=d,P-(w=o)):(i=S[1],r+=d,A-(w=o-P)),o=w,a=b}},toPoints:function(t){for(var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,e=void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions,i=[e[0].start.clone()],r=e.length,s=0;s<r;s++){var o=e[s];i.push(o.end.clone())}return i},toPolyline:function(t){return new C(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,n){return this.start.translate(t,n),this.controlPoint1.translate(t,n),this.controlPoint2.translate(t,n),this.end.translate(t,n),this}},d.prototype.divide=d.prototype.divideAtT;var y=function(t,n,e){return this instanceof y?t instanceof y?new y(new w(t.x,t.y),t.a,t.b):(t=new w(t),this.x=t.x,this.y=t.y,this.a=n,void(this.b=e)):new y(t,n,e)};y.fromRect=function(t){return t=new V(t),new y(t.center(),t.width/2,t.height/2)},y.prototype={bbox:function(){return new V(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new w(this.x,this.y)},clone:function(){return new y(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,n){return void 0===t&&(t=0),void 0===n&&(n=t),this.a+=2*t,this.b+=2*n,this},intersectionWithLine:function(t){var n=[],e=t.start,i=t.end,r=this.a,s=this.b,o=t.vector(),a=e.difference(new w(this)),h=new w(o.x/(r*r),o.y/(s*s)),u=new w(a.x/(r*r),a.y/(s*s)),c=o.dot(h),l=o.dot(u),f=l*l-c*(a.dot(u)-1);if(f<0)return null;if(0<f){var d=R(f),g=(-l-d)/c,v=(-l+d)/c;if((g<0||1<g)&&(v<0||1<v))return null;0<=g&&g<=1&&n.push(e.lerp(i,g)),0<=v&&v<=1&&n.push(e.lerp(i,v))}else{var p=-l/c;if(!(0<=p&&p<=1))return null;n.push(e.lerp(i,p))}return n},intersectionWithLineFromCenterToPoint:function(t,n){t=new w(t),n&&t.rotate(new w(this.x,this.y),n);var e,i=t.x-this.x,r=t.y-this.y;if(0===i)return e=this.bbox().pointNearestToPoint(t),n?e.rotate(new w(this.x,this.y),-n):e;var s=r/i,o=s*s,a=this.a*this.a,h=this.b*this.b,u=R(1/(1/a+o/h)),c=s*(u=i<0?-u:u);return e=new w(this.x+u,this.y+c),n?e.rotate(new w(this.x,this.y),-n):e},normalizedDistance:function(t){var n=t.x,e=t.y,i=this.a,r=this.b,s=this.x,o=this.y;return(n-s)*(n-s)/(i*i)+(e-o)*(e-o)/(r*r)},tangentTheta:function(t){var n,e,i=t.x,r=t.y,s=this.a,o=this.b,a=this.bbox().center(),h=a.x,u=a.y,c=i>a.x+s/2,l=i<a.x-s/2;return c||l?e=s*s/(i-h)-s*s*(r-u)*((n=i>a.x?r-30:r+30)-u)/(o*o*(i-h))+h:n=o*o/(r-u)-o*o*(i-h)*((e=r>a.y?i+30:i-30)-h)/(s*s*(r-u))+u,new w(e,n).theta(t)},toString:function(){return new w(this.x,this.y).toString()+" "+this.a+" "+this.b}};var x=function(t,n){return this instanceof x?t instanceof x?new x(t.start,t.end):(this.start=new w(t),void(this.end=new w(n))):new x(t,n)};x.prototype={angle:function(){var t=new w(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=q(this.start.x,this.end.x),n=q(this.start.y,this.end.y),e=M(this.start.x,this.end.x),i=M(this.start.y,this.end.y);return new V(t,n,e-t,i-n)},bearing:function(){var t=l(this.start.y),n=l(this.end.y),e=this.start.x,i=this.end.x,r=l(i-e),s=u(r)*h(n),o=h(t)*u(n)-u(t)*h(n)*h(r),a=g(c(s,o))-22.5;return a<0&&(a+=360),["NE","E","SE","S","SW","W","NW","N"][a=parseInt(a/45)]},clone:function(){return new x(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var n=this.vector().dot(new x(this.start,t).vector()),e=q(1,M(0,n/this.squaredLength()));return e!=e?0:e},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var n=this.start,e=this.end;if(0!==n.cross(t,e))return!1;var i=this.length();return!(new x(n,t).length()>i)&&!(new x(t,e).length()>i)},divideAt:function(t){var n=this.pointAt(t);return[new x(this.start,n),new x(n,this.end)]},divideAtLength:function(t){var n=this.pointAtLength(t);return[new x(this.start,n),new x(n,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,n){if(t instanceof x||t instanceof V||t instanceof C||t instanceof y||t instanceof T){var e=t.intersectionWithLine(this,n);return e&&t instanceof x&&(e=e[0]),e}return null},intersectionWithLine:function(t){var n=new w(this.end.x-this.start.x,this.end.y-this.start.y),e=new w(t.end.x-t.start.x,t.end.y-t.start.y),i=n.x*e.y-n.y*e.x,r=new w(t.start.x-this.start.x,t.start.y-this.start.y),s=r.x*e.y-r.y*e.x,o=r.x*n.y-r.y*n.x;if(0===i||s*i<0||o*i<0)return null;if(0<i){if(i<s||i<o)return null}else if(s<i||o<i)return null;return[new w(this.start.x+s*n.x/i,this.start.y+s*n.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return R(this.squaredLength())},midpoint:function(){return new w((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){var n=this.clone();if(!this.isDifferentiable())return n;var e=n.start,i=n.end,r=e.clone().rotate(i,270),s=i.clone().rotate(e,90);return e.move(s,t),i.move(r,t),n},pointAt:function(t){var n=this.start,e=this.end;return t<=0?n.clone():1<=t?e.clone():n.lerp(e,t)},pointAtLength:function(t){var n=this.start,e=this.end,i=!0;t<0&&(i=!1,t=-t);var r=this.length();return r<=t?i?e.clone():n.clone():this.pointAt((i?t:r-t)/r)},pointOffset:function(t){t=new w(t);var n=this.start,e=this.end;return((e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x))/this.length()},rotate:function(t,n){return this.start.rotate(t,n),this.end.rotate(t,n),this},round:function(t){var n=E(10,t||0);return this.start.x=e(this.start.x*n)/n,this.start.y=e(this.start.y*n)/n,this.end.x=e(this.end.x*n)/n,this.end.y=e(this.end.y*n)/n,this},scale:function(t,n,e){return this.start.scale(t,n,e),this.end.scale(t,n,e),this},setLength:function(t){var n=this.length();if(!n)return this;var e=t/n;return this.scale(e,e,this.start)},squaredLength:function(){var t=this.start.x,n=this.start.y;return(t-=this.end.x)*t+(n-=this.end.y)*n},tangentAt:function(t){if(!this.isDifferentiable())return null;var n=this.start,e=this.end,i=this.pointAt(t),r=new x(n,e);return r.translate(i.x-n.x,i.y-n.y),r},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var n=this.start,e=this.end,i=this.pointAtLength(t),r=new x(n,e);return r.translate(i.x-n.x,i.y-n.y),r},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,n){return this.start.translate(t,n),this.end.translate(t,n),this},vector:function(){return new w(this.end.x-this.start.x,this.end.y-this.start.y)}},x.prototype.intersection=x.prototype.intersect;var T=function(t){if(!(this instanceof T))return new T(t);if("string"==typeof t)return new T.parse(t);var n,e;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(e=(t=t.reduce(function(t,n){return t.concat(n)},[])).length,t[0].isSegment)for(n=0;n<e;n++){var i=t[n];this.appendSegment(i)}else{var r=null;for(n=0;n<e;n++){var s=t[n];if(!(s instanceof x||s instanceof d))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(T.createSegment("M",s.start)),r&&!r.end.equals(s.start)&&this.appendSegment(T.createSegment("M",s.start)),s instanceof x?this.appendSegment(T.createSegment("L",s.end)):s instanceof d&&this.appendSegment(T.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),r=s}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof x)this.appendSegment(T.createSegment("M",t.start)),this.appendSegment(T.createSegment("L",t.end));else if(t instanceof d)this.appendSegment(T.createSegment("M",t.start)),this.appendSegment(T.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof C))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(e=t.points.length,n=0;n<e;n++){var o=t.points[n];0===n?this.appendSegment(T.createSegment("M",o)):this.appendSegment(T.createSegment("L",o))}}else;};T.parse=function(t){if(!t)return new T;for(var n=new T,e=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),i=e.length,r=0;r<i;r++){var s=e[r].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),o=T.createSegment.apply(this,s);n.appendSegment(o)}return n},T.createSegment=function(t){var n=arguments;if(!t)throw new Error("Type must be provided.");var e=T.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var i=[],r=arguments.length,s=1;s<r;s++)i.push(n[s]);return b(e,i)},T.prototype={appendSegment:function(t){var n,e=this.segments,i=e.length,r=0!==i?e[i-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(t,n){return t.concat(n)},[]))[0].isSegment)throw new Error("Segments required.");for(var s=t.length,o=0;o<s;o++){var a=t[o];n=this.prepareSegment(a,r,null),e.push(n),r=n}}else{if(!t||!t.isSegment)throw new Error("Segment required.");n=this.prepareSegment(t,r,null),e.push(n)}},bbox:function(){var t,n=this.segments,e=n.length;if(0===e)return null;for(var i=0;i<e;i++){var r=n[i];if(r.isVisible){var s=r.bbox();t=t?t.union(s):s}}if(t)return t;var o=n[e-1];return new V(o.end.x,o.end.y,0,0)},clone:function(){for(var t=this.segments,n=t.length,e=new T,i=0;i<n;i++){var r=t[i].clone();e.appendSegment(r)}return e},closestPoint:function(t,n){var e=this.closestPointT(t,n);return e?this.pointAtT(e):null},closestPointLength:function(t,n){var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):n.segmentSubdivisions},r=this.closestPointT(t,i);return r?this.lengthAtT(r,i):0},closestPointNormalizedLength:function(t,n){var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):n.segmentSubdivisions},r=this.closestPointLength(t,i);if(0===r)return 0;var s=this.length(i);return 0===s?0:r/s},closestPointT:function(t,n){var e=this.segments,i=e.length;if(0===i)return null;for(var r,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,a=1/0,h=0;h<i;h++){var u=e[h],c=o[h];if(u.isVisible){var l=u.closestPointT(t,{precision:s,subdivisions:c}),f=u.pointAtT(l),d=new x(f,t).squaredLength();d<a&&(r={segmentIndex:h,value:l},a=d)}}return r||{segmentIndex:i-1,value:1}},closestPointTangent:function(t,n){var e=this.segments,i=e.length;if(0===i)return null;for(var r,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,a=1/0,h=0;h<i;h++){var u=e[h],c=o[h];if(u.isDifferentiable()){var l=u.closestPointT(t,{precision:s,subdivisions:c}),f=u.pointAtT(l),d=new x(f,t).squaredLength();d<a&&(r=u.tangentAtT(l),a=d)}}return r||null},containsPoint:function(t,n){var e=this.toPolylines(n);if(!e)return!1;for(var i=e.length,r=0,s=0;s<i;s++){e[s].containsPoint(t)&&r++}return r%2==1},divideAt:function(t,n){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):n.segmentSubdivisions},r=this.length(i)*t;return this.divideAtLength(r,i)},divideAtLength:function(t,n){var e=this.segments.length;if(0===e)return null;var i=!0;t<0&&(i=!1,t=-t);var r,s,o,a,h,u,c,l=void 0===(n=n||{}).precision?this.PRECISION:n.precision,f=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:l}):n.segmentSubdivisions,d=0;for(r=0;r<e;r++){var g=i?r:e-1-r;s=this.getSegment(g);var v=f[g],p=s.length({precision:l,subdivisions:v});if(s.isDifferentiable()&&(h=s,u=g,t<=d+p)){a=g,o=s.divideAtLength((i?1:-1)*(t-d),{precision:l,subdivisions:v});break}d+=p}if(!h)return null;o||(a=u,c=i?1:0,o=h.divideAtT(c));var m=this.clone();m.replaceSegment(a,o);var y=a,x=a+1,w=a+2;o[0].isDifferentiable()||(m.removeSegment(y),x-=1,w-=1);var b=m.getSegment(x).start;m.insertSegment(x,T.createSegment("M",b)),w+=1,o[1].isDifferentiable()||(m.removeSegment(w-1),w-=1);var S=w-y-1;for(r=w;r<m.segments.length;r++){var P=this.getSegment(r-S);if("Z"===(s=m.getSegment(r)).type&&!P.subpathStartSegment.end.equals(s.subpathStartSegment.end)){var A=T.createSegment("L",P.end);m.replaceSegment(r,A)}}return[new T(m.segments.slice(0,x)),new T(m.segments.slice(x))]},equals:function(t){if(!t)return!1;var n=this.segments,e=t.segments,i=n.length;if(e.length!==i)return!1;for(var r=0;r<i;r++){var s=n[r],o=e[r];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(t){var n=this.segments,e=n.length;if(0===e)throw new Error("Path has no segments.");if(t<0&&(t=e+t),e<=t||t<0)throw new Error("Index out of range.");return n[t]},getSegmentSubdivisions:function(t){for(var n=this.segments,e=n.length,i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=[],s=0;s<e;s++){var o=n[s].getSubdivisions({precision:i});r.push(o)}return r},insertSegment:function(t,n){var e,i=this.segments,r=i.length;if(t<0&&(t=r+t+1),r<t||t<0)throw new Error("Index out of range.");var s=null,o=null;if(0!==r&&(o=1<=t?(s=i[t-1]).nextSegment:i[0]),Array.isArray(n)){if(!(n=n.reduce(function(t,n){return t.concat(n)},[]))[0].isSegment)throw new Error("Segments required.");for(var a=n.length,h=0;h<a;h++){var u=n[h];e=this.prepareSegment(u,s,o),i.splice(t+h,0,e),s=e}}else{if(!n||!n.isSegment)throw new Error("Segment required.");e=this.prepareSegment(n,s,o),i.splice(t,0,e)}},intersectionWithLine:function(t,n){var e=null,i=this.toPolylines(n);if(!i)return null;for(var r=0,s=i.length;r<s;r++){var o=i[r],a=t.intersect(o);a&&(e||(e=[]),Array.isArray(a)?Array.prototype.push.apply(e,a):e.push(a))}return e},isDifferentiable:function(){for(var t=this.segments,n=t.length,e=0;e<n;e++){if(t[e].isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var n=this.segments,e=n.length;if(0===e)return 0;for(var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,s=0,o=0;o<e;o++){var a=n[o],h=r[o];s+=a.length({subdivisions:h})}return s},lengthAtT:function(t,n){var e=this.segments,i=e.length;if(0===i)return 0;var r=t.segmentIndex;if(r<0)return 0;var s=t.value;i<=r?(r=i-1,s=1):s<0?s=0:1<s&&(s=1);for(var o,a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,h=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions,u=0,c=0;c<r;c++){var l=e[c];o=h[c],u+=l.length({precisison:a,subdivisions:o})}return l=e[r],o=h[r],u+=l.lengthAtT(s,{precisison:a,subdivisions:o})},pointAt:function(t,n){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):n.segmentSubdivisions},r=this.length(i)*t;return this.pointAtLength(r,i)},pointAtLength:function(t,n){var e=this.segments,i=e.length;if(0===i)return null;if(0===t)return this.start.clone();var r=!0;t<0&&(r=!1,t=-t);for(var s,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,h=0,u=0;u<i;u++){var c=r?u:i-1-u,l=e[c],f=a[c],d=l.length({precision:o,subdivisions:f});if(l.isVisible){if(t<=h+d)return l.pointAtLength((r?1:-1)*(t-h),{precision:o,subdivisions:f});s=l}h+=d}return s?r?s.end:s.start:e[i-1].end.clone()},pointAtT:function(t){var n=this.segments,e=n.length;if(0===e)return null;var i=t.segmentIndex;if(i<0)return n[0].pointAtT(0);if(e<=i)return n[e-1].pointAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),n[i].pointAtT(r)},PRECISION:3,prepareSegment:function(t,n,e){t.previousSegment=n,t.nextSegment=e,n&&(n.nextSegment=t),e&&(e.previousSegment=t);var i=t;return t.isSubpathStart&&(t.subpathStartSegment=t,i=e),i&&this.updateSubpathStartSegment(i),t},removeSegment:function(t){var n=this.segments,e=n.length;if(0===e)throw new Error("Path has no segments.");if(t<0&&(t=e+t),e<=t||t<0)throw new Error("Index out of range.");var i=n.splice(t,1)[0],r=i.previousSegment,s=i.nextSegment;r&&(r.nextSegment=s),s&&(s.previousSegment=r),i.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(t,n){var e,i=this.segments,r=i.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),r<=t||t<0)throw new Error("Index out of range.");var s=i[t],o=s.previousSegment,a=s.nextSegment,h=s.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(t,n){return t.concat(n)},[]))[0].isSegment)throw new Error("Segments required.");i.splice(t,1);for(var u=n.length,c=0;c<u;c++){var l=n[c];e=this.prepareSegment(l,o,a),i.splice(t+c,0,e),o=e,h&&e.isSubpathStart&&(h=!1)}}else{if(!n||!n.isSegment)throw new Error("Segment required.");e=this.prepareSegment(n,o,a),i.splice(t,1,e),h&&e.isSubpathStart&&(h=!1)}h&&a&&this.updateSubpathStartSegment(a)},scale:function(t,n,e){for(var i=this.segments,r=i.length,s=0;s<r;s++){i[s].scale(t,n,e)}return this},segmentAt:function(t,n){var e=this.segmentIndexAt(t,n);return e?this.getSegment(e):null},segmentAtLength:function(t,n){var e=this.segmentIndexAtLength(t,n);return e?this.getSegment(e):null},segmentIndexAt:function(t,n){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):n.segmentSubdivisions},r=this.length(i)*t;return this.segmentIndexAtLength(r,i)},segmentIndexAtLength:function(t,n){var e=this.segments,i=e.length;if(0===i)return null;var r=!0;t<0&&(r=!1,t=-t);for(var s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,a=null,h=0,u=0;u<i;u++){var c=r?u:i-1-u,l=e[c],f=o[c],d=l.length({precision:s,subdivisions:f});if(l.isVisible){if(t<=h+d)return c;a=c}h+=d}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,n){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var e=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i={precision:e,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):n.segmentSubdivisions},r=this.length(i)*t;return this.tangentAtLength(r,i)},tangentAtLength:function(t,n){var e=this.segments,i=e.length;if(0===i)return null;var r=!0;t<0&&(r=!1,t=-t);for(var s,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,h=0,u=0;u<i;u++){var c=r?u:i-1-u,l=e[c],f=a[c],d=l.length({precision:o,subdivisions:f});if(l.isDifferentiable()){if(t<=h+d)return l.tangentAtLength((r?1:-1)*(t-h),{precision:o,subdivisions:f});s=l}h+=d}if(s){var g=r?1:0;return s.tangentAtT(g)}return null},tangentAtT:function(t){var n=this.segments,e=n.length;if(0===e)return null;var i=t.segmentIndex;if(i<0)return n[0].tangentAtT(0);if(e<=i)return n[e-1].tangentAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),n[i].tangentAtT(r)},toPoints:function(t){var n=this.segments,e=n.length;if(0===e)return null;for(var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,s=[],o=[],a=0;a<e;a++){var h=n[a];if(h.isVisible){var u=r[a];if(0<u.length){var c=u.map(function(t){return t.start});Array.prototype.push.apply(o,c)}else o.push(h.start)}else 0<o.length&&(o.push(n[a-1].end),s.push(o),o=[])}return 0<o.length&&(o.push(this.end),s.push(o)),s},toPolylines:function(t){var n=[],e=this.toPoints(t);if(!e)return null;for(var i=0,r=e.length;i<r;i++)n.push(new C(e[i]));return n},toString:function(){for(var t=this.segments,n=t.length,e="",i=0;i<n;i++){e+=t[i].serialize()+" "}return e.trim()},translate:function(t,n){for(var e=this.segments,i=e.length,r=0;r<i;r++){e[r].translate(t,n)}return this},updateSubpathStartSegment:function(t){for(var n=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=n?n.subpathStartSegment:null,t=(n=t).nextSegment}},Object.defineProperty(T.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,n=t.length;if(0===n)return null;for(var e=0;e<n;e++){var i=t[e];if(i.isVisible)return i.start}return t[n-1].end}}),Object.defineProperty(T.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,n=t.length;if(0===n)return null;for(var e=n-1;0<=e;e--){var i=t[e];if(i.isVisible)return i.end}return t[n-1].end}});var w=function(t,n){if(!(this instanceof w))return new w(t,n);if("string"==typeof t){var e=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(e[0]),n=parseFloat(e[1])}else Object(t)===t&&(n=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===n?0:n};w.fromPolar=function(t,n,e){e=e&&new w(e)||new w(0,0);var i=F(t*h(n)),r=F(t*u(n)),s=a(g(n));return s<90?r=-r:s<180?(i=-i,r=-r):s<270&&(i=-i),new w(e.x+i,e.y+r)},w.random=function(t,n,e,i){return new w(f(t,n),f(e,i))},w.prototype={chooseClosest:function(t){var n=t.length;if(1===n)return new w(t[0]);for(var e=null,i=1/0,r=0;r<n;r++){var s=new w(t[r]),o=this.squaredDistance(s);o<i&&(e=s,i=o)}return e},adhereToRect:function(t){return t.containsPoint(this)||(this.x=q(M(this.x,t.x),t.x+t.width),this.y=q(M(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,n){var e=this.equals(t)||this.equals(n)?NaN:this.theta(n)-this.theta(t);return e<0&&(e+=360),e},bearing:function(t){return new x(this,t).bearing()},changeInAngle:function(t,n,e){return this.clone().offset(-t,-n).theta(e)-this.theta(e)},clone:function(){return new w(this)},cross:function(t,n){return t&&n?(n.x-this.x)*(t.y-this.y)-(n.y-this.y)*(t.x-this.x):NaN},difference:function(t,n){return Object(t)===t&&(n=t.y,t=t.x),new w(this.x-(t||0),this.y-(n||0))},distance:function(t){return new x(this,t).length()},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,n){var e=this.x,i=this.y;return new w((1-n)*e+n*t.x,(1-n)*i+n*t.y)},magnitude:function(){return R(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return F(t.x-this.x)+F(t.y-this.y)},move:function(t,n){var e=l(new w(t).theta(this));return this.offset(h(e)*n,-u(e)*n)},normalize:function(t){var n=(t||1)/this.magnitude();return this.scale(n,n)},offset:function(t,n){return Object(t)===t&&(n=t.y,t=t.x),this.x+=t||0,this.y+=n||0,this},reflection:function(t){return new w(t).move(this,this.distance(t))},rotate:function(t,n){t=t||new w(0,0),n=l(a(-n));var e=h(n),i=u(n),r=e*(this.x-t.x)-i*(this.y-t.y)+t.x,s=i*(this.x-t.x)+e*(this.y-t.y)+t.y;return this.x=r,this.y=s,this},round:function(t){var n=E(10,t||0);return this.x=e(this.x*n)/n,this.y=e(this.y*n)/n,this},scale:function(t,n,e){return e=e&&new w(e)||new w(0,0),this.x=e.x+t*(this.x-e.x),this.y=e.y+n*(this.y-e.y),this},snapToGrid:function(t,n){return this.x=o(this.x,t),this.y=o(this.y,n||t),this},squaredDistance:function(t){return new x(this,t).squaredLength()},theta:function(t){var n=-((t=new w(t)).y-this.y),e=t.x-this.x,i=c(n,e);return i<0&&(i=2*s+i),180*i/s},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new w(t)||new w(0,0);var n=this.x,e=this.y;return this.x=R((n-t.x)*(n-t.x)+(e-t.y)*(e-t.y)),this.y=l(t.theta(new w(n,e))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,n){return this.x=t||0,this.y=n||0,this},vectorAngle:function(t){return new w(0,0).angleBetween(this,t)}},w.prototype.translate=w.prototype.offset;var C=function(t){return this instanceof C?"string"==typeof t?new C.parse(t):void(this.points=Array.isArray(t)?t.map(w):[]):new C(t)};C.parse=function(t){if(""===(t=t.trim()))return new C;for(var n=[],e=t.split(/\s*,\s*|\s+/),i=e.length,r=0;r<i;r+=2)n.push({x:+e[r],y:+e[r+1]});return new C(n)},C.prototype={bbox:function(){var t=1/0,n=-1/0,e=1/0,i=-1/0,r=this.points,s=r.length;if(0===s)return null;for(var o=0;o<s;o++){var a=r[o],h=a.x,u=a.y;h<t&&(t=h),n<h&&(n=h),u<e&&(e=u),i<u&&(i=u)}return new V(t,e,n-t,i-e)},clone:function(){var t=this.points,n=t.length;if(0===n)return new C;for(var e=[],i=0;i<n;i++){var r=t[i].clone();e.push(r)}return new C(e)},closestPoint:function(t){var n=this.closestPointLength(t);return this.pointAtLength(n)},closestPointLength:function(t){var n,e=this.points,i=e.length;if(0===i)return 0;if(1===i)return 0;for(var r=1/0,s=0,o=i-1,a=0;a<o;a++){var h=new x(e[a],e[a+1]),u=h.length(),c=h.closestPointNormalizedLength(t),l=h.pointAt(c).squaredDistance(t);l<r&&(r=l,n=s+c*u),s+=u}return n},closestPointNormalizedLength:function(t){var n=this.closestPointLength(t);if(0===n)return 0;var e=this.length();return 0===e?0:n/e},closestPointTangent:function(t){var n=this.closestPointLength(t);return this.tangentAtLength(n)},containsPoint:function(t){var n=this.points,e=n.length;if(0===e)return!1;for(var i=t.x,r=t.y,s=e-1,o=0,a=0;o<e;o++){var h=n[s],u=n[o];if(t.equals(h))return!0;var c=new x(h,u);if(c.containsPoint(t))return!0;if(r<=h.y&&r>u.y||r>h.y&&r<=u.y){var l=h.x-i>u.x-i?h.x-i:u.x-i;if(0<=l){var f=new w(i+l,r),d=new x(t,f);c.intersect(d)&&a++}}s=o}return a%2==1},convexHull:function(){var t,n,e,i=this.points,r=i.length;if(0===r)return new C;for(t=0;t<r;t++)void 0===e?e=i[t]:i[t].y<e.y?e=i[t]:i[t].y===e.y&&i[t].x>e.x&&(e=i[t]);var s=[];for(t=0;t<r;t++){var o=e.theta(i[t]);0===o&&(o=360);var a=[i[t],t,o];s.push(a)}if(s.sort(function(t,n){var e=t[2]-n[2];return 0===e&&(e=n[1]-t[1]),e}),2<s.length){var h=s[s.length-1];s.unshift(h)}for(var u,c,l,f,d,g,v,p={},m=[];0!==s.length;)if(c=(u=s.pop())[0],!p.hasOwnProperty(u[0]+"@@"+u[1]))for(var y=!1;!y;)if(m.length<2)m.push(u),y=!0;else{f=(l=m.pop())[0];var x=(g=(d=m.pop())[0]).cross(f,c);if(x<0)m.push(d),m.push(l),m.push(u),y=!0;else if(0===x){var w=f.angleBetween(g,c);F(w-180)<1e-10?(p[l[0]+"@@"+l[1]]=f,m.push(d)):f.equals(c)||g.equals(f)?(p[l[0]+"@@"+l[1]]=f,m.push(d)):F((w+1)%360-1)<1e-10&&(m.push(d),s.push(l))}else p[l[0]+"@@"+l[1]]=f,m.push(d)}2<m.length&&m.pop();var b=-1;for(n=m.length,t=0;t<n;t++){var S=m[t][1];(void 0===v||S<v)&&(v=S,b=t)}var P=[];if(0<b){var A=m.slice(b),T=m.slice(0,b);P=A.concat(T)}else P=m;var L=[];for(n=P.length,t=0;t<n;t++)L.push(P[t][0]);return new C(L)},equals:function(t){if(!t)return!1;var n=this.points,e=t.points,i=n.length;if(e.length!==i)return!1;for(var r=0;r<i;r++){var s=n[r],o=t.points[r];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(t){for(var n=new x(t),e=[],i=this.points,r=0,s=i.length-1;r<s;r++){var o=i[r],a=i[r+1],h=new x(o,a),u=n.intersectionWithLine(h);u&&e.push(u[0])}return 0<e.length?e:null},isDifferentiable:function(){var t=this.points,n=t.length;if(0===n)return!1;for(var e=n-1,i=0;i<e;i++){var r=t[i],s=t[i+1];if(new x(r,s).isDifferentiable())return!0}return!1},length:function(){var t=this.points,n=t.length;if(0===n)return 0;for(var e=0,i=n-1,r=0;r<i;r++)e+=t[r].distance(t[r+1]);return e},pointAt:function(t){var n=this.points,e=n.length;if(0===e)return null;if(1===e)return n[0].clone();if(t<=0)return n[0].clone();if(1<=t)return n[e-1].clone();var i=this.length()*t;return this.pointAtLength(i)},pointAtLength:function(t){var n=this.points,e=n.length;if(0===e)return null;if(1===e)return n[0].clone();var i=!0;t<0&&(i=!1,t=-t);for(var r=0,s=e-1,o=0;o<s;o++){var a=i?o:s-1-o,h=n[a],u=n[a+1],c=new x(h,u),l=h.distance(u);if(t<=r+l)return c.pointAtLength((i?1:-1)*(t-r));r+=l}return(i?n[e-1]:n[0]).clone()},scale:function(t,n,e){var i=this.points,r=i.length;if(0===r)return this;for(var s=0;s<r;s++)i[s].scale(t,n,e);return this},simplify:function(t){void 0===t&&(t={});var n=this.points;if(n.length<3)return this;for(var e=t.threshold||0,i=0;n[i+2];){var r=i+1,s=i+2,o=n[i],a=n[r],h=n[s];new x(o,h).closestPoint(a).distance(a)<=e?n.splice(r,1):i+=1}return this},tangentAt:function(t){var n=this.points.length;if(0===n)return null;if(1===n)return null;t<0&&(t=0),1<t&&(t=1);var e=this.length()*t;return this.tangentAtLength(e)},tangentAtLength:function(t){var n=this.points,e=n.length;if(0===e)return null;if(1===e)return null;var i,r=!0;t<0&&(r=!1,t=-t);for(var s=0,o=e-1,a=0;a<o;a++){var h=r?a:o-1-a,u=n[h],c=n[h+1],l=new x(u,c),f=u.distance(c);if(l.isDifferentiable()){if(t<=s+f)return l.tangentAtLength((r?1:-1)*(t-s));i=l}s+=f}if(i){var d=r?1:0;return i.tangentAt(d)}return null},toString:function(){return this.points+""},translate:function(t,n){var e=this.points,i=e.length;if(0===i)return this;for(var r=0;r<i;r++)e[r].translate(t,n);return this},serialize:function(){var t=this.points,n=t.length;if(0===n)return"";for(var e="",i=0;i<n;i++){var r=t[i];e+=r.x+","+r.y+" "}return e.trim()}},Object.defineProperty(C.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(C.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});var V=function(t,n,e,i){if(!(this instanceof V))return new V(t,n,e,i);Object(t)===t&&(n=t.y,e=t.width,i=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===n?0:n,this.width=void 0===e?0:e,this.height=void 0===i?0:i};V.fromEllipse=function(t){return t=new y(t),new V(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},V.prototype={bbox:function(t){if(!t)return this.clone();var n=l(t),e=F(u(n)),i=F(h(n)),r=this.width*i+this.height*e,s=this.width*e+this.height*i;return new V(this.x+(this.width-r)/2,this.y+(this.height-s)/2,r,s)},bottomLeft:function(){return new w(this.x,this.y+this.height)},bottomLine:function(){return new x(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new w(this.x+this.width/2,this.y+this.height)},center:function(){return new w(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new V(this)},containsPoint:function(t){return(t=new w(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var n=new V(this).normalize(),e=new V(t).normalize(),i=n.width,r=n.height,s=e.width,o=e.height;if(!(i&&r&&s&&o))return!1;var a=n.x,h=n.y,u=e.x,c=e.y;return s+=u,i+=a,o+=c,r+=h,a<=u&&s<=i&&h<=c&&o<=r},corner:function(){return new w(this.x+this.width,this.y+this.height)},equals:function(t){var n=new V(this).normalize(),e=new V(t).normalize();return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height},inflate:function(t,n){return void 0===t&&(t=0),void 0===n&&(n=t),this.x-=t,this.y-=n,this.width+=2*t,this.height+=2*n,this},intersect:function(t){var n=this.origin(),e=this.corner(),i=t.origin(),r=t.corner();if(r.x<=n.x||r.y<=n.y||i.x>=e.x||i.y>=e.y)return null;var s=M(n.x,i.x),o=M(n.y,i.y);return new V(s,o,q(e.x,r.x)-s,q(e.y,r.y)-o)},intersectionWithLine:function(t){var n,e,i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],r=[],s=[],o=i.length;for(e=0;e<o;e++)null!==(n=t.intersect(i[e]))&&s.indexOf(n.toString())<0&&(r.push(n),s.push(n.toString()));return 0<r.length?r:null},intersectionWithLineFromCenterToPoint:function(t,n){t=new w(t);var e,i=new w(this.x+this.width/2,this.y+this.height/2);n&&t.rotate(i,n);for(var r=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new x(i,t),o=r.length-1;0<=o;--o){var a=r[o].intersection(s);if(null!==a){e=a;break}}return e&&n&&e.rotate(i,-n),e},leftLine:function(){return new x(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new w(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,n){var e,i,r,s,o,a,h,u;t=new V(t),n||(n=t.center());var c=n.x,l=n.y;e=i=r=s=o=a=h=u=1/0;var f=t.topLeft();f.x<c&&(e=(this.x-c)/(f.x-c)),f.y<l&&(o=(this.y-l)/(f.y-l));var d=t.bottomRight();d.x>c&&(i=(this.x+this.width-c)/(d.x-c)),d.y>l&&(a=(this.y+this.height-l)/(d.y-l));var g=t.topRight();g.x>c&&(r=(this.x+this.width-c)/(g.x-c)),g.y<l&&(h=(this.y-l)/(g.y-l));var v=t.bottomLeft();return v.x<c&&(s=(this.x-c)/(v.x-c)),v.y>l&&(u=(this.y+this.height-l)/(v.y-l)),{sx:q(e,i,r,s),sy:q(o,a,h,u)}},maxRectUniformScaleToFit:function(t,n){var e=this.maxRectScaleToFit(t,n);return q(e.sx,e.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,n=this.y,e=this.width,i=this.height;return this.width<0&&(t=this.x+this.width,e=-this.width),this.height<0&&(n=this.y+this.height,i=-this.height),this.x=t,this.y=n,this.width=e,this.height=i,this},offset:function(t,n){return w.prototype.offset.call(this,t,n)},origin:function(){return new w(this.x,this.y)},pointNearestToPoint:function(t){if(t=new w(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new w(this.x+this.width,t.y);case"left":return new w(this.x,t.y);case"bottom":return new w(t.x,this.y+this.height);case"top":return new w(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new x(this.topRight(),this.bottomRight())},rightMiddle:function(){return new w(this.x+this.width,this.y+this.height/2)},round:function(t){var n=E(10,t||0);return this.x=e(this.x*n)/n,this.y=e(this.y*n)/n,this.width=e(this.width*n)/n,this.height=e(this.height*n)/n,this},scale:function(t,n,e){return e=this.origin().scale(t,n,e),this.x=e.x,this.y=e.y,this.width*=t,this.height*=n,this},sideNearestToPoint:function(t){var n=(t=new w(t)).x-this.x,e=this.x+this.width-t.x,i=t.y-this.y,r=n,s="left";return e<r&&(r=e,s="right"),i<r&&(r=i,s="top"),this.y+this.height-t.y<r&&(s="bottom"),s},snapToGrid:function(t,n){var e=this.origin().snapToGrid(t,n),i=this.corner().snapToGrid(t,n);return this.x=e.x,this.y=e.y,this.width=i.x-e.x,this.height=i.y-e.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new x(this.topLeft(),this.topRight())},topMiddle:function(){return new w(this.x+this.width/2,this.y)},topRight:function(){return new w(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){var n=new V(t),e=this.x,i=this.y,r=this.width,s=this.height,o=n.x,a=n.y,h=n.width,u=n.height,c=n.x=q(e,o),l=n.y=q(i,a);return n.width=M(e+r,o+h)-c,n.height=M(i+s,a+u)-l,n}},V.prototype.bottomRight=V.prototype.corner,V.prototype.topLeft=V.prototype.origin,V.prototype.translate=V.prototype.offset;var a=function(t){return t%360+(t<0?360:0)},o=function(t,n){return n*e(t/n)},g=function(t){return 180*t/s%360},l=function(t,n){return(t=(n=n||!1)?t:t%360)*s/180},f=function(t,n){if(void 0===n)n=void 0===t?1:t,t=0;else if(n<t){var e=t;t=n,n=e}return r(i.random()*(n-t+1)+t)},n=y,v=x,p=w,m=V;function b(t,n){return n.unshift(null),new(Function.prototype.bind.apply(t,n))}function S(t){var n,e,i=arguments,r=[];for(e=arguments.length,n=1;n<e;n++)r.push(i[n]);if(!t)throw new Error("Missing a parent object.");var s=Object.create(t);for(e=r.length,n=0;n<e;n++){var o,a,h=r[n];for(a in h)h.hasOwnProperty(a)&&(delete s[a],o=Object.getOwnPropertyDescriptor(h,a),Object.defineProperty(s,a,o))}return s}var P={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var n=this.length();return 1<=t?n:n*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(P,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(P,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(P,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var A=function(){for(var t,n,e=arguments,i=[],r=arguments.length,s=0;s<r;s++)i.push(e[s]);if(!(this instanceof A))return b(A,i);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof x){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new w(+i[0],+i[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],s=0;s<r;s+=2)o=i.slice(s,s+2),t.push(b(A,o));return t}if(1===r)return this.end=new w(i[0]),this;for(t=[],s=0;s<r;s+=1)n=i[s],t.push(new A(n));return t},L={clone:function(){return new A(this.end)},divideAt:function(t){var n=new x(this.start,this.end).divideAt(t);return[new A(n[0]),new A(n[1])]},divideAtLength:function(t){var n=new x(this.start,this.end).divideAtLength(t);return[new A(n[0]),new A(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},scale:function(t,n,e){return this.end.scale(t,n,e),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,n){return this.end.translate(t,n),this}};Object.defineProperty(L,"type",{configurable:!0,enumerable:!0,value:"L"}),A.prototype=S(P,x.prototype,L);var N=function(){for(var t,n,e=arguments,i=[],r=arguments.length,s=0;s<r;s++)i.push(e[s]);if(!(this instanceof N))return b(N,i);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(i[0]instanceof d){if(1===r)return this.controlPoint1=i[0].controlPoint1.clone(),this.controlPoint2=i[0].controlPoint2.clone(),this.end=i[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(6===r)return this.controlPoint1=new w(+i[0],+i[1]),this.controlPoint2=new w(+i[2],+i[3]),this.end=new w(+i[4],+i[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var o;for(t=[],s=0;s<r;s+=6)o=i.slice(s,s+6),t.push(b(N,o));return t}if(3===r)return this.controlPoint1=new w(i[0]),this.controlPoint2=new w(i[1]),this.end=new w(i[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],s=0;s<r;s+=3)n=i.slice(s,s+3),t.push(b(N,n));return t},I={clone:function(){return new N(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,n){var e=new d(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,n);return[new N(e[0]),new N(e[1])]},divideAtLength:function(t,n){var e=new d(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,n);return[new N(e[0]),new N(e[1])]},divideAtT:function(t){var n=new d(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new N(n[0]),new N(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,n=this.controlPoint1,e=this.controlPoint2,i=this.end;return!(t.equals(n)&&n.equals(e)&&e.equals(i))},scale:function(t,n,e){return this.controlPoint1.scale(t,n,e),this.controlPoint2.scale(t,n,e),this.end.scale(t,n,e),this},serialize:function(){var t=this.controlPoint1,n=this.controlPoint2,e=this.end;return this.type+" "+t.x+" "+t.y+" "+n.x+" "+n.y+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,n){return this.controlPoint1.translate(t,n),this.controlPoint2.translate(t,n),this.end.translate(t,n),this}};Object.defineProperty(I,"type",{configurable:!0,enumerable:!0,value:"C"}),N.prototype=S(P,d.prototype,I);var O=function(){for(var t,n,e=arguments,i=[],r=arguments.length,s=0;s<r;s++)i.push(e[s]);if(!(this instanceof O))return b(O,i);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof x){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(i[0]instanceof d){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new w(+i[0],+i[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],s=0;s<r;s+=2)o=i.slice(s,s+2),0===s?t.push(b(O,o)):t.push(b(A,o));return t}if(1===r)return this.end=new w(i[0]),this;for(t=[],s=0;s<r;s+=1)n=i[s],0===s?t.push(new O(n)):t.push(new A(n));return t},D={bbox:function(){return null},clone:function(){return new O(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},scale:function(t,n,e){return this.end.scale(t,n,e),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,n){return this.end.translate(t,n),this}};Object.defineProperty(D,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(D,"type",{configurable:!0,enumerable:!0,value:"M"}),O.prototype=S(P,D);var z=function(){for(var t=arguments,n=[],e=arguments.length,i=0;i<e;i++)n.push(t[i]);if(!(this instanceof z))return b(z,n);if(0<e)throw new Error("Closepath constructor expects no arguments.");return this},j={clone:function(){return new z},divideAt:function(t){var n=new x(this.start,this.end).divideAt(t);return[n[1].isDifferentiable()?new A(n[0]):this.clone(),new A(n[1])]},divideAtLength:function(t){var n=new x(this.start,this.end).divideAtLength(t);return[n[1].isDifferentiable()?new A(n[0]):this.clone(),new A(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(j,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(j,"type",{configurable:!0,enumerable:!0,value:"Z"}),z.prototype=S(P,x.prototype,j);var G=T.segmentTypes={L:A,C:N,M:O,Z:z,z:z};T.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(G).join("")+",.]*$"),T.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};var k={bezier:t,Curve:d,Ellipse:y,Line:x,Path:T,Point:w,Polyline:C,Rect:V,scale:{linear:function(t,n,e){var i=t[1]-t[0],r=n[1]-n[0];return(e-t[0])/i*r+n[0]||0}},normalizeAngle:a,snapToGrid:o,toDeg:g,toRad:l,random:f,ellipse:n,line:v,point:p,rect:m};return function(){if(!("object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))))return function(){throw new Error("SVG is required to use Vectorizer.")};var I={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},t=Math,v=t.PI,s=t.atan2,o=t.sqrt,l=t.min,f=t.max,p=t.cos,m=t.sin,O=function(t,n,e){if(!(this instanceof O))return O.apply(Object.create(O.prototype),arguments);if(t){if(O.isV(t)&&(t=t.node),n=n||{},O.isString(t)){if("svg"===t.toLowerCase())t=O.createSvgDocument();else if("<"===t[0]){var i=O.createSvgDocument(t);if(1<i.childNodes.length){var r,s,o=[];for(r=0,s=i.childNodes.length;r<s;r++){var a=i.childNodes[r];o.push(new O(document.importNode(a,!0)))}return o}t=document.importNode(i.firstChild,!0)}else t=document.createElementNS(I.svg,t);O.ensureId(t)}return this.node=t,this.setAttributes(n),e&&this.append(e),this}},n=O.prototype;function D(t,n,e){e||(e={});for(var i=e.includeAnnotationIndices,r=e.eol,s=e.lineHeight,o=e.baseSize,a=0,h={},u=n.length-1,c=0;c<=u;c++){var l=n[c],f=null;if(O.isObject(l)){var d=l.attrs,g=O("tspan",d),v=g.node,p=l.t;r&&c===u&&(p+=r),v.textContent=p;var m=d.class;m&&g.addClass(m),i&&g.attr("annotations",l.annotations),void 0===(f=parseFloat(d["font-size"]))&&(f=o),f&&a<f&&(a=f)}else r&&c===u&&(l+=r),v=document.createTextNode(l||" "),o&&a<o&&(a=o);t.appendChild(v)}return a&&(h.maxFontSize=a),s?h.lineHeight=s:a&&(h.lineHeight=1.2*a),h}Object.defineProperty(n,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),n.getTransformToElement=function(t){var n=this.node;if(O.isSVGGraphicsElement(t)&&O.isSVGGraphicsElement(n)){var e=O.toNode(t).getScreenCTM(),i=n.getScreenCTM();if(e&&i)return e.inverse().multiply(i)}return O.createSVGMatrix()},n.transform=function(t,n){var e=this.node;if(O.isUndefined(t))return O.transformStringToMatrix(this.attr("transform"));if(n&&n.absolute)return this.attr("transform",O.matrixToTransformString(t));var i=O.createSVGTransform(t);return e.transform.baseVal.appendItem(i),this},n.translate=function(t,n,e){e=e||{},n=n||0;var i=this.attr("transform")||"",r=O.parseTransformString(i);if(i=r.value,O.isUndefined(t))return r.translate;i=i.replace(/translate\([^)]*\)/g,"").trim();var s="translate("+(e.absolute?t:r.translate.tx+t)+","+(e.absolute?n:r.translate.ty+n)+")";return this.attr("transform",(s+" "+i).trim()),this},n.rotate=function(t,n,e,i){i=i||{};var r=this.attr("transform")||"",s=O.parseTransformString(r);if(r=s.value,O.isUndefined(t))return s.rotate;r=r.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var o="rotate("+(i.absolute?t:s.rotate.angle+t)+(void 0!==n&&void 0!==e?","+n+","+e:"")+")";return this.attr("transform",(r+" "+o).trim()),this},n.scale=function(t,n){n=O.isUndefined(n)?t:n;var e=this.attr("transform")||"",i=O.parseTransformString(e);if(e=i.value,O.isUndefined(t))return i.scale;e=e.replace(/scale\([^)]*\)/g,"").trim();var r="scale("+t+","+n+")";return this.attr("transform",(e+" "+r).trim()),this},n.bbox=function(t,n){var e,i=this.node,r=i.ownerSVGElement;if(!r)return new V(0,0,0,0);try{e=i.getBBox()}catch(t){e={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(t)return new V(e);var s=this.getTransformToElement(n||r);return O.transformRect(e,s)},n.getBBox=function(t){var n,e={},i=this.node;if(!i.ownerSVGElement||!O.isSVGGraphicsElement(i))return new V(0,0,0,0);if(t&&(t.target&&(e.target=O.toNode(t.target)),t.recursive&&(e.recursive=t.recursive)),e.recursive){var r=this.children(),s=r.length;if(0===s)return this.getBBox({target:e.target,recursive:!1});e.target||(e.target=this);for(var o=0;o<s;o++){var a,h=r[o];a=0===h.children().length?h.getBBox({target:e.target,recursive:!1}):h.getBBox({target:e.target,recursive:!0}),n=n?n.union(a):a}return n}try{n=i.getBBox()}catch(t){n={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(e.target){var u=this.getTransformToElement(e.target);return O.transformRect(n,u)}return new V(n)};var F=/em$/;function R(t,n){var e=parseFloat(t);return F.test(t)?e*n:e}n.text=function(t,n){if(t&&"string"!=typeof t)throw new Error("Vectorizer: text() expects the first argument to be a string.");t=O.sanitizeText(t),n||(n={});var e=n.displayEmpty,i=n.eol,r=n.textPath,s=n.textVerticalAnchor,o="middle"===s||"bottom"===s||"top"===s,a=n.x;void 0===a&&(a=this.attr("x")||0);var h=n.includeAnnotationIndices,u=n.annotations;u&&!O.isArray(u)&&(u=[u]);var c=n.lineHeight,l="auto"===c,f=l?"1.5em":c||"1em";this.empty(),this.attr({"xml:space":"preserve",display:t||e?null:"none"});var d=parseFloat(this.attr("font-size"));d||(d=16,(o||u)&&this.attr("font-size",d));var g,v=document;g=r?("string"==typeof r&&(r={d:r}),function(t,n){t||(t={});var e=O("textPath"),i=t.d;if(i&&void 0===t["xlink:href"]){var r=O("path").attr("d",i).appendTo(n.defs());e.attr("xlink:href","#"+r.id)}return O.isObject(t)&&e.attr(t),e.node}(r,this)):v.createDocumentFragment();for(var p,m=0,y=t.split("\n"),x=[],w=0,b=y.length-1;w<=b;w++){var S,P=f,A="v-line",T=v.createElementNS(I.svg,"tspan"),L=y[w];if(L)if(u){var E=(S=D(T,O.annotateString(L,u,{offset:-m,includeAnnotationIndices:h}),{includeAnnotationIndices:h,eol:w!==b&&i,lineHeight:l?null:f,baseSize:d})).lineHeight;E&&l&&0!==w&&(P=E),0===w&&(p=.8*S.maxFontSize)}else i&&w!==b&&(L+=i),T.textContent=L;else{T.textContent="-",A+=" v-empty-line";var C=T.style;C.fillOpacity=0,C.strokeOpacity=0,u&&(S={})}S&&x.push(S),0<w&&T.setAttribute("dy",P),(0<w||r)&&T.setAttribute("x",a),T.className.baseVal=A,g.appendChild(T),m+=L.length+1}if(o)if(u)P=function(t,n,e,i){if(!Array.isArray(n))return 0;var r=n.length;if(!r)return 0;for(var s=n[0],o=R(s.maxFontSize,e)||e,a=0,h=R(i,e),u=1;u<r;u++)a+=R((s=n[u]).lineHeight,e)||h;var c,l=R(s.maxFontSize,e)||e;switch(t){case"middle":c=o/2-.15*l-a/2;break;case"bottom":c=-.25*l-a;break;default:case"top":c=.8*o}return c}(s,x,d,f);else if("top"===s)P="0.8em";else{var N;switch(0<b?(N=parseFloat(f)||1,N*=b,F.test(f)||(N/=d)):N=0,s){case"middle":P=.3-N/2+"em";break;case"bottom":P=-N-.3+"em"}}else 0===s?P="0em":s?P=s:(P=0,null===this.attr("y")&&this.attr("y",p||"0.8em"));return g.firstChild.setAttribute("dy",P),this.append(g),this},n.removeAttr=function(t){var n=O.qualifyAttr(t),e=this.node;return n.ns?e.hasAttributeNS(n.ns,n.local)&&e.removeAttributeNS(n.ns,n.local):e.hasAttribute(t)&&e.removeAttribute(t),this},n.attr=function(t,n){if(O.isUndefined(t)){for(var e=this.node.attributes,i={},r=0;r<e.length;r++)i[e[r].name]=e[r].value;return i}if(O.isString(t)&&O.isUndefined(n))return this.node.getAttribute(t);if("object"==typeof t)for(var s in t)t.hasOwnProperty(s)&&this.setAttribute(s,t[s]);else this.setAttribute(t,n);return this},n.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",O.normalizePathData(this.attr("d"))),this},n.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},n.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},n.setAttributes=function(t){for(var n in t)t.hasOwnProperty(n)&&this.setAttribute(n,t[n]);return this},n.append=function(t){O.isArray(t)||(t=[t]);for(var n=0,e=t.length;n<e;n++)this.node.appendChild(O.toNode(t[n]));return this},n.prepend=function(t){var n=this.node.firstChild;return n?O(n).before(t):this.append(t)},n.before=function(t){var n=this.node,e=n.parentNode;if(e){O.isArray(t)||(t=[t]);for(var i=0,r=t.length;i<r;i++)e.insertBefore(O.toNode(t[i]),n)}return this},n.appendTo=function(t){return O.toNode(t).appendChild(this.node),this},n.svg=function(){return this.node instanceof window.SVGSVGElement?this:O(this.node.ownerSVGElement)},n.tagName=function(){return this.node.tagName.toUpperCase()},n.defs=function(){var t=this.svg()||this,n=t.node.getElementsByTagName("defs")[0];return n?O(n):O("defs").appendTo(t)},n.clone=function(){var t=O(this.node.cloneNode(!0));return t.node.id=O.uniqueId(),t},n.findOne=function(t){var n=this.node.querySelector(t);return n?O(n):void 0},n.find=function(t){var n=[],e=this.node.querySelectorAll(t);if(e)for(var i=0;i<e.length;i++)n.push(O(e[i]));return n},n.children=function(){for(var t=this.node.childNodes,n=[],e=0;e<t.length;e++){1===t[e].nodeType&&n.push(O(t[e]))}return n},n.index=function(){for(var t=0,n=this.node.previousSibling;n;)1===n.nodeType&&t++,n=n.previousSibling;return t},n.findParentByClass=function(t,n){for(var e=this.node.ownerSVGElement,i=this.node.parentNode;i&&i!==n&&i!==e;){var r=O(i);if(r.hasClass(t))return r;i=i.parentNode}return null},n.contains=function(t){var n=this.node,e=O.toNode(t),i=e&&e.parentNode;return n===i||!!(i&&1===i.nodeType&&16&n.compareDocumentPosition(i))},n.toLocalPoint=function(t,n){var e=this.svg().node,i=e.createSVGPoint();i.x=t,i.y=n;try{var r=i.matrixTransform(e.getScreenCTM().inverse()),s=this.getTransformToElement(e).inverse()}catch(t){return i}return r.matrixTransform(s)},n.translateCenterToPoint=function(t){var n=this.getBBox({target:this.svg()}).center();return this.translate(t.x-n.x,t.y-n.y),this},n.translateAndAutoOrient=function(t,n,e){t=new w(t),n=new w(n),e||(e=this.svg());var i=this.scale();this.attr("transform","");var r=this.getBBox({target:e}).scale(i.sx,i.sy),s=O.createSVGTransform();s.setTranslate(-r.x-r.width/2,-r.y-r.height/2);var o=O.createSVGTransform(),a=t.angleBetween(n,t.clone().offset(1,0));a&&o.setRotate(a,0,0);var h=O.createSVGTransform(),u=t.clone().move(n,r.width/2);h.setTranslate(2*t.x-u.x,2*t.y-u.y);var c=this.getTransformToElement(e),l=O.createSVGTransform();return l.setMatrix(h.matrix.multiply(o.matrix.multiply(s.matrix.multiply(c.scale(i.sx,i.sy))))),this.attr("transform",O.matrixToTransformString(l.matrix)),this},n.animateAlongPath=function(t,n){n=O.toNode(n);var e=O.ensureId(n),i=O("animateMotion",t),r=O("mpath",{"xlink:href":"#"+e});i.append(r),this.append(i);try{i.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var s=i.node;s.animators=[];var o=s.getAttribute("id");o&&(id2anim[o]=s);for(var a=getTargets(s),h=0,u=a.length;h<u;h++){var c=a[h],l=new Animator(s,c,h);animators.push(l),(s.animators[h]=l).register()}}}return this},n.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},n.addClass=function(t){if(t&&!this.hasClass(t)){var n=this.node.getAttribute("class")||"";this.node.setAttribute("class",(n+" "+t).trim())}return this},n.removeClass=function(t){if(t&&this.hasClass(t)){var n=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",n)}return this},n.toggleClass=function(t,n){return(O.isUndefined(n)?this.hasClass(t):!n)?this.removeClass(t):this.addClass(t),this},n.sample=function(t){t=t||1;for(var n,e=this.node,i=e.getTotalLength(),r=[],s=0;s<i;)n=e.getPointAtLength(s),r.push({x:n.x,y:n.y,distance:s}),s+=t;return r},n.convertToPath=function(){var t=O("path");t.attr(this.attr());var n=this.convertToPathData();return n&&t.attr("d",n),t},n.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return O.convertLineToPathData(this.node);case"POLYGON":return O.convertPolygonToPathData(this.node);case"POLYLINE":return O.convertPolylineToPathData(this.node);case"ELLIPSE":return O.convertEllipseToPathData(this.node);case"CIRCLE":return O.convertCircleToPathData(this.node);case"RECT":return O.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},O.prototype.toGeometryShape=function(){var t,n,e,i,r,s,o,a,h,u,c,l,f,d,g;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,n=parseFloat(this.attr("y"))||0,e=parseFloat(this.attr("width"))||0,i=parseFloat(this.attr("height"))||0,new V(t,n,e,i);case"CIRCLE":return r=parseFloat(this.attr("cx"))||0,s=parseFloat(this.attr("cy"))||0,o=parseFloat(this.attr("r"))||0,new y({x:r,y:s},o,o);case"ELLIPSE":return r=parseFloat(this.attr("cx"))||0,s=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,h=parseFloat(this.attr("ry"))||0,new y({x:r,y:s},a,h);case"POLYLINE":return u=O.getPointsFromSvgNode(this),new C(u);case"POLYGON":return 1<(u=O.getPointsFromSvgNode(this)).length&&u.push(u[0]),new C(u);case"PATH":return c=this.attr("d"),T.isDataSupported(c)||(c=O.normalizePathData(c)),new T(c);case"LINE":return l=parseFloat(this.attr("x1"))||0,d=parseFloat(this.attr("y1"))||0,f=parseFloat(this.attr("x2"))||0,g=parseFloat(this.attr("y2"))||0,new x({x:l,y:d},{x:f,y:g})}return this.getBBox()},n.findIntersection=function(t,n){var e=this.svg().node;n=n||e;var i=this.getBBox({target:n}),r=i.center();if(i.intersectionWithLineFromCenterToPoint(t)){var s,o=this.tagName();if("RECT"===o){var a=new V(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),h=this.getTransformToElement(n),u=O.decomposeMatrix(h),c=e.createSVGTransform();c.setRotate(-u.rotation,r.x,r.y);var l=O.transformRect(a,c.matrix.multiply(h));s=new V(l).intersectionWithLineFromCenterToPoint(t,u.rotation)}else if("PATH"===o||"POLYGON"===o||"POLYLINE"===o||"CIRCLE"===o||"ELLIPSE"===o){var f,d,g,v,p,m=("PATH"===o?this:this.convertToPath()).sample(),y=1/0,x=[];for(f=0;f<m.length;f++)d=m[f],g=(g=O.createSVGPoint(d.x,d.y)).matrixTransform(this.getTransformToElement(n)),(p=(d=new w(g)).distance(r)+(v=1.1*d.distance(t)))<y?(y=p,x=[{sample:d,refDistance:v}]):p<y+1&&x.push({sample:d,refDistance:v});x.sort(function(t,n){return t.refDistance-n.refDistance}),x[0]&&(s=x[0].sample)}return s}},n.setAttribute=function(t,n){var e=this.node;if(null===n)return this.removeAttr(t),this;var i=O.qualifyAttr(t);return i.ns?e.setAttributeNS(i.ns,t,n):"id"===t?e.id=n:e.setAttribute(t,n),this},O.createSvgDocument=function(t){if(t){var n='<svg xmlns="'+I.svg+'" xmlns:xlink="'+I.xlink+'" version="1.1">'+t+"</svg>";return O.parseXML(n,{async:!1}).documentElement}var e=document.createElementNS(I.svg,"svg");return e.setAttributeNS(I.xmlns,"xmlns:xlink",I.xlink),e.setAttribute("version","1.1"),e},O.idCounter=0,O.uniqueId=function(){return"v-"+ ++O.idCounter},O.toNode=function(t){return O.isV(t)?t.node:t.nodeName&&t||t[0]},O.ensureId=function(t){return(t=O.toNode(t)).id||(t.id=O.uniqueId())},O.sanitizeText=function(t){return(t||"").replace(/ /g," ")},O.isUndefined=function(t){return void 0===t},O.isString=function(t){return"string"==typeof t},O.isObject=function(t){return t&&"object"==typeof t},O.isArray=Array.isArray,O.parseXML=function(t,n){var e;n=n||{};try{var i=new DOMParser;O.isUndefined(n.async)||(i.async=n.async),e=i.parseFromString(t,"text/xml")}catch(t){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return e},O.qualifyAttr=function(t){if(-1===t.indexOf(":"))return{ns:null,local:t};var n=t.split(":");return{ns:I[n[0]],local:n[1]}},O.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,O.transformSeparatorRegex=/[ ,]+/,O.transformationListRegex=/^(\w+)\((.*)\)/,O.transformStringToMatrix=function(t){var n=O.createSVGMatrix(),e=t&&t.match(O.transformRegex);if(!e)return n;for(var i=0,r=e.length;i<r;i++){var s=e[i].match(O.transformationListRegex);if(s){var o,a,h,u,c,l=O.createSVGMatrix(),f=s[2].split(O.transformSeparatorRegex);switch(s[1].toLowerCase()){case"scale":o=parseFloat(f[0]),a=void 0===f[1]?o:parseFloat(f[1]),l=l.scaleNonUniform(o,a);break;case"translate":h=parseFloat(f[0]),u=parseFloat(f[1]),l=l.translate(h,u);break;case"rotate":c=parseFloat(f[0]),h=parseFloat(f[1])||0,u=parseFloat(f[2])||0,l=0!==h||0!==u?l.translate(h,u).rotate(c).translate(-h,-u):l.rotate(c);break;case"skewx":c=parseFloat(f[0]),l=l.skewX(c);break;case"skewy":c=parseFloat(f[0]),l=l.skewY(c);break;case"matrix":l.a=parseFloat(f[0]),l.b=parseFloat(f[1]),l.c=parseFloat(f[2]),l.d=parseFloat(f[3]),l.e=parseFloat(f[4]),l.f=parseFloat(f[5]);break;default:continue}n=n.multiply(l)}}return n},O.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},O.parseTransformString=function(t){var n,e,i;if(t){var r=O.transformSeparatorRegex;if(0<=t.trim().indexOf("matrix")){var s=O.transformStringToMatrix(t),o=O.decomposeMatrix(s);n=[o.translateX,o.translateY],i=[o.scaleX,o.scaleY],e=[o.rotation];var a=[];0===n[0]&&0===n[1]||a.push("translate("+n+")"),1===i[0]&&1===i[1]||a.push("scale("+i+")"),0!==e[0]&&a.push("rotate("+e+")"),t=a.join(" ")}else{var h=t.match(/translate\((.*?)\)/);h&&(n=h[1].split(r));var u=t.match(/rotate\((.*?)\)/);u&&(e=u[1].split(r));var c=t.match(/scale\((.*?)\)/);c&&(i=c[1].split(r))}}var l=i&&i[0]?parseFloat(i[0]):1;return{value:t,translate:{tx:n&&n[0]?parseInt(n[0],10):0,ty:n&&n[1]?parseInt(n[1],10):0},rotate:{angle:e&&e[0]?parseInt(e[0],10):0,cx:e&&e[1]?parseInt(e[1],10):void 0,cy:e&&e[2]?parseInt(e[2],10):void 0},scale:{sx:l,sy:i&&i[1]?parseFloat(i[1]):l}}},O.deltaTransformPoint=function(t,n){return{x:n.x*t.a+n.y*t.c+0,y:n.x*t.b+n.y*t.d+0}},O.decomposeMatrix=function(t){var n=O.deltaTransformPoint(t,{x:0,y:1}),e=O.deltaTransformPoint(t,{x:1,y:0}),i=180/v*s(n.y,n.x)-90,r=180/v*s(e.y,e.x);return{translateX:t.e,translateY:t.f,scaleX:o(t.a*t.a+t.b*t.b),scaleY:o(t.c*t.c+t.d*t.d),skewX:i,skewY:r,rotation:i}},O.matrixToScale=function(t){var n,e,i,r;return t?(n=O.isUndefined(t.a)?1:t.a,r=O.isUndefined(t.d)?1:t.d,e=t.b,i=t.c):n=r=1,{sx:e?o(n*n+e*e):n,sy:i?o(i*i+r*r):r}},O.matrixToRotate=function(t){var n={x:0,y:1};return t&&(n=O.deltaTransformPoint(t,n)),{angle:a(g(s(n.y,n.x))-90)}},O.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},O.isV=function(t){return t instanceof O},O.isVElement=O.isV,O.isSVGGraphicsElement=function(t){return!!t&&((t=O.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM)};var d=O("svg").node;return O.createSVGMatrix=function(t){var n=d.createSVGMatrix();for(var e in t)n[e]=t[e];return n},O.createSVGTransform=function(t){return O.isUndefined(t)?d.createSVGTransform():(t instanceof SVGMatrix||(t=O.createSVGMatrix(t)),d.createSVGTransformFromMatrix(t))},O.createSVGPoint=function(t,n){var e=d.createSVGPoint();return e.x=t,e.y=n,e},O.transformRect=function(t,n){var e=d.createSVGPoint();e.x=t.x,e.y=t.y;var i=e.matrixTransform(n);e.x=t.x+t.width,e.y=t.y;var r=e.matrixTransform(n);e.x=t.x+t.width,e.y=t.y+t.height;var s=e.matrixTransform(n);e.x=t.x,e.y=t.y+t.height;var o=e.matrixTransform(n),a=l(i.x,r.x,s.x,o.x),h=f(i.x,r.x,s.x,o.x),u=l(i.y,r.y,s.y,o.y),c=f(i.y,r.y,s.y,o.y);return new V(a,u,h-a,c-u)},O.transformPoint=function(t,n){return new w(O.createSVGPoint(t.x,t.y).matrixTransform(n))},O.transformLine=function(t,n){return new x(O.transformPoint(t.start,n),O.transformPoint(t.end,n))},O.transformPolyline=function(t,n){var e=t instanceof C?t.points:t;O.isArray(e)||(e=[]);for(var i=[],r=0,s=e.length;r<s;r++)i[r]=O.transformPoint(e[r],n);return new C(i)},O.styleToObject=function(t){for(var n={},e=t.split(";"),i=0;i<e.length;i++){var r=e[i].split("=");n[r[0].trim()]=r[1].trim()}return n},O.createSlicePathData=function(t,n,e,i){var r=2*v-1e-6,s=t,o=n,a=e,h=i,u=(h<a&&(u=a,a=h,h=u),h-a),c=u<v?"0":"1",l=p(a),f=m(a),d=p(h),g=m(h);return r<=u?s?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+s+"A"+s+","+s+" 0 1,0 0,"+-s+"A"+s+","+s+" 0 1,0 0,"+s+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":s?"M"+o*l+","+o*f+"A"+o+","+o+" 0 "+c+",1 "+o*d+","+o*g+"L"+s*d+","+s*g+"A"+s+","+s+" 0 "+c+",0 "+s*l+","+s*f+"Z":"M"+o*l+","+o*f+"A"+o+","+o+" 0 "+c+",1 "+o*d+","+o*g+"L0,0Z"},O.mergeAttrs=function(t,n){for(var e in n)"class"===e?t[e]=t[e]?t[e]+" "+n[e]:n[e]:"style"===e?O.isObject(t[e])&&O.isObject(n[e])?t[e]=O.mergeAttrs(t[e],n[e]):O.isObject(t[e])?t[e]=O.mergeAttrs(t[e],O.styleToObject(n[e])):O.isObject(n[e])?t[e]=O.mergeAttrs(O.styleToObject(t[e]),n[e]):t[e]=O.mergeAttrs(O.styleToObject(t[e]),O.styleToObject(n[e])):t[e]=n[e];return t},O.annotateString=function(t,n,e){n=n||[];for(var i,r,s,o=(e=e||{}).offset||0,a=[],h=[],u=0;u<t.length;u++){r=h[u]=t[u];for(var c=0;c<n.length;c++){var l=n[c],f=l.start+o,d=l.end+o;f<=u&&u<d&&(O.isObject(r)?r.attrs=O.mergeAttrs(O.mergeAttrs({},r.attrs),l.attrs):r=h[u]={t:t[u],attrs:l.attrs},e.includeAnnotationIndices&&(r.annotations||(r.annotations=[])).push(c))}(s=h[u-1])?O.isObject(r)&&O.isObject(s)?JSON.stringify(r.attrs)===JSON.stringify(s.attrs)?i.t+=r.t:(a.push(i),i=r):i=O.isObject(r)?(a.push(i),r):O.isObject(s)?(a.push(i),r):(i||"")+r:i=r}return i&&a.push(i),a},O.findAnnotationsAtIndex=function(t,n){var e=[];return t&&t.forEach(function(t){t.start<n&&n<=t.end&&e.push(t)}),e},O.findAnnotationsBetweenIndexes=function(t,n,e){var i=[];return t&&t.forEach(function(t){(n>=t.start&&n<t.end||e>t.start&&e<=t.end||t.start>=n&&t.end<e)&&i.push(t)}),i},O.shiftAnnotations=function(t,n,e){return t&&t.forEach(function(t){t.start<n&&t.end>=n?t.end+=e:t.start>=n&&(t.start+=e,t.end+=e)}),t},O.convertLineToPathData=function(t){return["M",(t=O(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},O.convertPolygonToPathData=function(t){var n=O.getPointsFromSvgNode(t);return 0===n.length?null:O.svgPointsToPath(n)+" Z"},O.convertPolylineToPathData=function(t){var n=O.getPointsFromSvgNode(t);return 0===n.length?null:O.svgPointsToPath(n)},O.svgPointsToPath=function(t){for(var n=0,e=t.length;n<e;n++)t[n]=t[n].x+" "+t[n].y;return"M "+t.join(" L")},O.getPointsFromSvgNode=function(t){var n=[],e=(t=O.toNode(t)).points;if(e)for(var i=0,r=e.numberOfItems;i<r;i++)n.push(e.getItem(i));return n},O.KAPPA=.551784,O.convertCircleToPathData=function(t){t=O(t);var n=parseFloat(t.attr("cx"))||0,e=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("r")),r=i*O.KAPPA;return["M",n,e-i,"C",n+r,e-i,n+i,e-r,n+i,e,"C",n+i,e+r,n+r,e+i,n,e+i,"C",n-r,e+i,n-i,e+r,n-i,e,"C",n-i,e-r,n-r,e-i,n,e-i,"Z"].join(" ")},O.convertEllipseToPathData=function(t){t=O(t);var n=parseFloat(t.attr("cx"))||0,e=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("rx")),r=parseFloat(t.attr("ry"))||i,s=i*O.KAPPA,o=r*O.KAPPA;return["M",n,e-r,"C",n+s,e-r,n+i,e-o,n+i,e,"C",n+i,e+o,n+s,e+r,n,e+r,"C",n-s,e+r,n-i,e+o,n-i,e,"C",n-i,e-o,n-s,e-r,n,e-r,"Z"].join(" ")},O.convertRectToPathData=function(t){return t=O(t),O.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},O.rectToPath=function(t){var n=t.x,e=t.y,i=t.width,r=t.height,s=l(t.rx||t["top-rx"]||0,i/2),o=l(t.rx||t["bottom-rx"]||0,i/2),a=l(t.ry||t["top-ry"]||0,r/2),h=l(t.ry||t["bottom-ry"]||0,r/2);return(s||o||a||h?["M",n,e+a,"v",r-a-h,"a",o,h,0,0,0,o,h,"h",i-2*o,"a",o,h,0,0,0,o,-h,"v",-(r-h-a),"a",s,a,0,0,0,-s,-a,"h",-(i-2*s),"a",s,a,0,0,0,-s,a,"Z"]:["M",n,e,"H",n+i,"V",e+r,"H",n,"V",e,"Z"]).join(" ")},O.normalizePathData=function(){var t="\t\n\v\f\r   ᠎             　\u2028\u2029",v=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),p=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),n=Math,H=n.PI,U=n.sin,Y=n.cos,W=n.tan,Z=n.asin,X=n.sqrt,$=n.abs;function f(t,n,e,i,r,s){return[1/3*t+2/3*e,1/3*n+2/3*i,1/3*r+2/3*e,1/3*s+2/3*i,r,s]}function J(t,n,e){return{x:t*Y(e)-n*U(e),y:t*U(e)+n*Y(e)}}function d(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return String(t).replace(v,function(t,n,e){var i=[],r=n.toLowerCase();for(e.replace(p,function(t,n){n&&i.push(+n)}),"m"===r&&2<i.length&&(o.push([n].concat(i.splice(0,2))),r="l",n="m"===n?"l":"L");i.length>=s[r]&&(o.push([n].concat(i.splice(0,s[r]))),s[r]););}),o}(t)),!t||!t.length)return[["M",0,0]];for(var n,e=[],i=0,r=0,s=0,o=0,a=t.length,h=0;h<a;h++){var u=[];e.push(u);var c,l,f=t[h];if((n=f[0])!=n.toUpperCase())switch(u[0]=n.toUpperCase(),u[0]){case"A":u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=+f[6]+i,u[7]=+f[7]+r;break;case"V":u[1]=+f[1]+r;break;case"H":u[1]=+f[1]+i;break;case"M":for(s=+f[1]+i,o=+f[2]+r,c=f.length,l=1;l<c;l++)u[l]=+f[l]+(l%2?i:r);break;default:for(c=f.length,l=1;l<c;l++)u[l]=+f[l]+(l%2?i:r)}else for(var d=f.length,g=0;g<d;g++)u[g]=f[g];switch(u[0]){case"Z":i=+s,r=+o;break;case"H":i=u[1];break;case"V":r=u[1];break;case"M":s=u[u.length-2],o=u[u.length-1],i=u[u.length-2],r=u[u.length-1];break;default:i=u[u.length-2],r=u[u.length-1]}}return e}function e(t){var i=d(t),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function e(t,n,e){var i,r;if(!t)return["C",n.x,n.y,n.x,n.y,n.x,n.y];switch(t[0]in{T:1,Q:1}||(n.qx=null,n.qy=null),t[0]){case"M":n.X=t[1],n.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(function t(n,e,i,r,s,o,a,h,u,c){var l,f=120*H/180,d=H/180*(+s||0),g=[];if(c)P=c[0],A=c[1],b=c[2],S=c[3];else{n=(l=J(n,e,-d)).x,e=l.y;var v=(n-(h=(l=J(h,u,-d)).x))/2,p=(e-(u=l.y))/2,m=v*v/(i*i)+p*p/(r*r);1<m&&(i*=m=X(m),r*=m);var y=i*i,x=r*r,w=(o==a?-1:1)*X($((y*x-y*p*p-x*v*v)/(y*p*p+x*v*v))),b=w*i*p/r+(n+h)/2,S=w*-r*v/i+(e+u)/2,P=Z(((e-S)/r).toFixed(9)),A=Z(((u-S)/r).toFixed(9));(P=n<b?H-P:P)<0&&(P=2*H+P),(A=h<b?H-A:A)<0&&(A=2*H+A),a&&A<P&&(P-=2*H),!a&&P<A&&(A-=2*H)}var T=A-P;if($(T)>f){var L=A,E=h,C=u;g=t(h=b+i*Y(A=P+f*(a&&P<A?1:-1)),u=S+r*U(A),i,r,s,0,a,E,C,[A,L,b,S])}T=A-P;var N=Y(P),I=U(P),O=Y(A),D=U(A),F=W(T/4),R=4/3*(i*F),q=4/3*(r*F),M=[n,e],V=[n+R*I,e-q*N],z=[h+R*D,u-q*O],j=[h,u];if(V[0]=2*M[0]-V[0],V[1]=2*M[1]-V[1],c)return[V,z,j].concat(g);for(var G=[],k=(g=[V,z,j].concat(g).join().split(",")).length,B=0;B<k;B++)G[B]=B%2?J(g[B-1],g[B],d).y:J(g[B],g[B+1],d).x;return G}.apply(0,[n.x,n.y].concat(t.slice(1))));break;case"S":r="C"===e||"S"===e?(i=2*n.x-n.bx,2*n.y-n.by):(i=n.x,n.y),t=["C",i,r].concat(t.slice(1));break;case"T":n.qy="Q"===e||"T"===e?(n.qx=2*n.x-n.qx,2*n.y-n.qy):(n.qx=n.x,n.y),t=["C"].concat(f(n.x,n.y,n.qx,n.qy,t[1],t[2]));break;case"Q":n.qx=t[1],n.qy=t[2],t=["C"].concat(f(n.x,n.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],n.y);break;case"V":t=["L"].concat(n.x,t[1])}return t}function r(t,n){if(7<t[n].length){t[n].shift();for(var e=t[n];e.length;)s[n]="A",t.splice(n++,0,["C"].concat(e.splice(0,6)));t.splice(n,1),h=i.length}}for(var s=[],o="",a="",h=i.length,u=0;u<h;u++){i[u]&&(o=i[u][0]),"C"!==o&&(s[u]=o,0<u&&(a=s[u-1])),i[u]=e(i[u],n,a),"A"!==s[u]&&"C"===o&&(s[u]="C"),r(i,u);var c=i[u],l=c.length;n.x=c[l-2],n.y=c[l-1],n.bx=parseFloat(c[l-4])||n.x,n.by=parseFloat(c[l-3])||n.y}return i[0][0]&&"M"===i[0][0]||i.unshift(["M",0,0]),i}return function(t){return e(t).join(",").split(",").join(" ")}}(),O.namespace=I,O.g=k,O}()}),"undefined"!=typeof V)var g=V.g,Vectorizer=V;
##############################################
/src/dist/joint.min.js-7-*/
/src/dist/joint.min.js:8:if(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("backbone"),require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["exports","backbone","lodash","jquery"],e):e((t=t||self).joint={},t.Backbone,t._,t.$)}(this,function(e,s,i,S){"use strict";var n,l,r,c;s=s&&s.hasOwnProperty("default")?s.default:s,i=i&&i.hasOwnProperty("default")?i.default:i,S=S&&S.hasOwnProperty("default")?S.default:S,Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var r,o,s=0|e,a=Math.max(0<=s?s:n-Math.abs(s),0);for(;a<n;){if((r=i[a])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var o=e[r];if(t.call(n,o,r,e))return o;r++}}}),Array.from||(Array.from=(n=Object.prototype.toString,l=function(t){return"function"==typeof t||"[object Function]"===n.call(t)},r=Math.pow(2,53)-1,c=function(t){var e,i=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(i,0),r)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,n=1<arguments.length?arguments[1]:void 0;if(void 0!==n){if(!l(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(i=arguments[2])}for(var r,o=c(e.length),s=l(this)?Object(new this(o)):new Array(o),a=0;a<o;)r=e[a],s[a]=n?void 0===i?n(r,a):n.call(i,r,a):r,a+=1;return s.length=o,s})),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var o=e[r];if(t.call(n,o,r,e))return r;r++}return-1}}),function(){var t=void 0!==e?e:this,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function l(t){this.message=t}(l.prototype=new Error).name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var e,i,n=String(t),r=0,o=a,s="";n.charAt(0|r)||(o="=",r%1);s+=o.charAt(63&e>>8-r%1*8)){if(255<(i=n.charCodeAt(r+=.75)))throw new l("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|i}return s}),t.atob||(t.atob=function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new l("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,r=0,o=0,s="";n=e.charAt(o++);~n&&(i=r%4?64*i+n:n,r++%4)?s+=String.fromCharCode(255&i>>(-2*r&6)):0)n=a.indexOf(n);return s})}(),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isNaN=Number.isNaN||function(t){return t!=t},String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),function(){function n(t,e){return this.slice(t,e)}function r(t,e){arguments.length<2&&(e=0);for(var i=0,n=t.length;i<n;++i,++e)this[e]=255&t[i]}function t(t){var e;if("number"==typeof t){e=new Array(t);for(var i=0;i<t;++i)e[i]=0}else e=t.slice(0);return e.subarray=n,(e.buffer=e).byteLength=e.length,e.set=r,"object"==typeof t&&t.buffer&&(e.buffer=t.buffer),e}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=t,window.Uint32Array=t,window.Int32Array=t)}(),"undefined"!=typeof XMLHttpRequest&&("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}}));var o=Math,L=o.abs,g=o.cos,h=o.sin,Z=o.sqrt,P=o.min,G=o.max,u=o.atan2,a=o.round,d=o.floor,f=o.PI,k=o.pow,t={curveThroughPoints:function(t){return console.warn("deprecated"),new O(p.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,i=[],n=[],r=t.length-1;if(1==r)return i[0]=new E((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new E(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,n];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var s=this.getFirstControlPoints(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var a=this.getFirstControlPoints(o);for(e=0;e<r;e++)i.push(new E(s[e],a[e])),e<r-1?n.push(new E(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):n.push(new E((t[r].x+s[r-1])/2,(t[r].y+a[r-1])/2));return[i,n]},getCurveDivider:function(t,e,i,n){console.warn("deprecated");var r=new p(t,e,i,n);return function(t){var e=r.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var o=1;o<e;o++)n[o]=1/r,r=(o<e-1?4:3.5)-n[o],i[o]=(t[o]-i[o-1])/r;for(o=1;o<e;o++)i[e-o-1]-=n[e-o]*i[e-o];return i},getInversionSolver:function(t,e,i,n){console.warn("deprecated");var r=new p(t,e,i,n);return function(t){return r.closestPointT(t)}}},p=function(t,e,i,n){return this instanceof p?t instanceof p?new p(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new E(t),this.controlPoint1=new E(e),this.controlPoint2=new E(i),void(this.end=new E(n))):new p(t,e,i,n)};p.throughPoints=function(){function l(t){var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var o=1;o<e;o++)n[o]=1/r,r=(o<e-1?4:3.5)-n[o],i[o]=(t[o]-i[o-1])/r;for(o=1;o<e;o++)i[e-o-1]-=n[e-o]*i[e-o];return i}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var e=function(t){var e,i=[],n=[],r=t.length-1;if(1==r)return i[0]=new E((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new E(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,n];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var s=l(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var a=l(o);for(e=0;e<r;e++)i.push(new E(s[e],a[e])),e<r-1?n.push(new E(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):n.push(new E((t[r].x+s[r-1])/2,(t[r].y+a[r-1])/2));return[i,n]}(t),i=[],n=e[0].length,r=0;r<n;r++){var o=new E(e[0][r].x,e[0][r].y),s=new E(e[1][r].x,e[1][r].y);i.push(new p(t[r],o,s,t[r+1]))}return i}}(),p.prototype={bbox:function(){for(var t,e,i,n,r,o,s,a,l=this.start,c=this.controlPoint1,g=this.controlPoint2,h=this.end,u=l.x,d=l.y,f=c.x,p=c.y,I=g.x,m=g.y,A=h.x,v=h.y,C=new Array,w=new Array,y=[new Array,new Array],b=0;b<2;++b)if(i=0===b?(e=6*u-12*f+6*I,t=-3*u+9*f-9*I+3*A,3*f-3*u):(e=6*d-12*p+6*m,t=-3*d+9*p-9*m+3*v,3*p-3*d),L(t)<1e-12){if(L(e)<1e-12)continue;0<(n=-i/e)&&n<1&&w.push(n)}else a=Z(s=e*e-4*i*t),s<0||(0<(r=(-e+a)/(2*t))&&r<1&&w.push(r),0<(o=(-e-a)/(2*t))&&o<1&&w.push(o));for(var N,M,x,S=w.length,k=S;S--;)M=(N=1-(n=w[S]))*N*N*u+3*N*N*n*f+3*N*n*n*I+n*n*n*A,y[0][S]=M,x=N*N*N*d+3*N*N*n*p+3*N*n*n*m+n*n*n*v,y[1][S]=x,C[S]={X:M,Y:x};w[k]=0,w[k+1]=1,C[k]={X:u,Y:d},C[k+1]={X:A,Y:v},y[0][k]=u,y[1][k]=d,y[0][k+1]=A,y[1][k+1]=v,w.length=k+2,y[0].length=k+2,y[1].length=k+2,C.length=k+2;var D=P.apply(null,y[0]),z=P.apply(null,y[1]),T=G.apply(null,y[0]),j=G.apply(null,y[1]);return new H(D,z,T-D,j-z)},clone:function(){return new p(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,n),n)},closestPointNormalizedLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions},r=this.closestPointLength(t,n);if(!r)return 0;var o=this.length(n);return 0===o?0:r/o},closestPointT:function(t,e){for(var i,n,r,o,s,a,l,c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,g=void 0===e.subdivisions?this.getSubdivisions({precision:c}):e.subdivisions,h=g.length,u=h?1/h:0,d=0;d<h;d++){var f=g[d],p=f.start.distance(t),I=f.end.distance(t),m=p+I;(!l||m<l)&&(n=d*u,r=(d+1)*u,o=p,s=I,a=(i=f).start.distance(f.end),l=m)}for(var A=k(10,-c);;){var v=o?L(o-s)/o:0,C=s?L(o-s)/s:0;if(v<A||C<A||(!o||o<a*A||(!s||s<a*A)))return o<=s?n:r;var w=i.divide(.5);u/=2;var y=w[0].start.distance(t),b=w[0].end.distance(t),N=y+b,M=w[1].start.distance(t),x=w[1].end.distance(t);s=N<=M+x?(i=w[0],r-=u,o=y,b):(i=w[1],n+=u,o=M,x)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(1<=t)return this.divideAtT(1);var i=this.tAt(t,e);return this.divideAtT(i)},divideAtLength:function(t,e){var i=this.tAtLength(t,e);return this.divideAtT(i)},divideAtT:function(t){var e=this.start,i=this.controlPoint1,n=this.controlPoint2,r=this.end;if(t<=0)return[new p(e,e,e,e),new p(e,i,n,r)];if(1<=t)return[new p(e,i,n,r),new p(r,r,r,r)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,l=o.divider,c=o.dividerControlPoint1,g=o.dividerControlPoint2;return[new p(e,s,a,l),new p(l,c,g,r)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,i=this.controlPoint1,n=this.controlPoint2,r=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:n.clone()};if(1<=t)return{startControlPoint1:i.clone(),startControlPoint2:n.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};var o=new B(e,i).pointAt(t),s=new B(i,n).pointAt(t),a=new B(n,r).pointAt(t),l=new B(o,s).pointAt(t),c=new B(s,a).pointAt(t);return{startControlPoint1:o,startControlPoint2:l,divider:new B(l,c).pointAt(t),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=[new p(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return i;for(var n=this.endpointDistance(),r=k(10,-e),o=0;;){o+=1;for(var s=[],a=i.length,l=0;l<a;l++){var c=i[l].divide(.5);s.push(c[0],c[1])}for(var g=0,h=s.length,u=0;u<h;u++){g+=s[u].endpointDistance()}if(1<o&&(0!==g?(g-n)/g:0)<r)return s;i=s,n=g}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,i=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(n))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,n=0,r=i.length,o=0;o<r;o++){n+=i[o].endpointDistance()}return n},lengthAtT:function(t,e){if(t<=0)return 0;var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:i})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var i=this.tAt(t,e);return this.pointAtT(i)},pointAtLength:function(t,e){var i=this.tAtLength(t,e);return this.pointAtT(i)},pointAtT:function(t){return t<=0?this.start.clone():1<=t?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,scale:function(t,e,i){return this.start.scale(t,e,i),this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var i=this.tAt(t,e);return this.tangentAtT(i)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var i=this.tAtLength(t,e);return this.tangentAtT(i)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var e=this.getSkeletonPoints(t),i=e.startControlPoint2,n=e.dividerControlPoint1,r=e.divider,o=new B(i,n);return o.translate(r.x-i.x,r.y-i.y),o},tAt:function(t,e){if(t<=0)return 0;if(1<=t)return 1;var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions},r=this.length(n)*t;return this.tAtLength(r,n)},tAtLength:function(t,e){var i=!0;t<0&&(i=!1,t=-t);for(var n,r,o,s,a,l=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.subdivisions?this.getSubdivisions({precision:l}):e.subdivisions,g={precision:l,subdivisions:c},h=0,u=c.length,d=1/u,f=0;f<u;f++){var p=i?f:u-1-f,I=c[f],m=I.endpointDistance();if(t<=h+m){n=I,r=p*d,o=(p+1)*d,s=i?t-h:m+h-t,a=i?m+h-t:t-h;break}h+=m}if(!n)return i?1:0;for(var A=this.length(g),v=k(10,-l);;){var C,w;if((0!==A?s/A:0)<v)return r;if((0!==A?a/A:0)<v)return o;var y=n.divide(.5);d/=2;var b=y[0].endpointDistance(),N=y[1].endpointDistance();w=s<=b?(n=y[0],o-=d,b-(C=s)):(n=y[1],r+=d,N-(C=s-b)),s=C,a=w}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,n=[i[0].start.clone()],r=i.length,o=0;o<r;o++){var s=i[o];n.push(s.end.clone())}return n},toPolyline:function(t){return new D(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},p.prototype.divide=p.prototype.divideAtT;var w=function(t,e,i){return this instanceof w?t instanceof w?new w(new E(t.x,t.y),t.a,t.b):(t=new E(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=i)):new w(t,e,i)};w.fromRect=function(t){return t=new H(t),new w(t.center(),t.width/2,t.height/2)},w.prototype={bbox:function(){return new H(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new E(this.x,this.y)},clone:function(){return new w(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],i=t.start,n=t.end,r=this.a,o=this.b,s=t.vector(),a=i.difference(new E(this)),l=new E(s.x/(r*r),s.y/(o*o)),c=new E(a.x/(r*r),a.y/(o*o)),g=s.dot(l),h=s.dot(c),u=h*h-g*(a.dot(c)-1);if(u<0)return null;if(0<u){var d=Z(u),f=(-h-d)/g,p=(-h+d)/g;if((f<0||1<f)&&(p<0||1<p))return null;0<=f&&f<=1&&e.push(i.lerp(n,f)),0<=p&&p<=1&&e.push(i.lerp(n,p))}else{var I=-h/g;if(!(0<=I&&I<=1))return null;e.push(i.lerp(n,I))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new E(t),e&&t.rotate(new E(this.x,this.y),e);var i,n=t.x-this.x,r=t.y-this.y;if(0===n)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new E(this.x,this.y),-e):i;var o=r/n,s=o*o,a=this.a*this.a,l=this.b*this.b,c=Z(1/(1/a+s/l)),g=o*(c=n<0?-c:c);return i=new E(this.x+c,this.y+g),e?i.rotate(new E(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,i=t.y,n=this.a,r=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(n*n)+(i-s)*(i-s)/(r*r)},tangentTheta:function(t){var e,i,n=t.x,r=t.y,o=this.a,s=this.b,a=this.bbox().center(),l=a.x,c=a.y,g=n>a.x+o/2,h=n<a.x-o/2;return g||h?i=o*o/(n-l)-o*o*(r-c)*((e=n>a.x?r-30:r+30)-c)/(s*s*(n-l))+l:e=s*s/(r-c)-s*s*(n-l)*((i=r>a.y?n+30:n-30)-l)/(o*o*(r-c))+c,new E(i,e).theta(t)},toString:function(){return new E(this.x,this.y).toString()+" "+this.a+" "+this.b}};var B=function(t,e){return this instanceof B?t instanceof B?new B(t.start,t.end):(this.start=new E(t),void(this.end=new E(e))):new B(t,e)};B.prototype={angle:function(){var t=new E(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=P(this.start.x,this.end.x),e=P(this.start.y,this.end.y),i=G(this.start.x,this.end.x),n=G(this.start.y,this.end.y);return new H(t,e,i-t,n-e)},bearing:function(){var t=y(this.start.y),e=y(this.end.y),i=this.start.x,n=this.end.x,r=y(n-i),o=h(r)*g(e),s=g(t)*h(e)-h(t)*g(e)*g(r),a=A(u(o,s))-22.5;return a<0&&(a+=360),["NE","E","SE","S","SW","W","NW","N"][a=parseInt(a/45)]},clone:function(){return new B(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new B(this.start,t).vector()),i=P(1,G(0,e/this.squaredLength()));return i!=i?0:i},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,i=this.end;if(0!==e.cross(t,i))return!1;var n=this.length();return!(new B(e,t).length()>n)&&!(new B(t,i).length()>n)},divideAt:function(t){var e=this.pointAt(t);return[new B(this.start,e),new B(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new B(this.start,e),new B(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t instanceof B||t instanceof H||t instanceof D||t instanceof w||t instanceof O){var i=t.intersectionWithLine(this,e);return i&&t instanceof B&&(i=i[0]),i}return null},intersectionWithLine:function(t){var e=new E(this.end.x-this.start.x,this.end.y-this.start.y),i=new E(t.end.x-t.start.x,t.end.y-t.start.y),n=e.x*i.y-e.y*i.x,r=new E(t.start.x-this.start.x,t.start.y-this.start.y),o=r.x*i.y-r.y*i.x,s=r.x*e.y-r.y*e.x;if(0===n||o*n<0||s*n<0)return null;if(0<n){if(n<o||n<s)return null}else if(o<n||s<n)return null;return[new E(this.start.x+o*e.x/n,this.start.y+o*e.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Z(this.squaredLength())},midpoint:function(){return new E((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){var e=this.clone();if(!this.isDifferentiable())return e;var i=e.start,n=e.end,r=i.clone().rotate(n,270),o=n.clone().rotate(i,90);return i.move(o,t),n.move(r,t),e},pointAt:function(t){var e=this.start,i=this.end;return t<=0?e.clone():1<=t?i.clone():e.lerp(i,t)},pointAtLength:function(t){var e=this.start,i=this.end,n=!0;t<0&&(n=!1,t=-t);var r=this.length();return r<=t?n?i.clone():e.clone():this.pointAt((n?t:r-t)/r)},pointOffset:function(t){t=new E(t);var e=this.start,i=this.end;return((i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){var e=k(10,t||0);return this.start.x=a(this.start.x*e)/e,this.start.y=a(this.start.y*e)/e,this.end.x=a(this.end.x*e)/e,this.end.y=a(this.end.y*e)/e,this},scale:function(t,e,i){return this.start.scale(t,e,i),this.end.scale(t,e,i),this},setLength:function(t){var e=this.length();if(!e)return this;var i=t/e;return this.scale(i,i,this.start)},squaredLength:function(){var t=this.start.x,e=this.start.y;return(t-=this.end.x)*t+(e-=this.end.y)*e},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,i=this.end,n=this.pointAt(t),r=new B(e,i);return r.translate(n.x-e.x,n.y-e.y),r},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,i=this.end,n=this.pointAtLength(t),r=new B(e,i);return r.translate(n.x-e.x,n.y-e.y),r},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new E(this.end.x-this.start.x,this.end.y-this.start.y)}},B.prototype.intersection=B.prototype.intersect;var O=function(t){if(!(this instanceof O))return new O(t);if("string"==typeof t)return new O.parse(t);var e,i;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(i=(t=t.reduce(function(t,e){return t.concat(e)},[])).length,t[0].isSegment)for(e=0;e<i;e++){var n=t[e];this.appendSegment(n)}else{var r=null;for(e=0;e<i;e++){var o=t[e];if(!(o instanceof B||o instanceof p))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(O.createSegment("M",o.start)),r&&!r.end.equals(o.start)&&this.appendSegment(O.createSegment("M",o.start)),o instanceof B?this.appendSegment(O.createSegment("L",o.end)):o instanceof p&&this.appendSegment(O.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),r=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof B)this.appendSegment(O.createSegment("M",t.start)),this.appendSegment(O.createSegment("L",t.end));else if(t instanceof p)this.appendSegment(O.createSegment("M",t.start)),this.appendSegment(O.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof D))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(i=t.points.length,e=0;e<i;e++){var s=t.points[e];0===e?this.appendSegment(O.createSegment("M",s)):this.appendSegment(O.createSegment("L",s))}}else;};O.parse=function(t){if(!t)return new O;for(var e=new O,i=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),n=i.length,r=0;r<n;r++){var o=i[r].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=O.createSegment.apply(this,o);e.appendSegment(s)}return e},O.createSegment=function(t){var e=arguments;if(!t)throw new Error("Type must be provided.");var i=O.segmentTypes[t];if(!i)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,o=1;o<r;o++)n.push(e[o]);return x(i,n)},O.prototype={appendSegment:function(t){var e,i=this.segments,n=i.length,r=0!==n?i[n-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var o=t.length,s=0;s<o;s++){var a=t[s];e=this.prepareSegment(a,r,null),i.push(e),r=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,r,null),i.push(e)}},bbox:function(){var t,e=this.segments,i=e.length;if(0===i)return null;for(var n=0;n<i;n++){var r=e[n];if(r.isVisible){var o=r.bbox();t=t?t.union(o):o}}if(t)return t;var s=e[i-1];return new H(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,i=new O,n=0;n<e;n++){var r=t[n].clone();i.appendSegment(r)}return i},closestPoint:function(t,e){var i=this.closestPointT(t,e);return i?this.pointAtT(i):null},closestPointLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.closestPointT(t,n);return r?this.lengthAtT(r,n):0},closestPointNormalizedLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.closestPointLength(t,n);if(0===r)return 0;var o=this.length(n);return 0===o?0:r/o},closestPointT:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,l=0;l<n;l++){var c=i[l],g=s[l];if(c.isVisible){var h=c.closestPointT(t,{precision:o,subdivisions:g}),u=c.pointAtT(h),d=new B(u,t).squaredLength();d<a&&(r={segmentIndex:l,value:h},a=d)}}return r||{segmentIndex:n-1,value:1}},closestPointTangent:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,l=0;l<n;l++){var c=i[l],g=s[l];if(c.isDifferentiable()){var h=c.closestPointT(t,{precision:o,subdivisions:g}),u=c.pointAtT(h),d=new B(u,t).squaredLength();d<a&&(r=c.tangentAtT(h),a=d)}}return r||null},containsPoint:function(t,e){var i=this.toPolylines(e);if(!i)return!1;for(var n=i.length,r=0,o=0;o<n;o++){i[o].containsPoint(t)&&r++}return r%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.divideAtLength(r,n)},divideAtLength:function(t,e){var i=this.segments.length;if(0===i)return null;var n=!0;t<0&&(n=!1,t=-t);var r,o,s,a,l,c,g,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):e.segmentSubdivisions,d=0;for(r=0;r<i;r++){var f=n?r:i-1-r;o=this.getSegment(f);var p=u[f],I=o.length({precision:h,subdivisions:p});if(o.isDifferentiable()&&(l=o,c=f,t<=d+I)){a=f,s=o.divideAtLength((n?1:-1)*(t-d),{precision:h,subdivisions:p});break}d+=I}if(!l)return null;s||(a=c,g=n?1:0,s=l.divideAtT(g));var m=this.clone();m.replaceSegment(a,s);var A=a,v=a+1,C=a+2;s[0].isDifferentiable()||(m.removeSegment(A),v-=1,C-=1);var w=m.getSegment(v).start;m.insertSegment(v,O.createSegment("M",w)),C+=1,s[1].isDifferentiable()||(m.removeSegment(C-1),C-=1);var y=C-A-1;for(r=C;r<m.segments.length;r++){var b=this.getSegment(r-y);if("Z"===(o=m.getSegment(r)).type&&!b.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var N=O.createSegment("L",b.end);m.replaceSegment(r,N)}}return[new O(m.segments.slice(0,v)),new O(m.segments.slice(v))]},equals:function(t){if(!t)return!1;var e=this.segments,i=t.segments,n=e.length;if(i.length!==n)return!1;for(var r=0;r<n;r++){var o=e[r],s=i[r];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,i=e.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),i<=t||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,i=e.length,n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=[],o=0;o<i;o++){var s=e[o].getSubdivisions({precision:n});r.push(s)}return r},insertSegment:function(t,e){var i,n=this.segments,r=n.length;if(t<0&&(t=r+t+1),r<t||t<0)throw new Error("Index out of range.");var o=null,s=null;if(0!==r&&(s=1<=t?(o=n[t-1]).nextSegment:n[0]),Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var a=e.length,l=0;l<a;l++){var c=e[l];i=this.prepareSegment(c,o,s),n.splice(t+l,0,i),o=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,s),n.splice(t,0,i)}},intersectionWithLine:function(t,e){var i=null,n=this.toPolylines(e);if(!n)return null;for(var r=0,o=n.length;r<o;r++){var s=n[r],a=t.intersect(s);a&&(i||(i=[]),Array.isArray(a)?Array.prototype.push.apply(i,a):i.push(a))}return i},isDifferentiable:function(){for(var t=this.segments,e=t.length,i=0;i<e;i++){if(t[i].isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,i=e.length;if(0===i)return 0;for(var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=0,s=0;s<i;s++){var a=e[s],l=r[s];o+=a.length({subdivisions:l})}return o},lengthAtT:function(t,e){var i=this.segments,n=i.length;if(0===n)return 0;var r=t.segmentIndex;if(r<0)return 0;var o=t.value;n<=r?(r=n-1,o=1):o<0?o=0:1<o&&(o=1);for(var s,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,c=0,g=0;g<r;g++){var h=i[g];s=l[g],c+=h.length({precisison:a,subdivisions:s})}return h=i[r],s=l[r],c+=h.lengthAtT(o,{precisison:a,subdivisions:s})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.pointAtLength(r,n)},pointAtLength:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;if(0===t)return this.start.clone();var r=!0;t<0&&(r=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,l=0,c=0;c<n;c++){var g=r?c:n-1-c,h=i[g],u=a[g],d=h.length({precision:s,subdivisions:u});if(h.isVisible){if(t<=l+d)return h.pointAtLength((r?1:-1)*(t-l),{precision:s,subdivisions:u});o=h}l+=d}return o?r?o.end:o.start:i[n-1].end.clone()},pointAtT:function(t){var e=this.segments,i=e.length;if(0===i)return null;var n=t.segmentIndex;if(n<0)return e[0].pointAtT(0);if(i<=n)return e[i-1].pointAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[n].pointAtT(r)},PRECISION:3,prepareSegment:function(t,e,i){t.previousSegment=e,t.nextSegment=i,e&&(e.nextSegment=t),i&&(i.previousSegment=t);var n=t;return t.isSubpathStart&&(t.subpathStartSegment=t,n=i),n&&this.updateSubpathStartSegment(n),t},removeSegment:function(t){var e=this.segments,i=e.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),i<=t||t<0)throw new Error("Index out of range.");var n=e.splice(t,1)[0],r=n.previousSegment,o=n.nextSegment;r&&(r.nextSegment=o),o&&(o.previousSegment=r),n.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var i,n=this.segments,r=n.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),r<=t||t<0)throw new Error("Index out of range.");var o=n[t],s=o.previousSegment,a=o.nextSegment,l=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var c=e.length,g=0;g<c;g++){var h=e[g];i=this.prepareSegment(h,s,a),n.splice(t+g,0,i),s=i,l&&i.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,a),n.splice(t,1,i),l&&i.isSubpathStart&&(l=!1)}l&&a&&this.updateSubpathStartSegment(a)},scale:function(t,e,i){for(var n=this.segments,r=n.length,o=0;o<r;o++){n[o].scale(t,e,i)}return this},segmentAt:function(t,e){var i=this.segmentIndexAt(t,e);return i?this.getSegment(i):null},segmentAtLength:function(t,e){var i=this.segmentIndexAtLength(t,e);return i?this.getSegment(i):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.segmentIndexAtLength(r,n)},segmentIndexAtLength:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=null,l=0,c=0;c<n;c++){var g=r?c:n-1-c,h=i[g],u=s[g],d=h.length({precision:o,subdivisions:u});if(h.isVisible){if(t<=l+d)return g;a=g}l+=d}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},r=this.length(n)*t;return this.tangentAtLength(r,n)},tangentAtLength:function(t,e){var i=this.segments,n=i.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,l=0,c=0;c<n;c++){var g=r?c:n-1-c,h=i[g],u=a[g],d=h.length({precision:s,subdivisions:u});if(h.isDifferentiable()){if(t<=l+d)return h.tangentAtLength((r?1:-1)*(t-l),{precision:s,subdivisions:u});o=h}l+=d}if(o){var f=r?1:0;return o.tangentAtT(f)}return null},tangentAtT:function(t){var e=this.segments,i=e.length;if(0===i)return null;var n=t.segmentIndex;if(n<0)return e[0].tangentAtT(0);if(i<=n)return e[i-1].tangentAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[n].tangentAtT(r)},toPoints:function(t){var e=this.segments,i=e.length;if(0===i)return null;for(var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=[],s=[],a=0;a<i;a++){var l=e[a];if(l.isVisible){var c=r[a];if(0<c.length){var g=c.map(function(t){return t.start});Array.prototype.push.apply(s,g)}else s.push(l.start)}else 0<s.length&&(s.push(e[a-1].end),o.push(s),s=[])}return 0<s.length&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],i=this.toPoints(t);if(!i)return null;for(var n=0,r=i.length;n<r;n++)e.push(new D(i[n]));return e},toString:function(){for(var t=this.segments,e=t.length,i="",n=0;n<e;n++){i+=t[n].serialize()+" "}return i.trim()},translate:function(t,e){for(var i=this.segments,n=i.length,r=0;r<n;r++){i[r].translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,t=(e=t).nextSegment}},Object.defineProperty(O.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var n=t[i];if(n.isVisible)return n.start}return t[e-1].end}}),Object.defineProperty(O.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var i=e-1;0<=i;i--){var n=t[i];if(n.isVisible)return n.end}return t[e-1].end}});var E=function(t,e){if(!(this instanceof E))return new E(t,e);if("string"==typeof t){var i=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(i[0]),e=parseFloat(i[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};E.fromPolar=function(t,e,i){i=i&&new E(i)||new E(0,0);var n=L(t*g(e)),r=L(t*h(e)),o=C(A(e));return o<90?r=-r:o<180?(n=-n,r=-r):o<270&&(n=-n),new E(i.x+n,i.y+r)},E.random=function(t,e,i,n){return new E(m(t,e),m(i,n))},E.prototype={chooseClosest:function(t){var e=t.length;if(1===e)return new E(t[0]);for(var i=null,n=1/0,r=0;r<e;r++){var o=new E(t[r]),s=this.squaredDistance(o);s<n&&(i=o,n=s)}return i},adhereToRect:function(t){return t.containsPoint(this)||(this.x=P(G(this.x,t.x),t.x+t.width),this.y=P(G(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var i=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return i<0&&(i+=360),i},bearing:function(t){return new B(this,t).bearing()},changeInAngle:function(t,e,i){return this.clone().offset(-t,-e).theta(i)-this.theta(i)},clone:function(){return new E(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new E(this.x-(t||0),this.y-(e||0))},distance:function(t){return new B(this,t).length()},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var i=this.x,n=this.y;return new E((1-e)*i+e*t.x,(1-e)*n+e*t.y)},magnitude:function(){return Z(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return L(t.x-this.x)+L(t.y-this.y)},move:function(t,e){var i=y(new E(t).theta(this));return this.offset(g(i)*e,-h(i)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new E(t).move(this,this.distance(t))},rotate:function(t,e){t=t||new E(0,0),e=y(C(-e));var i=g(e),n=h(e),r=i*(this.x-t.x)-n*(this.y-t.y)+t.x,o=n*(this.x-t.x)+i*(this.y-t.y)+t.y;return this.x=r,this.y=o,this},round:function(t){var e=k(10,t||0);return this.x=a(this.x*e)/e,this.y=a(this.y*e)/e,this},scale:function(t,e,i){return i=i&&new E(i)||new E(0,0),this.x=i.x+t*(this.x-i.x),this.y=i.y+e*(this.y-i.y),this},snapToGrid:function(t,e){return this.x=I(this.x,t),this.y=I(this.y,e||t),this},squaredDistance:function(t){return new B(this,t).squaredLength()},theta:function(t){var e=-((t=new E(t)).y-this.y),i=t.x-this.x,n=u(e,i);return n<0&&(n=2*f+n),180*n/f},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new E(t)||new E(0,0);var e=this.x,i=this.y;return this.x=Z((e-t.x)*(e-t.x)+(i-t.y)*(i-t.y)),this.y=y(t.theta(new E(e,i))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new E(0,0).angleBetween(this,t)}},E.prototype.translate=E.prototype.offset;var D=function(t){return this instanceof D?"string"==typeof t?new D.parse(t):void(this.points=Array.isArray(t)?t.map(E):[]):new D(t)};D.parse=function(t){if(""===(t=t.trim()))return new D;for(var e=[],i=t.split(/\s*,\s*|\s+/),n=i.length,r=0;r<n;r+=2)e.push({x:+i[r],y:+i[r+1]});return new D(e)},D.prototype={bbox:function(){var t=1/0,e=-1/0,i=1/0,n=-1/0,r=this.points,o=r.length;if(0===o)return null;for(var s=0;s<o;s++){var a=r[s],l=a.x,c=a.y;l<t&&(t=l),e<l&&(e=l),c<i&&(i=c),n<c&&(n=c)}return new H(t,i,e-t,n-i)},clone:function(){var t=this.points,e=t.length;if(0===e)return new D;for(var i=[],n=0;n<e;n++){var r=t[n].clone();i.push(r)}return new D(i)},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,i=this.points,n=i.length;if(0===n)return 0;if(1===n)return 0;for(var r=1/0,o=0,s=n-1,a=0;a<s;a++){var l=new B(i[a],i[a+1]),c=l.length(),g=l.closestPointNormalizedLength(t),h=l.pointAt(g).squaredDistance(t);h<r&&(r=h,e=o+g*c),o+=c}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var i=this.length();return 0===i?0:e/i},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,i=e.length;if(0===i)return!1;for(var n=t.x,r=t.y,o=i-1,s=0,a=0;s<i;s++){var l=e[o],c=e[s];if(t.equals(l))return!0;var g=new B(l,c);if(g.containsPoint(t))return!0;if(r<=l.y&&r>c.y||r>l.y&&r<=c.y){var h=l.x-n>c.x-n?l.x-n:c.x-n;if(0<=h){var u=new E(n+h,r),d=new B(t,u);g.intersect(d)&&a++}}o=s}return a%2==1},convexHull:function(){var t,e,i,n=this.points,r=n.length;if(0===r)return new D;for(t=0;t<r;t++)void 0===i?i=n[t]:n[t].y<i.y?i=n[t]:n[t].y===i.y&&n[t].x>i.x&&(i=n[t]);var o=[];for(t=0;t<r;t++){var s=i.theta(n[t]);0===s&&(s=360);var a=[n[t],t,s];o.push(a)}if(o.sort(function(t,e){var i=t[2]-e[2];return 0===i&&(i=e[1]-t[1]),i}),2<o.length){var l=o[o.length-1];o.unshift(l)}for(var c,g,h,u,d,f,p,I={},m=[];0!==o.length;)if(g=(c=o.pop())[0],!I.hasOwnProperty(c[0]+"@@"+c[1]))for(var A=!1;!A;)if(m.length<2)m.push(c),A=!0;else{u=(h=m.pop())[0];var v=(f=(d=m.pop())[0]).cross(u,g);if(v<0)m.push(d),m.push(h),m.push(c),A=!0;else if(0===v){var C=u.angleBetween(f,g);L(C-180)<1e-10?(I[h[0]+"@@"+h[1]]=u,m.push(d)):u.equals(g)||f.equals(u)?(I[h[0]+"@@"+h[1]]=u,m.push(d)):L((C+1)%360-1)<1e-10&&(m.push(d),o.push(h))}else I[h[0]+"@@"+h[1]]=u,m.push(d)}2<m.length&&m.pop();var w=-1;for(e=m.length,t=0;t<e;t++){var y=m[t][1];(void 0===p||y<p)&&(p=y,w=t)}var b=[];if(0<w){var N=m.slice(w),M=m.slice(0,w);b=N.concat(M)}else b=m;var x=[];for(e=b.length,t=0;t<e;t++)x.push(b[t][0]);return new D(x)},equals:function(t){if(!t)return!1;var e=this.points,i=t.points,n=e.length;if(i.length!==n)return!1;for(var r=0;r<n;r++){var o=e[r],s=t.points[r];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new B(t),i=[],n=this.points,r=0,o=n.length-1;r<o;r++){var s=n[r],a=n[r+1],l=new B(s,a),c=e.intersectionWithLine(l);c&&i.push(c[0])}return 0<i.length?i:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var i=e-1,n=0;n<i;n++){var r=t[n],o=t[n+1];if(new B(r,o).isDifferentiable())return!0}return!1},length:function(){var t=this.points,e=t.length;if(0===e)return 0;for(var i=0,n=e-1,r=0;r<n;r++)i+=t[r].distance(t[r+1]);return i},pointAt:function(t){var e=this.points,i=e.length;if(0===i)return null;if(1===i)return e[0].clone();if(t<=0)return e[0].clone();if(1<=t)return e[i-1].clone();var n=this.length()*t;return this.pointAtLength(n)},pointAtLength:function(t){var e=this.points,i=e.length;if(0===i)return null;if(1===i)return e[0].clone();var n=!0;t<0&&(n=!1,t=-t);for(var r=0,o=i-1,s=0;s<o;s++){var a=n?s:o-1-s,l=e[a],c=e[a+1],g=new B(l,c),h=l.distance(c);if(t<=r+h)return g.pointAtLength((n?1:-1)*(t-r));r+=h}return(n?e[i-1]:e[0]).clone()},scale:function(t,e,i){var n=this.points,r=n.length;if(0===r)return this;for(var o=0;o<r;o++)n[o].scale(t,e,i);return this},simplify:function(t){void 0===t&&(t={});var e=this.points;if(e.length<3)return this;for(var i=t.threshold||0,n=0;e[n+2];){var r=n+1,o=n+2,s=e[n],a=e[r],l=e[o];new B(s,l).closestPoint(a).distance(a)<=i?e.splice(r,1):n+=1}return this},tangentAt:function(t){var e=this.points.length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),1<t&&(t=1);var i=this.length()*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.points,i=e.length;if(0===i)return null;if(1===i)return null;var n,r=!0;t<0&&(r=!1,t=-t);for(var o=0,s=i-1,a=0;a<s;a++){var l=r?a:s-1-a,c=e[l],g=e[l+1],h=new B(c,g),u=c.distance(g);if(h.isDifferentiable()){if(t<=o+u)return h.tangentAtLength((r?1:-1)*(t-o));n=h}o+=u}if(n){var d=r?1:0;return n.tangentAt(d)}return null},toString:function(){return this.points+""},translate:function(t,e){var i=this.points,n=i.length;if(0===n)return this;for(var r=0;r<n;r++)i[r].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var i="",n=0;n<e;n++){var r=t[n];i+=r.x+","+r.y+" "}return i.trim()}},Object.defineProperty(D.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(D.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});var H=function(t,e,i,n){if(!(this instanceof H))return new H(t,e,i,n);Object(t)===t&&(e=t.y,i=t.width,n=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===i?0:i,this.height=void 0===n?0:n};H.fromEllipse=function(t){return t=new w(t),new H(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},H.prototype={bbox:function(t){if(!t)return this.clone();var e=y(t),i=L(h(e)),n=L(g(e)),r=this.width*n+this.height*i,o=this.width*i+this.height*n;return new H(this.x+(this.width-r)/2,this.y+(this.height-o)/2,r,o)},bottomLeft:function(){return new E(this.x,this.y+this.height)},bottomLine:function(){return new B(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new E(this.x+this.width/2,this.y+this.height)},center:function(){return new E(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new H(this)},containsPoint:function(t){return(t=new E(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new H(this).normalize(),i=new H(t).normalize(),n=e.width,r=e.height,o=i.width,s=i.height;if(!(n&&r&&o&&s))return!1;var a=e.x,l=e.y,c=i.x,g=i.y;return o+=c,n+=a,s+=g,r+=l,a<=c&&o<=n&&l<=g&&s<=r},corner:function(){return new E(this.x+this.width,this.y+this.height)},equals:function(t){var e=new H(this).normalize(),i=new H(t).normalize();return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),i=this.corner(),n=t.origin(),r=t.corner();if(r.x<=e.x||r.y<=e.y||n.x>=i.x||n.y>=i.y)return null;var o=G(e.x,n.x),s=G(e.y,n.y);return new H(o,s,P(i.x,r.x)-o,P(i.y,r.y)-s)},intersectionWithLine:function(t){var e,i,n=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],r=[],o=[],s=n.length;for(i=0;i<s;i++)null!==(e=t.intersect(n[i]))&&o.indexOf(e.toString())<0&&(r.push(e),o.push(e.toString()));return 0<r.length?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new E(t);var i,n=new E(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(n,e);for(var r=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new B(n,t),s=r.length-1;0<=s;--s){var a=r[s].intersection(o);if(null!==a){i=a;break}}return i&&e&&i.rotate(n,-e),i},leftLine:function(){return new B(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new E(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var i,n,r,o,s,a,l,c;t=new H(t),e||(e=t.center());var g=e.x,h=e.y;i=n=r=o=s=a=l=c=1/0;var u=t.topLeft();u.x<g&&(i=(this.x-g)/(u.x-g)),u.y<h&&(s=(this.y-h)/(u.y-h));var d=t.bottomRight();d.x>g&&(n=(this.x+this.width-g)/(d.x-g)),d.y>h&&(a=(this.y+this.height-h)/(d.y-h));var f=t.topRight();f.x>g&&(r=(this.x+this.width-g)/(f.x-g)),f.y<h&&(l=(this.y-h)/(f.y-h));var p=t.bottomLeft();return p.x<g&&(o=(this.x-g)/(p.x-g)),p.y>h&&(c=(this.y+this.height-h)/(p.y-h)),{sx:P(i,n,r,o),sy:P(s,a,l,c)}},maxRectUniformScaleToFit:function(t,e){var i=this.maxRectScaleToFit(t,e);return P(i.sx,i.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,i=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,n=-this.height),this.x=t,this.y=e,this.width=i,this.height=n,this},offset:function(t,e){return E.prototype.offset.call(this,t,e)},origin:function(){return new E(this.x,this.y)},pointNearestToPoint:function(t){if(t=new E(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new E(this.x+this.width,t.y);case"left":return new E(this.x,t.y);case"bottom":return new E(t.x,this.y+this.height);case"top":return new E(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new B(this.topRight(),this.bottomRight())},rightMiddle:function(){return new E(this.x+this.width,this.y+this.height/2)},round:function(t){var e=k(10,t||0);return this.x=a(this.x*e)/e,this.y=a(this.y*e)/e,this.width=a(this.width*e)/e,this.height=a(this.height*e)/e,this},scale:function(t,e,i){return i=this.origin().scale(t,e,i),this.x=i.x,this.y=i.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new E(t)).x-this.x,i=this.x+this.width-t.x,n=t.y-this.y,r=e,o="left";return i<r&&(r=i,o="right"),n<r&&(r=n,o="top"),this.y+this.height-t.y<r&&(o="bottom"),o},snapToGrid:function(t,e){var i=this.origin().snapToGrid(t,e),n=this.corner().snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=n.x-i.x,this.height=n.y-i.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new B(this.topLeft(),this.topRight())},topMiddle:function(){return new E(this.x+this.width/2,this.y)},topRight:function(){return new E(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){var e=new H(t),i=this.x,n=this.y,r=this.width,o=this.height,s=e.x,a=e.y,l=e.width,c=e.height,g=e.x=P(i,s),h=e.y=P(n,a);return e.width=G(i+r,s+l)-g,e.height=G(n+o,a+c)-h,e}},H.prototype.bottomRight=H.prototype.corner,H.prototype.topLeft=H.prototype.origin,H.prototype.translate=H.prototype.offset;var C=function(t){return t%360+(t<0?360:0)},I=function(t,e){return e*a(t/e)},A=function(t){return 180*t/f%360},y=function(t,e){return(t=(e=e||!1)?t:t%360)*f/180},m=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){var i=t;t=e,e=i}return d(o.random()*(e-t+1)+t)},v=w,b=B,N=E,M=H;function x(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}function z(t){var e,i,n=arguments,r=[];for(i=arguments.length,e=1;e<i;e++)r.push(n[e]);if(!t)throw new Error("Missing a parent object.");var o=Object.create(t);for(i=r.length,e=0;e<i;e++){var s,a,l=r[e];for(a in l)l.hasOwnProperty(a)&&(delete o[a],s=Object.getOwnPropertyDescriptor(l,a),Object.defineProperty(o,a,s))}return o}var T={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return 1<=t?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(T,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(T,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(T,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var j=function(){for(var t,e,i=arguments,n=[],r=arguments.length,o=0;o<r;o++)n.push(i[o]);if(!(this instanceof j))return x(j,n);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof B){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new E(+n[0],+n[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=2)s=n.slice(o,o+2),t.push(x(j,s));return t}if(1===r)return this.end=new E(n[0]),this;for(t=[],o=0;o<r;o+=1)e=n[o],t.push(new j(e));return t},Y={clone:function(){return new j(this.end)},divideAt:function(t){var e=new B(this.start,this.end).divideAt(t);return[new j(e[0]),new j(e[1])]},divideAtLength:function(t){var e=new B(this.start,this.end).divideAtLength(t);return[new j(e[0]),new j(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},scale:function(t,e,i){return this.end.scale(t,e,i),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Y,"type",{configurable:!0,enumerable:!0,value:"L"}),j.prototype=z(T,B.prototype,Y);var R=function(){for(var t,e,i=arguments,n=[],r=arguments.length,o=0;o<r;o++)n.push(i[o]);if(!(this instanceof R))return x(R,n);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(n[0]instanceof p){if(1===r)return this.controlPoint1=n[0].controlPoint1.clone(),this.controlPoint2=n[0].controlPoint2.clone(),this.end=n[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(6===r)return this.controlPoint1=new E(+n[0],+n[1]),this.controlPoint2=new E(+n[2],+n[3]),this.end=new E(+n[4],+n[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=6)s=n.slice(o,o+6),t.push(x(R,s));return t}if(3===r)return this.controlPoint1=new E(n[0]),this.controlPoint2=new E(n[1]),this.end=new E(n[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],o=0;o<r;o+=3)e=n.slice(o,o+3),t.push(x(R,e));return t},W={clone:function(){return new R(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var i=new p(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new R(i[0]),new R(i[1])]},divideAtLength:function(t,e){var i=new p(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new R(i[0]),new R(i[1])]},divideAtT:function(t){var e=new p(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new R(e[0]),new R(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,i=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(n))},scale:function(t,e,i){return this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,i=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+i.x+" "+i.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(W,"type",{configurable:!0,enumerable:!0,value:"C"}),R.prototype=z(T,p.prototype,W);var U=function(){for(var t,e,i=arguments,n=[],r=arguments.length,o=0;o<r;o++)n.push(i[o]);if(!(this instanceof U))return x(U,n);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof B){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(n[0]instanceof p){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new E(+n[0],+n[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var s;for(t=[],o=0;o<r;o+=2)s=n.slice(o,o+2),0===o?t.push(x(U,s)):t.push(x(j,s));return t}if(1===r)return this.end=new E(n[0]),this;for(t=[],o=0;o<r;o+=1)e=n[o],0===o?t.push(new U(e)):t.push(new j(e));return t},X={bbox:function(){return null},clone:function(){return new U(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},scale:function(t,e,i){return this.end.scale(t,e,i),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(X,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(X,"type",{configurable:!0,enumerable:!0,value:"M"}),U.prototype=z(T,X);var F=function(){for(var t=arguments,e=[],i=arguments.length,n=0;n<i;n++)e.push(t[n]);if(!(this instanceof F))return x(F,e);if(0<i)throw new Error("Closepath constructor expects no arguments.");return this},V={clone:function(){return new F},divideAt:function(t){var e=new B(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new j(e[0]):this.clone(),new j(e[1])]},divideAtLength:function(t){var e=new B(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new j(e[0]):this.clone(),new j(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(V,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(V,"type",{configurable:!0,enumerable:!0,value:"Z"}),F.prototype=z(T,B.prototype,V);var J=O.segmentTypes={L:j,C:R,M:U,Z:F,z:F};O.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(J).join("")+",.]*$"),O.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};var _,Q,K={bezier:t,Curve:p,Ellipse:w,Line:B,Path:O,Point:E,Polyline:D,Rect:H,scale:{linear:function(t,e,i){var n=t[1]-t[0],r=e[1]-e[0];return(i-t[0])/n*r+e[0]||0}},normalizeAngle:C,snapToGrid:I,toDeg:A,toRad:y,random:m,ellipse:v,line:b,point:N,rect:M},q=function(){if(!("object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))))return function(){throw new Error("SVG is required to use Vectorizer.")};var z={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},t=Math,p=t.PI,o=t.atan2,s=t.sqrt,h=t.min,u=t.max,I=t.cos,m=t.sin,T=function(t,e,i){if(!(this instanceof T))return T.apply(Object.create(T.prototype),arguments);if(t){if(T.isV(t)&&(t=t.node),e=e||{},T.isString(t)){if("svg"===t.toLowerCase())t=T.createSvgDocument();else if("<"===t[0]){var n=T.createSvgDocument(t);if(1<n.childNodes.length){var r,o,s=[];for(r=0,o=n.childNodes.length;r<o;r++){var a=n.childNodes[r];s.push(new T(document.importNode(a,!0)))}return s}t=document.importNode(n.firstChild,!0)}else t=document.createElementNS(z.svg,t);T.ensureId(t)}return this.node=t,this.setAttributes(e),i&&this.append(i),this}},e=T.prototype;function j(t,e,i){i||(i={});for(var n=i.includeAnnotationIndices,r=i.eol,o=i.lineHeight,s=i.baseSize,a=0,l={},c=e.length-1,g=0;g<=c;g++){var h=e[g],u=null;if(T.isObject(h)){var d=h.attrs,f=T("tspan",d),p=f.node,I=h.t;r&&g===c&&(I+=r),p.textContent=I;var m=d.class;m&&f.addClass(m),n&&f.attr("annotations",h.annotations),void 0===(u=parseFloat(d["font-size"]))&&(u=s),u&&a<u&&(a=u)}else r&&g===c&&(h+=r),p=document.createTextNode(h||" "),s&&a<s&&(a=s);t.appendChild(p)}return a&&(l.maxFontSize=a),o?l.lineHeight=o:a&&(l.lineHeight=1.2*a),l}Object.defineProperty(e,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),e.getTransformToElement=function(t){var e=this.node;if(T.isSVGGraphicsElement(t)&&T.isSVGGraphicsElement(e)){var i=T.toNode(t).getScreenCTM(),n=e.getScreenCTM();if(i&&n)return i.inverse().multiply(n)}return T.createSVGMatrix()},e.transform=function(t,e){var i=this.node;if(T.isUndefined(t))return T.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",T.matrixToTransformString(t));var n=T.createSVGTransform(t);return i.transform.baseVal.appendItem(n),this},e.translate=function(t,e,i){i=i||{},e=e||0;var n=this.attr("transform")||"",r=T.parseTransformString(n);if(n=r.value,T.isUndefined(t))return r.translate;n=n.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(i.absolute?t:r.translate.tx+t)+","+(i.absolute?e:r.translate.ty+e)+")";return this.attr("transform",(o+" "+n).trim()),this},e.rotate=function(t,e,i,n){n=n||{};var r=this.attr("transform")||"",o=T.parseTransformString(r);if(r=o.value,T.isUndefined(t))return o.rotate;r=r.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s="rotate("+(n.absolute?t:o.rotate.angle+t)+(void 0!==e&&void 0!==i?","+e+","+i:"")+")";return this.attr("transform",(r+" "+s).trim()),this},e.scale=function(t,e){e=T.isUndefined(e)?t:e;var i=this.attr("transform")||"",n=T.parseTransformString(i);if(i=n.value,T.isUndefined(t))return n.scale;i=i.replace(/scale\([^)]*\)/g,"").trim();var r="scale("+t+","+e+")";return this.attr("transform",(i+" "+r).trim()),this},e.bbox=function(t,e){var i,n=this.node,r=n.ownerSVGElement;if(!r)return new H(0,0,0,0);try{i=n.getBBox()}catch(t){i={x:n.clientLeft,y:n.clientTop,width:n.clientWidth,height:n.clientHeight}}if(t)return new H(i);var o=this.getTransformToElement(e||r);return T.transformRect(i,o)},e.getBBox=function(t){var e,i={},n=this.node;if(!n.ownerSVGElement||!T.isSVGGraphicsElement(n))return new H(0,0,0,0);if(t&&(t.target&&(i.target=T.toNode(t.target)),t.recursive&&(i.recursive=t.recursive)),i.recursive){var r=this.children(),o=r.length;if(0===o)return this.getBBox({target:i.target,recursive:!1});i.target||(i.target=this);for(var s=0;s<o;s++){var a,l=r[s];a=0===l.children().length?l.getBBox({target:i.target,recursive:!1}):l.getBBox({target:i.target,recursive:!0}),e=e?e.union(a):a}return e}try{e=n.getBBox()}catch(t){e={x:n.clientLeft,y:n.clientTop,width:n.clientWidth,height:n.clientHeight}}if(i.target){var c=this.getTransformToElement(i.target);return T.transformRect(e,c)}return new H(e)};var L=/em$/;function Z(t,e){var i=parseFloat(t);return L.test(t)?i*e:i}e.text=function(t,e){if(t&&"string"!=typeof t)throw new Error("Vectorizer: text() expects the first argument to be a string.");t=T.sanitizeText(t),e||(e={});var i=e.displayEmpty,n=e.eol,r=e.textPath,o=e.textVerticalAnchor,s="middle"===o||"bottom"===o||"top"===o,a=e.x;void 0===a&&(a=this.attr("x")||0);var l=e.includeAnnotationIndices,c=e.annotations;c&&!T.isArray(c)&&(c=[c]);var g=e.lineHeight,h="auto"===g,u=h?"1.5em":g||"1em";this.empty(),this.attr({"xml:space":"preserve",display:t||i?null:"none"});var d=parseFloat(this.attr("font-size"));d||(d=16,(s||c)&&this.attr("font-size",d));var f,p=document;f=r?("string"==typeof r&&(r={d:r}),function(t,e){t||(t={});var i=T("textPath"),n=t.d;if(n&&void 0===t["xlink:href"]){var r=T("path").attr("d",n).appendTo(e.defs());i.attr("xlink:href","#"+r.id)}return T.isObject(t)&&i.attr(t),i.node}(r,this)):p.createDocumentFragment();for(var I,m=0,A=t.split("\n"),v=[],C=0,w=A.length-1;C<=w;C++){var y,b=u,N="v-line",M=p.createElementNS(z.svg,"tspan"),x=A[C];if(x)if(c){var S=(y=j(M,T.annotateString(x,c,{offset:-m,includeAnnotationIndices:l}),{includeAnnotationIndices:l,eol:C!==w&&n,lineHeight:h?null:u,baseSize:d})).lineHeight;S&&h&&0!==C&&(b=S),0===C&&(I=.8*y.maxFontSize)}else n&&C!==w&&(x+=n),M.textContent=x;else{M.textContent="-",N+=" v-empty-line";var k=M.style;k.fillOpacity=0,k.strokeOpacity=0,c&&(y={})}y&&v.push(y),0<C&&M.setAttribute("dy",b),(0<C||r)&&M.setAttribute("x",a),M.className.baseVal=N,f.appendChild(M),m+=x.length+1}if(s)if(c)b=function(t,e,i,n){if(!Array.isArray(e))return 0;var r=e.length;if(!r)return 0;for(var o=e[0],s=Z(o.maxFontSize,i)||i,a=0,l=Z(n,i),c=1;c<r;c++)a+=Z((o=e[c]).lineHeight,i)||l;var g,h=Z(o.maxFontSize,i)||i;switch(t){case"middle":g=s/2-.15*h-a/2;break;case"bottom":g=-.25*h-a;break;default:case"top":g=.8*s}return g}(o,v,d,u);else if("top"===o)b="0.8em";else{var D;switch(0<w?(D=parseFloat(u)||1,D*=w,L.test(u)||(D/=d)):D=0,o){case"middle":b=.3-D/2+"em";break;case"bottom":b=-D-.3+"em"}}else 0===o?b="0em":o?b=o:(b=0,null===this.attr("y")&&this.attr("y",I||"0.8em"));return f.firstChild.setAttribute("dy",b),this.append(f),this},e.removeAttr=function(t){var e=T.qualifyAttr(t),i=this.node;return e.ns?i.hasAttributeNS(e.ns,e.local)&&i.removeAttributeNS(e.ns,e.local):i.hasAttribute(t)&&i.removeAttribute(t),this},e.attr=function(t,e){if(T.isUndefined(t)){for(var i=this.node.attributes,n={},r=0;r<i.length;r++)n[i[r].name]=i[r].value;return n}if(T.isString(t)&&T.isUndefined(e))return this.node.getAttribute(t);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,e);return this},e.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",T.normalizePathData(this.attr("d"))),this},e.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},e.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},e.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},e.append=function(t){T.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++)this.node.appendChild(T.toNode(t[e]));return this},e.prepend=function(t){var e=this.node.firstChild;return e?T(e).before(t):this.append(t)},e.before=function(t){var e=this.node,i=e.parentNode;if(i){T.isArray(t)||(t=[t]);for(var n=0,r=t.length;n<r;n++)i.insertBefore(T.toNode(t[n]),e)}return this},e.appendTo=function(t){return T.toNode(t).appendChild(this.node),this},e.svg=function(){return this.node instanceof window.SVGSVGElement?this:T(this.node.ownerSVGElement)},e.tagName=function(){return this.node.tagName.toUpperCase()},e.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?T(e):T("defs").appendTo(t)},e.clone=function(){var t=T(this.node.cloneNode(!0));return t.node.id=T.uniqueId(),t},e.findOne=function(t){var e=this.node.querySelector(t);return e?T(e):void 0},e.find=function(t){var e=[],i=this.node.querySelectorAll(t);if(i)for(var n=0;n<i.length;n++)e.push(T(i[n]));return e},e.children=function(){for(var t=this.node.childNodes,e=[],i=0;i<t.length;i++){1===t[i].nodeType&&e.push(T(t[i]))}return e},e.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},e.findParentByClass=function(t,e){for(var i=this.node.ownerSVGElement,n=this.node.parentNode;n&&n!==e&&n!==i;){var r=T(n);if(r.hasClass(t))return r;n=n.parentNode}return null},e.contains=function(t){var e=this.node,i=T.toNode(t),n=i&&i.parentNode;return e===n||!!(n&&1===n.nodeType&&16&e.compareDocumentPosition(n))},e.toLocalPoint=function(t,e){var i=this.svg().node,n=i.createSVGPoint();n.x=t,n.y=e;try{var r=n.matrixTransform(i.getScreenCTM().inverse()),o=this.getTransformToElement(i).inverse()}catch(t){return n}return r.matrixTransform(o)},e.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},e.translateAndAutoOrient=function(t,e,i){t=new E(t),e=new E(e),i||(i=this.svg());var n=this.scale();this.attr("transform","");var r=this.getBBox({target:i}).scale(n.sx,n.sy),o=T.createSVGTransform();o.setTranslate(-r.x-r.width/2,-r.y-r.height/2);var s=T.createSVGTransform(),a=t.angleBetween(e,t.clone().offset(1,0));a&&s.setRotate(a,0,0);var l=T.createSVGTransform(),c=t.clone().move(e,r.width/2);l.setTranslate(2*t.x-c.x,2*t.y-c.y);var g=this.getTransformToElement(i),h=T.createSVGTransform();return h.setMatrix(l.matrix.multiply(s.matrix.multiply(o.matrix.multiply(g.scale(n.sx,n.sy))))),this.attr("transform",T.matrixToTransformString(h.matrix)),this},e.animateAlongPath=function(t,e){e=T.toNode(e);var i=T.ensureId(e),n=T("animateMotion",t),r=T("mpath",{"xlink:href":"#"+i});n.append(r),this.append(n);try{n.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=n.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),l=0,c=a.length;l<c;l++){var g=a[l],h=new Animator(o,g,l);animators.push(h),(o.animators[l]=h).register()}}}return this},e.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},e.addClass=function(t){if(t&&!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},e.removeClass=function(t){if(t&&this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},e.toggleClass=function(t,e){return(T.isUndefined(e)?this.hasClass(t):!e)?this.removeClass(t):this.addClass(t),this},e.sample=function(t){t=t||1;for(var e,i=this.node,n=i.getTotalLength(),r=[],o=0;o<n;)e=i.getPointAtLength(o),r.push({x:e.x,y:e.y,distance:o}),o+=t;return r},e.convertToPath=function(){var t=T("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},e.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return T.convertLineToPathData(this.node);case"POLYGON":return T.convertPolygonToPathData(this.node);case"POLYLINE":return T.convertPolylineToPathData(this.node);case"ELLIPSE":return T.convertEllipseToPathData(this.node);case"CIRCLE":return T.convertCircleToPathData(this.node);case"RECT":return T.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},T.prototype.toGeometryShape=function(){var t,e,i,n,r,o,s,a,l,c,g,h,u,d,f;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,i=parseFloat(this.attr("width"))||0,n=parseFloat(this.attr("height"))||0,new H(t,e,i,n);case"CIRCLE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new w({x:r,y:o},s,s);case"ELLIPSE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,l=parseFloat(this.attr("ry"))||0,new w({x:r,y:o},a,l);case"POLYLINE":return c=T.getPointsFromSvgNode(this),new D(c);case"POLYGON":return 1<(c=T.getPointsFromSvgNode(this)).length&&c.push(c[0]),new D(c);case"PATH":return g=this.attr("d"),O.isDataSupported(g)||(g=T.normalizePathData(g)),new O(g);case"LINE":return h=parseFloat(this.attr("x1"))||0,d=parseFloat(this.attr("y1"))||0,u=parseFloat(this.attr("x2"))||0,f=parseFloat(this.attr("y2"))||0,new B({x:h,y:d},{x:u,y:f})}return this.getBBox()},e.findIntersection=function(t,e){var i=this.svg().node;e=e||i;var n=this.getBBox({target:e}),r=n.center();if(n.intersectionWithLineFromCenterToPoint(t)){var o,s=this.tagName();if("RECT"===s){var a=new H(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),l=this.getTransformToElement(e),c=T.decomposeMatrix(l),g=i.createSVGTransform();g.setRotate(-c.rotation,r.x,r.y);var h=T.transformRect(a,g.matrix.multiply(l));o=new H(h).intersectionWithLineFromCenterToPoint(t,c.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var u,d,f,p,I,m=("PATH"===s?this:this.convertToPath()).sample(),A=1/0,v=[];for(u=0;u<m.length;u++)d=m[u],f=(f=T.createSVGPoint(d.x,d.y)).matrixTransform(this.getTransformToElement(e)),(I=(d=new E(f)).distance(r)+(p=1.1*d.distance(t)))<A?(A=I,v=[{sample:d,refDistance:p}]):I<A+1&&v.push({sample:d,refDistance:p});v.sort(function(t,e){return t.refDistance-e.refDistance}),v[0]&&(o=v[0].sample)}return o}},e.setAttribute=function(t,e){var i=this.node;if(null===e)return this.removeAttr(t),this;var n=T.qualifyAttr(t);return n.ns?i.setAttributeNS(n.ns,t,e):"id"===t?i.id=e:i.setAttribute(t,e),this},T.createSvgDocument=function(t){if(t){var e='<svg xmlns="'+z.svg+'" xmlns:xlink="'+z.xlink+'" version="1.1">'+t+"</svg>";return T.parseXML(e,{async:!1}).documentElement}var i=document.createElementNS(z.svg,"svg");return i.setAttributeNS(z.xmlns,"xmlns:xlink",z.xlink),i.setAttribute("version","1.1"),i},T.idCounter=0,T.uniqueId=function(){return"v-"+ ++T.idCounter},T.toNode=function(t){return T.isV(t)?t.node:t.nodeName&&t||t[0]},T.ensureId=function(t){return(t=T.toNode(t)).id||(t.id=T.uniqueId())},T.sanitizeText=function(t){return(t||"").replace(/ /g," ")},T.isUndefined=function(t){return void 0===t},T.isString=function(t){return"string"==typeof t},T.isObject=function(t){return t&&"object"==typeof t},T.isArray=Array.isArray,T.parseXML=function(t,e){var i;e=e||{};try{var n=new DOMParser;T.isUndefined(e.async)||(n.async=e.async),i=n.parseFromString(t,"text/xml")}catch(t){i=void 0}if(!i||i.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return i},T.qualifyAttr=function(t){if(-1===t.indexOf(":"))return{ns:null,local:t};var e=t.split(":");return{ns:z[e[0]],local:e[1]}},T.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,T.transformSeparatorRegex=/[ ,]+/,T.transformationListRegex=/^(\w+)\((.*)\)/,T.transformStringToMatrix=function(t){var e=T.createSVGMatrix(),i=t&&t.match(T.transformRegex);if(!i)return e;for(var n=0,r=i.length;n<r;n++){var o=i[n].match(T.transformationListRegex);if(o){var s,a,l,c,g,h=T.createSVGMatrix(),u=o[2].split(T.transformSeparatorRegex);switch(o[1].toLowerCase()){case"scale":s=parseFloat(u[0]),a=void 0===u[1]?s:parseFloat(u[1]),h=h.scaleNonUniform(s,a);break;case"translate":l=parseFloat(u[0]),c=parseFloat(u[1]),h=h.translate(l,c);break;case"rotate":g=parseFloat(u[0]),l=parseFloat(u[1])||0,c=parseFloat(u[2])||0,h=0!==l||0!==c?h.translate(l,c).rotate(g).translate(-l,-c):h.rotate(g);break;case"skewx":g=parseFloat(u[0]),h=h.skewX(g);break;case"skewy":g=parseFloat(u[0]),h=h.skewY(g);break;case"matrix":h.a=parseFloat(u[0]),h.b=parseFloat(u[1]),h.c=parseFloat(u[2]),h.d=parseFloat(u[3]),h.e=parseFloat(u[4]),h.f=parseFloat(u[5]);break;default:continue}e=e.multiply(h)}}return e},T.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},T.parseTransformString=function(t){var e,i,n;if(t){var r=T.transformSeparatorRegex;if(0<=t.trim().indexOf("matrix")){var o=T.transformStringToMatrix(t),s=T.decomposeMatrix(o);e=[s.translateX,s.translateY],n=[s.scaleX,s.scaleY],i=[s.rotation];var a=[];0===e[0]&&0===e[1]||a.push("translate("+e+")"),1===n[0]&&1===n[1]||a.push("scale("+n+")"),0!==i[0]&&a.push("rotate("+i+")"),t=a.join(" ")}else{var l=t.match(/translate\((.*?)\)/);l&&(e=l[1].split(r));var c=t.match(/rotate\((.*?)\)/);c&&(i=c[1].split(r));var g=t.match(/scale\((.*?)\)/);g&&(n=g[1].split(r))}}var h=n&&n[0]?parseFloat(n[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:i&&i[0]?parseInt(i[0],10):0,cx:i&&i[1]?parseInt(i[1],10):void 0,cy:i&&i[2]?parseInt(i[2],10):void 0},scale:{sx:h,sy:n&&n[1]?parseFloat(n[1]):h}}},T.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},T.decomposeMatrix=function(t){var e=T.deltaTransformPoint(t,{x:0,y:1}),i=T.deltaTransformPoint(t,{x:1,y:0}),n=180/p*o(e.y,e.x)-90,r=180/p*o(i.y,i.x);return{translateX:t.e,translateY:t.f,scaleX:s(t.a*t.a+t.b*t.b),scaleY:s(t.c*t.c+t.d*t.d),skewX:n,skewY:r,rotation:n}},T.matrixToScale=function(t){var e,i,n,r;return t?(e=T.isUndefined(t.a)?1:t.a,r=T.isUndefined(t.d)?1:t.d,i=t.b,n=t.c):e=r=1,{sx:i?s(e*e+i*i):e,sy:n?s(n*n+r*r):r}},T.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=T.deltaTransformPoint(t,e)),{angle:C(A(o(e.y,e.x))-90)}},T.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},T.isV=function(t){return t instanceof T},T.isVElement=T.isV,T.isSVGGraphicsElement=function(t){return!!t&&((t=T.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM)};var d=T("svg").node;return T.createSVGMatrix=function(t){var e=d.createSVGMatrix();for(var i in t)e[i]=t[i];return e},T.createSVGTransform=function(t){return T.isUndefined(t)?d.createSVGTransform():(t instanceof SVGMatrix||(t=T.createSVGMatrix(t)),d.createSVGTransformFromMatrix(t))},T.createSVGPoint=function(t,e){var i=d.createSVGPoint();return i.x=t,i.y=e,i},T.transformRect=function(t,e){var i=d.createSVGPoint();i.x=t.x,i.y=t.y;var n=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y;var r=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y+t.height;var o=i.matrixTransform(e);i.x=t.x,i.y=t.y+t.height;var s=i.matrixTransform(e),a=h(n.x,r.x,o.x,s.x),l=u(n.x,r.x,o.x,s.x),c=h(n.y,r.y,o.y,s.y),g=u(n.y,r.y,o.y,s.y);return new H(a,c,l-a,g-c)},T.transformPoint=function(t,e){return new E(T.createSVGPoint(t.x,t.y).matrixTransform(e))},T.transformLine=function(t,e){return new B(T.transformPoint(t.start,e),T.transformPoint(t.end,e))},T.transformPolyline=function(t,e){var i=t instanceof D?t.points:t;T.isArray(i)||(i=[]);for(var n=[],r=0,o=i.length;r<o;r++)n[r]=T.transformPoint(i[r],e);return new D(n)},T.styleToObject=function(t){for(var e={},i=t.split(";"),n=0;n<i.length;n++){var r=i[n].split("=");e[r[0].trim()]=r[1].trim()}return e},T.createSlicePathData=function(t,e,i,n){var r=2*p-1e-6,o=t,s=e,a=i,l=n,c=(l<a&&(c=a,a=l,l=c),l-a),g=c<p?"0":"1",h=I(a),u=m(a),d=I(l),f=m(l);return r<=c?o?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":o?"M"+s*h+","+s*u+"A"+s+","+s+" 0 "+g+",1 "+s*d+","+s*f+"L"+o*d+","+o*f+"A"+o+","+o+" 0 "+g+",0 "+o*h+","+o*u+"Z":"M"+s*h+","+s*u+"A"+s+","+s+" 0 "+g+",1 "+s*d+","+s*f+"L0,0Z"},T.mergeAttrs=function(t,e){for(var i in e)"class"===i?t[i]=t[i]?t[i]+" "+e[i]:e[i]:"style"===i?T.isObject(t[i])&&T.isObject(e[i])?t[i]=T.mergeAttrs(t[i],e[i]):T.isObject(t[i])?t[i]=T.mergeAttrs(t[i],T.styleToObject(e[i])):T.isObject(e[i])?t[i]=T.mergeAttrs(T.styleToObject(t[i]),e[i]):t[i]=T.mergeAttrs(T.styleToObject(t[i]),T.styleToObject(e[i])):t[i]=e[i];return t},T.annotateString=function(t,e,i){e=e||[];for(var n,r,o,s=(i=i||{}).offset||0,a=[],l=[],c=0;c<t.length;c++){r=l[c]=t[c];for(var g=0;g<e.length;g++){var h=e[g],u=h.start+s,d=h.end+s;u<=c&&c<d&&(T.isObject(r)?r.attrs=T.mergeAttrs(T.mergeAttrs({},r.attrs),h.attrs):r=l[c]={t:t[c],attrs:h.attrs},i.includeAnnotationIndices&&(r.annotations||(r.annotations=[])).push(g))}(o=l[c-1])?T.isObject(r)&&T.isObject(o)?JSON.stringify(r.attrs)===JSON.stringify(o.attrs)?n.t+=r.t:(a.push(n),n=r):n=T.isObject(r)?(a.push(n),r):T.isObject(o)?(a.push(n),r):(n||"")+r:n=r}return n&&a.push(n),a},T.findAnnotationsAtIndex=function(t,e){var i=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&i.push(t)}),i},T.findAnnotationsBetweenIndexes=function(t,e,i){var n=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||i>t.start&&i<=t.end||t.start>=e&&t.end<i)&&n.push(t)}),n},T.shiftAnnotations=function(t,e,i){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=i:t.start>=e&&(t.start+=i,t.end+=i)}),t},T.convertLineToPathData=function(t){return["M",(t=T(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},T.convertPolygonToPathData=function(t){var e=T.getPointsFromSvgNode(t);return 0===e.length?null:T.svgPointsToPath(e)+" Z"},T.convertPolylineToPathData=function(t){var e=T.getPointsFromSvgNode(t);return 0===e.length?null:T.svgPointsToPath(e)},T.svgPointsToPath=function(t){for(var e=0,i=t.length;e<i;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},T.getPointsFromSvgNode=function(t){var e=[],i=(t=T.toNode(t)).points;if(i)for(var n=0,r=i.numberOfItems;n<r;n++)e.push(i.getItem(n));return e},T.KAPPA=.551784,T.convertCircleToPathData=function(t){t=T(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,n=parseFloat(t.attr("r")),r=n*T.KAPPA;return["M",e,i-n,"C",e+r,i-n,e+n,i-r,e+n,i,"C",e+n,i+r,e+r,i+n,e,i+n,"C",e-r,i+n,e-n,i+r,e-n,i,"C",e-n,i-r,e-r,i-n,e,i-n,"Z"].join(" ")},T.convertEllipseToPathData=function(t){t=T(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,n=parseFloat(t.attr("rx")),r=parseFloat(t.attr("ry"))||n,o=n*T.KAPPA,s=r*T.KAPPA;return["M",e,i-r,"C",e+o,i-r,e+n,i-s,e+n,i,"C",e+n,i+s,e+o,i+r,e,i+r,"C",e-o,i+r,e-n,i+s,e-n,i,"C",e-n,i-s,e-o,i-r,e,i-r,"Z"].join(" ")},T.convertRectToPathData=function(t){return t=T(t),T.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},T.rectToPath=function(t){var e=t.x,i=t.y,n=t.width,r=t.height,o=h(t.rx||t["top-rx"]||0,n/2),s=h(t.rx||t["bottom-rx"]||0,n/2),a=h(t.ry||t["top-ry"]||0,r/2),l=h(t.ry||t["bottom-ry"]||0,r/2);return(o||s||a||l?["M",e,i+a,"v",r-a-l,"a",s,l,0,0,0,s,l,"h",n-2*s,"a",s,l,0,0,0,s,-l,"v",-(r-l-a),"a",o,a,0,0,0,-o,-a,"h",-(n-2*o),"a",o,a,0,0,0,-o,a,"Z"]:["M",e,i,"H",e+n,"V",i+r,"H",e,"V",i,"Z"]).join(" ")},T.normalizePathData=function(){var t="\t\n\v\f\r   ᠎             　\u2028\u2029",p=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),I=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),e=Math,U=e.PI,X=e.sin,F=e.cos,V=e.tan,J=e.asin,H=e.sqrt,_=e.abs;function u(t,e,i,n,r,o){return[1/3*t+2/3*i,1/3*e+2/3*n,1/3*r+2/3*i,1/3*o+2/3*n,r,o]}function Q(t,e,i){return{x:t*F(i)-e*X(i),y:t*X(i)+e*F(i)}}function d(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return String(t).replace(p,function(t,e,i){var n=[],r=e.toLowerCase();for(i.replace(I,function(t,e){e&&n.push(+e)}),"m"===r&&2<n.length&&(s.push([e].concat(n.splice(0,2))),r="l",e="m"===e?"l":"L");n.length>=o[r]&&(s.push([e].concat(n.splice(0,o[r]))),o[r]););}),s}(t)),!t||!t.length)return[["M",0,0]];for(var e,i=[],n=0,r=0,o=0,s=0,a=t.length,l=0;l<a;l++){var c=[];i.push(c);var g,h,u=t[l];if((e=u[0])!=e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+n,c[7]=+u[7]+r;break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+n;break;case"M":for(o=+u[1]+n,s=+u[2]+r,g=u.length,h=1;h<g;h++)c[h]=+u[h]+(h%2?n:r);break;default:for(g=u.length,h=1;h<g;h++)c[h]=+u[h]+(h%2?n:r)}else for(var d=u.length,f=0;f<d;f++)c[f]=u[f];switch(c[0]){case"Z":n=+o,r=+s;break;case"H":n=c[1];break;case"V":r=c[1];break;case"M":o=c[c.length-2],s=c[c.length-1],n=c[c.length-2],r=c[c.length-1];break;default:n=c[c.length-2],r=c[c.length-1]}}return i}function i(t){var n=d(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function i(t,e,i){var n,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(function t(e,i,n,r,o,s,a,l,c,g){var h,u=120*U/180,d=U/180*(+o||0),f=[];if(g)b=g[0],N=g[1],w=g[2],y=g[3];else{e=(h=Q(e,i,-d)).x,i=h.y;var p=(e-(l=(h=Q(l,c,-d)).x))/2,I=(i-(c=h.y))/2,m=p*p/(n*n)+I*I/(r*r);1<m&&(n*=m=H(m),r*=m);var A=n*n,v=r*r,C=(s==a?-1:1)*H(_((A*v-A*I*I-v*p*p)/(A*I*I+v*p*p))),w=C*n*I/r+(e+l)/2,y=C*-r*p/n+(i+c)/2,b=J(((i-y)/r).toFixed(9)),N=J(((c-y)/r).toFixed(9));(b=e<w?U-b:b)<0&&(b=2*U+b),(N=l<w?U-N:N)<0&&(N=2*U+N),a&&N<b&&(b-=2*U),!a&&b<N&&(N-=2*U)}var M=N-b;if(_(M)>u){var x=N,S=l,k=c;f=t(l=w+n*F(N=b+u*(a&&b<N?1:-1)),c=y+r*X(N),n,r,o,0,a,S,k,[N,x,w,y])}M=N-b;var D=F(b),z=X(b),T=F(N),j=X(N),L=V(M/4),Z=4/3*(n*L),P=4/3*(r*L),G=[e,i],B=[e+Z*z,i-P*D],O=[l+Z*j,c-P*T],E=[l,c];if(B[0]=2*G[0]-B[0],B[1]=2*G[1]-B[1],g)return[B,O,E].concat(f);for(var Y=[],R=(f=[B,O,E].concat(f).join().split(",")).length,W=0;W<R;W++)Y[W]=W%2?Q(f[W-1],f[W],d).y:Q(f[W],f[W+1],d).x;return Y}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":r="C"===i||"S"===i?(n=2*e.x-e.bx,2*e.y-e.by):(n=e.x,e.y),t=["C",n,r].concat(t.slice(1));break;case"T":e.qy="Q"===i||"T"===i?(e.qx=2*e.x-e.qx,2*e.y-e.qy):(e.qx=e.x,e.y),t=["C"].concat(u(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(u(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function r(t,e){if(7<t[e].length){t[e].shift();for(var i=t[e];i.length;)o[e]="A",t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),l=n.length}}for(var o=[],s="",a="",l=n.length,c=0;c<l;c++){n[c]&&(s=n[c][0]),"C"!==s&&(o[c]=s,0<c&&(a=o[c-1])),n[c]=i(n[c],e,a),"A"!==o[c]&&"C"===s&&(o[c]="C"),r(n,c);var g=n[c],h=g.length;e.x=g[h-2],e.y=g[h-1],e.bx=parseFloat(g[h-4])||e.x,e.by=parseFloat(g[h-3])||e.y}return n[0][0]&&"M"===n[0][0]||n.unshift(["M",0,0]),n}return function(t){return i(t).join(",").split(",").join(" ")}}(),T.namespace=z,T.g=K,T}(),$={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default"},tt=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,$.classNamePrefix.length)!==$.classNamePrefix&&(t=$.classNamePrefix+t),t}).join(" "):t},et=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,$.classNamePrefix.length)===$.classNamePrefix&&(t=t.substr($.classNamePrefix.length)),t}).join(" "):t},it=function(t,e){for(var i={},n={},r=q.namespace.svg,o=e||r,s=document.createDocumentFragment(),a=[t,s,o];0<a.length;){o=a.pop();for(var l=a.pop(),c=a.pop(),g=0,h=c.length;g<h;g++){var u=c[g];if(!u.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var d=u.tagName;u.hasOwnProperty("namespaceURI")&&(o=u.namespaceURI);var f=document.createElementNS(o,d),p=o===r,I=p?q:S,m=u.attributes;m&&I(f).attr(m);var A=u.style;if(A&&S(f).css(A),u.hasOwnProperty("className")){var v=u.className;p?f.className.baseVal=v:f.className=v}if(u.hasOwnProperty("textContent")&&(f.textContent=u.textContent),u.hasOwnProperty("selector")){var C=u.selector;if(i[C])throw new Error("json-dom-parser: selector must be unique");I(i[C]=f).attr("joint-selector",C)}if(u.hasOwnProperty("groupSelector")){var w=u.groupSelector;Array.isArray(w)||(w=[w]);for(var y=0,b=w.length;y<b;y++){var N=w[y],M=n[N];M||(M=n[N]=[]),M.push(f)}}l.appendChild(f);var x=u.children;Array.isArray(x)&&a.push(x,f,o)}}return{fragment:s,selectors:i,groupSelectors:n}},nt=function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return e},rt=function(t,e,i){for(var n,r=Array.isArray(e)?e:e.split(i||"/"),o=0,s=r.length;o<s;){if(n=r[o++],!(Object(t)===t&&n in t))return;t=t[n]}return t},ot=function(t,e,i,n){for(var r=Array.isArray(e)?e:e.split(n||"/"),o=t,s=0,a=r.length;s<a-1;s++)o=o[r[s]]||(o[r[s]]={});return o[r[a-1]]=i,t},st=function(t,e,i){i||(i="/");var n=Array.isArray(e)?e.slice():e.split(i),r=n.pop();if(0<n.length){var o=rt(t,n,i);o&&delete o[r]}else delete t[r];return t},at=function(t,e,i){e=e||"/";var n={};for(var r in t)if(t.hasOwnProperty(r)){var o="object"==typeof t[r];if(o&&i&&i(t[r])&&(o=!1),o){var s=at(t[r],e,i);for(var a in s)s.hasOwnProperty(a)&&(n[r+e+a]=s[a])}else n[r]=t[r]}return n},lt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},ct=function(t){return ct.id=ct.id||1,t.id=void 0===t.id?"j_"+ct.id++:t.id,t.id},gt=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},ht=function(t){var e=t,i=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(i){for(var n in t)void 0===i[n]&&(i[n]=t[n]);e=i}var r=e.target;if(r){var o=r.correspondingUseElement;o&&(e.target=o)}return e},ut=function(){var r;if("undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!r){var o=0;r=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-o)),n=setTimeout(function(){t(e+i)},i);return o=e+i,n}}return function(t,e){for(var i=[],n=arguments.length-2;0<n--;)i[n]=arguments[n+2];return r(void 0!==e?t.bind.apply(t,[e].concat(i)):t)}}(),dt=((Q="undefined"!=typeof window)&&(_=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),_=_||clearTimeout,Q?_.bind(window):_),ft=function(t){return ge(t)&&"%"===t.slice(-1)},pt=function(t,e){var i=parseFloat(t);if(Number.isNaN(i))return null;var n,r={};if(r.value=i,null==e)n="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;n=e.join("|")}else ge(e)&&(n=e);var o,s=(o=new RegExp("(?:\\d+(?:\\.\\d+)*)("+n+")$").exec(t))?o[1]:null;return null===s?null:(r.unit=s,r)},It=function(t,e,i,n){void 0===i&&(i={}),void 0===n&&(n={});var r=e.width,o=e.height,s=n.svgDocument||q("svg").node,a=q("tspan").node,l=q("text").attr(i).append(a).node,c=document.createTextNode("");l.style.opacity=0,l.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(l),n.svgDocument||document.body.appendChild(s);var g=n.separator||" ",h=n.eol||"\n",u=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,d=n.maxLineCount;ce(d)||(d=1/0);for(var f,p,I,m=t.split(g),A=[],v=[],C=0,w=0,y=m.length;C<y;C++){var b=m[C];if(b)if(h&&0<=b.indexOf(h))if(1<b.length){for(var N=b.split(h),M=0,x=N.length-1;M<x;M++)N.splice(2*M+1,0,h);m.splice.apply(m,[C,1].concat(N.filter(function(t){return""!==t}))),C--,y=m.length}else v[++w]="";else{if(c.data=v[w]?v[w]+" "+b:b,a.getComputedTextLength()<=r)v[w]=c.data,(f||p)&&(A[w++]=!0,p=f=0);else{if(!v[w]||f){var S=!!f;if(f=b.length-1,S||!f){if(!f){if(!v[w]){v=[];break}m.splice(C,2,b+m[C+1]),y--,A[w++]=!0,C--;continue}m[C]=b.substring(0,f),m[C+1]=b.substring(f)+m[C+1]}else{if(p)m.splice(C,2,m[C]+m[C+1]),p=0;else{var k=b.search(u);-1<k&&k!==b.length-1&&0!==k&&(p=k+1,f=0),m.splice(C,1,b.substring(0,p||f),b.substring(p||f)),y++}w&&!A[w-1]&&w--}C--;continue}w++,C--}var D=null;if(v.length>d)D=d-1;else if(void 0!==o){var z;if(void 0===I)I=(z="auto"===i.lineHeight?{value:1.5,unit:"em"}:pt(i.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===z.unit&&(I*=l.getBBox().height);I*v.length>o&&(D=Math.floor(o/I)-1)}if(null!==D){v.splice(D+1);var T=n.ellipsis;if(!T||D<0)break;"string"!=typeof T&&(T="…");var j=v[D];if(!j)break;var L,Z,P=j.length;do{if(Z=j[P],L=j.substring(0,P),Z?Z.match(g)&&(L+=Z):L+="string"==typeof g?g:" ",L+=T,c.data=L,a.getComputedTextLength()<=r){v[D]=L;break}P--}while(0<=P);break}}}return n.svgDocument?s.removeChild(l):document.body.removeChild(s),v.join(h)},mt=function(t){var e=S(S.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var i=this;S.each(i.attributes,function(){var t=this.name,e=this.value;(t.startsWith("on")||e.startsWith("javascript:")||e.startsWith("data:")||e.startsWith("vbscript:"))&&S(i).removeAttr(t)})}),e.html()},At=function(t,e){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,e);else{var i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)}},vt=function(t){t=t.replace(/\s/g,"");var e,i=(t=decodeURIComponent(t)).indexOf(","),n=t.slice(0,i),r=n.split(":")[1].split(";")[0],o=t.slice(i+1);e=0<=n.indexOf("base64")?atob(o):unescape(encodeURIComponent(o));for(var s=new Uint8Array(e.length),a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return new Blob([s],{type:r})},Ct=function(t,e){var i=S(t),n=i.map(function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}});return Array.prototype.sort.call(i,e).each(function(t){n[t].call(this)})},wt=function(t){if(Object(t)===t)return e=i=n=r=0,isFinite(t.vertical)&&(e=n=+t.vertical),isFinite(t.horizontal)&&(i=r=+t.horizontal),isFinite(t.top)&&(e=+t.top),isFinite(t.right)&&(i=+t.right),isFinite(t.bottom)&&(n=+t.bottom),isFinite(t.left)&&(r=+t.left),{top:e,right:i,bottom:n,left:r};var e,i,n,r,o=0;return isFinite(t)&&(o=+t),{top:o,right:o,bottom:o,left:o}},yt={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,i=1;;e+=i,i/=2)if((7-4*e)/11<=t){var n=(11-6*e-11*t)/4;return-n*n+i*i}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(i,n,r){return n=n||0,r=r||1,function(t){var e=i(t);return e<n?n:r<e?r:e}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},bt={number:function(e,t){var i=t-e;return function(t){return e+i*t}},object:function(r,o){var s=Object.keys(r);return function(t){var e,i,n={};for(e=s.length-1;-1!=e;e--)n[i=s[e]]=r[i]+(o[i]-r[i])*t;return n}},hexColor:function(t,e){var i=parseInt(t.slice(1),16),n=parseInt(e.slice(1),16),r=255&i,o=(255&n)-r,s=65280&i,a=(65280&n)-s,l=16711680&i,c=(16711680&n)-l;return function(t){return"#"+(1<<24|r+o*t&255|s+a*t&65280|l+c*t&16711680).toString(16).slice(1)}},unit:function(e,t){var i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=i.exec(e),r=i.exec(t),o=r[1].indexOf("."),s=0<o?r[1].length-o-1:0;e=+n[1];var a=+r[1]-e,l=n[2];return function(t){return(e+a*t).toFixed(s)+l}}},Nt={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,i=Number.isFinite(t.width)?t.width:1;return xt('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+i,innerRadius:e})},highlight:function(t){return xt('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return xt('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return xt(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return xt('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return xt('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return xt('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Mt={number:function(t,e,o){o=o||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var i=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i.exec(t),n=i[1]||" ",r=i[2]||">",s=i[3]||"",a=i[4]||"",l=i[5],c=+i[6],g=i[7],h=i[8],u=i[9],d=1,f="",p="",I=!1;switch(h&&(h=+h.substring(1)),(l||"0"===n&&"="===r)&&(l=n="0",r="=",g&&(c-=Math.floor((c-1)/4))),u){case"n":g=!0,u="g";break;case"%":d=100,p="%",u="f";break;case"p":d=100,p="%",u="r";break;case"b":case"o":case"x":case"X":"#"===a&&(f="0"+u.toLowerCase());break;case"c":case"d":I=!0,h=0;break;case"s":d=-1,u="r"}"$"===a&&(f=o.currency[0],p=o.currency[1]),"r"!=u||h||(u="g"),null!=h&&("g"==u?h=Math.max(1,Math.min(21,h)):"e"!=u&&"f"!=u||(h=Math.max(0,Math.min(20,h))));var m=l&&g;if(I&&e%1)return"";var A=e<0||0===e&&1/e<0?(e=-e,"-"):s,v=p;if(d<0){var C=this.prefix(e,h);e=C.scale(e),v=C.symbol+p}else e*=d;var w=(e=this.convert(u,e,h)).lastIndexOf("."),y=w<0?e:e.substring(0,w),b=w<0?"":o.decimal+e.substring(w+1);function N(t){for(var e=t.length,i=[],n=0,r=o.grouping[0];0<e&&0<r;)i.push(t.substring(e-=r,e+r)),r=o.grouping[n=(n+1)%o.grouping.length];return i.reverse().join(o.thousands)}!l&&g&&o.grouping&&(y=N(y));var M=f.length+y.length+b.length+(m?0:A.length),x=M<c?new Array(M=c-M+1).join(n):"";return m&&(y=N(x+y)),A+=f,e=y+b,("<"===r?A+e+x:">"===r?x+A+e:"^"===r?x.substring(0,M>>=1)+A+e+x.substring(M):A+(m?e:x+e))+v},string:function(t,e){for(var i,n="{",r=!1,o=[];-1!==(i=t.indexOf(n));){var s,a,l;if(s=t.slice(0,i),r){l=(a=s.split(":")).shift().split("."),s=e;for(var c=0;c<l.length;c++)s=s[l[c]];a.length&&(s=this.number(a,s))}o.push(s),t=t.slice(i+1),n=(r=!r)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,i){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(i);case"e":return e.toExponential(i);case"f":return e.toFixed(i);case"r":return(e=this.round(e,this.precision(e,i))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),i))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var i=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:8<e?function(t){return t/i}:function(t){return t*i},symbol:t}}),n=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n<=0?n+1:n-1)/3)))),i[8+n/3]}},xt=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(t){for(var e=Array.from(arguments).slice(1,4).find(function(t){return!!t}).split("."),i=n[e.shift()];void 0!==i&&e.length;)i=i[e.shift()];return void 0!==i?i:""})}},St=i.assign,kt=i.defaults,Dt=St,zt=i.defaultsDeep,Tt=i.assign,jt=i.defaults,Lt=i.defaultsDeep,Zt=i.invokeMap||i.invoke,Pt=i.sortedIndexBy||i.sortedIndex,Gt=i.uniqBy||i.uniq,Bt=i.clone,Ot=i.cloneDeep,Et=i.isEmpty,Yt=i.isEqual,Rt=i.isFunction,Wt=i.isPlainObject,Ut=i.toArray,Xt=i.debounce,Ft=i.groupBy,Vt=i.sortBy,Jt=i.flattenDeep,Ht=i.without,_t=i.difference,Qt=i.intersection,Kt=i.union,qt=i.has,$t=i.result,te=i.omit,ee=i.pick,ie=i.bindAll,ne=i.forIn,re=i.camelCase,oe=i.uniqueId,se=function(){if(i.mergeWith){var t=Array.from(arguments),e=t[t.length-1],n=Rt(e)?e:he;return t.push(function(t,e){var i=n(t,e);return void 0!==i?i:Array.isArray(t)&&!Array.isArray(e)?e:void 0}),i.mergeWith.apply(this,t)}return i.merge.apply(this,arguments)},ae=function(t){var e=Object.prototype.toString;return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===e.call(t)},le=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},ce=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===e.call(t)},ge=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===e.call(t)},he=function(){};function ue(t){t=Gt(t);var s=Ut(t).reduce(function(t,e){return t[e.id]=e.clone(),t},{});return Ut(t).forEach(function(t){var e=s[t.id];if(e.isLink()){var i=e.source(),n=e.target();i.id&&s[i.id]&&e.prop("source/id",s[i.id].id),n.id&&s[n.id]&&e.prop("target/id",s[n.id].id)}var r=t.get("parent");r&&s[r]&&e.set("parent",s[r].id);var o=Ut(t.get("embeds")).reduce(function(t,e){return s[e]&&t.push(s[e].id),t},[]);Et(o)||e.set("embeds",o)}),s}function de(o,s){return function(t,e){var i=ft(t);t=parseFloat(t),i&&(t/=100);var n={};if(isFinite(t)){var r=i||0<=t&&t<=1?t*e[s]:Math.max(t+e[s],0);n[o]=r}return n}}function fe(s,a,l){return function(t,e){var i,n=ft(t);if(t=parseFloat(t),n&&(t/=100),isFinite(t)){var r=e[l]();i=n||0<t&&t<1?r[s]+e[a]*t:r[s]+t}var o=E();return o[s]=i||0,o}}function pe(r,o,s){return function(t,e){var i;i="middle"===t?e[o]/2:t===s?e[o]:isFinite(t)?-1<t&&t<1?-e[o]*t:-t:ft(t)?e[o]*parseFloat(t)/100:0;var n=E();return n[r]=-(e[r]+i),n}}function Ie(d,t){var f="joint-shape",p=t&&t.resetOffset;return function(t,e,i){var n=S(i),r=n.data(f);if(!r||r.value!==t){var o=d(t);r={value:t,shape:o,shapeBBox:o.bbox()},n.data(f,r)}var s=r.shape.clone(),a=r.shapeBBox.clone(),l=a.origin(),c=e.origin();a.x=c.x,a.y=c.y;var g=e.maxRectScaleToFit(a,c),h=0===a.width||0===e.width?1:g.sx,u=0===a.height||0===e.height?1:g.sy;return s.scale(h,u,l),p&&s.translate(-l.x,-l.y),s}}function me(t){var n=Ie(function(t){return new O(q.normalizePathData(t))},t);return function(t,e,i){return{d:n(t,e,i).serialize()}}}function Ae(t){var n=Ie(D,t);return function(t,e,i){return{points:n(t,e,i).serialize()}}}function ve(r,o){var s=new E(1,0);return function(t){var e,i,n=this[r](t);return n?(i=o.rotate?n.vector().vectorAngle(s):0,e=n.start):(e=this.path.start,i=0),0===i?{transform:"translate("+e.x+","+e.y+")"}:{transform:"translate("+e.x+","+e.y+") rotate("+i+")"}}}function Ce(t,e,i){return void 0!==i.text}function we(){return this.model.isLink()}function ye(t){var e={},i=t.stroke;"string"==typeof i&&(e.stroke=i,e.fill=i);var n=t.strokeOpacity;return void 0===n&&(n=t["stroke-opacity"]),void 0===n&&(n=t.opacity),void 0!==n&&(e["stroke-opacity"]=n,e["fill-opacity"]=n),e}var be,Ne,Me={xlinkHref:{set:"xlink:href"},xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},filter:{qualify:Wt,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Wt,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},stroke:{qualify:Wt,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},sourceMarker:{qualify:Wt,set:function(t,e,i,n){return t=Tt(ye(n),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Wt,set:function(t,e,i,n){return t=Tt(ye(n),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Wt,set:function(t,e,i,n){return t=Tt(ye(n),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,i){return!i.textWrap||!Wt(i.textWrap)},set:function(t,e,i,n){var r=S(i),o="joint-text",s=r.data(o),a=ee(n,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty"),l=a.fontSize=n["font-size"]||n.fontSize,c=JSON.stringify([t,a]);if(void 0===s||s!==c){l&&i.setAttribute("font-size",l);var g=a.textPath;if(le(g)){var h=g.selector;if("string"==typeof h){var u=this.findBySelector(h)[0];u instanceof SVGPathElement&&(a.textPath=Tt({"xlink:href":"#"+u.id},g))}}q(i).text(""+t,a),r.data(o,c)}}},textWrap:{qualify:Wt,set:function(t,e,i,n){var r=t.width||0;ft(r)?e.width*=parseFloat(r)/100:r<=0?e.width+=r:e.width=r;var o,s=t.height||0;ft(s)?e.height*=parseFloat(s)/100:s<=0?e.height+=s:e.height=s;var a=t.text;void 0===a&&(a=n.text),o=void 0!==a?It(""+a,e,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":n["font-size"]||n.fontSize,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",Me.text.set.call(this,o,e,i,n)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,i){var n=S(i),r="joint-title",o=n.data(r);if(void 0===o||o!==t){n.data(r,t);var s=i.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=t;else{var a=document.createElementNS(i.namespaceURI,"title");a.textContent=t,i.insertBefore(a,s)}}}},lineHeight:{qualify:Ce},textVerticalAnchor:{qualify:Ce},textPath:{qualify:Ce},annotations:{qualify:Ce},eol:{qualify:Ce},displayEmpty:{qualify:Ce},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:Wt,set:function(t,e,i){S(i).css(t)}},html:{set:function(t,e,i){S(i).html(t+"")}},ref:{},refX:{position:fe("x","width","origin")},refY:{position:fe("y","height","origin")},refDx:{position:fe("x","width","corner")},refDy:{position:fe("y","height","corner")},refWidth:{set:de("width","width")},refHeight:{set:de("height","height")},refRx:{set:de("rx","width")},refRy:{set:de("ry","height")},refRInscribed:{set:(be=de("r","width"),Ne=de("r","height"),function(t,e){return(e.height>e.width?be:Ne)(t,e)})},refRCircumscribed:{set:function(t,e){var i=ft(t);t=parseFloat(t),i&&(t/=100);var n,r=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(n=i||0<=t&&t<=1?t*r:Math.max(t+r,0)),{r:n}}},refCx:{set:de("cx","width")},refCy:{set:de("cy","height")},xAlignment:{offset:pe("x","width","right")},yAlignment:{offset:pe("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:me({resetOffset:!0})},refDKeepOffset:{set:me({resetOffset:!1})},refPointsResetOffset:{set:Ae({resetOffset:!0})},refPointsKeepOffset:{set:Ae({resetOffset:!1})},connection:{qualify:we,set:function(t){var e,i=t.stubs;if(void 0===i&&(i=0),isFinite(i)&&0!==i){var n;n=i<0?(this.getConnectionLength()+i)/2:i;var r=this.getConnection(),o=r.divideAtLength(n),s=r.divideAtLength(-n);o&&s&&(e=o[0].serialize()+" "+s[1].serialize())}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:we,set:ve("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:we,set:ve("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:we,set:ve("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:we,set:ve("getTangentAtRatio",{rotate:!1})}};Me.refR=Me.refRInscribed,Me.refD=Me.refDResetOffset,Me.refPoints=Me.refPointsResetOffset,Me.atConnectionLength=Me.atConnectionLengthKeepGradient,Me.atConnectionRatio=Me.atConnectionRatioKeepGradient,Me.refX2=Me.refX,Me.refY2=Me.refY,Me.refWidth2=Me.refWidth,Me.refHeight2=Me.refHeight,Me["ref-x"]=Me.refX,Me["ref-y"]=Me.refY,Me["ref-dy"]=Me.refDy,Me["ref-dx"]=Me.refDx,Me["ref-width"]=Me.refWidth,Me["ref-height"]=Me.refHeight,Me["x-alignment"]=Me.xAlignment,Me["y-alignment"]=Me.yAlignment;var xe=Me,Se=s.Model.extend({constructor:function(t,e){var i,n=t||{};this.cid=oe("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(i=$t(this,"defaults"))&&(n=se({},i,n)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,i){throw new Error("Must define a translate() method.")},toJSON:function(){var e=this.constructor.prototype.defaults.attrs||{},t=this.attributes.attrs,o={};ne(t,function(t,n){var r=e[n];ne(t,function(t,i){le(t)&&!Array.isArray(t)?ne(t,function(t,e){r&&r[i]&&Yt(r[i][e],t)||(o[n]=o[n]||{},(o[n][i]||(o[n][i]={}))[e]=t)}):r&&Yt(r[i],t)||(o[n]=o[n]||{},o[n][i]=t)})});var i=Ot(te(this.attributes,"attrs"));return i.attrs=o,i},initialize:function(t){t&&t.id||this.set("id",this.generateId(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},generateId:function(){return lt()},processPorts:function(){var t=this.ports,i={};ne(this.get("attrs"),function(t,e){t&&t.port&&(void 0!==t.port.id?i[t.port.id]=t.port:i[t.port]={id:t.port})});var n={};(ne(t,function(t,e){i[e]||(n[e]=!0)}),this.graph&&!Et(n))&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(t){n[t.get("target").port]&&t.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(t){n[t.get("source").port]&&t.remove()}));this.ports=i},remove:function(t){t=t||{};var e=this.graph;if(!e)return this.collection&&this.collection.remove(this,t),this;e.startBatch("remove");var i=this.getParentCell();i&&i.unembed(this);for(var n=this.getEmbeddedCells(),r=0,o=n.length;r<o;r++){var s=n[r];s&&s.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(i){var t=this.graph;if(t){i=i||{};var e,n=t.maxZIndex();i.deep?(e=this.getEmbeddedCells({deep:!0,breadthFirst:!0})).unshift(this):e=[this],n=n-e.length+1;var r=t.get("cells"),o=r.indexOf(this)!==r.length-e.length;o||(o=e.some(function(t,e){return t.get("z")!==n+e})),o&&(this.startBatch("to-front"),n+=e.length,e.forEach(function(t,e){t.set("z",n+e,i)}),this.stopBatch("to-front"))}return this},toBack:function(i){var t=this.graph;if(t){i=i||{};var e,n=t.minZIndex();i.deep?(e=this.getEmbeddedCells({deep:!0,breadthFirst:!0})).unshift(this):e=[this];var r=0!==t.get("cells").indexOf(this);r||(r=e.some(function(t,e){return t.get("z")!==n+e})),r&&(this.startBatch("to-back"),n-=e.length,e.forEach(function(t,e){t.set("z",n+e,i)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var i=Tt([],this.get("embeds"));return i[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e),this.set("embeds",Gt(i),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",Ht(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(e){if(e=e||{},this.graph){var i;if(e.deep)if(e.breadthFirst){i=[];for(var t=this.getEmbeddedCells();0<t.length;){var n=t.shift();i.push(n),t.push.apply(t,n.getEmbeddedCells())}}else(i=this.getEmbeddedCells()).forEach(function(t){i.push.apply(i,t.getEmbeddedCells(e))});else i=Ut(this.get("embeds")).map(this.graph.getCell,this.graph);return i}return[]},isEmbeddedIn:function(t,e){var i=ge(t)?t:t.id,n=this.parent();if(e=jt({deep:!0},e),this.graph&&e.deep){for(;n;){if(n===i)return!0;n=this.graph.getCell(n).parent()}return!1}return n===i},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return Ut(ue([this].concat(this.getEmbeddedCells({deep:!0}))));var e=s.Model.prototype.clone.apply(this,arguments);return e.set("id",this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,i){var n=ge(t);if(n||Array.isArray(t)){if(1<arguments.length){var r,o,s=(o=n?(r=t).split("/"):(r=t.join("/"),t.slice()))[0],a=o.length;if((i=i||{}).propertyPath=r,i.propertyValue=e,i.propertyPathArray=o,1===a)return this.set(s,e,i);for(var l={},c=l,g=s,h=1;h<a;h++){var u=o[h],d=Number.isFinite(n?Number(u):u);c=c[g]=d?[]:{},g=u}l=ot(l,o,e,"/");var f=se({},this.attributes);i.rewrite&&st(f,r,"/");var p=se(f,l);return this.set(s,p[s],i)}return rt(this.attributes,t,"/")}return this.set(se({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var i=Array.isArray(t)?t:t.split("/"),n=i[0];if("attrs"===n&&(e.dirty=!0),1===i.length)return this.unset(t,e);var r=i.slice(1),o=Ot(this.get(n));return st(o,r,"/"),this.set(n,o,e)},attr:function(t,e,i){var n=Array.from(arguments);return 0===n.length?this.get("attrs"):(Array.isArray(t)?n[0]=["attrs"].concat(t):ge(t)?n[0]="attrs/"+t:n[0]={attrs:t},this.prop.apply(this,n))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(r,e,o,i){i=i||"/",o=Tt({duration:100,delay:10,timingFunction:yt.linear,valueFunction:bt.number},o);var s,a=0,l=function(t){var e,i,n;(i=(t-=a=a||t)/o.duration)<1?this._transitionIds[r]=e=ut(l):(i=1,delete this._transitionIds[r]),n=s(o.timingFunction(i)),o.transitionId=e,this.prop(r,n,o),e||this.trigger("transition:end",this,r)}.bind(this),t=function(t){this.stopTransitions(r),s=o.valueFunction(rt(this.attributes,r,i),e),this._transitionIds[r]=ut(t),this.trigger("transition:start",this,r)}.bind(this);return setTimeout(t,o.delay,l)},getTransitions:function(){return Object.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var i=t&&t.split(e);return Object.keys(this._transitionIds).filter(i&&function(t){return Yt(i,t.split(e).slice(0,i.length))}).forEach(function(t){dt(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Tt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Tt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var i in t)t.hasOwnProperty(i)&&this.hasChanged(i)&&(e|=t[i]);return e},angle:function(){return 0},position:function(){return new E(0,0)},getPointFromConnectedLink:function(){return new E},getBBox:function(){return new H(0,0,0,0)}},{getAttributeDefinition:function(t){var e=this.attributes,i=xe;return e&&e[t]||i[t]},define:function(t,e,i,n){i=Tt({defaults:Lt({type:t},e,this.prototype.defaults)},i);var r=this.extend(i,n);return"undefined"!=typeof joint&&qt(joint,"shapes")&&ot(joint.shapes,t,r,"."),r}}),ke=function(e,t,i){if(ge(i)){if(!De[i])throw new Error('Unknown wrapper: "'+i+'"');i=De[i]}if(!Rt(i))throw new Error("Wrapper must be a function.");Ut(t).forEach(function(t){e[t]=i(e[t])})},De={cells:function(r){return function(){var t=Array.from(arguments),e=t.length,i=0<e&&t[0]||[],n=1<e&&t[e-1]||{};return Array.isArray(i)||(n instanceof Se?i=t:i instanceof Se&&(1<t.length&&t.pop(),i=t)),n instanceof Se&&(n={}),r.call(this,i,n)}}},ze={wrapWith:ke,wrappers:De,addClassNamePrefix:tt,removeClassNamePrefix:et,parseDOMJSON:it,hashCode:nt,getByPath:rt,setByPath:ot,unsetByPath:st,flattenObject:at,uuid:lt,guid:ct,toKebabCase:gt,normalizeEvent:ht,nextFrame:ut,cancelFrame:dt,shapePerimeterConnectionPoint:function(t,e,i,n){var r,o;if(!i){var s=e.$(".scalable")[0],a=e.$(".rotatable")[0];s&&s.firstChild?i=s.firstChild:a&&a.firstChild&&(i=a.firstChild)}return i?(o=q(i).findIntersection(n,t.paper.cells))||(r=q(i).getBBox({target:t.paper.cells})):o=(r=e.model.getBBox()).intersectionWithLineFromCenterToPoint(n),o||r.center()},isPercentage:ft,parseCssNumeric:pt,breakText:It,sanitizeHTML:mt,downloadBlob:At,downloadDataUri:function(t,e){var i=vt(t);At(i,e)},dataUriToBlob:vt,imageToDataUri:function(r,t){if(!r||"data:"===r.substr(0,"data:".length))return setTimeout(function(){t(null,r)},0);var e=new XMLHttpRequest;e.open("GET",r,!0),e.addEventListener("error",function(){t(new Error("Failed to load image "+r))}),e.responseType=window.FileReader?"blob":"arraybuffer",e.addEventListener("load",function(){window.FileReader?function(t,i){if(200===t.status){var e=new FileReader;e.onload=function(t){var e=t.target.result;i(null,e)},e.onerror=function(){i(new Error("Failed to load image "+r))},e.readAsDataURL(t.response)}else i(new Error("Failed to load image "+r))}(e,t):function(t,e){if(200===t.status){var i=new Uint8Array(t.response),n=r.split(".").pop()||"png";e(null,"data:image/"+({svg:"svg+xml"}[n]||n)+";base64,"+btoa(function(t){for(var e=[],i=0;i<t.length;i+=32768)e.push(String.fromCharCode.apply(null,t.subarray(i,i+32768)));return e.join("")}(i)))}else e(new Error("Failed to load image "+r))}(e,t)}),e.send()},getElementBBox:function(t){var e=S(t);if(0===e.length)throw new Error("Element not found");var i=e[0],n=i.ownerDocument,r=i.getBoundingClientRect(),o=0,s=0;if(i.ownerSVGElement){var a=q(i),l=a.getBBox({target:a.svg()});o=r.width-l.width,s=r.height-l.height}return{x:r.left+window.pageXOffset-n.documentElement.offsetLeft+o/2,y:r.top+window.pageYOffset-n.documentElement.offsetTop+s/2,width:r.width-o,height:r.height-s}},sortElements:Ct,setAttributesBySelector:function(t,e){var n=S(t);ne(e,function(t,e){var i=n.find(e).addBack().filter(e);qt(t,"class")&&(i.addClass(t.class),t=te(t,"class")),i.attr(t)})},normalizeSides:wt,timing:yt,interpolate:bt,filter:Nt,format:Mt,template:xt,toggleFullScreen:function(t){var e=window.top.document;function i(t,e){for(var i=["webkit","moz","ms","o",""],n=0;n<i.length;n++){var r=i[n],o=r?r+e:e.substr(0,1).toLowerCase()+e.substr(1);if(void 0!==t[o])return Rt(t[o])?t[o]():t[o]}}t=t||e.body,i(e,"FullscreenElement")||i(e,"FullScreenElement")?i(e,"ExitFullscreen")||i(e,"CancelFullScreen"):i(t,"RequestFullscreen")||i(t,"RequestFullScreen")},mixin:St,supplement:kt,deepMixin:Dt,deepSupplement:zt,assign:Tt,defaults:jt,defaultsDeep:Lt,invoke:Zt,sortedIndex:Pt,uniq:Gt,clone:Bt,cloneDeep:Ot,isEmpty:Et,isEqual:Yt,isFunction:Rt,isPlainObject:Wt,toArray:Ut,debounce:Xt,groupBy:Ft,sortBy:Vt,flattenDeep:Jt,without:Ht,difference:_t,intersection:Qt,union:Kt,has:qt,result:$t,omit:te,pick:ee,bindAll:ie,forIn:ne,camelCase:re,uniqueId:oe,merge:se,isBoolean:ae,isObject:le,isNumber:ce,isString:ge,noop:he,cloneCells:ue};function Te(t,e,i){var n=t.toJSON();return n.angle=e||0,jt({},i,n)}function je(t,e,i){return t.map(function(t,e,i){var n=this.pointAt((e+.5)/i.length);return(t.dx||t.dy)&&n.offset(t.dx||0,t.dy||0),Te(n.round(),0,t)},b(e,i))}function Le(t,e,s,a){var l=e.center(),c=e.width/e.height,g=e.topMiddle(),h=w.fromRect(e);return t.map(function(t,e,i){var n=s+a(e,i.length),r=g.clone().rotate(l,-n).scale(c,1,l),o=t.compensateRotation?-h.tangentTheta(r):0;return(t.dx||t.dy)&&r.offset(t.dx||0,t.dy||0),t.dr&&r.move(l,t.dr),Te(r.round(),o,t)})}function Ze(t,e){var i=e.x;ge(i)&&(i=parseFloat(i)/100*t.width);var n=e.y;return ge(n)&&(n=parseFloat(n)/100*t.height),N(i||0,n||0)}var Pe={absolute:function(t,e,i){return t.map(Ze.bind(null,e))},fn:function(t,e,i){return i.fn(t,e,i)},line:function(t,e,i){return je(t,Ze(e,i.start||e.origin()),Ze(e,i.end||e.corner()))},left:function(t,e,i){return je(t,e.origin(),e.bottomLeft())},right:function(t,e,i){return je(t,e.topRight(),e.corner())},top:function(t,e,i){return je(t,e.origin(),e.topRight())},bottom:function(t,e,i){return je(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,i){var n=i.startAngle||0,r=i.step||360/t.length;return Le(t,e,n,function(t){return t*r})},ellipse:function(t,e,i){var n=i.startAngle||0,r=i.step||20;return Le(t,e,n,function(t,e){return(t+.5-e/2)*r})}};function Ge(t,e){return Lt({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Be(t,e,i,n){n=jt({},n,{offset:15});var r,o,s,a,l=e.center().theta(t),c=Oe(e),g=n.offset,h=0;a=l<c[1]||l>c[2]?(s=".3em",r=g,o=0,"start"):l<c[0]?(s="0",r=0,o=-g,i?(h=-90,"start"):"middle"):l<c[3]?(s=".3em",r=-g,o=0,"end"):(s=".6em",r=0,o=g,i?(h=90,"start"):"middle");var u=Math.round;return Ge({x:u(r),y:u(o),angle:h,attrs:{".":{y:s,"text-anchor":a}}})}function Oe(t){var e=t.center(),i=e.theta(t.origin()),n=e.theta(t.bottomLeft()),r=e.theta(t.corner());return[i,e.theta(t.topRight()),r,n]}function Ee(t,e,i,n){var r,o,s,a,l=e.center().theta(t),c=(n=jt({},n,{offset:15})).offset,g=0,h=Oe(e);a=l<h[1]||l>h[2]?(s=".3em",r=-c,o=0,"end"):l<h[0]?(s=".6em",r=0,o=c,i?(g=90,"start"):"middle"):l<h[3]?(s=".3em",r=c,o=0,"start"):(s="0em",r=0,o=-c,i?(g=-90,"start"):"middle");var u=Math.round;return Ge({x:u(r),y:u(o),angle:g,attrs:{".":{y:s,"text-anchor":a}}})}function Ye(t,e,i){i=jt({},i,{offset:20});var n,r=N(0,0),o=-t.theta(r),s=o,a=t.clone().move(r,i.offset).difference(t).round(),l=".3em";(o+90)%180==0?(n=e?"end":"middle",e||-270!==o||(l="0em")):-270<o&&o<-90?(n="start",s=o-180):n="end";var c=Math.round;return Ge({x:c(a.x),y:c(a.y),angle:e?s:0,attrs:{".":{y:l,"text-anchor":n}}})}var Re={manual:function(t,e,i){return Ge(i,e)},left:function(t,e,i){return Ge(i,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,i){return Ge(i,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,i){return Ge(i,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,i){return Ge(i,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,i){return Be(t,e,!0,i)},outside:function(t,e,i){return Be(t,e,!1,i)},insideOriented:function(t,e,i){return Ee(t,e,!0,i)},inside:function(t,e,i){return Ee(t,e,!1,i)},radial:function(t,e,i){return Ye(t.difference(e.center()),!1,i)},radialOriented:function(t,e,i){return Ye(t.difference(e.center()),!0,i)}},We=Se.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,i){return void 0===t?Bt(this.get("source")):(r=t instanceof Se?((n=Bt(e)||{}).id=t.id,i):Wt(t)?(n=t,e):((n=Bt(e)||{}).x=t.x,n.y=t.y,i),this.set("source",n,r));var n,r},target:function(t,e,i){return void 0===t?Bt(this.get("target")):(r=t instanceof Se?((n=Bt(e)||{}).id=t.id,i):Wt(t)?(n=t,e):((n=Bt(e)||{}).x=t.x,n.y=t.y,i),this.set("target",n,r));var n,r},router:function(t,e,i){if(void 0===t){var n=this.get("router");return n?"object"==typeof n?Bt(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},s=r?e:i;return this.set("router",o,s)},connector:function(t,e,i){if(void 0===t){var n=this.get("connector");return n?"object"==typeof n?Bt(n):n:this.get("smooth")?{name:"smooth"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},s=r?e:i;return this.set("connector",o,s)},label:function(t,e,i){var n=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=n.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,i)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},insertLabel:function(t,e,i){if(!e)throw new Error("dia.Link: no label provided");var n=this.labels(),r=n.length;return(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1),n.splice(t,0,e),this.labels(n,i)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var i=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,i.splice(t,1),this.labels(i,e)},vertex:function(t,e,i){var n=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=n.length+t),arguments.length<=1)return this.prop(["vertices",t]);var r=this._normalizeVertex(e);return this.prop(["vertices",t],r,i)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var i=[],n=0;n<t.length;n++){var r=t[n],o=this._normalizeVertex(r);i.push(o)}return this.set("vertices",i,e)},insertVertex:function(t,e,i){if(!e)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),r=n.length;(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1);var o=this._normalizeVertex(e);return n.splice(t,0,o),this.vertices(n,i)},removeVertex:function(t,e){var i=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,i.splice(t,1),this.vertices(i,e)},_normalizeVertex:function(t){return!Wt(t)?{x:t.x,y:t.y}:t},translate:function(e,i,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=i,this.applyToPoints(function(t){return{x:(t.x||0)+e,y:(t.y||0)+i}},t)},scale:function(e,i,n,t){return this.applyToPoints(function(t){return E(t).scale(e,i,n).toJSON()},t)},applyToPoints:function(t,e){if(!Rt(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var i={},n=this.attributes,r=n.source,o=n.target;r.id||(i.source=t(r)),o.id||(i.target=t(o));var s=this.vertices();return 0<s.length&&(i.vertices=s.map(t)),this.set(i,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new E(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new E(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){var t=[this.getSourcePoint(),this.getTargetPoint()],e=this.vertices();return 0<e.length&&Array.prototype.push.apply(t,e.map(E)),new D(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var i=this.getSourceElement(),n=this.getTargetElement(),r=this.getParentCell();i&&n&&(e=i===n||i.isEmbeddedIn(n)?n:n.isEmbeddedIn(i)?i:this.graph.getCommonAncestor(i,n)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.attributes,i=e.source,n=e.target,r=i.id,o=n.id;if(!r||!o)return!1;var s=r===o;if(!s&&t.deep&&this.graph){var a=this.getSourceCell(),l=this.getTargetCell();s=a.isEmbeddedIn(l)||l.isEmbeddedIn(a)}return s},getSourceCell:function(){var t=this.graph,e=this.attributes.source;return e&&e.id&&t&&t.getCell(e.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){var t=this.graph,e=this.attributes.target;return e&&e.id&&t&&t.getCell(e.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=ge(t)||ce(t)?t:t.id,i=this.getRelationshipAncestor();return!!i&&(i.id===e||i.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var i=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&i}}),Ue=function(t){var e=Ot(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Pe,this.portLabelLayoutNamespace=Re,this._init(e)};Ue.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(t,r){var e=this.getGroup(t),i=this.getPortsByGroup(t),n=e.position||{},o=n.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=n.args||{},l=i.map(function(t){return t&&t.position&&t.position.args}),c=s[o](l,r,a),g={ports:i,result:[]};return Ut(c).reduce(function(t,e,i){var n=t.ports[i];return t.result.push({portId:n.id,portTransformation:e,labelTransformation:this._getPortLabelLayout(n,E(e),r),portAttrs:n.attrs,portSize:n.size,labelSize:n.label.size}),t}.bind(this),g),g.result},_getPortLabelLayout:function(t,e,i){var n=this.portLabelLayoutNamespace,r=t.label.position.name||"left";return n[r]?n[r](e,i,t.label.position.args):null},_init:function(t){if(le(t.groups))for(var e=Object.keys(t.groups),i=0,n=e.length;i<n;i++){var r=e[i];this.groups[r]=this._evaluateGroup(t.groups[r])}for(var o=Ut(t.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return se(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Tt({},t),i=this.getGroup(t.group);return e.markup=e.markup||i.markup,e.attrs=se({},i.attrs,e.attrs),e.position=this._createPositionNode(i,e),e.label=se({},i.label,this._getLabel(e)),e.z=this._getZIndex(i,e),e.size=Tt({},i.size,e.size),e},_getZIndex:function(t,e){return ce(e.z)?e.z:ce(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return se({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var i,n={};Rt(t)?(i="fn",n.fn=t):ge(t)?i=t:void 0===t?i=e?"left":null:Array.isArray(t)?(i="absolute",n.x=t[0],n.y=t[1]):le(t)&&(i=t.name,Tt(n,t.args));var r={args:n};return i&&(r.name=i),r},_getLabel:function(t,e){var i=t.label||{},n=i;return n.position=this._getPosition(i.position,e),n}};var Xe={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Ut(t.items).forEach(function(t){e[t.id]=!0});var i=this.previous("ports")||{},n={};Ut(i.items).forEach(function(t){e[t.id]||(n[t.id]=!0)});var r=this.graph;r&&!Et(n)&&(r.getConnectedLinks(this,{inbound:!0}).forEach(function(t){n[t.get("target").port]&&t.remove()}),r.getConnectedLinks(this,{outbound:!0}).forEach(function(t){n[t.get("source").port]&&t.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&0<t.length},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return Ot(this.prop("ports/items"))||[]},getGroupPorts:function(e){var t=Ut(this.prop(["ports","items"])).filter(function(t){return t.group===e});return Ot(t)},getPort:function(e){return Ot(Ut(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,H(this.size())).reduce(function(t,e){var i=e.portTransformation;return t[e.portId]={x:i.x,y:i.y,angle:i.angle},t},{})},getPortIndex:function(t){var e=le(t)?t.id:t;return this._isValidPortId(e)?Ut(this.prop("ports/items")).findIndex(function(t){return t.id===e}):-1},addPort:function(t,e){if(!le(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var i=Tt([],this.prop("ports/items"));return i.push(t),this.prop("ports/items",i,e),this},portProp:function(t,e,i,n){var r=this.getPortIndex(t);if(-1===r)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",r].concat(e):ge(e)?o[0]=["ports/items/",r,"/",e].join(""):(o=["ports/items/"+r],Wt(e)&&(o.push(e),o.push(i))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],i=Ut((t=t||{}).items);return i.forEach(function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())},this),Gt(i,"id").length!==i.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!le(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Tt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){var i=e||{},n=this.getPortIndex(t);if(-1!==n){var r=Tt([],this.prop(["ports","items"]));r.splice(n,1),i.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],r,i),this.stopBatch("port-remove")}return this},removePorts:function(t,e){var i,n;if(Array.isArray(t)){if(i=e||{},0===t.length)return this.this;n=Tt([],this.prop(["ports","items"])).filter(function(i){return!t.some(function(t){var e=le(t)?t.id:t;return i.id===e})})}else i=t||{},n=[];return this.startBatch("port-remove"),i.rewrite=!0,this.prop(["ports","items"],n,i),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(0<e.length)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new Ue(this.get("ports"));var i=this._portSettingsData.getPorts();if(t){var n=i.filter(function(e){if(!t.find(function(t){return t.id===e.id}))return e}),r=t.filter(function(e){if(!i.find(function(t){return t.id===e.id}))return e});0<r.length&&this.trigger("ports:remove",this,r),0<n.length&&this.trigger("ports:add",this,n)}}},Fe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var i=[],n=this._getContainerElement(),t=0,e=n.node.childNodes.length;t<e;t++)i.push(n.node.childNodes[t]);var r=Ft(this.model._portSettingsData.getPorts(),"z");Ut(r.auto).forEach(function(t){var e=this._getPortElement(t);n.append(e),i.push(e)},this);for(var o=Object.keys(r),s=0;s<o.length;s++){var a=o[s];if("auto"!==a){var l=parseInt(a,10);this._appendPorts(r[a],l,i)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,i){var n=this._getContainerElement(),r=Ut(t).map(this._getPortElement,this);i[e]||e<0?q(i[Math.max(e,0)]).before(r):n.append(r)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){var i=this._portElementsCache[t];if(!i)return null;var n=i.portContentElement.node,r=i.portContentSelectors;return this.findBySelector(e,n,r)[0]},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Zt(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e,i,n,r=q(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(t);if(Array.isArray(o)){var s=this.parseDOMJSON(o,r.node),a=s.fragment;e=1<a.childNodes.length?q("g").append(a):q(a.firstChild),n=s.selectors}else e=q(o),Array.isArray(e)&&(e=q("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});var l,c,g=this._getPortLabelMarkup(t.label);if(Array.isArray(g)){var h=this.parseDOMJSON(g,r.node),u=h.fragment;i=1<u.childNodes.length?q("g").append(u):q(u.firstChild),l=h.selectors}else i=q(g),Array.isArray(i)&&(i=q("g").append(i));if(!i)throw new Error("ElementView: Invalid port label markup.");if(n&&l){for(var d in l)if(n[d]&&d!==this.selector)throw new Error("ElementView: selectors within port must be unique.");c=Tt({},n,l)}else c=n||l;return r.append([e.addClass("joint-port-body"),i.addClass("joint-port-label")]),this._portElementsCache[t.id]={portElement:r,portLabelElement:i,portSelectors:c,portLabelSelectors:l,portContentElement:e,portContentSelectors:n},r},_updatePortGroup:function(t){for(var e=H(this.model.size()),i=this.model._portSettingsData.getGroupPortsMetrics(t,e),n=0,r=i.length;n<r;n++){var o=i[n],s=o.portId,a=this._portElementsCache[s]||{},l=o.portTransformation;this.applyPortTransform(a.portElement,l),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new H(o.portSize),selectors:a.portSelectors});var c=o.labelTransformation;c&&(this.applyPortTransform(a.portLabelElement,c,-l.angle||0),this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new H(o.labelSize),selectors:a.portLabelSelectors}))}},applyPortTransform:function(t,e,i){var n=q.createSVGMatrix().rotate(i||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(n,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ve=Se.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Se.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,i){var n=ce(e);if((i=(n?i:t)||{}).parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var r=this.getParentCell(),o=r&&!r.isLink()?r.get("position"):{x:0,y:0}}if(n){if(i.parentRelative&&(t+=o.x,e+=o.y),i.deep){var s=this.get("position");this.translate(t-s.x,e-s.y,i)}else this.set("position",{x:t,y:e},i);return this}var a=E(this.get("position"));return i.parentRelative?a.difference(o):a},translate:function(t,e,i){if(e=e||0,0===(t=t||0)&&0===e)return this;(i=i||{}).translateBy=i.translateBy||this.id;var n=this.get("position")||{x:0,y:0};if(i.restrictedArea&&i.translateBy===this.id){var r=this.getBBox({deep:!0}),o=i.restrictedArea,s=n.x-r.x,a=n.y-r.y,l=Math.max(o.x+s,Math.min(o.x+o.width+s-r.width,n.x+t)),c=Math.max(o.y+a,Math.min(o.y+o.height+a-r.height,n.y+e));t=l-n.x,e=c-n.y}var g={x:n.x+t,y:n.y+e};return i.tx=t,i.ty=e,i.transition?(le(i.transition)||(i.transition={}),this.transition("position",g,Tt({},i.transition,{valueFunction:bt.object})),Zt(this.getEmbeddedCells(),"translate",t,e,i)):(this.startBatch("translate",i),this.set("position",g,i),Zt(this.getEmbeddedCells(),"translate",t,e,i),this.stopBatch("translate",i)),this},size:function(t,e,i){var n=this.get("size");return void 0===t?{width:n.width,height:n.height}:(le(t)&&(i=e,e=ce(t.height)?t.height:n.height,t=ce(t.width)?t.width:n.width),this.resize(t,e,i))},resize:function(t,e,i){if(i=i||{},this.startBatch("resize",i),i.direction){var n=this.get("size");switch(i.direction){case"left":case"right":e=n.height;break;case"top":case"bottom":t=n.width}var r=C(this.get("angle")||0),o={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(o+=Math.floor((r+45)/90),o%=4);var s=this.getBBox(),a=s[["bottomLeft","corner","topRight","origin"][o]](),l=E(a).rotate(s.center(),-r),c=Math.sqrt(t*t+e*e)/2,g=o*Math.PI/2;g+=Math.atan(o%2==0?e/t:t/e),g-=y(r);var h=E.fromPolar(c,g,l),u=E(h).offset(t/-2,e/-2);this.set("size",{width:t,height:e},i),this.position(u.x,u.y,i)}else this.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this},scale:function(t,e,i,n){var r=this.getBBox().scale(t,e,i);return this.startBatch("scale",n),this.position(r.x,r.y,n),this.resize(r.width,r.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t){void 0===t&&(t={});var e=this.graph;if(!e)throw new Error("Element must be part of a graph.");var i=this.getEmbeddedCells().filter(function(t){return t.isElement()});if(0===i.length)return this;this.startBatch("fit-embeds",t),t.deep&&Zt(i,"fitEmbeds",t);var n=wt(t.padding),r=n.left,o=n.right,s=n.top,a=n.bottom,l=e.getCellsBBox(i),c=l.x,g=l.y,h=l.width,u=l.height;return c-=r,g-=s,h+=r+o,u+=a+s,this.set({position:{x:c,y:g},size:{width:h,height:u}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,i,n){if(i){var r=this.getBBox().center(),o=this.get("size"),s=this.get("position");r.rotate(i,this.get("angle")-t);var a=r.x-o.width/2-s.x,l=r.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:i}),this.position(s.x+a,s.y+l,n),this.rotate(t,e,null,n),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,n);return this},angle:function(){return C(this.get("angle")||0)},getBBox:function(t){if((t=t||{}).deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var i=this.get("position"),n=this.get("size");return new H(i.x,i.y,n.width,n.height)},getPointFromConnectedLink:function(t,e){var i=this.getBBox(),n=i.center(),r=t.get(e);if(!r)return n;var o=r.port;if(!o||!this.hasPort(o))return n;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),l=new E(a[o]).offset(i.origin()),c=this.angle();return c&&l.rotate(n,-c),l}});Tt(Ve.prototype,Xe);var Je=s.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&qt(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var i=e.collection,n=i.cellNamespace,r=new("link"===t.type?We:rt(n,t.type,".")||Ve)(t,e);return e.dry||(r.graph=i.graph),r},comparator:function(t){return t.get("z")||0}}),He=s.Model.extend({_batches:{},initialize:function(t,e){var i=new Je([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});s.Model.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.attributes,i=e.source,n=e.target;i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.attributes,i=e.source,n=e.target;i.id&&this._out[i.id]&&this._out[i.id][t.id]&&delete this._out[i.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var i=t.attributes.source;i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var i=t.get("target");i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=s.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,i){var n;return"object"==typeof t?(n=t,i=e):(n={})[t]=e,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,i),n=te(n,"cells")),s.Model.prototype.set.call(this,n,i)},clear:function(t){t=Tt({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);for(var i=e.sortBy(function(t){return t.isLink()?1:2});i.shift().remove(t),0<i.length;);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var i;if(t instanceof s.Model?(i=t.attributes,t.graph||e&&e.dry||(t.graph=this)):i=t,!ge(i.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof s.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=Jt(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(t){this.addCell(t,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var i=Ut(t).map(function(t){return this._prepareCell(t,e)},this);return this.get("cells").reset(i,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),Zt(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,i){(i=i||{}).clear||(i.disconnectLinks?this.disconnectLinks(t,i):this.removeLinks(t,i)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return Object.keys(this._nodes).map(this.getCell,this)},getLinks:function(){return Object.keys(this._edges).map(this.getCell,this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,a){var r=(a=a||{}).indirect,o=a.inbound,s=a.outbound;void 0===o&&void 0===s&&(o=s=!0);var l=[],c={};function g(n,t){if(ne(n.getOutboundEdges(t.id),function(t,e){if(!c[e]){var i=n.getCell(e);l.push(i),c[e]=!0,r&&(o&&h(n,i),s&&g(n,i))}}.bind(n)),r&&t.isLink()){var e=t.getTargetCell();e&&e.isLink()&&(c[e.id]||(l.push(e),g(n,e)))}}function h(n,t){if(ne(n.getInboundEdges(t.id),function(t,e){if(!c[e]){var i=n.getCell(e);l.push(i),c[e]=!0,r&&(o&&h(n,i),s&&g(n,i))}}.bind(n)),r&&t.isLink()){var e=t.getSourceCell();e&&e.isLink()&&(c[e.id]||(l.push(e),h(n,e)))}}if(s&&g(this,t),o&&h(this,t),a.deep){var e=t.getEmbeddedCells({deep:!0}),u={};e.forEach(function(t){t.isElement()&&(u[t.id]=!0)}),e.forEach(function(t){t.isLink()||(s&&ne(this.getOutboundEdges(t.id),function(t,e){if(!c[e]){var i=this.getCell(e).attributes,n=i.source,r=i.target,o=n.id,s=r.id;if(!a.includeEnclosed&&o&&u[o]&&s&&u[s])return;l.push(this.getCell(e)),c[e]=!0}}.bind(this)),o&&ne(this.getInboundEdges(t.id),function(t,e){if(!c[e]){var i=this.getCell(e).attributes,n=i.source,r=i.target,o=n.id,s=r.id;if(!a.includeEnclosed&&o&&u[o]&&s&&u[s])return;l.push(this.getCell(e)),c[e]=!0}}.bind(this)))},this)}return l},getNeighbors:function(l,c){c||(c={});var g=c.inbound,h=c.outbound;void 0===g&&void 0===h&&(g=h=!0);var t=this.getConnectedLinks(l,c).reduce(function(t,e){var i=e.attributes,n=i.source,r=i.target,o=e.hasLoop(c);if(g&&qt(n,"id")&&!t[n.id]){var s=this.getCell(n.id);s.isElement()&&(!o&&(!s||s===l||c.deep&&s.isEmbeddedIn(l))||(t[n.id]=s))}if(h&&qt(r,"id")&&!t[r.id]){var a=this.getCell(r.id);a.isElement()&&(!o&&(!a||a===l||c.deep&&a.isEmbeddedIn(l))||(t[r.id]=a))}return t}.bind(this),{});if(l.isLink()){if(g){var e=l.getSourceCell();e&&e.isElement()&&!t[e.id]&&(t[e.id]=e)}if(h){var i=l.getTargetCell();i&&i.isElement()&&!t[i.id]&&(t[i.id]=i)}}return Ut(t)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(t){for(var e=[],i=t.get("parent");i;)e.push(i),i=this.getCell(i).get("parent");return e},this);t=t.sort(function(t,e){return t.length-e.length});var e=Ut(t.shift()).find(function(e){return t.every(function(t){return t.includes(e)})});return this.getCell(e)},getSuccessors:function(e,t){t=t||{};var i=[];return this.search(e,function(t){t!==e&&i.push(t)},Tt({},t,{outbound:!0})),i},cloneCells:ue,cloneSubgraph:function(t,e){var i=this.getSubgraph(t,e);return this.cloneCells(i)},getSubgraph:function(t,e){e=e||{};var s=[],a={},l=[],i=[];return Ut(t).forEach(function(t){(a[t.id]||(s.push(t),(a[t.id]=t).isLink()?i.push(t):l.push(t)),e.deep)&&t.getEmbeddedCells({deep:!0}).forEach(function(t){a[t.id]||(s.push(t),(a[t.id]=t).isLink()?i.push(t):l.push(t))})}),i.forEach(function(t){var e=t.attributes,i=e.source,n=e.target;if(i.id&&!a[i.id]){var r=this.getCell(i.id);s.push(r),a[r.id]=r,l.push(r)}if(n.id&&!a[n.id]){var o=this.getCell(n.id);s.push(this.getCell(n.id)),a[o.id]=o,l.push(o)}},this),l.forEach(function(t){this.getConnectedLinks(t,e).forEach(function(t){var e=t.attributes,i=e.source,n=e.target;!a[t.id]&&i.id&&a[i.id]&&n.id&&a[n.id]&&(s.push(t),a[t.id]=t)})},this),s},getPredecessors:function(e,t){t=t||{};var i=[];return this.search(e,function(t){t!==e&&i.push(t)},Tt({},t,{inbound:!0})),i},search:function(t,e,i){(i=i||{}).breadthFirst?this.bfs(t,e,i):this.dfs(t,e,i)},bfs:function(t,e,i){void 0===i&&(i={});var n={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var s=o.shift();if(!n[s.id]&&!(n[s.id]=!0)!==e.call(this,s,r[s.id]))for(var a=this.getNeighbors(s,i),l=0,c=a.length;l<c;l++){var g=a[l];r[g.id]=r[s.id]+1,o.push(g)}}},dfs:function(t,e,i){void 0===i&&(i={});var n={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var s=o.pop();if(!n[s.id]&&!(n[s.id]=!0)!==e.call(this,s,r[s.id]))for(var a=this.getNeighbors(s,i),l=o.length,c=0,g=a.length;c<g;c++){var h=a[c];r[h.id]=r[s.id]+1,o.splice(l,0,h)}}},getSources:function(){var i=[];return ne(this._nodes,function(t,e){this._in[e]&&!Et(this._in[e])||i.push(this.getCell(e))}.bind(this)),i},getSinks:function(){var i=[];return ne(this._nodes,function(t,e){this._out[e]&&!Et(this._out[e])||i.push(this.getCell(e))}.bind(this)),i},isSource:function(t){return!this._in[t.id]||Et(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Et(this._out[t.id])},isSuccessor:function(e,i){var n=!1;return this.search(e,function(t){if(t===i&&t!==e)return!(n=!0)},{outbound:!0}),n},isPredecessor:function(e,i){var n=!1;return this.search(e,function(t){if(t===i&&t!==e)return!(n=!0)},{inbound:!0}),n},isNeighbor:function(t,r,e){var o=(e=e||{}).inbound,s=e.outbound;void 0===o&&void 0===s&&(o=s=!0);var a=!1;return this.getConnectedLinks(t,e).forEach(function(t){var e=t.attributes,i=e.source,n=e.target;return o&&qt(i,"id")&&i.id===r.id?!(a=!0):s&&qt(n,"id")&&n.id===r.id?!(a=!0):void 0}),a},disconnectLinks:function(e,i){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},i)})},removeLinks:function(t,e){Zt(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(e){return this.getElements().filter(function(t){return t.getBBox().containsPoint(e)})},findModelsInArea:function(e,t){e=M(e);var i=(t=jt(t||{},{strict:!1})).strict?"containsRect":"intersect";return this.getElements().filter(function(t){return e[i](t.getBBox())})},findModelsUnderElement:function(e,t){t=jt(t||{},{searchBy:"bbox"});var i=e.getBBox();return("bbox"===t.searchBy?this.findModelsInArea(i):this.findModelsFromPoint(i[t.searchBy]())).filter(function(t){return e.id!==t.id&&!t.isEmbeddedIn(e)})},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,r){return r||(r={}),Ut(t).reduce(function(t,e){var i=e.getBBox(r);if(!i)return t;var n=e.angle();return n&&(i=i.bbox(n)),t?t.union(i):i},null)},translate:function(t,e,i){var n=this.getCells().filter(function(t){return!t.isEmbedded()});return Zt(n,"translate",t,e,i),this},resize:function(t,e,i){return this.resizeCells(t,e,this.getCells(),i)},resizeCells:function(t,e,i,n){var r=this.getCellsBBox(i);if(r){var o=Math.max(t/r.width,0),s=Math.max(e/r.height,0);Zt(i,"scale",o,s,r.origin(),n)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Tt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Tt({},e,{batchName:t}))},hasActiveBatch:function(t){var e=this._batches;return(0===arguments.length?Ut(e):Array.isArray(t)?t:[t]).some(function(t){return 0<e[t]})}},{validations:{multiLinks:function(t,e){var i=e.attributes,r=i.source,o=i.target;if(r.id&&o.id){var n=e.getSourceCell();if(n)if(1<t.getConnectedLinks(n,{outbound:!0}).filter(function(t){var e=t.attributes,i=e.source,n=e.target;return i&&i.id===r.id&&(!i.port||i.port===r.port)&&n&&n.id===o.id&&(!n.port||n.port===o.port)}).length)return!1}return!0},linkPinning:function(t,e){var i=e.attributes,n=i.source,r=i.target;return n.id&&r.id}}});ke(He.prototype,["resetCells","addCells","removeCells"],De.cells);var _e={},Qe=s.View.extend({options:{},theme:null,themeClassNamePrefix:tt("theme-"),requireSetThemeOverride:!1,defaultTheme:$.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Tt({},this.options,t),s.View.call(this,t)},initialize:function(){(_e[this.cid]=this).setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=$t(this,"children")),t){var e=this.svgElement,i=q.namespace[e?"svg":"xhtml"],n=it(t,i);(e?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(t,e){for(var i=e;i&&1===i.nodeType;){var n=i.getAttribute(t);if(n)return n;if(i===this.el)return null;i=i.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement($t(this,"el"));else{var t=$t(this,"tagName"),e=Tt({},$t(this,"attributes")),i=Tt({},$t(this,"style"));this.id&&(e.id=$t(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(i)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(q.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof s.$?t:s.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=q(this.el))},_ensureElClassName:function(){var t=$t(this,"className");if(t){var e=tt(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),_e[this.cid]=null,s.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,i){if(!e)return this;i||(i={});var n=this.getEventNamespace();for(var r in e){var o=e[r];"function"!=typeof o&&(o=this[o]),o&&S(t).on(r+n,i,o.bind(this))}return this},undelegateElementEvents:function(t){return S(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=$t(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var i=t.data,n="__"+this.cid+"__";return void 0===e?i&&i[n]||{}:(i||(i=t.data={}),i[n]||(i[n]={}),Tt(i[n],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Tt({},t[0])||{},i=t[1]&&Tt({},t[1])||{},n=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof n&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},e.render.__render__=n,s.View.extend.call(this,e,i)}}),Ke={views:_e,View:Qe},qe=Qe.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var n=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(t,e,i){n.push("type-"+i.slice(0,e+1).join("-"))}),n.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,i,n={},r={},o=0,s=this.presentationAttributes;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];for(Array.isArray(l)||(l=[l]),t=0,e=l.length;t<e;t++){var c=n[i=l[t]];c||(c=n[i]=1<<o++),r[a]|=c}}var g=this.initFlag;for(Array.isArray(g)||(g=[g]),t=0,e=g.length;t<e;t++)n[i=g[t]]||(n[i]=1<<o++);if(25<o)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=n,this._presentationAttributes=r},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var i=0;if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i|=e[t[n]];else i|=e[t];return i},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||ct(this),Qe.call(this,t)},initialize:function(){this.setFlags(),Qe.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var i=t.getChangeFlag(this._presentationAttributes);if(!e.updateHandled&&i){e.dirty&&this.hasFlag(i,"UPDATE")&&(i|=this.getFlag("RENDER")),e.tool&&(e.async=!1);var n=this.paper;n&&n.requestViewUpdate(this,i,this.UPDATE_PRIORITY,e)}},parseDOMJSON:function(t,e){var i=it(t),n=i.selectors,r=i.groupSelectors;for(var o in r){if(n[o])throw new Error("dia.CellView: ambiguous group selector");n[o]=r[o]}if(e){var s=this.selector;if(n[s])throw new Error("dia.CellView: ambiguous root selector.");n[s]=e}return{fragment:i.fragment,selectors:n}},can:function(t){var e=Rt(this.options.interactive)?this.options.interactive(this):this.options.interactive;return le(e)&&!1!==e[t]||ae(e)&&!1!==e},findBySelector:function(t,e,i){if(e||(e=this.el),i||(i=this.selectors),!t||"."===t)return[e];if(i){var n=i[t];if(n)return Array.isArray(n)?n:[n]}return $.useCSSSelectors?S(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var i=this.model;e=i.getBBox().bbox(i.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),i=this.getNodeMatrix(t),n=this.getRootTranslateMatrix(),r=this.getRootRotateMatrix();return q.transformRect(e,n.multiply(r).multiply(i))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),i=this.getNodeMatrix(t),n=this.getRootTranslateMatrix();return q.transformRect(e,n.multiply(i))},getRootTranslateMatrix:function(){var t=this.model.position();return q.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=q.createSVGMatrix(),e=this.model,i=e.angle();if(i){var n=e.getBBox(),r=n.width/2,o=n.height/2;t=t.translate(r,o).rotate(i).translate(-r,-o)}return t},highlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!==this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t),i=this.$el;0===e.length&&(e=i);do{var n=e.attr("magnet");if((n||e.is(i))&&"false"!==n)return e[0];e=e.parent()}while(0<e.length)},getSelector:function(t,e){var i;if(t===this.el)return"string"==typeof e&&(i="> "+e),i;if(t){var n=q(t).index()+1;i=t.tagName+":nth-child("+n+")",e&&(i+=" > "+e),i=this.getSelector(t.parentNode,i)}return i},getLinkEnd:function(t){for(var e,i=[],n=arguments.length-1;0<n--;)i[n]=arguments[n+1];var r=this.model,o=r.id,s=this.findAttribute("port",t),a=t.getAttribute("joint-selector"),l={id:o};return null!=a&&(l.magnet=a),null!=s?(l.port=s,r.hasPort(s)||a||(l.selector=this.getSelector(t))):null==a&&this.el!==t&&(l.selector=this.getSelector(t)),(e=this).customizeLinkEnd.apply(e,[l,t].concat(i))},customizeLinkEnd:function(t,e,i,n,r,o){var s=this.paper,a=s.options.connectionStrategy;if("function"==typeof a){var l=a.call(s,t,this,e,new E(i,n),r,o,s);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e=this.el,i=t.port,n=t.magnet,r=this.model;return null!=i&&r.isElement()&&r.hasPort(i)?this.findPortNode(i,n)||e:(n||(n=t.selector),n||null==i||(n='[port="'+i+'"]'),this.findBySelector(n,e,this.selectors)[0])},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Et(e)||(t instanceof SVGElement?q(t).attr(e):S(t).attr(e))},processNodeAttributes:function(t,e){var i,n,r,o,s,a,l,c,g,h=[];for(i in e)e.hasOwnProperty(i)&&(n=e[i],!(r=this.getAttributeDefinition(i))||Rt(r.qualify)&&!r.qualify.call(this,n,t,e)?(a||(a={}),a[gt(i)]=n):(ge(r.set)&&(a||(a={}),a[r.set]=n),null!==n&&h.push(i,r)));for(o=0,s=h.length;o<s;o+=2)i=h[o],r=h[o+1],n=e[i],Rt(r.set)&&(l||(l={}),l[i]=n),Rt(r.position)&&(c||(c={}),c[i]=n),Rt(r.offset)&&(g||(g={}),g[i]=n);return{raw:e,normal:a,set:l,position:c,offset:g}},updateRelativeAttributes:function(t,e,i,n){var r,o;n||(n={});var s=e.raw||{},a=e.normal||{},l=e.set,c=e.position,g=e.offset;for(r in l){o=l[r];var h=this.getAttributeDefinition(r).set.call(this,o,i.clone(),t,s);le(h)?Tt(a,h):void 0!==h&&(a[r]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,a);else{var u,d,f,p=a.transform,I=q.transformStringToMatrix(p),m=E(I.e,I.f);if(p&&(a=te(a,"transform"),I.e=I.f=0),c||g){var A=this.getNodeScale(t,n.scalableNode);u=A.sx,d=A.sy}var v=!1;for(r in c)o=c[r],(f=this.getAttributeDefinition(r).position.call(this,o,i.clone(),t,s))&&(m.offset(E(f).scale(u,d)),v||(v=!0));this.setNodeAttributes(t,a);var C=!1;if(g){var w=this.getNodeBoundingRect(t);if(0<w.width&&0<w.height){var y=q.transformRect(w,I).scale(1/u,1/d);for(r in g)o=g[r],(f=this.getAttributeDefinition(r).offset.call(this,o,y,t,s))&&(m.offset(E(f).scale(u,d)),C||(C=!0))}}(void 0!==p||v||C)&&(m.round(1),I.e=m.x,I.f=m.y,t.setAttribute("transform",q.matrixToTransformString(I)))}},getNodeScale:function(t,e){var i,n;if(e&&e.contains(t)){var r=e.scale();i=1/r.sx,n=1/r.sy}else n=i=1;return{sx:i,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var i=q.ensureId(t),n=e[i];return n||(n=e[i]={}),n},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=q(t).getBBox()),new H(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var i=this.rotatableNode||this.el;e.magnetMatrix=q(t).getTransformToElement(i)}return q.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=q(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,i,n){var r,o,s,a,l={},c=[];for(var g in t)if(t.hasOwnProperty(g)&&(s=t[g],Wt(s))){var h=i[g]=this.findBySelector(g,e,n);for(r=0,o=h.length;r<o;r++){var u=h[r];a=q.ensureId(u);var d=n&&n[g]===u,f=l[a];if(f){f.array||(c.push(a),f.array=!0,f.attributes=[f.attributes],f.selectedLength=[f.selectedLength]);var p=f.attributes,I=f.selectedLength;if(d)p.unshift(s),I.unshift(-1);else{var m=Pt(I,o);p.splice(m,0,s),I.splice(m,0,o)}}else l[a]={attributes:s,selectedLength:d?-1:o,node:u,array:!1}}}for(r=0,o=c.length;r<o;r++)(s=l[a=c[r]]).attributes=se.apply(void 0,[{}].concat(s.attributes.reverse()));return l},getEventTarget:function(t,e){void 0===e&&(e={});var i=t.target,n=t.type,r=t.clientX;void 0===r&&(r=0);var o=t.clientY;return void 0===o&&(o=0),e.fromPoint||"touchmove"===n||"touchend"===n?document.elementFromPoint(r,o):i},updateDOMSubtreeAttributes:function(t,e,i){i||(i={}),i.rootBBox||(i.rootBBox=H()),i.selectors||(i.selectors=this.selectors);var n,r,o,s,a,l,c={},g={},h=[],u=i.roAttributes,d=this.findNodesAttributes(u||e,t,c,i.selectors),f=u?this.findNodesAttributes(e,t,c,i.selectors):d;for(var p in d)if(o=(s=d[p]).attributes,r=s.node,(a=this.processNodeAttributes(r,o)).set||a.position||a.offset){var I,m=f[p]&&f[p].attributes,A=m&&void 0===o.ref?m.ref:o.ref;if(A){if(!(I=(c[A]||this.findBySelector(A,t,i.selectors))[0]))throw new Error('dia.ElementView: "'+A+'" reference does not exist.')}else I=null;n={node:r,refNode:I,processedAttributes:a,allAttributes:m};var v=h.findIndex(function(t){return t.refNode===r});-1<v?h.splice(v,0,n):h.push(n)}else this.setNodeAttributes(r,a.normal);for(var C=0,w=h.length;C<w;C++){n=h[C],r=n.node,I=n.refNode;var y=q(i.rotatableNode),b=I?q.ensureId(I):"",N=!!y&&!!I&&y.contains(I),M=g[b];if(!M){var x=N?y:t;M=g[b]=I?q(I).getBBox({target:x}):i.rootBBox}u?(a=this.processNodeAttributes(r,n.allAttributes),this.mergeProcessedAttributes(a,n.processedAttributes)):a=n.processedAttributes;var S=M;N&&!y.contains(r)&&(l||(l=q.transformStringToMatrix(y.attr("transform"))),S=q.transformRect(M,l)),this.updateRelativeAttributes(r,a,S,i)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Tt(t.set,e.set),Tt(t.position,e.position),Tt(t.offset,e.offset);var i=t.normal&&t.normal.transform;void 0!==i&&e.normal&&(e.normal.transform=i),t.normal=e.normal},onRemove:function(){this.removeTools()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!!e&&(!t||e.getName()===t)},addTools:function(t){return this.removeTools(),t&&((this._toolsView=t).configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this)),t.mount()),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},pointerdblclick:function(t,e,i){this.notify("cell:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){this.notify("cell:pointerclick",t,e,i)},contextmenu:function(t,e,i){this.notify("cell:contextmenu",t,e,i)},pointerdown:function(t,e,i){var n=this.model,r=n.graph;r&&(n.startBatch("pointer"),this.eventData(t,{graph:r})),this.notify("cell:pointerdown",t,e,i)},pointermove:function(t,e,i){this.notify("cell:pointermove",t,e,i)},pointerup:function(t,e,i){var n=this.eventData(t).graph;this.notify("cell:pointerup",t,e,i),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,i,n){this.notify("cell:mousewheel",t,e,i,n)},onevent:function(t,e,i,n){this.notify(e,t,i,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave:function(t){var e=this.paper;e.isAsync()&&e.dumpView(this);var i=this.getEventTarget(t,{fromPoint:!0}),n=e.findView(i);n!==this&&(this.mouseleave(t),n&&n.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{addPresentationAttributes:function(t){return se({},this.prototype.presentationAttributes,t,function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?Gt(t.concat(e)):void 0})}}),$e=qe.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=qe.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){qe.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:["UPDATE"],position:["TRANSLATE","TOOLS"],size:["RESIZE","PORTS","TOOLS"],angle:["ROTATE","TOOLS"],markup:["RENDER"],ports:["PORTS"]},initFlag:["RENDER"],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){var i=$.useCSSSelectors;return this.hasFlag(t,"PORTS")&&(this._removePorts(),this._cleanPortsCache()),this.hasFlag(t,"RENDER")?(this.render(),this.updateTools(e),t=this.removeFlag(t,["RENDER","UPDATE","RESIZE","TRANSLATE","ROTATE","PORTS"])):(this.hasFlag(t,"RESIZE")&&(this.resize(e),t=this.removeFlag(t,["RESIZE","UPDATE"])),this.hasFlag(t,"UPDATE")&&(this.update(this.model,null,e),t=this.removeFlag(t,"UPDATE"),i&&(t=this.removeFlag(t,"PORTS"))),this.hasFlag(t,"TRANSLATE")&&(this.translate(),t=this.removeFlag(t,"TRANSLATE")),this.hasFlag(t,"ROTATE")&&(this.rotate(),t=this.removeFlag(t,"ROTATE")),this.hasFlag(t,"PORTS")&&(this._renderPorts(),t=this.removeFlag(t,"PORTS"))),this.hasFlag(t,"TOOLS")&&(this.updateTools(e),t=this.removeFlag(t,"TOOLS")),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();var i=$.useCSSSelectors;i&&this._removePorts();var n=this.model,r=n.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:new H(n.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===r?null:e}),i&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),i=this.selectors=e.selectors;this.rotatableNode=q(i[this.rotatableSelector])||null,this.scalableNode=q(i[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(q(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),$.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var i=t.size;return"rotate("+e+","+i.width/2+","+i.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,i=e.angle(),n=e.size(),r=this.scalableNode,o=!1;0<r.node.getElementsByTagName("path").length&&(o=!0);var s=r.getBBox({recursive:o}),a=n.width/(s.width||1),l=n.height/(s.height||1);r.attr("transform","scale("+a+","+l+")");var c=this.rotatableNode,g=c&&c.attr("transform");if(g){c.attr("transform",g+" rotate("+-i+","+n.width/2+","+n.height/2+")");var h=r.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},Tt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t){t||(t={});var e=t.model||this.model,i=(t.paper||this.paper).model;e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});var n=i.getElements().reduce(function(t,e){return Math.max(t,e.attributes.z||0)},0);i.getConnectedLinks(e,{deep:!0,includeEnclosed:!0}).forEach(function(t){t.attributes.z<=n&&t.set("z",n+1,{ui:!0})}),e.stopBatch("to-front");var r=e.parent();r&&i.getCell(r).unembed(e,{ui:!0})},processEmbedding:function(t){t||(t={});var e=t.model||this.model,i=t.paper||this.paper,n=i.options,r=[];Rt(n.findParentBy)?r=Ut(n.findParentBy.call(i.model,this)).filter(function(t){return t instanceof Se&&this.model.id!==t.id&&!t.isEmbeddedIn(this.model)}.bind(this)):r=i.model.findModelsUnderElement(e,{searchBy:n.findParentBy});n.frontParentOnly&&(r=r.slice(-1));for(var o=null,s=t.candidateEmbedView,a=r.length-1;0<=a;a--){var l=r[a];if(s&&s.model.id==l.id){o=s;break}var c=l.findView(i);if(n.validateEmbedding.call(i,this,c)){o=c;break}}o&&o!=s&&(this.clearEmbedding(t),t.candidateEmbedView=o.highlight(null,{embedding:!0})),!o&&s&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(null,{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t){t||(t={});var e=t.candidateEmbedView,i=t.model||this.model,n=t.paper||this.paper;e&&(e.model.embed(i,{ui:!0}),e.unhighlight(null,{embedding:!0}),t.candidateEmbedView=null),Zt(n.model.getConnectedLinks(i,{deep:!0}),"reparent",{ui:!0})},getDelegatedView:function(){for(var t=this,e=t.model,i=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=i.findViewByModel(e)}return null},notifyPointerdown:function(t,e,i){qe.prototype.pointerdown.call(this,t,e,i),this.notify("element:pointerdown",t,e,i)},notifyPointermove:function(t,e,i){qe.prototype.pointermove.call(this,t,e,i),this.notify("element:pointermove",t,e,i)},notifyPointerup:function(t,e,i){this.notify("element:pointerup",t,e,i),qe.prototype.pointerup.call(this,t,e,i)},pointerdblclick:function(t,e,i){qe.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){qe.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,i)},contextmenu:function(t,e,i){qe.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,i)},pointerdown:function(t,e,i){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,i),this.dragStart(t,e,i))},pointermove:function(t,e,i){var n=this.eventData(t);switch(n.action){case"magnet":this.dragMagnet(t,e,i);break;case"move":(n.delegatedView||this).drag(t,e,i);default:this.notifyPointermove(t,e,i)}this.eventData(t,n)},pointerup:function(t,e,i){var n=this.eventData(t);switch(n.action){case"magnet":this.dragMagnetEnd(t,e,i);break;case"move":(n.delegatedView||this).dragEnd(t,e,i);default:this.notifyPointerup(t,e,i)}var r=n.targetMagnet;r&&this.magnetpointerclick(t,r,e,i),this.checkMouseleave(t)},mouseover:function(t){qe.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){qe.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){qe.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){qe.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,i,n){qe.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,i,n)},onmagnet:function(t,e,i){this.dragMagnetStart(t,e,i)},magnetpointerdblclick:function(t,e,i,n){this.notify("element:magnet:pointerdblclick",t,e,i,n)},magnetcontextmenu:function(t,e,i,n){this.notify("element:magnet:contextmenu",t,e,i,n)},dragStart:function(t,e,i){var n=this.getDelegatedView();n&&n.can("elementMove")&&(this.eventData(t,{action:"move",delegatedView:n}),n.eventData(t,{pointerOffset:n.model.position().difference(e,i),restrictedArea:this.paper.getRestrictedArea(n)}))},dragMagnetStart:function(t,e,i){if(this.can("addLinkFromMagnet")){var n=t.currentTarget,r=this.paper;this.eventData(t,{targetMagnet:n}),t.stopPropagation(),r.options.validateMagnet(this,n,t)?(r.options.magnetThreshold<=0&&this.dragLinkStart(t,n,e,i),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,i),r.delegateDragEvents(this,t.data)}},dragLinkStart:function(t,e,i,n){this.model.startBatch("add-link");var r=this.addLinkFromMagnet(e,i,n);r.notifyPointerdown(t,i,n),r.eventData(t,r.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:r})},addLinkFromMagnet:function(t,e,i){var n=this.paper,r=n.model,o=n.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,i,o,"source"),target:{x:e,y:i}}).addTo(r,{async:!1,ui:!0}),o.findView(n)},drag:function(t,e,i){var n=this.paper,r=n.options.gridSize,o=this.model,s=this.eventData(t),a=s.pointerOffset,l=s.restrictedArea,c=s.embedding,g=I(e+a.x,r),h=I(i+a.y,r);o.position(g,h,{restrictedArea:l,deep:!0,ui:!0}),n.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s)),this.eventData(t,{embedding:c})},dragMagnet:function(t,e,i){var n=this.eventData(t),r=n.linkView;if(r)r.pointermove(t,e,i);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(t),l=n.targetMagnet;if("onleave"===s){if(l===a||q(l).contains(a))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,l,e,i)}},dragEnd:function(t,e,i){var n=this.eventData(t);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(t,e,i){var n=this.eventData(t).linkView;n&&(n.pointerup(t,e,i),this.model.stopBatch("add-link"))},magnetpointerclick:function(t,e,i,n){var r=this.paper;r.eventData(t).mousemoved>r.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,i,n)}});Tt($e.prototype,Fe);var ti={N:"S",S:"N",E:"W",W:"E"},ei={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function ii(t,e,i){var n=new E(t.x,e.y);return i.containsPoint(n)&&(n=new E(e.x,t.y)),n}function ni(t,e){return t["W"===e||"E"===e?"width":"height"]}function ri(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function oi(t){return new H(t.x,t.y,0,0)}function si(t){var e=wt(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function ai(t,e){return t.sourceBBox.clone().moveAndExpand(si(e))}function li(t,e){return t.targetBBox.clone().moveAndExpand(si(e))}function ci(t,e,i){var n=new E(t.x,e.y),r=new E(e.x,t.y),o=ri(t,n),s=ri(t,r),a=ti[i],l=o===i||o!==a&&(s===a||s!==i)?n:r;return{points:[l],direction:ri(l,e)}}function gi(t,e,i){var n=ii(t,e,i);return{points:[n],direction:ri(n,e)}}function hi(e,t,i,n){var r,o={},s=[new E(e.x,t.y),new E(t.x,e.y)],a=s.filter(function(t){return!i.containsPoint(t)}),l=a.filter(function(t){return ri(t,e)!==n});if(0<l.length)r=(r=l.filter(function(t){return ri(e,t)===n}).pop())||l[0],o.points=[r],o.direction=ri(r,t);else{r=_t(s,a)[0];var c=new E(t).move(r,-ni(i,n)/2),g=ii(c,e,i);o.points=[g,c],o.direction=ri(c,t)}return o}function ui(t,e,i,n){var r=gi(e,t,n),o=r.points[0];if(i.containsPoint(o)){var s=(r=gi(t,e,i)).points[0];if(n.containsPoint(s)){var a=new E(t).move(s,-ni(i,ri(t,s))/2),l=new E(e).move(o,-ni(n,ri(e,o))/2),c=new B(a,l).midpoint(),g=gi(t,c,i),h=ci(c,e,g.direction);r.points=[g.points[0],h.points[0]],r.direction=h.direction}}return r}function di(t,e,i,n,r){var o,s,a,l={},c=i.union(n).inflate(1),g=c.center().distance(e)>c.center().distance(t),h=g?e:t,u=g?t:e;return s=ii(o=r?(o=E.fromPolar(c.width+c.height,ei[r],h),c.pointNearestToPoint(o).move(o,-1)):c.pointNearestToPoint(h).move(h,1),u,c),o.round().equals(s.round())?(s=E.fromPolar(c.width+c.height,y(o.theta(h))+Math.PI/2,u),a=ii(o,s=c.pointNearestToPoint(s).move(u,1).round(),c),l.points=g?[s,a,o]:[o,a,s]):l.points=g?[s,o]:[o,s],l.direction=ri(g?o:s,e),l}function fi(t,e,i){var n,r,o,s,a,l=ai(i,e),c=li(i,e),g=(r=e,(n=i).sourceAnchor?n.sourceAnchor:ai(n,r).center()),h=(s=e,(o=i).targetAnchor?o.targetAnchor:li(o,s).center());l=l.union(oi(g)),c=c.union(oi(h)),(t=Ut(t).map(E)).unshift(g),t.push(h);for(var u=[],d=0,f=t.length-1;d<f;d++){var p=null,I=t[d],m=t[d+1],A=!!ri(I,m);if(0===d)d+1===f?l.intersect(c.clone().inflate(1))?p=di(I,m,l,c):A||(p=ui(I,m,l,c)):l.containsPoint(m)?p=di(I,m,l,oi(m).moveAndExpand(si(e))):A||(p=gi(I,m,l));else if(d+1===f){var v=A&&ri(m,I)===a;c.containsPoint(I)||v?p=di(I,m,oi(I).moveAndExpand(si(e)),c,a):A||(p=hi(I,m,c,a))}else A||(p=ci(I,m,a));a=p?(Array.prototype.push.apply(u,p.points),p.direction):ri(I,m),d+1<f&&u.push(m)}return u}var pi={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},fallbackRouter:function(t,e,i){if(!Rt(fi))throw new Error("Manhattan requires the orthogonal router as default fallback.");return fi(t,Tt({},pi,e),i)},fallbackRoute:function(t,e,i){return null},draggingRoute:null};function Ii(t){this.map={},this.options=t,this.mapGridSize=100}function mi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Ai(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function vi(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Ci(t,e){return t.sourceAnchor?t.sourceAnchor:Ai(t,e).center()}function wi(t,e,i,n,r){var o,s,a,l,c,g,h,u,d,f,p=360/i,I=t.theta((o=t,s=e,a=n,l=r.step,c=s.x-o.x,g=s.y-o.y,h=c/a.x,u=g/a.y,d=h*l,f=u*l,new E(o.x+d,o.y+f))),m=C(I+p/2);return p*Math.floor(m/p)}function yi(t,e){var i=Math.abs(t-e);return 180<i?360-i:i}function bi(t,e){if(!t)return e;var i=Math.abs(t),n=Math.round(i/e);return n?e+(i-n*e)/n:i}function Ni(t,e){return t.round(e)}function Mi(t,e,i){return Ni((n=t.clone(),o=(r=e).source,s=I(n.x-o.x,r.x)+o.x,a=I(n.y-o.y,r.y)+o.y,new E(s,a)),i);var n,r,o,s,a}function xi(t){return t.clone().toString()}function Si(t){return new E(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function ki(t,e,i,n,r,o,s){for(var a,l=[],c=Si(r.difference(i)),g=xi(i),h=t[g];h;){var u=Si((a=e[g]).difference(h));u.equals(c)||(l.unshift(a),c=u),h=t[g=xi(h)]}var d=e[g];return Si(d.difference(n)).equals(c)||l.unshift(d),l}function Di(t,e){for(var i=1/0,n=0,r=e.length;n<r;n++){var o=t.manhattanDistance(e[n]);o<i&&(i=o)}return i}function zi(u,d,t,f,e){var p=e.precision,I=e.directionMap,m=u.difference(d.center()),i=le(I)?Object.keys(I):[],A=Ut(t),n=i.reduce(function(t,e){if(A.includes(e)){for(var i,n=I[e],r=new E(u.x+n.x*(Math.abs(m.x)+d.width),u.y+n.y*(Math.abs(m.y)+d.height)),o=new B(u,r).intersect(d)||[],s=o.length,a=null,l=0;l<s;l++){var c=o[l],g=u.squaredDistance(c);(void 0===i||i<g)&&(i=g,a=c)}if(a){var h=Mi(a,f,p);d.containsPoint(h)&&(h=Mi(h.offset(n.x*f.x,n.y*f.y),f,p)),t.push(h)}}return t},[]);return d.containsPoint(u)||n.push(Mi(u,f,p)),n}function Ti(t,e,i,n){var r,o,s,a,l=n.precision;r=Ni(t instanceof H?Ci(this,n).clone():t.clone(),l),o=Ni(e instanceof H?(s=this,a=n,s.targetAnchor?s.targetAnchor:vi(s,a).center()).clone():e.clone(),l);var c,g,h,u,d,f,p,I,m,A,v=(c=n.step,h=o,{source:(g=r).clone(),x:bi(h.x-g.x,c),y:bi(h.y-g.y,c)});if(f=t instanceof H?zi(u=r,t,n.startDirections,v,n):[u=r],p=e instanceof H?zi(d=o,e,n.endDirections,v,n):[d=o],f=f.filter(i.isPointAccessible,i),p=p.filter(i.isPointAccessible,i),0<f.length&&0<p.length){for(var C=new mi,w={},y={},b={},N=0,M=f.length;N<M;N++){var x=f[N],S=xi(x);C.add(S,Di(x,p)),w[S]=x,b[S]=0}var k,D,z=n.previousDirectionAngle,T=void 0===z,j=n.directions;I=v,A=(m=n).step,Ut(m.directions).forEach(function(t){t.gridOffsetX=t.offsetX/A*I.x,t.gridOffsetY=t.offsetY/A*I.y});for(var L=j.length,Z=Ut(p).reduce(function(t,e){var i=xi(e);return t.push(i),t},[]),P=n.maximumLoops;!C.isEmpty()&&0<P;){var G,B=C.pop(),O=w[B],E=y[B],Y=b[B],R=void 0===E,W=O.equals(u);G=R?T?W?null:wi(u,O,L,v,n):z:wi(E,O,L,v,n);var U=Yt(f,p);if(!(R&&U)&&0<=Z.indexOf(B))return n.previousDirectionAngle=G,ki(y,w,O,u,d);for(N=0;N<L;N++){var X=(k=j[N]).angle;if(D=yi(G,X),T&&W||!(D>n.maxAllowedDirectionChange)){var F=Mi(O.clone().offset(k.gridOffsetX,k.gridOffsetY),v,l),V=xi(F);if(!C.isClose(V)&&i.isPointAccessible(F)){if(0<=Z.indexOf(V))if(!F.equals(d))if(yi(X,wi(F,d,L,v,n))>n.maxAllowedDirectionChange)continue;var J=Y+k.cost+(W?0:n.penalties[D]);(!C.isOpen(V)||J<b[V])&&(w[V]=F,y[V]=O,b[V]=J,C.add(V,J+Di(F,p)))}}}P--}}return n.fallbackRoute.call(this,u,d,n)}function ji(t,e,i){!function(t){if(t.directions=$t(t,"directions"),t.penalties=$t(t,"penalties"),t.paddingBox=$t(t,"paddingBox"),t.padding=$t(t,"padding"),t.padding){var e=wt(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Ut(t.directions).forEach(function(t){var e=new E(0,0),i=new E(t.offsetX,t.offsetY);t.angle=C(e.theta(i))})}(e),i.options.perpendicular=!!e.perpendicular;for(var n,r,o=Ai(i,e),s=vi(i,e),a=Ci(i,e),l=new Ii(e).build(i.paper.model,i.model),c=Ut(t).map(E),g=[],h=a,u=0,d=c.length;u<=d;u++){var f=null;if(r=n||o,!(n=c[u]))if(n=s,(!i.model.get("source").id||!i.model.get("target").id)&&Rt(e.draggingRoute)){var p=r===o?a:r,I=n.origin();f=e.draggingRoute.call(i,p,I,e)}if(null===(f=f||Ti.call(i,r,n,l,e)))return e.fallbackRouter(t,e,i);var m=f[0];m&&m.equals(h)&&f.shift(),h=f[f.length-1]||h,Array.prototype.push.apply(g,f)}return g}Ii.prototype.build=function(r,o){var h=this.options,u=Ut(h.excludeEnds).reduce(function(t,e){var i=o.get(e);if(i){var n=r.getCell(i.id);n&&t.push(n)}return t},[]),d=[],t=r.getCell(o.get("source").id);t&&(d=Kt(d,t.getAncestors().map(function(t){return t.id})));var e=r.getCell(o.get("target").id);e&&(d=Kt(d,e.getAncestors().map(function(t){return t.id})));var f=this.mapGridSize;return r.getElements().reduce(function(t,e){var i=Ut(h.excludeTypes).includes(e.get("type")),n=u.find(function(t){return t.id===e.id}),r=d.includes(e.id);if(!(i||n||r))for(var o=e.getBBox().moveAndExpand(h.paddingBox),s=o.origin().snapToGrid(f),a=o.corner().snapToGrid(f),l=s.x;l<=a.x;l+=f)for(var c=s.y;c<=a.y;c+=f){var g=l+"@"+c;t[g]=t[g]||[],t[g].push(o)}return t},this.map),this},Ii.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Ut(this.map[t]).every(function(t){return!t.containsPoint(e)})},mi.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var i=Pt(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(i,0,t)},mi.prototype.remove=function(t){this.hash[t]=this.CLOSE},mi.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},mi.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},mi.prototype.isEmpty=function(){return 0===this.items.length},mi.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};var Li=function(t,e,i){return ji(t,Tt({},pi,e),i)},Zi={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),i=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:i},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:i},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:i},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:i}]},fallbackRoute:function(t,e,i){var n=t.theta(e),r=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(90<n%180){var a=o;o=s,s=a}var l=n%90<45?o:s,c=new B(t,l),g=90*Math.ceil(n/90),h=E.fromPolar(c.squaredLength(),y(g+135),l),u=new B(e,h),d=c.intersection(u),f=d||e,p=d?f:t,I=360/i.directions.length,m=p.theta(e),A=C(m+I/2),v=I*Math.floor(A/I);return i.previousDirectionAngle=v,f&&r.push(f.round()),r.push(e),r}},Pi={normal:function(t,e,i){return t},oneSide:function(t,e,i){var n,r,o,s=e.side||"bottom",a=wt(e.padding||40),l=i.sourceBBox,c=i.targetBBox,g=l.center(),h=c.center();switch(s){case"bottom":o=1,n="y",r="height";break;case"top":o=-1,n="y",r="height";break;case"left":o=-1,n="x",r="width";break;case"right":o=1,n="x",r="width";break;default:throw new Error("Router: invalid side")}return g[n]+=o*(l[r]/2+a[s]),h[n]+=o*(c[r]/2+a[s]),0<o*(g[n]-h[n])?h[n]=g[n]:g[n]=h[n],[g].concat(t,h)},orthogonal:fi,manhattan:Li,metro:function(t,e,i){if(!Rt(Li))throw new Error("Metro requires the manhattan router.");return Li(t,Tt({},Zi,e),i)}},Gi=["arc","gap","cubic"],Bi=["smooth"],Oi=1/3,Ei=2/3;function Yi(t,e,i){var r=[].concat(t,i,e);return r.reduce(function(t,e,i){var n=r[i+1];return null!=n&&(t[i]=b(e,n)),t},[])}function Ri(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function Wi(t,e){return b(t,e).squaredLength()}function Ui(S,k,D,z){var T,j=new O;return T=O.createSegment("M",S[0].start),j.appendSegment(T),Ut(S).forEach(function(t,e){if(t.isJump){var i,n,r,o;if("arc"===D){i=-90,n=t.start.difference(t.end);var s=Number(n.x<0||0===n.x&&n.y<0);s&&(i+=180);var a,l=t.midpoint(),c=new B(l,t.end).rotate(l,i);r=(a=new B(t.start,l)).pointAt(2/3).rotate(t.start,i),o=c.pointAt(1/3).rotate(c.end,-i),T=O.createSegment("C",r,o,c.end),j.appendSegment(T),a=new B(l,t.end),r=c.pointAt(1/3).rotate(c.end,i),o=a.pointAt(1/3).rotate(t.end,-i),T=O.createSegment("C",r,o,t.end),j.appendSegment(T)}else if("gap"===D)T=O.createSegment("M",t.end),j.appendSegment(T);else if("cubic"===D){i=t.start.theta(t.end);var g=.6*k,h=1.35*k;n=t.start.difference(t.end),(s=Number(n.x<0||0===n.x&&n.y<0))&&(h*=-1),r=E(t.start.x+g,t.start.y+h).rotate(t.start,i),o=E(t.end.x-g,t.end.y+h).rotate(t.end,i),T=O.createSegment("C",r,o,t.end),j.appendSegment(T)}}else{var u=S[e+1];0==z||!u||u.isJump?(T=O.createSegment("L",t.end),j.appendSegment(T)):(d=z,f=j,p=t.end,I=t.start,m=u.end,v=p.distance(I)/2,C=p.distance(m)/2,w=-Math.min(d,v),y=-Math.min(d,C),b=p.clone().move(I,w).round(),N=p.clone().move(m,y).round(),M=new E(Oi*b.x+Ei*p.x,Ei*p.y+Oi*b.y),x=new E(Oi*N.x+Ei*p.x,Ei*p.y+Oi*N.y),A=O.createSegment("L",b),f.appendSegment(A),A=O.createSegment("C",M,x,N),f.appendSegment(A))}var d,f,p,I,m,A,v,C,w,y,b,N,M,x}),j}var Xi={jumpover:function(t,e,i,n){var r,o;null==(o=(r=this).paper._jumpOverUpdateList)&&(o=r.paper._jumpOverUpdateList=[],r.paper.on("cell:pointerup",Ri),r.paper.model.on("reset",function(){o=r.paper._jumpOverUpdateList=[]})),o.indexOf(r)<0&&(o.push(r),r.listenToOnce(r.model,"change:connector remove",function(){o.splice(o.indexOf(r),1)}));var s=n.raw,a=n.size||5,l=n.jump&&(""+n.jump).toLowerCase(),c=n.radius||0,g=n.ignoreConnectors||Bi;-1===Gi.indexOf(l)&&(l=Gi[0]);var h=this.paper,u=h.model.getLinks();if(1===u.length)return Ui(Yi(t,e,i),a,l,c);var d=this.model,f=u.indexOf(d),p=h.options.defaultConnector||{},I=u.filter(function(t,e){var i=t.get("connector")||p;return!(Ut(g).includes(i.name)||f<e&&"jumpover"===i.name)}),m=I.map(function(t){return h.findViewByModel(t)}),A=Yi(t,e,i),v=m.map(function(t){return null==t?[]:t===this?A:Yi(t.sourcePoint,t.targetPoint,t.route)},this),C=Ui(A.reduce(function(t,s){var c,g,h,e=I.reduce(function(t,e,i){if(e!==d){var n=(r=s,o=v[i],Ut(o).reduce(function(t,e){var i=r.intersection(e);return i&&t.push(i),t},[]));t.push.apply(t,n)}var r,o;return t},[]).sort(function(t,e){return Wi(s.start,t)-Wi(s.start,e)});return 0<e.length?t.push.apply(t,(c=s,h=a,(g=e).reduce(function(t,e,i){if(!0===e.skip)return t;var n=t.pop()||c,r=N(e).move(n.start,-h),o=N(e).move(n.start,+h),s=g[i+1];if(null!=s){var a=o.distance(s);a<=h&&(o=s.move(n.start,a),s.skip=!0)}else if(r.distance(n.end)<2*h+1)return t.push(n),t;if(o.distance(n.start)<2*h+1)return t.push(n),t;var l=b(r,o);return l.isJump=!0,t.push(b(n.start,r),l,b(o,n.end)),t},[]))):t.push(s),t},[]),a,l,c);return s?C:C.serialize()},normal:function(t,e,i,n){var r=n&&n.raw,o=[t].concat(i).concat([e]),s=new D(o),a=new O(s);return r?a:a.serialize()},rounded:function(t,e,i,n){n||(n={});var r,o=n.radius||10,s=n.raw,a=new O;r=O.createSegment("M",t),a.appendSegment(r);for(var l,c,g,h,u,d,f,p,I,m,A,v=0,C=i.length;v<C;v++)l=new E(i[v]),c=i[v-1]||t,g=i[v+1]||e,h=u||l.distance(c)/2,u=l.distance(g)/2,d=-Math.min(o,h),f=-Math.min(o,u),p=l.clone().move(c,d).round(),I=l.clone().move(g,f).round(),m=new E(1/3*p.x+2/3*l.x,2/3*l.y+1/3*p.y),A=new E(1/3*I.x+2/3*l.x,2/3*l.y+1/3*I.y),r=O.createSegment("L",p),a.appendSegment(r),r=O.createSegment("C",m,A,I),a.appendSegment(r);return r=O.createSegment("L",e),a.appendSegment(r),s?a:a.serialize()},smooth:function(t,e,i,n){var r,o=n&&n.raw;if(i&&0!==i.length){var s=[t].concat(i).concat([e]),a=p.throughPoints(s);r=new O(a)}else{var l;if(r=new O,l=O.createSegment("M",t),r.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var c=(t.x+e.x)/2;l=O.createSegment("C",c,t.y,c,e.y,e.x,e.y),r.appendSegment(l)}else{var g=(t.y+e.y)/2;l=O.createSegment("C",t.x,g,e.x,g,e.x,e.y),r.appendSegment(l)}}return o?r:r.serialize()}},Fi=qe.extend({className:function(){var t=qe.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){qe.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.metrics={}},presentationAttributes:{markup:["RENDER"],attrs:["UPDATE"],router:["UPDATE"],connector:["UPDATE"],smooth:["UPDATE"],manhattan:["UPDATE"],toolMarkup:["TOOLS"],labels:["LABELS"],labelMarkup:["LABELS"],vertices:["VERTICES","UPDATE"],vertexMarkup:["VERTICES"],source:["SOURCE","UPDATE"],target:["TARGET","UPDATE"]},initFlag:["RENDER","SOURCE","TARGET"],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,"SOURCE")){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,"SOURCE")}if(this.hasFlag(t,"TARGET")){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,"TARGET")}var i=this.paper,n=this.sourceView,r=this.targetView;if(i&&(n&&!i.isViewMounted(n)||r&&!i.isViewMounted(r)))return t;if(this.hasFlag(t,"RENDER"))return this.render(),t=this.removeFlag(t,["RENDER","UPDATE","VERTICES","TOOLS","LABELS"]);this.hasFlag(t,"VERTICES")&&(this.renderVertexMarkers(),t=this.removeFlag(t,"VERTICES"));var o=this.model,s=o.attributes,a=this.hasFlag(t,"LABELS"),l=this.hasFlag(t,"TOOLS");return a&&(this.onLabelsChange(o,s.labels,e),t=this.removeFlag(t,"LABELS")),l&&(this.renderTools(),t=this.removeFlag(t,"TOOLS")),this.hasFlag(t,"UPDATE")&&(this.update(o,null,e),t=this.removeFlag(t,"UPDATE"),l=a=!1),a&&this.updateLabelPositions(),l&&this.updateToolsPosition(),t},requestConnectionUpdate:function(t){var e=this.paper,i=this.UPDATE_PRIORITY;e&&e.requestViewUpdate(this,this.getFlag("UPDATE"),i,t)},isLabelsRenderRequired:function(t){void 0===t&&(t={});var e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var i=t.propertyPathArray||[],n=i.length;if(1<n)if(!!e[i[1]]){if(2===n)return"markup"in Object(t.propertyValue);if("markup"!==i[2])return!1}}return!0},onLabelsChange:function(t,e,i){this.isLabelsRenderRequired(i)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=q(t);Array.isArray(e)||(e=[e]);for(var i=this._V,n=0,r=e.length;n<r;n++){var o=e[n],s=o.attr("class");s&&(s=et(s),i[S.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=q(t),i=document.createDocumentFragment();if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var o=e[n].node;i.appendChild(o)}else i.appendChild(e.node);return{fragment:i,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,i=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var n=i.childNodes;return(e=1<n.length||"G"!==n[0].nodeName.toUpperCase()?q("g").append(i):q(n[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,i=this._labelCache={},n=this._labelSelectors={},r=this.model,o=r.attributes.labels||[],s=o.length;if(0===s)return e&&e.remove(),this;e?e.empty():e=t.labels=q("g").addClass("labels");for(var a=e.node,l=0;l<s;l++){var c,g,h=o[l],u=this._normalizeLabelMarkup(this._getLabelMarkup(h.markup));if(u)c=u.node,g=u.selectors;else{var d=r._builtins.defaultLabel,f=this._normalizeLabelMarkup(this._getLabelMarkup(d.markup)),p=r._getDefaultLabel(),I=this._normalizeLabelMarkup(this._getLabelMarkup(p.markup))||f;c=I.node,g=I.selectors}c.setAttribute("label-idx",l),a.appendChild(c),i[l]=c;var m=this.selector;if(g[m])throw new Error("dia.LinkView: ambiguous label root selector.");g[m]=c,n[l]=g}return a.parentNode||this.el.appendChild(a),this.updateLabels(),this},_mergeLabelAttrs:function(t,e,i,n){return null===e?null:void 0!==e?t?se({},i,e):se({},n,i,e):null===i?null:void 0!==i?t?i:se({},n,i):t?void 0:n},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],i=this.can("labelMove"),n=t._builtins.defaultLabel.attrs,r=t._getDefaultLabel(),o=r.markup,s=r.attrs,a=0,l=e.length;a<l;a++){var c=this._labelCache[a];c.setAttribute("cursor",i?"move":"default");var g=this._labelSelectors[a],h=e[a],u=h.markup,d=h.attrs,f=this._mergeLabelAttrs(u||o,d,s,n);this.updateDOMSubtreeAttributes(c,f,{rootBBox:new H(h.size),selectors:g})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=S(this._V.linkTools.node).empty(),i=xt(this.model.get("toolMarkup")||this.model.toolMarkup),n=q(i());(e.append(n.node),this._toolCache=n,this.options.doubleLinkTools)&&(t=this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(i=xt(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),q(i())):n.clone(),e.append(t.node),this._tool2Cache=t);return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var i=S(this._V.markerVertices.node).empty(),n=xt(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,e){i.append(q(n(Tt({idx:e},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=S(this._V.markerArrowheads.node);t.empty();var e=xt(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=q(e({end:"source"})),this._V.targetArrowhead=q(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,i){return i||(i={}),this.cleanNodesCache(),this.updateConnection(i),this.updateDOMSubtreeAttributes(this.el,this.model.attr(),{selectors:this.selectors}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(i),this.options.perpendicular=null,this},removeRedundantLinearVertices:function(t){var e=this.model,i=e.vertices(),n=[this.sourceAnchor].concat(i,[this.targetAnchor]),r=n.length,o=new D(n);o.simplify({threshold:.001});var s=o.points.map(function(t){return t.toJSON()}),a=s.length;return r===a?0:(e.vertices(s.slice(1,a-1),t),r-a)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new E(this.sourceAnchor);case"target":return new E(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new E(this.sourcePoint);case"target":return new E(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var i=this.targetView;if(!i)break;return this.targetMagnet||i.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},updateConnection:function(t){t=t||{};var e,i,n=this.model;if(t.translateBy&&n.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,o=t.ty||0;e=new D(this.route).translate(r,o).points,this._translateConnectionPoints(r,o),(i=this.path).translate(r,o)}else{var s=n.vertices(),a=this.findAnchors(s),l=this.sourceAnchor=a.source,c=this.targetAnchor=a.target;e=this.findRoute(s,t);var g=this.findConnectionPoints(e,l,c),h=this.sourcePoint=g.source,u=this.targetPoint=g.target,d=this.findMarkerPoints(e,h,u);i=this.findPath(e,d.source||h,d.target||u)}this.route=e,this.path=i,this.metrics={}},findMarkerPoints:function(t,e,i){var n,r,o=t[0],s=t[t.length-1],a=this._markerCache;return this._V.markerSource&&(a.sourceBBox=a.sourceBBox||this._V.markerSource.getBBox(),n=E(e).move(o||i,a.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(a.targetBBox=a.targetBBox||this._V.markerTarget.getBBox(),r=E(i).move(s||e,a.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),a.sourcePoint=n||e.clone(),a.targetPoint=r||i.clone(),{source:n,target:r}},findAnchorsOrdered:function(t,e,i,n){var r,o,s,a,l=this.model,c=l.get(t),g=l.get(i),h=this.getEndView(t),u=this.getEndView(i),d=this.getEndMagnet(t),f=this.getEndMagnet(i);r=h?(s=e?new E(e):u?f:new E(g),this.getAnchor(c.anchor,h,d,s,t)):new E(c),o=u?(a=new E(n||r),this.getAnchor(g.anchor,u,f,a,i)):new E(g);var p={};return p[t]=r,p[i]=o,p},findAnchors:function(t){var e=this.model,i=t[0],n=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",n,"source",i):this.findAnchorsOrdered("source",i,"target",n)},findConnectionPoints:function(t,e,i){var n,r,o,s,a=t[0],l=t[t.length-1],c=this.model,g=c.get("source"),h=c.get("target"),u=this.sourceView,d=this.targetView,f=this.paper.options;if(u&&!u.isNodeConnection(this.sourceMagnet)){n=this.sourceMagnet||u.el;var p=g.connectionPoint||f.defaultConnectionPoint,I=new B(a||i,e);o=this.getConnectionPoint(p,u,n,I,"source")}else o=e;if(d&&!d.isNodeConnection(this.targetMagnet)){r=this.targetMagnet||d.el;var m=h.connectionPoint||f.defaultConnectionPoint,A=new B(l||e,i);s=this.getConnectionPoint(m,d,r,A,"target")}else s=i;return{source:o,target:s}},getAnchor:function(t,e,i,n,r){var o,s=e.isNodeConnection(i),a=this.paper.options;if(t||(t=s?a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)o=t;else{var l=t.name;if("function"!=typeof(o=a[s?"linkAnchorNamespace":"anchorNamespace"][l]))throw new Error("Unknown anchor: "+l)}var c=o.call(this,e,i,n,t.args||{},r,this);return c?c.round(this.decimalsRounding):new E},getConnectionPoint:function(t,e,i,n,r){var o,s,a=n.end,l=this.paper.options;if("function"==typeof l.linkConnectionPoint){var c=i===e.el?void 0:i;if(o=l.linkConnectionPoint(this,e,c,n.start,r))return o}if(!t)return a;if("function"==typeof t)s=t;else{var g=t.name;if("function"!=typeof(s=l.connectionPointNamespace[g]))throw new Error("Unknown connection point: "+g)}return(o=s.call(this,n,e,i,t.args||{},r,this))?o.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var i=this._markerCache;i.sourcePoint.offset(t,e),i.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model,e=t.get("labels")||[];if(!e.length)return this;for(var i=t._builtins.defaultLabel.position,n=t._getDefaultLabel(),r=this._normalizeLabelPosition(n.position),o=se({},i,r),s=0,a=e.length;s<a;s++){var l=this._labelCache[s];if(l){var c=e[s],g=this._normalizeLabelPosition(c.position),h=se({},o,g),u=this._getLabelTransformationMatrix(h);l.setAttribute("transform",q.matrixToTransformString(u))}}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,i=this.getConnectionLength();if(!Number.isNaN(i)){i<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var n=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+t),this.options.doubleLinkTools&&i>=this.options.longLinkLength){var r=this.options.doubleLinkToolsOffset||e;n=this.getPointAtLength(i-r),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===S.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){var e=this.model,i=this.paper,n=t+"View",r=e.get(t),o=r&&r.id;if(!o)return this[n]=null,this.updateEndMagnet(t),!0;var s=i.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");var a=s.findView(i);return!!a&&(this[n]=a,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){var e=t+"Magnet",i=this.getEndView(t);if(i){var n=i.getMagnetFromLinkEnd(this.model.get(t));n===i.el&&(n=null),this[e]=n}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var i=Ut(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,i[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,i[i.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:se({},e,t)},addLabel:function(t,e,i,n){var r,o,s,a=0;s="number"!=typeof t?(r=t.x,o=t.y,"number"==typeof e?(a=e,i):e):(r=t,o=e,"number"==typeof i?(a=i,n):i);var l=this._getDefaultLabelPositionArgs(),c=s,g=this._mergeLabelPositionArgs(c,l),h={position:this.getLabelPosition(r,o,a,g)};return this.model.insertLabel(-1,h,s),-1},addVertex:function(t,e,i){var n="number"!=typeof t,r=n?t.x:t,o=n?t.y:e,s=n?e:i,a={x:r,y:o},l=this.getVertexIndex(r,o);return this.model.insertVertex(l,a,s),l},sendToken:function(t,e,i){var n,r,o;o=le(e)?(n=e.duration,r="reverse"===e.direction,e.connection):(n=e,r=!1,null);var s={dur:(n=n||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};r&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,l,c,g=q(t);if("string"==typeof o)a=this.findBySelector(o,this.el,this.selectors)[0];else{var h=this._V;a=h.connection?h.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");g.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout((l=g,c=i,function(){l.remove(),"function"==typeof c&&c()}),n)},findRoute:function(t){t||(t=[]);var e=Pi,i=this.model.router(),n=this.paper.options.defaultRouter;if(!i){if(!n)return t.map(E);i=n}var r=Rt(i)?i:e[i.name];if(!Rt(r))throw new Error('dia.LinkView: unknown router: "'+i.name+'".');var o=i.args||{},s=r.call(this,t,o,this);return s||t.map(E)},findPath:function(t,e,i){var n=Xi,r=this.model.connector(),o=this.paper.options.defaultConnector;r||(r=o||{});var s=Rt(r)?r:n[r.name];if(!Rt(s))throw new Error('dia.LinkView: unknown connector: "'+r.name+'".');var a=Bt(r.args||{});a.raw=!0;var l=s.call(this,e,i,t,a,this);return"string"==typeof l&&(l=new O(q.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var i=t.serialize();return e.data=i},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var i=t.getSegmentSubdivisions();return e.segmentSubdivisions=i},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var i=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=i},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(ft(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,i,n){var r,o={},s=0;(r="number"==typeof i?(s=i,n):i)&&(o.args=r);var a,l,c=!(r&&r.absoluteDistance),g=r&&r.absoluteDistance&&r.reverseDistance,h=r&&r.absoluteOffset,u=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},f=new E(t,e),p=u.closestPointT(f,d),I=u.lengthAtT(p,d);if(c&&(I=I/this.getConnectionLength()||0),g&&(I=-1*(this.getConnectionLength()-I)||1),o.distance=I,h||(a=u.tangentAtT(p)),a)l=a.pointOffset(f);else{var m=u.pointAtT(p),A=f.difference(m);l={x:A.x,y:A.y}}return o.offset=l,o.angle=s,o},_getLabelTransformationMatrix:function(t){var e,i=0,n={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");n=t.args||{},e=t.distance,i=t.angle||0}var r=0<e&&e<=1,o=0,s={x:0,y:0};if(t.offset){var a=t.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var l,c=0!==s.x||0!==s.y||0===o,g=n.keepGradient,h=n.ensureLegibility,u=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},f=r?e*this.getConnectionLength():e,p=u.tangentAtLength(f,d),I=i;if(p){if(c)(l=p.start).offset(s);else{var m=p.clone();m.rotate(p.start,-90),m.setLength(o),l=m.end}g&&(I=p.angle()+i,h&&(I=C((I+90)%180-90)))}else l=u.start,c&&l.offset(s);return q.createSVGMatrix().translate(l.x,l.y).rotate(I)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new E(e.e,e.f)},getVertexIndex:function(t,e){for(var i=this.model.vertices(),n=this.getClosestPointLength(new E(t,e)),r=0,o=i.length;r<o;r++){var s=i[r];if(n<this.getClosestPointLength(s))break}return r},notifyPointerdown:function(t,e,i){qe.prototype.pointerdown.call(this,t,e,i),this.notify("link:pointerdown",t,e,i)},notifyPointermove:function(t,e,i){qe.prototype.pointermove.call(this,t,e,i),this.notify("link:pointermove",t,e,i)},notifyPointerup:function(t,e,i){this.notify("link:pointerup",t,e,i),qe.prototype.pointerup.call(this,t,e,i)},pointerdblclick:function(t,e,i){qe.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){qe.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,i)},contextmenu:function(t,e,i){qe.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,i)},pointerdown:function(t,e,i){switch(this.notifyPointerdown(t,e,i),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,i);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,i);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,i);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,i);case"marker-source":case"marker-target":return}this.dragStart(t,e,i)},pointermove:function(t,e,i){var n=this._dragData;switch(n&&this.eventData(t,n),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,i);break;case"label-move":this.dragLabel(t,e,i);break;case"arrowhead-move":this.dragArrowhead(t,e,i);break;case"move":this.drag(t,e,i)}n&&Tt(n,this.eventData(t)),this.notifyPointermove(t,e,i)},pointerup:function(t,e,i){var n=this._dragData;switch(n&&(this.eventData(t,n),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,i);break;case"label-move":this.dragLabelEnd(t,e,i);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,i);break;case"move":this.dragEnd(t,e,i)}this.notifyPointerup(t,e,i),this.checkMouseleave(t)},mouseover:function(t){qe.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){qe.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){qe.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){qe.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,i,n){qe.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,i,n)},onevent:function(t,e,i,n){if(q(t.target).findParentByClass("link-tool",this.el)){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,i,n)}this.notifyPointerdown(t,i,n),this.paper.delegateDragEvents(this,t.data)}else qe.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,i){this.notifyPointerdown(t,e,i),this.dragLabelStart(t,e,i),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,i){if(this.can("vertexAdd")){var n=this.addVertex({x:e,y:i},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(t,e,i){if(this.can("labelMove")){var n=t.currentTarget,r=parseInt(n.getAttribute("label-idx"),10),o=this._getLabelPositionAngle(r),s=this._getLabelPositionArgs(r),a=this._getDefaultLabelPositionArgs(),l=this._mergeLabelPositionArgs(s,a);this.eventData(t,{action:"label-move",labelIdx:r,positionAngle:o,positionArgs:l,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,i){if(this.can("vertexMove")){var n=t.target,r=parseInt(n.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragVertexRemoveStart:function(t,e,i){if(this.can("vertexRemove")){var n=t.target,r=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(r)}},dragArrowheadStart:function(t,e,i){if(this.can("arrowheadMove")){var n=t.target.getAttribute("end"),r=this.startArrowheadMove(n,{ignoreBackwardsCompatibility:!0});this.eventData(t,r)}},dragStart:function(t,e,i){this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:i})},dragLabel:function(t,e,i){var n=this.eventData(t),r={position:this.getLabelPosition(e,i,n.positionAngle,n.positionArgs)};this.model.label(n.labelIdx,r)},dragVertex:function(t,e,i){var n=this.eventData(t);this.model.vertex(n.vertexIdx,{x:e,y:i},{ui:!0})},dragArrowhead:function(t,e,i){this.paper.options.snapLinks?this._snapArrowhead(t,e,i):this._connectArrowhead(this.getEventTarget(t),e,i,this.eventData(t))},drag:function(t,e,i){var n=this.eventData(t);this.model.translate(e-n.dx,i-n.dy,{ui:!0}),this.eventData(t,{dx:e,dy:i})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,i){var n=this.eventData(t),r=this.paper;r.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,e,i),r.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,t)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0})}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var i=t.arrowhead,n=t.initialEnd,r=this.model.prop(i);if(r&&!We.endsEqual(n,r)){var o=this.paper;n.id&&this.notify("link:disconnect",e,o.findViewByModel(n.id),t.initialMagnet,i),r.id&&this.notify("link:connect",e,o.findViewByModel(r.id),t.magnetUnderPointer,i)}},_snapArrowhead:function(t,e,i){var r=this.eventData(t),n=this.paper.options.snapLinks.radius||50,o=this.paper.findViewsInArea({x:e-n,y:i-n,width:2*n,height:2*n}),s=r.closestView||null,a=r.closestMagnet||null;r.closestView=r.closestMagnet=null;var l,c=Number.MAX_VALUE,g=new E(e,i),h=this.paper;o.forEach(function(n){var e=[];"false"!==n.el.getAttribute("magnet")&&e.push({bbox:n.model.getBBox(),magnet:n.el}),n.$("[magnet]").toArray().forEach(function(t){e.push({bbox:n.getNodeBBox(t),magnet:t})}),e.forEach(function(t){var e=t.magnet,i=t.bbox.center().squaredDistance(g);i<c&&(a===n.el||h.options.validateConnection.apply(h,r.validateConnectionArgs(n,n.el===e?null:e)))&&(c=i,r.closestView=n,r.closestMagnet=e)})},this);var u=r.closestView,d=r.closestMagnet,f=r.arrowhead,p=a!==d;if(s&&p&&s.unhighlight(a,{connecting:!0,snapping:!0}),u){if(!p)return;u.highlight(d,{connecting:!0,snapping:!0}),l=u.getLinkEnd(d,e,i,this.model,f)}else l={x:e,y:i};this.model.set(f,l||{x:e,y:i},{ui:!0}),s&&this.notify("link:snap:disconnect",t,s,a,f),u&&this.notify("link:snap:connect",t,u,d,f)},_snapArrowheadEnd:function(t){var e=t.closestView,i=t.closestMagnet;e&&i&&(e.unhighlight(i,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(i)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,i,n){n.eventTarget!==t&&(n.magnetUnderPointer&&n.viewUnderPointer.unhighlight(n.magnetUnderPointer,{connecting:!0}),n.viewUnderPointer=this.paper.findView(t),n.viewUnderPointer?(n.magnetUnderPointer=n.viewUnderPointer.findMagnet(t),n.magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,n.validateConnectionArgs(n.viewUnderPointer,n.magnetUnderPointer))?n.magnetUnderPointer&&n.viewUnderPointer.highlight(n.magnetUnderPointer,{connecting:!0}):n.magnetUnderPointer=null):n.magnetUnderPointer=null),n.eventTarget=t,this.model.set(n.arrowhead,{x:e,y:i},{ui:!0})},_connectArrowheadEnd:function(t,e,i){var n=t.viewUnderPointer,r=t.magnetUnderPointer;if(r&&n){n.unhighlight(r,{connecting:!0});var o=t.arrowhead,s=n.getLinkEnd(r,e,i,this.model,o);this.model.set(o,s,{ui:!0})}},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,i=[];i[4]=t,i[5]=this;var n=0,r=0;e="source"===t?(n=2,"target"):(r=2,"source");var o=this.model.get(e);if(o.id){var s=i[n]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),i[n+1]=a}return function(t,e){return i[r]=t,i[r+1]=t.el===e?void 0:e,i}},_markAvailableMagnets:function(t){function e(t,e){var i=t.paper;return i.options.validateConnection.apply(i,this.validateConnectionArgs(t,e))}var i=this.paper,n=i.model.getCells();t.marked={};for(var r=0,o=n.length;r<o;r++){var s=n[r].findView(i);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var l=a.filter(e.bind(t,s));if(0<l.length){for(var c=0,g=l.length;c<g;c++)s.highlight(l[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e,i,n=Object.keys(t.marked),r=0,o=n.length;r<o;r++){e=n[r],i=t.marked[e];var s=this.paper.findViewByModel(e);if(s){for(var a=0,l=i.length;a<l;a++)s.unhighlight(i[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var i={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Bt(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(i),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=i),i}});Object.defineProperty(Fi.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new H(e.x,e.y)}var i=this.sourceMagnet;return t.isNodeConnection(i)?new H(this.sourceAnchor):t.getNodeBBox(i||t.el)}}),Object.defineProperty(Fi.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new H(e.x,e.y)}var i=this.targetMagnet;return t.isNodeConnection(i)?new H(this.targetAnchor):t.getNodeBBox(i||t.el)}});var Vi={stroke:{defaultOptions:{padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},_views:{},getHighlighterId:function(t,e){return t.id+JSON.stringify(e)},removeHighlighter:function(t){this._views[t]&&(this._views[t].remove(),this._views[t]=null)},highlight:function(t,e,i){var n=this.getHighlighterId(e,i);if(!this._views[n]){var r,o=jt(i||{},this.defaultOptions),s=q(e);try{var a=s.convertToPathData()}catch(t){r=s.bbox(!0),a=q.rectToPath(Tt({},o,r))}var l=q("path").attr({d:a,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"}).attr(o.attrs);if(t.isNodeConnection(e))l.attr("d",t.getSerializedConnection());else{var c=s.getTransformToElement(t.el),g=o.padding;if(g){r||(r=s.bbox(!0));var h=r.x+r.width/2,u=r.y+r.height/2;r=q.transformRect(r,c);var d=Math.max(r.width,1),f=Math.max(r.height,1),p=(d+g)/d,I=(f+g)/f,m=q.createSVGMatrix({a:p,b:0,c:0,d:I,e:h-p*h,f:u-I*u});c=c.multiply(m)}l.transform(c)}var A=this._views[n]=new Qe({svgElement:!0,className:"highlight-stroke",el:l.node}),v=this.removeHighlighter.bind(this,n),C=t.model;A.listenTo(C,"remove",v),A.listenTo(C.graph,"reset",v),t.vel.append(l)}},unhighlight:function(t,e,i){this.removeHighlighter(this.getHighlighterId(e,i))}},opacity:{highlight:function(t,e){q(e).addClass(tt("highlight-opacity"))},unhighlight:function(t,e){q(e).removeClass(tt("highlight-opacity"))}},addClass:{className:tt("highlighted"),highlight:function(t,e,i){var n=(i||{}).className||this.className;q(e).addClass(n)},unhighlight:function(t,e,i){var n=(i||{}).className||this.className;q(e).removeClass(n)}}};function Ji(s){return function(t,e,i,n){if(i instanceof Element){var r,o=this.paper.findView(i);if(o)if(o.isNodeConnection(i))r=Hi(o,"fixedAt"in n?n.fixedAt:"50%");else r=o.getNodeBBox(i).center();else r=new E;return s.call(this,t,e,r,n)}return s.apply(this,arguments)}}function Hi(t,e){var i=parseFloat(e);return ft(e)?t.getPointAtRatio(i/100):t.getPointAtLength(i)}var _i=Ji(function(t,e,i,n){var r=t.getConnection(),o=t.getConnectionSubdivisions(),s=new B(i.clone().offset(0,1e6),i.clone().offset(0,-1e6)),a=new B(i.clone().offset(1e6,0),i.clone().offset(-1e6,0)),l=s.intersect(r,{segmentSubdivisions:o}),c=a.intersect(r,{segmentSubdivisions:o}),g=[];return l&&Array.prototype.push.apply(g,l),c&&Array.prototype.push.apply(g,c),0<g.length?i.chooseClosest(g):"fallbackAt"in n?Hi(t,n.fallbackAt):Qi(t,e,i,n)}),Qi=Ji(function(t,e,i,n){var r=t.getClosestPoint(i);return r||new E}),Ki={resolveRef:Ji,connectionRatio:function(t,e,i,n){var r="ratio"in n?n.ratio:.5;return t.getPointAtRatio(r)},connectionLength:function(t,e,i,n){var r="length"in n?n.length:20;return t.getPointAtLength(r)},connectionPerpendicular:_i,connectionClosest:Qi};function qi(t,e,i){if(Wt(i)){var n=i.x,r=i.y;if(isFinite(r)){var o=new B(e,t).parallel(r);e=o.start,t=o.end}i=n}if(!isFinite(i))return t;var s=t.distance(e);return 0===i&&0<s?t:t.move(e,-Math.min(i,s-1))}function $i(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function tn(t,e,i,n){var r=e.getNodeBBox(i);n.stroke&&r.inflate($i(i)/2);var o=t.intersect(r);return qi(o?t.start.chooseClosest(o):t.end,t.start,n.offset)}var en="segmentSubdivisons",nn="shapeBBox";var rn={anchor:function(t,e,i,n){var r=n.offset,o=n.alignOffset,s=n.align;return s&&function(t,e,i){var n,r,o,s;void 0===i&&(i=0);var a=t.start,l=t.end;switch(e){case"left":n="x",r=l,o=a,s=-1;break;case"right":n="x",r=a,o=l,s=1;break;case"top":n="y",r=l,o=a,s=-1;break;case"bottom":n="y",r=a,o=l,s=1;break;default:return}a[n]<l[n]?r[n]=o[n]:o[n]=r[n],isFinite(i)&&(r[n]+=s*i,o[n]+=s*i)}(t,s,o),qi(t.end,t.start,r)},bbox:tn,rectangle:function(t,e,i,n){var r=e.model.angle();if(0===r)return tn(t,e,i,n);var o=e.getNodeUnrotatedBBox(i);n.stroke&&o.inflate($i(i)/2);var s=o.center(),a=t.clone().rotate(s,r),l=a.setLength(1e6).intersect(o);return qi(l?a.start.chooseClosest(l).rotate(s,-r):t.end,t.start,n.offset)},boundary:function(t,e,i,n){var r,o,s=n.selector,a=t.end;if(r="string"==typeof s?e.findBySelector(s)[0]:Array.isArray(s)?rt(i,s):function(t){if(!t)return null;var e=t;do{var i=e.tagName;if("string"!=typeof i)return null;if("G"===(i=i.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==i)break;e=e.nextElementSibling}}while(e);return e}(i),!q.isSVGGraphicsElement(r)){if(r===i||!q.isSVGGraphicsElement(i))return a;r=i}var l,c=e.getNodeShape(r),g=e.getNodeMatrix(r),h=e.getRootTranslateMatrix(),u=e.getRootRotateMatrix(),d=h.multiply(u).multiply(g),f=d.inverse(),p=q.transformLine(t,f),I=p.start.clone(),m=e.getNodeData(r);if(!1===n.insideout&&(m[nn]||(m[nn]=c.bbox()),m[nn].containsPoint(I)))return a;if(c instanceof O){var A=n.precision||2;m[en]||(m[en]=c.getSegmentSubdivisions({precision:A})),l={precision:A,segmentSubdivisions:m[en]}}!0===n.extrapolate&&p.setLength(1e6),(o=p.intersect(c,l))?q.isArray(o)&&(o=I.chooseClosest(o)):!0===n.sticky&&(o=c instanceof H?c.pointNearestToPoint(I):c instanceof w?c.intersectionWithLineFromCenterToPoint(I):c.closestPoint(I,l));var v=o?q.transformPoint(o,d):a,C=n.offset||0;return n.stroke&&(C+=$i(r)/2),qi(v,t.start,C)}};function on(h){return function(t,e,i,n){var r=!!n.rotate,o=r?t.getNodeUnrotatedBBox(e):t.getNodeBBox(e),s=o[h](),a=n.dx;if(a){var l=ft(a);a=parseFloat(a),isFinite(a)&&(l&&(a/=100,a*=o.width),s.x+=a)}var c=n.dy;if(c){var g=ft(c);c=parseFloat(c),isFinite(c)&&(g&&(c/=100,c*=o.height),s.y+=c)}return r?s.rotate(t.model.getBBox().center(),-t.model.angle()):s}}var sn={center:on("center"),top:on("topMiddle"),bottom:on("bottomMiddle"),left:on("leftMiddle"),right:on("rightMiddle"),topLeft:on("origin"),topRight:on("topRight"),bottomLeft:on("bottomLeft"),bottomRight:on("corner"),perpendicular:Ji(function(t,e,i,n){var r=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),a=o.origin(),l=o.corner(),c=n.padding;if(isFinite(c)||(c=0),a.y+c<=i.y&&i.y<=l.y-c){var g=i.y-s.y;s.x+=0===r||180===r?0:1*g/Math.tan(y(r)),s.y+=g}else if(a.x+c<=i.x&&i.x<=l.x-c){var h=i.x-s.x;s.y+=90===r||270===r?0:h*Math.tan(y(r)),s.x+=h}return s}),midSide:Ji(function(t,e,i,n){var r,o,s,a=!!n.rotate;a?(r=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),o=t.model.angle()):r=t.getNodeBBox(e);var l,c=n.padding;switch(isFinite(c)&&r.inflate(c),a&&i.rotate(s,o),r.sideNearestToPoint(i)){case"left":l=r.leftMiddle();break;case"right":l=r.rightMiddle();break;case"top":l=r.topMiddle();break;case"bottom":l=r.bottomMiddle()}return a?l.rotate(s,-o):l}),modelCenter:function(t,e,i,n,r){return t.model.getPointFromConnectedLink(this.model,r).offset(n.dx,n.dy)}},an={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},ln=9007199254740991,cn={default:{name:"stroke",options:{padding:3}},magnetAvailability:{name:"addClass",options:{className:"available-magnet"}},elementAvailability:{name:"addClass",options:{className:"available-cell"}}},gn=Qe.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:$e,linkView:Fi,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:cn,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new We,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,i){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,i,n,r,o){return("target"===r?i:t)instanceof $e},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:an.EXACT,frozen:!1,onViewUpdate:function(t,e,i,n,r){e&t.FLAG_INSERT||n.mounting||r.requestConnectedLinksUpdate(t,i,n)},onViewPostponed:function(t,e,i){return i.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,highlighterNamespace:Vi,anchorNamespace:sn,linkAnchorNamespace:Ki,connectionPointNamespace:rn},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_highlights:null,_zPivots:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){var t=this.options,e=this.el;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&qt(joint,"shapes")?joint.shapes:null);var i=this.model=t.model||new He;this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this.setDimensions(),this.startListening(),this._views={},this._zPivots={},this.$document=S(e.ownerDocument),this._highlights={},this.resetViews(i.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,i){var n=i.position;this.isAsync()||!ce(n)?this.renderView(t,i):(i.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(t,i),0===n&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,i){var n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,i)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===an.APPROX){var i=this.findViewByModel(t);i&&this.requestViewUpdate(i,i.FLAG_INSERT,i.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.removeZPivots(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,i=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(e)&&!i.hasActiveBatch(n)&&this.updateViews(t)}var r=this.SORT_DELAYING_BATCHES;r.includes(e)&&!i.hasActiveBatch(r)&&this.sortViews()}},cloneOptions:function(){var t=this.options,e=t.defaultConnector,i=t.defaultRouter,n=t.defaultConnectionPoint,r=t.defaultAnchor,o=t.defaultLinkAnchor,s=t.origin,a=t.highlighting,l=t.cellViewNamespace,c=t.interactive;!l&&"undefined"!=typeof joint&&qt(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),Rt(e)||(t.defaultConnector=Ot(e)),Rt(i)||(t.defaultRouter=Ot(i)),Rt(n)||(t.defaultConnectionPoint=Ot(n)),Rt(r)||(t.defaultAnchor=Ot(r)),Rt(o)||(t.defaultLinkAnchor=Ot(o)),Wt(c)&&(t.interactive=Tt({},c)),t.origin=Tt({},s),t.highlighting=Lt({},a,cn)},children:function(){var t=q.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:tt("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:tt("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:tt("layers"),selector:"layers",children:[{tagName:"g",className:tt("cells-layer viewport"),selector:"cells"},{tagName:"g",className:tt("tools-layer"),selector:"tools"}]}]}]},render:function(){this.renderChildren();var t=this.childNodes,e=this.options,i=t.svg,n=t.cells,r=t.defs,o=t.tools,s=t.layers,a=t.background,l=t.grid;return this.svg=i,this.defs=r,this.tools=o,this.cells=n,this.layers=s,this.$background=S(a),this.$grid=S(l),q.ensureId(i),this.viewport=n,e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var i=e.getAttribute("transform");return(this._viewportTransformString||null)===i?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=i),q.createSVGMatrix(t)}t=q.createSVGMatrix(t);var n=q.matrixToTransformString(t);return e.setAttribute("transform",n),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return q.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,i){if(t instanceof qe)for(var n=t.model,r=this.model.getConnectedLinks(n),o=0,s=r.length;o<s;o++){var a=r[o],l=this.findViewByModel(a);if(l){var c=["UPDATE"];a.getTargetCell()===n&&c.push("TARGET"),a.getSourceCell()===n&&c.push("SOURCE");var g=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(c),g,i)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof qe))return!1;var i=t.model;if(i.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var n=0,r=this.findViewByModel(i.getSourceCell());r&&!this.isViewMounted(r)&&(n=this.dumpView(r),t.updateEndMagnet("source"));var o=0,s=this.findViewByModel(i.getTargetCell());if(s&&!this.isViewMounted(s)&&(o=this.dumpView(s),t.updateEndMagnet("target")),0===n&&0===o)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,i,n){n||(n={}),this.scheduleViewUpdate(t,e,i,n);var r=this.isAsync();if(!(this.isFrozen()||r&&!1!==n.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(n);r&&this.notifyAfterRender(o,n)}},scheduleViewUpdate:function(t,e,i,n){var r=this._updates,o=this.options,s=t.FLAG_REMOVE,a=t.FLAG_INSERT,l=t.UPDATE_PRIORITY,c=t.cid,g=r.priorities[i];if(g||(g=r.priorities[i]={}),l<i)for(var h=i-1;l<=h;h--){var u=r.priorities[h];u&&c in u&&(g[c]|=u[c],delete u[c])}var d=g[c]||0;if((d&e)!==e){d||r.count++,e&s&&d&a?g[c]^=a:e&a&&d&s&&(g[c]^=s),g[c]|=e;var f=o.onViewUpdate;"function"==typeof f&&f.call(this,t,e,i,n||{},this)}},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,i=t.cid,n=e.priorities[t.UPDATE_PRIORITY],r=this.registerMountedView(t)|n[i];return delete n[i],r},dumpView:function(t,e){var i=this.dumpViewUpdate(t);return i?this.updateView(t,i,e):0},updateView:function(t,e,i){if(!t)return 0;var n=t.FLAG_REMOVE,r=t.FLAG_INSERT,o=t.model;if(t instanceof qe){if(e&n)return this.removeView(o),0;e&r&&(this.insertView(t),e^=r)}return e?t.confirmUpdate(e,i||{}):0},requireView:function(t,e){var i=this.findViewByModel(t);return i?(this.dumpView(i,e),i):null},registerUnmountedView:function(t){var e=t.cid,i=this._updates;if(e in i.unmounted)return 0;var n=i.unmounted[e]|=t.FLAG_INSERT;return i.unmountedCids.push(e),delete i.mounted[e],n},registerMountedView:function(t){var e=t.cid,i=this._updates;if(e in i.mounted)return 0;i.mounted[e]=!0,i.mountedCids.push(e);var n=i.unmounted[e]||0;return delete i.unmounted[e],n},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=jt({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){var e;this.notifyBeforeRender(t);for(var i=0,n=0,r=ln;n++,i+=(e=this.updateViewsBatch(t)).updated,r=Math.min(e.priority,r),!e.empty;);var o={updated:i,batches:n,priority:r};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){for(var t=this._updates.priorities,e=Object.keys(t),i=e.length;0<i&&i--;)for(var n in t[e[i]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:ln});var i=this._updates,n=i.id;if(n){dt(n),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var r=this.updateViewsBatch(t),o=jt({},t,{mountBatchSize:1e3-r.mounted,unmountBatchSize:1e3-r.unmounted}),s=this.checkViewport(o),a=s.unmounted,l=s.mounted,c=e.processed,g=i.count;0<r.updated&&(c+=r.updated+r.unmounted,r.processed=c,e.priority=Math.min(r.priority,e.priority),r.empty&&0===l?(r.unmounted+=a,r.mounted+=l,r.priority=e.priority,this.notifyAfterRender(r,t),e.processed=0,i.count=0):e.processed=c);var h=t.progress;if(g&&"function"==typeof h&&h.call(this,r.empty,c,g,r,this),i.id!==n)return}i.id=ut(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t){void 0===t&&(t={});var e=t.beforeRender;"function"!=typeof e&&"function"!=typeof(e=this.options.beforeRender)||e.call(this,t,this)},notifyAfterRender:function(t,e){void 0===e&&(e={});var i=e.afterRender;"function"!=typeof i&&(i=this.options.afterRender),"function"==typeof i&&i.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,i=this._updates,n=0,r=0,o=0,s=0,a=ln,l=!0,c=this.options,g=i.priorities,h="viewport"in t?t.viewport:c.viewport;"function"!=typeof h&&(h=null);var u=c.onViewPostponed;"function"!=typeof u&&(u=null);var d=Object.keys(g);t:for(var f=0,p=d.length;f<p;f++){var I=d[f],m=g[I];for(var A in m){if(e<=n){l=!1;break t}var v=_e[A];if(v){var C=m[A];if(0==(C&v.FLAG_REMOVE)){var w=A in i.unmounted;if(v.DETACHABLE&&h&&!h.call(this,v,!w,this)){w||(this.registerUnmountedView(v),v.unmount()),i.unmounted[A]|=C,delete m[A],o++;continue}w&&(C|=v.FLAG_INSERT,s++),C|=this.registerMountedView(v)}var y=this.updateView(v,C,t);0<y&&(m[A]=y,!u||!u.call(this,v,y,this)||m[A])?(r++,l=!1):(I<a&&(a=I),n++,delete m[A])}else delete m[A]}}return{priority:a,updated:n,postponed:r,unmounted:o,mounted:s,empty:l}},getUnmountedViews:function(){for(var t=this._updates,e=Object.keys(t.unmounted),i=e.length,n=new Array(i),r=0;r<i;r++)n[r]=_e[e[r]];return n},getMountedViews:function(){for(var t=this._updates,e=Object.keys(t.mounted),i=e.length,n=new Array(i),r=0;r<i;r++)n[r]=_e[e[r]];return n},checkUnmountedViews:function(t,e){e||(e={});var i=0;"function"!=typeof t&&(t=null);for(var n=("mountBatchSize"in e?e.mountBatchSize:1/0),r=this._updates,o=r.unmountedCids,s=r.unmounted,a=0,l=Math.min(o.length,n);a<l;a++){var c=o[a];if(c in s){var g=_e[c];if(g)if(g.DETACHABLE&&t&&!t.call(this,g,!1,this))o.push(c);else{i++;var h=this.registerMountedView(g);h&&this.scheduleViewUpdate(g,h,g.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),i},checkMountedViews:function(t,e){e||(e={});var i=0;if("function"!=typeof t)return i;for(var n=("unmountBatchSize"in e?e.unmountBatchSize:1/0),r=this._updates,o=r.mountedCids,s=r.mounted,a=0,l=Math.min(o.length,n);a<l;a++){var c=o[a];if(c in s){var g=_e[c];if(g)if(g.DETACHABLE&&!t.call(this,g,!0,this))i++,this.registerUnmountedView(g)&&g.unmount();else o.push(c)}}return o.splice(0,a),i},checkViewport:function(t){var e=jt({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),i="viewport"in e?e.viewport:this.options.viewport,n=this.checkMountedViews(i,e);if(0<n){var r=this._updates.unmountedCids;e.mountBatchSize=Math.min(r.length-n,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(i,e),unmounted:n}},freeze:function(t){t||(t={});var e=this._updates,i=t.key,n=this.options.frozen,r=e.freezeKey;if(i&&i!==r){if(n&&r)return;e.freezeKey=i,e.keyFrozen=n}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&dt(o)},unfreeze:function(t){t||(t={});var e=this._updates,i=t.key,n=e.freezeKey;i&&n&&i!==n||(e.freezeKey=null,i&&i===n&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===an.EXACT},onRemove:function(){this.freeze(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,i=t.height;return ce(e)||(e=this.el.clientWidth),ce(i)||(i=this.el.clientHeight),{width:e,height:i}},setDimensions:function(t,e){var i=this.options,n=void 0===t?i.width:t,r=void 0===e?i.height:e;this.options.width=n,this.options.height=r,ce(n)&&(n=Math.round(n)),ce(r)&&(r=Math.round(r)),this.$el.css({width:null===n?"":n,height:null===r?"":r});var o=this.getComputedSize();this.trigger("resize",o.width,o.height)},setOrigin:function(t,e){return this.translate(t||0,e||0,{absolute:!0})},fitToContent:function(t,e,i,n){i=le(t)?(t=(n=t).gridWidth||1,e=n.gridHeight||1,n.padding||0):(n||(n={}),t=t||1,e=e||1,i||0),i=wt(i);var r="contentArea"in n?new H(n.contentArea):this.getContentArea(n),o=this.scale(),s=this.translate(),a=o.sx,l=o.sy;r.x*=a,r.y*=l,r.width*=a,r.height*=l;var c=Math.max(Math.ceil((r.width+r.x)/t),1)*t,g=Math.max(Math.ceil((r.height+r.y)/e),1)*e,h=0,u=0;("negative"==n.allowNewOrigin&&r.x<0||"positive"==n.allowNewOrigin&&0<=r.x||"any"==n.allowNewOrigin)&&(h=Math.ceil(-r.x/t)*t,c+=h+=i.left),("negative"==n.allowNewOrigin&&r.y<0||"positive"==n.allowNewOrigin&&0<=r.y||"any"==n.allowNewOrigin)&&(u=Math.ceil(-r.y/e)*e,g+=u+=i.top),c+=i.right,g+=i.bottom,c=Math.max(c,n.minWidth||0),g=Math.max(g,n.minHeight||0),c=Math.min(c,n.maxWidth||Number.MAX_VALUE),g=Math.min(g,n.maxHeight||Number.MAX_VALUE);var d=this.getComputedSize(),f=c!=d.width||g!=d.height;return(h!=s.tx||u!=s.ty)&&this.translate(h,u),f&&this.setDimensions(c,g),new H(-h/a,-u/l,c/a,g/l)},scaleContentToFit:function(t){var e,i;if(t||(t={}),"contentArea"in t){var n=t.contentArea;e=this.localToPaperRect(n),i=new E(n)}else e=this.getContentBBox(t),i=this.paperToLocalPoint(e);if(e.width&&e.height){jt(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var r,o=wt(t.padding),s=t.minScaleX||t.minScale,a=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,c=t.maxScaleY||t.maxScale;if(t.fittingBBox)r=t.fittingBBox;else{var g=this.translate(),h=this.getComputedSize();r={x:g.tx,y:g.ty,width:h.width,height:h.height}}r=new H(r).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var u=this.scale(),d=r.width/e.width*u.sx,f=r.height/e.height*u.sy;if(t.preserveAspectRatio&&(d=f=Math.min(d,f)),t.scaleGrid){var p=t.scaleGrid;d=p*Math.floor(d/p),f=p*Math.floor(f/p)}d=Math.min(a,Math.max(s,d)),f=Math.min(c,Math.max(l,f));var I=this.options.origin,m=r.x-i.x*d-I.x,A=r.y-i.y*f-I.y;this.scale(d,f),this.translate(m,A)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new H:q(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(){return Rt(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):!0===this.options.restrictTranslate?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var e,i,n=this.options.cellViewNamespace,r=t.get("type")+"View",o=rt(n,r,".");return i=t.isLink()?(e=this.options.linkView,Fi):(e=this.options.elementView,$e),new(e.prototype instanceof s.View?o||e:e.call(this,t)||o||i)({model:t,interactive:this.options.interactive})},removeView:function(t){var e=t.id,i=this._views,n=this._updates,r=i[e];if(r){var o=r.cid,s=n.mounted,a=n.unmounted;r.remove(),delete i[e],delete s[o],delete a[o]}return r},renderView:function(t,e){var i,n,r=t.id,o=this._views;return n=r in o?(i=o[r]).FLAG_INSERT:((i=o[t.id]=this.createViewForModel(t)).paper=this).registerUnmountedView(i)|i.getFlag(i.initFlag),this.requestViewUpdate(i,n,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var i=0,n=t.length;i<n;i++)this.renderView(t[i],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){Zt(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t=S(this.cells).children("[model-id]"),s=this.model.get("cells");Ct(t,function(t,e){var i=s.get(t.getAttribute("model-id")),n=s.get(e.getAttribute("model-id")),r=i.attributes.z||0,o=n.attributes.z||0;return r===o?0:r<o?-1:1})},insertView:function(t){var e=this.cells;switch(this.options.sorting){case an.APPROX:var i=t.model.get("z"),n=this.addZPivot(i);e.insertBefore(t.el,n);break;case an.EXACT:default:e.appendChild(t.el)}},addZPivot:function(t){(t=+t)||(t=0);var e=this._zPivots,i=e[t];if(i)return i;i=e[t]=document.createComment("z-index:"+(t+1));var n=-1/0;for(var r in e)(r=+r)<t&&n<r&&(n=r);var o=this.cells;if(n!==-1/0){var s=e[n];o.insertBefore(i,s.nextSibling)}else o.insertBefore(i,o.firstChild);return i},removeZPivots:function(){var t=this._zPivots,e=this.viewport;for(var i in t)e.removeChild(t[i]);this._zPivots={}},scale:function(t,e,i,n){if(void 0===t)return q.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===i&&(n=i=0);var r=this.translate();if(i||n||r.tx||r.ty){var o=r.tx-i*(t-1),s=r.ty-n*(e-1);this.translate(o,s)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var a=this.matrix();return a.a=t,a.d=e,this.matrix(a),this.trigger("scale",t,e,i,n),this},rotate:function(t,e,i){if(void 0===t)return q.matrixToRotate(this.matrix());if(void 0===e){var n=this.cells.getBBox();e=n.width/2,i=n.height/2}var r=this.matrix().translate(e,i).rotate(t).translate(-e,-i);return this.matrix(r),this},translate:function(t,e){if(void 0===t)return q.matrixToTranslate(this.matrix());var i=this.matrix();i.e=t||0,i.f=e||0,this.matrix(i);var n=this.translate(),r=this.options.origin;return r.x=n.tx,r.y=n.ty,this.trigger("translate",n.tx,n.ty),this.options.drawGrid&&this.drawGrid(),this},findView:function(t){var e=ge(t)?this.cells.querySelector(t):t instanceof S?t[0]:t,i=this.findAttribute("model-id",e);if(i)return this._views[i]},findViewByModel:function(t){var e=ge(t)||ce(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(e){return e=new E(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=jt(t||{},{strict:!1}),e=new H(e);var i=this.model.getElements().map(this.findViewByModel,this),n=t.strict?"containsRect":"intersect";return i.filter(function(t){return t&&e[n](t.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t){for(var e,i=[],n=arguments.length-1;0<n--;)i[n]=arguments[n+1];"string"==typeof t&&(e=this).trigger.apply(e,["tools:event",t].concat(i))},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.matrix())},localToPaperRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.matrix())},paperToLocalPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.matrix().inverse())},paperToLocalRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.matrix().inverse())},localToClientPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.clientMatrix())},localToClientRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.clientMatrix())},clientToLocalPoint:function(t,e){var i=new E(t,e);return q.transformPoint(i,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,i,n){var r=new H(t,e,i,n);return q.transformRect(r,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,i,n){return this.localToPaperRect(t,e,i,n).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var i=new E(t,e).difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(t,e,i,n){var r=this.pageOffset(),o=new H(t,e,i,n);return o.x-=r.x,o.y-=r.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new E(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Fi))throw new Error("Must provide a linkView.");var e=t.model,i=this.options,n=this.model,r=n.constructor.validations;return!(!i.multiLinks&&!r.multiLinks.call(this,n,e))&&(!(!i.linkPinning&&!r.linkPinning.call(this,n,e))&&!("function"==typeof i.allowLink&&!i.allowLink.call(this,t,this)))},getDefaultLink:function(t,e){return Rt(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(e){var t=(e=e||{}).highlighter,i=this.options;if(void 0===t){var n=["embedding","connecting","magnetAvailability","elementAvailability"].find(function(t){return!!e[t]});t=n&&i.highlighting[n]||i.highlighting.default}if(!t)return!1;ge(t)&&(t={name:t});var r=t.name,o=i.highlighterNamespace[r];if(!o)throw new Error('Unknown highlighter ("'+r+'")');if("function"!=typeof o.highlight)throw new Error('Highlighter ("'+r+'") is missing required highlight() method');if("function"!=typeof o.unhighlight)throw new Error('Highlighter ("'+r+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:r}},onCellHighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){e.id||(e.id=q.uniqueId());var n=i.name+e.id+JSON.stringify(i.options);if(!this._highlights[n]){var r=i.highlighter;r.highlight(t,e,Tt({},i.options)),this._highlights[n]={cellView:t,magnetEl:e,opt:i.options,highlighter:r}}}},onCellUnhighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){var n=i.name+e.id+JSON.stringify(i.options),r=this._highlights[n];r&&(r.highlighter.unhighlight(r.cellView,r.magnetEl,r.opt),this._highlights[n]=null)}},pointerdblclick:function(t){t.preventDefault(),t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,i.x,i.y):this.trigger("blank:pointerdblclick",t,i.x,i.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=ht(t);var e=this.findView(t.target);if(this.guard(t,e))return;var i=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,i.x,i.y):this.trigger("blank:pointerclick",t,i.x,i.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,i.x,i.y):this.trigger("blank:contextmenu",t,i.x,i.y)}},pointerdown:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,i.x,i.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,i.x,i.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=ht(t);var i=this.snapToGrid(t.clientX,t.clientY),n=e.sourceView;n?n.pointermove(t,i.x,i.y):this.trigger("blank:pointermove",t,i.x,i.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=ht(t),i=this.snapToGrid(e.clientX,e.clientY),n=this.eventData(t).sourceView;n?n.pointerup(e,i.x,i.y):this.trigger("blank:pointerup",e,i.x,i.y),e.isPropagationStopped()||this.pointerclick(S.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.findView(t.relatedTarget);if(e){if(i===e)return;e.mouseenter(t)}else{if(i)return;this.trigger("paper:mouseenter",t)}}},mouseleave:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.findView(t.relatedTarget);if(e){if(i===e)return;e.mouseleave(t)}else{if(i)return;this.trigger("paper:mouseleave",t)}}},mousewheel:function(t){t=ht(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=t.originalEvent,n=this.snapToGrid(i.clientX,i.clientY),r=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));e?e.mousewheel(t,n.x,n.y,r):this.trigger("blank:mousewheel",t,n.x,n.y,r)}},onevent:function(t){var e=t.currentTarget,i=e.getAttribute("event");if(i){var n=this.findView(e);if(n){if(t=ht(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onevent(t,i,r.x,r.y)}}},magnetEvent:function(t,e){var i=t.currentTarget;if(i.getAttribute("magnet")){var n=this.findView(i);if(n){if(t=ht(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);e.call(this,n,t,i,r.x,r.y)}}},onmagnet:function(t){this.magnetEvent(t,function(t,e,i,n,r){t.onmagnet(e,n,r)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(t,e,i,n,r){t.magnetpointerdblclick(e,i,n,r)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(t,e,i,n,r){t.magnetcontextmenu(e,i,n,r)})},onlabel:function(t){var e=t.currentTarget,i=this.findView(e);if(i){if(t=ht(t),this.guard(t,i))return;var n=this.snapToGrid(t.clientX,t.clientY);i.onlabel(t,n.x,n.y)}},getPointerArgs:function(t){var e=ht(t),i=this.snapToGrid(e.clientX,e.clientY);return[e,i.x,i.y]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return"mousedown"===t.type&&2===t.button||(!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof Se)&&(this.svg!==t.target&&this.el!==t.target&&!S.contains(this.svg,t.target))))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:q("svg",{width:"100%",height:"100%"},q("defs")),patterns:{},add:function(t,e){q(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(q("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(ge(t)&&Array.isArray(e[t]))return e[t].map(function(t){return Tt({},t)});var i=t||{args:[{}]},n=Array.isArray(i),r=i.name;if(n||r||i.markup||(r="dot"),r&&Array.isArray(e[r])){var o=e[r].map(function(t){return Tt({},t)}),s=Array.isArray(i.args)?i.args:[i.args||{}];jt(s[0],te(t,"args"));for(var a=0;a<s.length;a++)o[a]&&Tt(o[a],s[a]);return o}return n?i:[i]},drawGrid:function(t){var a=this.options.gridSize;if(a<=1)return this.clearGrid();var l=Array.isArray(t)?t:[t],c=this.matrix(),g=this._getGridRefs();this._gridSettings.forEach(function(t,e){var i="pattern_"+e,n=se(t,l[e],{sx:c.a||1,sy:c.d||1,ox:c.e||0,oy:c.f||0});n.width=a*(c.a||1)*(n.scaleFactor||1),n.height=a*(c.d||1)*(n.scaleFactor||1),g.exist(i)||g.add(i,q("pattern",{id:i,patternUnits:"userSpaceOnUse"},q(n.markup)));var r=g.get(i);Rt(n.update)&&n.update(r.node.childNodes[0],n);var o=n.ox%n.width;o<0&&(o+=n.width);var s=n.oy%n.height;s<0&&(s+=n.height),r.attr({x:o,y:s,width:n.width,height:n.height})});var e=(new XMLSerializer).serializeToString(g.root.node);return e="url(data:image/svg+xml;base64,"+btoa(e)+")",this.$grid.css("backgroundImage",e),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",i=t.size||"auto auto",n=this.scale(),r=this.translate();le(e)&&(e=r.tx+n.sx*(e.x||0)+"px "+(r.ty+n.sy*(e.y||0))+"px");le(i)&&(i=(i=new H(i).scale(n.sx,n.sy)).width+"px "+i.height+"px"),this.$background.css({backgroundSize:i,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){var i,n=(e=e||{}).size,r=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[re(r)];if(Rt(a)){t.width*=s,t.height*=s;var l=a(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");i=l.toDataURL("image/png"),r="repeat",le(n)?(n.width*=l.width/t.width,n.height*=l.height/t.height):void 0===n&&(e.size={width:l.width/s,height:l.height/s})}else i=t.src,void 0===n&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:r,backgroundImage:"url("+i+")"}),this.updateBackgroundImage(e)}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Ot(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,Zt(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!le(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,i=t.name;if(e||(e=i+this.svg.id+nt(JSON.stringify(t))),!this.isDefined(e)){var n=Nt,r=n[i]&&n[i](t.args||{});if(!r)throw new Error("Non-existing filter "+i);var o=Tt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});q(r,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!le(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");var e=t.id,i=t.type,n=t.stops;if(e||(e=i+this.svg.id+nt(JSON.stringify(t))),!this.isDefined(e)){var r=xt('<stop offset="${offset}" stop-color="${color}" stop-opacity="${opacity}"/>'),o=["<"+i+">",Ut(n).map(function(t){return r({offset:t.offset,color:t.color,opacity:Number.isFinite(t.opacity)?t.opacity:1})}).join(""),"</"+i+">"].join(""),s=Tt({id:e},t.attrs);q(o,s).appendTo(this.defs)}return e},defineMarker:function(t){if(!le(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");var e=t.id;if(e||(e=this.svg.id+nt(JSON.stringify(t))),!this.isDefined(e)){var i=te(t,"type","userSpaceOnUse");q("marker",{id:e,orient:"auto",overflow:"visible",markerUnits:t.markerUnits||"userSpaceOnUse"},[q(t.type||"path",i)]).appendTo(this.defs)}return e}},{sorting:an,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),i=t.width,n=t.height;e.width=2*i,e.height=2*n;var r=e.getContext("2d");return r.drawImage(t,0,0,i,n),r.setTransform(-1,0,0,-1,e.width,e.height),r.drawImage(t,0,0,i,n),r.setTransform(-1,0,0,1,e.width,0),r.drawImage(t,0,0,i,n),r.setTransform(1,0,0,-1,0,e.height),r.drawImage(t,0,0,i,n),e},flipX:function(t){var e=document.createElement("canvas"),i=t.width,n=t.height;e.width=2*i,e.height=n;var r=e.getContext("2d");return r.drawImage(t,0,0,i,n),r.translate(2*i,0),r.scale(-1,1),r.drawImage(t,0,0,i,n),e},flipY:function(t){var e=document.createElement("canvas"),i=t.width,n=t.height;e.width=i,e.height=2*n;var r=e.getContext("2d");return r.drawImage(t,0,0,i,n),r.translate(0,2*n),r.scale(1,-1),r.drawImage(t,0,0,i,n),e},watermark:function(t,e){e=e||{};var i=t.width,n=t.height,r=document.createElement("canvas");r.width=3*i,r.height=3*n;for(var o=r.getContext("2d"),s=ce(e.watermarkAngle)?-e.watermarkAngle:-20,a=y(s),l=r.width/4,c=r.height/4,g=0;g<4;g++)for(var h=0;h<4;h++)0<(g+h)%2&&(o.setTransform(1,0,0,1,(2*g-1)*l,(2*h-1)*c),o.rotate(a),o.drawImage(t,-i/2,-n/2,i,n));return r}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){q(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var i=e.sx<=1?e.thickness*e.sx:e.thickness;q(t).attr({width:i,height:i,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var i,n=e.width,r=e.height,o=e.thickness;i=0<=n-o&&0<=r-o?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",q(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var i,n=e.width,r=e.height,o=e.thickness;i=0<=n-o&&0<=r-o?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",q(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var i,n=e.width,r=e.height,o=e.thickness;i=0<=n-o&&0<=r-o?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",q(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}}]}}),hn=Qe.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){var e=this.paper,i=this.relatedView;return!e||!i||e.guard(t,i)}}),un=Qe.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,options:{tools:null,relatedView:null,name:null,component:!1},configure:function(t){var e=(t=Tt(this.options,t)).tools;if(!Array.isArray(e))return this;var i=t.relatedView;if(!(i instanceof qe))return this;for(var n=this.tools=[],r=0,o=e.length;r<o;r++){var s=e[r];s instanceof hn&&(s.configure(i,this),s.render(),this.vel.append(s.el),n.push(s))}return this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(e){for(var i=0,n=e.length;i<n;i++){var r=e[i];t.tool!==r.cid&&r.isVisible()&&r.update()}return this}},focusTool:function(t){var e=this.tools;if(!e)return this;for(var i=0,n=e.length;i<n;i++){var r=e[i];t===r?r.show():r.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var i=0,n=e.length;i<n;i++){var r=e[i];r===t||r.isVisible()||(r.show(),r.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,i=t.length;e<i;e++)t[e].remove();this.tools=null},mount:function(){var t=this.options,e=t.relatedView;e&&(t.component?e.el:e.paper.tools).appendChild(this.el);return this}}),dn={Graph:He,attributes:xe,Cell:Se,CellView:qe,Element:Ve,ElementView:$e,Link:We,LinkView:Fi,Paper:gn,ToolView:hn,ToolsView:un},fn={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,i){var n=this.getCell(e),r=i.node(e);t.setPosition?t.setPosition(n,r):n.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importLink:function(t,e,i){var n=this.getCell(e.name),r=i.edge(e),o=r.points||[],s=new D(o);if(t.setVertices||t.setLinkVertices)if(Rt(t.setVertices))t.setVertices(n,o);else{s.simplify({threshold:.001});var a=s.points.map(function(t){return t.toJSON()}),l=a.length;n.set("vertices",a.slice(1,l-1))}if(t.setLabels&&"x"in r&&"y"in r){var c={x:r.x,y:r.y};if(Rt(t.setLabels))t.setLabels(n,c,o);else{var g=s.closestPointLength(c),h=s.pointAtLength(g),u=g/s.length(),d=new E(c).difference(h).toJSON();n.label(0,{position:{distance:u,offset:d}})}}},layout:function(t,e){var i;i=t instanceof He?t:(new He).resetCells(t,{dry:!0,sort:!1});var n=(e=jt(e||{},{resizeClusters:!(t=null),clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===n)throw new Error('The the "dagre" utility is a mandatory dependency.');var r=fn.toGraphLib(i,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(t){return t.id}}),o={},s=e.marginX||0,a=e.marginY||0;if(e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),e.ranker&&(o.ranker=e.ranker),s&&(o.marginx=s),a&&(o.marginy=a),r.setGraph(o),n.layout(r,{debugTiming:!!e.debugTiming}),i.startBatch("layout"),fn.fromGraphLib(r,{importNode:this.importElement.bind(i,e),importEdge:this.importLink.bind(i,e)}),e.resizeClusters){var l=r.nodes().filter(function(t){return 0<r.children(t).length}).map(i.getCell.bind(i)).sort(function(t,e){return e.getAncestors().length-t.getAncestors().length});Zt(l,"fitEmbeds",{padding:e.clusterPadding})}i.stopBatch("layout");var c=r.graph();return new H(s,a,Math.abs(c.width-2*s),Math.abs(c.height-2*a))},fromGraphLib:function(e,i){var n=(i=i||{}).importNode||he,r=i.importEdge||he,o=this instanceof He?this:new He;return e.nodes().forEach(function(t){n.call(o,t,e,o,i)}),e.edges().forEach(function(t){r.call(o,t,e,o,i)}),o},toGraphLib:function(t,e){var i=(e=e||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===i)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=ee(e,"directed","compound","multigraph"),r=new i.Graph(n),o=e.setNodeLabel||he,s=e.setEdgeLabel||he,a=e.setEdgeName||he,l=t.get("cells"),c=0,g=l.length;c<g;c++){var h=l.at(c);if(h.isLink()){var u=h.get("source"),d=h.get("target");if(!u.id||!d.id)break;r.setEdge(u.id,d.id,s(h),a(h))}else if(r.setNode(h.id,o(h)),r.isCompound()&&h.has("parent")){var f=h.get("parent");l.has(f)&&r.setParent(h.id,f)}}return r}};He.prototype.toGraphLib=function(t){return fn.toGraphLib(this,t)},He.prototype.fromGraphLib=function(t,e){return fn.fromGraphLib.call(this,t,e)};var pn={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var i=this._results[t];if(void 0!==i)return i;try{i=e()}catch(t){i=!1}return this._results[t]=i}},In=Ve.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),mn=In.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),An=$e.extend({presentationAttributes:$e.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=$e.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),vn=In.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),Cn=In.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),wn=In.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),yn=In.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),bn=In.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),Nn=In.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),Mn=In.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),xn=Mn.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),Sn=pn.test("svgforeignobject"),kn=In.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Sn?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),In.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Tt({},e),div:{style:Tt({},e)}})},updateContent:function(t,e){Sn?this.attr({".content":{html:mt(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),Dn=$e.extend({presentationAttributes:Sn?$e.prototype.presentationAttributes:$e.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=$e.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var i=this.model;if(Sn)$e.prototype.update.call(this,i,e);else{var n=te(e||i.get("attrs"),".content");$e.prototype.update.call(this,i,n),e&&!qt(e,".content")||this.updateContent(i,e)}},updateContent:function(t,e){var i=se({},(e||t.get("attrs"))[".content"]);i=te(i,"text");var n=It(t.get("content"),t.get("size"),i,{svgDocument:this.paper.svg}),r=ot({},".content",i,"/");r[".content"].text=n,$e.prototype.update.call(this,t,r)}}),zn={Generic:In,Rect:mn,TextView:An,Text:vn,Circle:Cn,Ellipse:wn,Polygon:yn,Polyline:bn,Image:Nn,Path:Mn,Rhombus:xn,TextBlock:kn,TextBlockView:Dn},Tn=Ve.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),jn=Ve.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Ln=Ve.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Zn=Ve.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Pn=Ve.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Gn=Ve.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Bn=Ve.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),On=Ve.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),En=Ve.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Yn=Ve.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Rn=Ve.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Wn=Ve.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var i={lateralArea:t},n=ft(t)?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:i,top:n},e)}},{attributes:{lateralArea:{set:function(t,e){var i=ft(t);i&&(t=parseFloat(t)/100);var n=e.x,r=e.y,o=e.width,s=e.height,a=o/2,l=i?s*t:t,c=q.KAPPA,g=c*a,h=c*(i?s*t:t),u=n+o/2,d=n+o,f=r+l,p=f-l,I=r+s-l,m=r+s;return{d:["M",n,f,"L",n,I,"C",n,I+h,u-g,m,u,m,"C",u+g,m,d,I+h,d,I,"L",d,f,"C",d,f-h,u+g,p,u,p,"C",u-g,p,n,f-h,n,f,"Z"].join(" ")}}}}}),Un=pn.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Xn={Rectangle:Tn,Circle:jn,Ellipse:Ln,Path:Zn,Polygon:Pn,Polyline:Gn,Image:Bn,BorderedImage:On,EmbeddedImage:En,InscribedImage:Yn,HeaderedRectangle:Rn,Cylinder:Wn,TextBlock:Ve.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Un]},{attributes:{text:{set:function(t,e,i,n){if(!(i instanceof HTMLElement)){var r=n.style||{},o={text:t,width:-5,height:"100%"},s=Tt({textVerticalAnchor:"middle"},r);return xe.textWrap.set.call(this,o,e,i,s),{fill:r.color||null}}i.textContent=t},position:function(t,e,i){if(i instanceof SVGElement)return e.center()}}}}),Link:We.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),DoubleLink:We.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ShadowLink:We.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]})},Fn=In.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){In.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,i){var n=Gt(this.get("inPorts")),r=_t(Gt(this.get("outPorts")),n),o=this.createPortItems("in",n),s=this.createPortItems("out",r);this.prop("ports/items",o.concat(s),Tt({rewrite:!0},i))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return Ut(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,i){var n=this.get(e);return this.set(e,Array.isArray(n)?n.concat(t):[t],i)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,i){return this.set(e,Ht(this.get(e),t),i)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,i){return this.prop("ports/groups/"+t,le(e)?e:{},i)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),Vn=Fn.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),Jn=Fn.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),Hn={Model:Fn,Atomic:Vn,Coupled:Jn,Link:We.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}})},_n=In.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),Qn=_n.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),Kn=Qn.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),qn=Qn.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),$n=_n.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),tr=_n.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),er=$n.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),ir=$n.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),nr=tr.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),rr=tr.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),or=tr.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),sr=tr.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),ar=tr.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),lr=tr.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),cr={Gate:_n,IO:Qn,Input:Kn,Output:qn,Gate11:$n,Gate21:tr,Repeater:er,Not:ir,Or:nr,And:rr,Nor:or,Nand:sr,Xor:ar,Xnor:lr,Wire:We.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")})},gr={KingWhite:In.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),KingBlack:In.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),QueenWhite:In.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),QueenBlack:In.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),RookWhite:In.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),RookBlack:In.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),BishopWhite:In.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),BishopBlack:In.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),KnightWhite:In.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),KnightBlack:In.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),PawnWhite:In.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),PawnBlack:In.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'})},hr=Ve.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),ur=hr.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),dr=Ve.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),fr=dr.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),pr=Ve.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),Ir=pr.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),mr=pr.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),Ar=pr.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),vr=pr.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),Cr={Entity:hr,WeakEntity:ur,Relationship:dr,IdentifyingRelationship:fr,Attribute:pr,Multivalued:Ir,Derived:mr,Key:Ar,Normal:vr,ISA:Ve.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Line:We.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}})},wr={State:Cn.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),StartState:Ve.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),EndState:Ve.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Arrow:We.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0})},yr={Member:Ve.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Arrow:We.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1})},br={Place:In.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),PlaceView:$e.extend({presentationAttributes:$e.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:$e.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=(t=$e.prototype.confirmUpdate).call.apply(t,[this].concat(e));return this.hasFlag(n,"TOKENS")&&(this.renderTokens(),this.update(),n=this.removeFlag(n,"TOKENS")),n},renderTokens:function(){var e=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(t){e.removeClass(t)});var t=this.model.get("tokens");if(t)switch(t){case 1:e.addClass("one"),e.append(q("circle"));break;case 2:e.addClass("two"),e.append([q("circle"),q("circle")]);break;case 3:e.addClass("three"),e.append([q("circle"),q("circle"),q("circle")]);break;default:e.addClass("alot"),e.append(q("text").text(t+""))}}}),Transition:In.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Link:We.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}})},Nr=In.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),In.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var n=this.get("attrs"),t=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],r=0;t.forEach(function(t){var e=Array.isArray(t.text)?t.text:[t.text],i=20*e.length+20;n[".uml-class-"+t.type+"-text"].text=e.join("\n"),n[".uml-class-"+t.type+"-rect"].height=i,n[".uml-class-"+t.type+"-rect"].transform="translate(0,"+r+")",r+=i})}}),Mr=$e.extend({initialize:function(){$e.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),xr=Nr.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),Sr=Mr,kr=Nr.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),Dr={basic:zn,standard:Xn,devs:Hn,logic:cr,chess:gr,erd:Cr,fsa:wr,org:yr,pn:br,uml:{Class:Nr,ClassView:Mr,Abstract:xr,AbstractView:Sr,Interface:kr,InterfaceView:Mr,Generalization:We.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),Implementation:We.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),Aggregation:We.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),Composition:We.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),Association:We.define("uml.Association"),State:In.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),In.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),StartState:Cn.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),EndState:In.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Transition:We.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}})}};function zr(t,e){return 0===e?"0%":Math.round(t/e*100)+"%"}function Tr(r){return function(t,e,i,n){return(e.isNodeConnection(i)?Lr:jr)(r,t,e,i,n)}}function jr(t,e,i,n,r){var o=i.model.angle(),s=i.getNodeUnrotatedBBox(n),a=i.model.getBBox().center();r.rotate(a,o);var l=r.x-s.x,c=r.y-s.y;return t&&(l=zr(l,s.width),c=zr(c,s.height)),e.anchor={name:"topLeft",args:{dx:l,dy:c,rotate:!0}},e}function Lr(t,e,i,n,r){var o=i.getConnection();if(!o)return e;var s=o.closestPointLength(r);if(t){var a=o.length();e.anchor={name:"connectionRatio",args:{ratio:s/a}}}else e.anchor={name:"connectionLength",args:{length:s}};return e}var Zr=he,Pr=Tr(!1),Gr=Tr(!0),Br={useDefaults:Zr,pinAbsolute:Pr,pinRelative:Gr};function Or(t,e,i){return Gr.call(this.paper,{},e,i,t,this.model).anchor}function Er(t,e){var i=t.model;return e?i.getBBox():i.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}var Yr=Qe.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){this.vel.attr({cx:t,cy:e})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),Rr=hn.extend({name:"vertices",options:{handleClass:Yr,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,i=t.length;e<i;e++)t[e].remove()},renderHandles:function(){for(var e=this,t=this.relatedView.model.vertices(),i=0,n=t.length;i<n;i++){var r=t[i],o=new this.options.handleClass({index:i,paper:this.paper,guard:function(t){return e.guard(t)}});o.render(),o.position(r.x,r.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,i=t.length;e<i;e++){var n=t[e],r=this.handles[e];if(!r)return;r.position(n.x,n.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,i=e.model.vertices(),n=0<t?i[t-1]:e.sourceAnchor,r=t<i.length-1?i[t+1]:e.targetAnchor;return{prev:new E(n),next:new E(r)}},onHandleWillChange:function(t,e){this.focus();var i=this.relatedView,n=this.options;i.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||i.notifyPointerdown.apply(i,i.paper.getPointerArgs(e))},onHandleChanging:function(t,e){var i=this.options,n=this.relatedView,r=t.options.index,o=n.paper.getPointerArgs(e),s=o[0],a=o[1],l=o[2],c={x:a,y:l};this.snapVertex(c,r),n.model.vertex(r,c,{ui:!0,tool:this.cid}),t.position(c.x,c.y),i.stopPropagation||n.notifyPointermove(s,a,l)},onHandleChanged:function(t,e){var i=this.options,n=this.relatedView;if(i.vertexAdding&&this.updatePath(),i.redundancyRemoval){n.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var r=n.paper.getPointerArgs(e),o=r[0],s=r[1],a=r[2];i.stopPropagation||n.notifyPointerup(o,s,a),n.checkMouseleave(o)}},snapVertex:function(t,e){var i=this.options.snapRadius;if(0<i){var n=this.getNeighborPoints(e),r=n.prev,o=n.next;Math.abs(t.x-r.x)<i?t.x=r.x:Math.abs(t.x-o.x)<i&&(t.x=o.x),Math.abs(t.y-r.y)<i?t.y=n.prev.y:Math.abs(t.y-o.y)<i&&(t.y=o.y)}},onHandleRemove:function(t,e){var i=t.options.index,n=this.relatedView;n.model.removeVertex(i,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(ht(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=ht(t),i=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var r=n.getVertexIndex(i.x,i.y);this.snapVertex(i,r),n.model.insertVertex(r,i,{ui:!0,tool:this.cid}),this.render();var o=this.handles[r];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:Yr}),Wr=Qe.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,i,n){var r=q.createSVGMatrix().translate(t,e).rotate(i),o=this.childNodes.handle;o.setAttribute("transform",q.matrixToTransformString(r)),o.setAttribute("cursor",i%180==0?"row-resize":"col-resize");var s=n.getClosestPoint(new E(t,e)),a=this.childNodes.line;a.setAttribute("x1",t),a.setAttribute("y1",e),a.setAttribute("x2",s.x),a.setAttribute("y2",s.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}}),Ur=hn.extend({name:"segments",precision:.5,options:{handleClass:Wr,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:Or,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var i=0,n=e.length;i<n-1;i++){var r=e[i],o=e[i+1],s=this.renderHandle(r,o);this.simulateRelatedView(s.el),this.handles.push(s),s.options.index=i}return this},renderHandle:function(t,e){var i=this,n=new this.options.handleClass({paper:this.paper,guard:function(t){return i.guard(t)}});return n.render(),this.updateHandle(n,t,e),n.vel.appendTo(this.el),this.startHandleListening(n),n},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,i=t.length;e<i;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,i=0,n=e.length;i<n;i++)e[i].options.index+=t},resetAnchor:function(t,e){var i=this.relatedView.model;e?i.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):i.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,i){var n=t.options.index,r=this.relatedView.model.vertices(),o=t.options.axis,s=r[n-2]||i.sourceAnchor,a=r[n+1]||i.targetAnchor,l=this.options.snapRadius;return Math.abs(e[o]-s[o])<l?e[o]=s[o]:Math.abs(e[o]-a[o])<l&&(e[o]=a[o]),e},onHandleChanging:function(t,e){var i=this.options,n=this.eventData(e),r=this.relatedView,o=r.paper,s=t.options.index-1,a=ht(e),l=o.snapToGrid(a.clientX,a.clientY),c=this.snapHandle(t,l.clone(),n),g=t.options.axis,h=this.options.snapHandle?0:l[g]-c[g],u=r.model,d=Ot(u.vertices()),f=d[s],p=d[s+1],I=this.options.anchor;"function"!=typeof I&&(I=null);var m=r.sourceView,A=r.sourceBBox,v=!1,C=!1;if(f?0===s?A.containsPoint(f)?(d.shift(),this.shiftHandleIndexes(-1),v=!0):(f[g]=c[g],C=!0):f[g]=c[g]:((f=r.sourceAnchor.toJSON())[g]=c[g],A.containsPoint(f)?(f[g]=c[g],v=!0):(d.unshift(f),this.shiftHandleIndexes(1),C=!0)),I&&m){if(v){var w=n.sourceAnchor.clone();w[g]=c[g];var y=I.call(r,w,m,r.sourceMagnet||m.el,"source",r);this.resetAnchor("source",y)}C&&this.resetAnchor("source",n.sourceAnchorDef)}var b=r.targetView,N=r.targetBBox,M=!1,x=!1;if(p?s===d.length-2?N.containsPoint(p)?(d.pop(),M=!0):(p[g]=c[g],x=!0):p[g]=c[g]:((p=r.targetAnchor.toJSON())[g]=c[g],N.containsPoint(p)?M=!0:(d.push(p),x=!0)),I&&b){if(M){var S=n.targetAnchor.clone();S[g]=c[g];var k=I.call(r,S,b,r.targetMagnet||b.el,"target",r);this.resetAnchor("target",k)}x&&this.resetAnchor("target",n.targetAnchorDef)}u.vertices(d,{ui:!0,tool:this.cid}),this.updateHandle(t,f,p,h),i.stopPropagation||r.notifyPointermove(a,l.x,l.y)},onHandleChangeStart:function(t,e){var i=this.options,n=this.handles,r=this.relatedView,o=r.model,s=r.paper,a=t.options.index;if(Array.isArray(n)){for(var l=0,c=n.length;l<c;l++)l!==a&&n[l].hide();this.focus(),this.eventData(e,{sourceAnchor:r.sourceAnchor.clone(),targetAnchor:r.targetAnchor.clone(),sourceAnchorDef:Bt(o.prop(["source","anchor"])),targetAnchorDef:Bt(o.prop(["target","anchor"]))}),o.startBatch("segment-move",{ui:!0,tool:this.cid}),i.stopPropagation||r.notifyPointerdown.apply(r,s.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){var i=this.options,n=this.relatedView,r=n.paper,o=n.model;i.redundancyRemoval&&n.removeRedundantLinearVertices({ui:!0,tool:this.cid});var s=ht(e),a=r.snapToGrid(s.clientX,s.clientY);this.render(),this.blur(),o.stopBatch("segment-move",{ui:!0,tool:this.cid}),i.stopPropagation||n.notifyPointerup(s,a.x,a.y),n.checkMouseleave(s)},updateHandle:function(t,e,i,n){var r=Math.abs(e.x-i.x)<this.precision,o=Math.abs(e.y-i.y)<this.precision;if(r||o){var s=new B(e,i);if(s.length()<this.options.segmentLengthThreshold)t.hide();else{var a=s.midpoint(),l=r?"x":"y";a[l]+=n||0;var c=s.vector().vectorAngle(new E(1,0));t.position(a.x,a.y,c,this.relatedView),t.show(),t.options.axis=l}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:Wr}),Xr=hn.extend({tagName:"path",xAxisVector:new E(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},onRender:function(){this.update()},update:function(){var t,e,i=this.ratio,n=this.relatedView,r=n.getTangentAtRatio(i);if(e=r?(t=r.start,r.vector().vectorAngle(this.xAxisVector)||0):(t=n.getPointAtRatio(i),0),!t)return this;var o=q.createSVGMatrix().translate(t.x,t.y).rotate(e);return this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=ht(t),i=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,i.x,i.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,i=e.paper,n=ht(t),r=i.snapToGrid(n.clientX,n.clientY);e.pointerup(n,r.x,r.y),i.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),Fr=Xr.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Vr=Xr.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),Jr=hn.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){var t=this.relatedView,e=this.vel,i=t.model.isLink()?this.getLinkMatrix():this.getElementMatrix();e.transform(i,{absolute:!0})},getElementMatrix:function(){var t=this.relatedView,e=this.options,i=e.x;void 0===i&&(i=0);var n=e.y;void 0===n&&(n=0);var r=e.offset;void 0===r&&(r={});var o=e.useModelGeometry,s=e.rotate,a=Er(t,o),l=t.model.angle();s||(a=a.bbox(l));var c=r.x;void 0===c&&(c=0);var g=r.y;void 0===g&&(g=0),ft(i)&&(i=parseFloat(i)/100*a.width),ft(n)&&(n=parseFloat(n)/100*a.height);var h=q.createSVGMatrix().translate(a.x+a.width/2,a.y+a.height/2);return s&&(h=h.rotate(l)),h=h.translate(i+c-a.width/2,n+g-a.height/2)},getLinkMatrix:function(){var t=this.relatedView,e=this.options,i=e.offset;void 0===i&&(i=0);var n=e.distance;void 0===n&&(n=0);var r,o,s,a=e.rotate;s=(r=ft(n)?t.getTangentAtRatio(parseFloat(n)/100):t.getTangentAtLength(n))?(o=r.start,r.vector().vectorAngle(new E(1,0))||0):(o=t.getConnection().start,0);var l=q.createSVGMatrix().translate(o.x,o.y).rotate(s).translate(0,i);return a||(l=l.rotate(-s)),l},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),Hr=Jr.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,i){e.model.remove({ui:!0,tool:i.cid})}}}),_r=hn.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){var t=this.relatedView,e=this.options,i=this.vel,n=e.useModelGeometry,r=e.rotate,o=wt(e.padding),s=Er(t,n).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom}),a=t.model;if(a.isElement()){var l=a.angle();if(l)if(r){var c=a.getBBox().center();i.rotate(l,c.x,c.y,{absolute:!0})}else s=s.bbox(l)}return i.attr(s.toJSON()),this}}),Qr=hn.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:function(t,e,i,n,r,o){var s=o.options.snapRadius,a="source"===n,l=a?0:-1,c=this.model.vertex(l)||this.getEndAnchor(a?"target":"source");return c&&(Math.abs(c.x-t.x)<s&&(t.x=c.x),Math.abs(c.y-t.y)<s&&(t.y=c.y)),t},anchor:Or,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){var t=this.type,e=this.relatedView.getEndView(t);return this.el.style.display=e?(this.updateAnchor(),this.updateArea(),""):"none",this},updateAnchor:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var i=this.relatedView,n=this.type,r=i.getEndAnchor(n),o=this.options,s=i.model.prop([n,"anchor"]);e.setAttribute("transform","translate("+r.x+","+r.y+")");var a=s?o.customAnchorAttributes:o.defaultAnchorAttributes;for(var l in a)e.setAttribute(l,a[l])}}},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var i,n,r,o=this.relatedView,s=this.type,a=o.getEndView(s),l=a.model,c=o.getEndMagnet(s),g=this.options.areaPadding;isFinite(g)||(g=0),a.isNodeConnection(c)?(n=0,r=(i=a.getBBox()).center()):(i=a.getNodeUnrotatedBBox(c),n=l.angle(),r=i.center(),n&&r.rotate(l.getBBox().center(),-n)),i.inflate(g),e.setAttribute("x",-i.width/2),e.setAttribute("y",-i.height/2),e.setAttribute("width",i.width),e.setAttribute("height",i.height),e.setAttribute("transform","translate("+r.x+","+r.y+") rotate("+n+")")}}},toggleArea:function(t){this.childNodes.area.style.display=t?"":"none"},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,i=this.relatedView.model;t?i.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):i.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e,i=this.relatedView,n=this.type,r=i.getEndView(n),o=r.model,s=i.getEndMagnet(n),a=ht(t),l=this.paper.clientToLocalPoint(a.clientX,a.clientY),c=this.options.snap;if("function"==typeof c&&(l=c.call(i,l,r,s,n,i,this),l=new E(l)),this.options.restrictArea)if(r.isNodeConnection(s)){var g=r.getClosestPoint(l);g&&(l=g)}else{var h=r.getNodeUnrotatedBBox(s),u=o.angle(),d=o.getBBox().center(),f=l.clone().rotate(d,u);h.containsPoint(f)||(l=h.pointNearestToPoint(f).rotate(d,-u))}var p=this.options.anchor;"function"==typeof p&&(e=p.call(i,l,r,s,n,i)),this.resetAnchor(e),this.update()},onPointerUp:function(t){this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.relatedView;this.options.redundancyRemoval&&e.removeRedundantLinearVertices({ui:!0,tool:this.cid}),e.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;!1!==t&&(!0===t&&(t=null),this.resetAnchor(Ot(t)),this.update())}}),Kr={Vertices:Rr,Segments:Ur,SourceArrowhead:Vr,TargetArrowhead:Fr,SourceAnchor:Qr.extend({name:"source-anchor",type:"source"}),TargetAnchor:Qr.extend({name:"target-anchor",type:"target"}),Button:Jr,Remove:Hr,Boundary:_r},qr={Button:Jr,Remove:Hr,Boundary:_r},$r=q,to={DirectedGraph:fn,PortLabel:Re,Port:Pe};e.V=q,e.Vectorizer=$r,e.anchors=sn,e.config=$,e.connectionPoints=rn,e.connectionStrategies=Br,e.connectors=Xi,e.dia=dn,e.elementTools=qr,e.env=pn,e.format={},e.g=K,e.highlighters=Vi,e.layout=to,e.linkAnchors=Ki,e.linkTools=Kr,e.mvc=Ke,e.routers=Pi,e.setTheme=function(t,e){Zt(_e,"setTheme",t,e=e||{}),Qe.prototype.defaultTheme=t},e.shapes=Dr,e.ui={},e.util=ze,e.version="3.2.0",Object.defineProperty(e,"__esModule",{value:!0})}),"undefined"!=typeof joint)var g=joint.g,V=joint.V,Vectorizer=joint.V;
##############################################
/src/dist/joint.core.js-1796-            // we can work with that - if `NaN`, return 0
/src/dist/joint.core.js:1797:            if (cpNormalizedLength !== cpNormalizedLength) { return 0; } // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`
/src/dist/joint.core.js-1798-            // (`NaN` is the only value that is not equal to itself)
##############################################
/src/dist/joint.core.js-6015-
/src/dist/joint.core.js:6016:                    el = document.createElementNS(ns.svg, el);
/src/dist/joint.core.js-6017-                }
##############################################
/src/dist/joint.core.js-6350-                    if (eol && j === lastJ) { annotation += eol; }
/src/dist/joint.core.js:6351:                    tspanNode = document.createTextNode(annotation || ' ');
/src/dist/joint.core.js-6352-                    if (baseSize && baseSize > maxFontSize) { maxFontSize = baseSize; }
##############################################
/src/dist/joint.core.js-7189-
/src/dist/joint.core.js:7190:            var svg = document.createElementNS(ns.svg, 'svg');
/src/dist/joint.core.js-7191-            svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);
##############################################
/src/dist/joint.core.js-8435-        var ns = namespace || svgNamespace;
/src/dist/joint.core.js:8436:        var fragment = document.createDocumentFragment();
/src/dist/joint.core.js-8437-        var queue = [json, fragment, ns];
##############################################
/src/dist/joint.core.js-8448-                if (nodeDef.hasOwnProperty('namespaceURI')) { ns = nodeDef.namespaceURI; }
/src/dist/joint.core.js:8449:                var node = document.createElementNS(ns, tagName);
/src/dist/joint.core.js-8450-                var svg = (ns === svgNamespace);
##############################################
/src/dist/joint.core.js-8840-        var textElement = V('text').attr(styles).append(textSpan).node;
/src/dist/joint.core.js:8841:        var textNode = document.createTextNode('');
/src/dist/joint.core.js-8842-
##############################################
/src/dist/joint.core.js-8858-
/src/dist/joint.core.js:8859:            document.body.appendChild(svgDocument);
/src/dist/joint.core.js-8860-        }
##############################################
/src/dist/joint.core.js-9068-            // clean svg document
/src/dist/joint.core.js:9069:            document.body.removeChild(svgDocument);
/src/dist/joint.core.js-9070-        }
##############################################
/src/dist/joint.core.js-9124-            var url = window.URL.createObjectURL(blob);
/src/dist/joint.core.js:9125:            var link = document.createElement('a');
/src/dist/joint.core.js-9126-
##############################################
/src/dist/joint.core.js-9128-            link.download = fileName;
/src/dist/joint.core.js:9129:            document.body.appendChild(link);
/src/dist/joint.core.js-9130-
##############################################
/src/dist/joint.core.js-9132-
/src/dist/joint.core.js:9133:            document.body.removeChild(link);
/src/dist/joint.core.js-9134-            window.URL.revokeObjectURL(url); // mark the url for garbage collection
##############################################
/src/dist/joint.core.js-9312-            // the DOM. The easiest way is to have a 'flag' node:
/src/dist/joint.core.js:9313:            var nextSibling = parentNode.insertBefore(document.createTextNode(''), sortElement.nextSibling);
/src/dist/joint.core.js-9314-
##############################################
/src/dist/joint.core.js-9957-    /**
/src/dist/joint.core.js:9958:     * @param {Element} el Element, which content is intent to display in full-screen mode, 'window.top.document.body' is default.
/src/dist/joint.core.js-9959-     */
##############################################
/src/dist/joint.core.js-10534-                        // Create a new title
/src/dist/joint.core.js:10535:                        var titleNode = document.createElementNS(node.namespaceURI, 'title');
/src/dist/joint.core.js-10536-                        titleNode.textContent = title;
##############################################
/src/dist/joint.core.js-12207-                    var key = groups[i];
/src/dist/joint.core.js:12208:                    this.groups[key] = this._evaluateGroup(data.groups[key]);
/src/dist/joint.core.js-12209-                }
##############################################
/src/dist/joint.core.js-12214-            for (var j = 0, m = ports.length; j < m; j++) {
/src/dist/joint.core.js:12215:                this.ports.push(this._evaluatePort(ports[j]));
/src/dist/joint.core.js-12216-            }
##############################################
/src/dist/joint.core.js-12218-
/src/dist/joint.core.js:12219:        _evaluateGroup: function(group) {
/src/dist/joint.core.js-12220-
##############################################
/src/dist/joint.core.js-12226-
/src/dist/joint.core.js:12227:        _evaluatePort: function(port) {
/src/dist/joint.core.js-12228-
/src/dist/joint.core.js:12229:            var evaluated = assign({}, port);
/src/dist/joint.core.js-12230-
##############################################
/src/dist/joint.core.js-12232-
/src/dist/joint.core.js:12233:            evaluated.markup = evaluated.markup || group.markup;
/src/dist/joint.core.js:12234:            evaluated.attrs = merge({}, group.attrs, evaluated.attrs);
/src/dist/joint.core.js:12235:            evaluated.position = this._createPositionNode(group, evaluated);
/src/dist/joint.core.js:12236:            evaluated.label = merge({}, group.label, this._getLabel(evaluated));
/src/dist/joint.core.js:12237:            evaluated.z = this._getZIndex(group, evaluated);
/src/dist/joint.core.js:12238:            evaluated.size = assign({}, group.size, evaluated.size);
/src/dist/joint.core.js-12239-
/src/dist/joint.core.js:12240:            return evaluated;
/src/dist/joint.core.js-12241-        },
##############################################
/src/dist/joint.core.js-13458-            if (this.svgElement) {
/src/dist/joint.core.js:13459:                return document.createElementNS(V.namespace.svg, tagName);
/src/dist/joint.core.js-13460-            } else {
/src/dist/joint.core.js:13461:                return document.createElement(tagName);
/src/dist/joint.core.js-13462-            }
##############################################
/src/dist/joint.core.js-15457-            svgforeignobject: function() {
/src/dist/joint.core.js:15458:                return !!document.createElementNS &&
/src/dist/joint.core.js:15459:                    /SVGForeignObject/.test(({}).toString.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));
/src/dist/joint.core.js-15460-            }
##############################################
/src/dist/joint.core.js-19202-
/src/dist/joint.core.js:19203:            // The set of tentative points to be evaluated, initially containing the start points.
/src/dist/joint.core.js-19204-            // Rounded to nearest integer for simplicity.
##############################################
/src/dist/joint.core.js-19282-
/src/dist/joint.core.js:19283:                    // Closed points from the openSet were already evaluated.
/src/dist/joint.core.js-19284-                    if (openSet.isClose(neighborKey) || !map.isPointAccessible(neighborPoint)) { continue; }
##############################################
/src/dist/joint.core.js-21151-            var children = V(labelMarkup);
/src/dist/joint.core.js:21152:            var fragment = document.createDocumentFragment();
/src/dist/joint.core.js-21153-
##############################################
/src/dist/joint.core.js-24674-            if (pivot) { return pivot; }
/src/dist/joint.core.js:24675:            pivot = pivots[z] = document.createComment('z-index:' + (z + 1));
/src/dist/joint.core.js-24676-            var neighborZ = -Infinity;
##############################################
/src/dist/joint.core.js-25706-                opt = this._background = cloneDeep(opt);
/src/dist/joint.core.js:25707:                var img = document.createElement('img');
/src/dist/joint.core.js-25708-                img.onload = this.drawBackgroundImage.bind(this, img, opt);
##############################################
/src/dist/joint.core.js-25858-
/src/dist/joint.core.js:25859:                var canvas = document.createElement('canvas');
/src/dist/joint.core.js-25860-                var imgWidth = img.width;
##############################################
/src/dist/joint.core.js-25885-
/src/dist/joint.core.js:25886:                var canvas = document.createElement('canvas');
/src/dist/joint.core.js-25887-                var imgWidth = img.width;
##############################################
/src/dist/joint.core.js-25907-
/src/dist/joint.core.js:25908:                var canvas = document.createElement('canvas');
/src/dist/joint.core.js-25909-                var imgWidth = img.width;
##############################################
/src/dist/joint.core.js-25934-
/src/dist/joint.core.js:25935:                var canvas = document.createElement('canvas');
/src/dist/joint.core.js-25936-                canvas.width = imgWidth * 3;
##############################################
/src/tutorials/custom-elements.html-340-                of the <code>createRandom()</code> constructor function.
/src/tutorials/custom-elements.html:341:                Try <a onClick="window.location.reload()" style="cursor: pointer">refreshing the page</a> to see
/src/tutorials/custom-elements.html-342-                <code>createRandom()</code> in action.</p>
##############################################
/src/tutorials/custom-links.html-388-                Every link has a default label added as well.
/src/tutorials/custom-links.html:389:                Try <a onClick="window.location.reload()" style="cursor: pointer">refreshing the page</a> to see
/src/tutorials/custom-links.html-390-                <code>createRandom()</code> in action.</p>
##############################################
/src/tutorials/links-patterns.html-230-    // create a canvas of the size same as the link bounding box
/src/tutorials/links-patterns.html:231:    var canvas = document.createElement('canvas');
/src/tutorials/links-patterns.html-232-    canvas.width = bbox.width;
##############################################
/src/tutorials/js/pipes.js-99-        // create a canvas of the size same as the link bounding box
/src/tutorials/js/pipes.js:100:        var canvas = document.createElement('canvas');
/src/tutorials/js/pipes.js-101-        canvas.width = bbox.width;
