/src/cloudcmd.js-10-"use strict";
/src/cloudcmd.js:11:eval("\n\n/* global CloudCmd */\n\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst Storage = __webpack_require__(/*! ./storage */ \"./client/dom/storage.js\");\nconst DOM = __webpack_require__(/*! ./ */ \"./client/dom/index.js\");\n\nmodule.exports = new BufferProto();\n\nfunction BufferProto() {\n    const Info = DOM.CurrentInfo;\n    const CLASS = 'cut-file';\n    const COPY = 'copy';\n    const CUT = 'cut';\n    const TITLE = 'Buffer';\n    \n    const Buffer  = {\n        cut     : callIfEnabled.bind(null, cut),\n        copy    : callIfEnabled.bind(null, copy),\n        clear   : callIfEnabled.bind(null, clear),\n        paste   : callIfEnabled.bind(null, paste)\n    };\n    \n    function showMessage(msg) {\n        DOM.Dialog.alert(TITLE, msg);\n    }\n    \n    function getNames() {\n        const files = DOM.getActiveFiles();\n        const names = DOM.getFilenames(files);\n        \n        return names;\n    }\n    \n    function addCutClass() {\n        const files = DOM.getActiveFiles();\n        \n        files.forEach((element) => {\n            element.classList.add(CLASS);\n        });\n    }\n    \n    function rmCutClass() {\n        const files = DOM.getByClassAll(CLASS);\n        \n        [...files].forEach((element) => {\n            element.classList.remove(CLASS);\n        });\n    }\n    \n    function callIfEnabled(callback) {\n        const is = CloudCmd.config('buffer');\n        \n        if (is)\n            return callback();\n        \n        showMessage('Buffer disabled in config!');\n    }\n    \n    function copy() {\n        const names = getNames();\n        const from = Info.dirPath;\n        \n        clear();\n        \n        if (!names.length)\n            return;\n        \n        Storage.remove(CUT)\n            .set(COPY, {\n                from,\n                names,\n            });\n    }\n    \n    function cut() {\n        const names = getNames();\n        const from = Info.dirPath;\n        \n        clear();\n        \n        if (!names.length)\n            return;\n        \n        addCutClass();\n        \n        Storage\n            .set(CUT, {\n                from,\n                names,\n            });\n    }\n    \n    function clear() {\n        Storage.remove(COPY)\n            .remove(CUT);\n        \n        rmCutClass();\n    }\n    \n    function paste() {\n        const copy = Storage.get.bind(Storage, COPY);\n        const cut = Storage.get.bind(Storage, CUT);\n        \n        exec.parallel([copy, cut], (error, cp, ct) => {\n            const opStr = cp ? 'copy' : 'move';\n            const opData = cp || ct;\n            const Operation = CloudCmd.Operation;\n            const msg = 'Path is same!';\n            const path = Info.dirPath;\n            \n            if (!error && !cp && !ct)\n                error = 'Buffer is empty!';\n           \n            if (error)\n                return showMessage(error);\n                \n            const data = jonny.parse(opData);\n            data.to = path;\n            \n            if (data.from === path)\n                return showMessage(msg);\n            \n            Operation.show(opStr, data);\n            clear();\n        });\n    }\n    \n    return Buffer;\n}\n\n\n//# sourceURL=file://cloudcmd/client/dom/buffer.js");
/src/cloudcmd.js-12-
##############################################
/src/cloudcmd.js-22-"use strict";
/src/cloudcmd.js:23:eval("/* global CloudCmd */\n\n\n\nconst philip = __webpack_require__(/*! philip */ \"./node_modules/philip/legacy/philip.js\");\n\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\nconst DOM = __webpack_require__(/*! . */ \"./client/dom/index.js\");\n\nconst {\n    getCurrentDirPath: getPathWhenRootEmpty,\n} = DOM;\n\nmodule.exports = (items) => {\n    const Dialog = DOM.Dialog;\n    \n    if (items.length)\n        Images.show('top');\n    \n    const entries = [...items].map((item) => {\n        return item.webkitGetAsEntry();\n    });\n    \n    const dirPath = getPathWhenRootEmpty();\n    const path = dirPath\n        .replace(/\\/$/, '');\n    \n    const uploader = philip(entries, (type, name, data, i, n, callback) => {\n        const prefixURL = CloudCmd.PREFIX_URL;\n        const full = prefixURL + FS + path + name;\n        \n        let upload;\n        switch(type) {\n        case 'file':\n            upload = uploadFile(full, data);\n            break;\n        \n        case 'directory':\n            upload = uploadDir(full);\n            break;\n        }\n        \n        upload.on('end', callback);\n        \n        upload.on('progress', (count) => {\n            const current = percent(i, n);\n            const next = percent(i + 1, n);\n            const max = next - current;\n            const value = current + percent(count, 100, max);\n            \n            setProgress(value);\n        });\n    });\n    \n    uploader.on('error', (error) => {\n        Dialog.alert(error);\n        uploader.abort();\n    });\n    \n    uploader.on('progress', setProgress);\n    uploader.on('end', CloudCmd.refresh);\n};\n\nfunction percent(i, n, per = 100) {\n    return Math.round(i * per / n);\n}\n\nfunction setProgress(count) {\n    DOM.Images\n        .setProgress(count)\n        .show('top');\n}\n\nfunction uploadFile(url, data) {\n    return DOM.load.put(url, data);\n}\n\nfunction uploadDir(url) {\n    return DOM.load.put(url + '?dir');\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/directory.js");
/src/cloudcmd.js-24-
##############################################
/src/cloudcmd.js-34-"use strict";
/src/cloudcmd.js:35:eval("\n\nconst DOM = module.exports;\n\n/**\n * check class of element\n *\n * @param element\n * @param className\n */\nmodule.exports.isContainClass = (element, className) => {\n    if (!element)\n        throw Error('element could not be empty!');\n    \n    if (!className)\n        throw Error('className could not be empty!');\n    \n    const classList = element.classList;\n    const ret = classList.contains(className);\n    \n    return ret;\n};\n\n/**\n * Function search element by tag\n * @param tag - className\n * @param element - element\n */\nmodule.exports.getByTag = (tag, element = document) => {\n    return element.getElementsByTagName(tag);\n};\n\n/**\n * Function search element by id\n * @param Id - id\n */\nmodule.exports.getById = (id, element = document) => {\n    return element.querySelector('#' + id);\n};\n\n/**\n * Function search first element by class name\n * @param className - className\n * @param element - element\n */\nmodule.exports.getByClass = (className, element = document) => {\n    return DOM.getByClassAll(className, element)[0];\n};\n\nmodule.exports.getByDataName = (attribute, element = document) => {\n    const selector    = '[' + 'data-name=\"' + attribute + '\"]';\n    return element.querySelector(selector);\n};\n\n/**\n * Function search element by class name\n * @param pClass - className\n * @param element - element\n */\nmodule.exports.getByClassAll = (className, element) => {\n    return (element || document).getElementsByClassName(className);\n};\n\n/**\n * add class=hidden to element\n *\n * @param element\n */\nmodule.exports.hide = (element) => {\n    element.classList.add('hidden');\n    return DOM;\n};\n\nmodule.exports.show = (element) => {\n    element.classList.remove('hidden');\n    return DOM;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/dom-tree.js");
/src/cloudcmd.js-36-
##############################################
/src/cloudcmd.js-46-"use strict";
/src/cloudcmd.js:47:eval("\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\n\nmodule.exports = new EventsProto();\n\nfunction EventsProto() {\n    const Events = this;\n    \n    function parseArgs(eventName, element, listener, callback) {\n        let isFunc;\n        const args = [\n            eventName,\n            element,\n            listener,\n            callback,\n        ];\n        \n        const EVENT_NAME = 1;\n        const ELEMENT = 0;\n        const type = itype(eventName);\n        \n        switch(type) {\n        default:\n            if (!/element$/.test(type))\n                throw Error('unknown eventName: ' + type);\n            \n            parseArgs(\n                args[EVENT_NAME],\n                args[ELEMENT],\n                listener,\n                callback\n            );\n            break;\n        \n        case 'string':\n            isFunc = itype.function(element);\n            \n            if (isFunc) {\n                listener   = element;\n                element    = null;\n            }\n            \n            if (!element)\n                element = window;\n            \n            callback(element, [\n                eventName,\n                listener,\n                false\n            ]);\n            break;\n        \n        case 'array':\n            eventName.forEach((eventName) => {\n                parseArgs(\n                    eventName,\n                    element,\n                    listener,\n                    callback\n                );\n            });\n            break;\n        \n        case 'object':\n            Object.keys(eventName).forEach((name) => {\n                const eventListener = eventName[name];\n                \n                parseArgs(\n                    name,\n                    element,\n                    eventListener,\n                    callback\n                );\n            });\n           \n            break;\n        }\n    }\n    \n    /**\n     * safe add event listener\n     *\n     * @param type\n     * @param element {document by default}\n     * @param listener\n     */\n    this.add = (type, element, listener) => {\n        checkType(type);\n        \n        parseArgs(type, element, listener, (element, args) => {\n            element.addEventListener.apply(element, args);\n        });\n        \n        return Events;\n    };\n    \n    /**\n     * safe add event listener\n     *\n     * @param type\n     * @param listener\n     * @param element {document by default}\n     */\n    this.addOnce = (type, element, listener) => {\n        const once = (event) => {\n            Events.remove(type, element, once);\n            listener(event);\n        };\n        \n        if (!listener) {\n            listener    = element;\n            element     = null;\n        }\n        \n        this.add(type, element, once);\n        \n        return Events;\n    };\n    \n    /**\n     * safe remove event listener\n     *\n     * @param type\n     * @param listener\n     * @param element {document by default}\n     */\n    this.remove = (type, element, listener) => {\n        checkType(type);\n        \n        parseArgs(type, element, listener, (element, args) => {\n            element.removeEventListener.apply(element, args);\n        });\n        \n        return Events;\n    };\n    \n    /**\n     * safe add event keydown listener\n     *\n     * @param listener\n     */\n    this.addKey = function(...argsArr) {\n        const name = 'keydown';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe remove event click listener\n     *\n     * @param listener\n     */\n    this.rmKey = function(...argsArr) {\n        const name = 'keydown';\n        const args = [name, ...argsArr];\n        \n        return Events.remove(...args);\n    };\n    \n    /**\n     * safe add event click listener\n     *\n     * @param listener\n     */\n    this.addClick = function(...argsArr) {\n        const name = 'click';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe remove event click listener\n     *\n     * @param listener\n     */\n    this.rmClick = function(...argsArr) {\n        const name = 'click';\n        const args = [name, ...argsArr];\n        \n        return Events.remove(...args);\n    };\n    \n    this.addContextMenu = function(...argsArr) {\n        const name = 'contextmenu';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe add event click listener\n     *\n     * @param listener\n     */\n    this.addError = function(...argsArr) {\n        const name = 'error';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe add load click listener\n     *\n     * @param listener\n     */\n    this.addLoad = function(...argsArr) {\n        const name = 'load';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    function checkType(type) {\n        if (!type)\n            throw Error('type could not be empty!');\n    }\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/events.js");
/src/cloudcmd.js-48-
##############################################
/src/cloudcmd.js-58-"use strict";
/src/cloudcmd.js:59:eval("/* global CloudCmd */\n\n\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst Storage = __webpack_require__(/*! ./storage */ \"./client/dom/storage.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst RESTful = __webpack_require__(/*! ./rest */ \"./client/dom/rest.js\");\n\nconst Promises = {};\nconst FILES_JSON = 'config|modules';\nconst FILES_HTML = 'file|path|link|pathLink|media';\nconst FILES_HTML_ROOT = 'view/media-tmpl|config-tmpl|upload';\nconst DIR_HTML = '/tmpl/';\nconst DIR_HTML_FS = DIR_HTML + 'fs/';\nconst DIR_JSON = '/json/';\nconst timeout = getTimeoutOnce(2000);\n\nconst get = currify(getFile);\nconst unaryMap = (array, fn) => array.map((a) => fn(a));\n\nmodule.exports.get = get;\n\nfunction getFile(name, callback) {\n    const type = itype(name);\n    let array;\n    \n    check(name, callback);\n    \n    switch(type) {\n    case 'string':\n        getModule(name, callback);\n        break;\n    \n    case 'array':\n        array = unaryMap(name, get);\n        \n        exec.parallel(array, callback);\n        break;\n    }\n}\n\nfunction check(name, callback) {\n    if (!name)\n        throw Error('name could not be empty!');\n    \n    if (typeof callback !== 'function')\n        throw Error('callback should be a function');\n}\n\nfunction getModule(name, callback) {\n    let path;\n    \n    const regExpHTML = new RegExp(FILES_HTML + '|' + FILES_HTML_ROOT);\n    const regExpJSON = new RegExp(FILES_JSON);\n    \n    const isHTML = regExpHTML.test(name);\n    const isJSON = regExpJSON.test(name);\n    \n    if (!isHTML && !isJSON) {\n        showError(name);\n    } else if (name === 'config') {\n        getConfig(callback);\n    } else {\n        path = getPath(name, isHTML, isJSON);\n        \n        getSystemFile(path, callback);\n    }\n    \n}\n\nfunction getPath(name, isHTML, isJSON) {\n    let path;\n    const regExp = new RegExp(FILES_HTML_ROOT);\n    const isRoot = regExp.test(name);\n    \n    if (isHTML) {\n        if (isRoot)\n            path = DIR_HTML + name.replace('-tmpl', '');\n        else\n            path = DIR_HTML_FS  + name;\n        \n        path += '.hbs';\n    } else if (isJSON) {\n        path = DIR_JSON  + name + '.json';\n    }\n    \n    return path;\n}\n\nfunction showError(name) {\n    const str = 'Wrong file name: ' + name;\n    const error = new Error(str);\n    \n    throw(error);\n}\n\nfunction getSystemFile(file, callback) {\n    const prefix = CloudCmd.PREFIX;\n    \n    if (!Promises[file])\n        Promises[file] = new Promise((success, error) => {\n            const url = prefix + file;\n            \n            load.ajax({\n                url,\n                success,\n                error\n            });\n        });\n    \n    Promises[file].then((data) => {\n        callback(null, data);\n    }, (error) => {\n        Promises[file] = null;\n        callback(error);\n    });\n}\n\nfunction getConfig(callback) {\n    let is;\n    \n    if (!Promises.config)\n        Promises.config = new Promise((resolve, reject) => {\n            is = true;\n            RESTful.Config.read((error, data) => {\n                if (error)\n                    return reject(error);\n                \n                resolve(data);\n            });\n        });\n    \n    Promises.config.then(function(data) {\n        is = false;\n        Storage.setAllowed(data.localStorage);\n        \n        callback(null, data);\n        \n        timeout(() => {\n            if (!is)\n                Promises.config = null;\n        });\n    }, function() {\n        if (!is)\n            Promises.config = null;\n    });\n}\n\nfunction getTimeoutOnce(time) {\n    let is;\n    \n    return (callback) => {\n        if (is)\n            return;\n        \n        is = true;\n        \n        setTimeout(() => {\n            is = false;\n            callback();\n        }, time);\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/files.js");
/src/cloudcmd.js-60-
##############################################
/src/cloudcmd.js-70-"use strict";
/src/cloudcmd.js:71:eval("/* global CloudCmd */\n/* global DOM */\n\n\n\nconst Images = module.exports;\n\nconst LOADING = 'loading';\nconst HIDDEN = 'hidden';\nconst ERROR = 'error';\n\nconst LoadingImage = LOADING + getLoadingType();\n\nfunction getLoadingType() {\n    return isSVG() ? '-svg' : '-gif';\n}\n\nmodule.exports.get = getElement;\n\n/**\n * check SVG SMIL animation support\n */\nfunction isSVG() {\n    const createNS = document.createElementNS;\n    const SVG_URL = 'http://www.w3.org/2000/svg';\n    \n    if (!createNS)\n        return false;\n    \n    const create = createNS.bind(document);\n    const svgNode = create(SVG_URL, 'animate');\n    const name = svgNode.toString();\n    \n    return /SVGAnimate/.test(name);\n}\n\n\nfunction getElement() {\n    return DOM.load({\n        name        : 'span',\n        id          : 'js-status-image',\n        className   : 'icon',\n        attribute   : 'data-progress',\n        notAppend   : true\n    });\n}\n\n/* Функция создаёт картинку загрузки */\nmodule.exports.loading = () => {\n    const element = getElement();\n    const classList = element.classList;\n    \n    classList.add(LOADING, LoadingImage);\n    classList.remove(ERROR, HIDDEN);\n    \n    return element;\n};\n\n/* Функция создаёт картинку ошибки загрузки */\nmodule.exports.error = () => {\n    const element = getElement();\n    const classList = element.classList;\n    \n    classList.add(ERROR);\n    classList.remove(HIDDEN, LOADING, LoadingImage);\n    \n    return element;\n};\n\nmodule.exports.show = show;\nmodule.exports.show.load  = show;\nmodule.exports.show.error = error;\n\n/**\n* Function shows loading spinner\n* position = {top: true};\n*/\nfunction show(position, panel) {\n    const image = Images.loading();\n    const parent = image.parentElement;\n    const refreshButton = DOM.getRefreshButton(panel);\n    \n    let current;\n\n    if (position === 'top') {\n        current = refreshButton.parentElement;\n    } else {\n        current = DOM.getCurrentFile();\n        \n        if (current)\n            current = DOM.getByDataName('js-name', current);\n        else\n            current = refreshButton.parentElement;\n    }\n    \n    if (!parent || (parent && parent !== current))\n        current.appendChild(image);\n    \n    DOM.show(image);\n    \n    return image;\n}\n\nfunction error(text) {\n    const image = Images.error();\n    \n    DOM.show(image);\n    image.title = text;\n    \n    CloudCmd.log(text);\n    \n    return image;\n}\n\n/**\n* hide load image\n*/\nmodule.exports.hide = () => {\n    const element = Images.get();\n    \n    DOM.hide(element);\n    \n    return Images;\n};\n\nmodule.exports.setProgress = (value, title) => {\n    const DATA = 'data-progress';\n    const element = Images.get();\n     \n    if (!element)\n        return Images;\n    \n    element.setAttribute(DATA, value + '%');\n    \n    if (title)\n        element.title = title;\n    \n    return Images;\n};\n\nmodule.exports.clearProgress  = () => {\n    const DATA = 'data-progress';\n    const element = Images.get();\n    \n    if (!element)\n        return Images;\n    \n    element.setAttribute(DATA, '');\n    element.title = '';\n    \n    return Images;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/images.js");
/src/cloudcmd.js-72-
##############################################
/src/cloudcmd.js-82-"use strict";
/src/cloudcmd.js:83:eval("/* global CloudCmd */\n\n\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst Util = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nconst {\n    getTitle,\n    FS,\n    Entity,\n} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nconst DOMTree = __webpack_require__(/*! ./dom-tree */ \"./client/dom/dom-tree.js\");\n\nconst DOM = Object.assign({}, DOMTree, new CmdProto());\n\nmodule.exports = DOM;\n\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst Files = __webpack_require__(/*! ./files */ \"./client/dom/files.js\");\nconst RESTful = __webpack_require__(/*! ./rest */ \"./client/dom/rest.js\");\nconst Storage = __webpack_require__(/*! ./storage */ \"./client/dom/storage.js\");\n\nDOM.Images = Images;\nDOM.load = load;\nDOM.Files = Files;\nDOM.RESTful = RESTful;\nDOM.Storage = Storage;\n\nDOM.uploadDirectory = __webpack_require__(/*! ./directory */ \"./client/dom/directory.js\");\nDOM.Buffer = __webpack_require__(/*! ./buffer */ \"./client/dom/buffer.js\");\nDOM.Events = __webpack_require__(/*! ./events */ \"./client/dom/events.js\");\n\nconst loadRemote = __webpack_require__(/*! ./load-remote */ \"./client/dom/load-remote.js\");\nconst selectByPattern = __webpack_require__(/*! ./select-by-pattern */ \"./client/dom/select-by-pattern.js\");\n\nfunction CmdProto() {\n    let Title;\n    let CurrentInfo = {};\n    \n    const Cmd = this;\n    const CURRENT_FILE = 'current-file';\n    const SELECTED_FILE = 'selected-file';\n    const TITLE = 'Cloud Commander';\n    const TabPanel = {\n        'js-left'        : null,\n        'js-right'       : null\n    };\n    \n    this.loadRemote = (name, options, callback) => {\n        loadRemote(name, options, callback);\n        return DOM;\n    };\n    /**\n     * load jquery from google cdn or local copy\n     * @param callback\n     */\n    this.loadJquery = function(callback) {\n        DOM.loadRemote('jquery', {\n            name    : '$'\n        }, callback);\n        \n        return DOM;\n    };\n    \n    this.loadSocket = function(callback) {\n        DOM.loadRemote('socket', {\n            name    : 'io'\n        }, callback);\n        \n        return DOM;\n    };\n    \n    /** function loads css and js of Menu\n     * @param callback\n     */\n    this.loadMenu = function(callback) {\n        return DOM.loadRemote('menu', callback);\n    };\n    \n    /**\n     * create new folder\n     *\n     */\n    this.promptNewDir        = function() {\n        promptNew('directory', '?dir');\n    };\n    \n    /**\n     * create new file\n     *\n     * @typeName\n     * @type\n     */\n    this.promptNewFile = () => {\n        promptNew('file');\n    };\n    \n    function promptNew(typeName, type) {\n        const {Dialog} = DOM;\n        const dir = Cmd.getCurrentDirPath();\n        const msg = 'New ' + typeName || 'File';\n        const getName = () => {\n            const name = Cmd.getCurrentName();\n            \n            if (name === '..')\n                return '';\n             \n            return name;\n        };\n        \n        const name = getName();\n        const cancel = false;\n        \n        Dialog.prompt(TITLE, msg, name, {cancel}).then((name) => {\n            if (!name)\n                return;\n            \n            const path = (type) => {\n                const result = dir + name;\n                \n                if (!type)\n                    return result;\n                \n                return result + type;\n            };\n            \n            RESTful.write(path(type), (error) => {\n                if (error)\n                    return;\n                \n                const currentName = name;\n                \n                CloudCmd.refresh({\n                    currentName\n                });\n            });\n        });\n    }\n    \n    /**\n     * get current direcotory name\n     */\n    this.getCurrentDirName = () => {\n        const href = DOM.getCurrentDirPath()\n            .replace(/\\/$/, '');\n        \n        const substr  = href.substr(href, href.lastIndexOf('/'));\n        const ret     = href.replace(substr + '/', '') || '/';\n        \n        return ret;\n    };\n    \n    /**\n     * get current direcotory path\n     */\n    this.getCurrentDirPath = (panel = DOM.getPanel()) => {\n        const path =  DOM.getByDataName('js-path', panel);\n        const ret = path && path.textContent;\n        \n        return ret;\n    };\n    \n    /**\n     * get current direcotory path\n     */\n    this.getParentDirPath = (panel) => {\n        const path = DOM.getCurrentDirPath(panel);\n        const dirName = DOM.getCurrentDirName() + '/';\n        \n        if (path !== '/')\n            return path.replace(RegExp(dirName + '$'), '');\n        \n        return path;\n    };\n    \n    /**\n     * get not current direcotory path\n     */\n    this.getNotCurrentDirPath = () => {\n        const panel = DOM.getPanel({active: false});\n        const path = DOM.getCurrentDirPath(panel);\n        \n        return path;\n    };\n    \n    /**\n     * unified way to get current file\n     *\n     * @currentFile\n     */\n    this.getCurrentFile = () => {\n        return DOM.getByClass(CURRENT_FILE);\n    };\n    \n    /**\n     * get current file by name\n     */\n    this.getCurrentByName = (name, panel = CurrentInfo.panel) => {\n        const dataName = 'js-file-' + name;\n        const element = DOM.getByDataName(dataName, panel);\n        \n        return element;\n    };\n    \n    /**\n     * unified way to get current file\n     *\n     * @currentFile\n     */\n    this.getSelectedFiles = () => {\n        const panel = DOM.getPanel();\n        const selected = DOM.getByClassAll(SELECTED_FILE, panel);\n        \n        return [...selected];\n    };\n    \n    /*\n     * unselect all files\n     */\n    this.unselectFiles = (files) => {\n        files = files || DOM.getSelectedFiles();\n        \n        [...files].forEach(DOM.toggleSelectedFile);\n    };\n    \n    /**\n     * get all selected files or current when none selected\n     *\n     * @currentFile\n     */\n    this.getActiveFiles = () => {\n        const current = DOM.getCurrentFile();\n        const files = DOM.getSelectedFiles();\n        const name = DOM.getCurrentName(current);\n        \n        if (!files.length && name !== '..')\n            return [current];\n        \n        return files;\n    };\n    \n    this.getCurrentDate = (currentFile) => {\n        const current = currentFile || Cmd.getCurrentFile();\n        const date = DOM\n            .getByDataName('js-date', current)\n            .textContent;\n        \n        return date;\n    };\n    \n    /**\n     * get size\n     * @currentFile\n     */\n    this.getCurrentSize = (currentFile) => {\n        const current = currentFile || Cmd.getCurrentFile();\n        /* если это папка - возвращаем слово dir вместо размера*/\n        const size = DOM.getByDataName('js-size', current)\n            .textContent\n            .replace(/^<|>$/g, '');\n        \n        return size;\n    };\n    \n    /**\n     * get size\n     * @currentFile\n     */\n    this.loadCurrentSize = (callback, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const query = '?size';\n        const link = DOM.getCurrentPath(current);\n        \n        Images.show.load();\n        \n        if (name === '..')\n            return;\n        \n        RESTful.read(link + query, (error, size) => {\n            if (error)\n                return;\n                \n            DOM.setCurrentSize(size, current);\n            exec(callback, current);\n            Images.hide();\n        });\n    };\n    \n    /**\n     * load hash\n     * @callback\n     * @currentFile\n     */\n    this.loadCurrentHash = (callback, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const query = '?hash';\n        const link = DOM.getCurrentPath(current);\n        \n        RESTful.read(link + query, callback);\n    };\n    \n    /**\n     * load current modification time of file\n     * @callback\n     * @currentFile\n     */\n    this.loadCurrentTime = (callback, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const query = '?time';\n        const link = DOM.getCurrentPath(current);\n        \n        RESTful.read(link + query, callback);\n    };\n    \n    /**\n     * set size\n     * @currentFile\n     */\n    this.setCurrentSize = (size, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const sizeElement = DOM.getByDataName('js-size', current);\n        \n        sizeElement.textContent = size;\n    };\n    \n    /**\n     * @currentFile\n     */\n    this.getCurrentMode = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const mode = DOM.getByDataName('js-mode', current);\n        \n        return mode.textContent;\n    };\n    \n    /**\n     * @currentFile\n     */\n    this.getCurrentOwner = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const owner = DOM.getByDataName('js-owner', current);\n        \n        return owner.textContent;\n    };\n    \n    /**\n     * unified way to get current file content\n     *\n     * @param callback\n     * @param currentFile\n     */\n    this.getCurrentData = (callback, currentFile) => {\n        let hash;\n        const Dialog = DOM.Dialog;\n        const Info = DOM.CurrentInfo;\n        const current = currentFile || DOM.getCurrentFile();\n        const path = DOM.getCurrentPath(current);\n        const isDir = DOM.isCurrentIsDir(current);\n        \n        const func = (error, data) => {\n            const ONE_MEGABYTE = 1024 * 1024 * 1024;\n            \n            if (!error) {\n                if (itype.object(data))\n                    data = jonny.stringify(data);\n                \n                const length  = data.length;\n                \n                if (hash && length < ONE_MEGABYTE)\n                    DOM.saveDataToStorage(path, data, hash);\n            }\n            \n            callback(error, data);\n        };\n        \n        if (Info.name === '..') {\n            Dialog.alert.noFiles(TITLE);\n            return callback(Error('No files selected!'));\n        }\n        \n        if (isDir)\n            return RESTful.read(path, func);\n        \n        DOM.checkStorageHash(path, (error, equal, hashNew) => {\n            if (error)\n                return callback(error);\n            \n            if (equal)\n                return DOM.getDataFromStorage(path, callback);\n            \n            hash = hashNew;\n            RESTful.read(path, func);\n        });\n    };\n    \n    /**\n     * unified way to save current file content\n     *\n     * @callback - function({data, name}) {}\n     * @currentFile\n     */\n    this.saveCurrentData = (url, data, callback, query = '') => {\n        DOM.RESTful.write(url + query, data, (error) => {\n            !error && DOM.saveDataToStorage(url, data);\n        });\n    };\n    \n    /**\n     * unified way to get RefreshButton\n     */\n    this.getRefreshButton = (panel) => {\n        const currentPanel = panel || DOM.getPanel();\n        const refresh = DOM.getByDataName('js-refresh', currentPanel);\n        \n        return refresh;\n    };\n    \n    this.setCurrentByName = (name) => {\n        const current = DOM.getCurrentByName(name);\n        return DOM.setCurrentFile(current);\n    };\n    \n    /**\n     * private function thet unset currentfile\n     *\n     * @currentFile\n     */\n    function unsetCurrentFile(currentFile) {\n        const is = DOM.isCurrentFile(currentFile);\n        \n        if (!is)\n            return;\n        \n        currentFile.classList.remove(CURRENT_FILE);\n    }\n    \n    /**\n     * unified way to set current file\n     */\n    this.setCurrentFile = (currentFile, options) => {\n        const o = options;\n        const CENTER = true;\n        const currentFileWas = DOM.getCurrentFile();\n        \n        if (!currentFile)\n            return DOM;\n        \n        let pathWas = '';\n        \n        if (currentFileWas) {\n            pathWas = DOM.getCurrentDirPath();\n            unsetCurrentFile(currentFileWas);\n        }\n        \n        currentFile.classList.add(CURRENT_FILE);\n        \n        let path = DOM.getCurrentDirPath();\n        \n        const name = CloudCmd.config('name');\n        if (path !== pathWas) {\n            DOM.setTitle(getTitle({\n                name,\n                path,\n            }));\n            \n            /* history could be present\n             * but it should be false\n             * to prevent default behavior\n             */\n            if (!o || o.history !== false) {\n                if (path !== '/')\n                    path = FS + path;\n                \n                DOM.setHistory(path, null, path);\n            }\n        }\n        \n        /* scrolling to current file */\n        DOM.scrollIntoViewIfNeeded(currentFile, CENTER);\n        \n        Cmd.updateCurrentInfo(currentFile);\n        \n        return DOM;\n    };\n    \n    /*\n      * set current file by position\n      *\n      * @param layer    - element\n      * @param          - position {x, y}\n      */\n    this.getCurrentByPosition = ({x, y}) => {\n        const element = document.elementFromPoint(x, y);\n        \n        const getEl = (el) => {\n            const {tagName} = el;\n            const isChild = /A|SPAN|LI/.test(tagName);\n            \n            if (!isChild)\n                return null;\n            \n            if (tagName === 'A')\n                return el.parentElement.parentElement;\n            \n            if (tagName === 'SPAN')\n                return el.parentElement;\n            \n            return el;\n        };\n        \n        const el = getEl(element);\n        \n        if (el && el.tagName !== 'LI')\n            return null;\n        \n        return el;\n    };\n    \n    /**\n     * select current file\n     * @param currentFile\n     */\n    this.selectFile = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        \n        current.classList.add(SELECTED_FILE);\n        \n        return Cmd;\n    };\n    \n    this.unselectFile = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        \n        current.classList.remove(SELECTED_FILE);\n        \n        return Cmd;\n    };\n    \n    this.toggleSelectedFile = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const name = DOM.getCurrentName(current);\n        \n        if (name === '..')\n            return Cmd;\n        \n        current.classList.toggle(SELECTED_FILE);\n        \n        return Cmd;\n    };\n    \n    this.toggleAllSelectedFiles = () => {\n        DOM.getAllFiles().map(DOM.toggleSelectedFile);\n        \n        return Cmd;\n    };\n    \n    this.selectAllFiles = () => {\n        DOM.getAllFiles().map(DOM.selectFile);\n        \n        return Cmd;\n    };\n    \n    this.getAllFiles = () => {\n        const panel = DOM.getPanel();\n        const files = DOM.getFiles(panel);\n        const name = DOM.getCurrentName(files[0]);\n        \n        const from = (a) => a === '..' ? 1 : 0;\n        const i = from(name);\n        \n        return [...files].slice(i);\n    };\n    \n    /**\n     * open dialog with expand selection\n     */\n    this.expandSelection = () => {\n        const msg = 'expand';\n        const files = CurrentInfo.files;\n        \n        selectByPattern(msg, files);\n    };\n    \n    /**\n     * open dialog with shrink selection\n     */\n    this.shrinkSelection = () => {\n        const msg = 'shrink';\n        const files = CurrentInfo.files;\n       \n        selectByPattern(msg, files);\n    };\n    \n    /**\n     * setting history wrapper\n     */\n    this.setHistory = (data, title, url) => {\n        const ret = window.history;\n        \n        url = CloudCmd.PREFIX + url;\n        \n        if (ret)\n            history.pushState(data, title, url);\n        \n        return ret;\n    };\n    \n    /**\n     * set title or create title element\n     *\n     * @param name\n     */\n    \n    this.setTitle = (name) => {\n        if (!Title)\n            Title = DOM.getByTag('title')[0] ||\n                    DOM.load({\n                        name            : 'title',\n                        innerHTML       : name,\n                        parentElement   : document.head\n                    });\n        \n        Title.textContent = name;\n        \n        return DOM;\n    };\n    \n    /**\n     * current file check\n     *\n     * @param currentFile\n     */\n    this.isCurrentFile = (currentFile) => {\n        if (!currentFile)\n            return false;\n        \n        return DOM.isContainClass(currentFile, CURRENT_FILE);\n    };\n    \n    /**\n     * selected file check\n     *\n     * @param currentFile\n     */\n    this.isSelected = (selected) => {\n        if (!selected)\n            return false;\n        \n        return DOM.isContainClass(selected, SELECTED_FILE);\n    };\n    \n    /**\n     * check is current file is a directory\n     *\n     * @param currentFile\n     */\n    this.isCurrentIsDir = (currentFile) => {\n        const current = currentFile || this.getCurrentFile();\n        const fileType = DOM.getByDataName('js-type', current);\n        const ret = DOM.isContainClass(fileType, 'directory');\n        \n        return ret;\n    };\n    \n    /**\n     * get link from current (or param) file\n     *\n     * @param currentFile - current file by default\n     */\n    this.getCurrentLink = (currentFile) => {\n        const current = currentFile || this.getCurrentFile();\n        const link = DOM.getByTag('a', current);\n        \n        return link[0];\n    };\n    \n    /**\n     * get link from current (or param) file\n     *\n     * @param currentFile - current file by default\n     */\n    this.getCurrentPath = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const element = DOM.getByTag('a', current)[0];\n        const prefix = CloudCmd.PREFIX;\n        const path = element.getAttribute('href')\n            .replace(RegExp('^' + prefix + FS), '');\n        \n        return path;\n    };\n    \n    /**\n     * get name from current (or param) file\n     *\n     * @param currentFile\n     */\n    this.getCurrentName = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        \n        if (!current)\n            return '';\n           \n        const link = DOM.getCurrentLink(current);\n        \n        if (!link)\n            return '';\n            \n        const name = link.title;\n        \n        return name;\n    };\n    \n    this.getFilenames = (files) => {\n        if (!files)\n            throw Error('AllFiles could not be empty');\n        \n        const first = files[0] || DOM.getCurrentFile();\n        const name = DOM.getCurrentName(first);\n        \n        const allFiles = [...files];\n        \n        if (name === '..')\n            allFiles.shift();\n        \n        const names = allFiles.map((current) => {\n            return DOM.getCurrentName(current);\n        });\n        \n        return names;\n    };\n    \n    /**\n     * set name from current (or param) file\n     *\n     * @param name\n     * @param current\n     */\n    this.setCurrentName = (name, current) => {\n        const Info = CurrentInfo;\n        const link = Info.link;\n        const PREFIX = CloudCmd.PREFIX;\n        const dir = PREFIX + FS + Info.dirPath;\n        \n        link.title      = name;\n        link.innerHTML  = Entity.encode(name);\n        link.href       = dir + name;\n        \n        current.setAttribute('data-name', 'js-file-' + name);\n        \n        return link;\n    };\n    \n    /**\n     * check storage hash\n     */\n    this.checkStorageHash = (name, callback) => {\n        const parallel = exec.parallel;\n        const loadHash = DOM.loadCurrentHash;\n        const nameHash = name + '-hash';\n        const getStoreHash = exec.with(Storage.get, nameHash);\n        \n        if (typeof name !== 'string')\n            throw Error('name should be a string!');\n        \n        if (typeof callback !== 'function')\n            throw Error('callback should be a function!');\n        \n        parallel([loadHash, getStoreHash], (error, loadHash, storeHash) => {\n            let equal;\n            const isContain = /error/.test(loadHash);\n            \n            if (isContain)\n                error = loadHash;\n            else if (loadHash === storeHash)\n                equal = true;\n            \n            callback(error, equal, loadHash);\n        });\n    };\n    \n    /**\n     * save data to storage\n     *\n     * @param name\n     * @param data\n     * @param hash\n     * @param callback\n     */\n    this.saveDataToStorage = function(name, data, hash, callback) {\n        const allowed = CloudCmd.config('localStorage');\n        const isDir = DOM.isCurrentIsDir();\n        const nameHash = name + '-hash';\n        const nameData = name + '-data';\n        \n        if (!allowed || isDir)\n            return exec(callback);\n        \n        exec.if(hash, () => {\n            Storage.set(nameHash, hash);\n            Storage.set(nameData, data);\n            \n            exec(callback, hash);\n        }, (callback) => {\n            DOM.loadCurrentHash((error, loadHash) => {\n                hash = loadHash;\n                callback();\n            });\n        });\n    };\n    \n    /**\n     * save data to storage\n     *\n     * @param name\n     * @param data\n     * @param callback\n     */\n    this.getDataFromStorage = (name, callback) => {\n        const nameHash = name + '-hash';\n        const nameData = name + '-data';\n        const allowed = CloudCmd.config('localStorage');\n        const isDir = DOM.isCurrentIsDir();\n        \n        if (!allowed || isDir)\n            return exec(callback);\n        \n        exec.parallel([\n            exec.with(Storage.get, nameData),\n            exec.with(Storage.get, nameHash),\n        ], callback);\n    };\n    \n    this.getFM = () => {\n        return DOM.getPanel().parentElement;\n    };\n    \n    this.getPanelPosition = (panel) => {\n        panel = panel || DOM.getPanel();\n        \n        return panel.dataset.name.replace('js-', '');\n    };\n    \n    /** function getting panel active, or passive\n     * @param options = {active: true}\n     */\n    this.getPanel = (options) => {\n        let files, panel, isLeft;\n        let dataName = 'js-';\n        \n        const current = DOM.getCurrentFile();\n        \n        if (!current) {\n            panel = DOM.getByDataName('js-left');\n        } else {\n            files = current.parentElement,\n            panel = files.parentElement,\n            isLeft = panel.getAttribute('data-name') === 'js-left';\n        }\n        \n        /* if {active : false} getting passive panel */\n        if (options && !options.active) {\n            dataName += isLeft ? 'right' : 'left';\n            panel = DOM.getByDataName(dataName);\n        }\n        \n        /* if two panels showed\n         * then always work with passive\n         * panel\n         */\n        if (window.innerWidth < CloudCmd.MIN_ONE_PANEL_WIDTH)\n            panel = DOM.getByDataName('js-left');\n        \n        if (!panel)\n            throw Error('can not find Active Panel!');\n       \n        return panel;\n    };\n    \n    this.getFiles = (element) => {\n        const files = DOM.getByDataName('js-files', element);\n        return files.children || [];\n    };\n    \n    /**\n     * shows panel right or left (or active)\n     */\n    this.showPanel = (active) => {\n        const panel = DOM.getPanel({active: active});\n        \n        if (!panel)\n            return false;\n        \n        DOM.show(panel);\n        \n        return true;\n    };\n    \n    /**\n     * hides panel right or left (or active)\n     */\n    this.hidePanel = (active) => {\n        const panel = DOM.getPanel({\n            active\n        });\n        \n        if (!panel)\n            return false;\n        \n        return DOM.hide(panel);\n    };\n     \n    /**\n     * remove child of element\n     * @param pChild\n     * @param element\n     */\n    this.remove = (child, element) => {\n        const parent = element || document.body;\n        \n        parent.removeChild(child);\n        \n        return DOM;\n    };\n    \n    /**\n     * remove current file from file table\n     * @param current\n     *\n     */\n    this.deleteCurrent = (current) => {\n        if (!current)\n            Cmd.getCurrentFile();\n        \n        const parent = current && current.parentElement;\n        const name = Cmd.getCurrentName(current);\n        \n        if (current && name !== '..') {\n            const next = current.nextSibling;\n            const prev = current.previousSibling;\n            \n            DOM.setCurrentFile(next || prev);\n            parent.removeChild(current);\n        }\n    };\n    \n    /**\n     * remove selected files from file table\n     * @Selected\n     */\n    this.deleteSelected = (selected) => {\n        selected = selected || DOM.getSelectedFiles();\n        \n        if (!selected)\n            return;\n        \n        selected.map(DOM.deleteCurrent);\n    };\n    \n    /**\n     * rename current file\n     *\n     * @currentFile\n     */\n    this.renameCurrent = (current) => {\n        const Dialog = DOM.Dialog;\n        \n        if (!Cmd.isCurrentFile(current))\n            current = Cmd.getCurrentFile();\n        \n        const from = Cmd.getCurrentName(current);\n        \n        if (from === '..')\n            return Dialog.alert.noFiles(TITLE);\n        \n        const cancel = false;\n        \n        Dialog.prompt(TITLE, 'Rename', from, {cancel}).then((to) => {\n            const isExist = !!DOM.getCurrentByName(to);\n            const dirPath = Cmd.getCurrentDirPath();\n            \n            if (from === to)\n                return;\n            \n            const files = {\n                from : dirPath + from,\n                to : dirPath + to\n            };\n            \n            RESTful.mv(files, (error) => {\n                if (error)\n                    return;\n                \n                DOM.setCurrentName(to, current);\n                Cmd.updateCurrentInfo(current);\n                Storage.remove(dirPath);\n                \n                if (isExist)\n                    CloudCmd.refresh();\n            });\n        });\n    };\n    \n    /**\n     * unified way to scrollIntoViewIfNeeded\n     * (native suporte by webkit only)\n     * @param element\n     * @param center - to scroll as small as possible param should be false\n     */\n    this.scrollIntoViewIfNeeded = function(element, center = false) {\n        if (!element || !element.scrollIntoViewIfNeeded)\n            return;\n        \n        element.scrollIntoViewIfNeeded(center);\n    };\n    \n    /* scroll on one page */\n    this.scrollByPages = (element, pPages) => {\n        const ret = element && element.scrollByPages && pPages;\n        \n        if (ret)\n            element.scrollByPages(pPages);\n        \n        return ret;\n    };\n    \n    this.changePanel = () => {\n        let panel = DOM.getPanel();\n        const panelPassive = DOM.getPanel({\n            active: false\n        });\n        \n        let name = DOM.getCurrentName();\n        const filesPassive = DOM.getFiles(panelPassive);\n        \n        let dataName = panel.getAttribute('data-name');\n        \n        TabPanel[dataName] = name;\n         \n        panel = panelPassive;\n        dataName = panel.getAttribute('data-name');\n        \n        name = TabPanel[dataName];\n        \n        let files;\n        let current;\n        \n        if (name) {\n            current = DOM.getCurrentByName(name, panel);\n            \n            if (current)\n                files = current.parentElement;\n        }\n        \n        if (!files || !files.parentElement) {\n            current = DOM.getCurrentByName(name, panel);\n            \n            if (!current)\n                current = filesPassive[0];\n        }\n        \n        DOM.setCurrentFile(current, {\n            history: true\n        });\n        \n        return DOM;\n    };\n    \n    this.getPackerExt = (type) => {\n        if (type === 'zip')\n            return '.zip';\n        \n        return '.tar.gz';\n    };\n    \n    this.goToDirectory = () => {\n        const msg = 'Go to directory:';\n        const path = CurrentInfo.dirPath;\n        const Dialog = DOM.Dialog;\n        const cancel = false;\n        const setPath = (path) => ({\n            path\n        });\n        \n        Dialog.prompt(TITLE, msg, path, {cancel})\n            .then(setPath)\n            .then(CloudCmd.loadDir);\n    },\n    \n    this.duplicatePanel = () => {\n        const Info = CurrentInfo;\n        const isDir = Info.isDir;\n        const panel = Info.panelPassive;\n        const noCurrent = !Info.isOnePanel;\n        \n        const getPath = (isDir) => {\n            if (isDir)\n                return Info.path;\n            \n            return Info.dirPath;\n        };\n        \n        const path = getPath(isDir);\n        \n        CloudCmd.loadDir({\n            path,\n            panel,\n            noCurrent,\n        });\n    };\n    \n    this.swapPanels = () => {\n        const Info = CurrentInfo;\n        const {panel} = Info;\n        const {files} = Info;\n        const {element} = Info;\n        \n        const panelPassive = Info.panelPassive;\n        \n        const dirPath = DOM.getCurrentDirPath();\n        const dirPathPassive = DOM.getNotCurrentDirPath();\n        \n        let currentIndex = files.indexOf(element);\n        \n        CloudCmd.loadDir({\n            path: dirPath,\n            panel: panelPassive,\n            noCurrent: true\n        });\n        \n        CloudCmd.loadDir({\n            path: dirPathPassive,\n            panel: panel\n        }, () => {\n            const files = Info.files;\n            const length = files.length - 1;\n            \n            if (currentIndex > length)\n                currentIndex = length;\n            \n            const el = files[currentIndex];\n            \n            DOM.setCurrentFile(el);\n        });\n    };\n    \n    this.CurrentInfo = CurrentInfo,\n    \n    this.updateCurrentInfo = (currentFile) => {\n        const info = Cmd.CurrentInfo;\n        const current = currentFile || Cmd.getCurrentFile();\n        const files = current.parentElement;\n        const panel = files.parentElement;\n        \n        const panelPassive = Cmd.getPanel({\n            active: false\n        });\n        \n        const filesPassive = DOM.getFiles(panelPassive);\n        const name = Cmd.getCurrentName(current);\n        \n        info.dir            = Cmd.getCurrentDirName();\n        info.dirPath        = Cmd.getCurrentDirPath();\n        info.parentDirPath  = Cmd.getParentDirPath();\n        info.element        = current;\n        info.ext            = Util.getExt(name);\n        info.files          = [...files.children];\n        info.filesPassive   = [...filesPassive];\n        info.first          = files.firstChild;\n        info.getData        = Cmd.getCurrentData;\n        info.last           = files.lastChild;\n        info.link           = Cmd.getCurrentLink(current);\n        info.mode           = Cmd.getCurrentMode(current);\n        info.name           = name;\n        info.path           = Cmd.getCurrentPath(current);\n        info.panel          = panel;\n        info.panelPassive   = panelPassive;\n        info.size           = Cmd.getCurrentSize(current);\n        info.isDir          = Cmd.isCurrentIsDir();\n        info.isSelected     = Cmd.isSelected(current);\n        info.panelPosition  = Cmd.getPanel().dataset.name.replace('js-', '');\n        info.isOnePanel     =\n            info.panel.getAttribute('data-name') ===\n            info.panelPassive.getAttribute('data-name');\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/index.js");
/src/cloudcmd.js-84-
##############################################
/src/cloudcmd.js-94-"use strict";
/src/cloudcmd.js:95:eval("\n\n/* global CloudCmd */\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst rendy = __webpack_require__(/*! rendy */ \"./node_modules/rendy/lib/rendy.js\");\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst {findObjByNameInArr} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst Files = __webpack_require__(/*! ./files */ \"./client/dom/files.js\");\n\nmodule.exports = (name, options, callback = options) => {\n    const {PREFIX, config} = CloudCmd;\n    const o = options;\n    \n    if (o.name && window[o.name])\n        return callback();\n    \n    Files.get('modules', (error, modules) => {\n        const online = config('online') && navigator.onLine;\n        const module = findObjByNameInArr(modules.remote, name);\n        \n        const isArray = itype.array(module.local);\n        const version = module.version;\n        \n        let remoteTmpls, local;\n        if (isArray) {\n            remoteTmpls = module.remote;\n            local       = module.local;\n        } else {\n            remoteTmpls  = [module.remote];\n            local        = [module.local];\n        }\n        \n        const localURL = local.map((url) => {\n            return PREFIX + url;\n        });\n        \n        const remoteURL = remoteTmpls.map((tmpl) => {\n            return rendy(tmpl, {\n                version: version\n            });\n        });\n        \n        const on = funcON(localURL, remoteURL, callback);\n        const off = funcOFF(localURL, callback);\n        \n        exec.if(online, on, off);\n    });\n};\n\nfunction funcOFF(local, callback) {\n    return () => {\n        load.parallel(local, callback);\n    };\n}\n\nfunction funcON (local, remote,callback) {\n    return () => {\n        load.parallel(remote, (error) => {\n            if (error)\n                return funcOFF();\n            \n            callback();\n        });\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/load-remote.js");
/src/cloudcmd.js-96-
##############################################
/src/cloudcmd.js-106-"use strict";
/src/cloudcmd.js:107:eval("\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst Events = __webpack_require__(/*! ./events */ \"./client/dom/events.js\");\n\nconst {getExt} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nmodule.exports = load;\nmodule.exports.getIdBySrc = getIdBySrc;\nmodule.exports.ext = ext;\n\n/**\n * Функция создаёт элемент и загружает файл с src.\n *\n * @param params = {\n * name, - название тэга\n * src', - путь к файлу\n * func, - обьект, содержаий одну из функций\n *          или сразу две onload и onerror\n *          {onload: function() {}, onerror: function();}\n * style,\n * id,\n * element,\n * async, - true by default\n * inner: 'id{color:red, },\n * class,\n * notAppend - false by default\n *\n */\nfunction load(params) {\n    const {\n        src,\n        id = getIdBySrc(params.src),\n        func,\n        name,\n        async,\n        inner,\n        style,\n        parent = document.body,\n        className,\n        attribute,\n        notAppend,\n    } = params;\n    \n    let element = document.getElementById(id);\n    \n    if (element) {\n        exec(func);\n        return element;\n    }\n    \n    element = document.createElement(name);\n    \n    const funcError = () => {\n        const msg = `file ${src} could not be loaded`;\n        const error = new Error(msg);\n        \n        parent.removeChild(element);\n        \n        Images.show.error(msg);\n        \n        const callback = func && func.onerror || func.onload || func;\n        \n        exec(callback, error);\n    };\n    \n    const funcLoad = () => {\n        const callback = func && func.onload || func;\n        \n        Events.remove('error', element, funcError);\n        \n        exec(callback);\n    };\n    \n    if (/^(script|link)$/.test(name))\n        Events.addOnce('load', element, funcLoad)\n            .addError(element, funcError);\n    \n    if (id)\n        element.id = id;\n    \n    if (className)\n        element.className = className;\n    \n    if (src) {\n        if (name !== 'link') {\n            element.src = src;\n        } else {\n            element.href = src;\n            element.rel = 'stylesheet';\n        }\n    }\n    \n    if (attribute) {\n        const type = itype(attribute);\n        \n        switch(type) {\n        case 'string':\n            element.setAttribute(attribute, '');\n            break;\n        \n        case 'object':\n            Object.keys(attribute).forEach((name) => {\n                element.setAttribute(name, attribute[name]);\n            });\n            break;\n        }\n    }\n    \n    if (style)\n        element.style.cssText = style;\n    \n    if (async && name === 'script' || async === undefined)\n        element.async = true;\n    \n    if (!notAppend)\n        parent.appendChild(element);\n    \n    if (inner)\n        element.innerHTML = inner;\n    \n    return element;\n}\n\n/**\n * Function gets id by src\n * @param src\n *\n * Example: http://domain.com/1.js -> 1_js\n */\nfunction getIdBySrc(src) {\n    const isStr = itype.string(src);\n    \n    if (!isStr)\n        return;\n    \n    if (~src.indexOf(':'))\n        src += '-join';\n    \n    const num = src.lastIndexOf('/') + 1;\n    const sub = src.substr(src, num);\n    const id = src\n        .replace(sub, '')\n        .replace(/\\./g, '-');\n    \n    return id;\n}\n\n/**\n * load file countent via ajax\n *\n * @param params\n */\nmodule.exports.ajax = (params) => {\n    const p = params;\n    const isObject = itype.object(p.data);\n    const isArray = itype.array(p.data);\n    const isArrayBuf = itype(p.data) === 'arraybuffer';\n    const type = p.type || p.method || 'GET';\n    const headers = p.headers || {};\n    const xhr = new XMLHttpRequest();\n    \n    xhr.open(type, p.url, true);\n    \n    Object.keys(headers).forEach((name) => {\n        const value = headers[name];\n        xhr.setRequestHeader(name, value);\n    });\n    \n    if (p.responseType)\n        xhr.responseType = p.responseType;\n    \n    let data;\n    if (!isArrayBuf && isObject || isArray)\n        data = jonny.stringify(p.data);\n    else\n        data = p.data;\n    \n    xhr.onreadystatechange = (event) => {\n        const xhr = event.target;\n        const OK  = 200;\n        \n        if (xhr.readyState !== xhr.DONE)\n            return;\n        \n        Images.clearProgress();\n        \n        const TYPE_JSON = 'application/json';\n        const type        = xhr.getResponseHeader('content-type');\n        \n        if (xhr.status !== OK)\n            return exec(p.error, xhr);\n        \n        const notText = p.dataType !== 'text';\n        const isContain = ~type.indexOf(TYPE_JSON);\n        \n        let data = xhr.response;\n        if (type && isContain && notText)\n            data = jonny.parse(xhr.response) || xhr.response;\n            \n        exec(p.success, data, xhr.statusText, xhr);\n    };\n    \n    xhr.send(data);\n};\n\nmodule.exports.put = (url, body) => {\n    const emitter = Emitify();\n    const xhr = new XMLHttpRequest();\n    \n    url = encodeURI(url)\n        .replace('#', '%23');\n    \n    xhr.open('put', url, true);\n    \n    xhr.upload.onprogress = (event) => {\n        if (!event.lengthComputable)\n            return;\n        \n        const percent = (event.loaded / event.total) * 100;\n        const count   = Math.round(percent);\n        \n        emitter.emit('progress', count);\n    };\n    \n    xhr.onreadystatechange = () => {\n        const over = xhr.readyState === xhr.DONE;\n        const OK = 200;\n        \n        if (!over)\n            return;\n        \n        if (xhr.status === OK)\n            return emitter.emit('end');\n        \n        const error = Error(xhr.responseText);\n        emitter.emit('error', error);\n    };\n    \n    xhr.send(body);\n    \n    return emitter;\n};\n\nfunction ext(src, func) {\n    switch (getExt(src)) {\n    case '.js':\n        return load.js(src, func);\n    \n    case '.css':\n        return load.css(src, func);\n    \n    default:\n        return load({\n            src,\n            func,\n        });\n    }\n}\n\n/**\n * create elements and load them to DOM-tree\n * one-by-one\n *\n * @param params\n * @param callback\n */\nload.series = (params, callback) => {\n    if (!params)\n        return load;\n    \n    const funcs = params\n        .map((url) => ext.bind(null, url))\n        .concat(callback);\n    \n    exec.series(funcs);\n    \n    return load;\n};\n\n/**\n * improve callback of funcs so\n * we pop number of function and\n * if it's last we call pCallBack\n *\n * @param params\n * @param callback - onload function\n */\nload.parallel = (params, callback) => {\n    if (!params)\n        return load;\n    \n    const funcs = params.map((url) => {\n        return ext.bind(null, url);\n    });\n    \n    exec.parallel(funcs, callback);\n    \n    return load;\n};\n\n/**\n * Функция загружает js-файл\n *\n * @param src\n * @param func\n */\nload.js = (src, func) => {\n    const name = 'script';\n    \n    return load({\n        name,\n        src,\n        func,\n    });\n},\n\nload.css = (src, func) => {\n    const name = 'link';\n    const {head:parent} = document;\n    \n    return load({\n        name,\n        src,\n        parent,\n        func\n    });\n};\n\n/**\n * Функция создаёт елемент style и записывает туда стили\n * @param params - структура параметров, заполняеться таким\n * образом: {src: ' ',func: '', id: '', element: '', inner: ''}\n * все параметры опциональны\n */\nload.style = (params) => {\n    const {\n        id,\n        src,\n        name = 'style',\n        func,\n        inner,\n        parent = document.head,\n        element,\n    } = params;\n    \n    return load({\n        id,\n        src,\n        func,\n        name,\n        inner,\n        parent,\n        element,\n    });\n};\n\n\n//# sourceURL=file://cloudcmd/client/dom/load.js");
/src/cloudcmd.js-108-
##############################################
/src/cloudcmd.js-118-"use strict";
/src/cloudcmd.js:119:eval("\n\n/* global CloudCmd, DOM */\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\n\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nmodule.exports = new RESTful();\n\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\n\nfunction RESTful() {\n    this.delete = (url, data, callback) => {\n        const isFunc = itype.function(data);\n        \n        if (!callback && isFunc) {\n            callback = data;\n            data = null;\n        }\n        \n        sendRequest({\n            method      : 'DELETE',\n            url         : FS + url,\n            data,\n            callback,\n            imgPosition : { top: !!data }\n        });\n    };\n    \n    this.patch = (url, data, callback) => {\n        const isFunc = itype.function(data);\n        \n        if (!callback && isFunc) {\n            callback = data;\n            data = null;\n        }\n        \n        const imgPosition = {\n            top: true\n        };\n        \n        sendRequest({\n            method: 'PATCH',\n            url: FS + url,\n            data,\n            callback,\n            imgPosition,\n        });\n    };\n    \n    this.write = (url, data, callback) => {\n        const isFunc = itype.function(data);\n        \n        if (!callback && isFunc) {\n            callback    = data;\n            data        = null;\n        }\n        \n        sendRequest({\n            method: 'PUT',\n            url: FS + url,\n            data,\n            callback,\n            imgPosition : { top: true }\n        });\n    };\n    \n    this.read = (url, dataType, callback) => {\n        const isQuery = /\\?/.test(url);\n        const isBeautify = /\\?beautify$/.test(url);\n        const isMinify = /\\?minify$/.test(url);\n        const notLog = !isQuery || isBeautify || isMinify;\n        const isFunc = itype.function(dataType);\n        \n        if (!callback && isFunc) {\n            callback = dataType;\n            dataType = 'text';\n        }\n        \n        sendRequest({\n            method: 'GET',\n            url: FS + url,\n            callback,\n            notLog,\n            dataType,\n        });\n    };\n    \n    this.cp = (data, callback) => {\n        sendRequest({\n            method: 'PUT',\n            url: '/cp',\n            data,\n            callback,\n            imgPosition : { top: true }\n        });\n    };\n    \n    this.pack = (data, callback) => {\n        sendRequest({\n            method      : 'PUT',\n            url         : '/pack',\n            data,\n            callback,\n        });\n    };\n    \n    this.extract = function(data, callback) {\n        sendRequest({\n            method      : 'PUT',\n            url         : '/extract',\n            data        : data,\n            callback    : callback\n        });\n    };\n    \n    this.mv = function(data, callback) {\n        sendRequest({\n            method      : 'PUT',\n            url         : '/mv',\n            data        : data,\n            callback    : callback,\n            imgPosition : { top: true }\n        });\n    };\n    \n    this.Config = {\n        read:   function(callback) {\n            sendRequest({\n                method      : 'GET',\n                url         : '/config',\n                callback    : callback,\n                imgPosition : { top: true },\n                notLog      : true\n            });\n        },\n        \n        write:  function(data, callback) {\n            sendRequest({\n                method      : 'PATCH',\n                url         : '/config',\n                data        : data,\n                callback    : callback,\n                imgPosition : { top: true }\n            });\n        }\n    };\n    \n    this.Markdown   = {\n        read    : function(url, callback) {\n            sendRequest({\n                method      : 'GET',\n                url         : '/markdown' + url,\n                callback    : callback,\n                imgPosition : { top: true },\n                notLog      : true\n            });\n        },\n        \n        render  : function(data, callback) {\n            sendRequest({\n                method      : 'PUT',\n                url         : '/markdown',\n                data        : data,\n                callback    : callback,\n                imgPosition : { top: true },\n                notLog      : true\n            });\n        }\n    };\n    \n    function sendRequest(params) {\n        const p = params;\n        const prefixUrl = CloudCmd.PREFIX_URL;\n        \n        p.url = prefixUrl + p.url;\n        p.url = encodeURI(p.url);\n        \n        /*\n         * if we send ajax request -\n         * no need in hash so we escape #\n         */\n        p.url = p.url.replace('#', '%23');\n        \n        load.ajax({\n            method      : p.method,\n            url         : p.url,\n            data        : p.data,\n            dataType    : p.dataType,\n            error       : (jqXHR) => {\n                const response = jqXHR.responseText;\n                const statusText = jqXHR.statusText;\n                const status = jqXHR.status;\n                const text = status === 404 ? response : statusText;\n                \n                Images.show.error(text);\n                setTimeout(() => {\n                    DOM.Dialog.alert(CloudCmd.TITLE, text);\n                }, 100);\n                \n                p.callback(Error(text));\n            },\n            success: (data) => {\n                Images.hide();\n                \n                if (!p.notLog)\n                    CloudCmd.log(data);\n                \n                p.callback(null, data);\n            }\n        });\n    }\n}\n\n\n//# sourceURL=file://cloudcmd/client/dom/rest.js");
/src/cloudcmd.js-120-
##############################################
/src/cloudcmd.js-130-"use strict";
/src/cloudcmd.js:131:eval("\n\n/* global DOM */\n\nlet SelectType = '*.*';\nconst TITLE = 'Cloud Commander';\n\nconst {getRegExp} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nmodule.exports = (msg, files) => {\n    const allMsg = `Specify file type for ${msg} selection`;\n    const cancel = false;\n    const {Dialog} = DOM;\n    \n    Dialog.prompt(TITLE, allMsg, SelectType, {cancel}).then((type) => {\n        SelectType = type;\n        \n        const regExp = getRegExp(type);\n        \n        if (!files)\n            return;\n        \n        let matches = 0;\n        \n        files.forEach((current) => {\n            const name = DOM.getCurrentName(current);\n             \n            if (name === '..')\n                return;\n            \n            const isMatch = regExp.test(name);\n            \n            if (!isMatch)\n                return;\n            \n            ++matches;\n            \n            let isSelected = DOM.isSelected(current);\n            const shouldSel = msg === 'expand';\n             \n            if (shouldSel)\n                isSelected = !isSelected;\n            \n            if (isSelected)\n                DOM.toggleSelectedFile(current);\n        });\n        \n        if (!matches)\n            Dialog.alert('Select Files', 'No matches found!');\n    });\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/select-by-pattern.js");
/src/cloudcmd.js-132-
##############################################
/src/cloudcmd.js-142-"use strict";
/src/cloudcmd.js:143:eval("\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst tryCatch = __webpack_require__(/*! try-catch */ \"./node_modules/try-catch/lib/try-catch.js\");\nconst setItem = localStorage.setItem.bind(localStorage);\n\n/* приватный переключатель возможности работы с кэшем */\nlet Allowed;\n\n/**\n * allow Storage usage\n */\nmodule.exports.setAllowed = (isAllowed) => {\n    Allowed = isAllowed;\n};\n\n/** remove element */\nmodule.exports.remove = (item, callback) => {\n    if (Allowed)\n        localStorage.removeItem(item);\n    \n    exec(callback, null, Allowed);\n    \n    return module.exports;\n};\n\nmodule.exports.removeMatch = (string, callback) => {\n    const reg = RegExp('^' + string + '.*$');\n    const test = (a) => reg.test(a);\n    const remove = (a) => localStorage.removeItem(a);\n    \n    Object.keys(localStorage)\n        .filter(test)\n        .forEach(remove);\n    \n    exec(callback);\n    \n    return module.exports;\n};\n\n/** если доступен localStorage и\n * в нём есть нужная нам директория -\n * записываем данные в него\n */\nmodule.exports.set = (name, data, callback) => {\n    let str, error;\n    \n    if (itype.object(data))\n        str = jonny.stringify(data);\n    \n    if (Allowed && name)\n        [error] = tryCatch(setItem, name, str || data);\n    \n    exec(callback, error);\n    \n    return module.exports;\n},\n\n/** Если доступен Storage принимаем из него данные*/\nmodule.exports.get = (name, callback) => {\n    let ret;\n    \n    if (Allowed)\n        ret = localStorage.getItem(name);\n    \n    exec(callback, null, ret);\n    \n    return module.exports;\n},\n\n/** функция чистит весь кэш для всех каталогов*/\nmodule.exports.clear = (callback) => {\n    const ret = Allowed;\n    \n    if (ret)\n        localStorage.clear();\n    \n    exec(callback, null, ret);\n    \n    return module.exports;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/storage.js");
/src/cloudcmd.js-144-
##############################################
/src/cloudcmd.js-154-"use strict";
/src/cloudcmd.js:155:eval("\n\n/* global CloudCmd */\n\nconst {eachSeries} = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst wraptile = __webpack_require__(/*! wraptile/legacy */ \"./node_modules/wraptile/legacy/index.js\");\n\nconst DOM = __webpack_require__(/*! . */ \"./client/dom/index.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\n\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nconst onEnd = wraptile(_onEnd);\nconst loadFile = wraptile(_loadFile);\n\nconst {\n    getCurrentDirPath: getPathWhenRootEmpty\n} = DOM;\n\nmodule.exports = (dir, files) => {\n    if (!files) {\n        files = dir;\n        dir = getPathWhenRootEmpty();\n    }\n    \n    const n = files.length;\n    \n    if (!n)\n        return;\n    \n    const array = [...files];\n    const {name} = files[0];\n    \n    eachSeries(array, loadFile(dir, n), onEnd(name));\n};\n\nfunction _onEnd(currentName) {\n    CloudCmd.refresh({\n        currentName\n    });\n}\n\nfunction _loadFile(dir, n, file, callback) {\n    let i = 0;\n    \n    const name = file.name;\n    const path = dir + name;\n    const {PREFIX_URL} = CloudCmd;\n    const api = PREFIX_URL + FS;\n    \n    const percent = (i, n, per = 100) => {\n        return Math.round(i * per / n);\n    };\n    \n    const step = (n) => 100 / n;\n    \n    ++i;\n    \n    load.put(api + path, file)\n        .on('end', callback)\n        .on('progress', (count) => {\n            const max = step(n);\n            const value = (i - 1) * max + percent(count, 100, max);\n            \n            Images.show.load('top');\n            Images.setProgress(Math.round(value));\n        });\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/upload-files.js");
/src/cloudcmd.js-156-
##############################################
/src/cloudcmd.js-166-"use strict";
/src/cloudcmd.js:167:eval("\n\nconst rendy = __webpack_require__(/*! rendy */ \"./node_modules/rendy/lib/rendy.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst store = __webpack_require__(/*! fullstore/legacy */ \"./node_modules/fullstore/legacy/index.js\");\nconst Entity = __webpack_require__(/*! ./entity */ \"./common/entity.js\");\n\nconst getHeaderField = currify(_getHeaderField);\n\n/* КОНСТАНТЫ (общие для клиента и сервера)*/\n\n/* название программы */\nconst NAME = 'Cloud Commander';\nconst FS = '/fs';\n\nconst Path = store();\n\nPath('/');\n\nmodule.exports.FS = FS;\nmodule.exports.apiURL = '/api/v1';\nmodule.exports.MAX_FILE_SIZE = 500 * 1024;\nmodule.exports.Entity = Entity;\nmodule.exports.getHeaderField = getHeaderField;\nmodule.exports.getPathLink = getPathLink;\nmodule.exports.getDotDot = getDotDot;\n\nmodule.exports.formatMsg = (msg, name, status) => {\n    status = status || 'ok';\n    name = name || '';\n    \n    if (name)\n        name = '(\"' + name + '\")';\n    \n    return msg + ': ' + status + name;\n};\n\n/**\n * Функция возвращает заголовок веб страницы\n * @path\n */\nmodule.exports.getTitle = (options) => {\n    options = options || {};\n    \n    const path = options.path || Path();\n    const name = options.name;\n    \n    const array = [\n        name || NAME,\n        path,\n    ];\n    \n    return array\n        .filter(Boolean)\n        .join(' - ');\n};\n\n/** Функция получает адреса каждого каталога в пути\n * возвращаеться массив каталогов\n * @param url -  адрес каталога\n */\nfunction getPathLink(url, prefix, template) {\n    if (!url)\n        throw Error('url could not be empty!');\n    \n    if (!template)\n        throw Error('template could not be empty!');\n    \n    const names = url\n        .split('/')\n        .slice(1, -1);\n    \n    const allNames = ['/'].concat(names);\n    const length = allNames.length - 1;\n    \n    let path = '/';\n    \n    const pathHTML = allNames.map((name, index) => {\n        const isLast = index === length;\n        \n        if (index)\n            path += name + '/';\n        \n        if (index && isLast)\n            return name + '/';\n        \n        const slash = index ? '/' : '';\n        \n        return rendy(template, {\n            path,\n            name,\n            slash,\n            prefix,\n        });\n    }).join('');\n    \n    return pathHTML;\n}\n\n/**\n * Функция строит таблицу файлв из JSON-информации о файлах\n * @param params - информация о файлах\n *\n */\nmodule.exports.buildFromJSON = (params) => {\n    const prefix = params.prefix;\n    const template = params.template;\n    const templateFile = template.file;\n    const templateLink = template.link;\n    const json = params.data;\n    \n    const path = json.path;\n    const files = json.files;\n    \n    const sort = params.sort || 'name';\n    const order = params.order || 'asc';\n    \n    /*\n     * Строим путь каталога в котором мы находимся\n     * со всеми подкаталогами\n     */\n    const htmlPath = getPathLink(path, prefix, template.pathLink);\n    \n    let fileTable = rendy(template.path, {\n        link        : prefix + FS + path,\n        fullPath    : path,\n        path        : htmlPath\n    });\n    \n    const owner = 'owner';\n    const mode = 'mode';\n    \n    const getFieldName = getHeaderField(sort, order);\n    \n    const name = getFieldName('name');\n    const size = getFieldName('size');\n    const date = getFieldName('date');\n    \n    const header = rendy(templateFile, {\n        tag         : 'div',\n        attribute   : 'data-name=\"js-fm-header\" ',\n        className   : 'fm-header',\n        type        : '',\n        name,\n        size,\n        date,\n        owner,\n        mode,\n    });\n    \n    /* сохраняем путь */\n    Path(path);\n    \n    fileTable += header + '<ul data-name=\"js-files\" class=\"files\">';\n    /* Если мы не в корне */\n    if (path !== '/') {\n        const dotDot = getDotDot(path);\n        const link = prefix + FS + dotDot;\n        \n        const linkResult = rendy(template.link, {\n            link,\n            title       : '..',\n            name        : '..'\n        });\n        \n        const dataName = 'data-name=\"js-file-..\" ';\n        const attribute = 'draggable=\"true\" ' + dataName;\n        \n        /* Сохраняем путь к каталогу верхнего уровня*/\n        fileTable += rendy(template.file, {\n            tag         : 'li',\n            attribute,\n            className   : '',\n            type        : 'directory',\n            name        : linkResult,\n            size        : '&lt;dir&gt;',\n            date        : '--.--.----',\n            owner       : '.',\n            mode        : '--- --- ---'\n        });\n    }\n    \n    fileTable += files.map((file) => {\n        const link = prefix + FS + path + file.name;\n        \n        const type = getType(file.size);\n        const size = getSize(file.size);\n        \n        const date = file.date || '--.--.----';\n        const owner = file.owner || 'root';\n        const mode = file.mode;\n        \n        const linkResult = rendy(templateLink, {\n            link,\n            title: file.name,\n            name: Entity.encode(file.name),\n            attribute: getAttribute(file.size)\n        });\n        \n        const dataName = 'data-name=\"js-file-' + file.name + '\" ';\n        const attribute = 'draggable=\"true\" ' + dataName;\n        \n        return rendy(templateFile, {\n            tag: 'li',\n            attribute,\n            className: '',\n            type,\n            name: linkResult,\n            size,\n            date,\n            owner,\n            mode,\n        });\n    }).join('');\n    \n    fileTable += '</ul>';\n    \n    return fileTable;\n};\n\nfunction getType(size) {\n    if (size === 'dir')\n        return 'directory';\n    \n    return 'text-file';\n}\n\nfunction getAttribute(size) {\n    if (size === 'dir')\n        return '';\n    \n    return 'target=\"_blank\" ';\n}\n\nfunction getSize(size) {\n    if (size === 'dir')\n        return '&lt;dir&gt;';\n    \n    return size;\n}\n\nfunction _getHeaderField(sort, order, name) {\n    const arrow = order === 'asc' ?  '↑' : '↓';\n    \n    if (sort !== name)\n        return name;\n    \n    if (sort === 'name' && order === 'asc')\n        return name;\n    \n    return `${name}${arrow}`;\n}\n\nfunction getDotDot(path) {\n    // убираем последний слеш и каталог в котором мы сейчас находимся\n    const lastSlash = path.substr(path, path.lastIndexOf('/'));\n    const dotDot = lastSlash.substr(lastSlash, lastSlash.lastIndexOf('/'));\n    \n    if (!dotDot)\n        return '/';\n    \n    return dotDot;\n}\n\n\n\n//# sourceURL=file://cloudcmd/common/cloudfunc.js");
/src/cloudcmd.js-168-
##############################################
/src/cloudcmd.js-178-"use strict";
/src/cloudcmd.js:179:eval("\n\nconst Entities = {\n    '&nbsp;': ' ',\n    '&lt;': '<',\n    '&gt;': '>',\n};\n\nconst keys = Object.keys(Entities);\n\nmodule.exports.encode = (str) => {\n    keys.forEach((code) => {\n        const char = Entities[code];\n        const reg = RegExp(char, 'g');\n        \n        str = str.replace(reg, code);\n    });\n    \n    return str;\n};\n\nmodule.exports.decode = (str) => {\n    keys.forEach((code) => {\n        const char = Entities[code];\n        const reg = RegExp(code, 'g');\n        \n        str = str.replace(reg, char);\n    });\n    \n    return str;\n};\n\n\n\n//# sourceURL=file://cloudcmd/common/entity.js");
/src/cloudcmd.js-180-
##############################################
/src/cloudcmd.js-190-"use strict";
/src/cloudcmd.js:191:eval("\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nmodule.exports.getStrBigFirst = getStrBigFirst;\nmodule.exports.kebabToCamelCase = kebabToCamelCase;\n\nmodule.exports.escapeRegExp = (str) => {\n    const isStr = typeof str === 'string';\n    \n    if (isStr)\n        str = str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n    \n    return str;\n};\n\n/**\n * get regexp from wild card\n */\nmodule.exports.getRegExp = (wildcard) => {\n    wildcard = wildcard || '*';\n    \n    const escaped = '^' + wildcard // search from start of line\n        .replace('.', '\\\\.')\n        .replace('*', '.*')\n        .replace('?', '.?') + '$'; // search to end of line\n    \n    return RegExp(escaped);\n};\n\nmodule.exports.exec = exec;\n\n/**\n * function gets file extension\n *\n * @param name\n * @return ext\n */\nmodule.exports.getExt = (name) => {\n    const isStr = typeof name === 'string';\n    \n    if (!isStr)\n        return '';\n    \n    const dot = name.lastIndexOf('.');\n    \n    if (~dot)\n        return name.substr(dot);\n    \n    return '';\n};\n\n/**\n * find object by name in arrray\n *\n * @param array\n * @param name\n */\nmodule.exports.findObjByNameInArr = (array, name) => {\n    let ret;\n    \n    if (!Array.isArray(array))\n        throw Error('array should be array!');\n        \n    if (typeof name !== 'string')\n        throw Error('name should be string!');\n    \n    array.some((item) => {\n        let is = item.name === name;\n        const isArray = Array.isArray(item);\n        \n        if (is) {\n            ret = item;\n            return is;\n        }\n        \n        if (!isArray)\n            return is;\n        \n        return item.some((item) => {\n            const is = item.name === name;\n            \n            if (is)\n                ret = item.data;\n            \n            return is;\n        });\n    });\n    \n    return ret;\n};\n\n/**\n * start timer\n * @param name\n */\nmodule.exports.time = (name) => {\n    exec.ifExist(console, 'time', [name]);\n};\n\n/**\n * stop timer\n * @param name\n */\nmodule.exports.timeEnd = (name) => {\n    exec.ifExist(console, 'timeEnd', [name]);\n};\n\nfunction getStrBigFirst(str) {\n    if (!str)\n        throw Error('str could not be empty!');\n    \n    const first = str[0].toUpperCase();\n    \n    return first + str.slice(1);\n}\n\nfunction kebabToCamelCase(str) {\n    if (!str)\n        throw Error('str could not be empty!');\n    \n    return str\n        .split('-')\n        .map(getStrBigFirst)\n        .join('')\n        .replace(/.js$/, '');\n}\n\n\n\n//# sourceURL=file://cloudcmd/common/util.js");
/src/cloudcmd.js-192-
##############################################
/src/cloudcmd.js-202-"use strict";
/src/cloudcmd.js:203:eval("\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nvar tail = function tail(list) {\n    return slice(list, 1);\n};\n\nmodule.exports = apart;\n\nfunction apart(fn) {\n    check(fn);\n\n    var first = tail(arguments);\n\n    return function () {\n        var args = [].concat(_toConsumableArray(first), Array.prototype.slice.call(arguments));\n\n        return fn.apply(undefined, _toConsumableArray(args));\n    };\n}\n\nfunction slice(list, from, to) {\n    return [].slice.call(list, from, to);\n}\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/apart/lib/apart.js");
/src/cloudcmd.js-204-
##############################################
/src/cloudcmd.js-213-
/src/cloudcmd.js:214:eval("module.exports = __webpack_require__(/*! ./lib/currify */ \"./node_modules/currify/legacy/lib/currify.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/currify/legacy/index.js");
/src/cloudcmd.js-215-
##############################################
/src/cloudcmd.js-225-"use strict";
/src/cloudcmd.js:226:eval("\n\nvar f = function f(fn) {\n    return [\n    /*eslint no-unused-vars: 0*/\n    function (a) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d, e) {\n        return fn.apply(undefined, arguments);\n    }];\n};\n\nmodule.exports = function currify(fn) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    check(fn);\n\n    if (args.length >= fn.length) return fn.apply(undefined, args);\n\n    var again = function again() {\n        return currify.apply(undefined, [fn].concat(args, Array.prototype.slice.call(arguments)));\n    };\n\n    var count = fn.length - args.length - 1;\n    var func = f(again)[count];\n\n    return func || again;\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/currify/legacy/lib/currify.js");
/src/cloudcmd.js-227-
##############################################
/src/cloudcmd.js-237-"use strict";
/src/cloudcmd.js:238:eval("\n\nvar Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\n\nmodule.exports = function (entry) {\n    var emitter = Emitify();\n\n    setTimeout(function () {\n        FindIt(emitter, entry);\n    }, 0);\n\n    return emitter;\n};\n\nfunction FindIt(emitter, entry) {\n    if (!(this instanceof FindIt)) return new FindIt(emitter, entry);\n\n    this._dirs = 0;\n    this._first = true;\n\n    this._find(emitter, entry);\n}\n\nFindIt.prototype._find = function (emitter, entry) {\n    var _this = this;\n\n    if (entry.isFile) {\n        emitter.emit('file', entry.fullPath, entry);\n\n        if (this._first) emitter.emit('end');\n\n        return;\n    }\n\n    if (this._first) this._first = false;\n\n    emitter.emit('directory', entry.fullPath, entry);\n\n    ++this._dirs;\n\n    entry.createReader().readEntries(function (entries) {\n        [].forEach.call(entries, function (entry) {\n            _this._find(emitter, entry);\n        });\n\n        --_this._dirs;\n\n        if (!_this._dirs) emitter.emit('end');\n    });\n};\n\n//# sourceURL=file://cloudcmd/node_modules/domfs-findit/legacy/findit.js");
/src/cloudcmd.js-239-
##############################################
/src/cloudcmd.js-248-
/src/cloudcmd.js:249:eval("module.exports = __webpack_require__(/*! ./lib/emitify */ \"./node_modules/emitify/legacy/lib/emitify.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/emitify/legacy/index.js");
/src/cloudcmd.js-250-
##############################################
/src/cloudcmd.js-260-"use strict";
/src/cloudcmd.js:261:eval("\n\nmodule.exports = Emitify;\n\nfunction Emitify() {\n    if (!(this instanceof Emitify)) return new Emitify();\n\n    this._all = {};\n}\n\nEmitify.prototype.on = function (event, callback) {\n    var funcs = this._all[event];\n\n    check(event, callback);\n\n    if (funcs) funcs.push(callback);else this._all[event] = [callback];\n\n    return this;\n};\n\nEmitify.prototype.addListener = Emitify.prototype.on;\n\nEmitify.prototype.once = function (event, callback) {\n    var self = this;\n\n    check(event, callback);\n\n    self.on(event, function fn() {\n        callback.apply(null, arguments);\n        self.off(event, fn);\n    });\n\n    return this;\n};\n\nEmitify.prototype.off = function (event, callback) {\n    var events = this._all[event] || [];\n    var index = events.indexOf(callback);\n\n    check(event, callback);\n\n    while (~index) {\n        events.splice(index, 1);\n        index = events.indexOf(callback);\n    }\n\n    return this;\n};\n\nEmitify.prototype.removeListener = Emitify.prototype.off;\n\nEmitify.prototype.emit = function (event) {\n    var args = [].slice.call(arguments, 1);\n    var funcs = this._all[event];\n\n    checkEvent(event);\n\n    if (!funcs && event === 'error') throw args[0];\n\n    if (!funcs) return this;\n\n    funcs.forEach(function (fn) {\n        fn.apply(null, args);\n    });\n\n    return this;\n};\n\nEmitify.prototype.removeAllListeners = function (event) {\n    checkEvent(event);\n\n    this._all[event] = [];\n\n    return this;\n};\n\nfunction checkEvent(event) {\n    if (typeof event !== 'string') throw Error('event should be string!');\n}\n\nfunction checkFn(callback) {\n    if (typeof callback !== 'function') throw Error('callback should be function!');\n}\n\nfunction check(event, callback) {\n    checkEvent(event);\n    checkFn(callback);\n}\n\n//# sourceURL=file://cloudcmd/node_modules/emitify/legacy/lib/emitify.js");
/src/cloudcmd.js-262-
##############################################
/src/cloudcmd.js-271-
/src/cloudcmd.js:272:eval("(function(global) {\n    'use strict';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports = new ExecProto();\n    else\n        global.exec = new ExecProto();\n        \n    function ExecProto() {\n        var slice = Array.prototype.slice,\n            /**\n             * function do save exec of function\n             * @param callback\n             * @param arg1\n             * ...\n             * @param argN\n             */\n            exec        = function(callback) {\n                var ret,\n                    isFunc  = typeof callback === 'function',\n                    args    = slice.call(arguments, 1);\n               \n                if (isFunc)\n                    ret     = callback.apply(null, args);\n                \n                return ret;\n            };\n        \n        /*\n         * return function that calls callback with arguments\n         */\n        exec.with           =  function(callback) {\n            var slice   = Array.prototype.slice,\n                args    = slice.call(arguments, 1);\n            \n            return function() {\n                var array   = slice.call(arguments), \n                    all     = args.concat(array);\n                \n                return callback.apply(null, all);\n            };\n        };\n         \n         /**\n         * return save exec function\n         * @param callback\n         */\n        exec.ret        = function() {\n            var result,\n                args        = slice.call(arguments);\n            \n            args.unshift(exec);\n            result          = exec.with.apply(null, args);\n            \n            return result;\n        };\n        \n        /**\n         * function do conditional save exec of function\n         * @param condition\n         * @param callback\n         * @param func\n         */\n        exec.if         = function(condition, callback, func) {\n            var ret;\n            \n            if (condition)\n                exec(callback);\n            else\n                exec(func, callback);\n            \n            return ret;\n        };\n        \n        /**\n         * exec function if it exist in object\n         * \n         * @param obj\n         * @param name\n         * @param arg\n         */\n        exec.ifExist                = function(obj, name, arg) {\n            var ret,\n                func    = obj && obj[name];\n            \n            if (func)\n                func    = func.apply(obj, arg);\n            \n            return ret;\n        };\n        \n        exec.parallel   = function(funcs, callback) {\n            var ERROR       = 'could not be empty!',\n                keys        = [],\n                callbackWas = false,\n                arr         = [],\n                obj         = {},\n                count       = 0,\n                countFuncs  = 0,\n                type        = getType(funcs);\n            \n            if (!funcs)\n                throw Error('funcs ' + ERROR);\n            \n            if (!callback)\n                throw Error('callback ' + ERROR);\n            \n            switch(type) {\n            case 'array':\n                countFuncs  = funcs.length;\n                \n                funcs.forEach(function(func, num) {\n                    exec(func, function() {\n                        checkFunc(num, arguments);\n                    });\n                });\n                break;\n            \n            case 'object':\n                keys        = Object.keys(funcs);\n                countFuncs  = keys.length;\n                \n                keys.forEach(function(name) {\n                    var func    = funcs[name];\n                    \n                    exec(func, function() {\n                        checkFunc(name, arguments, obj);\n                    });\n                });\n                break;\n            }\n            \n            function checkFunc(num, data) {\n                var args    = slice.call(data, 1),\n                    isLast  = false,\n                    error   = data[0],\n                    length  = args.length;\n                \n                ++count;\n                \n                isLast = count === countFuncs;\n                \n                if (!error)\n                    if (length >= 2)\n                        arr[num] = args;\n                    else\n                        arr[num] = args[0];\n                \n                if (!callbackWas && (error || isLast)) {\n                    callbackWas = true;\n                    \n                    if (type === 'array')\n                        callback.apply(null, [error].concat(arr));\n                    else\n                        callback(error, arr);\n                }\n            }\n        };\n        \n        /**\n         * load functions thrue callbacks one-by-one\n         * @param funcs {Array} - array of functions\n         */\n        exec.series             = function(funcs, callback) {\n            var fn,\n                i           = funcs.length,\n                check       = function(error) {\n                    var done;\n                    \n                    --i;\n                    \n                    if (!i || error) {\n                        done = true;\n                        exec(callback, error);\n                    }\n                    \n                    return done;\n                };\n            \n            if (!Array.isArray(funcs))\n                throw Error('funcs should be array!');\n            \n            fn = funcs.shift();\n            \n            exec(fn, function(error) {\n                if (!check(error))\n                    exec.series(funcs, callback);\n            });\n        };\n        \n        exec.each               = function(array, iterator, callback) {\n            var listeners = array.map(function(item) {\n                return iterator.bind(null, item);\n            });\n            \n            if (!listeners.length)\n                callback();\n            else\n                exec.parallel(listeners, callback);\n        };\n            \n        exec.eachSeries         = function(array, iterator, callback) {\n            var listeners = array.map(function(item) {\n                return iterator.bind(null, item);\n            });\n            \n            if (typeof callback !== 'function')\n                throw Error('callback should be function');\n            \n            if (!listeners.length)\n                callback();\n            else\n                exec.series(listeners, callback);\n        };\n        \n       /**\n         * function execute param function in\n         * try...catch block\n         * \n         * @param callback\n         */\n        exec.try                = function(callback) {\n            var ret;\n            try {\n                ret = callback();\n            } catch(error) {\n                ret = error;\n            }\n            \n            return ret;\n        };\n        \n        function getType(variable) {\n            var regExp      = new RegExp('\\\\s([a-zA-Z]+)'),\n                str         = {}.toString.call(variable),\n                typeBig     = str.match(regExp)[1],\n                result      = typeBig.toLowerCase();\n            \n            return result;\n        } \n        \n        return exec;\n    }\n})(this);\n\n\n//# sourceURL=file://cloudcmd/node_modules/execon/lib/exec.js");
/src/cloudcmd.js-273-
##############################################
/src/cloudcmd.js-282-
/src/cloudcmd.js:283:eval("(function(global) {\n    'use strict';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports  = new FormatProto();\n    else\n        global.Format   = new FormatProto();\n        \n    function FormatProto() {\n        this.addSlashToEnd  = function(path) {\n            var length, isSlash;\n            \n            if (path) {\n                length  = path.length - 1;\n                isSlash = path[length] === '/';\n                \n                if (!isSlash)\n                    path += '/';\n            }\n            \n            return path;\n        };\n        \n        /** Функция получает короткие размеры\n         * конвертируя байт в килобайты, мегабойты,\n         * гигайбайты и терабайты\n         * @pSize - размер в байтах\n         */\n        this.size    = function(size) {\n            var isNumber    = typeof size === 'number',\n                l1KB        = 1024,\n                l1MB        = l1KB * l1KB,\n                l1GB        = l1MB * l1KB,\n                l1TB        = l1GB * l1KB,\n                l1PB        = l1TB * l1KB;\n            \n            if (isNumber) {\n                if      (size < l1KB)   size = size + 'b';\n                else if (size < l1MB)   size = (size / l1KB).toFixed(2) + 'kb';\n                else if (size < l1GB)   size = (size / l1MB).toFixed(2) + 'mb';\n                else if (size < l1TB)   size = (size / l1GB).toFixed(2) + 'gb';\n                else if (size < l1PB)   size = (size / l1TB).toFixed(2) + 'tb';\n                else                    size = (size / l1PB).toFixed(2) + 'pb';\n            }\n            \n            return size;\n        };\n        \n        /**\n         * Функция переводит права из цыфрового вида в символьный\n         * @param perms - строка с правами доступа\n         * к файлу в 8-миричной системе\n         */\n        this.permissions = {\n            symbolic: function(perms) {\n                var type, owner, group, all,\n                    is              = typeof perms !== undefined,\n                    permsStr        = '',\n                    permissions     = '';\n                /*\n                    S_IRUSR   0000400   protection: readable by owner\n                    S_IWUSR   0000200   writable by owner\n                    S_IXUSR   0000100   executable by owner\n                    S_IRGRP   0000040   readable by group\n                    S_IWGRP   0000020   writable by group\n                    S_IXGRP   0000010   executable by group\n                    S_IROTH   0000004   readable by all\n                    S_IWOTH   0000002   writable by all\n                    S_IXOTH   0000001   executable by all\n                */\n                \n                if (is) {\n                    permsStr = perms.toString();\n                    /* тип файла */\n                    type = permsStr.charAt(0);\n                    \n                    switch (type - 0) {\n                        case 1: /* обычный файл */\n                            type = '-';\n                            break;\n                        case 2: /* байт-ориентированное (символьное) устройство*/\n                            type = 'c';\n                            break;\n                        case 4: /* каталог */\n                            type = 'd';\n                            break;\n                        default:\n                            type = '-';\n                    }\n                    \n                    /* оставляем последние 3 символа*/\n                    if (permsStr.length > 5)\n                        permsStr = permsStr.substr(3);\n                    else\n                        permsStr = permsStr.substr(2);\n                    \n                    /* Рекомендации гугла советуют вместо string[3]\n                     * использовать string.charAt(3)\n                     */\n                    /*\n                        http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Standards_features#Standards_features\n                        \n                        Always preferred over non-standards featuresFor\n                        maximum portability and compatibility, always\n                        prefer standards features over non-standards\n                        features (e.g., string.charAt(3) over string[3]\n                        and element access with DOM functions instead\n                        of using an application-specific shorthand).\n                    */\n                    /* Переводим в двоичную систему */\n                    owner = (permsStr[0] - 0).toString(2),\n                    group = (permsStr[1] - 0).toString(2),\n                    all   = (permsStr[2] - 0).toString(2),\n                    \n                    /* переводим в символьную систему*/\n                    permissions =\n                                 (owner[0] - 0 > 0 ? 'r' : '-')     +\n                                 (owner[1] - 0 > 0 ? 'w' : '-')     +\n                                 (owner[2] - 0 > 0 ? 'x' : '-')     +\n                                 ' '                                +\n                                 (group[0] - 0 > 0 ? 'r' : '-')     +\n                                 (group[1] - 0 > 0 ? 'w' : '-')     +\n                                 (group[2] - 0 > 0 ? 'x' : '-')     +\n                                 ' '                                +\n                                 (all[0] - 0    > 0 ? 'r' : '-')     +\n                                 (all[1] - 0    > 0 ? 'w' : '-')     +\n                                 (all[2] - 0    > 0 ? 'x' : '-');\n                }\n                \n                return permissions;\n            },\n            \n            /**\n             * Функция конвертирует права доступа к файлам из символьного вида\n             * в цыфровой\n             */\n            numeric: function(perms) {\n                var owner, group, all,\n                    length          = perms && perms.length === 11;\n                \n                if (length) {\n                    owner   = (perms[0]  === 'r' ? 4 : 0) +\n                              (perms[1]  === 'w' ? 2 : 0) +\n                              (perms[2]  === 'x' ? 1 : 0),\n                                \n                    group   = (perms[4]  === 'r' ? 4 : 0) +\n                              (perms[5]  === 'w' ? 2 : 0) +\n                              (perms[6]  === 'x' ? 1 : 0),\n                            \n                    all     = (perms[8]  === 'r' ? 4 : 0) +\n                              (perms[9]  === 'w' ? 2 : 0) +\n                              (perms[10] === 'x' ? 1 : 0);\n                    \n                    /* добавляем 2 цифры до 5 */\n                    perms   = '00' + owner + group + all;\n                }\n                \n                return perms;\n            }\n        };\n    }\n    \n})(this);\n\n\n//# sourceURL=file://cloudcmd/node_modules/format-io/lib/format.js");
/src/cloudcmd.js-284-
##############################################
/src/cloudcmd.js-293-
/src/cloudcmd.js:294:eval("module.exports = __webpack_require__(/*! ./lib/fullstore */ \"./node_modules/fullstore/legacy/lib/fullstore.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/fullstore/legacy/index.js");
/src/cloudcmd.js-295-
##############################################
/src/cloudcmd.js-305-"use strict";
/src/cloudcmd.js:306:eval("\n\nmodule.exports = function (value) {\n    var data = {\n        value: value\n    };\n\n    return function (value) {\n        if (!arguments.length) return data.value;\n\n        data.value = value;\n\n        return value;\n    };\n};\n\n//# sourceURL=file://cloudcmd/node_modules/fullstore/legacy/lib/fullstore.js");
/src/cloudcmd.js-307-
##############################################
/src/cloudcmd.js-316-
/src/cloudcmd.js:317:eval("if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n//# sourceURL=file://cloudcmd/node_modules/inherits/inherits_browser.js");
/src/cloudcmd.js-318-
##############################################
/src/cloudcmd.js-327-
/src/cloudcmd.js:328:eval("module.exports = __webpack_require__(/*! ./lib/itchy */ \"./node_modules/itchy/legacy/lib/itchy.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/itchy/legacy/index.js");
/src/cloudcmd.js-329-
##############################################
/src/cloudcmd.js-339-"use strict";
/src/cloudcmd.js:340:eval("\n\nmodule.exports = function (array, iterator, done) {\n    check(array, iterator, done);\n    \n    var i = -1;\n    var n = array.length;\n    \n    var loop = function (e) {\n       ++i;\n       \n       if (e || i === n)\n           { return done(e); }\n       \n       iterator(array[i], loop);\n    };\n    \n    loop();\n}\n\nfunction check(array, iterator, done) {\n    if (!Array.isArray(array))\n        { throw Error('array should be an array!'); }\n    \n    if (typeof iterator !== 'function')\n        { throw Error('iterator should be a function!'); }\n    \n    if (typeof done !== 'function')\n        { throw Error('done should be a function!'); }\n}\n\n\n\n//# sourceURL=file://cloudcmd/node_modules/itchy/legacy/lib/itchy.js");
/src/cloudcmd.js-341-
##############################################
/src/cloudcmd.js-350-
/src/cloudcmd.js:351:eval("module.exports = __webpack_require__(/*! ./lib/itype */ \"./node_modules/itype/legacy/lib/itype.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/itype/legacy/index.js");
/src/cloudcmd.js-352-
##############################################
/src/cloudcmd.js-362-"use strict";
/src/cloudcmd.js:363:eval("\n\nmodule.exports = new TypeProto();\n\nfunction TypeProto() {\n    /**\n     * get type of variable\n     *\n     * @param variable\n     */\n    function type(variable) {\n        var regExp = /\\s([a-zA-Z]+)/;\n        var str = {}.toString.call(variable);\n        var typeBig = str.match(regExp)[1];\n        var result = typeBig.toLowerCase();\n        \n        return result;\n    }\n    \n    /**\n     * functions check is variable is type of name\n     *\n     * @param variable\n     */\n    function typeOf(name, variable) {\n        return type(variable) === name;\n    }\n    \n    function typeOfSimple(name, variable) {\n        return typeof variable === name;\n    }\n    \n    ['arrayBuffer', 'file', 'array', 'object']\n        .forEach(function (name) {\n            type[name] = typeOf.bind(null, name);\n        });\n    \n    ['null', 'string', 'undefined', 'boolean', 'number', 'function']\n        .forEach(function (name) {\n            type[name] = typeOfSimple.bind(null, name);\n        });\n    \n    return type;\n}\n\n\n\n//# sourceURL=file://cloudcmd/node_modules/itype/legacy/lib/itype.js");
/src/cloudcmd.js-364-
##############################################
/src/cloudcmd.js-373-
/src/cloudcmd.js:374:eval("/* WEBPACK VAR INJECTION */(function(global) {(function(scope) {\n    'use strict';\n    \n    var Scope   = scope.window ? window : global,\n        \n        PREFIX  = '/join';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports  = join;\n    else\n        Scope.join      = join;\n    \n    function join (prefix, names) {\n        var url;\n        \n        if (!names) {\n            names   = prefix;\n            prefix  = PREFIX;\n        }\n        \n        if (!names)\n            throw(Error('names must be array!'));\n        \n        url = prefix + ':' + names.join(':');\n        \n        return url;\n    }\n    \n})(this);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=file://cloudcmd/node_modules/join-io/www/join.js");
/src/cloudcmd.js-375-
##############################################
/src/cloudcmd.js-384-
/src/cloudcmd.js:385:eval("module.exports = __webpack_require__(/*! ./jonny */ \"./node_modules/jonny/legacy/jonny.js\")\n\n\n//# sourceURL=file://cloudcmd/node_modules/jonny/legacy/index.js");
/src/cloudcmd.js-386-
##############################################
/src/cloudcmd.js-396-"use strict";
/src/cloudcmd.js:397:eval("\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar tryCatch = __webpack_require__(/*! try-catch */ \"./node_modules/try-catch/lib/try-catch.js\");\n\nvar parse = JSON.parse,\n    stringify = JSON.stringify;\n\n\nmodule.exports.parse = function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n    }\n\n    var _tryCatch = tryCatch.apply(undefined, [parse].concat(args)),\n        _tryCatch2 = _slicedToArray(_tryCatch, 2),\n        data = _tryCatch2[1];\n\n    return data;\n};\n\nmodule.exports.stringify = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n    }\n\n    var _tryCatch3 = tryCatch.apply(undefined, [stringify].concat(args)),\n        _tryCatch4 = _slicedToArray(_tryCatch3, 2),\n        data = _tryCatch4[1];\n\n    return data;\n};\n\n//# sourceURL=file://cloudcmd/node_modules/jonny/legacy/jonny.js");
/src/cloudcmd.js-398-
##############################################
/src/cloudcmd.js-408-"use strict";
/src/cloudcmd.js:409:eval("\n\nvar somefilter = __webpack_require__(/*! somefilter/legacy */ \"./node_modules/somefilter/legacy/index.js\");\nvar limier = somefilter([findByAbr, findByName]);\n\nmodule.exports = function (pattern, list) {\n    check(pattern, list);\n\n    return limier(pattern, list) || [];\n};\n\nfunction findByName(str, names) {\n    return names.filter(function (name) {\n        return name.includes(str);\n    });\n}\n\nfunction findByAbr(str, names) {\n    var regstr = str.split('').join('.*') + '.*';\n    var regexp = RegExp('^' + regstr + '$', 'i');\n\n    return names.filter(function (name) {\n        return regexp.test(name);\n    });\n}\n\nfunction check(pattern, list) {\n    if (typeof pattern !== 'string') throw Error('pattern should be string!');\n\n    if (!Array.isArray(list)) throw Error('list should be an array!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/limier/lib/limier.js");
/src/cloudcmd.js-410-
##############################################
/src/cloudcmd.js-420-"use strict";
/src/cloudcmd.js:421:eval("\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar findit = __webpack_require__(/*! domfs-findit */ \"./node_modules/domfs-findit/legacy/findit.js\");\nvar Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\nvar itchy = __webpack_require__(/*! itchy/legacy */ \"./node_modules/itchy/legacy/index.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nmodule.exports = Philip;\n\ninherits(Philip, Emitify);\n\nfunction Philip(entries, processingFn) {\n    var _this = this;\n\n    if (!(this instanceof Philip)) return new Philip(entries, processingFn);\n\n    if (typeof processingFn !== 'function') throw Error('processingFn should be function!');\n\n    Emitify.call(this);\n\n    var array = Array.isArray(entries) ? entries : [entries];\n\n    this._i = 0;\n    this._n = 0;\n    this._processingFn = processingFn;\n    this._pause = false;\n    this._prev = 0;\n\n    this._find(array, function (files, dirs) {\n        _this._files = files;\n        _this._dirs = dirs;\n        _this._n = files.length + dirs.length;\n        _this._data = {};\n\n        _this._getFiles(files, _this._data, function () {\n            _this._process();\n        });\n    });\n}\n\nPhilip.prototype._process = function () {\n    var _this2 = this;\n\n    var argsLength = this._processingFn.length;\n    var fn = function fn(error) {\n        ++_this2._i;\n\n        if (error) {\n            _this2.emit('error', error);\n            _this2.pause();\n        }\n\n        _this2._process();\n        _this2._progress();\n    };\n\n    var data = void 0;\n    var name = this._dirs.shift();\n    var type = 'directory';\n\n    if (!name) {\n        type = 'file';\n        var el = this._files.shift();\n\n        if (el) {\n            name = el.fullPath;\n            data = this._data[name];\n        }\n    }\n\n    if (!name) return this.emit('end');\n\n    var args = void 0;\n    if (!this._pause) {\n        switch (argsLength) {\n            default:\n                args = [type, name, data];\n                break;\n\n            case 6:\n                args = [type, name, data, this._i, this._n];\n                break;\n        }\n\n        args.push(fn);\n\n        this._processingFn.apply(this, _toConsumableArray(args));\n    }\n};\n\nPhilip.prototype.pause = function () {\n    this._pause = true;\n};\n\nPhilip.prototype.continue = function () {\n    if (this._pause) {\n        this._pause = false;\n        this._process();\n    }\n};\n\nPhilip.prototype.abort = function () {\n    this._files = [];\n    this._dirs = [];\n\n    this._process();\n};\n\nPhilip.prototype._progress = function () {\n    var value = Math.round(this._i * 100 / this._n);\n\n    if (value !== this._prev) {\n        this._prev = value;\n        this.emit('progress', value);\n    }\n};\n\nPhilip.prototype._getFiles = function (files, obj, callback) {\n    var _this3 = this;\n\n    var filesList = files.slice();\n    var current = filesList.shift();\n\n    if (!current) return callback(null, obj);\n\n    current.file(function (file) {\n        var name = current.fullPath;\n\n        obj[name] = file;\n\n        _this3._getFiles(filesList, obj, callback);\n    });\n};\n\nPhilip.prototype._find = function (entries, fn) {\n    var files = [];\n    var dirs = [];\n\n    itchy(entries, function (entry, callback) {\n        var finder = findit(entry);\n\n        finder.on('directory', function (name) {\n            dirs.push(name);\n        });\n\n        finder.on('file', function (name, current) {\n            files.push(current);\n        });\n\n        finder.on('end', function () {\n            callback();\n        });\n    }, function () {\n        fn(files, dirs);\n    });\n};\n\n//# sourceURL=file://cloudcmd/node_modules/philip/legacy/philip.js");
/src/cloudcmd.js-422-
##############################################
/src/cloudcmd.js-431-
/src/cloudcmd.js:432:eval("(function(global) {\n    'use strict';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports = rendy;\n    else\n        global.rendy = rendy;\n    \n    /**\n     * render template with data\n     *\n     * @param templ\n     * @param data\n     */\n    function rendy(templ, data) {\n        var result  = templ;\n        \n        check(templ, data);\n        \n        Object\n            .keys(data)\n            .forEach(function(param) {\n                var name    = '{{ ' + param + ' }}',\n                    str     = data[param];\n                \n                while(~result.indexOf(name))\n                    result = result.replace(name, str);\n            });\n        \n        if (~result.indexOf('{{'))\n            result = result.replace(/{{.*?}}/g, '');\n        \n        return result;\n    }\n    \n    function check(templ, data) {\n        if (typeof templ !== 'string')\n            throw(Error('template should be string!'));\n        \n        if (typeof data !== 'object')\n            throw(Error('data should be object!'));\n    }\n})(this);\n\n\n//# sourceURL=file://cloudcmd/node_modules/rendy/lib/rendy.js");
/src/cloudcmd.js-433-
##############################################
/src/cloudcmd.js-442-
/src/cloudcmd.js:443:eval("module.exports = __webpack_require__(/*! ./somefilter */ \"./node_modules/somefilter/legacy/somefilter.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/somefilter/legacy/index.js");
/src/cloudcmd.js-444-
##############################################
/src/cloudcmd.js-454-"use strict";
/src/cloudcmd.js:455:eval("\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nvar squad = __webpack_require__(/*! squad/legacy */ \"./node_modules/squad/legacy/index.js\");\nvar apart = __webpack_require__(/*! apart */ \"./node_modules/apart/lib/apart.js\");\n\nvar unary = currify(function (fn, value) {\n    return fn(value);\n});\nvar notEmpty = function notEmpty(value) {\n    return value;\n};\nvar apply = currify(function (args, fn) {\n    return fn.apply(undefined, _toConsumableArray(args));\n});\n\nmodule.exports = somefilter;\n\nfunction somefilter(condition, filters) {\n    if (!filters) {\n        filters = condition;\n        condition = notEmpty;\n    }\n\n    checkAll(condition, filters);\n\n    var storify = store(condition);\n    var process = apart(squad, condition, storify);\n\n    var processingFilters = filters.map(unary(process)).reverse();\n\n    return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        processingFilters.some(apply(args));\n\n        return storify();\n    };\n}\n\nfunction store(condition) {\n    var cache = void 0;\n\n    return function (value) {\n        var result = void 0;\n\n        if (condition(value)) {\n            cache = result = value;\n        } else {\n            result = cache;\n            cache = null;\n        }\n\n        return result;\n    };\n}\n\nfunction checkAll(condition, filters) {\n    if (typeof condition !== 'function') throw Error('condition should be function!');\n\n    if (!Array.isArray(filters)) throw Error('filters should be an array!');\n\n    check('function', filters);\n}\n\nfunction check(type, array) {\n    var getType = function getType(item) {\n        return typeof item === 'undefined' ? 'undefined' : _typeof(item);\n    };\n    var notEqual = function notEqual(a, b) {\n        return a !== b;\n    };\n    var wrong = function wrong(type) {\n        throw Error('fn should be ' + type + '!');\n    };\n\n    var wrongType = apart(wrong, type);\n    var notType = apart(notEqual, type);\n\n    if (!array.length) return wrongType(type);\n\n    array.map(getType).filter(notType).forEach(wrongType);\n}\n\n//# sourceURL=file://cloudcmd/node_modules/somefilter/legacy/somefilter.js");
/src/cloudcmd.js-456-
##############################################
/src/cloudcmd.js-465-
/src/cloudcmd.js:466:eval("module.exports = __webpack_require__(/*! ./squad */ \"./node_modules/squad/legacy/squad.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/squad/legacy/index.js");
/src/cloudcmd.js-467-
##############################################
/src/cloudcmd.js-477-"use strict";
/src/cloudcmd.js:478:eval("\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.exports = function () {\n    for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n        funcs[_key] = arguments[_key];\n    }\n\n    check('function', funcs);\n\n    return function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n        }\n\n        return funcs.reduceRight(apply, args).pop();\n    };\n};\n\nfunction apply(value, fn) {\n    return [fn.apply(undefined, _toConsumableArray(value))];\n}\n\nfunction check(type, array) {\n    var wrongType = partial(wrong, type);\n    var notType = partial(notEqual, type);\n\n    if (!array.length) return wrongType(type);\n\n    array.map(getType).filter(notType).forEach(wrongType);\n}\n\nfunction partial(fn, value) {\n    return fn.bind(null, value);\n}\n\nfunction getType(item) {\n    return typeof item === 'undefined' ? 'undefined' : _typeof(item);\n}\n\nfunction notEqual(a, b) {\n    return a !== b;\n}\n\nfunction wrong(type) {\n    throw Error('fn should be ' + type + '!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/squad/legacy/squad.js");
/src/cloudcmd.js-479-
##############################################
/src/cloudcmd.js-489-"use strict";
/src/cloudcmd.js:490:eval("\n\nmodule.exports = function tryCatch(fn) {\n    var args = [].slice.call(arguments, 1);\n    \n    try {\n        return [null, fn.apply(null, args)];\n    } catch(e) {\n        return [e];\n    }\n};\n\n\n\n//# sourceURL=file://cloudcmd/node_modules/try-catch/lib/try-catch.js");
/src/cloudcmd.js-491-
##############################################
/src/cloudcmd.js-500-
/src/cloudcmd.js:501:eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n//# sourceURL=file://cloudcmd/node_modules/webpack/buildin/global.js");
/src/cloudcmd.js-502-
##############################################
/src/cloudcmd.js-511-
/src/cloudcmd.js:512:eval("module.exports = __webpack_require__(/*! ./lib/wraptile */ \"./node_modules/wraptile/legacy/lib/wraptile.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/wraptile/legacy/index.js");
/src/cloudcmd.js-513-
##############################################
/src/cloudcmd.js-523-"use strict";
/src/cloudcmd.js:524:eval("\n\nvar wrap = function wrap(fn) {\n    for (var _len = arguments.length, a = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        a[_key - 1] = arguments[_key];\n    }\n\n    return function () {\n        for (var _len2 = arguments.length, b = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            b[_key2] = arguments[_key2];\n        }\n\n        return function () {\n            for (var _len3 = arguments.length, c = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                c[_key3] = arguments[_key3];\n            }\n\n            return fn.apply(undefined, a.concat(b, c));\n        };\n    };\n};\n\nmodule.exports = function (fn) {\n    for (var _len4 = arguments.length, a = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        a[_key4 - 1] = arguments[_key4];\n    }\n\n    check(fn);\n\n    return wrap.apply(undefined, [fn].concat(a));\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/wraptile/legacy/lib/wraptile.js");
/src/cloudcmd.js-525-
##############################################
/src/modules/jquery/dist/jquery.slim.js-6908-				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
/src/modules/jquery/dist/jquery.slim.js:6909:				// Use proper attribute retrieval(#12072)
/src/modules/jquery/dist/jquery.slim.js-6910-				var tabindex = jQuery.find.attr( elem, "tabindex" );
##############################################
/src/modules/jquery/dist/jquery.js-7701-				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
/src/modules/jquery/dist/jquery.js:7702:				// Use proper attribute retrieval(#12072)
/src/modules/jquery/dist/jquery.js-7703-				var tabindex = jQuery.find.attr( elem, "tabindex" );
##############################################
/src/dist-dev/cloudcmd.common.js-10-"use strict";
/src/dist-dev/cloudcmd.common.js:11:eval("\n\n/* global CloudCmd */\n\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst Storage = __webpack_require__(/*! ./storage */ \"./client/dom/storage.js\");\nconst DOM = __webpack_require__(/*! ./ */ \"./client/dom/index.js\");\n\nmodule.exports = new BufferProto();\n\nfunction BufferProto() {\n    const Info = DOM.CurrentInfo;\n    const CLASS = 'cut-file';\n    const COPY = 'copy';\n    const CUT = 'cut';\n    const TITLE = 'Buffer';\n    \n    const Buffer  = {\n        cut     : callIfEnabled.bind(null, cut),\n        copy    : callIfEnabled.bind(null, copy),\n        clear   : callIfEnabled.bind(null, clear),\n        paste   : callIfEnabled.bind(null, paste)\n    };\n    \n    function showMessage(msg) {\n        DOM.Dialog.alert(TITLE, msg);\n    }\n    \n    function getNames() {\n        const files = DOM.getActiveFiles();\n        const names = DOM.getFilenames(files);\n        \n        return names;\n    }\n    \n    function addCutClass() {\n        const files = DOM.getActiveFiles();\n        \n        files.forEach((element) => {\n            element.classList.add(CLASS);\n        });\n    }\n    \n    function rmCutClass() {\n        const files = DOM.getByClassAll(CLASS);\n        \n        [...files].forEach((element) => {\n            element.classList.remove(CLASS);\n        });\n    }\n    \n    function callIfEnabled(callback) {\n        const is = CloudCmd.config('buffer');\n        \n        if (is)\n            return callback();\n        \n        showMessage('Buffer disabled in config!');\n    }\n    \n    function copy() {\n        const names = getNames();\n        const from = Info.dirPath;\n        \n        clear();\n        \n        if (!names.length)\n            return;\n        \n        Storage.remove(CUT)\n            .set(COPY, {\n                from,\n                names,\n            });\n    }\n    \n    function cut() {\n        const names = getNames();\n        const from = Info.dirPath;\n        \n        clear();\n        \n        if (!names.length)\n            return;\n        \n        addCutClass();\n        \n        Storage\n            .set(CUT, {\n                from,\n                names,\n            });\n    }\n    \n    function clear() {\n        Storage.remove(COPY)\n            .remove(CUT);\n        \n        rmCutClass();\n    }\n    \n    function paste() {\n        const copy = Storage.get.bind(Storage, COPY);\n        const cut = Storage.get.bind(Storage, CUT);\n        \n        exec.parallel([copy, cut], (error, cp, ct) => {\n            const opStr = cp ? 'copy' : 'move';\n            const opData = cp || ct;\n            const Operation = CloudCmd.Operation;\n            const msg = 'Path is same!';\n            const path = Info.dirPath;\n            \n            if (!error && !cp && !ct)\n                error = 'Buffer is empty!';\n           \n            if (error)\n                return showMessage(error);\n                \n            const data = jonny.parse(opData);\n            data.to = path;\n            \n            if (data.from === path)\n                return showMessage(msg);\n            \n            Operation.show(opStr, data);\n            clear();\n        });\n    }\n    \n    return Buffer;\n}\n\n\n//# sourceURL=file://cloudcmd/client/dom/buffer.js");
/src/dist-dev/cloudcmd.common.js-12-
##############################################
/src/dist-dev/cloudcmd.common.js-22-"use strict";
/src/dist-dev/cloudcmd.common.js:23:eval("/* global CloudCmd */\n\n\n\nconst philip = __webpack_require__(/*! philip */ \"./node_modules/philip/legacy/philip.js\");\n\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\nconst DOM = __webpack_require__(/*! . */ \"./client/dom/index.js\");\n\nconst {\n    getCurrentDirPath: getPathWhenRootEmpty,\n} = DOM;\n\nmodule.exports = (items) => {\n    const Dialog = DOM.Dialog;\n    \n    if (items.length)\n        Images.show('top');\n    \n    const entries = [...items].map((item) => {\n        return item.webkitGetAsEntry();\n    });\n    \n    const dirPath = getPathWhenRootEmpty();\n    const path = dirPath\n        .replace(/\\/$/, '');\n    \n    const uploader = philip(entries, (type, name, data, i, n, callback) => {\n        const prefixURL = CloudCmd.PREFIX_URL;\n        const full = prefixURL + FS + path + name;\n        \n        let upload;\n        switch(type) {\n        case 'file':\n            upload = uploadFile(full, data);\n            break;\n        \n        case 'directory':\n            upload = uploadDir(full);\n            break;\n        }\n        \n        upload.on('end', callback);\n        \n        upload.on('progress', (count) => {\n            const current = percent(i, n);\n            const next = percent(i + 1, n);\n            const max = next - current;\n            const value = current + percent(count, 100, max);\n            \n            setProgress(value);\n        });\n    });\n    \n    uploader.on('error', (error) => {\n        Dialog.alert(error);\n        uploader.abort();\n    });\n    \n    uploader.on('progress', setProgress);\n    uploader.on('end', CloudCmd.refresh);\n};\n\nfunction percent(i, n, per = 100) {\n    return Math.round(i * per / n);\n}\n\nfunction setProgress(count) {\n    DOM.Images\n        .setProgress(count)\n        .show('top');\n}\n\nfunction uploadFile(url, data) {\n    return DOM.load.put(url, data);\n}\n\nfunction uploadDir(url) {\n    return DOM.load.put(url + '?dir');\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/directory.js");
/src/dist-dev/cloudcmd.common.js-24-
##############################################
/src/dist-dev/cloudcmd.common.js-34-"use strict";
/src/dist-dev/cloudcmd.common.js:35:eval("\n\nconst DOM = module.exports;\n\n/**\n * check class of element\n *\n * @param element\n * @param className\n */\nmodule.exports.isContainClass = (element, className) => {\n    if (!element)\n        throw Error('element could not be empty!');\n    \n    if (!className)\n        throw Error('className could not be empty!');\n    \n    const classList = element.classList;\n    const ret = classList.contains(className);\n    \n    return ret;\n};\n\n/**\n * Function search element by tag\n * @param tag - className\n * @param element - element\n */\nmodule.exports.getByTag = (tag, element = document) => {\n    return element.getElementsByTagName(tag);\n};\n\n/**\n * Function search element by id\n * @param Id - id\n */\nmodule.exports.getById = (id, element = document) => {\n    return element.querySelector('#' + id);\n};\n\n/**\n * Function search first element by class name\n * @param className - className\n * @param element - element\n */\nmodule.exports.getByClass = (className, element = document) => {\n    return DOM.getByClassAll(className, element)[0];\n};\n\nmodule.exports.getByDataName = (attribute, element = document) => {\n    const selector    = '[' + 'data-name=\"' + attribute + '\"]';\n    return element.querySelector(selector);\n};\n\n/**\n * Function search element by class name\n * @param pClass - className\n * @param element - element\n */\nmodule.exports.getByClassAll = (className, element) => {\n    return (element || document).getElementsByClassName(className);\n};\n\n/**\n * add class=hidden to element\n *\n * @param element\n */\nmodule.exports.hide = (element) => {\n    element.classList.add('hidden');\n    return DOM;\n};\n\nmodule.exports.show = (element) => {\n    element.classList.remove('hidden');\n    return DOM;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/dom-tree.js");
/src/dist-dev/cloudcmd.common.js-36-
##############################################
/src/dist-dev/cloudcmd.common.js-46-"use strict";
/src/dist-dev/cloudcmd.common.js:47:eval("\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\n\nmodule.exports = new EventsProto();\n\nfunction EventsProto() {\n    const Events = this;\n    \n    function parseArgs(eventName, element, listener, callback) {\n        let isFunc;\n        const args = [\n            eventName,\n            element,\n            listener,\n            callback,\n        ];\n        \n        const EVENT_NAME = 1;\n        const ELEMENT = 0;\n        const type = itype(eventName);\n        \n        switch(type) {\n        default:\n            if (!/element$/.test(type))\n                throw Error('unknown eventName: ' + type);\n            \n            parseArgs(\n                args[EVENT_NAME],\n                args[ELEMENT],\n                listener,\n                callback\n            );\n            break;\n        \n        case 'string':\n            isFunc = itype.function(element);\n            \n            if (isFunc) {\n                listener   = element;\n                element    = null;\n            }\n            \n            if (!element)\n                element = window;\n            \n            callback(element, [\n                eventName,\n                listener,\n                false\n            ]);\n            break;\n        \n        case 'array':\n            eventName.forEach((eventName) => {\n                parseArgs(\n                    eventName,\n                    element,\n                    listener,\n                    callback\n                );\n            });\n            break;\n        \n        case 'object':\n            Object.keys(eventName).forEach((name) => {\n                const eventListener = eventName[name];\n                \n                parseArgs(\n                    name,\n                    element,\n                    eventListener,\n                    callback\n                );\n            });\n           \n            break;\n        }\n    }\n    \n    /**\n     * safe add event listener\n     *\n     * @param type\n     * @param element {document by default}\n     * @param listener\n     */\n    this.add = (type, element, listener) => {\n        checkType(type);\n        \n        parseArgs(type, element, listener, (element, args) => {\n            element.addEventListener.apply(element, args);\n        });\n        \n        return Events;\n    };\n    \n    /**\n     * safe add event listener\n     *\n     * @param type\n     * @param listener\n     * @param element {document by default}\n     */\n    this.addOnce = (type, element, listener) => {\n        const once = (event) => {\n            Events.remove(type, element, once);\n            listener(event);\n        };\n        \n        if (!listener) {\n            listener    = element;\n            element     = null;\n        }\n        \n        this.add(type, element, once);\n        \n        return Events;\n    };\n    \n    /**\n     * safe remove event listener\n     *\n     * @param type\n     * @param listener\n     * @param element {document by default}\n     */\n    this.remove = (type, element, listener) => {\n        checkType(type);\n        \n        parseArgs(type, element, listener, (element, args) => {\n            element.removeEventListener.apply(element, args);\n        });\n        \n        return Events;\n    };\n    \n    /**\n     * safe add event keydown listener\n     *\n     * @param listener\n     */\n    this.addKey = function(...argsArr) {\n        const name = 'keydown';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe remove event click listener\n     *\n     * @param listener\n     */\n    this.rmKey = function(...argsArr) {\n        const name = 'keydown';\n        const args = [name, ...argsArr];\n        \n        return Events.remove(...args);\n    };\n    \n    /**\n     * safe add event click listener\n     *\n     * @param listener\n     */\n    this.addClick = function(...argsArr) {\n        const name = 'click';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe remove event click listener\n     *\n     * @param listener\n     */\n    this.rmClick = function(...argsArr) {\n        const name = 'click';\n        const args = [name, ...argsArr];\n        \n        return Events.remove(...args);\n    };\n    \n    this.addContextMenu = function(...argsArr) {\n        const name = 'contextmenu';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe add event click listener\n     *\n     * @param listener\n     */\n    this.addError = function(...argsArr) {\n        const name = 'error';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    /**\n     * safe add load click listener\n     *\n     * @param listener\n     */\n    this.addLoad = function(...argsArr) {\n        const name = 'load';\n        const args = [name, ...argsArr];\n        \n        return Events.add(...args);\n    };\n    \n    function checkType(type) {\n        if (!type)\n            throw Error('type could not be empty!');\n    }\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/events.js");
/src/dist-dev/cloudcmd.common.js-48-
##############################################
/src/dist-dev/cloudcmd.common.js-58-"use strict";
/src/dist-dev/cloudcmd.common.js:59:eval("/* global CloudCmd */\n\n\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst Storage = __webpack_require__(/*! ./storage */ \"./client/dom/storage.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst RESTful = __webpack_require__(/*! ./rest */ \"./client/dom/rest.js\");\n\nconst Promises = {};\nconst FILES_JSON = 'config|modules';\nconst FILES_HTML = 'file|path|link|pathLink|media';\nconst FILES_HTML_ROOT = 'view/media-tmpl|config-tmpl|upload';\nconst DIR_HTML = '/tmpl/';\nconst DIR_HTML_FS = DIR_HTML + 'fs/';\nconst DIR_JSON = '/json/';\nconst timeout = getTimeoutOnce(2000);\n\nconst get = currify(getFile);\nconst unaryMap = (array, fn) => array.map((a) => fn(a));\n\nmodule.exports.get = get;\n\nfunction getFile(name, callback) {\n    const type = itype(name);\n    let array;\n    \n    check(name, callback);\n    \n    switch(type) {\n    case 'string':\n        getModule(name, callback);\n        break;\n    \n    case 'array':\n        array = unaryMap(name, get);\n        \n        exec.parallel(array, callback);\n        break;\n    }\n}\n\nfunction check(name, callback) {\n    if (!name)\n        throw Error('name could not be empty!');\n    \n    if (typeof callback !== 'function')\n        throw Error('callback should be a function');\n}\n\nfunction getModule(name, callback) {\n    let path;\n    \n    const regExpHTML = new RegExp(FILES_HTML + '|' + FILES_HTML_ROOT);\n    const regExpJSON = new RegExp(FILES_JSON);\n    \n    const isHTML = regExpHTML.test(name);\n    const isJSON = regExpJSON.test(name);\n    \n    if (!isHTML && !isJSON) {\n        showError(name);\n    } else if (name === 'config') {\n        getConfig(callback);\n    } else {\n        path = getPath(name, isHTML, isJSON);\n        \n        getSystemFile(path, callback);\n    }\n    \n}\n\nfunction getPath(name, isHTML, isJSON) {\n    let path;\n    const regExp = new RegExp(FILES_HTML_ROOT);\n    const isRoot = regExp.test(name);\n    \n    if (isHTML) {\n        if (isRoot)\n            path = DIR_HTML + name.replace('-tmpl', '');\n        else\n            path = DIR_HTML_FS  + name;\n        \n        path += '.hbs';\n    } else if (isJSON) {\n        path = DIR_JSON  + name + '.json';\n    }\n    \n    return path;\n}\n\nfunction showError(name) {\n    const str = 'Wrong file name: ' + name;\n    const error = new Error(str);\n    \n    throw(error);\n}\n\nfunction getSystemFile(file, callback) {\n    const prefix = CloudCmd.PREFIX;\n    \n    if (!Promises[file])\n        Promises[file] = new Promise((success, error) => {\n            const url = prefix + file;\n            \n            load.ajax({\n                url,\n                success,\n                error\n            });\n        });\n    \n    Promises[file].then((data) => {\n        callback(null, data);\n    }, (error) => {\n        Promises[file] = null;\n        callback(error);\n    });\n}\n\nfunction getConfig(callback) {\n    let is;\n    \n    if (!Promises.config)\n        Promises.config = new Promise((resolve, reject) => {\n            is = true;\n            RESTful.Config.read((error, data) => {\n                if (error)\n                    return reject(error);\n                \n                resolve(data);\n            });\n        });\n    \n    Promises.config.then(function(data) {\n        is = false;\n        Storage.setAllowed(data.localStorage);\n        \n        callback(null, data);\n        \n        timeout(() => {\n            if (!is)\n                Promises.config = null;\n        });\n    }, function() {\n        if (!is)\n            Promises.config = null;\n    });\n}\n\nfunction getTimeoutOnce(time) {\n    let is;\n    \n    return (callback) => {\n        if (is)\n            return;\n        \n        is = true;\n        \n        setTimeout(() => {\n            is = false;\n            callback();\n        }, time);\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/files.js");
/src/dist-dev/cloudcmd.common.js-60-
##############################################
/src/dist-dev/cloudcmd.common.js-70-"use strict";
/src/dist-dev/cloudcmd.common.js:71:eval("/* global CloudCmd */\n/* global DOM */\n\n\n\nconst Images = module.exports;\n\nconst LOADING = 'loading';\nconst HIDDEN = 'hidden';\nconst ERROR = 'error';\n\nconst LoadingImage = LOADING + getLoadingType();\n\nfunction getLoadingType() {\n    return isSVG() ? '-svg' : '-gif';\n}\n\nmodule.exports.get = getElement;\n\n/**\n * check SVG SMIL animation support\n */\nfunction isSVG() {\n    const createNS = document.createElementNS;\n    const SVG_URL = 'http://www.w3.org/2000/svg';\n    \n    if (!createNS)\n        return false;\n    \n    const create = createNS.bind(document);\n    const svgNode = create(SVG_URL, 'animate');\n    const name = svgNode.toString();\n    \n    return /SVGAnimate/.test(name);\n}\n\n\nfunction getElement() {\n    return DOM.load({\n        name        : 'span',\n        id          : 'js-status-image',\n        className   : 'icon',\n        attribute   : 'data-progress',\n        notAppend   : true\n    });\n}\n\n/* Функция создаёт картинку загрузки */\nmodule.exports.loading = () => {\n    const element = getElement();\n    const classList = element.classList;\n    \n    classList.add(LOADING, LoadingImage);\n    classList.remove(ERROR, HIDDEN);\n    \n    return element;\n};\n\n/* Функция создаёт картинку ошибки загрузки */\nmodule.exports.error = () => {\n    const element = getElement();\n    const classList = element.classList;\n    \n    classList.add(ERROR);\n    classList.remove(HIDDEN, LOADING, LoadingImage);\n    \n    return element;\n};\n\nmodule.exports.show = show;\nmodule.exports.show.load  = show;\nmodule.exports.show.error = error;\n\n/**\n* Function shows loading spinner\n* position = {top: true};\n*/\nfunction show(position, panel) {\n    const image = Images.loading();\n    const parent = image.parentElement;\n    const refreshButton = DOM.getRefreshButton(panel);\n    \n    let current;\n\n    if (position === 'top') {\n        current = refreshButton.parentElement;\n    } else {\n        current = DOM.getCurrentFile();\n        \n        if (current)\n            current = DOM.getByDataName('js-name', current);\n        else\n            current = refreshButton.parentElement;\n    }\n    \n    if (!parent || (parent && parent !== current))\n        current.appendChild(image);\n    \n    DOM.show(image);\n    \n    return image;\n}\n\nfunction error(text) {\n    const image = Images.error();\n    \n    DOM.show(image);\n    image.title = text;\n    \n    CloudCmd.log(text);\n    \n    return image;\n}\n\n/**\n* hide load image\n*/\nmodule.exports.hide = () => {\n    const element = Images.get();\n    \n    DOM.hide(element);\n    \n    return Images;\n};\n\nmodule.exports.setProgress = (value, title) => {\n    const DATA = 'data-progress';\n    const element = Images.get();\n     \n    if (!element)\n        return Images;\n    \n    element.setAttribute(DATA, value + '%');\n    \n    if (title)\n        element.title = title;\n    \n    return Images;\n};\n\nmodule.exports.clearProgress  = () => {\n    const DATA = 'data-progress';\n    const element = Images.get();\n    \n    if (!element)\n        return Images;\n    \n    element.setAttribute(DATA, '');\n    element.title = '';\n    \n    return Images;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/images.js");
/src/dist-dev/cloudcmd.common.js-72-
##############################################
/src/dist-dev/cloudcmd.common.js-82-"use strict";
/src/dist-dev/cloudcmd.common.js:83:eval("/* global CloudCmd */\n\n\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst Util = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nconst {\n    getTitle,\n    FS,\n    Entity,\n} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nconst DOMTree = __webpack_require__(/*! ./dom-tree */ \"./client/dom/dom-tree.js\");\n\nconst DOM = Object.assign({}, DOMTree, new CmdProto());\n\nmodule.exports = DOM;\n\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst Files = __webpack_require__(/*! ./files */ \"./client/dom/files.js\");\nconst RESTful = __webpack_require__(/*! ./rest */ \"./client/dom/rest.js\");\nconst Storage = __webpack_require__(/*! ./storage */ \"./client/dom/storage.js\");\n\nDOM.Images = Images;\nDOM.load = load;\nDOM.Files = Files;\nDOM.RESTful = RESTful;\nDOM.Storage = Storage;\n\nDOM.uploadDirectory = __webpack_require__(/*! ./directory */ \"./client/dom/directory.js\");\nDOM.Buffer = __webpack_require__(/*! ./buffer */ \"./client/dom/buffer.js\");\nDOM.Events = __webpack_require__(/*! ./events */ \"./client/dom/events.js\");\n\nconst loadRemote = __webpack_require__(/*! ./load-remote */ \"./client/dom/load-remote.js\");\nconst selectByPattern = __webpack_require__(/*! ./select-by-pattern */ \"./client/dom/select-by-pattern.js\");\n\nfunction CmdProto() {\n    let Title;\n    let CurrentInfo = {};\n    \n    const Cmd = this;\n    const CURRENT_FILE = 'current-file';\n    const SELECTED_FILE = 'selected-file';\n    const TITLE = 'Cloud Commander';\n    const TabPanel = {\n        'js-left'        : null,\n        'js-right'       : null\n    };\n    \n    this.loadRemote = (name, options, callback) => {\n        loadRemote(name, options, callback);\n        return DOM;\n    };\n    /**\n     * load jquery from google cdn or local copy\n     * @param callback\n     */\n    this.loadJquery = function(callback) {\n        DOM.loadRemote('jquery', {\n            name    : '$'\n        }, callback);\n        \n        return DOM;\n    };\n    \n    this.loadSocket = function(callback) {\n        DOM.loadRemote('socket', {\n            name    : 'io'\n        }, callback);\n        \n        return DOM;\n    };\n    \n    /** function loads css and js of Menu\n     * @param callback\n     */\n    this.loadMenu = function(callback) {\n        return DOM.loadRemote('menu', callback);\n    };\n    \n    /**\n     * create new folder\n     *\n     */\n    this.promptNewDir        = function() {\n        promptNew('directory', '?dir');\n    };\n    \n    /**\n     * create new file\n     *\n     * @typeName\n     * @type\n     */\n    this.promptNewFile = () => {\n        promptNew('file');\n    };\n    \n    function promptNew(typeName, type) {\n        const {Dialog} = DOM;\n        const dir = Cmd.getCurrentDirPath();\n        const msg = 'New ' + typeName || 'File';\n        const getName = () => {\n            const name = Cmd.getCurrentName();\n            \n            if (name === '..')\n                return '';\n             \n            return name;\n        };\n        \n        const name = getName();\n        const cancel = false;\n        \n        Dialog.prompt(TITLE, msg, name, {cancel}).then((name) => {\n            if (!name)\n                return;\n            \n            const path = (type) => {\n                const result = dir + name;\n                \n                if (!type)\n                    return result;\n                \n                return result + type;\n            };\n            \n            RESTful.write(path(type), (error) => {\n                if (error)\n                    return;\n                \n                const currentName = name;\n                \n                CloudCmd.refresh({\n                    currentName\n                });\n            });\n        });\n    }\n    \n    /**\n     * get current direcotory name\n     */\n    this.getCurrentDirName = () => {\n        const href = DOM.getCurrentDirPath()\n            .replace(/\\/$/, '');\n        \n        const substr  = href.substr(href, href.lastIndexOf('/'));\n        const ret     = href.replace(substr + '/', '') || '/';\n        \n        return ret;\n    };\n    \n    /**\n     * get current direcotory path\n     */\n    this.getCurrentDirPath = (panel = DOM.getPanel()) => {\n        const path = DOM.getByDataName('js-path', panel);\n        const ret = path && path.textContent;\n        \n        return ret;\n    };\n    \n    /**\n     * get current direcotory path\n     */\n    this.getParentDirPath = (panel) => {\n        const path = DOM.getCurrentDirPath(panel);\n        const dirName = DOM.getCurrentDirName() + '/';\n        \n        if (path !== '/')\n            return path.replace(RegExp(dirName + '$'), '');\n        \n        return path;\n    };\n    \n    /**\n     * get not current direcotory path\n     */\n    this.getNotCurrentDirPath = () => {\n        const panel = DOM.getPanel({active: false});\n        const path = DOM.getCurrentDirPath(panel);\n        \n        return path;\n    };\n    \n    /**\n     * unified way to get current file\n     *\n     * @currentFile\n     */\n    this.getCurrentFile = () => {\n        return DOM.getByClass(CURRENT_FILE);\n    };\n    \n    /**\n     * get current file by name\n     */\n    this.getCurrentByName = (name, panel = CurrentInfo.panel) => {\n        const dataName = 'js-file-' + name;\n        const element = DOM.getByDataName(dataName, panel);\n        \n        return element;\n    };\n    \n    /**\n     * unified way to get current file\n     *\n     * @currentFile\n     */\n    this.getSelectedFiles = () => {\n        const panel = DOM.getPanel();\n        const selected = DOM.getByClassAll(SELECTED_FILE, panel);\n        \n        return [...selected];\n    };\n    \n    /*\n     * unselect all files\n     */\n    this.unselectFiles = (files) => {\n        files = files || DOM.getSelectedFiles();\n        \n        [...files].forEach(DOM.toggleSelectedFile);\n    };\n    \n    /**\n     * get all selected files or current when none selected\n     *\n     * @currentFile\n     */\n    this.getActiveFiles = () => {\n        const current = DOM.getCurrentFile();\n        const files = DOM.getSelectedFiles();\n        const name = DOM.getCurrentName(current);\n        \n        if (!files.length && name !== '..')\n            return [current];\n        \n        return files;\n    };\n    \n    this.getCurrentDate = (currentFile) => {\n        const current = currentFile || Cmd.getCurrentFile();\n        const date = DOM\n            .getByDataName('js-date', current)\n            .textContent;\n        \n        return date;\n    };\n    \n    /**\n     * get size\n     * @currentFile\n     */\n    this.getCurrentSize = (currentFile) => {\n        const current = currentFile || Cmd.getCurrentFile();\n        /* если это папка - возвращаем слово dir вместо размера*/\n        const size = DOM.getByDataName('js-size', current)\n            .textContent\n            .replace(/^<|>$/g, '');\n        \n        return size;\n    };\n    \n    /**\n     * get size\n     * @currentFile\n     */\n    this.loadCurrentSize = (callback, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const query = '?size';\n        const link = DOM.getCurrentPath(current);\n        \n        Images.show.load();\n        \n        if (name === '..')\n            return;\n        \n        RESTful.read(link + query, (error, size) => {\n            if (error)\n                return;\n                \n            DOM.setCurrentSize(size, current);\n            exec(callback, current);\n            Images.hide();\n        });\n    };\n    \n    /**\n     * load hash\n     * @callback\n     * @currentFile\n     */\n    this.loadCurrentHash = (callback, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const query = '?hash';\n        const link = DOM.getCurrentPath(current);\n        \n        RESTful.read(link + query, callback);\n    };\n    \n    /**\n     * load current modification time of file\n     * @callback\n     * @currentFile\n     */\n    this.loadCurrentTime = (callback, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const query = '?time';\n        const link = DOM.getCurrentPath(current);\n        \n        RESTful.read(link + query, callback);\n    };\n    \n    /**\n     * set size\n     * @currentFile\n     */\n    this.setCurrentSize = (size, currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const sizeElement = DOM.getByDataName('js-size', current);\n        \n        sizeElement.textContent = size;\n    };\n    \n    /**\n     * @currentFile\n     */\n    this.getCurrentMode = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const mode = DOM.getByDataName('js-mode', current);\n        \n        return mode.textContent;\n    };\n    \n    /**\n     * @currentFile\n     */\n    this.getCurrentOwner = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const owner = DOM.getByDataName('js-owner', current);\n        \n        return owner.textContent;\n    };\n    \n    /**\n     * unified way to get current file content\n     *\n     * @param callback\n     * @param currentFile\n     */\n    this.getCurrentData = (callback, currentFile) => {\n        let hash;\n        const Dialog = DOM.Dialog;\n        const Info = DOM.CurrentInfo;\n        const current = currentFile || DOM.getCurrentFile();\n        const path = DOM.getCurrentPath(current);\n        const isDir = DOM.isCurrentIsDir(current);\n        \n        const func = (error, data) => {\n            const ONE_MEGABYTE = 1024 * 1024 * 1024;\n            \n            if (!error) {\n                if (itype.object(data))\n                    data = jonny.stringify(data);\n                \n                const length  = data.length;\n                \n                if (hash && length < ONE_MEGABYTE)\n                    DOM.saveDataToStorage(path, data, hash);\n            }\n            \n            callback(error, data);\n        };\n        \n        if (Info.name === '..') {\n            Dialog.alert.noFiles(TITLE);\n            return callback(Error('No files selected!'));\n        }\n        \n        if (isDir)\n            return RESTful.read(path, func);\n        \n        DOM.checkStorageHash(path, (error, equal, hashNew) => {\n            if (error)\n                return callback(error);\n            \n            if (equal)\n                return DOM.getDataFromStorage(path, callback);\n            \n            hash = hashNew;\n            RESTful.read(path, func);\n        });\n    };\n    \n    /**\n     * unified way to save current file content\n     *\n     * @callback - function({data, name}) {}\n     * @currentFile\n     */\n    this.saveCurrentData = (url, data, callback, query = '') => {\n        DOM.RESTful.write(url + query, data, (error) => {\n            !error && DOM.saveDataToStorage(url, data);\n        });\n    };\n    \n    /**\n     * unified way to get RefreshButton\n     */\n    this.getRefreshButton = (panel) => {\n        const currentPanel = panel || DOM.getPanel();\n        const refresh = DOM.getByDataName('js-refresh', currentPanel);\n        \n        return refresh;\n    };\n    \n    this.setCurrentByName = (name) => {\n        const current = DOM.getCurrentByName(name);\n        return DOM.setCurrentFile(current);\n    };\n    \n    /**\n     * private function thet unset currentfile\n     *\n     * @currentFile\n     */\n    function unsetCurrentFile(currentFile) {\n        const is = DOM.isCurrentFile(currentFile);\n        \n        if (!is)\n            return;\n        \n        currentFile.classList.remove(CURRENT_FILE);\n    }\n    \n    /**\n     * unified way to set current file\n     */\n    this.setCurrentFile = (currentFile, options) => {\n        const o = options;\n        const CENTER = true;\n        const currentFileWas = DOM.getCurrentFile();\n        \n        if (!currentFile)\n            return DOM;\n        \n        let pathWas = '';\n        \n        if (currentFileWas) {\n            pathWas = DOM.getCurrentDirPath();\n            unsetCurrentFile(currentFileWas);\n        }\n        \n        currentFile.classList.add(CURRENT_FILE);\n        \n        let path = DOM.getCurrentDirPath();\n        \n        const name = CloudCmd.config('name');\n        if (path !== pathWas) {\n            DOM.setTitle(getTitle({\n                name,\n                path,\n            }));\n            \n            /* history could be present\n             * but it should be false\n             * to prevent default behavior\n             */\n            if (!o || o.history !== false) {\n                const historyPath = path === '/' ? path : FS + path;\n                DOM.setHistory(historyPath, null, historyPath);\n            }\n        }\n        \n        /* scrolling to current file */\n        DOM.scrollIntoViewIfNeeded(currentFile, CENTER);\n        \n        CloudCmd.emit('current-file', currentFile);\n        CloudCmd.emit('current-path', path);\n        CloudCmd.emit('current-name', DOM.getCurrentName(currentFile));\n        \n        return DOM;\n    };\n    \n    /*\n      * set current file by position\n      *\n      * @param layer    - element\n      * @param          - position {x, y}\n      */\n    this.getCurrentByPosition = ({x, y}) => {\n        const element = document.elementFromPoint(x, y);\n        \n        const getEl = (el) => {\n            const {tagName} = el;\n            const isChild = /A|SPAN|LI/.test(tagName);\n            \n            if (!isChild)\n                return null;\n            \n            if (tagName === 'A')\n                return el.parentElement.parentElement;\n            \n            if (tagName === 'SPAN')\n                return el.parentElement;\n            \n            return el;\n        };\n        \n        const el = getEl(element);\n        \n        if (el && el.tagName !== 'LI')\n            return null;\n        \n        return el;\n    };\n    \n    /**\n     * select current file\n     * @param currentFile\n     */\n    this.selectFile = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        \n        current.classList.add(SELECTED_FILE);\n        \n        return Cmd;\n    };\n    \n    this.unselectFile = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        \n        current.classList.remove(SELECTED_FILE);\n        \n        return Cmd;\n    };\n    \n    this.toggleSelectedFile = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const name = DOM.getCurrentName(current);\n        \n        if (name === '..')\n            return Cmd;\n        \n        current.classList.toggle(SELECTED_FILE);\n        \n        return Cmd;\n    };\n    \n    this.toggleAllSelectedFiles = () => {\n        DOM.getAllFiles().map(DOM.toggleSelectedFile);\n        \n        return Cmd;\n    };\n    \n    this.selectAllFiles = () => {\n        DOM.getAllFiles().map(DOM.selectFile);\n        \n        return Cmd;\n    };\n    \n    this.getAllFiles = () => {\n        const panel = DOM.getPanel();\n        const files = DOM.getFiles(panel);\n        const name = DOM.getCurrentName(files[0]);\n        \n        const from = (a) => a === '..' ? 1 : 0;\n        const i = from(name);\n        \n        return [...files].slice(i);\n    };\n    \n    /**\n     * open dialog with expand selection\n     */\n    this.expandSelection = () => {\n        const msg = 'expand';\n        const files = CurrentInfo.files;\n        \n        selectByPattern(msg, files);\n    };\n    \n    /**\n     * open dialog with shrink selection\n     */\n    this.shrinkSelection = () => {\n        const msg = 'shrink';\n        const files = CurrentInfo.files;\n       \n        selectByPattern(msg, files);\n    };\n    \n    /**\n     * setting history wrapper\n     */\n    this.setHistory = (data, title, url) => {\n        const ret = window.history;\n        \n        url = CloudCmd.PREFIX + url;\n        \n        if (ret)\n            history.pushState(data, title, url);\n        \n        return ret;\n    };\n    \n    /**\n     * set title or create title element\n     *\n     * @param name\n     */\n    \n    this.setTitle = (name) => {\n        if (!Title)\n            Title = DOM.getByTag('title')[0] ||\n                    DOM.load({\n                        name            : 'title',\n                        innerHTML       : name,\n                        parentElement   : document.head\n                    });\n        \n        Title.textContent = name;\n        \n        return DOM;\n    };\n    \n    /**\n     * current file check\n     *\n     * @param currentFile\n     */\n    this.isCurrentFile = (currentFile) => {\n        if (!currentFile)\n            return false;\n        \n        return DOM.isContainClass(currentFile, CURRENT_FILE);\n    };\n    \n    /**\n     * selected file check\n     *\n     * @param currentFile\n     */\n    this.isSelected = (selected) => {\n        if (!selected)\n            return false;\n        \n        return DOM.isContainClass(selected, SELECTED_FILE);\n    };\n    \n    /**\n     * check is current file is a directory\n     *\n     * @param currentFile\n     */\n    this.isCurrentIsDir = (currentFile) => {\n        const current = currentFile || this.getCurrentFile();\n        const fileType = DOM.getByDataName('js-type', current);\n        const ret = DOM.isContainClass(fileType, 'directory');\n        \n        return ret;\n    };\n    \n    /**\n     * get link from current (or param) file\n     *\n     * @param currentFile - current file by default\n     */\n    this.getCurrentLink = (currentFile) => {\n        const current = currentFile || this.getCurrentFile();\n        const link = DOM.getByTag('a', current);\n        \n        return link[0];\n    };\n    \n    /**\n     * get link from current (or param) file\n     *\n     * @param currentFile - current file by default\n     */\n    this.getCurrentPath = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        const element = DOM.getByTag('a', current)[0];\n        const prefix = CloudCmd.PREFIX;\n        const path = element.getAttribute('href')\n            .replace(RegExp('^' + prefix + FS), '');\n        \n        return path;\n    };\n    \n    /**\n     * get name from current (or param) file\n     *\n     * @param currentFile\n     */\n    this.getCurrentName = (currentFile) => {\n        const current = currentFile || DOM.getCurrentFile();\n        \n        if (!current)\n            return '';\n           \n        const link = DOM.getCurrentLink(current);\n        \n        if (!link)\n            return '';\n            \n        const name = link.title;\n        \n        return name;\n    };\n    \n    this.getFilenames = (files) => {\n        if (!files)\n            throw Error('AllFiles could not be empty');\n        \n        const first = files[0] || DOM.getCurrentFile();\n        const name = DOM.getCurrentName(first);\n        \n        const allFiles = [...files];\n        \n        if (name === '..')\n            allFiles.shift();\n        \n        const names = allFiles.map((current) => {\n            return DOM.getCurrentName(current);\n        });\n        \n        return names;\n    };\n    \n    /**\n     * set name from current (or param) file\n     *\n     * @param name\n     * @param current\n     */\n    this.setCurrentName = (name, current) => {\n        const Info = CurrentInfo;\n        const link = Info.link;\n        const PREFIX = CloudCmd.PREFIX;\n        const dir = PREFIX + FS + Info.dirPath;\n        \n        link.title      = name;\n        link.innerHTML  = Entity.encode(name);\n        link.href       = dir + name;\n        \n        current.setAttribute('data-name', 'js-file-' + name);\n        \n        return link;\n    };\n    \n    /**\n     * check storage hash\n     */\n    this.checkStorageHash = (name, callback) => {\n        const parallel = exec.parallel;\n        const loadHash = DOM.loadCurrentHash;\n        const nameHash = name + '-hash';\n        const getStoreHash = exec.with(Storage.get, nameHash);\n        \n        if (typeof name !== 'string')\n            throw Error('name should be a string!');\n        \n        if (typeof callback !== 'function')\n            throw Error('callback should be a function!');\n        \n        parallel([loadHash, getStoreHash], (error, loadHash, storeHash) => {\n            let equal;\n            const isContain = /error/.test(loadHash);\n            \n            if (isContain)\n                error = loadHash;\n            else if (loadHash === storeHash)\n                equal = true;\n            \n            callback(error, equal, loadHash);\n        });\n    };\n    \n    /**\n     * save data to storage\n     *\n     * @param name\n     * @param data\n     * @param hash\n     * @param callback\n     */\n    this.saveDataToStorage = function(name, data, hash, callback) {\n        const allowed = CloudCmd.config('localStorage');\n        const isDir = DOM.isCurrentIsDir();\n        const nameHash = name + '-hash';\n        const nameData = name + '-data';\n        \n        if (!allowed || isDir)\n            return exec(callback);\n        \n        exec.if(hash, () => {\n            Storage.set(nameHash, hash);\n            Storage.set(nameData, data);\n            \n            exec(callback, hash);\n        }, (callback) => {\n            DOM.loadCurrentHash((error, loadHash) => {\n                hash = loadHash;\n                callback();\n            });\n        });\n    };\n    \n    /**\n     * save data to storage\n     *\n     * @param name\n     * @param data\n     * @param callback\n     */\n    this.getDataFromStorage = (name, callback) => {\n        const nameHash = name + '-hash';\n        const nameData = name + '-data';\n        const allowed = CloudCmd.config('localStorage');\n        const isDir = DOM.isCurrentIsDir();\n        \n        if (!allowed || isDir)\n            return exec(callback);\n        \n        exec.parallel([\n            exec.with(Storage.get, nameData),\n            exec.with(Storage.get, nameHash),\n        ], callback);\n    };\n    \n    this.getFM = () => {\n        return DOM.getPanel().parentElement;\n    };\n    \n    this.getPanelPosition = (panel) => {\n        panel = panel || DOM.getPanel();\n        \n        return panel.dataset.name.replace('js-', '');\n    };\n    \n    /** function getting panel active, or passive\n     * @param options = {active: true}\n     */\n    this.getPanel = (options) => {\n        let files, panel, isLeft;\n        let dataName = 'js-';\n        \n        const current = DOM.getCurrentFile();\n        \n        if (!current) {\n            panel = DOM.getByDataName('js-left');\n        } else {\n            files = current.parentElement,\n            panel = files.parentElement,\n            isLeft = panel.getAttribute('data-name') === 'js-left';\n        }\n        \n        /* if {active : false} getting passive panel */\n        if (options && !options.active) {\n            dataName += isLeft ? 'right' : 'left';\n            panel = DOM.getByDataName(dataName);\n        }\n        \n        /* if two panels showed\n         * then always work with passive\n         * panel\n         */\n        if (window.innerWidth < CloudCmd.MIN_ONE_PANEL_WIDTH)\n            panel = DOM.getByDataName('js-left');\n        \n        if (!panel)\n            throw Error('can not find Active Panel!');\n       \n        return panel;\n    };\n    \n    this.getFiles = (element) => {\n        const files = DOM.getByDataName('js-files', element);\n        return files.children || [];\n    };\n    \n    /**\n     * shows panel right or left (or active)\n     */\n    this.showPanel = (active) => {\n        const panel = DOM.getPanel({active: active});\n        \n        if (!panel)\n            return false;\n        \n        DOM.show(panel);\n        \n        return true;\n    };\n    \n    /**\n     * hides panel right or left (or active)\n     */\n    this.hidePanel = (active) => {\n        const panel = DOM.getPanel({\n            active\n        });\n        \n        if (!panel)\n            return false;\n        \n        return DOM.hide(panel);\n    };\n     \n    /**\n     * remove child of element\n     * @param pChild\n     * @param element\n     */\n    this.remove = (child, element) => {\n        const parent = element || document.body;\n        \n        parent.removeChild(child);\n        \n        return DOM;\n    };\n    \n    /**\n     * remove current file from file table\n     * @param current\n     *\n     */\n    this.deleteCurrent = (current) => {\n        if (!current)\n            Cmd.getCurrentFile();\n        \n        const parent = current && current.parentElement;\n        const name = Cmd.getCurrentName(current);\n        \n        if (current && name !== '..') {\n            const next = current.nextSibling;\n            const prev = current.previousSibling;\n            \n            DOM.setCurrentFile(next || prev);\n            parent.removeChild(current);\n        }\n    };\n    \n    /**\n     * remove selected files from file table\n     * @Selected\n     */\n    this.deleteSelected = (selected) => {\n        selected = selected || DOM.getSelectedFiles();\n        \n        if (!selected)\n            return;\n        \n        selected.map(DOM.deleteCurrent);\n    };\n    \n    /**\n     * rename current file\n     *\n     * @currentFile\n     */\n    this.renameCurrent = (current) => {\n        const Dialog = DOM.Dialog;\n        \n        if (!Cmd.isCurrentFile(current))\n            current = Cmd.getCurrentFile();\n        \n        const from = Cmd.getCurrentName(current);\n        \n        if (from === '..')\n            return Dialog.alert.noFiles(TITLE);\n        \n        const cancel = false;\n        \n        Dialog.prompt(TITLE, 'Rename', from, {cancel}).then((to) => {\n            const isExist = !!DOM.getCurrentByName(to);\n            const dirPath = Cmd.getCurrentDirPath();\n            \n            if (from === to)\n                return;\n            \n            const files = {\n                from : dirPath + from,\n                to : dirPath + to\n            };\n            \n            RESTful.mv(files, (error) => {\n                if (error)\n                    return;\n                \n                DOM.setCurrentName(to, current);\n                Storage.remove(dirPath);\n                \n                if (isExist)\n                    CloudCmd.refresh();\n            });\n        });\n    };\n    \n    /**\n     * unified way to scrollIntoViewIfNeeded\n     * (native suporte by webkit only)\n     * @param element\n     * @param center - to scroll as small as possible param should be false\n     */\n    this.scrollIntoViewIfNeeded = function(element, center = false) {\n        if (!element || !element.scrollIntoViewIfNeeded)\n            return;\n        \n        element.scrollIntoViewIfNeeded(center);\n    };\n    \n    /* scroll on one page */\n    this.scrollByPages = (element, pPages) => {\n        const ret = element && element.scrollByPages && pPages;\n        \n        if (ret)\n            element.scrollByPages(pPages);\n        \n        return ret;\n    };\n    \n    this.changePanel = () => {\n        const Info = CurrentInfo;\n        let panel = DOM.getPanel();\n        \n        CloudCmd.emit('passive-dir', Info.dirPath);\n        \n        const panelPassive = DOM.getPanel({\n            active: false\n        });\n        \n        let name = DOM.getCurrentName();\n        const filesPassive = DOM.getFiles(panelPassive);\n        \n        let dataName = panel.getAttribute('data-name');\n        \n        TabPanel[dataName] = name;\n         \n        panel = panelPassive;\n        dataName = panel.getAttribute('data-name');\n        \n        name = TabPanel[dataName];\n        \n        let files;\n        let current;\n        \n        if (name) {\n            current = DOM.getCurrentByName(name, panel);\n            \n            if (current)\n                files = current.parentElement;\n        }\n        \n        if (!files || !files.parentElement) {\n            current = DOM.getCurrentByName(name, panel);\n            \n            if (!current)\n                current = filesPassive[0];\n        }\n        \n        DOM.setCurrentFile(current, {\n            history: true\n        });\n        \n        CloudCmd.emit('active-dir', Info.dirPath);\n        \n        return DOM;\n    };\n    \n    this.getPackerExt = (type) => {\n        if (type === 'zip')\n            return '.zip';\n        \n        return '.tar.gz';\n    };\n    \n    this.goToDirectory = () => {\n        const msg = 'Go to directory:';\n        const path = CurrentInfo.dirPath;\n        const Dialog = DOM.Dialog;\n        const cancel = false;\n        const setPath = (path) => ({\n            path\n        });\n        \n        Dialog.prompt(TITLE, msg, path, {cancel})\n            .then(setPath)\n            .then(CloudCmd.loadDir);\n    },\n    \n    this.duplicatePanel = () => {\n        const Info = CurrentInfo;\n        const isDir = Info.isDir;\n        const panel = Info.panelPassive;\n        const noCurrent = !Info.isOnePanel;\n        \n        const getPath = (isDir) => {\n            if (isDir)\n                return Info.path;\n            \n            return Info.dirPath;\n        };\n        \n        const path = getPath(isDir);\n        \n        CloudCmd.loadDir({\n            path,\n            panel,\n            noCurrent,\n        });\n    };\n    \n    this.swapPanels = () => {\n        const Info = CurrentInfo;\n        const {panel} = Info;\n        const {files} = Info;\n        const {element} = Info;\n        \n        const panelPassive = Info.panelPassive;\n        \n        const dirPath = DOM.getCurrentDirPath();\n        const dirPathPassive = DOM.getNotCurrentDirPath();\n        \n        let currentIndex = files.indexOf(element);\n        \n        CloudCmd.loadDir({\n            path: dirPath,\n            panel: panelPassive,\n            noCurrent: true\n        });\n        \n        CloudCmd.loadDir({\n            path: dirPathPassive,\n            panel: panel\n        }, () => {\n            const files = Info.files;\n            const length = files.length - 1;\n            \n            if (currentIndex > length)\n                currentIndex = length;\n            \n            const el = files[currentIndex];\n            \n            DOM.setCurrentFile(el);\n        });\n    };\n    \n    this.CurrentInfo = CurrentInfo,\n    \n    this.updateCurrentInfo = (currentFile) => {\n        const info = Cmd.CurrentInfo;\n        const current = currentFile || Cmd.getCurrentFile();\n        const files = current.parentElement;\n        const panel = files.parentElement;\n        \n        const panelPassive = Cmd.getPanel({\n            active: false\n        });\n        \n        const filesPassive = DOM.getFiles(panelPassive);\n        const name = Cmd.getCurrentName(current);\n        \n        info.dir            = Cmd.getCurrentDirName();\n        info.dirPath        = Cmd.getCurrentDirPath();\n        info.parentDirPath  = Cmd.getParentDirPath();\n        info.element        = current;\n        info.ext            = Util.getExt(name);\n        info.files          = [...files.children];\n        info.filesPassive   = [...filesPassive];\n        info.first          = files.firstChild;\n        info.getData        = Cmd.getCurrentData;\n        info.last           = files.lastChild;\n        info.link           = Cmd.getCurrentLink(current);\n        info.mode           = Cmd.getCurrentMode(current);\n        info.name           = name;\n        info.path           = Cmd.getCurrentPath(current);\n        info.panel          = panel;\n        info.panelPassive   = panelPassive;\n        info.size           = Cmd.getCurrentSize(current);\n        info.isDir          = Cmd.isCurrentIsDir();\n        info.isSelected     = Cmd.isSelected(current);\n        info.panelPosition  = Cmd.getPanel().dataset.name.replace('js-', '');\n        info.isOnePanel     =\n            info.panel.getAttribute('data-name') ===\n            info.panelPassive.getAttribute('data-name');\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/index.js");
/src/dist-dev/cloudcmd.common.js-84-
##############################################
/src/dist-dev/cloudcmd.common.js-94-"use strict";
/src/dist-dev/cloudcmd.common.js:95:eval("\n\n/* global CloudCmd */\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst rendy = __webpack_require__(/*! rendy */ \"./node_modules/rendy/lib/rendy.js\");\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst {findObjByNameInArr} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst Files = __webpack_require__(/*! ./files */ \"./client/dom/files.js\");\n\nmodule.exports = (name, options, callback = options) => {\n    const {PREFIX, config} = CloudCmd;\n    const o = options;\n    \n    if (o.name && window[o.name])\n        return callback();\n    \n    Files.get('modules', (error, modules) => {\n        const online = config('online') && navigator.onLine;\n        const module = findObjByNameInArr(modules.remote, name);\n        \n        const isArray = itype.array(module.local);\n        const version = module.version;\n        \n        let remoteTmpls, local;\n        if (isArray) {\n            remoteTmpls = module.remote;\n            local       = module.local;\n        } else {\n            remoteTmpls  = [module.remote];\n            local        = [module.local];\n        }\n        \n        const localURL = local.map((url) => {\n            return PREFIX + url;\n        });\n        \n        const remoteURL = remoteTmpls.map((tmpl) => {\n            return rendy(tmpl, {\n                version: version\n            });\n        });\n        \n        const on = funcON(localURL, remoteURL, callback);\n        const off = funcOFF(localURL, callback);\n        \n        exec.if(online, on, off);\n    });\n};\n\nfunction funcOFF(local, callback) {\n    return () => {\n        load.parallel(local, callback);\n    };\n}\n\nfunction funcON (local, remote,callback) {\n    return () => {\n        load.parallel(remote, (error) => {\n            if (error)\n                return funcOFF();\n            \n            callback();\n        });\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/load-remote.js");
/src/dist-dev/cloudcmd.common.js-96-
##############################################
/src/dist-dev/cloudcmd.common.js-106-"use strict";
/src/dist-dev/cloudcmd.common.js:107:eval("\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst Events = __webpack_require__(/*! ./events */ \"./client/dom/events.js\");\n\nconst {getExt} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nmodule.exports = load;\nmodule.exports.getIdBySrc = getIdBySrc;\nmodule.exports.ext = ext;\n\n/**\n * Функция создаёт элемент и загружает файл с src.\n *\n * @param params = {\n * name, - название тэга\n * src', - путь к файлу\n * func, - обьект, содержаий одну из функций\n *          или сразу две onload и onerror\n *          {onload: function() {}, onerror: function();}\n * style,\n * id,\n * element,\n * async, - true by default\n * inner: 'id{color:red, },\n * class,\n * notAppend - false by default\n *\n */\nfunction load(params) {\n    const {\n        src,\n        id = getIdBySrc(params.src),\n        func,\n        name,\n        async,\n        inner,\n        style,\n        parent = document.body,\n        className,\n        attribute,\n        notAppend,\n    } = params;\n    \n    let element = document.getElementById(id);\n    \n    if (element) {\n        exec(func);\n        return element;\n    }\n    \n    element = document.createElement(name);\n    \n    const funcError = () => {\n        const msg = `file ${src} could not be loaded`;\n        const error = new Error(msg);\n        \n        parent.removeChild(element);\n        \n        Images.show.error(msg);\n        \n        const callback = func && func.onerror || func.onload || func;\n        \n        exec(callback, error);\n    };\n    \n    const funcLoad = () => {\n        const callback = func && func.onload || func;\n        \n        Events.remove('error', element, funcError);\n        \n        exec(callback);\n    };\n    \n    if (/^(script|link)$/.test(name))\n        Events.addOnce('load', element, funcLoad)\n            .addError(element, funcError);\n    \n    if (id)\n        element.id = id;\n    \n    if (className)\n        element.className = className;\n    \n    if (src) {\n        if (name !== 'link') {\n            element.src = src;\n        } else {\n            element.href = src;\n            element.rel = 'stylesheet';\n        }\n    }\n    \n    if (attribute) {\n        const type = itype(attribute);\n        \n        switch(type) {\n        case 'string':\n            element.setAttribute(attribute, '');\n            break;\n        \n        case 'object':\n            Object.keys(attribute).forEach((name) => {\n                element.setAttribute(name, attribute[name]);\n            });\n            break;\n        }\n    }\n    \n    if (style)\n        element.style.cssText = style;\n    \n    if (async && name === 'script' || async === undefined)\n        element.async = true;\n    \n    if (!notAppend)\n        parent.appendChild(element);\n    \n    if (inner)\n        element.innerHTML = inner;\n    \n    return element;\n}\n\n/**\n * Function gets id by src\n * @param src\n *\n * Example: http://domain.com/1.js -> 1_js\n */\nfunction getIdBySrc(src) {\n    const isStr = itype.string(src);\n    \n    if (!isStr)\n        return;\n    \n    if (~src.indexOf(':'))\n        src += '-join';\n    \n    const num = src.lastIndexOf('/') + 1;\n    const sub = src.substr(src, num);\n    const id = src\n        .replace(sub, '')\n        .replace(/\\./g, '-');\n    \n    return id;\n}\n\n/**\n * load file countent via ajax\n *\n * @param params\n */\nmodule.exports.ajax = (params) => {\n    const p = params;\n    const isObject = itype.object(p.data);\n    const isArray = itype.array(p.data);\n    const isArrayBuf = itype(p.data) === 'arraybuffer';\n    const type = p.type || p.method || 'GET';\n    const headers = p.headers || {};\n    const xhr = new XMLHttpRequest();\n    \n    xhr.open(type, p.url, true);\n    \n    Object.keys(headers).forEach((name) => {\n        const value = headers[name];\n        xhr.setRequestHeader(name, value);\n    });\n    \n    if (p.responseType)\n        xhr.responseType = p.responseType;\n    \n    let data;\n    if (!isArrayBuf && isObject || isArray)\n        data = jonny.stringify(p.data);\n    else\n        data = p.data;\n    \n    xhr.onreadystatechange = (event) => {\n        const xhr = event.target;\n        const OK  = 200;\n        \n        if (xhr.readyState !== xhr.DONE)\n            return;\n        \n        Images.clearProgress();\n        \n        const TYPE_JSON = 'application/json';\n        const type        = xhr.getResponseHeader('content-type');\n        \n        if (xhr.status !== OK)\n            return exec(p.error, xhr);\n        \n        const notText = p.dataType !== 'text';\n        const isContain = ~type.indexOf(TYPE_JSON);\n        \n        let data = xhr.response;\n        if (type && isContain && notText)\n            data = jonny.parse(xhr.response) || xhr.response;\n            \n        exec(p.success, data, xhr.statusText, xhr);\n    };\n    \n    xhr.send(data);\n};\n\nmodule.exports.put = (url, body) => {\n    const emitter = Emitify();\n    const xhr = new XMLHttpRequest();\n    \n    url = encodeURI(url)\n        .replace('#', '%23');\n    \n    xhr.open('put', url, true);\n    \n    xhr.upload.onprogress = (event) => {\n        if (!event.lengthComputable)\n            return;\n        \n        const percent = (event.loaded / event.total) * 100;\n        const count   = Math.round(percent);\n        \n        emitter.emit('progress', count);\n    };\n    \n    xhr.onreadystatechange = () => {\n        const over = xhr.readyState === xhr.DONE;\n        const OK = 200;\n        \n        if (!over)\n            return;\n        \n        if (xhr.status === OK)\n            return emitter.emit('end');\n        \n        const error = Error(xhr.responseText);\n        emitter.emit('error', error);\n    };\n    \n    xhr.send(body);\n    \n    return emitter;\n};\n\nfunction ext(src, func) {\n    switch (getExt(src)) {\n    case '.js':\n        return load.js(src, func);\n    \n    case '.css':\n        return load.css(src, func);\n    \n    default:\n        return load({\n            src,\n            func,\n        });\n    }\n}\n\n/**\n * create elements and load them to DOM-tree\n * one-by-one\n *\n * @param params\n * @param callback\n */\nload.series = (params, callback) => {\n    if (!params)\n        return load;\n    \n    const funcs = params\n        .map((url) => ext.bind(null, url))\n        .concat(callback);\n    \n    exec.series(funcs);\n    \n    return load;\n};\n\n/**\n * improve callback of funcs so\n * we pop number of function and\n * if it's last we call pCallBack\n *\n * @param params\n * @param callback - onload function\n */\nload.parallel = (params, callback) => {\n    if (!params)\n        return load;\n    \n    const funcs = params.map((url) => {\n        return ext.bind(null, url);\n    });\n    \n    exec.parallel(funcs, callback);\n    \n    return load;\n};\n\n/**\n * Функция загружает js-файл\n *\n * @param src\n * @param func\n */\nload.js = (src, func) => {\n    const name = 'script';\n    \n    return load({\n        name,\n        src,\n        func,\n    });\n},\n\nload.css = (src, func) => {\n    const name = 'link';\n    const {head:parent} = document;\n    \n    return load({\n        name,\n        src,\n        parent,\n        func\n    });\n};\n\n/**\n * Функция создаёт елемент style и записывает туда стили\n * @param params - структура параметров, заполняеться таким\n * образом: {src: ' ',func: '', id: '', element: '', inner: ''}\n * все параметры опциональны\n */\nload.style = (params) => {\n    const {\n        id,\n        src,\n        name = 'style',\n        func,\n        inner,\n        parent = document.head,\n        element,\n    } = params;\n    \n    return load({\n        id,\n        src,\n        func,\n        name,\n        inner,\n        parent,\n        element,\n    });\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/load.js");
/src/dist-dev/cloudcmd.common.js-108-
##############################################
/src/dist-dev/cloudcmd.common.js-118-"use strict";
/src/dist-dev/cloudcmd.common.js:119:eval("\n\n/* global CloudCmd, DOM */\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\n\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nmodule.exports = new RESTful();\n\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\n\nfunction RESTful() {\n    this.delete = (url, data, callback) => {\n        const isFunc = itype.function(data);\n        \n        if (!callback && isFunc) {\n            callback = data;\n            data = null;\n        }\n        \n        sendRequest({\n            method      : 'DELETE',\n            url         : FS + url,\n            data,\n            callback,\n            imgPosition : { top: !!data }\n        });\n    };\n    \n    this.patch = (url, data, callback) => {\n        const isFunc = itype.function(data);\n        \n        if (!callback && isFunc) {\n            callback = data;\n            data = null;\n        }\n        \n        const imgPosition = {\n            top: true\n        };\n        \n        sendRequest({\n            method: 'PATCH',\n            url: FS + url,\n            data,\n            callback,\n            imgPosition,\n        });\n    };\n    \n    this.write = (url, data, callback) => {\n        const isFunc = itype.function(data);\n        \n        if (!callback && isFunc) {\n            callback    = data;\n            data        = null;\n        }\n        \n        sendRequest({\n            method: 'PUT',\n            url: FS + url,\n            data,\n            callback,\n            imgPosition : { top: true }\n        });\n    };\n    \n    this.read = (url, dataType, callback) => {\n        const isQuery = /\\?/.test(url);\n        const isBeautify = /\\?beautify$/.test(url);\n        const isMinify = /\\?minify$/.test(url);\n        const notLog = !isQuery || isBeautify || isMinify;\n        const isFunc = itype.function(dataType);\n        \n        if (!callback && isFunc) {\n            callback = dataType;\n            dataType = 'text';\n        }\n        \n        sendRequest({\n            method: 'GET',\n            url: FS + url,\n            callback,\n            notLog,\n            dataType,\n        });\n    };\n    \n    this.cp = (data, callback) => {\n        sendRequest({\n            method: 'PUT',\n            url: '/cp',\n            data,\n            callback,\n            imgPosition : { top: true }\n        });\n    };\n    \n    this.pack = (data, callback) => {\n        sendRequest({\n            method      : 'PUT',\n            url         : '/pack',\n            data,\n            callback,\n        });\n    };\n    \n    this.extract = function(data, callback) {\n        sendRequest({\n            method      : 'PUT',\n            url         : '/extract',\n            data        : data,\n            callback    : callback\n        });\n    };\n    \n    this.mv = function(data, callback) {\n        sendRequest({\n            method      : 'PUT',\n            url         : '/mv',\n            data        : data,\n            callback    : callback,\n            imgPosition : { top: true }\n        });\n    };\n    \n    this.Config = {\n        read:   function(callback) {\n            sendRequest({\n                method      : 'GET',\n                url         : '/config',\n                callback    : callback,\n                imgPosition : { top: true },\n                notLog      : true\n            });\n        },\n        \n        write:  function(data, callback) {\n            sendRequest({\n                method      : 'PATCH',\n                url         : '/config',\n                data        : data,\n                callback    : callback,\n                imgPosition : { top: true }\n            });\n        }\n    };\n    \n    this.Markdown   = {\n        read    : function(url, callback) {\n            sendRequest({\n                method      : 'GET',\n                url         : '/markdown' + url,\n                callback    : callback,\n                imgPosition : { top: true },\n                notLog      : true\n            });\n        },\n        \n        render  : function(data, callback) {\n            sendRequest({\n                method      : 'PUT',\n                url         : '/markdown',\n                data        : data,\n                callback    : callback,\n                imgPosition : { top: true },\n                notLog      : true\n            });\n        }\n    };\n    \n    function sendRequest(params) {\n        const p = params;\n        const prefixUrl = CloudCmd.PREFIX_URL;\n        \n        p.url = prefixUrl + p.url;\n        p.url = encodeURI(p.url);\n        \n        /*\n         * if we send ajax request -\n         * no need in hash so we escape #\n         */\n        p.url = p.url.replace('#', '%23');\n        \n        load.ajax({\n            method      : p.method,\n            url         : p.url,\n            data        : p.data,\n            dataType    : p.dataType,\n            error       : (jqXHR) => {\n                const response = jqXHR.responseText;\n                const statusText = jqXHR.statusText;\n                const status = jqXHR.status;\n                const text = status === 404 ? response : statusText;\n                \n                Images.show.error(text);\n                setTimeout(() => {\n                    DOM.Dialog.alert(CloudCmd.TITLE, text);\n                }, 100);\n                \n                p.callback(Error(text));\n            },\n            success: (data) => {\n                Images.hide();\n                \n                if (!p.notLog)\n                    CloudCmd.log(data);\n                \n                p.callback(null, data);\n            }\n        });\n    }\n}\n\n\n//# sourceURL=file://cloudcmd/client/dom/rest.js");
/src/dist-dev/cloudcmd.common.js-120-
##############################################
/src/dist-dev/cloudcmd.common.js-130-"use strict";
/src/dist-dev/cloudcmd.common.js:131:eval("\n\n/* global DOM */\n\nlet SelectType = '*.*';\nconst TITLE = 'Cloud Commander';\n\nconst {getRegExp} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nmodule.exports = (msg, files) => {\n    const allMsg = `Specify file type for ${msg} selection`;\n    const cancel = false;\n    const {Dialog} = DOM;\n    \n    Dialog.prompt(TITLE, allMsg, SelectType, {cancel}).then((type) => {\n        SelectType = type;\n        \n        const regExp = getRegExp(type);\n        \n        if (!files)\n            return;\n        \n        let matches = 0;\n        \n        files.forEach((current) => {\n            const name = DOM.getCurrentName(current);\n             \n            if (name === '..')\n                return;\n            \n            const isMatch = regExp.test(name);\n            \n            if (!isMatch)\n                return;\n            \n            ++matches;\n            \n            let isSelected = DOM.isSelected(current);\n            const shouldSel = msg === 'expand';\n             \n            if (shouldSel)\n                isSelected = !isSelected;\n            \n            if (isSelected)\n                DOM.toggleSelectedFile(current);\n        });\n        \n        if (!matches)\n            Dialog.alert('Select Files', 'No matches found!');\n    });\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/select-by-pattern.js");
/src/dist-dev/cloudcmd.common.js-132-
##############################################
/src/dist-dev/cloudcmd.common.js-142-"use strict";
/src/dist-dev/cloudcmd.common.js:143:eval("\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst tryCatch = __webpack_require__(/*! try-catch */ \"./node_modules/try-catch/lib/try-catch.js\");\nconst setItem = localStorage.setItem.bind(localStorage);\n\n/* приватный переключатель возможности работы с кэшем */\nlet Allowed;\n\n/**\n * allow Storage usage\n */\nmodule.exports.setAllowed = (isAllowed) => {\n    Allowed = isAllowed;\n};\n\n/** remove element */\nmodule.exports.remove = (item, callback) => {\n    if (Allowed)\n        localStorage.removeItem(item);\n    \n    exec(callback, null, Allowed);\n    \n    return module.exports;\n};\n\nmodule.exports.removeMatch = (string, callback) => {\n    const reg = RegExp('^' + string + '.*$');\n    const test = (a) => reg.test(a);\n    const remove = (a) => localStorage.removeItem(a);\n    \n    Object.keys(localStorage)\n        .filter(test)\n        .forEach(remove);\n    \n    exec(callback);\n    \n    return module.exports;\n};\n\n/** если доступен localStorage и\n * в нём есть нужная нам директория -\n * записываем данные в него\n */\nmodule.exports.set = (name, data, callback) => {\n    let str, error;\n    \n    if (itype.object(data))\n        str = jonny.stringify(data);\n    \n    if (Allowed && name)\n        [error] = tryCatch(setItem, name, str || data);\n    \n    exec(callback, error);\n    \n    return module.exports;\n},\n\n/** Если доступен Storage принимаем из него данные*/\nmodule.exports.get = (name, callback) => {\n    let ret;\n    \n    if (Allowed)\n        ret = localStorage.getItem(name);\n    \n    exec(callback, null, ret);\n    \n    return module.exports;\n},\n\n/** функция чистит весь кэш для всех каталогов*/\nmodule.exports.clear = (callback) => {\n    const ret = Allowed;\n    \n    if (ret)\n        localStorage.clear();\n    \n    exec(callback, null, ret);\n    \n    return module.exports;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/storage.js");
/src/dist-dev/cloudcmd.common.js-144-
##############################################
/src/dist-dev/cloudcmd.common.js-154-"use strict";
/src/dist-dev/cloudcmd.common.js:155:eval("\n\n/* global CloudCmd */\n\nconst {eachSeries} = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst wraptile = __webpack_require__(/*! wraptile/legacy */ \"./node_modules/wraptile/legacy/index.js\");\n\nconst DOM = __webpack_require__(/*! . */ \"./client/dom/index.js\");\nconst load = __webpack_require__(/*! ./load */ \"./client/dom/load.js\");\nconst Images = __webpack_require__(/*! ./images */ \"./client/dom/images.js\");\n\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nconst onEnd = wraptile(_onEnd);\nconst loadFile = wraptile(_loadFile);\n\nconst {\n    getCurrentDirPath: getPathWhenRootEmpty\n} = DOM;\n\nmodule.exports = (dir, files) => {\n    if (!files) {\n        files = dir;\n        dir = getPathWhenRootEmpty();\n    }\n    \n    const n = files.length;\n    \n    if (!n)\n        return;\n    \n    const array = [...files];\n    const {name} = files[0];\n    \n    eachSeries(array, loadFile(dir, n), onEnd(name));\n};\n\nfunction _onEnd(currentName) {\n    CloudCmd.refresh({\n        currentName\n    });\n}\n\nfunction _loadFile(dir, n, file, callback) {\n    let i = 0;\n    \n    const name = file.name;\n    const path = dir + name;\n    const {PREFIX_URL} = CloudCmd;\n    const api = PREFIX_URL + FS;\n    \n    const percent = (i, n, per = 100) => {\n        return Math.round(i * per / n);\n    };\n    \n    const step = (n) => 100 / n;\n    \n    ++i;\n    \n    load.put(api + path, file)\n        .on('end', callback)\n        .on('progress', (count) => {\n            const max = step(n);\n            const value = (i - 1) * max + percent(count, 100, max);\n            \n            Images.show.load('top');\n            Images.setProgress(Math.round(value));\n        });\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/upload-files.js");
/src/dist-dev/cloudcmd.common.js-156-
##############################################
/src/dist-dev/cloudcmd.common.js-166-"use strict";
/src/dist-dev/cloudcmd.common.js:167:eval("\n\nconst rendy = __webpack_require__(/*! rendy */ \"./node_modules/rendy/lib/rendy.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst store = __webpack_require__(/*! fullstore/legacy */ \"./node_modules/fullstore/legacy/index.js\");\nconst Entity = __webpack_require__(/*! ./entity */ \"./common/entity.js\");\n\nconst getHeaderField = currify(_getHeaderField);\n\n/* КОНСТАНТЫ (общие для клиента и сервера)*/\n\n/* название программы */\nconst NAME = 'Cloud Commander';\nconst FS = '/fs';\n\nconst Path = store();\n\nPath('/');\n\nmodule.exports.FS = FS;\nmodule.exports.apiURL = '/api/v1';\nmodule.exports.MAX_FILE_SIZE = 500 * 1024;\nmodule.exports.Entity = Entity;\nmodule.exports.getHeaderField = getHeaderField;\nmodule.exports.getPathLink = getPathLink;\nmodule.exports.getDotDot = getDotDot;\n\nmodule.exports.formatMsg = (msg, name, status) => {\n    status = status || 'ok';\n    name = name || '';\n    \n    if (name)\n        name = '(\"' + name + '\")';\n    \n    return msg + ': ' + status + name;\n};\n\n/**\n * Функция возвращает заголовок веб страницы\n * @path\n */\nmodule.exports.getTitle = (options) => {\n    options = options || {};\n    \n    const path = options.path || Path();\n    const name = options.name;\n    \n    const array = [\n        name || NAME,\n        path,\n    ];\n    \n    return array\n        .filter(Boolean)\n        .join(' - ');\n};\n\n/** Функция получает адреса каждого каталога в пути\n * возвращаеться массив каталогов\n * @param url -  адрес каталога\n */\nfunction getPathLink(url, prefix, template) {\n    if (!url)\n        throw Error('url could not be empty!');\n    \n    if (!template)\n        throw Error('template could not be empty!');\n    \n    const names = url\n        .split('/')\n        .slice(1, -1);\n    \n    const allNames = ['/'].concat(names);\n    const length = allNames.length - 1;\n    \n    let path = '/';\n    \n    const pathHTML = allNames.map((name, index) => {\n        const isLast = index === length;\n        \n        if (index)\n            path += name + '/';\n        \n        if (index && isLast)\n            return name + '/';\n        \n        const slash = index ? '/' : '';\n        \n        return rendy(template, {\n            path,\n            name,\n            slash,\n            prefix,\n        });\n    }).join('');\n    \n    return pathHTML;\n}\n\n/**\n * Функция строит таблицу файлв из JSON-информации о файлах\n * @param params - информация о файлах\n *\n */\nmodule.exports.buildFromJSON = (params) => {\n    const prefix = params.prefix;\n    const template = params.template;\n    const templateFile = template.file;\n    const templateLink = template.link;\n    const json = params.data;\n    \n    const path = json.path;\n    const files = json.files;\n    \n    const sort = params.sort || 'name';\n    const order = params.order || 'asc';\n    \n    /*\n     * Строим путь каталога в котором мы находимся\n     * со всеми подкаталогами\n     */\n    const htmlPath = getPathLink(path, prefix, template.pathLink);\n    \n    let fileTable = rendy(template.path, {\n        link        : prefix + FS + path,\n        fullPath    : path,\n        path        : htmlPath\n    });\n    \n    const owner = 'owner';\n    const mode = 'mode';\n    \n    const getFieldName = getHeaderField(sort, order);\n    \n    const name = getFieldName('name');\n    const size = getFieldName('size');\n    const date = getFieldName('date');\n    \n    const header = rendy(templateFile, {\n        tag         : 'div',\n        attribute   : 'data-name=\"js-fm-header\" ',\n        className   : 'fm-header',\n        type        : '',\n        name,\n        size,\n        date,\n        owner,\n        mode,\n    });\n    \n    /* сохраняем путь */\n    Path(path);\n    \n    fileTable += header + '<ul data-name=\"js-files\" class=\"files\">';\n    /* Если мы не в корне */\n    if (path !== '/') {\n        const dotDot = getDotDot(path);\n        const link = prefix + FS + dotDot;\n        \n        const linkResult = rendy(template.link, {\n            link,\n            title       : '..',\n            name        : '..'\n        });\n        \n        const dataName = 'data-name=\"js-file-..\" ';\n        const attribute = 'draggable=\"true\" ' + dataName;\n        \n        /* Сохраняем путь к каталогу верхнего уровня*/\n        fileTable += rendy(template.file, {\n            tag         : 'li',\n            attribute,\n            className   : '',\n            type        : 'directory',\n            name        : linkResult,\n            size        : '&lt;dir&gt;',\n            date        : '--.--.----',\n            owner       : '.',\n            mode        : '--- --- ---'\n        });\n    }\n    \n    fileTable += files.map((file) => {\n        const link = prefix + FS + path + file.name;\n        \n        const type = getType(file.size);\n        const size = getSize(file.size);\n        \n        const date = file.date || '--.--.----';\n        const owner = file.owner || 'root';\n        const mode = file.mode;\n        \n        const linkResult = rendy(templateLink, {\n            link,\n            title: file.name,\n            name: Entity.encode(file.name),\n            attribute: getAttribute(file.size)\n        });\n        \n        const dataName = 'data-name=\"js-file-' + file.name + '\" ';\n        const attribute = 'draggable=\"true\" ' + dataName;\n        \n        return rendy(templateFile, {\n            tag: 'li',\n            attribute,\n            className: '',\n            type,\n            name: linkResult,\n            size,\n            date,\n            owner,\n            mode,\n        });\n    }).join('');\n    \n    fileTable += '</ul>';\n    \n    return fileTable;\n};\n\nfunction getType(size) {\n    if (size === 'dir')\n        return 'directory';\n    \n    return 'text-file';\n}\n\nfunction getAttribute(size) {\n    if (size === 'dir')\n        return '';\n    \n    return 'target=\"_blank\" ';\n}\n\nfunction getSize(size) {\n    if (size === 'dir')\n        return '&lt;dir&gt;';\n    \n    return size;\n}\n\nfunction _getHeaderField(sort, order, name) {\n    const arrow = order === 'asc' ?  '↑' : '↓';\n    \n    if (sort !== name)\n        return name;\n    \n    if (sort === 'name' && order === 'asc')\n        return name;\n    \n    return `${name}${arrow}`;\n}\n\nfunction getDotDot(path) {\n    // убираем последний слеш и каталог в котором мы сейчас находимся\n    const lastSlash = path.substr(path, path.lastIndexOf('/'));\n    const dotDot = lastSlash.substr(lastSlash, lastSlash.lastIndexOf('/'));\n    \n    if (!dotDot)\n        return '/';\n    \n    return dotDot;\n}\n\n\n\n//# sourceURL=file://cloudcmd/common/cloudfunc.js");
/src/dist-dev/cloudcmd.common.js-168-
##############################################
/src/dist-dev/cloudcmd.common.js-178-"use strict";
/src/dist-dev/cloudcmd.common.js:179:eval("\n\nconst Entities = {\n    '&nbsp;': ' ',\n    '&lt;': '<',\n    '&gt;': '>',\n};\n\nconst keys = Object.keys(Entities);\n\nmodule.exports.encode = (str) => {\n    keys.forEach((code) => {\n        const char = Entities[code];\n        const reg = RegExp(char, 'g');\n        \n        str = str.replace(reg, code);\n    });\n    \n    return str;\n};\n\nmodule.exports.decode = (str) => {\n    keys.forEach((code) => {\n        const char = Entities[code];\n        const reg = RegExp(code, 'g');\n        \n        str = str.replace(reg, char);\n    });\n    \n    return str;\n};\n\n\n\n//# sourceURL=file://cloudcmd/common/entity.js");
/src/dist-dev/cloudcmd.common.js-180-
##############################################
/src/dist-dev/cloudcmd.common.js-190-"use strict";
/src/dist-dev/cloudcmd.common.js:191:eval("\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nmodule.exports.getStrBigFirst = getStrBigFirst;\nmodule.exports.kebabToCamelCase = kebabToCamelCase;\n\nmodule.exports.escapeRegExp = (str) => {\n    const isStr = typeof str === 'string';\n    \n    if (isStr)\n        str = str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n    \n    return str;\n};\n\n/**\n * get regexp from wild card\n */\nmodule.exports.getRegExp = (wildcard) => {\n    wildcard = wildcard || '*';\n    \n    const escaped = '^' + wildcard // search from start of line\n        .replace('.', '\\\\.')\n        .replace('*', '.*')\n        .replace('?', '.?') + '$'; // search to end of line\n    \n    return RegExp(escaped);\n};\n\nmodule.exports.exec = exec;\n\n/**\n * function gets file extension\n *\n * @param name\n * @return ext\n */\nmodule.exports.getExt = (name) => {\n    const isStr = typeof name === 'string';\n    \n    if (!isStr)\n        return '';\n    \n    const dot = name.lastIndexOf('.');\n    \n    if (~dot)\n        return name.substr(dot);\n    \n    return '';\n};\n\n/**\n * find object by name in arrray\n *\n * @param array\n * @param name\n */\nmodule.exports.findObjByNameInArr = (array, name) => {\n    let ret;\n    \n    if (!Array.isArray(array))\n        throw Error('array should be array!');\n        \n    if (typeof name !== 'string')\n        throw Error('name should be string!');\n    \n    array.some((item) => {\n        let is = item.name === name;\n        const isArray = Array.isArray(item);\n        \n        if (is) {\n            ret = item;\n            return is;\n        }\n        \n        if (!isArray)\n            return is;\n        \n        return item.some((item) => {\n            const is = item.name === name;\n            \n            if (is)\n                ret = item.data;\n            \n            return is;\n        });\n    });\n    \n    return ret;\n};\n\n/**\n * start timer\n * @param name\n */\nmodule.exports.time = (name) => {\n    exec.ifExist(console, 'time', [name]);\n};\n\n/**\n * stop timer\n * @param name\n */\nmodule.exports.timeEnd = (name) => {\n    exec.ifExist(console, 'timeEnd', [name]);\n};\n\nfunction getStrBigFirst(str) {\n    if (!str)\n        throw Error('str could not be empty!');\n    \n    const first = str[0].toUpperCase();\n    \n    return first + str.slice(1);\n}\n\nfunction kebabToCamelCase(str) {\n    if (!str)\n        throw Error('str could not be empty!');\n    \n    return str\n        .split('-')\n        .map(getStrBigFirst)\n        .join('')\n        .replace(/.js$/, '');\n}\n\n\n\n//# sourceURL=file://cloudcmd/common/util.js");
/src/dist-dev/cloudcmd.common.js-192-
##############################################
/src/dist-dev/cloudcmd.common.js-202-"use strict";
/src/dist-dev/cloudcmd.common.js:203:eval("\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nvar tail = function tail(list) {\n    return slice(list, 1);\n};\n\nmodule.exports = apart;\n\nfunction apart(fn) {\n    check(fn);\n\n    var first = tail(arguments);\n\n    return function () {\n        var args = [].concat(_toConsumableArray(first), Array.prototype.slice.call(arguments));\n\n        return fn.apply(undefined, _toConsumableArray(args));\n    };\n}\n\nfunction slice(list, from, to) {\n    return [].slice.call(list, from, to);\n}\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/apart/lib/apart.js");
/src/dist-dev/cloudcmd.common.js-204-
##############################################
/src/dist-dev/cloudcmd.common.js-213-
/src/dist-dev/cloudcmd.common.js:214:eval("module.exports = __webpack_require__(/*! ./lib/currify */ \"./node_modules/currify/legacy/lib/currify.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/currify/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-215-
##############################################
/src/dist-dev/cloudcmd.common.js-225-"use strict";
/src/dist-dev/cloudcmd.common.js:226:eval("\n\nvar f = function f(fn) {\n    return [\n    /*eslint no-unused-vars: 0*/\n    function (a) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d, e) {\n        return fn.apply(undefined, arguments);\n    }];\n};\n\nmodule.exports = function currify(fn) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    check(fn);\n\n    if (args.length >= fn.length) return fn.apply(undefined, args);\n\n    var again = function again() {\n        return currify.apply(undefined, [fn].concat(args, Array.prototype.slice.call(arguments)));\n    };\n\n    var count = fn.length - args.length - 1;\n    var func = f(again)[count];\n\n    return func || again;\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/currify/legacy/lib/currify.js");
/src/dist-dev/cloudcmd.common.js-227-
##############################################
/src/dist-dev/cloudcmd.common.js-237-"use strict";
/src/dist-dev/cloudcmd.common.js:238:eval("\n\nvar Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\n\nmodule.exports = function (entry) {\n    var emitter = Emitify();\n\n    setTimeout(function () {\n        FindIt(emitter, entry);\n    }, 0);\n\n    return emitter;\n};\n\nfunction FindIt(emitter, entry) {\n    if (!(this instanceof FindIt)) return new FindIt(emitter, entry);\n\n    this._dirs = 0;\n    this._first = true;\n\n    this._find(emitter, entry);\n}\n\nFindIt.prototype._find = function (emitter, entry) {\n    var _this = this;\n\n    if (entry.isFile) {\n        emitter.emit('file', entry.fullPath, entry);\n\n        if (this._first) emitter.emit('end');\n\n        return;\n    }\n\n    if (this._first) this._first = false;\n\n    emitter.emit('directory', entry.fullPath, entry);\n\n    ++this._dirs;\n\n    entry.createReader().readEntries(function (entries) {\n        [].forEach.call(entries, function (entry) {\n            _this._find(emitter, entry);\n        });\n\n        --_this._dirs;\n\n        if (!_this._dirs) emitter.emit('end');\n    });\n};\n\n//# sourceURL=file://cloudcmd/node_modules/domfs-findit/legacy/findit.js");
/src/dist-dev/cloudcmd.common.js-239-
##############################################
/src/dist-dev/cloudcmd.common.js-248-
/src/dist-dev/cloudcmd.common.js:249:eval("module.exports = __webpack_require__(/*! ./lib/emitify */ \"./node_modules/emitify/legacy/lib/emitify.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/emitify/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-250-
##############################################
/src/dist-dev/cloudcmd.common.js-260-"use strict";
/src/dist-dev/cloudcmd.common.js:261:eval("\n\nmodule.exports = Emitify;\n\nfunction Emitify() {\n    if (!(this instanceof Emitify)) return new Emitify();\n\n    this._all = {};\n}\n\nEmitify.prototype.on = function (event, callback) {\n    var funcs = this._all[event];\n\n    check(event, callback);\n\n    if (funcs) funcs.push(callback);else this._all[event] = [callback];\n\n    return this;\n};\n\nEmitify.prototype.addListener = Emitify.prototype.on;\n\nEmitify.prototype.once = function (event, callback) {\n    var self = this;\n\n    check(event, callback);\n\n    self.on(event, function fn() {\n        callback.apply(null, arguments);\n        self.off(event, fn);\n    });\n\n    return this;\n};\n\nEmitify.prototype.off = function (event, callback) {\n    var events = this._all[event] || [];\n    var index = events.indexOf(callback);\n\n    check(event, callback);\n\n    while (~index) {\n        events.splice(index, 1);\n        index = events.indexOf(callback);\n    }\n\n    return this;\n};\n\nEmitify.prototype.removeListener = Emitify.prototype.off;\n\nEmitify.prototype.emit = function (event) {\n    var args = [].slice.call(arguments, 1);\n    var funcs = this._all[event];\n\n    checkEvent(event);\n\n    if (!funcs && event === 'error') throw args[0];\n\n    if (!funcs) return this;\n\n    funcs.forEach(function (fn) {\n        fn.apply(null, args);\n    });\n\n    return this;\n};\n\nEmitify.prototype.removeAllListeners = function (event) {\n    checkEvent(event);\n\n    this._all[event] = [];\n\n    return this;\n};\n\nfunction checkEvent(event) {\n    if (typeof event !== 'string') throw Error('event should be string!');\n}\n\nfunction checkFn(callback) {\n    if (typeof callback !== 'function') throw Error('callback should be function!');\n}\n\nfunction check(event, callback) {\n    checkEvent(event);\n    checkFn(callback);\n}\n\n//# sourceURL=file://cloudcmd/node_modules/emitify/legacy/lib/emitify.js");
/src/dist-dev/cloudcmd.common.js-262-
##############################################
/src/dist-dev/cloudcmd.common.js-271-
/src/dist-dev/cloudcmd.common.js:272:eval("(function(global) {\n    'use strict';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports = new ExecProto();\n    else\n        global.exec = new ExecProto();\n        \n    function ExecProto() {\n        var slice = Array.prototype.slice,\n            /**\n             * function do save exec of function\n             * @param callback\n             * @param arg1\n             * ...\n             * @param argN\n             */\n            exec        = function(callback) {\n                var ret,\n                    isFunc  = typeof callback === 'function',\n                    args    = slice.call(arguments, 1);\n               \n                if (isFunc)\n                    ret     = callback.apply(null, args);\n                \n                return ret;\n            };\n        \n        /*\n         * return function that calls callback with arguments\n         */\n        exec.with           =  function(callback) {\n            var slice   = Array.prototype.slice,\n                args    = slice.call(arguments, 1);\n            \n            return function() {\n                var array   = slice.call(arguments), \n                    all     = args.concat(array);\n                \n                return callback.apply(null, all);\n            };\n        };\n         \n         /**\n         * return save exec function\n         * @param callback\n         */\n        exec.ret        = function() {\n            var result,\n                args        = slice.call(arguments);\n            \n            args.unshift(exec);\n            result          = exec.with.apply(null, args);\n            \n            return result;\n        };\n        \n        /**\n         * function do conditional save exec of function\n         * @param condition\n         * @param callback\n         * @param func\n         */\n        exec.if         = function(condition, callback, func) {\n            var ret;\n            \n            if (condition)\n                exec(callback);\n            else\n                exec(func, callback);\n            \n            return ret;\n        };\n        \n        /**\n         * exec function if it exist in object\n         * \n         * @param obj\n         * @param name\n         * @param arg\n         */\n        exec.ifExist                = function(obj, name, arg) {\n            var ret,\n                func    = obj && obj[name];\n            \n            if (func)\n                func    = func.apply(obj, arg);\n            \n            return ret;\n        };\n        \n        exec.parallel   = function(funcs, callback) {\n            var ERROR       = 'could not be empty!',\n                keys        = [],\n                callbackWas = false,\n                arr         = [],\n                obj         = {},\n                count       = 0,\n                countFuncs  = 0,\n                type        = getType(funcs);\n            \n            if (!funcs)\n                throw Error('funcs ' + ERROR);\n            \n            if (!callback)\n                throw Error('callback ' + ERROR);\n            \n            switch(type) {\n            case 'array':\n                countFuncs  = funcs.length;\n                \n                funcs.forEach(function(func, num) {\n                    exec(func, function() {\n                        checkFunc(num, arguments);\n                    });\n                });\n                break;\n            \n            case 'object':\n                keys        = Object.keys(funcs);\n                countFuncs  = keys.length;\n                \n                keys.forEach(function(name) {\n                    var func    = funcs[name];\n                    \n                    exec(func, function() {\n                        checkFunc(name, arguments, obj);\n                    });\n                });\n                break;\n            }\n            \n            function checkFunc(num, data) {\n                var args    = slice.call(data, 1),\n                    isLast  = false,\n                    error   = data[0],\n                    length  = args.length;\n                \n                ++count;\n                \n                isLast = count === countFuncs;\n                \n                if (!error)\n                    if (length >= 2)\n                        arr[num] = args;\n                    else\n                        arr[num] = args[0];\n                \n                if (!callbackWas && (error || isLast)) {\n                    callbackWas = true;\n                    \n                    if (type === 'array')\n                        callback.apply(null, [error].concat(arr));\n                    else\n                        callback(error, arr);\n                }\n            }\n        };\n        \n        /**\n         * load functions thrue callbacks one-by-one\n         * @param funcs {Array} - array of functions\n         */\n        exec.series             = function(funcs, callback) {\n            var fn,\n                i           = funcs.length,\n                check       = function(error) {\n                    var done;\n                    \n                    --i;\n                    \n                    if (!i || error) {\n                        done = true;\n                        exec(callback, error);\n                    }\n                    \n                    return done;\n                };\n            \n            if (!Array.isArray(funcs))\n                throw Error('funcs should be array!');\n            \n            fn = funcs.shift();\n            \n            exec(fn, function(error) {\n                if (!check(error))\n                    exec.series(funcs, callback);\n            });\n        };\n        \n        exec.each               = function(array, iterator, callback) {\n            var listeners = array.map(function(item) {\n                return iterator.bind(null, item);\n            });\n            \n            if (!listeners.length)\n                callback();\n            else\n                exec.parallel(listeners, callback);\n        };\n            \n        exec.eachSeries         = function(array, iterator, callback) {\n            var listeners = array.map(function(item) {\n                return iterator.bind(null, item);\n            });\n            \n            if (typeof callback !== 'function')\n                throw Error('callback should be function');\n            \n            if (!listeners.length)\n                callback();\n            else\n                exec.series(listeners, callback);\n        };\n        \n       /**\n         * function execute param function in\n         * try...catch block\n         * \n         * @param callback\n         */\n        exec.try                = function(callback) {\n            var ret;\n            try {\n                ret = callback();\n            } catch(error) {\n                ret = error;\n            }\n            \n            return ret;\n        };\n        \n        function getType(variable) {\n            var regExp      = new RegExp('\\\\s([a-zA-Z]+)'),\n                str         = {}.toString.call(variable),\n                typeBig     = str.match(regExp)[1],\n                result      = typeBig.toLowerCase();\n            \n            return result;\n        } \n        \n        return exec;\n    }\n})(this);\n\n\n//# sourceURL=file://cloudcmd/node_modules/execon/lib/exec.js");
/src/dist-dev/cloudcmd.common.js-273-
##############################################
/src/dist-dev/cloudcmd.common.js-282-
/src/dist-dev/cloudcmd.common.js:283:eval("module.exports = __webpack_require__(/*! ./lib/for-each-key */ \"./node_modules/for-each-key/legacy/lib/for-each-key.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/for-each-key/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-284-
##############################################
/src/dist-dev/cloudcmd.common.js-294-"use strict";
/src/dist-dev/cloudcmd.common.js:295:eval("\n\nvar setValue = function setValue(fn, obj) {\n    return function (key) {\n        return fn(key, obj[key]);\n    };\n};\n\nmodule.exports = function (fn, obj) {\n    Object.keys(obj).forEach(setValue(fn, obj));\n};\n\n//# sourceURL=file://cloudcmd/node_modules/for-each-key/legacy/lib/for-each-key.js");
/src/dist-dev/cloudcmd.common.js-296-
##############################################
/src/dist-dev/cloudcmd.common.js-305-
/src/dist-dev/cloudcmd.common.js:306:eval("(function(global) {\n    'use strict';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports  = new FormatProto();\n    else\n        global.Format   = new FormatProto();\n        \n    function FormatProto() {\n        this.addSlashToEnd  = function(path) {\n            var length, isSlash;\n            \n            if (path) {\n                length  = path.length - 1;\n                isSlash = path[length] === '/';\n                \n                if (!isSlash)\n                    path += '/';\n            }\n            \n            return path;\n        };\n        \n        /** Функция получает короткие размеры\n         * конвертируя байт в килобайты, мегабойты,\n         * гигайбайты и терабайты\n         * @pSize - размер в байтах\n         */\n        this.size    = function(size) {\n            var isNumber    = typeof size === 'number',\n                l1KB        = 1024,\n                l1MB        = l1KB * l1KB,\n                l1GB        = l1MB * l1KB,\n                l1TB        = l1GB * l1KB,\n                l1PB        = l1TB * l1KB;\n            \n            if (isNumber) {\n                if      (size < l1KB)   size = size + 'b';\n                else if (size < l1MB)   size = (size / l1KB).toFixed(2) + 'kb';\n                else if (size < l1GB)   size = (size / l1MB).toFixed(2) + 'mb';\n                else if (size < l1TB)   size = (size / l1GB).toFixed(2) + 'gb';\n                else if (size < l1PB)   size = (size / l1TB).toFixed(2) + 'tb';\n                else                    size = (size / l1PB).toFixed(2) + 'pb';\n            }\n            \n            return size;\n        };\n        \n        /**\n         * Функция переводит права из цыфрового вида в символьный\n         * @param perms - строка с правами доступа\n         * к файлу в 8-миричной системе\n         */\n        this.permissions = {\n            symbolic: function(perms) {\n                var type, owner, group, all,\n                    is              = typeof perms !== undefined,\n                    permsStr        = '',\n                    permissions     = '';\n                /*\n                    S_IRUSR   0000400   protection: readable by owner\n                    S_IWUSR   0000200   writable by owner\n                    S_IXUSR   0000100   executable by owner\n                    S_IRGRP   0000040   readable by group\n                    S_IWGRP   0000020   writable by group\n                    S_IXGRP   0000010   executable by group\n                    S_IROTH   0000004   readable by all\n                    S_IWOTH   0000002   writable by all\n                    S_IXOTH   0000001   executable by all\n                */\n                \n                if (is) {\n                    permsStr = perms.toString();\n                    /* тип файла */\n                    type = permsStr.charAt(0);\n                    \n                    switch (type - 0) {\n                        case 1: /* обычный файл */\n                            type = '-';\n                            break;\n                        case 2: /* байт-ориентированное (символьное) устройство*/\n                            type = 'c';\n                            break;\n                        case 4: /* каталог */\n                            type = 'd';\n                            break;\n                        default:\n                            type = '-';\n                    }\n                    \n                    /* оставляем последние 3 символа*/\n                    if (permsStr.length > 5)\n                        permsStr = permsStr.substr(3);\n                    else\n                        permsStr = permsStr.substr(2);\n                    \n                    /* Рекомендации гугла советуют вместо string[3]\n                     * использовать string.charAt(3)\n                     */\n                    /*\n                        http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Standards_features#Standards_features\n                        \n                        Always preferred over non-standards featuresFor\n                        maximum portability and compatibility, always\n                        prefer standards features over non-standards\n                        features (e.g., string.charAt(3) over string[3]\n                        and element access with DOM functions instead\n                        of using an application-specific shorthand).\n                    */\n                    /* Переводим в двоичную систему */\n                    owner = (permsStr[0] - 0).toString(2),\n                    group = (permsStr[1] - 0).toString(2),\n                    all   = (permsStr[2] - 0).toString(2),\n                    \n                    /* переводим в символьную систему*/\n                    permissions =\n                                 (owner[0] - 0 > 0 ? 'r' : '-')     +\n                                 (owner[1] - 0 > 0 ? 'w' : '-')     +\n                                 (owner[2] - 0 > 0 ? 'x' : '-')     +\n                                 ' '                                +\n                                 (group[0] - 0 > 0 ? 'r' : '-')     +\n                                 (group[1] - 0 > 0 ? 'w' : '-')     +\n                                 (group[2] - 0 > 0 ? 'x' : '-')     +\n                                 ' '                                +\n                                 (all[0] - 0    > 0 ? 'r' : '-')     +\n                                 (all[1] - 0    > 0 ? 'w' : '-')     +\n                                 (all[2] - 0    > 0 ? 'x' : '-');\n                }\n                \n                return permissions;\n            },\n            \n            /**\n             * Функция конвертирует права доступа к файлам из символьного вида\n             * в цыфровой\n             */\n            numeric: function(perms) {\n                var owner, group, all,\n                    length          = perms && perms.length === 11;\n                \n                if (length) {\n                    owner   = (perms[0]  === 'r' ? 4 : 0) +\n                              (perms[1]  === 'w' ? 2 : 0) +\n                              (perms[2]  === 'x' ? 1 : 0),\n                                \n                    group   = (perms[4]  === 'r' ? 4 : 0) +\n                              (perms[5]  === 'w' ? 2 : 0) +\n                              (perms[6]  === 'x' ? 1 : 0),\n                            \n                    all     = (perms[8]  === 'r' ? 4 : 0) +\n                              (perms[9]  === 'w' ? 2 : 0) +\n                              (perms[10] === 'x' ? 1 : 0);\n                    \n                    /* добавляем 2 цифры до 5 */\n                    perms   = '00' + owner + group + all;\n                }\n                \n                return perms;\n            }\n        };\n    }\n    \n})(this);\n\n\n//# sourceURL=file://cloudcmd/node_modules/format-io/lib/format.js");
/src/dist-dev/cloudcmd.common.js-307-
##############################################
/src/dist-dev/cloudcmd.common.js-316-
/src/dist-dev/cloudcmd.common.js:317:eval("module.exports = __webpack_require__(/*! ./lib/fullstore */ \"./node_modules/fullstore/legacy/lib/fullstore.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/fullstore/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-318-
##############################################
/src/dist-dev/cloudcmd.common.js-328-"use strict";
/src/dist-dev/cloudcmd.common.js:329:eval("\n\nmodule.exports = function (value) {\n    var data = {\n        value: value\n    };\n\n    return function (value) {\n        if (!arguments.length) return data.value;\n\n        data.value = value;\n\n        return value;\n    };\n};\n\n//# sourceURL=file://cloudcmd/node_modules/fullstore/legacy/lib/fullstore.js");
/src/dist-dev/cloudcmd.common.js-330-
##############################################
/src/dist-dev/cloudcmd.common.js-339-
/src/dist-dev/cloudcmd.common.js:340:eval("if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n//# sourceURL=file://cloudcmd/node_modules/inherits/inherits_browser.js");
/src/dist-dev/cloudcmd.common.js-341-
##############################################
/src/dist-dev/cloudcmd.common.js-350-
/src/dist-dev/cloudcmd.common.js:351:eval("module.exports = __webpack_require__(/*! ./lib/itchy */ \"./node_modules/itchy/legacy/lib/itchy.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/itchy/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-352-
##############################################
/src/dist-dev/cloudcmd.common.js-362-"use strict";
/src/dist-dev/cloudcmd.common.js:363:eval("\n\nmodule.exports = function (array, iterator, done) {\n    check(array, iterator, done);\n    \n    var i = -1;\n    var n = array.length;\n    \n    var loop = function (e) {\n       ++i;\n       \n       if (e || i === n)\n           { return done(e); }\n       \n       iterator(array[i], loop);\n    };\n    \n    loop();\n}\n\nfunction check(array, iterator, done) {\n    if (!Array.isArray(array))\n        { throw Error('array should be an array!'); }\n    \n    if (typeof iterator !== 'function')\n        { throw Error('iterator should be a function!'); }\n    \n    if (typeof done !== 'function')\n        { throw Error('done should be a function!'); }\n}\n\n\n\n//# sourceURL=file://cloudcmd/node_modules/itchy/legacy/lib/itchy.js");
/src/dist-dev/cloudcmd.common.js-364-
##############################################
/src/dist-dev/cloudcmd.common.js-373-
/src/dist-dev/cloudcmd.common.js:374:eval("module.exports = __webpack_require__(/*! ./lib/itype */ \"./node_modules/itype/legacy/lib/itype.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/itype/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-375-
##############################################
/src/dist-dev/cloudcmd.common.js-385-"use strict";
/src/dist-dev/cloudcmd.common.js:386:eval("\n\nmodule.exports = new TypeProto();\n\nfunction TypeProto() {\n    /**\n     * get type of variable\n     *\n     * @param variable\n     */\n    function type(variable) {\n        var regExp = /\\s([a-zA-Z]+)/;\n        var str = {}.toString.call(variable);\n        var typeBig = str.match(regExp)[1];\n        var result = typeBig.toLowerCase();\n        \n        return result;\n    }\n    \n    /**\n     * functions check is variable is type of name\n     *\n     * @param variable\n     */\n    function typeOf(name, variable) {\n        return type(variable) === name;\n    }\n    \n    function typeOfSimple(name, variable) {\n        return typeof variable === name;\n    }\n    \n    ['arrayBuffer', 'file', 'array', 'object']\n        .forEach(function (name) {\n            type[name] = typeOf.bind(null, name);\n        });\n    \n    ['null', 'string', 'undefined', 'boolean', 'number', 'function']\n        .forEach(function (name) {\n            type[name] = typeOfSimple.bind(null, name);\n        });\n    \n    return type;\n}\n\n\n\n//# sourceURL=file://cloudcmd/node_modules/itype/legacy/lib/itype.js");
/src/dist-dev/cloudcmd.common.js-387-
##############################################
/src/dist-dev/cloudcmd.common.js-396-
/src/dist-dev/cloudcmd.common.js:397:eval("/* WEBPACK VAR INJECTION */(function(global) {(function(scope) {\n    'use strict';\n    \n    var Scope   = scope.window ? window : global,\n        \n        PREFIX  = '/join';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports  = join;\n    else\n        Scope.join      = join;\n    \n    function join (prefix, names) {\n        var url;\n        \n        if (!names) {\n            names   = prefix;\n            prefix  = PREFIX;\n        }\n        \n        if (!names)\n            throw(Error('names must be array!'));\n        \n        url = prefix + ':' + names.join(':');\n        \n        return url;\n    }\n    \n})(this);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=file://cloudcmd/node_modules/join-io/www/join.js");
/src/dist-dev/cloudcmd.common.js-398-
##############################################
/src/dist-dev/cloudcmd.common.js-407-
/src/dist-dev/cloudcmd.common.js:408:eval("module.exports = __webpack_require__(/*! ./jonny */ \"./node_modules/jonny/legacy/jonny.js\")\n\n\n//# sourceURL=file://cloudcmd/node_modules/jonny/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-409-
##############################################
/src/dist-dev/cloudcmd.common.js-419-"use strict";
/src/dist-dev/cloudcmd.common.js:420:eval("\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar tryCatch = __webpack_require__(/*! try-catch */ \"./node_modules/try-catch/lib/try-catch.js\");\n\nvar parse = JSON.parse,\n    stringify = JSON.stringify;\n\n\nmodule.exports.parse = function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n    }\n\n    var _tryCatch = tryCatch.apply(undefined, [parse].concat(args)),\n        _tryCatch2 = _slicedToArray(_tryCatch, 2),\n        data = _tryCatch2[1];\n\n    return data;\n};\n\nmodule.exports.stringify = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n    }\n\n    var _tryCatch3 = tryCatch.apply(undefined, [stringify].concat(args)),\n        _tryCatch4 = _slicedToArray(_tryCatch3, 2),\n        data = _tryCatch4[1];\n\n    return data;\n};\n\n//# sourceURL=file://cloudcmd/node_modules/jonny/legacy/jonny.js");
/src/dist-dev/cloudcmd.common.js-421-
##############################################
/src/dist-dev/cloudcmd.common.js-430-
/src/dist-dev/cloudcmd.common.js:431:eval("module.exports = __webpack_require__(/*! ./limier */ \"./node_modules/limier/legacy/limier.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/limier/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-432-
##############################################
/src/dist-dev/cloudcmd.common.js-442-"use strict";
/src/dist-dev/cloudcmd.common.js:443:eval("\n\nvar somefilter = __webpack_require__(/*! somefilter/legacy */ \"./node_modules/somefilter/legacy/index.js\");\nvar currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\n\nvar isIncludes = currify(function (str, name) {\n    return name.includes(str);\n});\nvar isEqual = function isEqual(a) {\n    return a && a.length;\n};\nvar limier = somefilter(isEqual, [findByAbr, findByName]);\n\nmodule.exports = function (pattern, list) {\n    check(pattern, list);\n\n    return limier(pattern, list) || [];\n};\n\nfunction findByName(str, names) {\n    return names.filter(isIncludes(str));\n}\n\nfunction findByAbr(str, names) {\n    var regstr = str.split('').join('.*') + '.*';\n\n    var regexp = RegExp('^' + regstr + '$', 'i');\n    var test = regexp.test.bind(regexp);\n\n    return names.filter(test);\n}\n\nfunction check(pattern, list) {\n    if (typeof pattern !== 'string') throw Error('pattern should be string!');\n\n    if (!Array.isArray(list)) throw Error('list should be an array!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/limier/legacy/limier.js");
/src/dist-dev/cloudcmd.common.js-444-
##############################################
/src/dist-dev/cloudcmd.common.js-454-"use strict";
/src/dist-dev/cloudcmd.common.js:455:eval("\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar findit = __webpack_require__(/*! domfs-findit */ \"./node_modules/domfs-findit/legacy/findit.js\");\nvar Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\nvar itchy = __webpack_require__(/*! itchy/legacy */ \"./node_modules/itchy/legacy/index.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nmodule.exports = Philip;\n\ninherits(Philip, Emitify);\n\nfunction Philip(entries, processingFn) {\n    var _this = this;\n\n    if (!(this instanceof Philip)) return new Philip(entries, processingFn);\n\n    if (typeof processingFn !== 'function') throw Error('processingFn should be function!');\n\n    Emitify.call(this);\n\n    var array = Array.isArray(entries) ? entries : [entries];\n\n    this._i = 0;\n    this._n = 0;\n    this._processingFn = processingFn;\n    this._pause = false;\n    this._prev = 0;\n\n    this._find(array, function (files, dirs) {\n        _this._files = files;\n        _this._dirs = dirs;\n        _this._n = files.length + dirs.length;\n        _this._data = {};\n\n        _this._getFiles(files, _this._data, function () {\n            _this._process();\n        });\n    });\n}\n\nPhilip.prototype._process = function () {\n    var _this2 = this;\n\n    var argsLength = this._processingFn.length;\n    var fn = function fn(error) {\n        ++_this2._i;\n\n        if (error) {\n            _this2.emit('error', error);\n            _this2.pause();\n        }\n\n        _this2._process();\n        _this2._progress();\n    };\n\n    var data = void 0;\n    var name = this._dirs.shift();\n    var type = 'directory';\n\n    if (!name) {\n        type = 'file';\n        var el = this._files.shift();\n\n        if (el) {\n            name = el.fullPath;\n            data = this._data[name];\n        }\n    }\n\n    if (!name) return this.emit('end');\n\n    var args = void 0;\n    if (!this._pause) {\n        switch (argsLength) {\n            default:\n                args = [type, name, data];\n                break;\n\n            case 6:\n                args = [type, name, data, this._i, this._n];\n                break;\n        }\n\n        args.push(fn);\n\n        this._processingFn.apply(this, _toConsumableArray(args));\n    }\n};\n\nPhilip.prototype.pause = function () {\n    this._pause = true;\n};\n\nPhilip.prototype.continue = function () {\n    if (this._pause) {\n        this._pause = false;\n        this._process();\n    }\n};\n\nPhilip.prototype.abort = function () {\n    this._files = [];\n    this._dirs = [];\n\n    this._process();\n};\n\nPhilip.prototype._progress = function () {\n    var value = Math.round(this._i * 100 / this._n);\n\n    if (value !== this._prev) {\n        this._prev = value;\n        this.emit('progress', value);\n    }\n};\n\nPhilip.prototype._getFiles = function (files, obj, callback) {\n    var _this3 = this;\n\n    var filesList = files.slice();\n    var current = filesList.shift();\n\n    if (!current) return callback(null, obj);\n\n    current.file(function (file) {\n        var name = current.fullPath;\n\n        obj[name] = file;\n\n        _this3._getFiles(filesList, obj, callback);\n    });\n};\n\nPhilip.prototype._find = function (entries, fn) {\n    var files = [];\n    var dirs = [];\n\n    itchy(entries, function (entry, callback) {\n        var finder = findit(entry);\n\n        finder.on('directory', function (name) {\n            dirs.push(name);\n        });\n\n        finder.on('file', function (name, current) {\n            files.push(current);\n        });\n\n        finder.on('end', function () {\n            callback();\n        });\n    }, function () {\n        fn(files, dirs);\n    });\n};\n\n//# sourceURL=file://cloudcmd/node_modules/philip/legacy/philip.js");
/src/dist-dev/cloudcmd.common.js-456-
##############################################
/src/dist-dev/cloudcmd.common.js-465-
/src/dist-dev/cloudcmd.common.js:466:eval("(function(global) {\n    'use strict';\n    \n    if (typeof module === 'object' && module.exports)\n        module.exports = rendy;\n    else\n        global.rendy = rendy;\n    \n    /**\n     * render template with data\n     *\n     * @param templ\n     * @param data\n     */\n    function rendy(templ, data) {\n        var result  = templ;\n        \n        check(templ, data);\n        \n        Object\n            .keys(data)\n            .forEach(function(param) {\n                var name    = '{{ ' + param + ' }}',\n                    str     = data[param];\n                \n                while(~result.indexOf(name))\n                    result = result.replace(name, str);\n            });\n        \n        if (~result.indexOf('{{'))\n            result = result.replace(/{{.*?}}/g, '');\n        \n        return result;\n    }\n    \n    function check(templ, data) {\n        if (typeof templ !== 'string')\n            throw(Error('template should be string!'));\n        \n        if (typeof data !== 'object')\n            throw(Error('data should be object!'));\n    }\n})(this);\n\n\n//# sourceURL=file://cloudcmd/node_modules/rendy/lib/rendy.js");
/src/dist-dev/cloudcmd.common.js-467-
##############################################
/src/dist-dev/cloudcmd.common.js-476-
/src/dist-dev/cloudcmd.common.js:477:eval("module.exports = __webpack_require__(/*! ./somefilter */ \"./node_modules/somefilter/legacy/somefilter.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/somefilter/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-478-
##############################################
/src/dist-dev/cloudcmd.common.js-488-"use strict";
/src/dist-dev/cloudcmd.common.js:489:eval("\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nvar squad = __webpack_require__(/*! squad/legacy */ \"./node_modules/squad/legacy/index.js\");\nvar apart = __webpack_require__(/*! apart */ \"./node_modules/apart/lib/apart.js\");\n\nvar unary = currify(function (fn, value) {\n    return fn(value);\n});\nvar notEmpty = function notEmpty(value) {\n    return value;\n};\nvar apply = currify(function (args, fn) {\n    return fn.apply(undefined, _toConsumableArray(args));\n});\n\nmodule.exports = somefilter;\n\nfunction somefilter(condition, filters) {\n    if (!filters) {\n        filters = condition;\n        condition = notEmpty;\n    }\n\n    checkAll(condition, filters);\n\n    var storify = store(condition);\n    var process = apart(squad, condition, storify);\n\n    var processingFilters = filters.map(unary(process)).reverse();\n\n    return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        processingFilters.some(apply(args));\n\n        return storify();\n    };\n}\n\nfunction store(condition) {\n    var cache = void 0;\n\n    return function (value) {\n        var result = void 0;\n\n        if (condition(value)) {\n            cache = result = value;\n        } else {\n            result = cache;\n            cache = null;\n        }\n\n        return result;\n    };\n}\n\nfunction checkAll(condition, filters) {\n    if (typeof condition !== 'function') throw Error('condition should be function!');\n\n    if (!Array.isArray(filters)) throw Error('filters should be an array!');\n\n    check('function', filters);\n}\n\nfunction check(type, array) {\n    var getType = function getType(item) {\n        return typeof item === 'undefined' ? 'undefined' : _typeof(item);\n    };\n    var notEqual = function notEqual(a, b) {\n        return a !== b;\n    };\n    var wrong = function wrong(type) {\n        throw Error('fn should be ' + type + '!');\n    };\n\n    var wrongType = apart(wrong, type);\n    var notType = apart(notEqual, type);\n\n    if (!array.length) return wrongType(type);\n\n    array.map(getType).filter(notType).forEach(wrongType);\n}\n\n//# sourceURL=file://cloudcmd/node_modules/somefilter/legacy/somefilter.js");
/src/dist-dev/cloudcmd.common.js-490-
##############################################
/src/dist-dev/cloudcmd.common.js-499-
/src/dist-dev/cloudcmd.common.js:500:eval("module.exports = __webpack_require__(/*! ./squad */ \"./node_modules/squad/legacy/squad.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/squad/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-501-
##############################################
/src/dist-dev/cloudcmd.common.js-511-"use strict";
/src/dist-dev/cloudcmd.common.js:512:eval("\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.exports = function () {\n    for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n        funcs[_key] = arguments[_key];\n    }\n\n    check('function', funcs);\n\n    return function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n        }\n\n        return funcs.reduceRight(apply, args).pop();\n    };\n};\n\nfunction apply(value, fn) {\n    return [fn.apply(undefined, _toConsumableArray(value))];\n}\n\nfunction check(type, array) {\n    var wrongType = partial(wrong, type);\n    var notType = partial(notEqual, type);\n\n    if (!array.length) return wrongType(type);\n\n    array.map(getType).filter(notType).forEach(wrongType);\n}\n\nfunction partial(fn, value) {\n    return fn.bind(null, value);\n}\n\nfunction getType(item) {\n    return typeof item === 'undefined' ? 'undefined' : _typeof(item);\n}\n\nfunction notEqual(a, b) {\n    return a !== b;\n}\n\nfunction wrong(type) {\n    throw Error('fn should be ' + type + '!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/squad/legacy/squad.js");
/src/dist-dev/cloudcmd.common.js-513-
##############################################
/src/dist-dev/cloudcmd.common.js-523-"use strict";
/src/dist-dev/cloudcmd.common.js:524:eval("\n\nmodule.exports = function tryCatch(fn) {\n    var args = [].slice.call(arguments, 1);\n    \n    try {\n        return [null, fn.apply(null, args)];\n    } catch(e) {\n        return [e];\n    }\n};\n\n\n\n//# sourceURL=file://cloudcmd/node_modules/try-catch/lib/try-catch.js");
/src/dist-dev/cloudcmd.common.js-525-
##############################################
/src/dist-dev/cloudcmd.common.js-534-
/src/dist-dev/cloudcmd.common.js:535:eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=file://cloudcmd/node_modules/webpack/buildin/global.js");
/src/dist-dev/cloudcmd.common.js-536-
##############################################
/src/dist-dev/cloudcmd.common.js-545-
/src/dist-dev/cloudcmd.common.js:546:eval("module.exports = __webpack_require__(/*! ./lib/wraptile */ \"./node_modules/wraptile/legacy/lib/wraptile.js\");\n\n\n//# sourceURL=file://cloudcmd/node_modules/wraptile/legacy/index.js");
/src/dist-dev/cloudcmd.common.js-547-
##############################################
/src/dist-dev/cloudcmd.common.js-557-"use strict";
/src/dist-dev/cloudcmd.common.js:558:eval("\n\nvar wrap = function wrap(fn) {\n    for (var _len = arguments.length, a = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        a[_key - 1] = arguments[_key];\n    }\n\n    return function () {\n        for (var _len2 = arguments.length, b = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            b[_key2] = arguments[_key2];\n        }\n\n        return function () {\n            for (var _len3 = arguments.length, c = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                c[_key3] = arguments[_key3];\n            }\n\n            return fn.apply(undefined, a.concat(b, c));\n        };\n    };\n};\n\nmodule.exports = function (fn) {\n    for (var _len4 = arguments.length, a = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        a[_key4 - 1] = arguments[_key4];\n    }\n\n    check(fn);\n\n    return wrap.apply(undefined, [fn].concat(a));\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n//# sourceURL=file://cloudcmd/node_modules/wraptile/legacy/lib/wraptile.js");
/src/dist-dev/cloudcmd.common.js-559-
##############################################
/src/dist-dev/cloudcmd.js-152-"use strict";
/src/dist-dev/cloudcmd.js:153:eval("\n\n/* global Util, DOM */\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\nconst rendy = __webpack_require__(/*! rendy */ \"./node_modules/rendy/lib/rendy.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst Images = __webpack_require__(/*! ./dom/images */ \"./client/dom/images.js\");\nconst join = __webpack_require__(/*! join-io/www/join */ \"./node_modules/join-io/www/join.js\");\nconst jonny = __webpack_require__(/*! jonny/legacy */ \"./node_modules/jonny/legacy/index.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\n\nconst bind = (f, ...a) => () => f(...a);\n\nconst {\n    apiURL,\n    formatMsg,\n    buildFromJSON,\n} = __webpack_require__(/*! ../common/cloudfunc */ \"./common/cloudfunc.js\");\n\n/* global Util, DOM */\n\ninherits(CloudCmdProto, Emitify);\n\nmodule.exports = new CloudCmdProto(Util, DOM);\n\nfunction CloudCmdProto(Util, DOM) {\n    let Key;\n    let Debug;\n    let Listeners;\n    \n    const log = (str) => {\n        if (!Debug)\n            return;\n        \n        console.log(str);\n    };\n    \n    Emitify.call(this);\n    \n    const CloudCmd = this;\n    const Info = DOM.CurrentInfo;\n    const Storage = DOM.Storage;\n    const Files = DOM.Files;\n    \n    this.log = log;\n    this.PREFIX = '';\n    this.PREFIX_URL = '';\n    this.DIRCLIENT = '/dist/';\n    this.DIRCLIENT_MODULES = this.DIRCLIENT + 'modules/';\n    \n    this.MIN_ONE_PANEL_WIDTH    = 1155;\n    this.HOST                   = location.origin ||\n                                  location.protocol + '//' + location.host;\n    \n    const TITLE = 'Cloud Commander';\n    this.TITLE = TITLE;\n    \n    this.sort = {\n        left: 'name',\n        right: 'name',\n    };\n    \n    this.order = {\n        left: 'asc',\n        right: 'asc',\n    };\n    \n    log.enable = () => {\n        Debug = true;\n    };\n    \n    log.disable = () => {\n        Debug = false;\n    };\n    \n    const kebabToCamelCase = Util.kebabToCamelCase;\n    \n    /**\n     * Функция привязываеться ко всем ссылкам и\n     *  загружает содержимое каталогов\n     *\n     * @param params - {\n     *          paramLink - ссылка\n     *          needRefresh - необходимость обязательной загрузки данных с сервера\n     *          panel\n     *      }\n     * @param callback\n     */\n    this.loadDir = (params, callback) => {\n        const p = params;\n        \n        const refresh = p.isRefresh;\n        const panel = p.panel;\n        const history = p.history;\n        const noCurrent = p.noCurrent;\n        const currentName = p.currentName;\n        \n        let panelChanged;\n        if (!noCurrent)\n            if (panel && panel !== Info.panel) {\n                DOM.changePanel();\n                panelChanged = true;\n            }\n        \n        let imgPosition;\n        if (panelChanged || refresh || !history)\n            imgPosition = 'top';\n        \n        Images.show.load(imgPosition, panel);\n        \n        /* загружаем содержимое каталога */\n        ajaxLoad(p.path, {\n            refresh,\n            history,\n            noCurrent,\n            currentName,\n        }, panel, callback);\n    };\n    \n    /**\n     * function load modules\n     * @params = {name, path, func, dobefore, arg}\n     */\n    function loadModule(params) {\n        if (!params)\n            return;\n        \n        let path = params.path;\n        const name = params.name || path && kebabToCamelCase(path);\n        const func = params.func;\n        const funcName = params.funcName;\n        const doBefore = params.dobefore;\n        \n        const isContain = /\\.js/.test(path);\n        \n        if (!isContain)\n            path += '.js';\n        \n        if (CloudCmd[name])\n            return;\n        \n        CloudCmd[name] = (...args) => {\n            const prefix = CloudCmd.PREFIX;\n            const pathFull = prefix + CloudCmd.DIRCLIENT_MODULES + path;\n            \n            exec(doBefore);\n            \n            const done = (error) => {\n                const Proto = CloudCmd[name];\n                \n                if (error || !itype.function(Proto))\n                    return;\n                \n                CloudCmd[name] = applyConstructor(Proto, args);\n            };\n            \n            return DOM.load.js(pathFull, func || done);\n        };\n        \n        CloudCmd[name][funcName] = CloudCmd[name];\n    }\n    \n    /*\n     * apply arguemnts to constructor\n     *\n     * @param constructor\n     * @param args\n     */\n    function applyConstructor(constructor, args) {\n        const F = function () {\n            return constructor.apply(this, args);\n        };\n        \n        F.prototype = constructor.prototype;\n        return new F();\n    }\n    \n    /**\n     * Конструктор CloudClient, который\n     * выполняет весь функционал по\n     * инициализации\n     */\n    this.init = (prefix, config) => {\n        const func = bind(exec.series, [\n            initModules,\n            baseInit,\n            loadPlugins,\n            exec.with(CloudCmd.route, location.hash),\n        ]);\n        \n        const funcBefore  = (callback) => {\n            const src = prefix + '/join:' + [\n                CloudCmd.DIRCLIENT_MODULES + 'polyfill.js',\n                '/modules/domtokenlist-shim/dist/domtokenlist.min.js',\n            ].join(':');\n            \n            DOM.loadJquery(() => {\n                DOM.load.js(src, callback);\n            });\n        };\n        \n        CloudCmd.PREFIX = prefix;\n        CloudCmd.PREFIX_URL = prefix + apiURL;\n        \n        CloudCmd.config = (key) => config[key];\n        CloudCmd.config.if = currify((key, fn, a) => config[key] && fn(a));\n        CloudCmd._config = (key, value) => {\n            /*\n             * should be called from config.js only\n             * after successful update on server\n             */\n            config[key] = value;\n        };\n        \n        DOM.Storage.setAllowed(CloudCmd.config('localStorage'));\n        \n        if (config.onePanelMode)\n            CloudCmd.MIN_ONE_PANEL_WIDTH = Infinity;\n        \n        exec.if(document.body.scrollIntoViewIfNeeded, func, funcBefore);\n    };\n    \n    function loadPlugins(callback) {\n        const prefix = CloudCmd.PREFIX;\n        const plugins = prefix + '/plugins.js';\n        \n        DOM.load.js(plugins, callback);\n    }\n    \n    this.join = (urls) => {\n        const prefix  = CloudCmd.PREFIX;\n        \n        if (!Array.isArray(urls))\n            throw Error('urls should be array!');\n        \n        const noPrefixUrls = urls.map((url) => {\n            return url.replace(prefix, '');\n        });\n        \n        return prefix + join(noPrefixUrls);\n    };\n    \n    this.route = (path) => {\n        const query = path.split('/');\n        \n        if (!path)\n            return;\n        \n        const [kebabModule] = query;\n        const module = kebabToCamelCase(kebabModule.slice(1));\n        \n        const file = query[1];\n        const current = DOM.getCurrentByName(file);\n        \n        if (file && !current) {\n            const msg = formatMsg('set current file', file, 'error');\n            CloudCmd.log(msg);\n            return;\n        }\n        \n        DOM.setCurrentFile(current);\n        \n        CloudCmd.execFromModule(module, 'show');\n    };\n    \n    this.logOut = () => {\n        const url = CloudCmd.PREFIX + '/logout';\n        const error = () => document.location.reload();\n        \n        DOM.load.ajax({url, error});\n    };\n    \n    function initModules(callback) {\n        exec.if(CloudCmd.Key, () => {\n            Key = new CloudCmd.Key();\n            CloudCmd.Key = Key;\n            Key.bind();\n        }, (func) => {\n            /* привязываем клавиши к функциям */\n            const path = 'key.js';\n            \n            loadModule({\n                path,\n                func\n            });\n        });\n        \n        Files.get('modules', (error, modules) => {\n            const showLoad = Images.show.load;\n            \n            const doBefore = {\n                'edit': showLoad,\n                'menu': showLoad,\n            };\n            \n            const load = (name, path, dobefore) => {\n                const isTmpl = path === 'template';\n                const funcName = isTmpl ? 'get' : 'show';\n                \n                loadModule({\n                    name,\n                    path,\n                    dobefore,\n                    funcName,\n                });\n            };\n            \n            if (!modules)\n                modules = [];\n            \n            modules.local.forEach((module) => {\n                load(null, module, doBefore[module]);\n            });\n            \n            callback();\n        });\n    }\n    \n    function baseInit(callback) {\n        const files = DOM.getFiles();\n        \n        CloudCmd.on('current-file', DOM.updateCurrentInfo);\n        \n        /* выделяем строку с первым файлом */\n        if (files)\n            DOM.setCurrentFile(files[0], {\n                // when hash is present\n                // it should be handled with this.route\n                // overwre otherwise\n                history: !location.hash\n            });\n        \n        const dirPath = DOM.getCurrentDirPath();\n        Listeners = CloudCmd.Listeners;\n        Listeners.init();\n        \n        const panels = getPanels();\n        panels.forEach(Listeners.setOnPanel);\n        \n        Listeners.initKeysPanel();\n        \n        if (!CloudCmd.config('dirStorage'))\n            return callback();\n        \n        Storage.get(dirPath, (error, data) => {\n            if (!data) {\n                data = getJSONfromFileTable();\n                Storage.set(dirPath, data);\n            }\n            callback();\n        });\n    }\n    \n    function getPanels() {\n        const panels = ['left'];\n        \n        if (CloudCmd.config('onePanelMode'))\n            return panels;\n        \n        return [\n            ...panels,\n            'right',\n        ];\n    }\n    \n    this.execFromModule = (moduleName, funcName, ...args) => {\n        const obj = CloudCmd[moduleName];\n        const isObj = itype.object(obj);\n        \n        exec.if(isObj, () => {\n            const obj = CloudCmd[moduleName];\n            const func = obj[funcName];\n            \n            func(...args);\n        }, obj);\n    };\n    \n    this.refresh = (options = {}, callback) => {\n        if (!callback && typeof options === 'function') {\n            callback = options;\n            options = {};\n        }\n       \n        const panel = options.panel || Info.panel;\n        const path = DOM.getCurrentDirPath(panel);\n        \n        const isRefresh = true;\n        const history = false;\n        const noCurrent = options ? options.noCurrent : false;\n        const currentName = options.currentName;\n        \n        CloudCmd.loadDir({\n            path,\n            isRefresh,\n            history,\n            panel,\n            noCurrent,\n            currentName,\n        }, callback);\n    };\n    \n    /**\n     * Функция загружает json-данные о Файловой Системе\n     * через ajax-запрос.\n     * @param path - каталог для чтения\n     * @param options\n     * { refresh, history } - необходимость обновить данные о каталоге\n     * @param panel\n     * @param callback\n     *\n     */\n    function ajaxLoad(path, options, panel, callback) {\n        const create = (error, json) => {\n            const RESTful = DOM.RESTful;\n            const name = options.currentName || Info.name;\n            const obj = jonny.parse(json);\n            const isRefresh = options.refresh;\n            const noCurrent = options.noCurrent;\n            \n            if (!isRefresh && json)\n                return createFileTable(obj, panel, options, callback);\n            \n            const position = DOM.getPanelPosition(panel);\n            const sort = CloudCmd.sort[position];\n            const order = CloudCmd.order[position];\n            \n            const query = rendy('?sort={{ sort }}&order={{ order }}', {\n                sort,\n                order,\n            });\n            \n            RESTful.read(path + query, 'json', (error, obj) => {\n                if (error)\n                    return;\n                \n                options.sort = sort;\n                options.order = order;\n                \n                createFileTable(obj, panel, options, () => {\n                    if (isRefresh && !noCurrent)\n                        DOM.setCurrentByName(name);\n                    \n                    exec(callback);\n                });\n                \n                if (!CloudCmd.config('dirStorage'))\n                    return;\n                \n                Storage.set(path, obj);\n            });\n        };\n        \n        if (!options)\n            options    = {};\n        \n        CloudCmd.log('reading dir: \"' + path + '\";');\n        \n        if (!CloudCmd.config('dirStorage'))\n            return create();\n        \n        Storage.get(path, create);\n    }\n    \n    /**\n     * Функция строит файловую таблицу\n     * @param json  - данные о файлах\n     * @param panelParam\n     * @param history\n     * @param callback\n     */\n    function createFileTable(json, panelParam, options, callback) {\n        const {\n            history,\n            noCurrent,\n        } = options;\n        \n        const names = ['file', 'path', 'link', 'pathLink'];\n        \n        Files.get(names, (error, templFile, templPath, templLink, templPathLink) => {\n            const Dialog = DOM.Dialog;\n            const panel = panelParam || DOM.getPanel();\n            \n            const {\n                dir,\n                name,\n            } = Info;\n            \n            if (error)\n                return Dialog.alert(TITLE, error.responseText);\n            \n            const childNodes = panel.childNodes;\n            let i = childNodes.length;\n            \n            while (i--)\n                panel.removeChild(panel.lastChild);\n            \n            panel.innerHTML = buildFromJSON({\n                sort        : options.sort,\n                order       : options.order,\n                data        : json,\n                id          : panel.id,\n                prefix      : CloudCmd.PREFIX,\n                template    : {\n                    file        : templFile,\n                    path        : templPath,\n                    pathLink    : templPathLink,\n                    link        : templLink\n                }\n            });\n            \n            Listeners.setOnPanel(panel);\n            \n            if (!noCurrent) {\n                let current;\n                \n                if (name === '..' && dir !== '/')\n                    current = DOM.getCurrentByName(dir);\n                \n                if (!current)\n                    current = DOM.getFiles(panel)[0];\n                \n                DOM.setCurrentFile(current, {\n                    history: history\n                });\n                \n                CloudCmd.emit('active-dir', Info.dirPath);\n            }\n            \n            exec(callback);\n        });\n    }\n    \n    /**\n     * Функция генерирует JSON из html-таблицы файлов и\n     * используеться при первом заходе в корень\n     */\n    function getJSONfromFileTable() {\n        const path = DOM.getCurrentDirPath();\n        const infoFiles = Info.files || [];\n        \n        const notParent = (current) => {\n            const name = DOM.getCurrentName(current);\n            return name !== '..';\n        };\n        \n        const parse = (current) => {\n            const name = DOM.getCurrentName(current);\n            const size = DOM.getCurrentSize(current);\n            const owner = DOM.getCurrentOwner(current);\n            const mode = DOM.getCurrentMode(current);\n            const date = DOM.getCurrentDate(current);\n            \n            return {\n                name,\n                size,\n                mode,\n                owner,\n                date,\n            };\n        };\n        \n        const files = infoFiles\n            .filter(notParent)\n            .map(parse);\n        \n        const fileTable = {\n            path,\n            files,\n        };\n        \n        return fileTable;\n    }\n    \n    this.goToParentDir = () => {\n        const dir = Info.dir;\n        const {\n            dirPath,\n            parentDirPath,\n        } = Info;\n        \n        if (dirPath === parentDirPath)\n            return;\n        \n        const path = parentDirPath;\n        \n        CloudCmd.loadDir({path}, () => {\n            const {panel} = Info;\n            const current = DOM.getCurrentByName(dir);\n            const first = DOM.getFiles(panel)[0];\n            \n            DOM.setCurrentFile(current || first, {\n                history\n            });\n        });\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/client.js");
/src/dist-dev/cloudcmd.js-154-
##############################################
/src/dist-dev/cloudcmd.js-164-"use strict";
/src/dist-dev/cloudcmd.js:165:eval("\n\n__webpack_require__(/*! ../css/main.css */ \"./css/main.css\");\n__webpack_require__(/*! ../css/nojs.css */ \"./css/nojs.css\");\n__webpack_require__(/*! ../css/columns/name-size-date.css */ \"./css/columns/name-size-date.css\");\n__webpack_require__(/*! ../css/columns/name-size.css */ \"./css/columns/name-size.css\");\n\n// prevent additional loading of exec by spero, remedy, ishtar, salam, omnes\nwindow.exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\n// prevent additional loading of emitify\nwindow.Emitify = __webpack_require__(/*! emitify/legacy */ \"./node_modules/emitify/legacy/index.js\");\n\nmodule.exports = window.CloudCmd = (config) => {\n    window.Promise = window.Promise || __webpack_require__(/*! es6-promise */ \"es6-promise\");\n    window.Util = __webpack_require__(/*! ../common/util */ \"./common/util.js\");\n    window.CloudFunc = __webpack_require__(/*! ../common/cloudfunc */ \"./common/cloudfunc.js\");\n    \n    const DOM = __webpack_require__(/*! ./dom */ \"./client/dom/index.js\");\n    \n    window.DOM = DOM;\n    window.CloudCmd = __webpack_require__(/*! ./client */ \"./client/client.js\");\n    \n    const Dialog = __webpack_require__(/*! ./dom/dialog */ \"./client/dom/dialog.js\");\n    \n    const prefix = getPrefix(config.prefix);\n    const {htmlDialogs} = config;\n    \n    DOM.Dialog = Dialog(prefix, {\n        htmlDialogs\n    });\n    \n    __webpack_require__(/*! ./listeners */ \"./client/listeners/index.js\");\n    __webpack_require__(/*! ./key */ \"./client/key/index.js\");\n    __webpack_require__(/*! ./sort */ \"./client/sort.js\");\n    \n    window.CloudCmd.init(prefix, config);\n};\n\nfunction getPrefix(prefix) {\n    if (!prefix)\n        return '';\n   \n    if (!prefix.indexOf('/'))\n        return prefix;\n    \n    return '/' + prefix;\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/cloudcmd.js");
/src/dist-dev/cloudcmd.js-166-
##############################################
/src/dist-dev/cloudcmd.js-176-"use strict";
/src/dist-dev/cloudcmd.js:177:eval("/* global DOM */\n/* global smalltalk */\n\n\n\nmodule.exports = Dialog;\n\nfunction Dialog(prefix, config) {\n    if (!(this instanceof Dialog))\n        return new Dialog(prefix, config);\n    \n    load(config.htmlDialogs);\n    \n    function getJsName(htmlDialogs) {\n        const is = window.Promise;\n        const js = '.min.js';\n        const jsName = is ? js : '.poly' + js;\n        \n        if (!htmlDialogs)\n            return '.native' + jsName;\n        \n        return jsName;\n    }\n    \n    function load(htmlDialogs) {\n        const noop = () => {};\n        const name = 'smalltalk';\n        const dir = '/modules/' + name + '/dist/';\n        const jsName = getJsName(htmlDialogs);\n        \n        const names = [jsName, '.min.css'].map((ext) => {\n            return prefix + dir + name + ext;\n        });\n        \n        DOM.load.parallel(names, noop);\n    }\n    \n    const alert = (title, message) => {\n        return smalltalk.alert(title, message);\n    };\n    \n    this.alert = alert;\n    \n    this.prompt = (title, message, value, options) => {\n        return smalltalk.prompt(title, message, value, options);\n    };\n    \n    this.confirm = (title, message, options) => {\n        return smalltalk.confirm(title, message, options);\n    };\n    \n    this.alert.noFiles = (title) => {\n        return alert(title, 'No files selected!');\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/dom/dialog.js");
/src/dist-dev/cloudcmd.js-178-
##############################################
/src/dist-dev/cloudcmd.js-188-"use strict";
/src/dist-dev/cloudcmd.js:189:eval("/* global CloudCmd, DOM */\n\n\n\nconst Info = DOM.CurrentInfo;\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst Events = __webpack_require__(/*! ../dom/events */ \"./client/dom/events.js\");\nconst Buffer = __webpack_require__(/*! ../dom/buffer */ \"./client/dom/buffer.js\");\nconst KEY = __webpack_require__(/*! ./key */ \"./client/key/key.js\");\nconst vim = __webpack_require__(/*! ./vim */ \"./client/key/vim/index.js\");\nconst setCurrentByChar = __webpack_require__(/*! ./set-current-by-char */ \"./client/key/set-current-by-char.js\");\nconst fullstore = __webpack_require__(/*! fullstore/legacy */ \"./node_modules/fullstore/legacy/index.js\");\nconst Chars = fullstore();\n\nChars([]);\n\nKeyProto.prototype = KEY;\nCloudCmd.Key = KeyProto;\n\nfunction KeyProto() {\n    let Binded;\n    \n    const Key = this;\n    \n    this.isBind = () => {\n        return Binded;\n    };\n    \n    this.setBind = () => {\n        Binded = true;\n    };\n    \n    this.unsetBind = () => {\n        Binded = false;\n    };\n    \n    this.bind = () => {\n        Events.addKey(listener);\n        Binded = true;\n    };\n    \n    function getChar(event) {\n        /*\n          * event.keyIdentifier deprecated in chrome v51\n          * but event.key is absent in chrome <= v51\n          */\n        \n        if (event.key)\n            return event.key;\n        \n        return fromCharCode(event.keyIdentifier);\n    }\n    \n    function listener(event) {\n        const keyCode = event.keyCode;\n        const alt = event.altKey;\n        const ctrl = event.ctrlKey;\n        const shift = event.shiftKey;\n        const meta = event.metaKey;\n        const isBetween = keyCode >= KEY.ZERO && keyCode <= KEY.Z;\n        const isNumpad = /Numpad/.test(event.code);\n        \n        let char = getChar(event);\n        let isSymbol = ~['.', '_', '-', '+', '='].indexOf(char);\n        \n        if (!isSymbol) {\n            isSymbol = getSymbol(shift, keyCode);\n            \n            if (isSymbol)\n                char = isSymbol;\n        }\n        \n        if (!Key.isBind())\n            return;\n        \n        const isVim = CloudCmd.config('vim');\n        \n        if (!isVim && !isNumpad && !alt && !ctrl && !meta && (isBetween || isSymbol))\n            return setCurrentByChar(char, Chars);\n        \n        Chars([]);\n        switchKey(event);\n        \n        if (isVim)\n            vim(char, event);\n    }\n    \n    function getSymbol(shift, keyCode) {\n        switch (keyCode) {\n        case KEY.DOT:\n            return '.';\n        \n        case KEY.HYPHEN:\n            return shift ? '_' : '-';\n        \n        case KEY.EQUAL:\n            return shift ? '+' : '=';\n        }\n    }\n    \n    function fromCharCode(keyIdentifier) {\n        const code = keyIdentifier.substring(2);\n        const hex = parseInt(code, 16);\n        const char = String.fromCharCode(hex);\n        \n        return char;\n    }\n    \n    function switchKey(event) {\n        let i, isSelected, prev, next;\n        let current = Info.element;\n        let dataName;\n        \n        const name = Info.name;\n        \n        const {Operation} = CloudCmd;\n        const panel = Info.panel;\n        const path = Info.path;\n        const isDir = Info.isDir;\n        \n        const keyCode = event.keyCode;\n        const alt = event.altKey;\n        const shift = event.shiftKey;\n        const ctrl = event.ctrlKey;\n        const meta = event.metaKey;\n        const ctrlMeta = ctrl || meta;\n        \n        if (current) {\n            prev = current.previousSibling;\n            next = current.nextSibling;\n        }\n        \n        switch (keyCode) {\n        case Key.TAB:\n            DOM.changePanel();\n            event.preventDefault();\n            break;\n        \n        case Key.INSERT:\n            DOM .toggleSelectedFile(current)\n                .setCurrentFile(next);\n            break;\n        \n        case Key.INSERT_MAC:\n            DOM .toggleSelectedFile(current)\n                .setCurrentFile(next);\n            break;\n        \n        case Key.DELETE:\n            if (shift)\n                Operation.show('delete:silent');\n            else\n                Operation.show('delete');\n            break;\n        \n        case Key.ASTERISK:\n            DOM.toggleAllSelectedFiles(current);\n            break;\n        \n        case Key.PLUS:\n            DOM.expandSelection();\n            event.preventDefault();\n            break;\n        \n        case Key.MINUS:\n            DOM.shrinkSelection();\n            event.preventDefault();\n            break;\n        \n        case Key.F1:\n            CloudCmd.Help.show();\n            event.preventDefault();\n            break;\n        \n        case Key.F2:\n            DOM.renameCurrent(current);\n            break;\n            \n        case Key.F3:\n            if (shift)\n                CloudCmd.Markdown.show(path);\n            else if (ctrlMeta)\n                CloudCmd.sortPanel('name');\n            else\n                CloudCmd.View.show();\n            \n            event.preventDefault();\n            break;\n        \n        case Key.F4:\n            if (shift)\n                CloudCmd.EditFileVim.show();\n            else\n                CloudCmd.EditFile.show();\n            \n            event.preventDefault();\n            break;\n        \n        case Key.F5:\n            if (ctrlMeta)\n                CloudCmd.sortPanel('date');\n            else if (alt)\n                Operation.show('pack');\n            else\n                Operation.show('copy');\n            \n            event.preventDefault();\n            break;\n        \n        case Key.F6:\n            if (ctrlMeta)\n                CloudCmd.sortPanel('size');\n            else\n                Operation.show('move');\n            \n            event.preventDefault();\n            break;\n        \n        case Key.F7:\n            if (shift)\n                DOM.promptNewFile();\n            else\n                DOM.promptNewDir();\n            \n            event.preventDefault();\n            break;\n        \n        case Key.F8:\n            Operation.show('delete');\n            event.preventDefault();\n            break;\n        \n        case Key.F9:\n            if (alt)\n                Operation.show('extract');\n            else\n                CloudCmd.Menu.show();\n            event.preventDefault();\n            break;\n        \n        case Key.F10:\n            CloudCmd.Config.show();\n            event.preventDefault();\n            break;\n        \n        case Key.TRA:\n            event.preventDefault();\n            \n            if (shift)\n                return CloudCmd.Terminal.show();\n            \n            CloudCmd.Konsole.show();\n            break;\n        \n        case KEY.BRACKET_CLOSE:\n            CloudCmd.Konsole.show();\n            event.preventDefault();\n            break;\n        \n        case Key.SPACE:\n            if (!isDir || name === '..')\n                isSelected = true;\n            else\n                isSelected = DOM.isSelected(current);\n            \n            exec.if(isSelected, () => {\n                DOM.toggleSelectedFile(current);\n            }, (callback) => {\n                DOM.loadCurrentSize(callback, current);\n            });\n            \n            event.preventDefault();\n            break;\n        \n        case Key.U:\n            if (ctrlMeta) {\n                DOM.swapPanels();\n                event.preventDefault();\n            }\n            break;\n        \n        /* navigation on file table:        *\n         * in case of pressing button 'up', *\n         * select previous row              */\n        case Key.UP:\n            if (shift)\n                DOM.toggleSelectedFile(current);\n            \n            DOM.setCurrentFile(prev);\n            event.preventDefault();\n            break;\n        \n        /* in case of pressing button 'down', *\n         * select next row                    */\n        case Key.DOWN:\n            if (shift)\n                DOM.toggleSelectedFile(current);\n            \n            DOM.setCurrentFile(next);\n            event.preventDefault();\n            break;\n        \n        case Key.LEFT:\n            if (!alt)\n                return;\n            \n            event.preventDefault();\n            \n            dataName = Info.panel.getAttribute('data-name');\n            \n            if (dataName === 'js-right')\n                DOM.duplicatePanel();\n            \n            break;\n        \n        case Key.RIGHT:\n            if (!alt)\n                return;\n           \n            event.preventDefault();\n            \n            dataName = Info.panel.getAttribute('data-name');\n            \n            if (dataName === 'js-left')\n                DOM.duplicatePanel();\n            \n            break;\n        \n        /* in case of pressing button 'Home',  *\n         * go to top element                   */\n        case Key.HOME:\n            DOM.setCurrentFile(Info.first);\n            event.preventDefault();\n            break;\n        \n        /* in case of pressing button 'End', select last element */\n        case Key.END:\n            DOM.setCurrentFile(Info.last);\n            event.preventDefault();\n            break;\n        \n        /* если нажали клавишу page down проматываем экран */\n        case Key.PAGE_DOWN:\n            DOM.scrollByPages(panel, 1);\n            \n            for (i = 0; i < 30; i++) {\n                if (!current.nextSibling)\n                    break;\n                \n                current = current.nextSibling;\n            }\n            \n            DOM.setCurrentFile(current);\n            event.preventDefault();\n            break;\n        \n        /* если нажали клавишу page up проматываем экран */\n        case Key.PAGE_UP:\n            DOM.scrollByPages(panel, -1);\n            \n            for (i = 0; i < 30; i++) {\n                if (!current.previousSibling)\n                    break;\n                \n                current = current.previousSibling;\n            }\n            \n            DOM.setCurrentFile(current);\n            event.preventDefault();\n            break;\n            \n        /* open directory */\n        case Key.ENTER:\n            if (Info.isDir)\n                CloudCmd.loadDir({\n                    path: path === '/' ? '/' : path + '/'\n                });\n            break;\n            \n        case Key.BACKSPACE:\n            CloudCmd.goToParentDir();\n            event.preventDefault();\n            break;\n        \n        case Key.BACKSLASH:\n            if (ctrlMeta)\n                CloudCmd.loadDir({\n                    path: '/'\n                });\n            break;\n        \n        case Key.A:\n            if (ctrlMeta) {\n                DOM.selectAllFiles();\n                event.preventDefault();\n            }\n            \n            break;\n        \n        case Key.G:\n            if (alt) {\n                DOM.goToDirectory();\n                event.preventDefault();\n            }\n            \n            break;\n        \n        case Key.M:\n            if (ctrlMeta) {\n                CloudCmd.EditNames.show();\n                event.preventDefault();\n            }\n            \n            break;\n        \n        /**\n         * обновляем страницу,\n         * загружаем содержимое каталога\n         * при этом данные берём всегда с\n         * сервера, а не из кэша\n         * (обновляем кэш)\n         */\n        case Key.R:\n            if (ctrlMeta) {\n                CloudCmd.log('reloading page...\\n');\n                CloudCmd.refresh();\n                event.preventDefault();\n            }\n            break;\n        \n        case Key.C:\n            if (ctrlMeta)\n                Buffer.copy();\n            break;\n        \n        case Key.X:\n            if (ctrlMeta)\n                Buffer.cut();\n            break;\n            \n        case Key.V:\n            if (ctrlMeta)\n                Buffer.paste();\n            break;\n        \n        case Key.Z:\n            if (ctrlMeta)\n                Buffer.clear();\n            break;\n        \n        /* чистим хранилище */\n        case Key.D:\n            if (ctrlMeta) {\n                CloudCmd.log('clearing storage...');\n                \n                DOM.Storage.clear(() => {\n                    CloudCmd.log('storage cleared');\n                });\n                \n                event.preventDefault();\n            }\n            break;\n        }\n    }\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/key/index.js");
/src/dist-dev/cloudcmd.js-190-
##############################################
/src/dist-dev/cloudcmd.js-200-"use strict";
/src/dist-dev/cloudcmd.js:201:eval("\n\nmodule.exports = {\n    BACKSPACE   : 8,\n    TAB         : 9,\n    ENTER       : 13,\n    ESC         : 27,\n    \n    SPACE       : 32,\n    PAGE_UP     : 33,\n    PAGE_DOWN   : 34,\n    END         : 35,\n    HOME        : 36,\n    \n    LEFT        : 37,\n    UP          : 38,\n    RIGHT       : 39,\n    DOWN        : 40,\n    \n    INSERT      : 45,\n    DELETE      : 46,\n    \n    ZERO        : 48,\n    \n    SEMICOLON   : 52,\n    \n    COLON       : 54,\n    \n    A           : 65,\n    \n    C           : 67,\n    D           : 68,\n    \n    G           : 71,\n    \n    J           : 74,\n    K           : 75,\n    \n    M           : 77,\n    \n    O           : 79,\n    Q           : 81,\n    R           : 82,\n    S           : 83,\n    T           : 84,\n    U           : 85,\n    \n    V           : 86,\n    \n    X           : 88,\n    \n    Z           : 90,\n    \n    INSERT_MAC  : 96,\n    \n    ASTERISK    : 106,\n    PLUS        : 107,\n    MINUS       : 109,\n    \n    F1          : 112,\n    F2          : 113,\n    F3          : 114,\n    F4          : 115,\n    F5          : 116,\n    F6          : 117,\n    F7          : 118,\n    F8          : 119,\n    F9          : 120,\n    F10         : 121,\n    \n    EQUAL       : 187,\n    HYPHEN      : 189,\n    DOT         : 190,\n    SLASH       : 191,\n    TRA         : 192, /* Typewritten Reverse Apostrophe (`) */\n    BACKSLASH   : 220,\n    \n    BRACKET_CLOSE: 221\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/key/key.js");
/src/dist-dev/cloudcmd.js-202-
##############################################
/src/dist-dev/cloudcmd.js-212-"use strict";
/src/dist-dev/cloudcmd.js:213:eval("/* global DOM */\n\n\n\nconst Info = DOM.CurrentInfo;\nconst {escapeRegExp} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nmodule.exports = function setCurrentByChar(char, charStore) {\n    let firstByName;\n    let skipCount = 0;\n    let setted = false;\n    let i = 0;\n    \n    const escapeChar = escapeRegExp(char);\n    const regExp = new RegExp('^' + escapeChar + '.*$', 'i');\n    const {files} = Info;\n    const chars = charStore();\n    const n = chars.length;\n    \n    while(i < n && char === chars[i])\n        i++;\n    \n    if (!i)\n        charStore([]);\n    \n    const skipN = skipCount = i;\n    \n    charStore(charStore().concat(char));\n    \n    const names = DOM.getFilenames(files);\n    const isTest = (a) => regExp.test(a);\n    const isRoot = (a) => a === '..';\n    const not = (f) => (a) => !f(a);\n    const setCurrent = (name) => {\n        const byName = DOM.getCurrentByName(name);\n        \n        if (!skipCount) {\n            setted = true;\n            DOM.setCurrentFile(byName);\n            return true;\n        } else {\n            if (skipN === skipCount)\n                firstByName = byName;\n            \n            --skipCount;\n        }\n    };\n    \n    names\n        .filter(isTest)\n        .filter(not(isRoot))\n        .some(setCurrent);\n    \n    if (!setted) {\n        DOM.setCurrentFile(firstByName);\n        charStore([char]);\n    }\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/key/set-current-by-char.js");
/src/dist-dev/cloudcmd.js-214-
##############################################
/src/dist-dev/cloudcmd.js-224-"use strict";
/src/dist-dev/cloudcmd.js:225:eval("\n/* global DOM */\n\nconst fullstore = __webpack_require__(/*! fullstore/legacy */ \"./node_modules/fullstore/legacy/index.js\");\nconst limier = __webpack_require__(/*! limier/legacy */ \"./node_modules/limier/legacy/index.js\");\nconst Info = DOM.CurrentInfo;\n\nconst searchStore = fullstore([]);\nconst searchIndex = fullstore(0);\n\nmodule.exports.find = (value) => {\n    const names = Info.files.map(DOM.getCurrentName);\n    const result = limier(value, names);\n    \n    searchStore(result);\n    searchIndex(0);\n    \n    DOM.setCurrentByName(result[0]);\n};\n\nmodule.exports.findNext = () => {\n    const names = searchStore();\n    const index = next(searchIndex(), names.length);\n    \n    searchIndex(index);\n    DOM.setCurrentByName(names[searchIndex()]);\n};\n\nmodule.exports.findPrevious = () => {\n    const names = searchStore();\n    const index = previous(searchIndex(), names.length);\n    \n    searchIndex(index);\n    DOM.setCurrentByName(names[index]);\n};\n\nmodule.exports._next = next;\nmodule.exports._previous = previous;\n\nfunction next(index, length) {\n    if (index === length - 1)\n        return 0;\n    \n    return ++index;\n}\n\nfunction previous(index, length) {\n    if (!index)\n        return length - 1;\n    \n    return --index;\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/key/vim/find.js");
/src/dist-dev/cloudcmd.js-226-
##############################################
/src/dist-dev/cloudcmd.js-236-"use strict";
/src/dist-dev/cloudcmd.js:237:eval("\n/* global CloudCmd, DOM */\n\nconst KEY = __webpack_require__(/*! ../key */ \"./client/key/key.js\");\nconst Info = DOM.CurrentInfo;\nconst Dialog = DOM.Dialog;\n\nconst fullstore = __webpack_require__(/*! fullstore/legacy */ \"./node_modules/fullstore/legacy/index.js\");\nconst store = fullstore('');\nconst visual = fullstore(false);\nconst {\n    find,\n    findNext,\n    findPrevious,\n} = __webpack_require__(/*! ./find */ \"./client/key/vim/find.js\");\n\nconst TITLE = 'Cloud Commander';\n\nconst stopVisual = () => {\n    visual(false);\n};\n\nconst end = () => {\n    store('');\n};\n\nconst rmFirst = (a) => {\n    return a\n        .split('')\n        .slice(1)\n        .join('');\n};\n\nmodule.exports = (key, event) => {\n    const current = Info.element;\n    const keyCode = event.keyCode;\n    const prevStore = store();\n    \n    const value = store(prevStore.concat(key));\n    \n    if (keyCode === KEY.ENTER)\n        return end();\n    \n    if (keyCode === KEY.ESC) {\n        DOM.unselectFiles();\n        visual(false);\n        return end();\n    }\n    \n    if (key === 'j') {\n        move('next', {\n            prevStore,\n            current,\n        });\n        \n        return end();\n    }\n    \n    if (key === 'k') {\n        move('previous', {\n            prevStore,\n            current,\n        });\n        \n        return end();\n    }\n    \n    if (/gg/.test(value)) {\n        move('previous', {\n            current,\n            prevStore,\n            max: Infinity,\n        });\n        \n        return end();\n    }\n    \n    if (key === 'd' && (visual() || prevStore === 'd')) {\n        CloudCmd.Operation.show('delete');\n        stopVisual();\n        return end();\n    }\n    \n    if (key === 'G') {\n        move('next', {\n            current,\n            prevStore,\n            max: Infinity,\n        });\n        \n        return end();\n    }\n    \n    if (key === 'y') {\n        if (!visual())\n            return end();\n        \n        DOM.Buffer.copy();\n        stopVisual();\n        DOM.unselectFiles();\n        return end();\n    }\n    \n    if (/^p$/i.test(key)) {\n        DOM.Buffer.paste();\n        return end();\n    }\n    \n    if (/^v$/i.test(key)) {\n        DOM.toggleSelectedFile(current);\n        visual(!visual());\n        \n        return end();\n    }\n    \n    if (key === '/') {\n        event.preventDefault();\n        \n        Dialog.prompt(TITLE, 'Find', '', {cancel: false})\n            .then(find);\n       \n        return end();\n    }\n    \n    if (key === 'n') {\n        findNext();\n        return end();\n    }\n    \n    if (key === 'N') {\n        findPrevious();\n        return end();\n    }\n};\n\nmodule.exports.selectFile = selectFile;\n\nfunction move(sibling, {max, current, prevStore}) {\n    const isDelete = prevStore[0] === 'd';\n    \n    if (isDelete) {\n        visual(true);\n        prevStore = rmFirst(prevStore);\n    }\n    \n    const n = max || getNumber(prevStore);\n    \n    if (isNaN(n))\n        return;\n    \n    setCurrent({\n        n,\n        current,\n        sibling,\n        visual: visual(),\n    });\n    \n    if (isDelete)\n        CloudCmd.Operation.show('delete');\n}\n\nfunction getNumber(value) {\n    if (!value)\n        return 1;\n    \n    if (value === 'g')\n        return 1;\n    \n    return parseInt(value);\n}\n\nfunction selectFile(current) {\n    const name = DOM.getCurrentName(current);\n    \n    if (name === '..')\n        return;\n    \n    DOM.selectFile(current);\n}\n\nfunction setCurrent({n, current, visual, sibling}) {\n    const select = visual ? selectFile : DOM.unselectFile;\n    \n    select(current);\n    \n    const position = `${sibling}Sibling`;\n    for (let i = 0; i < n; i++) {\n        const next = current[position];\n        \n        if (!next)\n            break;\n        \n        current = next;\n        select(current);\n    }\n    \n    DOM.setCurrentFile(current);\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/key/vim/index.js");
/src/dist-dev/cloudcmd.js-238-
##############################################
/src/dist-dev/cloudcmd.js-248-"use strict";
/src/dist-dev/cloudcmd.js:249:eval("\n\nmodule.exports = (array, item) => {\n    const index = array.indexOf(item);\n    \n    if (!~index)\n        return 0;\n    \n    return index;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/listeners/get-index.js");
/src/dist-dev/cloudcmd.js-250-
##############################################
/src/dist-dev/cloudcmd.js-260-"use strict";
/src/dist-dev/cloudcmd.js:261:eval("\n\nmodule.exports = (indexFrom, indexTo, files) => {\n    if (indexFrom < indexTo)\n        return files.slice(indexFrom, indexTo + 1);\n    \n    if (indexFrom > indexTo)\n        return files.slice(indexTo, indexFrom + 1);\n    \n    return [files[indexFrom]];\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/listeners/get-range.js");
/src/dist-dev/cloudcmd.js-262-
##############################################
/src/dist-dev/cloudcmd.js-272-"use strict";
/src/dist-dev/cloudcmd.js:273:eval("/* global DOM, CloudCmd */\n\n\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst getRange = __webpack_require__(/*! ./get-range */ \"./client/listeners/get-range.js\");\n\nconst getIndex = currify(__webpack_require__(/*! ./get-index */ \"./client/listeners/get-index.js\"));\n\nconst uploadFiles = __webpack_require__(/*! ../dom/upload-files */ \"./client/dom/upload-files.js\");\n\nconst {\n    FS,\n    apiURL\n} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nmodule.exports.init = () => {\n    contextMenu();\n    dragndrop();\n    unload();\n    pop();\n    resize();\n    config();\n    header();\n};\n\nCloudCmd.Listeners = module.exports;\n\nconst unselect = (event) => {\n    const isMac = /Mac/.test(window.navigator.platform);\n    const {\n        shiftKey,\n        metaKey,\n        ctrlKey,\n    } = event;\n    \n    if (shiftKey || isMac && metaKey || ctrlKey)\n        return;\n    \n    DOM.unselectFiles();\n};\n\nconst execAll = currify((funcs, event) => {\n    funcs.forEach((fn) => {\n        fn(event);\n    });\n});\n\nconst Info = DOM.CurrentInfo;\nconst Storage = DOM.Storage;\nconst Events = DOM.Events;\nconst EventsFiles = {\n    mousedown: exec.with(execIfNotUL, setCurrentFileByEvent),\n    click: execAll([\n        onClick,\n        unselect,\n    ]),\n    dragstart: exec.with(execIfNotUL, onDragStart),\n    dblclick: exec.with(execIfNotUL, onDblClick),\n    touchstart: exec.with(execIfNotUL, onTouch)\n};\n\nlet EXT;\n\nfunction header() {\n    const fm = DOM.getFM();\n    const isDataset = (el) => el.dataset;\n    const isPanel = (el) => {\n        return /^js-(left|right)$/.test(el.dataset.name);\n    };\n    \n    Events.addClick(fm, (event) => {\n        const el = event.target;\n        const parent = el.parentElement;\n        \n        if (parent.dataset.name !== 'js-fm-header')\n            return;\n        \n        const name = (el.dataset.name || '')\n            .replace('js-', '');\n        \n        if (!/^(name|size|date)$/.test(name))\n            return;\n        \n        const panel = getPath(el)\n            .filter(isDataset)\n            .filter(isPanel)\n            .pop();\n        \n        CloudCmd.sortPanel(name, panel);\n    });\n}\n\nfunction getPath(el, path = []) {\n    if (!el)\n        return path;\n    \n    return getPath(el.parentElement, path.concat(el));\n}\n\nfunction config() {\n    DOM.Files.get('config', (e, config) => {\n        const type = config && config.packer;\n        EXT = DOM.getPackerExt(type);\n    });\n}\n\nmodule.exports.initKeysPanel = () => {\n    const keysElement = DOM.getById('js-keyspanel');\n    \n    if (!keysElement)\n        return;\n    \n    Events.addClick(keysElement, ({target}) => {\n        const id = target.id;\n        const operation = (name) => {\n            const Operation = CloudCmd.Operation;\n            const fn = Operation.show.bind(null, name);\n            \n            return fn;\n        };\n        \n        const clickFuncs = {\n            'f1'        : CloudCmd.Help.show,\n            'f2'        : DOM.renameCurrent,\n            'f3'        : CloudCmd.View.show,\n            'f4'        : CloudCmd.EditFile.show,\n            'f5'        : operation('copy'),\n            'f6'        : operation('move'),\n            'f7'        : DOM.promptNewDir,\n            'f8'        : operation('delete'),\n            'f9'        : CloudCmd.Menu.show,\n            'f10'       : CloudCmd.Config.show,\n            '~'         : CloudCmd.Konsole.show,\n            'shift~'    : CloudCmd.Terminal.show,\n            'contact'   : CloudCmd.Contact.show,\n        };\n       \n        exec(clickFuncs[id]);\n    });\n};\n\nconst getPanel = (side) => {\n    if (!itype.string(side))\n        return side;\n    \n    return DOM.getByDataName('js-' + side);\n};\n\nmodule.exports.setOnPanel = (side) => {\n    const panel = getPanel(side);\n    \n    const filesElement = DOM.getByDataName('js-files', panel);\n    const pathElement = DOM.getByDataName('js-path', panel);\n    \n    /* ставим загрузку гифа на клик*/\n    Events.addClick(pathElement, getPathListener(panel));\n    Events.add(filesElement, EventsFiles);\n};\n\nfunction getPathListener(panel) {\n    return onPathElementClick.bind(null, panel);\n}\n\nfunction isNoCurrent(panel) {\n    const infoPanel = Info.panel;\n    const namePanel = panel.getAttribute('data-name');\n    const nameInfoPanel = infoPanel.getAttribute('data-name');\n        \n    if (namePanel !== nameInfoPanel)\n        return true;\n    \n    return false;\n}\n\nfunction onPathElementClick(panel, event) {\n    let link, href, url, noCurrent;\n    \n    const prefix = CloudCmd.PREFIX;\n    const element = event.target;\n    const attr = element.getAttribute('data-name');\n    \n    switch (attr) {\n    case 'js-clear-storage':\n        Storage.clear();\n        break;\n    \n    case 'js-refresh':\n        noCurrent = isNoCurrent(panel);\n        \n        CloudCmd.refresh({\n            panel,\n            noCurrent\n        });\n        \n        event.preventDefault();\n        break;\n    \n    case 'js-path-link':\n        url         = CloudCmd.HOST;\n        href        = element.href;\n        link        = href.replace(url, '');\n        /**\n         * browser doesn't replace % -> %25%\n         * do it for him\n         */\n        link        = link.replace('%%', '%25%');\n        link        = decodeURI(link);\n        link        = link.replace(RegExp('^' + prefix + FS), '') || '/';\n        \n        noCurrent   = isNoCurrent(panel);\n        \n        CloudCmd.loadDir({\n            path        : link,\n            isRefresh   : false,\n            panel       : noCurrent ? panel : Info.panel\n        });\n        \n        event.preventDefault();\n    }\n}\n\nfunction execIfNotUL(callback, event) {\n    const {target} = event;\n    const {tagName} = target;\n    \n    if (tagName !== 'UL')\n        callback(event);\n}\n\nfunction onClick(event) {\n    const ctrl = event.ctrlKey;\n    \n    if (!ctrl)\n        event.preventDefault();\n    \n    changePanel(event.target);\n}\n\nfunction toggleSelect(key, files) {\n    const isMac = /Mac/.test(window.navigator.platform);\n    \n    if (!key)\n        throw Error('key should not be undefined!');\n    \n    const [file] = files;\n    \n    if (isMac && key.meta || key.ctrl)\n        return DOM.toggleSelectedFile(file);\n    \n    if (key.shift)\n        return files.forEach(DOM.selectFile);\n}\n\nfunction changePanel(element) {\n    const {panel} = Info;\n    const files = DOM.getByDataName('js-files', panel);\n    const ul = getULElement(element);\n    \n    if (ul !== files)\n        DOM.changePanel();\n}\n\nfunction onDblClick(event) {\n    const current = getLIElement(event.target);\n    const isDir = DOM.isCurrentIsDir(current);\n    const path = DOM.getCurrentPath(current);\n    \n    if (isDir) {\n        CloudCmd.loadDir({\n            path: path === '/' ? '/' : path + '/'\n        });\n        \n        event.preventDefault();\n    }\n}\n\nfunction onTouch(event) {\n    const current = getLIElement(event.target);\n    const isDir = DOM.isCurrentIsDir(current);\n    \n    if (!isDir)\n        return;\n    \n    const isCurrent = DOM.isCurrentFile(current);\n    \n    if (!isCurrent)\n        return;\n    \n    CloudCmd.loadDir({\n        path: DOM.getCurrentPath(current)\n    });\n    \n    event.preventDefault();\n}\n\n/*\n  * download file from browser to desktop\n  * in Chrome (HTML5)\n  */\nfunction onDragStart(event) {\n    const element = getLIElement(event.target);\n    const isDir = Info.isDir;\n    let link = DOM.getCurrentLink(element);\n    let name = DOM.getCurrentName(element);\n    \n    /* if it's directory - adding json extension */\n    if (isDir) {\n        name += EXT;\n        link = document.createElement('a');\n        link.textContent = name;\n        link.href = apiURL + '/pack' + Info.path + EXT;\n    }\n    \n    event.dataTransfer.setData('DownloadURL',\n        'application/octet-stream'  + ':' +\n        name                        + ':' +\n        link);\n}\n\nfunction getLIElement(element) {\n    if (!element)\n        return element;\n    \n    while (element.tagName !== 'LI')\n        element = element.parentElement;\n    \n    return element;\n}\n\nfunction getULElement(element) {\n    while (element.tagName !== 'UL')\n        element = element.parentElement;\n    \n    return element;\n}\n\nfunction setCurrentFileByEvent(event) {\n    const BUTTON_LEFT = 0;\n    \n    const key = {\n        alt: event.altKey,\n        ctrl: event.ctrlKey,\n        meta: event.metaKey,\n        shift: event.shiftKey\n    };\n    \n    const element = getLIElement(event.target);\n    \n    const fromName = Info.name;\n    DOM.setCurrentFile(element);\n    const toName = Info.name;\n    \n    let files = [];\n    \n    if (key.shift)\n        files = getFilesRange(fromName, toName);\n    else\n        files.push(Info.element);\n    \n    if (event.button === BUTTON_LEFT)\n        toggleSelect(key, files);\n}\n\nfunction getFilesRange(from, to) {\n    const files = DOM.getAllFiles();\n    const names = DOM.getFilenames(files);\n    const getNameIndex = getIndex(names);\n    \n    const indexFrom = getNameIndex(from);\n    const indexTo = getNameIndex(to);\n    \n    return getRange(indexFrom, indexTo, files);\n}\n\nfunction contextMenu() {\n    const fm = DOM.getFM();\n    \n    Events.addOnce('contextmenu', fm, (event) => {\n        CloudCmd.Menu.show({\n            x: event.clientX,\n            y: event.clientY\n        });\n    });\n    \n    Events.addContextMenu(fm, (event) => {\n        CloudCmd.Menu.ENABLED || event.preventDefault();\n    });\n}\n\nfunction dragndrop() {\n    const panels = DOM.getByClassAll('panel');\n    const select = () => {\n        [...panels].forEach((panel) => {\n            panel.classList.add('selected-panel');\n        });\n    };\n    \n    const unselect = () => {\n        [...panels].forEach((panel) => {\n            panel.classList.remove('selected-panel');\n        });\n    };\n    \n    const onDrop = (event) => {\n        const files = event.dataTransfer.files;\n        const items = event.dataTransfer.items;\n        const {length: filesCount} = files;\n        \n        event.preventDefault();\n        \n        if (filesCount && (!items || !items.length || !items[0].webkitGetAsEntry))\n            return uploadFiles(files);\n        \n        const isFile = (item) => item.kind === 'file';\n        const dirFiles = [...items].filter(isFile);\n        \n        if (dirFiles.length)\n            return DOM.uploadDirectory(dirFiles);\n        \n        const {Operation} = CloudCmd;\n        const operation = event.shiftKey ? 'move' : 'copy';\n        \n        return Operation.show(operation);\n    };\n    \n    /**\n     * In Mac OS Chrome dropEffect = 'none'\n     * so drop do not firing up when try\n     * to upload file from download bar\n     */\n    const onDragOver = (event) => {\n        const dataTransfer = event.dataTransfer;\n        const effectAllowed = dataTransfer.effectAllowed;\n        \n        if (/move|linkMove/.test(effectAllowed))\n            dataTransfer.dropEffect = 'move';\n        else\n            dataTransfer.dropEffect = 'copy';\n        \n        event.preventDefault();\n    };\n    \n    Events.add('dragenter', select);\n    Events.add(['dragleave', 'drop'], unselect);\n    \n    [...panels].forEach((panel) => {\n        Events.add('dragover', panel, onDragOver)\n            .add('drop', panel, onDrop);\n    });\n}\n\nfunction unload() {\n    DOM.Events.add(['unload', 'beforeunload'], (event) => {\n        const Key = CloudCmd.Key;\n        const isBind = Key && Key.isBind();\n        \n        if (isBind)\n            return;\n        \n        event.preventDefault();\n        return 'Please make sure that you saved all work.';\n    });\n}\n\nfunction pop() {\n    Events.add('popstate', ({state}) => {\n        const path = (state || '').replace(FS, '');\n        \n        if (!path)\n            return CloudCmd.route(location.hash);\n        \n        const history = false;\n        CloudCmd.loadDir({\n            path,\n            history,\n        });\n    });\n}\n\nfunction resize() {\n    Events.add('resize', () => {\n        const is = window.innerWidth < CloudCmd.MIN_ONE_PANEL_WIDTH;\n        \n        if (!is)\n            return;\n        \n        const {panel} = Info;\n        const isEmptyRoot = !panel;\n        \n        if (isEmptyRoot)\n            return;\n        \n        const name = panel.getAttribute('data-name');\n        const isLeft = name === 'js-left';\n        \n        if (isLeft)\n            return;\n        \n        DOM.changePanel();\n    });\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/listeners/index.js");
/src/dist-dev/cloudcmd.js-274-
##############################################
/src/dist-dev/cloudcmd.js-284-"use strict";
/src/dist-dev/cloudcmd.js:285:eval("\n\n/* global CloudCmd */\nconst DOM = __webpack_require__(/*! ./dom */ \"./client/dom/index.js\");\n\nconst Info = DOM.CurrentInfo;\nconst sort = CloudCmd.sort;\nconst order = CloudCmd.order;\nconst position = DOM.getPanelPosition();\n\nlet sortPrevious = sort[position];\n\nconst {getPanel} = DOM;\n\nCloudCmd.sortPanel = (name, panel = getPanel()) => {\n    const position = panel\n        .dataset\n        .name\n        .replace('js-', '');\n    \n    if (name !== sortPrevious) {\n        order[position] = 'asc';\n    } else {\n        if (order[position] === 'asc')\n            order[position] = 'desc';\n        else\n            order[position] = 'asc';\n    }\n    \n    sortPrevious =\n    sort[position] = name;\n    \n    const noCurrent = position !== Info.panelPosition;\n    \n    CloudCmd.refresh({\n        panel,\n        noCurrent,\n    });\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/sort.js");
/src/dist-dev/cloudcmd.js-286-
##############################################
/src/dist-dev/cloudcmd.js-295-
/src/dist-dev/cloudcmd.js:296:eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=file://cloudcmd/css/columns/name-size-date.css");
/src/dist-dev/cloudcmd.js-297-
##############################################
/src/dist-dev/cloudcmd.js-306-
/src/dist-dev/cloudcmd.js:307:eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=file://cloudcmd/css/columns/name-size.css");
/src/dist-dev/cloudcmd.js-308-
##############################################
/src/dist-dev/cloudcmd.js-317-
/src/dist-dev/cloudcmd.js:318:eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=file://cloudcmd/css/main.css");
/src/dist-dev/cloudcmd.js-319-
##############################################
/src/dist-dev/cloudcmd.js-328-
/src/dist-dev/cloudcmd.js:329:eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=file://cloudcmd/css/nojs.css");
/src/dist-dev/cloudcmd.js-330-
##############################################
/src/dist-dev/cloudcmd.js-339-
/src/dist-dev/cloudcmd.js:340:eval("module.exports = es6-promise;\n\n//# sourceURL=file://cloudcmd/external_%22es6-promise%22");
/src/dist-dev/cloudcmd.js-341-
##############################################
/src/dist-dev/modules/config.js-152-"use strict";
/src/dist-dev/modules/config.js:153:eval("\n\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\n\nconst isType = currify((type, object, name) => {\n    return typeof object[name] === type;\n});\n\nconst isBool = isType('boolean');\n\nmodule.exports.getElementByName = getElementByName;\n\nfunction getElementByName(selector, element) {\n    const str = `[data-name=\"js-${selector}\"]`;\n    \n    return element\n        .querySelector(str);\n}\n\nmodule.exports.getName = (element) => {\n    const name = element\n        .getAttribute('data-name')\n        .replace(/^js-/, '');\n    \n    return name;\n};\n\nmodule.exports.convert = (config) => {\n    const result = Object.assign({}, config);\n    const array = Object.keys(result);\n    \n    array\n        .filter(isBool(result))\n        .forEach((name) => {\n            const item = result[name];\n            \n            result[name] = setState(item);\n        });\n    \n    return result;\n};\n\nfunction setState(state) {\n    if (state)\n        return ' checked';\n    \n    return '';\n}\n\nmodule.exports.getValue = (name, element) => {\n    const el = getElementByName(name, element);\n    const type = el.type;\n    \n    switch(type) {\n    case 'checkbox':\n        return el.checked;\n    \n    case 'number':\n        return Number(el.value);\n    \n    default:\n        return el.value;\n    }\n};\n\nmodule.exports.setValue = (name, value, element) => {\n    const el = getElementByName(name, element);\n    const type = el.type;\n    \n    switch(type) {\n    case 'checkbox':\n        el.checked = value;\n        break;\n    \n    default:\n        el.value = value;\n        break;\n    }\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/input.js");
/src/dist-dev/modules/config.js-154-
##############################################
/src/dist-dev/modules/config.js-164-"use strict";
/src/dist-dev/modules/config.js:165:eval("\n\n/* global CloudCmd, DOM, io */\n\n__webpack_require__(/*! ../../css/config.css */ \"./css/config.css\");\n\nconst rendy = __webpack_require__(/*! rendy */ \"./node_modules/rendy/lib/rendy.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst squad = __webpack_require__(/*! squad/legacy */ \"./node_modules/squad/legacy/index.js\");\nconst input = __webpack_require__(/*! ../input */ \"./client/input.js\");\n\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\nconst Events = __webpack_require__(/*! ../dom/events */ \"./client/dom/events.js\");\nconst Files = __webpack_require__(/*! ../dom/files */ \"./client/dom/files.js\");\n\nconst {getTitle} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nconst {Dialog, setTitle} = DOM;\n\nconst TITLE = 'Config';\nconst alert = currify(Dialog.alert, TITLE);\n\nconst Config = module.exports;\n\nconst showLoad = () => {\n    Images.show.load('top');\n};\n\nconst addKey = currify((fn, input) => {\n    Events.addKey(input, fn);\n    return input;\n});\n\nconst addChange = currify((fn, input) => {\n    Events.add('change', input, fn);\n    return input;\n});\n\nCloudCmd.Config = ConfigProto;\n\nlet Loading = true;\n\nfunction ConfigProto() {\n    const noop = () => {};\n    \n    if (!CloudCmd.config('configDialog'))\n        return {\n            show: noop\n        };\n    \n    Loading = true;\n    \n    showLoad();\n    exec.series([\n        CloudCmd.View,\n        (callback) => {\n            Loading = false;\n            exec(callback);\n            DOM.loadSocket(initSocket);\n        },\n        show\n    ]);\n    \n    return module.exports;\n}\n\nconst config = CloudCmd.config;\n\nconst {Key} = CloudCmd;\n\nlet Element;\nlet Template;\n\nfunction getHost() {\n    const {host, origin, protocol} = location;\n    const href = origin || `${protocol}//${host}`;\n    \n    return href;\n}\n\nfunction initSocket() {\n    const href = getHost();\n    const prefix = CloudCmd.PREFIX;\n    const FIVE_SECONDS = 5000;\n    \n    const socket  = io.connect(href + prefix + '/config', {\n        'max reconnection attempts' : Math.pow(2, 32),\n        'reconnection limit'        : FIVE_SECONDS,\n        path: prefix + '/socket.io'\n    });\n    \n    const save = (data) => {\n        onSave(data);\n        socket.send(data);\n    };\n    \n    authCheck(socket);\n    \n    socket.on('connect', () => {\n        Config.save = save;\n    });\n    \n    socket.on('config', (config) => {\n        DOM.Storage.setAllowed(config.localStorage);\n    });\n    \n    socket.on('message', onSave);\n    socket.on('log', CloudCmd.log);\n    \n    socket.on('disconnect', () => {\n        Config.save = saveHttp;\n    });\n    \n    socket.on('err', alert);\n}\n\nfunction authCheck(socket) {\n    socket.emit('auth', config('username'), config('password'));\n    \n    socket.on('reject', () => {\n        alert('Wrong credentials!');\n    });\n}\n\nConfig.save = saveHttp;\n\nmodule.exports.show = show;\n\nfunction show() {\n    const prefix = CloudCmd.PREFIX;\n    const funcs = [\n        exec.with(Files.get, 'config-tmpl'),\n        exec.with(DOM.load.parallel, [\n            prefix + '/dist/config.css'\n        ])\n    ];\n    \n    if (Loading)\n        return;\n    \n    showLoad();\n    exec.parallel(funcs, fillTemplate);\n}\n\nfunction fillTemplate(error, template) {\n    if (!Template)\n        Template = template;\n    \n    Files.get('config', (error, config) => {\n        if (error)\n            return alert('Could not load config!');\n        \n        const obj = input.convert(config);\n        \n        obj[obj.editor + '-selected'] = 'selected';\n        delete obj.editor;\n        \n        obj[obj.packer + '-selected'] = 'selected';\n        delete obj.packer;\n        \n        obj[obj.columns + '-selected'] = 'selected';\n        delete obj.columns;\n        \n        const inner = rendy(Template, obj);\n        \n        Element = DOM.load({\n            name        : 'form',\n            className   : 'config',\n            inner,\n            attribute   : {\n                'data-name': 'js-config'\n            }\n        });\n        \n        const inputs = document.querySelectorAll('input, select', Element);\n        const [inputFirst] = inputs;\n        \n        let afterShow;\n        if (inputFirst) {\n            onAuthChange(inputFirst.checked);\n            afterShow = inputFirst.focus.bind(inputFirst);\n        }\n        \n        const getTarget = ({target}) => target;\n        const handleChange = squad(onChange, getTarget);\n        \n        [...inputs]\n            .map(addKey(onKey))\n            .map(addChange(handleChange));\n        \n        const autoSize = true;\n        CloudCmd.View.show(Element, {\n            autoSize,\n            afterShow,\n        });\n    });\n}\n\nmodule.exports.hide = () => {\n    CloudCmd.View.hide();\n};\n\nfunction onChange(el) {\n    const obj = {};\n    const name = input.getName(el);\n    const data = input.getValue(name, Element);\n    const type = el.type;\n    \n    if (name === 'name')\n        onNameChange(data);\n    else if (type === 'checkbox')\n        if (/^(diff|buffer|dirStorage)$/.test(name))\n            onLSChange(name, data);\n        else if (name === 'localStorage')\n            onLocalStorageChange();\n        else if (name === 'auth')\n            onAuthChange(data);\n    \n    obj[name] = data;\n    \n    Config.save(obj);\n}\n\nfunction onSave(obj) {\n    Object.keys(obj).forEach((name) => {\n        const data = obj[name];\n        \n        CloudCmd._config(name, data);\n        input.setValue(name, data, Element);\n    });\n    \n    DOM.Storage.setAllowed(obj.localStorage);\n}\n\nfunction saveHttp(obj) {\n    const {RESTful} = DOM;\n    \n    RESTful.Config.write(obj, (error) => {\n        if (error)\n            return;\n        \n        onSave(obj);\n    });\n}\n\nfunction onLocalStorageChange() {\n    const names = ['diff', 'buffer', 'dirStorage', 'localStorage'];\n    const elements = names.map((name) => {\n        return input.getElementByName(name, Element);\n    });\n    const el = {};\n    const msg = 'Diff, Buffer and Directory Storage do not work without localStorage';\n    \n    let isChecked;\n    \n    elements.forEach((element) => {\n        const name = input.getName(element);\n        \n        el[name] = element;\n        \n        if (element.checked)\n            isChecked = true;\n    });\n    \n    if (!isChecked || el.localStorage.checked)\n        return;\n    \n    alert(msg);\n    \n    elements.forEach((element) => {\n        if (!element.checked)\n            return;\n        \n        element.checked = false;\n        onChange(element);\n    });\n}\n\nfunction onLSChange(name, data) {\n    const elLocalStorage = input.getElementByName('localStorage', Element);\n    const msg = `${name} depends on localStorage`;\n    \n    if (!data || elLocalStorage.checked)\n        return;\n    \n    Dialog.alert(TITLE, msg);\n    elLocalStorage.checked = true;\n}\n\nfunction onAuthChange(checked) {\n    const elUsername = input.getElementByName('username', Element);\n    const elPassword = input.getElementByName('password', Element);\n    \n    elUsername.disabled =\n    elPassword.disabled = !checked;\n}\n\nfunction onNameChange(name) {\n    setTitle(getTitle({\n        name\n    }));\n}\n\nfunction onKey({keyCode, target}) {\n    switch (keyCode) {\n    case Key.ESC:\n        Config.hide();\n        break;\n    \n    case Key.ENTER:\n        onChange(target);\n        break;\n    }\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/config.js");
/src/dist-dev/modules/config.js-166-
##############################################
/src/dist-dev/modules/config.js-175-
/src/dist-dev/modules/config.js:176:eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=file://cloudcmd/css/config.css");
/src/dist-dev/modules/config.js-177-
##############################################
/src/dist-dev/modules/menu.js-152-"use strict";
/src/dist-dev/modules/menu.js:153:eval("/* global CloudCmd, DOM */\n\n\n\nCloudCmd.Menu = MenuProto;\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst wrap = __webpack_require__(/*! wraptile/legacy */ \"./node_modules/wraptile/legacy/index.js\");\n\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nconst load = __webpack_require__(/*! ../dom/load */ \"./client/dom/load.js\");\nconst RESTful = __webpack_require__(/*! ../dom/rest */ \"./client/dom/rest.js\");\n\nfunction MenuProto(Position) {\n    const config = CloudCmd.config;\n    const Buffer = DOM.Buffer;\n    const Info = DOM.CurrentInfo;\n    \n    let Loading = true;\n    const Key = CloudCmd.Key;\n    const Events = DOM.Events;\n    const Dialog = DOM.Dialog;\n    const Images = DOM.Images;\n    const Menu = this;\n    const TITLE = 'Cloud Commander';\n    const alert = currify(Dialog.alert, TITLE);\n    const alertNoFiles = wrap(Dialog.alert.noFiles)(TITLE);\n    const uploadTo = wrap(_uploadTo);\n    \n    let MenuShowedName;\n    let MenuContext;\n    let MenuContextFile;\n    \n    this.ENABLED = false;\n    \n    function init() {\n        Loading  = true;\n        Menu.show();\n        \n        Events.addKey(listener);\n    }\n    \n    this.hide = () => {\n        MenuContext.hide();\n        MenuContextFile.hide();\n    };\n    \n    this.show = (position) => {\n        const showFunc = () => {\n            show(position);\n            Images.hide();\n        };\n        \n        exec.if(window.MenuIO, showFunc, () => {\n            DOM.loadMenu((error) => {\n                if (error)\n                    return alert(error);\n                \n                showFunc();\n            });\n        });\n    };\n    \n    function getPosition(position) {\n        if (position)\n            return {\n                x: position.x,\n                y: position.y,\n            };\n        \n        if (Position)\n            return {\n                x: Position.x,\n                y: Position.y,\n            };\n        if (position)\n            return {\n                x: position.x,\n                y: position.y,\n            };\n       \n        return getCurrentPosition();\n    }\n    \n    function getMenuNameByEl(el) {\n        if (!el)\n            return 'context';\n        \n        const name = DOM.getCurrentName(el);\n        \n        if (name === '..')\n            return 'context';\n        \n        return 'contextFile';\n    }\n    \n    function getMenuByName(name) {\n        if (name === 'context')\n            return MenuContext;\n        \n        return MenuContextFile;\n    }\n    \n    function show(position) {\n        const {x, y} = getPosition(position);\n        \n        if (!Loading) {\n            MenuContext.show(x, y);\n            MenuContextFile.show(x, y);\n            return;\n        }\n        \n        loadFileMenuData((isAuth, menuDataFile) => {\n            const NOT_FILE = true;\n            const fm = DOM.getFM();\n            const menuData = getMenuData(isAuth);\n            const options = getOptions(NOT_FILE);\n            const optionsFile = getOptions();\n            const MenuIO = window.MenuIO;\n            \n            MenuContext = new MenuIO(fm, options, menuData);\n            MenuContextFile = new MenuIO(fm, optionsFile, menuDataFile);\n            \n            const el = DOM.getCurrentByPosition({x, y});\n            const menuName = getMenuNameByEl(el);\n            const menu = getMenuByName(menuName);\n            \n            menu.show(x, y);\n            \n            Loading = false;\n            Position = null;\n        });\n    }\n    \n    function getOptions(notFile) {\n        let name, func;\n        \n        if (notFile) {\n            name    = 'context';\n            func    = Key.unsetBind;\n        } else {\n            name    = 'contextFile';\n        }\n        \n        const options = {\n            icon        : true,\n            beforeClose : Key.setBind,\n            beforeShow  : exec.with(beforeShow, func),\n            beforeClick,\n            name,\n        };\n        \n        return options;\n    }\n    \n    function getMenuData(isAuth) {\n        const menu = {\n            'Paste': Buffer.paste,\n            'New': {\n                'File': DOM.promptNewFile,\n                'Directory': DOM.promptNewDir\n            },\n            'Upload': () => {\n                CloudCmd.Upload.show();\n            },\n            'Upload From Cloud': uploadFromCloud,\n            '(Un)Select All': DOM.toggleAllSelectedFiles\n        };\n        \n        if (isAuth)\n            menu['Log Out'] = CloudCmd.logOut;\n        \n        return menu;\n    }\n    \n    function loadFileMenuData(callback) {\n        const is = CloudCmd.config('auth');\n        const show = wrap((name) => {\n            CloudCmd[name].show();\n        });\n        \n        const menuBottom = getMenuData(is);\n        \n        const menuTop = {\n            'View': show('View'),\n            'Edit': show('EditFile'),\n            'Rename': () => {\n                setTimeout(DOM.renameCurrent, 100);\n            },\n            'Delete': () => {\n                CloudCmd.Operation.show('delete');\n            },\n            'Pack': () => {\n                CloudCmd.Operation.show('pack');\n            },\n            'Extract': () => {\n                CloudCmd.Operation.show('extract');\n            },\n            'Download': preDownload,\n            'Upload To Cloud': uploadTo('Cloud'),\n            'Cut': () => {\n                isCurrent(Buffer.cut, alertNoFiles);\n            },\n            'Copy': () => {\n                isCurrent(Buffer.copy, alertNoFiles);\n            },\n        };\n        \n        const menu = Object.assign({}, menuTop, menuBottom);\n        \n        callback(is, menu);\n    }\n    \n    function isCurrent(yesFn, noFn) {\n        if (Info.name !== '..')\n            return yesFn();\n        \n        noFn();\n    }\n    \n    function isPath(x, y) {\n        const {panel} = Info;\n        const isEmptyRoot = !panel;\n        \n        if (isEmptyRoot)\n            return false;\n        \n        const el = document.elementFromPoint(x, y);\n        const elements = panel.querySelectorAll('[data-name=\"js-path\"] *');\n        const is = ~[].indexOf.call(elements, el);\n        \n        return is;\n    }\n    \n    function beforeShow(callback, params) {\n        const name = params.name;\n        let el = DOM.getCurrentByPosition({\n            x: params.x,\n            y: params.y\n        });\n        \n        const menuName = getMenuNameByEl(el);\n        let notShow = menuName === 'contextFile';\n        \n        if (params.name === 'contextFile') {\n            notShow = !notShow;\n        }\n        \n        if (!notShow)\n            MenuShowedName = name;\n        \n        exec(callback);\n        \n        if (!notShow)\n            notShow = isPath(params.x, params.y);\n        \n        return notShow;\n    }\n    \n    function beforeClick(name) {\n        return MenuShowedName !== name;\n    }\n    \n    function _uploadTo(nameModule) {\n        Info.getData((error, data) => {\n            if (error)\n                return;\n            \n            const name = Info.name;\n            const execFrom = CloudCmd.execFromModule;\n             \n            execFrom(nameModule, 'uploadFile', name, data);\n        });\n        \n        CloudCmd.log('Uploading to ' + name + '...');\n    }\n    \n    function uploadFromCloud() {\n        Images.show.load('top');\n        \n        CloudCmd.execFromModule('Cloud', 'saveFile', (currentName, data) => {\n            const path = DOM.getCurrentDirPath() + currentName;\n            \n            RESTful.write(path,  data, (error) => {\n                if (error)\n                    return;\n                 \n                CloudCmd.refresh({currentName});\n            });\n        });\n    }\n    \n    function preDownload() {\n        download(config('packer'));\n    }\n    \n    function download(type) {\n        const TIME = 30 * 1000;\n        const prefixUr = CloudCmd.PREFIX_URL;\n        const PACK = '/pack';\n        const date = Date.now();\n        const files = DOM.getActiveFiles();\n        \n        if (!files.length)\n            return alertNoFiles();\n            \n        files.forEach((file) => {\n            const selected = DOM.isSelected(file);\n            const isDir = DOM.isCurrentIsDir(file);\n            const path = DOM.getCurrentPath(file);\n            \n            CloudCmd.log('downloading file ' + path + '...');\n            /*\n              * if we send ajax request -\n              * no need in hash so we escape #\n              * and all other characters, like \"%\"\n              */\n            const encodedPath = encodeURI(path).replace(/#/g, '%23');\n            const id = load.getIdBySrc(path);\n            \n            let src;\n            \n            if (isDir)\n                src = prefixUr + PACK + encodedPath + DOM.getPackerExt(type);\n            else\n                src = prefixUr + FS + encodedPath + '?download';\n            \n            const element = load({\n                id          : id + '-' + date,\n                name        : 'iframe',\n                async       : false,\n                className   : 'hidden',\n                src,\n            });\n            \n            const {body} = document;\n            const removeChild = body.removeChild.bind(body, element);\n            \n            setTimeout(removeChild, TIME);\n            \n            if (selected)\n                DOM.toggleSelectedFile(file);\n        });\n    }\n    \n    function getCurrentPosition() {\n        const current = Info.element;\n        const rect = current.getBoundingClientRect();\n        \n        const position = {\n            x: Math.round(rect.left + rect.width / 3),\n            y: Math.round(rect.top)\n        };\n        \n        return position;\n    }\n    \n    function listener(event) {\n        const F9 = Key.F9;\n        const ESC = Key.ESC;\n        const key = event.keyCode;\n        const isBind = Key.isBind();\n        \n        if (!isBind)\n            return;\n        \n        if (key === ESC)\n            return Menu.hide();\n        \n        if (key === F9) {\n            const position = getCurrentPosition();\n            MenuContext.show(position.x, position.y);\n            \n            event.preventDefault();\n        }\n    }\n    \n    init();\n}\n\n\n//# sourceURL=file://cloudcmd/client/modules/menu.js");
/src/dist-dev/modules/menu.js-154-
##############################################
/src/dist-dev/modules/contact.js-152-"use strict";
/src/dist-dev/modules/contact.js:153:eval("/* global CloudCmd */\n/* global DOM */\n/* global olark */\n\n\n\nCloudCmd.Contact = ContactProto;\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\n\nfunction ContactProto(callback) {\n    init(callback);\n    \n    return exports;\n}\n\nconst Events = DOM.Events;\nconst Key = CloudCmd.Key;\n\nmodule.exports.show = show;\nmodule.exports.hide = hide;\n\nlet Inited = false;\n\nfunction init(callback) {\n    if (Inited)\n        return;\n    \n    load(() => {\n        Inited = true;\n        \n        olark.identify('6216-545-10-4223');\n        olark('api.box.onExpand', show);\n        olark('api.box.onShow', show);\n        olark('api.box.onShrink', hide);\n        \n        exec(callback);\n    });\n    \n    Events.addKey(onKey);\n}\n\nfunction load(callback) {\n    const {PREFIX} = CloudCmd;\n    const path = `${PREFIX}/modules/olark/olark.min.js`;\n    \n    Images.show.load('top');\n    \n    DOM.load.js(path, callback);\n}\n\nfunction show() {\n    Key.unsetBind();\n    Images.hide();\n    \n    if (Inited)\n        return olark('api.box.expand');\n    \n    init(show);\n}\n\nfunction hide() {\n    Key.setBind();\n    olark('api.box.hide');\n}\n\nfunction onKey({keyCode}) {\n    if (keyCode === Key.ESC)\n        hide();\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/contact.js");
/src/dist-dev/modules/contact.js-154-
##############################################
/src/dist-dev/modules/view.js-152-"use strict";
/src/dist-dev/modules/view.js:153:eval("\n\n/* global CloudCmd, DOM, $ */\n\n__webpack_require__(/*! ../../css/view.css */ \"./css/view.css\");\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\nconst rendy = __webpack_require__(/*! rendy */ \"./node_modules/rendy/lib/rendy.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\n\nconst {time} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\nconst {FS} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\n\nconst Files = __webpack_require__(/*! ../dom/files */ \"./client/dom/files.js\");\nconst Events = __webpack_require__(/*! ../dom/events */ \"./client/dom/events.js\");\nconst load = __webpack_require__(/*! ../dom/load */ \"./client/dom/load.js\");\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\n\nconst testRegExp = currify((name, reg) => reg.test(name));\nconst lifo = currify((fn, el, cb, name) => fn(name, el, cb));\n\nconst addEvent = lifo(Events.add);\nconst getRegExp = (ext) => RegExp(`\\\\.${ext}$`, 'i');\n\nCloudCmd.View = ViewProto;\n\nmodule.exports = exec.bind();\n\nmodule.exports.show = show;\nmodule.exports.hide = hide;\n\nlet Loading = false;\n\nconst Name = 'View';\nconst Info = DOM.CurrentInfo;\nconst Key = CloudCmd.Key;\nconst basename = (a) => a.split('/').pop();\n\nlet El, TemplateAudio, Overlay;\n\nconst Config = {\n    beforeShow: (callback) => {\n        Images.hide();\n        Key.unsetBind();\n        showOverlay();\n        exec(callback);\n    },\n    beforeClose: (callback) => {\n        Events.rmKey(listener);\n        Key.setBind();\n        exec(callback);\n        hideOverlay();\n    },\n    afterShow: (callback) => {\n        El.focus();\n        exec(callback);\n    },\n    afterClose      : exec,\n    fitToView       : true,\n    loop            : false,\n    openEffect      : 'none',\n    closeEffect     : 'none',\n    autoSize        : false,\n    height          : '100%',\n    width           : '100%',\n    minWidth        : 0,\n    minHeight       : 0,\n    padding         : 0,\n    preload         : 0,\n    keys            : null,\n    mouseWheel      : false,\n    arrows          : false,\n    helpers         : {\n        overlay : null,\n        title   : null\n    }\n};\n\nfunction ViewProto(callback) {\n    const func = callback || exec.with(show, null);\n    \n    Loading = true;\n    \n    exec.series([\n        DOM.loadJquery,\n        loadAll,\n        (callback) => {\n            Loading = false;\n            exec(callback);\n        }\n    ], func);\n    \n    Config.parent = Overlay = load({\n        id          : 'js-view',\n        name        : 'div',\n        className   : 'fancybox-overlay fancybox-overlay-fixed'\n    });\n    \n    const events = [\n        'click',\n        'contextmenu',\n    ];\n    \n    events.forEach(addEvent(Overlay, onOverLayClick));\n    \n    return module.exports;\n}\n\nfunction show(data, options) {\n    const prefixUrl = CloudCmd.PREFIX_URL + FS;\n    \n    if (Loading)\n        return;\n    \n    if (!options || options.bindKeys !== false)\n        Events.addKey(listener);\n    \n    El = $('<div class=\"view\" tabindex=0>');\n    \n    if (data) {\n        const element = $(El).append(data);\n        $.fancybox.open(element, initConfig(Config, options));\n        return;\n    }\n    \n    Images.show.load();\n    \n    const path = prefixUrl + Info.path;\n    const type = getType(path);\n    \n    switch(type) {\n    default:\n        return Info.getData((error, data) => {\n            if (error)\n                return Images.hide();\n            \n            const element = document.createTextNode(data);\n            /* add margin only for view text documents */\n            El.css('margin', '2%');\n            \n            $.fancybox.open(El.append(element), Config);\n        });\n    \n    case 'image':\n        return showImage(path, prefixUrl);\n    \n    case 'media':\n        return getMediaElement(path, (element) => {\n            const media = DOM.getByDataName('js-media', element);\n            const onKey = exec.with(onMediaKey, media);\n            \n            $.fancybox.open(element, {\n                parent      : Overlay,\n                beforeShow  : () => {\n                    Config.beforeShow();\n                    Events.addKey(onKey);\n                },\n                beforeClose : () => {\n                    Config.beforeClose();\n                    Events.rmKey(onKey);\n                },\n                afterShow: () => {\n                    element\n                        .querySelector('audio, video')\n                        .focus();\n                },\n                helpers: {\n                    overlay : null,\n                    title   : null\n                }\n            });\n        });\n    }\n}\n\nfunction initConfig(Config, options) {\n    const config = Object.assign({}, Config);\n    \n    if (!options)\n        return config;\n    \n    Object.keys(options).forEach((name) => {\n        const isConfig = !!config[name];\n        const item = options[name];\n        const isFunc = itype.function(item);\n        \n        if (!isFunc || !isConfig) {\n            config[name] = options[name];\n            return;\n        }\n        \n        const func = config[name];\n        config[name] = () => {\n            exec.series([func, item]);\n        };\n    });\n    \n    return config;\n}\n\nfunction hide() {\n    $.fancybox.close();\n}\n\nfunction showImage(href, prefixUrl) {\n    const makeTitle = (path) => {\n        return {\n            href: prefixUrl + path,\n            title: basename(path),\n        };\n    };\n    \n    const names = Info.files\n        .map(DOM.getCurrentPath)\n        .filter(isImage);\n    \n    const titles = names\n        .map(makeTitle);\n    \n    const index = names.indexOf(Info.path);\n    const imageConfig = {\n        index,\n        autoSize    : true,\n        type        : 'image',\n        prevEffect  : 'none',\n        nextEffect  : 'none',\n        arrows      : true,\n        keys        : true,\n        helpers     : {\n            overlay : null,\n            title   : {}\n        }\n    };\n    \n    const config = {\n        ...Config,\n        ...imageConfig,\n    };\n    \n    $.fancybox.open(titles, config);\n}\n\nfunction isImage(name) {\n    const images = [\n        'jp(e|g|eg)',\n        'gif',\n        'png',\n        'bmp',\n        'webp',\n        'svg',\n        'ico'\n    ];\n    \n    return images\n        .map(getRegExp)\n        .some(testRegExp(name));\n}\n\nfunction isMedia(name) {\n    return isAudio(name) || isVideo(name);\n}\n\nfunction isAudio(name) {\n    return /\\.(mp3|ogg|m4a)$/i.test(name);\n}\n\nfunction isVideo(name) {\n    return /\\.(mp4|avi)$/i.test(name);\n}\n\nfunction getType(name) {\n    if (isImage(name))\n        return 'image';\n    \n    if (isMedia(name))\n        return 'media';\n}\n\nfunction getMediaElement(src, callback) {\n    check(src, callback);\n    \n    Files.get('view/media-tmpl', (error, template) => {\n        const {name} = Info;\n        \n        if (error)\n            return alert(error);\n        \n        if (!TemplateAudio)\n            TemplateAudio   = template;\n        \n        const is = isAudio(name);\n        const type =  is ? 'audio' : 'video';\n        \n        const rendered = rendy(TemplateAudio, {\n            src,\n            type,\n            name,\n        });\n        \n        const [element] = $(rendered);\n        callback(element);\n    });\n}\n\nfunction check(src, callback) {\n    if (typeof src !== 'string')\n        throw Error('src should be a string!');\n    \n    if (typeof callback !== 'function')\n        throw Error('callback should be a function');\n}\n\nfunction onMediaKey(media, event) {\n    const {keyCode} = event;\n    \n    if (keyCode === Key.SPACE) {\n        if (media.paused)\n            media.play();\n        else\n            media.pause();\n    }\n}\n\n/**\n * function loads css and js of FancyBox\n * @callback   -  executes, when everything loaded\n */\nfunction loadAll(callback) {\n    time(Name + ' load');\n    \n    DOM.loadRemote('fancybox', () => {\n        const {PREFIX} = CloudCmd;\n        \n        load.css(PREFIX + '/dist/view.css', callback);\n        \n        load.style({\n            id      : 'view-inlince-css',\n            inner   : [\n                '.fancybox-title-float-wrap .child {',\n                '-webkit-border-radius: 0;',\n                '-moz-border-radius: 0;',\n                'border-radius: 0;',\n                '}'\n            ].join('')\n        });\n    });\n}\n\nfunction onOverLayClick(event) {\n    const {target} = event;\n    const isOverlay = target === Overlay;\n    const position = {\n        x: event.clientX,\n        y: event.clientY\n    };\n      \n    if (!isOverlay)\n        return;\n    \n    hideOverlay();\n    hide();\n    \n    setCurrentByPosition(position);\n}\n\nfunction setCurrentByPosition(position) {\n    const element = DOM.getCurrentByPosition(position);\n    \n    if (!element)\n        return;\n    \n    const {\n        files,\n        filesPassive,\n    } = Info;\n    \n    const isFiles = ~files.indexOf(element);\n    const isFilesPassive = ~filesPassive.indexOf(element);\n    \n    if (!isFiles && !isFilesPassive)\n        return;\n    \n    const isCurrent = DOM.isCurrentFile(element);\n    \n    if (isCurrent)\n        return;\n    \n    DOM.setCurrentFile(element);\n}\n\nfunction hideOverlay() {\n    Overlay.classList.remove('view-overlay');\n}\n\nfunction showOverlay() {\n    Overlay.classList.add('view-overlay');\n}\n\nfunction listener({keyCode}) {\n    if (keyCode === Key.ESC)\n        hide();\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/view.js");
/src/dist-dev/modules/view.js-154-
##############################################
/src/dist-dev/modules/view.js-163-
/src/dist-dev/modules/view.js:164:eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=file://cloudcmd/css/view.css");
/src/dist-dev/modules/view.js-165-
##############################################
/src/dist-dev/modules/operation.js-152-"use strict";
/src/dist-dev/modules/operation.js:153:eval("/* global CloudCmd */\n/* global Util */\n/* global DOM */\n/* global fileop */\n\n\n\nCloudCmd.Operation = OperationProto;\n\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst wraptile = __webpack_require__(/*! wraptile/legacy */ \"./node_modules/wraptile/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst RESTful = __webpack_require__(/*! ../../dom/rest */ \"./client/dom/rest.js\");\nconst removeExtension = __webpack_require__(/*! ./remove-extension */ \"./client/modules/operation/remove-extension.js\");\nconst setListeners = __webpack_require__(/*! ./set-listeners */ \"./client/modules/operation/set-listeners.js\");\n\nconst removeQuery = (a) => a.replace(/\\?.*/, '');\n\nfunction OperationProto(operation, data) {\n    const Name = 'Operation';\n    const {\n        TITLE,\n        config,\n    } = CloudCmd;\n    const {Dialog, Images} = DOM;\n    const initOperations = wraptile(_initOperations);\n    const authCheck = wraptile(_authCheck);\n    \n    let Loaded;\n    \n    let {\n        cp: copyFn,\n        mv: moveFn,\n        delete: deleteFn,\n        extract: extractFn,\n    } = RESTful;\n    \n    let packZipFn = RESTful.pack;\n    let packTarFn = RESTful.pack;\n    \n    const Info = DOM.CurrentInfo;\n    const showLoad = Images.show.load.bind(null, 'top');\n    const Operation = this;\n    const processFiles = currify(_processFiles);\n    \n    const noFilesCheck = () => {\n        const {length} = DOM.getActiveFiles();\n        const is = Boolean(!length);\n        \n        if (is)\n            return Dialog.alert.noFiles(TITLE);\n        \n        return is;\n    };\n    \n    function init() {\n        showLoad();\n        \n        exec.series([\n            DOM.loadSocket,\n            (callback) => {\n                if (!config('progress'))\n                    return callback();\n                \n                load(initOperations(CloudCmd.PREFIX, callback));\n            },\n            () => {\n                Loaded = true;\n                Images.hide();\n                Operation.show(operation, data);\n            }\n        ]);\n    }\n    \n    function _authCheck(spawn, ok) {\n        const accept = wraptile(ok);\n        const alertDialog = wraptile(Dialog.alert);\n        \n        spawn.on('accept', accept(spawn));\n        spawn.on('reject', alertDialog (TITLE, 'Wrong credentials!'));\n        spawn.emit('auth', config('username'), config('password'));\n    }\n    \n    function _initOperations(socketPrefix, fn) {\n        const prefix = `${socketPrefix}/fileop`;\n        fileop({prefix, socketPrefix}, (e, operator) => {\n            fn();\n            \n            operator.on('connect', authCheck(operator, onConnect));\n            operator.on('disconnect', onDisconnect);\n        });\n    }\n    \n    function onConnect(operator) {\n        packTarFn = (data, callback) => {\n            operator.tar(data.from, data.to, data.names)\n                .then(setListeners({noContinue: true}, callback));\n        };\n        \n        packZipFn = (data, callback) => {\n            operator.zip(data.from, data.to, data.names)\n                .then(setListeners({noContinue: true}, callback));\n        };\n        \n        deleteFn = (from, files, callback) => {\n            from = removeQuery(from);\n            operator.remove(from, files)\n                .then(setListeners(callback));\n        };\n        \n        copyFn = (data, callback) => {\n            operator.copy(data.from, data.to, data.names)\n                .then(setListeners(callback));\n        };\n        \n        extractFn = (data, callback) => {\n            operator.extract(data.from, data.to)\n                .then(setListeners({noContinue: true}, callback));\n        };\n    }\n    \n    function onDisconnect() {\n        packZipFn = RESTful.pack;\n        packTarFn = RESTful.pack;\n        deleteFn = RESTful.delete;\n        copyFn = RESTful.cp;\n        extractFn = RESTful.extract;\n    }\n    \n    function getPacker(type) {\n        if (type === 'zip')\n            return packZipFn;\n        \n        return packTarFn;\n    }\n    \n    this.hide = () => {\n        CloudCmd.View.hide();\n    };\n    \n    this.show = (operation, data) => {\n        if (!Loaded)\n            return;\n        \n        if (operation === 'copy')\n            return Operation.copy(data);\n        \n        if (operation === 'move')\n            return Operation.move(data);\n        \n        if (operation === 'delete')\n            return Operation.delete();\n        \n        if (operation === 'delete:silent')\n            return Operation.deleteSilent();\n        \n        if (operation === 'pack')\n            return Operation.pack();\n        \n        if (operation === 'extract')\n            return Operation.extract();\n    };\n    \n    this.copy = processFiles({\n        type: 'copy',\n    });\n    \n    this.move = processFiles({\n        type: 'move'\n    });\n    \n    this.delete = () => {\n        promptDelete();\n    };\n    \n    this.deleteSilent = () => {\n        deleteSilent();\n    };\n    \n    this.pack = () => {\n        const isZip = config('packer') === 'zip';\n        twopack('pack', isZip ? 'zip' : 'tar');\n    };\n    \n    this.extract = () => {\n        twopack('extract');\n    };\n    \n    /**\n     * prompt and delete current file or selected files\n     *\n     * @currentFile\n     */\n    function promptDelete() {\n        if (noFilesCheck())\n            return;\n        \n        const msgAsk = 'Do you really want to delete the ';\n        const msgSel = 'selected ';\n        \n        const files = DOM.getActiveFiles();\n        const names = DOM.getFilenames(files);\n        const n = names.length;\n        \n        let msg;\n        if (n) {\n            let name = '';\n            \n            for (let i = 0; i < 5 && i < n; i++)\n                name += '\\n' + names[i];\n            \n            if (n >= 5)\n                name += '\\n...';\n            \n            msg = msgAsk + msgSel + n + ' files/directories?\\n' + name ;\n        } else {\n            const current = DOM.getCurrentFile();\n            const isDir = DOM.isCurrentIsDir(current);\n            const getType = (isDir) => {\n                return isDir ? 'directory' : 'file';\n            };\n            \n            const type = getType(isDir) + ' ';\n            \n            const name = DOM.getCurrentName(current);\n            msg = msgAsk + msgSel + type + name + '?';\n        }\n        \n        const cancel = false;\n        \n        Dialog.confirm(TITLE, msg, {cancel}).then(() => {\n            deleteSilent(files);\n        });\n    }\n    \n    /**\n     * delete current or selected files\n     *\n     * @files\n     */\n    function deleteSilent(files = DOM.getActiveFiles()) {\n        const query = '?files';\n        const path = Info.dirPath;\n        \n        if (noFilesCheck())\n            return;\n        \n        showLoad();\n        \n        const names = DOM.getFilenames(files);\n        \n        deleteFn(path + query, names, (error) => {\n            const Storage = DOM.Storage;\n            const dirPath = Info.dirPath;\n            \n            if (error)\n                return CloudCmd.refresh();\n             \n            DOM.deleteSelected(files);\n            Storage.removeMatch(dirPath);\n        });\n    }\n    \n    /*\n     * process files (copy or move)\n     * @param data\n     * @param operation\n     */\n    function _processFiles(options, data) {\n        let selFiles, files;\n        let panel;\n        let shouldAsk;\n        let sameName;\n        let ok;\n        \n        let from = '';\n        let to = '';\n        \n        let names = [];\n        \n        if (data) {\n            from        = data.from;\n            to          = data.to;\n            names       = data.names;\n            panel       = Info.panel;\n        } else {\n            from        = Info.dirPath;\n            to          = DOM.getNotCurrentDirPath();\n            selFiles    = DOM.getSelectedFiles();\n            names       = DOM.getFilenames(selFiles);\n            data        = {};\n            shouldAsk   = true;\n            panel       = Info.panelPassive;\n        }\n        \n        if (!names.length)\n            names.push(DOM.getCurrentName());\n        \n        const name = names[0];\n        \n        sameName = DOM.getCurrentByName(name, panel);\n        \n        if (!data && noFilesCheck())\n            return;\n        \n        const {type} = options;\n        \n        const isCopy = type === 'copy';\n        const option = isCopy ? 'confirmCopy' : 'confirmMove';\n        const title = isCopy ? 'Copy' : 'Rename/Move';\n        const operation = isCopy ? copyFn : moveFn;\n        \n        if (shouldAsk && config(option))\n            return message(title, to, names)\n                .then(ask);\n        \n        ask(to);\n        \n        function ask(to) {\n            ok = from !== to && to;\n            \n            if (ok && !shouldAsk || !sameName)\n                return go();\n            \n            const str = `\"${ name }\" already exist. Overwrite?`;\n            const cancel = false;\n            \n            Dialog.confirm(TITLE, str, {cancel}).then(go);\n            \n            function go() {\n                showLoad();\n                 \n                files   = {\n                    from    : from,\n                    to      : to,\n                    names   : names\n                };\n                \n                operation(files, (error) => {\n                    !error && DOM.Storage.remove(from, () => {\n                        const {\n                            panel,\n                            panelPassive,\n                        } = Info;\n                        \n                        const setCurrent = () => {\n                            const currentName = name || data.names[0];\n                            DOM.setCurrentByName(currentName);\n                        };\n                        \n                        if (!Info.isOnePanel)\n                            CloudCmd.refresh({\n                                panel: panelPassive,\n                                noCurrent: true,\n                            });\n                        \n                        CloudCmd.refresh({panel}, setCurrent);\n                    });\n                });\n            }\n        }\n    }\n    \n    function checkEmpty(name, operation) {\n        if (!operation)\n            throw Error(name + ' could not be empty!');\n    }\n    \n    function twopack(operation, type) {\n        let op;\n        let fileFrom;\n        let currentName = Info.name;\n        \n        const Images = DOM.Images;\n        const path = Info.path;\n        const dirPath = Info.dirPath;\n        const activeFiles = DOM.getActiveFiles();\n        const names = DOM.getFilenames(activeFiles);\n        \n        checkEmpty('operation', operation);\n        \n        if (!names.length)\n            return Dialog.alert.noFiles(TITLE);\n        \n        switch(operation) {\n        case 'extract':\n            op = extractFn;\n            \n            fileFrom   = {\n                from: path,\n                to: dirPath\n            };\n            \n            currentName = removeExtension(currentName);\n            \n            break;\n        \n        case 'pack':\n            op = getPacker(type);\n            \n            if (names.length > 1)\n                currentName  = Info.dir;\n            \n            currentName += DOM.getPackerExt(type);\n            \n            fileFrom = {\n                from: dirPath,\n                to: dirPath + currentName,\n                names,\n            };\n            break;\n        }\n        \n        Images.show.load('top');\n        \n        op(fileFrom, (error) => {\n            !error && CloudCmd.refresh({\n                currentName\n            });\n        });\n    }\n    \n    function message(msg, to, names) {\n        const n = names.length;\n        const name = names[0];\n        \n        msg += ' ';\n        \n        if (names.length > 1)\n            msg     += n + ' file(s)';\n        else\n            msg     += '\"' + name + '\"';\n        \n        msg += ' to';\n        \n        const cancel = false;\n        \n        return Dialog.prompt(TITLE, msg, to, {cancel});\n    }\n    \n    function load(callback) {\n        const prefix = CloudCmd.PREFIX;\n        const file = `${prefix}/fileop/fileop.js`;\n        \n        DOM.load.js(file, (error) => {\n            if (error) {\n                Dialog.alert(TITLE, error.message);\n                return exec(callback);\n            }\n            \n            Loaded = true;\n            Util.timeEnd(Name + ' load');\n            exec(callback);\n        });\n        \n        Util.time(Name + ' load');\n    }\n    \n    init();\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/operation/index.js");
/src/dist-dev/modules/operation.js-154-
##############################################
/src/dist-dev/modules/operation.js-164-"use strict";
/src/dist-dev/modules/operation.js:165:eval("\n\nconst {getExt} = __webpack_require__(/*! ../../../common/util */ \"./common/util.js\");\n\nmodule.exports = (name) => {\n    const ext = getExtension(name);\n    \n    return name.replace(ext, '');\n};\n\nfunction getExtension(name) {\n    if (/\\.tar\\.gz$/.test(name))\n        return '.tar.gz';\n    \n    if (/\\.tar\\.bz2$/.test(name))\n        return '.tar.bz2';\n    \n    return getExt(name);\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/operation/remove-extension.js");
/src/dist-dev/modules/operation.js-166-
##############################################
/src/dist-dev/modules/operation.js-176-"use strict";
/src/dist-dev/modules/operation.js:177:eval("\n\n/* global DOM */\n/* global CloudCmd */\n\nconst {\n    Images,\n    Dialog,\n} = DOM;\n\nconst forEachKey = __webpack_require__(/*! for-each-key/legacy */ \"./node_modules/for-each-key/legacy/index.js\");\nconst {\n    TITLE,\n} = CloudCmd;\n\nmodule.exports = (options, callback) => (emitter) => {\n    if (!callback) {\n        callback = options;\n        options = {};\n    }\n    \n    let done;\n    let lastError;\n    \n    const removeListener = emitter.removeListener.bind(emitter);\n    const on = emitter.on.bind(emitter);\n    \n    const listeners = {\n        progress: (value) => {\n            done = value === 100;\n            Images.setProgress(value);\n        },\n        \n        end: () => {\n            Images\n                .hide()\n                .clearProgress();\n            \n            forEachKey(removeListener, listeners);\n            \n            if (lastError || done)\n                callback(lastError);\n        },\n        \n        error: (error) => {\n            lastError = error;\n            \n            if (options.noContinue) {\n                listeners.end(error);\n                Dialog.alert(TITLE, error);\n                return;\n            }\n            \n            Dialog.confirm(TITLE, error + '\\n Continue?')\n                .then(() => {\n                    emitter.continue();\n                }, () => {\n                    emitter.abort();\n                });\n        }\n    };\n    \n    forEachKey(on, listeners);\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/operation/set-listeners.js");
/src/dist-dev/modules/operation.js-178-
##############################################
/src/dist-dev/modules/help.js-152-"use strict";
/src/dist-dev/modules/help.js:153:eval("\n\n/* global CloudCmd */\n\nCloudCmd.Help = HelpProto;\n\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\n\nfunction HelpProto() {\n    Images.show.load('top');\n    show();\n    \n    return exports;\n}\n\nmodule.exports.show = show;\nmodule.exports.hide = hide;\n\nfunction show() {\n    const positionLoad = 'top';\n    const relative = true;\n    \n    CloudCmd\n        .Markdown\n        .show('/HELP.md', {\n            positionLoad,\n            relative,\n        });\n}\n\nfunction hide() {\n    CloudCmd.View.hide();\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/help.js");
/src/dist-dev/modules/help.js-154-
##############################################
/src/dist-dev/modules/polyfill.js-152-"use strict";
/src/dist-dev/modules/polyfill.js:153:eval("\n\n/* global Util, DOM, $ */\n\nconst itype = __webpack_require__(/*! itype/legacy */ \"./node_modules/itype/legacy/index.js\");\n\nif (!window.XMLHttpRequest || !document.head)\n    DOM.load.ajax = $.ajax;\n\nif (!Array.isArray)\n    Array.isArray = itype.array.bind();\n\n/* function polyfill webkit standart function\n *    https://gist.github.com/2581101\n */\nDOM.scrollIntoViewIfNeeded = function(element, centerIfNeeded) {\n    let parent,\n        topWidth,\n        leftWidth,\n        parentComputedStyle,\n        parentBorderTopWidth,\n        parentBorderLeftWidth,\n        overTop,\n        overBottom,\n        overLeft,\n        overRight,\n        alignWithTop;\n    \n    if (window.getComputedStyle) {\n        if (arguments.length === 1)\n            centerIfNeeded = false;\n        \n        parent                  = element.parentNode;\n        parentComputedStyle     = window.getComputedStyle(parent, null);\n        \n        topWidth                = parentComputedStyle.getPropertyValue('border-top-width');\n        leftWidth               = parentComputedStyle.getPropertyValue('border-left-width');\n        \n        parentBorderTopWidth    = parseInt(topWidth, 10);\n        parentBorderLeftWidth   = parseInt(leftWidth, 10);\n            \n        overTop                 = element.offsetTop - parent.offsetTop < parent.scrollTop,\n        overBottom              =\n            (element.offsetTop         -\n                parent.offsetTop        +\n                element.clientHeight   -\n                parentBorderTopWidth)   >\n            (parent.scrollTop + parent.clientHeight),\n            \n        overLeft                = element.offsetLeft -\n            parent.offsetLeft < parent.scrollLeft,\n            \n        overRight               =\n            (element.offsetLeft        -\n                parent.offsetLeft       +\n                element.clientWidth    -\n                parentBorderLeftWidth)  >\n            (parent.scrollLeft + parent.clientWidth),\n        \n        alignWithTop            = overTop && !overBottom;\n        \n        if ((overTop || overBottom) && centerIfNeeded)\n            parent.scrollTop    =\n                element.offsetTop      -\n                parent.offsetTop        -\n                parent.clientHeight / 2 -\n                parentBorderTopWidth    +\n                element.clientHeight / 2;\n        \n        if ((overLeft || overRight) && centerIfNeeded)\n            parent.scrollLeft   =\n                element.offsetLeft     -\n                parent.offsetLeft       -\n                parent.clientWidth / 2  -\n                parentBorderLeftWidth   +\n                element.clientWidth / 2;\n        \n        if ((overTop || overBottom || overLeft || overRight) && !centerIfNeeded)\n            element.scrollIntoView(alignWithTop);\n    }\n};\n\nif (!window.JSON) {\n    window.JSON = {};\n    \n    window.JSON.parse = $.parseJSON;\n    \n    /* https://gist.github.com/754454 */\n    window.JSON.stringify   = function(obj) {\n        let n, v, has,\n            ret     = '',\n            value   = '',\n            json    = [];\n        \n        let isStr = itype.string(obj);\n        let isObj = itype.object(obj);\n        let isArray = itype.array(obj);\n        \n        if (!isObj || obj === null) {\n            // simple data type\n            if (isStr)\n                obj = '\"' + obj + '\"';\n            \n            ret += obj;\n        } else {\n            // recurse array or object\n            for (n in obj) {\n                v   = obj[n];\n                has = obj.hasOwnProperty(n);\n                \n                if (has) {\n                    isStr   = itype.string(v);\n                    isObj   = itype.object(v);\n                    \n                    if (isStr)\n                        v   = '\"' + v + '\"';\n                    else if (v && isObj)\n                        v   = Util.json.stringify(v);\n                    \n                    if (!isArray)\n                        value   = '\"' + n + '\":';\n                    \n                    json.push(value + v);\n                }\n            }\n            \n            if (isArray)\n                ret = '[' + json + ']';\n            else\n                ret = '{' + json + '}';\n        }\n        \n        return ret;\n    };\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/polyfill.js");
/src/dist-dev/modules/polyfill.js-154-
##############################################
/src/dist-dev/modules/edit-names.js-152-"use strict";
/src/dist-dev/modules/edit-names.js:153:eval("\n\n/* global CloudCmd, DOM */\n\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst reject = Promise.reject.bind(Promise);\n\nCloudCmd.EditNames = function EditNamesProto(callback) {\n    const Info = DOM.CurrentInfo;\n    const Dialog = DOM.Dialog;\n    \n    const TITLE = 'Edit Names';\n    const alert = currify(Dialog.alert, TITLE);\n    const refresh = currify(_refresh);\n    \n    const EditNames = this;\n    let Menu, MenuIO;\n    const ConfigView  = {\n        beforeClose: () => {\n            exec.ifExist(Menu, 'hide');\n            isChanged();\n            DOM.Events.remove('keydown', keyListener);\n        }\n    };\n    \n    function init(callback) {\n        let editor;\n        \n        exec.series([\n            CloudCmd.Edit,\n            \n            (callback) => {\n                editor = CloudCmd.Edit.getEditor();\n                callback();\n            },\n            \n            (callback) => {\n                setListeners(editor);\n                callback();\n            },\n            \n            (callback) => {\n                EditNames.show();\n                callback();\n            },\n        ], callback);\n    }\n    \n    this.show = () => {\n        const names = getActiveNames().join('\\n');\n        \n        if (Info.name === '..' && names.length === 1)\n            return Dialog.alert.noFiles(TITLE);\n        \n        CloudCmd.Edit\n            .getEditor()\n            .setValueFirst('edit-names', names)\n            .setMode()\n            .setOption('keyMap', 'default')\n            .disableKey();\n        \n        DOM.Events.addKey(keyListener);\n        \n        CloudCmd.Edit.show(ConfigView);\n    };\n    \n    function keyListener(event) {\n        const ctrl = event.ctrlKey;\n        const meta = event.metaKey;\n        const ctrlMeta = ctrl || meta;\n        const Key = CloudCmd.Key;\n        \n        if (!ctrlMeta || event.keyCode !== Key.S)\n            return;\n        \n        EditNames.hide();\n    }\n    \n    function getActiveNames() {\n        return DOM.getFilenames(DOM.getActiveFiles());\n    }\n    \n    this.hide = () => {\n        CloudCmd.Edit.hide();\n    };\n    \n    function setListeners() {\n        const element = CloudCmd.Edit.getElement();\n        \n        DOM.Events.addOnce('contextmenu', element, setMenu);\n    }\n    \n    function applyNames() {\n        const dir = Info.dirPath;\n        const from = getActiveNames();\n        const nameIndex = from.indexOf(Info.name);\n        \n        const editor = CloudCmd.Edit.getEditor();\n        const to = editor\n            .getValue()\n            .split('\\n');\n        \n        const root = CloudCmd.config('root');\n        \n        Promise.resolve(root)\n            .then(rename(dir, from, to))\n            .then(refresh(to, nameIndex))\n            .catch(alert);\n    }\n    \n    function _refresh(to, nameIndex, res) {\n        if (res.status === 404)\n            return res.text().then(reject);\n        \n        const currentName = to[nameIndex];\n        \n        CloudCmd.refresh({\n            currentName\n        });\n    }\n    \n    function getDir(root, dir) {\n        if (root === '/')\n            return dir;\n        \n        return root + dir;\n    }\n    \n    function rename(dir, from, to) {\n        return (root) => {\n            return fetch(CloudCmd.PREFIX + '/rename', {\n                method: 'put',\n                credentials: 'include',\n                body: JSON.stringify({\n                    from: from,\n                    to: to,\n                    dir: getDir(root, dir)\n                })\n            });\n        };\n    }\n    \n    function setMenu(event) {\n        const position = {\n            x: event.clientX,\n            y: event.clientY\n        };\n        \n        event.preventDefault();\n        \n        !Menu && DOM.loadRemote('menu', (error) => {\n            MenuIO = window.MenuIO;\n            let noFocus;\n            const editor = CloudCmd.Edit.getEditor();\n            const options = {\n                beforeShow: (params) => {\n                    params.x -= 18;\n                    params.y -= 27;\n                },\n                \n                afterClick: () => {\n                    !noFocus && editor.focus();\n                }\n            };\n            \n            const menuData = {\n                'Save           Ctrl+S' : () => {\n                    editor.save();\n                    EditNames.hide();\n                },\n                'Go To Line     Ctrl+G' : () => {\n                    noFocus = true;\n                    editor.goToLine();\n                },\n                'Cut            Ctrl+X' : () => {\n                    editor.cutToClipboard();\n                },\n                'Copy           Ctrl+C' : () => {\n                    editor.copyToClipboard();\n                },\n                'Paste          Ctrl+V' : () => {\n                    editor.pasteFromClipboard();\n                },\n                'Delete         Del'    : () => {\n                    editor.remove('right');\n                },\n                'Select All     Ctrl+A' : () => {\n                    editor.selectAll();\n                },\n                'Close          Esc'    : () => {\n                    EditNames.hide();\n                }\n            };\n            \n            if (error)\n                return alert(error);\n            \n            if (Menu || !MenuIO)\n                return;\n                \n            const element = CloudCmd.Edit.getElement();\n            \n            Menu = new MenuIO(element, options, menuData);\n            Menu.show(position.x, position.y);\n        });\n    }\n    \n    function isChanged() {\n        const editor = CloudCmd.Edit.getEditor();\n        const msg = 'Apply new names?';\n        \n        if (!editor.isChanged())\n            return;\n        \n        Dialog.confirm(TITLE, msg)\n            .then(EditNames.hide)\n            .then(applyNames)\n            .catch(EditNames.hide);\n    }\n    \n    init(callback);\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/edit-names.js");
/src/dist-dev/modules/edit-names.js-154-
##############################################
/src/dist-dev/modules/edit-file-vim.js-152-"use strict";
/src/dist-dev/modules/edit-file-vim.js:153:eval("\n\n/* global CloudCmd */\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst Events = __webpack_require__(/*! ../dom/events */ \"./client/dom/events.js\");\n\nconst {Key} = CloudCmd;\n\nCloudCmd.EditFileVim = function EditFileVimProto(callback) {\n    const EditFileVim = this;\n    \n    const ConfigView  = {\n        bindKeys: false,\n        beforeClose: () => {\n            Events.rmKey(listener);\n        }\n    };\n    \n    function init(callback) {\n        exec.series([\n            CloudCmd.EditFile,\n            callback || EditFileVim.show,\n        ]);\n    }\n    \n    this.show = () => {\n        Events.addKey(listener);\n        \n        CloudCmd.EditFile\n            .show(ConfigView)\n            .getEditor()\n            .setKeyMap('vim');\n    };\n    \n    this.hide = () => {\n        CloudCmd.Edit.hide();\n    };\n    \n    function listener(event) {\n        const {\n            keyCode,\n            shiftKey,\n        } = event;\n        \n        if (shiftKey && keyCode === Key.ESC) {\n            event.preventDefault();\n            EditFileVim.hide();\n        }\n    }\n    \n    init(callback);\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/edit-file-vim.js");
/src/dist-dev/modules/edit-file-vim.js-154-
##############################################
/src/dist-dev/modules/cloud.js-152-"use strict";
/src/dist-dev/modules/cloud.js:153:eval("/* global CloudCmd, filepicker */\n\n\n\nCloudCmd.Cloud = CloudProto;\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\n\nconst {log} = CloudCmd;\n\nconst load = __webpack_require__(/*! ../dom/load */ \"./client/dom/load.js\");\nconst Files = __webpack_require__(/*! ../dom/files */ \"./client/dom/files.js\");\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\n\nconst upload = currify(_upload);\n\nfunction CloudProto(callback) {\n    loadFiles(callback);\n    \n    return module.exports;\n}\n\nmodule.exports.uploadFile = (filename, data) => {\n    const mimetype = '';\n    \n    filepicker.store(data, {\n        mimetype,\n        filename,\n    }, (fpFile) => {\n        filepicker.exportFile(fpFile, log, log);\n    });\n};\n\nmodule.exports.saveFile = (callback) => {\n    filepicker.pick(upload(callback));\n};\n\nfunction _upload(callback, file) {\n    const {\n        url,\n        filename,\n    } = file;\n    \n    const responseType = 'arraybuffer';\n    const success = exec.with(callback, filename);\n    \n    load.ajax({\n        url,\n        responseType,\n        success,\n    });\n}\n\nfunction loadFiles(callback) {\n    const js = '//api.filepicker.io/v2/filepicker.js';\n    \n    load.js(js, () => {\n        Files.get('modules', (error, modules) => {\n            const {key} = modules.data.FilePicker;\n            \n            filepicker.setKey(key);\n            \n            Images.hide();\n            exec(callback);\n        });\n    });\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/cloud.js");
/src/dist-dev/modules/cloud.js-154-
##############################################
/src/dist-dev/modules/edit.js-152-"use strict";
/src/dist-dev/modules/edit.js:153:eval("/* global CloudCmd */\n\n\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\n\nconst load = __webpack_require__(/*! ../dom/load */ \"./client/dom/load.js\");\n\nconst {MAX_FILE_SIZE: maxSize} = __webpack_require__(/*! ../../common/cloudfunc */ \"./common/cloudfunc.js\");\nconst {time, timeEnd} = __webpack_require__(/*! ../../common/util */ \"./common/util.js\");\n\nCloudCmd.Edit = EditProto;\n\nfunction EditProto(callback) {\n    const Name = 'Edit';\n    const EditorName = CloudCmd.config('editor');\n    const loadFiles = currify(_loadFiles);\n    \n    let Loading = true;\n    let Element;\n    let editor;\n    \n    const ConfigView = {\n        afterShow: () => {\n            editor\n                .moveCursorTo(0, 0)\n                .focus();\n        }\n    };\n    \n    const Edit = exec.bind();\n    \n    function init(callback) {\n        const element = createElement();\n        \n        exec.series([\n            CloudCmd.View,\n            loadFiles(element)\n        ], callback);\n    }\n    \n    function createElement() {\n        const element = load({\n            name: 'div',\n            style:\n                'width      : 100%;'                +\n                'height     : 100%;'                +\n                'font-family: \"Droid Sans Mono\";'   +\n                'position   : absolute;',\n            notAppend: true\n        });\n        \n        Element = element;\n        \n        return element;\n    }\n    \n    function checkFn(name, fn) {\n        if (typeof fn !== 'function')\n            throw Error(name + ' should be a function!');\n    }\n    \n    function initConfig(options = {}) {\n        const config = Object.assign({}, options, ConfigView);\n        \n        if (!options.afterShow)\n            return config;\n        \n        checkFn('options.afterShow', options.afterShow);\n        \n        const afterShow = {config};\n        \n        config.afterShow = () => {\n            afterShow();\n            options.afterShow();\n        };\n        \n        return config;\n    }\n    \n    Edit.show = (options) => {\n        if (Loading)\n            return;\n         \n        CloudCmd.View.show(Element, initConfig(options));\n        \n        Edit.getEditor()\n            .setOptions({\n                fontSize: 16,\n            });\n        \n        return Edit;\n    };\n    \n    Edit.getEditor = () => {\n        return editor;\n    };\n    \n    Edit.getElement = () => {\n        return Element;\n    };\n    \n    Edit.hide = () => {\n        CloudCmd.View.hide();\n        return Edit;\n    };\n    \n    function _loadFiles(element, callback) {\n        const socketPath = CloudCmd.PREFIX;\n        const prefix = socketPath + '/' + EditorName;\n        const url = prefix + '/' + EditorName + '.js';\n        \n        time(Name + ' load');\n        \n        load.js(url, () => {\n            const word = window[EditorName];\n            const options = {\n                maxSize,\n                prefix,\n                socketPath,\n            };\n            \n            word(element, options, (ed) => {\n                timeEnd(Name + ' load');\n                editor  = ed;\n                Loading = false;\n                \n                exec(callback);\n            });\n        });\n    }\n    \n    init(callback);\n    \n    return Edit;\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/edit.js");
/src/dist-dev/modules/edit.js-154-
##############################################
/src/dist-dev/modules/edit-file.js-152-"use strict";
/src/dist-dev/modules/edit-file.js:153:eval("\n\n/* global CloudCmd, DOM, MenuIO */\n\nconst Format = __webpack_require__(/*! format-io */ \"./node_modules/format-io/lib/format.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst store = __webpack_require__(/*! fullstore/legacy */ \"./node_modules/fullstore/legacy/index.js\");\nconst squad = __webpack_require__(/*! squad/legacy */ \"./node_modules/squad/legacy/index.js\");\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst call = currify((fn, callback) => {\n    fn();\n    callback();\n});\n\nCloudCmd.EditFile = function EditFileProto(callback) {\n    const Info = DOM.CurrentInfo;\n    const Dialog = DOM.Dialog;\n    const EditFile = exec.bind();\n    const config = CloudCmd.config;\n    \n    let Menu;\n    \n    const TITLE = 'Edit';\n    const Images = DOM.Images;\n    \n    let MSG_CHANGED;\n    const ConfigView  = {\n        beforeClose: () => {\n            exec.ifExist(Menu, 'hide');\n            isChanged();\n        }\n    };\n    \n    function init(callback) {\n        const editor = store();\n        \n        const getMainEditor = () => CloudCmd.Edit.getEditor();\n        const getEditor = squad(editor, getMainEditor);\n        const auth = squad(authCheck, editor);\n        const listeners = squad(setListeners, editor);\n        \n        const show = callback ? exec : EditFile.show;\n        \n        exec.series([\n            CloudCmd.Edit,\n            call(getEditor),\n            call(auth),\n            call(listeners),\n            show,\n        ], callback);\n    }\n    \n    function getName() {\n        const {name, isDir} = Info;\n        \n        if (isDir)\n            return `${name}.json`;\n        \n        return name;\n    }\n    \n    EditFile.show = (options) => {\n        const config = Object.assign({}, ConfigView, options);\n        \n        Images.show.load();\n        \n        CloudCmd.Edit\n            .getEditor()\n            .setOption('keyMap', 'default');\n        \n        Info.getData((error, data) => {\n            const path = Info.path;\n            const name = getName();\n            \n            if (error)\n                return Images.hide();\n            \n            setMsgChanged(name);\n            \n            CloudCmd.Edit\n                .getEditor()\n                .setValueFirst(path, data)\n                .setModeForPath(name)\n                .enableKey();\n            \n            CloudCmd.Edit.show(config);\n        });\n        \n        return CloudCmd.Edit;\n    };\n    \n    EditFile.hide = () => {\n        CloudCmd.Edit.hide();\n    };\n    \n    function setListeners(editor) {\n        const element = CloudCmd.Edit.getElement();\n        \n        DOM.Events.addOnce('contextmenu', element, setMenu);\n        \n        editor.on('save', (value) => {\n            DOM.setCurrentSize(Format.size(value));\n        });\n    }\n    \n    function authCheck(spawn) {\n        spawn.emit('auth', config('username'), config('password'));\n        spawn.on('reject', () => {\n            Dialog.alert(TITLE, 'Wrong credentials!');\n        });\n    }\n    \n    function setMenu(event) {\n        const position = {\n            x: event.clientX,\n            y: event.clientY\n        };\n        \n        event.preventDefault();\n        \n        !Menu && DOM.loadRemote('menu', (error) => {\n            let noFocus;\n            const editor = CloudCmd.Edit.getEditor();\n            const options = {\n                beforeShow: (params) => {\n                    params.x -= 18;\n                    params.y -= 27;\n                },\n                \n                afterClick: () => {\n                    !noFocus && editor.focus();\n                }\n            };\n            \n            const menuData = {\n                'Save           Ctrl+S' : () => {\n                    editor.save();\n                },\n                'Go To Line     Ctrl+G' : () => {\n                    noFocus = true;\n                    editor.goToLine();\n                },\n                'Cut            Ctrl+X' : () => {\n                    editor.cutToClipboard();\n                },\n                'Copy           Ctrl+C' : () => {\n                    editor.copyToClipboard();\n                },\n                'Paste          Ctrl+V' : () => {\n                    editor.pasteFromClipboard();\n                },\n                'Delete         Del'    : () => {\n                    editor.remove('right');\n                },\n                'Select All     Ctrl+A' : () => {\n                    editor.selectAll();\n                },\n                'Beautify       Ctrl+B' : () => {\n                    editor.beautify();\n                },\n                'Minify         Ctrl+M' : () => {\n                    editor.minify();\n                },\n                'Close          Esc'    : () => {\n                    EditFile.hide();\n                }\n            };\n            \n            if (error)\n                return Dialog.alert(TITLE, error);\n            \n            if (Menu || !MenuIO)\n                return;\n                \n            const element = CloudCmd.Edit.getElement();\n            \n            Menu = new MenuIO(element, options, menuData);\n            Menu.show(position.x, position.y);\n        });\n    }\n    \n    function setMsgChanged(name) {\n        MSG_CHANGED = 'Do you want to save changes to ' + name + '?';\n    }\n    \n    function isChanged() {\n        const editor = CloudCmd.Edit.getEditor();\n        const is = editor.isChanged();\n        \n        if (!is)\n            return;\n        \n        const cancel = false;\n        Dialog.confirm(TITLE, MSG_CHANGED, {cancel})\n            .then(() => {\n                editor.save();\n            });\n    }\n    \n    init(callback);\n    \n    return EditFile;\n};\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/edit-file.js");
/src/dist-dev/modules/edit-file.js-154-
##############################################
/src/dist-dev/modules/markdown.js-152-"use strict";
/src/dist-dev/modules/markdown.js:153:eval("\n\n/*global CloudCmd */\n\nCloudCmd.Markdown = MarkdownProto;\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\nconst load = __webpack_require__(/*! ../dom/load */ \"./client/dom/load.js\");\nconst {Markdown} = __webpack_require__(/*! ../dom/rest */ \"./client/dom/rest.js\");\n\nfunction MarkdownProto(name, options) {\n    Images.show.load('top');\n    \n    exec.series([\n        CloudCmd.View,\n        exec.with(show, name, options),\n    ]);\n    \n    return module.exports;\n}\n\nmodule.exports.show = show;\n\nmodule.exports.hide = () => {\n    CloudCmd.View.hide();\n};\n\n\nfunction show(name, options = {}) {\n    const relativeQuery = '?relative';\n    const {\n        positionLoad,\n        relative,\n    } = options;\n    \n    Images.show.load(positionLoad);\n    \n    if (relative)\n        name += relativeQuery;\n    \n    Markdown.read(name, (error, inner) => {\n        const name = 'div';\n        const className = 'help';\n        \n        const div = load({\n            name,\n            className,\n            inner,\n        });\n        \n        Images.hide();\n        \n        CloudCmd.View.show(div);\n    });\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/markdown.js");
/src/dist-dev/modules/markdown.js-154-
##############################################
/src/dist-dev/modules/terminal.js-152-"use strict";
/src/dist-dev/modules/terminal.js:153:eval("\n\n/* global CloudCmd, gritty */\n\n__webpack_require__(/*! ../../css/terminal.css */ \"./css/terminal.css\");\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst load = __webpack_require__(/*! ../dom/load */ \"./client/dom/load.js\");\nconst DOM = __webpack_require__(/*! ../dom */ \"./client/dom/index.js\");\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\nconst {Dialog} = DOM;\n\nconst TITLE = 'Terminal';\n\nCloudCmd.Terminal = TerminalProto;\n\nconst {Key} = CloudCmd;\n\nlet Element;\nlet Loaded;\nlet Terminal;\n\nconst {config} = CloudCmd;\n\nfunction TerminalProto() {\n    const noop = () => {};\n    \n    if (!config('terminal'))\n        return {\n            show: noop\n        };\n    \n    Images.show.load('top');\n    \n    exec.series([\n        CloudCmd.View,\n        loadAll,\n        create,\n        show,\n    ]);\n    \n    Element = load({\n        name: 'div',\n        className : 'terminal',\n    });\n    \n    return module.exports;\n}\n\nmodule.exports.show = show;\nmodule.exports.hide = hide;\n\nfunction hide () {\n    CloudCmd.View.hide();\n}\n\nfunction getPrefix() {\n    return CloudCmd.PREFIX + '/gritty';\n}\n\nfunction getEnv() {\n    return {\n        ACTIVE_DIR: DOM.getCurrentDirPath,\n        PASSIVE_DIR: DOM.getNotCurrentDirPath,\n        CURRENT_NAME: DOM.getCurrentName,\n        CURRENT_PATH: DOM.getCurrentPath,\n    };\n}\n\nfunction create(callback) {\n    const options = {\n        env: getEnv(),\n        prefix: getPrefix(),\n        socketPath: CloudCmd.PREFIX,\n    };\n    \n    const {socket, terminal} = gritty(Element, options);\n    \n    Terminal = terminal;\n    \n    terminal.on('key', (char, {keyCode, shiftKey}) => {\n        if (shiftKey && keyCode === Key.ESC) {\n            hide();\n        }\n    });\n    \n    socket.on('connect', exec.with(authCheck, socket));\n    exec(callback);\n}\n\nfunction authCheck(spawn) {\n    spawn.emit('auth', config('username'), config('password'));\n    \n    spawn.on('reject', () => {\n        Dialog.alert(TITLE, 'Wrong credentials!');\n    });\n}\n\nfunction show(callback) {\n    if (!Loaded)\n        return;\n    \n    CloudCmd.View.show(Element, {\n        afterShow: () => {\n            if (Terminal)\n                Terminal.focus();\n            \n            exec(callback);\n        }\n    });\n}\n\nfunction loadAll(callback) {\n    const prefix = getPrefix();\n    const url = prefix + '/gritty.js';\n    \n    DOM.load.js(url, (error) => {\n        if (error)\n            return Dialog.alert(TITLE, error.message);\n        \n        Loaded = true;\n        exec(callback);\n    });\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/terminal.js");
/src/dist-dev/modules/terminal.js-154-
##############################################
/src/dist-dev/modules/terminal.js-163-
/src/dist-dev/modules/terminal.js:164:eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=file://cloudcmd/css/terminal.css");
/src/dist-dev/modules/terminal.js-165-
##############################################
/src/dist-dev/modules/upload.js-152-"use strict";
/src/dist-dev/modules/upload.js:153:eval("/* global CloudCmd, DOM */\n\n\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\n\nconst load = __webpack_require__(/*! ../dom/load */ \"./client/dom/load.js\");\nconst Files = __webpack_require__(/*! ../dom/files */ \"./client/dom/files.js\");\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\nconst uploadFiles = __webpack_require__(/*! ../dom/upload-files */ \"./client/dom/upload-files.js\");\n\nCloudCmd.Upload = UploadProto;\n\nfunction UploadProto() {\n    Images.show.load('top');\n    \n    exec.series([\n        CloudCmd.View,\n        show\n    ]);\n    \n    return exports;\n}\n\nmodule.exports.show = show;\nmodule.exports.hide = hide;\n\nfunction show() {\n    Images.show.load('top');\n    \n    Files.get('upload', (error, data) => {\n        const autoSize = true;\n        \n        CloudCmd.View.show(data, {\n            autoSize,\n            afterShow,\n        });\n    });\n    \n    const fontFamily = [\n        '\"Droid Sans Mono\"',\n        '\"Ubuntu Mono\"',\n        '\"Consolas\"',\n        'monospace'\n    ].join(', ');\n    \n    load.style({\n        id      : 'upload-css',\n        inner   : '[data-name=js-upload-file-button] {' +\n                      `font-family: ${fontFamily};`     +\n                      'font-size: 20px;'                +\n                      'width: 97%'                      +\n                '}'\n    });\n}\n\nfunction hide() {\n    CloudCmd.View.hide();\n}\n\nfunction afterShow() {\n    const button = DOM.getByDataName('js-upload-file-button');\n    \n    Images.hide();\n    \n    DOM.Events.add('change', button, ({target}) => {\n        const {files} = target;\n        \n        hide();\n        \n        uploadFiles(files);\n    });\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/upload.js");
/src/dist-dev/modules/upload.js-154-
##############################################
/src/dist-dev/modules/konsole.js-152-"use strict";
/src/dist-dev/modules/konsole.js:153:eval("\n\n/* global CloudCmd */\n/* global Util */\n/* global DOM */\n/* global Console */\n\nconst exec = __webpack_require__(/*! execon */ \"./node_modules/execon/lib/exec.js\");\nconst currify = __webpack_require__(/*! currify/legacy */ \"./node_modules/currify/legacy/index.js\");\nconst Images = __webpack_require__(/*! ../dom/images */ \"./client/dom/images.js\");\nconst {\n    Dialog,\n    CurrentInfo:Info,\n} = DOM;\n\nconst rmLastSlash = (a) => a.replace(/\\/$/, '') || '/';\n\nCloudCmd.Konsole = ConsoleProto;\n\nfunction ConsoleProto() {\n    let konsole;\n    const {config} = CloudCmd;\n    \n    const noop = () => {};\n    const cd = currify((fn, dir) => fn(`cd ${rmLastSlash(dir)}`));\n    \n    if (!config('console'))\n        return {\n            show: noop\n        };\n    \n    const Name = 'Konsole';\n    const TITLE = 'Console';\n    \n    let Element;\n    let Loaded;\n    \n    const Konsole = this;\n    \n    function init() {\n        Images.show.load('top');\n        \n        exec.series([\n            CloudCmd.View,\n            load,\n            create,\n            Konsole.show,\n        ]);\n        \n        Element = DOM.load({\n            name        : 'div',\n            className   : 'console'\n        });\n    }\n    \n    this.hide = () => {\n        CloudCmd.View.hide();\n    };\n    \n    this.clear = () => {\n        konsole.clear();\n    };\n    \n    function getPrefix() {\n        return CloudCmd.PREFIX + '/console';\n    }\n    \n    function getEnv() {\n        return {\n            ACTIVE_DIR: DOM.getCurrentDirPath.bind(DOM),\n            PASSIVE_DIR: DOM.getNotCurrentDirPath.bind(DOM),\n            CURRENT_NAME: DOM.getCurrentName.bind(DOM),\n            CURRENT_PATH: () => {\n                return Info.path;\n            }\n        };\n    }\n    \n    function onPath(path) {\n        if (Info.dirPath === path)\n            return;\n        \n        CloudCmd.loadDir({\n            path,\n        });\n    }\n    \n    const getDirPath = () => {\n        if (config('syncConsolePath'))\n            return Info.dirPath;\n    };\n    \n    function create(callback) {\n        const options = {\n            cwd: getDirPath(),\n            env: getEnv(),\n            prefix: getPrefix(),\n            socketPath: CloudCmd.PREFIX,\n        };\n        \n        konsole = Console(Element, options, (spawn) => {\n            spawn.on('connect', exec.with(authCheck, spawn));\n            spawn.on('path', config.if('syncConsolePath', onPath));\n            \n            CloudCmd.on('active-dir', config.if('syncConsolePath', cd(spawn.handler)));\n            \n            exec(callback);\n        });\n        \n        konsole.addShortCuts({\n            'P': () => {\n                const command = Console.getPromptText();\n                const path = DOM.getCurrentDirPath();\n                \n                Console.setPromptText(command + path);\n            }\n        });\n    }\n    \n    function authCheck(spawn) {\n        spawn.emit('auth', config('username'), config('password'));\n        \n        spawn.on('reject', () => {\n            Dialog.alert(TITLE, 'Wrong credentials!');\n        });\n    }\n    \n    this.show = (callback) => {\n        if (!Loaded)\n            return;\n        \n        CloudCmd.View.show(Element, {\n            afterShow: () => {\n                konsole.focus();\n                exec(callback);\n            }\n        });\n    };\n    \n    function load(callback) {\n        const prefix = getPrefix();\n        const url = prefix + '/console.js';\n        \n        DOM.load.js(url, (error) => {\n            if (error)\n                return Dialog.alert(TITLE, error.message);\n            \n            Loaded = true;\n            Util.timeEnd(Name + ' load');\n            exec(callback);\n        });\n        \n        Util.time(Name + ' load');\n    }\n    \n    init();\n}\n\n\n\n//# sourceURL=file://cloudcmd/client/modules/konsole.js");
/src/dist-dev/modules/konsole.js-154-
