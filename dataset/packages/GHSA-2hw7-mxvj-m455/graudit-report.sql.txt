/src/dist/js/app.min.js-594-
/src/dist/js/app.min.js:595:"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o])}return t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var doVisualUpdates=!0;document.addEventListener("visibilitychange",function(){setTimeout(function(){doVisualUpdates=!document.hidden},1e3)});var dateFormat,app=angular.module("ui",["ngMaterial","ngMdIcons","ngSanitize","ngTouch","sprintf","chart.js","color.picker"]),locale=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;moment.locale(locale),app.config(["$mdThemingProvider","$compileProvider","$mdDateLocaleProvider","$provide",function(e,t,n,a){e.generateThemesOnDemand(!0),a.value("themeProvider",e),t.debugInfoEnabled(!1),t.commentDirectivesEnabled(!1),t.aHrefSanitizationWhitelist(/.*/),n.months=moment.localeData().months(),n.shortMonths=moment.localeData().monthsShort(),n.days=moment.localeData().weekdays(),n.shortDays=moment.localeData().weekdaysMin(),n.formatDate=function(e){return e?moment(e).format(dateFormat||"DD MMM YYYY"):null},n.parseDate=function(e){var t=moment(e,dateFormat||"DD MMM YYYY",!0);return t.isValid()?t.toDate():new Date(NaN)},n.monthHeaderFormatter=function(e){return moment(e).format("MMM YYYY")},n.firstDayOfWeek=moment.localeData()._week.dow}]),app.controller("MainController",["$mdSidenav","$window","UiEvents","$location","$document","$mdToast","$mdDialog","$rootScope","$sce","$timeout","$scope","themeProvider","$mdTheming",function(n,a,m,l,s,d,i,u,r,c,p,h,g){this.menu=[],this.headElementsAppended=[],this.headOriginalElements=[],this.len=0,this.selectedTab=null,this.loaded=!1,this.hideToolbar=!1,this.allowSwipe=!1,this.lockMenu="false",this.allowTempTheme=!0;var f,w,b=this,v=[],y=0,T=!0;function k(e){var t=b.menu.length;if(1<t)for(var n=+y+e;n!=y;n+=e)if((n%=t)<0&&(n+=t),!b.menu[n].disabled&&!b.menu[n].hidden)return b.select(n),void(y=n)}function O(e){var t=Object.keys(e.themeState),n={};if(!0!==b.allowAngularTheme)for(var a=0;a<t.length;a++){for(var o=t[a].split("-"),i=1;i<o.length;i++)o[i]=o[i].charAt(0).toUpperCase()+o[i].slice(1);var r=o.join(""),l=e.themeState[t[a]].value;n["@"+r]=l}else n["@pageBackgroundColor"]=S(b.angularColors.background.name),n["@pageTitlebarBackgroundColor"]=S(b.angularColors.primary.name),n["@pageSidebarBackgroundColor"]=S(b.angularColors.background.name),n["@groupTextColor"]=!0===b.isDark?"#FFFFFF":"#000000",n["@groupBackgroundColor"]=S(b.angularColors.background.name),n["@groupBorderColor"]=S(b.angularColors.accent.name),n["@widgetTextColor"]=!0===b.isDark?"#FFFFFF":"#000000",n["@widgetBackgroundColor"]=S(b.angularColors.primary.name),n["@widgetBorderColor"]=S(b.angularColors.background.name);void 0===b.allowTempTheme&&(b.allowTempTheme=!0),n["@nrTemplateTheme"]=b.allowTempTheme,n["@nrTheme"]=!b.allowAngularTheme,n["@nrUnitHeight"]=b.sizes.sy/2+"px",less.modifyVars(n)}function S(e){return{red:"#F44336",pink:"#E91E63",purple:"#9C27B0",deeppurple:"#673AB7",indigo:"#3F51B5",blue:"#2196F3",lightblue:"#03A9F4",cyan:"#00BCD4",teal:"#009688",green:"#4CAF50",lightgreen:"#8BC34A",lime:"#CDDC39",yellow:"#FFEB3B",amber:"#FFC107",orange:"#FF9800",deeporange:"#FF5722",brown:"#795548",grey:"#9E9E9E",bluegrey:"#607D8B"}[e.replace("-","").toLowerCase()]}function C(e){var t=s.find("head").find(e.expression)[0];angular.element(t).replaceWith(e.html)}function P(e){var t=s.find("head").children();e.childrenIndex.forEach(function(e){t.hasOwnProperty(e)&&t[e].parentNode.removeChild(t[e])})}function D(a,o){var i=s.find("head"),e=i.children().length,r=angular.element("<head></head>");r.append(o);if(["meta[charset]",'meta[name="viewport"]','meta[name="apple-mobile-web-app-capable"]','meta[name="apple-mobile-web-app-status-bar-style"]','meta[name="apple-mobile-web-app-title"]','meta[name="mobile-web-app-capable"]','link[rel="icon"]','link[rel="shortcut icon"]','link[rel="apple-touch-icon"]'].forEach(function(e){var t=r.find(e);if(0<t.length){var n=i.find(e)[0];b.headOriginalElements.push({id:a,expression:e,html:n}),angular.element(n).replaceWith(t[0]),(o=r.html()).trim()}}),""!==o){i.append(o);for(var t=[],n=e;n<i.children().length;n++)t.push(n);e=i.children().length,b.headElementsAppended.push({id:a,childrenIndex:t})}}function E(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.id===e)return a;if(a.items){var o=E(e,a.items);if(o)return o}}}function F(e,t){var n=e&&Array.isArray(e)?e:[e];return(n=n.map(function(e){return e.toLowerCase().replace(/\s+/g,"_")})).includes(t.toLowerCase().replace(/\s+/g,"_"))}p.onSwipeLeft=function(){b.allowSwipe&&k(-1)},p.onSwipeRight=function(){b.allowSwipe&&k(1)},p.$on("$locationChangeSuccess",function(e,t,n,a,o){if(l.path()!=="/"+y){var i=parseInt(l.path().split("/")[1],10);if(!isNaN(i)){var r=b.menu[i];r&&b.open(r,i)}}}),u.$on("collapse",function(e,t,n){m.emit("ui-collapse",{group:t,state:n})}),this.toggleSidenav=function(){n("left").toggle()},this.select=function(e){b.selectedTab=b.menu[e],0<b.menu.length&&n("left")&&n("left").close(),y=e,m.emit("ui-change",y),l.path(e)},this.open=function(e,t){void 0===e.link?this.select(t):("newtab"===e.target?a.open(e.link,e.name):"thistab"===e.target?a.open(e.link,"_self"):("string"==typeof b.menu[t].link&&(b.menu[t].link=r.trustAsResourceUrl(b.menu[t].link)),b.select(t)),n("left").close())},p.location=l,this.getMenuName=function(e){return void 0!==e.link?e.name:e.header},m.connect(function(e,t){var n;T=!1,m.emit("ui-params",l.search()),b.menu=e.menu,b.globals=e.globals,b.nothing=!1,e.site&&(n=b.name=e.site.name,b.hideToolbar="true"==e.site.hideToolbar,b.allowSwipe="true"==e.site.allowSwipe,b.lockMenu=e.site.lockMenu,void 0===e.site.allowTempTheme?b.allowTempTheme=!0:(b.allowTempTheme="true"==e.site.allowTempTheme,b.allowAngularTheme="none"==e.site.allowTempTheme),dateFormat=e.site.dateFormat||"DD/MM/YYYY",e.site.hasOwnProperty("sizes")&&(sizes.setSizes(e.site.sizes),b.sizes=e.site.sizes)),e.theme&&e.theme.angularTheme&&(h.theme("default").primaryPalette(e.theme.angularTheme.primary||"indigo").accentPalette(e.theme.angularTheme.accents||"blue").warnPalette(e.theme.angularTheme.warn||"red").backgroundPalette(e.theme.angularTheme.background||"grey"),"dark"===e.theme.angularTheme.palette&&(h.theme("default").dark(),b.isDark=!0),g.generateTheme("default"),b.angularColors=h._THEMES.default.colors),s[0].theme=e.theme,e.title&&(n=e.title),s[0].title=n||"Node-RED Dashboard",$("meta[name=apple-mobile-web-app-title]").attr("content",n||"Node-RED");var a=parseInt(l.path().substr(1));"speechSynthesis"in window&&(v=window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=function(){v=window.speechSynthesis.getVoices()});var o=function(){b.selectedTab&&"object"==typeof b.selectedTab.theme?(b.selectedTab.theme.themeState["widget-borderColor"]=b.selectedTab.theme.themeState["widget-borderColor"]||b.selectedTab.theme.themeState["group-backgroundColor"],O(b.selectedTab.theme)):"object"==typeof e.theme&&e.theme.themeState["base-color"].value&&O(e.theme),null!==b.selectedTab&&void 0!==b.selectedTab.link&&(b.selectedTab.link=r.trustAsResourceUrl(b.selectedTab.link)),e.hasOwnProperty("theme")?$("meta[name=theme-color]").attr("content",e.theme.themeState["page-titlebar-backgroundColor"].value||"#097479"):$("meta[name=theme-color]").attr("content","#097479"),d.hide(),b.headElementsAppended.forEach(function(e){P(e)}),b.headElementsAppended=[],b.headOriginalElements.forEach(function(e){C(e)}),0<b.globals.length&&b.globals.forEach(function(e){void 0!==e.format&&""!==e.format&&D(e.id,e.format)}),m.emit("ui-change",a),function(){var e=!1;for(var t in b.menu)if(b.menu.hasOwnProperty(t))for(var n in"undefined"!=typeof localStorage&&("true"==localStorage.getItem("th"+t+b.menu[t].header)&&(!0===b.menu[t].hidden?localStorage.removeItem("th"+t+b.menu[t].header):b.menu[t].hidden=!0,e=!0),"false"==localStorage.getItem("th"+t+b.menu[t].header)&&(!1===b.menu[t].hidden?localStorage.removeItem("th"+t+b.menu[t].header):b.menu[t].hidden=!1,e=!0),"true"==localStorage.getItem("td"+t+b.menu[t].header)&&(!0===b.menu[t].disabled?localStorage.removeItem("td"+t+b.menu[t].header):b.menu[t].disabled=!0,e=!0),"false"==localStorage.getItem("td"+t+b.menu[t].header)&&(!1===b.menu[t].disabled?localStorage.removeItem("td"+t+b.menu[t].header):b.menu[t].disabled=!1,e=!0)),b.menu[t].items)if(b.menu[t].items.hasOwnProperty(n)){var a=(b.menu[t].header+" "+b.menu[t].items[n].header.name).replace(/ /g,"_");"undefined"!=typeof localStorage&&"true"==localStorage.getItem("g"+a)&&(e=b.menu[t].items[n].header.config.hidden=!0)}!0===e&&$(window).trigger("resize")}(),t()};!isNaN(a)&&a<b.menu.length&&!b.menu[a].disabled?(b.selectedTab=b.menu[a],o()):c(function(){var n=null;b.menu.some(function(e,t){if(void 0===e.target||"iframe"===e.target)return!e.disabled&&(n=t,!0)}),null!==n?(b.open(b.menu[n],n),o()):b.nothing=!0},50),b.len=b.menu.length},function(){b.loaded=!0,p.$apply()}),m.on(function(e){var t,n,a,o,i,r,l;if(e.hasOwnProperty("msg")&&"global"===e.msg.templateScope)if(r=e.id,l=!1,b.headOriginalElements.some(function(e){if(e.id===r)return l=e,!0}),t=l)o=t,i=e.msg.template,C(o),D(o.id,i);else{if(n=e.id,a=!1,b.headElementsAppended.some(function(e){if(e.id===n)return a=e,!0}),!(t=a))return;!function(e,t){P(e);var n=b.headElementsAppended.indexOf(e);0<=n&&b.headElementsAppended.splice(n,1),D(e.id,t)}(t,e.msg.template)}else{if(void 0===(t=E(e.id,b.menu)))return;for(var s in e)if(e.hasOwnProperty(s)){if("id"===s)continue;t[s]=e[s]}t.hasOwnProperty("me")&&t.me.hasOwnProperty("processInput")?t.me.processInput(e):t.hasOwnProperty("isOptionsValid")&&t.hasOwnProperty("newOptions")&&(t.options=t.newOptions)}p.$apply()}),m.on("disconnect",function(e){!T&&doVisualUpdates&&(d.show({template:'<md-toast><div class="md-toast-error">&#x2718; &nbsp; Connection lost</div></md-toast>',position:"top right",hideDelay:6e6}),T=!0)}),m.on("connect_error",function(e){"TransportError"===e.type&&401===e.description&&function(){if(!((new Date).getTime()-1*((e=window.location.search.match(/[?&]random=([^&]*)/))&&e[1]||0)<6e4)){var e,t=window.location.search;(t=t.replace(/[?&]random=([^&]*)/,"")).startsWith("?")||(t="?"+t),t+="&random="+(new Date).getTime();var n=window.location.origin;n+=window.location.pathname,n+=t,n+=window.location.hash,window.location=n}}()}),m.on("show-toast",function(t){if(!0!==t.raw){var e=document.createElement("div");e.textContent=t.message,t.message=e.innerHTML}if(!0===t.dialog){var n;if(""==t.message)return void i.cancel();t.cancel&&t.prompt?(n=i.prompt().title(t.title).htmlContent(t.message).initialValue("").ariaLabel(t.ok+" or "+t.cancel).ok(t.ok).cancel(t.cancel))._options.focusOnOpen=!1:t.cancel?(n=i.confirm().title(t.title).htmlContent(t.message).ariaLabel(t.ok+" or "+t.cancel).ok(t.ok).cancel(t.cancel))._options.focusOnOpen=!1:n=i.alert().title(t.title).htmlContent(t.message).ariaLabel(t.ok).ok(t.ok),n._options.template='<md-dialog md-theme="{{ dialog.theme || dialog.defaultTheme }}" aria-label="{{ dialog.ariaLabel }}" ><md-dialog-content class="md-dialog-content" role="document" tabIndex="-1"><h2 class="md-title">{{ dialog.title }}</h2><div ng-if="::dialog.mdHtmlContent" class="md-dialog-content-body"ng-bind-html="::dialog.mdHtmlContent | trusted"></div><div ng-if="::!dialog.mdHtmlContent" class="md-dialog-content-body"><p>{{::dialog.mdTextContent}}</p></div><md-input-container md-no-float ng-if="::dialog.$type == \'prompt\'" class="md-prompt-input-container"><input ng-keypress="dialog.keypress($event)" md-autofocus ng-model="dialog.result"placeholder="{{::dialog.placeholder}}" ng-required="dialog.required"></md-input-container></md-dialog-content><md-dialog-actions><md-button ng-if="dialog.$type === \'confirm\' || dialog.$type === \'prompt\'"ng-click="dialog.abort()" class="md-primary md-cancel-button">{{ dialog.cancel }}</md-button><md-button ng-click="dialog.hide()" class="md-primary md-confirm-button" md-autofocus="dialog.$type===\'alert\'" ng-disabled="dialog.required && !dialog.result">{{ dialog.ok }}</md-button></md-dialog-actions></md-dialog>',i.show(n,{panelClass:"nr-dashboard-dialog"}).then(function(e){t.msg.payload=t.ok,1!=e&&(t.msg.payload=e),null==e&&(t.msg.payload=""),m.emit({id:t.id,value:t})},function(){t.msg.payload=t.cancel,m.emit({id:t.id,value:t})})}else if(t.hasOwnProperty("message")||t.hasOwnProperty("title")){var a=u.$new();(a.toast=t).hasOwnProperty("message")&&""==t.message&&(t.displayTime=1);var o={scope:a,templateUrl:"partials/toast.html",hideDelay:t.displayTime,position:t.position};d.show(o)}}),m.on("ui-control",function(e){if(!e.hasOwnProperty("socketid")||e.socketid===m.id){if(e.hasOwnProperty("control")){var t=E(e.id,b.menu);for(var n in e.control)e.control.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n]=e.control[n])}if(e.hasOwnProperty("tabs")&&"object"==typeof e.tabs)for(var a in b.menu)b.menu.hasOwnProperty(a)&&(e.tabs.hasOwnProperty("show")&&F(e.tabs.show,b.menu[a].header)&&(b.menu[a].hidden=!1,localStorage.setItem("th"+a+b.menu[a].header,!1)),e.tabs.hasOwnProperty("hide")&&F(e.tabs.hide,b.menu[a].header)&&(b.menu[a].hidden=!0,localStorage.setItem("th"+a+b.menu[a].header,!0)),e.tabs.hasOwnProperty("enable")&&F(e.tabs.enable,b.menu[a].header)&&(b.menu[a].disabled=!1,localStorage.setItem("td"+a+b.menu[a].header,!1)),e.tabs.hasOwnProperty("disable")&&F(e.tabs.disable,b.menu[a].header)&&(b.menu[a].disabled=!0,localStorage.setItem("td"+a+b.menu[a].header,!0)));if(e.hasOwnProperty("tab")){if("string"==typeof e.tab){if(""===e.tab&&m.emit("ui-refresh",{}),"+1"===e.tab)return k(1),void p.$apply();if("-1"===e.tab)return k(-1),void p.$apply();for(var o in b.menu){if(e.tab==b.menu[o].header)return b.menu[o].disabled||b.select(o),void p.$apply();if(e.tab==b.menu[o].name)return b.menu[o].disabled||b.open(b.menu[o],o),void p.$apply()}}var i=parseInt(e.tab);if(Number.isNaN(i)||i<0)return;if(i<b.menu.length)return b.menu[i].disabled||b.open(b.menu[i],i),void p.$apply()}if(e.hasOwnProperty("group")&&"object"==typeof e.group)for(var r in b.menu)if(b.menu.hasOwnProperty(r)){var l;for(var s in b.menu[r].items)if(b.menu[r].items.hasOwnProperty(s)){var d=(b.menu[r].header+" "+b.menu[r].items[s].header.name).replace(/ /g,"_");e.group.hasOwnProperty("show")&&-1<e.group.show.indexOf(d)&&(b.menu[r].items[s].header.config.hidden=void 0,localStorage.removeItem("g"+d),l=d),e.group.hasOwnProperty("hide")&&-1<e.group.hide.indexOf(d)&&(b.menu[r].items[s].header.config.hidden=!0,localStorage.setItem("g"+d,!0)),e.group.hasOwnProperty("close")&&-1<e.group.close.indexOf(d)&&"undefined"!=typeof localStorage&&"false"==localStorage.getItem(d)&&$("#"+d+" > div > p > span > i").trigger("click"),e.group.hasOwnProperty("open")&&-1<e.group.open.indexOf(d)&&"undefined"!=typeof localStorage&&"true"==localStorage.getItem(d)&&$("#"+d+" > div > p > span > i").trigger("click"),$(window).trigger("resize")}e.group.hasOwnProperty("focus")&&l&&setTimeout(function(){(l=$(window)[0].document.getElementById(l))&&l.scrollIntoView()},50)}p.$apply()}}),m.on("ui-audio",function(n){if(n.reset)w?(w.disconnect(),w.stop(0),w=null,m.emit("ui-audio","reset")):window.speechSynthesis.speaking&&(window.speechSynthesis.cancel(),m.emit("ui-audio","reset"));else{if(!n.always){var e;for(var t in b.menu)n.tabname===b.menu[t].header&&(e=t);if(e!=parseInt(l.path().substr(1)))return}if(n.hasOwnProperty("tts"))if(0<v.length){var a=new SpeechSynthesisUtterance(n.tts);a.onerror=function(e){m.emit("ui-audio","error: "+e.error)},a.onend=function(){m.emit("ui-audio","complete")};for(var o=0;o<v.length;o++)if(v[o].voiceURI===n.voice){a.voice=v[o];break}m.emit("ui-audio","playing"),console.log("VOL",n.vol),a.volume=n.vol/100||1,window.speechSynthesis.speak(a)}else{console.log("This Browser does not support Text-to-Speech");var i=u.$new();i.toast={message:n.tts,title:"Computer says..."},d.show({scope:i,position:"top right",templateUrl:"partials/toast.html"})}if(n.hasOwnProperty("audio")){window.hasOwnProperty("AudioContext")||(window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext);try{f=f||new AudioContext,(w=f.createBufferSource()).onended=function(){m.emit("ui-audio","complete")};var r=new Uint8Array(n.audio);f.decodeAudioData(r.buffer,function(e){if(w.buffer=e,n.vol){var t=f.createGain();t.gain.value=n.vol/100,t.connect(f.destination),w.connect(t)}else w.connect(f.destination);w.start(0),m.emit("ui-audio","playing")},function(){m.emit("ui-audio","error")})}catch(e){m.emit("ui-audio","error")}}}})}]);
/src/dist/js/app.min.js-596-angular.module("ui").service("UiEvents",function(){var e="update-value",t=this;this.connect=function(o,n){var i;i="https:"===location.protocol?io({path:location.pathname+"socket.io",secure:!0}):io({path:location.pathname+"socket.io"}),this.emit=function(n,o){void 0===o&&(o=n,n=e),o.socketid=i.id,i.emit(n,o)},this.on=function(n,o){void 0===o&&(o=n,n=e);var t=function(n){o(n)};return i.on(n,t),function(){i.removeListener(n,t)}},i.on("ui-controls",function(n){o(n,function(){i.emit("ui-replay-state")})}),i.on("ui-replay-done",function(){n()}),i.on("connect",function(){t.id=i.id})}});
