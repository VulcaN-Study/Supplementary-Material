<report_mosca>
 <Path>/src/main.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 429 -                              adapter.timerRepo = setTimeout(() => updateRegister(), adapter.config.autoUpdate * ONE_HOUR_MS + 1);

 Line: 436 -                      adapter.timerRepo = setTimeout(() => updateRegister(), interval);

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/admin/words.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 0 -  // DO NOT EDIT THIS FILE!!! IT WILL BE AUTOMATICALLY GENERATED FROM src/i18n

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/lib/socket.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 235 -                  socket._sessionTimer = setTimeout(() => {

 Line: 571 -              that.infoTimeout = setTimeout(updateConnectedInfo, 1000);

 Line: 590 -                      that.infoTimeout = setTimeout(updateConnectedInfo, 1000);

 Line: 878 -                          setTimeout(function () {

 Line: 894 -                      typeof callback === 'function' && setTimeout(() => callback(res), 0));

 Line: 909 -                  that.infoTimeout = setTimeout(updateConnectedInfo, 1000);

 Line: 1187 -              setTimeout(function () {

 Line: 1214 -              setTimeout(function () {

 Line: 1288 -          setInterval(function () {

 Line: 1336 -              that.infoTimeout = setTimeout(updateConnectedInfo, 1000);

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/vendor.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 14 -  (){var a=this,l=arguments,c=function(){var e,c;if(!(t<r)){if((e=n.apply(a,l))===i.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,C.isFunction(c)?s?c.call(e,o(r,i,N,s),o(r,i,O,s)):(r++,c.call(e,o(r,i,N,s),o(r,i,O,s),o(r,i,N,i.notifyWith))):(n!==N&&(a=void 0,l=[e]),(s||i.resolveWith)(a,l))}},h=s?c:function(){try{c()}catch(e){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(e,h.stackTrace),t+1>=r&&(n!==O&&(a=void 0,l=[e]),i.rejectWith(a,l))}};t?h():(C.Deferred.getStackHook&&(h.stackTrace=C.Deferred.getStackHook()),e.setTimeout(h))}}return C.Deferred(function(e){i[0][3].add(o(0,e,C.isFunction(s)?s:N,e.notifyWith)),i[1][3].add(o(0,e,C.isFunction(t)?t:N)),i[2][3].add(o(0,e,C.isFunction(n)?n:O))}).promise()},promise:function(e){return null!=e?C.extend(e,s):s}},r={};return C.each(i,function(e,t){var o=t[2],a=t[5];s[t[1]]=o.add,a&&o.add(function(){n=a},i[3-e][2].disable,i[0][2].lock),o.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=o.fireWith}),s.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),s=r.call(arguments),o=C.Deferred(),a=function(e){return function(i){n[e]=this,s[e]=arguments.length>1?r.call(arguments):i,--t||o.resolveWith(n,s)}};if(t<=1&&(P(e,o.done(a(i)).resolve,o.reject,!t),"pending"===o.state()||C.isFunction(s[i]&&s[i].then)))return o.then();for(;i--;)P(s[i],a(i),o.reject);return o.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&z.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},C.readyException=function(t){e.setTimeout(function(){throw t})};var j=C.Deferred();function H(){n.removeEventListener("DOMContentLoaded",H),e.removeEventListener("load",H),C.ready()}C.fn.ready=function(e){return j.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||j.resolveWith(n,[C] Line: 15 -  .then=j.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e.setTimeout(C.ready):(n.addEventListener("DOMContentLoaded",H),e.addEventListener("load",H));var W=function(e,t,i,n,s,r,o){var a=0,l=e.length,c=null==i;if("object"===C.type(i))for(a in s=!0,i)W(e,t,a,i[a],!0,r,o);else if(void 0!==n&&(s=!0,C.isFunction(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(C(e),i)})),t))for(;a<l;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return s?e:c?t.call(e):l?t(e[0],i):r},V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function U(){this.expando=C.expando+U.uid++}U.uid=1,U.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,s=this.cache(e);if("string"==typeof t)s[C.camelCase(t)]=i;else for(n in t)s[C.camelCase(n)]=t[n];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][C.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(C.camelCase):t=(t=C.camelCase(t))in n?[t]:t.match(R)||[],i=t.length;for(;i--;)delete n[t[i]]}(void 0===t||C.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var q=new U,K=new U,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function J(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Y,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:G.test(e)?JSON.parse(e):e)}(i)}catch(e){}K.set(e,t,i)}else i=void 0;return i}C.extend({hasData:function(e){return K.hasData(e)||q.hasData(e)},data:function(e,t,i){return K.access(e,t,i)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,i){return q.access(e,t,i)},_removeDat Line: 26 -  =Ye,Ye.prototype={constructor:Ye,init:function(e,t,i,n,s,r){this.elem=e,this.prop=i,this.easing=s||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(C.cssNumber[i]?"":"px")},cur:function(){var e=Ye.propHooks[this.prop];return e&&e.get?e.get(this):Ye.propHooks._default.get(this)},run:function(e){var t,i=Ye.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Ye.propHooks._default.set(this),this}},Ye.prototype.init.prototype=Ye.prototype,Ye.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},Ye.propHooks.scrollTop=Ye.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=Ye.prototype.init,C.fx.step={};var Je,Xe,Ze=/^(?:toggle|show|hide)$/,Qe=/queueHooks$/;function et(){Xe&&(!1===n.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(et):e.setTimeout(et,C.fx.interval),C.fx.tick())}function tt(){return e.setTimeout(function(){Je=void 0}),Je=C.now()}function it(e,t){var i,n=0,s={height:e};for(t=t?1:0;n<4;n+=2-t)s["margin"+(i=Q[n])]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function nt(e,t,i){for(var n,s=(st.tweeners[t]||[]).concat(st.tweeners["*"]),r=0,o=s.length;r<o;r++)if(n=s[r].call(i,t,e))return n}function st(e,t,i){var n,s,r=0,o=st.prefilters.length,a=C.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Je||tt(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),r=0,o=c.tweens.length;r<o;r++) Line: 29 -  )},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=q.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],r=C.timers,o=n?n.length:0;for(i.finish=!0,C.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),C.each(["toggle","show","hide"],function(e,t){var i=C.fn[t];C.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(it(t,!0),e,n,s)}}),C.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){C.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),C.timers=[],C.fx.tick=function(){var e,t=0,i=C.timers;for(Je=C.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||C.fx.stop(),Je=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){Xe||(Xe=!0,et())},C.fx.stop=function(){Xe=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(t,i){return t=C.fx&&C.fx.speeds[t]||t,i=i||"fx",this.queue(i,function(i,n){var s=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(s)}})},function(){var e=n.createElement("input"),t=n.createElement("select").appendChild(n.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=n.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var rt,ot=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return W(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?C.prop(e,t,i):(1===r&&C.isXMLDoc(e)||(s=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?rt:void 0)),void 0!==i?null===i?void C.removeAttr(e,t):s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):s&&"get"in s&&null!==(n=s.get(e,t))?n:null==(n=C.find.attr(e,t)) Line: 35 -  unction(e){var t;if(e)if(h)_.always(e[_.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||w;return s&&s.abort(t),x(0,t),this}};if(A.promise(_),f.url=((t||f.url||gt.href)+"").replace(kt,gt.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(R)||[""],null==f.crossDomain){c=n.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=St.protocol+"//"+St.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=C.param(f.data,f.traditional)),Bt(Et,f,i,_),h)return _;for(d in(u=C.event&&f.global)&&0==C.active++&&C.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!xt.test(f.type),r=f.url.replace(It,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(yt,"+")):(g=f.url.slice(r.length),f.data&&(r+=(pt.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(wt,"$1"),g=(pt.test(r)?"&":"?")+"_="+ft+++g),f.url=r+g),f.ifModified&&(C.lastModified[r]&&_.setRequestHeader("If-Modified-Since",C.lastModified[r]),C.etag[r]&&_.setRequestHeader("If-None-Match",C.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&_.setRequestHeader("Content-Type",f.contentType),_.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Dt+"; q=0.01":""):f.accepts["*"]),f.headers)_.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(p,_,f)||h))return _.abort();if(w="abort",v.add(f.complete),_.done(f.success),_.fail(f.error),s=Bt(Ft,f,i,_)){if(_.readyState=1,u&&m.trigger("ajaxSend",[_,f]),h)return _;f.async&&f.timeout>0&&(l=e.setTimeout(function(){_.abort("timeout")},f.timeout));try{h=!1,s.send(y,x)}catch(e){if(h)throw e;x(-1,e)}}else x(-1,"No Transport");function x(t,i,n,a){var c,d,g,y,I,w=i;h||(h=!0,l&&e.clearTimeout(l),s=void 0,o=a||"",_.readyState=t>0?4:0,c=t>=200&&t<300||304===t,n&&(y=function(e,t,i){for(var n,s,r,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.sh Line: 37 -  is)),this},wrapInner:function(e){return C.isFunction(e)?this.each(function(t){C(this).wrapInner(e.call(this,t))}):this.each(function(){var t=C(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=C.isFunction(e);return this.each(function(i){C(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Mt={0:200,1223:204},Lt=C.ajaxSettings.xhr();f.cors=!!Lt&&"withCredentials"in Lt,f.ajax=Lt=!!Lt,C.ajaxTransport(function(t){var i,n;if(f.cors||Lt&&!t.crossDomain)return{send:function(s,r){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(o,s[o]);i=function(e){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Mt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script" Line: 46 -  =function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,s=e(this[0]);s.length&&s[0]!==document;){if(("absolute"===(i=s.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var s,r=e.ui[t].prototype;for(s in n)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([i,n[s]])},call:function(e,t,i,n){var s,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(s=0;r.length>s;s++)e.options[r[s][0]]&&r[s][1].apply(e.element,i)}};var l=0,c=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,s,r;for(r=0;null!=(s=i[r]);r++)try{(n=e._data(s,"events"))&&n.remove&&e(s).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var s,r,o,a,l={},c=t.split(".")[0];return t=t.split(".")[1],s=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},r=e[c][t],o=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(a=new i).options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},s=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i Line: 49 -  .bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,r,o=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?!0===s||"number"==typeof s?i:s.effect||i:t;"number"==typeof(s=s||{})&&(s={duration:s}),o=!e.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),o&&e.effects&&e.effects.effect[a]?n[t](s):a!==t&&n[a]?n[a](s.duration,s.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}}),e.widget;var h=!1;e(document).mouseup(function(){h=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDeleg Line: 50 -  mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!h){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,s=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!s&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),h=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),h=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){ Line: 99 -  ete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var u,d,g="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},m=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,p),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,n="checkbox"===this.type||"radio"===this.type,s=n?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===u&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(s)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement. Line: 108 -  ("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var s=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-o:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+r>c&&c>r?Math.abs(r+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),s=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return[(i=e(t).offset()).left,i.top]},_hideDatepicker:function(t){var i,n,s,r,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),n=this._get(o,"duration"),s=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),n,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,(r=this._get(o,"onClose"))&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkEx Line: 141 -  s.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;!1!==i&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(!0!==i){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var n=this,s=this.tabs.eq(t),r=s.find(".ui-tabs-anchor"),o=this._getPanelForTab(s),a={tab:s,panel:o},l=function(e,t){"abort"===t&&n.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr};this._isLocal(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,s){setTimeout(function(){o.html(e),n._trigger("load",i,a),l(s,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,r){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:r},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return  Line: 143 -  updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,r=t?t.type:null;return"string"==typeof n?this._open(t,e,n):void((i=n.call(e[0],function(i){s._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=r),this._open(t,e,i))})}))&&this._open(t,e,i))},_open:function(t,i,n){function s(e){c.of=e,o.is(":hidden")||o.position(c)}var r,o,a,l,c=e.extend({},this.options.position);if(n){if(r=this._find(i))return void r.tooltip.find(".ui-tooltip-content").html(n);i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),r=this._tooltip(i),o=r.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),n.clone?(l=n.clone()).removeAttr("id").find("[id]").removeAttr("id"):l=n,e("<div>").html(l).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:s}),s(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){o.is(":visible")&&(s(c.of),clearInterval(a))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(n.mouseleave="close"),t&&"focusin"!==t.type||(n.focusout="close"),this._on(!0,i,n)},close:function(t){var i,n=this,s=e(t?t.currentTarget:this.element),r=this._find(s);return r?(i=r.tooltip,void(r.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),r.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(thi Line: 161 -  d("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(t){var n=e(this),s=this.value,r=this.checked,o=i.element.find("option");this.disabled||!1===i._trigger("click",t,{value:s,text:this.title,checked:r})?t.preventDefault():(n.focus(),n.attr("aria-selected",r),o.each(function(){this.value===s?this.selected=r:i.options.multiple||(this.selected=!1)}),i.options.multiple||(i.labels.removeClass("ui-state-active"),n.closest("label").toggleClass("ui-state-active",r),i.close()),i.element.trigger("change"),setTimeout(e.proxy(i.update,i),10))}),e(document).bind("mousedown.multiselect",function(t){i._isOpen&&!e.contains(i.menu[0],t.target)&&!e.contains(i.button[0],t.target)&&t.target!==i.button[0]&&i.close()}),e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(i.refresh,i),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),t=this.options;/\d/.test(t.minWidth)&&e<t.minWidth&&(e=t.minWidth),this.button.width(e)},_setMenuWidth:function(){var e=this.menu,t=this.button.outerWidth()-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10)-parseInt(e.css("border-right-width"),10)-parseInt(e.css("border-left-width"),10);e.width(t||this.button.outerWidth())},_traverse:function(t,i){var n,s=38===t||37===t;(n=(n=e(i)).parent()[s?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[s?"last":"first"]()).length?n.find("label").trigger("mouseover"):(n=this.menu.find("ul").last(),this.menu.find("label")[s?"last":"first"]().trigger("mouseover"),n.scrollTop(s?n.height():0))},_toggleState:function(e,t){return function(){this.disabled||(this[e]=t),t?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(t,i){var n=i&&i.length?i:this.inputs,s=this;n.each(this._toggleState("checked",t)),n.eq(0).focus(),this.update();var r=n.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&-1<e.inArray(this.value,r)&&s._toggleState("selected",t).call(this)}),n.length&&this.element.tri Line: 179 -  ,i(e)})},t.addMultiMouseDownListener=function(e,i,n,s){var r,a,l,c=0,h={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(0!==t.getButton(e)?c=0:e.detail>1?++c>4&&(c=1):c=1,o.isIE){var u=Math.abs(e.clientX-r)>5||Math.abs(e.clientY-a)>5;l&&!u||(c=1),l&&clearTimeout(l),l=setTimeout(function(){l=null},i[c-1]||600),1==c&&(r=e.clientX,a=e.clientY)}if(e._clicks=c,n[s]("mousedown",e),c>4)c=0;else if(c>1)return n[s](h[c],e)}),o.isOldIE&&t.addListener(e,"dblclick",function(e){c=2,l&&clearTimeout(l),l=setTimeout(function(){l=null},i[c-1]||600),n[s]("mousedown",e),n[s](h[c],e)})};var a=!o.isMac||!o.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[a(e)]};var l=null,c=0;if(t.addCommandKeyListener=function(e,i){var r=t.addListener;if(o.isOldGecko||o.isOpera&&!("KeyboardEvent"in window)){var a=null;r(e,"keydown",function(e){a=e.keyCode}),r(e,"keypress",function(e){return n(i,e,a)})}else{var c=null;r(e,"keydown",function(e){l[e.keyCode]=(l[e.keyCode]||0)+1;var t=n(i,e,e.keyCode);return c=e.defaultPrevented,t}),r(e,"keypress",function(e){c&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),c=null)}),r(e,"keyup",function(e){l[e.keyCode]=null}),l||(s(),r(window,"focus",s))}},"object"==typeof window&&window.postMessage&&!o.isOldIE){t.nextTick=function(e,i){i=i||window;var n="zero-timeout-message-1";t.addListener(i,"message",function s(r){r.data==n&&(t.stopPropagation(r),t.removeListener(i,"message",s),e())}),i.postMessage(n,"*")}}t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),define("ace/lib/lang",["require","exports","module"],function(e,t,i){"use strict";t.last=function(e){return e[e.length-1]},t.stri Line: 180 -  tion(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var i="";t>0;)1&t&&(i+=e),(t>>=1)&&(e+=e);return i};var n=/^\s\s*/,s=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(n,"")},t.stringTrimRight=function(e){return e.replace(s,"")},t.copyObject=function(e){var t={};for(var i in e)t[i]=e[i];return t},t.copyArray=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i]&&"object"==typeof e[i]?t[i]=this.copyObject(e[i]):t[i]=e[i];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;var i;if(Array.isArray(t)){i=[];for(var n=0;n<t.length;n++)i[n]=e(t[n]);return i}var s=t.constructor;if(s===RegExp)return t;for(var n in i=s(),t)i[n]=e(t[n]);return i},t.arrayToMap=function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var i in e)t[i]=e[i];return t},t.arrayRemove=function(e,t){for(var i=0;i<=e.length;i++)t===e[i]&&e.splice(i,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var i=[];return e.replace(t,function(e){i.push({offset:arguments[arguments.length-2],length:e.length})}),i},t.deferredCall=function(e){var t=null,i=function(){t=null,e()},n=function(e){return n.cancel(),t=setTimeout(i,e||0),n};return n.schedule=n,n.call=function(){return this.cancel(),e(),n},n.cancel=function(){return clearTimeout(t),t=null,n},n.isPending=function(){return t},n},t.delayedCall=function(e,t){var i=null,n=function(){i=null,e()},s=function(e){null==i&&(i=setTimeout(n,e||t))};return s.delay=function(e){i&&clearTimeout(i),i=setTimeout(n,e||t)},s.schedule=s,s.call=function(){this.cancel(),e()},s.cancel=function(){i&&clearTimeout(i),i=null},s.isPending=function(){return i},s}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,i){"use strict";var n=e("../lib/event"),s=e("../lib/useragent"),r=e("../lib/dom"),o=e("../lib/lang"), Line: 181 -  8,l=s.isIE;t.TextInput=function(e,t){function i(e){if(!p){if(p=!0,k)t=0,i=e?0:u.value.length-1;else var t=e?2:1,i=2;try{u.setSelectionRange(t,i)}catch(e){}p=!1}}function c(){p||(u.value=d,s.isWebKit&&b.schedule())}function h(){clearTimeout(O),O=setTimeout(function(){m&&(u.style.cssText=m,m=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},s.isOldIE?200:0)}var u=r.createElement("textarea");u.className="ace_text-input",s.isTouchPad&&u.setAttribute("x-palm-disable-auto-cap",!0),u.setAttribute("wrap","off"),u.setAttribute("autocorrect","off"),u.setAttribute("autocapitalize","off"),u.setAttribute("spellcheck",!1),u.style.opacity="0",s.isOldIE&&(u.style.top="-1000px"),e.insertBefore(u,e.firstChild);var d="",g=!1,f=!1,p=!1,m="",C=!0;try{var A=document.activeElement===u}catch(e){}n.addListener(u,"blur",function(e){t.onBlur(e),A=!1}),n.addListener(u,"focus",function(e){A=!0,t.onFocus(e),i()}),this.focus=function(){if(m)return u.focus();var e=u.style.top;u.style.position="fixed",u.style.top="-1000px",u.focus(),setTimeout(function(){u.style.position="","-1000px"==u.style.top&&(u.style.top=e)},0)},this.blur=function(){u.blur()},this.isFocused=function(){return A};var v=o.delayedCall(function(){A&&i(C)}),b=o.delayedCall(function(){p||(u.value=d,A&&i())});s.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=C&&(C=!C,v.schedule())}),c(),A&&t.onFocus();var y=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length};if(!u.setSelectionRange&&u.createTextRange&&(u.setSelectionRange=function(e,t){var i=this.createTextRange();i.collapse(!0),i.moveStart("character",e),i.moveEnd("character",t),i.select()},y=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&t.text==e.value}),s.isOldIE){var I=!1,w=function(e){if(!I){var t=u.value;if(!p&&t&&t!=d)return e&&t==d[0]?_.schedule():(F(t),I=!0,c(),void(I=!1))}},_=o.delayedCall(w);n.addListener(u,"propertychange",w);var x={13:1,27:1};n.addListener(u,"keyup",function(e){if(p&&(!u.value||x[e Line: 182 -  tTimeout(R,0),(u.value.charCodeAt(0)||0)<129)return _.call();p?L():M()}),n.addListener(u,"keydown",function(e){_.schedule(50)})}var k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var E=!1,F=function(e){k&&(e=k(e),k=null),f?(i(),e&&t.onPaste(e),f=!1):e==d.charAt(0)?E?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==d?e=e.substr(2):e.charAt(0)==d.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==d.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==d.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),E&&(E=!1)},D=function(e,t){var i=e.clipboardData||window.clipboardData;if(i&&!a){var n=l?"Text":"text/plain";return t?!1!==i.setData(n,t):i.getData(n)}},S=function(e,s){var r=t.getCopyText();if(!r)return n.preventDefault(e);D(e,r)?(s?t.onCut():t.onCopy(),n.preventDefault(e)):(g=!0,u.value=r,u.select(),setTimeout(function(){g=!1,c(),i(),s?t.onCut():t.onCopy()}))},T=function(e){S(e,!0)},B=function(e){S(e,!1)},$=function(e){var r=D(e);"string"==typeof r?(r&&t.onPaste(r,e),s.isIE&&setTimeout(i),n.preventDefault(e)):(u.value="",f=!0)};n.addCommandKeyListener(u,t.onCommandKey.bind(t)),n.addListener(u,"select",function(e){g?g=!1:y(u)?(t.selectAll(),i()):k&&i(t.selection.isEmpty())}),n.addListener(u,"input",function(e){if(!p){var t=u.value;F(t),c()}}),n.addListener(u,"cut",T),n.addListener(u,"copy",B),n.addListener(u,"paste",$),(!("oncut"in u)||!("oncopy"in u)||!("onpaste"in u))&&n.addListener(e,"keydown",function(e){if((!s.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:B(e);break;case 86:$(e);break;case 88:T(e)}});var M=function(e){p||!t.onCompositionStart||t.$readOnly||(p={},t.onCompositionStart(),setTimeout(L,0),t.on("mousedown",R),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},L=function(){if(p&&t.onCompositionUpdate&&!t.$readOnly){var e=u.value.replace(/\x01/g,"");if(p.lastValue!==e&&(t.onCompositionUpdate(e),p.lastValue&&t.undo(),p.lastValue=e,p.lastValue)){var i=t.selection.getRange();t.insert(p.lastValue),t.session.markU Line: 183 -  ange=t.selection.getRange(),t.selection.setRange(i),t.selection.clearSelection()}}},R=function(e){if(t.onCompositionEnd&&!t.$readOnly){var i=p;p=!1;var n=setTimeout(function(){n=null;var e=u.value.replace(/\x01/g,"");p||(e==i.lastValue?c():!i.lastValue&&e&&(c(),F(e)))});k=function(e){return n&&clearTimeout(n),(e=e.replace(/\x01/g,""))==i.lastValue?"":(i.lastValue&&n&&t.undo(),e)},t.onCompositionEnd(),t.removeListener("mousedown",R),"compositionend"==e.type&&i.range&&t.selection.setRange(i.range)}},N=o.delayedCall(L,50);n.addListener(u,"compositionstart",M),s.isGecko?n.addListener(u,"text",function(){N.schedule()}):(n.addListener(u,"keyup",function(){N.schedule()}),n.addListener(u,"keydown",function(){N.schedule()})),n.addListener(u,"compositionend",R),this.getElement=function(){return u},this.setReadOnly=function(e){u.readOnly=e},this.onContextMenu=function(e){E=!0,i(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,i){if(i||!s.isOldIE){m||(m=u.style.cssText),u.style.cssText=(i?"z-index:100000;":"")+"height:"+u.style.height+";"+(s.isIE?"opacity:0.1;":"");var o=t.container.getBoundingClientRect(),a=r.computedStyle(t.container),l=o.top+(parseInt(a.borderTopWidth)||0),c=o.left+(parseInt(o.borderLeftWidth)||0),d=o.bottom-l-u.clientHeight-2,g=function(e){u.style.left=e.clientX-c-2+"px",u.style.top=Math.min(e.clientY-l-2,d)+"px"};g(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),s.isWin&&!s.isOldIE&&n.capture(t.container,g,h))}},this.onContextMenuClose=h;var O,P=function(e){t.textInput.onContextMenu(e),h()};n.addListener(t.renderer.scroller,"contextmenu",P),n.addListener(u,"contextmenu",P)}}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict";function n(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bin Line: 187 -  ooltip").Tooltip;r.inherits(n,a),function(){this.setPosition=function(e,t){var i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,s=this.getWidth(),r=this.getHeight();(e+=15)+s>i&&(e-=e+s-i),(t+=15)+r>n&&(t-=20+r),a.prototype.setPosition.call(this,e,t)}}.call(n.prototype),t.GutterHandler=function(e){function t(){var t=l.getDocumentPosition().row,n=u.$annotations[t];if(!n)return i();if(t==h.session.getLength()){var s=h.renderer.pixelToScreenCoordinates(0,l.y).row,o=l.$pos;if(s>h.session.documentToScreenRow(o.row,o.column))return i()}if(c!=n)if(c=n.text.join("<br/>"),d.setHtml(c),d.show(),h.on("mousewheel",i),e.$tooltipFollowsMouse)r(l);else{var a=u.$cells[h.session.documentToScreenRow(t,0)].element.getBoundingClientRect(),g=d.getElement().style;g.left=a.right+"px",g.top=a.bottom+"px"}}function i(){a&&(a=clearTimeout(a)),c&&(d.hide(),c=null,h.removeEventListener("mousewheel",i))}function r(e){d.setPosition(e.x,e.y)}var a,l,c,h=e.editor,u=h.renderer.$gutterLayer,d=new n(h.container);e.editor.setDefaultHandler("guttermousedown",function(t){if(h.isFocused()&&0==t.getButton()&&"foldWidgets"!=u.getRegion(t)){var i=t.getDocumentPosition().row,n=h.session.selection;if(t.getShiftKey())n.selectTo(i,0);else{if(2==t.domEvent.detail)return h.selectAll(),t.preventDefault();e.$clickSelection=h.selection.getLineRange(i)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}}),e.editor.setDefaultHandler("guttermousemove",function(n){var o=n.domEvent.target||n.domEvent.srcElement;if(s.hasCssClass(o,"ace_fold-widget"))return i();c&&e.$tooltipFollowsMouse&&r(n),l=n,a||(a=setTimeout(function(){a=null,l&&!e.isMousePressed?t():i()},50))}),o.addListener(h.renderer.$gutter,"mouseout",function(e){l=null,c&&!a&&(a=setTimeout(function(){a=null,i()},50))}),h.on("changeSession",i)}}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict";var n=e("../lib/event"),s=e("../lib/useragent"),r=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=th Line: 189 -  Marker(b,"ace_selection",f.getSelectionStyle()),f.clearSelection(),f.isFocused()&&f.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),t(),v=setInterval(t,20),F=0,o.addListener(document,"mousemove",u)}function n(){clearInterval(v),f.session.removeMarker(m),m=null,f.$blockScrolling+=1,f.selection.fromOrientedRange(b),f.$blockScrolling-=1,f.isFocused()&&!w&&f.renderer.$cursorLayer.setBlinking(!f.getReadOnly()),b=null,y=null,F=0,_=null,x=null,o.removeListener(document,"mousemove",u)}function u(){null==D&&(D=setTimeout(function(){null!=D&&m&&n()},20))}function d(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function g(e){var t=["copy","copymove","all","uninitialized"],i=a.isMac?e.altKey:e.ctrlKey,n="uninitialized";try{n=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var s="none";return i&&t.indexOf(n)>=0?s="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(n)>=0?s="move":t.indexOf(n)>=0&&(s="copy"),s}var f=e.editor,p=r.createElement("img");p.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.isOpera&&(p.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(t){e[t]=this[t]},this),f.addEventListener("mousedown",this.onMouseDown.bind(e));var m,C,A,v,b,y,I,w,_,x,k,E=f.container,F=0;this.onDragStart=function(e){if(this.cancelDrag||!E.draggable){var t=this;return setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault()}b=f.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=f.getReadOnly()?"copy":"copyMove",a.isOpera&&(f.container.appendChild(p),p.scrollTop=0),i.setDragImage&&i.setDragImage(p,0,0),a.isOpera&&f.container.removeChild(p),i.clearData(),i.setData("Text",f.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){if(E.draggable=!1,w=!1,this.setState(null),!f.getReadOnly()){var t=e.dataTransfer.dropEffect;!I&&"move"==t&&f.session.remove(f.getSelectionRange()),f.renderer.$cursorLayer.setBlink Line: 192 -  lice();for(var n=0;n<i.length;n++)i[n](t,this)}},n.once=function(e,t){var i=this;t&&this.addEventListener(e,function n(){i.removeEventListener(e,n),t.apply(null,arguments)})},n.setDefaultHandler=function(e,t){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[e]){var n=i[e],s=i._disabled_[e];s||(i._disabled_[e]=s=[]),s.push(n);var r=s.indexOf(t);-1!=r&&s.splice(r,1)}i[e]=t},n.removeDefaultHandler=function(e,t){var i=this._defaultHandlers;if(i){var n=i._disabled_[e];if(i[e]==t){i[e];n&&this.setDefaultHandler(e,n.pop())}else if(n){var s=n.indexOf(t);-1!=s&&n.splice(s,1)}}},n.on=n.addEventListener=function(e,t,i){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];return n||(n=this._eventRegistry[e]=[]),-1==n.indexOf(t)&&n[i?"unshift":"push"](t),t},n.off=n.removeListener=n.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}},n.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=n}),define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){function n(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function s(e,t){var i=new Error(e);i.data=t,"object"==typeof console&&console.error&&console.error(i),setTimeout(function(){throw i})}var r=e("./oop"),o=e("./event_emitter").EventEmitter,a={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var i=this.$options[e];return i?i.forwardTo?this[i.forwardTo]&&this[i.forwardTo].setOption(e,t):(i.handlesSet||(this["$"+e]=t),void(i&&i.set&&i.set.call(this,t))):n('misspelled option "'+e+'"')}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.c Line: 196 -  ed=!1,r.$onCaptureMouseMove=r.releaseMouse=null,e&&r.onMouseEvent("mouseup",e)},c=function(){r[r.state]&&r[r.state](),r.$mouseMoved=!1};if(s.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){l(e)});r.$onCaptureMouseMove=o,r.releaseMouse=n.capture(this.editor.container,o,l);var h=setInterval(c,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&n.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(h.prototype),c.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:s.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=h}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,i){"use strict";t.FoldHandler=function(e){e.on("click",function(t){var i=t.getDocumentPosition(),n=e.session,s=n.getFoldAt(i.row,i.column,1);s&&(t.getAccelKey()?n.removeFold(s):n.expandFold(s),t.stop())}),e.on("gutterclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var i=t.getDocumentPosition().row,n=e.session;n.foldWidgets&&n.foldWidgets[i]&&e.session.onFoldWidgetClick(i,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var i=t.getDocumentPosition().row,n=e.session,s=n.getParentFoldRangeData(i,!0),r=s.range||s.firstRange;if(r){i=r.start.row;var o=n.getFoldAt(i,n.getLine(i).length,1);o?n.removeFold(o):(n.addFold("...",r),e.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}t.stop()}})}}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,i){"use strict";var n=e("../lib/keys"),s=e("../lib/event"),r=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e Line: 227 -  o,r),end:this.pos(s+a,r=0),action:e.action,lines:l},!0)}},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,s=t||0,r=i.length;s<r;s++)if((e-=i[s].length+n)<0)return{row:s,column:e+i[s].length+n};return{row:r-1,column:i[r-1].length}},this.positionToIndex=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,s=0,r=Math.min(e.row,i.length),o=t||0;o<r;++o)s+=i[o].length+n;return s+e.column}}).call(l.prototype),t.Document=l}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){"use strict";var n=e("./lib/oop"),s=e("./lib/event_emitter").EventEmitter,r=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var i=this;this.$worker=function(){if(i.running){for(var e=new Date,t=i.currentLine,n=-1,s=i.doc,r=t;i.lines[t];)t++;var o=s.getLength(),a=0;for(i.running=!1;t<o;){i.$tokenizeRow(t),n=t;do{t++}while(i.lines[t]);if(++a%5==0&&new Date-e>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=t,r<=n&&i.fireUpdateEvent(r,n)}}};(function(){n.implement(this,s),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var i={first:e,last:t};this._signal("update",{data:i})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,i=e.end.row-t;if(0===i)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,i+1,null),this. Line: 266 -  this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var i=t.findMatchingBracket(e.getCursorPosition());if(i)var n=new g(i.row,i.column,i.row,i.column+1);else if(t.$mode.getMatching)n=t.$mode.getMatching(e.session);n&&(t.$bracketHighlight=t.addMarker(n,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var i=e.getCursorPosition(),n=new A(e.session,i.row,i.column),s=n.getCurrentToken();if(!s||!/\b(?:tag-open|tag-name)/.test(s.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1==s.type.indexOf("tag-open")||(s=n.stepForward())){var r=s.value,o=0,a=n.stepBackward();if("<"==a.value)do{a=s,(s=n.stepForward())&&s.value===r&&-1!==s.type.indexOf("tag-name")&&("<"===a.value?o++:"</"===a.value&&o--)}while(s&&o>=0);else{do{s=a,a=n.stepBackward(),s&&s.value===r&&-1!==s.type.indexOf("tag-name")&&("<"===a.value?o++:"</"===a.value&&o--)}while(a&&o<=0);n.stepForward()}if(!s)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var l=n.getCurrentTokenRow(),c=n.getCurrentTokenColumn(),h=new g(l,c,l,c+s.value.length);t.$tagHighlight&&0!==h.compareRange(t.$backMarkers[t.$tagHighlight].range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),h&&!t.$tagHighlight&&(t.$tagHighlight=t.addMarker(h,"ace_bracket","text"))}}},50)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},th Line: 288 -  dding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&!n&&(this.smoothBlinking=e,s.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var e=s.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,s.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,s.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&s.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){s.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(e);return{left:this.$padding+i.column*this.config.characterWidth,top:(i.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,i=0,n=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);i=0;for(var s=t.length;i<s;i++){var r=this.getPixelPosition(t[i].cursor,!0);if(!((r.top>e.height+e.offset||r.top<0)&&i>1)){var o=(t Line: 291 -  e={width:0,height:0},this.checkForSizeChanges()};(function(){n.implement(this,a),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=s.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;l=t>0&&t<1?50:100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",o.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===l){var e=null;try{e=this.$measureNode.getBoundingClientRect()}catch(t){e={width:0,height:0}}var t={height:e.height,width:e.width/l}}else t={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/l};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.innerHTML=r.stringRepeat(e,l),this.$main.getBoundingClientRect().width/l},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(c.prototype)}),define( Line: 307 -  *(t||0);return this.session.setScrollTop(s),s},this.STEPS=8,this.$calcSteps=function(e,t){var i=0,n=this.STEPS,s=[],r=function(e,t,i){return i*(Math.pow(e-1,3)+1)+t};for(i=0;i<n;++i)s.push(r(i/this.STEPS,e,t-e));return s},this.scrollToLine=function(e,t,i,n){var s=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(s-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(s),!1!==i&&this.animateScrolling(r,n)},this.animateScrolling=function(e,t){var i=this.scrollTop;if(this.$animatedScroll){var n=this;if(e!=i){if(this.$scrollAnimation){var s=this.$scrollAnimation.steps;if(s.length&&(e=s[0])==i)return}var r=n.$calcSteps(e,i);this.$scrollAnimation={from:e,to:i,steps:r},clearInterval(this.$timer),n.session.setScrollTop(r.shift()),n.session.$scrollTop=i,this.$timer=setInterval(function(){r.length?(n.session.setScrollTop(r.shift()),n.session.$scrollTop=i):null!=i?(n.session.$scrollTop=-1,n.session.setScrollTop(i),i=null):(n.$timer=clearInterval(n.$timer),n.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),n=(e+this.scrollLeft-i.left-this.$padding)/this.characterWidth,s=Math.floor((t+this.scrollTop-i.top)/this.lineHeight),r=Math.round(n); Line: 311 -  ata);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return s.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,i){if(i){var n=this.callbackId++;this.callbacks[n]=i,t.push(n)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))},this.$workerBlob=function(e){var t="importScripts('"+s.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return i.append(t),i.getBlob("application/javascript")}}}).call(a.prototype);var l=function(e,t,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var n=null,s=!1,a=Object.create(r),l=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){l.messageBuffer.push(e),n&&(s?setTimeout(c):c())},this.setEmitSync=function(e){s=e};var c=function(){var e=l.messageBuffer.shift();e.command?n[e.command].apply(n,e.args):e.event&&a._signal(e.event,e.data)};a.postMessage=function(e){l.onMessage({data:e}) Line: 312 -  unction(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){for(n=new e[i](a);l.messageBuffer.length;)c()})};l.prototype=a.prototype,t.UIWorkerClient=l,t.WorkerClient=a}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,i){"use strict";var n=e("./range").Range,s=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop"),o=function(e,t,i,n,s,r){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=s,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=i;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){r.implement(this,s),this.setup=function(){var e=this,t=this.doc,i=this.session,s=this.$pos;this.selectionBefore=i.selection.toJSON(),i.selection.inMultiSelectMode&&i.selection.toSingleRange(),this.pos=t.createAnchor(s.row,s.column),this.markerId=i.addMarker(new n(s.row,s.column,s.row,s.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){i.removeMarker(e.markerId),e.markerId=i.addMarker(new n(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(i){var n=t.createAnchor(i.row,i.column);e.others.push(n)}),i.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(i){i.markerId=e.addMarker(new n(i.row,i.column,i.row,i.column+t.length),t.othersClass,null,!1),i.on("change",function(s){e.removeMarker(i.markerId),i.markerId=e.addMarker(new n(s.value.row,s.value.column,s.value.row,s.value.column+t.length),t.othersClass,null,!1)})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<th Line: 313 -  th;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var i="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column;if(t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1){var s=t.start.column-this.pos.column;if(this.length+=i,!this.session.$fromUndo){if("insert"===e.action)for(var r=this.others.length-1;r>=0;r--){var o={row:(a=this.others[r]).row,column:a.column+s};a.row===t.start.row&&t.start.column<a.column&&(o.column+=i),this.doc.insertMergedLines(o,e.lines)}else if("remove"===e.action)for(r=this.others.length-1;r>=0;r--){var a;o={row:(a=this.others[r]).row,column:a.column+s};a.row===t.start.row&&t.start.column<a.column&&(o.column+=i),this.doc.remove(new n(o.row,o.column,o.row,o.column-i))}t.start.column===this.pos.column&&"insert"===e.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-i);for(var e=0;e<this.others.length;e++){var n=this.others[e],s={row:n.row,column:n.column-i};n.row===t.start.row&&t.start.column<n.column&&(s.column+=i),n.setPosition(s.row,s.column)}}.bind(this),0):t.start.column===this.pos.column&&"remove"===e.action&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var n=this.others[e];n.row===t.start.row&&t.start.column<n.column&&n.setPosition(n.row,n.column-i)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(r=0;r<this.others.length;r++)this.others[r]._emit("change",{value:this.others[r]})}this.$updating=!1}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange), Line: 315 -  ,u.$blockScrolling--,y={row:-1,column:-1};var k=function(){var e=u.renderer.pixelToScreenCoordinates(C,A),t=v.screenToDocumentPosition(e.row,e.column);n(y,e)&&n(t,d.lead)||(y=e,u.$blockScrolling++,u.selection.moveToPosition(t),u.renderer.scrollCursorIntoView(),u.removeSelectionMarkers(x),x=d.rectangularRangeBlock(y,b),u.$mouseHandler.$clickSelection&&1==x.length&&x[0].isEmpty()&&(x[0]=u.$mouseHandler.$clickSelection.clone()),x.forEach(u.addSelectionMarker,u),u.updateSelectionMarkers(),u.$blockScrolling--)};s.capture(u.container,function(e){C=e.clientX,A=e.clientY},function(e){clearInterval(E),u.removeSelectionMarkers(x),x.length||(x=[d.toOrientedRange()]),u.$blockScrolling++,_&&(u.removeSelectionMarker(_),d.toSingleRange(_));for(var t=0;t<x.length;t++)d.addRange(x[t]);u.inVirtualSelectionMode=!1,u.$mouseHandler.$clickSelection=null,u.$blockScrolling--});var E=setInterval(function(){k()},20);return e.preventDefault()}}}else 0===c&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,i){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:fu Line: 338 -  rently requires a paging status node"),(n=this.tree._callHook("nodeLoadChildren",this,i)).done(function(e){var i=o.children;for(t=0;t<i.length;t++)i[t].parent=s;s.children.splice.apply(s.children,[r+1,0].concat(i)),o.children=null,o.remove(),s.render()}).fail(function(){o.setExpanded()}),n},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=void 0,this.renderStatus()},scheduleAction:function(t,i){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var n=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger expand"),n.setExpanded(!0)},i);break;case"activate":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger activate"),n.setActive(!0)},i);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(t,i){var n;void 0!==i&&((n=i).tree&&void 0!==n.statusNodeType)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),i={topNode:i});var s,r,o,a=e.extend({effects:!0===t?{duration:200,queue:!1}:t,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},i),l=new e.Deferred,c=this,h=e(this.span).height(),u=e(a.scrollParent),d=a.scrollOfs.top||0,g=a.scrollOfs.bottom||0,f=u.height(),p=u.scrollTop(),m=u,C=u[0]===window,v=a.topNode||null,b=null;return e(this.span).is(":visible")?(C?(r=e(this.span).offset().top,s=v&&v.span?e(v.span).offset().top:0,m=e("html,body")):(A(u[0]!==document&&u[0]!==document.body,"scrollParent should be a simple element or `window`, not document or body."),o=u.offset().top,r=e(this.span).offset().top-o+p,s=v?e(v.span).offset().top-o+p:0,f-=Math.max(0,u.innerHeight()-u[0].clientHeight)),r<p+d?b=r-d:r+h>p+f-g&&(b=r+h-f+g,v&&(A(v.isRootNode()||e(v.span).is(":visible"),"topNode must be visible"),s<b&&(b=s-d))),null!==b?a.effects?(a.effects.complete=function(){l.resolveWith(c)},m.stop(!0).animate({scrollTop:b},a.effects)):(m[0].scrollTop=b,l.resolveWith(this)):l.resolveWith(this),l.promise()):(this.warn("sc Line: 342 -  ontainer),!1!==i&&this.activeNode&&l.append(e("<input>",{type:"radio",name:o,value:this.activeNode.key,checked:!0})),n.filter?this.visit(function(e){var t=n.filter(e);if("skip"===t)return t;!1!==t&&h(e)}):!1!==t&&(s=this.getSelectedNodes(c),e.each(s,function(e,t){h(t)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(e,t){var i,n;return!t&&(i=document.getElementById(this.options.idPrefix+e))?i.ftnode?i.ftnode:null:(t=t||this.rootNode,n=null,t.visit(function(t){if(t.key===e)return n=t,!1},!0),n)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),v("info",arguments))},loadKeyPath:function(t,i){var n,s,r,o=this,a=new e.Deferred,l=this.getRootNode(),c=this.options.keyPathSeparator,h=[],u=e.extend({},i);for("function"==typeof i?n=i:i&&i.callback&&(n=i.callback),u.callback=function(e,t,i){n&&n.call(e,t,i),a.notifyWith(e,[{node:t,status:i}])},null==u.matchKey&&(u.matchKey=function(e,t){return e.key===t}),e.isArray(t)||(t=[t]),s=0;s<t.length;s++)(r=t[s]).charAt(0)===c&&(r=r.substr(1)),h.push(r.split(c));return setTimeout(function(){o._loadKeyPathImpl(a,u,l,h).done(function(){a.resolve()})},0),a.promise()},_loadKeyPathImpl:function(t,i,n,s){var r,o,a,l,c,h,u,d,g=this;function f(e,t){var n,s,r=e.children;if(r)for(n=0,s=r.length;n<s;n++)if(i.matchKey(r[n],t))return r[n];return null}for(c={},o=0;o<s.length;o++)for(u=s[o],h=n;u.length;){if(a=u.shift(),!(l=f(h,a))){this.warn("loadKeyPath: key not found: "+a+" (parent: "+h+")"),i.callback(this,a,"error");break}if(0===u.length){i.callback(this,l,"ok");break}if(l.lazy&&void 0===l.hasChildren()){i.callback(this,l,"loaded"),c[a=l.key]?c[a].pathSegList.push(u):c[a]={parent:l,pathSegList:[u]};break}i.callback(this,l,"loaded"),h=l}function p(e,t,n){i.callback(g,t,"loading"),t.load().done(function(){g._loadK Line: 344 -  t.node,l=t.tree,h=t.options,u=o.which,d=String.fromCharCode(u),g=!(o.altKey||o.ctrlKey||o.metaKey||o.shiftKey),f=e(o.target),p=!0,m=!(o.ctrlKey||!h.autoActivate);if(a||(r=this.getActiveNode()||this.getFirstChild())&&(r.setFocus(),(a=t.node=this.focusNode).debug("Keydown force focus on active node")),h.quicksearch&&g&&/\w/.test(d)&&!c[u]&&!f.is(":input:enabled"))return(s=(new Date).getTime())-l.lastQuicksearchTime>500&&(l.lastQuicksearchTerm=""),l.lastQuicksearchTime=s,l.lastQuicksearchTerm+=d,(i=l.findNextNode(l.lastQuicksearchTerm,l.getActiveNode()))&&i.setActive(),void o.preventDefault();switch(n.eventToString(o)){case"+":case"=":l.nodeSetExpanded(t,!0);break;case"-":l.nodeSetExpanded(t,!1);break;case"space":a.isPagingNode()?l._triggerNodeEvent("clickPaging",t,o):n.evalOption("checkbox",a,a,h,!1)?l.nodeToggleSelected(t):l.nodeSetActive(t,!0);break;case"return":l.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":a.navigate(o.which,m,!0);break;default:p=!1}p&&o.preventDefault()},nodeLoadChildren:function(t,i){var n,s,r,o=t.tree,a=t.node,l=(new Date).getTime();if(e.isFunction(i)&&(i=i.call(o,{type:"source"},t),A(!e.isFunction(i),"source callback must not return another function")),i.url&&(a._requestId&&a.warn("Recursive load request #"+l+" while #"+a._requestId+" is pending."),n=e.extend({},t.options.ajax,i),a._requestId=l,n.debugDelay?(s=n.debugDelay,e.isArray(s)&&(s=s[0]+Math.random()*(s[1]-s[0])),a.warn("nodeLoadChildren waiting debugDelay "+Math.round(s)+" ms ..."),n.debugDelay=!1,r=e.Deferred(function(t){setTimeout(function(){e.ajax(n).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},s)})):r=e.ajax(n),i=new e.Deferred,r.done(function(n,s,r){var c,h;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof n||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),a._requestId&&a._requestId>l)i.rejectWith(this,["$recursive_request"]);else{if(t.options.postProcess){try{h=o._triggerNodeEvent("postProcess",t,t.originalEvent,{response:n,er Line: 355 -  ce:function(e,t,i,n){var s;return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),function(){var r=arguments;n=n||this,i&&!s&&t.apply(n,r),clearTimeout(s),s=setTimeout(function(){i||t.apply(n,r),s=null},e)}},debug:function(t){e.ui.fancytree.debugLevel>=2&&v("log",arguments)},error:function(e){v("error",arguments)},escapeHtml:function(e){return(""+e).replace(r,function(e){return a[e]})},fixPositionOptions:function(t){if((t.offset||(""+t.my+t.at).indexOf("%")>=0)&&e.error("expected new position syntax (but '%' is not supported)"),!e.ui.fancytree.jquerySupports.positionMyOfs){var i=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),s=(i[2]?+i[2]:0)+(n[2]?+n[2]:0),r=(i[4]?+i[4]:0)+(n[4]?+n[4]:0);t=e.extend({},t,{my:i[1]+" "+i[3],at:n[1]+" "+n[3]}),(s||r)&&(t.offset=s+" "+r)}return t},getEventTarget:function(t){var i=t&&t.target?t.target.className:"",s={node:this.getNode(t.target),type:void 0};return/\bfancytree-title\b/.test(i)?s.type="title":/\bfancytree-expander\b/.test(i)?s.type=!1===s.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(i)?s.type="checkbox":/\bfancytree(-custom)?-icon\b/.test(i)?s.type="icon":/\bfancytree-node\b/.test(i)?s.type="title":t&&e(t.target).is("ul[role=group]")?(n.info("Ignoring click on outer UL."),s.node=null):t&&t.target&&e(t.target).closest(".fancytree-title").length&&(s.type="title"),s},getEventTargetType:function(e){return this.getEventTarget(e).type},getNode:function(t){if(t instanceof F)return t;for(t instanceof e?t=t[0]:void 0!==t.originalEvent&&(t=t.target);t;){if(t.ftnode)return t.ftnode;t=t.parentNode}return null},getTree:function(t){var i;return t instanceof D?t:(void 0===t&&(t=0),"number"==typeof t?t=e(".fancytree-container").eq(t):"string"==typeof t?t=e(t).eq(0):void 0!==t.selector?t=t.eq(0):void 0!==t.originalEvent&&(t=e(t.target)),(i=(t=t.closest(":ui-fancytree")).data("ui-fancytree")||t.data("fancytree"))?i.tree:null)},evalOption:function(t,i,n,s,r){var o,a,l=i.tree,c=s[t],h=n[t];return e.isFunction(c)?(o={node:i,tree:l,widget:l.widget,options:l.widget.options,t Line: 363 -  map.dragHelper),r.initHelper&&r.initHelper.call(o.tree,o,{node:o,tree:o.tree,originalEvent:t,ui:{helper:i}}),i):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(e,t){return!!t.helper.data("ftSourceNode")}},i.options.dnd.draggable)),n&&n.dragDrop&&i.widget.element.droppable(e.extend({addClasses:!1,tolerance:"intersect",greedy:!1},i.options.dnd.droppable))}return e.ui.fancytree.registerExtension({name:"dnd",version:"2.27.0",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dropMarkerOffsetX:-24,dropMarkerInsertOffsetX:-16,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(t){var n=t.tree;this._superApply(arguments),n.options.dnd.dragStart&&n.$container.on("mousedown",function(i){if(t.options.dnd.focusOnClick){var n=e.ui.fancytree.getNode(i);n&&n.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout(function(){e(i.target).closest(":tabbable").focus()},10)}}),i(n)},_setDndStatus:function(t,i,n,s,r){var o,a,l="center",c=this._local,h=this.options.dnd,u=this.options.glyph,d=t?e(t.span):null,g=e(i.span),f=g.find("span.fancytree-title");if(c.$dropMarker||(c.$dropMarker=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo(e(this.$div).parent()),u&&c.$dropMarker.addClass(u.map._addClass+" "+u.map.dropMarker)),"after"===s||"before"===s||"over"===s){switch(o=h.dropMarkerOffsetX||0,s){case"before":l="top",o+=h.dropMarkerInsertOffsetX||0;break;case"after":l="bottom",o+=h.dropMarkerInsertOffsetX||0}c.$dropMarker.toggleClass("fancytree-drop-after","after"===s).toggleClass("fancytree-drop-over","over"===s).toggleClass("fancytree-drop-before","before"===s).show().position(e.ui.fancytree.fixPositionOptions({my:"left"+(a=o,0===a?"":a>0?"+"+a:""+a)+" center",at:"left "+l,of:f}))}else c.$dropMarker.hide();d&&d.toggleClass("fancytree-drop-accept",!0===r).toggleClass("fancytree-drop-reject",!1===r),g.toggleClass("fancytree-drop-targe Line: 367 -  ,t){this._super.apply(this,arguments),t.node.span.draggable=!0}),this._superApply(arguments),this.$container.addClass("fancytree-ext-dnd5"),s=e("<span>").appendTo(this.$container),this.$scrollParent=s.scrollParent(),s.remove(),(c=e("#fancytree-drop-marker")).length||(c=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3,"pointer-events":"none"}).prependTo("body"),p&&t.setSpanIcon(c[0],p.map._addClass,p.map.dropMarker)),m.dragStart&&a.$container.on("dragstart drag dragend",function(t){var i,n=C(t),s=t.dataTransfer||t.originalEvent.dataTransfer,r="move"===s.dropEffect,o=n?e(n.span):null,d={node:n,tree:a,options:a.options,originalEvent:t,dataTransfer:s,isCancelled:void 0};switch(t.type){case"dragstart":e(n.span).addClass("fancytree-drag-source"),h=n,i=JSON.stringify(n.toDict());try{s.setData(l,i),s.setData("text/html",e(n.span).html()),s.setData("text/plain",n.title)}catch(e){a.warn("Could not set data (IE only accepts 'text') - "+e)}return m.setTextTypeJson?s.setData("text",i):s.setData("text",n.title),s.effectAllowed="all",s.setDragImage&&s.setDragImage(e(n.span).find(".fancytree-title")[0],-10,-10),!1!==m.dragStart(n,d);case"drag":o.toggleClass("fancytree-drag-remove",r),m.dragDrag(n,d);break;case"dragend":e(n.span).removeClass("fancytree-drag-source fancytree-drag-remove"),h=null,u=null,d.isCancelled="none"===s.dropEffect,c.hide(),m.dragEnd(n,d)}}),m.dragEnter&&a.$container.on("dragenter dragover dragleave drop",function(t){var n,s,f,p=null,A=C(t),v=t.dataTransfer||t.originalEvent.dataTransfer,b={node:A,tree:a,options:a.options,hitMode:u,originalEvent:t,dataTransfer:v,otherNode:h||null,otherNodeData:null,dropEffect:void 0,isCancelled:void 0};switch(t.type){case"dragenter":if(!A){a.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className),u=!1;break}if(e(A.span).addClass(r).removeClass(i+" "+o),m.preventNonNodes&&!s){A.debug("Reject dropping a non-node"),u=!1;break}if(m.preventForeignNodes&&(!h||h.tree!==A.tree)){A.debug("Reject dropping a foreign node"),u=!1;break}setTimeout(function(){!m.autoExpandMS||!1===A.hasChildren()||A.expanded||m Line: 389 -  &l.currentId!==n.currentId)l.$tree.fancytree("getTree").visit(function(e){if(e.key===l.currentId)return e.setActive(!1),!1});if((l=e.extend(l,n)).rootExp=l.root?new RegExp("^"+l.root.replace(".","\\.")):null,l.selectedID=l.currentId,l.filter=JSON.parse(JSON.stringify(l.filter)),!l.objects&&l.connCfg){l.socketURL="",l.socketSESSION="",void 0!==l.connCfg.socketUrl&&(l.socketURL=l.connCfg.socketUrl,l.socketURL&&":"===l.socketURL[0]&&(l.socketURL=location.protocol+"//"+location.hostname+l.socketURL),l.socketSESSION=l.connCfg.socketSession,l.socketUPGRADE=l.connCfg.upgrade,l.socketRememberUpgrade=l.connCfg.rememberUpgrade,l.socketTransports=l.connCfg.transports);var c=setTimeout(function(){var t=e("#select-id-dialog");t.length||(e("body").append('<div id="select-id-dialog"><span class="ui-icon ui-icon-alert"></span><span>'+(l.texts.noconnection||"No connection to server")+"</span></div>"),t=e("#select-id-dialog")),"undefined"!=typeof M?t.modal():t.dialog({modal:!0,open:function(t){e(t.target).parent().find(".ui-dialog-titlebar-close .ui-button-text").html("")}})},5e3);l.socket=io.connect(l.socketURL,{query:"key="+l.socketSESSION,"reconnection limit":1e4,"max reconnection attempts":1/0,upgrade:l.socketUPGRADE,rememberUpgrade:l.socketRememberUpgrade,transports:l.socketTransports}),l.socket.on("connect",function(){c&&clearTimeout(c),this.emit("name",l.connCfg.socketName||"selectId"),this.emit("getObjects",function(e,t){l.objects=t,l.socket.emit("getStates",function(e,t){l.states=t,l.readyCallback&&l.readyCallback(e,l.objects,l.states)})})}),l.socket.on("stateChange",function(e,t){s.selectId("state",e,t)}),l.socket.on("objectChange",function(e,t){s.selectId("object",e,t)})}a.data("selectId",l)}return this},show:function(t,i,s){"function"==typeof i&&(s=i,i=void 0),"function"==typeof t&&(s=t,t=void 0);for(var r=0;r<this.length;r++){var o=this[r],a=e(o),l=a.data("selectId");if(l){if(l.inited)if((l.filter&&!i&&void 0!==i||!l.filter&&i||l.filter&&i&&JSON.stringify(l.filter)!==JSON.stringify(i))&&(l.inited=!1),l.inited&&void 0!==t&&l.currentId!==t)l.$tree.fancytree("getTree").visit(function Line: 399 -  "),g&&h.addClass("edit-dialog"),h.css({overflow:"hidden"}),n.css({overflow:"hidden"}),n.closest("td").css({overflow:"hidden"}),n.css({"padding-left":D,width:S||null}),n.html(e).off("click").on("click",I).addClass("select-id-quick-edit"),setTimeout(function(){c.trigger("click")},50),o.editing=!1,c.focus().trigger("select")}function L(e){F&&(clearTimeout(F),F=null),e.preventDefault(),e.stopPropagation(),M()}n.find(".select-id-quick-edit-cancel").on("click",L).on("mousedown",function(e){L(e)}),n.find(".select-id-quick-edit-ok").on("click",function(){("function"===r||"room"===r||m?n.find("select"):n.find("input")).trigger("blur")}),"checkbox"===a?B.prop("checked",p):"room"!==r&&"function"!==r&&B.val(p),B.blur(function(){F&&clearTimeout(F),F=setTimeout(function(){var t=n.data("old-value"),i="checkbox"===e(this).attr("type")?e(this).prop("checked"):e(this).val();"room"!==r&&"function"!==r||i||(i=[]),"value"!==r&&JSON.stringify(i)===JSON.stringify(t)||(o.quickEditCallback(s,r,i,t),t='<span style="color: rgb(192, 0, 1); width: 100%;">'+t+"</span>"),M(t)}.bind(this),100)}).keyup(function(t){13===t.which&&e(this).trigger("blur"),27===t.which&&L(t)}),"object"==typeof t&&(t.preventDefault(),t.stopPropagation()),setTimeout(function(){B.focus().trigger("select")},100)}function w(e){if(!e)return"ok";var t=4294901760&e,i="";return 64&e&&(i+="device"),128&e&&(i+="sensor"),1&e&&(i+=" bad"),2&e&&(i+=" not connected"),4&e&&(i+=" error"),i+(t?"|0x"+(t>>16).toString(16).toUpperCase():"")+" [0x"+e.toString(16).toUpperCase()+"]"}function x(e,t){for(var i=0;i<e.columns.length;i++){var n=e.columns[i];"object"==typeof n&&(n.hasOwnProperty("name")?n=n.name:n.hasOwnProperty("en")&&(n=n[systemLang]||n.en)),t(n,i)}}function k(i){var a;i.addClass("dialog-select-object-ids"),"dialog-select-member"!==i.attr("id")&&"dialog-select-members"!==i.attr("id")?i.css({height:"100%",width:"100%"}):i.css({height:"calc(100% - 110px)",width:"calc(100% - 20px)"});var f=i.data("selectId");if(f){var p=!f.noDialog&&!f.noMultiselect;"undefined"!=typeof Storage&&f.name&&(f.expertModeRegEx&&(f.expertMode=window.localStorage.getI Line: 411 -  [data-id="'+n.node.key+'"]').hide(),i.find('.select-button-custom[data-id="'+n.node.key+'"]').show(),void 0!==n.node.editFinished&&delete n.node.editFinished,f.save&&e(f.node.span).addClass("pending")}}),f.$tree.fancytree(z).on("nodeCommand",function(t,i){var n,s=e(this).fancytree("getTree").getActiveNode();switch(i.cmd){case"moveUp":s.moveTo(s.getPrevSibling(),"before"),s.setActive();break;case"moveDown":s.moveTo(s.getNextSibling(),"after"),s.setActive();break;case"indent":n=s.getPrevSibling(),s.moveTo(n,"child"),n.setExpanded(),s.setActive();break;case"outdent":s.moveTo(s.getParent(),"after"),s.setActive();break;case"delete":var r=e(s.tr).find(".select-button-1");r&&r.length&&r.trigger("click");break;case"rename":var o=e(s.tr).find(".objects-name-coll-title");o&&o.length&&o.trigger("click");break;default:return void alert("Unhandled command: "+i.cmd)}}).on("keydown",function(t){if(!f.editing){var i=null;if(t.ctrlKey)switch(t.which){case"c":i="copy";break;case e.ui.keyCode.UP:i="moveUp";break;case e.ui.keyCode.DOWN:i="moveDown";break;case e.ui.keyCode.RIGHT:i="indent";break;case e.ui.keyCode.LEFT:i="outdent"}else switch(t.which){case e.ui.keyCode.DELETE:i="delete";break;case 113:i="rename"}return i?(e(this).trigger("nodeCommand",{cmd:i}),!1):void 0}}),function(e,t){t&&e.$tree&&(function e(i){if(Array.isArray(i.children))for(var n=0,s=i.children.length;n<s;n++){var r=i.children[n];if(t[r.key])try{r.setExpanded()}catch(e){console.log("Cannot expand: "+e)}e(r)}}(e.$tree.fancytree("getRootNode")),t=null)}(f,m),e(window).on("resize",function(){P&&clearTimeout(P),P=setTimeout(function(){h(i)},100)}),i.trigger("resize"),i.find(".filter").change(function(e){f.filterVals=null,e&&e.target&&filterChanged(e.target);var t=i.find(".objects-list-running");t.show(),f.$tree.fancytree("getTree").filterNodes(K,!1),t.hide()}).keyup(function(){var t=f.$tree[0];t._timer&&(t._timer=clearTimeout(t._timer));var i=this;t._timer=setTimeout(function(){e(i).trigger("change")},200)});var j=i.find(".filter-btn");for(var H in j.on("click",function(){i.find('.filter[data-index="'+e(this).data("index")+'"]') Line: 412 -  er("change")}),t?j.prepend('<i class="material-icons">close</i>'):j.button({icons:{primary:"ui-icon-close"},text:!1}),(j=i.find(".btn-collapse")).on("click",function(){i.find(".objects-list-running").show(),setTimeout(function(){f.$tree.fancytree("getRootNode").visit(function(e){(!f.filterVals.length||e.match||e.subMatchCount)&&e.setExpanded(!1)}),i.find(".objects-list-running").hide()},100)}).attr("title",f.texts.collapse),t?j.prepend('<i class="material-icons">folder</i>'):j.button({icons:{primary:"ui-icon-folder-collapsed"},text:!1}),(j=i.find(".btn-expand")).on("click",function(){i.find(".objects-list-running").show(),setTimeout(function(){f.$tree.fancytree("getRootNode").visit(function(e){(!f.filterVals.length||e.match||e.subMatchCount)&&e.setExpanded(!0)}),i.find(".objects-list-running").hide()},100)}).attr("title",f.texts.expand),t?j.prepend('<i class="material-icons">folder_open</i>'):j.button({icons:{primary:"ui-icon-folder-open"},text:!1}),(j=i.find(".btn-list")).on("click",function(){i.find(".objects-list-running").show(),f.list=!f.list,f.list?(i.find(".btn-list").addClass("ui-state-error red lighten-3"),i.find(".btn-collapse").hide(),e(this).attr("title",f.texts.list)):(i.find(".btn-list").removeClass("ui-state-error red lighten-3"),i.find(".btn-expand").show(),i.find(".btn-collapse").show(),e(this).attr("title",f.texts.tree)),i.find(".objects-list-running").show(),setTimeout(function(){f.inited=!1,k(f.$dlg),i.find(".objects-list-running").hide()},200)}).attr("title",f.texts.tree),t?j.prepend('<i class="material-icons">format_list_bulleted</i>'):j.button({icons:{primary:"ui-icon-grip-dotted-horizontal"},text:!1}),f.list&&(i.find(".btn-list").addClass("ui-state-error red lighten-3").attr("title",f.texts.list),i.find(".btn-expand").hide(),i.find(".btn-collapse").hide()),(j=i.find(".btn-refresh")).on("click",function(){i.find(".objects-list-running").show(),setTimeout(function(){f.inited=!1,f.getObjects?f.getObjects(function(e,t){f.objects=t,k(f.$dlg),i.find(".objects-list-running").hide()}):(k(f.$dlg),i.find(".objects-list-running").hide())},100)}).attr("title",f.te Line: 413 -  ?j.prepend('<i class="material-icons">refresh</i>'):j.button({icons:{primary:"ui-icon-refresh"},text:!1}),(j=i.find(".btn-sort")).on("click",function(){i.find(".objects-list-running").show(),f.sort=!f.sort,f.sort?i.find(".btn-sort").addClass("ui-state-error red lighten-3"):i.find(".btn-sort").removeClass("ui-state-error red lighten-3"),E(f,!0),setTimeout(function(){f.inited=!1,o(f),i.find(".objects-list-running").hide()},100)}).attr("title",f.texts.sort),f.sort&&i.find(".btn-sort").addClass("ui-state-error red lighten-3"),t?j.prepend('<i class="material-icons">sort_by_alpha</i>'):j.button({icons:{primary:"ui-icon-bookmark"},text:!1}),(j=i.find(".btn-history")).on("click",function(){i.find(".objects-list-running").show(),setTimeout(function(){f.customButtonFilter.callback(),i.find(".objects-list-running").hide()},1)}).attr("title",f.texts.history),t?j.prepend('<i class="material-icons">build</i>'):j.button({icons:{primary:"ui-icon-gear"},text:!1}),(j=i.find(".btn-select-all")).on("click",function(){i.find(".objects-list-running").show(),setTimeout(function(){f.$tree.fancytree("getRootNode").visit(function(e){(!f.filterVals.length||e.match||e.subMatchCount)&&f.objects[e.key]&&"state"===f.objects[e.key].type&&e.setSelected(!0)}),i.find(".objects-list-running").hide()},100)}).attr("title",f.texts.selectAll),t?j.prepend('<i class="material-icons">playlist_add_check</i>'):j.button({icons:{primary:"ui-icon-circle-check"},text:!1}),f.expertModeRegEx&&((j=i.find(".btn-expert")).on("click",function(){i.find(".objects-list-running").show(),f.expertMode=!f.expertMode,f.expertMode?i.find(".btn-expert").addClass("ui-state-error red lighten-3"):i.find(".btn-expert").removeClass("ui-state-error red lighten-3"),E(f,!0),setTimeout(function(){f.inited=!1,k(f.$dlg),i.find(".objects-list-running").hide()},200)}).attr("title",f.texts.expertMode),f.expertMode&&i.find(".btn-expert").addClass("ui-state-error red lighten-3"),t?j.prepend('<i class="material-icons">assignment_ind</i>'):j.button({icons:{primary:"ui-icon-person"},text:!1})),(j=i.find(".btn-unselectall")).on("click",function(){i.find(".obj Line: 414 -  ing").show(),setTimeout(function(){f.$tree.fancytree("getRootNode").visit(function(e){e.setSelected(!1)}),i.find(".objects-list-running").hide()},100)}).attr("title",f.texts.unselectAll),t?j.prepend('<i class="material-icons">cancel</i>'):j.button({icons:{primary:"ui-icon-circle-close"},text:!1}),(j=i.find(".btn-invert-selection")).on("click",function(){i.find(".objects-list-running").show(),setTimeout(function(){f.$tree.fancytree("getRootNode").visit(function(e){(!f.filterVals.length||e.match||e.subMatchCount)&&f.objects[e.key]&&"state"===f.objects[e.key].type&&e.toggleSelected()}),i.find(".objects-list-running").hide()},100)}).attr("title",f.texts.invertSelection),t?j.prepend('<i class="material-icons">invert_colors</i>'):j.button({icons:{primary:"ui-icon-transferthick-e-w"},text:!1}),f.useValues&&((j=i.find(".btn-values")).on("click",function(){f.valuesActive=!f.valuesActive,F(f),window.localStorage&&window.localStorage.setItem(f.name+"-values",f.valuesActive?"true":"false"),i.find(".objects-list-running").show(),setTimeout(function(){f.inited=!1,k(f.$dlg),i.find(".objects-list-running").hide()},100)}).attr("title",f.texts.toggleValues),F(f)),t?j.prepend('<i class="material-icons">looks_one</i>'):j.button({icons:{primary:"ui-icon-tag"},text:!1}),S)try{H&&y(f,H,S[H])}catch(e){console.error("Cannot apply filter: "+e)}if(f.panelButtons)for(var W=0;W<f.panelButtons.length;W++)(j=i.find(".btn-custom-"+W)).attr("title",f.panelButtons[W].title||""),j.on("click",f.panelButtons[W].click),t?j.addClass("custom-toolbar-btn").prepend('<i class="material-icons">'+f.panelButtons[W]["material-icon"]+"</i>"):j.button(f.panelButtons[W]);for(var V in c(i),function t(i,n){!i.noColumnResize&&e.fn.colResizable&&(i.$tree.is(":visible")?(i.$tree.colResizable({liveDrag:!0,resizeMode:"fit",minWidth:50,partialRefresh:!0,marginLeft:5,postbackSafe:!0,onResize:function(){h(n)}}),h(n)):setTimeout(function(){t(i,n)},400))}(f,i),function(e){if("undefined"!=typeof Storage&&e.name){var t=window.localStorage.getItem(e.name+"-filter");if(t)try{for(var i in removeImageFromSettings(t=JSON.parse(t)),t)t.hasOwnPr Line: 415 -  ngth"!==i&&(e.filterPresets[i]||y(e,i,t[i]))}catch(e){console.error("Cannot parse settings: "+e)}else e.filter||y(e,"type","state")}}(f),"dialog-select-member"!==i.attr("id")&&"dialog-select-members"!==i.attr("id")?setTimeout(function(){i.css({height:"100%"})},500):i.attr("id"),f.filterPresets)f.filterPresets.hasOwnProperty(V)&&f.filterPresets[V]&&("object"==typeof f.filterPresets[V]?y(f,V,f.filterPresets[V][0]):y(f,V,f.filterPresets[V]));o(f)}function U(e,t){var i="";if(-1!==f.columns.indexOf(e)){void 0===t&&(t=f.texts[e.toLowerCase()]||"");var s=function(e){var t,i=[];switch(e){case"room":for(t=0;t<f.roomEnums.length;t++)i.push(n(f.objects[f.roomEnums[t]],f.roomEnums[t]));return i;case"function":for(t=0;t<f.funcEnums.length;t++)i.push(n(f.objects[f.funcEnums[t]],f.funcEnums[t]));return i;case"role":for(var s=0;s<f.roles.length;s++)i.push(f.roles[s]);return i;case"type":for(var r=0;r<f.types.length;r++)i.push(f.types[r]);return i;case"button":i.push([f.texts.all,""]),i.push([f.texts.with,"true"]),i.push([f.texts.without,"false"]);for(var o=0;o<f.histories.length;o++)i.push(f.histories[o]);return i}return i}(e),r='<select data-index="'+e+'" class="filter">',o=function(e,t){Array.isArray(e)?(t=e[0],e=e[1]):void 0===t&&(t=e),r+='<option value="'+e+'">'+t+"</option>"};o("",void 0!==addAll2FilterCombobox&&addAll2FilterCombobox?t+" ("+f.texts.all+")":t);for(var a=0,l=s.length;a<l;a++)o(s[a]);i=(r+="</select>")+'<button data-index="'+e+'" class="filter-btn"></button>\n'}else"room"===e?(f.rooms&&delete f.rooms,f.roomsColored&&delete f.roomsColored):"function"===e&&(f.funcs&&delete f.funcs,f.funcsColored&&delete f.funcsColored);return i}function q(e,t,i){if(!f.noCopyToClipboard){var n=e.data("name");"function"===n||"room"===n?e.addClass("edit-enum edit-dialog"):e.addClass("clippy"+(i?" edit-dialog":"")),void 0!==t&&e.data("clippy",t),i&&e.data("id",i),e.css({position:"relative"}).data("data",f).mouseenter(A).mouseleave(v)}}function K(e){if(e.parent&&e.parent.match)return!0;var t;null===f.filterVals&&(f.filterVals={length:0},x(f,function(e){t=i.find('.filter[data-index="'+e+'"]').val( Line: 416 -  "type"!==e&&"room"!==e&&"function"!==e&&t&&(t=t.toLowerCase()),t&&(f.filterVals[e]=t,f.filterVals.length++)}),f.noDialog&&E(f));var n,s=f.objects[e.key],r=s&&s.common;for(var o in f.filterVals)if(f.filterVals.hasOwnProperty(o))switch(o){case"length":continue;case"ID":if(-1===e.key.toLowerCase().indexOf(f.filterVals[o]))return!1;break;case"name":case"enum":if(!r||void 0===s.common[o])return!1;if("object"==typeof(n=s.common[o])&&(n=n[systemLang]||n.en||""),-1===(n||"").toLowerCase().indexOf(f.filterVals[o]))return!1;break;case"role":if(f.roleExactly){if(!r||void 0===s.common[o]||s.common[o]!==f.filterVals[o])return!1}else if(!r||void 0===s.common[o]||-1===s.common[o].indexOf(f.filterVals[o]))return!1;break;case"type":if(!s||void 0===s[o]||s[o]!==f.filterVals[o])return!1;break;case"button":if("true"===f.filterVals[o]){if(!r||!s.common.custom||!1===s.common.custom.enabled)return!1}else if("false"===f.filterVals[o]){if(!r||"state"!==s.type||s.common.custom)return!1}else if(f.filterVals[o]&&(!r||!s.common.custom||!s.common.custom[f.filterVals[o]]))return!1;break;case"room":if(!s||!f.rooms)return!1;if(f.rooms[e.key]||(f.rooms[e.key]=d(f,e.key)),-1===f.rooms[e.key].indexOf(f.filterVals[o]))return!1;break;case"function":if(!s||!f.funcs)return!1;if(f.funcs[e.key]||(f.funcs[e.key]=g(f,e.key)),-1===f.funcs[e.key].indexOf(f.filterVals[o]))return!1}return!0}}function E(e,t){"undefined"!=typeof Storage&&e.name&&(e.timer&&clearTimeout(e.timer),t?(window.localStorage.setItem(e.name+"-filter",JSON.stringify(e.filterVals)),window.localStorage.setItem(e.name+"-expert",JSON.stringify(e.expertMode)),window.localStorage.setItem(e.name+"-sort",JSON.stringify(e.sort)),window.localStorage.setItem(e.name+"-values",e.valuesActive?"true":"false"),e.timer=null):e.timer=setTimeout(function(){window.localStorage.setItem(e.name+"-filter",JSON.stringify(e.filterVals)),window.localStorage.setItem(e.name+"-expert",JSON.stringify(e.expertMode)),window.localStorage.setItem(e.name+"-sort",JSON.stringify(e.sort)),window.localStorage.setItem(e.name+"-values",e.valuesActive?"true":"false")},500))}function F(e){e.valu</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/vendor.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 45 -  turn function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),n="absolute"===i,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),s=isNaN(n);return(s||n>=0)&&t(i,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,r){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(r,n(this,t)+"px")})},e.fn["outer"+i]=function(t,s){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(r,n(this,t,!0,s)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e. Line: 411 -  [data-id="'+n.node.key+'"]').hide(),i.find('.select-button-custom[data-id="'+n.node.key+'"]').show(),void 0!==n.node.editFinished&&delete n.node.editFinished,f.save&&e(f.node.span).addClass("pending")}}),f.$tree.fancytree(z).on("nodeCommand",function(t,i){var n,s=e(this).fancytree("getTree").getActiveNode();switch(i.cmd){case"moveUp":s.moveTo(s.getPrevSibling(),"before"),s.setActive();break;case"moveDown":s.moveTo(s.getNextSibling(),"after"),s.setActive();break;case"indent":n=s.getPrevSibling(),s.moveTo(n,"child"),n.setExpanded(),s.setActive();break;case"outdent":s.moveTo(s.getParent(),"after"),s.setActive();break;case"delete":var r=e(s.tr).find(".select-button-1");r&&r.length&&r.trigger("click");break;case"rename":var o=e(s.tr).find(".objects-name-coll-title");o&&o.length&&o.trigger("click");break;default:return void alert("Unhandled command: "+i.cmd)}}).on("keydown",function(t){if(!f.editing){var i=null;if(t.ctrlKey)switch(t.which){case"c":i="copy";break;case e.ui.keyCode.UP:i="moveUp";break;case e.ui.keyCode.DOWN:i="moveDown";break;case e.ui.keyCode.RIGHT:i="indent";break;case e.ui.keyCode.LEFT:i="outdent"}else switch(t.which){case e.ui.keyCode.DELETE:i="delete";break;case 113:i="rename"}return i?(e(this).trigger("nodeCommand",{cmd:i}),!1):void 0}}),function(e,t){t&&e.$tree&&(function e(i){if(Array.isArray(i.children))for(var n=0,s=i.children.length;n<s;n++){var r=i.children[n];if(t[r.key])try{r.setExpanded()}catch(e){console.log("Cannot expand: "+e)}e(r)}}(e.$tree.fancytree("getRootNode")),t=null)}(f,m),e(window).on("resize",function(){P&&clearTimeout(P),P=setTimeout(function(){h(i)},100)}),i.trigger("resize"),i.find(".filter").change(function(e){f.filterVals=null,e&&e.target&&filterChanged(e.target);var t=i.find(".objects-list-running");t.show(),f.$tree.fancytree("getTree").filterNodes(K,!1),t.hide()}).keyup(function(){var t=f.$tree[0];t._timer&&(t._timer=clearTimeout(t._timer));var i=this;t._timer=setTimeout(function(){e(i).trigger("change")},200)});var j=i.find(".filter-btn");for(var H in j.on("click",function(){i.find('.filter[data-index="'+e(this).data("index")+'"]')</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery.fancytree-all.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 6 -  ];else for(r=(i=this.getParentList(!1,!0)).length-1;r>=0;r--){for(s=i[r].getNextSibling();s&&!e(s.span).is(":visible");)s=s.getNextSibling();if(s)break}o=l(s);break;default:!1}return o||k()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(n){var r,i=this.parent,o=e.inArray(this,i.children),a=this;return m(this.isPagingNode(),"replaceWith() currently requires a paging status node"),(r=this.tree._callHook("nodeLoadChildren",this,n)).done(function(e){var n=a.children;for(t=0;t<n.length;t++)n[t].parent=i;i.children.splice.apply(i.children,[o+1,0].concat(n)),a.children=null,a.remove(),i.render()}).fail(function(){a.setExpanded()}),r},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=void 0,this.renderStatus()},scheduleAction:function(t,n){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var r=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){r.tree.debug("setTimeout: trigger expand"),r.setExpanded(!0)},n);break;case"activate":this.tree.timer=setTimeout(function(){r.tree.debug("setTimeout: trigger activate"),r.setActive(!0)},n);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(t,n){var r;void 0!==n&&((r=n).tree&&void 0!==r.statusNodeType)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),n={topNode:n});var i,o,a,s=e.extend({effects:!0===t?{duration:200,queue:!1}:t,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},n),l=new e.Deferred,d=this,c=e(this.span).height(),u=e(s.scrollParent),p=s. Line: 11 -  (0)===d&&(o=o.substr(1)),c.push(o.split(d));return setTimeout(function(){a._loadKeyPathImpl(s,u,l,c).done(function(){s.resolve()})},0),s.promise()},_loadKeyPathImpl:function(t,n,r,i){var o,a,s,l,d,c,u,p,h=this;function f(e,t){var r,i,o=e.children;if(o)for(r=0,i=o.length;r<i;r++)if(n.matchKey(o[r],t))return o[r];return null}for(d={},a=0;a<i.length;a++)for(u=i[a],c=r;u.length;){if(s=u.shift(),!(l=f(c,s))){this.warn("loadKeyPath: key not found: "+s+" (parent: "+c+")"),n.callback(this,s,"error");break}if(0===u.length){n.callback(this,l,"ok");break}if(l.lazy&&void 0===l.hasChildren()){n.callback(this,l,"loaded"),d[s=l.key]?d[s].pathSegList.push(u):d[s]={parent:l,pathSegList:[u]};break}n.callback(this,l,"loaded"),c=l}function g(e,t,r){n.callback(h,t,"loading"),t.load().done(function(){h._loadKeyPathImpl.call(h,e,n,t,r).always(N(e,h))}).fail(function(r){h.warn("loadKeyPath: error loading lazy "+t),n.callback(h,l,"error"),e.rejectWith(h)})}for(var y in o=[],d){var v=d[y];p=new e.Deferred,o.push(p),g(p,v.parent,v.pathSegList)}return e.when.apply(e,o).promise()},reactivate:function(e){var t,n=this.activeNode;return n?(this.activeNode=null,t=n.setActive(!0,{noFocus:!0}),e&&n.setFocus(),t):k()},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},toDict:function(e,t){var n=this.rootNode.toDict(!0,t);return e?n:n.children},toString:function(){return"Fancytree@"+this._id},_triggerNodeEvent:function(e,t,n,r){var i=this._makeHookContext(t,n,r),o=this.widget._trigger(e,n,i);return!1!==o&&void 0!==i.result?i.result:o},_triggerTreeEvent:function(e,t,n){var r=this._makeHookContext(this,t,n),i=this.widget._trigger(e,t,r);return!1!==i&&void 0!==r.result?r.result:i},visit:function(e){return this.rootNode.visit(e,!1)},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),x("warn",arguments)}},e.extend(A.prototype,{nodeClick:function(e){var t,n,r=e.targetType,i=e.node;if("expander"===r){if(i.isLoading())return void i.debug Line: 13 -   while #"+s._requestId+" is pending."),r=e.extend({},t.options.ajax,n),s._requestId=l,r.debugDelay?(i=r.debugDelay,e.isArray(i)&&(i=i[0]+Math.random()*(i[1]-i[0])),s.warn("nodeLoadChildren waiting debugDelay "+Math.round(i)+" ms ..."),r.debugDelay=!1,o=e.Deferred(function(t){setTimeout(function(){e.ajax(r).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},i)})):o=e.ajax(r),n=new e.Deferred,o.done(function(r,i,o){var d,c;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof r||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),s._requestId&&s._requestId>l)n.rejectWith(this,["$recursive_request"]);else{if(t.options.postProcess){try{c=a._triggerNodeEvent("postProcess",t,t.originalEvent,{response:r,error:null,dataType:this.dataType})}catch(e){c={error:e,message:""+e,details:"postProcess failed"}}if(c.error)return d=e.isPlainObject(c.error)?c.error:{message:c.error},d=a._makeHookContext(s,null,d),void n.rejectWith(this,[d]);r=e.isArray(c)?c:r}else r&&r.hasOwnProperty("d")&&t.options.enableAspx&&(r="string"==typeof r.d?e.parseJSON(r.d):r.d);n.resolveWith(this,[r])}}).fail(function(e,t,r){var i=a._makeHookContext(s,null,{error:e,args:Array.prototype.slice.call(arguments),message:r,details:e.status+": "+r});n.rejectWith(this,[i])})),e.isFunction(n.then)&&e.isFunction(n.catch)&&(o=n,n=new e.Deferred,o.then(function(e){n.resolve(e)},function(e){n.reject(e)})),e.isFunction(n.promise))a.nodeSetStatus(t,"loading"),n.done(function(e){a.nodeSetStatus(t,"ok"),s._requestId=null}).fail(function(e){var n;"$recursive_request"!==e?(e.node&&e.error&&e.message?n=e:"[object Object]"===(n=a._makeHookContext(s,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""})).message&&(n.message=""),s.warn("Load children failed ("+n.message+")",n),!1!==a._triggerNodeEvent("loadError",n,null)&&a.nodeSetStatus(t,"error",n.message,n.details)):s.warn("Ignored response for obsolete load request #"+l+" (expected #"+s._requestId+")")});else if(t.options.postProcess){var d=a._triggerNodeEve Line: 23 -  finally{s.phase=l}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(e){return this.tree.getNodeByKey(e)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),r=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"2.27.0",buildType:"production",debugLevel:1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:A,_FancytreeNodeClass:T,jquerySupports:{positionMyOfs:function(t,n,r,i){var o,a,s,l=e.map(e.trim(t).split("."),function(e){return parseInt(e,10)}),d=e.map(Array.prototype.slice.call(arguments,1),function(e){return parseInt(e,10)});for(o=0;o<d.length;o++)if((a=l[o]||0)!==(s=d[o]||0))return a>s;return!0}(e.ui.version,1,9)},assert:function(e,t){return m(e,t)},createTree:function(t,n){return e(t).fancytree(n).fancytree("getTree")},debounce:function(e,t,n,r){var i;return 3===arguments.length&&"boolean"!=typeof n&&(r=n,n=!1),function(){var o=arguments;r=r||this,n&&!i&&t.apply(r,o),clearTimeout(i),i=setTimeout(function(){n||t.apply(r,o),i=null},e)}},debug:function(t){e.ui.fancytree.debugLevel>=2&&x("log",arguments)},error:function(e){x("error",arguments)},escapeHtml:function(e){return(""+e).replace(o,function(e){return s[e]})},fixPositionOptions:function(t){if((t.offset||(""+t.my+t.at).indexOf("%")>=0)&&e.error("expected new position syntax (but '%' is not supported)"),!e.ui.fancytree.jquerySupports.positionMyOfs){var n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),r=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),i=(n[2]?+n[2]:0)+(r[2]?+r[2]:0),o=(n[4]?+n[4]:0)+(r[4]?+r[4]:0);t=e.extend({},t,{my:n[1]+" "+n[3],at:r[1]+" "+r[3]}),(i||o)&&(t.offset=i+" "+o)}return t},getEventTarget:function(t){var n=t&&t.target?t.target.className:"",i={node:this.getNode(t.target),type:void 0};return/\bfancytree-title\b/.test(n)?i.type="title":/\bfancytree-expander\b/.test(n)?i.type=!1===i.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(n)?i.type="checkbox":/\bfancytree(-custom)?-icon\b/.test(n)?i.type="icon":/\bfancytree-node\b/.test(n)?i.type="title":t&&e(t.target).is("ul[role=group]")?(r.info("Ignoring click Line: 31 -  type&&1===t.which;a||(i||o||e.ui.fancytree).debug("Drag was cancelled"),o&&(a&&o.tree.ext.dnd._onDragEvent("drop",o,i,t,n,r),o.tree.ext.dnd._onDragEvent("leave",o,i,t,n,r)),i&&i.tree.ext.dnd._onDragEvent("stop",i,null,t,n,r)}}),t=!0)),r&&r.dragStart&&n.widget.element.draggable(e.extend({addClasses:!1,appendTo:n.$container,containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:!0,helper:function(t){var n,r,o,a=e.ui.fancytree.getNode(t.target);return a?(o=a.tree.options.dnd,r=e(a.span),(n=e("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(r.find("span.fancytree-title").clone())).data("ftSourceNode",a),i&&n.find(".fancytree-drag-helper-img").addClass(i.map._addClass+" "+i.map.dragHelper),o.initHelper&&o.initHelper.call(a.tree,a,{node:a,tree:a.tree,originalEvent:t,ui:{helper:n}}),n):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(e,t){return!!t.helper.data("ftSourceNode")}},n.options.dnd.draggable)),r&&r.dragDrop&&n.widget.element.droppable(e.extend({addClasses:!1,tolerance:"intersect",greedy:!1},n.options.dnd.droppable))}return e.ui.fancytree.registerExtension({name:"dnd",version:"2.27.0",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dropMarkerOffsetX:-24,dropMarkerInsertOffsetX:-16,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(t){var r=t.tree;this._superApply(arguments),r.options.dnd.dragStart&&r.$container.on("mousedown",function(n){if(t.options.dnd.focusOnClick){var r=e.ui.fancytree.getNode(n);r&&r.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout(function(){e(n.target).closest(":tabbable").focus()},10)}}),n(r)},_setDndStatus:function(t,n,r,i,o){var a,s,l="center",d=this._local,c=this.options.dnd,u=this.options.glyph,p=t?e(t.span):null,h=e(n.span),f=h.find("span.fancytree-title");if(d.$dropMark Line: 36 -  =null,u=null,p.isCancelled="none"===i.dropEffect,d.hide(),y.dragEnd(r,p)}}),y.dragEnter&&s.$container.on("dragenter dragover dragleave drop",function(t){var r,i,f,g=null,m=v(t),x=t.dataTransfer||t.originalEvent.dataTransfer,b={node:m,tree:s,options:s.options,hitMode:u,originalEvent:t,dataTransfer:x,otherNode:c||null,otherNodeData:null,dropEffect:void 0,isCancelled:void 0};switch(t.type){case"dragenter":if(!m){s.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className),u=!1;break}if(e(m.span).addClass(o).removeClass(n+" "+a),y.preventNonNodes&&!i){m.debug("Reject dropping a non-node"),u=!1;break}if(y.preventForeignNodes&&(!c||c.tree!==m.tree)){m.debug("Reject dropping a foreign node"),u=!1;break}setTimeout(function(){!y.autoExpandMS||!1===m.hasChildren()||m.expanded||y.dragExpand&&!1===y.dragExpand(m,b)||m.scheduleAction("expand",y.autoExpandMS)},0),d.show(),f=(!y.preventRecursiveMoves||!m.isDescendantOf(b.otherNode))&&function(t){var n;return!!t&&(n=e.isPlainObject(t)?{over:!!t.over,before:!!t.before,after:!!t.after}:e.isArray(t)?{over:e.inArray("over",t)>=0,before:e.inArray("before",t)>=0,after:e.inArray("after",t)>=0}:{over:!0===t||"over"===t,before:!0===t||"before"===t,after:!0===t||"after"===t},0!==Object.keys(n).length&&n)}(y.dragEnter(m,b)),u=f,g=f&&(f.over||f.before||f.after);break;case"dragover":g=!!(p=h(t,b));break;case"dragleave":if(!m){s.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className);break}if(!e(m.span).hasClass(o)){m.debug("Ignore dragleave (multi)");break}e(m.span).removeClass(o+" "+n+" "+a),m.scheduleAction("cancel"),y.dragLeave(m,b),d.hide();break;case"drop":if(e.inArray(l,x.types)>=0&&(i=x.getData(l),s.info(t.type+": getData('application/x-fancytree-node'): '"+i+"'")),i||(i=x.getData("text"),s.info(t.type+": getData('text'): '"+i+"'")),i)try{void 0!==(r=JSON.parse(i)).title&&(b.otherNodeData=r)}catch(e){}s.debug(t.type+": nodeData: '"+i+"', otherNodeData: ",b.otherNodeData),e(m.span).removeClass(o+" "+n+" "+a),d.hide(),b.hitMode=p,b.dropEffect=x.dropEffect,b.isCancelled="none"===b.dropEffect,y.dragDrop(m,b),t.p</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery.multiselect-1.13.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 21 -  .hasClass("ui-multiselect-close"))b.close();else b[d(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]();a.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(a){a.preventDefault();var c=d(this),g=c.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),e=g.get(),c=c.parent().text();!1!==b._trigger("beforeoptgrouptoggle",a,{inputs:e,label:c})&&(b._toggleChecked(g.filter(":checked").length!==g.length,g),b._trigger("optgrouptoggle",a,{inputs:e,label:c,checked:e[0].checked}))}).delegate("label","mouseenter.multiselect",function(){d(this).hasClass("ui-state-disabled")||(b.labels.removeClass("ui-state-hover"),d(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(a){a.preventDefault();switch(a.which){case 9:case 27:b.close();break;case 38:case 40:case 37:case 39:b._traverse(a.which,this);break;case 13:d(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(a){var c=d(this),g=this.value,e=this.checked,i=b.element.find("option");this.disabled||!1===b._trigger("click",a,{value:g,text:this.title,checked:e})?a.preventDefault():(c.focus(),c.attr("aria-selected",e),i.each(function(){this.value===g?this.selected=e:b.options.multiple||(this.selected=!1)}),b.options.multiple||(b.labels.removeClass("ui-state-active"),c.closest("label").toggleClass("ui-state-active",e),b.close()),b.element.trigger("change"),setTimeout(d.proxy(b.update,b),10))});d(document).bind("mousedown.multiselect",function(a){b._isOpen&&(!d.contains(b.menu[0],a.target)&&!d.contains(b.button[0],a.target)&&a.target!==b.button[0])&&b.close()});d(this.element[0].form).bind("reset.multiselect",function(){setTimeout(d.proxy(b.refresh,b),10)})},_setButtonWidth:function(){var a=this.element.outerWidth(),b=this.options;/\d/.test(b.minWidth)&&a<b.minWidth&&(a=b.minWidth);this.button.width(a)},_setMenuWidth:function(){var a=this.menu,b=this.button.outerWidth()-parseInt(a.css("padding-left"),10)-parseInt(a.css("padding-r</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/selectID.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Logic fail</Title>
 <Description>Possible logic bug that could lead to security bugs. Assigning a static string to a variable in an if condition is not normal and is likely a mistake.</Description>
 <Level> Low</Level>
 <Reference> https://en.wikipedia.org/wiki/Logic_error</Reference>
 <Match> if\s?\(\s?\$.*\s?(?<!\!)=\s?('|").*('|")\s?\)</Match>
 <Result> Line: 1472 -          if ($dlg.attr('id') !== 'dialog-select-member' && $dlg.attr('id') !== 'dialog-select-members') {

 Line: 3294 -          if ($dlg.attr('id') !== 'dialog-select-member' && $dlg.attr('id') !== 'dialog-select-members') {

 Line: 3298 -          } else if ($dlg.attr('id') === 'dialog-select-members') {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/selectID.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 1166 -              setTimeout(function () {

 Line: 1368 -              setTimeout(function () {

 Line: 1412 -              timeout = setTimeout(function () {

 Line: 1437 -          setTimeout(function () {

 Line: 2967 -              resizeTimer = setTimeout(function () {

 Line: 2978 -              //changeTimer = setTimeout(function () {

 Line: 2993 -              tree._timer = setTimeout(function () {

 Line: 3012 -              setTimeout(function () {

 Line: 3031 -              setTimeout(function () {

 Line: 3061 -              setTimeout(function () {

 Line: 3085 -              setTimeout(function () {

 Line: 3119 -              setTimeout(function () {

 Line: 3137 -              setTimeout(function () {

 Line: 3152 -              setTimeout(function () {

 Line: 3184 -                  setTimeout(function () {

 Line: 3203 -              setTimeout(function () {

 Line: 3220 -              setTimeout(function () {

 Line: 3247 -                  setTimeout(function () {

 Line: 3295 -              setTimeout(function () {

 Line: 3326 -              data.timer = setTimeout(function () {

 Line: 3342 -                      //setTimeout(function () {

 Line: 3554 -                      var connectTimeout = setTimeout(function () {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/selectID.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 2858 -                      case $.ui.keyCode.DELETE:

 Line: 3575 -                          query:                          'key=' + data.socketSESSION,

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/materialize.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 2 -  ){return null==e?null:e===document.body||"visible"!==getComputedStyle(e).overflow?e:M.getOverflowParent(e.parentElement)},M.getIdFromTrigger=function(e){var t=e.getAttribute("data-target");return t||(t=(t=e.getAttribute("href"))?t.slice(1):""),t},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var getTime=Date.now||function(){return(new Date).getTime()};M.throttle=function(e,t,n){var i,o,s,a=null,r=0;n||(n={});var l=function(){r=!1===n.leading?0:getTime(),a=null,s=e.apply(i,o),i=o=null};return function(){var u=getTime();r||!1!==n.leading||(r=u);var h=t-(u-r);return i=this,o=arguments,h<=0?(clearTimeout(a),a=null,r=u,s=e.apply(i,o),i=o=null):a||!1===n.trailing||(a=setTimeout(l,h)),s}};var Component=function(){function e(t,n,i){_classCallCheck(this,e),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var o=t.getInstance(n);o&&o.destroy(),this.el=n,this.$el=cash(n)}return _createClass(e,null,[{key:"init",value:function(e,t,n){var i=null;if(t instanceof Element)i=new e(t,n);else if(t.jquery||t instanceof NodeList){for(var o=[],s=0;s<t.length;s++)o.push(new e(t[s],n));i=o}return i}}]),e}(),$jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.globa Line: 18 -  is.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.dropdownEl.removeEventListener("touchend",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(t){var n=t.toElement||t.relatedTarget,i=!!e(n).closest(".dropdown-content").length,o=!1,s=e(n).closest(".dropdown-trigger");s.length&&s[0].M_Dropdown&&s[0].M_Dropdown.isOpen&&(o=!0),o||i||this.close()}},{key:"_handleDocumentClick",value:function(t){var n=this,i=e(t.target);this.options.closeOnClick&&i.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){n.close()},0):!i.closest(".dropdown-trigger").length&&i.closest(".dropdown-content").length||setTimeout(function(){n.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_ Line: 19 -  tTouchmove",value:function(t){e(t.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(t){if("function"==typeof this.options.onItemClick){var n=e(t.target).closest("li")[0];this.options.onItemClick.call(this,n)}}},{key:"_handleDropdownKeydown",value:function(t){if(t.which===M.keys.TAB)t.preventDefault(),this.close();else if(t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||!this.isOpen)if(t.which===M.keys.ENTER&&this.isOpen){var n=this.dropdownEl.children[this.focusedIndex],i=e(n).find("a, button").first();i.length?i[0].click():n&&n.click()}else t.which===M.keys.ESC&&this.isOpen&&(t.preventDefault(),this.close());else{t.preventDefault();var o=t.which===M.keys.ARROW_DOWN?1:-1,s=this.focusedIndex,a=!1;do{if(s+=o,this.dropdownEl.children[s]&&-1!==this.dropdownEl.children[s].tabIndex){a=!0;break}}while(s<this.dropdownEl.children.length&&s>=0);a&&(this.focusedIndex=s,this._focusFocusedItem())}var r=String.fromCharCode(t.which).toLowerCase();if(r&&-1===[9,13,27,38,40].indexOf(t.which)){this.filterQuery.push(r);var l=this.filterQuery.join(""),u=e(this.dropdownEl).find("li").filter(function(t){return 0===e(t).text().toLowerCase().indexOf(l)})[0];u&&(this.focusedIndex=e(u).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,e(this.dropdownEl).children().each(function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var e=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClient Line: 22 -  ,value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.dismiss()},20))}},{key:"dismiss",value:function(){var e=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX(".concat(n,"px)"),this.el.style.opacity=0),t({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"==typeof e.options.completeCallback&&e.options.completeCallback(),e.el.parentNode.removeChild(e.el),i._toasts.splice(i._toasts.indexOf(e),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Toast}},{key:"_createContainer",value:function(e){var t=document.createElement("div");t.setAttribute("id","toast-container"),t.addEventListener("touchstart",i._onDragStart),t.addEventListener("touchmove",i._onDragMove),t.addEventListener("touchend",i._onDragEnd),t.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),e.parentSelector?e.parentSelector.appendChild(t):document.body.appendChild(t),i._container=t}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),i._container.parentNode.removeChild(i._container),i._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var n=e(t.target).closest(".toast")[0].M_Toast;n.panning=!0,i._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.startingXPos=i._xPos(t),n.time=Date.now(),n.xPos=i._xPos(t)}}},{key:"_onDragMove",value:function(e){if(i._draggedToast){e.preventDefault();var t=i._draggedToast;t.deltaX=Math.abs(t.xPos-i._xPos(e)),t.xPos=i._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var n=t.xPos-t.startingXPos,o=t.el.o Line: 30 -  ").removeClass("invalid"),i.find(t).each(function(t){this.value.length&&e(this).siblings("label").removeClass("active")}),setTimeout(function(){i.find("select").each(function(){this.M_FormSelect&&e(this).trigger("change")})},0))}),document.addEventListener("focus",function(n){e(n.target).is(t)&&e(n.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(n){var i=e(n.target);if(i.is(t)){var o=".prefix";0===i[0].value.length&&!0!==i[0].validity.badInput&&null===i.attr("placeholder")&&(o+=", label"),i.siblings(o).removeClass("active"),M.validate_field(i)}},!0);e(document).on("keyup","input[type=radio], input[type=checkbox]",function(t){if(t.which===M.keys.TAB)return e(this).addClass("tabbed"),void e(this).one("blur",function(t){e(this).removeClass("tabbed")})});e(".materialize-textarea").each(function(){var t=e(this);t.data("original-height",t.height()),t.data("previous-length",this.value.length),M.textareaAutoResize(t)}),e(document).on("keyup",".materialize-textarea",function(){M.textareaAutoResize(e(this))}),e(document).on("keydown",".materialize-textarea",function(){M.textareaAutoResize(e(this))}),e(document).on("change",'.file-field input[type="file"]',function(){for(var t=e(this).closest(".file-field").find("input.file-path"),n=e(this)[0].files,i=[],o=0;o<n.length;o++)i.push(n[o].name);t[0].value=i.join(", "),t.trigger("change")})})}(cash),function(e,t){"use strict";var n={},i=function(i){function o(t,n){var i;return _classCallCheck(this,o),(i=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this,o,t,n))).el.M_Range=_assertThisInitialized(i),i.options=e.extend({},o.defaults,n),i._mousedown=!1,i._setupThumb(),i._setupEventHandlers(),i}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeFocusBound=this._handleRangeFocus.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchsta Line: 49 -  Bound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),e(this.spanHours).on("click",this.showView.bind(this,"hours")),e(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(e){e.preventDefault();var t=this.plate.getBoundingClientRect(),n=t.left,o=t.top;this.x0=n+this.options.dialRadius,this.y0=o+this.options.dialRadius,this.moved=!1;var s=i._Pos(e);this.dx=s.x-this.x0,this.dy=s.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(e){e.preventDefault();var t=i._Pos(e),n=t.x-this.x0,o=t.y-this.y0;this.moved=!0,this.setHand(n,o,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(t){var n=this;t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var o=i._Pos(t),s=o.x-this.x0,a=o.y-this.y0;this.moved&&s===this.dx&&a===this.dy&&this.setHand(s,a),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(e(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){n.done()},this.options.duration/2)),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this Line: 52 -  &(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var e=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==e[1]&&(e[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",e[1]=e[1].replace("AM","").replace("PM","")),"now"===e[0]){var t=new Date(+new Date+this.options.fromnow);e=[t.getHours(),t.getMinutes()],this.options.twelveHour&&(this.amOrPm=e[0]>=12&&e[0]<24?"PM":"AM")}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=i._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(t,n){"minutes"===t&&e(this.hoursView).css("visibility");var i="hours"===t,o=i?this.hoursView:this.minutesView,s=i?this.minutesView:this.hoursView;this.currentView=t,e(this.spanHours).toggleClass("text-primary",i),e(this.spanMinutes).toggleClass("text-primary",!i),s.classList.add("timepicker-dial-out"),e(o).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){e(s).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(t){var n=this.currentView,i=this[n],o="hours"===n,s=i*(Math.PI/(o?6:30)),a=o&&i>0&&i<13?this.options.innerRadius:this.options.outerRadius,r=Math.sin(s)*a,l=-Math.cos(s)*a,u=this;t?(e(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){e(u.canvas).removeClass("timepicker-canvas-out"),u.setHand(r,l)},t)):this.setHand(r,l)}},{key:"setHand",value:function(e,t,n){var o=this,s=Math.atan2(e,-t),a="hours"===this.currentView,r=Math.PI/(a||n?6:30),l=Math.sqrt(e*e+t*t),u=a&&l<(this.options.outerRadius+this.options.innerRadius)/2,h=u?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(h=this.options.outerRadius),s<0&&(s=2*Math.PI+s);var c=Math.round(s/r);s=c*r,this.options.twelveHour?a?0===c&&(c=12):(n&&(c*=5),60===c&&(c=0)):a?(12===c&&(c=0),c=u?0===c?12:c:0===c?0:c+1 Line: 53 -  ,60===c&&(c=0)),this[this.currentView]!==c&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){o.vibrateTimer=null},100))),this[this.currentView]=c,a?this.spanHours.innerHTML=c:this.spanMinutes.innerHTML=i._addLeadingZero(c);var d=Math.sin(s)*(h-this.options.tickRadius),p=-Math.cos(s)*(h-this.options.tickRadius),f=Math.sin(s)*h,v=-Math.cos(s)*h;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",p),this.bg.setAttribute("cx",f),this.bg.setAttribute("cy",v)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(e,t){var n=this.el.value,o=t?"":i._addLeadingZero(this.hours)+":"+i._addLeadingZero(this.minutes);this.time=o,!t&&this.options.twelveHour&&(o="".concat(o," ").concat(this.amOrPm)),this.el.value=o,o!==n&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(e,t){return _get(_getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"_addLeadingZero",value:function(e){return(e<10?"0":"")+e}},{key:"_createSVGEl",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"_Pos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Timepicker}},{key:"defaults",get:function(){return t}}]),i}();n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></di Line: 55 -  layTimeout())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var e=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){e.isHovered||e._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(){var e=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){e.isHovered&&e._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var t,n,i,o=this.$el[0],s=this.tooltipEl,a=o.offsetHeight,r=o.offsetWidth,l=s.offsetHeight,u=s.offsetWidth,h=this.options.margin;this.xMovement=0,this.yMovement=0,n=o.getBoundingClientRect().top+M.getDocumentScrollTop(),i=o.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(n+=-l-h,i+=r/2-u/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(n+=a/2-l/2,i+=r+h,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(n+=a/2-l/2,i+=-u-h,this.xMovement=-this.options.transitionMovement):(n+=a+h,i+=r/2-u/2,this.yMovement=this.options.transitionMovement),t=this._repositionWithinScreen(i,n,u,l),e(s).css({top:t.y+"px",left:t.x+"px"})}},{key:"_repositionWithinScreen",value:function(e,t,n,i){var o=M.getDocumentScrollLeft(),s=M.getDocumentScrollTop(),a=e-o,r=t-s,l={left:a,top:r,width:n,height:i},u=this.options.margin+this.options.transitionMovement,h=M.checkWithinContainer(document.body,l,u);return h.left?a=u:h.right&&(a-=a+n-window.innerWidth),h.top?r=u:h.bottom&&(r-=r+i-window.innerHeight),{x:a+o,y:r+s}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouse</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-ui-1.10.3.full.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 5 -  (function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.da Line: 9 -  disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})})(jQuery);(function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{ca Line: 10 -  textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this Line: 54 -  +(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})})(jQuery);(function(e){var t,i,n,s,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},u=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,r=this.options,l="checkbox"===this.type||"radio"===this.type,c=l?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}), Line: 64 -  generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,a=this._getNumberOfMonths(t),s=a[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),t.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,a){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,u=document.documentElement.clientWidth+(a?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-r:0,i.left-=a&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=a&&i.top===t.input.offset().top+o?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>u&&u>s?Math.abs(i.left+s-u):0),i.top-=Math.min(i.top,i.top+n>c&&c>n?Math.abs(n+o):0),i},_findPos:function(t){for(var i,a=this._getInst(t),s=this._get(a,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,a,s,n,o=this._curInst;!o||t&&o!==e.data(t,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),s=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),a,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,s),i||s(),this._datepickerShowing=!1,n=this._get(o,"onClose"),n Line: 98 -  is.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),h={tab:a,panel:r};s(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,a){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:a},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})})(jQuery);(function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"=== Line: 99 -  s.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);if(n){if(a=this._find(s),a.length)return a.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-ui-1.10.3.full.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 5 -  (function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.da</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/dropzone.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 8 -  r b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},b.prototype.enqueueFile=function(a){var c=this;if(a.status!==b.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=b.QUEUED,this.options.autoProcessQueue?setTimeout(function(){return c.processQueue()},1):void 0},b.prototype.addDirectory=function(a,b){var c,d,e=this;return c=a.createReader(),d=function(c){var d,f;for(d=0,f=c.length;f>d;d++)a=c[d],a.isFile?a.file(function(a){return e.options.ignoreHiddenFiles&&"."===a.name.substring(0,1)?void 0:(a.fullPath=""+b+"/"+a.name,e.addFile(a))}):a.isDirectory&&e.addDirectory(a,""+b+"/"+a.name)},c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console?"function"==typeof console.log?console.log(a):void 0:void 0})},b.prototype.removeFile=function(a){return a.status===b.UPLOADING&&this.cancelUpload(a),this.files=h(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},b.prototype.removeAllFiles=function(a){var c,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)c=f[d],(c.status!==b.UPLOADING||a)&&this.removeFile(c);return null},b.prototype.createThumbnail=function(a){var b,c=this;return b=new FileReader,b.onload=function(){var d;return d=new Image,d.onload=function(){var b,e,f,g,h,i,j,k;return a.width=d.width,a.height=d.height,f=c.options.resize.call(c,a),null==f.trgWidth&&(f.trgWidth=c.options.thumbnailWidth),null==f.trgHeight&&(f.trgHeight=c.options.thumbnailHeight),b=document.createElement("canvas"),e=b.getContext("2d"),b.width=f.trgWidth,b.height=f.trgHeight,e.drawImage(d,null!=(h=f.srcX)?h:0,null!=(i=f.srcY)?i:0,f.srcWidth,f.srcHeight,null!=(j=f.trgX)?j:0,null!=(k=f.trgY)?k:0,f.trgWidth,f.trgHeight),g=b.toDataURL("image/png"),c.emit("thumbnail",a,g)},d.src=b.result},b.readAsDataURL(a)},b.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c)) Line: 12 -  ""),f=0,g=b.length;g>f;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(-1!==a.name.indexOf(e,a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),"undefined"!=typeof c&&null!==c?c.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",f=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,setTimeout(g,50),void 0}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},a._autoDiscoverFunction=function(){return a.autoDiscover?a.discover():void 0},f(window,a._autoDiscoverFunction)}.call(this)}),a.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),a.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=a("dropzone"):"function"==typeof define&&define.amd?define(function(){return a("dropzone")}):this.Dropzone=a("dropzone")}();
</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-1.11.2.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 15 -  y:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON Line: 33 -  }m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))retu Line: 36 -  "],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(fun Line: 43 -  nd.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(th Line: 45 -  X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jqGrid/jquery.jqGrid-4.5.4.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 42 -  B===e.lastpage)))c.hDiv.loading?c.timer=setTimeout(c.populateVisible,e.scrollTimeout):(e.page=B,A&&(c.selectionPreserver(d[0]),c.emptyRows.call(d[0],!1,!1)),c.populate(F))}}},scrollGrid:function(a){if(e.scroll){var b=c.bDiv.scrollTop;void 0===c.scrollTop&&(c.scrollTop=0);b!==c.scrollTop&&(c.scrollTop=b,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,e.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft;e.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft);a&&a.stopPropagation()},

 Line: 214 -  case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:h&&clearTimeout(h);h=setTimeout(function(){e()},500)}}));break;case "custom":a("td:eq(1)",l).append("<span style='width:95%;padding:0px;' name='"+(g.index||g.name)+"' id='gs_"+g.name+"'/>");a(j).append(l);try{if(a.isFunction(f.custom_element)){var v=f.custom_element.call(c,void 0!==f.defaultValue?f.defaultValue:"",f);if(v)v=a(v).addClass("customelement"),a(j).find(">span").append(v);else throw"e2";}else throw"e1";}catch(u){"e1"===

 Line: 251 -  f.buildSelect.call(i,b):b;typeof b==="string"&&(b=a(a.trim(b)).html());if(b){a(c).append(b);h(c,f,j?["postData"]:void 0);if(f.size===void 0)f.size=g?3:1;if(g){d=e.split(",");d=a.map(d,function(b){return a.trim(b)})}else d[0]=a.trim(e);setTimeout(function(){a("option",c).each(function(b){if(b===0&&c.multiple)this.selected=false;a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),d)>-1||a.inArray(a.trim(a(this).val()),d)>-1)this.selected="selected"})},0)}}},e||{}))}else if(b.value){var k;

 Line: 296 -  k[2],z,j):a(d).jqGrid("addRowData",k[2],j,c.addedrow);if(b[d.p.id].closeAfterAdd){d.p.treeGrid!==true&&a(d).jqGrid("setSelection",k[2]);a.jgrid.hideModal("#"+a.jgrid.jqID(n.themodal),{gb:"#gbox_"+a.jgrid.jqID(p),jqm:c.jqModal,onClose:b[d.p.id].onClose})}else b[d.p.id].clearAfterAdd&&u("_empty",d,g)}else{if(b[d.p.id].reloadAfterSubmit){a(d).trigger("reloadGrid");b[d.p.id].closeAfterEdit||setTimeout(function(){a(d).jqGrid("setSelection",j[h])},1E3)}else d.p.treeGrid===true?a(d).jqGrid("setTreeRow",

 Line: 297 -  j[h],j):a(d).jqGrid("setRowData",j[h],j);b[d.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(n.themodal),{gb:"#gbox_"+a.jgrid.jqID(p),jqm:c.jqModal,onClose:b[d.p.id].onClose})}if(a.isFunction(b[d.p.id].afterComplete)){e=f;setTimeout(function(){a(d).triggerHandler("jqGridAddEditAfterComplete",[e,j,a("#"+g),w]);b[d.p.id].afterComplete.call(d,e,j,a("#"+g),w);e=null},500)}if(b[d.p.id].checkOnSubmit||b[d.p.id].checkOnUpdate){a("#"+g).data("disabled",false);if(b[d.p.id]._savedData[d.p.id+"_id"]!==

 Line: 315 -  (m+1)+"'>"+c.saveData+"<br/><br/>"+H+D+I+"</div>").insertAfter("#"+g),a("#sNew","#"+a.jgrid.jqID(n.themodal)).click(function(){q();a("#"+g).data("disabled",false);a(".confirm","#"+a.jgrid.jqID(n.themodal)).hide();return false}),a("#nNew","#"+a.jgrid.jqID(n.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(n.themodal)).hide();a("#"+g).data("disabled",false);setTimeout(function(){a(":input:visible","#"+g)[0].focus()},0);return false}),a("#cNew","#"+a.jgrid.jqID(n.themodal)).click(function(){a(".confirm",

 Line: 322 -  height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},a.jgrid.view,c||{});b[a(this)[0].p.id]=c;return this.each(function(){function e(){(!0===b[o.p.id].closeOnEscape||!0===b[o.p.id].navkeys[0])&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(p.modalhead)).focus()},0)}function h(b,d,e,f){var g,

 Line: 346 -  d,t));if(f[0]===false){a("#DelError>td","#"+i).html(f[1]);a("#DelError","#"+i).show()}else{if(b[e.p.id].reloadAfterSubmit&&e.p.datatype!=="local")a(e).trigger("reloadGrid");else{if(e.p.treeGrid===true)try{a(e).jqGrid("delTreeNode",e.p.idPrefix+h[0])}catch(l){}else for(n=0;n<h.length;n++)a(e).jqGrid("delRowData",e.p.idPrefix+h[n]);e.p.selrow=null;e.p.selarrrow=[]}a.isFunction(b[e.p.id].afterComplete)&&setTimeout(function(){b[e.p.id].afterComplete.call(e,d,h)},500)}b[e.p.id].processing=false;a("#dData",

 Line: 349 -  a.jgrid.jqID(m.themodal),{gbox:"#gbox_"+a.jgrid.jqID(q),jqm:b[e.p.id].jqModal,overlay:b[e.p.id].overlay,modal:b[e.p.id].modal})}u&&b[e.p.id].afterShowForm.call(e,a("#"+i));!0===b[e.p.id].closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(m.modalhead)).focus()},0)}})},navGrid:function(b,c,e,h,u,r,q){c=a.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",

 Line: 377 -  f).css("width","auto"));a(".data",f).empty().append(d);a.jgrid.bindEv.call(c,d,i.searchoptions);a(".input-elm",f).bind("change",function(e){var d=a(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var d=e.target;g.data=d.nodeName.toUpperCase()==="SPAN"&&i.searchoptions&&a.isFunction(i.searchoptions.custom_value)?i.searchoptions.custom_value.call(c,a(d).children(".customelement:first"),"get"):d.value;b.onchange()},d)});setTimeout(function(){g.data=a(d).val();b.onchange()},0)}});

 Line: 403 -  b.p.savedRow[f].id===""+c){e=f;break}if(e>=0){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+a.jgrid.jqID(p.id)).datepicker("hide")}catch(k){}a.each(b.p.colModel,function(){this.editable===true&&b.p.savedRow[e].hasOwnProperty(this.name)&&(g[this.name]=b.p.savedRow[e][this.name])});a(b).jqGrid("setRowData",c,g);a(p).attr("editable","0").unbind("keydown");b.p.savedRow.splice(e,1);a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(b.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){a(b).jqGrid("delRowData",

 Line: 414 -  (function(b){b.jgrid.extend({editCell:function(d,f,a){return this.each(function(){var c=this,g,e,h,i;if(c.grid&&!0===c.p.cellEdit){f=parseInt(f,10);c.p.selrow=c.rows[d].id;c.p.knv||b(c).jqGrid("GridNav");if(0<c.p.savedRow.length){if(!0===a&&d==c.p.iRow&&f==c.p.iCol)return;b(c).jqGrid("saveCell",c.p.savedRow[0].id,c.p.savedRow[0].ic)}else window.setTimeout(function(){b("#"+b.jgrid.jqID(c.p.knv)).attr("tabindex","-1").focus()},0);i=c.p.colModel[f];g=i.name;if(!("subgrid"===g||"cb"===g||"rn"===g)){h=

 Line: 417 -  n=b.jgrid.createEl.call(c,i.edittype,j,e,!0,b.extend({},b.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));b(h).html("").append(n).attr("tabindex","0");b.jgrid.bindEv.call(c,n,j);window.setTimeout(function(){b(n).focus()},0);b("input, select, textarea",h).bind("keydown",function(a){a.keyCode===27&&(b("input.hasDatepicker",h).length>0?b(".ui-datepicker").is(":hidden")?b(c).jqGrid("restoreCell",d,f):b("input.hasDatepicker",h).datepicker("hide"):b(c).jqGrid("restoreCell",d,f));if(a.keyCode===13){b(c).jqGrid("saveCell",

 Line: 426 -  {}))}else try{b.jgrid.info_dialog(b.jgrid.errors.errcap,b.jgrid.errors.nourl,b.jgrid.edit.bClose),b(a).jqGrid("restoreCell",d,f)}catch(q){}"clientArray"===a.p.cellsubmit&&(b(g).empty(),b(a).jqGrid("setCell",a.rows[d].id,f,h,!1,!1,!0),b(g).addClass("dirty-cell"),b(a.rows[d]).addClass("edited"),b(a).triggerHandler("jqGridAfterSaveCell",[a.rows[d].id,k,e,d,f]),b.isFunction(a.p.afterSaveCell)&&a.p.afterSaveCell.call(a,a.rows[d].id,k,e,d,f),a.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){b.jgrid.info_dialog(b.jgrid.errors.errcap,

 Line: 427 -  e+" "+p[1],b.jgrid.edit.bClose)},100),b(a).jqGrid("restoreCell",d,f)}catch(r){}}else b(a).jqGrid("restoreCell",d,f)}window.setTimeout(function(){b("#"+b.jgrid.jqID(a.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(d,f){return this.each(function(){var a=this,c;if(a.grid&&!0===a.p.cellEdit){c=1<=a.p.savedRow.length?0:null;if(null!==c){var g=b("td:eq("+f+")",a.rows[d]);if(b.isFunction(b.fn.datepicker))try{b("input.hasDatepicker",g).datepicker("hide")}catch(e){}b(g).empty().attr("tabindex",

 Line: 428 -  "-1");b(a).jqGrid("setCell",a.rows[d].id,f,a.p.savedRow[c].v,!1,!1,!0);b(a).triggerHandler("jqGridAfterRestoreCell",[a.rows[d].id,a.p.savedRow[c].v,d,f]);b.isFunction(a.p.afterRestoreCell)&&a.p.afterRestoreCell.call(a,a.rows[d].id,a.p.savedRow[c].v,d,f);a.p.savedRow.splice(0,1)}window.setTimeout(function(){b("#"+a.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(d,f){return this.each(function(){var a=!1,c;if(this.grid&&!0===this.p.cellEdit){for(c=f+1;c<this.p.colModel.length;c++)if(!0===

 Line: 436 -  function(a){return o(this,a,"jqmShow")};c.fn.jqmShow=function(a){return this.each(function(){c.jqm.open(this._jqm,a)})};c.fn.jqmHide=function(a){return this.each(function(){c.jqm.close(this._jqm,a)})};c.jqm={hash:{},open:function(a,i){var b=j[a],e=b.c,h="."+e.closeClass,f=parseInt(b.w.css("z-index")),f=0<f?f:3E3,g=c("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":f-1,opacity:e.overlay/100});if(b.a)return d;b.t=i;b.a=!0;b.w.css("z-index",f);e.modal?(k[0]||setTimeout(function(){p("bind")},

 Line: 519 -  e){var d=b(e.item).parent(),d=b(">th",d),f={},g=c.p.id+"_";b.each(c.p.colModel,function(b){f[this.name]=b});var j=[];d.each(function(){var a=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(g,"");f.hasOwnProperty(a)&&j.push(f[a])});b(c).jqGrid("remapColumns",j,true,true);b.isFunction(c.p.sortable.update)&&c.p.sortable.update(j);setTimeout(function(){c.p.disableClick=false},50)}};if(c.p.sortable.options)b.extend(e,c.p.sortable.options);else if(b.isFunction(c.p.sortable))c.p.sortable={update:c.p.sortable};

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jqGrid/jquery.jqGrid-4.5.4.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 115 -  0||o[0].className.indexOf("ui-state-disabled")>-1||(b(w,a).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==a.id)return this;var d=b(w).hasClass("cbox"),e=b(a).triggerHandler("jqGridBeforeSelectRow",[o[0].id,c]);(e=e===false||e==="stop"?false:true)&&b.isFunction(a.p.beforeSelectRow)&&(e=a.p.beforeSelectRow.call(a,o[0].id,c));if(!(w.tagName==="A"||(w.tagName==="INPUT"||w.tagName==="TEXTAREA"||w.tagName==="OPTION"||w.tagName==="SELECT")&&!d)&&e===true){z=o[0].id;K=b.jgrid.getCellIndex(w);

 Line: 379 -  10);m=a.jgrid.createEl.call(c,i.inputtype,i.searchoptions,g.data,!0,b.p.ajaxSelectOptions||{},!0);if("nu"===g.op||"nn"===g.op)a(m).attr("readonly","true"),a(m).attr("disabled","true");var s=a("<select class='selectopts'></select>");d.append(s);s.bind("change",function(){g.op=a(s).val();f=a(this).parents("tr:first");var c=a(".input-elm",f)[0];if(g.op==="nu"||g.op==="nn"){g.data="";if(c.tagName.toUpperCase()!=="SELECT")c.value="";c.setAttribute("readonly","true");c.setAttribute("disabled","true")}else{if(c.tagName.toUpperCase()===

 Line: 380 -  "SELECT")g.data=c.value;c.removeAttribute("readonly");c.removeAttribute("disabled")}b.onchange()});h=i.searchoptions.sopt?i.searchoptions.sopt:b.p.sopt?b.p.sopt:-1!==a.inArray(i.searchtype,b.p.strarr)?b.p.stropts:b.p.numopts;d="";a.each(b.p.ops,function(){q.push(this.oper)});for(e=0;e<h.length;e++)o=a.inArray(h[e],q),-1!==o&&(p=g.op===b.p.ops[o].oper?" selected='selected'":"",d+="<option value='"+b.p.ops[o].oper+"'"+p+">"+b.p.ops[o].text+"</option>");s.append(d);d=a("<td class='data'></td>");k.append(d);

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery.multiselect-1.13.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 21 -  .hasClass("ui-multiselect-close"))b.close();else b[d(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]();a.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(a){a.preventDefault();var c=d(this),g=c.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),e=g.get(),c=c.parent().text();!1!==b._trigger("beforeoptgrouptoggle",a,{inputs:e,label:c})&&(b._toggleChecked(g.filter(":checked").length!==g.length,g),b._trigger("optgrouptoggle",a,{inputs:e,label:c,checked:e[0].checked}))}).delegate("label","mouseenter.multiselect",function(){d(this).hasClass("ui-state-disabled")||(b.labels.removeClass("ui-state-hover"),d(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(a){a.preventDefault();switch(a.which){case 9:case 27:b.close();break;case 38:case 40:case 37:case 39:b._traverse(a.which,this);break;case 13:d(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(a){var c=d(this),g=this.value,e=this.checked,i=b.element.find("option");this.disabled||!1===b._trigger("click",a,{value:g,text:this.title,checked:e})?a.preventDefault():(c.focus(),c.attr("aria-selected",e),i.each(function(){this.value===g?this.selected=e:b.options.multiple||(this.selected=!1)}),b.options.multiple||(b.labels.removeClass("ui-state-active"),c.closest("label").toggleClass("ui-state-active",e),b.close()),b.element.trigger("change"),setTimeout(d.proxy(b.update,b),10))});d(document).bind("mousedown.multiselect",function(a){b._isOpen&&(!d.contains(b.menu[0],a.target)&&!d.contains(b.button[0],a.target)&&a.target!==b.button[0])&&b.close()});d(this.element[0].form).bind("reset.multiselect",function(){setTimeout(d.proxy(b.refresh,b),10)})},_setButtonWidth:function(){var a=this.element.outerWidth(),b=this.options;/\d/.test(b.minWidth)&&a<b.minWidth&&(a=b.minWidth);this.button.width(a)},_setMenuWidth:function(){var a=this.menu,b=this.button.outerWidth()-parseInt(a.css("padding-left"),10)-parseInt(a.css("padding-r</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/ace-1.2.0/ext-language_tools.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 1 -  okenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var n=t.substr(1);return(this.variables[t[0]+"__"]||{})[n]}if(/^\d+$/.test(t))return(this.variables.__||{})[t];t=t.replace(/^TM_/,"");if(!e)return;var r=e.session;switch(t){case"CURRENT_WORD":var i=r.getWordRange();case"SELECTION":case"SELECTED_TEXT":return r.getTextRange(i);case"CURRENT_LINE":return r.getLine(e.getCursorPosition().row);case"PREV_LINE":return r.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return r.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return r.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}},this.variables={},this.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},this.tmStrFormat=function(e,t,n){var r=t.flag||"",i=t.guard;i=new RegExp(i,r.replace(/[^gi]/,""));var s=this.tokenizeTmSnippet(t.fmt,"formatString"),o=this,u=e.replace(i,function(){o.variables.__=arguments;var e=o.resolveVariables(s,n),t="E";for(var r=0;r<e.length;r++){var i=e[r];if(typeof i=="object"){e[r]="";if(i.changeCase&&i.local){var u=e[r+1];u&&typeof u=="string"&&(i.changeCase=="u"?e[r]=u[0].toUpperCase():e[r]=u[0].toLowerCase(),e[r+1]=u.substr(1))}else i.changeCase&&(t=i.changeCase)}else t=="U"?e[r]=i.toUpperCase():t=="L"&&(e[r]=i.toLowerCase())}return e.join("")});return this.variables.__=null,u},this.resolveVariables=function(e,t){function o(t){var n=e.indexOf(t,r+1);n!=-1&&(r=n)}var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(typeof i=="string")n.push(i);else{if(typeof i!="object")continue;if(i.skip)o(i);else{if(i.processed<r)continue;if(i.text){var s=this.getVariableValue(t,i.text);s&&i.fmtString&&(s=this.tmStrFormat(s,i)),i.processed=r,i.expectIf==null?s&&(n.push(s),o(i)):s?i.skip=i.elseBranch:o(i)}else i.tabstopId!=null?n.push(i):i.changeCase!=null&&n.push(i)}}}return n},this.insertSnippetForSelection=function(e,t){function f</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/ace-1.2.0/worker-javascript.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 9 -  rayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../document").Document,s=e("../lib/lang"),o=t.Mirror=function(e){this.sender=e;var t=this.doc=new i(""),n=this.deferredUpdate=s.delayedCall(this.onUpdate.bind(this)),r=this;e.on("change",function(e){var i=e.data;if(i[0].start)t.applyDeltas(i);else for(var s=0;s<i.length;s+=2){if(Array.isArray(i[s+1]))var o={action:"insert",start:i[s],lines:i[s+1]};else var o={action:"remove",start:i[s],end:i[s+1]};t.applyDelta(o,!0)}if(r.$timeout)return n.schedule(r.$timeout);r.onUpdate()})};(function(){this.$timeout=500,this.setTimeout=function(e){this.$timeout=e},this.setValue=function(e){this.doc.setValue(e),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(e){this.sender.callback(this.doc.getValue(),e)},this.onUpdate=function(){},this.isPending=function(){return thi Line: 16 -  he={},n},m.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:m.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=m.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),u=f,s=e.apply(r,i),o||(r=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},m.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=m.now()-o;f<t&&f>=0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=m.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},m.wrap=function(e,t){return m.partial(t,e)},m.negate=function(e){return function(){return!e.apply(this,arguments)}},m.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},m.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},m.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),_=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(e){if(!m.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)m.has(e,n)&&t.push(n);return M&&D(e,t),t},m.allKeys=function(e){if(!m.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&D(e,t),t},m.values=function(e){var t=m.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},m.mapObject=function(e,t,n){t=y(t,n);var r=m.keys(e),i=r.length,s={},o;for(var u=0;u<i;u++)o=r[u],s[o]=t(e[o],o,e);return s},m.pairs=function(e){var t=m.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},m.invert=function(e){var t={},n=m.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},m.functions=m.methods=function(e){var t=[];for( Line: 38 -  ()}return Y(")"),typeof e=="object"&&(f.inES3()&&e.value==="parseInt"&&n===1&&z("W065",f.tokens.curr),f.option.evil||(e.value==="eval"||e.value==="Function"||e.value==="execScript"?(z("W061",e),r[0]&&[0].id==="(string)"&&$(e,r[0].value)):!r[0]||r[0].id!=="(string)"||e.value!=="setTimeout"&&e.value!=="setInterval"?r[0]&&r[0].id==="(string)"&&e.value==="."&&e.left.value==="window"&&(e.right==="setTimeout"||e.right==="setInterval")&&(z("W066",e),$(e,r[0].value)):(z("W066",e),$(e,r[0].value))),!e.identifier&&e.id!=="."&&e.id!=="["&&e.id!=="("&&e.id!=="&&"&&e.id!=="||"&&e.id!=="?"&&(!f.option.esnext||!e["(name)"])&&z("W067",t)),t.left=e,t},155,!0).exps=!0,pt("(",function(){var e=f.tokens.next,t,n=-1,r,i,s,o,u=1,a=f.tokens.curr,l=f.tokens.prev,c=!f.option.singleGroups;do e.value==="("?u+=1:e.value===")"&&(u-=1),n+=1,t=e,e=Q(n);while((u!==0||t.value!==")")&&e.value!==";"&&e.type!=="(end)");f.tokens.next.id==="function"&&(i=f.tokens.next.immed=!0);if(e.value==="=>")return Gt({type:"arrow",parsedOpening:!0});var h=[];if(f.tokens.next.id!==")")for(;;){h.push(nt(10));if(f.tokens.next.id!==",")break;f.option.nocomma&&z("W127"),ut()}Y(")",this),f.option.immed&&h[0]&&h[0].id==="function"&&f.tokens.next.id!=="("&&f.tokens.next.id!=="."&&f.tokens.next.id!=="["&&z("W068",this);if(!h.length)return;return h.length>1?(r=Object.create(f.syntax[","]),r.exprs=h,s=h[0],o=h[h.length-1],c||(c=l.assign||l.delim)):(r=s=o=h[0],c||(c=a.beginsStmt&&(r.id==="{"||i||Jt(r))||i&&(!et()||f.tokens.prev.id!=="}")||Jt(r)&&!et()||r.id==="{"&&l.id==="=>")),r&&(!c&&(s.left||r.exprs)&&(c=!tt(l)&&s.lbp<=l.lbp||!et()&&o.lbp<f.tokens.next.lbp),c||z("W126",a),r.paren=!0),r}),bt("=>"),yt("[",function(e,t){var n=nt(10),r;return n&&n.type==="(string)"&&(!f.option.evil&&(n.value==="eval"||n.value==="execScript")&&Tt(e,f)&&z("W061"),Ft(n.value),!f.option.sub&&a.identifier.test(n.value)&&(r=f.syntax[n.value],(!r||!H(r))&&z("W069",f.tokens.prev,n.value))),Y("]",t),n&&n.value==="hasOwnProperty"&&f.tokens.next.value==="="&&z("W001"),t.left=e,t.right=n,t},160,!0),pt("[",function(){var e=hn();if(e.isCompArray)return f.inESNext()||z(" Line: 65 -  efaultStatus:!1,Document:!1,document:!1,DocumentFragment:!1,Element:!1,ElementTimeControl:!1,Event:!1,event:!1,fetch:!1,FileReader:!1,FormData:!1,focus:!1,frames:!1,getComputedStyle:!1,HTMLElement:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLCollection:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTemplateElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,history:!1,Image:!1,Intl:!1,length:!1,localStorage:!1,location:!1,matchMedia:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,MouseEvent:!1,moveBy:!1,moveTo:!1,MutationObserver:!1,name:!1,Node:!1,NodeFilter:!1,NodeList:!1,Notification:!1,navigator:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,Option:!1,parent:!1,performance:!1,print:!1,Range:!1,requestAnimationFrame:!1,removeEventListener:!1,resizeBy:!1,resizeTo:!1,screen:!1,scroll:!1,scrollBy:!1,scrollTo:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,status:!1,SVGAElement:!1,SVGAltGlyphDefElement:!1,SVGAltGlyphElement:!1,SVGAltGlyphItemElement:!1,SVGAngle:!1,SVGAnimateColorElement:!1,SVGAnimateElement:!1,SVGAnimateMotio Line: 67 -  ,SVGPathSegCurvetoCubicSmoothAbs:!1,SVGPathSegCurvetoCubicSmoothRel:!1,SVGPathSegCurvetoQuadraticAbs:!1,SVGPathSegCurvetoQuadraticRel:!1,SVGPathSegCurvetoQuadraticSmoothAbs:!1,SVGPathSegCurvetoQuadraticSmoothRel:!1,SVGPathSegLinetoAbs:!1,SVGPathSegLinetoHorizontalAbs:!1,SVGPathSegLinetoHorizontalRel:!1,SVGPathSegLinetoRel:!1,SVGPathSegLinetoVerticalAbs:!1,SVGPathSegLinetoVerticalRel:!1,SVGPathSegList:!1,SVGPathSegMovetoAbs:!1,SVGPathSegMovetoRel:!1,SVGPatternElement:!1,SVGPoint:!1,SVGPointList:!1,SVGPolygonElement:!1,SVGPolylineElement:!1,SVGPreserveAspectRatio:!1,SVGRadialGradientElement:!1,SVGRect:!1,SVGRectElement:!1,SVGRenderingIntent:!1,SVGSVGElement:!1,SVGScriptElement:!1,SVGSetElement:!1,SVGStopElement:!1,SVGStringList:!1,SVGStylable:!1,SVGStyleElement:!1,SVGSwitchElement:!1,SVGSymbolElement:!1,SVGTRefElement:!1,SVGTSpanElement:!1,SVGTests:!1,SVGTextContentElement:!1,SVGTextElement:!1,SVGTextPathElement:!1,SVGTextPositioningElement:!1,SVGTitleElement:!1,SVGTransform:!1,SVGTransformList:!1,SVGTransformable:!1,SVGURIReference:!1,SVGUnitTypes:!1,SVGUseElement:!1,SVGVKernElement:!1,SVGViewElement:!1,SVGViewSpec:!1,SVGZoomAndPan:!1,Text:!1,TextDecoder:!1,TextEncoder:!1,TimeEvent:!1,top:!1,URL:!1,WebGLActiveInfo:!1,WebGLBuffer:!1,WebGLContextEvent:!1,WebGLFramebuffer:!1,WebGLProgram:!1,WebGLRenderbuffer:!1,WebGLRenderingContext:!1,WebGLShader:!1,WebGLShaderPrecisionFormat:!1,WebGLTexture:!1,WebGLUniformLocation:!1,WebSocket:!1,window:!1,Worker:!1,XDomainRequest:!1,XMLHttpRequest:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},n.devel={alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1},n.worker={importScripts:!0,postMessage:!0,self:!0,FileReaderSync:!0},n.nonstandard={escape:!1,unescape:!1},n.couch={require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1},n.node={__filename:!1,__dirname:!1,GLOBAL:!1,global:!1,module:!1,require:!1,Buffer:!0,console:!0,exports:!0,process:!0,setTimeout:!0,clearTimeout:!0,setInterval:!0,clearInterval:!0,setImmedi Line: 69 -  gable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1},n.yui={YUI:!1,Y:!1,YUI_config:!1},n.mocha={mocha:!1,describe:!1,xdescribe:!1,it:!1,xit:!1,context:!1,xcontext:!1,before:!1,after:!1,beforeEach:!1,afterEach:!1,suite:!1,test:!1,setup:!1,teardown:!1,suiteSetup:!1,suiteTeardown:!1},n.jasmine={jasmine:!1,describe:!1,xdescribe:!1,it:!1,xit:!1,beforeEach:!1,afterEach:!1,setFixtures:!1,loadFixtures:!1,spyOn:!1,expect:!1,runs:!1,waitsFor:!1,waits:!1,beforeAll:!1,afterAll:!1,fail:!1,fdescribe:!1,fit:!1}},{}]},{},["/node_modules/jshint/src/jshint.js"])}),define("ace/mode/javascript_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/javascript/jshint"],function(require,exports,module){"use strict";function startRegex(e){return RegExp("^("+e.join("|")+")")}var oop=require("../lib/oop"),Mirror=require("../worker/mirror").Mirror,lint=require("./javascript/jshint").JSHINT,disabledWarningsRe=startRegex(["Bad for in variable '(.+)'.",'Missing "use strict"']),errorsRe=startRegex(["Unexpected","Expected ","Confusing (plus|minus)","\\{a\\} unterminated regular expression","Unclosed ","Unmatched ","Unbegun comment","Bad invocation","Missing space after","Missing operator at"]),infoRe=startRegex(["Expected an assignment","Bad escapement of EOL","Unexpected comma","Unexpected space","Missing radix parameter.","A leading decimal point can","\\['{a}'\\] is better written in dot notation.","'{a}' used out of scope"]),JavaScriptWorker=exports.JavaScriptWorker=function(e){Mirror.call(this,e),this.setTimeout(500),this.setOptions()};oop.inherits(JavaScriptWorker,Mirror),function(){this.setOptions=function(e){this.options=e||{esnext:!0,moz:!0,devel:!0,browser:!0,node:!0,laxcomma:!0,laxbreak:!0,lastsemic:!0,onevar:!1,passfail:!1,maxerr:100,expr:!0,multistr:!0,globalstrict:!0},this.doc.getValue()&&this.deferredUpdate.schedule(100)},this.changeOptions=function(e){oop.mixin(this.options,e),this.doc.getValue()&&this.deferredUpdate.schedule(100)},this.isValidJS=function(str){try{eval("throw 0;"+str)}catch(e){if(e===0)return!0}re</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/ace-1.2.0/ext-searchbox.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 2 -  lass="ace_search_options">        <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>        <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>        <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>    </div></div>'.replace(/>\s+/g,">"),l=function(e,t,n){var i=r.createElement("div");i.innerHTML=f,this.element=i.firstChild,this.$init(),this.setEditor(e)};(function(){this.setEditor=function(e){e.searchBox=this,e.container.appendChild(this.element),this.editor=e},this.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form"),this.replaceBox=e.querySelector(".ace_replace_form"),this.searchOptions=e.querySelector(".ace_search_options"),this.regExpOption=e.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field")},this.$init=function(){var e=this.element;this.$initElements(e);var t=this;s.addListener(e,"mousedown",function(e){setTimeout(function(){t.activeInput.focus()},0),s.stopPropagation(e)}),s.addListener(e,"click",function(e){var n=e.target||e.srcElement,r=n.getAttribute("action");r&&t[r]?t[r]():t.$searchBarKb.commands[r]&&t.$searchBarKb.commands[r].exec(t),s.stopPropagation(e)}),s.addCommandKeyListener(e,function(e,n,r){var i=a.keyCodeToString(r),o=t.$searchBarKb.findKeyCommand(n,i);o&&o.exec&&(o.exec(t),s.stopEvent(e))}),this.$onChange=i.delayedCall(function(){t.find(!1,!1)}),s.addListener(this.searchInput,"input",function(){t.$onChange.schedule(20)}),s.addListener(this.searchInput,"focus",function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()}),s.addListener(this.replaceInput,"focus",function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()})},this.$closeSearchBarKb=new u([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]),this.$s Line: 3 -  ew u,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f|Ctrl-H|Command-Option-F":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none",e[t?"replaceInput":"searchInput"].focus()},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout(function(){e.hide()})},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}}]),this.$syncOptions=function(){r.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),r.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),r.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked),this.find(!1,!1)},this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(e,t){var n=this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),i=!n&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",i),this.editor._emit("findSearchBox",{match:!i}),this.highlight()},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/ace-1.2.0/worker-json.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 9 -  rayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../document").Document,s=e("../lib/lang"),o=t.Mirror=function(e){this.sender=e;var t=this.doc=new i(""),n=this.deferredUpdate=s.delayedCall(this.onUpdate.bind(this)),r=this;e.on("change",function(e){var i=e.data;if(i[0].start)t.applyDeltas(i);else for(var s=0;s<i.length;s+=2){if(Array.isArray(i[s+1]))var o={action:"insert",start:i[s],lines:i[s+1]};else var o={action:"remove",start:i[s],end:i[s+1]};t.applyDelta(o,!0)}if(r.$timeout)return n.schedule(r.$timeout);r.onUpdate()})};(function(){this.$timeout=500,this.setTimeout=function(e){this.$timeout=e},this.setValue=function(e){this.doc.setValue(e),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(e){this.sender.callback(this.doc.getValue(),e)},this.onUpdate=function(){},this.isPending=function(){return thi Line: 11 -  rror").Mirror,s=e("./json/json_parse"),o=t.JsonWorker=function(e){i.call(this,e),this.setTimeout(200)};r.inherits(o,i),function(){this.onUpdate=function(){var e=this.doc.getValue(),t=[];try{e&&s(e)}catch(n){var r=this.doc.indexToPosition(n.at-1);t.push({row:r.row,column:r.column,text:n.message,type:"error"})}this.sender.emit("annotate",t)}}.call(o.prototype)}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function B(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function j(e){var t,n,r;if(B(e))return e;n=e.valueOf;if(typeof n=="function"){t=n.call(e);if(B(t))return t}r=e.toString;if(typeof r=="function"){t=r.call(e);if(B(t))return t}throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty),l,c,h,p,d;if(d=f(o,"__defineGetter__"))l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__);if([1,2].splice(0).length!=2)if(!function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t=[],n;t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length;if(n+1==t.length)return!0}())Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):e==void 0?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);els</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/ace-1.2.0/ace.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 10 -  taX!==undefined?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5,e.wheelY=(e.deltaY||0)*5}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=(e.detail||0)*5,e.wheelY=0):(e.wheelX=0,e.wheelY=(e.detail||0)*5),n(e)})},t.addMultiMouseDownListener=function(e,n,r,s){var o=0,u,a,f,l={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){t.getButton(e)!==0?o=0:e.detail>1?(o++,o>4&&(o=1)):o=1;if(i.isIE){var c=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;if(!f||c)o=1;f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),o==1&&(u=e.clientX,a=e.clientY)}e._clicks=o,r[s]("mousedown",e);if(o>4)o=0;else if(o>1)return r[s](l[o],e)}),i.isOldIE&&t.addListener(e,"dblclick",function(e){o=2,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),r[s]("mousedown",e),r[s](l[o],e)})};var s=!i.isMac||!i.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[s(e)]};var u=null,a=0;t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var s=null;r(e,"keydown",function(e){s=e.keyCode}),r(e,"keypress",function(e){return o(n,e,s)})}else{var a=null;r(e,"keydown",function(e){u[e.keyCode]=(u[e.keyCode]||0)+1;var t=o(n,e,e.keyCode);return a=e.defaultPrevented,t}),r(e,"keypress",function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)}),r(e,"keyup",function(e){u[e.keyCode]=null}),u||(f(),r(window,"focus",f))}};if(typeof window=="object"&&window.postMessage&&!i.isOldIE){var l=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+l;t.addListener(n,"me Line: 11 -  on i(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())}),n.postMessage(r,"*")}}t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){var n="";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function s(e){if(typeof e!="object"||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=s(e[n]);return t}var r=e.constructor;if(r===RegExp)return e;t=r();for(var n in e)t[n]=s(e[n]);return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCa Line: 12 -  ,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=i.isChrome<18,a=i.isIE,f=function(e,t){function b(e){if(h)return;h=!0;if(k)t=0,r=e?0:n.value.length-1;else var t=e?2:1,r=2;try{n.setSelectionRange(t,r)}catch(i){}h=!1}function w(){if(h)return;n.value=f,i.isWebKit&&y.schedule()}function R(){clearTimeout(q),q=setTimeout(function(){p&&(n.style.cssText=p,p=""),t.renderer.$keepTextAreaAtCursor==null&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},i.isOldIE?200:0)}var n=s.createElement("textarea");n.className="ace_text-input",i.isTouchPad&&n.setAttribute("x-palm-disable-auto-cap",!0),n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",i.isOldIE&&(n.style.top="-1000px"),e.insertBefore(n,e.firstChild);var f="",l=!1,c=!1,h=!1,p="",d=!0;try{var v=document.activeElement===n}catch(m){}r.addListener(n,"blur",function(e){t.onBlur(e),v=!1}),r.addListener(n,"focus",function(e){v=!0,t.onFocus(e),b()}),this.focus=function(){if(p)return n.focus();var e=n.style.top;n.style.position="fixed",n.style.top="-1000px",n.focus(),setTimeout(function(){n.style.position="",n.style.top=="-1000px"&&(n.style.top=e)},0)},this.blur=function(){n.blur()},this.isFocused=function(){return v};var g=o.delayedCall(function(){v&&b(d)}),y=o.delayedCall(function(){h||(n.value=f,v&&b())});i.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=d&&(d=!d,g.schedule())}),w(),v&&t.onFocus();var E=function(e){return e.selectionStart===0&&e.selectionEnd===e.value.length};!n.setSelectionRange&&n.cre Line: 13 -  &(n.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()},E=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.text==e.value});if(i.isOldIE){var S=!1,x=function(e){if(S)return;var t=n.value;if(h||!t||t==f)return;if(e&&t==f[0])return T.schedule();A(t),S=!0,w(),S=!1},T=o.delayedCall(x);r.addListener(n,"propertychange",x);var N={13:1,27:1};r.addListener(n,"keyup",function(e){h&&(!n.value||N[e.keyCode])&&setTimeout(F,0);if((n.value.charCodeAt(0)||0)<129)return T.call();h?j():B()}),r.addListener(n,"keydown",function(e){T.schedule(50)})}var C=function(e){l?l=!1:E(n)?(t.selectAll(),b()):k&&b(t.selection.isEmpty())},k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var L=!1,A=function(e){k&&(e=k(e),k=null),c?(b(),e&&t.onPaste(e),c=!1):e==f.charAt(0)?L?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==f?e=e.substr(2):e.charAt(0)==f.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),L&&(L=!1)},O=function(e){if(h)return;var t=n.value;A(t),w()},M=function(e,t){var n=e.clipboardData||window.clipboardData;if(!n||u)return;var r=a?"Text":"text/plain";return t?n.setData(r,t)!==!1:n.getData(r)},_=function(e,i){var s=t.getCopyText();if(!s)return r.preventDefault(e);M(e,s)?(i?t.onCut():t.onCopy(),r.preventDefault(e)):(l=!0,n.value=s,n.select(),setTimeout(function(){l=!1,w(),b(),i?t.onCut():t.onCopy()}))},D=function(e){_(e,!0)},P=function(e){_(e,!1)},H=function(e){var s=M(e);typeof s=="string"?(s&&t.onPaste(s,e),i.isIE&&setTimeout(b),r.preventDefault(e)):(n.value="",c=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"select",C),r.addListener(n,"input",O),r.addListener(n,"cut",D),r.addListener(n,"copy",P),r.addListener(n,"paste",H),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey) Line: 14 -  (e.keyCode){case 67:P(e);break;case 86:H(e);break;case 88:D(e)}});var B=function(e){if(h||!t.onCompositionStart||t.$readOnly)return;h={},t.onCompositionStart(),setTimeout(j,0),t.on("mousedown",F),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup()},j=function(){if(!h||!t.onCompositionUpdate||t.$readOnly)return;var e=n.value.replace(/\x01/g,"");if(h.lastValue===e)return;t.onCompositionUpdate(e),h.lastValue&&t.undo(),h.lastValue=e;if(h.lastValue){var r=t.selection.getRange();t.insert(h.lastValue),t.session.markUndoGroup(),h.range=t.selection.getRange(),t.selection.setRange(r),t.selection.clearSelection()}},F=function(e){if(!t.onCompositionEnd||t.$readOnly)return;var r=h;h=!1;var i=setTimeout(function(){i=null;var e=n.value.replace(/\x01/g,"");if(h)return;e==r.lastValue?w():!r.lastValue&&e&&(w(),A(e))});k=function(n){return i&&clearTimeout(i),n=n.replace(/\x01/g,""),n==r.lastValue?"":(r.lastValue&&i&&t.undo(),n)},t.onCompositionEnd(),t.removeListener("mousedown",F),e.type=="compositionend"&&r.range&&t.selection.setRange(r.range)},I=o.delayedCall(j,50);r.addListener(n,"compositionstart",B),i.isGecko?r.addListener(n,"text",function(){I.schedule()}):(r.addListener(n,"keyup",function(){I.schedule()}),r.addListener(n,"keydown",function(){I.schedule()})),r.addListener(n,"compositionend",F),this.getElement=function(){return n},this.setReadOnly=function(e){n.readOnly=e},this.onContextMenu=function(e){L=!0,b(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){if(!o&&i.isOldIE)return;p||(p=n.style.cssText),n.style.cssText=(o?"z-index:100000;":"")+"height:"+n.style.height+";"+(i.isIE?"opacity:0.1;":"");var u=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),f=u.top+(parseInt(a.borderTopWidth)||0),l=u.left+(parseInt(u.borderLeftWidth)||0),c=u.bottom-f-n.clientHeight-2,h=function(e){n.style.left=e.clientX-l-2+"px",n.style.top=Math.min(e.clientY-f-2,c)+"px"};h(e);if(e.type!="mousedown")return;t.renderer.$keepTextAreaAtCursor&&(t.render Line: 18 -  lement(),e)},this.show=function(e,t,n){e!=null&&this.setText(e),t!=null&&n!=null&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(s.prototype),t.Tooltip=s}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f==s)return;f=s.text.join("<br/>"),i.setHtml(f),i.show(),t.on("mousewheel",c);if(e.$tooltipFollowsMouse)h(u);else{var p=n.$cells[t.session.documentToScreenRow(r,0)].element,d=p.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t.removeEventListener("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",function(r){if(!t.isFocused()||r.getButton()!=0)return;var i=n.getRegion(r);if(i=="foldWidgets")return;var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(r.domEvent.detail==2)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()});var o,u,f;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,"ace_fold-widget"))return c();f&&e.$tooltipFollowsMouse&&h(t),u=t;if(o)return;o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50)}),s.addListener(t.renderer.$gutter,"mouseout",function(e){u=null;if(!f||o)return;o=setTimeout(functi Line: 20 -  -=1,S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};f/s<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),C(),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.$blockScrolling+=1,t.selection.fromOrientedRange(m),t.$blockScrolling-=1,t.isFocused()&&!w&&t.renderer.$cursorLayer.setBlinking(!t.getReadOnly()),m=null,g=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){A==null&&(A=setTimeout(function(){A!=null&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return e=="text/plain"||e=="Text"})}function _(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(t){e[t]=this[t] Line: 21 -  EventListener("mousedown",this.onMouseDown.bind(e));var c=t.container,h,p,d,v,m,g,y=0,b,w,E,S,x;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",s.isOpera&&(t.container.appendChild(n),n.scrollTop=0),i.setDragImage&&i.setDragImage(n,0,0),s.isOpera&&t.container.removeChild(n),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){c.draggable=!1,w=!1,this.setState(null);if(!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&n=="move"&&t.session.remove(t.getSelectionRange()),t.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragOver=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||(k(),y++),A!==null&&(A=null),e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragLeave=function(e){y--;if(y<=0&&h)return L(),b=null,i.preventDefault(e)},this.onDrop=function(e){if(!g)return;var n=e.dataTransfer;if(w)switch(b){case"move":m.contains(g.row,g.column)?m={start:g,end:g}:m=t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)},i.addListener(c,"dragstart",this.onDragStart.bind(e)),i.addListener(c,"dragend",this.onDragEnd.bind(e)),i.addListener(c,"dragenter",this.onDragEnter.bind(e)),i.addListener(c,"dragover",this.onDragOver.bind(e)),i.addListener(c,"dragleave",this.onDragLeave.bind(e)),i.addListener(c,"drop",this.onDrop.bind(e));var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function( Line: 24 -  (e){typeof console!="undefined"&&console.warn&&console.warn.apply(console,arguments)}function u(e,t){var n=new Error(e);n.data=t,typeof console=="object"&&console.error&&console.error(n),setTimeout(function(){throw n})}var r=e("./oop"),i=e("./event_emitter").EventEmitter,s={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]===t)return;var n=this.$options[e];if(!n)return o('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:o('misspelled option "'+e+'"')}},a=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];typeof r=="string"&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),r.implement(e,s),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=o,this.reportError=u}).call(a.prototype),t.AppConfig=a}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(e,t,n){"no use strict";function f(r){a.packaged=r||e.packaged||n.packaged||u.define&&define.packaged;if(!u.document)return"";var i={},s="",o=document.currentScript||document._cur Line: 27 -  =function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.onTouchMove=function(e,t){var n=new u(t,this.editor);n.speed=1,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var s=this,o=function(e){if(!e)return;if(i.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new u(e,s.editor),s.$mouseMoved=!0},a=function(e){clearInterval(l),f(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",n.$keepTextAreaAtCursor==null&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),s.isMousePressed=!1,s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e)},f=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(i.isOldIE&&e.domEvent.type=="dblclick")return setTimeout(function(){a(e)});s.$onCaptureMouseMove=o,s.releaseMouse=r.capture(this.editor.container,o,a);var l=setInterval(f,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){if(t&&t.domEvent&&t.domEvent.type!="contextmenu")return;this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent)}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(l.prototype),f.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){"use strict";function r(e){e.on("click",function(t){var n=t.getDocumentPosition(),r=e.session,i=r.getFoldAt(n.row,n.column,1);i&&(t.getAccelKey()?r.removeFold(i):r.expandFold(i),t.stop())}),e.o Line: 59 -  pplyDelta({start:this.pos(i+o,s),end:this.pos(i+u,s=0),action:e.action,lines:a},!0)}while(!0)},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:n[s-1].length}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(a.prototype),t.Document=a}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=-1,i=n.doc,s=t;while(n.lines[t])t++;var o=i.getLength(),u=0;n.running=!1;while(t<o){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);u++;if(u%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,s<=r&&n.fireUpdateEvent(s,r)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.lines[t]=null;else i Line: 98 -  Session",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this})},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;var n=t.findMatchingBracket(e.getCursorPosition());if(n)var r=new p(n.row,n.column,n.row,n.column+1);else if(t.$mode.getMatching)var r=t.$mode.getMatching(e.session);r&&(t.$bracketHighlight=t.addMarker(r,"ace_bracket","text"))},50)},this.$highlightTags=function(){if(this.$highlightTagPending)return;var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;var n=e.getCursorPosition(),r=new y(e.session,n.row,n.column),i=r.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type)){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}if(i.type.indexOf("tag-open")!=-1){i=r.stepForward();if(!i)return}var s=i.value,o=0,u=r.stepBackward();if(u.value=="<"){do u=i,i=r.stepForward(),i&&i.value===s&&i.type.indexOf("tag-name")!==-1&&(u.value==="<"?o++:u.value==="</"&&o--);while(i&&o>=0)}else{do i=u,u=r.stepBackward() Line: 99 -  =s&&i.type.indexOf("tag-name")!==-1&&(u.value==="<"?o++:u.value==="</"&&o--);while(u&&o<=0);r.stepForward()}if(!i){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}var a=r.getCurrentTokenRow(),f=r.getCurrentTokenColumn(),l=new p(a,f,a,f+i.value.length);t.$tagHighlight&&l.compareRange(t.$backMarkers[t.$tagHighlight].range)!==0&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),l&&!t.$tagHighlight&&(t.$tagHighlight=t.addMarker(l,"ace_bracket","text"))},50)},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e)},this.onBlur=function(e){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e)},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:Infinity;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(g.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e=this.getSession(),t;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLin Line: 121 -  hild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0);if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return;this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+n.column*this.config.characterWidth,i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,r=0;if(t===undefined||t.length===0)t=[{cursor:null}];for(var n=0,i=t.length;n<i;n++){var s=this.getPixelPosition(t[n].cursor,!0);if((s.top>e.height+e.offset||s.top<0)&&n>1)continue;var o=(this.cursors[r++]||this.addCursor()).style;this.drawCursor?this.drawCursor(o,s,e,t[n],this.session):(o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px")}while(this.cursors.length>r)this.removeCursor();var u=this.session.getOverwrite();this.$setOverwrite(u),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),t.Cursor=s}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/e Line: 124 -  ht)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(a===50){var e=null;try{e=this.$measureNode.getBoundingClientRect()}catch(t){e={width:0,height:0}}var n={height:e.height,width:e.width/a}}else var n={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/a};return n.width===0||n.height===0?null:n},this.$measureCharWidth=function(e){this.$main.innerHTML=s.stringRepeat(e,a);var t=this.$main.getBoundingClientRect();return t.width/a},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t===undefined&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(f.prototype)}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./lib/useragent"),u=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,f=e("./layer/text").Text,l=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,p=e("./renderloop").RenderLoop,d=e("./layer/font_metrics").FontMetrics,v=e("./lib/event_emitter").EventEmitter,m='.ace_editor {position: relative;overflow: hidden; Line: 140 -  rn}}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return!0;if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return!0;if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:i,column:s,side:r-s>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),i=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(i,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+Math.round(r.column*this.characterWidth),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=f Line: 144 -  unction(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),e.action=="insert"?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e})},this.$workerBlob=function(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new r;return s.append(t),s.getBlob("application/javascript")}}}).call(u.prototype);var a=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var r=null,i=!1,u=Object.create(s),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){a.messageBuffer.push(e),r&&(i?setTimeout(f):f())},this.setEmitSync=function(e){i=e};var f=function(){var e=a.messageBuffer.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};u.postMessage=function(e){a.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){r=new e[n](u);while(a.messageBuffer.length)f()})};a.prototype=u.prototype,t.UIWorkerClient=a,t.WorkerClient=u}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e Line: 145 -  ,this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session,i=this.$pos;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(i.row,i.column),this.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new r(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(i.value.row,i.value.column,i.value.row,i.value.column+t.length),t.othersClass,null,!1)})})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){var t=e;if(t.start.row!==t.end.row)return;if(t.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=!0;var n=e.action==="insert"?t.end.column-t.start.column:t.start.column-t.end.column;if(t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1){var i=t.start.column-this.pos.column;this.length+=n;if(!this.session.$fromUndo){if(e.action==="insert")for(var s=this.others.length-1;s>=0;s--){var o=this.others[s],u={row:o.row,column Line: 146 -  .row===t.start.row&&t.start.column<o.column&&(u.column+=n),this.doc.insertMergedLines(u,e.lines)}else if(e.action==="remove")for(var s=this.others.length-1;s>=0;s--){var o=this.others[s],u={row:o.row,column:o.column+i};o.row===t.start.row&&t.start.column<o.column&&(u.column+=n),this.doc.remove(new r(u.row,u.column,u.row,u.column-n))}t.start.column===this.pos.column&&e.action==="insert"?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-n);for(var e=0;e<this.others.length;e++){var r=this.others[e],i={row:r.row,column:r.column-n};r.row===t.start.row&&t.start.column<r.column&&(i.column+=n),r.setPosition(i.row,i.column)}}.bind(this),0):t.start.column===this.pos.column&&e.action==="remove"&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var r=this.others[e];r.row===t.start.row&&t.start.column<r.column&&r.setPosition(r.row,r.column-n)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var s=0;s<this.others.length;s++)this.others[s]._emit("change",{value:this.others[s]})}this.$updating=!1},this.onCursorChange=function(e){if(this.$updating||!this.session)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(o.prototype),t.PlaceHolder=o}),define("ace/mouse/multi_ Line: 148 -  (p),l.$blockScrolling--,E={row:-1,column:-1};var L=function(e){clearInterval(O),l.removeSelectionMarkers(C),C.length||(C=[c.toOrientedRange()]),l.$blockScrolling++,N&&(l.removeSelectionMarker(N),c.toSingleRange(N));for(var t=0;t<C.length;t++)c.addRange(C[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null,l.$blockScrolling--},A=k;r.capture(l.container,y,L);var O=setInterval(function(){A()},20);return e.preventDefault()}}var r=e("../lib/event"),i=e("../lib/useragent");t.onMouseDown=o}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/cron/jquery.cron.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Logic fail</Title>
 <Description>Possible logic bug that could lead to security bugs. Assigning a static string to a variable in an if condition is not normal and is likely a mistake.</Description>
 <Level> Low</Level>
 <Reference> https://en.wikipedia.org/wiki/Logic_error</Reference>
 <Match> if\s?\(\s?\$.*\s?(?<!\!)=\s?('|").*('|")\s?\)</Match>
 <Result> Line: 337 -              if ($tab.find('.cron-type-selector').val() !== 'every') {

 Line: 371 -              if ($selector.val() !== 'every') {

 Line: 379 -              if ($selector.val() !== 'each') {

 Line: 399 -                  if ($selector.val() !== 'every') {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-1.11.1.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 15 -  nction(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return  Line: 33 -  },cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function Line: 36 -  g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[th Line: 42 -  =k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout Line: 45 -  e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=f</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-ui-1.11.4.full.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 7 -  s("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.prev Line: 10 -  cus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function( Line: 11 -  tTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarte Line: 63 -  ncelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void  Line: 72 -  ch(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(docume Line: 108 -  x(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.opti Line: 110 -  is.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}});var y="ui-effects-",b=e;e</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-ui-1.11.4.full.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 6 -  onths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("ove</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-3.2.1.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 15 -  ss(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var R=r.Deferred();r.fn.ready=function(a){return R.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--r.readyWa Line: 17 -  a.removeEventListener("load",S),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)T(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(L)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=$(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b, Line: 28 -  eturn f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(d.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout(function(){ab=void 0}),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ca[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.styl Line: 31 -  e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?l Line: 39 -  ied[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Pb(o,y,d)),v=Qb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]) Line: 40 -  on(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport(function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},convert</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/ol.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 12 -  ,u=["monospace","serif"],c=u.length,p="wmytzilWMYTZIL@#/&?$%10";function d(t){for(var e=Oi(),i=100;i<=700;i+=300){for(var r=i+" ",n=!0,o=0;o<c;++o){var s=u[o];if(e.font=r+l+s,h=e.measureText(p).width,t!=s){e.font=r+l+t+","+s;var a=e.measureText(p).width;n=n&&a!=h}}if(n)return!0}return!1}function f(){var t=!0;for(var e in a)a[e]<s&&(d(e)?(a[e]=s,_(Pi),Fi=null,Li.clear()):(++a[e],t=!1));t&&(clearInterval(o),o=void 0)}return function(t){var e=vi(t);if(e)for(var i=0,r=e.length;i<r;++i){var n=e[i];n in a||(a[n]=s,d(n)||void(a[n]=0)===o&&(o=setInterval(f,32)))}}}();function Oi(){return Fi||(Fi=De(1,1)),Fi}var Ni,Ai,Gi=(Ai=Pi,function(t){var e=Ai[t];return null==e&&(Ni||((Ni=document.createElement("span")).textContent="M",Ni.style.margin=Ni.style.padding="0 !important",Ni.style.position="absolute !important",Ni.style.left="-99999px !important"),Ni.style.font=t,document.body.appendChild(Ni),e=Ai[t]=Ni.offsetHeight,document.body.removeChild(Ni)),e});function ki(t,e){var i=Oi();return t!=i.font&&(i.font=t),i.measureText(e).width}function Di(t,e,i,r){0!==e&&(t.translate(i,r),t.rotate(e),t.translate(-i,-r))}var ji=[1,0,0,1,0,0];function Ui(t,e,i,r,n,o,s,a,h,l,u){var c;1!=i&&(c=t.globalAlpha,t.globalAlpha=c*i),e&&t.setTransform.apply(t,e),t.drawImage(r,n,o,s,a,h,l,s*u,a*u),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,ji)}var Yi=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};Yi.prototype.getOpacity=function(){return this.opacity_},Yi.prototype.getRotateWithView=function(){return this.rotateWithView_},Yi.prototype.getRotation=function(){return this.rotation_},Yi.prototype.getScale=function(){return this.scale_},Yi.prototype.getSnapToPixel=function(){return!1},Yi.prototype.getAnchor=function(){},Yi.prototype.getImage=function(t){},Yi.prototype.getHitDetectionImage=function(t){},Yi.prototype.getImageState=function(){},Yi.prototype.getImageSize=function(){},Yi.prototype.getHitDetectionImageSize=function(){},Yi.prototype.getOrigin=function(){},Yi.prototype.getSize=function(){},Yi.prototype.setOpacity=function(t){this. Line: 41 -  ew MouseEvent("click",{buttons:1});ko=1===t.buttons}catch(t){}}();function jo(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function Uo(t){this.processTouches_(t,this.moveOverOut_)}function Yo(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Bo(t){this.processTouches_(t,this.cancelOut_)}var Xo=function(r){function t(t,e){var i={touchstart:jo,touchmove:Uo,touchend:Yo,touchcancel:Bo};r.call(this,t,i),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},t.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&ho.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},t.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},t.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},t.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},t.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},t.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},t.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),r=i.length;function n(){t.preventDefault()}for(var o=0;o<r;++o){var s=this.touchToPointer_(t,i[o]);s.preventDefault=n,e.call(this Line: 42 -  totype.findTouch_=function(t,e){for(var i=t.length,r=0;r<i;r++){if(t[r].identifier===e)return!0}return!1},t.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),r=i.length;if(r>=e.length){for(var n=[],o=0;o<r;++o){var s=i[o],a=this.pointerMap[s];s==ho||this.findTouch_(e,s-2)||n.push(a.out)}for(var h=0;h<n.length;++h)this.cancelOut_(t,n[h])}},t.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},t.prototype.moveOverOut_=function(t,e){var i=e,r=this.pointerMap[i.pointerId];if(r){var n=r.out,o=r.outTarget;this.dispatcher.move(i,t),n&&o!==i.target&&(n.relatedTarget=i.target,i.relatedTarget=o,n.target=o,i.target?(this.dispatcher.leaveOut(n,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),r.out=i,r.outTarget=i.target}},t.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},t.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},t.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},t.prototype.dedupSynthMouse_=function(t){var r=this.mouseSource.lastTouches,e=t.changedTouches[0];if(this.isPrimaryTouch_(e)){var n=[e.clientX,e.clientY];r.push(n),setTimeout(function(){var t,e,i;e=n,i=(t=r).indexOf(e),-1<i&&t.splice(i,1)},this.dedupTimeout_)}},t}(ao),zo=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Vo=function(e){function t(t){e.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this. Line: 44 -  i){return new Do(t,i,e)},t.prototype.fireEvent=function(t,e,i){var r=this.makeEvent(t,e,i);this.dispatchEvent(r)},t.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},t.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,go.prepareEvent(e,this),e)},t.prototype.disposeInternal=function(){this.unregister_(),e.prototype.disposeInternal.call(this)},t}(i),Wo=function(r){function t(t,e){r.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*ai:ai,this.down_=null;var i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Vo(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=C(this.pointerEventHandler_,to,this.handlePointerDown_,this),this.relayedListenerKey_=C(this.pointerEventHandler_,$n,this.relayEvent_,this)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.emulateClick_=function(e){var t=new Qn(Jn.CLICK,this.map_,e);this.dispatchEvent(t),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,t=new Qn(Jn.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var t=new Qn(Jn.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},t.prototype.updateActivePointers_=function(t){var e=t;e.type==Jn.POINTERUP||e.type==Jn.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Jn.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},t.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Qn(Jn.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(g),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},t.prototype.isMouseActionButton_=func Line: 52 -  ation:r.duration,easing:r.easing},I):(this.setResolution(E),this.setCenter(R),as(I,!0))},t.prototype.centerOn=function(t,e,i){var r=this.getRotation(),n=Math.cos(-r),o=Math.sin(-r),s=t[0]*n-t[1]*o,a=t[1]*n+t[0]*o,h=this.getResolution(),l=(s+=(e[0]/2-i[0])*h)*n-(a+=(i[1]-e[1]/2)*h)*(o=-o),u=a*n+s*o;this.setCenter([l,u])},t.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},t.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},t.prototype.setCenter=function(t){this.set(rs,t),this.getAnimating()&&this.cancelAnimations()},t.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},t.prototype.setResolution=function(t){this.set(ns,t),this.getAnimating()&&this.cancelAnimations()},t.prototype.setRotation=function(t){this.set(os,t),this.getAnimating()&&this.cancelAnimations()},t.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},t}(R);function as(t,e){setTimeout(function(){t(e)},0)}function hs(t){return!(t.sourceCenter&&t.targetCenter&&!cn(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var ls="opacity",us="visible",cs="extent",ps="zIndex",ds="maxResolution",fs="minResolution",_s="source",gs=function(i){function t(t){i.call(this);var e=E({},t);e[ls]=void 0!==t.opacity?t.opacity:1,e[us]=void 0===t.visible||t.visible,e[ps]=t.zIndex,e[ds]=void 0!==t.maxResolution?t.maxResolution:1/0,e[fs]=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_={layer:this,managed:!0},this.type}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.getType=function(){return this.type},t.prototype.getLayerState=function(){return this.state_.opacity=gt(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex()||0,this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getM Line: 60 -  is.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={},c=0,p=l.length;c<p;++c)u[Ct(l[c].layer)]=l[c];e=n.getState(this.pixelRatio_),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:h,wantedTiles:{}}}if(a&&(a.extent=st(e.center,e.resolution,e.rotation,a.size,o)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s)(!this.previousExtent_||!pt(this.previousExtent_)&&!$(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Zn(Ko.MOVESTART,this,s)),this.previousExtent_=z(this.previousExtent_));this.previousExtent_&&!a.viewHints[is.ANIMATING]&&!a.viewHints[is.INTERACTING]&&!$(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Zn(Ko.MOVEEND,this,a)),k(a.extent,this.previousExtent_))}this.dispatchEvent(new Zn(Ko.POSTRENDER,this,a)),setTimeout(this.handlePostRender.bind(this),0)},t.prototype.setLayerGroup=function(t){this.set(Ho.LAYERGROUP,t)},t.prototype.setSize=function(t){this.set(Ho.SIZE,t)},t.prototype.setTarget=function(t){this.set(Ho.TARGET,t)},t.prototype.setView=function(t){this.set(Ho.VIEW,t)},t.prototype.skipFeature=function(t){var e=Ct(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},t.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},t.prototype.unskipFeature=function(t){var e=Ct(t).toString();delete this.skippedFea Line: 71 -  r_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(t){(this.useAnchor_=t)||(this.lastAnchor_=null)},t}(ks);function ka(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==w.WHEEL&&e!==w.MOUSEWHEEL)return!0;t.preventDefault();var i,r=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==w.WHEEL?(i=n.deltaY,ri&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=ai),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==w.MOUSEWHEEL&&(i=-n.wheelDeltaY,ni&&(i/=3)),0===i)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?Aa.TRACKPAD:Aa.WHEEL),this.mode_===Aa.TRACKPAD){var s=r.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(is.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),l=s.getMaxResolution(),u=0;if(a<h?(a=Math.max(a,h/this.trackpadZoomBuffer_),u=1):l<a&&(a=Math.min(a,l*this.trackpadZoomBuffer_),u=-1),this.lastAnchor_){var c=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(c))}return s.setResolution(a),0===u&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,0<i?-1:1),easing:Bn,anchor:this.lastAnchor_,duration:this.duration_}),0<u?s.animate({resolution:h,easing:Bn,anchor:this.lastAnchor_,duration:500}):u<0&&s.animate({resolution:l,easing:Bn,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=i;var p=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),p),!1}var Da=function(i){function t(t){i.call(this,{handleDownEvent:Ya,handleDragEvent:ja,handleUpEvent:Ua,stopDown:v});var e=t||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}r Line: 93 -  ouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===Jn.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),i=!1):this.freehand_&&t.type===Jn.POINTERDOWN?i=!1:e?(i=t.type===Jn.POINTERMOVE)&&this.freehand_?i=this.handlePointerMove_(t):(t.pointerEvent.pointerType==lo||t.type===Jn.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===Jn.DBLCLICK&&(i=!1),ua.call(this,t)&&i}function Wh(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Qn(Jn.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function Kh(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===Uh.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===Uh.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}var Hh="extentchanged",Zh=function(e){function t(t){e.call(this,Hh),this.extent=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(m),qh=function(n){function t(t){n.call(this,{handleDownEvent:Qh,handleDragEvent:$h,handleEvent:Jh,handleUpEvent:tl});var i,r,e=t||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),this.extentOverlay_=new uh({source:new jh({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:(i=Zi(),function(t,e){return i[Lt.POLYGON]}),updateWhileAnimating:!0,update Line: 259 -  erimTilesOnError,n.call(this,r),this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=sh.VECTOR_TILE}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getPreload=function(){return this.get(ox)},t.prototype.getUseInterimTilesOnError=function(){return this.get(sx)},t.prototype.setPreload=function(t){this.set(ox,t)},t.prototype.setUseInterimTilesOnError=function(t){this.set(sx,t)},t}(uh);function lx(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function ux(t,e,i){return t+"/"+e+"/"+i}function cx(t){return ux(t[0],t[1],t[2])}function px(t){return(t[1]<<t[0])+t[2]}function dx(r,n){var o=/\{z\}/g,s=/\{x\}/g,a=/\{y\}/g,h=/\{-y\}/g;return function(i,t,e){return i?r.replace(o,i[0].toString()).replace(s,i[1].toString()).replace(a,function(){return(-i[2]-1).toString()}).replace(h,function(){var t=i[0],e=n.getFullTileRange(t);return Z(e,55),(e.getHeight()+i[2]).toString()}):void 0}}function fx(t,e){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=dx(t[n],e);return _x(r)}function _x(n){return 1===n.length?n[0]:function(t,e,i){if(t){var r=Et(px(t),n.length);return n[r](t,e,i)}}}function gx(t,e,i){}function yx(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r,n=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}function vx(t,e,i,r){var n=document.createElement("script"),o="olc_"+Ct(e);function s(){delete window[o],n.parentNode.removeChild(n)}n.async=!0,n.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+o;var a=setTimeout(function(){s(),i&&i()},1e4);window[o]=function(t){clearTimeout(a),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(n)}hx.prototype.getSource;var mx=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.expi Line: 263 -  .getZForResolution(y);var m=this.triangulation_.calculateSourceExtent();if(d&&(t.canWrapX()?(m[1]=gt(m[1],d[1],d[3]),m[3]=gt(m[3],d[1],d[3])):m=ht(m,d)),it(m)){for(var x=e.getTileRangeForExtentAndZ(m,this.sourceZ_),S=x.minX;S<=x.maxX;S++)for(var E=x.minY;E<=x.maxY;E++){var C=h(this.sourceZ_,S,E,s);C&&this.sourceTiles_.push(C)}0===this.sourceTiles_.length&&(this.state=jn)}else this.state=jn}else this.state=jn}}else this.state=jn}return T&&(t.__proto__=T),((t.prototype=Object.create(T&&T.prototype)).constructor=t).prototype.disposeInternal=function(){this.state==Gn&&this.unlistenSources_(),T.prototype.disposeInternal.call(this)},t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(t,e,i){t&&t.getState()==kn&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),(this.sourceTiles_.length=0)===r.length)this.state=Dn;else{var t=this.wrappedTileCoord_[0],e=this.targetTileGrid_.getTileSize(t),i="number"==typeof e?e:e[0],n="number"==typeof e?e:e[1],o=this.targetTileGrid_.getResolution(t),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Ex(i,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,r,this.gutter_,this.renderEdges_),this.state=kn}this.changed()},t.prototype.load=function(){if(this.state==An){this.state=Gn,this.changed();var o=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,t,e){var r=i.getState();if(r==An||r==Gn){o++;var n=C(i,w.CHANGE,function(t){var e=i.getState();e!=kn&&e!=Dn&&e!=jn||(g(n),0===--o&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(n)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==An&&t.load()}),0===o&&setTimeout(this.reproject_.bind(this),0)}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(g),this.sourcesListenerKeys_=null},t}(Vn),wx=[0,0,0],Rx=function(t){var r,n,o,e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.re Line: 280 -  turn function(t){var e,i,r,n,o,s=t.buffers,a=t.meta,h=t.imageOps,l=t.width,u=t.height,c=s.length,p=s[0].byteLength;if(h){var d=new Array(c);for(i=0;i<c;++i)d[i]=(r=new Uint8ClampedArray(s[i]),n=l,o=u,S?new ImageData(r,n,o):{data:r,width:n,height:o});e=x(d,a).data}else{e=new Uint8ClampedArray(p);var f=new Array(c),_=new Array(c);for(i=0;i<c;++i)f[i]=new Uint8ClampedArray(s[i]),_[i]=[0,0,0,0];for(var g=0;g<p;g+=4){for(var y=0;y<c;++y){var v=f[y];_[y][0]=v[g],_[y][1]=v[g+1],_[y][2]=v[g+2],_[y][3]=v[g+3]}var m=x(_,a);e[g]=m[0],e[g+1]=m[1],e[g+2]=m[2],e[g+3]=m[3]}}return e.buffer}}function gS(e,t){var i=Object.keys(e.lib||{}).map(function(t){return"var "+t+" = "+e.lib[t].toString()+";"}).concat(["var __minion__ = ("+_S.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),n=URL.createObjectURL(r),o=new Worker(n);return o.addEventListener("message",t),o}function yS(t){var e;this._imageOps=!!t.imageOps;var i,r,n,o=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var s=0;s<e;++s)o[s]=gS(t,this._onWorkerMessage.bind(this,s));else o[0]=(i=t,r=this._onWorkerMessage.bind(this,0),n=_S(i.operation),{postMessage:function(t){setTimeout(function(){r({data:{buffer:n(t),meta:t.meta}})},0)}});this._workers=o,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}yS.prototype.process=function(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()},yS.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},yS.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},yS.prototype._dispatch=function(){if(0===this._running&&0<this._queue.length){var t=this._job=this._queue.shift(),e=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map(function(t){return t.data.buffer}),n=this._workers.length;if(1===(this._running=n))this._workers[0] Line: 287 -  0];else l=s[Et(px(t),s.length)];return Qx(l,o)}},t.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},t.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},t.prototype.fixedTileUrlFunction=function(t,e,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var n=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.tmpExtent_),s=ws(r.getTileSize(t[0]),this.tmpSize),a=this.gutter_;0!==a&&(s=Cs(s,a,this.tmpSize),o=G(o,n*a,o)),1!=e&&(s=Ts(s,e,this.tmpSize));var h={SERVICE:"WMS",VERSION:rS,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return E(h,this.params_),this.getRequestUrl_(t,s,o,e,i,h)}},t.prototype.updateParams=function(t){E(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){var t=this.params_.VERSION||rS;this.v13_=0<=sn(t,"1.3")},t}(jx),kS=function(s){function t(t,e,i,r,n,o){s.call(this,t,e),this.src_=i,this.extent_=r,this.preemptive_=n,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.getImage=function(){return null},t.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof r)return null;var n=r.charCodeAt(Math.floor(e*r.length));93<=n&&n--,35<=n&&n--;var o=null;if((n-=32)in this.keys_){var s=this.keys_[n];o=this.data_&&s in this.data_?this.data_[s]:s}return o},t.prototype.forDataAtCoordinate=function(e,i,r,t){this.state==An&&!0===t?(o(this,w.CHANGE,function(t){i.call(r,this.getData(e))},this),this.loadInternal_()):!0===t?setTimeout(function(){i.call(r,this.getData(e))}.bind(this),0):i.call(r,this.getData(e))},t.prototype.getKey=function(){return this.src_},t.prototype.handleError_=function( Line: 288 -  n,this.changed()},t.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=jn,this.changed()},t.prototype.loadInternal_=function(){if(this.state==An)if(this.state=Gn,this.jsonp_)vx(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},t.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},t.prototype.onXHRError_=function(t){this.handleError_()},t.prototype.load=function(){this.preemptive_&&this.loadInternal_()},t}(Vn),DS=function(i){function t(t){if(i.call(this,{projection:ne("EPSG:3857"),state:vs}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=gx,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)vx(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):Z(!1,51)}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(t){this.handleTileJSONError()},t.prototype.getTemplate=function(){return this.template_},t.prototype.forDataAtCoordinateAndResolution=function(t,e,i,r){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(n[0],n[1],n[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,r)}else!0===r?setTimeout(function(){i(null)},0):i(null)},t.prototype.handle Line: 290 -  terimTile.dispose();for(var t=0,e=this.tileKeys.length;t<e;++t){var i=this.tileKeys[t],r=this.getTile(i);r.consumers--,0==r.consumers&&(delete this.sourceTiles_[i],r.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(g),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(g),this.sourceTileListenerKeys_.length=0,S.prototype.disposeInternal.call(this)},E.prototype.getContext=function(t){var e=Ct(t).toString();return e in this.context_||(this.context_[e]=De()),this.context_[e]},E.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},E.prototype.getReplayState=function(t){var e=Ct(t).toString();return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},E.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},E.prototype.getTile=function(t){return this.sourceTiles_[t]},E.prototype.load=function(){var n=0,o={};this.state==An&&this.setState(Gn),this.state==Gn&&this.tileKeys.forEach(function(t){var r=this.getTile(t);if(r.state==An&&(r.setLoader(this.loader_),r.load()),r.state==Gn){var e=C(r,w.CHANGE,function(t){var e=r.getState();if(e==kn||e==Dn){var i=Ct(r);e==Dn?o[i]=!0:(--n,delete o[i]),n-Object.keys(o).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(e),++n}}.bind(this)),n-Object.keys(o).length==0&&setTimeout(this.finishLoading_.bind(this),0)},E.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,i=t-1;0<=i;--i){var r=this.getTile(this.tileKeys[i]).getState();r!=kn&&--t,r==jn&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(g),this.loadListenerKeys_.length=0,this.setState(kn)):this.setState(e==this.tileKeys.length?jn:Dn)},E}(Vn);function US(t,e){var i=ph(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}var YS=function(n){function t(t){var e=t.projection||"EPSG:3857",i=t.extent||Mx(e),r=t.tileGrid||bx({extent:i,maxZoom:t.maxZoom||22,minZoom:t.minZoom,tileSize:t.tileSi</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/ol.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 66 -  .activeElement},Hs=y,Zs=function(t){var e=t.originalEvent;return 0==e.button&&!(oi&&si&&e.ctrlKey)},qs=v,Js=function(t){return"pointermove"==t.type},Qs=function(t){return t.type==Jn.SINGLECLICK},$s=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ta=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ea=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},ia=function(t){return Z(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},ra=function(t){var e=t.pointerEvent;return e.isPrimary&&0===e.button},na=L,oa=v,sa=v,aa=L,ha=function(i){function t(t){var e=t||{};i.call(this,{handleEvent:e.handleEvent||ua}),this.handleDownEvent_=e.handleDownEvent?e.handleDownEvent:sa,this.handleDragEvent_=e.handleDragEvent?e.handleDragEvent:na,this.handleMoveEvent_=e.handleMoveEvent?e.handleMoveEvent:aa,this.handleUpEvent_=e.handleUpEvent?e.handleUpEvent:oa,this.handlingDownUpSequence=!1,this.stopDown=e.stopDown?e.stopDown:ca,this.trackedPointers_={},this.targetPointers=[]}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.updateTrackedPointers_=function(t){if((r=t.type)===Jn.POINTERDOWN||r===Jn.POINTERDRAG||r===Jn.POINTERUP){var e=t.pointerEvent,i=e.pointerId.toString();t.type==Jn.POINTERUP?delete this.trackedPointers_[i]:t.type==Jn.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=s(this.trackedPointers_)}var r},t}(ks);function la(t){for(var e=t.length,i=0,r=0,n=0;n<e;n++)i+=t[n].clientX,r+=t[n].clientY;return[i/e,r/e]}function ua(t){if(!(t instanceof Qn))return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Jn.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==Jn.POINTERUP){var i=this.handleUpEvent_(t);this.handlingDownUpSequence=i&&0<this.targetPointers.length}}else if(t.type==Jn.POINTERDOWN){var r=this.handleDownEvent_(t);r&&t.preventDefault(),this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==Jn.POINTERMOVE&&th Line: 101 -  1}function pl(t){return!(t instanceof Qn)||((this.lastPointerEvent_=t).map.getView().getInteracting()||t.type!=Jn.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=Jn.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==Jn.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),ua.call(this,t)&&!e);var e}function dl(t,e){var i=e.geometry;if(i.getType()===Lt.CIRCLE){var r=i;if(e.index===nl){var n=fn(r.getCenter(),t),o=Math.sqrt(n)-r.getRadius();return o*o}}return gn(t,e.segment)}function fl(t,e){var i=e.geometry;return i.getType()===Lt.CIRCLE&&e.index===nl?i.getClosestPoint(t):hn(t,e.segment)}var _l={SELECT:"select"},gl=function(n){function t(t,e,i,r){n.call(this,t),this.selected=e,this.deselected=i,this.mapBrowserEvent=r}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(m),yl=function(a){function t(t){a.call(this,{handleEvent:vl});var e=t||{};this.condition_=e.condition?e.condition:Qs,this.addCondition_=e.addCondition?e.addCondition:qs,this.removeCondition_=e.removeCondition?e.removeCondition:qs,this.toggleCondition_=e.toggleCondition?e.toggleCondition:ta,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:y,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0;var i,r,n=new uh({source:new jh({useSpatialIndex:!1,features:e.features,wrapX:e.wrapX}),style:e.style?e.style:(i=Zi(),pr(i[Lt.POLYGON],i[Lt.LINE_STRING]),pr(i[Lt.GEOMETRY_COLLECTION],i[Lt.LINE_STRING]),function(t,e){return t.getGeometry()?i[t.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=n,e.layers)if("function"==typeof e.layers)r=e.layers;else{var o=e.layers;r=function(t){return lr(o,t)}}else r=y;this.layerFilter_=r,this.featureLayerAssociation_={};var s=this.featureOverlay_.getSource().getFeaturesCollection();C(s,h,this.addFeature_,this),C(s,l,this.removeFeature_,this)}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.addFeatureLayerAssociation_=function(t,e){var i=Ct(t);this.feature Line: 102 -  on_[i]=e},t.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(t){var e=Ct(t);return this.featureLayerAssociation_[e]},t.prototype.getOverlay=function(){return this.featureOverlay_},t.prototype.setHitTolerance=function(t){this.hitTolerance_=t},t.prototype.setMap=function(t){var e=this.getMap(),i=this.featureOverlay_.getSource().getFeaturesCollection();e&&i.forEach(e.unskipFeature.bind(e)),a.prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&i.forEach(t.skipFeature.bind(t))},t.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},t.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},t.prototype.removeFeatureLayerAssociation_=function(t){var e=Ct(t);delete this.featureLayerAssociation_[e]},t}(ks);function vl(t){if(!this.condition_(t))return!0;var i=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),e=!i&&!r&&!n,o=t.map,s=this.featureOverlay_.getSource().getFeaturesCollection(),a=[],h=[];if(e){_(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=s.getLength()-1;0<=l;--l){var u=s.item(l),c=h.indexOf(u);-1<c?h.splice(c,1):(s.remove(u),a.push(u))}0!==h.length&&s.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return!i&&!n||lr(s.getArray(),t)?(r||n)&&lr(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,e)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=a.length-1;0<=p;--p)s.remove(a[p]);s.extend(h)}return(0<h.length||0<a.length)&&this.dispatchEvent(new gl(_l.SELECT,h,a,t)),Js(t)}var ml=function(n){function t(t){n.call(this,{handleEvent:xl,handleDownEvent:y,handleUpEvent:Sl,stopDown:v});var e=t||</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-ui.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 7 -  s("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var s=t.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&e(i,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.prev Line: 10 -  cus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.delegate(c,h,r):i.bind(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function( Line: 11 -  tTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget;var u=!1;t(document).mouseup(function(){u=!1}),t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarte Line: 63 -  ncelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var d,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",g=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},m=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"'][type=radio]"):t("[name='"+i+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,g),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===d&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||t(this).removeClass(n)}).bind("click"+this.eventNamespace,function(t){i.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void  Line: 72 -  ch(function(){return a|="fixed"===t(this).css("position"),!a}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),l=t.datepicker._checkOffset(i,l,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),c):i.dpDiv[h||"show"](h?c:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,_=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],o=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&a.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",o*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(docume Line: 108 -  x(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setupDisabled(i)}},load:function(e,i){e=this._getIndex(e);var s=this,n=this.tabs.eq(e),o=n.find(".ui-tabs-anchor"),a=this._getPanelForTab(n),r={tab:n,panel:a},l=function(t,e){"abort"===e&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){a.html(t),s._trigger("load",i,r),l(n,e)},1)}).fail(function(t,e){setTimeout(function(){l(t,e)},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.opti Line: 110 -  is.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){a.is(":visible")&&(n(h.of),clearInterval(r))},t.fx.interval)),this._trigger("open",e,{tooltip:a})}},_registerCloseHandlers:function(e,i){var s={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var s=t.Event(e);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(s.mouseleave="close"),e&&"focusin"!==e.type||(s.focusout="close"),this._on(!0,i,s)},close:function(e){var i,s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);return o?(i=o.tooltip,o.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:i}),o.hiding||(o.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(e){var i=t("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return t("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur"),o=s.element;n.target=n.currentTarget=o[0],e.close(n,!0),t("#"+i).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}});var v="ui-effects-",b=t;t</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/lib/js/jquery-ui.min.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 6 -  onths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=o(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",a)}function a(){t.datepicker._isDisabledDatepicker(_.inline?_.dpDiv.parent()[0]:_.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function r(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}function l(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("ove</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/worker-json.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 9 -  rayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../document").Document,s=e("../lib/lang"),o=t.Mirror=function(e){this.sender=e;var t=this.doc=new i(""),n=this.deferredUpdate=s.delayedCall(this.onUpdate.bind(this)),r=this;e.on("change",function(e){var i=e.data;if(i[0].start)t.applyDeltas(i);else for(var s=0;s<i.length;s+=2){if(Array.isArray(i[s+1]))var o={action:"insert",start:i[s],lines:i[s+1]};else var o={action:"remove",start:i[s],end:i[s+1]};t.applyDelta(o,!0)}if(r.$timeout)return n.schedule(r.$timeout);r.onUpdate()})};(function(){this.$timeout=500,this.setTimeout=function(e){this.$timeout=e},this.setValue=function(e){this.doc.setValue(e),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(e){this.sender.callback(this.doc.getValue(),e)},this.onUpdate=function(){},this.isPending=function(){return thi Line: 11 -  rror").Mirror,s=e("./json/json_parse"),o=t.JsonWorker=function(e){i.call(this,e),this.setTimeout(200)};r.inherits(o,i),function(){this.onUpdate=function(){var e=this.doc.getValue(),t=[];try{e&&s(e)}catch(n){var r=this.doc.indexToPosition(n.at-1);t.push({row:r.row,column:r.column,text:n.message,type:"error"})}this.sender.emit("annotate",t)}}.call(o.prototype)}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function B(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function j(e){var t,n,r;if(B(e))return e;n=e.valueOf;if(typeof n=="function"){t=n.call(e);if(B(t))return t}r=e.toString;if(typeof r=="function"){t=r.call(e);if(B(t))return t}throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty),l,c,h,p,d;if(d=f(o,"__defineGetter__"))l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__);if([1,2].splice(0).length!=2)if(!function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t=[],n;t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length;if(n+1==t.length)return!0}())Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):e==void 0?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);els</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/treeTable.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Logic fail</Title>
 <Description>Possible logic bug that could lead to security bugs. Assigning a static string to a variable in an if condition is not normal and is likely a mistake.</Description>
 <Level> Low</Level>
 <Reference> https://en.wikipedia.org/wiki/Logic_error</Reference>
 <Match> if\s?\(\s?\$.*\s?(?<!\!)=\s?('|").*('|")\s?\)</Match>
 <Result> Line: 667 -                  if ($(this).attr('type') === 'checkbox') {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/treeTable.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 92 -              setTimeout(function () {

 Line: 632 -              $this.data('timer', setTimeout(function () {

 Line: 815 -                      _$table.updateTimer = setTimeout(function () {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/app.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 0 -  "use strict";async function asyncForEach(e,t){for(let i=0;i<e.length;i++)await t(e[i],i,e)}Array.prototype.remove=function(){let e;const t=arguments;let i,a=t.length;for(;a&&this.length;)for(e=t[--a];-1!==(i=this.indexOf(e));)this.splice(i,1);return this},console.debug||(console.debug=console.log),"undefined"==typeof Number&&(console.log("define Number"),Number=function(e){return parseFloat(e)}),Object.assign||(Object.assign=$.extend);var $iframeDialog=null,configNotSaved=null,showConfig=null;const defaults={},customPostInits={},customPostOnSave={},FORBIDDEN_CHARS=/[\]\[*,;'"`<>\\\s?]/g,adapterRedirect=function(e,t){e&&setTimeout(function(){e+=document.location.pathname,e+=document.location.hash,document.location.href=e},t||5e3)};var gMain=null;function detectIE(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){const t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)}function Adapters(e){const t=this;function i(){t.$grid.show(),t.$tiles.html("").hide(),t.$tab.find("#main-toolbar-table-types-btn").hide(),t.$grid.data("inited")?(t.$tab.find("#btn_collapse_adapters").show(),t.$tab.find("#btn_expand_adapters").show(),t.$tab.find("#btn_list_adapters").show()):(t.$grid.data("inited",!0),t.$grid.fancytree({extensions:["table","gridnav","filter","themeroller"],checkbox:!1,strings:{noData:_("No data")},table:{indentation:5},show:function(e,i,a){t.sortTree()},source:t.tree,renderColumns:function(e,i){const a=i.node,n=$(a.tr).find(">td"),s=t.data[a.key];function o(e){return'<div class="text-ellipsis">'+e+"</div>"}if(!s){n.eq(0).css({"font-weight":"bold"}),n.eq(0).find("img").remove(),n.eq(0).find("span.fancytree-title").attr("style","padding-left: 0px !important");for(let e=0;e<t.tree.length;e++)if(t.tree[e].key===a.key){n.eq(1).html(t.tree[e].desc||"").css({overflow:"hidden","white-space":"nowrap",position:"relative"});let i=0;for(let a=0;a<t.tree[e].children.length;a++)t.data[t.tree[e] Line: 1 -  .key].installed&&i++;t.tree[e].installed=i,a.data.installed=i;_("Installed from group"),_("Total count in group"),t.tree[e].children.length;n.eq(1).html(o('<span class="dark-green">'+i+"</span> "+_("of")+'<span class="dark-blue"> '+t.tree[e].children.length+"</span> "+_("Adapters from this Group installed")));break}return}function r(e,t){return n.eq(e).html(o(t))}n.eq(0).css({overflow:"hidden","white-space":"nowrap"});const l=s.desc.indexOf("<div"),d=l>=0?s.desc.substr(0,l):s.desc;n.eq(1).html(o(s.desc)).attr("title",d).css({"white-space":"nowrap",position:"relative","font-weight":s.bold?"bold":null}).find(">div>div").css("height: 22px !important"),r(2,s.keywords).attr("title",s.keywords),n.eq(3).html(s.installed),n.eq(4).html(s.version),r(5,s.license),r(6,s.install),t.initButtons(a.key),t.isCollapsed[s.group]&&(t.isCollapsed[s.group]=!1,t.main.saveConfig("adaptersIsCollapsed",JSON.stringify(t.isCollapsed)))},gridnav:{autofocusInput:!1,handleCursorKeys:!0},filter:{mode:"hide",autoApply:!0},collapse:function(e,i){t.isCollapsed[i.node.key]||(t.isCollapsed[i.node.key]=!0,t.main.saveConfig("adaptersIsCollapsed",JSON.stringify(t.isCollapsed)))}}),t.$tab.find("#btn_collapse_adapters").show().off("click").on("click",function(){t.$tab.find(".process-adapters").show(),setTimeout(function(){t.$grid.fancytree("getRootNode").visit(function(e){(!t.filterVals.length||e.match||e.subMatch)&&e.setExpanded(!1)}),t.$tab.find(".process-adapters").hide()},100)}),t.$tab.find("#btn_expand_adapters").show().off("click").on("click",function(){t.$tab.find(".process-adapters").show(),setTimeout(function(){t.$grid.fancytree("getRootNode").visit(function(e){(!t.filterVals.length||e.match||e.subMatch)&&e.setExpanded(!0)}),t.$tab.find(".process-adapters").hide()},100)}),t.$tab.find("#btn_list_adapters").show().off("click").on("click",function(){const e=t.$tab.find(".process-adapters");e.show(),t.isList=!t.isList,t.isList?(t.$tab.find("#btn_list_adapters").addClass("red lighten-3"),t.$tab.find("#btn_expand_adapters").hide(),t.$tab.find("#btn_collapse_adapters").hide(),$(this).attr("title",_("list"))):(t.$tab. Line: 2 -  ist_adapters").removeClass("red lighten-3"),t.$tab.find("#btn_expand_adapters").show(),t.$tab.find("#btn_collapse_adapters").show(),$(this).attr("title",_("tree"))),t.main.saveConfig("adaptersIsList",t.isList),e.show(),setTimeout(function(){t._postInit(!0),e.hide()},200)})),t.isList?(t.$tab.find("#btn_list_adapters").addClass("red lighten-3").attr("title",_("tree")),t.$tab.find("#btn_expand_adapters").hide(),t.$tab.find("#btn_collapse_adapters").hide()):(t.$tab.find("#btn_list_adapters").removeClass("red lighten-3").attr("title",_("list")),t.$tab.find("#btn_expand_adapters").show(),t.$tab.find("#btn_collapse_adapters").show()),t.$tab.find(".filter-input").trigger("change")}function a(){t.$grid.hide(),t.$tiles.show(),t.$tab.find("#main-toolbar-table-types-btn").show(),t.$tab.find("#btn_list_adapters").hide(),t.$tab.find("#btn_collapse_adapters").hide(),t.$tab.find("#btn_expand_adapters").hide(),t.$tab.find(".filter-input").trigger("change")}function n(){t.onlyUpdatable?(t.$tab.find("#btn_filter_updates").addClass("red lighten-3"),t.$tab.find("#btn_upgrade_all").show()):(t.$tab.find("#btn_upgrade_all").hide(),t.$tab.find("#btn_filter_updates").removeClass("red lighten-3"))}function s(){t.main.config.expertMode?(t.$tab.find("#btn_adapters_expert_mode").addClass("red lighten-3"),t.$tab.find("#btn_upgrade_all").show()):(t.$tab.find("#btn_adapters_expert_mode").removeClass("red lighten-3"),n())}function o(){let e=!1;t.currentFilter?t.$tiles.find(".tile").each(function(){const i=$(this);(!t.currentType||i.hasClass("class-"+t.currentType))&&r({key:i.data("id")})?(e=!0,i.show()):i.hide()}):t.currentType?(t.$tiles.find(".tile").hide(),t.$tiles.find(".class-"+t.currentType).show(),t.$tiles.find(".tile").each(function(){if($(this).is(":visible"))return e=!0,!1})):t.$tiles.find(".tile").show().each(function(){if($(this).is(":visible"))return e=!0,!1}),e?t.$tiles.find(".filtered-out").hide():t.$tiles.find(".filtered-out").show()}function r(e){if(t.currentFilter){if(!t.data[e.key])return!1;let i=t.data[e.key].title;i&&"object"==typeof i&&(i=i[systemLang]||i.en);let a=t.data[e.key].desc;return Line: 5 -  -table")),t.main.saveConfig("adaptersIsTiles",t.isTiles),setTimeout(function(){t.isTiles?a():i(),t._postInit(!0),t.$tab.find(".process-adapters").hide()},50)}),this.$tab.find("#btn_filter_adapters").off("click").on("click",function(){t.$tab.find(".process-adapters").show(),t.onlyInstalled=!t.onlyInstalled,t.onlyInstalled?t.$tab.find("#btn_filter_adapters").addClass("red lighten-3"):t.$tab.find("#btn_filter_adapters").removeClass("red lighten-3"),t.main.saveConfig("adaptersOnlyInstalled",t.onlyInstalled),setTimeout(function(){t._postInit(!0),t.$tab.find(".process-adapters").hide()},50)}),this.$tab.find("#btn_filter_updates").off("click").on("click",function(){t.$tab.find(".process-adapters").show(),t.onlyUpdatable=!t.onlyUpdatable,n(),t.main.saveConfig("adaptersOnlyUpdatable",t.onlyUpdatable),setTimeout(function(){t._postInit(!0),t.$tab.find(".process-adapters").hide()},200)}),this.$tab.find("#btn_filter_custom_url").off("click").on("click",function(){const e={},i=[];let a;for(a in t.urls)t.urls.hasOwnProperty(a)&&i.push(a);i.sort();for(let a=0;a<i.length;a++){const n=t.urls[i[a]].match(/\.com\/([-_$§A-Za-z0-9]+)\/([-._$§A-Za-z0-9]+)\//);n&&n.length>=2&&(t.main.config.expertMode||-1===i[a].indexOf("js-controller"))&&(e[i[a]+" ["+n[1]+"]"]=null)}t.$installDialog.find("#install-github-link").mautocomplete({data:e,minLength:0,sortFunction:function(e,t,i){return e.indexOf(i)-t.indexOf(i)}}),t.$installDialog.modal(),t.$installDialog.find(".btn-install").off("click").on("click",function(){let e,i,a;if(!t.$installDialog.find('a[href="#tabs-install-github"]').hasClass("active"))e=t.$installDialog.find("#install-url-link").val(),i=t.$installDialog.find("#install-url-debug").prop("checked")?" --debug":"",a="";else{const n=t.$installDialog.find("#install-github-link").val().split(" ");e="https://github.com/"+n[1].replace(/^\[|]$/g,"")+"/ioBroker."+n[0]+"/tarball/master",i=t.$installDialog.find("#install-github-debug").prop("checked")?" --debug":"",a=" "+n[0]}e?t.main.cmdExec(null,'url "'+e+'"'+a+i,function(e){e||t.init(!0,!0)}):t.main.showError(_("Invalid link"))}),t.$installDialog.find( Line: 7 -  ("red lighten-3"):this.$tab.find("#btn_filter_adapters").removeClass("red lighten-3"),this.onlyUpdatable?this.$tab.find("#btn_filter_updates").addClass("red lighten-3"):this.$tab.find("#btn_filter_updates").removeClass("red lighten-3"),"ie"===this.main.browser&&this.main.browserVersion<=10&&(this.isTiles=!1,this.$tab.find("#btn_switch_adapters").hide()),s(),this.$tab.find("#btn_refresh_adapters").on("click",function(){t.init(!0,!0)}),this.$tab.find(".filter-input").on("keyup",function(){$(this).trigger("change")}).on("change",function(e){t.filterTimer&&clearTimeout(t.filterTimer),t.filterTimer=setTimeout(function(){t.filterTimer=null,t.currentFilter=t.$tab.find(".filter-input").val().toLowerCase(),e&&e.target&&$(e.target)[t.currentFilter?"addClass":"removeClass"]("input-not-empty"),t.currentFilter?t.$tab.find(".filter-clear").show():t.$tab.find(".filter-clear").hide(),t.main.saveConfig("adaptersCurrentFilter",t.currentFilter),t.isTiles?o():t.$grid.fancytree("getTree").filterNodes(r,!1)},400)}),this.$tab.find(".filter-clear").on("click",function(){t.$tab.find(".filter-input").val("").trigger("change")}),this.isTiles?(this.$tab.find("#btn_switch_adapters").find("i").text("view_list"),t.$tab.removeClass("view-table").addClass("view-tiles"),a()):(t.$tab.removeClass("view-tiles").addClass("view-table"),i())},this.updateExpertMode=function(){this.init(!0),s()},this.getAdaptersInfo=function(e,i,a,n){if(e){if(!n)throw"Callback cannot be null or undefined";i&&(!this.curRepoLastUpdate||(new Date).getTime()-this.curRepoLastUpdate>1e3)&&(this.curRepository=null,this.curInstalled=null),this.curRunning?this.curRunning.push(n):(this.curRepository&&this.curRepoLastHost===e||(this.curRepository=null,this.main.socket.emit("sendToHost",e,"getRepository",{repo:this.main.systemConfig.common.activeRepo,update:a},e=>{"permissionError"===e&&(console.error('May not read "getRepository"'),e={}),this.curRepository=e||{},this.curRepository&&t.curInstalled&&t.curRunning&&(this.curRepoLastUpdate=Date.now(),setTimeout(()=>{this.curRunning.forEach(e=>e(this.curRepository,this.curInstalled)),this.curRunning=nu Line: 8 -  his.curInstalled&&this.curRepoLastHost===e||(this.curInstalled=null,this.main.socket.emit("sendToHost",e,"getInstalled",null,e=>{"permissionError"===e&&(console.error('May not read "getInstalled"'),e={}),this.curInstalled=e||{},this.curRepository&&t.curInstalled&&(this.curRepoLastUpdate=Date.now(),setTimeout(()=>{this.curRunning.forEach(e=>e(this.curRepository,this.curInstalled)),this.curRunning=null},0))})),this.curRepoLastHost=e,this.curInstalled&&this.curRepository?setTimeout(()=>{this.curRunning&&(this.curRunning.forEach(e=>e(this.curRepository,this.curInstalled)),this.curRunning=null),n&&n(this.curRepository,this.curInstalled)},0):this.curRunning=[n])}},this.enableColResize=function(){$.fn.colResizable&&this.$grid.is(":visible")&&this.$grid.colResizable({liveDrag:!0})},this.sortTree=function(){t.$grid.fancytree("getRootNode").sortChildren(function(e,t){const i=e.data.installed||0,a=(t.data.installed||0)-i;if(a)return a;let n=e.titleLang||e.title||"";"object"==typeof n&&(n=n[systemLang]||n.en);let s=t.titleLang||t.title||"";return"object"==typeof s&&(s=s[systemLang]||s.en),(n=n.toLowerCase())>(s=s.toLowerCase())?1:n<s?-1:0},!0)},this._postInit=function(e,i){void 0!==this.$grid?(t.$tab.find(".process-adapters").show(),this.$grid.find("tbody").html(""),this.getAdaptersInfo(this.main.currentHost,e,i,function(e,i){let a,n,s,p,m=0;const h=[],g=[],f=new Date,b={"add instance":_("add instance"),update:_("update"),upload:_("upload"),"Available version:":_("Available version:"),"Active instances":_("Active instances"),"Installed version":_("Installed version"),readme:_("readme"),"delete adapter":_("delete adapter"),"install specific version":_("install specific version"),all:_("all"),"Last update":_("Last update"),"Installations counter":_("Installation counter"),today:_("today"),yesterday:_("yesterday"),"1 %d days ago":_("1 %d days ago"),"2 %d days ago":_("2 %d days ago"),"5 %d days ago":_("5 %d days ago")};if(i){for(p in i)i.hasOwnProperty(p)&&(a=i[p])&&!a.controller&&"hosts"!==p&&h.push(p);h.sort()}for(p in t.urls={},e)e.hasOwnProperty(p)&&(i&&i[p]&&!i[p].versionDate&&(i[p].versi Line: 15 -  rocess-adapters").hide(),t.updateCounter(m)})):this.enableColResize(),this.restoreScroll()},this.saveScroll=function(){this.scrollTop=this.$tab.find(".grid-main-div").scrollTop()},this.restoreScroll=function(){this.scrollTop&&this.$tab.find(".grid-main-div").scrollTop(this.scrollTop)},this.updateCounter=function(e){if(void 0===e)this.getAdaptersInfo(this.main.currentHost,!1,!1,function(e,i){let a=0;for(const n in i){if(!i.hasOwnProperty(n))continue;const s=i?i[n]:null;if(!s||s.controller||"hosts"===n)continue;let o="";e[n]&&e[n].version&&(o=e[n].version),s.version&&!t.main.upToDate(o,s.version)&&a++}t.updateCounter(a)});else if(e){const t=$("#updates-for-adapters");t.length?t.text(e):$('<span id="updates-for-adapters" title="'+_("updates")+'" class="new badge updates-for-adapters" data-badge-caption="">'+e+"</span>").appendTo('.admin-sidemenu-items[data-tab="tab-adapters"] a')}else $("#updates-for-adapters").remove()},this.init=function(e,i){this.inited&&!e||(this.main.objectsLoaded?(this.inited||(this.inited=!0,this.main.subscribeObjects("system.host.*"),this.main.subscribeStates("system.host.*")),this.main.tabs.hosts.getHosts(function(){t._postInit(e,i)})):setTimeout(function(){t.init(e,i)},250))},this.destroy=function(){this.inited&&(this.saveScroll(),this.inited=!1,this.main.unsubscribeObjects("system.host.*"),this.main.unsubscribeStates("system.host.*"))},this.initButtons=function(e){this.$tab.find('.adapter-install-submit[data-adapter-name="'+e+'"]').off("click").on("click",function(){const e=$(this).attr("data-adapter-name"),i=$(this).attr("data-adapter-desc");!function(e,i,a){if(t.main.tabs.hosts.list.length<=1&&!t.main.config.expertMode)return a(!0,t.main.currentHost,"");const n=$("#dialog-add-instance");n.find(".dialog-add-instance-name").html(e),n.find(".dialog-add-description").html(i);let s="";for(let e=0;e<t.main.tabs.hosts.list.length;e++){const i=t.main.tabs.hosts.list[e];s+="<option "+(i.name===t.main.currentHost?"selected":"")+' value="'+i.name+'">'+i.name+"</option>"}t.main.tabs.hosts.list.length<=1?n.find(".dialog-add-instance-host").addClass("disabled").pr Line: 16 -  ,!0):n.find(".dialog-add-instance-host").removeClass("disabled").prop("disabled",!1),n.find(".dialog-add-instance-host").html(s).select();let o=-1;const r=[];for(let i=0;i<t.main.tabs.instances.list.length;i++){const a=t.main.tabs.instances.list[i].split(".");if(a[a.length-2]===e){const e=parseInt(a[a.length-1],10);r.push(e),e>o&&(o=e)}}o+=10,s='<option selected value="">'+_("auto")+"</option>";for(let e=0;e<o;e++)-1===r.indexOf(e)&&(s+='<option value="'+e+'">'+e+"</option>");n.find(".dialog-add-instance-number").html(s).select(),n.find(".dialog-add-install-btn").off("click").on("click",function(e){a&&(a(!0,n.find(".dialog-add-instance-host").val(),n.find(".dialog-add-instance-number").val()),a=null),n.find(".dialog-add-cancel-btn").off("click"),n.find(".dialog-add-instance-number").off("click")}),n.find(".dialog-add-cancel-btn").off("click").on("click",function(e){a&&(a(!1),a=null),n.find(".dialog-add-cancel-btn").off("click"),n.find(".dialog-add-instance-number").off("click")}),n.modal({dismissible:!1,complete:function(){n.find(".dialog-add-instance-name").html("")}}).modal("open")}(e,i,function(i,a,n){i&&t.getAdaptersInfo(a,!1,!1,function(i,s){let o=i[e];(o=o||s[e])&&(o.license&&"MIT"!==o.license?function(e,i){const a=$("#dialog-license");if(t.data[e].installed||!t.data[e].licenseUrl)return void i(!0);let n=setTimeout(function(){n=null,i(!0)},1e4);t.data[e].licenseUrl||(t.data[e].licenseUrl="https://raw.githubusercontent.com/ioBroker/ioBroker."+(t.data[e].name||e)+"/master/LICENSE"),"object"==typeof t.data[e].licenseUrl&&(t.data[e].licenseUrl=t.data[e].licenseUrl[systemLang]||t.data[e].licenseUrl.en),-1!==t.data[e].licenseUrl.indexOf("github.com")&&(t.data[e].licenseUrl=t.data[e].licenseUrl.replace("github.com","raw.githubusercontent.com").replace("/blob/","/")),t.main.socket.emit("httpGet",t.data[e].licenseUrl,function(t,s,o){n&&(clearTimeout(n),n=null,!t&&o?(a.css({"z-index":200}),o=(o=o.toString().replace(/\r\n/g,"<br>")).replace(/\n/g,"<br>"),a.find(".license_text").html(o),a.find(".license_agreement_name").text(_(" for %s",e)),a.modal({dismissible:!1,complete:function( Line: 19 -  (".");this.main.objects[e]&&this.main.objects[e].common&&this.main.objects[e].common.materialize?this.$configFrame.attr("src","adapter/"+t[2]+"/index_m.html?"+t[3]):this.$configFrame.attr("src","adapter/"+t[2]+"/?"+t[3]);var i=e.replace(/^system\.adapter\./,"");this.$dialog.data("name",i),this.$dialog.find(".title").html(_("Adapter configuration")+": "+i)}},this.allStored=function(){return!window.frames["config-iframe"].changed},this.close=function(){t.main.navigate()},this.destroy=function(){if(this.inited&&(this.inited=!1,this.$configFrame.attr("src",""),void 0!==showConfig&&showConfig&&showConfig.length)){var e=showConfig.shift();setTimeout(function(){t.main.navigate({tab:"instances",dialog:"config",params:e})},1e3)}}}function Customs(e){var t,i,a,n,s,o,r,l,d,c,u,p,m="__different__",h=this;function g(e){if(e)h.historyTimeout&&clearTimeout(h.historyTimeout);else if(h.historyTimeout)return;h.historyTimeout=setTimeout(function(){h.historyTimeout=null,u&&h.loadHistoryTable(u.data("id"),!0)},e||5e3)}function f(e,t){$.ajax({headers:{Accept:"text/html"},cache:!0,url:"/adapter/"+e+"/custom_m.html",success:function(e){t(null,e)},error:function(i){$.ajax({headers:{Accept:"text/html"},cache:!0,url:"/adapter/"+e+"/custom.html",success:function(e){t(null,e)},error:function(e){t(e.responseText)}})}})}function b(e){e.stopPropagation(),e.preventDefault();var t=h.$dialog.find("#customs-tabs"),i=t.data("ids");h.currentCustoms=null;var a=_(m);if(t.find("input, select").each(function(){var e=$(this).data("instance"),t=$(this).data("field");if(t){var n;if("checkbox"===$(this).attr("type")){if(this.indeterminate)return;n=$(this).prop("checked")}else n=$(this).val();if(n!==a){null===n&&(n=""),void 0===n&&(n=""),"false"===n&&(n=!1),"true"===n&&(n=!0);var s=parseFloat(n);n.toString().replace(/^\+/,"").replace(/([0-9]+(\.[0-9]+[1-9])?)(\.?0+$)/,"$1")===s.toString()&&(n=s);for(var o=0;o<i.length;o++){var r=h.main.objects[i[o]].common.custom;if(void 0===(r=h.main.objects[i[o]].common.custom=r||{})[e]){var l,d=e.split(".")[0];l=defaults[d]?"function"==typeof defaults[d]?defaults[d](h.main.objects[i[o]] Line: 23 -  find("#tab-customs-table .timepicker.time-to"));var g,f=s.val()?M.Datepicker.getInstance(s).toString("yyyy.mm.dd"):"",b=r.val(),y=o.val()?M.Datepicker.getInstance(o).toString("yyyy.mm.dd"):"",v=l.val(),w=!0;if(y?(w=!1,(y=new Date(y)).setHours(23),y.setMinutes(59),y.setSeconds(59),y.setMilliseconds(999)):y=new Date,v){var z=v.split(":");y.setHours(z[0]),y.setMinutes(z[1]),y.setSeconds(59),y.setMilliseconds(999),w=!1}if(y=y.getTime(),w&&(y+=1e4),m.end=y,f||b){if(f=new Date(f||y),b){var j=b.split(":");f.setHours(j[0]),f.setMinutes(j[1])}else f.setHours(0),f.setMinutes(0);f.setSeconds(0),f.setMilliseconds(0),m.start=f.getTime()}else m.count=50;p&&(g=new Date(y).toISOString()+"_"+(m.start?new Date(m.start):m.count+"points")+"_"+d+"__"+m.instance+".csv"),e.socket.emit("getHistory",d,m,function(s,o){setTimeout(function(){var r="value;acknowledged;from;timestamp;lastchanged;\n";if(s)console.error(s),t.html('<tr><td colspan="5" style="text-align: center" class="error">'+s+"</td></tr>");else{var l="";if(o&&o.length){for(var d=o.length-1;d>=0;d--){var c=(o[d].from||"").replace("system.adapter.","").replace("system.","");l+='<tr class="'+(o[d].ts>n?"highlight":"")+'">   <td>'+o[d].val+"</td>   <td>"+o[d].ack+"</td>   <td>"+c+"</td>   <td>"+e.formatDate(o[d].ts)+"</td>   <td>"+e.formatDate(o[d].lc)+"</td></tr>\n",p&&(r+=o[d].val+";"+o[d].ack+";"+(c||"")+";"+(o[d].ts?new Date(o[d].ts).toISOString():"")+";"+(o[d].lc?new Date(o[d].lc).toISOString():"")+";\n")}n=o[o.length-1].ts}else l='<tr><td colspan="5" style="text-align: center">'+_("No data")+"</td></tr>";t.html(l)}!function e(){$.fn.colResizable&&(i.is(":visible")?(i.data("inited")||((a=new IobListHeader("grid-history-header",{list:i,colWidthOffset:1,prefix:"log-filter"})).add("text","val"),a.add("text","ack"),a.add("text","from"),a.add("text","ts"),a.add("text","lc")),i.colResizable({liveDrag:!0,partialRefresh:!0,marginLeft:5,postbackSafe:!0,onResize:function(e){return a.syncHeader()}}),a.syncHeader()):setTimeout(function(){e()},200))}(),p&&function(e,t){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=ut Line: 25 -  es.length&&("flot"===e.objects[e.instances[s]].common.name&&e.objects[e.instances[s]].common.enabled?n="flot":!n&&"rickshaw"===e.objects[e.instances[s]].common.name&&e.objects[e.instances[s]].common.enabled?n="rickshaw":"web"===e.objects[e.instances[s]].common.name&&e.objects[e.instances[s]].common.enabled&&(a=e.objects[e.instances[s]].native.port),"flot"!==n||!a);s++);h.loadHistoryTable(t),i.find(".tabs .tab-table").removeClass("disabled"),a&&n&&h.currentCustoms?i.find(".tabs .tab-chart").removeClass("disabled"):i.find(".tabs .tab-chart").addClass("disabled")}else i.find(".tabs .tab-table").addClass("disabled"),i.find(".tabs .tab-chart").addClass("disabled")},this.setCustoms=function(e,t){var i=e.pop();i?(this.$dialog.find("#tab-customs-settings .title").html(_("Adapter settings for %s states",e.length)),h.main.socket.emit("setObject",i,this.main.objects[i],function(i){i?h.main.showMessage(_(i),_("Error"),"error_outline"):setTimeout(function(){h.setCustoms(e,t)},50)})):t&&t()},this.resizeHistory=function(){var e=this.$dialog.find("#iframe-history-chart");if(e.attr("src")){var t=e.data("timeout");t&&clearTimeout(t),e.data("timeout",setTimeout(function(){h.$dialog.find("#iframe-history-chart").data("timeout",null),h.loadHistoryChart(h.$dialog.find("#tabs-customs").data("id"))},1e3))}},this.allStored=function(){return h.$dialog.find(".dialog-system-buttons .btn-save").hasClass("disabled")},this.init=function(e,t){if(!this.inited||t){var i=this.main.navigateGetParams();i&&(i=i.split(",")),i&&i.length||(i=this.ids,this.ids=void 0);var a=[];this.defaults={};for(var n=0,m="",M=[],v=0;v<this.main.instances.length;v++){var w=this.main.objects[this.main.instances[v]];if(w&&w.common&&("storage"===w.common.type||w.common.supportCustoms)){a.push(this.main.instances[v]);var z=this.main.instances[v].split(".");-1===M.indexOf(z[2])&&(M.push(z[2]),n++,f(z[2],function(e,t){e&&console.error(e),t&&(m+=t),--n||(h.$dialog.find("#customs-templates").html(m),h.initCustomsTabs(i,a))}))}}var j,N=[];if(i)for(var L=i.length-1;L>=0;L--)if(this.main.objects[i[L]]){var T=this.main.objects[i[L]].common.cust Line: 56 -  oIGQ9Ik0yNTYsMTQ2Yy00OS42MjYsMC05MCw0MC4zNzQtOTAsOTBjMCw0OS42MjYsNDAuMzc0LDkwLDkwLDkwYzQ5LjYyNiwwLDkwLTQwLjM3NCw5MC05MEMzNDYsMTg2LjM3NCwzMDUuNjI2LDE0NiwyNTYsMTQ2eg0KCQkgTTI1NiwzMDZjLTM4LjU5OCwwLTcwLTMxLjQwMi03MC03MGMwLTM4LjU5OCwzMS40MDItNzAsNzAtNzBjMzguNTk4LDAsNzAsMzEuNDAyLDcwLDcwQzMyNiwyNzQuNTk4LDI5NC41OTgsMzA2LDI1NiwzMDZ6Ii8+DQo8L2c+DQo8Zz4NCgk8cGF0aCBkPSJNMzAzLjA3MSwyMDguOTI4Yy0zLjkwNi0zLjkwNC0xMC4yMzYtMy45MDQtMTQuMTQzLDBMMjQ2LDI1MS44NTdsLTEyLjkyOS0xMi45MjhjLTMuOTA2LTMuOTA0LTEwLjIzNi0zLjkwNC0xNC4xNDMsMA0KCQljLTMuOTA1LDMuOTA1LTMuOTA1LDEwLjIzNywwLDE0LjE0M2wyMCwyMEMyNDAuODgyLDI3NS4wMjMsMjQzLjQ0LDI3NiwyNDYsMjc2czUuMTE4LTAuOTc3LDcuMDcxLTIuOTI5bDUwLTUwDQoJCUMzMDYuOTc2LDIxOS4xNjYsMzA2Ljk3NiwyMTIuODM0LDMwMy4wNzEsMjA4LjkyOHoiLz4NCjwvZz4NCg0KPC9zdmc+DQo=",name:{en:"Security",de:"Sicherheit",ru:"Безопасность",pt:"Segurança",nl:"Veiligheid",fr:"Sécurité",it:"Sicurezza",es:"Seguridad",pl:"Bezpieczeństwo","zh-cn":"安全"},members:[]},type:"enum"}}},s=function(){if(t.$grid&&t.$grid.selectId)return s=t.$grid.selectId.bind(t.$grid),t.$grid.selectId.apply(t.$grid,arguments)};function o(e,a,n,s){if(i.length){var r=i.shift();"delObject"===r.name?t.main.socket.emit(r.name,r.id,function(){setTimeout(function(){o(void 0,void 0,void 0,s)},0)}):t.main.socket.emit(r.name,r.id,r.obj,function(){setTimeout(function(){o(void 0,void 0,void 0,s)},0)})}else!function e(a,n,s,o){if(a!==n&&t.main.objects[n])f(_("Name yet exists!"),!0),t.init(!0),o&&o();else if(a===n)!s||void 0===s.name&&void 0===s.icon&&void 0===s.color||i.push({name:"extendObject",id:a,obj:{common:s}}),o&&o();else if(t.main.objects[a]&&t.main.objects[a].common&&t.main.objects[a].common.nondeletable)f(_('Change of enum\'s id "%s" is not allowed!',a),!0),t.init(!0),o&&o();else{for(var r=a.length+1,l=[],d=0;d<t.list.length;d++)t.list[d].substring(0,r)===a+"."&&l.push(t.list[d]);t.main.socket.emit("getObject",a,function(t,r){setTimeout(function(){if(r){r._id=n,r._rev&&delete r._rev,s&&void 0!==s.name&&(r.common.name=s.name),s&&void 0!==s.icon&&(r.common.icon=s.icon),s&&void 0!==s.color&&(r.common.color=s.color),i.push({name:"del Line: 60 -  itle="'+_("Edit")+'" id="tab-enums-list-edit">\n               <i class="material-icons">queue_play_next</i>\n           </a>\n        </div>');var i='<div class="col s12 cron-main-tab">';i+='<ul class="tabs">';for(var a=0;a<t.list.length;a++)if(2===t.list[a].split(".").length){var n=l(t.main.objects,t.list[a]);i+='<li class="tab col"><a href="#enum-'+encodeURIComponent(t.list[a]).replace(/[.%]/g,"-")+'">'+t.main.getIcon(t.list[a])+'<span class="name">'+n+"</span></a></li>"}i+="</ul>",i+="</div>";for(var s=0;s<t.list.length;s++)2===t.list[s].split(".").length&&(i+='<div id="enum-'+encodeURIComponent(t.list[s]).replace(/[.%]/g,"-")+'" class="col s12 page" data-id="'+t.list[s]+'" data-type="second">',i+="</div>");var o={};e.find(".enum-collection").each(function(){o[$(this).data("id")]=$(this).scrollTop()});try{var d=t.$gridEnum.find(".tree-table-body .collection").find(".collection-item");try{d.droppable("instance")&&d.droppable("destroy")}catch(a){console.error(a)}}catch(a){}e.html(i),e.find(".tabs li").length>0&&(e.find(".tabs").mtabs({onShow:function(e){t.main.saveConfig("enums-active",$(e).attr("id"))}}),t.main.config["enums-active"]&&!t.main.noSelect&&e.find(".tabs").mtabs("select",t.main.config["enums-active"])),e.find(".page").each(function(){c($(this).data("id"),$(this),o[$(this).data("id")])}),e.find(".btn-new-category").on("click",function(){v(null,$(this).data("id"))}),e.find(".btn-edit-category").on("click",function(){v($(this).data("id"))}),e.find(".btn-del-category").on("click",function(){m($(this).data("id"))}),e.find(".edit-content").on("click",function(){v($(this).data("id"))}),e.find(".delete-content").on("click",function(){m($(this).data("id"))}),e.find(".close").on("click",function(){h($(this).data("id"),$(this).data("enum"))}),t.$gridList.find(".btn-edit").off("click").on("click",function(){w(!t.editMode)}),t.$gridList.find(".btn-switch-tiles").off("click").on("click",function(){t.isTiles=!1,t.main.saveConfig("enumIsTiles",t.isTiles),setTimeout(function(){p()},50)}),r(),y(t.$gridEnum.find(".tree-table-body .collection"))}function p(){try{var e=t.$gridEnum.f Line: 61 -  ble-main").find("tbody>tr.treetable-enum");e.droppable("instance")&&e.droppable("destroy")}catch(e){console.log(e)}t.$gridList.html("").removeClass("tree-table-tiles").addClass("tree-table-list"),t.$gridList.treeTable({objects:t.main.objects,root:"enum",columns:["title","name"],members:!0,colors:!0,icons:!0,widths:["calc(100% - 250px)","250px"],name:"enums",buttonsWidth:"40px",buttons:[{text:!1,icons:{primary:"ui-icon-trash"},click:function(e,i,a){t.main.objects[e]?"enum"===t.main.objects[e].type?i?t.main.confirmMessage(_("All sub-enums of %s will be deleted too?",e),null,"help",function(i){i&&t.main._delObjects(e,!0,function(e){e?f(_("Error: %s",e),!0):f(_("Deleted"))})}):t.main.confirmMessage(_("Are you sure to delete %s?",e),null,"help",function(i){i&&t.main._delObjects(e,!0,function(e){e?f(_("Error: %s",e),!0):f(_("Deleted"))})}):h(e,a):t.main.objects[a]&&"enum"===t.main.objects[a].type?h(e,a):f(_('Object "<b>%s</b>" does not exists. Update the page.',e))},width:26,height:20},{text:!1,icons:{primary:"ui-icon-pencil"},match:function(e){return t.main.objects[e]&&"enum"===t.main.objects[e].type},click:function(e,t,i){v(e)},width:26,height:20}],panelButtons:[{id:"tab-enums-btn-switch-tiles",title:_("change view mode"),icon:"view_module",click:function(){t.isTiles=!0,t.main.saveConfig("enumIsTiles",t.isTiles),setTimeout(function(){u()},50)}},{id:"tab-enums-list-new-enum",title:_("New enum"),icon:"note_add",click:function(){v(null)}},{id:"tab-enums-list-new-category",title:_("New category"),icon:"library_add",click:function(){v(null,t.enumEdit)}},{id:"tab-enums-list-edit",title:_("Edit"),icon:"edit",click:function(){w(!t.editMode)}}],onChange:function(e,i){if(e!==i){t.enumEdit=e;var a=t.main.objects[e];if(a&&"enum"===a.type)$("#tab-enums-list-new-enum").removeClass("disabled").attr("title",_("Create new enum, like %s","enum.newCategory")),2===e.split(".").length?t.$gridList.find("#tab-enums-list-new-category").removeClass("disabled").attr("title",_("Create new category, like %s",e+".newEnum")):t.$gridList.find("#tab-enums-list-new-category").addClass("disabled");else t.$gridList Line: 62 -  nums-list-new-enum").addClass("disabled"),t.$gridList.find("#tab-enums-list-new-category").addClass("disabled")}},onReady:b}),t.$gridList.find(".tree-table-buttons a").addClass("btn-small"),t.$gridList.find("#tab-enums-list-new-enum").addClass("disabled"),t.$gridList.find("#tab-enums-list-new-category").addClass("disabled")}function m(e){if("enum"===t.main.objects[e].type){var i=function(e){for(var i=e.split("."),a=[],n=new RegExp("^"+e.replace(/\./g,"\\.")+"\\."),s=0;s<t.list.length;s++)t.list[s].split(".").length===i.length+1&&n.test(t.list[s])&&a.push(t.list[s]);return a}(e);i&&i.length?t.main.confirmMessage(_("All sub-enums of %s will be deleted too?",e),null,"help",function(i){i&&t.main._delObjects(e,!0,function(e){e?f(_("Error: %s",e),!0):f(_("Deleted"))})}):t.main.confirmMessage(_("Are you sure to delete %s?",e),null,"help",function(i){i&&t.main._delObjects(e,!0,function(e){e?f(_("Error: %s",e),!0):f(_("Deleted"))})})}}function h(e,i){t.main.socket.emit("getObject",i,function(i,a){if(a&&a.common&&a.common.members){var n=a.common.members.indexOf(e);-1!==n?(a.common.members.splice(n,1),t.main.socket.emit("setObject",a._id,a,function(e){e?f(_("Error: %s",e),!0):f(_("Removed"))})):f(_("%s is not in the list"))}})}function g(e,i){t.main.socket.emit("getObject",i,function(i,a){a&&a.common&&(a.common.members=a.common.members||[],-1===a.common.members.indexOf(e)?(a.common.members.push(e),a.common.members.sort(),t.main.socket.emit("setObject",a._id,a,function(t){t?f(_("Error: %s",t),!0):f(_("%s added to %s",e,a._id))})):f(_("Is yet in the list")))})}function f(e,i,a){"boolean"==typeof i&&(a=i,i=3e3),t.main.showToast(t.$gridEnum.find(".tree-table-buttons"),e,null,i,a)}function b(e){t.editMode&&(e||(e=t.$gridEnum.find(".tree-table-main")),e.find("tbody>tr.treetable-enum").droppable({accept:".fancytree-type-draggable",over:function(e,i){if($(this).addClass("tab-accept-item"),$(this).hasClass("not-empty")&&!$(this).hasClass("expanded")){var a;$(this).data("tt-id");(a=$(this).data("timer"))&&clearTimeout(a),$(this).data("timer",setTimeout(function(){t.$gridList.treeTable("expand",$(t Line: 68 -  .main.subscribeObjects("enum.*"))):setTimeout(function(){t.init(e)},250))},this.destroy=function(){this.inited&&(this.inited=!1,this.main.unsubscribeObjects("enum.*")),w(!1),this.$gridList.treeTable("destroy")},this.objectChange=function(e,i,a){if(e.match(/^enum\./)){if(i)-1===this.list.indexOf(e)&&this.list.push(e);else{var n=this.list.indexOf(e);-1!==n&&this.list.splice(n,1)}this.updateTimers&&clearTimeout(this.updateTimers),this.updateTimers=setTimeout(function(){t.updateTimers=null,t._postInit()},200)}this.$grid&&s("object",e,i,a)}}function Events(e){var t=this;this.main=e,this.$tab=$("#tab-events");var i,a,n,s,o,r="iobroker.net"===location.hostname||"iobroker.pro"===location.hostname,l={count:0,start:0,limit:500},d=null,c={list:[],mode:!1,counter:0,overflow:!1,$counterSpan:null},u={done:!1,timer:null};this.prepare=function(){s=this.$tab.find("#event-outer"),n=this.$tab.find("#event-table"),o=this.$tab.find("#event-pause"),i=this.$tab.find("#events-table-tr"),(a=new IobListHeader(i,{list:s,colWidthOffset:1,prefix:"event-filter"})).doFilter=h,a.add("combobox","type"),a.add("edit","id","ID"),a.add("edit","val","value"),a.add("combobox","ack","ack",[{val:"",name:"all"},{val:"true",name:"ack"},{val:"false",name:"not ack"}]),a.add("combobox","from","from"),a.add("text","ts"),a.add("text","lc"),Object.defineProperty(a,"getValues",{value:function(){a.ID.selectedVal=a.ID.selectedVal.toLocaleLowerCase(),"true"===a.ack.selectedVal&&(a.ack.selectedVal=!0),"false"===a.ack.selectedVal&&(a.ack.selectedVal=!1)},enumerateble:!1}),o.on("click",function(){t.pause()}),this.$tab.find("#event-clear").off("click").on("click",function(){l.count=0,l.start=0,t.$tab.find("#event-table").html("")})},this.init=function(){r?t.$tab.find("#grid-events").html(_("You can't see events via cloud")+'<br><i class="large material-icons">cloud_off</i>').addClass("no-cloud-events"):a&&(this.inited||(!function e(){if(!$.fn.colResizable)return;s.is(":visible")?(s.colResizable({liveDrag:!0,partialRefresh:!0,marginLeft:5,postbackSafe:!0,onResize:function(e){return a.syncHeader()}}),a.syncHeader()):setTimeout(functio Line: 69 -  }(),this.inited=!0,this.main.subscribeObjects("*"),this.main.subscribeStates("*")))},this.destroy=function(){this.inited&&(this.inited=!1,this.main.unsubscribeObjects("*"),this.main.unsubscribeStates("*"))};var p=!1;function m(){u.timer=null,$(window).trigger("resize.JColResizer")}function h(){d&&(clearTimeout(d),d=null),a.getValues&&a.getValues(),n&&n.find(".event-line").each(function(e){var t=!0,i=$(this);a.type.selectedVal&&!i.hasClass("event-type-"+a.type.selectedVal)?t=!1:a.from.selectedVal&&!i.hasClass("event-from-"+a.from.selectedVal)?t=!1:""===a.ack.selectedVal||i.hasClass("event-ack-"+a.ack.selectedVal)?a.ID.selectedVal&&-1===$(this).find("td.event-column-id").text().toLocaleLowerCase().indexOf(a.ID.selectedVal)?t=!1:""!==a.value.selectedVal&&-1===$(this).find("td.event-column-value").text().indexOf(a.value.selectedVal)&&(t=!1):t=!1,t?i.show():i.hide()})}this.add=function(i,s,d,h){if(!r){var g,f,b,M,y=h?"stateChange":d?"message":"objChange",v="";if(a&&(a.getValues&&a.getValues(),a.type.checkAddOption(y)),u.done||(u.timer||(u.timer=setTimeout(m,1e3)),l.count>20&&(u.done=!0)),!c.mode)if(l.count>=t.limit){l.start++;var w=document.getElementById("event_"+l.start);w&&(w.outerHTML="")}else l.count++;d||h?h&&(s?(s.from=s.from||"",s.from=s.from.replace("system.adapter.",""),s.from=s.from.replace("system.",""),a&&a.from.checkAddOption(s.from,function(e){return{val:e.replace(/\./g,"-"),name:e}}),v=s.from,void 0!==(g=JSON.stringify(s.val))&&g.length>30&&(g='<div title="'+g.replace(/"/g,"")+'">'+g.substring(0,30)+"...</div>"),f=s.ack?"true":"false",b=e.formatDate(s.ts),M=e.formatDate(s.lc)):(g="deleted",b=e.formatDate(new Date))):s?(void 0!==(g=JSON.stringify(s,"\n",2))&&g.length>30&&(g='<span title="'+g.replace(/"/g,"'")+'">'+g.substring(0,30)+"...</span>"),b=e.formatDate(s.ts)):(g="deleted",b=e.formatDate(new Date));var z=!0;a&&(a.type.selectedVal&&a.type.selectedVal!==y?z=!1:a.ID.selectedVal&&-1===i.toLocaleLowerCase().indexOf(a.ID.selectedVal)?z=!1:""!==a.value.selectedVal&&null!=g&&-1===g.indexOf(a.value.selectedVal)?z=!1:""!==a.ack.selectedVal&&a.ack.selectedVal!==f?z=!1:a. Line: 74 -  display: none">refresh</i>              <i class="material-icons host-update-submit"      data-host-name="'+a.common.hostname+'" style="display: none; opacity: 0">refresh</i>          </div>      </div>  </div>'}this.main=e,this.list=[],this.$tab=$("#tab-hosts"),this.$grid=this.$tab.find("#hosts"),this.$table=this.$tab.find("#grid-hosts"),this.inited=!1,this.isTiles=!0,this.words={},this.prepare=function(){this.isTiles=void 0===this.main.config.hostsIsTiles||null===this.main.config.hostsIsTiles||this.main.config.hostsIsTiles,"ie"===this.main.browser&&this.main.browserVersion<=10&&(this.isTiles=!1,this.$tab.find(".btn-switch-tiles").hide()),this.$tab.find(".btn-reload").attr("title",_("Update")).on("click",function(){t.init(!0)}),this.$tab.find(".btn-switch-tiles").off("click").on("click",function(){t.isTiles=!t.isTiles,t.isTiles?$(this).find("i").text("view_list"):$(this).find("i").text("view_module"),t.main.saveConfig("hostsIsTiles",t.isTiles),setTimeout(function(){t._postInit()},50)}),this.isTiles?this.$tab.find(".btn-switch-tiles").find("i").text("view_list"):this.$tab.find(".btn-switch-tiles").find("i").text("view_module"),this.$tab.find(".filter-clear").on("click",function(){t.$tab.find(".filter-input").val("").trigger("change")});var e=this.$tab.find(".filter-input");e.on("change",function(){var e=$(this).val();e?($(this).addClass("input-not-empty"),t.$tab.find(".filter-clear").show()):(t.$tab.find(".filter-clear").hide(),$(this).removeClass("input-not-empty")),t.main.saveConfig("hostsFilter",e),a(e)}).on("keyup",function(){t.filterTimeout&&clearTimeout(t.filterTimeout),t.filterTimeout=setTimeout(function(){t.$tab.find(".filter-input").trigger("change")},300)}),this.main.config.hostsFilter&&"{"!==this.main.config.hostsFilter[0]?(e.val(t.main.config.hostsFilter).addClass("input-not-empty"),this.$tab.find(".filter-clear").show()):this.$tab.find(".filter-clear").hide(),this.words.Title=_("Title"),this.words.OS=_("OS"),this.words.Available=_("Available"),this.words.Installed=_("Installed"),this.words.Events=_("Events"),this.words.Title=_("Title"),t.words.Type=_("Type")},this Line: 76 -  find(".tab-host-dialog-edit-color").val();M.updateTextFields("#tab-host-dialog-edit"),t.main.showToast(i,_("Drop the icons here")),i.find(".tab-host-dialog-edit-upload").off("click").on("click",function(){i.find(".drop-file").trigger("click")}),i.find(".tab-host-dialog-edit-icon-clear").off("click").on("click",function(){n&&(n="",i.find(".tab-host-dialog-edit-icon").hide(),i.find(".tab-host-dialog-ok").removeClass("disabled"),i.find(".tab-host-dialog-edit-icon-clear").hide())}),i.find(".tab-host-dialog-edit-color-clear").off("click").on("click",function(){s&&(i.find(".tab-host-dialog-ok").removeClass("disabled"),i.find(".tab-host-dialog-edit-color-clear").hide(),i.find(".tab-host-dialog-edit-colorpicker").colorpicker({component:".btn",color:s,container:i.find(".tab-host-dialog-edit-colorpicker")}).colorpicker("setValue",""),s="")});var o=Date.now();try{i.find(".tab-host-dialog-edit-colorpicker").colorpicker("destroy")}catch(e){}i.find(".tab-host-dialog-edit-colorpicker").colorpicker({component:".btn",color:s,container:i.find(".tab-host-dialog-edit-colorpicker")}).colorpicker("setValue",s).on("showPicker.colorpicker",function(){var e=i.find(".modal-content");e[0].scrollTop=e[0].scrollHeight}).on("changeColor.colorpicker",function(e){Date.now()-o>100&&(s=e.color.toHex(),i.find(".tab-host-dialog-ok").removeClass("disabled"),i.find(".tab-host-dialog-edit-icon-clear").show())}),s?i.find(".tab-host-dialog-edit-color-clear").show():i.find(".tab-host-dialog-edit-color-clear").hide();i.modal().modal("open")}($(this).attr("data-host-id"))}),this.$tab.find(".host-update-hint-submit"+a).off("click").on("click",function(){var e=setTimeout(function(){i(),e=null},1e3);t.main.socket.emit("sendToHost",$(this).attr("data-host-name"),"getLocationOnDisk",null,function(t){e&&clearTimeout(e),e=null,i(t)})})},this.updateCounter=function(e){if(void 0===e)this.main.tabs.adapters.getAdaptersInfo(this.main.currentHost,!1,!1,function(e,i){var a=0;if(i&&i.hosts){for(var n in i.hosts)if(i.hosts.hasOwnProperty(n)){var s=t.main.objects["system.host."+n];if(s&&s.common){var o=s.common.installedVersion,r=s.com Line: 77 -  ommon.type]?e[s.common.type].version:"";o&&r&&!t.main.upToDate(r,o)&&(n="system.host."+n.trim().replace(FORBIDDEN_CHARS,"_").replace(/\./g,"_"),t.main.states[n+".alive"]&&t.main.states[n+".alive"].val&&"null"!==t.main.states[n+".alive"].val&&a++)}}t.updateCounter(a)}});else if(e){var i=$("#updates-for-hosts");i.length?i.text(e):$('<span id="updates-for-hosts" title="'+_("updates")+'" class="new badge updates-for-hosts" data-badge-caption="">'+e+"</span>").appendTo('.admin-sidemenu-items[data-tab="tab-hosts"] a')}else $("#updates-for-hosts").remove()},this._postInit=function(){if(void 0!==t.$grid){this.isTiles?function(){for(var e="",i=0;i<t.list.length;i++)e+=s(i);t.$table.html(""),t.$tab.find(".hosts-table").hide(),t.$grid.html(e).show(),t.$grid.append('<div class="col s12 hosts-host-filtered-out"><div class="host z-depth-1 hoverable">'+_("Filtered out")+"</div></div>")}():function(){for(var e="",i=0;i<t.list.length;i++)e+=n(i);t.$grid.html("").hide(),t.$table.html(e),t.$tab.find(".hosts-table").show(),t.$table.append('<tr class="hosts-host-filtered-out"><td colspan="9">'+_("Filtered out")+"</td></tr>")}(),a(this.$tab.find(".filter-input").val());var e=setTimeout(function(){console.warn("Timeout for repository"),e=null,t.initButtons()},2e3),i=t.main.currentHost;if(!i)for(var o=0;o<t.list.length;o++)if(t.main.states[t.list[o].id+".alive"]&&t.main.states[t.list[o].id+".alive"].val){i=t.list[o].id;break}t.main.tabs.adapters.getAdaptersInfo(i,!0,!1,function(i,a){if(a&&a.hosts){for(var n in a.hosts)if(a.hosts.hasOwnProperty(n)){var s=t.main.objects["system.host."+n],o=a.hosts[n].version;o!==a.hosts[n].runningVersion&&(o+="("+_("Running: ")+a.hosts[n].runningVersion+")"),!o&&s.common&&s.common.installedVersion&&(o=s.common.installedVersion),n="system.host."+n.trim().replace(FORBIDDEN_CHARS,"_").replace(/\./g,"_"),t.$tab.find('.hosts-version-installed[data-host-id="'+n+'"]').html(o)}t.$tab.find(".hosts-host").each(function(){var e=$(this).data("host-id"),a=t.main.objects[e],n=a.common.installedVersion,s=a.common&&i&&i[a.common.type]?i[a.common.type].version:"";n&&s&&(t.main.upToDate Line: 79 -  s.updateTimer),this.updateTimer=setTimeout(function(){t.updateTimer=null,t._postInit()},200)}},this.stateChange=function(e,t){e.match(/^system\.host\..+\.alive$/)?(e=e.substring(0,e.length-6),t&&t.val?this.$tab.find('.hosts-led[data-host-id="'+e+'"]').removeClass("led-red").addClass("led-green"):(this.$tab.find('.hosts-led[data-host-id="'+e+'"]').removeClass("led-green").addClass("led-red"),this.$tab.find('.host-update-submit[data-host-id="'+e+'"]').hide(),this.$tab.find('.host-update-hint-submit[data-host-id="'+e+'"]').hide(),this.$tab.find('.host-restart-submit[data-host-id="'+e+'"]').hide(),this.$tab.find('.hosts-version-available[data-host-id="'+e+'"]').removeClass("hosts-version-available-updatable"))):e.match(/^system\.host\..+\.outputCount$/)?(e=e.substring(0,e.length-12),this.$tab.find('.host-out[data-host-id="'+e+'"]').html('<span class="highlight">&#x21A6;'+t.val+"</span>")):e.match(/^system\.host\..+\.inputCount$/)&&(e=e.substring(0,e.length-11),this.$tab.find('.host-in[data-host-id="'+e+'"]').html('<span class="highlight">&#x21A6;'+t.val+"</span>"))}}function InfoAdapter(e){var t=this;this.systemData={node:null,npm:null,os:null},this.main=e,this.checkVersion=function(e,t){return e=e.split("."),t=t.split("."),e[0]=parseInt(e[0],10),t[0]=parseInt(t[0],10),!(e[0]>t[0])&&(e[0]!==t[0]||(e[1]=parseInt(e[1],10),t[1]=parseInt(t[1],10),!(e[1]>t[1])&&(e[1]!==t[1]||(e[2]=parseInt(e[2],10),t[2]=parseInt(t[2],10),e[2]<t[2]))))},this.checkVersionBetween=function(e,i,a){return e===i||e===a||t.checkVersion(i,e)&&t.checkVersion(e,a)},this.showPopup=function(e){sessionStorage.getItem("ioBroker.info.lastPopup")?t.checkAndSetData(e,sessionStorage.getItem("ioBroker.info.lastPopup")):t.main.socket.emit("getState","info.0.last_popup",function(i,a){!i&&a&&(sessionStorage.setItem("ioBroker.info.lastPopup",a.val),t.checkAndSetData(e,a.val))})},this.checkAndSetData=async function(e,i){const a=await t.checkMessages(e,i);if(1===a.length){const e=a[0];t.main.showMessage(e.content,e.title,e.class)}else if(a.length>1){let e="<ol>";const i=[];a.forEach(function(t){-1===i.indexOf(t.id)&&(e+="<li>", Line: 88 -  ta-instance-id="'+t.list[l]+'"]')[c]()}else t.$grid.find('.instance-adapter[data-instance-id="'+t.list[l]+'"]').hide()}else t.$grid.find(".instance-adapter").show();var u=!1;t.$grid.find(".instance-adapter").each(function(){if($(this).is(":visible"))return u=!0,!1}),u?t.$grid.find(".filtered-out").hide():t.$grid.find(".filtered-out").show()}function u(e){var i=$(this),a=i.data("instance-id"),n=i.data("name"),s=i.data("options"),o=i.data("value"),r=this.innerHTML,l=i.css("text-align");i.css("text-align","left"),i.off("click").removeClass("select-id-quick-edit").css("position","relative");var d,c="cursor: pointer; position: absolute;width: 16px; height: 16px; top: 2px; border-radius: 6px; z-index: 3; background-color: lightgray";if(s){var p=s.split(";");d='<select style="width: calc(100% - 50px); z-index: 2">';for(var m=0;m<p.length;m++){var h=p[m].split(":");d+='<option value="'+h[0]+'">'+(h[1]||h[0])+"</option>"}d+="</select>"}d=d||'<input style="width: 100%; z-index: 2" type="text"/>';var g=null;i.html(d+'<div class="ui-icon ui-icon-check        select-id-quick-edit-ok"     style="margin-top: 0.45em;'+c+';right: 22px"></div><div class="cancel ui-icon ui-icon-close select-id-quick-edit-cancel" style="margin-top: 0.45em;'+c+';right: 2px" title="'+_("cancel")+'" ></div>');var f=s?i.find("select"):i.find("input");i.find(".select-id-quick-edit-cancel").off("click").on("click",function(e){g&&clearTimeout(g),g=null,e.preventDefault(),e.stopPropagation(),i.html(r).off("click").on("click",u).addClass("select-id-quick-edit").css("text-align",l)}),i.find(".select-id-quick-edit-ok").off("click").on("click",function(){i.trigger("blur")}),f.val(o),f.blur(function(){g&&clearTimeout(g),g=setTimeout(function(){g=null;var e=$(this).val();JSON.stringify(e)!==JSON.stringify(o)?(t.main.socket.emit("getObject",a,function(i,s){s?(s.common=s.common||{},s.common[n]=e,"title"===n&&s.common.titleLang&&delete s.common.titleLang,t.main.socket.emit("setObject",s._id,s,function(e){e&&t.main.showError(e)})):console.log("Object "+a+" does not exist: "+i)}),o='<span style="color: pink">'+o+"</span>"):o=r,i.ht Line: 89 -  ick").on("click",u).addClass("select-id-quick-edit").css("text-align",l)}.bind(this),100)}).on("keyup",function(e){13===e.which&&$(this).trigger("blur"),27===e.which&&(void 0===o&&(o=""),i.html(o).off("click").on("click",u).addClass("select-id-quick-edit").css("text-align",l))}),"object"==typeof e&&(e.preventDefault(),e.stopPropagation()),setTimeout(function(){f.focus()},100)}this.$tab=$("#tab-instances"),this.$grid=$("#grid-instances"),this.$gridHead=$("#grid-instances-head"),this.inited=!1,this.main=e,this.list=[],this.hostsText=null,this.filterHost=!1,this.memState="memAvailable",window.tdp||(window.tdp=function(e,t){return isNaN(e)?"":e.toFixed(t||0).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}),this.replaceInLink=function(e,t,i){if("object"==typeof e){var n,s=JSON.parse(JSON.stringify(e));for(var o in s)s.hasOwnProperty(o)&&(s[o]=a(s[o],t,i),n||(n=s[o]));return s.__first=n,s}return a(e,t,i)},this.prepare=function(){var e=t.$tab.find(".instances-filter"),i=t.$tab.find(".instances-filter-clear");e.on("change",function(){var e=$(this).val();e?($(this).addClass("input-not-empty"),i.show()):($(this).removeClass("input-not-empty"),i.hide()),t.main.saveConfig("instancesFilter",e),c(e)}).on("keyup",function(){t.filterTimeout&&clearTimeout(t.filterTimeout),t.filterTimeout=setTimeout(function(){e.trigger("change")},300)}),t.main.config.instancesFilter&&"{"!==t.main.config.instancesFilter[0]?(e.addClass("input-not-empty").val(t.main.config.instancesFilter),i.show()):i.hide(),t.$tab.find(".btn-instances-expert-mode").on("click",function(){t.main.config.expertMode=!t.main.config.expertMode,t.main.saveConfig("expertMode",t.main.config.expertMode),t.updateExpertMode(),t.main.tabs.adapters.updateExpertMode()}),t.main.config.expertMode&&t.$tab.find(".btn-instances-expert-mode").addClass("red lighten-3"),t.$tab.find(".btn-instances-reload").on("click",function(){t.init(!0,!0)}),i.on("click",function(){e.val("").trigger("change")}),this.$tab.find(".btn-instances-host").off("click").on("click",function(){t.filterHost=!t.filterHost,t.filterHost?t.$tab.find(".btn-instances-host").add Line: 90 -  ghten-3"):t.$tab.find(".btn-instances-host").removeClass("red lighten-3"),t.main.saveConfig("instancesFilterHost",t.filterHost),setTimeout(function(){c()},50)}),this.filterHost=this.main.config.instancesFilterHost||!1,this.filterHost?this.$tab.find(".btn-instances-host").addClass("red lighten-3"):this.$tab.find(".btn-instances-host").removeClass("red lighten-3")},this.updateExpertMode=function(){t.init(!0),t.main.config.expertMode?t.$tab.find(".btn-instances-expert-mode").addClass("red lighten-3"):t.$tab.find(".btn-instances-expert-mode").removeClass("red lighten-3")},this.replaceLink=function(e,i,a,n){var s;(e=e.replace(/%/g,"")).match(/^native_/)&&(e=e.substring(7)),-1===e.indexOf("_")?s=[i+"."+a,e]:(s=e.split("_"))[0].match(/\.[0-9]+$/)||(s[0]+=".0"),"protocol"===s[1]&&(s[1]="secure"),"instance"!==e?this.main.socket.emit("getObject","system.adapter."+s[0],function(o,r){r&&setTimeout(function(){var o;(o=n?t.$tab.find("#"+n).data("src"):t.$tab.find("#a_"+i+"_"+a).attr("href"))&&(o="secure"===s[1]?o.replace("%"+e+"%",r.native[s[1]]?"https":"http"):-1===o.indexOf("%"+e+"%")?o.replace("%native_"+e+"%",r.native[s[1]]):o.replace("%"+e+"%",r.native[s[1]]),n?t.$tab.find("#"+n).data("src",o):t.$tab.find("#a_"+i+"_"+a).attr("href",o))},0)}):setTimeout(function(){var e;e=(e=n?t.$tab.find("#"+n).data("src"):t.$tab.find("#a_"+i+"_"+a).attr("href")).replace("%instance%",a),n?t.$tab.find("#"+n).data("src",e):t.$tab.find("#a_"+i+"_"+a).attr("href",e)},0)},this._replaceLink=function(e,t,i,a,n){var s;(t=t.replace(/%/g,"")).match(/^native_/)&&(t=t.substring(7)),-1===t.indexOf("_")?s=[i+"."+a,t]:(s=t.split("_"))[0].match(/\.[0-9]+$/)||(s[0]+=".0"),"protocol"===s[1]&&(s[1]="secure"),this.main.socket.emit("getObject","system.adapter."+s[0],function(o,r){r&&e?e="secure"===s[1]?e.replace("%"+t+"%",r.native[s[1]]?"https":"http"):-1===e.indexOf("%"+t+"%")?e.replace("%native_"+t+"%",r.native[s[1]]):e.replace("%"+t+"%",r.native[s[1]]):(console.log("Cannot get link "+s[1]),e=e.replace("%"+t+"%","")),setTimeout(function(){n(e,i,a)},0)})},this._replaceLinks=function(e,t,i,a,n){if(!e)return n(e,t,i,a);var  Line: 92 -  n.currentHost),t.main.tabs.hosts.list.length>1?this.$tab.find(".btn-instances-host").show():(this.$tab.find(".btn-instances-host").hide(),this.filterHost=!1),c(),s(),o(),r(),t.restoreScroll(),i&&t.main.showToast(t.$tab.find(".main-toolbar-table"),_("Updated"))}var p},this.getInstances=function(e){this.main.socket.emit("getForeignObjects","system.adapter.*","state",function(i,a){for(var n in a)a.hasOwnProperty(n)&&(t.main.objects[n]=a[n]);t.main.socket.emit("getForeignStates","*.info.connection",function(i,a){for(var n in a)a.hasOwnProperty(n)&&(t.main.states[n]=a[n]);t.main.socket.emit("getForeignStates","system.adapter.*",function(i,a){for(var n in a)a.hasOwnProperty(n)&&(t.main.states[n]=a[n]);t.main.socket.emit("getForeignObjects","system.adapter.*","instance",function(i,a){for(var n in t.main.instances.splice(0,t.main.instances.length),a)if(a.hasOwnProperty(n)){var s=a[n];t.main.objects[n]=s,"instance"===s.type&&t.main.instances.push(n)}e&&e()})})})})},this.init=function(e,i){if(!this.inited||e)if(this.main.objectsLoaded){this.inited||(this.inited=!0,this.main.subscribeObjects("system.adapter.*"),this.main.subscribeStates("system.adapter.*"),this.main.subscribeObjects("system.host.*"),this.main.subscribeStates("system.host.*"),this.main.subscribeStates("*.info.connection"));var a=0;a++,this.getInstances(function(){--a||t._postInit(e,i)}),a++,this.main.tabs.hosts.getHosts(function(){--a||t._postInit(e,i)})}else setTimeout(function(){t.init(e,i)},250)},this.saveScroll=function(){this.scrollTop=this.$tab.find(".grid-main-div").scrollTop()},this.restoreScroll=function(){this.scrollTop&&this.$tab.find(".grid-main-div").scrollTop(this.scrollTop)},this.destroy=function(){this.inited&&(this.saveScroll(),this.$grid.data("inited",!1),this.inited=!1,this.main.unsubscribeObjects("system.adapter.*"),this.main.unsubscribeStates("system.host.*"),this.main.unsubscribeObjects("system.host.*"),this.main.unsubscribeStates("system.adapter.*"),this.main.unsubscribeStates("*.info.connection"))},this.stateChange=function(e,i){if(this.main.states[e]=i,this.$grid){var a=e.split("."),d=a.pop();if(e Line: 93 -  i){if("diskFree"===d||"diskWarning"===d)r();else if(d===t.memState)o();else if("memRss"===d){s();var c=t.$tab.find('.memUsage[data-instance-id="'+e+'"]'),u=l(e);c.length&&c.text()!==u&&c.html('<span class="highlight">'+u+"</span>")}else"outputCount"===d?t.$tab.find('.instance-out[data-instance-id="'+e+'"]').html('<span class="highlight">&#x21A6;'+i.val+"</span>"):"inputCount"===d&&t.$tab.find('.instance-in[data-instance-id="'+e+'"]').html('<span class="highlight">&#x21E5;'+i.val+"</span>");if(-1!==this.list.indexOf(e))return void("alive"!==d&&"connected"!==d||n(e));e="system.adapter."+a[0]+"."+a[1],-1!==this.list.indexOf(e)&&"connection"===d&&n(e)}}},this.objectChange=function(e,i,a){if(e.match(/^system\.adapter\.[-\w]+\.[0-9]+$/))if(i)-1===this.list.indexOf(e)?(this.list.push(e),this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){t.updateTimer=null,t.init(!0)},200),i.common.noConfig||setTimeout(function(){-1===window.location.hash.indexOf("/config/")&&t.main.navigate({tab:"instances",dialog:"config",params:e})},2e3)):-1!==e.indexOf(".web.")?(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){t.updateTimer=null,t.init(!0)},200)):this.$grid.find('.instance-adapter[data-instance-id="'+e+'"]').html(d(this.$grid,e,this.main.config.instanceForm,!0));else{var n=this.list.indexOf(e);-1!==n&&(this.list.splice(n,1),this.$grid.find('.instance-adapter[data-instance-id="'+e+'"]').remove())}else e.match(/^system\.host\.[-\w]+$/)&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){t.updateTimer=null,t.init(!0)},200))},this.initButtons=function(i,a){i=i?'[data-instance-id="'+i+'"]':"";var n=t.$grid.find(".instance-edit"+i).off("click").on("click",function(){t.onEdit($(this).attr("data-instance-id"))});n.find(".ui-button-icon-primary").length||n.attr("title",_("edit")),(n=t.$grid.find(".instance-settings"+i).off("click").on("click",function(){t.main.navigate({tab:"instances",dialog:"config",params:$(this).data("instance-id")})})).each(function(){var t=$(this).attr("data-instance-id") Line: 96 -  oveAttr("id"),a.addClass("card-system-info"),a.find(".btn-small").addClass("disabled"),a.find(".card-titles").text(e.name),a.find(".btn-card-enabled").data("host",e.id),!1===t.main.systemConfig.common.intro[e.id]){if(!t.$tab.hasClass("edit-active"))return null;a.addClass("card-disabled").find(".btn-card-enabled").removeClass("blue").addClass("gray").find("i").text("close")}t.main.objects[e.id]&&t.main.objects[e.id].common&&(i=t.main.objects[e.id].common.icon),a.find(".card-image-img").attr("src",i||"img/no-image.png"),a.find(".card-content-text").html('<div class="preloader-wrapper small active">\n    <div class="spinner-layer spinner-green-only">\n      <div class="circle-clipper left">\n        <div class="circle"></div>\n      </div><div class="gap-patch">\n        <div class="circle"></div>\n      </div><div class="circle-clipper right">\n        <div class="circle"></div>\n      </div>\n    </div>\n  </div>');var o=setTimeout(function(){o&&(o=null,a.find(".btn-small").addClass("disabled"),a.find(".card-content-text").html(_("offline")))},6e3);return n["Disk size"]=n["Disk size"]||t.main.formatBytes,n["Disk free"]=n["Disk size"]||t.main.formatBytes,t.main.socket.emit("sendToHost",e.id,"getHostInfo",null,function(e){clearTimeout(o),o=null,"permissionError"===e?console.error('May not read "getHostInfo"'):e?a.find(".btn-small").removeClass("disabled"):console.error('Cannot read "getHostInfo"');var i=t.main.states["system.host."+t.main.currentHost+".diskWarning"];i=i?parseFloat(i.val):5;var r=e["Disk size"]>0&&e["Disk free"]&&Math.round(e["Disk free"]/e["Disk size"]*100)<i,l='<div class="card-content-text">';if(e){for(var d in l+="<ul>",e)!e.hasOwnProperty(d)||"Platform"!==d&&"NPM"!==d&&"RAM"!==d&&"Node.js"!==d||(l+="<li><b>"+_(d)+": </b>",l+='<span class="system-info" data-attribute="'+d+'">'+(n[d]?n[d](e[d]):e[d]||" --")+"</span></li>");r&&(l+="<li><b>"+_("Disk free")+": </b>",l+='<span class="system-info system-warning" data-attribute="Disk free">'+(n["Disk free"]?n["Disk free"](e["Disk free"]):e["Disk free"]||" --")+"</span></li>",l+="<li><b>"+_("Disk size")+": </b>",l+='< Line: 100 -  sh(a.rows[n].id),t.main.objects[a.rows[n].id]=a.rows[n].value;i&&i(e,t.main.instances)}}),this.inited||(this.inited=!0,this.main.subscribeObjects("system.adapter.*"),this.main.subscribeObjects("system.host.*"))):setTimeout(function(){t.init(e)},250))},this.saveScroll=function(){this.scrollTop=this.$tiles.scrollTop()},this.restoreScroll=function(){t.scrollTop&&t.$tiles.scrollTop(t.scrollTop)},this.destroy=function(){this.inited&&(this.saveScroll(),this.inited=!1,this.main.unsubscribeObjects("system.adapter.*"),this.main.unsubscribeObjects("system.host.*"))},this.objectChange=function(e){this.inited&&(e.match(/^system\.adapter\.[a-zA-Z0-9-_]+\.\d+$/)||e.match(/^system\.host\./))&&(this.updateTimeout&&(this.updateTimeout=clearTimeout(this.updateTimeout)),this.updateTimeout=setTimeout(function(){l()},1e3))}}function Issue(e){var t=this;this.$dialogIssue=$("#dialog-issue"),this.main=e,this.prepare=function(){},this.init=function(){if(!this.inited){this.inited=!0,showdown.setFlavor("github");var e=this.main.navigateGetParams(),i=e.replace(/^system\.adapter\./,""),a=this.main.objects[e];if(a&&a.common&&a.common.extIcon){var n=a.common.extIcon.split("/"),s=t.$dialogIssue.find("#result-issue");s.html('<div class="loader"><svg class="spinner" width="100%" height="100%" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\n      <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\n</svg></div>');$.getJSON("https://api.github.com/repos/"+n[3]+"/"+n[4]+"/issues",function(e){var t=!1;for(var i in s.empty(),e)if(e.hasOwnProperty(i)){if("remove"===i)break;var a=e[i];if(!a.hasOwnProperty("pull_request")){t=!0;var n=$("#issueTable").children().clone(!0,!0);n.find(".collapsible-header-title").text(a.title),n.find(".goto").attr("href",a.html_url),n.find(".user").text(a.user.login),n.find(".form-row").html((new showdown.Converter).makeHtml(a.body).replace(/src="/g,'class="responsive-img" src="'));var o=new Date(new Date(a.created_at));if(n.find(".created").text(o.toLocaleDateString(systemLang,{weekday:"short",year:"numeric",month:"long",day Line: 102 -  ab.find("#log-clear").on("click",function(){t.clear(!1)}),$("#log-copy-text").on("click",function(){$(this).hide().html("")}),this.$tab.find("#log-copy").on("click",function(){var e='<span class="error">'+_("copy note")+"</span>";$("#log-copy-text").show().html(e+'<br><table style="width: 100%; font-size: 12px" id="log-copy-table">'+i.html()+"</table>");for(var a=t.$tab.find("#log-copy-table").find(".log-column-4"),n=0;n<a.length;n++){var s=$(a[n]);s.html(s.attr("title")),s.attr("title","")}})},this.init=function(e){if(!this.inited||e)if(this.main.currentHost){i.html("");var n=!this.inited;this.inited=!0,this.main.socket.emit("sendToHost",this.main.currentHost,"getLogs",200,function(e){setTimeout(function(){var i={message:"",severity:"debug",from:"",ts:""},o=e?e.pop():-1;-1!==o&&(o=parseInt(o),t.$tab.find("#log-size").html((_("Log size:")+" "+(o/1048576).toFixed(2)+" MB ").replace(/ /g,"&nbsp;")));for(var l=0,d=e.length;l<d;l++)if(e[l]){var c=e[l];if("-"===c[4]&&"-"===c[7]){c=c.replace(/(\[[0-9]+m)/g,""),i.ts=c.substring(0,23);var u=(c=c.substring(27)).indexOf(":");i.severity=c.substring(0,u),27===i.severity.charCodeAt(i.severity.length-1)&&(i.severity=i.severity.substring(0,i.severity.length-1)),27===i.severity.charCodeAt(0)&&(i.severity=i.severity.substring(1)),u=(c=c.substring(u+2)).indexOf(" "),i.from=c.substring(0,u),i.message=c.substring(u)}else i.message=c;t.add(i)}!function e(){$.fn.colResizable&&(a.is(":visible")?(a.colResizable({liveDrag:!0,partialRefresh:!0,marginLeft:5,postbackSafe:!0,onResize:function(e){return s.syncHeader()}}),s&&s.syncHeader()):setTimeout(function(){e()},200))}(),r.host=s.host.val(),r.message=s.message.val(),r.severity=s.severity.val(),n&&t.main.subscribeLogs(!0),t.main.socket.emit("readLogs",function(e,i){if(i&&i.length){var a="";i.reverse();for(var n=0;n<i.length;n++){var s=i[n].split("/").pop().replace(/iobroker\.?/,"").replace(".log","");s[0]<="9"&&(a+='<li><a data-value="'+i[n]+'">'+s+"</a></li>")}i.sort();for(var o=0;o<i.length;o++){var r=i[o].split("/").pop().replace(/iobroker\.?/,"").replace(".log","");r[0]>"9"&&(a+='<li><a data-value= Line: 103 -  +"</a></li>")}t.$tab.find("#log-files-btn").show().dropdown(),t.$tab.find("#log-files").html(a).find("a").on("click",function(){var e=$(this).data("value");e&&($(this).val(""),window.open(e,"_blank").focus())})}else t.$tab.find("#log-files").hide(),t.$tab.find("#log-files-btn").hide()})},0)})}else setTimeout(function(){t.init(e)},100)},this.destroy=function(){this.inited&&(this.inited=!1,this.main.subscribeLogs(!1))},this.add=function(e){if(i){if(e.message.substring(0,e.from.length)===e.from&&(e.message=e.message.substring(e.from.length+1)),l.mode)return l.list.push(e),l.counter++,l.counter>o.limit&&(l.overflow||(n.addClass("ui-state-error").attr("title",_("Message buffer overflow. Losing oldest")),l.overflow=!0),l.list.shift()),void l.$counterSpan.html(tdp(l.counter));if(o.count>=o.limit){var a=document.getElementById("log-line-"+(o.start+1));a&&(a.outerHTML=""),o.start++}else o.count++;e.from&&s&&s.host.checkAddOption(e.from,function(e){return{val:e.replace(/\./g,"-"),name:e}});var d="",c=e.from?e.from.replace(/\./g,"-"):"";r.host&&r.host!==c&&(d="display: none"),!d&&r.severity&&("debug"===r.severity&&"silly"===e.severity?d="display: none":"info"!==r.severity||"debug"!==e.severity&&"silly"!==e.severity?"warn"===r.severity&&"warn"!==e.severity&&"error"!==e.severity?d="display: none":"error"===r.severity&&"error"!==e.severity&&(d="display: none"):d="display: none"),!d&&r.message&&-1===e.message.indexOf(r.message)&&(d="display: none"),"error"===e.severity&&(t.$tabLogs=t.$tabLogs||$('a[href="#tab-logs"]'),t.$tabLogs.addClass("errorLog"));var u='<tr id="log-line-'+(o.start+o.count)+'" class="log-line log-severity-'+e.severity+" "+(c?"log-from-"+c:"")+'" style="'+d+'">';u+='<td class="log-column-1">'+(e.from||"")+"</td>",u+='<td class="log-column-2">'+this.main.formatDate(e.ts)+"</td>",u+='<td class="log-column-3">'+e.severity+"</td>",u+='<td class="log-column-4" title="'+e.message.replace(/"/g,"'")+'">'+e.message.substring(0,200).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</td></tr>",i.prepend(u)}},this.filter=function(){r.host=s.host.val(),r.message=s.mess Line: 104 -  verity=s.severity.val(),"error"===r.severity?(a.find(".log-severity-silly").hide(),a.find(".log-severity-debug").hide(),a.find(".log-severity-info").hide(),a.find(".log-severity-warn").hide(),a.find(".log-severity-error").show()):"warn"===r.severity?(a.find(".log-severity-silly").hide(),a.find(".log-severity-debug").hide(),a.find(".log-severity-info").hide(),a.find(".log-severity-warn").show(),a.find(".log-severity-error").show()):"info"===r.severity?(a.find(".log-severity-silly").hide(),a.find(".log-severity-debug").hide(),a.find(".log-severity-info").show(),a.find(".log-severity-warn").show(),a.find(".log-severity-error").show()):"silly"===r.severity?(a.find(".log-severity-silly").show(),a.find(".log-severity-debug").show(),a.find(".log-severity-info").show(),a.find(".log-severity-warn").show(),a.find(".log-severity-error").show()):(a.find(".log-severity-silly").hide(),a.find(".log-severity-debug").show(),a.find(".log-severity-info").show(),a.find(".log-severity-warn").show(),a.find(".log-severity-error").show()),(r.host||r.message)&&a.find(".log-line").each(function(){r.host&&!$(this).hasClass("log-from-"+r.host)?$(this).hide():r.message&&-1===$(this).html().indexOf(r.message)&&$(this).hide()})},this.clear=function(e){void 0===e&&(e=!0),i.html(""),o.count=0,o.start=0,t.$tabLogs=t.$tabLogs||$('a[href="#tab-logs"]'),t.$tabLogs.removeClass("errorLog"),e&&setTimeout(function(){t.init(e)},0)},this.pause=function(){if(l.mode){l.mode=!1;for(var e=0;e<l.list.length;e++)this.add(l.list[e]);l.overflow=!1,l.list=[],l.counter=0,n.removeClass("yellow btn-pause-button-active").html('<i class="material-icons">pause</i>')}else n.addClass("yellow btn-pause-button-active"),l.$counterSpan=n,l.$counterSpan.html("0"),l.counter=0,l.mode=!0}}function Issue(e){var t=this;this.$dialog=$("#dialog-issue"),this.main=e,this.prepare=function(){},this.init=function(){if(!this.inited){this.inited=!0,showdown.setFlavor("github");var e=this.main.navigateGetParams(),i=e.replace(/^system\.adapter\./,""),a=this.main.objects[e];if(a&&a.common&&a.common.extIcon){var n=a.common.extIcon.split("/"),s=$("#result-is Line: 106 -  ++)s[r].substring(0,"enum.".length+a.length+1)==="enum."+a+"."&&o.push(s[r]);!function e(i,a,n,s){if(a&&a.length){var o=a.pop();if(t.main.objects[o]&&t.main.objects[o].common){var r=0;if(t.main.objects[o].common.members&&t.main.objects[o].common.members.length){var l=t.main.objects[o].common.members.indexOf(i);-1!==l&&-1===n.indexOf(o)&&(t.main.objects[o].common.members.splice(l,1),r++,t.main.socket.emit("setObject",o,t.main.objects[o],function(o){o&&t.main.showError(o),--r||setTimeout(function(){e(i,a,n,s)},0)}))}-1===n.indexOf(o)||t.main.objects[o].common.members&&-1!==t.main.objects[o].common.members.indexOf(i)||(t.main.objects[o].common.members=t.main.objects[o].common.members||[],t.main.objects[o].common.members.push(i),r++,t.main.socket.emit("setObject",o,t.main.objects[o],function(o){o&&t.main.showError(o),--r||setTimeout(function(){e(i,a,n,s)},0)}))}r||setTimeout(function(){e(i,a,n,s)},0)}else s&&s()}(e,o,n,function(a){a&&t.main.showError(a),i("object",e,t.main.objects[e])})}function n(e){console.log("Subscribe: "+e),t.main.subscribeStates(e),t.main.socket.emit("getForeignStates",e,function(e,i){if(i)for(var a in i)console.log("Update "+a),i.hasOwnProperty(a)&&(!i[a]&&t.main.states[a]?(t.main.states[a]={val:null},t.stateChange(a,t.main.states[a])):t.main.states[a]&&t.main.states[a].ts===i[a].ts||(t.main.states[a]=i[a],t.stateChange(a,i[a])));else e&&console.error("requestStates error: "+e)})}function s(){for(var e in t.subscribes){if(t.subscribes.hasOwnProperty(e))t.main.objects[e]&&"state"===t.main.objects[e].type?(t.main.unsubscribeStates(e),console.log("Unsubscribe: "+e)):(t.main.unsubscribeStates(e+".*"),console.log("Unsubscribe: "+e+".*"))}}function o(e,i,a){if(e&&e.length){var n,s=e.shift();"object"==typeof s&&(n=s,s=s._id);var r=t.main.objects[s];r?r.common&&r.common.members&&-1!==r.common.members.indexOf(i)?setTimeout(function(){o(e,i,a)},0):(r.common=r.common||{},r.common.members=r.common.members||[],r.common.members.push(i),t.main.socket.emit("setObject",s,r,function(t){setTimeout(function(){o(e,i,a)},300)})):((r=n||{_id:s,common:{name:s.split(".").pop(),mem Line: 107 -  e:{}}).common=r.common||{},r.common.members=[i],t.main.socket.emit("setObject",s,r,function(t){setTimeout(function(){o(e,i,a)},300)}))}else a()}function r(e,i){if(e)for(var a in e)if(e.hasOwnProperty(a)&&e[a])return function(n){var s=null;n&&n.common&&n.common.enums?(s=n.common.enums,delete n.common.enums):s=null,t.main.socket.emit("setObject",a,n,function(a){a?t.main.showError(a):o(s,n._id,function(){"state"===n.type?t.main.socket.emit("getState",n._id,function(a,s){s&&null!==s.val||t.main.socket.emit("setState",n._id,n.common&&void 0!==n.common.def?n.common.def:null,!0),setTimeout(r,0,e,i)}):setTimeout(r,0,e,i)})})}(e[a]),void(e[a]=null);i&&i()}this.prepare=function(){$(document).on("click",".jump",function(e){return t.main.navigate({dialog:"editobject",params:$(this).attr("data-jump-to")}),e.preventDefault(),!1}),$("#load_grid-objects").show();var e=$("#dialog-new-object");e.modal(),e.find(".btn-add").off("click").on("click",function(){var i=e.find("#object-tab-new-object-name").val(),a=i.trim(),n=e.find("#object-tab-new-object-parent").val();a=n?n+"."+a:a;var s,o=e.find("#object-tab-new-object-type").val(),r=e.find("#object-tab-new-state-type").val();(a=a.replace(FORBIDDEN_CHARS,"_"),t.main.objects[a])?t.main.showError(_('Object "%s" yet exists!',a)):("state"===o?(s={_id:a,type:"state",common:{name:i,role:"",type:r,read:!0,write:!0,desc:_("Manually created")},native:{}},"boolean"===r?s.common.def=!1:"switch"===r?(s.common.type="boolean",s.common.def=!1,s.common.states="false:no;true:yes"):"string"===r?s.common.def="":"number"===r?(s.common.min=0,s.common.max=100,s.common.def=0,s.common.unit="%"):"enum"===r&&(s.common.type="number",s.common.min=0,s.common.max=5,s.common.def=0,s.common.states="0:zero;1:one;2:two;3:three;4:four;5:five")):s="channel"===o?{_id:a,type:"channel",common:{name:i,role:"",icon:"",desc:_("Manually created")},native:{}}:{_id:a,type:"device",common:{name:i,role:"",icon:"",desc:_("Manually created")},native:{}},t.main.socket.emit("setObject",a,s,function(e){e?t.main.showError(e):setTimeout(function(){t.main.navigate({dialog:"editobject",params:a+",def"} Line: 117 -  ),"isFloatComma"===n&&(e[n]="true"===e[n]||!0===e[n])))});var a={};if(s.systemRepos){for(var n in s.systemRepos.native.repositories)s.systemRepos.native.repositories.hasOwnProperty(n)&&"object"==typeof s.systemRepos.native.repositories[n]&&s.systemRepos.native.repositories[n].json&&(a[s.systemRepos.native.repositories[n].link]=s.systemRepos.native.repositories[n].json);s.systemRepos.native.repositories={}}var o=table2values("tab-system-repo");if(s.systemRepos){for(var l=null,d=0;d<o.length;d++)s.systemRepos.native.repositories[o[d].name]={link:o[d].link,json:null},a[o[d].link]&&(s.systemRepos.native.repositories[o[d].name].json=a[o[d].link]),l||(l=o[d].name);l?s.systemRepos.native.repositories[e.activeRepo]||(i=!0,e.activeRepo=l):e.activeRepo&&(i=!0,e.activeRepo="")}if(e.diag=s.$dialog.find("#diagMode").val(),s.systemCerts){s.systemCerts.native.certificates={},o=table2values("tab-system-certs");for(var c=0;c<o.length;c++)s.systemCerts.native.certificates[o[c].name]=r(o[c].name,o[c].certificate);s.$dialog.find(".system-le-settings.value").each(function(){var e=$(this),t=e.data("name");"checkbox"===e.attr("type")?s.systemCerts.native.letsEncrypt[t]=e.prop("checked"):s.systemCerts.native.letsEncrypt[t]=e.val()})}s.$dialog.find(".btn-save").addClass("disabled"),s.main.socket.emit("extendObject","system.config",{common:e},function(e){e?s.main.showError(e):s.main.socket.emit("extendObject","system.repositories",s.systemRepos,function(){s.main.socket.emit("extendObject","system.certificates",s.systemCerts,function(){t?window.location.reload():(s.main.navigate(),i&&setTimeout(function(){s.main.tabs.adapters.init(!0)},0))})})})}function m(e){"tab-system-main"===e&&s.updateMap(),("tab-system-letsencrypt"===e||"tab-system-main"===e||"tab-system-acl"===e)&&window.M&&window.M.toast?(M.updateTextFields("#"+e),s.$dialog.find("optgroup").each(function(){if(!$(this).data("lang")){var e=$(this).attr("label");$(this).data("lang",e),$(this).attr("label",_(e))}}),s.$dialog.find("select").select()):"tab-system-certs"===e&&u(_("Drop the files here"))}this.updateMap=function(e){if(o){if("undefined"= Line: 118 -  urn setTimeout(s.updateMap,200);var i=ol.proj.fromLonLat([parseFloat(a),parseFloat(n)]);!navigator.geolocation||a&&n||navigator.geolocation.getCurrentPosition(positionReady),s.OSM||(s.OSM={},s.OSM.markerSource=new ol.source.Vector,s.OSM.markerStyle=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,49],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:.75,src:"img/pin.png"})}),s.OSM.oMap=new ol.Map({target:"map",layers:[new ol.layer.Tile({source:new ol.source.OSM}),new ol.layer.Vector({source:s.OSM.markerSource,style:s.OSM.markerStyle})],view:new ol.View({center:i,zoom:17})}),s.OSM.marker=new ol.Feature({geometry:new ol.geom.Point(i),name:_("Your home")}),s.OSM.markerSource.addFeature(s.OSM.marker),s.OSM.oMap.on("singleclick",function(e){var t=ol.proj.toLonLat(e.coordinate);a=t[0],s.$dialog.find("#system_longitude").val(t[0]),n=t[1],s.$dialog.find("#system_latitude").val(t[1]).trigger("change"),M.updateTextFields("#dialog-system")}));var r=s.OSM.oMap.getView().getZoom();s.OSM.marker.setGeometry(new ol.geom.Point(i)),s.OSM.oMap.setView(new ol.View({center:i,zoom:r}))}else{if(!this.mapLoaded)return;if(!e)return clearTimeout(t),void(t=setTimeout(function(){s.updateMap(!0)},1e3));if(t&&(clearTimeout(t),t=null),n||a){var l=new google.maps.Map(s.$dialog.find(".map")[0],{zoom:14,center:{lat:parseFloat(n),lng:parseFloat(a)}});new google.maps.Marker({position:{lat:parseFloat(n),lng:parseFloat(a)},map:l,title:_("Your home")})}}},this.init=function(){var t;this.inited||(this.inited=!0,t=function(t){if(t)return console.error(t),void u(t,!0);var r=s.$dialog.find("#system_activeRepo");if(r.html(""),s.systemRepos&&s.systemRepos.native.repositories)for(var h in s.systemRepos.native.repositories)r.append('<option value="'+h+'">'+h+"</option>");else s.$dialog.find("#tab-system-repo").html(_("permissionError"));s.$dialog.find("#diagMode").val(s.main.systemConfig.common.diag).on("change",function(){s.main.socket.emit("sendToHost",s.main.currentHost,"getDiagData",$(this).val(),function(e){s.$dialog.find("#diagSample").html(JSON.stringify(e,null,2))})}).trigger("change");var g=s.$dialog.f Line: 119 -  efaultHistory");g.html('<option value=""></option>');for(var f=0;f<s.main.instances.length;f++)"storage"===e.objects[e.instances[f]].common.type&&g.append('<option value="'+s.main.instances[f].substring("system.adapter.".length)+'">'+e.instances[f].substring("system.adapter.".length)+"</option>");a=s.main.systemConfig.common.longitude,n=s.main.systemConfig.common.latitude,i||(i=!0,o?(s.mapLoaded=!0,$.ajax({url:"lib/js/ol.js",dataType:"script",cache:!0}).done(function(){setTimeout(s.updateMap,500)}),$.ajax({url:"lib/css/ol.css",success:function(e){$("head").append("<style>"+e+"</style>")}})):$.ajax({url:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCIrBRZfZAE_0C1OplAUy7OXhiWLoZc3eY&signed_in=true&callback=initMap",dataType:"script",cache:!0})),s.$dialog.find(".system-settings.value").each(function(){var e=$(this),t=e.attr("id");t&&(t=t.substring("system_".length),"checkbox"===e.attr("type")?e.prop("checked",s.main.systemConfig.common[t]):"isFloatComma"===t?e.val(s.main.systemConfig.common[t]?"true":"false"):e.val(s.main.systemConfig.common[t]),s.main.systemConfig.nonEdit&&s.main.systemConfig.nonEdit.common&&void 0!==s.main.systemConfig.nonEdit.common[t]&&(e.addClass("disabled"),e.prop("disabled",!0)))}),s.$dialog.find("#system_latitude").off("change").on("change",function(){n=$(this).val(),s.updateMap()}).off("keyup").on("keyup",function(){$(this).trigger("change")}),s.$dialog.find("#system_longitude").off("change").on("change",function(){a=$(this).val(),s.updateMap()}).off("keyup").on("keyup",function(){$(this).trigger("change")}),s.systemCerts.native.letsEncrypt||(s.systemCerts.native.letsEncrypt={path:"letsencrypt"}),s.$dialog.find(".system-le-settings.value").each(function(){var e=$(this),t=e.data("name");s.systemCerts&&s.systemCerts.native.letsEncrypt&&("checkbox"===e.attr("type")?e.prop("checked",s.systemCerts.native.letsEncrypt[t]):e.val(s.systemCerts.native.letsEncrypt[t])),s.systemCerts.nonEdit&&s.systemCerts.nonEdit.native&&s.systemCerts.nonEdit.native.letsEncrypt&&void 0!==s.systemCerts.nonEdit.native.letsEncrypt[t]&&(e.addClass("disabled"),e.prop("disabled",!0 Line: 122 -  ain")},s.main.socket.emit("getObject","system.repositories",function(e,i){s.systemRepos=i,s.main.socket.emit("getObject","system.certificates",function(i,a){s.systemCerts=a,s.main.socket.emit("getObject","system.config",function(a,n){s.main.systemConfig=n,t(e||i||a)})})}))},this.destroy=function(){this.inited&&(this.inited=!1)},this.allStored=function(){return s.$dialog.find(".btn-save").hasClass("disabled")},this.prepare=function(){s.main.systemConfig.error?$("#button-system").hide():$("#button-system").off("click").on("click",function(){s.main.navigate({dialog:"system"})})}}function Users(e){var t=this;function i(e,a,s){var o;a=a||[];for(var r=0;r<t.groups.length;r++){var l,d=t.main.objects[t.groups[r]]&&t.main.objects[t.groups[r]].common&&t.main.objects[t.groups[r]].common.members;if(-1===a.indexOf(t.groups[r])&&d&&-1!==(l=d.indexOf(e)))return d.splice(l,1),o={common:{members:d}},void t.main.socket.emit("extendObject",t.groups[r],o,function(t){t?(n(t,!0,5e3),s&&s(t)):setTimeout(function(){i(e,a,s)},0)});if(-1!==a.indexOf(t.groups[r])&&(!d||-1===d.indexOf(e)))return(d=d||[]).push(e),t.main.objects[t.groups[r]].common.members=d,o={common:{members:d}},void t.main.socket.emit("extendObject",t.groups[r],o,function(t){t?(n(t,!0,5e3),s&&s(t)):setTimeout(function(){i(e,a,s)},0)})}s&&s()}function a(e,i,a){"boolean"==typeof i&&(a=i,i=3e3),t.main.showToast(t.$grid,e,null,i,a)}function n(e,i,a){"boolean"==typeof i&&(a=i,i=3e3),t.main.showToast(t.$grid.find("#tab-users-dialog-new"),e,null,i,a)}function s(e){return e?e[0].toUpperCase()+e.substring(1).toLowerCase():e}function o(e){t.main.objects[e]&&"user"===t.main.objects[e].type?t.main.objects[e].common&&t.main.objects[e].common.dontDelete?a(_("Object may not be deleted"),!0):function e(i,n){for(var s=0;s<t.groups.length;s++){var o=t.main.objects[t.groups[s]];if(o&&o.common&&o.common.members&&-1!==o.common.members.indexOf(i))return o.common.members.splice(o.common.members.indexOf(i),1),void t.main.socket.emit("extendObject",t.groups[s],{common:{members:o.common.members}},function(t){t?a(_("Cannot modify groups: %s",t),!0):setTimeout(fu Line: 131 -  s",e),!0):a(_("Removed"))})}else a(_("%s is not in the list"),!0)}})})}this.groups=[],this.list=[],this.$grid=$("#tab-users"),this.$gridUsers=this.$grid.find(".tab-users-list-users .tab-users-body"),this.$gridGroups=this.$grid.find(".tab-users-list-groups .tab-users-body"),this.main=e,this.aclGroups=null,this.prepare=function(){},this._postInit=function(){var e;u(),t.$gridUsers.find("ul").sortable({connectWith:"#tab-users .tab-users-list-groups .treetable",items:".users-type-draggable",appendTo:t.$gridUsers,refreshPositions:!0,helper:function(e,t){return $('<div class="users-drag-helper">'+t.find(".treetable-icon-empty+span").text()+"</div>")},zIndex:999990,revert:!1,scroll:!1,start:function(e,i){var a=i.item.prev();i.item.data("prev",a),t.$grid.addClass("dragging")},stop:function(e,i){t.$grid.removeClass("dragging")},update:function(e,t){var i=t.item.data("prev");i&&i.length?$(i).after(t.item):$(this).prepend(t.item)}}).disableSelection(),p(),(e=t.$gridGroups.find("ul>li")).droppable("instance")&&e.droppable("destroy"),e.droppable({accept:".users-type-draggable",over:function(e,i){if($(this).addClass("tab-accept-item"),$(this).hasClass("not-empty")&&!$(this).hasClass("expanded")){var a,n=$(this).data("tt-id");(a=$(this).data("timer"))&&clearTimeout(a),$(this).data("timer",setTimeout(function(){t.$gridGroups.treeTable("expand",n)},1e3))}},out:function(e,t){var i;$(this).removeClass("tab-accept-item"),(i=$(this).data("timer"))&&(clearTimeout(i),$(this).data("timer",null))},tolerance:"pointer",drop:function(e,i){$(this).removeClass("tab-accept-item");var n=i.draggable.data("tt-id"),s=$(this).data("tt-id");t.main.socket.emit("getObject",s,function(e,i){i&&i.common&&(i.common.members=i.common.members||[],-1===i.common.members.indexOf(n)?(i.common.members.push(n),i.common.members.sort(),t.main.socket.emit("setObject",i._id,i,function(e){e?a(_("Error: %s",e),!0):a(_("%s added to %s",n,i._id))})):a(_("Is yet in the list")))})}})},this.init=function(e){this.inited&&!e||(void 0!==this.$gridUsers&&this._postInit(),this.inited||(a(_("You can drag&drop users to groups"),5e3),this.inited= Line: 132 -  ubscribeObjects("system.user.*"),this.main.subscribeObjects("system.group.*")))},this.destroy=function(){this.inited&&(this.inited=!1,this.main.unsubscribeObjects("system.user.*"),this.main.unsubscribeObjects("system.group.*"))},this.objectChange=function(e,i,a){if(e.match(/^system\.user\./)){if(i)-1===this.list.indexOf(e)&&this.list.push(e);else{var n=this.list.indexOf(e);-1!==n&&this.list.splice(n,1)}this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.timer=null,t._postInit()},200)}else if(e.match(/^system\.group\./)){if(i)-1===this.groups.indexOf(e)&&this.groups.push(e);else{var s=this.groups.indexOf(e);-1!==s&&this.groups.splice(s,1)}this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.timer=null,t._postInit()},200)}}}!function(e){e(document).ready(function(){let t=location.pathname+"socket.io";location.pathname.match(/^\/admin\//)&&(t="/socket.io");let i={};const a={objects:{},states:{},currentHost:"",currentTab:null,currentDialog:null,currentUser:"",subscribesStates:{},subscribesObjects:{},subscribesLogs:0,socket:io.connect("/",{path:t}),systemConfig:null,instances:null,objectsLoaded:!1,waitForRestart:!1,tabs:null,dialogs:{},selectId:null,config:{},addEventMessage:function(e,t,i,a){n.events.add(e,t,i,a)},saveConfig:function(e,t){e&&(a.config[e]=t),"undefined"!=typeof storage&&storage.set("adminConfig",JSON.stringify(a.config))},saveTabs:function(){this.socket.emit("setObject","system.config",this.systemConfig,function(e){e&&this.showError(e)})},upToDate:function(e,t){return e=e.split("."),t=t.split("."),e[0]=parseInt(e[0],10),t[0]=parseInt(t[0],10),!(e[0]>t[0])&&(e[0]!==t[0]||(e[1]=parseInt(e[1],10),t[1]=parseInt(t[1],10),!(e[1]>t[1])&&(e[1]!==t[1]||(e[2]=parseInt(e[2],10),t[2]=parseInt(t[2],10),e[2]<=t[2]))))},cmdExec:function(e,t,i){e=e||a.currentHost,l.val(""),d.modal("open"),s="$ ./iobroker "+t,d.data("finished",!1).find(".btn").html(_("In background")),d.find(".command").html(s),d.find(".progress-dont-close").removeClass("disabled"),g.find(".button-command").removeClass("error").addClass("in-progress"),d.data("max",null),d.dat Line: 134 -  :t||e("body")[0],html:i+(a?'<i class="material-icons">'+a+"</i>":""),displayLength:n||3e3,classes:o})},formatDate:function(e,t){if(!e)return"";let i,a=typeof e;return"string"===a?t?e.substring(8):e:("object"!==a&&(e=e<9466812e5?new Date(1e3*e):new Date(e)),t?a=(i=e.getDate())<10?"0"+i:i:(a=e.getFullYear(),a+=(i=e.getMonth()+1)<10?"-0"+i:"-"+i,a+=(i=e.getDate())<10?"-0"+i:"-"+i),a+=(i=e.getHours())<10?" 0"+i:" "+i,a+=(i=e.getMinutes())<10?":0"+i:":"+i,a+=(i=e.getSeconds())<10?":0"+i:":"+i,a+=(i=e.getMilliseconds())<10?".00"+i:i<100?".0"+i:"."+i)},updateWizard:function(){const t=e("#button-wizard");a.objects["system.adapter.discovery.0"]?(t.data("inited")||(t.data("inited",!0),t.on("click",function(){a.navigate({tab:"instances",dialog:"config",params:"system.adapter.discovery.0"})}).attr("title",_("Device discovery"))),t.show(),!a.systemConfig.common.wizard&&a.systemConfig.common.licenseConfirmed&&t.trigger("click")):t.hide()},getUser:function(){if(a.currentUser){if(a.objects[a.currentUser]){const t=a.objects[a.currentUser];let i="";if(i=t&&t.common&&t.common.name?translateName(t.common.name):(i=a.currentUser.replace(/^system\.user\./))[0].toUpperCase()+i.substring(1).toLowerCase(),t&&t.common&&t.common.icon){const i={};i[a.currentUser]=t,e("#current-user-icon").html(a.getIcon(a.currentUser,null,i))}else e("#current-user-icon").html('<i class="large material-icons">account_circle</i>');e("#current-user").html(i);const s=[];for(let e=0;e<n.users.groups.length;e++){const t=a.objects[n.users.groups[e]];t&&t.common&&t.common.members&&-1!==t.common.members.indexOf(a.currentUser)&&s.push(_(translateName(t.common.name)))}e("#current-group").html(s.join(", "))}}else a.socket.emit("authEnabled",function(t,i){a.currentUser="system.user."+i,t?(a._lastTimer=Date.now(),function e(){if(a._timer)return;const t=Date.now();t-a._lastTimer>3e4?location.reload():a._lastTimer=t;a._timer=setTimeout(()=>{a._timer=null,e()},1e4)}()):e("#button-logout").remove()})},_delObject:function(e,t){let i;if(!Array.isArray(e)){if("string"!=typeof e)return t&&t("invalid idOrList parameter");e=[e]}!function n(){if Line: 135 -  return t&&setTimeout(t,0,null,i);if(i=e.pop(),a.objects[i]&&a.objects[i].common&&(a.objects[i].common["object-non-deletable"]||a.objects[i].common.dontDelete))a.showMessage(_('Cannot delete "%s" because not allowed',i),"","notifications"),setTimeout(n,0);else{const e=a.objects[i];a.socket.emit("delObject",i,function(s){if(s&&"Not exists"!==s)return a.showError(s),t(s);e&&"state"===e.type?a.socket.emit("delState",i,function(e){if(e&&"Not exists"!==e)return a.showError(e),t(e);setTimeout(n,0)}):setTimeout(n,0)})}}()},_delObjects:function(e,t,i){if(t){const t=[];for(const i in a.objects)a.objects.hasOwnProperty(i)&&i.substring(0,e.length+1)===e+"."&&t.push(i);t.push(e),t.sort(),this._delObject(t,function(){i&&i()})}else this._delObject(e,i)},delObject:function(e,t,i){const n=e?e.selectId("getTreeInfo",t):null;a.objects[t]?n&&n.children?a.confirmMessage(_('Do you want to delete just <span style="color: blue">one object</span> or <span style="color: red">all</span> children of %s too?',t),null,"help_outline",[_("_All"),_("Only one"),_("Cancel")],function(e){0===e?a._delObjects(t,!0,i):1===e&&a._delObjects(t,!1,i)}):a.confirmMessage(_("Are you sure to delete %s?",t),null,"help_outline",function(e){e&&a._delObjects(t,!0,i)}):n&&n.children?a.confirmMessage(_("Are you sure to delete all children of %s?",t),null,"help_outline",function(e){e&&a._delObjects(t,!0,i)}):a.showMessage(_('Object "<b>%s</b>" does not exists. Update the page.',t),_("Error"),"help_outline",function(e){e&&a._delObjects(t,!0,i)})}};gMain=a;const n={hosts:new Hosts(a),objects:new Objects(a),adapters:new Adapters(a),instances:new Instances(a),users:new Users(a),enums:new Enums(a),events:new Events(a),logs:new Logs(a),states:null,intro:new Intro(a),info:new InfoAdapter(a)};let s;"undefined"!=typeof States&&(n.states=new States(a)),a.instances=n.instances.list,a.tabs=n,a.dialogs={system:new System(a),customs:new Customs(a),config:new Config(a),editobject:new EditObject(a),issue:new Issue(a),readme:new Readme(a)};let o=null,r=null;const l=e("#stdout"),d=e("#dialog-command"),c=e("#dialog-license-main"),u=e("#dialog-mess Line: 137 -  closed"),e(".admin-sidemenu-close i").toggleClass("hide"),setTimeout(function(){e(window).trigger("resize")},400)}),e(".admin-sidemenu-items").off("click").on("click",function(t){t.preventDefault(),t.stopPropagation(),window.location.hash="#"+e(this).data("tab")}),e(".admin-sidemenu-items a").off("click").on("click",function(t){t.preventDefault(),t.stopPropagation(),window.location.hash="#"+e(this).parent().data("tab")}),n.hosts.updateCounter(),n.adapters.updateCounter()}(),a.tabsInited){const t=h,i=t.data("problem-link");if(i){const a=e(i);if(a.length){const e=a.data("src");if(e&&-1===e.indexOf("%")){const i=a.find("iframe");i.length&&!i.attr("src")&&(i.attr("src",e),t.data("problem-link",null))}}}a.currentHash=null,a.navigateDo()}else a.tabsInited=!0,a.socket.emit("getVersion",function(t,i){const a=e(".button-version");a.hasClass("vendor")||a.text("ioBroker.admin "+i)}),e(".choose-tabs-config-button").off("click").on("click",function(t){const n=e("#admin_sidemenu_dialog");if(n.html())return n.html(""),void e("html").off("click",b);setTimeout(function(){e("html").on("click",b)},100);const s=e(t.target),o=s.offset();o.top+=s.height()-2;let r='<dialog open class="tab-selector m" style="top: '+o.top+"px; left: "+o.left+'px;"><div><ul style="">';for(const e in i){const t=i[e],a="chk-"+e;r+="<li><input "+(h.find('.admin-sidemenu-items[data-tab="'+e+'"]').length?"checked":"unchecked")+' class="chk-tab filled-in" type="checkbox" id="'+a+'" /><span for="'+a+'">'+_(t)+"</span></id>"}r+="</ul></div></dialog>",n.append(r),n.find(".chk-tab").off("change").on("change",function(t){const i=e(this).attr("id").substr(4);if(e(this).prop("checked"))a.systemConfig.common.tabs.push(i);else{const e=a.systemConfig.common.tabs.indexOf(i);-1!==i&&a.systemConfig.common.tabs.splice(e,1)}a.saveTabs(),v()}),n.find('input[type="checkbox"]+span').off("click").on("click",function(){const t=e(this).prev();t.prop("disabled")||t.prop("checked",!t.prop("checked")).trigger("change")})}),a.updateWizard(),e("#button-logout").on("click",function(){window.location.href="/logout/"}),setTimeout(function(){a.tabs.info Line: 139 -  electID.css"/>')})}}}if(e(".tab-custom").each(function(){-1===n.indexOf(e(this).attr("id"))&&e("#"+e(this).attr("id")).remove()}),a.systemConfig.common.tabs||(a.systemConfig.common.tabs=n),e(".link-replace").length){let t=0,i=setTimeout(function(){i=null,y()},100);e(".link-replace").each(function(){t++,a.tabs.instances._replaceLinks(e(this).data("src"),e(this).data("adapter"),e(this).data("instance"),e(this).attr("id"),function(a,n,s,o){e("#"+o).data("src",a).removeClass("link-replace"),--t||i&&(clearTimeout(i),i=null,y())})})}else y()}function w(e){a.socket.emit("getAllObjects",function(t,i){t?window.alert(_(t)):setTimeout(function(){let t;a.objects=i;for(const e in a.objects)a.objects.hasOwnProperty(e)&&"_design"!==e.slice(0,7)&&("instance"===(t=a.objects[e]).type&&a.instances.push(e),"enum"===t.type&&n.enums.list.push(e),"user"===t.type&&n.users.list.push(e),"group"===t.type&&n.users.groups.push(e),"adapter"===t.type&&n.adapters.list.push(e),"host"===t.type&&n.hosts.addHost(t),t.common&&t.common.history&&(t.common.custom=JSON.parse(JSON.stringify(t.common.history)),delete t.common.history));a.objectsLoaded=!0,a.initHostsList(!0),v();for(const e in a.dialogs)a.dialogs.hasOwnProperty(e)&&"function"==typeof a.dialogs[e].prepare&&a.dialogs[e].prepare();!function e(t,i){i=i||0,t&&i<t.length&&a.socket.emit("sendToHost",t[i].name,"getHostInfo",null,function(n){if(n&&n["Node.js"]){const e=parseInt(n["Node.js"].split(".").shift().replace("v",""),10);(e<6||7===e||9===e||11===e)&&a.showMessage(_('This version of node.js "%s" on "%s" is deprecated. Please install node.js 6, 8 or newer',n["Node.js"],t[i].name),_("Suggestion"),"error_outline")}setTimeout(function(){e(t,i+1)},100)})}(n.hosts.list),a.getUser(),"function"==typeof e&&e()},0)})}function z(e,t){(e=e||"")&&e.match(/\.messagebox$/)?a.addEventMessage(e,t,!0,!0):(n.states&&n.states.stateChange(e,t),n.objects.stateChange(e,t),n.hosts.stateChange(e,t),n.instances.stateChange(e,t),n.adapters.stateChange(e,t),a.dialogs.customs.stateChange(e,t),a.selectId&&a.selectId.selectId("state",e,t),a.addEventMessage(e,t,!1,!0))}function j(e,t){ Line: 145 -  "tab-fullcalendar-0":{order:65,icon:"perm_contact_calendar"},"tab-fullcalendar-1":{order:66,icon:"perm_contact_calendar"},"tab-fullcalendar-2":{order:67,icon:"perm_contact_calendar"},"tab-hosts":{order:100,icon:"storage"}};a.socket.on("log",function(e){n.logs.add(e)}),a.socket.on("error",function(e){console.log(e)}),a.socket.on("permissionError",function(e){a.showMessage(_("Has no permission to %s %s %s",e.operation,e.type,e.id||""))}),a.socket.on("stateChange",function(e,t){setTimeout(z,0,e,t)}),a.socket.on("objectChange",function(e,t){setTimeout(j,0,e,t)}),a.socket.on("cmdStdout",function(e,t){if(r===e){let e=t.match(/^upload \[(\d+)]/);if(e){null===d.data("max")&&(d.data("max",parseInt(e[1],10)),m.removeClass("indeterminate").addClass("determinate"));const t=d.data("max"),i=parseInt(e[1],10);m.css("width",100-Math.round(i/t*100)+"%")}else(e=t.match(/^got [-_:\/\\.\w\d]+\/admin$/))?(d.find(".progress-text").html(_("Upload admin started")),d.data("max",null)):(e=t.match(/^got [-_:\/\\.\w\d]+\/www$/))&&(d.find(".progress-text").html(_("Upload www started")),d.data("max",null));s+="\n"+t,l.val(s),l.scrollTop(l[0].scrollHeight-l.height())}}),a.socket.on("cmdStderr",function(e,t){r===e&&(d.data("error")||d.data("error",t),s+="\nERROR: "+t,l.val(s),l.scrollTop(l[0].scrollHeight-l.height()))}),a.socket.on("cmdExit",function(e,t){if(r===e){t=parseInt(t,10),s+="\n"+(0!==t?"ERROR: ":"")+"process exited with code "+t,l.val(s),l.scrollTop(l[0].scrollHeight-l.height()),d.find(".progress-dont-close").addClass("disabled"),m.removeClass("indeterminate").css({width:"100%"}),d.find(".btn").html(_("Close")),d.data("finished",!0),d.data("max",!0);const e=g.find(".button-command");if(e.removeClass("in-progress"),t){let t=d.data("error");if(t){const e=t.match(/error: (.*)$/);e&&(t=e[1]),d.find(".progress-text").html(_("Done with error: %s",_(t))).addClass("error")}else d.find(".progress-text").html(_("Done with error")).addClass("error");e.addClass("error"),e.show()}else d.find(".progress-text").html(_("Success!")),e.hide(),d.find(".progress-dont-close input").prop("checked")&&setTimeout(functio Line: 146 -  lose")},1500);o&&(o(t),o=null)}}),a.socket.on("eventsThreshold",function(t){t?e("#events_threshold").show():e("#events_threshold").hide()}),a.socket.on("connect",function(){e("#connecting").hide(),f?(f=!1,a.getUser(),a.socket.emit("getUserPermissions",function(t,i){a.acl=i,a.socket.emit("getObject","system.config",function(t,i){if(a.systemConfig=i,i&&i.native&&i.native.vendor){const t=i.native.vendor;if(t.icon&&e(".admin-sidemenu-header .button-icon img").attr("src",i.native.vendor.icon),t.name&&e(".admin-sidemenu-header .button-version").html(i.native.vendor.name).addClass("vendor"),t.admin&&t.admin.noCustomInstall&&e("#btn_filter_custom_url").hide(),t.admin&&t.admin.css){if(t.admin.css.sideNavUser&&e(".side-nav .user-view").css(t.admin.css.sideNavUser),t.admin.css.sideNavMenu&&e(".side-nav").css(t.admin.css.sideNavMenu),t.admin.css.header&&g.find(".admin-sidemenu-header nav").css(t.admin.css.header),t.admin.css.rules)for(let i=0;i<t.admin.css.rules.length;i++)e(t.admin.css.rules[i].selector).css(t.admin.css.rules[i].css);t.admin.styles&&e("head").append('<style type="text/css">'+t.admin.styles+"</style>")}}if(a.systemConfig&&a.systemConfig.common&&a.systemConfig.common.tabs){const e=a.systemConfig.common.tabs.indexOf("tab-log");-1!==e&&(a.systemConfig.common.tabs[e]="tab-logs")}a.socket.emit("getObject","system.repositories",function(i,s){a.dialogs.system.systemRepos=s,a.socket.emit("getObject","system.certificates",function(i,s){setTimeout(function(){if(a.dialogs.system.systemCerts=s,"permissionError"===t)a.systemConfig={common:{language:systemLang},error:"permissionError"};else if(!t&&a.systemConfig&&a.systemConfig.common){if(systemLang=a.systemConfig.common.language||systemLang,a.systemConfig.common.city=a.systemConfig.common.city||"",a.systemConfig.common.country=a.systemConfig.common.country||"",a.systemConfig.common.longitude=a.systemConfig.common.longitude||"",a.systemConfig.common.latitude=a.systemConfig.common.latitude||"",!a.systemConfig.common.licenseConfirmed){let t=(a.systemConfig.common.language||window.navigator.userLanguage||window.navigator.language||"").su Line: 148 -  2command-0"]}},a.systemConfig.common.language=window.navigator.userLanguage||window.navigator.language,"en"!==a.systemConfig.common.language&&"de"!==a.systemConfig.common.language&&"ru"!==a.systemConfig.common.language&&(a.systemConfig.common.language="en");translateCron(),translateAll(),"function"==typeof initGridLanguage&&initGridLanguage(a.systemConfig.common.language),d.modal({dismissible:!1}),u.modal(),p.modal({dismissible:!1}),d.find(".progress-show-more").off("change").on("change",function(){const t=e(this).prop("checked");a.saveConfig("progressMore",t),t?d.find(".textarea").show():d.find(".textarea").hide()}),void 0===a.config.progressClose&&(a.config.progressClose=!0),d.find(".progress-dont-close input").on("change",function(){a.saveConfig("progressClose",e(this).prop("checked"))}),d.find('input[type="checkbox"]+span').off("click").on("click",function(){const t=e(this).prev();t.parent().parent().hasClass("switch")||t.prop("disabled")||t.prop("checked",!t.prop("checked")).trigger("change")}),d.find(".progress-dont-close input").prop("checked",a.config.progressClose),d.find(".progress-show-more").prop("checked",!!a.config.progressMore).trigger("change"),d.find(".btn").on("click",function(){d.data("finished")?g.find(".button-command").hide():g.find(".button-command").show()}),g.find(".button-command").on("click",function(){d.modal("open")});for(const e in n)n.hasOwnProperty(e)&&n[e]&&"function"==typeof n[e].prepare&&n[e].prepare();var i;i=w,n.states&&n.states.clear(),a.socket.emit("getStates",function(e,t){a.states=t,"function"==typeof i&&setTimeout(function(){i()},0)})},0)})})})})):(a.resubscribeStates(),a.resubscribeObjects(),a.resubscribeLogs()),a.waitForRestart&&location.reload()}),a.socket.on("disconnect",function(){e("#connecting").show()}),a.socket.on("reconnect",function(){e("#connecting").hide(),a.waitForRestart&&location.reload()}),a.socket.on("repoUpdated",function(){setTimeout(function(){n.adapters.init(!0)},0)}),a.socket.on("reauthenticate",function(){location.reload()})})}(jQuery);var license={en:'The MIT License (MIT)<br><br>Copyright © 2014-2018 bluefox Line: 155 -  e[0]&&(e="#"+e),t=$(e)):t=e,t&&t.length&&("TD"!==t[0].tagName&&"TH"!==t[0].tagName&&((t=t.find(">thead>tr:first>th,>thead>tr:first>td")).length||(t=e.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td"))),a=t)},t.list&&this.setList(t.list),this.syncHeader=function(){if("object"==typeof a){var e=function(){a.each(function(e,t){if(!(e>=a.length-1)){var n=$(t).width(),s=o.selectIdOffset[e]||0;n+s&&$(i[e]).width(Math.round(n+s))}}),a.length&&!o.selectIdOffset.length&&(o.selectIdOffset[0]=0,a.each(function(e,t){var n=$(a[e]).offset().left;n&&(o.selectIdOffset[e]=n-$(i[e]).offset().left)}),e())};e()}},$(window).on("resize",function(e,t){s&&clearTimeout(s),s=setTimeout(o.syncHeader.bind(o),100)}),this.doFilter=function(){},o.ids=[],o.add=function(e,a,s,r){void 0===s&&(s=a);var l=function(e,i){return!e||i&&"#"===e[0]?e:(t.prefix&&e.substr(0,t.prefix.length)!==t.prefix&&(e=t.prefix+"-"+e),(i?"#":"")+e)}(s);a=_(a);var d="";switch(e){case"combobox":d='    <select class="list-header-input" id="'+l+'" title="'+a+'"></select>    <button class="list-header-clear" id="'+l+'-clear" role="button" title=""></button>';break;case"edit":d='    <input  class="list-header-input" placeholder="'+a+'" id="'+l+'" title="'+a+'">    <button class="list-header-clear" id="'+l+'-clear" role="button" title="'+a+'"></button>';break;case"text":d='<span class="list-header-text">'+a+"</span>"}n.append("<th>"+d+"</th>");var c="#"+l,u=$(c),p=o[s]={$filter:u,val:u.val.bind(u),selectedVal:u.val()||""};if(o.ids.push(s),"combobox"===e&&(p.options=[],p.checkAddOption=function(e,t,i){if(-1===this.options.indexOf(e)){this.options.push(e),this.options.sort();for(var n=u.val(),s=i?"":function(e,t){return addAll2FilterCombobox&&(e=e?_(e)+" ("+_("all")+")":_("all")),'<option value="" '+(""===t?"selected":"")+">"+e+"</option>"}(a,n),o=0,r=this.options.length;o<r;o++){var l=this.options[o];if(t){var d=t(l,o);"object"==typeof d?c(d.val,d.name):s+=d}else c(l,l)}u.html(s)}function c(e,t){s+='<option value="'+e+'" '+(t===n?"selected":"")+">"+t+"</option>"}},r))for(var m=0;m<r.length;m++)p.checkAddOption(r[m].nam Line: 156 -  ){return r[t]},!0);var h,g=$(c+"-clear");return g.on("click",function(){""!==u.val()&&u.val("").trigger("change")}),"undefined"==typeof M?g.button({icons:{primary:"ui-icon-close"},text:!1}):g.prepend('<i class="material-icons">close</i>'),u.on("change",function(t){h&&clearTimeout(h),p.selectedVal=u.val(),h=setTimeout(o.doFilter,"combobox"!==e?400:0),p.selectedVal?u.parent().addClass("filter-active"):u.parent().removeClass("filter-active")}).on("keyup",function(e){13===e.which?o.doFilter():u.trigger("change")}),i=n.find(">th"),p}}function values2table(e,t,i){"object"==typeof e&&(i=t,t=e,e="");var a=i&&i.maxRaw||null,n=i&&i.onChange||null,s=i&&i.onReady||null;t=t||[];var o,r=[],l=(o=e?$("#"+e):$("body")).find(".table-button-add");if(l.data("raw",t.length),a&&l.data("maxRaw",a),l.data("inited")||(l.data("inited",!0),l.on("click",function(){if(!l.data("maxRaw")||l.data("raw")<l.data("maxRaw")){for(var t=o.find(".table-values"),i=t.data("values"),a=t.data("names"),r=t.data("maxRaw"),d={},c=0;c<a.length;c++)a[c]&&(d[a[c].name]=a[c].def);i.push(d),n&&n(),setTimeout(function(){values2table(e,i,n,s,r)},100),l.data("raw",l.data("raw")+1)}else confirmMessage(_("maxTableRaw")+": "+l.data("maxRaw"),_("maxTableRawInfo"),"alert",["Ok"])})),t){var d=[],c=o.find(".table-values");if(c.data("values",t),!c.data("rooms")&&c.find('th[data-name="room"]').length)return void getEnums("rooms",function(i,o){var r={},l=_("nonerooms");r[_("none")]="nonerooms"!==l?l:"";var d=[];for(var u in o)o.hasOwnProperty(u)&&d.push(u);d.sort(function(e,t){return(e=e.toLowerCase())>(t=t.toLowerCase())?1:e<t?-1:0});for(var p=0;p<d.length;p++)r[d[p]]=o[d[p]].common.name||p;c.data("rooms",r),values2table(e,t,n,s,a)});if(!c.data("functions")&&c.find('th[data-name="func"]').length)return void getEnums("functions",function(i,o){var r={},l=_("nonefunctions");r[_("none")]="nonefunctions"!==l?l:"";var d=[];for(var u in o)o.hasOwnProperty(u)&&d.push(u);d.sort(function(e,t){return(e=e.toLowerCase())>(t=t.toLowerCase())?1:e<t?-1:0});for(var p=0;p<d.length;p++)r[d[p]]=o[d[p]].common.name||p;c.data("functions",r),values2table(e,t,n Line: 158 -  ass="values-input" style="'+(r[h].style?r[h].style:"width: 100%")+'" type="'+r[h].type+'" data-index="'+p+'" data-name="'+r[h].name+'"/>';if(d[h]){f="text-align: center; "+(d[h].style||"")+(d[h].tdstyle||"");for(var v=0;v<d[h].btn.length;v++)!p&&"up"===d[h].btn[v]||p===t.length-1&&"down"===d[h].btn[v]?g+='<a class="btn-floating disabled" data-command="'+d[h].btn[v]+'" class="values-buttons"><i class="material-icons"></i></a>':g+='<a class="btn-floating" data-index="'+p+'" data-command="'+d[h].btn[v]+'" class="values-buttons"><i class="material-icons"></i></a>';d[h].class&&(u+=' class="'+d[h].class+'" ')}f.length||b.length?u+=' style="'+f+b+'">'+g+"</td>":u+=">"+g+"</td>"}u+="</tr>"}var w=c.find(".table-lines");w.length||(c.append('<tbody class="table-lines"></tbody>'),w=c.find(".table-lines")),w.html(u),w.find(".values-input").each(function(){var e=$(this),i=e.attr("type"),a=e.data("name"),n=e.data("index");e.data("old-value",t[n][a]),"checkbox"===i?e.prop("checked",t[n][a]):e.val(t[n][a])}),w.find("a[data-command]").each(function(){var i=$(this).data("command");"delete"===i?$(this).on("click",function(){var i=$(this).data("index"),o=t[i];t.splice(i,1),n&&n(),setTimeout(function(){"function"==typeof tableEvents&&tableEvents(i,o,"delete"),values2table(e,t,n,s,a)},100),l.data("maxRaw")&&l.data("raw",l.data("raw")-1)}).addClass("red").find(".material-icons").html("delete"):"up"===i?$(this).on("click",function(){var e=$(this).data("index"),i=t[e];t.splice(e,1),t.splice(e-1,0,i),n&&n(),setTimeout(function(){values2table(e,t,n,s,a)},100)}).find("i").html("arrow_upward"):"down"===i?$(this).on("click",function(){var e=$(this).data("index"),i=t[e];t.splice(e,1),t.splice(e+1,0,i),n&&n(),setTimeout(function(){values2table(e,t,n,s,a)},100)}).find("i").html("arrow_downward"):"pair"===i?$(this).on("click",function(){if("function"==typeof tableEvents){var e=$(this).data("index"),i=t[e];tableEvents(e,i,"pair")}}).attr("title",_("pair")).find("i").html("insert_link"):"unpair"===i&&$(this).on("click",function(){if("function"==typeof tableEvents){var e=$(this).data("index"),i=t[e];tableEvents(e Line: 160 -  s).attr("title",n)}),a.find(".translateP").each(function(e){var a=$(this).attr("data-lang-placeholder");a||(a=$(this).attr("placeholder"),$(this).attr("data-lang-placeholder",a));var n=translateWord(a,t,i);n&&$(this).attr("placeholder",n)})}function translateName(e){return e&&"object"==typeof e?e[systemLang]||e.en:e}var _=function(e,t,i,a){var n=(e=translateWord(e)).indexOf("%s");return-1===n?e:-1===(n=(e=e.replace("%s",t)).indexOf("%s"))?e:(-1!==(n=(e=e.replace("%s",i)).indexOf("%s"))&&(e=e.replace("%s",a)),e)};!function(e){if(!e.fn.treeTable){var t={init:function(t){t.imgPath=t.imgPath||"lib/css/fancytree/";for(var i=0;i<this.length;i++)if(r.call(this[i],t),"undefined"!=typeof Storage){var a=window.localStorage.getItem(t.name+"-treetable");if(a){a=JSON.parse(a);for(var n=e(this[i]).find(".tree-table-main"),s=0;s<a.length;s++)try{n.treetable("expandNode",a[s])}catch(s){}}}return this},destroy:function(){for(var t=0;t<this.length;t++){var i=e(this[t]).find(".tree-table-main");i.length&&i.data("options")&&(i.data("options",null),e(this[t]).html(""))}},expand:function(t){for(var i=0;i<this.length;i++){var a=e(this[i]).find(".tree-table-main");try{t?a.treetable("expandNode",t):a.treetable("expandAll",t)}catch(e){}}},collapse:function(t){for(var i=0;i<this.length;i++){var a=e(this[i]).find(".tree-table-main");try{t?a.treetable("collapseNode",t):a.treetable("collapseAll")}catch(e){}}},show:function(t,i,a){"function"==typeof i&&(a=i,i=void 0),"function"==typeof t&&(a=t,t=void 0);for(var n=0;n<this.length;n++){var s=e(this[n]).find(".tree-table-main");s.find(".selected").removeClass("selected");try{s.treetable("reveal",t)}catch(e){}var o=s.treetable("node",t);o&&o.row.addClass("selected")}return a&&a(),this},reinit:function(){for(var e=0;e<this.length;e++)l.call(this[e]);return this},object:function(t,i){for(var a=0;a<this.length;a++){var n=e(this[a]).find(".tree-table-main");n.updateTimer&&clearTimeout(n.updateTimer);var s=n.data("options");if(!s||!s.root||t.match("^"+s.root.replace(/\./g,"\\.")+"\\."))!function(e,t){n.updateTimer=setTimeout(function(){l.call(e)},300)}(this[a])}ret Line: 162 -  asClass("treetable-list-folder"))i=t;else{var n=t.split("."),s=n.pop();n.join(".")!==i&&a.push({oldId:t,newId:i+"."+s})}}),function e(t,i,a){if(i&&i.length){var n=i.shift();t.moveId&&t.moveId(n.oldId,n.newId,function(n){setTimeout(function(){e(t,i,a)},50)})}else a&&a()}(t,a,function(){r.call(b,t)})}),g.find(".treetable-list-btn-cancel").button({icons:{primary:"ui-icon-cancel"},text:!1}).css({width:24,height:24}).on("click",function(){r.call(b,t)})}function s(e,t,i){var a="",n="",s=e&&e.common;if(s)if(s.icon){if(s.icon.match(/^data:image\//))a=s.icon;else{if(-1===s.icon.indexOf("."))return'<i class="material-icons '+(i||"treetable-icon")+'">'+s.icon+"</i>";var o;"instance"===e.type?a="/adapter/"+e.common.name+"/"+e.common.icon:e._id.match(/^system\.adapter\./)?(o=e._id.split(".",3),"/"===e.common.icon[0]?o[2]+=e.common.icon:o[2]+="/"+e.common.icon,a="/adapter/"+o[2]):(o=e._id.split(".",2),"/"===e.common.icon[0]?o[0]+=e.common.icon:o[0]+="/"+e.common.icon,a="/adapter/"+o[0])}n=e.type}else t=t||"lib/css/fancytree/","device"===e.type?(a=t+"device.png",n="device"):"channel"===e.type?(a=t+"channel.png",n="channel"):"state"===e.type&&(a=t+"state.png",n="state");return a?'<img class="'+(i||"treetable-icon")+'" src="'+a+'" alt="'+n+'" />':""}function o(e,t){for(var i={},a=0;a<t.length;a++)if(e[t[a]]&&e[t[a]].common&&e[t[a]].common.members)for(var n=e[t[a]].common.members,s=0;s<n.length;s++){i[n[s]]=i[n[s]]||[];var o=e[t[a]].common.name;o&&"object"==typeof o&&(o=o[systemLang]||"en"),i[n[s]].push({id:t[a],name:o||id.replace("system.group.","")})}return i}function r(t){var r="",l=window.M&&window.M.toast?"a":"button";if(t.panelButtons){r+='<div class="row tree-table-buttons m">';for(var d=0;d<t.panelButtons.length;d++)r+="<"+l+' class="btn-floating waves-effect waves-light blue btn-custom-'+d+'" title="'+(t.panelButtons[d].title||"")+'" '+(t.panelButtons[d].id?'id="'+t.panelButtons[d].id+'"':"")+">",window.M&&window.M.toast&&(r+='<i class="material-icons">'+(t.panelButtons[d].icon||"")+"</i>"),r+="</"+l+">";t.moveId&&(r+="<"+l+' class="btn-floating waves-effect waves-light blue treetable Line: 166 -  ns.length;te++){var ie=K.find(".btn-custom-"+te);ie.on("click",t.panelButtons[te].click).attr("title",t.panelButtons[te].title||""),window.M&&window.M.toast||ie.button(t.panelButtons[te]).css({width:24,height:24})}J.find(".filter_name").on("change",function(){var t=e(this).data("timer");t&&clearTimeout(t);var i=e(this);i.data("timer",setTimeout(function(){i.data("timer",null),W.find(".filter_name").val()?i.addClass("input-not-empty"):i.removeClass("input-not-empty"),function(t,i){if(i){i=i.toLowerCase(),t.data("options"),t.find("tr").each(function(){e(this).hasClass("tree-table-main-header")||(e(this).data("tt-branch")||-1!==e(this).find("td:first-child").text().indexOf(i)?e(this).removeClass("filtered-out"):e(this).addClass("filtered-out"))});var a="",n=!1;t.find("tr").each(function(){e(this).data("tt-branch")?(a&&(n?t.find('tr[data-tt-id="'+a+'"]').removeClass("filtered-out"):t.find('tr[data-tt-id="'+a+'"]').addClass("filtered-out")),n=!1,a=e(this).data("tt-id")):a&&(e(this).hasClass("filtered-out")||(n=!0))}),a&&(n?t.find('tr[data-tt-id="'+a+'"]').removeClass("filtered-out"):t.find('tr[data-tt-id="'+a+'"]').addClass("filtered-out"))}else t.find("tr").removeClass("filtered-out")}(e(W[1]),W.find(".filter_name").val())}))}).on("keyup",function(){e(this).trigger("change")}),J.find(".filter-clear").button({icons:{primary:"ui-icon-close"},text:!1}).on("click",function(){var t=e(this).data("id");W.find("."+t).val("").trigger("change")});var ae=this;K.find(".treetable-sort").button({icons:{primary:"ui-icon-arrowthick-2-n-s"},text:!1}).css({width:24,height:24}).on("click",function(){n.call(ae,t)}),t.onEdit?(J.find(".treetable-instance").on("change",function(){t.onEdit(e(this).data("id"),"instance",e(this).val())}),J.find(".treetable-input").on("change",function(i){var a;i.stopPropagation(),a="checkbox"===e(this).attr("type")?e(this).prop("checked"):e(this).val();var n=e(this).data("id");t.onEdit&&!1===t.onEdit(n,e(this).data("attr"),a)&&e(this).prop("checked",!0)}).on("keyup",function(){e(this).trigger("change")})):J.find(".treetable-instance").prop("disabled",!0),"function"==typeo</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/app.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 21 -  ommon&&(null===r?r=e.objects[t[u]].common.type:""!==r&&r!==e.objects[t[u]].common.type&&(r=""),null===l?l=e.objects[t[u]].common.role:""!==l&&l!==e.objects[t[u]].common.role&&(l="")),g)for(var f in g)g.hasOwnProperty(f)&&(void 0===o[c][f]?o[c][f]=g[f]:o[c][f]!==g[f]&&(o[c][f]=m));else{var b=c.split(".")[0],y=null;for(var v in y=defaults[b]?"function"==typeof defaults[b]?defaults[b](h.main.objects[t[u]],h.main.objects["system.adapter."+c]):defaults[b]:this.defaults[b])y.hasOwnProperty(v)&&(void 0===o[c][v]?o[c][v]=y[v]:o[c][v]!==y[v]&&(o[c][v]=m))}}}for(var w=0;w<i.length;w++){var z=i[w].split("."),j=z[2],N=z[3],L=j+"."+N,T=this.main.objects["system.adapter."+j].common.icon;T="/adapter/"+j+"/"+T;var C='<li data-adapter="'+L+'" data-adapterOnly="'+j+'" class="custom-config '+(-1===s.indexOf(L)?"active":"")+'">   <div class="collapsible-header">       <img src="'+T+'" alt="picture"/>'+_("Settings for %s",L)+'       <span class="activated" data-adapter="'+L+'" style="opacity: '+(!o[L]||!0!==o[L].enabled&&o[L].enabled!==m?"0":"1")+'">'+_("active")+'</span>   </div>   <div class="customs-settings collapsible-body">'+$('script[data-template-name="'+j+'"]').html()+"   </div></li>",k=$(C);this.defaults[j]={},k.find("input, select").each(function(){var e=$(this);e.attr("data-instance",j+"."+N);var t=e.attr("data-field"),i=e.attr("data-default");"true"===i&&(i=!0),"false"===i&&(i=!1),void 0!==i&&i.toString().replace(/\+/,"")===parseFloat(i).toString()&&(i=parseFloat(i)),h.defaults[j][t]=i,"enabled"===t&&e.on("click",function(e){e.stopPropagation(),$(this).prop("checked")})}),a.append(k),customPostInits.hasOwnProperty(j)&&"function"==typeof customPostInits[j]&&customPostInits[j](k,o[j+"."+N],h.main.objects["system.adapter."+j+"."+N],r,l,!(t.length>1)&&e.objects[t[u]])}a.find("input, select").each(function(){var e,t=$(this),i=t.data("instance"),s=i.split(".")[0],r=t.data("field");void 0!==o[i][r]?"checkbox"===t.attr("type")?o[i][r]===m?t[0].indeterminate=!0:t.prop("checked",o[i][r]):o[i][r]===m?("number"===t.attr("type")&&t.attr("type","text"),"SELECT"===t.prop("tagName").toUpperCase()?(t. Line: 149 -  aker<br><br>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.<br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',de:'MIT-Lizenz (MIT)<br><br>Copyright © 2014-2018 bluefox, 2014 hobbyquaker<br><br>Hiermit wird unentgeltlich jeder Person, die eine Kopie der Software und der zugehörigen Dokumentationen (die "Software") erhält, die Erlaubnis erteilt, sie uneingeschränkt zu benutzen, inklusive und ohne Ausnahme dem Recht, sie zu verwenden, kopieren, ändern, fusionieren, verlegen, verbreiten, unterlizenzieren und/oder zu verkaufen, und Personen, die diese Software erhalten, diese Rechte zu geben, unter den folgenden Bedingungen:<br>Der obige Urheberrechtsvermerk und dieser Erlaubnisvermerk sind in allen Kopien oder Teilkopien der Software beizulegen.<br>DIE SOFTWARE WIRD OHNE JEDE AUSDRÜCKLICHE ODER IMPLIZIERTE GARANTIE BEREITGESTELLT, EINSCHLIESSLICH DER GARANTIE ZUR BENUTZUNG FÜR DEN VORGESEHENEN ODER EINEM BESTIMMTEN ZWECK SOWIE JEGLICHER RECHTSVERLETZUNG, JEDOCH NICHT DARAUF BESCHRÄNKT. IN KEINEM FALL SIND DIE AUTOREN ODER COPYRIGHTINHABER FÜR JEGLICHEN SCHADEN ODER SONSTIGE ANSPRÜCHE HAFTBAR ZU MACHEN, OB INFOLGE DER ERFÜLLUNG EINES VERTRAGES, EINES DEL Line: 152 -   to the following conditions:<br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.<br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',pt:'Licença MIT<br><br>Copyright © 2014-2018 bluefox, 2014 hobbyquaker<br><br>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.<br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',nl:'MIT-licentie<br><br>Copyright © 2014-2018 bluefox, 2014 hobbyquaker<br><br>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicens Line: 153 -   copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.<br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',es:'Licencia MIT<br><br>Copyright © 2014-2018 bluefox, 2014 hobbyquaker<br><br>Se concede permiso, de forma gratuita, a cualquier persona que obtenga una copia de este software y de los archivos de documentación asociados (el "Software"), para utilizar el Software sin restricción, incluyendo sin limitación los derechos a usar, copiar, modificar, fusionar, publicar, distribuir, sublicenciar, y/o vender copias del Software, y a permitir a las personas a las que se les proporcione el Software a hacer lo mismo, sujeto a las siguientes condiciones:<br>El aviso de copyright anterior y este aviso de permiso se incluirán en todas las copias o partes sustanciales del Software.<br>EL SOFTWARE SE PROPORCIONA "TAL CUAL", SIN GARANTÍA DE NINGÚN TIPO, EXPRESA O IMPLÍCITA, INCLUYENDO PERO NO LIMITADO A GARANTÍAS DE COMERCIALIZACIÓN, IDONEIDAD PARA UN PROPÓSITO PARTICULAR Y NO INFRACCIÓN. EN NINGÚN CASO LOS AUTORES O TITULARES DEL COPYRIGHT SERÁN RESPONSABLES DE NINGUNA RECLAMACIÓN, DAÑOS U OTRAS RESPONSABILIDADES, YA SEA EN UNA ACCIÓN DE CONTRATO, AGRAVIO O CUALQUIER OTRO MOTIVO, QUE SURJA DE O EN CONEXIÓN CON EL SOFTWARE O EL USO U OTRO TIPO DE ACCIONES EN EL SOFTWARE.',pl:'Licencja MIT<br><br>Copyright © 2014-2018 bluefox, 2014 hobbyquaker<br><br>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated doc Line: 154 -  es (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.<br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',"zh-cn":'MIT许可证<br><br>Copyright © 2014-2018 bluefox, 2014 hobbyquaker<br><br>特此向任何得到本软件副本或相关文档的人授权：被授权人有权使用、复制、修改、 合并、出版、发布、散布、再授权和/或贩售软件及软件的副本，及授予被供应人 同等权利，只需服从以下义务：<br>在软件和软件的所有副本中都必须包含以上版权声明和本许可声明。<br>该软件是"按原样"提供的，没有任何形式的明示或暗示，包括但不限于为特定目的和 不侵权的适销性和适用性的保证担保。在任何情况下，作者或版权持有人，都无权要求 任何索赔，或有关损害赔偿的其他责任。无论在本软件的使用上或其他买卖交易中， 是否涉及合同，侵权或其他行为。<br>'},addAll2FilterCombobox=!1;function IobListHeader(e,t){if(!(this instanceof IobListHeader))return new IobListHeader(e,t);var i,a,n;void 0===t&&(t={}),void 0===t.colWidthOffset&&(t.colWidthOffset=0),"TABLE"===(n="object"==typeof e?$(e):$("#"+e))[0].tagName&&(n=n.find("tr:first")),e=n[0];var s,o=this;o.selectIdOffset=[],n.html(""),this.setList=function(e){var t;"string"==ty</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/adapter-settings.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Logic fail</Title>
 <Description>Possible logic bug that could lead to security bugs. Assigning a static string to a variable in an if condition is not normal and is likely a mistake.</Description>
 <Level> Low</Level>
 <Reference> https://en.wikipedia.org/wiki/Logic_error</Reference>
 <Match> if\s?\(\s?\$.*\s?(?<!\!)=\s?('|").*('|")\s?\)</Match>
 <Result> Line: 525 -              if ($this.attr('type') === 'checkbox') {

 Line: 529 -                  if ($label.prop('tagName') === 'LABEL') {

 Line: 2055 -              if ($(this).attr('type') === 'checkbox') {

 Line: 2121 -                      if ($input.attr('type') === 'checkbox') {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/adapter-settings.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 1660 -                  setTimeout(function () {

 Line: 1908 -                          setTimeout(function () {

 Line: 1939 -                      setTimeout(function () {

 Line: 1967 -                      setTimeout(function () {

 Line: 1987 -                      setTimeout(function () {

 Line: 2038 -                          setTimeout(function () {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/listHeader.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Logic fail</Title>
 <Description>Possible logic bug that could lead to security bugs. Assigning a static string to a variable in an if condition is not normal and is likely a mistake.</Description>
 <Level> Low</Level>
 <Reference> https://en.wikipedia.org/wiki/Logic_error</Reference>
 <Match> if\s?\(\s?\$.*\s?(?<!\!)=\s?('|").*('|")\s?\)</Match>
 <Result> Line: 12 -      if ($header[0].tagName === 'TABLE') $header = $header.find('tr:first');

 Line: 31 -          if ($tds[0].tagName !== 'TD' && $tds[0].tagName !== 'TH') {

 Line: 164 -              if ($id.val() !== '') {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/listHeader.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 70 -          resizeTimer = setTimeout(that.syncHeader.bind(that), 100);

 Line: 179 -              eventFilterTimeout = setTimeout(that.doFilter, what !== 'combobox' ? 400 : 0);

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/license.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible SQL injection</Title>
 <Description> notification possible SQL injection</Description>
 <Level> High</Level>
 <Reference> https://www.owasp.org/index.php/Testing_for_Stack_Overflow </Reference>
 <Match> query|YQL|WHERE|FROM|SELECT|UPDATE|DELETE|INSERT|UNION|getResults</Match>
 <Result> Line: 7 -          'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',

 Line: 39 -          'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',

 Line: 47 -          'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',

 Line: 55 -          'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',

 Line: 71 -          'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.<br>',

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/tableEditor.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Logic fail</Title>
 <Description>Possible logic bug that could lead to security bugs. Assigning a static string to a variable in an if condition is not normal and is likely a mistake.</Description>
 <Level> Low</Level>
 <Reference> https://en.wikipedia.org/wiki/Logic_error</Reference>
 <Match> if\s?\(\s?\$.*\s?(?<!\!)=\s?('|").*('|")\s?\)</Match>
 <Result> Line: 371 -              if ($(this).attr('type') === 'checkbox') {

 Line: 420 -                  if ($input.attr('type') === 'checkbox') {

</Result>
</report_mosca>

<report_mosca>
 <Path>/src/www/js/tableEditor.js</Path>
 <Module>/app/Mosca/eggs/javascript_common_fail.egg</Module>
 <Title> Possible code injection</Title>
 <Description> Command injection is an attack in which the goal is execution of arbitrary commands on the host operating system via a vulnerable application.</Description>
 <Level> High</Level>
 <Reference> https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=2130132 </Reference>
 <Match> eval\s?\(|setTimeout|setInterval</Match>
 <Result> Line: 80 -                  setTimeout(function () {

 Line: 312 -                      setTimeout(function () {

 Line: 334 -                          setTimeout(function () {

 Line: 345 -                          setTimeout(function () {

</Result>
</report_mosca>

