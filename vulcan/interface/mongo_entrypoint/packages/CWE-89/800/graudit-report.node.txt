/src/browser/platform/PlatformTools.js-76-        if (this.type === "browser")
/src/browser/platform/PlatformTools.js:77:            throw new Error("This option/function is not supported in the browser environment. Failed operation: fs.writeFile(\"" + path + "\").");
/src/browser/platform/PlatformTools.js-78-        return Promise.reject(null);
##############################################
/src/browser/platform/PlatformTools.js.map:1:{"version":3,"sources":["../browser/src/platform/PlatformTools.ts"],"names":[],"mappings":"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","file":"PlatformTools.js","sourcesContent":["/**\n * Browser's implementation of the platform-specific tools.\n *\n * This file gonna replace PlatformTools for browser environment.\n * For node.js environment this class is not getting packaged.\n * Don't use methods of this class in the code, use PlatformTools methods instead.\n */\nexport class PlatformTools {\n\n    /**\n     * Type of the currently running platform.\n     */\n    static type: \"browser\"|\"node\" = \"browser\";\n\n    /**\n     * Gets global variable where global stuff can be stored.\n     */\n    static getGlobalVariable(): any {\n        return window;\n    }\n\n    /**\n     * Loads (\"require\"-s) given file or package.\n     * This operation only supports on node platform\n     */\n    static load(name: string): any {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: require(\"${name}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Normalizes given path. Does \"path.normalize\".\n     */\n    static pathNormalize(pathStr: string): string {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize(\"${pathStr}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Gets file extension. Does \"path.extname\".\n     */\n    static pathExtname(pathStr: string): string {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname(\"${pathStr}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Resolved given path. Does \"path.resolve\".\n     */\n    static pathResolve(pathStr: string): string {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve(\"${pathStr}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Synchronously checks if file exist. Does \"fs.existsSync\".\n     */\n    static fileExist(pathStr: string): boolean {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync(\"${pathStr}\").`);\n\n        return false;\n    }\n\n    /**\n     * Gets environment variable.\n     */\n    static getEnvVariable(name: string): any {\n        // if (this.type === \"browser\")\n        //     throw new Error(`This option/function is not supported in the browser environment. Failed operation: process.env[\"${name}\"].`);\n        return undefined;\n    }\n\n    static readFileSync(filename: string): any {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync(\"${filename}\").`);\n        return null;\n    }\n    \n    static appendFileSync(filename: string, data: any) {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync(\"${filename}\").`);\n    }\n\n    static writeFile(path: string, data: any): Promise<void> {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile(\"${path}\").`);\n        return Promise.reject(null);\n    }\n\n    /**\n     * Highlights sql string to be print in the console.\n     */\n    static highlightSql(sql: string) {\n        return sql;\n    }\n\n    /**\n     * Highlights json string to be print in the console.\n     */\n    static highlightJson(json: string) {\n        return json;\n    }\n\n    /**\n     * Logging functions needed by AdvancedConsoleLogger (but here without chalk)\n     */\n    static logInfo(prefix: string, info: any) {\n        console.info(prefix + \" \", info);\n    }\n\n    static logError(prefix: string, error: any) {\n        console.error(prefix + \" \", error);\n    }\n    \n    static logWarn(prefix: string, warning: any) {\n        console.warn(prefix + \" \", warning);\n    }\n    \n    static log(message: string) {\n        console.log(message);\n    }\n\n    static warn(message: string) {\n        return message;\n    }\n}\n\n/**\n * These classes are needed for stream operations or\n * in the mongodb driver. both aren't supported in the browser\n */\nexport class EventEmitter {}\n\nexport class Readable {}\n\nexport class Writable {}\n\nexport interface ReadStream {}"],"sourceRoot":".."}
##############################################
/src/browser/connection/options-reader/ConnectionOptionsEnvReader.js-27-            schema: PlatformTools.getEnvVariable("TYPEORM_SCHEMA"),
/src/browser/connection/options-reader/ConnectionOptionsEnvReader.js:28:            extra: PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA") ? JSON.parse(PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA")) : undefined,
/src/browser/connection/options-reader/ConnectionOptionsEnvReader.js-29-            synchronize: OrmUtils.toBoolean(PlatformTools.getEnvVariable("TYPEORM_SYNCHRONIZE")),
##############################################
/src/browser/connection/options-reader/ConnectionOptionsEnvReader.js.map:1:{"version":3,"sources":["../browser/src/connection/options-reader/ConnectionOptionsEnvReader.ts"],"names":[],"mappings":"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","file":"ConnectionOptionsEnvReader.js","sourcesContent":["import {ConnectionOptions} from \"../ConnectionOptions\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\n\n/**\n * Reads connection options from environment variables.\n * Environment variables can have only a single connection.\n * Its strongly required to define TYPEORM_CONNECTION env variable.\n */\nexport class ConnectionOptionsEnvReader {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Reads connection options from environment variables.\n     */\n    read(): ConnectionOptions {\n        return {\n            type: PlatformTools.getEnvVariable(\"TYPEORM_CONNECTION\"),\n            url: PlatformTools.getEnvVariable(\"TYPEORM_URL\"),\n            host: PlatformTools.getEnvVariable(\"TYPEORM_HOST\"),\n            port: PlatformTools.getEnvVariable(\"TYPEORM_PORT\"),\n            username: PlatformTools.getEnvVariable(\"TYPEORM_USERNAME\"),\n            password: PlatformTools.getEnvVariable(\"TYPEORM_PASSWORD\"),\n            database: PlatformTools.getEnvVariable(\"TYPEORM_DATABASE\"),\n            sid: PlatformTools.getEnvVariable(\"TYPEORM_SID\"),\n            schema: PlatformTools.getEnvVariable(\"TYPEORM_SCHEMA\"),\n            extra: PlatformTools.getEnvVariable(\"TYPEORM_DRIVER_EXTRA\") ? JSON.parse(PlatformTools.getEnvVariable(\"TYPEORM_DRIVER_EXTRA\")) : undefined,\n            synchronize: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_SYNCHRONIZE\")),\n            dropSchema: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_DROP_SCHEMA\")),\n            migrationsRun: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS_RUN\")),\n            entities: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_ENTITIES\")),\n            migrations: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS\")),\n            subscribers: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_SUBSCRIBERS\")),\n            entitySchemas: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_ENTITY_SCHEMAS\")),\n            logging: this.transformLogging(PlatformTools.getEnvVariable(\"TYPEORM_LOGGING\")),\n            logger: PlatformTools.getEnvVariable(\"TYPEORM_LOGGER\"),\n            entityPrefix: PlatformTools.getEnvVariable(\"TYPEORM_ENTITY_PREFIX\"),\n            maxQueryExecutionTime: PlatformTools.getEnvVariable(\"TYPEORM_MAX_QUERY_EXECUTION_TIME\"),\n            cli: {\n                entitiesDir: PlatformTools.getEnvVariable(\"TYPEORM_ENTITIES_DIR\"),\n                migrationsDir: PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS_DIR\"),\n                subscribersDir: PlatformTools.getEnvVariable(\"TYPEORM_SUBSCRIBERS_DIR\"),\n            }\n        };\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Transforms logging string into real logging value connection requires.\n     */\n    protected transformLogging(logging: string): any {\n        if (logging === \"true\" || logging === \"TRUE\" || logging === \"1\")\n            return true;\n        if (logging === \"all\")\n            return \"all\";\n\n        return this.stringToArray(logging);\n    }\n\n    /**\n     * Converts a string which contains multiple elements split by comma into a string array of strings.\n     */\n    protected stringToArray(variable?: string) {\n        if (!variable)\n            return [];\n        return variable.split(\",\").map(str => str.trim());\n    }\n\n}\n"],"sourceRoot":"../.."}
##############################################
/src/browser/entity-manager/MongoEntityManager.js-491-        var metadata = this.connection.getMetadata(entityClassOrName);
/src/browser/entity-manager/MongoEntityManager.js:492:        return this.queryRunner.rename(metadata.tableName, newName, options);
/src/browser/entity-manager/MongoEntityManager.js-493-    };
##############################################
/src/browser/entity-manager/MongoEntityManager.js.map:1:{"version":3,"sources":["../browser/src/entity-manager/MongoEntityManager.ts"],"names":[],"mappings":"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","file":"MongoEntityManager.js","sourcesContent":["import {Connection} from \"../connection/Connection\";\nimport {EntityManager} from \"./EntityManager\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    CursorResult,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCallback,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    MongoError,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"../driver/mongodb/typings\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {MongoQueryRunner} from \"../driver/mongodb/MongoQueryRunner\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {DocumentToEntityTransformer} from \"../query-builder/transformer/DocumentToEntityTransformer\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {FindOptionsUtils} from \"../find-options/FindOptionsUtils\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\n\n/**\n * Entity manager supposed to work with any entity, automatically find its repository and call its methods,\n * whatever entity type are you passing.\n *\n * This implementation is used for MongoDB driver which has some specifics in its EntityManager.\n */\nexport class MongoEntityManager extends EntityManager {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n    }\n\n    // -------------------------------------------------------------------------\n    // Overridden Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets query runner used to execute queries.\n     */\n    get queryRunner(): MongoQueryRunner {\n        return (this.connection.driver as MongoDriver).queryRunner!;\n    }\n\n    // -------------------------------------------------------------------------\n    // Overridden Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    async find<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        return cursor.toArray();\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    async findAndCount<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<[ Entity[], number ]> {\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        const [results, count] = await Promise.all<any>([\n            cursor.toArray(),\n            this.count(entityClassOrName, query),\n        ]);\n        return [results, parseInt(count)];\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    async findByIds<Entity>(entityClassOrName: ObjectType<Entity>|string, ids: any[], optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions) || {};\n        const objectIdInstance = PlatformTools.load(\"mongodb\").ObjectID;\n        query[\"_id\"] = { $in: ids.map(id => {\n            if (id instanceof objectIdInstance)\n                return id;\n\n            return id[metadata.objectIdColumn!.propertyName];\n        }) };\n\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        return await cursor.toArray();\n    }\n\n    /**\n     * Finds first entity that matches given conditions and/or find options.\n     */\n    async findOne<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const query = this.convertFindOneOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions)) {\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n\n        // const result = await cursor.limit(1).next();\n        const result = await cursor.limit(1).toArray();\n        return result.length > 0 ? result[0] : undefined;\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    async findOneById<Entity>(entityClassOrName: ObjectType<Entity>|string, id: any, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const query = this.convertFindOneOptionsOrConditionsToMongodbQuery(optionsOrConditions) || {};\n        const objectIdInstance = PlatformTools.load(\"mongodb\").ObjectID;\n        query[\"_id\"] = (id instanceof objectIdInstance)\n            ? id\n            : new objectIdInstance(id);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions)) {\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n\n        // const result = await cursor.limit(1).next();\n        const result = await cursor.limit(1).toArray();\n        return result.length > 0 ? result[0] : undefined;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    createCursor<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral): Cursor<Entity> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.cursor(metadata.tableName, query);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     * This returns modified version of cursor that transforms each result into Entity model.\n     */\n    createEntityCursor<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral): Cursor<Entity> {\n\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        const cursor = this.createCursor(entityClassOrName, query);\n        const ParentCursor = PlatformTools.load(\"mongodb\").Cursor;\n        cursor.toArray = function (callback?: MongoCallback<Entity[]>) {\n            if (callback) {\n                ParentCursor.prototype.toArray.call(this, (error: MongoError, results: Entity[]): void => {\n                    if (error) {\n                        callback(error, results);\n                        return;\n                    }\n\n                    const transformer = new DocumentToEntityTransformer();\n                    return callback(error, transformer.transformAll(results, metadata));\n                });\n            } else {\n                return ParentCursor.prototype.toArray.call(this).then((results: Entity[]) => {\n                    const transformer = new DocumentToEntityTransformer();\n                    return transformer.transformAll(results, metadata);\n                });\n            }\n        };\n        cursor.next = function (callback?: MongoCallback<CursorResult>) {\n            if (callback) {\n                ParentCursor.prototype.next.call(this, (error: MongoError, result: CursorResult): void => {\n                    if (error || !result) {\n                        callback(error, result);\n                        return;\n                    }\n\n                    const transformer = new DocumentToEntityTransformer();\n                    return callback(error, transformer.transform(result, metadata));\n                });\n            } else {\n                return ParentCursor.prototype.next.call(this).then((result: Entity) => {\n                    if (!result) return result;\n                    const transformer = new DocumentToEntityTransformer();\n                    return transformer.transform(result, metadata);\n                });\n            }\n        };\n        return cursor;\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate<Entity>(entityClassOrName: ObjectType<Entity>|string, pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<Entity> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.aggregate(metadata.tableName, pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    bulkWrite<Entity>(entityClassOrName: ObjectType<Entity>|string, operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.bulkWrite(metadata.tableName, operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    count<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.count(metadata.tableName, query, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    createCollectionIndex<Entity>(entityClassOrName: ObjectType<Entity>|string, fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.createCollectionIndex(metadata.tableName, fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error.\n     * Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    createCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string, indexSpecs: ObjectLiteral[]): Promise<void> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.createCollectionIndexes(metadata.tableName, indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    deleteMany<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.deleteMany(metadata.tableName, query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    deleteOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.deleteOne(metadata.tableName, query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    distinct<Entity>(entityClassOrName: ObjectType<Entity>|string, key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.distinct(metadata.tableName, key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    dropCollectionIndex<Entity>(entityClassOrName: ObjectType<Entity>|string, indexName: string, options?: CollectionOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.dropCollectionIndex(metadata.tableName, indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    dropCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.dropCollectionIndexes(metadata.tableName);\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndDelete<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndDelete(metadata.tableName, query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndReplace<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndReplace(metadata.tableName, query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndUpdate<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndUpdate(metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    geoHaystackSearch<Entity>(entityClassOrName: ObjectType<Entity>|string, x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.geoHaystackSearch(metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    geoNear<Entity>(entityClassOrName: ObjectType<Entity>|string, x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.geoNear(metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    group<Entity>(entityClassOrName: ObjectType<Entity>|string, keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.group(metadata.tableName, keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexes(metadata.tableName);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexExists<Entity>(entityClassOrName: ObjectType<Entity>|string, indexes: string|string[]): Promise<boolean> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexExists(metadata.tableName, indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    collectionIndexInformation<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { full: boolean }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexInformation(metadata.tableName, options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: CollectionOptions): OrderedBulkOperation {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.initializeOrderedBulkOp(metadata.tableName, options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: CollectionOptions): UnorderedBulkOperation {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.initializeUnorderedBulkOp(metadata.tableName, options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    insertMany<Entity>(entityClassOrName: ObjectType<Entity>|string, docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.insertMany(metadata.tableName, docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    insertOne<Entity>(entityClassOrName: ObjectType<Entity>|string, doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.insertOne(metadata.tableName, doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    isCapped<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.isCapped(metadata.tableName);\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.listCollectionIndexes(metadata.tableName, options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    mapReduce<Entity>(entityClassOrName: ObjectType<Entity>|string, map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.mapReduce(metadata.tableName, map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    parallelCollectionScan<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: ParallelCollectionScanOptions): Promise<Cursor<Entity>[]> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.parallelCollectionScan(metadata.tableName, options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    reIndex<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.reIndex(metadata.tableName);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    rename<Entity>(entityClassOrName: ObjectType<Entity>|string, newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.rename(metadata.tableName, newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    replaceOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.replaceOne(metadata.tableName, query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    stats<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { scale: number }): Promise<CollStats> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.stats(metadata.tableName, options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    updateMany<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.updateMany(metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    updateOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.updateOne(metadata.tableName, query, update, options);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Converts FindManyOptions to mongodb query.\n     */\n    protected convertFindManyOptionsOrConditionsToMongodbQuery<Entity>(optionsOrConditions: FindManyOptions<Entity>|Partial<Entity>|undefined): ObjectLiteral|undefined {\n        if (!optionsOrConditions)\n            return undefined;\n\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions))\n            // If where condition is passed as a string which contains sql we have to ignore\n            // as mongo is not a sql database\n            return typeof optionsOrConditions.where === \"string\"\n                ? {}\n                : optionsOrConditions.where;\n\n        return optionsOrConditions;\n    }\n\n    /**\n     * Converts FindOneOptions to mongodb query.\n     */\n    protected convertFindOneOptionsOrConditionsToMongodbQuery<Entity>(optionsOrConditions: FindOneOptions<Entity>|Partial<Entity>|undefined): ObjectLiteral|undefined {\n        if (!optionsOrConditions)\n            return undefined;\n\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions))\n            // If where condition is passed as a string which contains sql we have to ignore\n            // as mongo is not a sql database\n            return typeof optionsOrConditions.where === \"string\"\n                ? {}\n                : optionsOrConditions.where;\n\n        return optionsOrConditions;\n    }\n\n    /**\n     * Converts FindOptions into mongodb order by criteria.\n     */\n    protected convertFindOptionsOrderToOrderCriteria(order: ObjectLiteral) {\n        return Object.keys(order).reduce((orderCriteria, key) => {\n            switch (order[key]) {\n                case \"DESC\":\n                    orderCriteria[key] = -1;\n                    break;\n                case \"ASC\":\n                    orderCriteria[key] = 1;\n                    break;\n                default:\n                    orderCriteria[key] = order[key];\n            }\n            return orderCriteria;\n        }, {} as ObjectLiteral);\n    }\n\n}"],"sourceRoot":".."}
##############################################
/src/browser/query-builder/SelectQueryBuilder.js.map:1:{"version":3,"sources":["../browser/src/query-builder/SelectQueryBuilder.ts"],"names":[],"mappings":"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","file":"SelectQueryBuilder.js","sourcesContent":["import {RawSqlResultsToEntityTransformer} from \"./transformer/RawSqlResultsToEntityTransformer\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {PessimisticLockTransactionRequiredError} from \"../error/PessimisticLockTransactionRequiredError\";\nimport {NoVersionOrUpdateDateColumnError} from \"../error/NoVersionOrUpdateDateColumnError\";\nimport {OptimisticLockVersionMismatchError} from \"../error/OptimisticLockVersionMismatchError\";\nimport {OptimisticLockCanNotBeUsedError} from \"../error/OptimisticLockCanNotBeUsedError\";\nimport {JoinAttribute} from \"./JoinAttribute\";\nimport {RelationIdAttribute} from \"./relation-id/RelationIdAttribute\";\nimport {RelationCountAttribute} from \"./relation-count/RelationCountAttribute\";\nimport {RelationIdLoader} from \"./relation-id/RelationIdLoader\";\nimport {RelationIdMetadataToAttributeTransformer} from \"./relation-id/RelationIdMetadataToAttributeTransformer\";\nimport {RelationCountLoader} from \"./relation-count/RelationCountLoader\";\nimport {RelationCountMetadataToAttributeTransformer} from \"./relation-count/RelationCountMetadataToAttributeTransformer\";\nimport {Broadcaster} from \"../subscriber/Broadcaster\";\nimport {QueryBuilder} from \"./QueryBuilder\";\nimport {ReadStream} from \"../platform/PlatformTools\";\nimport {LockNotSupportedOnGivenDriverError} from \"../error/LockNotSupportedOnGivenDriverError\";\nimport {MysqlDriver} from \"../driver/mysql/MysqlDriver\";\nimport {PostgresDriver} from \"../driver/postgres/PostgresDriver\";\nimport {OracleDriver} from \"../driver/oracle/OracleDriver\";\nimport {SelectQuery} from \"./SelectQuery\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\nimport {QueryExpressionMap} from \"./QueryExpressionMap\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {WhereExpression} from \"./WhereExpression\";\nimport {Brackets} from \"./Brackets\";\nimport {AbstractSqliteDriver} from \"../driver/sqlite-abstract/AbstractSqliteDriver\";\nimport {QueryResultCacheOptions} from \"../cache/QueryResultCacheOptions\";\nimport {OffsetWithoutLimitNotSupportedError} from \"../error/OffsetWithoutLimitNotSupportedError\";\n\n/**\n * Allows to build complex sql queries in a fashion way and execute those queries.\n */\nexport class SelectQueryBuilder<Entity> extends QueryBuilder<Entity> implements WhereExpression {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    getQuery(): string {\n        let sql = this.createSelectExpression();\n        sql += this.createJoinExpression();\n        sql += this.createWhereExpression();\n        sql += this.createGroupByExpression();\n        sql += this.createHavingExpression();\n        sql += this.createOrderByExpression();\n        sql += this.createLimitOffsetExpression();\n        sql += this.createLockExpression();\n        sql = this.createLimitOffsetOracleSpecificExpression(sql);\n        sql = sql.trim();\n        if (this.expressionMap.subQuery)\n            sql = \"(\" + sql + \")\";\n        return sql;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a subquery - query that can be used inside other queries.\n     */\n    subQuery(): SelectQueryBuilder<any> {\n        const qb = this.createQueryBuilder();\n        qb.expressionMap.subQuery = true;\n        qb.expressionMap.parentQueryBuilder = this;\n        return qb;\n    }\n\n    /**\n     * Creates SELECT query.\n     * Replaces all previous selections if they exist.\n     */\n    select(): this;\n\n    /**\n     * Creates SELECT query.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, selectionAliasName?: string): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string, selectionAliasName?: string): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string[]): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection?: string|string[]|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), selectionAliasName?: string): SelectQueryBuilder<Entity> {\n        this.expressionMap.queryType = \"select\";\n        if (selection instanceof Array) {\n            this.expressionMap.selects = selection.map(selection => ({ selection: selection }));\n\n        } else if (selection instanceof Function) {\n            const subQueryBuilder = selection(this.subQuery());\n            this.setParameters(subQueryBuilder.getParameters());\n            this.expressionMap.selects.push({ selection: subQueryBuilder.getQuery(), aliasName: selectionAliasName });\n\n        } else if (selection) {\n            this.expressionMap.selects = [{ selection: selection, aliasName: selectionAliasName }];\n        }\n\n        return this;\n    }\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, selectionAliasName?: string): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string, selectionAliasName?: string): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string[]): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string|string[]|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), selectionAliasName?: string): this {\n        if (!selection)\n            return this;\n\n        if (selection instanceof Array) {\n            this.expressionMap.selects = this.expressionMap.selects.concat(selection.map(selection => ({ selection: selection })));\n\n        } else if (selection instanceof Function) {\n            const subQueryBuilder = selection(this.subQuery());\n            this.setParameters(subQueryBuilder.getParameters());\n            this.expressionMap.selects.push({ selection: subQueryBuilder.getQuery(), aliasName: selectionAliasName });\n\n        } else if (selection) {\n            this.expressionMap.selects.push({ selection: selection, aliasName: selectionAliasName });\n        }\n\n        return this;\n    }\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: ObjectType<T>|string, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: ObjectType<T>|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string): SelectQueryBuilder<T> {\n        const mainAlias = this.createFromAlias(entityTarget, aliasName);\n        this.expressionMap.setMainAlias(mainAlias);\n        return (this as any) as SelectQueryBuilder<T>;\n    }\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: ObjectType<T>|string, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: ObjectType<T>|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string): SelectQueryBuilder<T> {\n        const alias = this.createFromAlias(entityTarget, aliasName);\n        if (!this.expressionMap.mainAlias)\n            this.expressionMap.setMainAlias(alias);\n\n        return (this as any) as SelectQueryBuilder<T>;\n    }\n\n    /**\n     * INNER JOINs (without selection) given subquery.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) entity's property.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) given entity's table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) given table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection).\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs (without selection) given subquery.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) entity's property.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) entity's table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) given table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection).\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery and adds all selection properties to SELECT..\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property and adds all selection properties to SELECT.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.innerJoin(entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery and adds all selection properties to SELECT..\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property and adds all selection properties to SELECT.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.leftJoin(entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters, mapToProperty, true);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters, mapToProperty, false);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters, mapToProperty, true);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters, mapToProperty, false);\n        return this;\n    }\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, property: string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, entity: Function|string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, tableName: string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, entityOrProperty: Function|string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this {\n    //     const select = new SelectAttribute(this.expressionMap);\n    //     select.mapToProperty = mapToProperty;\n    //     select.entityOrProperty = entityOrProperty;\n    //     select.aliasName = aliasName;\n    //     select.qbFactory = qbFactory;\n    //     return this;\n    // }\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string, options: { disableMixedMap: boolean }): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string, aliasName: string, queryBuilderFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string,\n                         relationName: string,\n                         aliasNameOrOptions?: string|{ disableMixedMap?: boolean },\n                         queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this {\n\n        const relationIdAttribute = new RelationIdAttribute(this.expressionMap);\n        relationIdAttribute.mapToProperty = mapToProperty;\n        relationIdAttribute.relationName = relationName;\n        if (typeof aliasNameOrOptions === \"string\")\n            relationIdAttribute.alias = aliasNameOrOptions;\n        if (aliasNameOrOptions instanceof Object && (aliasNameOrOptions as any).disableMixedMap)\n            relationIdAttribute.disableMixedMap = true;\n\n        relationIdAttribute.queryBuilderFactory = queryBuilderFactory;\n        this.expressionMap.relationIdAttributes.push(relationIdAttribute);\n\n        if (relationIdAttribute.relation.junctionEntityMetadata) {\n            this.expressionMap.createAlias({\n                type: \"other\",\n                name: relationIdAttribute.junctionAlias,\n                metadata: relationIdAttribute.relation.junctionEntityMetadata\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Counts number of entities of entity's relation and maps the value into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationCountAndMap(mapToProperty: string, relationName: string, aliasName?: string, queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this {\n        const relationCountAttribute = new RelationCountAttribute(this.expressionMap);\n        relationCountAttribute.mapToProperty = mapToProperty;\n        relationCountAttribute.relationName = relationName;\n        relationCountAttribute.alias = aliasName;\n        relationCountAttribute.queryBuilderFactory = queryBuilderFactory;\n        this.expressionMap.relationCountAttributes.push(relationCountAttribute);\n\n        this.expressionMap.createAlias({\n            type: \"other\",\n            name: relationCountAttribute.junctionAlias\n        });\n        if (relationCountAttribute.relation.junctionEntityMetadata) {\n            this.expressionMap.createAlias({\n                type: \"other\",\n                name: relationCountAttribute.junctionAlias,\n                metadata: relationCountAttribute.relation.junctionEntityMetadata\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Loads all relation ids for all relations of the selected entity.\n     * All relation ids will be mapped to relation property themself.\n     */\n    loadAllRelationIds(): this {\n        this.expressionMap.mainAlias!.metadata.relations.forEach(relation => {\n            this.loadRelationIdAndMap(\n                this.expressionMap.mainAlias!.name + \".\" + relation.propertyPath,\n                this.expressionMap.mainAlias!.name + \".\" + relation.propertyPath,\n                { disableMixedMap: true }\n            );\n        });\n        return this;\n    }\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(where: Brackets|string|((qb: this) => string)|ObjectLiteral, parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres = []; // don't move this block below since computeWhereParameter can add where expressions\n        const condition = this.computeWhereParameter(where);\n        if (condition)\n            this.expressionMap.wheres = [{ type: \"simple\", condition: condition }];\n        if (parameters)\n            this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(where: string|Brackets|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"and\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(where: Brackets|string|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"or\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    whereInIds(ids: any|any[]): this {\n        ids = ids instanceof Array ? ids : [ids];\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.where(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    andWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.andWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    orWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.orWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Sets HAVING condition in the query builder.\n     * If you had previously HAVING expression defined,\n     * calling this function will override previously set HAVING conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    having(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"simple\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND HAVING condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andHaving(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"and\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR HAVING condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orHaving(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"or\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(): this;\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(groupBy: string): this;\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(groupBy?: string): this {\n        if (groupBy) {\n            this.expressionMap.groupBys = [groupBy];\n        } else {\n            this.expressionMap.groupBys = [];\n        }\n        return this;\n    }\n\n    /**\n     * Adds GROUP BY condition in the query builder.\n     */\n    addGroupBy(groupBy: string): this {\n        this.expressionMap.groupBys.push(groupBy);\n        return this;\n    }\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     *\n     * Calling order by without order set will remove all previously set order bys.\n     */\n    orderBy(): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort: string, order?: \"ASC\"|\"DESC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(order: OrderByCondition): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort?: string|OrderByCondition, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (sort) {\n            if (sort instanceof Object) {\n                this.expressionMap.orderBys = sort as OrderByCondition;\n            } else {\n                if (nulls) {\n                    this.expressionMap.orderBys = { [sort as string]: { order, nulls } };\n                } else {\n                    this.expressionMap.orderBys = { [sort as string]: order };\n                }\n            }\n        } else {\n            this.expressionMap.orderBys = {};\n        }\n        return this;\n    }\n\n    /**\n     * Adds ORDER BY condition in the query builder.\n     */\n    addOrderBy(sort: string, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (nulls) {\n            this.expressionMap.orderBys[sort] = { order, nulls };\n        } else {\n            this.expressionMap.orderBys[sort] = order;\n        }\n        return this;\n    }\n\n    /**\n     * Set's LIMIT - maximum number of rows to be selected.\n     * NOTE that it may not work as you expect if you are using joins.\n     * If you want to implement pagination, and you are having join in your query,\n     * then use instead take method instead.\n     */\n    limit(limit?: number): this {\n        this.expressionMap.limit = this.normalizeNumber(limit);\n        return this;\n    }\n\n    /**\n     * Set's OFFSET - selection offset.\n     * NOTE that it may not work as you expect if you are using joins.\n     * If you want to implement pagination, and you are having join in your query,\n     * then use instead skip method instead.\n     */\n    offset(offset?: number): this {\n        this.expressionMap.offset = this.normalizeNumber(offset);\n        return this;\n    }\n\n    /**\n     * Sets maximal number of entities to take.\n     */\n    take(take?: number): this {\n        this.expressionMap.take = this.normalizeNumber(take);\n        return this;\n    }\n\n    /**\n     * Sets number of entities to skip.\n     */\n    skip(skip?: number): this {\n        this.expressionMap.skip = this.normalizeNumber(skip);\n        return this;\n    }\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\", lockVersion: number): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\", lockVersion: Date): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"pessimistic_read\"|\"pessimistic_write\"): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\"|\"pessimistic_read\"|\"pessimistic_write\", lockVersion?: number|Date): this {\n        this.expressionMap.lockMode = lockMode;\n        this.expressionMap.lockVersion = lockVersion;\n        return this;\n\n    }\n\n    /**\n     * Gets first raw result returned by execution of generated query builder sql.\n     */\n    async getRawOne(): Promise<any> {\n        return (await this.getRawMany())[0];\n    }\n\n    /**\n     * Gets all raw results returned by execution of generated query builder sql.\n     */\n    async getRawMany(): Promise<any[]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        this.expressionMap.queryEntity = false;\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            return await this.loadRawResults(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) { // means we created our own query runner\n                await queryRunner.release();\n            }\n        }\n    }\n\n    /**\n     * Executes sql generated by query builder and returns object with raw results and entities created from them.\n     */\n    async getRawAndEntities(): Promise<{ entities: Entity[], raw: any[] }> {\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            this.expressionMap.queryEntity = true;\n            return await this.executeEntitiesAndRawResults(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Gets single entity returned by execution of generated query builder sql.\n     */\n    async getOne(): Promise<Entity|undefined> {\n        const results = await this.getRawAndEntities();\n        const result = results.entities[0] as any;\n\n        if (result && this.expressionMap.lockMode === \"optimistic\" && this.expressionMap.lockVersion) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n\n            if (this.expressionMap.lockVersion instanceof Date) {\n                const actualVersion = result[metadata.updateDateColumn!.propertyName]; // what if columns arent set?\n                if (actualVersion.getTime() !== this.expressionMap.lockVersion.getTime())\n                    throw new OptimisticLockVersionMismatchError(metadata.name, this.expressionMap.lockVersion, actualVersion);\n\n            } else {\n                const actualVersion = result[metadata.versionColumn!.propertyName]; // what if columns arent set?\n                if (actualVersion !== this.expressionMap.lockVersion)\n                    throw new OptimisticLockVersionMismatchError(metadata.name, this.expressionMap.lockVersion, actualVersion);\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Gets entities returned by execution of generated query builder sql.\n     */\n    async getMany(): Promise<Entity[]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const results = await this.getRawAndEntities();\n        return results.entities;\n    }\n\n    /**\n     * Gets count - number of entities selected by sql generated by this query builder.\n     * Count excludes all limitations set by setFirstResult and setMaxResults methods call.\n     */\n    async getCount(): Promise<number> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            return await this.executeCountQuery(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Executes built SQL query and returns entities and overall entities count (without limitation).\n     * This method is useful to build pagination.\n     */\n    async getManyAndCount(): Promise<[Entity[], number]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            const entitiesAndRaw = await this.executeEntitiesAndRawResults(queryRunner);\n            const count = await this.executeCountQuery(queryRunner);\n            return [entitiesAndRaw.entities, count];\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Executes built SQL query and returns raw data stream.\n     */\n    async stream(): Promise<ReadStream> {\n        this.expressionMap.queryEntity = false;\n        const [sql, parameters] = this.getQueryAndParameters();\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            const releaseFn = () => {\n                if (queryRunner !== this.queryRunner) // means we created our own query runner\n                    return queryRunner.release();\n                return;\n            };\n            return queryRunner.stream(sql, parameters, releaseFn, releaseFn);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Enables or disables query result caching.\n     */\n    cache(enabled: boolean): this;\n\n    /**\n     * Enables query result caching and sets in milliseconds in which cache will expire.\n     * If not set then global caching time will be used.\n     */\n    cache(milliseconds: number): this;\n\n    /**\n     * Enables query result caching and sets cache id and milliseconds in which cache will expire.\n     */\n    cache(id: any, milliseconds?: number): this;\n\n    /**\n     * Enables or disables query result caching.\n     */\n    cache(enabledOrMillisecondsOrId: boolean|number|string, maybeMilliseconds?: number): this {\n\n        if (typeof enabledOrMillisecondsOrId === \"boolean\") {\n            this.expressionMap.cache = enabledOrMillisecondsOrId;\n\n        } else if (typeof enabledOrMillisecondsOrId === \"number\") {\n            this.expressionMap.cache = true;\n            this.expressionMap.cacheDuration = enabledOrMillisecondsOrId;\n\n        } else if (typeof enabledOrMillisecondsOrId === \"string\" || typeof enabledOrMillisecondsOrId === \"number\") {\n            this.expressionMap.cache = true;\n            this.expressionMap.cacheId = enabledOrMillisecondsOrId;\n        }\n\n        if (maybeMilliseconds) {\n            this.expressionMap.cacheDuration = maybeMilliseconds;\n        }\n\n        return this;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    protected join(direction: \"INNER\"|\"LEFT\",\n                   entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>),\n                   aliasName: string,\n                   condition?: string,\n                   parameters?: ObjectLiteral,\n                   mapToProperty?: string,\n                   isMappingMany?: boolean): void {\n\n        this.setParameters(parameters || {});\n\n        const joinAttribute = new JoinAttribute(this.connection, this.expressionMap);\n        joinAttribute.direction = direction;\n        joinAttribute.mapToProperty = mapToProperty;\n        joinAttribute.isMappingMany = isMappingMany;\n        joinAttribute.entityOrProperty = entityOrProperty; // relationName\n        joinAttribute.condition = condition; // joinInverseSideCondition\n        // joinAttribute.junctionAlias = joinAttribute.relation.isOwning ? parentAlias + \"_\" + destinationTableAlias : destinationTableAlias + \"_\" + parentAlias;\n        this.expressionMap.joinAttributes.push(joinAttribute);\n\n        if (joinAttribute.metadata) {\n\n            // todo: find and set metadata right there?\n            joinAttribute.alias = this.expressionMap.createAlias({\n                type: \"join\",\n                name: aliasName,\n                metadata: joinAttribute.metadata\n            });\n            if (joinAttribute.relation && joinAttribute.relation.junctionEntityMetadata) {\n                this.expressionMap.createAlias({\n                    type: \"join\",\n                    name: joinAttribute.junctionAlias,\n                    metadata: joinAttribute.relation.junctionEntityMetadata\n                });\n            }\n\n        } else {\n            let subQuery: string = \"\";\n            if (entityOrProperty instanceof Function) {\n                const subQueryBuilder: SelectQueryBuilder<any> = (entityOrProperty as any)(((this as any) as SelectQueryBuilder<any>).subQuery());\n                this.setParameters(subQueryBuilder.getParameters());\n                subQuery = subQueryBuilder.getQuery();\n\n            } else {\n                subQuery = entityOrProperty;\n            }\n            const isSubQuery = entityOrProperty instanceof Function || entityOrProperty.substr(0, 1) === \"(\" && entityOrProperty.substr(-1) === \")\";\n            joinAttribute.alias = this.expressionMap.createAlias({\n                type: \"join\",\n                name: aliasName,\n                tablePath: isSubQuery === false ? entityOrProperty as string : undefined,\n                subQuery: isSubQuery === true ? subQuery : undefined,\n            });\n        }\n    }\n\n    /**\n     * Creates \"SELECT FROM\" part of SQL query.\n     */\n    protected createSelectExpression() {\n\n        if (!this.expressionMap.mainAlias)\n            throw new Error(\"Cannot build query because main alias is not set (call qb#from method)\");\n\n        // todo throw exception if selects or from is missing\n\n        const allSelects: SelectQuery[] = [];\n        const excludedSelects: SelectQuery[] = [];\n\n        if (this.expressionMap.mainAlias.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            allSelects.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name, metadata));\n            excludedSelects.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name, metadata));\n        }\n\n        // add selects from joins\n        this.expressionMap.joinAttributes\n            .forEach(join => {\n                if (join.metadata) {\n                    allSelects.push(...this.buildEscapedEntityColumnSelects(join.alias.name!, join.metadata));\n                    excludedSelects.push(...this.findEntityColumnSelects(join.alias.name!, join.metadata));\n                } else {\n                    const hasMainAlias = this.expressionMap.selects.some(select => select.selection === join.alias.name);\n                    if (hasMainAlias) {\n                        allSelects.push({ selection: this.escape(join.alias.name!) + \".*\" });\n                        const excludedSelect = this.expressionMap.selects.find(select => select.selection === join.alias.name);\n                        excludedSelects.push(excludedSelect!);\n                    }\n                }\n            });\n\n        if (!this.expressionMap.ignoreParentTablesJoins && this.expressionMap.mainAlias.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            if (metadata.parentEntityMetadata && metadata.parentEntityMetadata.inheritanceType === \"class-table\" && metadata.parentIdColumns) {\n                const alias = \"parentIdColumn_\" + metadata.parentEntityMetadata.tableName;\n                metadata.parentEntityMetadata.columns.forEach(column => {\n                    // TODO implement partial select\n                    allSelects.push({ selection: this.escape(alias) + \".\" + this.escape(column.databaseName), aliasName: alias + \"_\" + column.databaseName });\n                });\n            }\n        }\n\n        // add selects from relation id joins\n        // this.relationIdAttributes.forEach(relationIdAttr => {\n        // });\n\n        /*if (this.enableRelationIdValues) {\n         const parentMetadata = this.aliasMap.getEntityMetadataByAlias(this.aliasMap.mainAlias);\n         if (!parentMetadata)\n         throw new Error(\"Cannot get entity metadata for the given alias \" + this.aliasMap.mainAlias.name);\n\n         const metadata = this.connection.entityMetadatas.findByTarget(this.aliasMap.mainAlias.target);\n         metadata.manyToManyRelations.forEach(relation => {\n\n         const junctionMetadata = relation.junctionEntityMetadata;\n         junctionMetadata.columns.forEach(column => {\n         const select = ea(this.aliasMap.mainAlias.name + \"_\" + junctionMetadata.table.name + \"_ids\") + \".\" +\n         ec(column.name) + \" AS \" +\n         ea(this.aliasMap.mainAlias.name + \"_\" + relation.name + \"_ids_\" + column.name);\n         allSelects.push(select);\n         });\n         });\n         }*/\n\n        // add all other selects\n        this.expressionMap.selects\n            .filter(select => excludedSelects.indexOf(select) === -1)\n            .forEach(select => allSelects.push({ selection: this.replacePropertyNames(select.selection), aliasName: select.aliasName }));\n\n        // if still selection is empty, then simply set it to all (*)\n        if (allSelects.length === 0)\n            allSelects.push({ selection: \"*\" });\n\n        let lock: string = \"\";\n        if (this.connection.driver instanceof SqlServerDriver) {\n            switch (this.expressionMap.lockMode) {\n                case \"pessimistic_read\":\n                    lock = \" WITH (HOLDLOCK, ROWLOCK)\";\n                    break;\n                case \"pessimistic_write\":\n                    lock = \" WITH (UPDLOCK, ROWLOCK)\";\n                    break;\n            }\n        }\n\n        // create a selection query\n        const froms = this.expressionMap.aliases\n            .filter(alias => alias.type === \"from\" && (alias.tablePath || alias.subQuery))\n            .map(alias => {\n                if (alias.subQuery)\n                    return alias.subQuery + \" \" + this.escape(alias.name);\n\n                return this.getTableName(alias.tablePath!) + \" \" + this.escape(alias.name);\n            });\n        const selection = allSelects.map(select => select.selection + (select.aliasName ? \" AS \" + this.escape(select.aliasName) : \"\")).join(\", \");\n        if ((this.expressionMap.limit || this.expressionMap.offset) && this.connection.driver instanceof OracleDriver)\n            return \"SELECT ROWNUM \" + this.escape(\"RN\") + \",\" + selection + \" FROM \" + froms.join(\", \") + lock;\n\n        return \"SELECT \" + selection + \" FROM \" + froms.join(\", \") + lock;\n    }\n\n    /**\n     * Creates \"JOIN\" part of SQL query.\n     */\n    protected createJoinExpression(): string {\n\n        // examples:\n        // select from owning side\n        // qb.select(\"post\")\n        //     .leftJoinAndSelect(\"post.category\", \"category\");\n        // select from non-owning side\n        // qb.select(\"category\")\n        //     .leftJoinAndSelect(\"category.post\", \"post\");\n\n        const joins = this.expressionMap.joinAttributes.map(joinAttr => {\n\n            const relation = joinAttr.relation;\n            const destinationTableName = joinAttr.tablePath;\n            const destinationTableAlias = joinAttr.alias.name;\n            const appendedCondition = joinAttr.condition ? \" AND (\" + joinAttr.condition + \")\" : \"\";\n            const parentAlias = joinAttr.parentAlias;\n\n            // if join was build without relation (e.g. without \"post.category\") then it means that we have direct\n            // table to join, without junction table involved. This means we simply join direct table.\n            if (!parentAlias || !relation) {\n                const destinationJoin = joinAttr.alias.subQuery ? joinAttr.alias.subQuery : this.getTableName(destinationTableName);\n                return \" \" + joinAttr.direction + \" JOIN \" + destinationJoin + \" \" + this.escape(destinationTableAlias) +\n                    (joinAttr.condition ? \" ON \" + this.replacePropertyNames(joinAttr.condition) : \"\");\n            }\n\n            // if real entity relation is involved\n            if (relation.isManyToOne || relation.isOneToOneOwner) {\n\n                // JOIN `category` `category` ON `category`.`id` = `post`.`categoryId`\n                const condition = relation.joinColumns.map(joinColumn => {\n                    return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" +\n                        parentAlias + \".\" + relation.propertyPath + \".\" + joinColumn.referencedColumn!.propertyPath;\n                }).join(\" AND \");\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(condition + appendedCondition);\n\n            } else if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n\n                // JOIN `post` `post` ON `post`.`categoryId` = `category`.`id`\n                const condition = relation.inverseRelation!.joinColumns.map(joinColumn => {\n                    return destinationTableAlias + \".\" + relation.inverseRelation!.propertyPath + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" +\n                        parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                }).join(\" AND \");\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(condition + appendedCondition);\n\n            } else { // means many-to-many\n                const junctionTableName = relation.junctionEntityMetadata!.tablePath;\n\n                const junctionAlias = joinAttr.junctionAlias;\n                let junctionCondition = \"\", destinationCondition = \"\";\n\n                if (relation.isOwning) {\n\n                    junctionCondition = relation.joinColumns.map(joinColumn => {\n                        // `post_category`.`postId` = `post`.`id`\n                        return junctionAlias + \".\" + joinColumn.propertyPath + \"=\" + parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                    }).join(\" AND \");\n\n                    destinationCondition = relation.inverseJoinColumns.map(joinColumn => {\n                        // `category`.`id` = `post_category`.`categoryId`\n                        return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" + junctionAlias + \".\" + joinColumn.propertyPath;\n                    }).join(\" AND \");\n\n                } else {\n                    junctionCondition = relation.inverseRelation!.inverseJoinColumns.map(joinColumn => {\n                        // `post_category`.`categoryId` = `category`.`id`\n                        return junctionAlias + \".\" + joinColumn.propertyPath + \"=\" + parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                    }).join(\" AND \");\n\n                    destinationCondition = relation.inverseRelation!.joinColumns.map(joinColumn => {\n                        // `post`.`id` = `post_category`.`postId`\n                        return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" + junctionAlias + \".\" + joinColumn.propertyPath;\n                    }).join(\" AND \");\n                }\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(junctionTableName) + \" \" + this.escape(junctionAlias) + \" ON \" + this.replacePropertyNames(junctionCondition) +\n                    \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(destinationCondition + appendedCondition);\n\n            }\n        });\n\n        if (!this.expressionMap.ignoreParentTablesJoins && this.expressionMap.mainAlias!.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n            if (metadata.parentEntityMetadata && metadata.parentEntityMetadata.inheritanceType === \"class-table\" && metadata.parentIdColumns) {\n                const alias = \"parentIdColumn_\" + metadata.parentEntityMetadata.tableName;\n                const condition = metadata.parentIdColumns.map(parentIdColumn => {\n                    return this.expressionMap.mainAlias!.name + \".\" + parentIdColumn.propertyPath + \" = \" + this.escape(alias) + \".\" + this.escape(parentIdColumn.referencedColumn!.propertyPath);\n                }).join(\" AND \");\n                const join = \" JOIN \" + this.getTableName(metadata.parentEntityMetadata.tablePath) + \" \" + this.escape(alias) + \" ON \" + this.replacePropertyNames(condition);\n                joins.push(join);\n            }\n        }\n\n        return joins.join(\" \");\n    }\n\n    /**\n     * Creates \"GROUP BY\" part of SQL query.\n     */\n    protected createGroupByExpression() {\n        if (!this.expressionMap.groupBys || !this.expressionMap.groupBys.length) return \"\";\n        return \" GROUP BY \" + this.replacePropertyNames(this.expressionMap.groupBys.join(\", \"));\n    }\n\n    /**\n     * Creates \"ORDER BY\" part of SQL query.\n     */\n    protected createOrderByExpression() {\n        const orderBys = this.expressionMap.allOrderBys;\n        if (Object.keys(orderBys).length > 0)\n            return \" ORDER BY \" + Object.keys(orderBys)\n                    .map(columnName => {\n                        if (typeof orderBys[columnName] === \"string\") {\n                            return this.replacePropertyNames(columnName) + \" \" + orderBys[columnName];\n                        } else {\n                            return this.replacePropertyNames(columnName) + \" \" + (orderBys[columnName] as any).order + \" \" + (orderBys[columnName] as any).nulls;\n                        }\n                    })\n                    .join(\", \");\n\n        return \"\";\n    }\n\n    /**\n     * Creates \"LIMIT\" and \"OFFSET\" parts of SQL query for Oracle database.\n     */\n    protected createLimitOffsetOracleSpecificExpression(sql: string): string {\n        if ((this.expressionMap.offset || this.expressionMap.limit) && this.connection.driver instanceof OracleDriver) {\n            sql = \"SELECT * FROM (\" + sql + \") WHERE \";\n            if (this.expressionMap.offset) {\n                sql += this.escape(\"RN\") + \" >= \" + this.expressionMap.offset;\n            }\n            if (this.expressionMap.limit) {\n                sql += (this.expressionMap.offset ? \" AND \" : \"\") + this.escape(\"RN\") + \" <= \" + ((this.expressionMap.offset || 0) + this.expressionMap.limit);\n            }\n        }\n        return sql;\n    }\n\n    /**\n     * Creates \"LIMIT\" and \"OFFSET\" parts of SQL query.\n     */\n    protected createLimitOffsetExpression(): string {\n        if (this.connection.driver instanceof OracleDriver)\n            return \"\";\n\n        // in the case if nothing is joined in the query builder we don't need to make two requests to get paginated results\n        // we can use regular limit / offset, that's why we add offset and limit construction here based on skip and take values\n        let offset: number|undefined = this.expressionMap.offset,\n            limit: number|undefined = this.expressionMap.limit;\n        if (!offset && !limit && this.expressionMap.joinAttributes.length === 0) {\n            offset = this.expressionMap.skip;\n            limit = this.expressionMap.take;\n        }\n\n        if (this.connection.driver instanceof SqlServerDriver) {\n\n            if (limit && offset)\n                return \" OFFSET \" + offset + \" ROWS FETCH NEXT \" + limit + \" ROWS ONLY\";\n            if (limit)\n                return \" OFFSET 0 ROWS FETCH NEXT \" + limit + \" ROWS ONLY\";\n            if (offset)\n                return \" OFFSET \" + offset + \" ROWS\";\n\n        } else if (this.connection.driver instanceof MysqlDriver) {\n\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                throw new OffsetWithoutLimitNotSupportedError(\"MySQL\");\n\n        } else if (this.connection.driver instanceof AbstractSqliteDriver) {\n\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                return \" LIMIT -1 OFFSET \" + offset;\n\n        } else {\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                return \" OFFSET \" + offset;\n        }\n\n        return \"\";\n    }\n\n    /**\n     * Creates \"LOCK\" part of SQL query.\n     */\n    protected createLockExpression(): string {\n        switch (this.expressionMap.lockMode) {\n            case \"pessimistic_read\":\n                if (this.connection.driver instanceof MysqlDriver) {\n                    return \" LOCK IN SHARE MODE\";\n\n                } else if (this.connection.driver instanceof PostgresDriver) {\n                    return \" FOR SHARE\";\n\n                } else if (this.connection.driver instanceof SqlServerDriver) {\n                    return \"\";\n\n                } else {\n                    throw new LockNotSupportedOnGivenDriverError();\n                }\n            case \"pessimistic_write\":\n                if (this.connection.driver instanceof MysqlDriver || this.connection.driver instanceof PostgresDriver) {\n                    return \" FOR UPDATE\";\n\n                } else if (this.connection.driver instanceof SqlServerDriver) {\n                    return \"\";\n\n                } else {\n                    throw new LockNotSupportedOnGivenDriverError();\n                }\n            default:\n                return \"\";\n        }\n    }\n\n    /**\n     * Creates \"HAVING\" part of SQL query.\n     */\n    protected createHavingExpression() {\n        if (!this.expressionMap.havings || !this.expressionMap.havings.length) return \"\";\n        const conditions = this.expressionMap.havings.map((having, index) => {\n            switch (having.type) {\n                case \"and\":\n                    return (index > 0 ? \"AND \" : \"\") + this.replacePropertyNames(having.condition);\n                case \"or\":\n                    return (index > 0 ? \"OR \" : \"\") + this.replacePropertyNames(having.condition);\n                default:\n                    return this.replacePropertyNames(having.condition);\n            }\n        }).join(\" \");\n\n        if (!conditions.length) return \"\";\n        return \" HAVING \" + conditions;\n    }\n\n    protected buildEscapedEntityColumnSelects(aliasName: string, metadata: EntityMetadata): SelectQuery[] {\n        const hasMainAlias = this.expressionMap.selects.some(select => select.selection === aliasName);\n\n        const columns: ColumnMetadata[] = [];\n        if (hasMainAlias) {\n            columns.push(...metadata.columns.filter(column => column.isSelect === true));\n        }\n        columns.push(...metadata.columns.filter(column => {\n            return this.expressionMap.selects.some(select => select.selection === aliasName + \".\" + column.propertyName);\n        }));\n\n        // if user used partial selection and did not select some primary columns which are required to be selected\n        // we select those primary columns and mark them as \"virtual\". Later virtual column values will be removed from final entity\n        // to make entity contain exactly what user selected\n        const nonSelectedPrimaryColumns = this.expressionMap.queryEntity ? metadata.primaryColumns.filter(primaryColumn => columns.indexOf(primaryColumn) === -1) : [];\n        const allColumns = [...columns, ...nonSelectedPrimaryColumns];\n\n        return allColumns.map(column => {\n            const selection = this.expressionMap.selects.find(select => select.selection === aliasName + \".\" + column.propertyName);\n            return {\n                selection: this.escape(aliasName) + \".\" + this.escape(column.databaseName),\n                aliasName: selection && selection.aliasName ? selection.aliasName : aliasName + \"_\" + column.databaseName,\n                // todo: need to keep in mind that custom selection.aliasName breaks hydrator. fix it later!\n                virtual: selection ? selection.virtual === true : (hasMainAlias ? false : true),\n            };\n        });\n    }\n\n    protected findEntityColumnSelects(aliasName: string, metadata: EntityMetadata): SelectQuery[] {\n        const mainSelect = this.expressionMap.selects.find(select => select.selection === aliasName);\n        if (mainSelect)\n            return [mainSelect];\n\n        return this.expressionMap.selects.filter(select => {\n            return metadata.columns.some(column => select.selection === aliasName + \".\" + column.propertyName);\n        });\n    }\n\n    protected async executeCountQuery(queryRunner: QueryRunner): Promise<number> {\n        this.expressionMap.queryEntity = false;\n\n        const mainAlias = this.expressionMap.mainAlias!.name; // todo: will this work with \"fromTableName\"?\n        const metadata = this.expressionMap.mainAlias!.metadata;\n\n        const distinctAlias = this.escape(mainAlias);\n        let countSql: string = \"\";\n        if (metadata.hasMultiplePrimaryKeys) {\n            if (this.connection.driver instanceof AbstractSqliteDriver) {\n                countSql = `COUNT(DISTINCT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                    const propertyName = this.escape(primaryColumn.databaseName);\n                    return `${distinctAlias}.${propertyName}`;\n                }).join(\" || \") + \")) as \\\"cnt\\\"\";\n\n            } else {\n                countSql = `COUNT(DISTINCT(CONCAT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                    const propertyName = this.escape(primaryColumn.databaseName);\n                    return `${distinctAlias}.${propertyName}`;\n                }).join(\", \") + \"))) as \\\"cnt\\\"\";\n            }\n\n        } else {\n            countSql = `COUNT(DISTINCT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                const propertyName = this.escape(primaryColumn.databaseName);\n                return `${distinctAlias}.${propertyName}`;\n            }).join(\", \") + \")) as \\\"cnt\\\"\";\n        }\n\n        const results = await this.clone()\n            .mergeExpressionMap({ ignoreParentTablesJoins: true })\n            .orderBy()\n            .groupBy()\n            .offset(undefined)\n            .limit(undefined)\n            .skip(undefined)\n            .take(undefined)\n            .select(countSql)\n            .loadRawResults(queryRunner);\n\n        if (!results || !results[0] || !results[0][\"cnt\"])\n            return 0;\n\n        return parseInt(results[0][\"cnt\"]);\n    }\n\n    /**\n     * Executes sql generated by query builder and returns object with raw results and entities created from them.\n     */\n    protected async executeEntitiesAndRawResults(queryRunner: QueryRunner): Promise<{ entities: Entity[], raw: any[] }> {\n\n        if (!this.expressionMap.mainAlias)\n            throw new Error(`Alias is not set. Use \"from\" method to set an alias.`);\n\n        if ((this.expressionMap.lockMode === \"pessimistic_read\" || this.expressionMap.lockMode === \"pessimistic_write\") && !queryRunner.isTransactionActive)\n            throw new PessimisticLockTransactionRequiredError();\n\n        if (this.expressionMap.lockMode === \"optimistic\") {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            if (!metadata.versionColumn && !metadata.updateDateColumn)\n                throw new NoVersionOrUpdateDateColumnError(metadata.name);\n        }\n\n        const broadcaster = new Broadcaster(this.connection);\n        const relationIdLoader = new RelationIdLoader(this.connection, queryRunner, this.expressionMap.relationIdAttributes);\n        const relationCountLoader = new RelationCountLoader(this.connection, queryRunner, this.expressionMap.relationCountAttributes);\n        const relationIdMetadataTransformer = new RelationIdMetadataToAttributeTransformer(this.expressionMap);\n        relationIdMetadataTransformer.transform();\n        const relationCountMetadataTransformer = new RelationCountMetadataToAttributeTransformer(this.expressionMap);\n        relationCountMetadataTransformer.transform();\n\n        let rawResults: any[] = [], entities: any[] = [];\n\n        // for pagination enabled (e.g. skip and take) its much more complicated - its a special process\n        // where we make two queries to find the data we need\n        // first query find ids in skip and take range\n        // and second query loads the actual data in given ids range\n        if ((this.expressionMap.skip || this.expressionMap.take) && this.expressionMap.joinAttributes.length > 0) {\n\n            // we are skipping order by here because its not working in subqueries anyway\n            // to make order by working we need to apply it on a distinct query\n            const [selects, orderBys] = this.createOrderByCombinedWithSelectExpression(\"distinctAlias\");\n            const metadata = this.expressionMap.mainAlias.metadata;\n            const mainAliasName = this.expressionMap.mainAlias.name;\n\n            const querySelects = metadata.primaryColumns.map(primaryColumn => {\n                const distinctAlias = this.escape(\"distinctAlias\");\n                const columnAlias = this.escape(mainAliasName + \"_\" + primaryColumn.databaseName);\n                if (!orderBys[columnAlias]) // make sure we aren't overriding user-defined order in inverse direction\n                    orderBys[columnAlias] = \"ASC\";\n                return `${distinctAlias}.${columnAlias} as \"ids_${mainAliasName + \"_\" + primaryColumn.databaseName}\"`;\n            });\n\n            rawResults = await new SelectQueryBuilder(this.connection, queryRunner)\n                .select(`DISTINCT ${querySelects.join(\", \")}`)\n                .addSelect(selects)\n                .from(`(${this.clone().orderBy().groupBy().getQuery()})`, \"distinctAlias\")\n                .offset(this.expressionMap.skip)\n                .limit(this.expressionMap.take)\n                .orderBy(orderBys)\n                .cache(this.expressionMap.cache ? this.expressionMap.cache : this.expressionMap.cacheId, this.expressionMap.cacheDuration)\n                .setParameters(this.getParameters())\n                .getRawMany();\n\n            if (rawResults.length > 0) {\n                let condition = \"\";\n                const parameters: ObjectLiteral = {};\n                if (metadata.hasMultiplePrimaryKeys) {\n                    condition = rawResults.map((result, index) => {\n                        return metadata.primaryColumns.map(primaryColumn => {\n                            parameters[`ids_${index}_${primaryColumn.propertyName}`] = result[`ids_${mainAliasName}_${primaryColumn.databaseName}`];\n                            return `${mainAliasName}.${primaryColumn.propertyName}=:ids_${index}_${primaryColumn.databaseName}`;\n                        }).join(\" AND \");\n                    }).join(\" OR \");\n                } else {\n                    const ids = rawResults.map(result => result[\"ids_\" + mainAliasName + \"_\" + metadata.primaryColumns[0].databaseName]);\n                    const areAllNumbers = ids.every((id: any) => typeof id === \"number\");\n                    if (areAllNumbers) {\n                        // fixes #190. if all numbers then its safe to perform query without parameter\n                        condition = `${mainAliasName}.${metadata.primaryColumns[0].propertyName} IN (${ids.join(\", \")})`;\n                    } else {\n                        parameters[\"ids\"] = ids;\n                        condition = mainAliasName + \".\" + metadata.primaryColumns[0].propertyName + \" IN (:ids)\";\n                    }\n                }\n                rawResults = await this.clone()\n                    .mergeExpressionMap({ extraAppendedAndWhereCondition: condition })\n                    .setParameters(parameters)\n                    .loadRawResults(queryRunner);\n            }\n\n        } else {\n            rawResults = await this.loadRawResults(queryRunner);\n        }\n\n        if (rawResults.length > 0) {\n\n            // transform raw results into entities\n            const rawRelationIdResults = await relationIdLoader.load(rawResults);\n            const rawRelationCountResults = await relationCountLoader.load(rawResults);\n            const transformer = new RawSqlResultsToEntityTransformer(this.expressionMap, this.connection.driver, rawRelationIdResults, rawRelationCountResults);\n            entities = transformer.transform(rawResults, this.expressionMap.mainAlias!);\n\n            // broadcast all \"after load\" events\n            if (this.expressionMap.mainAlias.hasMetadata)\n                await broadcaster.broadcastLoadEventsForAll(this.expressionMap.mainAlias.target, entities);\n        }\n\n        return {\n            raw: rawResults,\n            entities: entities,\n        };\n    }\n\n    protected createOrderByCombinedWithSelectExpression(parentAlias: string): [ string, OrderByCondition] {\n\n        // if table has a default order then apply it\n        const orderBys = this.expressionMap.allOrderBys;\n        const selectString = Object.keys(orderBys)\n            .map(orderCriteria => {\n                if (orderCriteria.indexOf(\".\") !== -1) {\n                    const [aliasName, propertyPath] = orderCriteria.split(\".\");\n                    const alias = this.expressionMap.findAliasByName(aliasName);\n                    const column = alias.metadata.findColumnWithPropertyName(propertyPath);\n                    return this.escape(parentAlias) + \".\" + this.escape(aliasName + \"_\" + column!.databaseName);\n                } else {\n                    if (this.expressionMap.selects.find(select => select.selection === orderCriteria || select.aliasName === orderCriteria))\n                        return this.escape(parentAlias) + \".\" + orderCriteria;\n\n                    return \"\";\n                }\n            })\n            .join(\", \");\n\n        const orderByObject: OrderByCondition = {};\n        Object.keys(orderBys).forEach(orderCriteria => {\n            if (orderCriteria.indexOf(\".\") !== -1) {\n                const [aliasName, propertyPath] = orderCriteria.split(\".\");\n                const alias = this.expressionMap.findAliasByName(aliasName);\n                const column = alias.metadata.findColumnWithPropertyName(propertyPath);\n                orderByObject[this.escape(parentAlias) + \".\" + this.escape(aliasName + \"_\" + column!.databaseName)] = orderBys[orderCriteria];\n            } else {\n                if (this.expressionMap.selects.find(select => select.selection === orderCriteria || select.aliasName === orderCriteria)) {\n                    orderByObject[this.escape(parentAlias) + \".\" + orderCriteria] = orderBys[orderCriteria];\n                } else {\n                    orderByObject[orderCriteria] = orderBys[orderCriteria];\n                }\n            }\n        });\n\n        return [selectString, orderByObject];\n    }\n\n    /**\n     * Loads raw results from the database.\n     */\n    protected async loadRawResults(queryRunner: QueryRunner) {\n        const [sql, parameters] = this.getQueryAndParameters();\n        const cacheOptions = typeof this.connection.options.cache === \"object\" ? this.connection.options.cache : {};\n        let savedQueryResultCacheOptions: QueryResultCacheOptions|undefined = undefined;\n        if (this.connection.queryResultCache && (this.expressionMap.cache || cacheOptions.alwaysEnabled)) {\n            savedQueryResultCacheOptions = await this.connection.queryResultCache.getFromCache({\n                identifier: this.expressionMap.cacheId,\n                query: this.getSql(),\n                duration: this.expressionMap.cacheDuration || cacheOptions.duration || 1000\n            }, queryRunner);\n            if (savedQueryResultCacheOptions && !this.connection.queryResultCache.isExpired(savedQueryResultCacheOptions))\n                return JSON.parse(savedQueryResultCacheOptions.result);\n        }\n\n        const results = await queryRunner.query(sql, parameters);\n\n        if (this.connection.queryResultCache && (this.expressionMap.cache || cacheOptions.alwaysEnabled)) {\n            await this.connection.queryResultCache.storeInCache({\n                identifier: this.expressionMap.cacheId,\n                query: this.getSql(),\n                time: new Date().getTime(),\n                duration: this.expressionMap.cacheDuration || cacheOptions.duration || 1000,\n                result: JSON.stringify(results)\n            }, savedQueryResultCacheOptions, queryRunner);\n        }\n\n        return results;\n    }\n\n    /**\n     * Merges into expression map given expression map properties.\n     */\n    protected mergeExpressionMap(expressionMap: Partial<QueryExpressionMap>): this {\n        Object.assign(this.expressionMap, expressionMap);\n        return this;\n    }\n\n    /**\n     * Normalizes a give number - converts to int if possible.\n     */\n    protected normalizeNumber(num: any) {\n        if (typeof num === \"number\" || num === undefined || num === null)\n            return num;\n\n        return parseInt(num);\n    }\n\n    /**\n     * Creates a query builder used to execute sql queries inside this query builder.\n     */\n    protected obtainQueryRunner() {\n        return this.queryRunner || this.connection.createQueryRunner(\"slave\");\n    }\n\n}\n"],"sourceRoot":".."}
##############################################
/src/browser/query-builder/SelectQueryBuilder.js-1380-                        if (savedQueryResultCacheOptions && !this.connection.queryResultCache.isExpired(savedQueryResultCacheOptions))
/src/browser/query-builder/SelectQueryBuilder.js:1381:                            return [2 /*return*/, JSON.parse(savedQueryResultCacheOptions.result)];
/src/browser/query-builder/SelectQueryBuilder.js-1382-                        _b.label = 2;
##############################################
/src/browser/driver/oracle/OracleDriver.js-306-        else if (columnMetadata.type === "json") {
/src/browser/driver/oracle/OracleDriver.js:307:            value = JSON.parse(value);
/src/browser/driver/oracle/OracleDriver.js-308-        }
##############################################
/src/browser/driver/oracle/OracleDriver.js.map:1:{"version":3,"sources":["../browser/src/driver/oracle/OracleDriver.ts"],"names":[],"mappings":"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","file":"OracleDriver.js","sourcesContent":["import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {OracleQueryRunner} from \"./OracleQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {OracleConnectionOptions} from \"./OracleConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {OracleConnectionCredentialsOptions} from \"./OracleConnectionCredentialsOptions\";\nimport {DriverUtils} from \"../DriverUtils\";\n\n/**\n * Organizes communication with Oracle RDBMS.\n *\n * todo: this driver is not 100% finished yet, need to fix all issues that are left\n */\nexport class OracleDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Underlying oracle library.\n     */\n    oracle: any;\n\n    /**\n     * Pool for master database.\n     */\n    master: any;\n\n    /**\n     * Pool for slave databases.\n     * Used in replication.\n     */\n    slaves: any[] = [];\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: OracleConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.techonthenet.com/oracle/datatypes.php\n     * @see https://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#CNCPT012\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"char\",\n        \"nchar\",\n        \"nvarchar2\",\n        \"varchar2\",\n        \"long\",\n        \"raw\",\n        \"long raw\",\n        \"number\",\n        \"numeric\",\n        \"dec\",\n        \"decimal\",\n        \"integer\",\n        \"int\",\n        \"smallint\",\n        \"real\",\n        \"double precision\",\n        \"date\",\n        \"timestamp\",\n        \"timestamp with time zone\",\n        \"timestamp with local time zone\",\n        \"interval year\",\n        \"interval day\",\n        \"bfile\",\n        \"blob\",\n        \"clob\",\n        \"nclob\",\n        \"rowid\",\n        \"urowid\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"char\",\n        \"nchar\",\n        \"nvarchar2\",\n        \"varchar2\"\n    ];\n\n    /**\n     * Orm has special columns and we need to know what database column types should be for those types.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime\",\n        createDateDefault: \"CURRENT_TIMESTAMP\",\n        updateDate: \"datetime\",\n        updateDateDefault: \"CURRENT_TIMESTAMP\",\n        version: \"number\",\n        treeLevel: \"number\",\n        migrationName: \"nvarchar\",\n        migrationTimestamp: \"timestamp\",\n        cacheId: \"int\",\n        cacheIdentifier: \"nvarchar\",\n        cacheTime: \"timestamp\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as OracleConnectionOptions;\n\n        // load oracle package\n        this.loadDependencies();\n\n        // extra oracle setup\n        this.oracle.outFormat = this.oracle.OBJECT;\n\n        // Object.assign(connection.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        // validate options to make sure everything is set\n        // if (!this.options.host)\n        //     throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.sid)\n        //     throw new DriverOptionNotSetError(\"sid\");\n        //\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     * Based on pooling options, it can either create connection immediately,\n     * either create a pool and create connection when needed.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.slaves = await Promise.all(this.options.replication.slaves.map(slave => {\n                return this.createPool(this.options, slave);\n            }));\n            this.master = await this.createPool(this.options, this.options.replication.master);\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.master = await this.createPool(this.options, this.options);\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.master)\n            return Promise.reject(new ConnectionIsNotSetError(\"oracle\"));\n\n        await this.closePool(this.master);\n        await Promise.all(this.slaves.map(slave => this.closePool(slave)));\n        this.master = undefined;\n        this.slaves = [];\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new OracleQueryRunner(this, mode);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            } else {\n                escapedParameters.push(value);\n                return key;\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return `\"${columnName}\"`;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToUtcDatetimeString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\") {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            value = JSON.parse(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n            \n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number, isArray?: boolean }): string {\n        let type = \"\";\n        if (column.type === Number) {\n            type += \"integer\";\n\n        } else if (column.type === String) {\n            type += \"nvarchar2\";\n\n        } else if (column.type === Date) {\n            type += \"timestamp(0)\";\n\n        } else if (column.type === Boolean) {\n            type += \"number(1)\";\n\n        } else if (column.type === \"simple-array\") {\n            type += \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            type += \"text\";\n\n        } else {\n            type += column.type;\n        }\n\n        return type;\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"true\" : \"false\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique;\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n\n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();\n\n        return \"\";\n    }\n\n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return new Promise<any>((ok, fail) => {\n            this.master.getConnection((err: any, connection: any, release: Function) => {\n                if (err) return fail(err);\n                ok(connection);\n            });\n        });\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.slaves.length)\n            return this.obtainMasterConnection();\n\n        return new Promise<any>((ok, fail) => {\n            const random = Math.floor(Math.random() * this.slaves.length);\n\n            this.slaves[random].getConnection((err: any, connection: any) => {\n                if (err) return fail(err);\n                ok(connection);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all driver dependencies.\n     */\n    protected loadDependencies(): void {\n        try {\n            this.oracle = PlatformTools.load(\"oracledb\");\n\n        } catch (e) {\n            throw new DriverPackageNotInstalledError(\"Oracle\", \"oracledb\");\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected async createPool(options: OracleConnectionOptions, credentials: OracleConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        const connectionOptions = Object.assign({}, {\n            user: credentials.username,\n            password: credentials.password,\n            connectString: credentials.host + \":\" + credentials.port + \"/\" + credentials.sid,\n        }, options.extra || {});\n\n        // pooling is enabled either when its set explicitly to true,\n        // either when its not defined at all (e.g. enabled by default)\n        return new Promise<void>((ok, fail) => {\n            this.oracle.createPool(connectionOptions, (err: any, pool: any) => {\n                if (err)\n                    return fail(err);\n                ok(pool);\n            });\n        });\n\n    }\n\n    /**\n     * Closes connection pool.\n     */\n    protected async closePool(pool: any): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            pool.close((err: any) => err ? fail(err) : ok());\n            pool = undefined;\n        });\n    }\n\n}\n"],"sourceRoot":"../.."}
##############################################
/src/browser/driver/sqljs/SqljsDriver.js.map:1:{"version":3,"sources":["../browser/src/driver/sqljs/SqljsDriver.ts"],"names":[],"mappings":"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","file":"SqljsDriver.js","sourcesContent":["import {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\nimport {SqljsConnectionOptions} from \"./SqljsConnectionOptions\";\nimport {SqljsQueryRunner} from \"./SqljsQueryRunner\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {Connection} from \"../../connection/Connection\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\n\n// This is needed to satisfy the typescript compiler.\ninterface Window {\n    SQL: any;\n}\ndeclare var window: Window;\n\nexport class SqljsDriver extends AbstractSqliteDriver {\n    // The driver specific options.\n    options: SqljsConnectionOptions;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n\n        // If autoSave is enabled by user, location or autoSaveCallback have to be set\n        // because either autoSave saves to location or calls autoSaveCallback.\n        if (this.options.autoSave && !this.options.location && !this.options.autoSaveCallback) {\n            throw new DriverOptionNotSetError(`location or autoSaveCallback`);\n        }\n\n        // load sql.js package\n        this.loadDependencies();\n    }\n\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n        this.databaseConnection = await this.createDatabaseConnection();\n    }\n\n    /**\n     * Closes connection with database.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            try {\n                this.queryRunner = undefined;\n                this.databaseConnection.close();\n                ok();\n            }\n            catch (e)  {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\" | \"slave\" = \"master\"): QueryRunner {\n        if (!this.queryRunner)\n            this.queryRunner = new SqljsQueryRunner(this);\n\n        return this.queryRunner;\n    }\n    \n    /**\n     * Loads a database from a given file (Node.js), local storage key (browser) or array.\n     * This will delete the current database!\n     */\n    load(fileNameOrLocalStorageOrData: string | Uint8Array): Promise<any> {\n        if (typeof fileNameOrLocalStorageOrData === \"string\") {\n            // content has to be loaded\n            if (PlatformTools.type === \"node\") {\n                // Node.js\n                // fileNameOrLocalStorageOrData should be a path to the file\n                if (PlatformTools.fileExist(fileNameOrLocalStorageOrData)) {\n                    const database = PlatformTools.readFileSync(fileNameOrLocalStorageOrData);\n                    return this.createDatabaseConnectionWithImport(database);\n                }\n                else {\n                    throw new Error(`File ${fileNameOrLocalStorageOrData} does not exist`);\n                }\n            } \n            else {\n                // browser\n                // fileNameOrLocalStorageOrData should be a local storage key\n                const localStorageContent = PlatformTools.getGlobalVariable().localStorage.getItem(fileNameOrLocalStorageOrData);\n                return this.createDatabaseConnectionWithImport(JSON.parse(localStorageContent));\n            }\n        }\n        else {\n            return this.createDatabaseConnectionWithImport(fileNameOrLocalStorageOrData);\n        }\n    }\n\n    /**\n     * Saved the current database to the given file (Node.js) or local storage key (browser).\n     * If no location path is given, the location path in the options (if specified) will be used.\n     */\n    async save(location?: string) {\n        if (!location && !this.options.location) {\n            throw new Error(`No location is set, specify a location parameter or add the location option to your configuration`);\n        }\n        \n        let path = \"\";\n        if (location) {\n            path = location;\n        }\n        else if (this.options.location) {\n            path = this.options.location;\n        }\n\n        if (PlatformTools.type === \"node\") {\n            try {\n                const content = new Buffer(this.databaseConnection.export());\n                await PlatformTools.writeFile(path, content);\n            }\n            catch (e) {\n                throw new Error(`Could not save database, error: ${e}`);\n            }\n        }\n        else {\n            const database: Uint8Array = this.databaseConnection.export();\n            // convert Uint8Array to number array to improve local-storage storage\n            const databaseArray = [].slice.call(database);\n            PlatformTools.getGlobalVariable().localStorage.setItem(path, JSON.stringify(databaseArray));\n        }\n    }\n\n    /**\n     * This gets called by the QueryRunner when a change to the database is made.\n     * If a custom autoSaveCallback is specified, it get's called with the database as Uint8Array,\n     * otherwise the save method is called which saves it to file (Node.js) or localstorage (browser).\n     */\n    async autoSave() {\n        if (this.options.autoSave) {\n            if (this.options.autoSaveCallback) {\n                await this.options.autoSaveCallback(this.export());\n            }\n            else {\n                await this.save();\n            }\n        }\n    }\n    \n    /**\n     * Returns the current database as Uint8Array.\n     */\n    export(): Uint8Array {\n        return this.databaseConnection.export();\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates connection with the database.\n     * If the location option is set, the database is loaded first.\n     */\n    protected createDatabaseConnection(): Promise<any> {\n        if (this.options.location) {\n            return this.load(this.options.location);\n        }\n\n        return this.createDatabaseConnectionWithImport(this.options.database);\n    }\n\n    /**\n     * Creates connection with an optional database.\n     * If database is specified it is loaded, otherwise a new empty database is created.\n     */\n    protected createDatabaseConnectionWithImport(database?: Uint8Array): Promise<any> {\n        if (database && database.length > 0) {\n            this.databaseConnection = new this.sqlite.Database(database);\n        }\n        else {\n            this.databaseConnection = new this.sqlite.Database();\n        }\n\n        // Enable foreign keys for database\n        return new Promise<any>((ok, fail) => {\n            try {\n                this.databaseConnection.exec(`PRAGMA foreign_keys = ON;`);\n                ok(this.databaseConnection);\n            }\n            catch (e) {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        if (PlatformTools.type === \"browser\") {\n            this.sqlite = window.SQL;\n        }\n        else {\n            try {\n                this.sqlite = PlatformTools.load(\"sql.js\");\n\n            } catch (e) {\n                throw new DriverPackageNotInstalledError(\"sql.js\", \"sql.js\");\n            }\n        }\n    }\n}"],"sourceRoot":"../.."}
##############################################
/src/browser/driver/sqljs/SqljsDriver.js-138-                var localStorageContent = PlatformTools.getGlobalVariable().localStorage.getItem(fileNameOrLocalStorageOrData);
/src/browser/driver/sqljs/SqljsDriver.js:139:                return this.createDatabaseConnectionWithImport(JSON.parse(localStorageContent));
/src/browser/driver/sqljs/SqljsDriver.js-140-            }
##############################################
/src/browser/driver/sqljs/SqljsDriver.js-170-                        content = new Buffer(this.databaseConnection.export());
/src/browser/driver/sqljs/SqljsDriver.js:171:                        return [4 /*yield*/, PlatformTools.writeFile(path, content)];
/src/browser/driver/sqljs/SqljsDriver.js-172-                    case 2:
##############################################
/src/browser/driver/mongodb/MongoQueryRunner.js-416-                switch (_a.label) {
/src/browser/driver/mongodb/MongoQueryRunner.js:417:                    case 0: return [4 /*yield*/, this.getCollection(collectionName).rename(newName, options)];
/src/browser/driver/mongodb/MongoQueryRunner.js-418-                    case 1: return [2 /*return*/, _a.sent()];
##############################################
/src/browser/driver/mongodb/MongoQueryRunner.js.map:1:{"version":3,"sources":["../browser/src/driver/mongodb/MongoQueryRunner.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;;GAEG;AACH;IAwCI,4EAA4E;IAC5E,cAAc;IACd,4EAA4E;IAE5E,0BAAY,UAAsB,EAAE,kBAAsB;QA5B1D;;;;WAIG;QACH,eAAU,GAAG,KAAK,CAAC;QAEnB;;;WAGG;QACH,wBAAmB,GAAG,KAAK,CAAC;QAE5B;;;WAGG;QACH,SAAI,GAAG,EAAE,CAAC;QAYN,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;IACjD,CAAC;IAED,4EAA4E;IAC5E,iBAAiB;IACjB,4EAA4E;IAE5E;;OAEG;IACH,iCAAM,GAAN,UAAO,cAAsB,EAAE,KAAqB;QAChD,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;IAChE,CAAC;IAED;;OAEG;IACH,oCAAS,GAAT,UAAU,cAAsB,EAAE,QAAyB,EAAE,OAAsC;QAC/F,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;IAC3E,CAAC;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,cAAsB,EAAE,UAA2B,EAAE,OAAqC;;;;4BAC/F,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAU,EAAE,OAAO,CAAC,EAAA;4BAA9E,sBAAO,SAAuE,EAAC;;;;KAClF;IAED;;OAEG;IACG,gCAAK,GAAX,UAAY,cAAsB,EAAE,KAAqB,EAAE,OAA+B;;;;4BAC/E,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,EAAE,OAAO,CAAC,EAAA;4BAA3E,sBAAO,SAAoE,EAAC;;;;KAC/E;IAED;;OAEG;IACG,gDAAqB,GAA3B,UAA4B,cAAsB,EAAE,WAAuB,EAAE,OAA6B;;;;4BAC/F,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,OAAO,CAAC,EAAA;4BAAjF,sBAAO,SAA0E,EAAC;;;;KACrF;IAED;;;OAGG;IACG,kDAAuB,GAA7B,UAA8B,cAAsB,EAAE,UAA2B;;;;4BACtE,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,aAAa,CAAC,UAAU,CAAC,EAAA;4BAAzE,sBAAO,SAAkE,EAAC;;;;KAC7E;IAED;;OAEG;IACG,qCAAU,GAAhB,UAAiB,cAAsB,EAAE,KAAoB,EAAE,OAA2B;;;;4BAC/E,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,EAAA;4BAA1E,sBAAO,SAAmE,EAAC;;;;KAC9E;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,cAAsB,EAAE,KAAoB,EAAE,OAA2B;;;;4BAC9E,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,EAAA;4BAAzE,sBAAO,SAAkE,EAAC;;;;KAC7E;IAED;;OAEG;IACG,mCAAQ,GAAd,UAAe,cAAsB,EAAE,GAAW,EAAE,KAAoB,EAAE,OAAoD;;;;4BACnH,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,EAAE,OAAO,CAAC,EAAA;4BAA7E,sBAAO,SAAsE,EAAC;;;;KACjF;IAED;;OAEG;IACG,8CAAmB,GAAzB,UAA0B,cAAsB,EAAE,SAAiB,EAAE,OAA2B;;;;4BACrF,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,SAAS,EAAE,OAAO,CAAC,EAAA;4BAA7E,sBAAO,SAAsE,EAAC;;;;KACjF;IAED;;OAEG;IACG,gDAAqB,GAA3B,UAA4B,cAAsB;;;;4BACvC,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,WAAW,EAAE,EAAA;4BAA7D,sBAAO,SAAsD,EAAC;;;;KACjE;IAED;;OAEG;IACG,2CAAgB,GAAtB,UAAuB,cAAsB,EAAE,KAAoB,EAAE,OAAoE;;;;4BAC9H,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,gBAAgB,CAAC,KAAK,EAAE,OAAO,CAAC,EAAA;4BAAhF,sBAAO,SAAyE,EAAC;;;;KACpF;IAED;;OAEG;IACG,4CAAiB,GAAvB,UAAwB,cAAsB,EAAE,KAAoB,EAAE,WAAmB,EAAE,OAAiC;;;;4BACjH,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,iBAAiB,CAAC,KAAK,EAAE,WAAW,EAAE,OAAO,CAAC,EAAA;4BAA9F,sBAAO,SAAuF,EAAC;;;;KAClG;IAED;;OAEG;IACG,2CAAgB,GAAtB,UAAuB,cAAsB,EAAE,KAAoB,EAAE,MAAc,EAAE,OAAiC;;;;4BAC3G,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,gBAAgB,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,EAAA;4BAAxF,sBAAO,SAAiF,EAAC;;;;KAC5F;IAED;;OAEG;IACG,4CAAiB,GAAvB,UAAwB,cAAsB,EAAE,CAAS,EAAE,CAAS,EAAE,OAAkC;;;;4BAC7F,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,EAAA;4BAAhF,sBAAO,SAAyE,EAAC;;;;KACpF;IAED;;OAEG;IACG,kCAAO,GAAb,UAAc,cAAsB,EAAE,CAAS,EAAE,CAAS,EAAE,OAAwB;;;;4BACzE,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,EAAA;4BAAtE,sBAAO,SAA+D,EAAC;;;;KAC1E;IAED;;OAEG;IACG,gCAAK,GAAX,UAAY,cAAsB,EAAE,IAAqC,EAAE,SAAiB,EAAE,OAAe,EAAE,MAAqB,EAAE,QAAuB,EAAE,OAAgB,EAAE,OAAsD;;;;4BAC5N,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,EAAA;4BAAnH,sBAAO,SAA4G,EAAC;;;;KACvH;IAED;;OAEG;IACG,4CAAiB,GAAvB,UAAwB,cAAsB;;;;4BACnC,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAA;4BAAzD,sBAAO,SAAkD,EAAC;;;;KAC7D;IAED;;OAEG;IACG,gDAAqB,GAA3B,UAA4B,cAAsB,EAAE,OAAwB;;;;4BACjE,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,OAAO,CAAC,EAAA;4BAApE,sBAAO,SAA6D,EAAC;;;;KACxE;IAED;;OAEG;IACG,qDAA0B,GAAhC,UAAiC,cAAsB,EAAE,OAA2B;;;;4BACzE,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,gBAAgB,CAAC,OAAO,CAAC,EAAA;4BAAzE,sBAAO,SAAkE,EAAC;;;;KAC7E;IAED;;OAEG;IACH,kDAAuB,GAAvB,UAAwB,cAAsB,EAAE,OAA2B;QACvE,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;IAC/E,CAAC;IAED;;OAEG;IACH,oDAAyB,GAAzB,UAA0B,cAAsB,EAAE,OAA2B;QACzE,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,yBAAyB,CAAC,OAAO,CAAC,CAAC;IACjF,CAAC;IAED;;OAEG;IACG,qCAAU,GAAhB,UAAiB,cAAsB,EAAE,IAAqB,EAAE,OAAqC;;;;4BAC1F,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,IAAI,EAAE,OAAO,CAAC,EAAA;4BAAzE,sBAAO,SAAkE,EAAC;;;;KAC7E;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,cAAsB,EAAE,GAAkB,EAAE,OAAoC;;;;4BACrF,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,EAAA;4BAAvE,sBAAO,SAAgE,EAAC;;;;KAC3E;IAED;;OAEG;IACG,mCAAQ,GAAd,UAAe,cAAsB;;;;4BAC1B,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,EAAA;4BAA1D,sBAAO,SAAmD,EAAC;;;;KAC9D;IAED;;OAEG;IACH,gDAAqB,GAArB,UAAsB,cAAsB,EAAE,OAAwE;QAClH,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IACnE,CAAC;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,cAAsB,EAAE,GAAoB,EAAE,MAAuB,EAAE,OAA0B;;;;4BACtG,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE,MAAM,EAAE,OAAO,CAAC,EAAA;4BAA/E,sBAAO,SAAwE,EAAC;;;;KACnF;IAED;;;OAGG;IACG,iDAAsB,GAA5B,UAA6B,cAAsB,EAAE,OAAuC;;;;4BACjF,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,sBAAsB,CAAC,OAAO,CAAC,EAAA;4BAA/E,sBAAO,SAAwE,EAAC;;;;KACnF;IAED;;OAEG;IACG,kCAAO,GAAb,UAAc,cAAsB;;;;4BACzB,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,EAAA;4BAAzD,sBAAO,SAAkD,EAAC;;;;KAC7D;IAED;;OAEG;IACG,iCAAM,GAAZ,UAAa,cAAsB,EAAE,OAAe,EAAE,OAAkC;;;;4BAC7E,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,EAAA;4BAAxE,sBAAO,SAAiE,EAAC;;;;KAC5E;IAED;;OAEG;IACG,qCAAU,GAAhB,UAAiB,cAAsB,EAAE,KAAoB,EAAE,GAAkB,EAAE,OAA2B;;;;4BACnG,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,GAAG,EAAE,OAAO,CAAC,EAAA;4BAA/E,sBAAO,SAAwE,EAAC;;;;KACnF;IAED;;OAEG;IACG,gCAAK,GAAX,UAAY,cAAsB,EAAE,OAA2B;;;;4BACpD,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,EAAA;4BAA9D,sBAAO,SAAuD,EAAC;;;;KAClE;IAED;;OAEG;IACG,qCAAU,GAAhB,UAAiB,cAAsB,EAAE,KAAoB,EAAE,MAAqB,EAAE,OAAuE;;;;4BAClJ,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,EAAA;4BAAlF,sBAAO,SAA2E,EAAC;;;;KACtF;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,cAAsB,EAAE,KAAoB,EAAE,MAAqB,EAAE,OAA2B;;;;4BACrG,qBAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,EAAA;4BAAjF,sBAAO,SAA0E,EAAC;;;;KACrF;IAED,4EAA4E;IAC5E,gDAAgD;IAChD,4EAA4E;IAE5E;;;;OAIG;IACG,wCAAa,GAAnB;;;;4BACI,qBAAM,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,EAAA;;wBAA5C,SAA4C,CAAC;;;;;KAChD;IAED;;OAEG;IACG,kCAAO,GAAb;;;;;;KACC;IAED;;OAEG;IACG,kCAAO,GAAb;;;;;;KAEC;IAED;;OAEG;IACG,2CAAgB,GAAtB;;;;;;KAEC;IAED;;OAEG;IACG,4CAAiB,GAAvB;;;;;;KAEC;IAED;;OAEG;IACG,8CAAmB,GAAzB;;;;;;KAEC;IAED;;OAEG;IACH,gCAAK,GAAL,UAAM,KAAa,EAAE,UAAkB;QACnC,MAAM,IAAI,KAAK,CAAC,yDAAyD,CAAC,CAAC;IAC/E,CAAC;IAED;;OAEG;IACH,iCAAM,GAAN,UAAO,KAAa,EAAE,UAAkB,EAAE,KAAgB,EAAE,OAAkB;QAC1E,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAClE,CAAC;IAED;;;OAGG;IACG,iCAAM,GAAZ,UAAa,cAAsB,EAAE,SAAwB;;;;;4BACzC,qBAAM,IAAI,CAAC,kBAAkB;6BACxC,UAAU,CAAC,cAAc,CAAC;6BAC1B,SAAS,CAAC,SAAS,CAAC,EAAA;;wBAFnB,OAAO,GAAG,SAES;wBACnB,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,cAAe,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;wBACpH,sBAAO;gCACH,MAAM,EAAE,OAAO;gCACf,YAAY,EAAE,YAAY;6BAC7B,EAAC;;;;KACL;IAED;;OAEG;IACG,iCAAM,GAAZ,UAAa,cAAsB,EAAE,SAAwB,EAAE,UAAyB;;;;4BACpF,qBAAM,IAAI,CAAC,kBAAkB;6BACxB,UAAU,CAAC,cAAc,CAAC;6BAC1B,SAAS,CAAC,UAAU,EAAE,SAAS,CAAC,EAAA;;wBAFrC,SAEqC,CAAC;;;;;KACzC;IAED;;OAEG;IACG,iCAAM,GAAZ,UAAa,cAAsB,EAAE,UAAgC,EAAE,eAAuB;;;;;wBAC1F,EAAE,CAAC,CAAC,OAAO,UAAU,KAAK,QAAQ,CAAC;4BAC/B,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;wBAE5E,qBAAM,IAAI,CAAC,kBAAkB;iCACxB,UAAU,CAAC,cAAc,CAAC;iCAC1B,SAAS,CAAC,UAAU,CAAC,EAAA;;wBAF1B,SAE0B,CAAC;;;;;KAC9B;IAED;;OAEG;IACG,iDAAsB,GAA5B,UAA6B,cAAsB,EAAE,WAAgB,EAAE,QAAa,EAAE,QAAiB;;;gBACnG,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,mCAAQ,GAAd,UAAe,cAAsB;;;gBACjC,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,eAAyB;;;gBACrC,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KAEjF;IAED;;OAEG;IACG,sCAAW,GAAjB,UAAkB,QAAgB;;;gBAC9B,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC,CAAC;;;KAClF;IAED;;OAEG;IACG,mCAAQ,GAAd,UAAe,cAAsB;;;gBACjC,MAAM,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC;;;KAChF;IAED;;OAEG;IACH,yCAAc,GAAd,UAAe,QAAgB;QAC3B,MAAM,IAAI,KAAK,CAAC,8DAA8D,CAAC,CAAC;IACpF,CAAC;IAED;;OAEG;IACH,uCAAY,GAAZ,UAAa,OAAiB;QAC1B,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG;IACG,sCAAW,GAAjB,UAAkB,KAAY;;;gBAC1B,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,SAAiB;;;gBAC7B,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,cAAsB,EAAE,UAAkB;;;gBACtD,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,WAAyB,EAAE,MAAmB;;;gBAC1D,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,qCAAU,GAAhB,UAAiB,WAAyB,EAAE,OAAsB;;;gBAC9D,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,uCAAY,GAAlB,UAAmB,WAAyB,EAAE,oBAAwC,EAAE,oBAAwC;;;gBAC5H,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,uCAAY,GAAlB,UAAmB,WAAyB,EAAE,oBAAwC,EAAE,SAAsB;;;gBAC1G,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,wCAAa,GAAnB,UAAoB,KAAY,EAAE,cAAoE;;;gBAClG,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,qCAAU,GAAhB,UAAiB,KAAY,EAAE,MAAmB;;;gBAC9C,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,sCAAW,GAAjB,UAAkB,KAAY,EAAE,OAAsB;;;gBAClD,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,4CAAiB,GAAvB,UAAwB,KAAY;;;gBAChC,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,2CAAgB,GAAtB,UAAuB,WAAyB,EAAE,UAA2B;;;gBACzE,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,4CAAiB,GAAvB,UAAwB,WAAyB,EAAE,WAA8B;;;gBAC7E,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,yCAAc,GAApB,UAAqB,WAAyB,EAAE,UAA2B;;;gBACvE,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,0CAAe,GAArB,UAAsB,WAAyB,EAAE,WAA8B;;;gBAC3E,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,sCAAW,GAAjB,UAAkB,cAAsB,EAAE,KAAiB;;;gBACvD,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,oCAAS,GAAf,UAAgB,cAAsB,EAAE,SAAiB;;;gBACrD,MAAM,IAAI,KAAK,CAAC,4DAA4D,CAAC,CAAC;;;KACjF;IAED;;OAEG;IACG,mCAAQ,GAAd,UAAe,cAAsB;;;;4BACjC,qBAAM,IAAI,CAAC,kBAAkB;6BACxB,cAAc,CAAC,cAAc,CAAC,EAAA;;wBADnC,SACmC,CAAC;;;;;KACvC;IAED;;;;OAIG;IACH,0CAAe,GAAf;QACI,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAC;IAC1E,CAAC;IAED;;;;;OAKG;IACH,2CAAgB,GAAhB;QACI,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAC;IAC1E,CAAC;IAED;;OAEG;IACH,uCAAY,GAAZ;QACI,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAC;IAC1E,CAAC;IAED,4EAA4E;IAC5E,oBAAoB;IACpB,4EAA4E;IAE5E;;OAEG;IACO,wCAAa,GAAvB,UAAwB,cAAsB;QAC1C,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;IAC9D,CAAC;IAEL,uBAAC;AAAD,CA5lBA,AA4lBC,IAAA","file":"MongoQueryRunner.js","sourcesContent":["import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    Db,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"./typings\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {MongoEntityManager} from \"../../entity-manager/MongoEntityManager\";\n\n/**\n * Runs queries on a single MongoDB connection.\n */\nexport class MongoQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: MongoEntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     * Always false for mongodb since mongodb has a single query executor instance.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is active in this query executor.\n     * Always false for mongodb since mongodb does not support transactions.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    databaseConnection: Db;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection, databaseConnection: Db) {\n        this.connection = connection;\n        this.databaseConnection = databaseConnection;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    cursor(collectionName: string, query?: ObjectLiteral): Cursor<any> {\n        return this.getCollection(collectionName).find(query || {});\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate(collectionName: string, pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<any> {\n        return this.getCollection(collectionName).aggregate(pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    async bulkWrite(collectionName: string, operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        return await this.getCollection(collectionName).bulkWrite(operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    async count(collectionName: string, query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        return await this.getCollection(collectionName).count(query || {}, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    async createCollectionIndex(collectionName: string, fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        return await this.getCollection(collectionName).createIndex(fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error. Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    async createCollectionIndexes(collectionName: string, indexSpecs: ObjectLiteral[]): Promise<void> {\n        return await this.getCollection(collectionName).createIndexes(indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    async deleteMany(collectionName: string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return await this.getCollection(collectionName).deleteMany(query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    async deleteOne(collectionName: string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return await this.getCollection(collectionName).deleteOne(query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    async distinct(collectionName: string, key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        return await this.getCollection(collectionName).distinct(key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    async dropCollectionIndex(collectionName: string, indexName: string, options?: CollectionOptions): Promise<any> {\n        return await this.getCollection(collectionName).dropIndex(indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    async dropCollectionIndexes(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).dropIndexes();\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndDelete(collectionName: string, query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndDelete(query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndReplace(collectionName: string, query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndReplace(query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndUpdate(collectionName: string, query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndUpdate(query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    async geoHaystackSearch(collectionName: string, x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        return await this.getCollection(collectionName).geoHaystackSearch(x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    async geoNear(collectionName: string, x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        return await this.getCollection(collectionName).geoNear(x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    async group(collectionName: string, keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        return await this.getCollection(collectionName).group(keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    async collectionIndexes(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).indexes();\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    async collectionIndexExists(collectionName: string, indexes: string|string[]): Promise<boolean> {\n        return await this.getCollection(collectionName).indexExists(indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    async collectionIndexInformation(collectionName: string, options?: { full: boolean }): Promise<any> {\n        return await this.getCollection(collectionName).indexInformation(options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp(collectionName: string, options?: CollectionOptions): OrderedBulkOperation {\n        return this.getCollection(collectionName).initializeOrderedBulkOp(options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp(collectionName: string, options?: CollectionOptions): UnorderedBulkOperation {\n        return this.getCollection(collectionName).initializeUnorderedBulkOp(options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    async insertMany(collectionName: string, docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        return await this.getCollection(collectionName).insertMany(docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    async insertOne(collectionName: string, doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        return await this.getCollection(collectionName).insertOne(doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    async isCapped(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).isCapped();\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes(collectionName: string, options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        return this.getCollection(collectionName).listIndexes(options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    async mapReduce(collectionName: string, map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        return await this.getCollection(collectionName).mapReduce(map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    async parallelCollectionScan(collectionName: string, options?: ParallelCollectionScanOptions): Promise<Cursor<any>[]> {\n        return await this.getCollection(collectionName).parallelCollectionScan(options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    async reIndex(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).reIndex();\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    async rename(collectionName: string, newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        return await this.getCollection(collectionName).rename(newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    async replaceOne(collectionName: string, query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).replaceOne(query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    async stats(collectionName: string, options?: { scale: number }): Promise<CollStats> {\n        return await this.getCollection(collectionName).stats(options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    async updateMany(collectionName: string, query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).updateMany(query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    async updateOne(collectionName: string, query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).updateOne(query, update, options);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods (from QueryRunner)\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes all collections from the currently connected database.\n     * Be careful with using this method and avoid using it in production or migrations\n     * (because it can clear all your database).\n     */\n    async clearDatabase(): Promise<void> {\n        await this.databaseConnection.dropDatabase();\n    }\n\n    /**\n     * For MongoDB database we don't create connection, because its single connection already created by a driver.\n     */\n    async connect(): Promise<any> {\n    }\n\n    /**\n     * For MongoDB database we don't release connection, because its single connection.\n     */\n    async release(): Promise<void> {\n        // releasing connection are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Commits transaction.\n     */\n    async commitTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Rollbacks transaction.\n     */\n    async rollbackTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        throw new Error(`Executing SQL query is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        throw new Error(`Stream is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of inserted object id.\n     */\n    async insert(collectionName: string, keyValues: ObjectLiteral): Promise<any> {\n        const results = await this.databaseConnection\n            .collection(collectionName)\n            .insertOne(keyValues);\n        const generatedMap = this.connection.getMetadata(collectionName).objectIdColumn!.createValueMap(results.insertedId);\n        return {\n            result: results,\n            generatedMap: generatedMap\n        };\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(collectionName: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        await this.databaseConnection\n            .collection(collectionName)\n            .updateOne(conditions, valuesMap);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(collectionName: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        if (typeof conditions === \"string\")\n            throw new Error(`String condition is not supported by MongoDB driver.`);\n\n        await this.databaseConnection\n            .collection(collectionName)\n            .deleteOne(conditions);\n    }\n\n    /**\n     * Inserts rows into the closure table.\n     */\n    async insertIntoClosureTable(collectionName: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(collectionName: string): Promise<Table|undefined> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(collectionNames: string[]): Promise<Table[]> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n        //          .            \n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        throw new Error(`Check database queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(collectionName: string): Promise<boolean> {\n        throw new Error(`Check schema queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        throw new Error(`Database create queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemas: string[]): Promise<void[]> {\n        throw new Error(`Schema create queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new table from the given table and columns inside it.\n     */\n    async createTable(table: Table): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops the table.\n     */\n    async dropTable(tableName: string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(collectionName: string, columnName: string): Promise<boolean> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrName: Table|string, column: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(table: Table): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(collectionName: string, index: TableIndex): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(collectionName: string, indexName: string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops collection.\n     */\n    async truncate(collectionName: string): Promise<void> {\n        await this.databaseConnection\n            .dropCollection(collectionName);\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql():  (string|{ up: string, down: string })[] {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets collection from the database with a given name.\n     */\n    protected getCollection(collectionName: string): Collection {\n        return this.databaseConnection.collection(collectionName);\n    }\n\n}"],"sourceRoot":"../.."}
##############################################
/src/browser/driver/mysql/MysqlDriver.js-315-        else if (columnMetadata.type === "json") {
/src/browser/driver/mysql/MysqlDriver.js:316:            value = typeof value === "string" ? JSON.parse(value) : value;
/src/browser/driver/mysql/MysqlDriver.js-317-        }
##############################################
/src/browser/driver/mysql/MysqlDriver.js.map:1:{"version":3,"sources":["../browser/src/driver/mysql/MysqlDriver.ts"],"names":[],"mappings":"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","file":"MysqlDriver.js","sourcesContent":["import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverUtils} from \"../DriverUtils\";\nimport {MysqlQueryRunner} from \"./MysqlQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {MysqlConnectionOptions} from \"./MysqlConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {RandomGenerator} from \"../../util/RandomGenerator\";\nimport {MysqlConnectionCredentialsOptions} from \"./MysqlConnectionCredentialsOptions\";\n\n/**\n * Organizes communication with MySQL DBMS.\n */\nexport class MysqlDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Mysql underlying library.\n     */\n    mysql: any;\n\n    /**\n     * Connection pool.\n     * Used in non-replication mode.\n     */\n    pool: any;\n\n    /**\n     * Pool cluster used in replication mode.\n     */\n    poolCluster: any;\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: MysqlConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.tutorialspoint.com/mysql/mysql-data-types.htm\n     * @see https://dev.mysql.com/doc/refman/5.7/en/data-types.html\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"int\",\n        \"tinyint\",\n        \"smallint\",\n        \"mediumint\",\n        \"bigint\",\n        \"float\",\n        \"double\",\n        \"decimal\",\n        \"date\",\n        \"datetime\",\n        \"timestamp\",\n        \"time\",\n        \"year\",\n        \"char\",\n        \"varchar\",\n        \"blob\",\n        \"text\",\n        \"tinyblob\",\n        \"tinytext\",\n        \"mediumblob\",\n        \"mediumtext\",\n        \"longblob\",\n        \"longtext\",\n        \"enum\",\n        \"json\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"int\",\n        \"tinyint\",\n        \"smallint\",\n        \"mediumint\",\n        \"bigint\",\n        \"char\",\n        \"varchar\",\n        \"blob\",\n        \"text\"\n    ];\n\n    /**\n     * ORM has special columns and we need to know what database column types should be for those columns.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime\",\n        createDatePrecision: 6,\n        createDateDefault: \"CURRENT_TIMESTAMP(6)\",\n        updateDate: \"datetime\",\n        updateDatePrecision: 6,\n        updateDateDefault: \"CURRENT_TIMESTAMP(6)\",\n        version: \"int\",\n        treeLevel: \"int\",\n        migrationName: \"varchar\",\n        migrationTimestamp: \"bigint\",\n        cacheId: \"int\",\n        cacheIdentifier: \"varchar\",\n        cacheTime: \"bigint\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults = {\n        varchar: { length: 255 },\n        int: { length: 11 },\n        tinyint: { length: 4 },\n        smallint: { length: 5 },\n        mediumint: { length: 9 },\n        bigint: { length: 20 },\n        year: { length: 4 }\n    };\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n    \n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as MysqlConnectionOptions;\n        this.isReplicated = this.options.replication ? true : false;\n\n        // load mysql package\n        this.loadDependencies();\n\n        // validate options to make sure everything is set\n        // todo: revisit validation with replication in mind\n        // if (!(this.options.host || (this.options.extra && this.options.extra.socketPath)) && !this.options.socketPath)\n        //     throw new DriverOptionNotSetError(\"socketPath and host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.database)\n        //     throw new DriverOptionNotSetError(\"database\");\n        // todo: check what is going on when connection is setup without database and how to connect to a database then?\n        // todo: provide options to auto-create a database if it does not exist yet\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.poolCluster = this.mysql.createPoolCluster(this.options.replication);\n            this.options.replication.slaves.forEach((slave, index) => {\n                this.poolCluster.add(\"SLAVE\" + index, this.createConnectionOptions(this.options, slave));\n            });\n            this.poolCluster.add(\"MASTER\", this.createConnectionOptions(this.options, this.options.replication.master));\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.pool = await this.createPool(this.createConnectionOptions(this.options, this.options));\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.poolCluster && !this.pool)\n            return Promise.reject(new ConnectionIsNotSetError(\"mysql\"));\n\n        if (this.poolCluster) {\n            return new Promise<void>((ok, fail) => {\n                this.poolCluster.end((err: any) => err ? fail(err) : ok());\n                this.poolCluster = undefined;\n            });\n        }\n        if (this.pool) {\n            return new Promise<void>((ok, fail) => {\n                this.pool.end((err: any) => {\n                    if (err) return fail(err);\n                    this.pool = undefined;\n                    ok();\n                });\n            });\n        }\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new MysqlQueryRunner(this, mode);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            } else {\n                escapedParameters.push(parameters[key.substr(1)]);\n                return \"?\";\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return \"`\" + columnName + \"`\";\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToDate(value, true);\n\n        } else if (columnMetadata.isGenerated && columnMetadata.generationStrategy === \"uuid\" && !value) {\n            return RandomGenerator.uuid4();\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n            \n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            value = typeof value === \"string\" ? JSON.parse(value) : value;\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n            \n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type: ColumnType, length?: number | string, precision?: number, scale?: number }): string {\n        if (column.type === Number || column.type === \"integer\") {\n            return \"int\";\n\n        } else if (column.type === String) {\n            return \"varchar\";\n\n        } else if (column.type === Date) {\n            return \"datetime\";\n\n        } else if ((column.type as any) === Buffer) {\n            return \"blob\";\n\n        } else if (column.type === Boolean) {\n            return \"tinyint\";\n\n        } else if (column.type === \"uuid\") {\n            return \"varchar\";\n\n        } else if (column.type === \"simple-array\") {\n            return \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            return \"text\";\n\n        } else {\n            return column.type as string || \"\";\n        }\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"1\" : \"0\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique || \n            !!column.entityMetadata.indices.find(index => index.isUnique && index.columns.length === 1 && index.columns[0] === column);\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n        \n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();       \n\n        return \"\";\n    }    \n    \n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return new Promise<any>((ok, fail) => {\n            if (this.poolCluster) {\n                this.poolCluster.getConnection(\"MASTER\", (err: any, dbConnection: any) => {\n                    err ? fail(err) : ok(dbConnection);\n                });\n\n            } else if (this.pool) {\n                this.pool.getConnection((err: any, dbConnection: any) => {\n                    err ? fail(err) : ok(dbConnection);\n                });\n            } else {\n                fail(new Error(`Connection is not established with mysql database`));\n            }\n        });\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.poolCluster)\n            return this.obtainMasterConnection();\n\n        return new Promise<any>((ok, fail) => {\n            this.poolCluster.getConnection(\"SLAVE*\", (err: any, dbConnection: any) => {\n                err ? fail(err) : ok(dbConnection);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all driver dependencies.\n     */\n    protected loadDependencies(): void {\n        try {\n            this.mysql = PlatformTools.load(\"mysql\");  // try to load first supported package\n\n        } catch (e) {\n            try {\n                this.mysql = PlatformTools.load(\"mysql2\"); // try to load second supported package\n\n            } catch (e) {\n                throw new DriverPackageNotInstalledError(\"Mysql\", \"mysql\");\n            }\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected createConnectionOptions(options: MysqlConnectionOptions, credentials: MysqlConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        return Object.assign({}, {\n            charset: options.charset,\n            timezone: options.timezone,\n            connectTimeout: options.connectTimeout,\n            insecureAuth: options.insecureAuth,\n            supportBigNumbers: options.supportBigNumbers,\n            bigNumberStrings: options.bigNumberStrings,\n            dateStrings: options.dateStrings,\n            debug: options.debug,\n            trace: options.trace,\n            multipleStatements: options.multipleStatements,\n            flags: options.flags\n        }, {\n            host: credentials.host,\n            user: credentials.username,\n            password: credentials.password,\n            database: credentials.database,\n            port: credentials.port,\n            ssl: options.ssl\n        }, options.extra || {});\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected createPool(connectionOptions: any): Promise<any> {\n\n        // create a connection pool\n        const pool = this.mysql.createPool(connectionOptions);\n\n        // make sure connection is working fine\n        return new Promise<void>((ok, fail) => {\n            // (issue #610) we make first connection to database to make sure if connection credentials are wrong\n            // we give error before calling any other method that creates actual query runner\n            pool.getConnection((err: any, connection: any) => {\n                if (err)\n                    return pool.end(() => fail(err));\n\n                connection.release();\n                ok(pool);\n            });\n        });\n    }\n\n}\n"],"sourceRoot":"../.."}
##############################################
/src/browser/driver/websql/WebsqlDriver.js-119-        if (columnMetadata.type === "json") {
/src/browser/driver/websql/WebsqlDriver.js:120:            return JSON.parse(value);
/src/browser/driver/websql/WebsqlDriver.js-121-        }
##############################################
/src/browser/driver/websql/WebsqlDriver.js.map:1:{"version":3,"sources":["../browser/src/driver/websql/WebsqlDriver.ts"],"names":[],"mappings":"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","file":"WebsqlDriver.js","sourcesContent":["import {DriverUtils} from \"../DriverUtils\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {WebsqlQueryRunner} from \"./WebsqlQueryRunner\";\nimport {Connection} from \"../../connection/Connection\";\nimport {WebSqlConnectionOptions} from \"./WebSqlConnectionOptions\";\nimport {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\n\n/**\n * Organizes communication with WebSQL in the browser.\n */\nexport class WebsqlDriver extends AbstractSqliteDriver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: WebSqlConnectionOptions;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n        \n        this.options = connection.options as WebSqlConnectionOptions;\n        Object.assign(connection.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        this.database = this.options.database;\n\n        // validate options to make sure everything is set\n        // if (!this.options.host)\n        //     throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        if (!this.options.database)\n            throw new DriverOptionNotSetError(\"database\");\n        // todo: what about extra options: version, description, size\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    disconnect(): Promise<void> {\n        return Promise.resolve();\n        // if (!this.databaseConnection)\n        //     throw new ConnectionIsNotSetError(\"websql\");\n\n        // return new Promise<void>((ok, fail) => {\n            // const handler = (err: any) => err ? fail(err) : ok();\n            // todo: find out how to close connection\n            // ok();\n        // });\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\"): WebsqlQueryRunner {\n        return new WebsqlQueryRunner(this);\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n        }\n\n        return super.preparePersistentValue(value, columnMetadata);\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.type === \"json\") {\n            return JSON.parse(value);\n        }\n\n        return super.prepareHydratedValue(value, columnMetadata);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            }\n            // Websql doesn't support queries boolean values. Therefore 1 and 0 has to be used.\n            else if ((typeof value) === \"boolean\") {\n                escapedParameters.push((value ? 1 : 0));\n                return \"?\";\n            } else {\n                escapedParameters.push(value);\n                return \"?\";\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return columnName; // \"`\" + columnName + \"`\";\n    }\n}"],"sourceRoot":"../.."}
##############################################
/src/browser/repository/MongoRepository.js.map:1:{"version":3,"sources":["../browser/src/repository/MongoRepository.ts"],"names":[],"mappings":"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","file":"MongoRepository.js","sourcesContent":["import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {Repository} from \"./Repository\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"../driver/mongodb/typings\";\nimport {MongoEntityManager} from \"../entity-manager/MongoEntityManager\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Repository used to manage mongodb documents of a single entity type.\n */\nexport class MongoRepository<Entity extends ObjectLiteral> extends Repository<Entity> {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity Manager used by this repository.\n     */\n    readonly manager: MongoEntityManager;\n\n    // -------------------------------------------------------------------------\n    // Overridden Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Raw SQL query execution is not supported by MongoDB.\n     * Calling this method will return an error.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        throw new Error(`Queries aren't supported by MongoDB.`);\n    }\n\n    /**\n     * Using Query Builder with MongoDB is not supported yet.\n     * Calling this method will return an error.\n     */\n    createQueryBuilder(alias: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity> {\n        throw new Error(`Query Builder is not supported by MongoDB.`);\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    find(optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        return this.manager.find(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount(optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<[ Entity[], number ]> {\n        return this.manager.findAndCount(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    findByIds(ids: any[], optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        return this.manager.findByIds(this.metadata.target, ids, optionsOrConditions);\n    }\n\n    /**\n     * Finds first entity that matches given conditions and/or find options.\n     */\n    findOne(optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOne(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    findOneById(id: any, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOneById(this.metadata.target, id, optionsOrConditions);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    createCursor(query?: ObjectLiteral): Cursor<Entity> {\n        return this.manager.createCursor(this.metadata.target, query);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     * This returns modified version of cursor that transforms each result into Entity model.\n     */\n    createEntityCursor(query?: ObjectLiteral): Cursor<Entity> {\n        return this.manager.createEntityCursor(this.metadata.target, query);\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate(pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<Entity> {\n        return this.manager.aggregate(this.metadata.target, pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    bulkWrite(operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        return this.manager.bulkWrite(this.metadata.target, operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    count(query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        return this.manager.count(this.metadata.target, query || {}, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    createCollectionIndex(fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        return this.manager.createCollectionIndex(this.metadata.target, fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error.\n     * Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    createCollectionIndexes(indexSpecs: ObjectLiteral[]): Promise<void> {\n        return this.manager.createCollectionIndexes(this.metadata.target, indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    deleteMany(query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return this.manager.deleteMany(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    deleteOne(query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return this.manager.deleteOne(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    distinct(key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        return this.manager.distinct(this.metadata.tableName, key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    dropCollectionIndex(indexName: string, options?: CollectionOptions): Promise<any> {\n        return this.manager.dropCollectionIndex(this.metadata.tableName, indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    dropCollectionIndexes(): Promise<any> {\n        return this.manager.dropCollectionIndexes(this.metadata.tableName);\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndDelete(query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndDelete(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndReplace(query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndReplace(this.metadata.tableName, query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndUpdate(query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndUpdate(this.metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    geoHaystackSearch(x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        return this.manager.geoHaystackSearch(this.metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    geoNear(x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        return this.manager.geoNear(this.metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    group(keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        return this.manager.group(this.metadata.tableName, keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexes(): Promise<any> {\n        return this.manager.collectionIndexes(this.metadata.tableName);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexExists(indexes: string|string[]): Promise<boolean> {\n        return this.manager.collectionIndexExists(this.metadata.tableName, indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    collectionIndexInformation(options?: { full: boolean }): Promise<any> {\n        return this.manager.collectionIndexInformation(this.metadata.tableName, options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp(options?: CollectionOptions): OrderedBulkOperation {\n        return this.manager.initializeOrderedBulkOp(this.metadata.tableName, options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp(options?: CollectionOptions): UnorderedBulkOperation {\n        return this.manager.initializeUnorderedBulkOp(this.metadata.tableName, options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    insertMany(docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        return this.manager.insertMany(this.metadata.tableName, docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    insertOne(doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        return this.manager.insertOne(this.metadata.tableName, doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    isCapped(): Promise<any> {\n        return this.manager.isCapped(this.metadata.tableName);\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes(options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        return this.manager.listCollectionIndexes(this.metadata.tableName, options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    mapReduce(map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        return this.manager.mapReduce(this.metadata.tableName, map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    parallelCollectionScan(options?: ParallelCollectionScanOptions): Promise<Cursor<Entity>[]> {\n        return this.manager.parallelCollectionScan(this.metadata.tableName, options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    reIndex(): Promise<any> {\n        return this.manager.reIndex(this.metadata.tableName);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    rename(newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        return this.manager.rename(this.metadata.tableName, newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    replaceOne(query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return this.manager.replaceOne(this.metadata.tableName, query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    stats(options?: { scale: number }): Promise<CollStats> {\n        return this.manager.stats(this.metadata.tableName, options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    updateMany(query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        return this.manager.updateMany(this.metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    updateOne(query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return this.manager.updateOne(this.metadata.tableName, query, update, options);\n    }\n\n}"],"sourceRoot":".."}
##############################################
/src/browser/repository/MongoRepository.js-258-    MongoRepository.prototype.rename = function (newName, options) {
/src/browser/repository/MongoRepository.js:259:        return this.manager.rename(this.metadata.tableName, newName, options);
/src/browser/repository/MongoRepository.js-260-    };
##############################################
/src/browser/cache/RedisQueryResultCache.js-108-                        return fail(err);
/src/browser/cache/RedisQueryResultCache.js:109:                    ok(JSON.parse(result));
/src/browser/cache/RedisQueryResultCache.js-110-                });
##############################################
/src/browser/cache/RedisQueryResultCache.js-115-                        return fail(err);
/src/browser/cache/RedisQueryResultCache.js:116:                    ok(JSON.parse(result));
/src/browser/cache/RedisQueryResultCache.js-117-                });
##############################################
/src/browser/cache/RedisQueryResultCache.js.map:1:{"version":3,"sources":["../browser/src/cache/RedisQueryResultCache.ts"],"names":[],"mappings":"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","file":"RedisQueryResultCache.js","sourcesContent":["import {QueryResultCache} from \"./QueryResultCache\";\nimport {QueryResultCacheOptions} from \"./QueryResultCacheOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\nimport {Connection} from \"../connection/Connection\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * Caches query result into Redis database.\n */\nexport class RedisQueryResultCache implements QueryResultCache {\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Redis module instance loaded dynamically.\n     */\n    protected redis: any;\n\n    /**\n     * Connected redis client.\n     */\n    protected client: any;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n        this.redis = this.loadRedis();\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    async connect(): Promise<void> {\n        const cacheOptions: any = this.connection.options.cache;\n        if (cacheOptions && cacheOptions.options) {\n            this.client = this.redis.createClient(cacheOptions.options);\n        } else {\n            this.client = this.redis.createClient();\n        }\n    }\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.quit((err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n                this.client = undefined;\n            });\n        });\n    }\n\n    /**\n     * Creates table for storing cache if it does not exist yet.\n     */\n    async synchronize(queryRunner: QueryRunner): Promise<void> {\n    }\n\n    /**\n     * Caches given query result.\n     * Returns cache result if found.\n     * Returns undefined if result is not cached.\n     */\n    getFromCache(options: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<QueryResultCacheOptions|undefined> {\n        return new Promise((ok, fail) => {\n\n            if (options.identifier) {\n                this.client.get(options.identifier, (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok(JSON.parse(result));\n                });\n\n            } else if (options.query) {\n                this.client.get(options.query, (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok(JSON.parse(result));\n                });\n\n            } else {\n                ok(undefined);\n            }\n        });\n    }\n\n    /**\n     * Checks if cache is expired or not.\n     */\n    isExpired(savedCache: QueryResultCacheOptions): boolean {\n        return (savedCache.time! + savedCache.duration) < new Date().getTime();\n    }\n\n    /**\n     * Stores given query result in the cache.\n     */\n    async storeInCache(options: QueryResultCacheOptions, savedCache: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            if (options.identifier) {\n                this.client.set(options.identifier, JSON.stringify(options), (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok();\n                });\n\n            } else if (options.query) {\n                this.client.set(options.query, JSON.stringify(options), (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok();\n                });\n            }\n        });\n    }\n\n    /**\n     * Clears everything stored in the cache.\n     */\n    async clear(queryRunner?: QueryRunner): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.flushdb((err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Removes all cached results by given identifiers from cache.\n     */\n    async remove(identifiers: string[], queryRunner?: QueryRunner): Promise<void> {\n        await Promise.all(identifiers.map(identifier => {\n            return this.deleteKey(identifier);\n        }));\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes a single key from redis database.\n     */\n    protected deleteKey(key: string): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.del(key, (err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Loads redis dependency.\n     */\n    protected loadRedis(): any {\n        try {\n            return PlatformTools.load(\"redis\");\n\n        } catch (e) {\n            throw new Error(`Cannot use cache because redis is not installed. Please run \"npm i redis --save\".`);\n        }\n    }\n\n\n}"],"sourceRoot":".."}
##############################################
/src/browser/util/DateUtils.js.map:1:{"version":3,"sources":["../browser/src/util/DateUtils.ts"],"names":[],"mappings":"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","file":"DateUtils.js","sourcesContent":["/**\n * Provides utilities to transform hydrated and persisted data.\n */\nexport class DateUtils {\n\n    // -------------------------------------------------------------------------\n    // Public Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Normalizes date object hydrated from the database.\n     */\n    static normalizeHydratedDate(mixedDate: Date|string|undefined): Date|string|undefined {\n        if (!mixedDate)\n            return mixedDate;\n\n        const date = typeof mixedDate === \"string\" ? new Date(mixedDate) : mixedDate as Date;\n        // if (!storedInLocal) {\n\n        // else if it was not stored in local timezone, means it was stored in UTC\n        // because driver hydrates it with timezone applied why we need to add timezone hours to match a local timezone\n\n        const correctedDate = new Date();\n        correctedDate.setUTCFullYear(date.getFullYear(), date.getMonth(), date.getDate());\n        correctedDate.setUTCHours(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n        return correctedDate;\n        // }\n        // return date;\n    }\n\n    /**\n     * Converts given value into date string in a \"YYYY-MM-DD\" format.\n     */\n    static mixedDateToDateString(value: Date|any): string|any {\n        if (value instanceof Date)\n            return this.formatZerolessValue(value.getFullYear()) + \"-\" + this.formatZerolessValue(value.getMonth() + 1) + \"-\" + this.formatZerolessValue(value.getDate());\n\n        return value;\n    }\n\n    /**\n     * Converts given value into date object.\n     */\n    static mixedDateToDate(mixedDate: Date|string, toUtc: boolean = false, useMilliseconds = true): Date {\n        let date = typeof mixedDate === \"string\" ? new Date(mixedDate) : mixedDate;\n\n        if (toUtc)\n            date = new Date(\n                date.getUTCFullYear(),\n                date.getUTCMonth(),\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds(),\n                date.getUTCMilliseconds()\n            );\n\n        if (!useMilliseconds)\n            date.setUTCMilliseconds(0);\n\n        return date;\n    }\n\n    /**\n     * Converts given value into time string in a \"HH:mm:ss\" format.\n     */\n    static mixedDateToTimeString(value: Date|any, skipSeconds: boolean = false): string|any {\n        if (value instanceof Date)\n            return this.formatZerolessValue(value.getHours()) +\n                \":\" + this.formatZerolessValue(value.getMinutes()) +\n                (!skipSeconds ? \":\" + this.formatZerolessValue(value.getSeconds()) : \"\");\n\n        return value;\n    }\n\n    /**\n     * Converts given value into time string in a \"HH:mm:ss\" format.\n     */\n    static mixedTimeToDate(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            const [hours, minutes, seconds] = value.split(\":\");\n            const date = new Date();\n            if (hours)\n                date.setHours(parseInt(hours));\n            if (minutes)\n                date.setMinutes(parseInt(minutes));\n            if (seconds)\n                date.setSeconds(parseInt(seconds));\n            return date;\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given string value with \"-\" separator into a \"HH:mm:ss\" format.\n     */\n    static mixedTimeToString(value: string|any, skipSeconds: boolean = false): string|any {\n        value = value instanceof Date ? (value.getHours() + \":\" + value.getMinutes() + (!skipSeconds ? \":\" + value.getSeconds() : \"\")) : value;\n        if (typeof value === \"string\") {\n            return value.split(\":\")\n                .map(v => v.length === 1 ? \"0\" + v : v) // append zero at beginning if we have a first-zero-less number\n                .join(\":\");\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given value into datetime string in a \"YYYY-MM-DD HH-mm-ss\" format.\n     */\n    static mixedDateToDatetimeString(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            value = new Date(value);\n        }\n        if (value instanceof Date) {\n            return this.formatZerolessValue(value.getFullYear()) + \"-\" +\n                this.formatZerolessValue(value.getMonth() + 1) + \"-\" +\n                this.formatZerolessValue(value.getDate()) + \" \" +\n                this.formatZerolessValue(value.getHours()) + \":\" +\n                this.formatZerolessValue(value.getMinutes()) + \":\" +\n                this.formatZerolessValue(value.getSeconds()) + \".\" +\n                this.formatMilliseconds(value.getUTCMilliseconds());\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given value into utc datetime string in a \"YYYY-MM-DD HH-mm-ss\" format.\n     */\n    static mixedDateToUtcDatetimeString(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            value = new Date(value);\n        }\n        if (value instanceof Date) {\n            return this.formatZerolessValue(value.getUTCFullYear()) + \"-\" +\n                this.formatZerolessValue(value.getUTCMonth() + 1) + \"-\" +\n                this.formatZerolessValue(value.getUTCDate()) + \" \" +\n                this.formatZerolessValue(value.getUTCHours()) + \":\" +\n                this.formatZerolessValue(value.getUTCMinutes()) + \":\" +\n                this.formatZerolessValue(value.getUTCSeconds()) + \".\" +\n                this.formatMilliseconds(value.getUTCMilliseconds());\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts each item in the given array to string joined by \",\" separator.\n     */\n    static simpleArrayToString(value: any[]|any): string[]|any {\n        if (value instanceof Array) {\n            return (value as any[])\n                .map(i => String(i))\n                .join(\",\");\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given string to simple array split by \",\" separator.\n     */\n    static stringToSimpleArray(value: string|any): string|any {\n        if (value instanceof String || typeof value === \"string\") {\n            if (value.length > 0) {\n                return value.split(\",\");\n            } else {\n                return [];\n            }\n        }\n\n        return value;\n    }\n\n    static simpleJsonToString(value: any): string {\n        return JSON.stringify(value);\n    }\n\n    static stringToSimpleJson(value: string) {\n        return JSON.parse(value);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Formats given number to \"0x\" format, e.g. if it is 1 then it will return \"01\".\n     */\n    private static formatZerolessValue(value: number): string {\n        if (value < 10)\n            return \"0\" + value;\n\n        return String(value);\n    }\n\n    /**\n     * Formats given number to \"0x\" format, e.g. if it is 1 then it will return \"01\".\n     */\n    private static formatMilliseconds(value: number): string {\n        if (value < 100)\n            return \"0\" + value;\n\n        return String(value);\n    }\n\n}\n"],"sourceRoot":".."}
##############################################
/src/browser/util/DateUtils.js-153-    DateUtils.stringToSimpleJson = function (value) {
/src/browser/util/DateUtils.js:154:        return JSON.parse(value);
/src/browser/util/DateUtils.js-155-    };
##############################################
/src/typeorm-browser.js-1460-                    if (this.type === "browser")
/src/typeorm-browser.js:1461:                        throw new Error("This option/function is not supported in the browser environment. Failed operation: fs.writeFile(\"" + path + "\").");
/src/typeorm-browser.js-1462-                    return Promise.reject(null);
##############################################
/src/typeorm-browser.js-2299-                            switch (_a.label) {
/src/typeorm-browser.js:2300:                                case 0: return [4 /*yield*/, this.getCollection(collectionName).rename(newName, options)];
/src/typeorm-browser.js-2301-                                case 1: return [2 /*return*/, _a.sent()];
##############################################
/src/typeorm-browser.js-4255-                    var metadata = this.connection.getMetadata(entityClassOrName);
/src/typeorm-browser.js:4256:                    return this.queryRunner.rename(metadata.tableName, newName, options);
/src/typeorm-browser.js-4257-                };
##############################################
/src/typeorm-browser.js-4598-                MongoRepository.prototype.rename = function (newName, options) {
/src/typeorm-browser.js:4599:                    return this.manager.rename(this.metadata.tableName, newName, options);
/src/typeorm-browser.js-4600-                };
##############################################
/src/typeorm-browser.js-4994-                DateUtils.stringToSimpleJson = function (value) {
/src/typeorm-browser.js:4995:                    return JSON.parse(value);
/src/typeorm-browser.js-4996-                };
##############################################
/src/typeorm-browser.js-12656-                    else if (columnMetadata.type === "json") {
/src/typeorm-browser.js:12657:                        value = JSON.parse(value);
/src/typeorm-browser.js-12658-                    }
##############################################
/src/typeorm-browser.js-14550-                    else if (columnMetadata.type === "json") {
/src/typeorm-browser.js:14551:                        value = typeof value === "string" ? JSON.parse(value) : value;
/src/typeorm-browser.js-14552-                    }
##############################################
/src/typeorm-browser.js-20325-                            var localStorageContent = PlatformTools_8.PlatformTools.getGlobalVariable().localStorage.getItem(fileNameOrLocalStorageOrData);
/src/typeorm-browser.js:20326:                            return this.createDatabaseConnectionWithImport(JSON.parse(localStorageContent));
/src/typeorm-browser.js-20327-                        }
##############################################
/src/typeorm-browser.js-20357-                                    content = new Buffer(this.databaseConnection.export());
/src/typeorm-browser.js:20358:                                    return [4 /*yield*/, PlatformTools_8.PlatformTools.writeFile(path, content)];
/src/typeorm-browser.js-20359-                                case 2:
##############################################
/src/typeorm-browser.js-23712-                                    if (savedQueryResultCacheOptions && !this.connection.queryResultCache.isExpired(savedQueryResultCacheOptions))
/src/typeorm-browser.js:23713:                                        return [2 /*return*/, JSON.parse(savedQueryResultCacheOptions.result)];
/src/typeorm-browser.js-23714-                                    _b.label = 2;
##############################################
/src/typeorm-browser.js-27210-                    if (columnMetadata.type === "json") {
/src/typeorm-browser.js:27211:                        return JSON.parse(value);
/src/typeorm-browser.js-27212-                    }
##############################################
/src/typeorm-browser.js-30051-                                    return fail(err);
/src/typeorm-browser.js:30052:                                ok(JSON.parse(result));
/src/typeorm-browser.js-30053-                            });
##############################################
/src/typeorm-browser.js-30058-                                    return fail(err);
/src/typeorm-browser.js:30059:                                ok(JSON.parse(result));
/src/typeorm-browser.js-30060-                            });
##############################################
/src/typeorm-browser.js-31126-                        schema: PlatformTools_15.PlatformTools.getEnvVariable("TYPEORM_SCHEMA"),
/src/typeorm-browser.js:31127:                        extra: PlatformTools_15.PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA") ? JSON.parse(PlatformTools_15.PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA")) : undefined,
/src/typeorm-browser.js-31128-                        synchronize: OrmUtils_14.OrmUtils.toBoolean(PlatformTools_15.PlatformTools.getEnvVariable("TYPEORM_SYNCHRONIZE")),
##############################################
/src/platform/PlatformTools.js-167-                return [2 /*return*/, new Promise(function (ok, fail) {
/src/platform/PlatformTools.js:168:                        fs.writeFile(path, data, function (err) {
/src/platform/PlatformTools.js-169-                            if (err)
##############################################
/src/platform/PlatformTools.js.map:1:{"version":3,"sources":["../../src/platform/PlatformTools.ts"],"names":[],"mappings":"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","file":"PlatformTools.js","sourcesContent":["import * as path from \"path\";\nimport * as fs from \"fs\";\nimport {highlight, Theme} from \"cli-highlight\";\nexport {ReadStream} from \"fs\";\nexport {EventEmitter} from \"events\";\nexport {Readable, Writable} from \"stream\";\n\nconst chalk = require(\"chalk\");\n\n/**\n * Platform-specific tools.\n */\nexport class PlatformTools {\n\n    /**\n     * Type of the currently running platform.\n     */\n    static type: \"browser\"|\"node\" = \"node\";\n\n    /**\n     * Gets global variable where global stuff can be stored.\n     */\n    static getGlobalVariable(): any {\n        return global;\n    }\n\n    /**\n     * Loads (\"require\"-s) given file or package.\n     * This operation only supports on node platform\n     */\n    static load(name: string): any {\n\n        // if name is not absolute or relative, then try to load package from the node_modules of the directory we are currently in\n        // this is useful when we are using typeorm package globally installed and it accesses drivers\n        // that are not installed globally\n\n        try {\n\n            // switch case to explicit require statements for webpack compatibility.\n\n            switch (name) {\n\n                /**\n                * mongodb\n                */\n                case \"mongodb\":\n                    return require(\"mongodb\");\n\n                /**\n                * mysql\n                */\n                case \"mysql\":\n                    return require(\"mysql\");\n\n                case \"mysql2\":\n                    return require(\"mysql2\");\n\n                /**\n                * oracle\n                */\n                case \"oracledb\":\n                    return require(\"oracledb\");\n\n                /**\n                * postgres\n                */\n                case \"pg\":\n                    return require(\"pg\");\n\n                case \"pg-native\":\n                    return require(\"pg-native\");\n\n                case \"pg-query-stream\":\n                    return require(\"pg-query-stream\");\n\n                /**\n                * redis\n                */\n                case \"redis\":\n                    return require(\"redis\");\n\n                /**\n                * sqlite\n                */\n                case \"sqlite3\":\n                    return require(\"sqlite3\");\n\n                /**\n                * sqlserver\n                */\n                case \"mssql\":\n                    return require(\"mssql\");\n\n                /**\n                * other modules\n                */\n                case \"mkdirp\":\n                    return require(\"mkdirp\");\n\n                case \"path\":\n                    return require(\"path\");\n\n                case \"debug\":\n                    return require(\"debug\");\n\n                /**\n                * default\n                */\n                default:\n                    return require(name);\n\n            }\n\n        } catch (err) {\n            if (!path.isAbsolute(name) && name.substr(0, 2) !== \"./\" && name.substr(0, 3) !== \"../\") {\n                return require(path.resolve(process.cwd() + \"/node_modules/\" + name));\n            }\n\n            throw err;\n        }\n    }\n\n    /**\n     * Normalizes given path. Does \"path.normalize\".\n     */\n    static pathNormalize(pathStr: string): string {\n        return path.normalize(pathStr);\n    }\n\n    /**\n     * Gets file extension. Does \"path.extname\".\n     */\n    static pathExtname(pathStr: string): string {\n        return path.extname(pathStr);\n    }\n\n    /**\n     * Resolved given path. Does \"path.resolve\".\n     */\n    static pathResolve(pathStr: string): string {\n        return path.resolve(pathStr);\n    }\n\n    /**\n     * Synchronously checks if file exist. Does \"fs.existsSync\".\n     */\n    static fileExist(pathStr: string): boolean {\n        return fs.existsSync(pathStr);\n    }\n    \n    static readFileSync(filename: string): Buffer {\n        return fs.readFileSync(filename);\n    }\n\n    static appendFileSync(filename: string, data: any): void {\n        fs.appendFileSync(filename, data);\n    }\n\n    static async writeFile(path: string, data: any): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            fs.writeFile(path, data, (err) => {\n                if (err) fail(err);\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Gets environment variable.\n     */\n    static getEnvVariable(name: string): any {\n        return process.env[name];\n    }\n\n    /**\n     * Highlights sql string to be print in the console.\n     */\n    static highlightSql(sql: string) {\n        const theme: Theme = {\n            \"keyword\": chalk.blueBright,\n            \"literal\": chalk.blueBright,\n            \"string\": chalk.white,\n            \"type\": chalk.magentaBright,\n            \"built_in\": chalk.magentaBright,\n            \"comment\": chalk.gray,\n        };\n        return highlight(sql, { theme: theme, language: \"sql\" });\n    }\n\n    /**\n     * Highlights json string to be print in the console.\n     */\n    static highlightJson(json: string) {\n        return highlight(json, { language: \"json\" });\n    }\n\n    /**\n     * Logging functions needed by AdvancedConsoleLogger\n     */\n    static logInfo(prefix: string, info: any) {\n        console.log(chalk.gray.underline(prefix) + \" \", info);\n    }\n\n    static logError(prefix: string, error: any) {\n        console.log(chalk.underline.red(prefix) + \" \", error);\n    }\n    \n    static logWarn(prefix: string, warning: any) {\n        console.log(chalk.underline.yellow(prefix) + \" \", warning);\n    }\n    \n    static log(message: string) {\n        console.log(chalk.underline(message));\n    }\n\n    static warn(message: string) {\n        return chalk.yellow(message);\n    }\n}\n"],"sourceRoot":".."}
##############################################
/src/typeorm-browser.js.map:1:{"version":3,"sources":["build/systemjs/typeorm/driver/types/ColumnTypes.ts","build/systemjs/typeorm/metadata/types/RelationTypes.ts","build/systemjs/typeorm/naming-strategy/NamingStrategyInterface.ts","build/systemjs/typeorm/metadata/types/OnDeleteType.ts","build/systemjs/typeorm/metadata/ForeignKeyMetadata.ts","build/systemjs/typeorm/common/ObjectLiteral.ts","build/systemjs/typeorm/metadata-args/EmbeddedMetadataArgs.ts","build/systemjs/typeorm/query-builder/QueryBuilderUtils.ts","build/systemjs/typeorm/query-builder/Alias.ts","build/systemjs/typeorm/find-options/OrderByCondition.ts","build/systemjs/typeorm/query-builder/JoinAttribute.ts","build/systemjs/typeorm/query-builder/relation-count/RelationCountAttribute.ts","build/systemjs/typeorm/query-builder/SelectQuery.ts","build/systemjs/typeorm/error/ConnectionIsNotSetError.ts","build/systemjs/typeorm/error/DriverPackageNotInstalledError.ts","build/systemjs/typeorm/driver/DriverUtils.ts","build/systemjs/typeorm/error/TransactionAlreadyStartedError.ts","build/systemjs/typeorm/error/TransactionNotStartedError.ts","build/systemjs/typeorm/metadata-args/IndexMetadataArgs.ts","build/systemjs/typeorm/metadata/IndexMetadata.ts","build/systemjs/typeorm/schema-builder/schema/TableIndex.ts","build/systemjs/typeorm/schema-builder/schema/TableForeignKey.ts","build/systemjs/typeorm/schema-builder/schema/TablePrimaryKey.ts","build/systemjs/typeorm/util/RandomGenerator.ts","build/systemjs/typeorm/platform/PlatformTools.ts","build/systemjs/typeorm/find-options/JoinOptions.ts","build/systemjs/typeorm/find-options/FindOneOptions.ts","build/systemjs/typeorm/find-options/FindManyOptions.ts","build/systemjs/typeorm/common/ObjectType.ts","build/systemjs/typeorm/error/QueryRunnerProviderAlreadyReleasedError.ts","build/systemjs/typeorm/common/DeepPartial.ts","build/systemjs/typeorm/repository/RemoveOptions.ts","build/systemjs/typeorm/repository/SaveOptions.ts","build/systemjs/typeorm/error/NoNeedToReleaseEntityManagerError.ts","build/systemjs/typeorm/repository/Repository.ts","build/systemjs/typeorm/driver/mongodb/typings.ts","build/systemjs/typeorm/driver/mongodb/MongoQueryRunner.ts","build/systemjs/typeorm/metadata/types/TableTypes.ts","build/systemjs/typeorm/entity-schema/EntitySchemaTable.ts","build/systemjs/typeorm/entity-schema/EntitySchemaIndex.ts","build/systemjs/typeorm/entity-schema/EntitySchemaColumn.ts","build/systemjs/typeorm/decorator/options/JoinColumnOptions.ts","build/systemjs/typeorm/decorator/options/JoinTableMuplipleColumnsOptions.ts","build/systemjs/typeorm/entity-schema/EntitySchemaRelation.ts","build/systemjs/typeorm/entity-schema/EntitySchema.ts","build/systemjs/typeorm/logger/LoggerOptions.ts","build/systemjs/typeorm/driver/types/DatabaseType.ts","build/systemjs/typeorm/logger/Logger.ts","build/systemjs/typeorm/connection/BaseConnectionOptions.ts","build/systemjs/typeorm/driver/mongodb/MongoConnectionOptions.ts","build/systemjs/typeorm/driver/types/MappedColumnTypes.ts","build/systemjs/typeorm/schema-builder/SchemaBuilder.ts","build/systemjs/typeorm/schema-builder/MongoSchemaBuilder.ts","build/systemjs/typeorm/driver/types/DataTypeDefaults.ts","build/systemjs/typeorm/driver/mysql/MysqlConnectionCredentialsOptions.ts","build/systemjs/typeorm/driver/mysql/MysqlConnectionOptions.ts","build/systemjs/typeorm/driver/postgres/PostgresConnectionCredentialsOptions.ts","build/systemjs/typeorm/driver/postgres/PostgresConnectionOptions.ts","build/systemjs/typeorm/driver/sqlite/SqliteConnectionOptions.ts","build/systemjs/typeorm/driver/sqlserver/SqlServerConnectionCredentialsOptions.ts","build/systemjs/typeorm/driver/sqlserver/SqlServerConnectionOptions.ts","build/systemjs/typeorm/driver/oracle/OracleConnectionCredentialsOptions.ts","build/systemjs/typeorm/driver/oracle/OracleConnectionOptions.ts","build/systemjs/typeorm/driver/websql/WebSqlConnectionOptions.ts","build/systemjs/typeorm/driver/cordova/CordovaConnectionOptions.ts","build/systemjs/typeorm/driver/sqljs/SqljsConnectionOptions.ts","build/systemjs/typeorm/connection/ConnectionOptions.ts","build/systemjs/typeorm/driver/mongodb/MongoDriver.ts","build/systemjs/typeorm/query-builder/transformer/DocumentToEntityTransformer.ts","build/systemjs/typeorm/error/FindRelationsNotFoundError.ts","build/systemjs/typeorm/find-options/FindOptionsUtils.ts","build/systemjs/typeorm/entity-manager/MongoEntityManager.ts","build/systemjs/typeorm/repository/MongoRepository.ts","build/systemjs/typeorm/repository/TreeRepository.ts","build/systemjs/typeorm/util/DateUtils.ts","build/systemjs/typeorm/persistence/Subject.ts","build/systemjs/typeorm/util/OrmUtils.ts","build/systemjs/typeorm/persistence/SubjectBuilder.ts","build/systemjs/typeorm/util/PromiseUtils.ts","build/systemjs/typeorm/subscriber/event/UpdateEvent.ts","build/systemjs/typeorm/subscriber/event/RemoveEvent.ts","build/systemjs/typeorm/subscriber/event/InsertEvent.ts","build/systemjs/typeorm/subscriber/EntitySubscriberInterface.ts","build/systemjs/typeorm/metadata/types/EventListenerTypes.ts","build/systemjs/typeorm/subscriber/Broadcaster.ts","build/systemjs/typeorm/persistence/SubjectOperationExecutor.ts","build/systemjs/typeorm/query-builder/transformer/PlainObjectToNewEntityTransformer.ts","build/systemjs/typeorm/query-builder/transformer/PlainObjectToDatabaseEntityTransformer.ts","build/systemjs/typeorm/error/CustomRepositoryNotFoundError.ts","build/systemjs/typeorm/error/CustomRepositoryDoesNotHaveEntityError.ts","build/systemjs/typeorm/repository/AbstractRepository.ts","build/systemjs/typeorm/error/CustomRepositoryCannotInheritRepositoryError.ts","build/systemjs/typeorm/error/RepositoryNotFoundError.ts","build/systemjs/typeorm/error/RepositoryNotTreeError.ts","build/systemjs/typeorm/repository/RepositoryFactory.ts","build/systemjs/typeorm/error/TreeRepositoryNotSupportedError.ts","build/systemjs/typeorm/query-builder/QueryPartialEntity.ts","build/systemjs/typeorm/entity-manager/EntityManager.ts","build/systemjs/typeorm/driver/InsertResult.ts","build/systemjs/typeorm/driver/sqlite-abstract/AbstractSqliteQueryRunner.ts","build/systemjs/typeorm/schema-builder/RdbmsSchemaBuilder.ts","build/systemjs/typeorm/driver/sqlite-abstract/AbstractSqliteDriver.ts","build/systemjs/typeorm/error/QueryRunnerAlreadyReleasedError.ts","build/systemjs/typeorm/error/QueryFailedError.ts","build/systemjs/typeorm/driver/oracle/OracleQueryRunner.ts","build/systemjs/typeorm/driver/oracle/OracleDriver.ts","build/systemjs/typeorm/schema-builder/schema/Table.ts","build/systemjs/typeorm/driver/mysql/MysqlQueryRunner.ts","build/systemjs/typeorm/driver/mysql/MysqlDriver.ts","build/systemjs/typeorm/driver/sqlserver/MssqlParameter.ts","build/systemjs/typeorm/driver/sqlserver/SqlServerQueryRunner.ts","build/systemjs/typeorm/driver/sqlserver/SqlServerDriver.ts","build/systemjs/typeorm/driver/postgres/PostgresQueryRunner.ts","build/systemjs/typeorm/driver/postgres/PostgresDriver.ts","build/systemjs/typeorm/query-builder/Brackets.ts","build/systemjs/typeorm/query-builder/WhereExpression.ts","build/systemjs/typeorm/metadata/EntityMetadataUtils.ts","build/systemjs/typeorm/error/LimitOnUpdateNotSupportedError.ts","build/systemjs/typeorm/query-builder/UpdateQueryBuilder.ts","build/systemjs/typeorm/query-builder/DeleteQueryBuilder.ts","build/systemjs/typeorm/query-builder/InsertQueryBuilder.ts","build/systemjs/typeorm/query-builder/RelationUpdater.ts","build/systemjs/typeorm/query-builder/RelationRemover.ts","build/systemjs/typeorm/query-builder/RelationLoader.ts","build/systemjs/typeorm/query-builder/RelationQueryBuilder.ts","build/systemjs/typeorm/driver/sqljs/SqljsQueryRunner.ts","build/systemjs/typeorm/error/DriverOptionNotSetError.ts","build/systemjs/typeorm/driver/sqljs/SqljsDriver.ts","build/systemjs/typeorm/query-builder/QueryBuilder.ts","build/systemjs/typeorm/query-builder/QueryExpressionMap.ts","build/systemjs/typeorm/query-builder/relation-id/RelationIdAttribute.ts","build/systemjs/typeorm/query-builder/relation-id/RelationIdLoadResult.ts","build/systemjs/typeorm/query-builder/relation-count/RelationCountLoadResult.ts","build/systemjs/typeorm/query-builder/transformer/RawSqlResultsToEntityTransformer.ts","build/systemjs/typeorm/error/PessimisticLockTransactionRequiredError.ts","build/systemjs/typeorm/error/NoVersionOrUpdateDateColumnError.ts","build/systemjs/typeorm/error/OptimisticLockVersionMismatchError.ts","build/systemjs/typeorm/error/OptimisticLockCanNotBeUsedError.ts","build/systemjs/typeorm/query-builder/relation-id/RelationIdLoader.ts","build/systemjs/typeorm/query-builder/relation-id/RelationIdMetadataToAttributeTransformer.ts","build/systemjs/typeorm/query-builder/relation-count/RelationCountLoader.ts","build/systemjs/typeorm/metadata-args/RelationCountMetadataArgs.ts","build/systemjs/typeorm/metadata/RelationCountMetadata.ts","build/systemjs/typeorm/query-builder/relation-count/RelationCountMetadataToAttributeTransformer.ts","build/systemjs/typeorm/error/LockNotSupportedOnGivenDriverError.ts","build/systemjs/typeorm/cache/QueryResultCacheOptions.ts","build/systemjs/typeorm/error/OffsetWithoutLimitNotSupportedError.ts","build/systemjs/typeorm/query-builder/SelectQueryBuilder.ts","build/systemjs/typeorm/metadata-args/RelationIdMetadataArgs.ts","build/systemjs/typeorm/metadata/RelationIdMetadata.ts","build/systemjs/typeorm/metadata-args/EntityListenerMetadataArgs.ts","build/systemjs/typeorm/metadata/EntityListenerMetadata.ts","build/systemjs/typeorm/metadata/EmbeddedMetadata.ts","build/systemjs/typeorm/decorator/options/RelationOptions.ts","build/systemjs/typeorm/metadata/types/PropertyTypeInFunction.ts","build/systemjs/typeorm/metadata/types/RelationTypeInFunction.ts","build/systemjs/typeorm/metadata-args/RelationMetadataArgs.ts","build/systemjs/typeorm/metadata/RelationMetadata.ts","build/systemjs/typeorm/lazy-loading/LazyRelationsWrapper.ts","build/systemjs/typeorm/metadata-args/TableMetadataArgs.ts","build/systemjs/typeorm/metadata/EntityMetadata.ts","build/systemjs/typeorm/decorator/options/ValueTransformer.ts","build/systemjs/typeorm/decorator/options/ColumnOptions.ts","build/systemjs/typeorm/metadata-args/types/ColumnMode.ts","build/systemjs/typeorm/metadata-args/ColumnMetadataArgs.ts","build/systemjs/typeorm/metadata/ColumnMetadata.ts","build/systemjs/typeorm/schema-builder/schema/TableColumn.ts","build/systemjs/typeorm/query-runner/QueryRunner.ts","build/systemjs/typeorm/driver/Driver.ts","build/systemjs/typeorm/util/StringUtils.ts","build/systemjs/typeorm/naming-strategy/DefaultNamingStrategy.ts","build/systemjs/typeorm/error/CannotExecuteNotConnectedError.ts","build/systemjs/typeorm/error/CannotConnectAlreadyConnectedError.ts","build/systemjs/typeorm/error/EntityMetadataNotFound.ts","build/systemjs/typeorm/migration/MigrationInterface.ts","build/systemjs/typeorm/migration/Migration.ts","build/systemjs/typeorm/migration/MigrationExecutor.ts","build/systemjs/typeorm/error/MissingPrimaryColumnError.ts","build/systemjs/typeorm/error/CircularRelationsError.ts","build/systemjs/typeorm/util/DepGraph.ts","build/systemjs/typeorm/error/DataTypeNotSupportedError.ts","build/systemjs/typeorm/metadata-builder/EntityMetadataValidator.ts","build/systemjs/typeorm/entity-manager/SqljsEntityManager.ts","build/systemjs/typeorm/entity-manager/EntityManagerFactory.ts","build/systemjs/typeorm/error/MissingDriverError.ts","build/systemjs/typeorm/driver/websql/WebsqlQueryRunner.ts","build/systemjs/typeorm/driver/websql/WebsqlDriver.ts","build/systemjs/typeorm/driver/sqlite/SqliteQueryRunner.ts","build/systemjs/typeorm/driver/sqlite/SqliteDriver.ts","build/systemjs/typeorm/driver/cordova/CordovaQueryRunner.ts","build/systemjs/typeorm/driver/cordova/CordovaDriver.ts","build/systemjs/typeorm/driver/DriverFactory.ts","build/systemjs/typeorm/util/DirectoryExportedClassesLoader.ts","build/systemjs/typeorm/container.ts","build/systemjs/typeorm/metadata-args/NamingStrategyMetadataArgs.ts","build/systemjs/typeorm/metadata-args/JoinColumnMetadataArgs.ts","build/systemjs/typeorm/metadata-args/JoinTableMetadataArgs.ts","build/systemjs/typeorm/metadata-args/EntitySubscriberMetadataArgs.ts","build/systemjs/typeorm/metadata-args/InheritanceMetadataArgs.ts","build/systemjs/typeorm/metadata-args/DiscriminatorValueMetadataArgs.ts","build/systemjs/typeorm/metadata-args/EntityRepositoryMetadataArgs.ts","build/systemjs/typeorm/metadata-args/TransactionEntityMetadataArgs.ts","build/systemjs/typeorm/metadata-args/TransactionRepositoryMetadataArgs.ts","build/systemjs/typeorm/metadata-builder/MetadataUtils.ts","build/systemjs/typeorm/metadata-args/GeneratedMetadataArgs.ts","build/systemjs/typeorm/metadata-args/MetadataArgsStorage.ts","build/systemjs/typeorm/metadata-builder/JunctionEntityMetadataBuilder.ts","build/systemjs/typeorm/metadata-builder/ClosureJunctionEntityMetadataBuilder.ts","build/systemjs/typeorm/metadata-builder/RelationJoinColumnBuilder.ts","build/systemjs/typeorm/metadata-builder/EntityMetadataBuilder.ts","build/systemjs/typeorm/decorator/options/JoinTableOptions.ts","build/systemjs/typeorm/entity-schema/EntitySchemaTransformer.ts","build/systemjs/typeorm/connection/ConnectionMetadataBuilder.ts","build/systemjs/typeorm/logger/SimpleConsoleLogger.ts","build/systemjs/typeorm/logger/AdvancedConsoleLogger.ts","build/systemjs/typeorm/logger/FileLogger.ts","build/systemjs/typeorm/logger/DebugLogger.ts","build/systemjs/typeorm/logger/LoggerFactory.ts","build/systemjs/typeorm/cache/QueryResultCache.ts","build/systemjs/typeorm/cache/RedisQueryResultCache.ts","build/systemjs/typeorm/cache/DbQueryResultCache.ts","build/systemjs/typeorm/cache/QueryResultCacheFactory.ts","build/systemjs/typeorm/connection/Connection.ts","build/systemjs/typeorm/error/ConnectionNotFoundError.ts","build/systemjs/typeorm/error/AlreadyHasActiveConnectionError.ts","build/systemjs/typeorm/connection/ConnectionManager.ts","build/systemjs/typeorm/connection/options-reader/ConnectionOptionsEnvReader.ts","build/systemjs/typeorm/connection/options-reader/ConnectionOptionsYmlReader.ts","build/systemjs/typeorm/connection/options-reader/ConnectionOptionsXmlReader.ts","build/systemjs/typeorm/connection/ConnectionOptionsReader.ts","build/systemjs/typeorm/decorator/options/ColumnCommonOptions.ts","build/systemjs/typeorm/decorator/options/ColumnWithLengthOptions.ts","build/systemjs/typeorm/decorator/options/ColumnNumericOptions.ts","build/systemjs/typeorm/decorator/options/ColumnEnumOptions.ts","build/systemjs/typeorm/decorator/options/ColumnEmbeddedOptions.ts","build/systemjs/typeorm/decorator/columns/Column.ts","build/systemjs/typeorm/decorator/columns/CreateDateColumn.ts","build/systemjs/typeorm/decorator/columns/DiscriminatorColumn.ts","build/systemjs/typeorm/decorator/options/PrimaryGeneratedColumnNumericOptions.ts","build/systemjs/typeorm/decorator/options/PrimaryGeneratedColumnUUIDOptions.ts","build/systemjs/typeorm/decorator/columns/PrimaryGeneratedColumn.ts","build/systemjs/typeorm/error/ColumnTypeUndefinedError.ts","build/systemjs/typeorm/error/PrimaryColumnCannotBeNullableError.ts","build/systemjs/typeorm/decorator/columns/PrimaryColumn.ts","build/systemjs/typeorm/decorator/columns/UpdateDateColumn.ts","build/systemjs/typeorm/decorator/columns/VersionColumn.ts","build/systemjs/typeorm/decorator/columns/ObjectIdColumn.ts","build/systemjs/typeorm/decorator/listeners/AfterInsert.ts","build/systemjs/typeorm/decorator/listeners/AfterLoad.ts","build/systemjs/typeorm/decorator/listeners/AfterRemove.ts","build/systemjs/typeorm/decorator/listeners/AfterUpdate.ts","build/systemjs/typeorm/decorator/listeners/BeforeInsert.ts","build/systemjs/typeorm/decorator/listeners/BeforeRemove.ts","build/systemjs/typeorm/decorator/listeners/BeforeUpdate.ts","build/systemjs/typeorm/decorator/listeners/EventSubscriber.ts","build/systemjs/typeorm/decorator/options/IndexOptions.ts","build/systemjs/typeorm/decorator/options/EntityOptions.ts","build/systemjs/typeorm/decorator/relations/RelationCount.ts","build/systemjs/typeorm/decorator/relations/JoinColumn.ts","build/systemjs/typeorm/decorator/relations/JoinTable.ts","build/systemjs/typeorm/decorator/relations/ManyToMany.ts","build/systemjs/typeorm/decorator/relations/ManyToOne.ts","build/systemjs/typeorm/decorator/relations/OneToMany.ts","build/systemjs/typeorm/decorator/relations/OneToOne.ts","build/systemjs/typeorm/decorator/relations/RelationId.ts","build/systemjs/typeorm/decorator/entity/Entity.ts","build/systemjs/typeorm/decorator/entity/ClassEntityChild.ts","build/systemjs/typeorm/decorator/entity/ClosureEntity.ts","build/systemjs/typeorm/decorator/entity/SingleEntityChild.ts","build/systemjs/typeorm/decorator/entity/TableInheritance.ts","build/systemjs/typeorm/decorator/transaction/Transaction.ts","build/systemjs/typeorm/decorator/transaction/TransactionManager.ts","build/systemjs/typeorm/decorator/transaction/TransactionRepository.ts","build/systemjs/typeorm/decorator/tree/TreeLevelColumn.ts","build/systemjs/typeorm/decorator/tree/TreeParent.ts","build/systemjs/typeorm/decorator/tree/TreeChildren.ts","build/systemjs/typeorm/decorator/Index.ts","build/systemjs/typeorm/decorator/Generated.ts","build/systemjs/typeorm/decorator/DiscriminatorValue.ts","build/systemjs/typeorm/decorator/EntityRepository.ts","build/systemjs/typeorm/repository/BaseEntity.ts","build/systemjs/typeorm/index.ts","build/systemjs/typeorm.ts","build/systemjs/typeorm/error/CannotGetEntityManagerNotConnectedError.ts","build/systemjs/typeorm/error/CascadesNotAllowedError.ts","build/systemjs/typeorm/error/CustomRepositoryReusedError.ts","build/systemjs/typeorm/error/GeneratedOnlyForPrimaryError.ts","build/systemjs/typeorm/error/MetadataAlreadyExistsError.ts","build/systemjs/typeorm/error/MetadataWithSuchNameAlreadyExistsError.ts","build/systemjs/typeorm/error/MissingJoinColumnError.ts","build/systemjs/typeorm/error/MissingJoinTableError.ts","build/systemjs/typeorm/error/NamingStrategyNotFoundError.ts","build/systemjs/typeorm/error/NoConnectionForRepositoryError.ts","build/systemjs/typeorm/error/PersistedEntityNotFoundError.ts","build/systemjs/typeorm/error/UsingJoinColumnIsNotAllowedError.ts","build/systemjs/typeorm/error/UsingJoinColumnOnlyOnOneSideAllowedError.ts","build/systemjs/typeorm/error/UsingJoinTableIsNotAllowedError.ts","build/systemjs/typeorm/error/UsingJoinTableOnlyOnOneSideAllowedError.ts","build/systemjs/typeorm/query-builder/JoinOptions.ts","build/systemjs/typeorm/schema-builder/Schema.ts"],"names":[],"mappings":"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","file":"typeorm-browser.js","sourcesContent":["/**\n * Column types where precision and scale properties are used.\n */\nexport type PrimaryGeneratedColumnType = \"int\" // mysql, mssql, oracle, sqlite\n    |\"int2\" // postgres, sqlite\n    |\"int2\" // postgres, sqlite\n    |\"int4\" // postgres\n    |\"int8\" // postgres, sqlite\n    |\"integer\" // postgres, oracle, sqlite\n    |\"tinyint\" // mysql, mssql, sqlite\n    |\"smallint\" // mysql, postgres, mssql, oracle, sqlite\n    |\"mediumint\" // mysql, sqlite\n    |\"bigint\" // mysql, postgres, mssql, sqlite\n    |\"dec\" // oracle, mssql\n    |\"decimal\" // mysql, postgres, mssql, sqlite\n    |\"numeric\" // postgres, mssql, sqlite\n    |\"number\"; // oracle\n\n/**\n * Column types where precision and scale properties are used.\n */\nexport type WithPrecisionColumnType = \"float\" // mysql, mssql, oracle, sqlite\n    |\"double\" // mysql, sqlite\n    |\"dec\" // oracle, mssql\n    |\"decimal\" // mysql, postgres, mssql, sqlite\n    |\"numeric\" // postgres, mssql, sqlite\n    |\"real\" // mysql, postgres, mssql, oracle, sqlite\n    |\"double precision\" // postgres, oracle, sqlite\n    |\"number\" // oracle\n    |\"datetime\" // mssql, mysql, sqlite\n    |\"datetime2\" // mssql\n    |\"datetimeoffset\" // mssql\n    |\"time\" // mysql, postgres, mssql\n    |\"time with time zone\" // postgres\n    |\"time without time zone\" // postgres\n    |\"timestamp\" // mysql, postgres, mssql, oracle\n    |\"timestamp without time zone\" // postgres\n    |\"timestamp with time zone\"; // postgres, oracle\n\n/**\n * Column types where column length is used.\n */\nexport type WithLengthColumnType = \"int\" // mysql, postgres, mssql, oracle, sqlite\n    |\"tinyint\" // mysql, mssql, sqlite\n    |\"smallint\" // mysql, postgres, mssql, oracle, sqlite\n    |\"mediumint\" // mysql, sqlite\n    |\"bigint\" // mysql, postgres, mssql, sqlite\n    |\"character varying\" // postgres\n    |\"varying character\" // sqlite\n    |\"nvarchar\" // mssql\n    |\"character\" // mysql, postgres, sqlite\n    |\"native character\" // sqlite\n    |\"varchar\" // mysql, postgres, mssql, sqlite\n    |\"char\" // mysql, postgres, mssql, oracle\n    |\"nchar\" // mssql, oracle, sqlite\n    |\"varchar2\" // oracle\n    |\"nvarchar2\" // oracle, sqlite\n    |\"binary\" // mssql\n    |\"varbinary\"; // mssql\n\n/**\n * All other regular column types.\n */\nexport type SimpleColumnType =\n\n    \"simple-array\" // typeorm-specific, automatically mapped to string\n    // |\"string\" // typeorm-specific, automatically mapped to varchar depend on platform\n\n    |\"simple-json\" // typeorm-specific, automatically mapped to string\n\n    // numeric types\n    |\"bit\" // mssql\n    |\"int2\" // postgres, sqlite\n    |\"integer\" // postgres, oracle, sqlite\n    |\"int4\" // postgres\n    |\"int8\" // postgres, sqlite\n    |\"unsigned big int\" // sqlite\n    |\"float4\" // postgres\n    |\"float8\" // postgres\n    |\"smallmoney\" // mssql\n    |\"money\" // postgres, mssql\n\n    // boolean types\n    |\"boolean\" // postgres, sqlite\n    |\"bool\" // postgres\n\n    // text/binary types\n    |\"tinyblob\" // mysql\n    |\"tinytext\" // mysql\n    |\"mediumblob\" // mysql\n    |\"mediumtext\" // mysql\n    |\"blob\" // mysql, oracle, sqlite\n    |\"text\" // mysql, postgres, mssql, sqlite\n    |\"ntext\" // mssql\n    |\"citext\" // postgres\n    |\"longblob\" // mysql\n    |\"longtext\" // mysql\n    |\"bytea\" // postgres\n    |\"long\" // oracle\n    |\"raw\" // oracle\n    |\"long raw\" // oracle\n    |\"bfile\" // oracle\n    |\"clob\" // oracle, sqlite\n    |\"nclob\" // oracle\n    |\"image\" // mssql\n\n    // date types\n    |\"timestamp with local time zone\" // oracle\n    |\"smalldatetime\" // mssql\n    |\"date\" // mysql, postgres, mssql, oracle, sqlite\n    |\"interval year\" // oracle\n    |\"interval day\" // oracle\n    |\"interval\" // postgres\n    |\"year\" // mysql\n\n    // geometric types\n    |\"point\" // postgres\n    |\"line\" // postgres\n    |\"lseg\" // postgres\n    |\"box\" // postgres\n    |\"circle\" // postgres\n    |\"path\" // postgres\n    |\"polygon\" // postgres\n\n    // other types\n    |\"enum\" // mysql, postgres\n    |\"cidr\" // postgres\n    |\"inet\" // postgres\n    |\"macaddr\"// postgres\n    |\"bit\" // postgres\n    |\"bit varying\" // postgres\n    |\"varbit\"// postgres\n    |\"tsvector\" // postgres\n    |\"tsquery\" // postgres\n    |\"uuid\" // postgres\n    |\"xml\" // mssql, postgres\n    |\"json\" // mysql, postgres\n    |\"jsonb\" // postgres\n    |\"varbinary\" // mssql\n    |\"cursor\" // mssql\n    |\"hierarchyid\" // mssql\n    |\"sql_variant\" // mssql\n    |\"table\" // mssql\n    |\"rowid\" // oracle\n    |\"urowid\" // oracle\n    |\"uniqueidentifier\"; // mssql\n\n/**\n * Any column type column can be.\n */\nexport type ColumnType = WithPrecisionColumnType\n    |WithLengthColumnType\n    |SimpleColumnType\n    |BooleanConstructor\n    |DateConstructor\n    |NumberConstructor\n    |StringConstructor;\n\n// \"string\"|\"text\"|\"number\"|\"integer\"|\"int\"|\"smallint\"|\"bigint\"|\"float\"|\"double\"|\n// \"decimal\"|\"date\"|\"time\"|\"datetime\"|\"boolean\"|\"json\"|\"jsonb\"|\"simple_array\"|\"uuid\";\n\n// -------------------------------------------------------------------------\n// Merged Types\n// -------------------------------------------------------------------------\n/*\n/!**\n * Column types where column length is used.\n *!/\nexport type WithLengthColumnType =\n    VarcharColumnType|\n    CharColumnType|\n    IntervalColumnType|\n    BitColumnType|\n    VarbitColumnType;\n\n/!**\n * Column types where time options are used.\n *!/\nexport type WithTimeColumnType =\n    TimeColumnType|\n    TimestampColumnType;\n\n/!**\n * All other column types without extra options used.\n *!/\nexport type SimpleColumnType =\n    SmallintColumnType|\n    IntegerColumnType|\n    BigintColumnType|\n    DecimalColumnType|\n    RealColumnType|\n    DoublePrecisionColumnType|\n    SmallserialColumnType|\n    SerialColumnType|\n    BigserialColumnType|\n    MoneyColumnType|\n    TextColumnType|\n    ByteaColumnType|\n    DateColumnType|\n    BooleanColumnType|\n    PointColumnType|\n    LineColumnType|\n    LsegColumnType|\n    BoxColumnType|\n    CircleColumnType|\n    PathColumnType|\n    PolygonColumnType|\n    CidrColumnType|\n    InetColumnType|\n    MacaddrColumnType|\n    TsvectorColumnType|\n    TsqueryColumnType|\n    UUIDColumnType|\n    XmlColumnType|\n    JsonColumnType|\n    JsonbColumnType;\n\n/!**\n * All column types supported by a database.\n *!/\nexport type AllColumnType =\n    SimpleColumnType|\n    WithLengthColumnType|\n    WithTimeColumnType|\n    NumericColumnType|\n    EnumColumnType;\n\n\n/!**\n * All data types that column can be.\n *!/\nexport type ColumnType =\n    \"tinyint\"|\n    \"smallint\"|\n    \"int2\"|\n    \"mediumint\"|\n    \"integer\"|\n    \"int\"|\n    \"int4\"|\n    \"bigint\"|\n    \"int8\"|\n    \"decimal\"|\n    \"numeric\"|\n    \"real\"|\n    \"float4\"|\n    \"float\"|\n    \"double\"|\n    \"double precision\"|\n    \"numeric\"|\n    \"decimal\"|\n    \"string\"|\"text\"|\"number\"|\"integer\"|\"int\"|\"smallint\"|\"bigint\"|\"float\"|\"double\"|\n                         \"decimal\"|\"date\"|\"time\"|\"datetime\"|\"boolean\"|\"json\"|\"jsonb\"|\"simple_array\"|\"uuid\";*/\n/*\n\n/!**\n * All data types that column can be.\n *!/\nexport class ColumnTypes {\n\n    /!**\n     * SQL VARCHAR type. Your class's property type should be a \"string\".\n     *!/\n    static STRING: ColumnType = \"string\";\n\n    /!**\n     * SQL CLOB type. Your class's property type should be a \"string\".\n     *!/\n    static TEXT: ColumnType = \"text\";\n\n    /!**\n     * SQL FLOAT type. Your class's property type should be a \"number\".\n     *!/\n    static NUMBER: ColumnType = \"number\";\n\n    /!**\n     * SQL INT type. Your class's property type should be a \"number\".\n     *!/\n    static INTEGER: ColumnType = \"integer\";\n\n    /!**\n     * SQL INT type. Your class's property type should be a \"number\".\n     *!/\n    static INT: ColumnType = \"int\";\n\n    /!**\n     * SQL SMALLINT type. Your class's property type should be a \"number\".\n     *!/\n    static SMALLINT: ColumnType = \"smallint\";\n\n    /!**\n     * SQL BIGINT type. Your class's property type should be a \"number\".\n     *!/\n    static BIGINT: ColumnType = \"bigint\";\n\n    /!**\n     * SQL FLOAT type. Your class's property type should be a \"number\".\n     *!/\n    static FLOAT: ColumnType = \"float\";\n\n    /!**\n     * SQL FLOAT type. Your class's property type should be a \"number\".\n     *!/\n    static DOUBLE: ColumnType = \"double\";\n\n    /!**\n     * SQL DECIMAL type. Your class's property type should be a \"string\".\n     *!/\n    static DECIMAL: ColumnType = \"decimal\";\n\n    /!**\n     * SQL DATETIME type. Your class's property type should be a \"Date\" object.\n     *!/\n    static DATE: ColumnType = \"date\";\n\n    /!**\n     * SQL TIME type. Your class's property type should be a \"Date\" object.\n     *!/\n    static TIME: ColumnType = \"time\";\n\n    /!**\n     * SQL DATETIME/TIMESTAMP type. Your class's property type should be a \"Date\" object.\n     *!/\n    static DATETIME: ColumnType = \"datetime\";\n\n    /!**\n     * SQL BOOLEAN type. Your class's property type should be a \"boolean\".\n     *!/\n    static BOOLEAN: ColumnType = \"boolean\";\n\n    /!**\n     * SQL CLOB type. Your class's property type should be any Object.\n     *!/\n    static JSON: ColumnType = \"json\";\n\n    /!**\n     * Postgres jsonb type. Your class's property type should be any Object.\n     *!/\n    static JSONB: ColumnType = \"jsonb\";\n\n    /!**\n     * SQL CLOB type. Your class's property type should be array of string. Note: value in this column should not contain\n     * a comma (\",\") since this symbol is used to create a string from the array, using .join(\",\") operator.\n     *!/\n    static SIMPLE_ARRAY: ColumnType = \"simple_array\";\n\n    /!**\n     * UUID type. Serialized to a string in typescript or javascript\n     *!/\n    static UUID: ColumnType = \"uuid\";\n\n    /!**\n     * Checks if given type in a string format is supported by ORM.\n     *!/\n    static isTypeSupported(type: string) {\n        return this.supportedTypes.indexOf(<ColumnType> type) !== -1;\n    }\n\n    /!**\n     * Returns list of all supported types by the ORM.\n     *!/\n    static get supportedTypes() {\n        return [\n            this.STRING,\n            this.TEXT,\n            this.NUMBER,\n            this.INTEGER,\n            this.INT,\n            this.SMALLINT,\n            this.BIGINT,\n            this.FLOAT,\n            this.DOUBLE,\n            this.DECIMAL,\n            this.DATE,\n            this.TIME,\n            this.DATETIME,\n            this.BOOLEAN,\n            this.JSON,\n            this.JSONB,\n            this.SIMPLE_ARRAY,\n            this.UUID\n        ];\n    }\n\n    /!**\n     * Tries to guess a column type from the given function.\n     *!/\n    static determineTypeFromFunction(type: Function): ColumnType|undefined {\n        if (type instanceof Date) {\n            return ColumnTypes.DATETIME;\n\n        } else if (type instanceof Function) {\n            const typeName = (<any>type).name.toLowerCase();\n            switch (typeName) {\n                case \"number\":\n                    return ColumnTypes.NUMBER;\n                case \"boolean\":\n                    return ColumnTypes.BOOLEAN;\n                case \"string\":\n                    return ColumnTypes.STRING;\n                case \"date\":\n                    return ColumnTypes.DATETIME;\n                case \"object\":\n                    return ColumnTypes.JSON;\n            }\n\n        } else if (type instanceof Object) {\n            return ColumnTypes.JSON;\n\n        }\n\n        return undefined;\n    }\n\n    static typeToString(type: Function): string {\n        return (type as any).name.toLowerCase();\n    }\n\n    /!**\n     * Checks if column type is numeric.\n     *!/\n    static isNumeric(type: ColumnType) {\n        return  type === ColumnTypes.NUMBER ||\n                type === ColumnTypes.INT ||\n                type === ColumnTypes.INTEGER ||\n                type === ColumnTypes.BIGINT ||\n                type === ColumnTypes.SMALLINT ||\n                type === ColumnTypes.DOUBLE ||\n                type === ColumnTypes.FLOAT;\n    }\n\n}*/\n","/**\n * All types that relation can be.\n */\nexport type RelationType = \"one-to-one\"|\"one-to-many\"|\"many-to-one\"|\"many-to-many\";","/**\n * Naming strategy defines how auto-generated names for such things like table name, or table column gonna be\n * generated.\n */\nexport interface NamingStrategyInterface {\n\n    /**\n     * Naming strategy name.\n     */\n    name?: string;\n\n    /**\n     * Normalizes table name.\n     *\n     * @param targetName Name of the target entity that can be used to generate a table name.\n     * @param userSpecifiedName For example if user specified a table name in a decorator, e.g. @Entity(\"name\")\n     */\n    tableName(targetName: string, userSpecifiedName: string|undefined): string;\n\n    /**\n     * Creates a table name for a junction table of a closure table.\n     *\n     * @param originalClosureTableName Name of the closure table which owns this junction table.\n     */\n    closureJunctionTableName(originalClosureTableName: string): string;\n\n    /**\n     * Gets the table's column name from the given property name.\n     */\n    columnName(propertyName: string, customName: string|undefined, embeddedPrefixes: string[]): string;\n\n    /**\n     * Gets the table's relation name from the given property name.\n     */\n    relationName(propertyName: string): string;\n\n    /**\n     * Gets the name of the index - simple and compose index.\n     */\n    indexName(customName: string|undefined, tableName: string, columns: string[]): string;\n\n    /**\n     * Gets the name of the join column used in the one-to-one and many-to-one relations.\n     */\n    joinColumnName(relationName: string, referencedColumnName: string): string;\n\n    /**\n     * Gets the name of the join table used in the many-to-many relations.\n     */\n    joinTableName(firstTableName: string,\n                  secondTableName: string,\n                  firstPropertyName: string,\n                  secondPropertyName: string): string;\n\n    /**\n     * Columns in join tables can have duplicate names in case of self-referencing.\n     * This method provide a resolution for such column names.\n     */\n    joinTableColumnDuplicationPrefix(columnName: string, index: number): string;\n\n    /**\n     * Gets the name of the column used for columns in the junction tables.\n     *\n     * The reverse?:boolean parameter denotes if the joinTableColumnName is called for the junctionColumn (false)\n     * or the inverseJunctionColumns (true)\n     */\n    joinTableColumnName(tableName: string, propertyName: string, columnName?: string): string;\n\n    /**\n     * Gets the name of the column used for columns in the junction tables from the invers side of the relationship.\n     *\n     */\n    joinTableInverseColumnName(tableName: string, propertyName: string, columnName?: string): string;\n\n    /**\n     * Gets the name of the foreign key.\n     */\n    foreignKeyName(tableName: string, columnNames: string[], referencedTableName: string, referencedColumnNames: string[]): string;\n\n    /**\n     * Gets the column name of the column with foreign key to the parent table used in the class table inheritance.\n     */\n    classTableInheritanceParentColumnName(parentTableName: any, parentTableIdPropertyName: any): string;\n\n    /**\n     * Adds globally set prefix to the table name.\n     * This method is executed no matter if prefix was set or not.\n     * Table name is either user's given table name, either name generated from entity target.\n     * Note that table name comes here already normalized by #tableName method.\n     */\n    prefixTableName(prefix: string, tableName: string): string;\n\n}","\n/**\n * ON_DELETE type to be used to specify delete strategy when some relation is being deleted from the database.\n */\nexport type OnDeleteType = \"RESTRICT\"|\"CASCADE\"|\"SET NULL\"|\"DEFAULT\";\n","import {ColumnMetadata} from \"./ColumnMetadata\";\nimport {EntityMetadata} from \"./EntityMetadata\";\nimport {NamingStrategyInterface} from \"../naming-strategy/NamingStrategyInterface\";\nimport {OnDeleteType} from \"./types/OnDeleteType\";\n\n/**\n * Contains all information about entity's foreign key.\n */\nexport class ForeignKeyMetadata {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity metadata where this foreign key is.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Entity metadata which this foreign key references.\n     */\n    referencedEntityMetadata: EntityMetadata;\n\n    /**\n     * Array of columns of this foreign key.\n     */\n    columns: ColumnMetadata[] = [];\n\n    /**\n     * Array of referenced columns.\n     */\n    referencedColumns: ColumnMetadata[] = [];\n\n    /**\n     * What to do with a relation on deletion of the row containing a foreign key.\n     */\n    onDelete?: OnDeleteType;\n\n    /**\n     * Gets the table name to which this foreign key is applied.\n     */\n    tableName: string;\n\n    /**\n     * Gets the table name to which this foreign key is referenced.\n     */\n    referencedTableName: string;\n\n    /**\n     * Gets foreign key name.\n     */\n    name: string;\n\n    /**\n     * Gets array of column names.\n     */\n    columnNames: string[] = [];\n\n    /**\n     * Gets array of referenced column names.\n     */\n    referencedColumnNames: string[] = [];\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        entityMetadata: EntityMetadata,\n        referencedEntityMetadata: EntityMetadata,\n        namingStrategy?: NamingStrategyInterface,\n        columns: ColumnMetadata[],\n        referencedColumns: ColumnMetadata[],\n        onDelete?: OnDeleteType\n    }) {\n        this.entityMetadata = options.entityMetadata;\n        this.referencedEntityMetadata = options.referencedEntityMetadata;\n        this.columns = options.columns;\n        this.referencedColumns = options.referencedColumns;\n        this.onDelete = options.onDelete;\n        if (options.namingStrategy)\n            this.build(options.namingStrategy);\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Builds some depend foreign key properties.\n     * Must be called after all entity metadatas and their columns are built.\n     */\n    build(namingStrategy: NamingStrategyInterface) {\n        this.columnNames = this.columns.map(column => column.databaseName);\n        this.referencedColumnNames = this.referencedColumns.map(column => column.databaseName);\n        this.tableName = this.entityMetadata.tableName;\n        this.referencedTableName = this.referencedEntityMetadata.tableName;\n        this.name = namingStrategy.foreignKeyName(this.tableName, this.columnNames, this.referencedEntityMetadata.tableName, this.referencedColumnNames);\n    }\n\n}","/**\n * Interface of the simple literal object with any string keys.\n */\nexport interface ObjectLiteral {\n    [key: string]: any;\n}\n","/**\n * Arguments for EmbeddedMetadata class.\n */\nexport interface EmbeddedMetadataArgs {\n\n    /**\n     * Class to which this column is applied.\n     */\n    target: Function;\n\n    /**\n     * Class's property name to which this column is applied.\n     */\n    propertyName: string;\n\n    /**\n     * Indicates if this embedded is array or not.\n     */\n    isArray: boolean;\n\n    /**\n     * Prefix of the embedded, used instead of propertyName.\n     * If set to empty string, then prefix is not set at all.\n     */\n    prefix?: string|boolean;\n\n    /**\n     * Type of the class to be embedded.\n     */\n    type: ((type?: any) => Function);\n\n}\n","/**\n * Helper utility functions for QueryBuilder.\n */\nexport class QueryBuilderUtils {\n\n    /**\n     * Checks if given value is a string representation of alias property,\n     * e.g. \"post.category\" or \"post.id\".\n     */\n    static isAliasProperty(str: any): str is string {\n\n        // alias property must be a string and must have a dot separator\n        if (typeof str !== \"string\" || str.indexOf(\".\") === -1)\n            return false;\n\n        // extra alias and its property relation\n        const [aliasName, propertyName] = str.split(\".\"); // todo: what about relations in embedded?\n        if (!aliasName || !propertyName)\n            return false;\n\n        // alias and property must be represented in a special format\n        const aliasNameRegexp = /^[a-zA-Z0-9_-]+$/;\n        if (!aliasNameRegexp.test(aliasName) || !aliasNameRegexp.test(propertyName))\n            return false;\n\n        return true;\n    }\n\n}\n","import {EntityMetadata} from \"../metadata/EntityMetadata\";\n\n/**\n */\nexport class Alias {\n\n    type: \"from\"|\"select\"|\"join\"|\"other\"; // todo: make something with \"other\"\n\n    name: string;\n\n    /**\n     * Table on which this alias is applied.\n     * Used only for aliases which select custom tables.\n     */\n    tablePath?: string;\n\n    /**\n     * If this alias is for sub query.\n     */\n    subQuery?: string;\n\n    constructor(alias?: Alias) {\n        Object.assign(this, alias || {});\n    }\n\n    private _metadata?: EntityMetadata;\n\n    get target(): Function|string {\n        return this.metadata.target;\n    }\n\n    get hasMetadata(): boolean {\n        return !!this._metadata;\n    }\n\n    set metadata(metadata: EntityMetadata) {\n        this._metadata = metadata;\n    }\n\n    get metadata(): EntityMetadata {\n        if (!this._metadata)\n            throw new Error(`Cannot get entity metadata for the given alias \"${this.name}\"`);\n\n        return this._metadata;\n    }\n\n}","/**\n * Special object that defines order condition for ORDER BY in sql.\n *\n * Example:\n * {\n *  \"name\": \"ASC\",\n *  \"id\": \"DESC\"\n * }\n */\nexport type OrderByCondition = {\n    [columnName: string]: (\"ASC\"|\"DESC\")|{\n        order: \"ASC\"|\"DESC\";\n        nulls: \"NULLS FIRST\"|\"NULLS LAST\";\n    }\n};\n","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {Connection} from \"../connection/Connection\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {QueryBuilderUtils} from \"./QueryBuilderUtils\";\nimport {QueryExpressionMap} from \"./QueryExpressionMap\";\nimport {Alias} from \"./Alias\";\n\n/**\n * Stores all join attributes which will be used to build a JOIN query.\n */\nexport class JoinAttribute {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Join direction.\n     */\n    direction: \"LEFT\"|\"INNER\";\n\n    /**\n     * Alias of the joined (destination) table.\n     */\n    alias: Alias;\n\n    /**\n     * Joined table, entity target, or relation in \"post.category\" format.\n     */\n    entityOrProperty: Function|string;\n\n    /**\n     * Extra condition applied to \"ON\" section of join.\n     */\n    condition?: string;\n\n    /**\n     * Property + alias of the object where to joined data should be mapped.\n     */\n    mapToProperty?: string;\n\n    /**\n     * Indicates if user maps one or many objects from the join.\n     */\n    isMappingMany?: boolean;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection,\n                private queryExpressionMap: QueryExpressionMap,\n                joinAttribute?: JoinAttribute) {\n        Object.assign(this, joinAttribute || {});\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    get isMany(): boolean {\n        if (this.isMappingMany !== undefined)\n            return this.isMappingMany;\n\n        if (this.relation)\n            return this.relation.isManyToMany || this.relation.isOneToMany;\n\n        return false;\n    }\n\n    /**\n     * Name of the table which we should join.\n     */\n    get tablePath(): string {\n        return this.metadata ? this.metadata.tablePath : this.entityOrProperty as string;\n    }\n\n    /**\n     * Alias of the parent of this join.\n     * For example, if we join (\"post.category\", \"categoryAlias\") then \"post\" is a parent alias.\n     * This value is extracted from entityOrProperty value.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get parentAlias(): string|undefined {\n        if (!QueryBuilderUtils.isAliasProperty(this.entityOrProperty))\n            return undefined;\n\n        return this.entityOrProperty.substr(0, this.entityOrProperty.indexOf(\".\"));\n    }\n\n    /**\n     * Relation property name of the parent.\n     * This is used to understand what is joined.\n     * For example, if we join (\"post.category\", \"categoryAlias\") then \"category\" is a relation property.\n     * This value is extracted from entityOrProperty value.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get relationPropertyPath(): string|undefined {\n        if (!QueryBuilderUtils.isAliasProperty(this.entityOrProperty))\n            return undefined;\n\n        return this.entityOrProperty.substr(this.entityOrProperty.indexOf(\".\") + 1);\n    }\n\n    /**\n     * Relation of the parent.\n     * This is used to understand what is joined.\n     * This is available when join was made using \"post.category\" syntax.\n     * Relation can be undefined if entityOrProperty is regular entity or custom table.\n     */\n    get relation(): RelationMetadata|undefined {\n        if (!QueryBuilderUtils.isAliasProperty(this.entityOrProperty))\n            return undefined;\n\n        const relationOwnerSelection = this.queryExpressionMap.findAliasByName(this.parentAlias!);\n        let relation = relationOwnerSelection.metadata.findRelationWithPropertyPath(this.relationPropertyPath!);\n        \n        if (relation) {\n            return relation;\n        }\n\n        if (relationOwnerSelection.metadata.parentEntityMetadata) {\n            relation = relationOwnerSelection.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath!);\n            if (relation) {\n                return relation;\n            }\n        }\n\n        throw new Error(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);  \n    }\n\n    /**\n     * Metadata of the joined entity.\n     * If table without entity was joined, then it will return undefined.\n     */\n    get metadata(): EntityMetadata|undefined {\n\n        // entityOrProperty is relation, e.g. \"post.category\"\n        if (this.relation)\n            return this.relation.inverseEntityMetadata;\n\n        // entityOrProperty is Entity class\n        if (this.connection.hasMetadata(this.entityOrProperty))\n            return this.connection.getMetadata(this.entityOrProperty);\n\n        return undefined;\n\n        /*if (typeof this.entityOrProperty === \"string\") { // entityOrProperty is a custom table\n\n            // first try to find entity with such name, this is needed when entity does not have a target class,\n            // and its target is a string name (scenario when plain old javascript is used or entity schema is loaded from files)\n            const metadata = this.connection.entityMetadatas.find(metadata => metadata.name === this.entityOrProperty);\n            if (metadata)\n                return metadata;\n\n            // check if we have entity with such table name, and use its metadata if found\n            return this.connection.entityMetadatas.find(metadata => metadata.tableName === this.entityOrProperty);\n        }*/\n    }\n\n    /**\n     * Generates alias of junction table, whose ids we get.\n     */\n    get junctionAlias(): string {\n        if (!this.relation)\n            throw new Error(`Cannot get junction table for join without relation.`);\n\n        return this.relation.isOwning ? this.parentAlias + \"_\" + this.alias.name : this.alias.name + \"_\" + this.parentAlias;\n    }\n\n    get mapToPropertyParentAlias(): string|undefined {\n        if (!this.mapToProperty)\n            return undefined;\n\n        return this.mapToProperty!.split(\".\")[0];\n    }\n\n    get mapToPropertyPropertyName(): string|undefined {\n        if (!this.mapToProperty)\n            return undefined;\n\n        return this.mapToProperty!.split(\".\")[1];\n    }\n\n}","import {EntityMetadata} from \"../../metadata/EntityMetadata\";\nimport {QueryBuilderUtils} from \"../QueryBuilderUtils\";\nimport {RelationMetadata} from \"../../metadata/RelationMetadata\";\nimport {QueryExpressionMap} from \"../QueryExpressionMap\";\nimport {SelectQueryBuilder} from \"../SelectQueryBuilder\";\n\nexport class RelationCountAttribute {\n\n    /**\n     * Alias of the joined (destination) table.\n     */\n    alias?: string;\n\n    /**\n     * Name of relation.\n     */\n    relationName: string;\n\n    /**\n     * Property + alias of the object where to joined data should be mapped.\n     */\n    mapToProperty: string;\n\n    /**\n     * Extra condition applied to \"ON\" section of join.\n     */\n    queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private expressionMap: QueryExpressionMap,\n                relationCountAttribute?: Partial<RelationCountAttribute>) {\n        Object.assign(this, relationCountAttribute || {});\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    get joinInverseSideMetadata(): EntityMetadata {\n        return this.relation.inverseEntityMetadata;\n    }\n\n    /**\n     * Alias of the parent of this join.\n     * For example, if we join (\"post.category\", \"categoryAlias\") then \"post\" is a parent alias.\n     * This value is extracted from entityOrProperty value.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get parentAlias(): string {\n        if (!QueryBuilderUtils.isAliasProperty(this.relationName))\n            throw new Error(`Given value must be a string representation of alias property`);\n\n        return this.relationName.split(\".\")[0];\n    }\n\n    /**\n     * Relation property name of the parent.\n     * This is used to understand what is joined.\n     * For example, if we join (\"post.category\", \"categoryAlias\") then \"category\" is a relation property.\n     * This value is extracted from entityOrProperty value.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get relationProperty(): string|undefined {\n        if (!QueryBuilderUtils.isAliasProperty(this.relationName))\n            throw new Error(`Given value is a string representation of alias property`);\n\n        return this.relationName.split(\".\")[1];\n    }\n\n    get junctionAlias(): string {\n        const [parentAlias, relationProperty] = this.relationName.split(\".\");\n        return parentAlias + \"_\" + relationProperty + \"_relation_count\";\n    }\n\n    /**\n     * Relation of the parent.\n     * This is used to understand what is joined.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get relation(): RelationMetadata {\n        if (!QueryBuilderUtils.isAliasProperty(this.relationName))\n            throw new Error(`Given value is a string representation of alias property`);\n\n        const [parentAlias, propertyPath] = this.relationName.split(\".\");\n        const relationOwnerSelection = this.expressionMap.findAliasByName(parentAlias);\n        const relation = relationOwnerSelection.metadata.findRelationWithPropertyPath(propertyPath);\n        if (!relation)\n            throw new Error(`Relation with property path ${propertyPath} in entity was not found.`);\n        return relation;\n    }\n\n    /**\n     * Metadata of the joined entity.\n     * If table without entity was joined, then it will return undefined.\n     */\n    get metadata(): EntityMetadata {\n        if (!QueryBuilderUtils.isAliasProperty(this.relationName))\n            throw new Error(`Given value is a string representation of alias property`);\n\n        const parentAlias = this.relationName.split(\".\")[0];\n        const selection = this.expressionMap.findAliasByName(parentAlias);\n        return selection.metadata;\n    }\n\n    get mapToPropertyPropertyName(): string {\n        return this.mapToProperty!.split(\".\")[1];\n    }\n\n}\n","export interface SelectQuery {\n    selection: string;\n    aliasName?: string;\n    virtual?: boolean;\n}","/**\n * Thrown when user tries to execute operation that requires connection to be established.\n */\nexport class ConnectionIsNotSetError extends Error {\n    name = \"ConnectionIsNotSetError\";\n\n    constructor(dbType: string) {\n        super();\n        this.message = `Connection with ${dbType} database is not established. Check connection configuration.`;\n    }\n\n}","/**\n * Thrown when required driver's package is not installed.\n */\nexport class DriverPackageNotInstalledError extends Error {\n    name = \"DriverPackageNotInstalledError\";\n\n    constructor(driverName: string, packageName: string) {\n        super();\n        this.message = `${driverName} package has not been found installed. Try to install it: npm install ${packageName} --save`;\n    }\n\n}","/**\n * Common driver utility functions.\n */\nexport class DriverUtils {\n\n    // -------------------------------------------------------------------------\n    // Public Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Normalizes and builds a new driver options.\n     * Extracts settings from connection url and sets to a new options object.\n     */\n    static buildDriverOptions(options: any, buildOptions?: { useSid: boolean }): any {\n        if (options.url) {\n            const parsedUrl = this.parseConnectionUrl(options.url);\n            if (buildOptions && buildOptions.useSid) {\n                const urlDriverOptions: any = {\n                    type: options.type,\n                    host: parsedUrl.host,\n                    username: parsedUrl.username,\n                    password: parsedUrl.password,\n                    port: parsedUrl.port,\n                    sid: parsedUrl.database\n                };\n                return Object.assign(urlDriverOptions, options);\n\n            } else {\n                const urlDriverOptions: any = {\n                    type: options.type,\n                    host: parsedUrl.host,\n                    username: parsedUrl.username,\n                    password: parsedUrl.password,\n                    port: parsedUrl.port,\n                    database: parsedUrl.database\n                };\n                return Object.assign(urlDriverOptions, options);\n            }\n        }\n        return Object.assign({}, options);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Extracts connection data from the connection url.\n     */\n    private static parseConnectionUrl(url: string) {\n        const firstSlashes = url.indexOf(\"//\");\n        const preBase = url.substr(firstSlashes + 2);\n        const secondSlash = preBase.indexOf(\"/\");\n        const base = (secondSlash !== -1) ? preBase.substr(0, secondSlash) : preBase;\n        const afterBase = (secondSlash !== -1) ? preBase.substr(secondSlash + 1) : undefined;\n        const [usernameAndPassword, hostAndPort] = base.split(\"@\");\n        const [username, password] = usernameAndPassword.split(\":\");\n        const [host, port] = hostAndPort.split(\":\");\n\n        return {\n            host: host,\n            username: username,\n            password: password,\n            port: port ? parseInt(port) : undefined,\n            database: afterBase || undefined\n        };\n    }\n\n}","/**\n * Thrown when transaction is already started and user tries to run it again.\n */\nexport class TransactionAlreadyStartedError extends Error {\n    name = \"TransactionAlreadyStartedError\";\n\n    constructor() {\n        super();\n        this.message = `Transaction already started for the given connection, commit current transaction before starting a new one.`;\n    }\n\n}","/**\n * Thrown when transaction is not started yet and user tries to run commit or rollback.\n */\nexport class TransactionNotStartedError extends Error {\n    name = \"TransactionNotStartedError\";\n\n    constructor() {\n        super();\n        this.message = `Transaction is not started yet, start transaction before committing or rolling it back.`;\n    }\n\n}","/**\n * Arguments for IndexMetadata class.\n */\nexport interface IndexMetadataArgs {\n\n    /**\n     * Class to which index is applied.\n     */\n    target: Function|string;\n\n    /**\n     * Index name.\n     */\n    name?: string;\n\n    /**\n     * Columns combination to be used as index.\n     */\n    columns?: ((object?: any) => (any[]|{ [key: string]: number }))|string[];\n\n    /**\n     * Indicates if index must be unique or not.\n     */\n    unique: boolean;\n\n    /**\n     * If true, the index only references documents with the specified field.\n     * These indexes use less space but behave differently in some situations (particularly sorts).\n     * This option is only supported for mongodb database.\n     */\n    sparse?: boolean;\n}\n","import {EntityMetadata} from \"./EntityMetadata\";\nimport {IndexMetadataArgs} from \"../metadata-args/IndexMetadataArgs\";\nimport {NamingStrategyInterface} from \"../naming-strategy/NamingStrategyInterface\";\nimport {ColumnMetadata} from \"./ColumnMetadata\";\nimport {EmbeddedMetadata} from \"./EmbeddedMetadata\";\n\n/**\n * Index metadata contains all information about table's index.\n */\nexport class IndexMetadata {\n\n    // ---------------------------------------------------------------------\n    // Public Properties\n    // ---------------------------------------------------------------------\n\n    /**\n     * Entity metadata of the class to which this index is applied.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Embedded metadata if this index was applied on embedded.\n     */\n    embeddedMetadata?: EmbeddedMetadata;\n\n    /**\n     * Indicates if this index must be unique.\n     */\n    isUnique: boolean = false;\n\n    /**\n     * If true, the index only references documents with the specified field.\n     * These indexes use less space but behave differently in some situations (particularly sorts).\n     * This option is only supported for mongodb database.\n     */\n    isSparse?: boolean;\n\n    /**\n     * Target class to which metadata is applied.\n     */\n    target?: Function|string;\n\n    /**\n     * Indexed columns.\n     */\n    columns: ColumnMetadata[] = [];\n\n    /**\n     * User specified index name.\n     */\n    givenName?: string;\n\n    /**\n     * User specified column names.\n     */\n    givenColumnNames?: ((object?: any) => (any[]|{ [key: string]: number }))|string[];\n\n    /**\n     * Final index name.\n     * If index name was given by a user then it stores normalized (by naming strategy) givenName.\n     * If index name was not given then its generated.\n     */\n    name: string;\n\n    /**\n     * Gets the table name on which index is applied.\n     */\n    tableName: string;\n\n    /**\n     * Map of column names with order set.\n     * Used only by MongoDB driver.\n     */\n    columnNamesWithOrderingMap: { [key: string]: number } = {};\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        entityMetadata: EntityMetadata,\n        embeddedMetadata?: EmbeddedMetadata,\n        columns?: ColumnMetadata[],\n        args?: IndexMetadataArgs\n    }) {\n        this.entityMetadata = options.entityMetadata;\n        this.embeddedMetadata = options.embeddedMetadata;\n        if (options.columns)\n            this.columns = options.columns;\n\n        if (options.args) {\n            this.target = options.args.target;\n            this.isUnique = options.args.unique;\n            this.isSparse = options.args.sparse;\n            this.givenName = options.args.name;\n            this.givenColumnNames = options.args.columns;\n        }\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Build Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Builds some depend index properties.\n     * Must be called after all entity metadata's properties map, columns and relations are built.\n     */\n    build(namingStrategy: NamingStrategyInterface): this {\n\n        const map: { [key: string]: number } = {};\n        this.tableName = this.entityMetadata.tableName;\n\n        // if columns already an array of string then simply return it\n        if (this.givenColumnNames) {\n            let columnPropertyPaths: string[] = [];\n            if (this.givenColumnNames instanceof Array) {\n                columnPropertyPaths = this.givenColumnNames.map(columnName => {\n                    if (this.embeddedMetadata)\n                        return this.embeddedMetadata.propertyPath + \".\" + columnName;\n\n                    return columnName;\n                });\n                columnPropertyPaths.forEach(propertyPath => map[propertyPath] = 1);\n            } else { // todo: indices in embeds are not implemented in this syntax. deprecate this syntax?\n                // if columns is a function that returns array of field names then execute it and get columns names from it\n                const columnsFnResult = this.givenColumnNames(this.entityMetadata.propertiesMap);\n                if (columnsFnResult instanceof Array) {\n                    columnPropertyPaths = columnsFnResult.map((i: any) => String(i));\n                    columnPropertyPaths.forEach(name => map[name] = 1);\n                } else {\n                    columnPropertyPaths = Object.keys(columnsFnResult).map((i: any) => String(i));\n                    Object.keys(columnsFnResult).forEach(columnName => map[columnName] = columnsFnResult[columnName]);\n                }\n            }\n\n            this.columns = columnPropertyPaths.map(propertyPath => {\n                const columnWithSameName = this.entityMetadata.columns.find(column => column.propertyPath === propertyPath);\n                if (columnWithSameName) {\n                    return [columnWithSameName];\n                }\n                const relationWithSameName = this.entityMetadata.relations.find(relation => relation.isWithJoinColumn && relation.propertyName === propertyPath);\n                if (relationWithSameName) {\n                    return relationWithSameName.joinColumns;\n                }\n                throw new Error(`Index ${this.givenName ? \"\\\"\" + this.givenName + \"\\\" \" : \"\"}contains column that is missing in the entity: ` + propertyPath);\n            })\n            .reduce((a, b) => a.concat(b));\n        }\n\n        this.columnNamesWithOrderingMap = Object.keys(map).reduce((updatedMap, key) => {\n            const column = this.entityMetadata.columns.find(column => column.propertyPath === key);\n            if (column)\n                updatedMap[column.databaseName] = map[key];\n            return updatedMap;\n        }, {} as { [key: string]: number });\n        this.name = namingStrategy.indexName(this.givenName ? this.givenName : undefined, this.entityMetadata.tableName, this.columns.map(column => column.databaseName));\n        return this;\n    }\n\n}","import {IndexMetadata} from \"../../metadata/IndexMetadata\";\n\n/**\n * Database's table index stored in this class.\n */\nexport class TableIndex {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Table name that contains this unique index.\n     */\n    tableName: string;\n\n    /**\n     * Index name.\n     */\n    name: string;\n\n    /**\n     * Columns included in this index.\n     */\n    columnNames: string[];\n\n    /**\n     * Indicates if this index is unique.\n     */\n    isUnique: boolean;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(tableName: string, name: string, columnNames: string[], isUnique: boolean) {\n        this.tableName = tableName;\n        this.name = name;\n        this.columnNames = columnNames;\n        this.isUnique = isUnique;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new copy of this index with exactly same properties.\n     */\n    clone() {\n        return new TableIndex(this.tableName, this.name, this.columnNames.map(name => name), this.isUnique);\n    }\n\n    // -------------------------------------------------------------------------\n    // Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates index from the index metadata object.\n     */\n    static create(indexMetadata: IndexMetadata): TableIndex {\n        return new TableIndex(\n            indexMetadata.entityMetadata.tableName,\n            indexMetadata.name,\n            indexMetadata.columns.map(column => column.databaseName),\n            indexMetadata.isUnique\n        );\n    }\n\n}","import {ForeignKeyMetadata} from \"../../metadata/ForeignKeyMetadata\";\n\n/**\n * Foreign key from the database stored in this class.\n */\nexport class TableForeignKey {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Name of the table which contains this foreign key.\n     */\n    name: string;\n\n    /**\n     * Column names which included by this foreign key.\n     */\n    columnNames: string[];\n\n    /**\n     * Table referenced in the foreign key.\n     */\n    referencedTableName: string;\n\n    /**\n     * Table path referenced in the foreign key.\n     */\n    referencedTablePath: string;\n\n    /**\n     * Column names which included by this foreign key.\n     */\n    referencedColumnNames: string[];\n\n    /**\n     * \"ON DELETE\" of this foreign key, e.g. what action database should perform when\n     * referenced stuff is being deleted.\n     */\n    onDelete?: string;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(name: string,\n                columnNames: string[],\n                referencedColumnNames: string[],\n                referencedTable: string,\n                referencedTablePath: string,\n                onDelete?: string) {\n\n        this.name = name;\n        this.columnNames = columnNames;\n        this.referencedColumnNames = referencedColumnNames;\n        this.referencedTableName = referencedTable;\n        this.referencedTablePath = referencedTablePath;\n        this.onDelete = onDelete;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new copy of this foreign key with exactly same properties.\n     */\n    clone() {\n        return new TableForeignKey(\n            this.name,\n            this.columnNames,\n            this.referencedColumnNames,\n            this.referencedTableName,\n            this.referencedTablePath\n        );\n    }\n\n    // -------------------------------------------------------------------------\n    // Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new foreign schema from the given foreign key metadata.\n     */\n    static create(metadata: ForeignKeyMetadata) {\n        return new TableForeignKey(\n            metadata.name,\n            metadata.columnNames,\n            metadata.referencedColumnNames,\n            metadata.referencedTableName,\n            metadata.referencedEntityMetadata.tablePath,\n            metadata.onDelete\n        );\n    }\n\n}","/**\n * Primary key from the database stored in this class.\n */\nexport class TablePrimaryKey {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Key name.\n     */\n    name: string;\n\n    /**\n     * Column to which this primary key is bind.\n     */\n    columnName: string;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(name: string, columnName: string) {\n        this.name = name;\n        this.columnName = columnName;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new copy of this primary key with exactly same properties.\n     */\n    clone() {\n        return new TablePrimaryKey(this.name, this.columnName);\n    }\n\n}","export class RandomGenerator {\n\n    /**\n     *  discuss at: http://locutus.io/php/sha1/\n     * original by: Webtoolkit.info (http://www.webtoolkit.info/)\n     * improved by: Michael White (http://getsprink.com)\n     * improved by: Kevin van Zonneveld (http://kvz.io)\n     *    input by: Brett Zamir (http://brett-zamir.me)\n     *      note 1: Keep in mind that in accordance with PHP, the whole string is buffered and then\n     *      note 1: hashed. If available, we'd recommend using Node's native crypto modules directly\n     *      note 1: in a steaming fashion for faster and more efficient hashing\n     *   example 1: sha1('Kevin van Zonneveld')\n     *   returns 1: '54916d2e62f65b3afa6e192e6a601cdbe5cb5897'\n     */\n    static sha1(str: string) {\n\n        let _rotLeft = function(n: any, s: any) {\n            let t4 = (n << s) | (n >>> (32 - s));\n            return t4;\n        };\n\n        let _cvtHex = function(val: any) {\n            let str = \"\";\n            let i;\n            let v;\n\n            for (i = 7; i >= 0; i--) {\n                v = (val >>> (i * 4)) & 0x0f;\n                str += v.toString(16);\n            }\n            return str;\n        };\n\n        let blockstart;\n        let i, j;\n        let W = new Array(80);\n        let H0 = 0x67452301;\n        let H1 = 0xEFCDAB89;\n        let H2 = 0x98BADCFE;\n        let H3 = 0x10325476;\n        let H4 = 0xC3D2E1F0;\n        let A, B, C, D, E;\n        let temp;\n\n        // utf8_encode\n        str = /*unescape*/(encodeURIComponent(str));\n        let strLen = str.length;\n\n        let wordArray = [];\n        for (i = 0; i < strLen - 3; i += 4) {\n            j = str.charCodeAt(i) << 24 |\n                str.charCodeAt(i + 1) << 16 |\n                str.charCodeAt(i + 2) << 8 |\n                str.charCodeAt(i + 3);\n            wordArray.push(j);\n        }\n\n        switch (strLen % 4) {\n            case 0:\n                i = 0x080000000;\n                break;\n            case 1:\n                i = str.charCodeAt(strLen - 1) << 24 | 0x0800000;\n                break;\n            case 2:\n                i = str.charCodeAt(strLen - 2) << 24 | str.charCodeAt(strLen - 1) << 16 | 0x08000;\n                break;\n            case 3:\n                i = str.charCodeAt(strLen - 3) << 24 |\n                    str.charCodeAt(strLen - 2) << 16 |\n                    str.charCodeAt(strLen - 1) <<\n                    8 | 0x80;\n                break;\n        }\n\n        wordArray.push(i);\n\n        while ((wordArray.length % 16) !== 14) {\n            wordArray.push(0);\n        }\n\n        wordArray.push(strLen >>> 29);\n        wordArray.push((strLen << 3) & 0x0ffffffff);\n\n        for (blockstart = 0; blockstart < wordArray.length; blockstart += 16) {\n            for (i = 0; i < 16; i++) {\n                W[i] = wordArray[blockstart + i];\n            }\n            for (i = 16; i <= 79; i++) {\n                W[i] = _rotLeft(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n            }\n\n            A = H0;\n            B = H1;\n            C = H2;\n            D = H3;\n            E = H4;\n\n            for (i = 0; i <= 19; i++) {\n                temp = (_rotLeft(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5A827999) & 0x0ffffffff;\n                E = D;\n                D = C;\n                C = _rotLeft(B, 30);\n                B = A;\n                A = temp;\n            }\n\n            for (i = 20; i <= 39; i++) {\n                temp = (_rotLeft(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) & 0x0ffffffff;\n                E = D;\n                D = C;\n                C = _rotLeft(B, 30);\n                B = A;\n                A = temp;\n            }\n\n            for (i = 40; i <= 59; i++) {\n                temp = (_rotLeft(A, 5) + ((B & C) | (B & D) | (C & D)) + E + W[i] + 0x8F1BBCDC) & 0x0ffffffff;\n                E = D;\n                D = C;\n                C = _rotLeft(B, 30);\n                B = A;\n                A = temp;\n            }\n\n            for (i = 60; i <= 79; i++) {\n                temp = (_rotLeft(A, 5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) & 0x0ffffffff;\n                E = D;\n                D = C;\n                C = _rotLeft(B, 30);\n                B = A;\n                A = temp;\n            }\n\n            H0 = (H0 + A) & 0x0ffffffff;\n            H1 = (H1 + B) & 0x0ffffffff;\n            H2 = (H2 + C) & 0x0ffffffff;\n            H3 = (H3 + D) & 0x0ffffffff;\n            H4 = (H4 + E) & 0x0ffffffff;\n        }\n\n        temp = _cvtHex(H0) + _cvtHex(H1) + _cvtHex(H2) + _cvtHex(H3) + _cvtHex(H4);\n        return temp.toLowerCase();\n    }\n\n    /**\n     * RFC4122 compliant UUID v4 generator.\n     */\n    static uuid4(): string {\n        return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) =>  {\n            const r = Math.random() * 16 | 0, v = c === \"x\" ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n\n}","/**\n * Browser's implementation of the platform-specific tools.\n *\n * This file gonna replace PlatformTools for browser environment.\n * For node.js environment this class is not getting packaged.\n * Don't use methods of this class in the code, use PlatformTools methods instead.\n */\nexport class PlatformTools {\n\n    /**\n     * Type of the currently running platform.\n     */\n    static type: \"browser\"|\"node\" = \"browser\";\n\n    /**\n     * Gets global variable where global stuff can be stored.\n     */\n    static getGlobalVariable(): any {\n        return window;\n    }\n\n    /**\n     * Loads (\"require\"-s) given file or package.\n     * This operation only supports on node platform\n     */\n    static load(name: string): any {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: require(\"${name}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Normalizes given path. Does \"path.normalize\".\n     */\n    static pathNormalize(pathStr: string): string {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize(\"${pathStr}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Gets file extension. Does \"path.extname\".\n     */\n    static pathExtname(pathStr: string): string {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname(\"${pathStr}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Resolved given path. Does \"path.resolve\".\n     */\n    static pathResolve(pathStr: string): string {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve(\"${pathStr}\").`);\n\n        return \"\";\n    }\n\n    /**\n     * Synchronously checks if file exist. Does \"fs.existsSync\".\n     */\n    static fileExist(pathStr: string): boolean {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync(\"${pathStr}\").`);\n\n        return false;\n    }\n\n    /**\n     * Gets environment variable.\n     */\n    static getEnvVariable(name: string): any {\n        // if (this.type === \"browser\")\n        //     throw new Error(`This option/function is not supported in the browser environment. Failed operation: process.env[\"${name}\"].`);\n        return undefined;\n    }\n\n    static readFileSync(filename: string): any {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync(\"${filename}\").`);\n        return null;\n    }\n    \n    static appendFileSync(filename: string, data: any) {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync(\"${filename}\").`);\n    }\n\n    static writeFile(path: string, data: any): Promise<void> {\n        if (this.type === \"browser\")\n            throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile(\"${path}\").`);\n        return Promise.reject(null);\n    }\n\n    /**\n     * Highlights sql string to be print in the console.\n     */\n    static highlightSql(sql: string) {\n        return sql;\n    }\n\n    /**\n     * Highlights json string to be print in the console.\n     */\n    static highlightJson(json: string) {\n        return json;\n    }\n\n    /**\n     * Logging functions needed by AdvancedConsoleLogger (but here without chalk)\n     */\n    static logInfo(prefix: string, info: any) {\n        console.info(prefix + \" \", info);\n    }\n\n    static logError(prefix: string, error: any) {\n        console.error(prefix + \" \", error);\n    }\n    \n    static logWarn(prefix: string, warning: any) {\n        console.warn(prefix + \" \", warning);\n    }\n    \n    static log(message: string) {\n        console.log(message);\n    }\n\n    static warn(message: string) {\n        return message;\n    }\n}\n\n/**\n * These classes are needed for stream operations or\n * in the mongodb driver. both aren't supported in the browser\n */\nexport class EventEmitter {}\n\nexport class Readable {}\n\nexport class Writable {}\n\nexport interface ReadStream {}","/**\n * Used to specify what entity relations should be loaded.\n *\n * Example:\n *  const options: JoinOptions = {\n *     alias: \"photo\",\n *     leftJoin: {\n *         author: \"photo.author\",\n *         categories: \"categories\",\n *         user: \"categories.user\",\n *         profile: \"user.profile\"\n *     },\n *     innerJoin: {\n *         author: \"photo.author\",\n *         categories: \"categories\",\n *         user: \"categories.user\",\n *         profile: \"user.profile\"\n *     },\n *     leftJoinAndSelect: {\n *         author: \"photo.author\",\n *         categories: \"categories\",\n *         user: \"categories.user\",\n *         profile: \"user.profile\"\n *     },\n *     innerJoinAndSelect: {\n *         author: \"photo.author\",\n *         categories: \"categories\",\n *         user: \"categories.user\",\n *         profile: \"user.profile\"\n *     }\n * };\n */\nexport interface JoinOptions {\n\n    /**\n     * Alias of the main entity.\n     */\n    alias: string;\n\n    /**\n     * Array of columns to LEFT JOIN.\n     */\n    leftJoinAndSelect?: { [key: string]: string };\n\n    /**\n     * Array of columns to INNER JOIN.\n     */\n    innerJoinAndSelect?: { [key: string]: string };\n\n    /**\n     * Array of columns to LEFT JOIN.\n     */\n    leftJoin?: { [key: string]: string };\n\n    /**\n     * Array of columns to INNER JOIN.\n     */\n    innerJoin?: { [key: string]: string };\n\n}\n","import {JoinOptions} from \"./JoinOptions\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\n\n/**\n * Defines a special criteria to find specific entity.\n */\nexport interface FindOneOptions<Entity> {\n\n    /**\n     * Specifies what columns should be retrieved.\n     */\n    select?: (keyof Entity)[];\n\n    /**\n     * Simple condition that should be applied to match entities.\n     */\n    where?: Partial<Entity>|ObjectLiteral|string;\n\n    /**\n     * Indicates what relations of entity should be loaded (simplified left join form).\n     */\n    relations?: string[];\n\n    /**\n     * Specifies what relations should be loaded.\n     */\n    join?: JoinOptions;\n\n    /**\n     * Order, in which entities should be ordered.\n     */\n    order?: { [P in keyof Entity]?: \"ASC\"|\"DESC\"|1|-1 };\n\n    /**\n     * Enables or disables query result caching.\n     */\n    cache?: boolean | number | { id: any, milliseconds: number };\n\n}\n","import {FindOneOptions} from \"./FindOneOptions\";\n\n/**\n * Defines a special criteria to find specific entities.\n */\nexport interface FindManyOptions<Entity> extends FindOneOptions<Entity> {\n\n    /**\n     * Offset (paginated) where from entities should be taken.\n     */\n    skip?: number;\n\n    /**\n     * Limit (paginated) - max number of entities should be taken.\n     */\n    take?: number;\n\n}\n","/**\n * Represents some Type of the Object.\n */\nexport type ObjectType<T> = { new (): T }|Function;\n","/**\n * Thrown when consumer tries to use query runner from query runner provider after it was released.\n */\nexport class QueryRunnerProviderAlreadyReleasedError extends Error {\n    name = \"QueryRunnerProviderAlreadyReleasedError\";\n\n    constructor() {\n        super();\n        this.message = `Database connection provided by a query runner was already released, cannot continue to use its querying methods anymore.`;\n        this.stack = new Error().stack;\n    }\n\n}","/**\n * Same as Partial<T> but goes deeper and makes Partial<T> all its properties and sub-properties.\n */\nexport type DeepPartial<T> = {\n    [P in keyof T]?: DeepPartial<T[P]>;\n};\n","/**\n * Special options passed to Repository#remove method.\n */\nexport interface RemoveOptions {\n\n    /**\n     * Additional data to be passed with remove method.\n     * This data can be used in subscribers then.\n     */\n    data?: any;\n\n}","/**\n * Special options passed to Repository#persist method.\n */\nexport interface SaveOptions {\n\n    /**\n     * Additional data to be passed with persist method.\n     * This data can be used in subscribers then.\n     */\n    data?: any;\n\n}","/**\n * Thrown when consumer tries to release entity manager that does not use single database connection.\n */\nexport class NoNeedToReleaseEntityManagerError extends Error {\n    name = \"NoNeedToReleaseEntityManagerError\";\n\n    constructor() {\n        super();\n        this.message = `Entity manager is not using single database connection and cannot be released. ` +\n            `Only entity managers created by connection#createEntityManagerWithSingleDatabaseConnection ` +\n            `methods have a single database connection and they should be released.`;\n        this.stack = new Error().stack;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {DeepPartial} from \"../common/DeepPartial\";\nimport {SaveOptions} from \"./SaveOptions\";\nimport {RemoveOptions} from \"./RemoveOptions\";\nimport {EntityManager} from \"../entity-manager/EntityManager\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Repository is supposed to work with your entity objects. Find entities, insert, update, delete, etc.\n */\nexport class Repository<Entity extends ObjectLiteral> {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity Manager used by this repository.\n     */\n    readonly manager: EntityManager;\n\n    /**\n     * Entity metadata of the entity current repository manages.\n     */\n    readonly metadata: EntityMetadata;\n\n    /**\n     * Query runner provider used for this repository.\n     */\n    readonly queryRunner?: QueryRunner;\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    createQueryBuilder(alias?: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity> {\n        return this.manager.createQueryBuilder(this.metadata.target, alias || this.metadata.targetName, queryRunner || this.queryRunner);\n    }\n\n    /**\n     * Returns object that is managed by this repository.\n     * If this repository manages entity from schema,\n     * then it returns a name of that schema instead.\n     */\n    get target(): Function|string {\n        return this.metadata.target;\n    }\n\n    /**\n     * Checks if entity has an id.\n     * If entity composite compose ids, it will check them all.\n     */\n    hasId(entity: Entity): boolean {\n        return this.manager.hasId(this.metadata.target, entity);\n    }\n\n    /**\n     * Gets entity mixed id.\n     */\n    getId(entity: Entity): any {\n        return this.manager.getId(this.metadata.target, entity);\n    }\n\n    /**\n     * Creates a new entity instance.\n     */\n    create(): Entity;\n\n    /**\n     * Creates a new entities and copies all entity properties from given objects into their new entities.\n     * Note that it copies only properties that present in entity schema.\n     */\n    create(entityLikeArray: DeepPartial<Entity>[]): Entity[];\n\n    /**\n     * Creates a new entity instance and copies all entity properties from this object into a new entity.\n     * Note that it copies only properties that present in entity schema.\n     */\n    create(entityLike: DeepPartial<Entity>): Entity;\n\n    /**\n     * Creates a new entity instance or instances.\n     * Can copy properties from the given object into new entities.\n     */\n    create(plainEntityLikeOrPlainEntityLikes?: DeepPartial<Entity>|DeepPartial<Entity>[]): Entity|Entity[] {\n        return this.manager.create<any>(this.metadata.target, plainEntityLikeOrPlainEntityLikes as any);\n    }\n\n    /**\n     * Merges multiple entities (or entity-like objects) into a given entity.\n     */\n    merge(mergeIntoEntity: Entity, ...entityLikes: DeepPartial<Entity>[]): Entity {\n        return this.manager.merge(this.metadata.target, mergeIntoEntity, ...entityLikes);\n    }\n\n    /**\n     * Creates a new entity from the given plan javascript object. If entity already exist in the database, then\n     * it loads it (and everything related to it), replaces all values with the new ones from the given object\n     * and returns this new entity. This new entity is actually a loaded from the db entity with all properties\n     * replaced from the new object.\n     *\n     * Note that given entity-like object must have an entity id / primary key to find entity by.\n     * Returns undefined if entity with given id was not found.\n     */\n    async preload(entityLike: DeepPartial<Entity>): Promise<Entity|undefined> {\n        return this.manager.preload(this.metadata.target, entityLike);\n    }\n\n    /**\n     * Saves all given entities in the database.\n     * If entities do not exist in the database then inserts, otherwise updates.\n     */\n    async save<T extends DeepPartial<Entity>>(entities: T[], options?: SaveOptions): Promise<T[]>;\n\n    /**\n     * Saves a given entity in the database.\n     * If entity does not exist in the database then inserts, otherwise updates.\n     */\n    async save<T extends DeepPartial<Entity>>(entity: T, options?: SaveOptions): Promise<T>;\n\n    /**\n     * Saves one or many given entities.\n     */\n    async save<T extends DeepPartial<Entity>>(entityOrEntities: T|T[], options?: SaveOptions): Promise<T|T[]> {\n        return this.manager.save(this.metadata.target, entityOrEntities as any, options);\n    }\n\n    /**\n     * Inserts a given entity into the database.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient INSERT query.\n     * Does not check if entity exist in the database, so query will fail if duplicate entity is being inserted.\n     */\n    async insert(entity: Partial<Entity>|Partial<Entity>[], options?: SaveOptions): Promise<void> {\n        return this.manager.insert(this.metadata.target, entity, options);\n    }\n\n    /**\n     * Updates entity partially. Entity can be found by a given conditions.\n     */\n    async update(conditions: Partial<Entity>, partialEntity: DeepPartial<Entity>, options?: SaveOptions): Promise<void> {\n        return this.manager.update(this.metadata.target, conditions, partialEntity, options);\n    }\n\n    /**\n     * Updates entity partially. Entity will be found by a given id.\n     */\n    async updateById(id: any, partialEntity: DeepPartial<Entity>, options?: SaveOptions): Promise<void> {\n        return this.manager.updateById(this.metadata.target, id, partialEntity, options);\n    }\n\n    /**\n     * Removes a given entities from the database.\n     */\n    async remove(entities: Entity[], options?: RemoveOptions): Promise<Entity[]>;\n\n    /**\n     * Removes a given entity from the database.\n     */\n    async remove(entity: Entity, options?: RemoveOptions): Promise<Entity>;\n\n    /**\n     * Removes one or many given entities.\n     */\n    async remove(entityOrEntities: Entity|Entity[], options?: RemoveOptions): Promise<Entity|Entity[]> {\n        return this.manager.remove(this.metadata.target, entityOrEntities as any, options);\n    }\n\n    /**\n     * Deletes entities by a given conditions.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient DELETE query.\n     * Does not check if entity exist in the database.\n     */\n    async delete(conditions: Partial<Entity>, options?: RemoveOptions): Promise<void> {\n        return this.manager.delete(this.metadata.target, conditions, options);\n    }\n\n    /**\n     * Deletes entities by a given conditions.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient DELETE query.\n     * Does not check if entity exist in the database.\n     */\n    async deleteById(id: any, options?: RemoveOptions): Promise<void> {\n        return this.manager.deleteById(this.metadata.target, id, options);\n    }\n\n    /**\n     * Removes entity by a given entity id.\n     *\n     * @deprecated use deleteById method instead.\n     */\n    async removeById(id: any, options?: RemoveOptions): Promise<void> {\n        return this.manager.deleteById(this.metadata.target, id, options);\n    }\n\n    /**\n     * Removes entity by a given entity id.\n     *\n     * @deprecated use deleteById method instead.\n     */\n    async removeByIds(ids: any[], options?: RemoveOptions): Promise<void> {\n        return this.manager.removeByIds(this.metadata.target, ids, options);\n    }\n\n    /**\n     * Counts entities that match given options.\n     */\n    count(options?: FindManyOptions<Entity>): Promise<number>;\n\n    /**\n     * Counts entities that match given conditions.\n     */\n    count(conditions?: DeepPartial<Entity>): Promise<number>;\n\n    /**\n     * Counts entities that match given find options or conditions.\n     */\n    count(optionsOrConditions?: FindManyOptions<Entity>|DeepPartial<Entity>): Promise<number> {\n        return this.manager.count(this.metadata.target, optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entities that match given options.\n     */\n    find(options?: FindManyOptions<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities that match given conditions.\n     */\n    find(conditions?: DeepPartial<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    find(optionsOrConditions?: FindManyOptions<Entity>|DeepPartial<Entity>): Promise<Entity[]> {\n        return this.manager.find(this.metadata.target, optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entities that match given find options.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount(options?: FindManyOptions<Entity>): Promise<[ Entity[], number ]>;\n\n    /**\n     * Finds entities that match given conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount(conditions?: DeepPartial<Entity>): Promise<[ Entity[], number ]>;\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount(optionsOrConditions?: FindManyOptions<Entity>|DeepPartial<Entity>): Promise<[ Entity[], number ]> {\n        return this.manager.findAndCount(this.metadata.target, optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    findByIds(ids: any[], options?: FindManyOptions<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities by ids.\n     * Optionally conditions can be applied.\n     */\n    findByIds(ids: any[], conditions?: DeepPartial<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    findByIds(ids: any[], optionsOrConditions?: FindManyOptions<Entity>|DeepPartial<Entity>): Promise<Entity[]> {\n        return this.manager.findByIds(this.metadata.target, ids, optionsOrConditions as any);\n    }\n\n    /**\n     * Finds first entity that matches given options.\n     */\n    findOne(options?: FindOneOptions<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds first entity that matches given conditions.\n     */\n    findOne(conditions?: DeepPartial<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds first entity that matches given conditions.\n     */\n    findOne(optionsOrConditions?: FindOneOptions<Entity>|DeepPartial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOne(this.metadata.target, optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options can be applied.\n     */\n    findOneById(id: any, options?: FindOneOptions<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds entity by given id.\n     * Optionally conditions can be applied.\n     */\n    findOneById(id: any, conditions?: DeepPartial<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    findOneById(id: any, optionsOrConditions?: FindOneOptions<Entity>|DeepPartial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOneById(this.metadata.target, id, optionsOrConditions as any);\n    }\n\n    /**\n     * Executes a raw SQL query and returns a raw database results.\n     * Raw query execution is supported only by relational databases (MongoDB is not supported).\n     */\n    async query(query: string, parameters?: any[]): Promise<any> {\n        return this.manager.query(query, parameters);\n    }\n\n    /**\n     * Clears all the data from the given table/collection (truncates/drops it).\n     *\n     * Note: this method uses TRUNCATE and may not work as you expect in transactions on some platforms.\n     * @see https://stackoverflow.com/a/5972738/925151\n     */\n    async clear(): Promise<void> {\n        return this.manager.clear(this.metadata.target);\n    }\n\n}","import {EventEmitter, Readable, Writable} from \"../../platform/PlatformTools\";\n\n/**\n * Creates a new MongoClient instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/MongoClient.html\n */\nexport declare class MongoClient {\n\n    constructor();\n\n    /**\n     * Connect to MongoDB using a url as documented at docs.mongodb.org/manual/reference/connection-string/\n     * Note that for replicasets the replicaSet query parameter is required in the 2.0 driver.\n     *\n     * @param url The connection URI string.\n     * @param callback The command result callback.\n     */\n    static connect(url: string, callback: MongoCallback<Db>): void;\n\n    /**\n     * Connect to MongoDB using a url as documented at docs.mongodb.org/manual/reference/connection-string/\n     * Note that for replicasets the replicaSet query parameter is required in the 2.0 driver.\n     *\n     * @param url The connection URI string.\n     * @param options Optional settings.\n     */\n    static connect(url: string, options?: MongoClientOptions): Promise<Db>;\n\n    /**\n     * Connect to MongoDB using a url as documented at docs.mongodb.org/manual/reference/connection-string/\n     * Note that for replicasets the replicaSet query parameter is required in the 2.0 driver.\n     *\n     * @param url The connection URI string.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     */\n    static connect(url: string, options: MongoClientOptions, callback: MongoCallback<Db>): void;\n\n    /**\n     * Connect to MongoDB using a url as documented at docs.mongodb.org/manual/reference/connection-string/\n     * Note that for replicasets the replicaSet query parameter is required in the 2.0 driver.\n     *\n     * @param url The connection URI string.\n     * @param callback The command result callback.\n     */\n    connect(url: string, callback: MongoCallback<Db>): void;\n\n    /**\n     * Connect to MongoDB using a url as documented at docs.mongodb.org/manual/reference/connection-string/\n     * Note that for replicasets the replicaSet query parameter is required in the 2.0 driver.\n     *\n     * @param url The connection URI string.\n     * @param options Optional settings.\n     */\n    connect(url: string, options?: MongoClientOptions): Promise<Db>;\n\n    /**\n     * Connect to MongoDB using a url as documented at docs.mongodb.org/manual/reference/connection-string/\n     * Note that for replicasets the replicaSet query parameter is required in the 2.0 driver.\n     *\n     * @param url The connection URI string.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     */\n    connect(url: string, options: MongoClientOptions, callback: MongoCallback<Db>): void;\n}\n\n/**\n * The callback format for results.\n */\nexport interface MongoCallback<T> {\n\n    /**\n     * @param error An error instance representing the error during the execution.\n     * @param result The result of execution.\n     */\n    (error: MongoError, result: T): void;\n}\n\n// http://mongodb.github.io/node-mongodb-native/2.1/api/MongoError.html\nexport declare class MongoError extends Error {\n    constructor(message: string);\n    static create(options: Object): MongoError;\n}\n\n/**\n * Options for MongoClient#connect method.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.2/api/MongoClient.html#.connect\n */\nexport interface MongoClientOptions {\n\n    /**\n     * The maximum size of the individual server pool.\n     */\n    poolSize?: number;\n\n    /**\n     * Enable SSL connection.\n     */\n    ssl?: boolean;\n\n    /**\n     * SSL Certificate store binary buffer.\n     */\n    sslCA?: Buffer;\n\n    /**\n     * Uri decode the user name and password for authentication.\n     */\n    uri_decode_auth?: boolean;\n\n    /**\n     * A hash of options to set on the db object, see Db constructor.\n     */\n    db?: DbCreateOptions;\n\n    /**\n     * A hash of options to set on the server objects, see Server constructor**.\n     */\n    server?: ServerOptions;\n\n    /**\n     * A hash of options to set on the replSet object, see ReplSet constructor**.\n     */\n    replSet?: ReplSetOptions;\n\n    /**\n     * A hash of options to set on the mongos object, see Mongos constructor**.\n     */\n    mongos?: MongosOptions;\n\n    /**\n     * A Promise library class the application wishes to use such as Bluebird, must be ES6 compatible.\n     */\n    promiseLibrary?: Object;\n}\n\nexport interface CommandOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Number of milliseconds to wait before aborting the query.\n     */\n    maxTimeMS?: number;\n}\n\n/**\n * Options for Db class.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html\n */\nexport interface DbCreateOptions {\n\n    /**\n     * If the database authentication is dependent on another databaseName.\n     */\n    authSource?: string;\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * The current value of the parameter native_parser.\n     */\n    native_parser?: boolean;\n\n    /**\n     * Force server to assign _id values instead of driver.\n     */\n    forceServerObjectId?: boolean;\n\n    /**\n     * Serialize functions on any object.\n     */\n    serializeFunctions?: boolean;\n\n    /**\n     * Specify if the BSON serializer should ignore undefined fields.\n     */\n    ignoreUndefined?: boolean;\n\n    /**\n     * Return document results as raw BSON buffers.\n     */\n    raw?: boolean;\n\n    /**\n     * Promotes Long values to number if they fit inside the 53 bits resolution.\n     */\n    promoteLongs?: boolean;\n\n    /**\n     * Sets a cap on how many operations the driver will buffer up before giving up on getting a working connection, default is -1 which is unlimited.\n     */\n    bufferMaxEntries?: number;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * A primary key factory object for generation of custom _id keys.\n     */\n    pkFactory?: Object;\n\n    /**\n     * A Promise library class the application wishes to use such as Bluebird, must be ES6 compatible.\n     */\n    promiseLibrary?: Object;\n\n    /**\n     * Specify a read concern for the collection. (only MongoDB 3.2 or higher supported).\n     */\n    readConcern?: { level?: Object };\n}\n\n/**\n * Creates a new ReadPreference instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/ReadPreference.html\n */\nexport declare class ReadPreference {\n    constructor(mode: string, tags: Object);\n\n    /**\n     * The ReadPreference mode as listed above.\n     */\n    mode: string;\n\n    /**\n     * An object representing read preference tags.\n     */\n    tags: any;\n\n    /**\n     * Read from primary only. All operations produce an error (throw an exception where applicable) if primary is unavailable. Cannot be combined with tags (This is the default.).\n     */\n    static PRIMARY: string;\n\n    /**\n     * Read from primary if available, otherwise a secondary.\n     */\n    static PRIMARY_PREFERRED: string;\n\n    /**\n     * Read from secondary if available, otherwise error.\n     */\n    static SECONDARY: string;\n\n    /**\n     * Read from a secondary if available, otherwise read from the primary.\n     */\n    static SECONDARY_PREFERRED: string;\n\n    /**\n     * All modes read from among the nearest candidates, but unlike other modes, NEAREST will include both the primary and all secondaries in the random selection.\n     */\n    static NEAREST: string;\n\n    /**\n     * Validate if a mode is legal.\n     */\n    isValid(mode: string): boolean;\n\n    /**\n     * Validate if a mode is legal.\n     */\n    static isValid(mode: string): boolean;\n}\n\n/**\n * Creates a new Server instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Server.html\n */\nexport interface SocketOptions {\n\n    /**\n     * Reconnect on error.\n     */\n    autoReconnect?: boolean;\n\n    /**\n     * TCP Socket NoDelay option.\n     */\n    noDelay?: boolean;\n\n    /**\n     * TCP KeepAlive on the socket with a X ms delay before start.\n     */\n    keepAlive?: number;\n\n    /**\n     * TCP Connection timeout setting.\n     */\n    connectTimeoutMS?: number;\n\n    /**\n     * TCP Socket timeout setting.\n     */\n    socketTimeoutMS?: number;\n}\n\n/**\n * Creates a new Server instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Server.html\n */\nexport interface ServerOptions {\n\n    /**\n     * Number of connections in the connection pool for each server instance, set to 5 as default for legacy reasons.\n     */\n    poolSize?: number;\n\n    /**\n     * Use ssl connection (needs to have a mongod server with ssl support).\n     */\n    ssl?: boolean;\n\n    /**\n     * Validate mongod server certificate against ca (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslValidate?: Object;\n\n    /**\n     * Ensure we check server identify during SSL, set to false to disable checking. Only works for Node 0.12.x or higher. You can pass in a boolean or your own checkServerIdentity override function.\n     */\n    checkServerIdentity?: boolean | Function;\n\n    /**\n     * Array of valid certificates either as Buffers or Strings (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslCA?: Array<Buffer | string>;\n\n    /**\n     * String or buffer containing the certificate we wish to present (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslCert?: Buffer | string;\n\n    /**\n     * String or buffer containing the certificate private key we wish to present (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslKey?: Buffer | string;\n\n    /**\n     * String or buffer containing the certificate password (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslPass?: Buffer | string;\n\n    /**\n     * Socket options.\n     */\n    socketOptions?: SocketOptions;\n\n    /**\n     * Server attempt to reconnect #times.\n     */\n    reconnectTries?: number;\n\n    /**\n     * Server will wait # milliseconds between retries.\n     */\n    reconnectInterval?: number;\n}\n\n/**\n * Creates a new ReplSet instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/ReplSet.html\n */\nexport interface ReplSetOptions {\n\n    /**\n     * Turn on high availability monitoring.\n     */\n    ha?: boolean;\n\n    /**\n     * Time between each replicaset status check.\n     */\n    haInterval?: number;\n\n    /**\n     * The name of the replicaset to connect to.\n     */\n    replicaSet?: string;\n\n    /**\n     * Sets the range of servers to pick when using NEAREST (lowest ping ms + the latency fence, ex: range of 1 to (1 + 15) ms).\n     */\n    secondaryAcceptableLatencyMS?: number;\n\n    /**\n     * Sets if the driver should connect even if no primary is available.\n     */\n    connectWithNoPrimary?: boolean;\n\n    /**\n     * Number of connections in the connection pool for each server instance, set to 5 as default for legacy reasons.\n     */\n    poolSize?: number;\n\n    /**\n     * Use ssl connection (needs to have a mongod server with ssl support).\n     */\n    ssl?: boolean;\n\n    /**\n     * Validate mongod server certificate against ca (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslValidate?: Object;\n\n    /**\n     * Ensure we check server identify during SSL, set to false to disable checking. Only works for Node 0.12.x or higher. You can pass in a boolean or your own checkServerIdentity override function.\n     */\n    checkServerIdentity?: boolean | Function;\n\n    /**\n     * Array of valid certificates either as Buffers or Strings (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslCA?: Array<Buffer | string>;\n\n    /**\n     * String or buffer containing the certificate we wish to present (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslCert?: Buffer | string;\n\n    /**\n     * String or buffer containing the certificate private key we wish to present (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslKey?: Buffer | string;\n\n    /**\n     * String or buffer containing the certificate private key we wish to present (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslPass?: Buffer | string;\n\n    /**\n     * Socket options.\n     */\n    socketOptions?: SocketOptions;\n}\n\n/**\n * Creates a new Mongos instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Mongos.html\n */\nexport interface MongosOptions {\n\n    /**\n     * Turn on high availability monitoring.\n     */\n    ha?: boolean;\n\n    /**\n     * Time between each replicaset status check.\n     */\n    haInterval?: number;\n\n    /**\n     * Number of connections in the connection pool for each server instance, set to 5 as default for legacy reasons.\n     */\n    poolSize?: number;\n\n    /**\n     * Use ssl connection (needs to have a mongod server with ssl support).\n     */\n    ssl?: boolean;\n\n    /**\n     * Validate mongod server certificate against ca (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslValidate?: Object;\n\n    /**\n     * Ensure we check server identify during SSL, set to false to disable checking. Only works for Node 0.12.x or higher. You can pass in a boolean or your own checkServerIdentity override function.\n     */\n    checkServerIdentity?: boolean | Function;\n\n    /**\n     * Array of valid certificates either as Buffers or Strings (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslCA?: Array<Buffer | string>;\n\n    /**\n     * String or buffer containing the certificate we wish to present (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslCert?: Buffer | string;\n\n    /**\n     * String or buffer containing the certificate private key we wish to present (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslKey?: Buffer | string;\n\n    /**\n     * String or buffer containing the certificate password (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    sslPass?: Buffer | string;\n\n    /**\n     * Socket options.\n     */\n    socketOptions?: SocketOptions;\n}\n\nexport interface DbOptions {\n\n    /**\n     * Do not make the db an event listener to the original connection.\n     */\n    noListener?: boolean;\n\n    /**\n     * Control if you want to return a cached instance or have a new one created.\n     */\n    returnNonCachedInstance?: boolean;\n}\n\nexport interface IndexInformationOptions {\n\n    /**\n     * Returns the full raw index information.\n     */\n    full?: boolean;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY,\n     * ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY,\n     * ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n}\n\nexport interface ExecuteDbAdminCommandOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    // maxTimeMS?: number;\n}\n\nexport interface ListCollectionsOptions {\n\n    /**\n     * The batchSize for the returned command cursor or if pre 2.8 the systems batch collection.\n     */\n    batchSize?: number;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n}\n\n/**\n * Db.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html\n */\nexport declare class Db extends EventEmitter {\n\n    /**\n     *\n     * @param databaseName The name of the database this instance represents.\n     * @param serverConfig The server topology for the database.\n     * @param options Optional.\n     */\n    constructor(databaseName: string, serverConfig: Server | ReplSet | Mongos, options?: DbCreateOptions);\n\n    /**\n     * Get the current db topology.\n     */\n    serverConfig: Server | ReplSet | Mongos;\n\n    /**\n     * Current bufferMaxEntries value for the database.\n     */\n    bufferMaxEntries: number;\n\n    /**\n     * The name of the database this instance represents.\n     */\n    databaseName: string;\n\n    /**\n     * The options associated with the db instance.\n     */\n    options: any;\n\n    /**\n     * The current value of the parameter native_parser.\n     */\n    native_parser: boolean;\n\n    /**\n     * The current slaveOk value for the db instance.\n     */\n    slaveOk: boolean;\n\n    /**\n     * The current write concern values.\n     */\n    writeConcern: any;\n\n    /**\n     * Add a user to the database.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#addUser\n     */\n    addUser(username: string, password: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Add a user to the database.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#addUser\n     */\n    addUser(username: string, password: string, options?: DbAddUserOptions): Promise<any>;\n\n    /**\n     * Add a user to the database.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#addUser\n     */\n    addUser(username: string, password: string, options: DbAddUserOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Return the Admin db instance.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#admin\n     */\n    admin(): Admin;\n\n    /**\n     * Authenticate a user against the server.\n     *\n     * @param userName The username.\n     * @param password The password.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#authenticate\n     */\n    authenticate(userName: string, password: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Authenticate a user against the server.\n     *\n     * @param userName The username.\n     * @param password The password.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#authenticate\n     */\n    authenticate(userName: string, password: string, options?: { authMechanism: string }): Promise<any>;\n\n    /**\n     * Authenticate a user against the server.\n     *\n     * @param userName The username.\n     * @param password The password.\n     * @param password\n     * @param options\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#authenticate\n     */\n    authenticate(userName: string, password: string, options: { authMechanism: string }, callback: MongoCallback<any>): void;\n\n    /**\n     * Close the db and its underlying connections.\n     *\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#close\n     */\n    close(callback: MongoCallback<void>): void;\n\n    /**\n     * Close the db and its underlying connections.\n     *\n     * @param forceClose Force close, emitting no events.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#close\n     */\n    close(forceClose?: boolean): Promise<void>;\n\n    /**\n     * Close the db and its underlying connections.\n     *\n     * @param forceClose Force close, emitting no events.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#close\n     */\n    close(forceClose: boolean, callback: MongoCallback<void>): void;\n\n    /**\n     * Fetch a specific collection (containing the actual collection information). If the application does not use strict mode you can\n     * can use it without a callback in the following way: var collection = db.collection('mycollection');\n     *\n     * @param name The collection name we wish to access.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#collection\n     */\n    collection(name: string): Collection;\n\n    /**\n     * Fetch a specific collection (containing the actual collection information). If the application does not use strict mode you can\n     * can use it without a callback in the following way: var collection = db.collection('mycollection');\n     *\n     * @param name The collection name we wish to access.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#collection\n     */\n    collection(name: string, callback: MongoCallback<Collection>): Collection;\n\n    /**\n     * Fetch a specific collection (containing the actual collection information). If the application does not use strict mode you can\n     * can use it without a callback in the following way: var collection = db.collection('mycollection');\n     *\n     * @param name The collection name we wish to access.\n     * @param options Optional settings.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#collection\n     */\n    collection(name: string, options: DbCollectionOptions, callback: MongoCallback<Collection>): Collection;\n\n    /**\n     * Fetch all collections for the current db.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#collections\n     */\n    collections(): Promise<Collection[]>;\n\n    /**\n     * Fetch all collections for the current db.\n     *\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#collections\n     */\n    collections(callback: MongoCallback<Collection[]>): void;\n\n    /**\n     * Execute a command.\n     *\n     * @param command The command hash.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#command\n     */\n    command(command: Object, callback: MongoCallback<any>): void;\n\n    /**\n     * Execute a command.\n     *\n     * @param command The command hash.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#command\n     */\n    command(command: Object, options?: { readPreference: ReadPreference | string }): Promise<any>;\n\n    /**\n     * Execute a command.\n     *\n     * @param command The command hash.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#command\n     */\n    command(command: Object, options: { readPreference: ReadPreference | string }, callback: MongoCallback<any>): void;\n\n    /**\n     * Create a new collection on a server with the specified options. Use this to create capped collections.\n     *\n     * @param name The collection name we wish to access.\n     * @param callback The results callback\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createCollection\n     */\n    createCollection(name: string, callback: MongoCallback<Collection>): void;\n\n    /**\n     * Create a new collection on a server with the specified options. Use this to create capped collections.\n     *\n     * @param name The collection name we wish to access.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createCollection\n     */\n    createCollection(name: string, options?: CollectionCreateOptions): Promise<Collection>;\n\n    /**\n     * Create a new collection on a server with the specified options. Use this to create capped collections.\n     *\n     * @param name The collection name we wish to access.\n     * @param options Optional settings.\n     * @param callback The results callback\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createCollection\n     */\n    createCollection(name: string, options: CollectionCreateOptions, callback: MongoCallback<Collection>): void;\n\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param name Name of the collection to create the index on.\n     * @param fieldOrSpec Defines the index.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createIndex\n     */\n    createIndex(name: string, fieldOrSpec: string | Object, callback: MongoCallback<any>): void;\n\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param name Name of the collection to create the index on.\n     * @param fieldOrSpec Defines the index.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createIndex\n     */\n    createIndex(name: string, fieldOrSpec: string | Object, options?: MongodbIndexOptions): Promise<any>;\n\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param name Name of the collection to create the index on.\n     * @param fieldOrSpec Defines the index.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createIndex\n     */\n    createIndex(name: string, fieldOrSpec: string | Object, options: MongodbIndexOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Create a new Db instance sharing the current socket connections. Be aware that the new db instances are\n     * related in a parent-child relationship to the original instance so that events are correctly emitted on child\n     * db instances. Child db instances are cached so performing db('db1') twice will return the same instance.\n     * You can control these behaviors with the options noListener and returnNonCachedInstance.\n     *\n     * @param dbName The name of the database we want to use.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#db\n     */\n    db(dbName: string): Db;\n\n    /**\n     * Create a new Db instance sharing the current socket connections. Be aware that the new db instances are\n     * related in a parent-child relationship to the original instance so that events are correctly emitted on child\n     * db instances. Child db instances are cached so performing db('db1') twice will return the same instance.\n     * You can control these behaviors with the options noListener and returnNonCachedInstance.\n     *\n     * @param dbName The name of the database we want to use.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#db\n     */\n    db(dbName: string, options: DbOptions): Db;\n\n    /**\n     * Drop a collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @param name Name of collection to drop.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#dropCollection\n     */\n    dropCollection(name: string): Promise<boolean>;\n\n    /**\n     * Drop a collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @param name Name of collection to drop.\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#dropCollection\n     */\n    dropCollection(name: string, callback: MongoCallback<boolean>): void;\n\n    /**\n     * Drop a database, removing it permanently from the server.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#dropDatabase\n     */\n    dropDatabase(): Promise<any>;\n\n    /**\n     * Drop a database, removing it permanently from the server.\n     *\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#dropDatabase\n     */\n    dropDatabase(callback: MongoCallback<any>): void;\n\n    // deprecated http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#ensureIndex\n    // ensureIndex(collectionName: any, fieldOrSpec: any, options: IndexOptions, callback: Function): void;\n    // deprecated http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#eval\n    // eval(code: any, parameters: any[], options?: any, callback?: MongoCallback<any>): void;\n\n    /**\n     * Runs a command on the database as admin.\n     *\n     * @param command The command hash.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#executeDbAdminCommand\n     */\n    executeDbAdminCommand(command: Object, callback: MongoCallback<any>): void;\n\n    /**\n     * Runs a command on the database as admin.\n     *\n     * @param command The command hash.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#executeDbAdminCommand\n     */\n    executeDbAdminCommand(command: Object, options?: ExecuteDbAdminCommandOptions): Promise<any>;\n\n    /**\n     * Runs a command on the database as admin.\n     *\n     * @param command The command hash.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#executeDbAdminCommand\n     */\n    executeDbAdminCommand(command: Object, options: ExecuteDbAdminCommandOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param name The name of the collection.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#indexInformation\n     */\n    indexInformation(name: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param name The name of the collection.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#indexInformation\n     */\n    indexInformation(name: string, options?: IndexInformationOptions): Promise<any>;\n\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param name The name of the collection.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#indexInformation\n     */\n    indexInformation(name: string, options: IndexInformationOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Get the list of all collection information for the specified db.\n     *\n     * @param filter Query to filter collections by.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#listCollections\n     */\n    listCollections(filter: Object, options?: ListCollectionsOptions): CommandCursor;\n\n    /**\n     * Logout user from server, fire off on all connections and remove all auth info.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#logout\n     */\n    logout(callback: MongoCallback<any>): void;\n\n    /**\n     * Logout user from server, fire off on all connections and remove all auth info.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#logout\n     */\n    logout(options?: { dbName?: string }): Promise<any>;\n\n    /**\n     * Logout user from server, fire off on all connections and remove all auth info.\n     *\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#logout\n     */\n    logout(options: { dbName?: string }, callback: MongoCallback<any>): void;\n\n    /**\n     * Open the database.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#open\n     */\n    open(): Promise<Db>;\n\n    /**\n     * Open the database\n     *\n     * @param callback Callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#open\n     */\n    open(callback: MongoCallback<Db>): void;\n\n\n    /**\n     *\n     * @param username\n     * @param callback\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#removeUser\n     */\n    removeUser(username: string, callback: MongoCallback<any>): void;\n    removeUser(username: string, options?: { w?: number | string, wtimeout?: number, j?: boolean }): Promise<any>;\n    removeUser(username: string, options: { w?: number | string, wtimeout?: number, j?: boolean }, callback: MongoCallback<any>): void;\n\n    /**\n     * Rename a collection.\n     *\n     * @param fromCollection Name of current collection to rename.\n     * @param toCollection New name of of the collection.\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#renameCollection\n     */\n    renameCollection(fromCollection: string, toCollection: string, callback: MongoCallback<Collection>): void;\n\n    /**\n     * Rename a collection.\n     *\n     * @param fromCollection Name of current collection to rename.\n     * @param toCollection New name of of the collection.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#renameCollection\n     */\n    renameCollection(fromCollection: string, toCollection: string, options?: { dropTarget?: boolean }): Promise<Collection>;\n\n    /**\n     * Rename a collection.\n     *\n     * @param fromCollection Name of current collection to rename.\n     * @param toCollection New name of of the collection.\n     * @param options Optional settings.\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#renameCollection\n     */\n    renameCollection(fromCollection: string, toCollection: string, options: { dropTarget?: boolean }, callback: MongoCallback<Collection>): void;\n\n    /**\n     * Get all the db statistics.\n     *\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#stats\n     */\n    stats(callback: MongoCallback<any>): void;\n\n    /**\n     * Get all the db statistics.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#stats\n     */\n    stats(options?: { scale?: number }): Promise<any>;\n\n    /**\n     * Get all the db statistics.\n     *\n     * @param options Optional settings.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#stats\n     */\n    stats(options: { scale?: number }, callback: MongoCallback<any>): void;\n}\n\n/**\n * Server.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Server.html\n */\nexport declare class Server extends EventEmitter {\n\n    /**\n     *\n     * @param host The host for the server, can be either an IP4, IP6 or domain socket style host.\n     * @param port The server port if IP4.\n     * @param options Optional.\n     */\n    constructor(host: string, port: number, options?: ServerOptions);\n\n    /**\n     * All raw connections.\n     */\n    connections(): Array<any>;\n}\n\n/**\n * ReplSet.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/ReplSet.html\n */\nexport declare class ReplSet extends EventEmitter {\n\n    /**\n     *\n     * @param servers A seedlist of servers participating in the replicaset.\n     * @param options Optional.\n     */\n    constructor(servers: Array<Server>, options?: ReplSetOptions);\n\n    /**\n     * All raw connections\n     */\n    connections(): Array<any>;\n}\n\n/**\n * Mongos.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Mongos.html\n */\nexport declare class Mongos extends EventEmitter {\n\n    /**\n     *\n     * @param servers A seedlist of servers participating in the replicaset.\n     * @param options Optional.\n     */\n    constructor(servers: Array<Server>, options?: MongosOptions);\n\n    /**\n     * All raw connections\n     */\n    connections(): Array<any>;\n}\n\n/**\n * Creates a new Db instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#addUser\n */\nexport interface DbAddUserOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: string | number;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Custom data associated with the user (only Mongodb 2.6 or higher).\n     */\n    customData?: Object;\n\n    /**\n     * Roles associated with the created user (only Mongodb 2.6 or higher).\n     */\n    roles?: Object[];\n}\n\n/**\n * Creates a new Db instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createCollection\n */\nexport interface CollectionCreateOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Return document results as raw BSON buffers.\n     */\n    raw?: boolean;\n\n    /**\n     * A primary key factory object for generation of custom _id keys.\n     */\n    pkFactory?: Object;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Serialize functions on any object.\n     */\n    serializeFunctions?: boolean;\n\n    /**\n     * Returns an error if the collection does not exist.\n     */\n    strict?: boolean;\n\n    /**\n     * Create a capped collection.\n     */\n    capped?: boolean;\n\n    /**\n     * The size of the capped collection in bytes.\n     */\n    size?: number;\n\n    /**\n     * The maximum number of documents in the capped collection.\n     */\n    max?: number;\n\n    /**\n     * Create an index on the _id field of the document, True by default on MongoDB 2.2 or higher off for version < 2.2.\n     */\n    autoIndexId?: boolean;\n}\n\n/**\n * Creates a new Db instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#collection\n */\nexport interface DbCollectionOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Return document results as raw BSON buffers.\n     */\n    raw?: boolean;\n\n    /**\n     * A primary key factory object for generation of custom _id keys.\n     */\n    pkFactory?: Object;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Serialize functions on any object.\n     */\n    serializeFunctions?: boolean;\n\n    /**\n     * Returns an error if the collection does not exist.\n     */\n    strict?: boolean;\n\n    /**\n     * Specify a read concern for the collection. (only MongoDB 3.2 or higher supported).\n     */\n    readConcern?: { level: Object };\n}\n\n/**\n * Creates an index on the db and collection collection.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Db.html#createIndex\n */\nexport interface MongodbIndexOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Creates an unique index.\n     */\n    unique?: boolean;\n\n    /**\n     * Creates a sparse index.\n     */\n    sparse?: boolean;\n\n    /**\n     * Creates the index in the background, yielding whenever possible.\n     */\n    background?: boolean;\n\n    /**\n     * A unique index cannot be created on a key that has pre-existing duplicate values.\n     * If you would like to create the index anyway, keeping the first document\n     * the database indexes and deleting all subsequent documents that have duplicate value.\n     */\n    dropDups?: boolean;\n\n    /**\n     * For geospatial indexes set the lower bound for the co-ordinates.\n     */\n    min?: number;\n\n    /**\n     * For geospatial indexes set the high bound for the co-ordinates.\n     */\n    max?: number;\n\n    /**\n     * Specify the format version of the indexes.\n     */\n    v?: number;\n\n    /**\n     * Allows you to expire data on indexes applied to a data (MongoDB 2.2 or higher).\n     */\n    expireAfterSeconds?: number;\n\n    /**\n     * Override the autogenerated index name (useful if the resulting name is larger than 128 bytes).\n     */\n    name?: string;\n\n}\n\n/**\n * Admin.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html\n */\nexport interface Admin {\n\n    /**\n     * Add a user to the database.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#addUser\n     */\n    addUser(username: string, password: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Add a user to the database.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#addUser\n     */\n    addUser(username: string, password: string, options?: AddUserOptions): Promise<any>;\n\n    /**\n     * Add a user to the database.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#addUser\n     */\n    addUser(username: string, password: string, options: AddUserOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Authenticate a user against the server.\n     *\n     * @param username The username.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#authenticate\n     */\n    authenticate(username: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Authenticate a user against the server.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#authenticate\n     */\n    authenticate(username: string, password?: string): Promise<any>;\n\n    /**\n     * Authenticate a user against the server.\n     *\n     * @param username The username.\n     * @param password The password.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#authenticate\n     */\n    authenticate(username: string, password: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieve the server information for the current instance of the db client\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#buildInfo\n     */\n    buildInfo(): Promise<any>;\n\n    /**\n     * Retrieve the server information for the current instance of the db client\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#buildInfo\n     */\n    buildInfo(callback: MongoCallback<any>): void;\n\n    /**\n     * Execute a command.\n     *\n     * @param command The command hash.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#command\n     */\n    command(command: Object, callback: MongoCallback<any>): void;\n\n    /**\n     * Execute a command.\n     *\n     * @param command The command hash.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#command\n     */\n    command(command: Object, options?: CommandOptions): Promise<any>;\n\n    /**\n     * Execute a command.\n     *\n     * @param command The command hash.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#command\n     */\n    command(command: Object, options: CommandOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * List the available databases.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#listDatabases\n     */\n    listDatabases(): Promise<any>;\n\n    /**\n     * List the available databases.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#listDatabases\n     */\n    listDatabases(callback: MongoCallback<any>): void;\n\n    /**\n     * Logout user from server, fire off on all connections and remove all auth info.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#logout.\n     */\n    logout(): Promise<any>;\n\n    /**\n     * Logout user from server, fire off on all connections and remove all auth info.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#logout.\n     */\n    logout(callback: MongoCallback<any>): void;\n\n    /**\n     * Ping the MongoDB server and retrieve results.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#ping\n     */\n    ping(): Promise<any>;\n\n    /**\n     * Ping the MongoDB server and retrieve results.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#ping\n     */\n    ping(callback: MongoCallback<any>): void;\n\n    /**\n     * Retrive the current profiling information for MongoDB.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#profilingInfo\n     */\n    profilingInfo(): Promise<any>;\n\n    /**\n     * Retrive the current profiling information for MongoDB.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#profilingInfo\n     */\n    profilingInfo(callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieve the current profiling Level for MongoDB.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#profilingLevel\n     */\n    profilingLevel(): Promise<any>;\n\n    /**\n     * Retrieve the current profiling Level for MongoDB.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#profilingLevel\n     */\n    profilingLevel(callback: MongoCallback<any>): void;\n\n    /**\n     * Remove a user from a database.\n     *\n     * @param username The username.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#removeUser\n     */\n    removeUser(username: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Remove a user from a database.\n     *\n     * @param username The username.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#removeUser\n     */\n    removeUser(username: string, options?: FSyncOptions): Promise<any>;\n\n    /**\n     * Remove a user from a database.\n     *\n     * @param username The username.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#removeUser\n     */\n    removeUser(username: string, options: FSyncOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Get ReplicaSet status.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#replSetGetStatus\n     */\n    replSetGetStatus(): Promise<any>;\n\n    /**\n     * Get ReplicaSet status.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#replSetGetStatus\n     */\n    replSetGetStatus(callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieve the server information for the current\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#serverInfo\n     */\n    serverInfo(): Promise<any>;\n\n    /**\n     * instance of the db client\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#serverInfo\n     * @param callback The command result callback.\n     */\n    serverInfo(callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieve this db's server status.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#serverStatus\n     */\n    serverStatus(): Promise<any>;\n\n    /**\n     * Retrieve this db's server status.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#serverStatus\n     */\n    serverStatus(callback: MongoCallback<any>): void;\n\n    /**\n     * Set the current profiling level of MongoDB.\n     *\n     * @param level The new profiling level (off, slow_only, all).\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#setProfilingLevel\n     */\n    setProfilingLevel(level: string): Promise<any>;\n\n    /**\n     * Set the current profiling level of MongoDB.\n     *\n     * @param level The new profiling level (off, slow_only, all).\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#setProfilingLevel\n     */\n    setProfilingLevel(level: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Validate an existing collection\n     *\n     * @param collectionNme The name of the collection to validate.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#validateCollection\n     */\n    validateCollection(collectionNme: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Validate an existing collection\n     *\n     * @param collectionNme The name of the collection to validate.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#validateCollection\n     */\n    validateCollection(collectionNme: string, options?: Object): Promise<any>;\n\n    /**\n     * Validate an existing collection\n     *\n     * @param collectionNme The name of the collection to validate.\n     * @param options Optional settings.\n     * @param callback The command result callback\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#validateCollection\n     */\n    validateCollection(collectionNme: string, options: Object, callback: MongoCallback<any>): void;\n}\n\n/**\n * Add a user to the database.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#addUser\n */\nexport interface AddUserOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Specify a file sync write concern.\n     */\n    fsync: boolean;\n\n    /**\n     * Custom data associated with the user (only Mongodb 2.6 or higher).\n     */\n    customData?: Object;\n\n    /**\n     * Roles associated with the created user (only Mongodb 2.6 or higher).\n     */\n    roles?: Object[];\n}\nexport interface ListIndexesOptions {\n\n    /**\n     * The batchSize for the returned command cursor or if pre 2.8 the systems batch collection.\n     */\n    batchSize?: number;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n}\n\nexport interface GroupOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n}\n\n/**\n * Remove a user from a database.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Admin.html#removeUser\n */\nexport interface FSyncOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Specify a file sync write concern.\n     */\n    fsync?: boolean;\n}\n\nexport interface FindOneAndDeleteOptions {\n\n    /**\n     * Limits the fields to return for all matching documents.\n     */\n    projection?: Object;\n\n    /**\n     * Determines which document the operation modifies if the query selects multiple documents.\n     */\n    sort?: Object;\n\n    /**\n     * The maximum amount of time to allow the query to run.\n     */\n    maxTimeMS?: number;\n}\n\n/**\n * Create a new ObjectID instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/ObjectID.html\n */\nexport declare class ObjectID {\n    constructor(s?: string | number);\n\n    /**\n     * The generation time of this ObjectId instance.\n     */\n    generationTime: number;\n\n    /**\n     * Creates an ObjectID from a hex string representation of an ObjectID.\n     */\n    static createFromHexString(hexString: string): ObjectID;\n\n    /**\n     * Creates an ObjectID from a second based number, with the rest of the ObjectID zeroed out. Used for comparisons or sorting the ObjectID.\n     */\n    static createFromTime(time: number): ObjectID;\n\n    /**\n     * Checks if a value is a valid bson ObjectId.\n     */\n    static isValid(id: any): boolean;\n\n    /**\n     * Compares the equality of this ObjectID with otherID.\n     */\n    equals(otherID: ObjectID): boolean;\n\n    /**\n     * Generate a 12 byte id buffer used in ObjectID's.\n     */\n    generate(time?: number): string;\n\n    /**\n     * Returns the generation date (accurate up to the second) that this ID was generated.\n     *\n     */\n    getTimestamp(): Date;\n\n    /**\n     * Return the ObjectID id as a 24 byte hex string representation.\n     */\n    toHexString(): string;\n\n    /**\n     * Get the timestamp and validate correctness.\n     */\n    toString(): string;\n}\n\n/**\n * A class representation of the BSON Binary type.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Binary.html\n */\nexport declare class Binary {\n\n    /**\n     * @param buffer A buffer object containing the binary data.\n     * @param subType The option binary type.\n     */\n    constructor(buffer: Buffer, subType?: number);\n\n    /**\n     * Byte Array BSON type.\n     */\n    static SUBTYPE_BYTE_ARRAY: number;\n\n    /**\n     * Default BSON type.\n     */\n    static SUBTYPE_DEFAULT: number;\n\n    /**\n     * Function BSON type.\n     */\n    static SUBTYPE_FUNCTION: number;\n\n    /**\n     * MD5 BSON type.\n     */\n    static SUBTYPE_MD5: number;\n\n    /**\n     * User BSON type.\n     */\n    static SUBTYPE_USER_DEFINED: number;\n\n    /**\n     * UUID BSON type.\n     */\n    static SUBTYPE_UUID: number;\n\n    /**\n     * OLD UUID BSON type\n     */\n    static SUBTYPE_UUID_OLD: number;\n\n    /**\n     * The length of the binary.\n     */\n    length(): number;\n\n    /**\n     * Updates this binary with byte_value.\n     *\n     * @param byte_value A single byte we wish to write.\n     */\n    put(byte_value: number | string): void;\n\n    /**\n     * Reads length bytes starting at position.\n     *\n     * @param position Read from the given position in the Binary.\n     * @param length The number of bytes to read.\n     */\n    read(position: number, length: number): Buffer;\n\n    /**\n     * Returns the value of this binary as a string.\n     */\n    value(): string;\n\n    /**\n     * Writes a buffer or string to the binary\n     *\n     * @param buffer A string or buffer to be written to the Binary BSON object.\n     * @param offset Specify the binary of where to write the content.\n     */\n    write(buffer: Buffer | string, offset: number): void;\n}\n/**\n * A class representation of the BSON Double type.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Double.html\n */\nexport declare class Double {\n\n    /**\n     * @param value The number we want to represent as a double.\n     */\n    constructor(value: number);\n\n    /**\n     * Access the number value.\n     */\n    valueOf(): number;\n}\n\n/**\n * Long\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Long.html\n */\nexport declare class Long {\n\n    /**\n     * @param low The low (signed) 32 bits of the Long.\n     * @param high The high (signed) 32 bits of the Long.\n     */\n    constructor(low: number, high: number);\n\n    static MAX_VALUE: Long;\n    static MIN_VALUE: Long;\n    static NEG_ONE: Long;\n    static ONE: Long;\n    static ZERO: Long;\n\n    /**\n     * Returns a Long representing the 64-bit integer that comes by concatenating the given high and low bits.\n     * Each is assumed to use 32 bits.\n     *\n     * @param lowBits The low 32-bits.\n     * @param highBits The high 32-bits.\n     */\n    static fromBits(lowBits: number, highBits: number): Long;\n\n    /**\n     * Returns a Long representing the given (32-bit) integer value.\n     *\n     * @param value The 32-bit integer in question.\n     */\n    static fromInt(value: number): Long;\n\n    /**\n     * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n     *\n     * @param value The number in question.\n     */\n    static fromNumber(value: number): Long;\n\n    /**\n     * Returns a Long representation of the given string, written using the given radix.\n     *\n     * @param str The textual representation of the Long.\n     * @param radix The radix in which the text is written.\n     */\n    static fromString(str: string, radix?: number): Long;\n\n    /**\n     * Returns the sum of this and the given Long.\n     *\n     * @param other Long to add to this one.\n     */\n    add(other: Long): Long;\n\n    /**\n     * Returns the bitwise-AND of this Long and the given one.\n     *\n     * @param other The Long with which to AND.\n     */\n    and(other: Long): Long;\n\n    /**\n     * Compares this Long with the given one.\n     *\n     * @param other Long to compare against.\n     */\n    compare(other: Long): number;\n\n    /**\n     * Returns this Long divided by the given one.\n     *\n     * @param other Long by which to divide.\n     */\n    div(other: Long): Long;\n\n    /**\n     * Return whether this Long equals the other.\n     *\n     * @param other Long to compare against.\n     */\n    equals(other: Long): boolean;\n\n    /**\n     * Return the high 32-bits value.\n     */\n    getHighBits(): number;\n\n    /**\n     * Return the low 32-bits value.\n     */\n    getLowBits(): number;\n\n    /**\n     * Return the low unsigned 32-bits value.\n     */\n    getLowBitsUnsigned(): number;\n\n    /**\n     * Returns the number of bits needed to represent the absolute value of this Long.\n     */\n    getNumBitsAbs(): number;\n\n    /**\n     * Return whether this Long is greater than the other.\n     *\n     * @param other Long to compare against.\n     */\n    greaterThan(other: Long): number;\n\n    /**\n     * Return whether this Long is greater than or equal to the other.\n     *\n     * @param other Long to compare against.\n     */\n    greaterThanOrEqual(other: Long): number;\n\n    /**\n     * Return whether this value is negative.\n     */\n    isNegative(): boolean;\n\n    /**\n     * Return whether this value is odd.\n     */\n    isOdd(): boolean;\n\n    /**\n     * Return whether this value is zero.\n     */\n    isZero(): boolean;\n\n    /**\n     * Return whether this Long is less than the other.\n     *\n     * @param other Long to compare against.\n     */\n    lessThan(other: Long): boolean;\n\n    /**\n     * Return whether this Long is less than or equal to the other.\n     *\n     * @param other Long to compare against.\n     */\n    lessThanOrEqual(other: Long): boolean;\n\n    /**\n     * Returns this Long modulo the given one.\n     *\n     * @param other Long by which to mod.\n     */\n    modulo(other: Long): Long;\n\n    /**\n     * Returns the product of this and the given Long.\n     *\n     * @param other Long to multiply with this.\n     */\n    multiply(other: Long): Long;\n\n    /**\n     * The negation of this value.\n     */\n    negate(): Long;\n\n    /**\n     * The bitwise-NOT of this value.\n     */\n    not(): Long;\n\n    /**\n     * Return whether this Long does not equal the other.\n     *\n     * @param other Long to compare against.\n     */\n    notEquals(other: Long): boolean;\n\n    /**\n     * Returns the bitwise-OR of this Long and the given one.\n     *\n     * @param other The Long with which to OR.\n     */\n    or(other: Long): Long;\n\n    /**\n     * Returns this Long with bits shifted to the left by the given amount.\n     *\n     * @param other The number of bits by which to shift.\n     */\n    shiftLeft(other: number): Long;\n\n    /**\n     * Returns this Long with bits shifted to the right by the given amount.\n     *\n     * @param other The number of bits by which to shift.\n     */\n    shiftRight(other: number): Long;\n\n    /**\n     * Returns this Long with bits shifted to the right by the given amount, with the new top bits matching the current sign bit.\n     *\n     * @param other The number of bits by which to shift.\n     */\n    shiftRightUnsigned(other: number): Long;\n\n    /**\n     * Returns the difference of this and the given Long.\n     *\n     * @param other Long to subtract from this.\n     */\n    subtract(other: Long): Long;\n\n    /**\n     * Return the int value.\n     */\n    toInt(): number;\n\n    /**\n     * Return the JSON value.\n     */\n    toJSON(): string;\n\n    /**\n     * Return the Number value.\n     */\n    toNumber(): number;\n\n    /**\n     * Return the String value.\n     *\n     * @param opt_radix The radix in which the text should be written.\n     */\n    toString(opt_radix?: number): string;\n\n    /**\n     * Returns the bitwise-XOR of this Long and the given one.\n     *\n     * @param other The Long with which to XOR.\n     */\n    xor(other: Long): Long;\n}\n\n/**\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/MaxKey.html\n */\nexport declare class MaxKey { }\n\n/**\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/MinKey.html\n */\nexport declare class MinKey { }\n\n/**\n * Timestamp.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Timestamp.html\n */\nexport declare class Timestamp {\n\n    /**\n     * @param low The low (signed) 32 bits of the Timestamp.\n     * @param high The high (signed) 32 bits of the Timestamp.\n     */\n    constructor(low: number, high: number);\n\n    static MAX_VALUE: Timestamp;\n    static MIN_VALUE: Timestamp;\n    static NEG_ONE: Timestamp;\n    static ONE: Timestamp;\n    static ZERO: Timestamp;\n\n    /**\n     * Returns a Timestamp representing the 64-bit integer that comes by concatenating the\n     * given high and low bits. Each is assumed to use 32 bits..\n     *\n     * @param lowBits The low 32-bits.\n     * @param highBits The high 32-bits.\n     */\n    static fromBits(lowBits: number, highBits: number): Timestamp;\n\n    /**\n     * Returns a Timestamp representing the given (32-bit) integer value.\n     *\n     * @param value The 32-bit integer in question.\n     */\n    static fromInt(value: number): Timestamp;\n\n    /**\n     * Returns a Timestamp representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n     *\n     * @param value The number in question.\n     */\n    static fromNumber(value: number): Timestamp;\n\n    /**\n     * Returns a Timestamp representation of the given string, written using the given radix.\n     *\n     * @param str The textual representation of the Timestamp.\n     * @param radix The radix in which the text is written.\n     */\n    static fromString(str: string, radix?: number): Timestamp;\n\n    /**\n     * Returns the sum of this and the given Timestamp.\n     *\n     * @param other Timestamp to add to this one.\n     */\n    add(other: Timestamp): Timestamp;\n\n    /**\n     * Returns the bitwise-AND of this Timestamp and the given one.\n     *\n     * @param other Timestamp to add to this one.\n     */\n    and(other: Timestamp): Timestamp;\n\n    /**\n     * Compares this Timestamp with the given one.\n     *\n     * @param other Timestamp to compare against.\n     */\n    compare(other: Timestamp): number;\n\n    /**\n     * Returns this Timestamp divided by the given one.\n     *\n     * @param other Timestamp by which to divide.\n     */\n    div(other: Timestamp): Timestamp;\n\n    /**\n     * Return whether this Timestamp equals the other\n     *\n     * @param other\n     */\n    equals(other: Timestamp): boolean;\n\n    /**\n     * Return the high 32-bits value.\n     */\n    getHighBits(): number;\n\n    /**\n     * Return the low 32-bits value.\n     */\n    getLowBits(): number;\n\n    /**\n     * Return the low unsigned 32-bits value.\n     */\n    getLowBitsUnsigned(): number;\n\n    /**\n     * Returns the number of bits needed to represent the absolute value of this Timestamp.\n     */\n    getNumBitsAbs(): number;\n\n    /**\n     * Return whether this Timestamp is greater than the other.\n     *\n     * @param other Timestamp to compare against.\n     */\n    greaterThan(other: Timestamp): number;\n\n    /**\n     * Return whether this Timestamp is greater than or equal to the other.\n     *\n     * @param other Timestamp to compare against.\n     */\n    greaterThanOrEqual(other: Timestamp): number;\n\n    /**\n     * Return whether this value is negative.\n     */\n    isNegative(): boolean;\n\n    /**\n     * IsOdd.\n     * Return whether this value is odd.\n     */\n    isOdd(): boolean;\n\n    /**\n     * Return whether this value is zero.\n     */\n    isZero(): boolean;\n\n    /**\n     * Return whether this Timestamp is less than the other.\n     *\n     * @param other Timestamp to compare against.\n     */\n    lessThan(other: Timestamp): boolean;\n\n    /**\n     * Return whether this Timestamp is less than or equal to the other.\n     *\n     * @param other Timestamp to compare against.\n     */\n    lessThanOrEqual(other: Timestamp): boolean;\n\n    /**\n     * Returns this Timestamp modulo the given one.\n     *\n     * @param other Timestamp by which to mod.\n     */\n    modulo(other: Timestamp): Timestamp;\n\n    /**\n     * Returns the product of this and the given Timestamp.\n     *\n     * @param other Timestamp to multiply with this.\n     */\n    multiply(other: Timestamp): Timestamp;\n\n    /**\n     * The negation of this value.\n     */\n    negate(): Timestamp;\n\n    /**\n     * The bitwise-NOT of this value.\n     */\n    not(): Timestamp;\n\n    /**\n     * Return whether this Timestamp does not equal the other.\n     *\n     * @param other Timestamp to compare against.\n     */\n    notEquals(other: Timestamp): boolean;\n\n    /**\n     * Returns the bitwise-OR of this Timestamp and the given one.\n     *\n     * @param other The Timestamp with which to OR.\n     */\n    or(other: Timestamp): Timestamp;\n\n    /**\n     * Returns this Timestamp with bits shifted to the left by the given amount.\n     *\n     * @param other The number of bits by which to shift.\n     */\n    shiftLeft(other: number): Timestamp;\n\n    /**\n     * Returns this Timestamp with bits shifted to the right by the given amount.\n     *\n     * @param other The number of bits by which to shift.\n     */\n    shiftRight(other: number): Timestamp;\n\n    /**\n     * Returns this Timestamp with bits shifted to the right by the given amount, with the new top bits matching the current sign bit.\n     *\n     * @param other\n     */\n    shiftRightUnsigned(other: number): Timestamp;\n\n    /**\n     * Returns the difference of this and the given Timestamp.\n     *\n     * @param other Timestamp to subtract from this.\n     */\n    subtract(other: Timestamp): Timestamp;\n\n    /**\n     * Return the int value.\n     */\n    toInt(): number;\n\n    /**\n     * Return the JSON value.\n     */\n    toJSON(): string;\n\n    /**\n     * Return the Number value.\n     */\n    toNumber(): number;\n\n    /**\n     * Return the String value.\n     *\n     * @param radix The radix in which the text should be written.\n     */\n    toString(radix?: number): string;\n\n    /**\n     * Returns the bitwise-XOR of this Timestamp and the given one.\n     *\n     * @param other The Timestamp with which to XOR.\n     */\n    xor(other: Timestamp): Timestamp;\n}\n\nexport interface CollectionDeleteOneOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimmeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n     */\n    bypassDocumentValidation?: boolean;\n}\n\nexport interface CollectionDistinctOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n}\n\n/**\n * Create a new ObjectID instance.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html\n */\nexport interface Collection {\n\n    /**\n     * Get the collection name.\n     */\n    collectionName: string;\n\n    /**\n     * Get the full collection namespace.\n     */\n    namespace: string;\n\n    /**\n     * The current write concern values.\n     */\n    writeConcern: any;\n\n    /**\n     * The current read concern values.\n     */\n    readConcern: any;\n\n    /**\n     * Get current index hint for collection.\n     */\n    hint: any;\n\n    /**\n     * Execute an aggregation framework pipeline against the collection, needs MongoDB >= 2.2\n     *\n     * @param pipeline Array containing all the aggregation framework commands for the execution.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#aggregate\n     */\n    aggregate(pipeline: Object[], callback: MongoCallback<any>): AggregationCursor<any>;\n\n    /**\n     * Execute an aggregation framework pipeline against the collection, needs MongoDB >= 2.2\n     *\n     * @param pipeline Array containing all the aggregation framework commands for the execution.\n     * @param options Optional.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#aggregate\n     */\n    aggregate(pipeline: Object[], options?: CollectionAggregationOptions, callback?: MongoCallback<any>): AggregationCursor<any>;\n\n    /**\n     * Execute an aggregation framework pipeline against the collection, needs MongoDB >= 2.2\n     *\n     * @param pipeline Array containing all the aggregation framework commands for the execution.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#aggregate\n     */\n    aggregate<T>(pipeline: Object[], callback: MongoCallback<any>): AggregationCursor<T>;\n\n    /**\n     * Execute an aggregation framework pipeline against the collection, needs MongoDB >= 2.2\n     *\n     * @param pipeline Array containing all the aggregation framework commands for the execution.\n     * @param options Optional.\n     * @param callback Optional\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#aggregate\n     */\n    aggregate<T>(pipeline: Object[], options?: CollectionAggregationOptions, callback?: MongoCallback<any>): AggregationCursor<T>;\n\n    /**\n     * BulkWrite.\n     *\n     * @param operations Bulk operations to perform.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#bulkWrite\n     */\n    bulkWrite(operations: Object[], callback: MongoCallback<BulkWriteOpResultObject>): void;\n\n    /**\n     * BulkWrite.\n     *\n     * @param operations Bulk operations to perform.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#bulkWrite\n     */\n    bulkWrite(operations: Object[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject>;\n\n    /**\n     * BulkWrite.\n     *\n     * @param operations Bulk operations to perform.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#bulkWrite\n     */\n    bulkWrite(operations: Object[], options: CollectionBluckWriteOptions, callback: MongoCallback<BulkWriteOpResultObject>): void;\n\n    /**\n     * Count number of matching documents in the db to a query.\n     *\n     * @param query The query for the count.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#count\n     */\n    count(query: Object, callback: MongoCallback<number>): void;\n\n    /**\n     * Count number of matching documents in the db to a query.\n     *\n     * @param query The query for the count.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#count\n     */\n    count(query: Object, options?: MongoCountPreferences): Promise<number>;\n\n    /**\n     * Count number of matching documents in the db to a query.\n     *\n     * @param query The query for the count=\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#count\n     */\n    count(query: Object, options: MongoCountPreferences, callback: MongoCallback<number>): void;\n\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param fieldOrSpec Defines the index.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#createIndex\n     */\n    createIndex(fieldOrSpec: string | any, callback: MongoCallback<string>): void;\n\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param fieldOrSpec Defines the index.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#createIndex\n     */\n    createIndex(fieldOrSpec: string | any, options?: MongodbIndexOptions): Promise<string>;\n\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param fieldOrSpec Defines the index.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#createIndex\n     */\n    createIndex(fieldOrSpec: string | any, options: MongodbIndexOptions, callback: MongoCallback<string>): void;\n\n    /**\n     * CreateIndexes.\n     *\n     * @param indexSpecs An array of index specifications to be created.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#createIndexes and http://docs.mongodb.org/manual/reference/command/createIndexes/\n     */\n    createIndexes(indexSpecs: Object[]): Promise<any>;\n\n    /**\n     * CreateIndexes.\n     *\n     * @param indexSpecs An array of index specifications to be created.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#createIndexes and http://docs.mongodb.org/manual/reference/command/createIndexes/\n     */\n    createIndexes(indexSpecs: Object[], callback: MongoCallback<any>): void;\n\n    /**\n     * Delete multiple documents on MongoDB.\n     *\n     * @param filter The Filter used to select the documents to remove.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#deleteMany\n     */\n    deleteMany(filter: Object, callback: MongoCallback<DeleteWriteOpResultObject>): void;\n\n    /**\n     * Delete multiple documents on MongoDB.\n     *\n     * @param filter The Filter used to select the documents to remove.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#deleteMany\n     */\n    deleteMany(filter: Object, options?: CollectionOptions): Promise<DeleteWriteOpResultObject>;\n\n    /**\n     * Delete multiple documents on MongoDB.\n     *\n     * @param filter The Filter used to select the documents to remove.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#deleteMany\n     */\n    deleteMany(filter: Object, options: CollectionOptions, callback: MongoCallback<DeleteWriteOpResultObject>): void;\n\n    /**\n     * Delete a document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to remove.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#deleteOne\n     */\n    deleteOne(filter: Object, callback: MongoCallback<DeleteWriteOpResultObject>): void;\n\n    /**\n     * Delete a document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to remove.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#deleteOne\n     */\n    deleteOne(filter: Object, options?: CollectionDeleteOneOptions): Promise<DeleteWriteOpResultObject>;\n\n    /**\n     * Delete a document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to remove.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#deleteOne\n     */\n    deleteOne(filter: Object, options: CollectionDeleteOneOptions, callback: MongoCallback<DeleteWriteOpResultObject>): void;\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     *\n     * @param key Field of the document to find distinct values for.\n     * @param query The query for filtering the set of documents to which we apply the distinct filter.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#distinct\n     */\n    distinct(key: string, query: Object, callback: MongoCallback<any>): void;\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     *\n     * @param key Field of the document to find distinct values for.\n     * @param query The query for filtering the set of documents to which we apply the distinct filter.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#distinct\n     */\n    distinct(key: string, query: Object, options?: CollectionDistinctOptions): Promise<any>;\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     *\n     * @param key Field of the document to find distinct values for.\n     * @param query The query for filtering the set of documents to which we apply the distinct filter.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#distinct\n     */\n    distinct(key: string, query: Object, options: CollectionDistinctOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Drop the collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#drop\n     */\n    drop(): Promise<any>;\n\n    /**\n     * Drop the collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#drop\n     */\n    drop(callback: MongoCallback<any>): void;\n\n    /**\n     * Drops an index from this collection.\n     *\n     * @param indexName Name of the index to drop.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#dropIndex\n     */\n    dropIndex(indexName: string, callback: MongoCallback<any>): void;\n\n    /**\n     * Drops an index from this collection.\n     *\n     * @param indexName Name of the index to drop.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#dropIndex\n     */\n    dropIndex(indexName: string, options?: CollectionOptions): Promise<any>;\n\n    /**\n     * Drops an index from this collection.\n     *\n     * @param indexName Name of the index to drop.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#dropIndex\n     */\n    dropIndex(indexName: string, options: CollectionOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Drops all indexes from this collection.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#dropIndexes\n     */\n    dropIndexes(): Promise<any>;\n\n    /**\n     * Drops all indexes from this collection.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#dropIndexes\n     */\n    dropIndexes(callback?: MongoCallback<any>): void;\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     *\n     * @param query The cursor query object.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#find\n     */\n    find(query?: Object): Cursor<any>;\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     *\n     * @param query The cursor query object.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#find\n     */\n    find<T>(query?: Object): Cursor<T>;\n\n    /** @deprecated */\n    find(query: Object, fields?: Object, skip?: number, limit?: number, timeout?: number): Cursor<any>;\n\n    /**\n     * Fetches the first document that matches the query.\n     *\n     * @param query Query for find Operation.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOne\n     * @deprecated use find().limit(1).next(function(err, doc){}).\n     */\n    findOne(query: Object, callback: MongoCallback<any>): void;\n\n    /**\n     * Fetches the first document that matches the query.\n     *\n     * @param query Query for find Operation.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOne\n     * @deprecated use find().limit(1).next(function(err, doc){}).\n     */\n    findOne(query: Object, options?: MongodbFindOneOptions): Promise<any>;\n\n    /**\n     * Fetches the first document that matches the query.\n     *\n     * @param query Query for find Operation.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOne\n     * @deprecated use find().limit(1).next(function(err, doc){}).\n     */\n    findOne(query: Object, options: MongodbFindOneOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndDelete\n     */\n    findOneAndDelete(filter: Object, callback: MongoCallback<FindAndModifyWriteOpResultObject>): void;\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndDelete\n     */\n    findOneAndDelete(filter: Object, options?: FindOneAndDeleteOptions): Promise<FindAndModifyWriteOpResultObject>;\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param options Optional settings.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndDelete\n     */\n    findOneAndDelete(filter: Object, options: FindOneAndDeleteOptions, callback: MongoCallback<FindAndModifyWriteOpResultObject>): void;\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param replacement Document replacing the matching document.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndReplace\n     */\n    findOneAndReplace(filter: Object, replacement: Object, callback: MongoCallback<FindAndModifyWriteOpResultObject>): void;\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param replacement Document replacing the matching document.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndReplace\n     */\n    findOneAndReplace(filter: Object, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject>;\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param replacement Document replacing the matching document.\n     * @param options Optional settings.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndReplace\n     */\n    findOneAndReplace(filter: Object, replacement: Object, options: FindOneAndReplaceOption, callback: MongoCallback<FindAndModifyWriteOpResultObject>): void;\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param update Update operations to be performed on the document.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndUpdate\n     */\n    findOneAndUpdate(filter: Object, update: Object, callback: MongoCallback<FindAndModifyWriteOpResultObject>): void;\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param update Update operations to be performed on the document.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndUpdate\n     */\n    findOneAndUpdate(filter: Object, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject>;\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     *\n     * @param filter Document selection filter.\n     * @param update Update operations to be performed on the document.\n     * @param options Optional settings.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndUpdate\n     */\n    findOneAndUpdate(filter: Object, update: Object, options: FindOneAndReplaceOption, callback: MongoCallback<FindAndModifyWriteOpResultObject>): void;\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     *\n     * @param x Point to search on the x axis, ensure the indexes are ordered in the same order.\n     * @param y Point to search on the y axis, ensure the indexes are ordered in the same order.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoHaystackSearch\n     */\n    geoHaystackSearch(x: number, y: number, callback: MongoCallback<any>): void;\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     *\n     * @param x Point to search on the x axis, ensure the indexes are ordered in the same order.\n     * @param y Point to search on the y axis, ensure the indexes are ordered in the same order.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoHaystackSearch\n     */\n    geoHaystackSearch(x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any>;\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     *\n     * @param x Point to search on the x axis, ensure the indexes are ordered in the same order.\n     * @param y Point to search on the y axis, ensure the indexes are ordered in the same order.\n     * @param options Optional settings\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoHaystackSearch\n     */\n    geoHaystackSearch(x: number, y: number, options: GeoHaystackSearchOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     *\n     * @param x Point to search on the x axis, ensure the indexes are ordered in the same order.\n     * @param y Point to search on the y axis, ensure the indexes are ordered in the same order.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoNear\n     */\n    geoNear(x: number, y: number, callback: MongoCallback<any>): void;\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     *\n     * @param x Point to search on the x axis, ensure the indexes are ordered in the same order.\n     * @param y Point to search on the y axis, ensure the indexes are ordered in the same order.\n     * @param options Optionals.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoNear\n     */\n    geoNear(x: number, y: number, options?: GeoNearOptions): Promise<any>;\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     *\n     * @param x Point to search on the x axis, ensure the indexes are ordered in the same order.\n     * @param y Point to search on the y axis, ensure the indexes are ordered in the same order.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoNear\n     */\n    geoNear(x: number, y: number, options: GeoNearOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Run a group command across a collection.\n     *\n     * @param keys An object, array or function expressing the keys to group by.\n     * @param condition An optional condition that must be true for a row to be considered.\n     * @param initial Initial value of the aggregation counter object.\n     * @param reduce The reduce function aggregates (reduces) the objects iterated.\n     * @param finalize An optional function to be run on each item in the result set just before the item is returned.\n     * @param command Specify if you wish to run using the internal group command or using eval, default is true.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#group\n     */\n    group(keys: Object | Array<any> | Function | Code, condition: Object, initial: Object, reduce: Function | Code, finalize: Function | Code, command: boolean, callback: MongoCallback<any>): void;\n\n    /**\n     * Run a group command across a collection.\n     *\n     * @param keys An object, array or function expressing the keys to group by.\n     * @param condition An optional condition that must be true for a row to be considered.\n     * @param initial Initial value of the aggregation counter object.\n     * @param reduce The reduce function aggregates (reduces) the objects iterated.\n     * @param finalize An optional function to be run on each item in the result set just before the item is returned.\n     * @param command Specify if you wish to run using the internal group command or using eval, default is true.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#group\n     */\n    group(keys: Object | Array<any> | Function | Code, condition: Object, initial: Object, reduce: Function | Code, finalize: Function | Code, command: boolean, options?: GroupOptions): Promise<any>;\n\n    /**\n     * Run a group command across a collection.\n     *\n     * @param keys An object, array or function expressing the keys to group by.\n     * @param condition An optional condition that must be true for a row to be considered.\n     * @param initial Initial value of the aggregation counter object.\n     * @param reduce The reduce function aggregates (reduces) the objects iterated.\n     * @param finalize An optional function to be run on each item in the result set just before the item is returned.\n     * @param command Specify if you wish to run using the internal group command or using eval, default is true.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#group\n     */\n    group(keys: Object | Array<any> | Function | Code, condition: Object, initial: Object, reduce: Function | Code, finalize: Function | Code, command: boolean, options: GroupOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieve all the indexes on the collection.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#indexes\n     */\n    indexes(): Promise<any>;\n\n    /**\n     * Retrieve all the indexes on the collection.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#indexes\n     */\n    indexes(callback: MongoCallback<any>): void;\n\n    /**\n     * Checks if one or more indexes exist on the collection, fails on first non-existing index.\n     *\n     * @param indexes One or more index names to check.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#indexExists\n     */\n    indexExists(indexes: string | string[]): Promise<boolean>;\n\n    /**\n     * Checks if one or more indexes exist on the collection, fails on first non-existing index.\n     *\n     * @param indexes One or more index names to check.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#indexExists\n     */\n    indexExists(indexes: string | string[], callback: MongoCallback<boolean>): void;\n\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param callback The command result callback\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#indexInformation\n     */\n    indexInformation(callback: MongoCallback<any>): void;\n\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#indexInformation\n     */\n    indexInformation(options?: { full: boolean }): Promise<any>;\n\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#indexInformation\n     */\n    indexInformation(options: { full: boolean }, callback: MongoCallback<any>): void;\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added,\n     * creating a new operation for each switch in types.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#initializeOrderedBulkOp\n     */\n    initializeOrderedBulkOp(options?: CollectionOptions): OrderedBulkOperation;\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#initializeUnorderedBulkOp\n     */\n    initializeUnorderedBulkOp(options?: CollectionOptions): UnorderedBulkOperation;\n\n    // http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertOne\n    /** @deprecated Use insertOne, insertMany or bulkWrite */\n    insert(docs: Object, callback: MongoCallback<InsertOneWriteOpResult>): void;\n    /** @deprecated Use insertOne, insertMany or bulkWrite */\n    insert(docs: Object, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult>;\n    /** @deprecated Use insertOne, insertMany or bulkWrite */\n    insert(docs: Object, options: CollectionInsertOneOptions, callback: MongoCallback<InsertOneWriteOpResult>): void;\n\n    /**\n     * InsertMany.\n     *\n     * @param docs Documents to insert.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertMany\n     */\n    insertMany(docs: Object[], callback: MongoCallback<InsertWriteOpResult>): void;\n\n    /**\n     * InsertMany.\n     *\n     * @param docs Documents to insert.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertMany\n     */\n    insertMany(docs: Object[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult>;\n\n    /**\n     * InsertMany.\n     *\n     * @param docs Documents to insert.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertMany\n     */\n    insertMany(docs: Object[], options: CollectionInsertManyOptions, callback: MongoCallback<InsertWriteOpResult>): void;\n\n    /**\n     * InsertOne.\n     *\n     * @param docs Document to insert.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertOne\n     */\n    insertOne(docs: Object, callback: MongoCallback<InsertOneWriteOpResult>): void;\n\n    /**\n     * InsertOne.\n     *\n     * @param docs Document to insert.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertOne\n     */\n    insertOne(docs: Object, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult>;\n\n    /**\n     * InsertOne.\n     *\n     * @param docs Document to insert.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertOne\n     */\n    insertOne(docs: Object, options: CollectionInsertOneOptions, callback: MongoCallback<InsertOneWriteOpResult>): void;\n\n    /**\n     * Returns if the collection is a capped collection.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#isCapped\n     */\n    isCapped(): Promise<any>;\n\n    /**\n     * Returns if the collection is a capped collection.\n     *\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#isCapped\n     */\n    isCapped(callback: MongoCallback<any>): void;\n\n    /**\n     * Get the list of all indexes information for the collection.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#listIndexes\n     */\n    listIndexes(options?: ListIndexesOptions): CommandCursor;\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     *\n     * @param map The mapping function.\n     * @param reduce The reduce function.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#mapReduce\n     */\n    mapReduce(map: Function | string, reduce: Function | string, callback: MongoCallback<any>): void;\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     *\n     * @param map The mapping function.\n     * @param reduce The reduce function.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#mapReduce\n     */\n    mapReduce(map: Function | string, reduce: Function | string, options?: MapReduceOptions): Promise<any>;\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     *\n     * @param map The mapping function.\n     * @param reduce The reduce function.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#mapReduce\n     */\n    mapReduce(map: Function | string, reduce: Function | string, options: MapReduceOptions, callback: MongoCallback<any>): void;\n\n    /**\n     * Returns the options of the collection.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#options\n     */\n    options(): Promise<any>;\n\n    /**\n     * Returns the options of the collection.\n     *\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#options\n     */\n    options(callback: MongoCallback<any>): void;\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection. There are\n     * no ordering guarantees for returned results.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#parallelCollectionScan\n     */\n    parallelCollectionScan(callback: MongoCallback<Cursor<any>[]>): void;\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection. There are\n     * no ordering guarantees for returned results.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#parallelCollectionScan\n     */\n    parallelCollectionScan(options?: ParallelCollectionScanOptions): Promise<Cursor<any>[]>;\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection. There are\n     * no ordering guarantees for returned results.\n     *\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#parallelCollectionScan\n     */\n    parallelCollectionScan(options: ParallelCollectionScanOptions, callback: MongoCallback<Cursor<any>[]>): void;\n\n    /**\n     * Reindex all indexes on the collection.\n     *\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#reIndex\n     */\n    reIndex(): Promise<any>;\n\n    /**\n     * Reindex all indexes on the collection.\n     *\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#reIndex\n     */\n    reIndex(callback: MongoCallback<any>): void;\n\n    // http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#remove\n    /** @deprecated Use use deleteOne, deleteMany or bulkWrite */\n    remove(selector: Object, callback: MongoCallback<WriteOpResult>): void;\n    /** @deprecated Use use deleteOne, deleteMany or bulkWrite */\n    remove(selector: Object, options?: CollectionOptions & { single?: boolean }): Promise<WriteOpResult>;\n    /** @deprecated Use use deleteOne, deleteMany or bulkWrite */\n    remove(selector: Object, options?: CollectionOptions & { single?: boolean }, callback?: MongoCallback<WriteOpResult>): void;\n\n    /**\n     * Rename the collection.\n     *\n     * @param newName New name of of the collection.\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#rename\n     */\n    rename(newName: string, callback: MongoCallback<Collection>): void;\n\n    /**\n     * Rename the collection.\n     *\n     * @param newName New name of of the collection.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#rename\n     */\n    rename(newName: string, options?: { dropTarget?: boolean }): Promise<Collection>;\n\n    /**\n     * Rename the collection.\n     *\n     * @param newName New name of of the collection.\n     * @param options Optional settings.\n     * @param callback The results callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#rename\n     */\n    rename(newName: string, options: { dropTarget?: boolean }, callback: MongoCallback<Collection>): void;\n\n    /**\n     * Replace a document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param doc The Document that replaces the matching document.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#replaceOne\n     */\n    replaceOne(filter: Object, doc: Object, callback: MongoCallback<UpdateWriteOpResult>): void;\n\n    /**\n     * Replace a document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param doc The Document that replaces the matching document.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#replaceOne\n     */\n    replaceOne(filter: Object, doc: Object, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult>;\n\n    /**\n     * Replace a document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param doc The Document that replaces the matching document.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#replaceOne\n     */\n    replaceOne(filter: Object, doc: Object, options: ReplaceOneOptions, callback: MongoCallback<UpdateWriteOpResult>): void;\n\n    // http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#save\n    /** @deprecated Use insertOne, insertMany, updateOne or updateMany */\n    save(doc: Object, callback: MongoCallback<WriteOpResult>): void;\n    /** @deprecated Use insertOne, insertMany, updateOne or updateMany */\n    save(doc: Object, options?: CollectionOptions): Promise<WriteOpResult>;\n    /** @deprecated Use insertOne, insertMany, updateOne or updateMany */\n    save(doc: Object, options: CollectionOptions, callback: MongoCallback<WriteOpResult>): void;\n\n    /**\n     * Get all the collection statistics.\n     *\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#stats\n     */\n    stats(callback: MongoCallback<CollStats>): void;\n\n    /**\n     * Get all the collection statistics.\n     *\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#stats\n     */\n    stats(options?: { scale: number }): Promise<CollStats>;\n\n    /**\n     * Get all the collection statistics.\n     *\n     * @param options Optional settings.\n     * @param callback The collection result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#stats\n     */\n    stats(options: { scale: number }, callback: MongoCallback<CollStats>): void;\n\n    // http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#update\n    /** @deprecated use updateOne, updateMany or bulkWrite */\n    update(filter: Object, update: Object, callback: MongoCallback<WriteOpResult>): void;\n    /** @deprecated use updateOne, updateMany or bulkWrite */\n    update(filter: Object, update: Object, options?: ReplaceOneOptions & { multi?: boolean }): Promise<WriteOpResult>;\n    /** @deprecated use updateOne, updateMany or bulkWrite */\n    update(filter: Object, update: Object, options: ReplaceOneOptions & { multi?: boolean }, callback: MongoCallback<WriteOpResult>): void;\n\n    /**\n     * Update multiple documents on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param update The update operations to be applied to the document.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#updateMany\n     */\n    updateMany(filter: Object, update: Object, callback: MongoCallback<UpdateWriteOpResult>): void;\n\n    /**\n     * Update multiple documents on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param update The update operations to be applied to the document.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#updateMany\n     */\n    updateMany(filter: Object, update: Object, options?: UpdateManyOptions): Promise<UpdateWriteOpResult>;\n\n    /**\n     * Update multiple documents on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param update The update operations to be applied to the document.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#updateMany\n     */\n    updateMany(filter: Object, update: Object, options: UpdateManyOptions, callback: MongoCallback<UpdateWriteOpResult>): void;\n\n    /**\n     * Update a single document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param update The update operations to be applied to the document.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#updateOne\n     */\n    updateOne(filter: Object, update: Object, callback: MongoCallback<UpdateWriteOpResult>): void;\n\n    /**\n     * Update a single document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param update The update operations to be applied to the document.\n     * @param options Optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#updateOne\n     */\n    updateOne(filter: Object, update: Object, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult>;\n\n    /**\n     * Update a single document on MongoDB.\n     *\n     * @param filter The Filter used to select the document to update.\n     * @param update The update operations to be applied to the document.\n     * @param options Optional settings.\n     * @param callback The command result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#updateOne\n     */\n    updateOne(filter: Object, update: Object, options: ReplaceOneOptions, callback: MongoCallback<UpdateWriteOpResult>): void;\n}\n\n/**\n * The name of the target collection.\n *\n * @see http://docs.mongodb.org/manual/reference/command/collStats/\n */\nexport interface CollStats {\n\n    /**\n     * Namespace.\n     */\n    ns: string;\n\n    /**\n     * The number of objects or documents in this collection.\n     */\n    count: number;\n\n    /**\n     * Collection size in bytes.\n     */\n    size: number;\n\n    /**\n     * Average object size in bytes.\n     */\n    avgObjSize: number;\n\n    /**\n     * (Pre)allocated space for the collection in bytes.\n     */\n    storageSize: number;\n\n    /**\n     * Number of extents (contiguously allocated chunks of datafile space).\n     */\n    numExtents: number;\n\n    /**\n     * Number of indexes.\n     */\n    nindexes: number;\n\n    /**\n     * Size of the most recently created extent in bytes.\n     */\n    lastExtentSize: number;\n\n    /**\n     * Padding can speed up updates if documents grow.\n     */\n    paddingFactor: number;\n\n    /**\n     * A number that indicates the user-set flags on the collection. userFlags\n     * only appears when using the mmapv1 storage engine.\n     */\n    userFlags: number;\n\n    /**\n     * Total index size in bytes.\n     */\n    totalIndexSize: number;\n\n    /**\n     * Size of specific indexes in bytes.\n     */\n    indexSizes: {\n        _id_: number;\n        username: number;\n    };\n\n    /**\n     * This field will be true if the collection is capped.\n     */\n    capped: boolean;\n\n    /**\n     * Shows the maximum size of a capped collection.\n     */\n    maxSize: boolean;\n\n    /**\n     * This document contains data reported directly by the WiredTiger engine and other data for internal diagnostic use.\n     */\n    wiredTiger: any;\n\n    /**\n     * A document that reports data from the WiredTiger storage engine for each index in the collection.\n     * Other storage engines will return an empty document.\n     */\n    indexDetails: any;\n\n    /**\n     *\n     */\n    ok: number;\n}\n\n/**\n * CollectionAggregationOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#aggregate\n */\nexport interface CollectionAggregationOptions {\n\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Return the query as cursor, on 2.6 > it returns as a real cursor on pre 2.6 it returns as an emulated cursor.\n     */\n    cursor?: { batchSize: number };\n\n    /**\n     * Explain returns the aggregation execution plan (requires mongodb 2.6 >).\n     */\n    explain?: boolean;\n\n    /**\n     * allowDiskUse lets the server know if it can use disk to store temporary results for the aggregation (requires mongodb 2.6 >).\n     */\n    allowDiskUse?: boolean;\n\n    /**\n     * maxTimeMS specifies a cumulative time limit in milliseconds for processing operations on the cursor. MongoDB interrupts the operation at the earliest following interrupt point.\n     */\n    maxTimeMS?: boolean;\n\n    /**\n     * Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n     */\n    bypassDocumentValidation?: boolean;\n}\n\n/**\n * CollectionInsertManyOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertMany\n */\nexport interface CollectionInsertManyOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Serialize functions on any object.\n     */\n    serializeFunctions?: boolean;\n\n    /**\n     * Force server to assign _id values instead of driver.\n     */\n    forceServerObjectId?: boolean;\n}\n\nexport interface UpdateManyOptions {\n\n    /**\n     * Update operation is an upsert.\n     */\n    upsert?: boolean;\n\n    /**\n     * The write concern.\n     */\n    w?: any;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n}\n\n/**\n * CollectionBluckWriteOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#bulkWrite\n */\nexport interface CollectionBluckWriteOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Serialize functions on any object.\n     */\n    serializeFunctions?: boolean;\n\n    /**\n     * Execute write operation in ordered or unordered fashion.\n     */\n    ordered?: boolean;\n\n    /**\n     * Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n     */\n    bypassDocumentValidation?: boolean;\n}\n\n/**\n * BulkWriteOpResultObject.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#~BulkWriteOpResult\n */\nexport interface BulkWriteOpResultObject {\n\n    /**\n     * Number of documents inserted.\n     */\n    insertedCount?: number;\n\n    /**\n     * Number of documents matched for update.\n     */\n    matchedCount?: number;\n\n    /**\n     * Number of documents modified.\n     */\n    modifiedCount?: number;\n\n    /**\n     * Number of documents deleted.\n     */\n    deletedCount?: number;\n\n    /**\n     * Number of documents upserted.\n     */\n    upsertedCount?: number;\n\n    /**\n     * Inserted document generated Id's, hash key is the index of the originating operation.\n     */\n    insertedIds?: any;\n\n    /**\n     * Upserted document generated Id's, hash key is the index of the originating operation.\n     */\n    upsertedIds?: any;\n\n    /**\n     * The command result object.\n     */\n    result?: any;\n}\n\n/**\n * MongoCountPreferences.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#count\n */\nexport interface MongoCountPreferences {\n\n    /**\n     * The limit of documents to count.\n     */\n    limit?: number;\n\n    /**\n     * The number of documents to skip for the count.\n     */\n    skip?: boolean;\n\n    /**\n     * An index name hint for the query.\n     */\n    hint?: string;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n}\n\n/**\n * DeleteWriteOpResultObject.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#~deleteWriteOpResult\n */\nexport interface DeleteWriteOpResultObject {\n\n    /**\n     * The raw result returned from MongoDB, field will vary depending on server version.\n     * @param ok Is 1 if the command executed correctly.\n     * @param n The total count of documents deleted.\n     */\n    result: {\n        ok?: number;\n        n?: number;\n    };\n\n    /**\n     * The connection object used for the operation.\n     */\n    connection?: any;\n\n    /**\n     * The number of documents deleted.\n     */\n    deletedCount?: number;\n}\n\n/**\n * FindAndModifyWriteOpResultObject.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#~findAndModifyWriteOpResult\n */\nexport interface FindAndModifyWriteOpResultObject {\n\n    /**\n     * Document returned from findAndModify command.\n     */\n    value?: any;\n\n    /**\n     * The raw lastErrorObject returned from the command.\n     */\n    lastErrorObject?: any;\n\n    /**\n     * Is 1 if the command executed correctly.\n     */\n    ok?: number;\n}\n\n/**\n * FindOneAndReplaceOption.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndReplace\n */\nexport interface FindOneAndReplaceOption {\n\n    /**\n     * Limits the fields to return for all matching documents.\n     */\n    projection?: Object;\n\n    /**\n     * Determines which document the operation modifies if the query selects multiple documents.\n     */\n    sort?: Object;\n\n    /**\n     * The maximum amount of time to allow the query to run.\n     */\n    maxTimeMS?: number;\n\n    /**\n     * Upsert the document if it does not exist.\n     */\n    upsert?: boolean;\n\n    /**\n     * When false, returns the updated document rather than the original. The default is true.\n     */\n    returnOriginal?: boolean;\n}\n\n/**\n * GeoHaystackSearchOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoHaystackSearch\n */\nexport interface GeoHaystackSearchOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Include results up to maxDistance from the point.\n     */\n    maxDistance?: number;\n\n    /**\n     * Filter the results by a query.\n     */\n    search?: Object;\n\n    /**\n     * Max number of results to return.\n     */\n    limit?: number;\n}\n\n/**\n * GeoNearOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#geoNear\n */\nexport interface GeoNearOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Max number of results to return.\n     */\n    num?: number;\n\n    /**\n     * Include results starting at minDistance from a point (2.6 or higher).\n     */\n    minDistance?: number;\n\n    /**\n     * Include results up to maxDistance from the point.\n     */\n    maxDistance?: number;\n\n    /**\n     * Include a value to multiply the distances with allowing for range conversions.\n     */\n    distanceMultiplier?: number;\n\n    /**\n     * Filter the results by a query.\n     */\n    query?: Object;\n\n    /**\n     * Perform query using a spherical model.\n     */\n    spherical?: boolean;\n\n    /**\n     * The closest location in a document to the center of the search region will always be returned MongoDB > 2.X.\n     */\n    uniqueDocs?: boolean;\n\n    /**\n     * Include the location data fields in the top level of the results MongoDB > 2.X.\n     */\n    includeLocs?: boolean;\n}\n\n/**\n * A class representation of the BSON Code type.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Code.html\n */\nexport declare class Code {\n    /**\n     *\n     * @param code a string or function.\n     * @param scope optional\n     */\n    constructor(code: string | Function, scope?: Object)\n\n    /**\n     * A string or function.\n     */\n    code: string | Function;\n\n    /**\n     * An optional scope for the function.\n     */\n    scope: any;\n}\n\n/**\n * CollectionOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#deleteMany\n */\nexport interface CollectionOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n}\n\n/**\n * Create a new OrderedBulkOperation instance (INTERNAL TYPE, do not instantiate directly).\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/OrderedBulkOperation.html\n */\nexport interface OrderedBulkOperation {\n    /**\n     * Get the number of operations in the bulk.\n     */\n    length: number;\n\n    /**\n     * Execute the ordered bulk operation.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/OrderedBulkOperation.html#execute\n     */\n    execute(callback: MongoCallback<BulkWriteResult>): void;\n\n    /**\n     * Execute the ordered bulk operation.\n     * @param options optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/OrderedBulkOperation.html#execute\n     */\n    execute(options?: FSyncOptions): Promise<BulkWriteResult>;\n\n    /**\n     * Execute the ordered bulk operation.\n     * @param options Optional settings.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/OrderedBulkOperation.html#execute\n     */\n    execute(options: FSyncOptions, callback: MongoCallback<BulkWriteResult>): void;\n\n    /**\n     * Initiate a find operation for an update/updateOne/remove/removeOne/replaceOne.\n     * @param selector The selector for the bulk operation.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/OrderedBulkOperation.html#find\n     */\n    find(selector: Object): FindOperatorsOrdered;\n\n    /**\n     * Add a single insert document to the bulk operation.\n     * @param doc The document to insert\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/OrderedBulkOperation.html#insert\n     */\n    insert(doc: Object): OrderedBulkOperation;\n}\n\n/**\n * BulkWriteResult.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/BulkWriteResult.html\n */\nexport interface BulkWriteResult {\n\n    /**\n     * Did bulk operation correctly execute.\n     */\n    ok: number;\n\n    /**\n     * number of inserted documents.\n     */\n    nInserted: number;\n\n    /**\n     * number of documents updated logically.\n     */\n    nUpdated: number;\n\n    /**\n     * Number of upserted documents.\n     */\n    nUpserted: number;\n\n    /**\n     *\n     Number of documents updated physically on disk.\n     */\n    nModified: number;\n\n    /**\n     * Number of removed documents.\n     */\n    nRemoved: number;\n\n    /**\n     * Return an array of inserted ids.\n     */\n    getInsertedIds(): Array<Object>;\n\n    /**\n     * Retrieve lastOp if available.\n     */\n    getLastOp(): Object;\n\n    /**\n     * Return raw internal result.\n     */\n    getRawResponse(): Object;\n\n    /**\n     * Return the upserted id at position x.\n     */\n    getUpsertedIdAt(index: number): Object;\n\n    /**\n     * Return an array of upserted ids.\n     */\n    getUpsertedIds(): Array<Object>;\n\n    /**\n     * Retrieve the write concern error if any.\n     */\n    getWriteConcernError(): WriteConcernError;\n\n    /**\n     * Returns a specific write error object.\n     */\n    getWriteErrorAt(index: number): WriteError;\n\n    /**\n     * Returns the number of write errors off the bulk operation.\n     */\n    getWriteErrorCount(): number;\n\n    /**\n     * Retrieve all write errors.\n     */\n    getWriteErrors(): Array<Object>;\n\n    /**\n     * Returns true if the bulk operation contains a write error.\n     */\n    hasWriteErrors(): boolean;\n}\n\n/**\n * Create a new WriteError instance (INTERNAL TYPE, do not instantiate directly).\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/WriteError.html\n */\nexport interface WriteError {\n\n    /**\n     * Write concern error code.\n     */\n    code: number;\n\n    /**\n     * Write concern error original bulk operation index.\n     */\n    index: number;\n\n    /**\n     * Write concern error message.\n     */\n    errmsg: string;\n}\n\n/**\n * Create a new WriteConcernError instance (INTERNAL TYPE, do not instantiate directly).\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/WriteConcernError.html\n */\nexport interface WriteConcernError {\n\n    /**\n     * Write concern error code.\n     */\n    code: number;\n\n    /**\n     * Write concern error message.\n     */\n    errmsg: string;\n}\n\n/**\n * Create a FindOperatorsOrdered instance (INTERNAL TYPE, do not instantiate directly).\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/FindOperatorsOrdered.html\n */\nexport interface FindOperatorsOrdered {\n\n    /**\n     * Add a remove operation to the bulk operation.\n     */\n    delete(): OrderedBulkOperation;\n\n    /**\n     * Add a remove one operation to the bulk operation.\n     */\n    deleteOne(): OrderedBulkOperation;\n\n    /**\n     * Add a replace one operation to the bulk operation.\n     */\n    replaceOne(doc: Object): OrderedBulkOperation;\n\n    /**\n     * Add a single update document to the bulk operation.\n     */\n    update(doc: Object): OrderedBulkOperation;\n\n    /**\n     * Add a single update one document to the bulk operation.\n     */\n    updateOne(doc: Object): OrderedBulkOperation;\n\n    /**\n     * Upsert modifier for update bulk operation.\n     */\n    upsert(): FindOperatorsOrdered;\n}\n\n/**\n * Create a new UnorderedBulkOperation instance (INTERNAL TYPE, do not instantiate directly).\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/UnorderedBulkOperation.html\n */\nexport interface UnorderedBulkOperation {\n\n    /**\n     * Get the number of operations in the bulk.\n     */\n    length: number;\n\n    /**\n     * Execute the ordered bulk operation.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/UnorderedBulkOperation.html#execute\n     */\n    execute(callback: MongoCallback<BulkWriteResult>): void;\n\n    /**\n     * Execute the ordered bulk operation.\n     * @param options optional.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/UnorderedBulkOperation.html#execute\n     */\n    execute(options?: FSyncOptions): Promise<BulkWriteResult>;\n\n    /**\n     * Execute the ordered bulk operation.\n     * @param options Optional settings.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/UnorderedBulkOperation.html#execute\n     */\n    execute(options: FSyncOptions, callback: MongoCallback<BulkWriteResult>): void;\n\n    /**\n     * Initiate a find operation for an update/updateOne/remove/removeOne/replaceOne.\n     * @param selector The selector for the bulk operation.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/UnorderedBulkOperation.html#find\n     */\n    find(selector: Object): FindOperatorsUnordered;\n\n    /**\n     * Add a single insert document to the bulk operation.\n     * @param doc The document to insert.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/UnorderedBulkOperation.html#insert\n     */\n    insert(doc: Object): UnorderedBulkOperation;\n}\n\n/**\n * Create a FindOperatorsUnordered instance (INTERNAL TYPE, do not instantiate directly).\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/FindOperatorsUnordered.html\n */\nexport interface FindOperatorsUnordered {\n\n    /**\n     * Get the number of operations in the bulk.\n     */\n    length: number;\n\n    /**\n     * Add a remove operation to the bulk operation.\n     */\n    remove(): UnorderedBulkOperation;\n\n    /**\n     * Add a remove one operation to the bulk operation.\n     */\n    removeOne(): UnorderedBulkOperation;\n\n    /**\n     * Add a replace one operation to the bulk operation.\n     * @param doc The new document to replace the existing one with.\n     */\n    replaceOne(doc: Object): UnorderedBulkOperation;\n\n    /**\n     * Add a single update document to the bulk operation.\n     * @param doc Update operations\n     */\n    update(doc: Object): UnorderedBulkOperation;\n\n    /**\n     * Add a single update one document to the bulk operation.\n     * @param doc Update operations\n     */\n    updateOne(doc: Object): UnorderedBulkOperation;\n\n    /**\n     * Upsert modifier for update bulk operation.\n     */\n    upsert(): FindOperatorsUnordered;\n}\n\n/**\n * MongodbFindOneOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOne\n */\nexport interface MongodbFindOneOptions {\n\n    /**\n     * Sets the limit of documents returned in the query.\n     */\n    limit?: number;\n\n    /**\n     * Set to sort the documents coming back from the query. Array of indexes, [['a', 1]] etc.\n     */\n    sort?: Array<any> | Object;\n\n    /**\n     * The fields to return in the query. Object of fields to include or exclude (not both), {'a':1}.\n     */\n    fields?: Object;\n\n    /**\n     * Set to skip N documents ahead in your query (useful for pagination).\n     */\n    skip?: number;\n\n    /**\n     * Tell the query to use specific indexes in the query. Object of indexes to use, {'_id':1}.\n     */\n    hint?: Object;\n\n    /**\n     * Explain the query instead of returning the data.\n     */\n    explain?: boolean;\n\n    /**\n     * Snapshot query.\n     */\n    snapshot?: boolean;\n\n    /**\n     * Specify if the cursor can timeout.\n     */\n    timeout?: boolean;\n\n    /**\n     * Specify if the cursor is tailable.\n     */\n    tailable?: boolean;\n\n    /**\n     * Set the batchSize for the getMoreCommand when iterating over the query results.\n     */\n    batchSize?: number;\n\n    /**\n     * Only return the index key.\n     */\n    returnKey?: boolean;\n\n    /**\n     * Limit the number of items to scan.\n     */\n    maxScan?: number;\n\n    /**\n     * Set index bounds.\n     */\n    min?: number;\n\n    /**\n     * Set index bounds.\n     */\n    max?: number;\n\n    /**\n     * Show disk location of results.\n     */\n    showDiskLoc?: boolean;\n\n    /**\n     * You can put a $comment field on a query to make looking in the profiler logs simpler.\n     */\n    comment?: string;\n\n    /**\n     * Return document results as raw BSON buffers.\n     */\n    raw?: boolean;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Specify if the cursor should return partial results when querying against a sharded system.\n     */\n    partial?: boolean;\n\n    /**\n     * Number of milliseconds to wait before aborting the query.\n     */\n    maxTimeMs?: number;\n}\n\n/**\n * InsertWriteOpResult.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#~insertWriteOpResult\n */\nexport interface InsertWriteOpResult {\n\n    /**\n     * The total amount of documents inserted.\n     */\n    insertedCount: number;\n\n    /**\n     * All the documents inserted using insertOne/insertMany/replaceOne.\n     * Documents contain the _id field if forceServerObjectId == false for insertOne/insertMany.\n     */\n    ops: Array<any>;\n\n    /**\n     * All the generated _id's for the inserted documents.\n     */\n    insertedIds: Array<ObjectID>;\n\n    /**\n     * The connection object used for the operation.\n     */\n    connection: any;\n\n    /**\n     * The raw command result object returned from MongoDB (content might vary by server version).\n     * @param ok Is 1 if the command executed correctly.\n     * @param n The total count of documents inserted.\n     */\n    result: { ok: number, n: number };\n}\n\n/**\n * CollectionInsertOneOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#insertOne\n */\nexport interface CollectionInsertOneOptions {\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Serialize functions on any object.\n     */\n    serializeFunctions?: boolean;\n\n    /**\n     * Force server to assign _id values instead of driver.\n     */\n    forceServerObjectId?: boolean;\n\n    /**\n     * Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n     */\n    bypassDocumentValidation?: boolean;\n}\n\n/**\n * InsertOneWriteOpResult.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#~insertOneWriteOpResult\n */\nexport interface InsertOneWriteOpResult {\n\n    /**\n     * The total amount of documents inserted.\n     */\n    insertedCount: number;\n\n    /**\n     * All the documents inserted using insertOne/insertMany/replaceOne.\n     * Documents contain the _id field if forceServerObjectId == false for insertOne/insertMany.\n     */\n    ops: Array<any>;\n\n    /**\n     * The driver generated ObjectId for the insert operation.\n     */\n    insertedId: ObjectID;\n\n    /**\n     * The connection object used for the operation.\n     */\n    connection: any;\n\n    /**\n     * The raw command result object returned from MongoDB (content might vary by server version).\n     * @param ok Is 1 if the command executed correctly.\n     * @param n The total count of documents inserted.\n     */\n    result: { ok: number, n: number };\n}\n\n/**\n * ParallelCollectionScanOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#parallelCollectionScan\n */\nexport interface ParallelCollectionScanOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Set the batchSize for the getMoreCommand when iterating over the query results.\n     */\n    batchSize?: number;\n\n    /**\n     * The maximum number of parallel command cursors to return (the number of returned cursors will be in the range 1:numCursors).\n     */\n    numCursors?: number;\n\n    /**\n     * Return all BSON documents as Raw Buffer documents.\n     */\n    raw?: boolean;\n}\n\n/**\n * ParallelCollectionScanOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#replaceOne\n */\nexport interface ReplaceOneOptions {\n\n    /**\n     * Update operation is an upsert.\n     */\n    upsert?: boolean;\n\n    /**\n     * The write concern.\n     */\n    w?: number | string;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * Specify a journal write concern.\n     */\n    j?: boolean;\n\n    /**\n     * Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n     */\n    bypassDocumentValidation?: boolean;\n}\n\n/**\n * ParallelCollectionScanOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#~updateWriteOpResult\n */\nexport interface UpdateWriteOpResult {\n\n    /**\n     * The raw result returned from MongoDB, field will vary depending on server version.\n     * @param ok Is 1 if the command executed correctly.\n     * @param n The total count of documents scanned.\n     * @param nModified The total count of documents modified.\n     */\n    result: { ok: number, n: number, nModified: number };\n\n    /**\n     * The connection object used for the operation.\n     */\n    connection: any;\n\n    /**\n     * The number of documents that matched the filter.\n     */\n    matchedCount: number;\n\n    /**\n     * The number of documents that were modified.\n     */\n    modifiedCount: number;\n\n    /**\n     * The number of documents upserted.\n     */\n    upsertedCount: number;\n\n    /**\n     * The upserted id.\n     * @param _id The upserted _id returned from the server.\n     */\n    upsertedId: { _id: ObjectID };\n}\n\n/**\n * ParallelCollectionScanOptions.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#mapReduce\n */\nexport interface MapReduceOptions {\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n\n    /**\n     * Sets the output target for the map reduce job.\n     * {inline:1} | {replace:'collectionName'} | {merge:'collectionName'} | {reduce:'collectionName'}.\n     */\n    out?: Object;\n\n    /**\n     * Query filter object.\n     */\n    query?: Object;\n\n    /**\n     * Sorts the input objects using this key. Useful for optimization, like sorting by the emit key for fewer reduces.\n     */\n    sort?: Object;\n\n    /**\n     * Number of objects to return from collection.\n     */\n    limit?: number;\n\n    /**\n     * Keep temporary data.\n     */\n    keeptemp?: boolean;\n\n    /**\n     * Finalize function.\n     */\n    finalize?: Function | string;\n\n    /**\n     * Can pass in variables that can be access from map/reduce/finalize.\n     */\n    scope?: Object;\n\n    /**\n     * It is possible to make the execution stay in JS. Provided in MongoDB > 2.0.X.\n     */\n    jsMode?: boolean;\n\n    /**\n     * Provide statistics on job execution time.\n     */\n    verbose?: boolean;\n\n    /**\n     * Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n     */\n    bypassDocumentValidation?: boolean;\n}\n\n/**\n * WriteOpResult.\n *\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#~WriteOpResult\n */\nexport interface WriteOpResult {\n\n    /**\n     * All the documents inserted using insertOne/insertMany/replaceOne.\n     * Documents contain the _id field if forceServerObjectId == false for insertOne/insertMany.\n     */\n    ops: Array<any>;\n\n    /**\n     * The connection object used for the operation.\n     */\n    connection: any;\n\n    /**\n     * The command result object.\n     */\n    result: any;\n}\n\n/**\n * WriteOpResult.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#~resultCallback\n */\nexport type CursorResult = any | void | boolean;\n\n/**\n * Creates a new Cursor instance (INTERNAL TYPE, do not instantiate directly).\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html\n */\nexport declare class Cursor<T> extends Readable {\n\n    /**\n     * Cursor query sort setting.\n     */\n    sortValue: string;\n\n    /**\n     * Is Cursor able to time out.\n     */\n    timeout: boolean;\n\n    /**\n     * Get cursor ReadPreference.\n     */\n    readPreference: ReadPreference;\n\n    /**\n     * @param flag The flag to set, must be one of following ['tailable', 'oplogReplay', 'noCursorTimeout', 'awaitData', 'partial'].\n     * @param value The flag boolean value.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#addCursorFlag\n     */\n    addCursorFlag(flag: string, value: boolean): Cursor<T>;\n\n    /**\n     * @param name The query modifier (must start with $, such as $orderby etc).\n     * @param value The flag boolean value.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#addQueryModifier\n     */\n    addQueryModifier(name: string, value: boolean): Cursor<T>;\n\n    /**\n     * @param value The batchSize for the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#batchSize\n     */\n    batchSize(value: number): Cursor<T>;\n\n    /**\n     * Clone the cursor.\n     * still returns the same type.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#clone\n     */\n    clone(): Cursor<T>;\n\n    /**\n     * Close the cursor, sending a KillCursor command and emitting close.\n     * The result callback.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#close\n     */\n    close(): Promise<CursorResult>;\n    close(callback: MongoCallback<CursorResult>): void;\n\n    /**\n     * Add a comment to the cursor query allowing for tracking the comment in the log.\n     * @param value The comment attached to this query.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#comment\n     */\n    comment(value: string): Cursor<T>;\n\n    /**\n     * Get the count of documents for this cursor.\n     * @param applySkipLimit Should the count command apply limit and skip settings on the cursor or in the passed in options.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#count\n     */\n    count(applySkipLimit: boolean, callback: MongoCallback<number>): void;\n\n    /**\n     * Get the count of documents for this cursor.\n     * @param applySkipLimit Should the count command apply limit and skip settings on the cursor or in the passed in options.\n     * @param options Optional settings.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#count\n     */\n    count(applySkipLimit: boolean, options?: CursorCommentOptions): Promise<number>;\n\n    /**\n     * Get the count of documents for this cursor.\n     * @param applySkipLimit Should the count command apply limit and skip settings on the cursor or in the passed in options.\n     * @param options Optional settings.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#count\n     */\n    count(applySkipLimit: boolean, options: CursorCommentOptions, callback: MongoCallback<number>): void;\n\n    /**\n     * Execute the explain for the cursor.\n     * returns Promise if no callback passed.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#explain\n     */\n    explain(): Promise<CursorResult>;\n\n    /**\n     * Execute the explain for the cursor.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#explain\n     */\n    explain(callback: MongoCallback<CursorResult>): void;\n\n    /**\n     * Set the cursor query.\n     * @param filter The filter object used for the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#filter\n     */\n    filter(filter: Object): Cursor<T>;\n\n    /**\n     * Iterates over all the documents for this cursor using the iterator, callback pattern.\n     * @param iterator The iteration callback.\n     * @param callback The end callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#forEach\n     */\n    forEach(iterator: IteratorCallback<T>, callback: EndCallback): void;\n\n    /**\n     * Check if there is any document still available in the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#hasNext\n     */\n    hasNext(): Promise<boolean>;\n\n    /**\n     * Check if there is any document still available in the cursor.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#hasNext\n     */\n    hasNext(callback: MongoCallback<boolean>): void;\n\n    /**\n     * Set the cursor hint.\n     * @param hint If specified, then the query system will only consider plans using the hinted index.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#hint\n     */\n    hint(hint: Object): Cursor<T>;\n\n    /**\n     * Is the cursor closed.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#isClosed\n     */\n    isClosed(): boolean;\n\n    /**\n     * Set the limit for the cursor.\n     * @param value The limit for the cursor query.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#limit\n     */\n    limit(value: number): Cursor<T>;\n\n    /**\n     * SMap all documents using the provided function.\n     * @param transform The mapping transformation method.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#map\n     */\n    map(transform: Function): Cursor<T>;\n\n    /**\n     * Set the cursor max.\n     * @param max Specify a $max value to specify the exclusive upper bound for a specific index in\n     * order to constrain the results of find(). The $max specifies the upper bound for\n     * all keys of a specific index in order.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#max\n     */\n    max(max: number): Cursor<T>;\n\n    /**\n     * Set a maxAwaitTimeMS on a tailing cursor query to allow to customize the\n     * timeout value for the option awaitData (Only supported on MongoDB 3.2 or higher, ignored otherwise).\n     * @param value Number of milliseconds to wait before aborting the tailed query.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#maxAwaitTimeMS\n     */\n    maxAwaitTimeMS(value: number): Cursor<T>;\n\n    /**\n     * Set the cursor maxScan.\n     * @param maxScan Constrains the query to only scan the specified number of documents when fulfilling the query.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#maxScan\n     */\n    maxScan(maxScan: Object): Cursor<T>;\n\n    /**\n     * Set a maxTimeMS on the cursor query, allowing for hard timeout limits on queries (Only supported on MongoDB 2.6 or higher).\n     * @param value Number of milliseconds to wait before aborting the query.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#maxTimeMS\n     */\n    maxTimeMS(value: number): Cursor<T>;\n\n    /**\n     * Set the cursor min.\n     * @param min Specify a $min value to specify the inclusive lower bound for a specific index in order to\n     * constrain the results of find(). The $min specifies the lower bound for all keys of a specific index in order.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#min\n     */\n    min(min: number): Cursor<T>;\n\n    /**\n     * Get the next available document from the cursor, returns null if no more documents are available.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#next\n     */\n    next(): Promise<CursorResult>;\n\n    /**\n     * Get the next available document from the cursor, returns null if no more documents are available.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#next\n     */\n    next(callback: MongoCallback<CursorResult>): void;\n\n    /**\n     * Sets a field projection for the query.\n     * @param value The field projection object.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#project\n     */\n    project(value: Object): Cursor<T>;\n\n    /**\n     * The read() method pulls some data out of the internal buffer and returns it.\n     * If there is no data available, then it will return null.\n     * @param size Optional argument to specify how much data to read.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#read\n     */\n    read(size: number): string | Buffer | void;\n\n    /**\n     * Set the cursor returnKey.\n     * @param returnKey Only return the index field or fields for the results of the query. If $returnKey is set\n     * to true and the query does not use an index to perform the read operation,\n     * the returned documents will not contain any fields. Use one of the following forms:\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#next\n     */\n    returnKey(returnKey: Object): Cursor<T>;\n\n    /**\n     * Resets the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#rewind\n     */\n    rewind(): void;\n\n    /**\n     * Set a node.js specific cursor option.\n     * @param field The cursor option to set ['numberOfRetries', 'tailableRetryInterval'].\n     * @param value The field value.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#setCursorOption\n     */\n    setCursorOption(field: string, value: Object): Cursor<T>;\n\n    /**\n     * Set the ReadPreference for the cursor.\n     * @param readPreference The new read preference for the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#setReadPreference\n     */\n    setReadPreference(readPreference: string | ReadPreference): Cursor<T>;\n\n    /**\n     * Set the cursor showRecordId.\n     * @param showRecordId The $showDiskLoc option has now been deprecated and replaced with the\n     * showRecordId field. $showDiskLoc will still be accepted for OP_QUERY stye find.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#showRecordId\n     */\n    showRecordId(showRecordId: Object): Cursor<T>;\n\n    /**\n     * Set the skip for the cursor.\n     * @param value The skip for the cursor query.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#skip\n     */\n    skip(value: number): Cursor<T>;\n\n    /**\n     * Set the cursor snapshot.\n     * @param snapshot The $snapshot operator prevents the cursor from returning a document more than\n     * once because an intervening write operation results in a move of the document.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#snapshot\n     */\n    snapshot(snapshot: Object): Cursor<T>;\n\n    /**\n     * Sets the sort order of the cursor query.\n     * @param keyOrList The key or keys set for the sort.\n     * @param direction The direction of the sorting (1 or -1).\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#sort\n     */\n    sort(keyOrList: string | Object[] | Object, direction?: number): Cursor<T>;\n\n    /**\n     * Return a modified Readable stream including a possible transform method.\n     * @param options Optional settings.\n     * @param transform A transformation method applied to each document emitted by the stream.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#stream\n     */\n    stream(options?: { transform?: Function }): Cursor<T>;\n\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there is enough\n     * memory to store the results. Note that the array only contain partial results when this cursor had\n     * been previously accessed. In that case, cursor.rewind() can be used to reset the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#toArray\n     */\n    toArray(): Promise<T[]>;\n\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there is enough\n     * memory to store the results. Note that the array only contain partial results when this cursor had\n     * been previously accessed. In that case, cursor.rewind() can be used to reset the cursor.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#toArray\n     */\n    toArray(callback: MongoCallback<T[]>): void;\n\n    /**\n     * This is useful in certain cases where a stream is being consumed by a parser, which needs to \"un-consume\" some\n     * data that it has optimistically pulled out of the source, so that the stream can be passed on to some other party.\n     * @param stream Chunk of data to unshift onto the read queue.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#unshift\n     */\n    unshift(stream: Buffer | string): void;\n}\n\n/**\n * Get the count of documents for this cursor.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#count\n */\nexport interface CursorCommentOptions {\n\n    /**\n     * The number of documents to skip.\n     */\n    skip?: number;\n\n    /**\n     * The maximum amounts to count before aborting.\n     */\n    limit?: number;\n\n    /**\n     * Number of miliseconds to wait before aborting the query.\n     */\n    maxTimeMS?: number;\n\n    /**\n     * An index name hint for the query.\n     */\n    hint?: string;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED,\n     * ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readPreference?: ReadPreference | string;\n}\n\n/**\n * The callback format for the forEach iterator method.\n * @param doc An emitted document for the iterator.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#~iteratorCallback\n */\nexport interface IteratorCallback<T> {\n    (doc: T): void;\n}\n\n/**\n * The callback error format for the forEach iterator method.\n * @param error An error instance representing the error during the execution.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/Cursor.html#~endCallback\n */\nexport interface EndCallback {\n    (error: MongoError): void;\n}\n\n/**\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#~resultCallback\n */\nexport type AggregationCursorResult = any | void;\n\n/**\n * Creates a new Aggregation Cursor instance (INTERNAL TYPE, do not instantiate directly),\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html\n */\nexport interface AggregationCursor<T> extends Readable {\n\n    /**\n     * Set the batch size for the cursor.\n     * @param value The batchSize for the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#batchSize\n     */\n    batchSize(value: number): AggregationCursor<T>;\n\n    /**\n     * Clone the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#clone\n     */\n    clone(): AggregationCursor<T>;\n\n    /**\n     * Close the cursor, sending a AggregationCursor command and emitting close.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#close\n     */\n    close(): Promise<AggregationCursorResult>;\n\n    /**\n     * Close the cursor, sending a AggregationCursor command and emitting close.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#close\n     */\n    close(callback: MongoCallback<AggregationCursorResult>): void;\n\n    /**\n     * Iterates over all the documents for this cursor. As with {cursor.toArray}, not all of the elements will\n     * be iterated if this cursor had been previouly accessed. In that case, {cursor.rewind} can be used to reset\n     * the cursor. However, unlike {cursor.toArray}, the cursor will only hold a maximum of batch size elements\n     * at any given time if batch size is specified. Otherwise, the caller is responsible for making sure\n     * that the entire result can fit the memory.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#each\n     */\n    each(callback: MongoCallback<AggregationCursorResult>): void;\n\n    /**\n     * Execute the explain for the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#explain\n     */\n    explain(): Promise<AggregationCursorResult>;\n\n    /**\n     * Execute the explain for the cursor.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#explain\n     */\n    explain(callback: MongoCallback<AggregationCursorResult>): void;\n\n    /**\n     * Add a geoNear stage to the aggregation pipeline.\n     * @param document The geoNear stage document.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#geoNear\n     */\n    geoNear(document: Object): AggregationCursor<T>;\n\n    /**\n     * Add a group stage to the aggregation pipeline.\n     * @param document The group stage document.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#group\n     */\n    group(document: Object): AggregationCursor<T>;\n\n    /**\n     * Is the cursor closed.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#isClosed\n     */\n    isClosed(): boolean;\n\n    /**\n     * Add a limit stage to the aggregation pipeline.\n     * @param value The state limit value.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#limit\n     */\n    limit(value: number): AggregationCursor<T>;\n\n    /**\n     * Add a match stage to the aggregation pipeline.\n     * @param document The match stage document.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#match\n     */\n    match(document: Object): AggregationCursor<T>;\n\n    /**\n     * Add a maxTimeMS stage to the aggregation pipeline.\n     * @param value The state maxTimeMS value.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#maxTimeMS\n     */\n    maxTimeMS(value: number): AggregationCursor<T>;\n\n    /**\n     * Get the next available document from the cursor, returns null if no more documents are available.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#next\n     */\n    next(): Promise<AggregationCursorResult>;\n\n    /**\n     * Get the next available document from the cursor, returns null if no more documents are available.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#next\n     */\n    next(callback: MongoCallback<AggregationCursorResult>): void;\n\n    /**\n     * Add a out stage to the aggregation pipeline.\n     * @param destination The destination name.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#out\n     */\n    out(destination: string): AggregationCursor<T>;\n\n    /**\n     * Add a project stage to the aggregation pipeline.\n     * @param document The project stage document.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#project\n     */\n    project(document: Object): AggregationCursor<T>;\n\n    /**\n     * The read() method pulls some data out of the internal buffer and returns it.\n     * If there is no data available, then it will return null.\n     * @param size Optional argument to specify how much data to read.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#read\n     */\n    read(size: number): string | Buffer | void;\n\n    /**\n     * Add a redact stage to the aggregation pipeline.\n     * @param document The redact stage document.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#redact\n     */\n    redact(document: Object): AggregationCursor<T>;\n\n    /**\n     * Resets the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#rewind\n     */\n    rewind(): AggregationCursor<T>;\n\n    /**\n     * Add a skip stage to the aggregation pipeline.\n     * @param value The state skip value.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#setEncoding\n     */\n    skip(value: number): AggregationCursor<T>;\n\n    /**\n     * Add a sort stage to the aggregation pipeline.\n     * @param document The sort stage document.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#sort\n     */\n    sort(document: Object): AggregationCursor<T>;\n\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there\n     * is enough memory to store the results. Note that the array only contain partial\n     * results when this cursor had been previouly accessed. In that case,\n     * cursor.rewind() can be used to reset the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#toArray\n     */\n    toArray(): Promise<T[]>;\n\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there\n     * is enough memory to store the results. Note that the array only contain partial\n     * results when this cursor had been previouly accessed. In that case,\n     * cursor.rewind() can be used to reset the cursor.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#toArray\n     */\n    toArray(callback: MongoCallback<T[]>): void;\n\n    /**\n     * This is useful in certain cases where a stream is being consumed by a parser,\n     * which needs to \"un-consume\" some data that it has optimistically pulled out of the source,\n     * so that the stream can be passed on to some other party.\n     * @param stream Chunk of data to unshift onto the read queue.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#unshift\n     */\n    unshift(stream: Buffer | string): void;\n\n    /**\n     * Add a unwind stage to the aggregation pipeline.\n     * @param field The unwind field name.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/AggregationCursor.html#unwind\n     */\n    unwind(field: string): AggregationCursor<T>;\n}\n\n/**\n * CommandCursor.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html\n */\nexport interface CommandCursor extends Readable {\n\n    /**\n     * Set the batch size for the cursor.\n     * @param value The batchSize for the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#batchSize\n     */\n    batchSize(value: number): CommandCursor;\n\n    /**\n     * Clone the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#clone\n     */\n    clone(): CommandCursor;\n\n    /**\n     * Close the cursor, sending a KillCursor command and emitting close.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#close\n     */\n    close(): Promise<AggregationCursorResult>;\n\n    /**\n     * Close the cursor, sending a KillCursor command and emitting close.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#close\n     */\n    close(callback: MongoCallback<AggregationCursorResult>): void;\n\n    /**\n     * Each\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#each\n     */\n    each(callback: MongoCallback<AggregationCursorResult>): void;\n\n    /**\n     * Is the cursor closed.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#isClosed\n     */\n    isClosed(): boolean;\n\n    /**\n     * Add a maxTimeMS stage to the aggregation pipeline.\n     * @param value The state maxTimeMS value.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#maxTimeMS\n     */\n    maxTimeMS(value: number): CommandCursor;\n\n    /**\n     * Get the next available document from the cursor, returns null if no more documents are available.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#next\n     */\n    next(): Promise<AggregationCursorResult>;\n\n    /**\n     * Get the next available document from the cursor, returns null if no more documents are available.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#next\n     */\n    next(callback: MongoCallback<AggregationCursorResult>): void;\n\n    /**\n     * The read() method pulls some data out of the internal buffer and returns it.\n     * If there is no data available, then it will return null.\n     * @param size Optional argument to specify how much data to read.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#read\n     */\n    read(size: number): string | Buffer | void;\n\n    /**\n     * Resets the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#rewind\n     */\n    rewind(): CommandCursor;\n\n    /**\n     * Set the ReadPreference for the cursor.\n     * @param readPreference The new read preference for the cursor.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#setReadPreference\n     */\n    setReadPreference(readPreference: string | ReadPreference): CommandCursor;\n\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there is enough memory\n     * to store the results. Note that the array only contain partial results when this cursor had been previouly accessed.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#toArray\n     */\n    toArray(): Promise<any[]>;\n\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there is enough memory\n     * to store the results. Note that the array only contain partial results when this cursor had been previouly accessed.\n     * @param callback The result callback.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#toArray\n     */\n    toArray(callback: MongoCallback<any[]>): void;\n\n    /**\n     * This is useful in certain cases where a stream is being consumed by a parser,\n     * which needs to \"un-consume\" some data that it has optimistically pulled out of the source,\n     * so that the stream can be passed on to some other party.\n     * @param stream Chunk of data to unshift onto the read queue.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/CommandCursor.html#unshift\n     */\n    unshift(stream: Buffer | string): void;\n}\n\n/**\n * GridFSBucket.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html\n */\nexport declare class GridFSBucket {\n\n    /**\n     *\n     * @param db A db handle.\n     * @param options Optional settings.\n     */\n    constructor(db: Db, options?: GridFSBucketOptions);\n\n    /**\n     * Deletes a file with the given id.\n     * @param id The id of the file doc\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#delete\n     */\n    delete(id: ObjectID, callback?: GridFSBucketErrorCallback): void;\n\n    /**\n     * Removes this bucket's files collection, followed by its chunks collection.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#drop\n     */\n    drop(callback?: GridFSBucketErrorCallback): void;\n\n    /**\n     * Convenience wrapper around find on the files collection\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#find\n     */\n    find(filter?: Object, options?: GridFSBucketFindOptions): Cursor<any>;\n\n    /**\n     * Returns a readable stream (GridFSBucketReadStream) for streaming file.\n     * @param id The id of the file doc.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#openDownloadStream\n     */\n    openDownloadStream(id: ObjectID, options?: { start: number, end: number }): GridFSBucketReadStream;\n\n    /**\n     * Returns a readable stream (GridFSBucketReadStream) for streaming file\n     * @param filename The id of the file doc\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#openDownloadStreamByName\n     */\n\n    openDownloadStreamByName(filename: string, options?: { revision: number, start: number, end: number }): GridFSBucketReadStream;\n\n    /**\n     * Returns a writable stream (GridFSBucketWriteStream) for writing buffers to GridFS.\n     * The stream's 'id' property contains the resulting file's id.\n     * @param filename The value of the 'filename' key in the files doc.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#openUploadStream\n     */\n    openUploadStream(filename: string, options?: GridFSBucketOpenUploadStreamOptions): GridFSBucketWriteStream;\n\n    /**\n     * Returns a writable stream (GridFSBucketWriteStream) for writing buffers to GridFS for a custom file id.\n     * The stream's 'id' property contains the resulting file's id.\n     * @param id A custom id used to identify the file.\n     * @param filename The value of the 'filename' key in the files doc.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#openUploadStreamWithId\n     */\n    openUploadStreamWithId(id: string | number | Object, filename: string, options?: GridFSBucketOpenUploadStreamOptions): GridFSBucketWriteStream;\n\n    /**\n     * Renames the file with the given _id to the given string.\n     * @param id the id of the file to rename.\n     * @param filename new name for the file.\n     * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#rename\n     */\n    rename(id: ObjectID, filename: string, callback?: GridFSBucketErrorCallback): void;\n}\n\n/**\n * Constructor for a streaming GridFS interface.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html\n */\nexport interface GridFSBucketOptions {\n\n    /**\n     * The 'files' and 'chunks' collections will be prefixed with the bucket name followed by a dot.\n     */\n    bucketName?: string;\n\n    /**\n     * Number of bytes stored in each chunk. Defaults to 255KB.\n     */\n    chunkSizeBytes?: number;\n\n    /**\n     * Optional write concern to be passed to write operations, for instance { w: 1 }.\n     */\n    writeConcern?: Object;\n\n    /**\n     * Optional read preference to be passed to read operations.\n     */\n    ReadPreference?: Object;\n}\n\n/**\n * GridFSBucketErrorCallback.\n * @param err An error instance representing any errors that occurred.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#~errorCallback\n */\nexport interface GridFSBucketErrorCallback {\n    (err?: MongoError): void;\n}\n\n/**\n * GridFSBucketFindOptions.\n * @see http://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#find\n */\nexport interface GridFSBucketFindOptions {\n\n    /**\n     * Optional batch size for cursor.\n     */\n    batchSize?: number;\n\n    /**\n     * Optional limit for cursor.\n     */\n    limit?: number;\n\n    /**\n     * Optional maxTimeMS for cursor.\n     */\n    maxTimeMS?: number;\n\n    /**\n     * Optionally set cursor's noCursorTimeout flag.\n     */\n    noCursorTimeout?: boolean;\n\n    /**\n     * Optional skip for cursor.\n     */\n    skip?: number;\n\n    /**\n     * Optional sort for cursor.\n     */\n    sort?: Object;\n}\n\n/**\n * GridFSBucketOpenUploadStreamOptions.\n * @see https://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucket.html#openUploadStream\n */\nexport interface GridFSBucketOpenUploadStreamOptions {\n\n    /**\n     * Optional overwrite this bucket's chunkSizeBytes for this file.\n     */\n    chunkSizeBytes?: number;\n\n    /**\n     * Optional object to store in the file document's metadata field.\n     */\n    metadata?: Object;\n\n    /**\n     * Optional string to store in the file document's contentType field.\n     */\n    contentType?: string;\n\n    /**\n     * Optional array of strings to store in the file document's aliases field.\n     */\n    aliases?: Array<string>;\n}\n\n/**\n * GridFSBucketReadStream.\n * @see https://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucketReadStream.html\n */\nexport declare class GridFSBucketReadStream extends Readable {\n\n    /**\n     *\n     * @param chunks Handle for chunks collection.\n     * @param files Handle for files collection.\n     * @param readPreference The read preference to use.\n     * @param filter The query to use to find the file document.\n     * @param options Optional settings.\n     */\n    constructor(chunks: Collection, files: Collection, readPreference: Object, filter: Object, options?: GridFSBucketReadStreamOptions);\n}\n\n/**\n * GridFSBucketReadStreamOptions.\n * @see https://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucketReadStream.html\n */\nexport interface GridFSBucketReadStreamOptions {\n\n    /**\n     * Optional sort for the file find query.\n     */\n    sort?: number;\n\n    /**\n     * Optional skip for the file find query.\n     */\n    skip?: number;\n\n    /**\n     * Optional 0-based offset in bytes to start streaming from.\n     */\n    start?: number;\n\n    /**\n     * Optional 0-based offset in bytes to stop streaming before.\n     */\n    end?: number;\n}\n\n/**\n * GridFSBucketWriteStream\n * @see https://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucketWriteStream.html\n */\nexport declare class GridFSBucketWriteStream extends Writable {\n\n    /**\n     *\n     * @param bucket Handle for this stream's corresponding bucket.\n     * @param filename The value of the 'filename' key in the files doc.\n     * @param options Optional settings.\n     */\n    constructor(bucket: GridFSBucket, filename: string, options?: GridFSBucketWriteStreamOptions);\n}\n\n/**\n * GridFSBucketWriteStreamOptions.\n * @see https://mongodb.github.io/node-mongodb-native/2.1/api/GridFSBucketWriteStream.html\n */\nexport interface GridFSBucketWriteStreamOptions {\n\n    /**\n     * Custom file id for the GridFS file.\n     */\n    id?: string | number | Object;\n\n    /**\n     * The chunk size to use, in bytes.\n     */\n    chunkSizeBytes?: number;\n\n    /**\n     * The write concern.\n     */\n    w?: number;\n\n    /**\n     * The write concern timeout.\n     */\n    wtimeout?: number;\n\n    /**\n     * The journal write concern.\n     */\n    j?: number;\n}","import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    Db,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"./typings\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {MongoEntityManager} from \"../../entity-manager/MongoEntityManager\";\n\n/**\n * Runs queries on a single MongoDB connection.\n */\nexport class MongoQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: MongoEntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     * Always false for mongodb since mongodb has a single query executor instance.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is active in this query executor.\n     * Always false for mongodb since mongodb does not support transactions.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    databaseConnection: Db;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection, databaseConnection: Db) {\n        this.connection = connection;\n        this.databaseConnection = databaseConnection;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    cursor(collectionName: string, query?: ObjectLiteral): Cursor<any> {\n        return this.getCollection(collectionName).find(query || {});\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate(collectionName: string, pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<any> {\n        return this.getCollection(collectionName).aggregate(pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    async bulkWrite(collectionName: string, operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        return await this.getCollection(collectionName).bulkWrite(operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    async count(collectionName: string, query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        return await this.getCollection(collectionName).count(query || {}, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    async createCollectionIndex(collectionName: string, fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        return await this.getCollection(collectionName).createIndex(fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error. Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    async createCollectionIndexes(collectionName: string, indexSpecs: ObjectLiteral[]): Promise<void> {\n        return await this.getCollection(collectionName).createIndexes(indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    async deleteMany(collectionName: string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return await this.getCollection(collectionName).deleteMany(query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    async deleteOne(collectionName: string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return await this.getCollection(collectionName).deleteOne(query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    async distinct(collectionName: string, key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        return await this.getCollection(collectionName).distinct(key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    async dropCollectionIndex(collectionName: string, indexName: string, options?: CollectionOptions): Promise<any> {\n        return await this.getCollection(collectionName).dropIndex(indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    async dropCollectionIndexes(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).dropIndexes();\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndDelete(collectionName: string, query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndDelete(query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndReplace(collectionName: string, query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndReplace(query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndUpdate(collectionName: string, query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndUpdate(query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    async geoHaystackSearch(collectionName: string, x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        return await this.getCollection(collectionName).geoHaystackSearch(x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    async geoNear(collectionName: string, x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        return await this.getCollection(collectionName).geoNear(x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    async group(collectionName: string, keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        return await this.getCollection(collectionName).group(keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    async collectionIndexes(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).indexes();\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    async collectionIndexExists(collectionName: string, indexes: string|string[]): Promise<boolean> {\n        return await this.getCollection(collectionName).indexExists(indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    async collectionIndexInformation(collectionName: string, options?: { full: boolean }): Promise<any> {\n        return await this.getCollection(collectionName).indexInformation(options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp(collectionName: string, options?: CollectionOptions): OrderedBulkOperation {\n        return this.getCollection(collectionName).initializeOrderedBulkOp(options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp(collectionName: string, options?: CollectionOptions): UnorderedBulkOperation {\n        return this.getCollection(collectionName).initializeUnorderedBulkOp(options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    async insertMany(collectionName: string, docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        return await this.getCollection(collectionName).insertMany(docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    async insertOne(collectionName: string, doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        return await this.getCollection(collectionName).insertOne(doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    async isCapped(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).isCapped();\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes(collectionName: string, options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        return this.getCollection(collectionName).listIndexes(options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    async mapReduce(collectionName: string, map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        return await this.getCollection(collectionName).mapReduce(map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    async parallelCollectionScan(collectionName: string, options?: ParallelCollectionScanOptions): Promise<Cursor<any>[]> {\n        return await this.getCollection(collectionName).parallelCollectionScan(options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    async reIndex(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).reIndex();\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    async rename(collectionName: string, newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        return await this.getCollection(collectionName).rename(newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    async replaceOne(collectionName: string, query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).replaceOne(query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    async stats(collectionName: string, options?: { scale: number }): Promise<CollStats> {\n        return await this.getCollection(collectionName).stats(options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    async updateMany(collectionName: string, query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).updateMany(query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    async updateOne(collectionName: string, query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).updateOne(query, update, options);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods (from QueryRunner)\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes all collections from the currently connected database.\n     * Be careful with using this method and avoid using it in production or migrations\n     * (because it can clear all your database).\n     */\n    async clearDatabase(): Promise<void> {\n        await this.databaseConnection.dropDatabase();\n    }\n\n    /**\n     * For MongoDB database we don't create connection, because its single connection already created by a driver.\n     */\n    async connect(): Promise<any> {\n    }\n\n    /**\n     * For MongoDB database we don't release connection, because its single connection.\n     */\n    async release(): Promise<void> {\n        // releasing connection are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Commits transaction.\n     */\n    async commitTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Rollbacks transaction.\n     */\n    async rollbackTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        throw new Error(`Executing SQL query is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        throw new Error(`Stream is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of inserted object id.\n     */\n    async insert(collectionName: string, keyValues: ObjectLiteral): Promise<any> {\n        const results = await this.databaseConnection\n            .collection(collectionName)\n            .insertOne(keyValues);\n        const generatedMap = this.connection.getMetadata(collectionName).objectIdColumn!.createValueMap(results.insertedId);\n        return {\n            result: results,\n            generatedMap: generatedMap\n        };\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(collectionName: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        await this.databaseConnection\n            .collection(collectionName)\n            .updateOne(conditions, valuesMap);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(collectionName: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        if (typeof conditions === \"string\")\n            throw new Error(`String condition is not supported by MongoDB driver.`);\n\n        await this.databaseConnection\n            .collection(collectionName)\n            .deleteOne(conditions);\n    }\n\n    /**\n     * Inserts rows into the closure table.\n     */\n    async insertIntoClosureTable(collectionName: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(collectionName: string): Promise<Table|undefined> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(collectionNames: string[]): Promise<Table[]> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n        //          .            \n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        throw new Error(`Check database queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(collectionName: string): Promise<boolean> {\n        throw new Error(`Check schema queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        throw new Error(`Database create queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemas: string[]): Promise<void[]> {\n        throw new Error(`Schema create queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new table from the given table and columns inside it.\n     */\n    async createTable(table: Table): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops the table.\n     */\n    async dropTable(tableName: string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(collectionName: string, columnName: string): Promise<boolean> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrName: Table|string, column: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(table: Table): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(collectionName: string, index: TableIndex): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(collectionName: string, indexName: string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops collection.\n     */\n    async truncate(collectionName: string): Promise<void> {\n        await this.databaseConnection\n            .dropCollection(collectionName);\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql():  (string|{ up: string, down: string })[] {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets collection from the database with a given name.\n     */\n    protected getCollection(collectionName: string): Collection {\n        return this.databaseConnection.collection(collectionName);\n    }\n\n}","/**\n * Table type. Tables can be abstract, closure, junction, embedded, etc.\n */\nexport type TableType = \"regular\"|\"abstract\"|\"junction\"|\"closure\"|\"closure-junction\"|\n    \"embeddable\"|\"single-table-child\"|\"class-table-child\";\n","import {TableType} from \"../metadata/types/TableTypes\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\n\nexport interface EntitySchemaTable {\n    \n    /**\n     * Table name.\n     */\n    name?: string;\n\n    /**\n     * Table type.\n     */\n    type?: TableType;\n\n    /**\n     * Specifies a property name by which queries will perform ordering by default when fetching rows.\n     */\n    orderBy?: OrderByCondition;\n\n}","export interface EntitySchemaIndex {\n\n    /**\n     * Index column names.\n     */\n    columns: string[];\n\n    /**\n     * Indicates if this index must be unique or not.\n     */\n    unique: boolean;\n\n    /**\n     * If true, the index only references documents with the specified field.\n     * These indexes use less space but behave differently in some situations (particularly sorts).\n     * This option is only supported for mongodb database.\n     */\n    sparse?: boolean;\n\n}    ","import {ColumnType} from \"../driver/types/ColumnTypes\";\n\nexport interface EntitySchemaColumn {\n    \n    /**\n     * Indicates if this column is a primary column.\n     */\n    primary?: boolean;\n\n    /**\n     * Indicates if this column is a created date column.\n     */\n    createDate?: boolean;\n\n    /**\n     * Indicates if this column is an update date column.\n     */\n    updateDate?: boolean;\n\n    /**\n     * Indicates if this column is a version column.\n     */\n    version?: boolean;\n\n    /**\n     * Indicates if this column is a treeChildrenCount column.\n     */\n    treeChildrenCount?: boolean;\n\n    /**\n     * Indicates if this column is a treeLevel column.\n     */\n    treeLevel?: boolean;\n\n    /**\n     * Column type. Must be one of the value from the ColumnTypes class.\n     */\n    type: ColumnType;\n\n    /**\n     * Column name in the database.\n     */\n    name?: string;\n\n    /**\n     * Column type's length. For example type = \"string\" and length = 100 means that ORM will create a column with\n     * type varchar(100).\n     */\n    length?: string | number;\n\n    /**\n     * Specifies if this column will use AUTO_INCREMENT or not (e.g. generated number).\n     */\n    generated?: true | \"increment\" | \"uuid\";\n\n    /**\n     * Specifies if column's value must be unique or not.\n     */\n    unique?: boolean;\n\n    /**\n     * Indicates if column's value can be set to NULL.\n     */\n    nullable?: boolean;\n\n    /**\n     * Extra column definition. Should be used only in emergency situations. Note that if you'll use this property\n     * auto schema generation will not work properly anymore. Avoid using it.\n     */\n    columnDefinition?: string;\n\n    /**\n     * Column comment.\n     */\n    comment?: string;\n\n    /**\n     * Default database value.\n     */\n    default?: string;\n\n    /**\n     * The precision for a decimal (exact numeric) column (applies only for decimal column), which is the maximum\n     * number of digits that are stored for the values.\n     */\n    precision?: number;\n\n    /**\n     * The scale for a decimal (exact numeric) column (applies only for decimal column), which represents the number\n     * of digits to the right of the decimal point and must not be greater than precision.\n     */\n    scale?: number;\n\n    /**\n     * Column collation. Note that not all databases support it.\n     */\n    collation?: string; // todo: looks like this is not used\n\n}","/**\n * Describes column options.\n */\nexport interface JoinColumnOptions {\n\n    /**\n     * Name of the column.\n     */\n    name?: string;\n\n    /**\n     * Name of the column in the entity to which this column is referenced.\n     */\n    referencedColumnName?: string; // TODO rename to referencedColumn\n\n}","import {JoinColumnOptions} from \"./JoinColumnOptions\";\n\n/**\n * Describes all relation's options.\n */\nexport interface JoinTableMultipleColumnsOptions {\n\n    /**\n     * Name of the table that will be created to store values of the both tables (join table).\n     * By default is auto generated.\n     */\n    name?: string;\n\n    /**\n     * First column of the join table.\n     */\n    joinColumns?: JoinColumnOptions[];\n\n    /**\n     * Second (inverse) column of the join table.\n     */\n    inverseJoinColumns?: JoinColumnOptions[];\n\n    /**\n     * Database where join table will be created.\n     * Works only in some databases (like mysql and mssql).\n     */\n    database?: string;\n\n    /**\n     * Schema where join table will be created.\n     * Works only in some databases (like postgres and mssql).\n     */\n    schema?: string;\n\n}","import {JoinColumnOptions} from \"../decorator/options/JoinColumnOptions\";\nimport {RelationType} from \"../metadata/types/RelationTypes\";\nimport {JoinTableMultipleColumnsOptions} from \"../decorator/options/JoinTableMuplipleColumnsOptions\";\nimport {OnDeleteType} from \"../metadata/types/OnDeleteType\";\n\nexport interface EntitySchemaRelation {\n\n    /**\n     * Indicates with which entity this relation is made.\n     */\n    target: Function | string;\n\n    /**\n     * Type of relation. Can be one of the value of the RelationTypes class.\n     */\n    type: RelationType;\n\n    /**\n     * Inverse side of the relation.\n     */\n    inverseSide?: string;\n\n    /**\n     * Indicates if this relation will be lazily loaded.\n     */\n    isLazy?: boolean;\n\n    /**\n     * Join table options of this column. If set to true then it simply means that it has a join table.\n     */\n    joinTable?: boolean | JoinColumnOptions | JoinTableMultipleColumnsOptions;\n\n    /**\n     * Join column options of this column. If set to true then it simply means that it has a join column.\n     */\n    joinColumn?: boolean | {\n\n        /**\n         * Name of the column.\n         */\n        name?: string;\n\n        /**\n         * Name of the column in the entity to which this column is referenced.\n         */\n        referencedColumnName?: string;\n    };\n\n    /**\n     * Indicates if this is a parent (can be only many-to-one relation) relation in the tree tables.\n     */\n    isTreeParent?: boolean;\n\n    /**\n     * Indicates if this is a children (can be only one-to-many relation) relation in the tree tables.\n     */\n    isTreeChildren?: boolean;\n\n    /**\n     * If set to true then it means that related object can be allowed to be inserted / updated / removed to the db.\n     * This is option a shortcut if you would like to set cascadeInsert, cascadeUpdate and cascadeRemove to true.\n     */\n    cascadeAll?: boolean;\n\n    /**\n     * If set to true then it means that related object can be allowed to be inserted to the db.\n     */\n    cascadeInsert?: boolean;\n\n    /**\n     * If set to true then it means that related object can be allowed to be updated in the db.\n     */\n    cascadeUpdate?: boolean;\n\n    /**\n     * If set to true then it means that related object can be allowed to be remove from the db.\n     */\n    cascadeRemove?: boolean;\n\n    /**\n     * Default database value.\n     */\n    default?: any;\n\n    /**\n     * Indicates if relation column value can be nullable or not.\n     */\n    nullable?: boolean;\n\n    /**\n     * Database cascade action on delete.\n     */\n    onDelete?: OnDeleteType;\n\n}","import {EntitySchemaTable} from \"./EntitySchemaTable\";\nimport {EntitySchemaIndex} from \"./EntitySchemaIndex\";\nimport {EntitySchemaColumn} from \"./EntitySchemaColumn\";\nimport {EntitySchemaRelation} from \"./EntitySchemaRelation\";\n\n/**\n * Interface for entity metadata mappings stored inside \"schemas\" instead of models decorated by decorators.\n */\nexport interface EntitySchema { // todo: make it-to-date\n\n    /**\n     * Name of the schema it extends.\n     */\n    extends?: string;\n\n    /**\n     * Target bind to this entity schema. Optional.\n     */\n    target?: Function;\n\n    /**\n     * Entity name.\n     */\n    name: string;\n\n    /**\n     * Entity table's options.\n     */\n    table?: EntitySchemaTable;\n\n    /**\n     * Entity column's options.\n     */\n    columns: {\n        [columnName: string]: EntitySchemaColumn \n    };\n\n    /**\n     * Entity relation's options.\n     */\n    relations?: {\n        [relationName: string]: EntitySchemaRelation;\n    };\n\n    /**\n    * Entity indices options.\n    */\n    indices?: {\n        [indexName: string]: EntitySchemaIndex;\n    };\n\n}","/**\n * Logging options.\n */\nexport type LoggerOptions = boolean|\"all\"|(\"query\"|\"schema\"|\"error\"|\"warn\"|\"info\"|\"log\"|\"migration\")[];\n","/**\n * Database type.\n */\nexport type DatabaseType =\n    \"mysql\"|\n    \"postgres\"|\n    \"mariadb\"|\n    \"sqlite\"|\n    \"cordova\"|\n    \"sqljs\"|\n    \"oracle\"|\n    \"mssql\"|\n    \"websql\"|\n    \"mongodb\";\n","import {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * Performs logging of the events in TypeORM.\n */\nexport interface Logger {\n\n    /**\n     * Logs query and parameters used in it.\n     */\n    logQuery(query: string, parameters?: any[], queryRunner?: QueryRunner): any;\n\n    /**\n     * Logs query that is failed.\n     */\n    logQueryError(error: string, query: string, parameters?: any[], queryRunner?: QueryRunner): any;\n\n    /**\n     * Logs query that is slow.\n     */\n    logQuerySlow(time: number, query: string, parameters?: any[], queryRunner?: QueryRunner): any;\n\n    /**\n     * Logs events from the schema build process.\n     */\n    logSchemaBuild(message: string, queryRunner?: QueryRunner): any;\n\n    /**\n     * Logs events from the migrations run process.\n     */\n    logMigration(message: string, queryRunner?: QueryRunner): any;\n\n    /**\n     * Perform logging using given logger, or by default to the console.\n     * Log has its own level and message.\n     */\n    log(level: \"log\"|\"info\"|\"warn\", message: any, queryRunner?: QueryRunner): any;\n\n}","import {EntitySchema} from \"../entity-schema/EntitySchema\";\nimport {LoggerOptions} from \"../logger/LoggerOptions\";\nimport {NamingStrategyInterface} from \"../naming-strategy/NamingStrategyInterface\";\nimport {DatabaseType} from \"../driver/types/DatabaseType\";\nimport {Logger} from \"../logger/Logger\";\n\n/**\n * BaseConnectionOptions is set of connection options shared by all database types.\n */\nexport interface BaseConnectionOptions {\n\n    /**\n     * Database type. This value is required.\n     */\n    readonly type: DatabaseType;\n\n    /**\n     * Connection name. If connection name is not given then it will be called \"default\".\n     * Different connections must have different names.\n     */\n    readonly name?: string;\n\n    /**\n     * Entities to be loaded for this connection.\n     * Accepts both entity classes and directories where from entities need to be loaded.\n     * Directories support glob patterns.\n     */\n    readonly entities?: Function[]|string[];\n\n    /**\n     * Subscribers to be loaded for this connection.\n     * Accepts both subscriber classes and directories where from subscribers need to be loaded.\n     * Directories support glob patterns.\n     */\n    readonly subscribers?: Function[]|string[];\n\n    /**\n     * Entity schemas to be loaded for this connection.\n     * Accepts both entity schema classes and directories where from entity schemas need to be loaded.\n     * Directories support glob patterns.\n     */\n    readonly entitySchemas?: EntitySchema[]|string[];\n\n    /**\n     * Migrations to be loaded for this connection.\n     * Accepts both migration classes and directories where from migrations need to be loaded.\n     * Directories support glob patterns.\n     */\n    readonly migrations?: Function[]|string[];\n\n    /**\n     * Naming strategy to be used to name tables and columns in the database.\n     */\n    readonly namingStrategy?: NamingStrategyInterface;\n\n    /**\n     * Logging options.\n     */\n    readonly logging?: LoggerOptions;\n\n    /**\n     * Logger instance used to log queries and events in the ORM.\n     */\n    readonly logger?: \"advanced-console\"|\"simple-console\"|\"file\"|\"debug\"|Logger;\n\n    /**\n     * Maximum number of milliseconds query should be executed before logger log a warning.\n     */\n    readonly maxQueryExecutionTime?: number;\n\n    /**\n     * Indicates if database schema should be auto created on every application launch.\n     * Be careful with this option and don't use this in production - otherwise you can lose production data.\n     * This option is useful during debug and development.\n     * Alternative to it, you can use CLI and run schema:sync command.\n     *\n     * Note that for MongoDB database it does not create schema, because MongoDB is schemaless.\n     * Instead, it syncs just by creating indices.\n     */\n    readonly synchronize?: boolean;\n\n    /**\n     * Indicates if migrations should be auto run on every application launch.\n     * Alternative to it, you can use CLI and run migrations:run command.\n     */\n    readonly migrationsRun?: boolean;\n\n    /**\n     * Drops the schema each time connection is being established.\n     * Be careful with this option and don't use this in production - otherwise you'll lose all production data.\n     * This option is useful during debug and development.\n     */\n    readonly dropSchema?: boolean;\n\n    /**\n     * Prefix to use on all tables (collections) of this connection in the database.\n     */\n    readonly entityPrefix?: string;\n\n    /**\n     * Extra connection options to be passed to the underlying driver.\n     *\n     * todo: deprecate this and move all database-specific types into hts own connection options object.\n     */\n    readonly extra?: any;\n\n    /**\n     * Allows to setup cache options.\n     */\n    readonly cache?: boolean|{\n\n        /**\n         * Type of caching.\n         *\n         * - \"database\" means cached values will be stored in the separate table in database. This is default value.\n         * - \"redis\" means cached values will be stored inside redis. You must provide redis connection options.\n         */\n        readonly type?: \"database\"|\"redis\"; // todo: add mongodb and other cache providers as well in the future\n\n        /**\n         * Used to provide redis connection options.\n         */\n        readonly options?: any;\n\n        /**\n         * If set to true then queries (using find methods and QueryBuilder's methods) will always be cached.\n         */\n        readonly alwaysEnabled?: boolean;\n\n        /**\n         * Time in milliseconds in which cache will expire.\n         * This can be setup per-query.\n         * Default value is 1000 which is equivalent to 1 second.\n         */\n        readonly duration?: number;\n\n    };\n\n    /**\n     * CLI settings.\n     */\n    readonly cli?: {\n\n        /**\n         * Directory where entities should be created by default.\n         */\n        readonly entitiesDir?: string;\n\n        /**\n         * Directory where migrations should be created by default.\n         */\n        readonly migrationsDir?: string;\n\n        /**\n         * Directory where subscribers should be created by default.\n         */\n        readonly subscribersDir?: string;\n\n    };\n\n}\n","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\nimport {ReadPreference} from \"./typings\";\n\n/**\n * MongoDB specific connection options.\n */\nexport interface MongoConnectionOptions extends BaseConnectionOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"mongodb\";\n\n    /**\n     * Connection url where perform connection to.\n     */\n    readonly url?: string;\n\n    /**\n     * Database host.\n     */\n    readonly host?: string;\n\n    /**\n     * Database host port.\n     */\n    readonly port?: number;\n\n    /**\n     * Database username.\n     */\n    readonly username?: string;\n    \n    /**\n     * Database password.\n     */\n    readonly password?: string;\n\n    /**\n     * Database name to connect to.\n     */\n    readonly database?: string;\n\n    /**\n     * Set the maximum poolSize for each individual server or proxy connection.\n     */\n    readonly poolSize?: number;\n\n    /**\n     * Use ssl connection (needs to have a mongod server with ssl support). Default: false\n     */\n    readonly ssl?: boolean;\n\n    /**\n     * Validate mongod server certificate against ca (needs to have a mongod server with ssl support, 2.4 or higher).\n     * Default: true\n     */\n    readonly sslValidate?: boolean;\n\n    /**\n     * Array of valid certificates either as Buffers or Strings\n     * (needs to have a mongod server with ssl support, 2.4 or higher).\n     */\n    readonly sslCA?: string[]|Buffer[];\n\n    /**\n     * String or buffer containing the certificate we wish to present\n     * (needs to have a mongod server with ssl support, 2.4 or higher)\n     */\n    readonly sslCert?: string|Buffer;\n\n    /**\n     * String or buffer containing the certificate private key we wish to present\n     * (needs to have a mongod server with ssl support, 2.4 or higher)\n     */\n    readonly sslKey?: string|Buffer;\n\n    /**\n     * String or buffer containing the certificate password\n     * (needs to have a mongod server with ssl support, 2.4 or higher)\n     */\n    readonly sslPass?: string|Buffer;\n\n    /**\n     * Reconnect on error. Default: true\n     */\n    readonly autoReconnect?: boolean;\n\n    /**\n     * TCP Socket NoDelay option. Default: true\n     */\n    readonly noDelay?: boolean;\n\n    /**\n     * The number of milliseconds to wait before initiating keepAlive on the TCP socket. Default: 30000\n     */\n    readonly keepAlive?: number;\n\n    /**\n     * TCP Connection timeout setting. Default: 30000\n     */\n    readonly connectTimeoutMS?: number;\n\n    /**\n     * TCP Socket timeout setting. Default: 360000\n     */\n    readonly socketTimeoutMS?: number;\n\n    /**\n     * Server attempt to reconnect #times. Default 30\n     */\n    readonly reconnectTries?: number;\n\n    /**\n     * Server will wait #milliseconds between retries. Default 1000\n     */\n    readonly reconnectInterval?: number;\n\n    /**\n     * Turn on high availability monitoring. Default true\n     */\n    readonly ha?: boolean;\n\n    /**\n     * Time between each replicaset status check. Default: 10000,5000\n     */\n    readonly haInterval?: number;\n\n    /**\n     * The name of the replicaset to connect to\n     */\n    readonly replicaSet?: string;\n\n    /**\n     * Sets the range of servers to pick when using NEAREST (lowest ping ms + the latency fence, ex: range of 1 to (1 + 15) ms).\n     * Default: 15\n     */\n    readonly acceptableLatencyMS?: number;\n\n    /**\n     * Sets the range of servers to pick when using NEAREST (lowest ping ms + the latency fence, ex: range of 1 to (1 + 15) ms).\n     * Default: 15\n     */\n    readonly secondaryAcceptableLatencyMS?: number;\n\n    /**\n     * Sets if the driver should connect even if no primary is available. Default: false\n     */\n    readonly connectWithNoPrimary?: boolean;\n\n    /**\n     * If the database authentication is dependent on another databaseName.\n     */\n    readonly authSource?: string;\n\n    /**\n     * The write concern.\n     */\n    readonly w?: string|number;\n\n    /**\n     * The write concern timeout value.\n     */\n    readonly wtimeout?: number;\n\n    /**\n     * Specify a journal write concern. Default: false\n     */\n    readonly j?: boolean;\n\n    /**\n     * Force server to assign _id values instead of driver. Default: false\n     */\n    readonly forceServerObjectId?: boolean;\n\n    /**\n     * Serialize functions on any object. Default: false\n     */\n    readonly serializeFunctions?: boolean;\n\n    /**\n     * Specify if the BSON serializer should ignore undefined fields. Default: false\n     */\n    readonly ignoreUndefined?: boolean;\n\n    /**\n     * Return document results as raw BSON buffers. Default: false\n     */\n    readonly raw?: boolean;\n\n    /**\n     * Promotes Long values to number if they fit inside the 53 bits resolution. Default: true\n     */\n    readonly promoteLongs?: boolean;\n\n    /**\n     * Promotes Binary BSON values to native Node Buffers. Default: false\n     */\n    readonly promoteBuffers?: boolean;\n\n    /**\n     * Promotes BSON values to native types where possible, set to false to only receive wrapper types. Default: true\n     */\n    readonly promoteValues?: boolean;\n\n    /**\n     * Enable the wrapping of the callback in the current domain, disabled by default to avoid perf hit. Default: false\n     */\n    readonly domainsEnabled?: boolean;\n\n    /**\n     * Sets a cap on how many operations the driver will buffer up before giving up on getting a working connection,\n     * default is -1 which is unlimited.\n     */\n    readonly bufferMaxEntries?: boolean;\n\n    /**\n     * The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY,\n     * ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n     */\n    readonly readPreference?: ReadPreference;\n\n    /**\n     * A primary key factory object for generation of custom _id keys.\n     */\n    readonly pkFactory?: any;\n\n    /**\n     * A Promise library class the application wishes to use such as Bluebird, must be ES6 compatible.\n     */\n    readonly promiseLibrary?: any;\n\n    /**\n     * Specify a read concern for the collection. (only MongoDB 3.2 or higher supported).\n     */\n    readonly readConcern?: any;\n\n    /**\n     * Specify a maxStalenessSeconds value for secondary reads, minimum is 90 seconds\n     */\n    readonly maxStalenessSeconds?: number;\n\n    /**\n     * Specify the log level used by the driver logger (error/warn/info/debug).\n     */\n    readonly loggerLevel?: \"error\"|\"warn\"|\"info\"|\"debug\";\n\n}","import {ColumnType} from \"./ColumnTypes\";\n\n/**\n * Orm has special columns and we need to know what database column types should be for those types.\n * Column types are driver dependant.\n */\nexport interface MappedColumnTypes {\n\n    /**\n     * Column type for the create date column.\n     */\n    createDate: ColumnType;\n\n    /**\n     * Precision of datetime column. Used in MySql to define milliseconds.\n     */\n    createDatePrecision?: number;\n\n    /**\n     * Default value should be used by a database for \"created date\" column.\n     */\n    createDateDefault: string;\n\n    /**\n     * Column type for the update date column.\n     */\n    updateDate: ColumnType;\n\n    /**\n     * Precision of datetime column. Used in MySql to define milliseconds.\n     */\n    updateDatePrecision?: number;\n\n    /**\n     * Default value should be used by a database for \"updated date\" column.\n     */\n    updateDateDefault: string;\n\n    /**\n     * Column type for the version column.\n     */\n    version: ColumnType;\n\n    /**\n     * Column type for the tree level column.\n     */\n    treeLevel: ColumnType;\n\n    /**\n     * Column type of timestamp column used for migrations table.\n     */\n    migrationTimestamp: ColumnType;\n\n    /**\n     * Column type for migration name column used for migrations table.\n     */\n    migrationName: ColumnType;\n\n    /**\n     * Column type for identifier column in query result cache table.\n     */\n    cacheId: ColumnType;\n\n    /**\n     * Column type for identifier column in query result cache table.\n     */\n    cacheIdentifier: ColumnType;\n\n    /**\n     * Column type for time column in query result cache table.\n     */\n    cacheTime: ColumnType;\n\n    /**\n     * Column type for duration column in query result cache table.\n     */\n    cacheDuration: ColumnType;\n\n    /**\n     * Column type for query column in query result cache table.\n     */\n    cacheQuery: ColumnType;\n\n    /**\n     * Column type for result column in query result cache table.\n     */\n    cacheResult: ColumnType;\n\n}","/**\n * Creates complete tables schemas in the database based on the entity metadatas.\n */\nexport interface SchemaBuilder {\n\n    /**\n     * Creates complete schemas for the given entity metadatas.\n     */\n    build(): Promise<void>;\n\n    /**\n     * Returns queries to be executed by schema builder.\n     */\n    log(): Promise<(string|{ up: string, down: string })[]>;\n\n}","import {Connection} from \"../connection/Connection\";\nimport {SchemaBuilder} from \"./SchemaBuilder\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\n\n/**\n * Creates complete tables schemas in the database based on the entity metadatas.\n *\n * Steps how schema is being built:\n * 1. load list of all tables with complete column and keys information from the db\n * 2. drop all (old) foreign keys that exist in the table, but does not exist in the metadata\n * 3. create new tables that does not exist in the db, but exist in the metadata\n * 4. drop all columns exist (left old) in the db table, but does not exist in the metadata\n * 5. add columns from metadata which does not exist in the table\n * 6. update all exist columns which metadata has changed\n * 7. update primary keys - update old and create new primary key from changed columns\n * 8. create foreign keys which does not exist in the table yet\n * 9. create indices which are missing in db yet, and drops indices which exist in the db, but does not exist in the metadata anymore\n */\nexport class MongoSchemaBuilder implements SchemaBuilder {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates complete schemas for the given entity metadatas.\n     */\n    async build(): Promise<void> {\n        const queryRunner = (this.connection.driver as MongoDriver).createQueryRunner();\n        const promises: Promise<any>[] = [];\n        this.connection.entityMetadatas.forEach(metadata => {\n            metadata.indices.forEach(index => {\n                const options = { name: index.name, unique: index.isUnique, sparse: index.isSparse };\n                promises.push(queryRunner.createCollectionIndex(metadata.tableName, index.columnNamesWithOrderingMap, options));\n            });\n        });\n        await Promise.all(promises);\n    }\n\n    /**\n     * Returns query to be executed by schema builder.\n     */\n    log(): Promise<(string|{ up: string, down: string })[]> {\n        return Promise.resolve([]);\n    }\n\n}","export interface DataTypeDefaults {\n    [type: string]: {\n        length?: number;\n        precision?: number;\n        scale?: number;\n    };\n}","/**\n * MySQL specific connection credential options.\n *\n * @see https://github.com/mysqljs/mysql#connection-options\n */\nexport interface MysqlConnectionCredentialsOptions {\n\n    /**\n     * Connection url where perform connection to.\n     */\n    readonly url?: string;\n\n    /**\n     * Database host.\n     */\n    readonly host?: string;\n\n    /**\n     * Database host port.\n     */\n    readonly port?: number;\n\n    /**\n     * Database username.\n     */\n    readonly username?: string;\n\n    /**\n     * Database password.\n     */\n    readonly password?: string;\n\n    /**\n     * Database name to connect to.\n     */\n    readonly database?: string;\n\n    /**\n     * Object with ssl parameters or a string containing name of ssl profile.\n     */\n    readonly ssl?: any;\n\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\nimport {MysqlConnectionCredentialsOptions} from \"./MysqlConnectionCredentialsOptions\";\n\n/**\n * MySQL specific connection options.\n *\n * @see https://github.com/mysqljs/mysql#connection-options\n */\nexport interface MysqlConnectionOptions extends BaseConnectionOptions, MysqlConnectionCredentialsOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"mysql\"|\"mariadb\";\n\n    /**\n     * The charset for the connection. This is called \"collation\" in the SQL-level of MySQL (like utf8_general_ci).\n     * If a SQL-level charset is specified (like utf8mb4) then the default collation for that charset is used.\n     * Default: 'UTF8_GENERAL_CI'\n     */\n    readonly charset?: string;\n\n    /**\n     * The timezone configured on the MySQL server.\n     * This is used to type cast server date/time values to JavaScript Date object and vice versa.\n     * This can be 'local', 'Z', or an offset in the form +HH:MM or -HH:MM. (Default: 'local')\n     */\n    readonly timezone?: string;\n\n    /**\n     * The milliseconds before a timeout occurs during the initial connection to the MySQL server. (Default: 10000)\n     */\n    readonly connectTimeout?: number;\n\n    /**\n     * Allow connecting to MySQL instances that ask for the old (insecure) authentication method. (Default: false)\n     */\n    readonly insecureAuth?: boolean;\n\n    /**\n     * When dealing with big numbers (BIGINT and DECIMAL columns) in the database, you should enable this option (Default: false)\n     */\n    readonly supportBigNumbers?: boolean;\n\n    /**\n     * Enabling both supportBigNumbers and bigNumberStrings forces big numbers (BIGINT and DECIMAL columns) to be always\n     * returned as JavaScript String objects (Default: false). Enabling supportBigNumbers but leaving bigNumberStrings\n     * disabled will return big numbers as String objects only when they cannot be accurately represented with\n     * [JavaScript Number objects](http://ecma262-5.com/ELS5_HTML.htm#Section_8.5) (which happens when they exceed the [-2^53, +2^53] range),\n     * otherwise they will be returned as Number objects. This option is ignored if supportBigNumbers is disabled.\n     */\n    readonly bigNumberStrings?: boolean;\n\n    /**\n     * Force date types (TIMESTAMP, DATETIME, DATE) to be returned as strings rather then inflated into JavaScript Date objects.\n     * Can be true/false or an array of type names to keep as strings.\n     */\n    readonly dateStrings?: boolean|string[];\n\n    /**\n     * Prints protocol details to stdout. Can be true/false or an array of packet type names that should be printed.\n     * (Default: false)\n     */\n    readonly debug?: boolean|string[];\n\n    /**\n     * Generates stack traces on Error to include call site of library entrance (\"long stack traces\").\n     * Slight performance penalty for most calls. (Default: true)\n     */\n    readonly trace?: boolean;\n\n    /**\n     * Allow multiple mysql statements per query. Be careful with this, it could increase the scope of SQL injection attacks.\n     * (Default: false)\n     */\n    readonly multipleStatements?: boolean;\n\n    /**\n     * List of connection flags to use other than the default ones. It is also possible to blacklist default ones.\n     * For more information, check https://github.com/mysqljs/mysql#connection-flags.\n     */\n    readonly flags?: string[];\n\n    /**\n     * Replication setup.\n     */\n    readonly replication?: {\n\n        /**\n         * Master server used by orm to perform writes.\n         */\n        readonly master: MysqlConnectionCredentialsOptions;\n\n        /**\n         * List of read-from severs (slaves).\n         */\n        readonly slaves: MysqlConnectionCredentialsOptions[];\n\n        /**\n         * If true, PoolCluster will attempt to reconnect when connection fails. (Default: true)\n         */\n        readonly canRetry?: boolean;\n\n        /**\n         * If connection fails, node's errorCount increases.\n         * When errorCount is greater than removeNodeErrorCount, remove a node in the PoolCluster. (Default: 5)\n         */\n        readonly removeNodeErrorCount?: number;\n\n        /**\n         * If connection fails, specifies the number of milliseconds before another connection attempt will be made.\n         * If set to 0, then node will be removed instead and never re-used. (Default: 0)\n         */\n        readonly restoreNodeTimeout?: number;\n\n        /**\n         * Determines how slaves are selected:\n         * RR: Select one alternately (Round-Robin).\n         * RANDOM: Select the node by random function.\n         * ORDER: Select the first node available unconditionally.\n         */\n        readonly selector?: \"RR\"|\"RANDOM\"|\"ORDER\";\n\n    };\n\n}","/**\n * Postgres specific connection credential options.\n */\nexport interface PostgresConnectionCredentialsOptions {\n\n    /**\n     * Connection url where perform connection to.\n     */\n    readonly url?: string;\n\n    /**\n     * Database host.\n     */\n    readonly host?: string;\n\n    /**\n     * Database host port.\n     */\n    readonly port?: number;\n\n    /**\n     * Database username.\n     */\n    readonly username?: string;\n\n    /**\n     * Database password.\n     */\n    readonly password?: string;\n\n    /**\n     * Database name to connect to.\n     */\n    readonly database?: string;\n\n    /**\n     * Object with ssl parameters\n     */\n    readonly ssl?: any;\n\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\nimport {PostgresConnectionCredentialsOptions} from \"./PostgresConnectionCredentialsOptions\";\n\n/**\n * Postgres-specific connection options.\n */\nexport interface PostgresConnectionOptions extends BaseConnectionOptions, PostgresConnectionCredentialsOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"postgres\";\n\n    /**\n     * Schema name.\n     */\n    readonly schema?: string;\n\n    /**\n     * Replication setup.\n     */\n    readonly replication?: {\n\n        /**\n         * Master server used by orm to perform writes.\n         */\n        readonly master: PostgresConnectionCredentialsOptions;\n\n        /**\n         * List of read-from severs (slaves).\n         */\n        readonly slaves: PostgresConnectionCredentialsOptions[];\n\n    };\n\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\n\n/**\n * Sqlite-specific connection options.\n */\nexport interface SqliteConnectionOptions extends BaseConnectionOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"sqlite\";\n\n    /**\n     * Storage type or path to the storage.\n     */\n    readonly database: string;\n\n}","/**\n * SqlServer specific connection credential options.\n */\nexport interface SqlServerConnectionCredentialsOptions {\n\n    /**\n     * Connection url where perform connection to.\n     */\n    readonly url?: string;\n\n    /**\n     * Database host.\n     */\n    readonly host?: string;\n\n    /**\n     * Database host port.\n     */\n    readonly port?: number;\n\n    /**\n     * Database username.\n     */\n    readonly username?: string;\n\n    /**\n     * Database password.\n     */\n    readonly password?: string;\n\n    /**\n     * Database name to connect to.\n     */\n    readonly database?: string;\n\n    /**\n     * Once you set domain, driver will connect to SQL Server using domain login.\n     */\n    readonly domain?: string;\n\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\nimport {SqlServerConnectionCredentialsOptions} from \"./SqlServerConnectionCredentialsOptions\";\n\n/**\n * Microsoft Sql Server specific connection options.\n */\nexport interface SqlServerConnectionOptions extends BaseConnectionOptions, SqlServerConnectionCredentialsOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"mssql\";\n\n    /**\n     * Connection timeout in ms (default: 15000).\n     */\n    readonly connectionTimeout?: number;\n\n    /**\n     * Request timeout in ms (default: 15000). NOTE: msnodesqlv8 driver doesn't support timeouts < 1 second.\n     */\n    readonly requestTimeout?: number;\n\n    /**\n     * Stream recordsets/rows instead of returning them all at once as an argument of callback (default: false).\n     * You can also enable streaming for each request independently (request.stream = true).\n     * Always set to true if you plan to work with large amount of rows.\n     */\n    readonly stream?: boolean;\n\n    /**\n     * Database schema.\n     */\n    readonly schema?: string;\n\n    /**\n     * An optional object/dictionary with the any of the properties\n     */\n    readonly pool?: {\n\n        /**\n         * Maximum number of resources to create at any given time. (default=1)\n         */\n        readonly max?: number;\n\n        /**\n         * Minimum number of resources to keep in pool at any given time. If this is set >= max, the pool will silently\n         * set the min to equal max. (default=0)\n         */\n        readonly min?: number;\n\n        /**\n         * Maximum number of queued requests allowed, additional acquire calls will be callback with an err in a future\n         * cycle of the event loop.\n         */\n        readonly maxWaitingClients?: number;\n\n        /**\n         * Should the pool validate resources before giving them to clients. Requires that either factory.validate or\n         * factory.validateAsync to be specified\n         */\n        readonly testOnBorrow?: boolean;\n\n        /**\n         * Max milliseconds an acquire call will wait for a resource before timing out. (default no limit), if supplied should non-zero positive integer.\n         */\n        readonly acquireTimeoutMillis?: number;\n\n        /**\n         * If true the oldest resources will be first to be allocated. If false the most recently released resources will\n         * be the first to be allocated. This in effect turns the pool's behaviour from a queue into a stack. boolean,\n         * (default true)\n         */\n        readonly fifo?: boolean;\n\n        /**\n         * Int between 1 and x - if set, borrowers can specify their relative priority in the queue if no resources\n         * are available. see example. (default 1)\n         */\n        readonly priorityRange?: number;\n\n        /**\n         * Should the pool start creating resources etc once the constructor is called, (default true)\n         */\n        readonly autostart?: number;\n\n        /**\n         * How often to run eviction checks. Default: 0 (does not run).\n         */\n        readonly evictionRunIntervalMillis?: number;\n\n        /**\n         * Number of resources to check each eviction run. Default: 3.\n         */\n        readonly numTestsPerRun?: number;\n\n        /**\n         * Amount of time an object may sit idle in the pool before it is eligible for eviction by the idle object\n         * evictor (if any), with the extra condition that at least \"min idle\" object instances remain in the pool.\n         * Default -1 (nothing can get evicted)\n         */\n        readonly softIdleTimeoutMillis?: number;\n\n        /**\n         * The minimum amount of time that an object may sit idle in the pool before it is eligible for eviction due\n         * to idle time. Supercedes softIdleTimeoutMillis Default: 30000\n         */\n        readonly idleTimeoutMillis?: number;\n    };\n\n    /**\n     * Extra options\n     */\n    readonly options?: {\n\n        /**\n         * By default, if the database requestion by options.database cannot be accessed, the connection will fail with\n         * an error. However, if options.fallbackToDefaultDb is set to true, then the user's default database will\n         * be used instead (Default: false).\n         */\n        readonly fallbackToDefaultDb?: boolean;\n\n        /**\n         * If true, SET ANSI_NULL_DFLT_ON ON will be set in the initial sql. This means new columns will be nullable by\n         * default. See the T-SQL documentation for more details. (Default: true).\n         */\n        readonly enableAnsiNullDefault?: boolean;\n\n        /**\n         * The number of milliseconds before the attempt to connect is considered failed (default: 15000).\n         */\n        readonly connectTimeout?: number;\n\n        /**\n         * The number of milliseconds before the cancel (abort) of a request is considered failed (default: 5000).\n         */\n        readonly cancelTimeout?: number;\n\n        /**\n         * The size of TDS packets (subject to negotiation with the server). Should be a power of 2. (default: 4096).\n         */\n        readonly packetSize?: number;\n\n        /**\n         * A boolean determining whether to pass time values in UTC or local time. (default: true).\n         */\n        readonly useUTC?: boolean;\n\n        /**\n         * A boolean determining whether to rollback a transaction automatically if any error is encountered during\n         * the given transaction's execution. This sets the value for SET XACT_ABORT during the initial SQL phase\n         * of a connection (documentation).\n         */\n        readonly abortTransactionOnError?: boolean;\n\n        /**\n         * A string indicating which network interface (ip address) to use when connecting to SQL Server.\n         */\n        readonly localAddress?: string;\n\n        /**\n         * A boolean determining whether to return rows as arrays or key-value collections. (default: false).\n         */\n        readonly useColumnNames?: boolean;\n\n        /**\n         * A boolean, controlling whether the column names returned will have the first letter converted to lower case\n         * (true) or not. This value is ignored if you provide a columnNameReplacer. (default: false).\n         */\n        readonly camelCaseColumns?: boolean;\n\n        /**\n         * Debug options\n         */\n        readonly debug?: {\n\n            /**\n             * A boolean, controlling whether debug events will be emitted with text describing packet details\n             * (default: false).\n             */\n            readonly packet?: boolean;\n\n            /**\n             * A boolean, controlling whether debug events will be emitted with text describing packet data details\n             * (default: false).\n             */\n            readonly data?: boolean;\n\n            /**\n             * A boolean, controlling whether debug events will be emitted with text describing packet payload details\n             * (default: false).\n             */\n            readonly payload?: boolean;\n\n            /**\n             * A boolean, controlling whether debug events will be emitted with text describing token stream tokens\n             * (default: false).\n             */\n            readonly token?: boolean;\n        };\n\n        /**\n         * The default isolation level that transactions will be run with. The isolation levels are available\n         * from require('tedious').ISOLATION_LEVEL. (default: READ_COMMITTED).\n         */\n        readonly isolationLevel?: \"READ_UNCOMMITTED\"|\"READ_COMMITTED\"|\"REPEATABLE_READ\"|\"SERIALIZABLE\"|\"SNAPSHOT\";\n\n        /**\n         * The default isolation level for new connections. All out-of-transaction queries are executed with this\n         * setting. The isolation levels are available from require('tedious').ISOLATION_LEVEL .\n         */\n        readonly connectionIsolationLevel?: \"READ_UNCOMMITTED\"|\"READ_COMMITTED\"|\"REPEATABLE_READ\"|\"SERIALIZABLE\"|\"SNAPSHOT\";\n\n        /**\n         * A boolean, determining whether the connection will request read only access from a SQL Server\n         * Availability Group. For more information, see here. (default: false).\n         */\n        readonly readOnlyIntent?: boolean;\n\n        /**\n         * A boolean determining whether or not the connection will be encrypted. Set to true if you're on\n         * Windows Azure. (default: false).\n         */\n        readonly encrypt?: boolean;\n\n        /**\n         * When encryption is used, an object may be supplied that will be used for the first argument when calling\n         * tls.createSecurePair (default: {}).\n         */\n        readonly cryptoCredentialsDetails?: any;\n\n        /**\n         * A boolean, that when true will expose received rows in Requests' done* events. See done, doneInProc and\n         * doneProc. (default: false)\n         * Caution: If many row are received, enabling this option could result in excessive memory usage.\n         */\n        readonly rowCollectionOnDone?: boolean;\n\n        /**\n         * A boolean, that when true will expose received rows in Requests' completion callback. See new Request. (default: false)\n         * Caution: If many row are received, enabling this option could result in excessive memory usage.\n         */\n        readonly rowCollectionOnRequestCompletion?: boolean;\n\n        /**\n         * The version of TDS to use. If server doesn't support specified version, negotiated version is used instead.\n         * The versions are available from require('tedious').TDS_VERSION. (default: 7_4).\n         */\n        readonly tdsVersion?: string;\n    };\n\n    /**\n     * Replication setup.\n     */\n    readonly replication?: {\n\n        /**\n         * Master server used by orm to perform writes.\n         */\n        readonly master: SqlServerConnectionCredentialsOptions;\n\n        /**\n         * List of read-from severs (slaves).\n         */\n        readonly slaves: SqlServerConnectionCredentialsOptions[];\n\n    };\n\n}","/**\n * Oracle specific connection credential options.\n */\nexport interface OracleConnectionCredentialsOptions {\n\n    /**\n     * Connection url where perform connection to.\n     */\n    readonly url?: string;\n\n    /**\n     * Database host.\n     */\n    readonly host?: string;\n\n    /**\n     * Database host port.\n     */\n    readonly port?: number;\n\n    /**\n     * Database username.\n     */\n    readonly username?: string;\n\n    /**\n     * Database password.\n     */\n    readonly password?: string;\n\n    /**\n     * Database name to connect to.\n     */\n    readonly database?: string;\n\n    /**\n     * Connection SID.\n     */\n    readonly sid?: string;\n\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\nimport {OracleConnectionCredentialsOptions} from \"./OracleConnectionCredentialsOptions\";\n\n/**\n * Oracle-specific connection options.\n */\nexport interface OracleConnectionOptions extends BaseConnectionOptions, OracleConnectionCredentialsOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"oracle\";\n\n    /**\n     * Schema name. By default is \"public\".\n     */\n    readonly schema?: string;\n\n    /**\n     * Replication setup.\n     */\n    readonly replication?: {\n\n        /**\n         * Master server used by orm to perform writes.\n         */\n        readonly master: OracleConnectionCredentialsOptions;\n\n        /**\n         * List of read-from severs (slaves).\n         */\n        readonly slaves: OracleConnectionCredentialsOptions[];\n\n    };\n\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\n\n/**\n * Websql-specific connection options.\n */\nexport interface WebSqlConnectionOptions extends BaseConnectionOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"websql\";\n\n    /**\n     * Storage type or path to the storage.\n     */\n    readonly database: string;\n\n    /**\n     * Database version.\n     */\n    readonly version: string;\n\n    /**\n     * Database description.\n     */\n    readonly description: string;\n\n    /**\n     * Database size.\n     */\n    readonly size: number;\n\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\n\n/**\n * Sqlite-specific connection options.\n */\nexport interface CordovaConnectionOptions extends BaseConnectionOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"cordova\";\n\n    /**\n     * Database name.\n     */\n    readonly database: string;\n\n    /**\n     * Storage Location\n     */\n    readonly location: string;\n}","import {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\n\n/**\n * Sql.js-specific connection options.\n */\nexport interface SqljsConnectionOptions extends BaseConnectionOptions {\n\n    /**\n     * Database type.\n     */\n    readonly type: \"sqljs\";\n\n    /**\n     * A Uint8Array that gets imported when the connection is opened.\n     */\n    readonly database?: Uint8Array;\n\n    /**\n     * Enables the autoSave mechanism which either saves to location\n     * or calls autoSaveCallback every time a change to the database is made.\n     */\n    readonly autoSave?: boolean;\n\n    /**\n     * A function that gets called on every change instead of the internal autoSave function.\n     * autoSave has to be enabled for this to work.\n     */\n    readonly autoSaveCallback?: Function;\n\n    /**\n     * File path (Node.js) or local storage key (browser) to load and save database from.\n     * If this is specified without autoSave, the database is loaded from the location\n     * and can be saved manually via the SqljsEntityManager. If autoSave is enabled,\n     * location is used to automatically save the database.\n     */\n    readonly location?: string;\n}\n","import {MysqlConnectionOptions} from \"../driver/mysql/MysqlConnectionOptions\";\nimport {PostgresConnectionOptions} from \"../driver/postgres/PostgresConnectionOptions\";\nimport {SqliteConnectionOptions} from \"../driver/sqlite/SqliteConnectionOptions\";\nimport {SqlServerConnectionOptions} from \"../driver/sqlserver/SqlServerConnectionOptions\";\nimport {OracleConnectionOptions} from \"../driver/oracle/OracleConnectionOptions\";\nimport {WebSqlConnectionOptions} from \"../driver/websql/WebSqlConnectionOptions\";\nimport {MongoConnectionOptions} from \"../driver/mongodb/MongoConnectionOptions\";\nimport {CordovaConnectionOptions} from \"../driver/cordova/CordovaConnectionOptions\";\nimport {SqljsConnectionOptions} from \"../driver/sqljs/SqljsConnectionOptions\";\n\n/**\n * ConnectionOptions is an interface with settings and options for specific connection.\n * Options contain database and other connection-related settings.\n * Consumer must provide connection options for each of your connections.\n */\nexport type ConnectionOptions =\n    MysqlConnectionOptions|\n    PostgresConnectionOptions|\n    SqliteConnectionOptions|\n    SqlServerConnectionOptions|\n    OracleConnectionOptions|\n    WebSqlConnectionOptions|\n    CordovaConnectionOptions|\n    SqljsConnectionOptions|\n    MongoConnectionOptions;","import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {MongoQueryRunner} from \"./MongoQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {MongoConnectionOptions} from \"./MongoConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {MongoSchemaBuilder} from \"../../schema-builder/MongoSchemaBuilder\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {ConnectionOptions} from \"../../connection/ConnectionOptions\";\n\n/**\n * Organizes communication with MongoDB.\n */\nexport class MongoDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Mongodb does not require to dynamically create query runner each time,\n     * because it does not have a regular connection pool as RDBMS systems have.\n     */\n    queryRunner?: MongoQueryRunner;\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: MongoConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = false;\n\n    /**\n     * Mongodb does not need to have column types because they are not used in schema sync.\n     */\n    supportedDataTypes: ColumnType[] = [];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [];\n\n    /**\n     * Mongodb does not need to have a strong defined mapped column types because they are not used in schema sync.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"int\",\n        createDateDefault: \"\",\n        updateDate: \"int\",\n        updateDateDefault: \"\",\n        version: \"int\",\n        treeLevel: \"int\",\n        migrationName: \"int\",\n        migrationTimestamp: \"int\",\n        cacheId: \"int\",\n        cacheIdentifier: \"int\",\n        cacheTime: \"int\",\n        cacheDuration: \"int\",\n        cacheQuery: \"int\",\n        cacheResult: \"int\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults;\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Underlying mongodb library.\n     */\n    protected mongodb: any;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n        this.options = connection.options as MongoConnectionOptions;\n\n        // validate options to make sure everything is correct and driver will be able to establish connection\n        this.validateOptions(connection.options);\n\n        // load mongodb package\n        this.loadDependencies();\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    connect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.mongodb.MongoClient.connect(this.buildConnectionUrl(), {\n                poolSize: this.options.poolSize,\n                ssl: this.options.ssl,\n                sslValidate: this.options.sslValidate,\n                sslCA: this.options.sslCA,\n                sslCert: this.options.sslCert,\n                sslKey: this.options.sslKey,\n                sslPass: this.options.sslPass,\n                autoReconnect: this.options.autoReconnect,\n                noDelay: this.options.noDelay,\n                keepAlive: this.options.keepAlive,\n                connectTimeoutMS: this.options.connectTimeoutMS,\n                socketTimeoutMS: this.options.socketTimeoutMS,\n                reconnectTries: this.options.reconnectTries,\n                reconnectInterval: this.options.reconnectInterval,\n                ha: this.options.ha,\n                haInterval: this.options.haInterval,\n                replicaSet: this.options.replicaSet,\n                acceptableLatencyMS: this.options.acceptableLatencyMS,\n                secondaryAcceptableLatencyMS: this.options.secondaryAcceptableLatencyMS,\n                connectWithNoPrimary: this.options.connectWithNoPrimary,\n                authSource: this.options.authSource,\n                w: this.options.w,\n                wtimeout: this.options.wtimeout,\n                j: this.options.j,\n                forceServerObjectId: this.options.forceServerObjectId,\n                serializeFunctions: this.options.serializeFunctions,\n                ignoreUndefined: this.options.ignoreUndefined,\n                raw: this.options.raw,\n                promoteLongs: this.options.promoteLongs,\n                promoteBuffers: this.options.promoteBuffers,\n                promoteValues: this.options.promoteValues,\n                domainsEnabled: this.options.domainsEnabled,\n                bufferMaxEntries: this.options.bufferMaxEntries,\n                readPreference: this.options.readPreference,\n                pkFactory: this.options.pkFactory,\n                promiseLibrary: this.options.promiseLibrary,\n                readConcern: this.options.readConcern,\n                maxStalenessSeconds: this.options.maxStalenessSeconds,\n                loggerLevel: this.options.loggerLevel,\n                logger: this.options.logger\n            }, (err: any, dbConnection: any) => {\n                if (err) return fail(err);\n\n                this.queryRunner = new MongoQueryRunner(this.connection, dbConnection);\n                ok();\n            });\n        });\n    }\n\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            if (!this.queryRunner)\n                return fail(new ConnectionIsNotSetError(\"mongodb\"));\n\n            const handler = (err: any) => err ? fail(err) : ok();\n            this.queryRunner.databaseConnection.close(handler);\n            this.queryRunner = undefined;\n        });\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new MongoSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return this.queryRunner!;\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        throw new Error(`This operation is not supported by Mongodb driver.`);\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return columnName;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number }): string {\n        throw new Error(`MongoDB is schema-less, not supported by this driver.`);\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        throw new Error(`MongoDB is schema-less, not supported by this driver.`);\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        throw new Error(`MongoDB is schema-less, not supported by this driver.`);\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n        throw new Error(`MongoDB is schema-less, not supported by this driver.`);\n    }\n    \n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    createFullType(column: TableColumn): string {\n        throw new Error(`MongoDB is schema-less, not supported by this driver.`);\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        return Promise.resolve();\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Validate driver options to make sure everything is correct and driver will be able to establish connection.\n     */\n    protected validateOptions(options: ConnectionOptions) { // todo: fix\n        // if (!options.url) {\n        //     if (!options.database)\n        //         throw new DriverOptionNotSetError(\"database\");\n        // }\n    }\n\n    /**\n     * Loads all driver dependencies.\n     */\n    protected loadDependencies(): any {\n        try {\n            this.mongodb = PlatformTools.load(\"mongodb\");  // try to load native driver dynamically\n\n        } catch (e) {\n            throw new DriverPackageNotInstalledError(\"MongoDB\", \"mongodb\");\n        }\n    }\n\n    /**\n     * Builds connection url that is passed to underlying driver to perform connection to the mongodb database.\n     */\n    protected buildConnectionUrl(): string {\n        if (this.options.url)\n            return this.options.url;\n\n        const credentialsUrlPart = (this.options.username && this.options.password)\n            ? `${this.options.username}:${this.options.password}@`\n            : \"\";\n\n        return `mongodb://${credentialsUrlPart}${this.options.host || \"127.0.0.1\"}:${this.options.port || \"27017\"}/${this.options.database}`;\n    }\n\n}","import {EntityMetadata} from \"../../metadata/EntityMetadata\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {EmbeddedMetadata} from \"../../metadata/EmbeddedMetadata\";\n\n/**\n * Transforms raw document into entity object.\n * Entity is constructed based on its entity metadata.\n */\nexport class DocumentToEntityTransformer {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(// private selectionMap: AliasMap,\n                // private joinMappings: JoinMapping[],\n                // private relationCountMetas: RelationCountAttribute[],\n                private enableRelationIdValues: boolean = false\n    ) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    transformAll(documents: ObjectLiteral[], metadata: EntityMetadata) {\n        return documents.map(document => this.transform(document, metadata));\n    }\n\n    transform(document: any, metadata: EntityMetadata) {\n        const entity: any = metadata.create();\n        let hasData = false;\n\n        // handle _id property the special way\n        if (metadata.objectIdColumn && document[metadata.objectIdColumn.databaseNameWithoutPrefixes]) {\n            // todo: we can't use driver in this class\n            // do we really need prepare hydrated value here? If no then no problem. If yes then think maybe prepareHydratedValue process should be extracted out of driver class?\n            // entity[metadata.objectIdColumn.propertyName] = this.driver.prepareHydratedValue(document[metadata.objectIdColumn.name\"], metadata.objectIdColumn);\n            entity[metadata.objectIdColumn.propertyName] = document[metadata.objectIdColumn.databaseNameWithoutPrefixes];\n            hasData = true;\n        }\n\n        // add special columns that contains relation ids\n        if (this.enableRelationIdValues) {\n            metadata.columns.filter(column => !!column.relationMetadata).forEach(column => {\n                const valueInObject = document[column.databaseNameWithoutPrefixes];\n                if (valueInObject !== undefined && valueInObject !== null && column.propertyName) {\n                    // todo: we can't use driver in this class\n                    // const value = this.driver.prepareHydratedValue(valueInObject, column);\n                    entity[column.propertyName] = valueInObject;\n                    hasData = true;\n                }\n            });\n        }\n\n        /*this.joinMappings\n            .filter(joinMapping => joinMapping.parentName === alias.name && !joinMapping.alias.relationOwnerSelection && joinMapping.alias.target)\n            .map(joinMapping => {\n                const relatedEntities = this.transformRawResultsGroup(rawSqlResults, joinMapping.alias);\n                const isResultArray = joinMapping.isMany;\n                const result = !isResultArray ? relatedEntities[0] : relatedEntities;\n\n                if (result && (!isResultArray || result.length > 0)) {\n                    entity[joinMapping.propertyName] = result;\n                    hasData = true;\n                }\n            });*/\n\n        // get value from columns selections and put them into object\n        metadata.ownColumns.forEach(column => {\n            const valueInObject = document[column.databaseNameWithoutPrefixes];\n            if (valueInObject !== undefined &&\n                valueInObject !== null &&\n                column.propertyName &&\n                !column.isVirtual &&\n                !column.isParentId &&\n                !column.isDiscriminator) {\n                // const value = this.driver.prepareHydratedValue(valueInObject, column);\n\n                entity[column.propertyName] = valueInObject;\n                hasData = true;\n            }\n        });\n\n        const addEmbeddedValuesRecursively = (entity: any, document: any, embeddeds: EmbeddedMetadata[]) => {\n            embeddeds.forEach(embedded => {\n                if (!document[embedded.prefix])\n                    return;\n\n                if (embedded.isArray) {\n                    entity[embedded.propertyName] = (document[embedded.prefix] as any[]).map(subValue => {\n                        const newItem = embedded.create();\n                        embedded.columns.forEach(column => {\n                            newItem[column.propertyName] = subValue[column.databaseNameWithoutPrefixes];\n                        });\n                        return newItem;\n                    });\n\n                } else {\n                    embedded.columns.forEach(column => {\n                        const value = document[embedded.prefix][column.databaseNameWithoutPrefixes];\n                        if (!value) return;\n\n                        if (!entity[embedded.propertyName])\n                            entity[embedded.propertyName] = embedded.create();\n\n                        entity[embedded.propertyName][column.propertyName] = value;\n                    });\n                }\n                addEmbeddedValuesRecursively(entity[embedded.propertyName], document[embedded.prefix], embedded.embeddeds);\n            });\n        };\n\n        addEmbeddedValuesRecursively(entity, document, metadata.embeddeds);\n\n        // if relation is loaded then go into it recursively and transform its values too\n        /*metadata.relations.forEach(relation => {\n            const relationAlias = this.selectionMap.findSelectionByParent(alias.name, relation.propertyName);\n            if (relationAlias) {\n                const joinMapping = this.joinMappings.find(joinMapping => joinMapping.type === \"join\" && joinMapping.alias === relationAlias);\n                const relatedEntities = this.transformRawResultsGroup(rawSqlResults, relationAlias);\n                const isResultArray = relation.isManyToMany || relation.isOneToMany;\n                const result = !isResultArray ? relatedEntities[0] : relatedEntities;\n\n                if (result) {\n                    let propertyName = relation.propertyName;\n                    if (joinMapping) {\n                        propertyName = joinMapping.propertyName;\n                    }\n\n                    if (relation.isLazy) {\n                        entity[\"__\" + propertyName + \"__\"] = result;\n                    } else {\n                        entity[propertyName] = result;\n                    }\n\n                    if (!isResultArray || result.length > 0)\n                        hasData = true;\n                }\n            }\n\n            // if relation has id field then relation id/ids to that field.\n            if (relation.isManyToMany) {\n                if (relationAlias) {\n                    const ids: any[] = [];\n                    const joinMapping = this.joinMappings.find(joinMapping => joinMapping.type === \"relationId\" && joinMapping.alias === relationAlias);\n\n                    if (relation.idField || joinMapping) {\n                        const propertyName = joinMapping ? joinMapping.propertyName : relation.idField as string;\n                        const junctionMetadata = relation.junctionEntityMetadata;\n                        const columnName = relation.isOwning ? junctionMetadata.columns[1].name : junctionMetadata.columns[0].name;\n\n                        rawSqlResults.forEach(results => {\n                            if (relationAlias) {\n                                const resultsKey = relationAlias.name + \"_\" + columnName;\n                                const value = this.driver.prepareHydratedValue(results[resultsKey], relation.referencedColumn);\n                                if (value !== undefined && value !== null)\n                                    ids.push(value);\n                            }\n                        });\n\n                        if (ids && ids.length)\n                            entity[propertyName] = ids;\n                    }\n                }\n            } else if (relation.idField) {\n                const relationName = relation.name;\n                entity[relation.idField] = this.driver.prepareHydratedValue(rawSqlResults[0][alias.name + \"_\" + relationName], relation.referencedColumn);\n            }\n\n            // if relation counter\n            this.relationCountMetas.forEach(joinMeta => {\n                if (joinMeta.alias === relationAlias) {\n                    // console.log(\"relation count was found for relation: \", relation);\n                    // joinMeta.entity = entity;\n                    joinMeta.entities.push({ entity: entity, metadata: metadata });\n                    // console.log(joinMeta);\n                    // console.log(\"---------------------\");\n                }\n            });\n        });*/\n\n        return hasData ? entity : null;\n    }\n\n}","/**\n * Thrown when relations specified in the find options were not found in the entities.\n*/\nexport class FindRelationsNotFoundError extends Error {\n\n    constructor(notFoundRelations: string[]) {\n        super();\n        if (notFoundRelations.length === 1) {\n            this.message = `Relation \"${notFoundRelations[0]}\" was not found, please check if it is correct and really exist in your entity.`;\n        } else {\n            this.message = `Relations ${notFoundRelations.map(relation => `\"${relation}\"`).join(\", \")} were not found, please check if relations are correct and they exist in your entities.`;\n        }\n        Object.setPrototypeOf(this, FindRelationsNotFoundError.prototype);\n    }\n\n}","import {FindManyOptions} from \"./FindManyOptions\";\nimport {FindOneOptions} from \"./FindOneOptions\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\nimport {FindRelationsNotFoundError} from \"../error/FindRelationsNotFoundError\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\n\n/**\n * Utilities to work with FindOptions.\n */\nexport class FindOptionsUtils {\n\n    // -------------------------------------------------------------------------\n    // Public Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Checks if given object is really instance of FindOneOptions interface.\n     */\n    static isFindOneOptions(obj: any): obj is FindOneOptions<any> {\n        const possibleOptions: FindOneOptions<any> = obj;\n        return possibleOptions &&\n                (\n                    possibleOptions.select instanceof Array ||\n                    possibleOptions.where instanceof Object ||\n                    typeof possibleOptions.where === \"string\" ||\n                    possibleOptions.relations instanceof Array ||\n                    possibleOptions.join instanceof Object ||\n                    possibleOptions.order instanceof Object ||\n                    (possibleOptions.cache instanceof Object ||\n                    typeof possibleOptions.cache === \"boolean\" ||\n                    typeof possibleOptions.cache === \"number\")\n                );\n    }\n\n    /**\n     * Checks if given object is really instance of FindManyOptions interface.\n     */\n    static isFindManyOptions(obj: any): obj is FindManyOptions<any> {\n        const possibleOptions: FindManyOptions<any> = obj;\n        return possibleOptions && (\n            this.isFindOneOptions(possibleOptions) ||\n            typeof (possibleOptions as FindManyOptions<any>).skip === \"number\" ||\n            typeof (possibleOptions as FindManyOptions<any>).take === \"number\"\n        );\n    }\n\n    /**\n     * Checks if given object is really instance of FindOptions interface.\n     */\n    static extractFindOneOptionsAlias(object: any): string|undefined {\n        if (this.isFindOneOptions(object) && object.join)\n            return object.join.alias;\n\n        return undefined;\n    }\n\n    /**\n     * Checks if given object is really instance of FindOptions interface.\n     */\n    static extractFindManyOptionsAlias(object: any): string|undefined {\n        if (this.isFindManyOptions(object) && object.join)\n            return object.join.alias;\n\n        return undefined;\n    }\n\n    /**\n     * Applies give find one options to the given query builder.\n     */\n    static applyFindOneOptionsOrConditionsToQueryBuilder<T>(qb: SelectQueryBuilder<T>, options: FindOneOptions<T>|Partial<T>|undefined): SelectQueryBuilder<T> {\n        if (this.isFindOneOptions(options))\n            return this.applyOptionsToQueryBuilder(qb, options);\n\n        if (options)\n            return qb.where(options);\n\n        return qb;\n    }\n\n    /**\n     * Applies give find many options to the given query builder.\n     */\n    static applyFindManyOptionsOrConditionsToQueryBuilder<T>(qb: SelectQueryBuilder<T>, options: FindManyOptions<T>|Partial<T>|undefined): SelectQueryBuilder<T> {\n        if (this.isFindManyOptions(options))\n            return this.applyOptionsToQueryBuilder(qb, options);\n\n        if (options)\n            return qb.where(options);\n\n        return qb;\n    }\n\n    /**\n     * Applies give find options to the given query builder.\n     */\n    static applyOptionsToQueryBuilder<T>(qb: SelectQueryBuilder<T>, options: FindOneOptions<T>|FindManyOptions<T>|undefined): SelectQueryBuilder<T> {\n\n        // if options are not set then simply return query builder. This is made for simplicity of usage.\n        if (!options || (!this.isFindOneOptions(options) && !this.isFindManyOptions(options)))\n            return qb;\n\n        // apply all options from FindOptions\n        if (options.select) {\n            qb.select(options.select.map(selection => qb.alias + \".\" + selection));\n        }\n\n        if (options.where)\n            qb.where(options.where);\n\n        if ((options as FindManyOptions<T>).skip)\n            qb.skip((options as FindManyOptions<T>).skip!);\n\n        if ((options as FindManyOptions<T>).take)\n            qb.take((options as FindManyOptions<T>).take!);\n\n        if (options.order)\n            Object.keys(options.order).forEach(key => {\n                const order = ((options as FindOneOptions<T>).order as any)[key as any];\n                switch (order) {\n                    case 1:\n                        qb.addOrderBy(qb.alias + \".\" + key, \"ASC\");\n                        break;\n                    case -1:\n                        qb.addOrderBy(qb.alias + \".\" + key, \"DESC\");\n                        break;\n                    case \"ASC\":\n                        qb.addOrderBy(qb.alias + \".\" + key, \"ASC\");\n                        break;\n                    case \"DESC\":\n                        qb.addOrderBy(qb.alias + \".\" + key, \"DESC\");\n                        break;\n                }\n            });\n\n        if (options.relations) {\n            const allRelations = options.relations.map(relation => relation);\n            this.applyRelationsRecursively(qb, allRelations, qb.expressionMap.mainAlias!.name, qb.expressionMap.mainAlias!.metadata, \"\");\n            // recursive removes found relations from allRelations array\n            // if there are relations left in this array it means those relations were not found in the entity structure\n            // so, we give an exception about not found relations\n            if (allRelations.length > 0)\n                throw new FindRelationsNotFoundError(allRelations);\n        }\n\n        if (options.join) {\n            if (options.join.leftJoin)\n                Object.keys(options.join.leftJoin).forEach(key => {\n                    qb.leftJoin(options.join!.leftJoin![key], key);\n                });\n\n            if (options.join.innerJoin)\n                Object.keys(options.join.innerJoin).forEach(key => {\n                    qb.innerJoin(options.join!.innerJoin![key], key);\n                });\n\n            if (options.join.leftJoinAndSelect)\n                Object.keys(options.join.leftJoinAndSelect).forEach(key => {\n                    qb.leftJoinAndSelect(options.join!.leftJoinAndSelect![key], key);\n                });\n\n            if (options.join.innerJoinAndSelect)\n                Object.keys(options.join.innerJoinAndSelect).forEach(key => {\n                    qb.innerJoinAndSelect(options.join!.innerJoinAndSelect![key], key);\n                });\n        }\n\n        if (options.cache) {\n            if (options.cache instanceof Object) {\n                const cache = options.cache as { id: any, milliseconds: number };\n                qb.cache(cache.id, cache.milliseconds);\n            } else {\n                qb.cache(options.cache);\n            }\n        }\n\n        return qb;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Adds joins for all relations and sub-relations of the given relations provided in the find options.\n     */\n    protected static applyRelationsRecursively(qb: SelectQueryBuilder<any>, allRelations: string[], alias: string, metadata: EntityMetadata, prefix: string): void {\n\n        // find all relations that match given prefix\n        let matchedBaseRelations: string[] = [];\n        if (prefix) {\n            const regexp = new RegExp(\"^\" + prefix.replace(\".\", \"\\\\.\") + \"\\\\.\");\n            matchedBaseRelations = allRelations\n                .filter(relation => relation.match(regexp))\n                .map(relation => relation.replace(regexp, \"\"))\n                .filter(relation => metadata.findRelationWithPropertyPath(relation));\n        } else {\n            matchedBaseRelations = allRelations.filter(relation => metadata.findRelationWithPropertyPath(relation));\n        }\n\n        // go through all matched relations and add join for them\n        matchedBaseRelations.forEach(relation => {\n\n            // add a join for the found relation\n            const selection = alias + \".\" + relation;\n            qb.leftJoinAndSelect(selection, alias + \"_\" + relation);\n\n            // remove added relations from the allRelations array, this is needed to find all not found relations at the end\n            allRelations.splice(allRelations.indexOf(prefix ? prefix + \".\" + relation : relation), 1);\n\n            // try to find sub-relations\n            const join = qb.expressionMap.joinAttributes.find(join => join.entityOrProperty === selection);\n            this.applyRelationsRecursively(qb, allRelations, join!.alias.name, join!.metadata!, prefix ? prefix + \".\" + relation : relation);\n        });\n    }\n\n}\n","import {Connection} from \"../connection/Connection\";\nimport {EntityManager} from \"./EntityManager\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    CursorResult,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCallback,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    MongoError,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"../driver/mongodb/typings\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {MongoQueryRunner} from \"../driver/mongodb/MongoQueryRunner\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {DocumentToEntityTransformer} from \"../query-builder/transformer/DocumentToEntityTransformer\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {FindOptionsUtils} from \"../find-options/FindOptionsUtils\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\n\n/**\n * Entity manager supposed to work with any entity, automatically find its repository and call its methods,\n * whatever entity type are you passing.\n *\n * This implementation is used for MongoDB driver which has some specifics in its EntityManager.\n */\nexport class MongoEntityManager extends EntityManager {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n    }\n\n    // -------------------------------------------------------------------------\n    // Overridden Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets query runner used to execute queries.\n     */\n    get queryRunner(): MongoQueryRunner {\n        return (this.connection.driver as MongoDriver).queryRunner!;\n    }\n\n    // -------------------------------------------------------------------------\n    // Overridden Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    async find<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        return cursor.toArray();\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    async findAndCount<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<[ Entity[], number ]> {\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        const [results, count] = await Promise.all<any>([\n            cursor.toArray(),\n            this.count(entityClassOrName, query),\n        ]);\n        return [results, parseInt(count)];\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    async findByIds<Entity>(entityClassOrName: ObjectType<Entity>|string, ids: any[], optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions) || {};\n        const objectIdInstance = PlatformTools.load(\"mongodb\").ObjectID;\n        query[\"_id\"] = { $in: ids.map(id => {\n            if (id instanceof objectIdInstance)\n                return id;\n\n            return id[metadata.objectIdColumn!.propertyName];\n        }) };\n\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        return await cursor.toArray();\n    }\n\n    /**\n     * Finds first entity that matches given conditions and/or find options.\n     */\n    async findOne<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const query = this.convertFindOneOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions)) {\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n\n        // const result = await cursor.limit(1).next();\n        const result = await cursor.limit(1).toArray();\n        return result.length > 0 ? result[0] : undefined;\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    async findOneById<Entity>(entityClassOrName: ObjectType<Entity>|string, id: any, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const query = this.convertFindOneOptionsOrConditionsToMongodbQuery(optionsOrConditions) || {};\n        const objectIdInstance = PlatformTools.load(\"mongodb\").ObjectID;\n        query[\"_id\"] = (id instanceof objectIdInstance)\n            ? id\n            : new objectIdInstance(id);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions)) {\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n\n        // const result = await cursor.limit(1).next();\n        const result = await cursor.limit(1).toArray();\n        return result.length > 0 ? result[0] : undefined;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    createCursor<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral): Cursor<Entity> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.cursor(metadata.tableName, query);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     * This returns modified version of cursor that transforms each result into Entity model.\n     */\n    createEntityCursor<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral): Cursor<Entity> {\n\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        const cursor = this.createCursor(entityClassOrName, query);\n        const ParentCursor = PlatformTools.load(\"mongodb\").Cursor;\n        cursor.toArray = function (callback?: MongoCallback<Entity[]>) {\n            if (callback) {\n                ParentCursor.prototype.toArray.call(this, (error: MongoError, results: Entity[]): void => {\n                    if (error) {\n                        callback(error, results);\n                        return;\n                    }\n\n                    const transformer = new DocumentToEntityTransformer();\n                    return callback(error, transformer.transformAll(results, metadata));\n                });\n            } else {\n                return ParentCursor.prototype.toArray.call(this).then((results: Entity[]) => {\n                    const transformer = new DocumentToEntityTransformer();\n                    return transformer.transformAll(results, metadata);\n                });\n            }\n        };\n        cursor.next = function (callback?: MongoCallback<CursorResult>) {\n            if (callback) {\n                ParentCursor.prototype.next.call(this, (error: MongoError, result: CursorResult): void => {\n                    if (error || !result) {\n                        callback(error, result);\n                        return;\n                    }\n\n                    const transformer = new DocumentToEntityTransformer();\n                    return callback(error, transformer.transform(result, metadata));\n                });\n            } else {\n                return ParentCursor.prototype.next.call(this).then((result: Entity) => {\n                    if (!result) return result;\n                    const transformer = new DocumentToEntityTransformer();\n                    return transformer.transform(result, metadata);\n                });\n            }\n        };\n        return cursor;\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate<Entity>(entityClassOrName: ObjectType<Entity>|string, pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<Entity> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.aggregate(metadata.tableName, pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    bulkWrite<Entity>(entityClassOrName: ObjectType<Entity>|string, operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.bulkWrite(metadata.tableName, operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    count<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.count(metadata.tableName, query, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    createCollectionIndex<Entity>(entityClassOrName: ObjectType<Entity>|string, fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.createCollectionIndex(metadata.tableName, fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error.\n     * Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    createCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string, indexSpecs: ObjectLiteral[]): Promise<void> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.createCollectionIndexes(metadata.tableName, indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    deleteMany<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.deleteMany(metadata.tableName, query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    deleteOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.deleteOne(metadata.tableName, query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    distinct<Entity>(entityClassOrName: ObjectType<Entity>|string, key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.distinct(metadata.tableName, key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    dropCollectionIndex<Entity>(entityClassOrName: ObjectType<Entity>|string, indexName: string, options?: CollectionOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.dropCollectionIndex(metadata.tableName, indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    dropCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.dropCollectionIndexes(metadata.tableName);\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndDelete<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndDelete(metadata.tableName, query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndReplace<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndReplace(metadata.tableName, query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndUpdate<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndUpdate(metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    geoHaystackSearch<Entity>(entityClassOrName: ObjectType<Entity>|string, x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.geoHaystackSearch(metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    geoNear<Entity>(entityClassOrName: ObjectType<Entity>|string, x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.geoNear(metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    group<Entity>(entityClassOrName: ObjectType<Entity>|string, keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.group(metadata.tableName, keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexes(metadata.tableName);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexExists<Entity>(entityClassOrName: ObjectType<Entity>|string, indexes: string|string[]): Promise<boolean> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexExists(metadata.tableName, indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    collectionIndexInformation<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { full: boolean }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexInformation(metadata.tableName, options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: CollectionOptions): OrderedBulkOperation {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.initializeOrderedBulkOp(metadata.tableName, options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: CollectionOptions): UnorderedBulkOperation {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.initializeUnorderedBulkOp(metadata.tableName, options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    insertMany<Entity>(entityClassOrName: ObjectType<Entity>|string, docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.insertMany(metadata.tableName, docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    insertOne<Entity>(entityClassOrName: ObjectType<Entity>|string, doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.insertOne(metadata.tableName, doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    isCapped<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.isCapped(metadata.tableName);\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.listCollectionIndexes(metadata.tableName, options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    mapReduce<Entity>(entityClassOrName: ObjectType<Entity>|string, map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.mapReduce(metadata.tableName, map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    parallelCollectionScan<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: ParallelCollectionScanOptions): Promise<Cursor<Entity>[]> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.parallelCollectionScan(metadata.tableName, options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    reIndex<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.reIndex(metadata.tableName);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    rename<Entity>(entityClassOrName: ObjectType<Entity>|string, newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.rename(metadata.tableName, newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    replaceOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.replaceOne(metadata.tableName, query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    stats<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { scale: number }): Promise<CollStats> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.stats(metadata.tableName, options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    updateMany<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.updateMany(metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    updateOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.updateOne(metadata.tableName, query, update, options);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Converts FindManyOptions to mongodb query.\n     */\n    protected convertFindManyOptionsOrConditionsToMongodbQuery<Entity>(optionsOrConditions: FindManyOptions<Entity>|Partial<Entity>|undefined): ObjectLiteral|undefined {\n        if (!optionsOrConditions)\n            return undefined;\n\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions))\n            // If where condition is passed as a string which contains sql we have to ignore\n            // as mongo is not a sql database\n            return typeof optionsOrConditions.where === \"string\"\n                ? {}\n                : optionsOrConditions.where;\n\n        return optionsOrConditions;\n    }\n\n    /**\n     * Converts FindOneOptions to mongodb query.\n     */\n    protected convertFindOneOptionsOrConditionsToMongodbQuery<Entity>(optionsOrConditions: FindOneOptions<Entity>|Partial<Entity>|undefined): ObjectLiteral|undefined {\n        if (!optionsOrConditions)\n            return undefined;\n\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions))\n            // If where condition is passed as a string which contains sql we have to ignore\n            // as mongo is not a sql database\n            return typeof optionsOrConditions.where === \"string\"\n                ? {}\n                : optionsOrConditions.where;\n\n        return optionsOrConditions;\n    }\n\n    /**\n     * Converts FindOptions into mongodb order by criteria.\n     */\n    protected convertFindOptionsOrderToOrderCriteria(order: ObjectLiteral) {\n        return Object.keys(order).reduce((orderCriteria, key) => {\n            switch (order[key]) {\n                case \"DESC\":\n                    orderCriteria[key] = -1;\n                    break;\n                case \"ASC\":\n                    orderCriteria[key] = 1;\n                    break;\n                default:\n                    orderCriteria[key] = order[key];\n            }\n            return orderCriteria;\n        }, {} as ObjectLiteral);\n    }\n\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {Repository} from \"./Repository\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"../driver/mongodb/typings\";\nimport {MongoEntityManager} from \"../entity-manager/MongoEntityManager\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Repository used to manage mongodb documents of a single entity type.\n */\nexport class MongoRepository<Entity extends ObjectLiteral> extends Repository<Entity> {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity Manager used by this repository.\n     */\n    readonly manager: MongoEntityManager;\n\n    // -------------------------------------------------------------------------\n    // Overridden Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Raw SQL query execution is not supported by MongoDB.\n     * Calling this method will return an error.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        throw new Error(`Queries aren't supported by MongoDB.`);\n    }\n\n    /**\n     * Using Query Builder with MongoDB is not supported yet.\n     * Calling this method will return an error.\n     */\n    createQueryBuilder(alias: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity> {\n        throw new Error(`Query Builder is not supported by MongoDB.`);\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    find(optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        return this.manager.find(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount(optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<[ Entity[], number ]> {\n        return this.manager.findAndCount(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    findByIds(ids: any[], optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        return this.manager.findByIds(this.metadata.target, ids, optionsOrConditions);\n    }\n\n    /**\n     * Finds first entity that matches given conditions and/or find options.\n     */\n    findOne(optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOne(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    findOneById(id: any, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOneById(this.metadata.target, id, optionsOrConditions);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    createCursor(query?: ObjectLiteral): Cursor<Entity> {\n        return this.manager.createCursor(this.metadata.target, query);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     * This returns modified version of cursor that transforms each result into Entity model.\n     */\n    createEntityCursor(query?: ObjectLiteral): Cursor<Entity> {\n        return this.manager.createEntityCursor(this.metadata.target, query);\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate(pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<Entity> {\n        return this.manager.aggregate(this.metadata.target, pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    bulkWrite(operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        return this.manager.bulkWrite(this.metadata.target, operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    count(query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        return this.manager.count(this.metadata.target, query || {}, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    createCollectionIndex(fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        return this.manager.createCollectionIndex(this.metadata.target, fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error.\n     * Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    createCollectionIndexes(indexSpecs: ObjectLiteral[]): Promise<void> {\n        return this.manager.createCollectionIndexes(this.metadata.target, indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    deleteMany(query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return this.manager.deleteMany(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    deleteOne(query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return this.manager.deleteOne(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    distinct(key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        return this.manager.distinct(this.metadata.tableName, key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    dropCollectionIndex(indexName: string, options?: CollectionOptions): Promise<any> {\n        return this.manager.dropCollectionIndex(this.metadata.tableName, indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    dropCollectionIndexes(): Promise<any> {\n        return this.manager.dropCollectionIndexes(this.metadata.tableName);\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndDelete(query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndDelete(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndReplace(query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndReplace(this.metadata.tableName, query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndUpdate(query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndUpdate(this.metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    geoHaystackSearch(x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        return this.manager.geoHaystackSearch(this.metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    geoNear(x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        return this.manager.geoNear(this.metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    group(keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        return this.manager.group(this.metadata.tableName, keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexes(): Promise<any> {\n        return this.manager.collectionIndexes(this.metadata.tableName);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexExists(indexes: string|string[]): Promise<boolean> {\n        return this.manager.collectionIndexExists(this.metadata.tableName, indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    collectionIndexInformation(options?: { full: boolean }): Promise<any> {\n        return this.manager.collectionIndexInformation(this.metadata.tableName, options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp(options?: CollectionOptions): OrderedBulkOperation {\n        return this.manager.initializeOrderedBulkOp(this.metadata.tableName, options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp(options?: CollectionOptions): UnorderedBulkOperation {\n        return this.manager.initializeUnorderedBulkOp(this.metadata.tableName, options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    insertMany(docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        return this.manager.insertMany(this.metadata.tableName, docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    insertOne(doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        return this.manager.insertOne(this.metadata.tableName, doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    isCapped(): Promise<any> {\n        return this.manager.isCapped(this.metadata.tableName);\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes(options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        return this.manager.listCollectionIndexes(this.metadata.tableName, options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    mapReduce(map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        return this.manager.mapReduce(this.metadata.tableName, map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    parallelCollectionScan(options?: ParallelCollectionScanOptions): Promise<Cursor<Entity>[]> {\n        return this.manager.parallelCollectionScan(this.metadata.tableName, options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    reIndex(): Promise<any> {\n        return this.manager.reIndex(this.metadata.tableName);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    rename(newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        return this.manager.rename(this.metadata.tableName, newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    replaceOne(query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return this.manager.replaceOne(this.metadata.tableName, query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    stats(options?: { scale: number }): Promise<CollStats> {\n        return this.manager.stats(this.metadata.tableName, options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    updateMany(query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        return this.manager.updateMany(this.metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    updateOne(query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return this.manager.updateOne(this.metadata.tableName, query, update, options);\n    }\n\n}","import {Repository} from \"./Repository\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Repository with additional functions to work with trees.\n *\n * @see Repository\n */\nexport class TreeRepository<Entity> extends Repository<Entity> {\n\n    // todo: implement moving\n    // todo: implement removing\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets complete trees for all roots in the table.\n     */\n    async findTrees(): Promise<Entity[]> {\n        const roots = await this.findRoots();\n        await Promise.all(roots.map(async root => {\n            await this.findDescendantsTree(root);\n        }));\n\n        return roots;\n    }\n\n    /**\n     * Roots are entities that have no ancestors. Finds them all.\n     */\n    findRoots(): Promise<Entity[]> {\n        const escapeAlias = (alias: string) => this.manager.connection.driver.escape(alias);\n        const escapeColumn = (column: string) => this.manager.connection.driver.escape(column);\n        const parentPropertyName = this.manager.connection.namingStrategy.joinColumnName(\n          this.metadata.treeParentRelation!.propertyName, \"id\"\n        );\n\n        return this.createQueryBuilder(\"treeEntity\")\n            .where(`${escapeAlias(\"treeEntity\")}.${escapeColumn(parentPropertyName)} IS NULL`)\n            .getMany();\n    }\n\n    /**\n     * Gets all children (descendants) of the given entity. Returns them all in a flat array.\n     */\n    findDescendants(entity: Entity): Promise<Entity[]> {\n        return this\n            .createDescendantsQueryBuilder(\"treeEntity\", \"treeClosure\", entity)\n            .getMany();\n    }\n\n    /**\n     * Gets all children (descendants) of the given entity. Returns them in a tree - nested into each other.\n     */\n    findDescendantsTree(entity: Entity): Promise<Entity> {\n        // todo: throw exception if there is no column of this relation?\n        return this\n            .createDescendantsQueryBuilder(\"treeEntity\", \"treeClosure\", entity)\n            .getRawAndEntities()\n            .then(entitiesAndScalars => {\n                const relationMaps = this.createRelationMaps(\"treeEntity\", entitiesAndScalars.raw);\n                this.buildChildrenEntityTree(entity, entitiesAndScalars.entities, relationMaps);\n                return entity;\n            });\n    }\n\n    /**\n     * Gets number of descendants of the entity.\n     */\n    countDescendants(entity: Entity): Promise<number> {\n        return this\n            .createDescendantsQueryBuilder(\"treeEntity\", \"treeClosure\", entity)\n            .getCount();\n    }\n\n    /**\n     * Creates a query builder used to get descendants of the entities in a tree.\n     */\n    createDescendantsQueryBuilder(alias: string, closureTableAlias: string, entity: Entity): SelectQueryBuilder<Entity> {\n\n        // create shortcuts for better readability\n        const escape = (alias: string) => this.manager.connection.driver.escape(alias);\n\n        const joinCondition = `${escape(alias)}.${escape(this.metadata.primaryColumns[0].databaseName)}=${escape(closureTableAlias)}.${escape(\"descendant\")}`;\n        return this.createQueryBuilder(alias)\n            .innerJoin(this.metadata.closureJunctionTable.tableName, closureTableAlias, joinCondition)\n            .where(`${escape(closureTableAlias)}.${escape(\"ancestor\")}=${this.metadata.getEntityIdMap(entity)![this.metadata.primaryColumns[0].propertyName]}`);\n\n    }\n\n    /**\n     * Gets all parents (ancestors) of the given entity. Returns them all in a flat array.\n     */\n    findAncestors(entity: Entity): Promise<Entity[]> {\n        return this\n            .createAncestorsQueryBuilder(\"treeEntity\", \"treeClosure\", entity)\n            .getMany();\n    }\n\n    /**\n     * Gets all parents (ancestors) of the given entity. Returns them in a tree - nested into each other.\n     */\n    findAncestorsTree(entity: Entity): Promise<Entity> {\n        // todo: throw exception if there is no column of this relation?\n        return this\n            .createAncestorsQueryBuilder(\"treeEntity\", \"treeClosure\", entity)\n            .getRawAndEntities()\n            .then(entitiesAndScalars => {\n                const relationMaps = this.createRelationMaps(\"treeEntity\", entitiesAndScalars.raw);\n                this.buildParentEntityTree(entity, entitiesAndScalars.entities, relationMaps);\n                return entity;\n            });\n    }\n\n    /**\n     * Gets number of ancestors of the entity.\n     */\n    countAncestors(entity: Entity): Promise<number> {\n        return this\n            .createAncestorsQueryBuilder(\"treeEntity\", \"treeClosure\", entity)\n            .getCount();\n    }\n\n    /**\n     * Creates a query builder used to get ancestors of the entities in the tree.\n     */\n    createAncestorsQueryBuilder(alias: string, closureTableAlias: string, entity: Entity): SelectQueryBuilder<Entity> {\n\n        // create shortcuts for better readability\n        const escapeAlias = (alias: string) => this.manager.connection.driver.escape(alias);\n        const escapeColumn = (column: string) => this.manager.connection.driver.escape(column);\n\n        const joinCondition = `${escapeAlias(alias)}.${escapeColumn(this.metadata.primaryColumns[0].databaseName)}=${escapeAlias(closureTableAlias)}.${escapeColumn(\"ancestor\")}`;\n        return this.createQueryBuilder(alias)\n            .innerJoin(this.metadata.closureJunctionTable.tableName, closureTableAlias, joinCondition)\n            .where(`${escapeAlias(closureTableAlias)}.${escapeColumn(\"descendant\")}=${this.metadata.getEntityIdMap(entity)![this.metadata.primaryColumns[0].propertyName]}`);\n    }\n\n    /**\n     * Moves entity to the children of then given entity.\n     *\n    move(entity: Entity, to: Entity): Promise<void> {\n        return Promise.resolve();\n    } */\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    protected createRelationMaps(alias: string, rawResults: any[]): { id: any, parentId: any }[] {\n        return rawResults.map(rawResult => {\n            return {\n                id: rawResult[alias + \"_\" + this.metadata.primaryColumns[0].databaseName],\n                parentId: rawResult[alias + \"_\" + this.metadata.treeParentRelation!.joinColumns[0].givenDatabaseName]\n            };\n        });\n    }\n\n    protected buildChildrenEntityTree(entity: any, entities: any[], relationMaps: { id: any, parentId: any }[]): void {\n        const childProperty = this.metadata.treeChildrenRelation!.propertyName;\n        const parentEntityId = this.metadata.primaryColumns[0].getEntityValue(entity);\n        const childRelationMaps = relationMaps.filter(relationMap => relationMap.parentId === parentEntityId);\n        const childIds = childRelationMaps.map(relationMap => relationMap.id);\n        entity[childProperty] = entities.filter(entity => childIds.indexOf(entity.id) !== -1);\n        entity[childProperty].forEach((childEntity: any) => {\n            this.buildChildrenEntityTree(childEntity, entities, relationMaps);\n        });\n    }\n\n    protected buildParentEntityTree(entity: any, entities: any[], relationMaps: { id: any, parentId: any }[]): void {\n        const parentProperty = this.metadata.treeParentRelation!.propertyName;\n        const entityId = this.metadata.primaryColumns[0].getEntityValue(entity);\n        const parentRelationMap = relationMaps.find(relationMap => relationMap.id === entityId);\n        const parentEntity = entities.find(entity => {\n            if (!parentRelationMap)\n                return false;\n\n            return entity[this.metadata.primaryColumns[0].propertyName] === parentRelationMap.parentId;\n        });\n        if (parentEntity) {\n            entity[parentProperty] = parentEntity;\n            this.buildParentEntityTree(entity[parentProperty], entities, relationMaps);\n        }\n    }\n\n}\n","/**\n * Provides utilities to transform hydrated and persisted data.\n */\nexport class DateUtils {\n\n    // -------------------------------------------------------------------------\n    // Public Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Normalizes date object hydrated from the database.\n     */\n    static normalizeHydratedDate(mixedDate: Date|string|undefined): Date|string|undefined {\n        if (!mixedDate)\n            return mixedDate;\n\n        const date = typeof mixedDate === \"string\" ? new Date(mixedDate) : mixedDate as Date;\n        // if (!storedInLocal) {\n\n        // else if it was not stored in local timezone, means it was stored in UTC\n        // because driver hydrates it with timezone applied why we need to add timezone hours to match a local timezone\n\n        const correctedDate = new Date();\n        correctedDate.setUTCFullYear(date.getFullYear(), date.getMonth(), date.getDate());\n        correctedDate.setUTCHours(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n        return correctedDate;\n        // }\n        // return date;\n    }\n\n    /**\n     * Converts given value into date string in a \"YYYY-MM-DD\" format.\n     */\n    static mixedDateToDateString(value: Date|any): string|any {\n        if (value instanceof Date)\n            return this.formatZerolessValue(value.getFullYear()) + \"-\" + this.formatZerolessValue(value.getMonth() + 1) + \"-\" + this.formatZerolessValue(value.getDate());\n\n        return value;\n    }\n\n    /**\n     * Converts given value into date object.\n     */\n    static mixedDateToDate(mixedDate: Date|string, toUtc: boolean = false, useMilliseconds = true): Date {\n        let date = typeof mixedDate === \"string\" ? new Date(mixedDate) : mixedDate;\n\n        if (toUtc)\n            date = new Date(\n                date.getUTCFullYear(),\n                date.getUTCMonth(),\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds(),\n                date.getUTCMilliseconds()\n            );\n\n        if (!useMilliseconds)\n            date.setUTCMilliseconds(0);\n\n        return date;\n    }\n\n    /**\n     * Converts given value into time string in a \"HH:mm:ss\" format.\n     */\n    static mixedDateToTimeString(value: Date|any, skipSeconds: boolean = false): string|any {\n        if (value instanceof Date)\n            return this.formatZerolessValue(value.getHours()) +\n                \":\" + this.formatZerolessValue(value.getMinutes()) +\n                (!skipSeconds ? \":\" + this.formatZerolessValue(value.getSeconds()) : \"\");\n\n        return value;\n    }\n\n    /**\n     * Converts given value into time string in a \"HH:mm:ss\" format.\n     */\n    static mixedTimeToDate(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            const [hours, minutes, seconds] = value.split(\":\");\n            const date = new Date();\n            if (hours)\n                date.setHours(parseInt(hours));\n            if (minutes)\n                date.setMinutes(parseInt(minutes));\n            if (seconds)\n                date.setSeconds(parseInt(seconds));\n            return date;\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given string value with \"-\" separator into a \"HH:mm:ss\" format.\n     */\n    static mixedTimeToString(value: string|any, skipSeconds: boolean = false): string|any {\n        value = value instanceof Date ? (value.getHours() + \":\" + value.getMinutes() + (!skipSeconds ? \":\" + value.getSeconds() : \"\")) : value;\n        if (typeof value === \"string\") {\n            return value.split(\":\")\n                .map(v => v.length === 1 ? \"0\" + v : v) // append zero at beginning if we have a first-zero-less number\n                .join(\":\");\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given value into datetime string in a \"YYYY-MM-DD HH-mm-ss\" format.\n     */\n    static mixedDateToDatetimeString(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            value = new Date(value);\n        }\n        if (value instanceof Date) {\n            return this.formatZerolessValue(value.getFullYear()) + \"-\" +\n                this.formatZerolessValue(value.getMonth() + 1) + \"-\" +\n                this.formatZerolessValue(value.getDate()) + \" \" +\n                this.formatZerolessValue(value.getHours()) + \":\" +\n                this.formatZerolessValue(value.getMinutes()) + \":\" +\n                this.formatZerolessValue(value.getSeconds()) + \".\" +\n                this.formatMilliseconds(value.getUTCMilliseconds());\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given value into utc datetime string in a \"YYYY-MM-DD HH-mm-ss\" format.\n     */\n    static mixedDateToUtcDatetimeString(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            value = new Date(value);\n        }\n        if (value instanceof Date) {\n            return this.formatZerolessValue(value.getUTCFullYear()) + \"-\" +\n                this.formatZerolessValue(value.getUTCMonth() + 1) + \"-\" +\n                this.formatZerolessValue(value.getUTCDate()) + \" \" +\n                this.formatZerolessValue(value.getUTCHours()) + \":\" +\n                this.formatZerolessValue(value.getUTCMinutes()) + \":\" +\n                this.formatZerolessValue(value.getUTCSeconds()) + \".\" +\n                this.formatMilliseconds(value.getUTCMilliseconds());\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts each item in the given array to string joined by \",\" separator.\n     */\n    static simpleArrayToString(value: any[]|any): string[]|any {\n        if (value instanceof Array) {\n            return (value as any[])\n                .map(i => String(i))\n                .join(\",\");\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given string to simple array split by \",\" separator.\n     */\n    static stringToSimpleArray(value: string|any): string|any {\n        if (value instanceof String || typeof value === \"string\") {\n            if (value.length > 0) {\n                return value.split(\",\");\n            } else {\n                return [];\n            }\n        }\n\n        return value;\n    }\n\n    static simpleJsonToString(value: any): string {\n        return JSON.stringify(value);\n    }\n\n    static stringToSimpleJson(value: string) {\n        return JSON.parse(value);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Formats given number to \"0x\" format, e.g. if it is 1 then it will return \"01\".\n     */\n    private static formatZerolessValue(value: number): string {\n        if (value < 10)\n            return \"0\" + value;\n\n        return String(value);\n    }\n\n    /**\n     * Formats given number to \"0x\" format, e.g. if it is 1 then it will return \"01\".\n     */\n    private static formatMilliseconds(value: number): string {\n        if (value < 100)\n            return \"0\" + value;\n\n        return String(value);\n    }\n\n}\n","import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {DateUtils} from \"../util/DateUtils\";\n\n/**\n * Holds information about insert operation into junction table.\n */\nexport interface JunctionInsert {\n\n    /**\n     * Relation of the junction table.\n     */\n    relation: RelationMetadata;\n\n    /**\n     * Entities that needs to be \"bind\" to the subject.\n     */\n    junctionEntities: ObjectLiteral[];\n}\n\n/**\n * Holds information about remove operation from the junction table.\n */\nexport interface JunctionRemove {\n\n    /**\n     * Relation of the junction table.\n     */\n    relation: RelationMetadata;\n\n    /**\n     * Entity ids that needs to be removed from the junction table.\n     */\n    junctionRelationIds: any[];\n}\n\n/**\n * Holds information about relation update in some subject.\n */\nexport interface RelationUpdate {\n\n    /**\n     * Relation that needs to be updated.\n     */\n    relation: RelationMetadata;\n\n    /**\n     * New value that needs to be set into into new relation.\n     */\n    value: any;\n}\n\n/**\n * Subject is a subject of persistence.\n * It holds information about each entity that needs to be persisted:\n * - what entity should be persisted\n * - what is database representation of the persisted entity\n * - what entity metadata of the persisted entity\n * - what is allowed to with persisted entity (insert/update/remove)\n *\n * Having this collection of subjects we can perform database queries.\n */\nexport class Subject {\n\n    // -------------------------------------------------------------------------\n    // Private Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Persist entity (changed entity).\n     */\n    private _persistEntity?: ObjectLiteral;\n\n    /**\n     * Database entity.\n     */\n    private _databaseEntity?: ObjectLiteral;\n\n    // -------------------------------------------------------------------------\n    // Public Readonly Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity metadata of the subject entity.\n     */\n    readonly metadata: EntityMetadata;\n\n    /**\n     * Date when this entity is persisted.\n     */\n    readonly date: Date = new Date();\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Indicates if this subject can be inserted into the database.\n     * This means that this subject either is newly persisted, either can be inserted by cascades.\n     */\n    canBeInserted: boolean = false;\n\n    /**\n     * Indicates if this subject can be updated in the database.\n     * This means that this subject either was persisted, either can be updated by cascades.\n     */\n    canBeUpdated: boolean = false;\n\n    /**\n     * Indicates if this subject MUST be removed from the database.\n     * This means that this subject either was removed, either was removed by cascades.\n     */\n    mustBeRemoved: boolean = false;\n\n    /**\n     * Differentiated columns between persisted and database entities.\n     */\n    diffColumns: ColumnMetadata[] = [];\n\n    /**\n     * Differentiated relations between persisted and database entities.\n     */\n    diffRelations: RelationMetadata[] = [];\n\n    /**\n     * List of relations which need to be unset.\n     * This is used to update relation from inverse side.\n     */\n    relationUpdates: RelationUpdate[] = [];\n\n    /**\n     * Records that needs to be inserted into the junction tables of this subject.\n     */\n    junctionInserts: JunctionInsert[] = [];\n\n    /**\n     * Records that needs to be removed from the junction tables of this subject.\n     */\n    junctionRemoves: JunctionRemove[] = [];\n\n    /**\n     * When subject is newly persisted it may have a generated entity id.\n     * In this case it should be written here.\n     */\n    generatedMap?: ObjectLiteral;\n\n    /**\n     * Generated id of the parent entity. Used in the class-table-inheritance.\n     */\n    parentGeneratedId?: any;\n\n    /**\n     * Used in newly persisted entities which are tree tables.\n     */\n    treeLevel?: number;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(metadata: EntityMetadata, entity?: ObjectLiteral, databaseEntity?: ObjectLiteral) {\n        this.metadata = metadata;\n        this._persistEntity = entity;\n        this._databaseEntity = databaseEntity;\n    }\n\n    // -------------------------------------------------------------------------\n    // Accessors\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets entity sent to the persistence (e.g. changed entity).\n     * Throws error if persisted entity was not set.\n     */\n    get entity(): ObjectLiteral {\n        if (!this._persistEntity)\n            throw new Error(`Persistence entity is not set for the given subject.`);\n\n        return this._persistEntity;\n    }\n\n    /**\n     * Checks if subject has a persisted entity.\n     */\n    get hasEntity(): boolean {\n        return !!this._persistEntity;\n    }\n\n    /**\n     * Gets entity from the database (e.g. original entity).\n     * THIS IS NOT RAW ENTITY DATA.\n     * Throws error if database entity was not set.\n     */\n    get databaseEntity(): ObjectLiteral {\n        if (!this._databaseEntity)\n            throw new Error(`Database entity is not set for the given subject.`);\n\n        return this._databaseEntity;\n    }\n\n    /**\n     * Checks if subject has a database entity.\n     */\n    get hasDatabaseEntity(): boolean {\n        return !!this._databaseEntity;\n    }\n\n    /**\n     * Sets entity from the database (e.g. original entity).\n     * Once database entity set it calculates differentiated columns and relations\n     * between persistent entity and database entity.\n     */\n    set databaseEntity(databaseEntity: ObjectLiteral) {\n        this._databaseEntity = databaseEntity;\n        this.recompute();\n    }\n\n    /**\n     * Gets entity target from the entity metadata of this subject.\n     */\n    get entityTarget(): Function|string {\n        return this.metadata.target;\n    }\n\n    /**\n     * Checks if this subject must be inserted into the database.\n     * Subject can be inserted into the database if it is allowed to be inserted (explicitly persisted or by cascades)\n     * and if it does not have database entity set.\n     */\n    get mustBeInserted() {\n        return this.canBeInserted && !this.hasDatabaseEntity;\n    }\n\n    /**\n     * Checks if this subject must be updated into the database.\n     * Subject can be updated in the database if it is allowed to be updated (explicitly persisted or by cascades)\n     * and if it does have differentiated columns or relations.\n     */\n    get mustBeUpdated() {\n        return this.canBeUpdated && (this.diffColumns.length > 0 || this.diffRelations.length > 0);\n    }\n\n    /**\n     * Checks if this subject has relations to be updated.\n     */\n    get hasRelationUpdates(): boolean {\n        return this.relationUpdates.length > 0;\n    }\n\n    /**\n     * Gets id of the persisted entity.\n     * If entity is not set then it returns undefined.\n     * If entity itself has an id then it simply returns it.\n     * If entity does not have an id then it returns newly generated id.\n\n    get getPersistedEntityIdMap(): any|undefined {\n        if (!this.hasEntity)\n            return undefined;\n\n        const entityIdMap = this.metadata.getDatabaseEntityIdMap(this.entity);\n        if (entityIdMap)\n            return entityIdMap;\n\n        if (this.newlyGeneratedId)\n            return this.metadata.createSimpleDatabaseIdMap(this.newlyGeneratedId);\n\n        return undefined;\n    }*/\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Validates this subject for errors.\n     * Subject cannot be at the same time inserted and updated, removed and inserted, removed and updated.\n     */\n    validate() {\n\n        if (this.mustBeInserted && this.mustBeRemoved)\n            throw new Error(`Removed entity ${this.metadata.name} is also scheduled for insert operation. This looks like ORM problem. Please report a github issue.`);\n\n        if (this.mustBeUpdated && this.mustBeRemoved)\n            throw new Error(`Removed entity \"${this.metadata.name}\" is also scheduled for update operation. ` +\n                `Make sure you are not updating and removing same object (note that update or remove may be executed by cascade operations).`);\n\n        if (this.mustBeInserted && this.mustBeUpdated)\n            throw new Error(`Inserted entity ${this.metadata.name} is also scheduled for updated operation. This looks like ORM problem. Please report a github issue.`);\n\n    }\n\n    /**\n     * Performs entity re-computations.\n     */\n    recompute() {\n        if (this.hasEntity && this._databaseEntity) {\n            this.computeDiffColumns();\n            this.computeDiffRelationalColumns();\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Differentiate columns from the updated entity and entity stored in the database.\n     */\n    protected computeDiffColumns(): void {\n        this.diffColumns = this.metadata.columns.filter(column => {\n\n            // prepare both entity and database values to make comparision\n            let entityValue = column.getEntityValue(this.entity);\n            let databaseValue = column.getEntityValue(this.databaseEntity);\n            if (entityValue === undefined)\n                return false;\n\n            // normalize special values to make proper comparision (todo: arent they already normalized at this point?!)\n            if (entityValue !== null && entityValue !== undefined) {\n                if (column.type === \"date\") {\n                    entityValue = DateUtils.mixedDateToDateString(entityValue);\n\n                } else if (column.type === \"time\") {\n                    entityValue = DateUtils.mixedDateToTimeString(entityValue);\n\n                } else if (column.type === \"datetime\" || column.type === Date) {\n                    entityValue = DateUtils.mixedDateToUtcDatetimeString(entityValue);\n                    databaseValue = DateUtils.mixedDateToUtcDatetimeString(databaseValue);\n\n                } else if (column.type === \"json\" || column.type === \"jsonb\") {\n                    entityValue = JSON.stringify(entityValue);\n                    if (databaseValue !== null && databaseValue !== undefined)\n                        databaseValue = JSON.stringify(databaseValue);\n\n                } else if (column.type === \"sample-array\") {\n                    entityValue = DateUtils.simpleArrayToString(entityValue);\n                    databaseValue = DateUtils.simpleArrayToString(databaseValue);\n                }\n            }\n            // todo: this mechanism does not get in count embeddeds in embeddeds\n\n            // if value is not defined then no need to update it\n            // if (!column.isInEmbedded && this.entity[column.propertyName] === undefined)\n            //     return false;\n            //\n            // if value is in embedded and is not defined then no need to update it\n            // if (column.isInEmbedded && (this.entity[column.embeddedProperty] === undefined || this.entity[column.embeddedProperty][column.propertyName] === undefined))\n            //     return false;\n\n            // if its a special column or value is not changed - then do nothing\n            if (column.isVirtual ||\n                column.isParentId ||\n                column.isDiscriminator ||\n                column.isUpdateDate ||\n                column.isVersion ||\n                column.isCreateDate ||\n                entityValue === databaseValue)\n                return false;\n\n            // filter out \"relational columns\" only in the case if there is a relation object in entity\n            const relation = this.metadata.findRelationWithDbName(column.databaseName);\n            if (relation) {\n                const value = relation.getEntityValue(this.entity);\n                if (value !== null && value !== undefined)\n                    return false;\n            }\n\n            return true;\n        });\n    }\n\n    /**\n     * Difference columns of the owning one-to-one and many-to-one columns.\n     */\n    protected computeDiffRelationalColumns(/*todo: updatesByRelations: UpdateByRelationOperation[], */): void {\n        this.diffRelations = this.metadata.relations.filter(relation => {\n            if (!relation.isManyToOne && !(relation.isOneToOne && relation.isOwning))\n                return false;\n\n            // here we cover two scenarios:\n            // 1. related entity can be another entity which is natural way\n            // 2. related entity can be entity id which is hacked way of updating entity\n            // todo: what to do if there is a column with relationId? (cover this too?)\n            const entityValue = relation.getEntityValue(this.entity);\n            const updatedEntityRelationId: any = entityValue instanceof Object\n                    ? relation.inverseEntityMetadata.getEntityIdMixedMap(entityValue)\n                    : entityValue;\n\n            const dbEntityRelationId = relation.getEntityValue(this.databaseEntity);\n\n            // todo: try to find if there is update by relation operation - we dont need to generate update relation operation for this\n            // todo: if (updatesByRelations.find(operation => operation.targetEntity === this && operation.updatedRelation === relation))\n            // todo:     return false;\n\n            // we don't perform operation over undefined properties\n            if (updatedEntityRelationId === undefined)\n                return false;\n\n            // if both are empty totally no need to do anything\n            if ((updatedEntityRelationId === undefined || updatedEntityRelationId === null) &&\n                (dbEntityRelationId === undefined || dbEntityRelationId === null))\n                return false;\n\n            // if relation ids aren't equal then we need to update them\n            return updatedEntityRelationId !== dbEntityRelationId;\n        });\n    }\n\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\n\nexport class OrmUtils {\n\n    static splitClassesAndStrings<T>(clsesAndStrings: T[]|string[]): [T[], string[]] {\n        return [\n            (clsesAndStrings as T[]).filter(cls => typeof cls !== \"string\"),\n            (clsesAndStrings as string[]).filter(str => typeof str === \"string\"),\n        ];\n    }\n\n    static groupBy<T, R>(array: T[], propertyCallback: (item: T) => R): { id: R, items: T[] }[] {\n        return array.reduce((groupedArray, value) => {\n            const key = propertyCallback(value);\n            let grouped = groupedArray.find(i => i.id === key);\n            if (!grouped) {\n                grouped = { id: key, items: [] };\n                groupedArray.push(grouped);\n            }\n            grouped.items.push(value);\n            return groupedArray;\n        }, [] as Array<{ id: R, items: T[] }>);\n    }\n\n    static uniq<T>(array: T[], criteria?: (item: T) => any): T[];\n    static uniq<T, K extends keyof T>(array: T[], property: K): T[];\n    static uniq<T, K extends keyof T>(array: T[], criteriaOrProperty?: ((item: T) => any)|K): T[] {\n        return array.reduce((uniqueArray, item) => {\n            let found: boolean = false;\n            if (criteriaOrProperty instanceof Function) {\n                const itemValue = criteriaOrProperty(item);\n                found = !!uniqueArray.find(uniqueItem => criteriaOrProperty(uniqueItem) === itemValue);\n\n            } else if (typeof criteriaOrProperty === \"string\") {\n                found = !!uniqueArray.find(uniqueItem => uniqueItem[criteriaOrProperty] === item[criteriaOrProperty]);\n\n            } else {\n                found = uniqueArray.indexOf(item) !== -1;\n            }\n\n            if (!found)\n                uniqueArray.push(item);\n\n            return uniqueArray;\n        }, [] as T[]);\n    }\n\n    static isObject(item: any) {\n        return (item && typeof item === \"object\" && !Array.isArray(item));\n    }\n\n    /**\n     * Deep Object.assign.\n     *\n     * @see http://stackoverflow.com/a/34749873\n     */\n    static mergeDeep(target: any, ...sources: any[]): any {\n        if (!sources.length) return target;\n        const source = sources.shift();\n\n        if (this.isObject(target) && this.isObject(source)) {\n            for (const key in source) {\n                if (this.isObject(source[key])) {\n                    if (!target[key]) Object.assign(target, { [key]: {} });\n                    this.mergeDeep(target[key], source[key]);\n                } else {\n                    Object.assign(target, { [key]: source[key] });\n                }\n            }\n        }\n\n        return this.mergeDeep(target, ...sources);\n    }\n\n    /**\n     * Deep compare objects.\n     *\n     * @see http://stackoverflow.com/a/1144249\n     */\n    static deepCompare(...args: any[]) {\n        let i: any, l: any, leftChain: any, rightChain: any;\n\n        function compare2Objects(x: any, y: any) {\n            let p;\n\n            // remember that NaN === NaN returns false\n            // and isNaN(undefined) returns true\n            if (isNaN(x) && isNaN(y) && typeof x === \"number\" && typeof y === \"number\")\n                return true;\n\n            // Compare primitives and functions.\n            // Check if both arguments link to the same object.\n            // Especially useful on the step where we compare prototypes\n            if (x === y)\n                return true;\n\n            if (x.equals instanceof Function && x.equals(y))\n                return true;\n\n            // Works in case when functions are created in constructor.\n            // Comparing dates is a common scenario. Another built-ins?\n            // We can even handle functions passed across iframes\n            if ((typeof x === \"function\" && typeof y === \"function\") ||\n                (x instanceof Date && y instanceof Date) ||\n                (x instanceof RegExp && y instanceof RegExp) ||\n                (x instanceof String && y instanceof String) ||\n                (x instanceof Number && y instanceof Number))\n                return x.toString() === y.toString();\n\n            // At last checking prototypes as good as we can\n            if (!(x instanceof Object && y instanceof Object))\n                return false;\n\n            if (x.isPrototypeOf(y) || y.isPrototypeOf(x))\n                return false;\n\n            if (x.constructor !== y.constructor)\n                return false;\n\n            if (x.prototype !== y.prototype)\n                return false;\n\n            // Check for infinitive linking loops\n            if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1)\n                return false;\n\n            // Quick checking of one object being a subset of another.\n            // todo: cache the structure of arguments[0] for performance\n            for (p in y) {\n                if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                    return false;\n                }\n                else if (typeof y[p] !== typeof x[p]) {\n                    return false;\n                }\n            }\n\n            for (p in x) {\n                if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                    return false;\n                }\n                else if (typeof y[p] !== typeof x[p]) {\n                    return false;\n                }\n\n                switch (typeof (x[p])) {\n                    case \"object\":\n                    case \"function\":\n\n                        leftChain.push(x);\n                        rightChain.push(y);\n\n                        if (!compare2Objects (x[p], y[p])) {\n                            return false;\n                        }\n\n                        leftChain.pop();\n                        rightChain.pop();\n                        break;\n\n                    default:\n                        if (x[p] !== y[p]) {\n                            return false;\n                        }\n                        break;\n                }\n            }\n\n            return true;\n        }\n\n        if (arguments.length < 1) {\n            return true; // Die silently? Don't know how to handle such case, please help...\n            // throw \"Need two or more arguments to compare\";\n        }\n\n        for (i = 1, l = arguments.length; i < l; i++) {\n\n            leftChain = []; // Todo: this can be cached\n            rightChain = [];\n\n            if (!compare2Objects(arguments[0], arguments[i])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Transforms given value into boolean value.\n     */\n    static toBoolean(value: any): boolean {\n        if (typeof value === \"boolean\")\n            return value;\n\n        if (typeof value === \"string\")\n            return value === \"true\" || value === \"1\";\n\n        if (typeof value === \"number\")\n            return value > 0;\n\n        return false;\n    }\n\n    /**\n     * Composes an object from the given array of keys and values.\n     */\n    static zipObject(keys: any[], values: any[]): ObjectLiteral {\n        return keys.reduce((object, column, index) => {\n            object[column] = values[index];\n            return object;\n        }, {} as ObjectLiteral);\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {Connection} from \"../connection/Connection\";\nimport {Subject} from \"./Subject\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {OrmUtils} from \"../util/OrmUtils\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * To be able to execute persistence operations we need to load all entities from the database we need.\n * Loading should be efficient - we need to load entities in as few queries as possible + load as less data as we can.\n * This is how we determine which entities needs to be loaded from db:\n *\n * 1. example with cascade updates and inserts:\n *\n * [Y] - means \"yes, we load\"\n * [N] - means \"no, we don't load\"\n * in {} braces we specify what cascade options are set between relations\n *\n * if Post is new, author is not set in the post\n *\n * [Y] Post -> {all} // yes because of \"update\" and \"insert\" cascades, no because of \"remove\"\n *   [Y] Author -> {all} // no because author is not set\n *     [Y] Photo -> {all} // no because author and its photo are not set\n *       [Y] Tag -> {all} // no because author and its photo and its tag are not set\n *\n * if Post is new, author is new (or anything else is new)\n * if Post is updated\n * if Post and/or Author are updated\n *\n * [Y] Post -> {all} // yes because of \"update\" and \"insert\" cascades, no because of \"remove\"\n *   [Y] Author -> {all} // yes because of \"update\" and \"insert\" cascades, no because of \"remove\"\n *     [Y] Photo -> {all} // yes because of \"update\" and \"insert\" cascades, no because of \"remove\"\n *       [Y] Tag -> {all} // yes because of \"update\" and \"insert\" cascades, no because of \"remove\"\n *\n * Here we load post, author, photo, tag to check if they are new or not to persist insert or update operation.\n * We load post, author, photo, tag only if they exist in the relation.\n * From these examples we can see that we always load entity relations when it has \"update\" or \"insert\" cascades.\n *\n * 2. example with cascade removes\n *\n * if entity is new its remove operations by cascades should not be executed\n * if entity is updated then values that are null or missing in array (not undefined!, undefined means skip - don't do anything) are treated as removed\n * if entity is removed then all its downside relations which has cascade remove should be removed\n *\n * Once we find removed entity - we load it, and every downside entity which has \"remove\" cascade set.\n *\n * At the end we have all entities we need to operate with.\n * Next step is to store all loaded entities to manipulate them efficiently.\n *\n * Rules of updating by cascades.\n * Insert operation can lead to:\n *  - insert operations\n *  - update operations\n * Update operation can lead to:\n *  - insert operations\n *  - update operations\n *  - remove operations\n * Remove operation can lead to:\n *  - remove operation\n */\nexport class SubjectBuilder<Entity extends ObjectLiteral> {\n\n    // -------------------------------------------------------------------------\n    // Protected properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * If this gonna be reused then what to do with marked flags?\n     * One of solution can be clone this object and reset all marked states for this persistence.\n     * Or from reused just extract databaseEntities from their subjects? (looks better)\n     */\n    operateSubjects: Subject[] = [];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection, protected queryRunner: QueryRunner) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Builds operations for entity that is being inserted/updated.\n     */\n    async persist(entity: Entity, metadata: EntityMetadata): Promise<void> {\n\n        // create subject for currently persisted entity and mark that it can be inserted and updated\n        const mainSubject = new Subject(metadata, entity);\n        mainSubject.canBeInserted = true;\n        mainSubject.canBeUpdated = true;\n        this.operateSubjects.push(mainSubject);\n\n        // next step we build list of subjects we will operate with\n        // these subjects are subjects that we need to insert or update alongside with main persisted entity\n        this.buildCascadeUpdateAndInsertOperateSubjects(mainSubject);\n\n        // next step is to load database entities of all operate subjects\n        await this.loadOperateSubjectsDatabaseEntities();\n\n        // next step - we filter subjects with database entities (only for non-new entities)\n        // and find operate subjects that needs to be removed\n        // here we also find operate subjects which relations should be updated\n        // these relations usually are \"update from inverse side\" operations\n        const operateSubjectsWithDatabaseEntities = this.operateSubjects.filter(subject => subject.hasDatabaseEntity);\n        await Promise.all(operateSubjectsWithDatabaseEntities.map(subject => {\n            return this.buildCascadeRemovedAndRelationUpdateOperateSubjects(subject);\n        }));\n\n        // finally find which operate subjects have insert and remove operations in their junction tables\n        await this.buildJunctionOperations({ insert: true, remove: true });\n    }\n\n    /**\n     * Builds only remove operations for entity that is being removed.\n     */\n    async remove(entity: Entity, metadata: EntityMetadata): Promise<void> {\n\n        // create subject for currently removed entity and mark that it must be removed\n        const mainSubject = new Subject(metadata, entity);\n        mainSubject.mustBeRemoved = true;\n        this.operateSubjects.push(mainSubject);\n\n        // next step we build list of subjects we will operate with\n        // these subjects are subjects that we need to remove alongside with main removed entity\n        this.buildCascadeRemoveOperateSubjects(mainSubject);\n\n        // next step is to load database entities for all operate subjects\n        await this.loadOperateSubjectsDatabaseEntities();\n\n        // next step - we filter subjects with database entities (only for non-new entities)\n        // and find operate subjects that needs to be removed\n        // todo(this should not be in remove?) // here we also find operate subjects which relations should be updated\n        // todo(this should not be in remove?) // these relations usually are \"update from inverse side\" operations\n        const operateSubjectsWithDatabaseEntities = this.operateSubjects.filter(subject => subject.hasDatabaseEntity);\n        await Promise.all(operateSubjectsWithDatabaseEntities.map(subject => {\n            return this.buildCascadeRemovedAndRelationUpdateOperateSubjects(subject);\n        }));\n\n        // finally find which operate subjects have remove operations in their junction tables\n        await this.buildJunctionOperations({ insert: false, remove: true });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Builds and pushes to array of operate entities all entities that we will work with.\n     * These are only relational entities which has insert and update cascades.\n     * All such entities will be loaded from the database, because they can be inserted or updated.\n     * That's why we load them - to understand if they should be inserted or updated, or which columns we need to update.\n     * We can't add removed entities here, because to know which entity was removed we need first to\n     * load original entity (particularly its id) from the database.\n     * That's why we first need to load all changed entities, then extract ids of the removed entities from them,\n     * and only then load removed entities by extracted ids.\n     */\n    protected buildCascadeUpdateAndInsertOperateSubjects(subject: Subject): void {\n        subject.metadata\n            .extractRelationValuesFromEntity(subject.entity, subject.metadata.relations)\n            .filter(([relation, relationEntity, relationEntityMetadata]) => {\n\n                // we need only defined values and insert or update cascades of the relation should be set\n                return  relationEntity !== undefined &&\n                        relationEntity !== null &&\n                        (relation.isCascadeInsert || relation.isCascadeUpdate);\n            })\n            .forEach(([relation, relationEntity, relationEntityMetadata]) => {\n\n                // if we already has this entity in list of operated subjects then skip it to avoid recursion\n                const alreadyExistRelationEntitySubject = this.findByEntityLike(relationEntityMetadata.target, relationEntity);\n                if (alreadyExistRelationEntitySubject) {\n                    if (alreadyExistRelationEntitySubject.canBeInserted === false) // if its not marked for insertion yet\n                        alreadyExistRelationEntitySubject.canBeInserted = relation.isCascadeInsert === true;\n                    if (alreadyExistRelationEntitySubject.canBeUpdated === false) // if its not marked for update yet\n                        alreadyExistRelationEntitySubject.canBeUpdated = relation.isCascadeUpdate === true;\n                    return;\n                }\n\n                // mark subject with what we can do with it\n                // and add to the array of subjects to load only if there is no same entity there already\n                const relationEntitySubject = new Subject(relationEntityMetadata, relationEntity);\n                relationEntitySubject.canBeInserted = relation.isCascadeInsert === true;\n                relationEntitySubject.canBeUpdated = relation.isCascadeUpdate === true;\n                this.operateSubjects.push(relationEntitySubject);\n\n                // go recursively and find other entities we need to insert/update\n                this.buildCascadeUpdateAndInsertOperateSubjects(relationEntitySubject);\n            });\n    }\n\n    /**\n     * Builds and pushes to array of operate entities all entities that must be removed.\n     */\n    protected buildCascadeRemoveOperateSubjects(subject: Subject): void {\n        subject.metadata\n            .extractRelationValuesFromEntity(subject.entity, subject.metadata.relations)\n            .filter(([relation, relationEntity, relationEntityMetadata]) => {\n\n                // we need only defined values and insert cascades of the relation should be set\n                return relationEntity !== undefined && relationEntity !== null && relation.isCascadeRemove;\n            })\n            .forEach(([relation, relationEntity, relationEntityMetadata]) => {\n\n                // if we already has this entity in list of operated subjects then skip it to avoid recursion\n                const alreadyExistValueSubject = this.findByEntityLike(relationEntityMetadata.target, relationEntity);\n                if (alreadyExistValueSubject) {\n                    alreadyExistValueSubject.mustBeRemoved = true;\n                    return;\n                }\n\n                // add to the array of subjects to load only if there is no same entity there already\n                const valueSubject = new Subject(relationEntityMetadata, relationEntity);\n                valueSubject.mustBeRemoved = true;\n                this.operateSubjects.push(valueSubject);\n\n                // go recursively and find other entities we need to remove\n                this.buildCascadeRemoveOperateSubjects(valueSubject);\n            });\n    }\n\n    /**\n     * Loads database entities for all operate subjects which do not have database entity set.\n     * All entities that we load database entities for are marked as updated or inserted.\n     * To understand which of them really needs to be inserted or updated we need to load\n     * their original representations from the database.\n     */\n    protected async loadOperateSubjectsDatabaseEntities(): Promise<void> {\n\n        // we are grouping subjects by target to perform more optimized queries using WHERE IN operator\n        // go throw the groups and perform loading of database entities of each subject in the group\n        const promises = this.groupByEntityTargets().map(async subjectGroup => {\n\n            // prepare entity ids of the subjects we need to load\n            const allIds = subjectGroup.subjects\n                .filter(subject => !subject.hasDatabaseEntity) // we don't load if subject already has a database entity loaded\n                .filter(subject => {\n                    return !subject.metadata.isEntityMapEmpty(subject.entity);\n                }) // we only need entity id\n                .map(subject => { // we don't need empty ids\n                    // console.log(subject.entity);\n                    return subject.metadata.getEntityIdMap(subject.entity);\n                    // if (mixedId instanceof Object)\n                    //     return Object.keys(mixedId).every(key => mixedId[key] !== undefined && mixedId[key] !== null && mixedId[key] !== \"\");\n                    //\n                    // return mixedId !== undefined && mixedId !== null && mixedId !== \"\";\n                });\n\n            // if there no ids found (which means all entities are new and have generated ids) - then nothing to load there\n            // console.log(\"allIds: \", allIds);\n            // console.log(\"subject.entity: \", subjectGroup.subjects);\n            // console.log(\"allIds: \", allIds);\n            if (!allIds.length)\n                return;\n            // console.log(\"Y\");\n\n            // load database entities for all given ids\n            // todo: such implementation is temporary, need to create a good abstraction there\n            // todo: its already possible to do that with repository.findByIds method however setting \"RELATION_ID_VALUES\" option is an issue\n            // todo: also custom queryRunnerProvider is an issue\n            let entities: any[];\n            if (this.connection.driver instanceof MongoDriver) {\n\n                entities = await this.connection\n                    .getMongoRepository<ObjectLiteral>(subjectGroup.target)\n                    .findByIds(allIds);\n\n            } else {\n                entities = await this.connection\n                    .getRepository<ObjectLiteral>(subjectGroup.target)\n                    .createQueryBuilder(\"subject\", this.queryRunner)\n                    .whereInIds(allIds)\n                    .loadAllRelationIds()\n                    .getMany();\n            }\n\n            // now when we have entities we need to find subject of each entity\n            // and insert that entity into database entity of the found subject\n            entities.forEach(entity => {\n                // console.log(1);\n                const subject = this.findByEntityLike(subjectGroup.target, entity);\n                if (subject)\n                    subject.databaseEntity = entity;\n            });\n\n        });\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * We need to load removed entity when:\n     *  - entity with relations is not new (this can be determined only after entity is loaded from db)\n     *      (note: simple \"id\" check will not work because id can be not generated)\n     *  - entity missing relation. When relation is simple\n     *      - in the case of one-to-one owner (with join column) relation we need to load owner entity\n     *      - in the case of one-to-one (without join column) relation we need to load inverse side entity\n     *      - in the case of many-to-one relations we need to load entity itself\n     *      - in the case of one-to-many relations we need to load entities by relation from inverse side\n     *\n     *  Before loading each entity we need to check in the loaded subjects - maybe it was already loaded.\n     *\n     *  BIG NOTE: objects are being removed by cascades not only when relation is removed, but also when\n     *  relation is replaced (e.g. changed with different object).\n     */\n    protected async buildCascadeRemovedAndRelationUpdateOperateSubjects(subject: Subject): Promise<void> {\n\n        // note: we can't use extractRelationValuesFromEntity here because it does not handle empty arrays\n        const promises = subject.metadata.relations.map(async relation => {\n            const valueMetadata = relation.inverseEntityMetadata;\n            const qbAlias = valueMetadata.tableName;\n\n            // added for type-safety, but subject without databaseEntity cant come here anyway because of checks on upper levels\n            if (!subject.hasDatabaseEntity) return;\n\n            // for one-to-one owner and many-to-one relations no need to load entity to check if something removed\n            // because join column is in this side of relation and we have a database entity with which we can compare\n            // and understand if relation was removed or not\n            if (relation.isOneToOneOwner || relation.isManyToOne) {\n\n                // we only work with cascade removes here\n                if (!relation.isCascadeRemove) return;\n\n                /**\n                 * By example (one-to-one owner). Let's say we have a one-to-one relation between Post and Details.\n                 * Post contains detailsId. It means he owns relation. Post has cascade remove with details.\n                 * Now here we have a post object with removed details.\n                 * We need to remove Details if post.details = null\n                 * or if post.details != databasePost.details\n                 */\n\n                /**\n                 * By example (many-to-one). Let's say we have a many-to-one relation between Post and Details.\n                 * Post contains detailsId. It means he owns relation.\n                 * It also means that post can have only one details, and details can have multiple posts.\n                 * Post has cascade remove with details.\n                 * Now here we have a post object with removed details.\n                 * We need to remove Details (one) if post.details = null\n                 * or if post.details != databasePost.details\n                 */\n\n                // (example) \"relation\" - is a relation in post with details.\n                // (example) \"valueMetadata\" - is an entity metadata of the Details object.\n                // (example) \"persistValue\" - is a detailsId from the persisted entity\n\n                // note that if databaseEntity has relation, it can only be a relation id,\n                // because of query builder option \"RELATION_ID_VALUES\" we used\n                const relationIdInDatabaseEntity = relation.getEntityValue(subject.databaseEntity); // (example) returns post.detailsId\n\n                // if database relation id does not exist in the database object then nothing to remove\n                if (relationIdInDatabaseEntity === null || relationIdInDatabaseEntity === undefined)\n                    return;\n\n                // if this subject is persisted subject then we get its value to check if its not empty or its values changed\n                let persistValueRelationId: any = undefined, persistValue: any = undefined;\n                if (subject.hasEntity) {\n                    persistValue = relation.getEntityValue(subject.entity);\n                    if (persistValue === null) persistValueRelationId = null;\n                    if (persistValue) persistValueRelationId = relation.joinColumns.reduce((map, column) => column.referencedColumn!.getEntityValueMap(persistValue), {} as ObjectLiteral);\n                    if (persistValueRelationId === undefined) return; // skip undefined properties\n                }\n\n                // object is removed only if relation id in the persisted entity is empty or is changed\n                // if (persistValueRelationId !== null && persistValueRelationId === relationIdInDatabaseEntity)\n                //     return;\n                // console.log(\"relationIdInDatabaseEntity:\", relationIdInDatabaseEntity);\n                // console.log(\"persistValue:\", persistValue);\n                // console.log(\"compareEntities:\", relation.entityMetadata.compareEntities(relationIdInDatabaseEntity, persistValue));\n                // console.log(\"compareIds:\", relation.entityMetadata.compareIds(relationIdInDatabaseEntity, persistValue));\n                if (persistValueRelationId !== null && relation.entityMetadata.compareIds(relationIdInDatabaseEntity, persistValue))\n                    return;\n\n                // first check if we already loaded this object before load from the database\n                let alreadyLoadedRelatedDatabaseSubject = this.operateSubjects.find(relatedSubject => {\n\n                    // (example) filter only subject that has database entity loaded and its target is Details\n                    if (!relatedSubject.hasDatabaseEntity || relatedSubject.entityTarget !== valueMetadata.target)\n                        return false;\n\n                    // (example) here we seek a Details loaded from the database in the subjects\n                    // (example) here relatedSubject.databaseEntity is a Details\n                    // (example) and we need to compare details.id === post.detailsId\n                    return relation.entityMetadata.compareIds(relationIdInDatabaseEntity, relation.getEntityValue(relatedSubject.databaseEntity));\n                });\n\n                // if not loaded yet then load it from the database\n                if (!alreadyLoadedRelatedDatabaseSubject) {\n\n                    // (example) we need to load a details where details.id = post.details\n                    const qb = this.connection\n                        .getRepository<ObjectLiteral>(valueMetadata.target)\n                        .createQueryBuilder(qbAlias, this.queryRunner) // todo: this wont work for mongodb. implement this in some method and call it here instead?\n                        .loadAllRelationIds();\n\n                    const condition = relation.joinColumns.map(joinColumn => {\n                        return `${qbAlias}.${joinColumn.referencedColumn!.propertyPath} = :${joinColumn.databaseName}`;\n                    }).join(\" AND \");\n\n                    const parameters = relation.joinColumns.reduce((parameters, joinColumn) => {\n                        parameters[joinColumn.databaseName] = joinColumn.referencedColumn!.getEntityValue(relationIdInDatabaseEntity);\n                        return parameters;\n                    }, {} as ObjectLiteral);\n\n                    qb.where(condition)\n                        .setParameters(parameters);\n\n                    const databaseEntity = await qb.getOne();\n\n                    if (databaseEntity) {\n                        alreadyLoadedRelatedDatabaseSubject = new Subject(valueMetadata, undefined, databaseEntity);\n                        this.operateSubjects.push(alreadyLoadedRelatedDatabaseSubject);\n                    }\n                }\n\n                if (alreadyLoadedRelatedDatabaseSubject) {\n\n                    // if object is already marked as removed then no need to proceed because it already was proceed\n                    // if we remove this it will cause a recursion\n                    if (alreadyLoadedRelatedDatabaseSubject.mustBeRemoved)\n                        return;\n\n                    alreadyLoadedRelatedDatabaseSubject.mustBeRemoved = true;\n                    await this.buildCascadeRemovedAndRelationUpdateOperateSubjects(alreadyLoadedRelatedDatabaseSubject);\n                }\n            }\n\n            // for one-to-one not owner we need to load entity to understand that it was really removed or not,\n            // since column value that indicates relation is stored on inverse side\n            if (relation.isOneToOneNotOwner) {\n\n                // we only work with cascade removes here\n                if (!relation.isCascadeRemove) return; // todo: no\n\n                /**\n                 * By example. Let's say we have a one-to-one relation between Post and Details.\n                 * Post contains detailsId. It means he owns relation. Details has cascade remove with post.\n                 * Now here we have a details object with removed post.\n                 * We need to remove Post if details.post = null and databasePost.detailsId = details.id exist in the db,\n                 * or if databasePost.id === details.post.id (we need to load it) and databasePost.detailsId != details.id\n                 */\n\n                // (example) \"relation\" - is a relation in details with post.\n                // (example) \"valueMetadata\" - is an entity metadata of the Post object.\n                // (example) \"subject.databaseEntity\" - is a details object\n\n                // if this subject is persisted subject then we get its value to check if its not empty or its values changed\n                let persistValueRelationId: any = undefined;\n                if (subject.hasEntity && !subject.mustBeRemoved) {\n                    const persistValue = relation.getEntityValue(subject.entity);\n                    if (persistValue) persistValueRelationId = relation.inverseRelation!.getEntityValue(persistValue);\n                    if (persistValueRelationId === undefined) return; // skip undefined properties\n                }\n\n                // (example) returns us referenced column (detail's id)\n                const relationIdInDatabaseEntity = relation.inverseRelation!.joinColumns[0].referencedColumn!.getEntityValue(subject.databaseEntity);\n\n                // if database relation id does not exist then nothing to remove (but can this be possible?)\n                if (relationIdInDatabaseEntity === null || relationIdInDatabaseEntity === undefined)\n                    return;\n\n                // first check if we already have this object loaded before load from the database\n                let alreadyLoadedRelatedDatabaseSubject = this.operateSubjects.find(relatedSubject => {\n\n                    // (example) filter only subject that has database entity loaded and its target is Post\n                    if (!relatedSubject.hasDatabaseEntity || relatedSubject.entityTarget !== valueMetadata.target)\n                        return false;\n\n                    // (example) here we seek a Post loaded from the database in the subjects\n                    // (example) here relatedSubject.databaseEntity is a Post\n                    // (example) and we need to compare post.detailsId === details.id\n                    return relation.inverseRelation!.getEntityValue(relatedSubject.databaseEntity) === relationIdInDatabaseEntity;\n                });\n\n                // if not loaded yet then load it from the database\n                if (!alreadyLoadedRelatedDatabaseSubject) {\n\n                    // (example) we need to load a post where post.detailsId = details.id\n                    const databaseEntity = await this.connection\n                        .getRepository<ObjectLiteral>(valueMetadata.target)\n                        .createQueryBuilder(qbAlias, this.queryRunner) // todo: this wont work for mongodb. implement this in some method and call it here instead?\n                        .where(qbAlias + \".\" + relation.inverseSidePropertyPath + \"=:id\") // TODO relation.inverseRelation.joinColumns\n                        .setParameter(\"id\", relationIdInDatabaseEntity) // (example) subject.entity is a details here, and the value is details.id\n                        .loadAllRelationIds()\n                        .getOne();\n\n                    // add only if database entity exist - because in the case of inverse side of the one-to-one relation\n                    // we cannot check if it was removed or not until we query the database\n                    // and it can be a situation that relation wasn't exist at all. This is particular that case\n                    alreadyLoadedRelatedDatabaseSubject = new Subject(valueMetadata, undefined, databaseEntity);\n                    this.operateSubjects.push(alreadyLoadedRelatedDatabaseSubject);\n                }\n\n                // check if we really has a relation between entities. If relation not found then alreadyLoadedRelatedDatabaseSubject will be empty\n                if (alreadyLoadedRelatedDatabaseSubject && alreadyLoadedRelatedDatabaseSubject.hasDatabaseEntity) {\n\n                    // also check if relation value exist then then make sure its changed\n                    // (example) persistValue is a postFromPersistedDetails here\n                    // (example) alreadyLoadedRelatedDatabaseSubject.databaseEntity is a postFromDatabaseDetails here\n                    // (example) postFromPersistedDetails.id === postFromDatabaseDetails - means nothing changed\n                    const inverseEntityRelationId = relation.inverseRelation!.getEntityValue(alreadyLoadedRelatedDatabaseSubject.databaseEntity);\n                    if (persistValueRelationId && persistValueRelationId === inverseEntityRelationId)\n                        return;\n\n                    // if object is already marked as removed then no need to proceed because it already was proceed\n                    // if we remove this it will cause a recursion\n                    if (alreadyLoadedRelatedDatabaseSubject.mustBeRemoved)\n                        return;\n\n                    alreadyLoadedRelatedDatabaseSubject.mustBeRemoved = true;\n                    await this.buildCascadeRemovedAndRelationUpdateOperateSubjects(alreadyLoadedRelatedDatabaseSubject);\n                }\n            }\n\n            // for one-to-many we need to load entities to understand which was really removed\n            // since column value that indicates relation is stored on inverse side\n            if (relation.isOneToMany || relation.isManyToMany) {\n\n                // we only work with cascade removes here\n                // if (!relation.isCascadeRemove && !relation.isCascadeUpdate) return;\n\n                /**\n                 * By example. Let's say we have a one-to-many relation between Post and Details.\n                 * Post contains detailsId. It means he owns relation.\n                 * It also means that one details contains multiple post, and one post contain only one details.\n                 * Details has cascade remove with post.\n                 * Now here we have a details object with removed post.\n                 * There can be one or multiple removed posts, because posts is an array in details.\n                 * If details.posts is undefined then we skip it as we do with any persisted undefined property.\n                 * If details.posts is an empty array it means all its items should be removed.\n                 * If details.posts is a null it means same - all its items has been removed.\n                 * We need to remove each Post in the databaseDetails where post is missing in details.posts\n                 * but databasePost.detailsId = details.id exist in the db.\n                 */\n\n                // (example) \"relation\" - is a relation in details with post.\n                // (example) \"valueMetadata\" - is an entity metadata of the Post object.\n                // (example) \"subject.databaseEntity\" - is a details object\n\n                // if this subject is persisted subject then we get its value to check if its not empty or its values changed\n                let persistValue: any = undefined;\n                if (subject.hasEntity) {\n                    persistValue = relation.getEntityValue(subject.entity);\n                    if (persistValue === undefined) return; // skip undefined properties\n                }\n\n                // we can't get already loaded objects from loadMap because we don't know exactly how\n                // many objects are in database entity, and entities from loadMap may return us not all of them\n                // that's why we are forced to load all its entities from the database even if loaded some of them before\n                // (example) we need to load a posts where post.detailsId = details.id\n                let databaseEntities: ObjectLiteral[] = [];\n\n                // create shortcuts for better readability\n                const escape = (name: string) => this.connection.driver.escape(name);\n\n                if (relation.isManyToManyOwner) {\n\n                    // we only need to load inverse entities if cascade removes are set\n                    // because remove by cascades is the only reason we need relational entities here\n                    if (!relation.isCascadeRemove) return;\n\n                    const joinAlias = escape(\"persistenceJoinedRelation\");\n\n                    const joinColumnConditions = relation.joinColumns.map(joinColumn => {\n                        return `${joinAlias}.${joinColumn.propertyName} = :${joinColumn.propertyName}`;\n                    });\n                    const inverseJoinColumnConditions = relation.inverseJoinColumns.map(inverseJoinColumn => {\n                        return `${joinAlias}.${inverseJoinColumn.propertyName} = ${escape(qbAlias)}.${escape(inverseJoinColumn.referencedColumn!.propertyName)}`;\n                    });\n\n                    const conditions = joinColumnConditions.concat(inverseJoinColumnConditions).join(\" AND \");\n\n                    // (example) returns us referenced column (detail's id)\n                    const parameters = relation.joinColumns.reduce((parameters, joinColumn) => {\n                        parameters[joinColumn.propertyName] = joinColumn.referencedColumn!.getEntityValue(subject.databaseEntity);\n                        return parameters;\n                    }, {} as ObjectLiteral);\n\n                    databaseEntities = await this.connection\n                        .getRepository<ObjectLiteral>(valueMetadata.target)\n                        .createQueryBuilder(qbAlias, this.queryRunner) // todo: this wont work for mongodb. implement this in some method and call it here instead?\n                        .innerJoin(relation.junctionEntityMetadata!.tableName, joinAlias, conditions)\n                        .setParameters(parameters)\n                        .loadAllRelationIds()\n                        .getMany();\n\n                } else if (relation.isManyToManyNotOwner) {\n\n                    // we only need to load inverse entities if cascade removes are set\n                    // because remove by cascades is the only reason we need relational entities here\n                    if (!relation.isCascadeRemove) return;\n\n                    const joinAlias = escape(\"persistenceJoinedRelation\");\n\n                    const joinColumnConditions = relation.joinColumns.map(joinColumn => {\n                        return `${joinAlias}.${joinColumn.propertyName} = ${escape(qbAlias)}.${escape(joinColumn.referencedColumn!.propertyName)}`;\n                    });\n                    const inverseJoinColumnConditions = relation.inverseJoinColumns.map(inverseJoinColumn => {\n                        return `${joinAlias}.${inverseJoinColumn.propertyName} = :${inverseJoinColumn.propertyName}`;\n                    });\n\n                    const conditions = joinColumnConditions.concat(inverseJoinColumnConditions).join(\" AND \");\n\n                    // (example) returns us referenced column (detail's id)\n                    const parameters = relation.inverseRelation!.inverseJoinColumns.reduce((parameters, joinColumn) => {\n                        parameters[joinColumn.propertyName] = joinColumn.referencedColumn!.getEntityValue(subject.databaseEntity);\n                        return parameters;\n                    }, {} as ObjectLiteral);\n\n                    databaseEntities = await this.connection\n                        .getRepository<ObjectLiteral>(valueMetadata.target)\n                        .createQueryBuilder(qbAlias, this.queryRunner) // todo: this wont work for mongodb. implement this in some method and call it here instead?\n                        .innerJoin(relation.junctionEntityMetadata!.tableName, joinAlias, conditions)\n                        .setParameters(parameters)\n                        .loadAllRelationIds()\n                        .getMany();\n\n                } else { // this case can only be a oneToMany relation\n                    // todo: fix issues with joinColumn[0]\n                    // (example) returns us referenced column (detail's id)\n                    const relationIdInDatabaseEntity = relation.inverseRelation!.joinColumns[0].referencedColumn!.getEntityValue(subject.databaseEntity);\n\n                    // in this case we need inverse entities not only because of cascade removes\n                    // because we also need inverse entities to be able to perform update of entities\n                    // in the inverse side when entities is detached from one-to-many relation\n\n                    databaseEntities = await this.connection\n                        .getRepository<ObjectLiteral>(valueMetadata.target)\n                        .createQueryBuilder(qbAlias, this.queryRunner) // todo: this wont work for mongodb. implement this in some method and call it here instead?\n                        .where(qbAlias + \".\" + relation.inverseSidePropertyPath + \"=:id\")\n                        .setParameter(\"id\", relationIdInDatabaseEntity)\n                        .loadAllRelationIds()\n                        .getMany();\n                }\n\n                // add to loadMap loaded entities if some of them are missing\n                databaseEntities.forEach(databaseEntity => {\n                    const subjectInLoadMap = this.findByEntityLike(valueMetadata.target, databaseEntity);\n                    if (subjectInLoadMap && !subjectInLoadMap.hasDatabaseEntity) {\n                        subjectInLoadMap.databaseEntity = databaseEntity;\n\n                    } else if (!subjectInLoadMap) {\n                        const subject = new Subject(valueMetadata, undefined, databaseEntity);\n                        this.operateSubjects.push(subject);\n                    }\n                });\n\n\n                // add new relations for newly bind entities from the one-to-many relations\n                if (relation.isOneToMany && persistValue) { // todo: implement same for one-to-one\n                    const promises = (persistValue as ObjectLiteral[]).map(async persistValue => {\n\n                        // try to find in the database entities persistedValue (entity bind to this relation)\n                        const persistedValueInDatabaseEntity = databaseEntities.find(databaseEntity => {\n                            return valueMetadata.compareEntities(persistValue, databaseEntity);\n                        });\n\n                        // if it does not exist in the database entity - it means we need to bind it\n                        // to bind it we need to update related entity itself\n                        // this operation is performed only in one-to-many relations\n                        if (!persistedValueInDatabaseEntity) {\n\n                            // now find subject with\n                            let loadedSubject = this.findByDatabaseEntityLike(valueMetadata.target, persistValue);\n                            if (!loadedSubject) {\n                                const id = valueMetadata.getEntityIdMap(persistValue);\n                                if (id) { // if there is no id (for newly inserted) then we cant load\n                                    const databaseEntity = await this.connection\n                                        .getRepository<ObjectLiteral>(valueMetadata.target)\n                                        .createQueryBuilder(qbAlias, this.queryRunner) // todo: this wont work for mongodb. implement this in some method and call it here instead?\n                                        .whereInIds([id])\n                                        .loadAllRelationIds()\n                                        .getOne();\n\n                                    if (databaseEntity) {\n                                        loadedSubject = new Subject(valueMetadata, undefined, databaseEntity); // todo: what if entity like object exist in the loaded subjects but without databaseEntity?\n                                        this.operateSubjects.push(loadedSubject);\n                                    }\n                                }\n                            }\n\n                            if (loadedSubject) {\n                                loadedSubject.relationUpdates.push({\n                                    relation: relation.inverseRelation!,\n                                    value: subject.entity\n                                });\n                            }\n                        }\n                    });\n\n                    await Promise.all(promises);\n                }\n\n                // iterate throw loaded inverse entities to find out removed entities and inverse updated entities (only for one-to-many relation)\n                const promises = databaseEntities.map(async databaseEntity => {\n\n                    // find a subject object of the related database entity\n                    let relatedEntitySubject = this.findByDatabaseEntityLike(valueMetadata.target, databaseEntity);\n                    if (!relatedEntitySubject) return; // should not be possible, anyway add it for type-safety\n\n                    // if object is already marked as removed then no need to proceed because it already was proceed\n                    // if we remove this check it will cause a recursion\n                    if (relatedEntitySubject.mustBeRemoved) return;  // todo: add another check for entity in unsetRelations?\n\n                    // check if in persisted value there is a database value to understand if it was removed or not\n                    let relatedValue = ((persistValue || []) as ObjectLiteral[]).find(persistValueItem => {\n                        return valueMetadata.compareEntities(relatedEntitySubject!.databaseEntity, persistValueItem);\n                    });\n\n                    // if relation value is set to undefined then we don't do anything - simply skip any check and remove\n                    // but if relation value is set to null then it means user wants to remove each entity in this relation\n                    // OR\n                    // value was removed from persisted value - means we need to mark it as removed\n                    // and check if mark as removed all underlying entities that has cascade remove\n                    if (persistValue === null || !relatedValue) {\n\n                        // if cascade remove option is set then need to remove related entity\n                        if (relation.isCascadeRemove) {\n                            relatedEntitySubject.mustBeRemoved = true;\n\n                            // mark as removed all underlying entities that has cascade remove\n                            await this.buildCascadeRemovedAndRelationUpdateOperateSubjects(relatedEntitySubject);\n\n                        // if cascade remove option is not set then it means we simply need to remove\n                        // reference to this entity from inverse side (from loaded database entity)\n                        // this applies only on one-to-many relationship\n                        } else if (relation.isOneToMany && relation.inverseRelation) {\n                            relatedEntitySubject.relationUpdates.push({\n                                relation: relation.inverseRelation,\n                                value: null\n                            }); // todo: implement same for one-to-one\n                        }\n\n                    }\n\n                });\n\n                await Promise.all(promises);\n            }\n        });\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Builds all junction insert and remove operations used to insert new bind data into junction tables,\n     * or remove old junction records.\n     * Options specifies which junction operations should be built - insert, remove or both.\n     */\n    private async buildJunctionOperations(options: { insert: boolean, remove: boolean }): Promise<void> {\n        const promises = this.operateSubjects.filter(subject => subject.hasEntity).map(subject => {\n            const metadata = subject.metadata.parentEntityMetadata ? subject.metadata.parentEntityMetadata : subject.metadata;\n            const promises = metadata.manyToManyRelations.map(async relation => {\n                // if subject marked to be removed then all its junctions must be removed\n                if (subject.mustBeRemoved && options.remove) {\n                    // load from db all relation ids of inverse entities that are \"bind\" to the currently persisted entity\n                    // this way we gonna check which relation ids are missing and which are new (e.g. inserted or removed)\n                    const existInverseEntityRelationIds = relation.getEntityValue(subject.databaseEntity);\n\n                    // finally create a new junction remove operation and push it to the array of such operations\n                    if (existInverseEntityRelationIds.length > 0) {\n                        subject.junctionRemoves.push({\n                            relation: relation,\n                            junctionRelationIds: existInverseEntityRelationIds\n                        });\n                    }\n\n                    return;\n                }\n\n                // if entity don't have entity then no need to find something that should be inserted or removed\n                if (!subject.hasEntity)\n                    return;\n\n                // else check changed junctions in the persisted entity\n                // extract entity value - we only need to proceed if value is defined and its an array\n                const relatedValue = relation.getEntityValue(subject.entity);\n                if (!(relatedValue instanceof Array))\n                    return;\n\n                // load from db all relation ids of inverse entities that are \"bind\" to the currently persisted entity\n                // this way we gonna check which relation ids are missing and which are new (e.g. inserted or removed)\n                // we could load this relation ids with entity using however this way it may be more efficient, because\n                // this way we load only relations that come, e.g. we don't load data for empty relations set with object.\n                // this is also useful when object is being saved partial.\n                let existInverseEntityRelationIds: any[] = [];\n\n                // if subject don't have database entity it means its new and we don't need to remove something that is not exist\n                if (subject.hasDatabaseEntity) {\n                    existInverseEntityRelationIds = relation.getEntityValue(subject.databaseEntity);\n                    // console.log(\"existInverseEntityRelationIds:\", existInverseEntityRelationIds[0]);\n                }\n\n                // get all inverse entities relation ids that are \"bind\" to the currently persisted entity\n                const changedInverseEntityRelationIds = relatedValue\n                    .map(subRelationValue => {\n                        const joinColumns = relation.isOwning ? relation.inverseJoinColumns : relation.inverseRelation!.joinColumns;\n                        return joinColumns.reduce((ids, joinColumn) => {\n                            return OrmUtils.mergeDeep(ids, joinColumn.referencedColumn!.createValueMap(joinColumn.referencedColumn!.getEntityValue(subRelationValue))); // todo: duplicate. relation.createJoinColumnsIdMap(entity) ?\n                        }, {} as ObjectLiteral);\n                    })\n                    .filter(subRelationValue => subRelationValue !== undefined && subRelationValue !== null);\n                // console.log(\"changedInverseEntityRelationIds:\", changedInverseEntityRelationIds);\n\n                // now from all entities in the persisted entity find only those which aren't found in the db\n                const removedJunctionEntityIds = existInverseEntityRelationIds.filter(existRelationId => {\n                    return !changedInverseEntityRelationIds.find(changedRelationId => {\n                        return relation.inverseEntityMetadata.compareIds(changedRelationId, existRelationId);\n                    });\n                });\n                // console.log(\"removedJunctionEntityIds:\", removedJunctionEntityIds);\n\n                // now from all entities in the persisted entity find only those which aren't found in the db\n                const newJunctionEntities = relatedValue.filter(subRelatedValue => {\n                    // console.log(subRelatedValue);\n\n                    const joinColumns = relation.isOwning ? relation.inverseJoinColumns : relation.inverseRelation!.joinColumns;\n                    const ids = joinColumns.reduce((ids, joinColumn) => {\n                        return OrmUtils.mergeDeep(ids, joinColumn.referencedColumn!.createValueMap(joinColumn.referencedColumn!.getEntityValue(subRelatedValue))); // todo: duplicate. relation.createJoinColumnsIdMap(entity) ?\n                    }, {} as ObjectLiteral);\n                    // console.log(\"ids:\", ids);\n                    return !existInverseEntityRelationIds.find(relationId => {\n                        return relation.inverseEntityMetadata.compareIds(relationId, ids);\n                    });\n                });\n\n                // console.log(\"newJunctionEntities: \", newJunctionEntities);\n\n                // finally create a new junction insert operation and push it to the array of such operations\n                if (newJunctionEntities.length > 0 && options.insert) {\n                    subject.junctionInserts.push({\n                        relation: relation,\n                        junctionEntities: newJunctionEntities\n                    });\n                }\n\n                // finally create a new junction remove operation and push it to the array of such operations\n                if (removedJunctionEntityIds.length > 0 && options.remove) {\n                    subject.junctionRemoves.push({\n                        relation: relation,\n                        junctionRelationIds: removedJunctionEntityIds\n                    });\n                }\n            });\n\n            return Promise.all(promises);\n        });\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Finds subject where entity like given subject's entity.\n     * Comparision made by entity id.\n     */\n    protected findByEntityLike(entityTarget: Function|string, entity: ObjectLiteral): Subject|undefined {\n        return this.operateSubjects.find(subject => {\n            if (!subject.hasEntity)\n                return false;\n\n            if (subject.entity === entity)\n                return true;\n\n            return subject.entityTarget === entityTarget && subject.metadata.compareEntities(subject.entity, entity);\n        });\n    }\n\n    /**\n     * Finds subject where entity like given subject's database entity.\n     * Comparision made by entity id.\n     */\n    protected findByDatabaseEntityLike(entityTarget: Function|string, entity: ObjectLiteral): Subject|undefined {\n        return this.operateSubjects.find(subject => {\n            if (!subject.hasDatabaseEntity)\n                return false;\n\n            return subject.entityTarget === entityTarget && subject.metadata.compareEntities(subject.databaseEntity, entity);\n        });\n    }\n\n    /**\n     * Groups given Subject objects into groups separated by entity targets.\n     */\n    protected groupByEntityTargets(): { target: Function|string, subjects: Subject[] }[] {\n        return this.operateSubjects.reduce((groups, operatedEntity) => {\n            let group = groups.find(group => group.target === operatedEntity.entityTarget);\n            if (!group) {\n                group = { target: operatedEntity.entityTarget, subjects: [] };\n                groups.push(group);\n            }\n            group.subjects.push(operatedEntity);\n            return groups;\n        }, [] as { target: Function|string, subjects: Subject[] }[]);\n    }\n\n}","/**\n * Utils to help to work with Promise objects.\n */\nexport class PromiseUtils {\n\n    /**\n     * Runs given callback that returns promise for each item in the given collection in order.\n     * Operations executed after each other, right after previous promise being resolved.\n     */\n    static runInSequence<T, U>(collection: T[], callback: (item: T) => Promise<U>): Promise<U[]> {\n        const results: U[] = [];\n        return collection.reduce((promise, item) => {\n            return promise.then(() => {\n                return callback(item);\n            }).then(result => {\n                results.push(result);\n            });\n        }, Promise.resolve()).then(() => {\n            return results;\n        });\n    }\n\n    /**\n     * Returns a promise that is fulfilled with an array of promise state snapshots,\n     * but only after all the original promises have settled, i.e. become either fulfilled or rejected.\n     */\n    static settle(promises: Promise<any>[]) {\n        return Promise.all(promises.map(p => Promise.resolve(p).then(v => ({\n            state: \"fulfilled\",\n            value: v,\n        }), r => ({\n            state: \"rejected\",\n            reason: r,\n        })))).then((results: any[]): any => {\n            const rejected = results.find(result => result.state === \"rejected\");\n            if (rejected)\n                return Promise.reject(rejected.reason);\n\n            return results.map(result => result.value);\n        });\n    }\n\n}","import {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {RelationMetadata} from \"../../metadata/RelationMetadata\";\nimport {EntityManager} from \"../../entity-manager/EntityManager\";\n\n/**\n * UpdateEvent is an object that broadcaster sends to the entity subscriber when entity is being updated in the database.\n */\nexport interface UpdateEvent<Entity> {\n\n    /**\n     * Entity managed with connection used for original event.\n     * All database operations in the subscribed event listener should be performed using this entity manager instance.\n     */\n    manager: EntityManager;\n\n    /**\n     * Updating entity.\n     */\n    entity: Entity;\n\n    /**\n     * Updating entity in the database.\n     */\n    databaseEntity: Entity;\n\n    /**\n     * List of updated columns.\n     */\n    updatedColumns: ColumnMetadata[];\n\n    /**\n     * List of updated relations.\n     */\n    updatedRelations: RelationMetadata[];\n\n    // todo: send old and new update values\n    // todo: send updated relations?\n\n}","import {EntityManager} from \"../../entity-manager/EntityManager\";\n\n/**\n * RemoveEvent is an object that broadcaster sends to the entity subscriber when entity is being removed to the database.\n */\nexport interface RemoveEvent<Entity> {\n\n    /**\n     * Entity managed with connection used for original event.\n     * All database operations in the subscribed event listener should be performed using this entity manager instance.\n     */\n    manager: EntityManager;\n\n    /**\n     * Entity that is being removed.\n     * This may absent if entity is removed without being loaded (for examples by cascades).\n     */\n    entity?: Entity;\n\n    /**\n     * Database representation of entity that is being removed.\n     */\n    databaseEntity: Entity;\n\n    /**\n     * Id or ids of the entity that is being removed.\n     */\n    entityId?: any;\n\n}","import {EntityManager} from \"../../entity-manager/EntityManager\";\n\n/**\n * InsertEvent is an object that broadcaster sends to the entity subscriber when entity is inserted to the database.\n */\nexport interface InsertEvent<Entity> {\n\n    /**\n     * Entity managed with connection used for original event.\n     * All database operations in the subscribed event listener should be performed using this entity manager instance.\n     */\n    manager: EntityManager;\n\n    /**\n     * Inserting event.\n     */\n    entity: Entity;\n\n}","import {UpdateEvent} from \"./event/UpdateEvent\";\nimport {RemoveEvent} from \"./event/RemoveEvent\";\nimport {InsertEvent} from \"./event/InsertEvent\";\n\n/**\n * Classes that implement this interface are subscribers that subscribe for the specific events in the ORM.\n */\nexport interface EntitySubscriberInterface<Entity = any> {\n\n    /**\n     * Returns the class of the entity to which events will listen.\n     * If this method is omitted, then subscriber will listen to events of all entities.\n     */\n    listenTo?(): Function;\n\n    /**\n     * Called after entity is loaded from the database.\n     */\n    afterLoad?(entity: Entity): Promise<any>|void;\n\n    /**\n     * Called before entity is inserted to the database.\n     */\n    beforeInsert?(event: InsertEvent<Entity>): Promise<any>|void;\n\n    /**\n     * Called after entity is inserted to the database.\n     */\n    afterInsert?(event: InsertEvent<Entity>): Promise<any>|void;\n\n    /**\n     * Called before entity is updated in the database.\n     */\n    beforeUpdate?(event: UpdateEvent<Entity>): Promise<any>|void;\n\n    /**\n     * Called after entity is updated in the database.\n     */\n    afterUpdate?(event: UpdateEvent<Entity>): Promise<any>|void;\n\n    /**\n     * Called before entity is removed from the database.\n     */\n    beforeRemove?(event: RemoveEvent<Entity>): Promise<any>|void;\n\n    /**\n     * Called after entity is removed from the database.\n     */\n    afterRemove?(event: RemoveEvent<Entity>): Promise<any>|void;\n\n}","/**\n * All types that entity listener can be.\n */\nexport type EventListenerType = \"after-load\"|\"before-insert\"|\"after-insert\"|\"before-update\"|\"after-update\"|\"before-remove\"|\"after-remove\";\n\n/**\n * Provides a constants for each entity listener type.\n */\nexport class EventListenerTypes {\n    static AFTER_LOAD: EventListenerType = \"after-load\";\n    static BEFORE_INSERT: EventListenerType = \"before-insert\";\n    static AFTER_INSERT: EventListenerType = \"after-insert\";\n    static BEFORE_UPDATE: EventListenerType = \"before-update\";\n    static AFTER_UPDATE: EventListenerType = \"after-update\";\n    static BEFORE_REMOVE: EventListenerType = \"before-remove\";\n    static AFTER_REMOVE: EventListenerType = \"after-remove\";\n}","import {EntitySubscriberInterface} from \"./EntitySubscriberInterface\";\nimport {EventListenerTypes} from \"../metadata/types/EventListenerTypes\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {Subject} from \"../persistence/Subject\";\nimport {Connection} from \"../connection/Connection\";\nimport {EntityManager} from \"../entity-manager/EntityManager\";\n\n/**\n * Broadcaster provides a helper methods to broadcast events to the subscribers.\n */\nexport class Broadcaster {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Broadcasts \"BEFORE_INSERT\", \"BEFORE_UPDATE\", \"BEFORE_REMOVE\" events for all given subjects.\n     */\n    async broadcastBeforeEventsForAll(entityManager: EntityManager, insertSubjects: Subject[], updateSubjects: Subject[], removeSubjects: Subject[]): Promise<void> {\n        const insertPromises = insertSubjects.map(subject => this.broadcastBeforeInsertEvent(entityManager, subject));\n        const updatePromises = updateSubjects.map(subject => this.broadcastBeforeUpdateEvent(entityManager, subject));\n        const removePromises = removeSubjects.map(subject => this.broadcastBeforeRemoveEvent(entityManager, subject));\n        const allPromises = insertPromises.concat(updatePromises).concat(removePromises);\n        await Promise.all(allPromises);\n    }\n\n    /**\n     * Broadcasts \"AFTER_INSERT\", \"AFTER_UPDATE\", \"AFTER_REMOVE\" events for all given subjects.\n     */\n    async broadcastAfterEventsForAll(entityManager: EntityManager, insertSubjects: Subject[], updateSubjects: Subject[], removeSubjects: Subject[]): Promise<void> {\n        const insertPromises = insertSubjects.map(subject => this.broadcastAfterInsertEvent(entityManager, subject));\n        const updatePromises = updateSubjects.map(subject => this.broadcastAfterUpdateEvent(entityManager, subject));\n        const removePromises = removeSubjects.map(subject => this.broadcastAfterRemoveEvent(entityManager, subject));\n        const allPromises = insertPromises.concat(updatePromises).concat(removePromises);\n        await Promise.all(allPromises);\n    }\n\n    /**\n     * Broadcasts \"BEFORE_INSERT\" event.\n     * Before insert event is executed before entity is being inserted to the database for the first time.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastBeforeInsertEvent(manager: EntityManager, subject: Subject): Promise<void> {\n\n        // console.log(subject.metadata.listeners);\n        const listeners = subject.metadata.listeners\n            .filter(listener => listener.type === EventListenerTypes.BEFORE_INSERT && listener.isAllowed(subject.entity))\n            .map(entityListener => entityListener.execute(subject.entity));\n\n        const subscribers = this.connection.subscribers\n            .filter(subscriber => this.isAllowedSubscriber(subscriber, subject.entityTarget!) && subscriber.beforeInsert)\n            .map(subscriber => subscriber.beforeInsert!({\n                manager: manager,\n                entity: subject.entity\n            }));\n\n        await Promise.all(listeners.concat(subscribers));\n    }\n\n    /**\n     * Broadcasts \"BEFORE_UPDATE\" event.\n     * Before update event is executed before entity is being updated in the database.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastBeforeUpdateEvent(manager: EntityManager, subject: Subject): Promise<void> { // todo: send relations too?\n\n        const listeners = subject.metadata.listeners\n            .filter(listener => listener.type === EventListenerTypes.BEFORE_UPDATE && listener.isAllowed(subject.entity))\n            .map(entityListener => entityListener.execute(subject.entity));\n\n        const subscribers = this.connection.subscribers\n            .filter(subscriber => this.isAllowedSubscriber(subscriber, subject.entityTarget!) && subscriber.beforeUpdate)\n            .map(subscriber => subscriber.beforeUpdate!({\n                manager: manager,\n                entity: subject.entity,\n                databaseEntity: subject.databaseEntity,\n                updatedColumns: subject.diffColumns,\n                updatedRelations: subject.diffRelations,\n            }));\n\n        await Promise.all(listeners.concat(subscribers));\n    }\n\n    /**\n     * Broadcasts \"BEFORE_REMOVE\" event.\n     * Before remove event is executed before entity is being removed from the database.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastBeforeRemoveEvent(manager: EntityManager, subject: Subject): Promise<void> {\n\n        const listeners = subject.metadata.listeners\n            .filter(listener => listener.type === EventListenerTypes.BEFORE_REMOVE && listener.isAllowed(subject.entity))\n            .map(entityListener => entityListener.execute(subject.databaseEntity));\n\n        const subscribers = this.connection.subscribers\n            .filter(subscriber => this.isAllowedSubscriber(subscriber, subject.entityTarget!) && subscriber.beforeRemove)\n            .map(subscriber => subscriber.beforeRemove!({\n                manager: manager,\n                entity: subject.hasEntity ? subject.entity : undefined,\n                databaseEntity: subject.databaseEntity,\n                entityId: subject.metadata.getEntityIdMixedMap(subject.databaseEntity)\n            }));\n\n        await Promise.all(listeners.concat(subscribers));\n    }\n\n    /**\n     * Broadcasts \"AFTER_INSERT\" event.\n     * After insert event is executed after entity is being persisted to the database for the first time.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastAfterInsertEvent(manager: EntityManager, subject: Subject): Promise<void> {\n\n        const listeners = subject.metadata.listeners\n            .filter(listener => listener.type === EventListenerTypes.AFTER_INSERT && listener.isAllowed(subject.entity))\n            .map(entityListener => entityListener.execute(subject.entity));\n\n        const subscribers = this.connection.subscribers\n            .filter(subscriber => this.isAllowedSubscriber(subscriber, subject.entityTarget!) && subscriber.afterInsert)\n            .map(subscriber => subscriber.afterInsert!({\n                manager: manager,\n                entity: subject.entity\n            }));\n\n        await Promise.all(listeners.concat(subscribers));\n    }\n\n    /**\n     * Broadcasts \"AFTER_UPDATE\" event.\n     * After update event is executed after entity is being updated in the database.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastAfterUpdateEvent(manager: EntityManager, subject: Subject): Promise<void> {\n\n        const listeners = subject.metadata.listeners\n            .filter(listener => listener.type === EventListenerTypes.AFTER_UPDATE && listener.isAllowed(subject.entity))\n            .map(entityListener => entityListener.execute(subject.entity));\n\n        const subscribers = this.connection.subscribers\n            .filter(subscriber => this.isAllowedSubscriber(subscriber, subject.entityTarget!) && subscriber.afterUpdate)\n            .map(subscriber => subscriber.afterUpdate!({\n                manager: manager,\n                entity: subject.entity,\n                databaseEntity: subject.databaseEntity,\n                updatedColumns: subject.diffColumns,\n                updatedRelations: subject.diffRelations,\n            }));\n\n        await Promise.all(listeners.concat(subscribers));\n    }\n\n    /**\n     * Broadcasts \"AFTER_REMOVE\" event.\n     * After remove event is executed after entity is being removed from the database.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastAfterRemoveEvent(manager: EntityManager, subject: Subject): Promise<void> {\n\n        const listeners = subject.metadata.listeners\n            .filter(listener => listener.type === EventListenerTypes.AFTER_REMOVE && listener.isAllowed(subject.entity))\n            .map(entityListener => entityListener.execute(subject.entity));\n\n        const subscribers = this.connection.subscribers\n            .filter(subscriber => this.isAllowedSubscriber(subscriber, subject.entityTarget!) && subscriber.afterRemove)\n            .map(subscriber => subscriber.afterRemove!({\n                manager: manager,\n                entity: subject.hasEntity ? subject.entity : undefined,\n                databaseEntity: subject.databaseEntity,\n                entityId: subject.metadata.getEntityIdMixedMap(subject.databaseEntity)\n            }));\n\n        await Promise.all(listeners.concat(subscribers));\n    }\n\n    /**\n     * Broadcasts \"AFTER_LOAD\" event for all given entities, and their sub-entities.\n     * After load event is executed after entity has been loaded from the database.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastLoadEventsForAll(target: Function|string, entities: ObjectLiteral[]): Promise<void> {\n        await Promise.all(entities.map(entity => this.broadcastLoadEvents(target, entity)));\n    }\n\n    /**\n     * Broadcasts \"AFTER_LOAD\" event for the given entity and all its sub-entities.\n     * After load event is executed after entity has been loaded from the database.\n     * All subscribers and entity listeners who listened to this event will be executed at this point.\n     * Subscribers and entity listeners can return promises, it will wait until they are resolved.\n     */\n    async broadcastLoadEvents(target: Function|string, entity: ObjectLiteral): Promise<void> {\n        if (entity instanceof Promise) // todo: check why need this?\n            return;\n\n        // collect load events for all children entities that were loaded with the main entity\n        const children = this.connection.getMetadata(target).relations.reduce((promises, relation) => {\n            if (!entity.hasOwnProperty(relation.propertyName))\n                return promises;\n\n            const value = relation.getEntityValue(entity);\n            if (value instanceof Array) {\n                promises = promises.concat(this.broadcastLoadEventsForAll(relation.inverseEntityMetadata.target!, value));\n            } else if (value) {\n                promises.push(this.broadcastLoadEvents(relation.inverseEntityMetadata.target!, value));\n            }\n\n            return promises;\n        }, [] as Promise<void>[]);\n\n        const listeners = this.connection.getMetadata(target).listeners\n            .filter(listener => listener.type === EventListenerTypes.AFTER_LOAD && listener.isAllowed(entity))\n            .map(listener => entity[listener.propertyName]());\n\n        const subscribers = this.connection.subscribers\n            .filter(subscriber => this.isAllowedSubscriber(subscriber, target) && subscriber.afterLoad)\n            .map(subscriber => subscriber.afterLoad!(entity));\n\n        await Promise.all(children.concat(listeners.concat(subscribers)));\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Checks if subscriber's methods can be executed by checking if its don't listen to the particular entity,\n     * or listens our entity.\n     */\n    protected isAllowedSubscriber(subscriber: EntitySubscriberInterface<any>, target: Function|string): boolean {\n        return  !subscriber.listenTo ||\n                !subscriber.listenTo() ||\n                subscriber.listenTo() === Object ||\n                subscriber.listenTo() === target ||\n                subscriber.listenTo().isPrototypeOf(target);\n    }\n\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {Connection} from \"../connection/Connection\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {JunctionInsert, JunctionRemove, Subject} from \"./Subject\";\nimport {OrmUtils} from \"../util/OrmUtils\";\nimport {EntityManager} from \"../entity-manager/EntityManager\";\nimport {PromiseUtils} from \"../util/PromiseUtils\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {EmbeddedMetadata} from \"../metadata/EmbeddedMetadata\";\nimport {Broadcaster} from \"../subscriber/Broadcaster\";\n\n/**\n * Executes all database operations (inserts, updated, deletes) that must be executed\n * with given persistence subjects.\n */\nexport class SubjectOperationExecutor {\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * All subjects that needs to be operated.\n     */\n    protected allSubjects: Subject[];\n\n    /**\n     * Subjects that must be inserted.\n     */\n    protected insertSubjects: Subject[];\n\n    /**\n     * Subjects that must be updated.\n     */\n    protected updateSubjects: Subject[];\n\n    /**\n     * Subjects that must be removed.\n     */\n    protected removeSubjects: Subject[];\n\n    /**\n     * Subjects which relations should be updated.\n     */\n    protected relationUpdateSubjects: Subject[];\n\n    protected broadcaster: Broadcaster;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection,\n                protected transactionEntityManager: EntityManager,\n                protected queryRunner: QueryRunner,\n                subjects: Subject[]) {\n\n        /*subjects.forEach(subject => {\n         console.log(subject.entity);\n         console.log(\"mustBeInserted: \", subject.mustBeInserted);\n         console.log(\"mustBeUpdated: \", subject.mustBeUpdated);\n         console.log(\"mustBeRemoved: \", subject.mustBeRemoved);\n         });*/\n\n        // validate all subjects first\n        subjects.forEach(subject => subject.validate());\n\n        // set class properties for easy use\n        this.allSubjects = subjects;\n        this.insertSubjects = subjects.filter(subject => subject.mustBeInserted);\n        this.updateSubjects = subjects.filter(subject => subject.mustBeUpdated);\n        this.removeSubjects = subjects.filter(subject => subject.mustBeRemoved);\n        this.relationUpdateSubjects = subjects.filter(subject => subject.hasRelationUpdates);\n\n        this.broadcaster = new Broadcaster(this.connection);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    areExecutableOperations(): boolean {\n        return this.insertSubjects.length > 0 ||\n            this.updateSubjects.length > 0 ||\n            this.removeSubjects.length > 0 ||\n            this.relationUpdateSubjects.length > 0 ||\n            this.allSubjects.some(subject => subject.junctionInserts.length > 0) ||\n            this.allSubjects.some(subject => subject.junctionRemoves.length > 0);\n    }\n\n    /**\n     * Executes all operations over given array of subjects.\n     * Executes queries using given query runner.\n     */\n    async execute(): Promise<void> {\n\n        // broadcast \"before\" events before we start updating\n        await this.broadcaster.broadcastBeforeEventsForAll(this.transactionEntityManager, this.insertSubjects, this.updateSubjects, this.removeSubjects);\n\n        // since events can trigger some internal changes (for example update depend property) we need to perform some re-computations here\n        this.updateSubjects.forEach(subject => subject.recompute());\n\n        await this.executeInsertOperations();\n        await this.executeInsertClosureTableOperations();\n        await this.executeInsertJunctionsOperations();\n        await this.executeRemoveJunctionsOperations();\n        await this.executeUpdateOperations();\n        await this.executeUpdateRelations();\n        await this.executeRemoveOperations();\n\n        // update all special columns in persisted entities, like inserted id or remove ids from the removed entities\n        await this.updateSpecialColumnsInPersistedEntities();\n\n        // finally broadcast \"after\" events\n        // todo: THIS SHOULD NOT BE TRUTH: note that we are broadcasting events after commit because we want to have ids of the entities inside them to be available in subscribers\n        await this.broadcaster.broadcastAfterEventsForAll(this.transactionEntityManager, this.insertSubjects, this.updateSubjects, this.removeSubjects);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Insertion\n    // -------------------------------------------------------------------------\n\n    /**\n     * Executes insert operations.\n     *\n     * For insertion we separate two groups of entities:\n     * - first group of entities are entities which do not have any relations\n     *      or entities which do not have any non-nullable relation\n     * - second group of entities are entities which does have non-nullable relations\n     *\n     * Insert process of the entities from the first group which can only have nullable relations are actually a two-step process:\n     * - first we insert entities without their relations, explicitly left them NULL\n     * - later we update inserted entity once again with id of the object inserted with it\n     *\n     * Yes, two queries are being executed, but this is by design.\n     * There is no better way to solve this problem and others at the same time.\n     *\n     * Insert process of the entities from the second group which can have only non nullable relations is a single-step process:\n     * - we simply insert all entities and get into attention all its dependencies which were inserted in the first group\n     */\n    private async executeInsertOperations(): Promise<void> {\n\n        // separate insert entities into groups:\n\n        // TODO: current ordering mechanism is bad. need to create a correct order in which entities should be persisted, need to build a dependency graph\n\n        // first group of subjects are subjects without any non-nullable column\n        // we need to insert first such entities because second group entities may rely on those entities.\n        const firstInsertSubjects = this.insertSubjects.filter(subject => !subject.metadata.hasNonNullableRelations);\n\n        // second group - are all other subjects\n        // since in this group there are non nullable columns, some of them may depend on value of the\n        // previously inserted entity (which only can be entity with all nullable columns)\n        const secondInsertSubjects = this.insertSubjects.filter(subject => subject.metadata.hasNonNullableRelations);\n\n        // note: these operations should be executed in sequence, not in parallel\n        // because second group depend of obtained data from the first group\n        await Promise.all(firstInsertSubjects.map(subject => this.insert(subject, [])));\n        await Promise.all(secondInsertSubjects.map(subject => this.insert(subject, firstInsertSubjects)));\n\n        // we need to update relation ids of the newly inserted objects (where we inserted NULLs in relations)\n        // once we inserted all entities, we need to update relations which were bind to inserted entities.\n        // For example we have a relation many-to-one Post<->Category. Relation is nullable.\n        // New category was set to the new post and post where persisted.\n        // Here this method executes two inserts: one for post, one for category,\n        // but category in post is inserted with \"null\".\n        // now we need to update post table - set category with a newly persisted category id.\n        const updatePromises: Promise<any>[] = [];\n        firstInsertSubjects.forEach(subject => {\n\n            // first update relations with join columns (one-to-one owner and many-to-one relations)\n            const updateOptions: ObjectLiteral = {};\n            subject.metadata.relationsWithJoinColumns.forEach(relation => {\n                relation.joinColumns.forEach(joinColumn => {\n                    const referencedColumn = joinColumn.referencedColumn!;\n                    const relatedEntity = relation.getEntityValue(subject.entity);\n\n                    // if relation value is not set then nothing to do here\n                    if (!relatedEntity)\n                        return;\n\n                    // check if relation reference column is a relation\n                    let relationId: any;\n                    const columnRelation = relation.inverseEntityMetadata.findRelationWithPropertyPath(joinColumn.referencedColumn!.propertyPath);\n                    if (columnRelation) { // if referenced column is a relation\n                        const insertSubject = this.insertSubjects.find(insertedSubject => insertedSubject.entity === referencedColumn.getEntityValue(relatedEntity));\n\n                        // if this relation was just inserted\n                        if (insertSubject) {\n\n                            // check if we have this relation id already\n                            relationId = columnRelation.getEntityValue(referencedColumn.getEntityValue(relatedEntity));\n                            if (!relationId) {\n\n                                // if we don't have relation id then use special values\n                                if (referencedColumn.isGenerated && insertSubject.generatedMap)\n                                    relationId = referencedColumn.getEntityValue(insertSubject.generatedMap);\n                                // todo: handle other special types too\n                            }\n                        }\n\n                    } else { // if referenced column is a simple non relational column\n                        const insertSubject = this.insertSubjects.find(insertedSubject => insertedSubject.entity === relatedEntity);\n\n                        // if this relation was just inserted\n                        if (insertSubject) {\n\n                            // check if we have this relation id already\n                            relationId = referencedColumn.getEntityValue(relatedEntity);\n                            if (!relationId) {\n\n                                // if we don't have relation id then use special values\n                                if (referencedColumn.isGenerated && insertSubject.generatedMap)\n                                    relationId = referencedColumn.getEntityValue(insertSubject.generatedMap);\n                                // todo: handle other special types too\n                            }\n                        }\n\n                    }\n\n                    if (relationId) {\n                        updateOptions[joinColumn.databaseName] = relationId;\n                    }\n\n                });\n            });\n\n            // if we found relations which we can update - then update them\n            if (Object.keys(updateOptions).length > 0 /*&& subject.hasEntity*/) {\n                // const relatedEntityIdMap = subject.getPersistedEntityIdMap; // todo: this works incorrectly\n\n                const columns = subject.metadata.parentEntityMetadata ? subject.metadata.primaryColumns : subject.metadata.primaryColumns;\n                const conditions: ObjectLiteral = {};\n\n                columns.forEach(column => {\n                    const entityValue = column.getEntityValue(subject.entity);\n\n                    // if entity id is a relation, then extract referenced column from that relation\n                    const columnRelation = subject.metadata.relations.find(relation => relation.propertyName === column.propertyName);\n\n                    if (entityValue && columnRelation) { // not sure if we need handle join column from inverse side\n                        columnRelation.joinColumns.forEach(joinColumn => {\n                            let relationIdOfEntityValue = entityValue[joinColumn.referencedColumn!.propertyName];\n                            if (!relationIdOfEntityValue) {\n                                const entityValueInsertSubject = this.insertSubjects.find(subject => subject.entity === entityValue);\n                                if (entityValueInsertSubject) {\n                                    if (joinColumn.referencedColumn!.isGenerated && entityValueInsertSubject.generatedMap)\n                                        relationIdOfEntityValue = joinColumn.referencedColumn!.getEntityValue(entityValueInsertSubject.generatedMap);\n                                }\n                            }\n                            if (relationIdOfEntityValue) {\n                                conditions[column.databaseName] = relationIdOfEntityValue;\n                            }\n                        });\n\n                    } else {\n                        if (entityValue) {\n                            conditions[column.databaseName] = entityValue;\n                        } else {\n                            if (subject.generatedMap)\n                                conditions[column.databaseName] = column.getEntityValue(subject.generatedMap);\n                        }\n                    }\n                });\n                if (!Object.keys(conditions).length)\n                    return;\n\n\n\n                const updatePromise = this.queryRunner.update(subject.metadata.tablePath, updateOptions, conditions);\n                updatePromises.push(updatePromise);\n            }\n\n            // we need to update relation ids if newly inserted objects are used from inverse side in one-to-many inverse relation\n            // we also need to update relation ids if newly inserted objects are used from inverse side in one-to-one inverse relation\n            const oneToManyAndOneToOneNonOwnerRelations = subject.metadata.oneToManyRelations.concat(subject.metadata.oneToOneRelations.filter(relation => !relation.isOwning));\n            // console.log(oneToManyAndOneToOneNonOwnerRelations);\n            subject.metadata.extractRelationValuesFromEntity(subject.entity, oneToManyAndOneToOneNonOwnerRelations)\n                .forEach(([relation, subRelatedEntity, inverseEntityMetadata]) => {\n                    relation.inverseRelation!.joinColumns.forEach(joinColumn => {\n\n                        const referencedColumn = joinColumn.referencedColumn!;\n                        const columns = inverseEntityMetadata.parentEntityMetadata ? inverseEntityMetadata.primaryColumns : inverseEntityMetadata.primaryColumns;\n                        const conditions: ObjectLiteral = {};\n\n                        columns.forEach(column => {\n                            const entityValue = column.getEntityValue(subRelatedEntity);\n\n                            // if entity id is a relation, then extract referenced column from that relation\n                            const columnRelation = inverseEntityMetadata.relations.find(relation => relation.propertyName === column.propertyName);\n\n                            if (entityValue && columnRelation) { // not sure if we need handle join column from inverse side\n                                columnRelation.joinColumns.forEach(columnRelationJoinColumn => {\n                                    let relationIdOfEntityValue = entityValue[columnRelationJoinColumn.referencedColumn!.propertyName];\n                                    if (!relationIdOfEntityValue) {\n                                        const entityValueInsertSubject = this.insertSubjects.find(subject => subject.entity === entityValue);\n                                        if (entityValueInsertSubject) {\n                                            if (columnRelationJoinColumn.referencedColumn!.isGenerated && entityValueInsertSubject.generatedMap) {\n                                                relationIdOfEntityValue = columnRelationJoinColumn.referencedColumn!.getEntityValue(entityValueInsertSubject.generatedMap);\n                                            }\n                                        }\n                                    }\n                                    if (relationIdOfEntityValue) {\n                                        conditions[column.databaseName] = relationIdOfEntityValue;\n                                    }\n                                });\n\n                            } else {\n                                const entityValueInsertSubject = this.insertSubjects.find(subject => subject.entity === subRelatedEntity);\n                                if (entityValue) {\n                                    conditions[column.databaseName] = entityValue;\n                                } else {\n                                    if (entityValueInsertSubject && entityValueInsertSubject.generatedMap)\n                                        conditions[column.databaseName] = column.getEntityValue(entityValueInsertSubject.generatedMap);\n                                }\n                            }\n                        });\n\n                        if (!Object.keys(conditions).length)\n                            return;\n\n                        const updateOptions: ObjectLiteral = {};\n                        const columnRelation = relation.inverseEntityMetadata.relations.find(rel => rel.propertyName === referencedColumn.propertyName);\n                        const columnValue = referencedColumn.getEntityValue(subject.entity);\n                        if (columnRelation) {\n                            let id = columnRelation.getEntityValue(columnValue);\n                            if (!id) {\n                                const insertSubject = this.insertSubjects.find(subject => subject.entity === columnValue);\n                                if (insertSubject) {\n                                    if (insertSubject.generatedMap)\n                                        id = referencedColumn.getEntityValue(insertSubject.generatedMap);\n                                }\n                            }\n                            updateOptions[joinColumn.databaseName] = id;\n                        } else {\n                            const generatedColumnValue = subject.generatedMap ? referencedColumn.getEntityValue(subject.generatedMap) : undefined;\n                            updateOptions[joinColumn.databaseName] = columnValue || generatedColumnValue;\n                        }\n\n                        const updatePromise = this.queryRunner.update(relation.inverseEntityMetadata.tablePath, updateOptions, conditions);\n                        updatePromises.push(updatePromise);\n\n                    });\n                });\n\n        });\n\n        await Promise.all(updatePromises);\n\n        // todo: make sure to search in all insertSubjects during updating too if updated entity uses links to the newly persisted entity\n    }\n\n    /**\n     * Inserts an entity from the given insert operation into the database.\n     * If entity has an generated column, then after saving new generated value will be stored to the InsertOperation.\n     * If entity uses class-table-inheritance, then multiple inserts may by performed to save all entities.\n     */\n    private async insert(subject: Subject, alreadyInsertedSubjects: Subject[]): Promise<any> {\n\n        const parentEntityMetadata = subject.metadata.parentEntityMetadata;\n        const metadata = subject.metadata;\n        const entity = subject.entity;\n        let insertResult: any, parentGeneratedId: any;\n\n        // if entity uses class table inheritance then we need to separate entity into sub values that will be inserted into multiple tables\n        if (metadata.isClassTableChild) { // todo: with current implementation inheritance of multiple class table children will not work\n\n            // first insert entity values into parent class table\n            const parentValuesMap = this.collectColumnsAndValues(parentEntityMetadata, entity, subject.date, undefined, metadata.discriminatorValue, alreadyInsertedSubjects, \"insert\");\n            insertResult = parentGeneratedId = await this.queryRunner.insert(parentEntityMetadata.tablePath, parentValuesMap);\n\n            // second insert entity values into child class table\n            const childValuesMap = this.collectColumnsAndValues(metadata, entity, subject.date, insertResult.generatedMap[parentEntityMetadata.primaryColumns[0].propertyName], undefined, alreadyInsertedSubjects, \"insert\");\n            const secondGeneratedId = await this.queryRunner.insert(metadata.tablePath, childValuesMap);\n            if (!insertResult && secondGeneratedId) insertResult = secondGeneratedId;\n\n        } else { // in the case when class table inheritance is not used\n\n            const valuesMap = this.collectColumnsAndValues(metadata, entity, subject.date, undefined, undefined, alreadyInsertedSubjects, \"insert\");\n            // console.log(\"valuesMap\", valuesMap);\n            insertResult = await this.queryRunner.insert(metadata.tablePath, valuesMap);\n        }\n\n        if (parentGeneratedId)\n            subject.parentGeneratedId = parentGeneratedId.generatedMap[parentEntityMetadata.primaryColumns[0].propertyName];\n\n        // todo: better if insert method will return object with all generated ids, object id, etc.\n        if (insertResult.generatedMap)\n            subject.generatedMap = insertResult.generatedMap;\n    }\n\n    private collectColumns(columns: ColumnMetadata[], entity: ObjectLiteral, object: ObjectLiteral, operation: \"insert\"|\"update\") {\n        columns.forEach(column => {\n            if (column.isVirtual || column.isParentId || column.isDiscriminator)\n                return;\n            if (operation === \"update\" && column.isReadonly)\n                return;\n\n            const value = entity[column.propertyName];\n            if (value === undefined)\n                return;\n\n            object[column.databaseNameWithoutPrefixes] = this.connection.driver.preparePersistentValue(value, column); // todo: maybe preparePersistentValue is not responsibility of this class\n        });\n    }\n\n    private collectEmbeds(embed: EmbeddedMetadata, entity: ObjectLiteral, object: ObjectLiteral, operation: \"insert\"|\"update\") {\n\n        if (embed.isArray) {\n            if (entity[embed.propertyName] instanceof Array) {\n                if (!object[embed.prefix])\n                    object[embed.prefix] = [];\n\n                entity[embed.propertyName].forEach((subEntity: any, index: number) => {\n                    if (!object[embed.prefix][index])\n                        object[embed.prefix][index] = {};\n                    this.collectColumns(embed.columns, subEntity, object[embed.prefix][index], operation);\n                    embed.embeddeds.forEach(childEmbed => this.collectEmbeds(childEmbed, subEntity, object[embed.prefix][index], operation));\n                });\n            }\n        } else {\n            if (entity[embed.propertyName] !== undefined) {\n                if (!object[embed.prefix])\n                    object[embed.prefix] = {};\n                this.collectColumns(embed.columns, entity[embed.propertyName], object[embed.prefix], operation);\n                embed.embeddeds.forEach(childEmbed => this.collectEmbeds(childEmbed, entity[embed.propertyName], object[embed.prefix], operation));\n            }\n        }\n    }\n\n    /**\n     * Collects columns and values for the insert operation.\n     */\n    private collectColumnsAndValues(metadata: EntityMetadata, entity: ObjectLiteral, date: Date, parentIdColumnValue: any, discriminatorValue: any, alreadyInsertedSubjects: Subject[], operation: \"insert\"|\"update\"): ObjectLiteral {\n\n        const values: ObjectLiteral = {};\n\n        if (this.connection.driver instanceof MongoDriver) {\n            this.collectColumns(metadata.ownColumns, entity, values, operation);\n            metadata.embeddeds.forEach(embed => this.collectEmbeds(embed, entity, values, operation));\n\n        } else {\n            metadata.columns.forEach(column => {\n                if (column.isVirtual || column.isParentId || column.isDiscriminator)\n                    return;\n\n                const value = column.getEntityValue(entity);\n                if (value === undefined)\n                    return;\n\n                values[column.databaseName] = this.connection.driver.preparePersistentValue(value, column); // todo: maybe preparePersistentValue is not responsibility of this class\n            });\n        }\n\n        metadata.relationsWithJoinColumns.forEach(relation => {\n            relation.joinColumns.forEach(joinColumn => {\n\n                let relationValue: any;\n                const value = relation.getEntityValue(entity);\n\n                if (value) {\n                    // if relation value is stored in the entity itself then use it from there\n                    const relationId = joinColumn.referencedColumn!.getEntityValue(value); // relation.getInverseEntityRelationId(value); // todo: check it\n                    if (relationId) {\n                        relationValue = relationId;\n                    }\n\n                    // otherwise try to find relational value from just inserted subjects\n                    const alreadyInsertedSubject = alreadyInsertedSubjects.find(insertedSubject => {\n                        return insertedSubject.entity === value;\n                    });\n                    if (alreadyInsertedSubject) {\n                        const referencedColumn = joinColumn.referencedColumn!;\n                        // if join column references to the primary generated column then seek in the newEntityId of the insertedSubject\n                        if (referencedColumn.referencedColumn && referencedColumn.referencedColumn!.isGenerated) {\n                            if (referencedColumn.isParentId) {\n                                relationValue = alreadyInsertedSubject.parentGeneratedId;\n                            }\n                            // todo: what if reference column is not generated?\n                            // todo: what if reference column is not related to table inheritance?\n                        }\n\n                        if (referencedColumn.isGenerated && alreadyInsertedSubject.generatedMap)\n                            relationValue = referencedColumn.getEntityValue(alreadyInsertedSubject.generatedMap);\n                        // if it references to create or update date columns\n                        if (referencedColumn.isCreateDate || referencedColumn.isUpdateDate)\n                            relationValue = this.connection.driver.preparePersistentValue(alreadyInsertedSubject.date, referencedColumn);\n                        // if it references to version column\n                        if (referencedColumn.isVersion)\n                            relationValue = this.connection.driver.preparePersistentValue(1, referencedColumn);\n                    }\n                } else if (relation.inverseRelation) {\n                    const inverseSubject = this.allSubjects.find(subject => {\n                        if (!subject.hasEntity || subject.entityTarget !== relation.inverseRelation!.target)\n                            return false;\n\n                        const inverseRelationValue = relation.inverseRelation!.getEntityValue(subject.entity);\n                        if (inverseRelationValue) {\n                            if (inverseRelationValue instanceof Array) {\n                                return inverseRelationValue.find(subValue => subValue === subValue);\n                            } else {\n                                return inverseRelationValue === entity;\n                            }\n                        }\n                    });\n                    if (inverseSubject && joinColumn.referencedColumn!.getEntityValue(inverseSubject.entity)) {\n                        relationValue = joinColumn.referencedColumn!.getEntityValue(inverseSubject.entity);\n                    }\n                }\n\n                if (relationValue) {\n                    values[joinColumn.databaseName] = relationValue;\n                }\n\n            });\n        });\n\n        // add special column and value - date of creation\n        if (metadata.createDateColumn) {\n            const value = this.connection.driver.preparePersistentValue(date, metadata.createDateColumn);\n            values[metadata.createDateColumn.databaseName] = value;\n        }\n\n        // add special column and value - date of updating\n        if (metadata.updateDateColumn) {\n            const value = this.connection.driver.preparePersistentValue(date, metadata.updateDateColumn);\n            values[metadata.updateDateColumn.databaseName] = value;\n        }\n\n        // add special column and value - version column\n        if (metadata.versionColumn) {\n            const value = this.connection.driver.preparePersistentValue(1, metadata.versionColumn);\n            values[metadata.versionColumn.databaseName] = value;\n        }\n\n        // add special column and value - discriminator value (for tables using table inheritance)\n        if (metadata.discriminatorColumn) {\n            const value = this.connection.driver.preparePersistentValue(discriminatorValue || metadata.discriminatorValue, metadata.discriminatorColumn);\n            values[metadata.discriminatorColumn.databaseName] = value;\n        }\n\n        metadata.generatedColumns\n            .filter(column => column.generationStrategy === \"uuid\")\n            .forEach(column => {\n                if (column.isNullable && values[column.databaseName] === null)\n                    return;\n                const uuid = this.connection.driver.preparePersistentValue(\"\", column);\n                if (uuid && !values[column.databaseName])\n                    values[column.databaseName] = uuid;\n            });\n\n        // add special column and value - tree level and tree parents (for tree-type tables)\n        if (metadata.treeLevelColumn && metadata.treeParentRelation) {\n            const parentEntity = metadata.treeParentRelation.getEntityValue(entity);\n            const parentLevel = parentEntity ? (metadata.treeLevelColumn.getEntityValue(parentEntity) || 0) : 0;\n\n            values[metadata.treeLevelColumn.databaseName] = parentLevel + 1;\n        }\n\n        // add special column and value - parent id column (for tables using table inheritance)\n        if (metadata.parentEntityMetadata && metadata.parentIdColumns.length) { // todo: should be array of primary keys\n            values[metadata.parentIdColumns[0].databaseName] = parentIdColumnValue || metadata.parentEntityMetadata.primaryColumns[0].getEntityValue(entity);\n        }\n\n        return values;\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Insertion into closure tables\n    // -------------------------------------------------------------------------\n\n    /**\n     * Inserts all given subjects into closure table.\n     */\n    private executeInsertClosureTableOperations(/*, updatesByRelations: Subject[]*/) { // todo: what to do with updatesByRelations\n        const promises = this.insertSubjects\n            .filter(subject => subject.metadata.isClosure)\n            .map(async subject => {\n                // const relationsUpdateMap = this.findUpdateOperationForEntity(updatesByRelations, insertSubjects, subject.entity);\n                // subject.treeLevel = await this.insertIntoClosureTable(subject, relationsUpdateMap);\n                await this.insertClosureTableValues(subject);\n            });\n        return Promise.all(promises);\n    }\n\n    /**\n     * Inserts given subject into closure table.\n     */\n    private async insertClosureTableValues(subject: Subject): Promise<void> {\n        // todo: since closure tables do not support compose primary keys - throw an exception?\n        // todo: what if parent entity or parentEntityId is empty?!\n        const tablePath = subject.metadata.closureJunctionTable.tablePath;\n        const referencedColumn = subject.metadata.treeParentRelation!.joinColumns[0].referencedColumn!; // todo: check if joinColumn works\n        // todo: fix joinColumns[0] usage\n\n        let newEntityId = referencedColumn.getEntityValue(subject.entity);\n        if (!newEntityId && referencedColumn.isGenerated && subject.generatedMap) {\n            newEntityId = referencedColumn.getEntityValue(subject.generatedMap);\n            // we should not handle object id here because closure tables are not supported by mongodb driver.\n        } // todo: implement other special column types too\n\n        const parentEntity = subject.metadata.treeParentRelation!.getEntityValue(subject.entity);\n        let parentEntityId: any = 0; // zero is important\n        if (parentEntity) {\n            parentEntityId = referencedColumn.getEntityValue(parentEntity);\n            if (!parentEntityId && referencedColumn.isGenerated) {\n                const parentInsertedSubject = this.insertSubjects.find(subject => subject.entity === parentEntity);\n                // todo: throw exception if parentInsertedSubject is not set\n                if (parentInsertedSubject!.generatedMap)\n                    parentEntityId = referencedColumn.getEntityValue(parentInsertedSubject!.generatedMap!);\n            } // todo: implement other special column types too\n        }\n\n        // try to find parent entity id in some other entity that has this entity in its children\n        if (!parentEntityId) {\n            const parentSubject = this.allSubjects.find(allSubject => {\n                if (!allSubject.hasEntity || !allSubject.metadata.isClosure || !allSubject.metadata.treeChildrenRelation)\n                    return false;\n\n                const children = subject.metadata.treeChildrenRelation!.getEntityValue(allSubject.entity);\n                return children instanceof Array ? children.indexOf(subject.entity) !== -1 : false;\n            });\n\n            if (parentSubject) {\n                parentEntityId = referencedColumn.getEntityValue(parentSubject.entity);\n                if (!parentEntityId && parentSubject.generatedMap) { // if still not found then it means parent just inserted with generated column\n                    parentEntityId = referencedColumn.getEntityValue(parentSubject.generatedMap);\n                }\n            }\n        }\n\n        // if parent entity exist then insert a new row into closure table\n        subject.treeLevel = await this.queryRunner.insertIntoClosureTable(tablePath, newEntityId, parentEntityId, !!subject.metadata.treeLevelColumn);\n\n        if (subject.metadata.treeLevelColumn) {\n            const values = { [subject.metadata.treeLevelColumn.databaseName]: subject.treeLevel };\n            await this.queryRunner.update(subject.metadata.tablePath, values, { [referencedColumn.databaseName]: newEntityId });\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Update\n    // -------------------------------------------------------------------------\n\n    /**\n     * Updates all given subjects in the database.\n     */\n    private async executeUpdateOperations(): Promise<void> {\n        await Promise.all(this.updateSubjects.map(subject => this.update(subject)));\n    }\n\n    /**\n     * Updates given subject in the database.\n     */\n    private async update(subject: Subject): Promise<void> {\n        const entity = subject.entity;\n\n        if (this.connection.driver instanceof MongoDriver) {\n            const idMap = subject.metadata.getDatabaseEntityIdMap(entity);\n            if (!idMap)\n                throw new Error(`Internal error. Cannot get id of the updating entity.`);\n\n            /*const value: ObjectLiteral = {};\n            subject.metadata.columns.forEach(column => {\n                const columnValue = column.getEntityValue(entity);\n                if (columnValue !== undefined)\n                    value[column.databaseName] = columnValue;\n            });*/\n            // addEmbeddedValuesRecursively(entity, value, subject.metadata.embeddeds);\n\n            const value: ObjectLiteral = {};\n            this.collectColumns(subject.metadata.ownColumns, entity, value, \"update\");\n            subject.metadata.embeddeds.forEach(embed => this.collectEmbeds(embed, entity, value, \"update\"));\n\n            // if number of updated columns = 0 no need to update updated date and version columns\n            if (Object.keys(value).length === 0)\n                return;\n\n            if (subject.metadata.updateDateColumn)\n                value[subject.metadata.updateDateColumn.databaseName] = this.connection.driver.preparePersistentValue(new Date(), subject.metadata.updateDateColumn);\n\n            if (subject.metadata.versionColumn)\n                value[subject.metadata.versionColumn.databaseName] = this.connection.driver.preparePersistentValue(subject.metadata.versionColumn.getEntityValue(entity) + 1, subject.metadata.versionColumn);\n\n            return this.queryRunner.update(subject.metadata.tablePath, value, idMap);\n        }\n\n        // we group by table name, because metadata can have different table names\n        const valueMaps: { tablePath: string, metadata: EntityMetadata, values: ObjectLiteral }[] = [];\n\n        // console.log(subject.diffColumns);\n        subject.diffColumns.forEach(column => {\n            // if (!column.entityTarget) return; // todo: how this can be possible?\n            const metadata = this.connection.getMetadata(column.entityMetadata.target);\n            let valueMap = valueMaps.find(valueMap => valueMap.tablePath === metadata.tablePath);\n            if (!valueMap) {\n                valueMap = { tablePath: metadata.tablePath, metadata: metadata, values: {} };\n                valueMaps.push(valueMap);\n            }\n\n            valueMap.values[column.databaseName] = this.connection.driver.preparePersistentValue(column.getEntityValue(entity), column);\n        });\n\n        subject.diffRelations.forEach(relation => {\n            let valueMap = valueMaps.find(valueMap => valueMap.tablePath === relation.entityMetadata.tablePath);\n            if (!valueMap) {\n                valueMap = { tablePath: relation.entityMetadata.tablePath, metadata: relation.entityMetadata, values: {} };\n                valueMaps.push(valueMap);\n            }\n\n            const value = relation.getEntityValue(entity);\n            relation.joinColumns.forEach(joinColumn => {\n                valueMap!.values[joinColumn.databaseName] = value !== null && value !== undefined ? value[joinColumn.referencedColumn!.propertyName] : null; // todo: should not have a call to primaryColumn, instead join column metadata should be used\n            });\n        });\n\n        // if number of updated columns = 0 no need to update updated date and version columns\n        if (Object.keys(valueMaps).length === 0)\n            return;\n\n        if (subject.metadata.updateDateColumn) {\n            let valueMap = valueMaps.find(valueMap => valueMap.tablePath === subject.metadata.tablePath);\n            if (!valueMap) {\n                valueMap = { tablePath: subject.metadata.tablePath, metadata: subject.metadata, values: {} };\n                valueMaps.push(valueMap);\n            }\n\n            valueMap.values[subject.metadata.updateDateColumn.databaseName] = this.connection.driver.preparePersistentValue(new Date(), subject.metadata.updateDateColumn);\n        }\n\n        if (subject.metadata.versionColumn) {\n            let valueMap = valueMaps.find(valueMap => valueMap.tablePath === subject.metadata.tablePath);\n            if (!valueMap) {\n                valueMap = { tablePath: subject.metadata.tablePath, metadata: subject.metadata, values: {} };\n                valueMaps.push(valueMap);\n            }\n\n            valueMap.values[subject.metadata.versionColumn.databaseName] = this.connection.driver.preparePersistentValue(subject.metadata.versionColumn.getEntityValue(entity) + 1, subject.metadata.versionColumn);\n        }\n\n        if (subject.metadata.parentEntityMetadata) {\n            if (subject.metadata.parentEntityMetadata.updateDateColumn) {\n                let valueMap = valueMaps.find(valueMap => valueMap.tablePath === subject.metadata.parentEntityMetadata.tablePath);\n                if (!valueMap) {\n                    valueMap = {\n                        tablePath: subject.metadata.parentEntityMetadata.tablePath,\n                        metadata: subject.metadata.parentEntityMetadata,\n                        values: {}\n                    };\n                    valueMaps.push(valueMap);\n                }\n\n                valueMap.values[subject.metadata.parentEntityMetadata.updateDateColumn.databaseName] = this.connection.driver.preparePersistentValue(new Date(), subject.metadata.parentEntityMetadata.updateDateColumn);\n            }\n\n            if (subject.metadata.parentEntityMetadata.versionColumn) {\n                let valueMap = valueMaps.find(valueMap => valueMap.tablePath === subject.metadata.parentEntityMetadata.tablePath);\n                if (!valueMap) {\n                    valueMap = {\n                        tablePath: subject.metadata.parentEntityMetadata.tablePath,\n                        metadata: subject.metadata.parentEntityMetadata,\n                        values: {}\n                    };\n                    valueMaps.push(valueMap);\n                }\n\n                valueMap.values[subject.metadata.parentEntityMetadata.versionColumn.databaseName] = this.connection.driver.preparePersistentValue(subject.metadata.parentEntityMetadata.versionColumn.getEntityValue(entity) + 1, subject.metadata.parentEntityMetadata.versionColumn);\n            }\n        }\n\n        await Promise.all(valueMaps.map(valueMap => {\n            const idMap = valueMap.metadata.getDatabaseEntityIdMap(entity);\n            if (!idMap)\n                throw new Error(`Internal error. Cannot get id of the updating entity.`);\n\n            return this.queryRunner.update(valueMap.tablePath, valueMap.values, idMap);\n        }));\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Update only relations\n    // -------------------------------------------------------------------------\n\n    /**\n     * Updates relations of all given subjects in the database.\n     */\n    private executeUpdateRelations() {\n        return Promise.all(this.relationUpdateSubjects.map(subject => this.updateRelations(subject)));\n    }\n\n    /**\n     * Updates relations of the given subject in the database.\n     */\n    private async updateRelations(subject: Subject) {\n        const values: ObjectLiteral = {};\n        subject.relationUpdates.forEach(setRelation => {\n            setRelation.relation.joinColumns.forEach(joinColumn => {\n                const value = setRelation.value ? setRelation.value[joinColumn.referencedColumn!.propertyName] : null;\n                values[joinColumn.databaseName] = value; // todo: || fromInsertedSubjects ??\n            });\n        });\n\n        const idMap = subject.metadata.getDatabaseEntityIdMap(subject.databaseEntity);\n        if (!idMap)\n            throw new Error(`Internal error. Cannot get id of the updating entity.`);\n\n        return this.queryRunner.update(subject.metadata.tablePath, values, idMap);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Remove\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes all given subjects from the database.\n     */\n    private async executeRemoveOperations(): Promise<void> {\n        await PromiseUtils.runInSequence(this.removeSubjects, async subject => await this.remove(subject));\n    }\n\n    /**\n     * Updates given subject from the database.\n     */\n    private async remove(subject: Subject): Promise<void> {\n        if (subject.metadata.parentEntityMetadata) { // this code should not be there. it should be handled by  subject.metadata.getEntityIdColumnMap\n            const parentConditions: ObjectLiteral = {};\n            subject.metadata.primaryColumns.forEach(column => {\n                parentConditions[column.databaseName] = column.getEntityValue(subject.databaseEntity);\n            });\n            await this.queryRunner.delete(subject.metadata.parentEntityMetadata.tableName, parentConditions);\n\n            const childConditions: ObjectLiteral = {};\n            subject.metadata.primaryColumns.forEach(column => {\n                childConditions[column.databaseName] = column.getEntityValue(subject.databaseEntity);\n            });\n            await this.queryRunner.delete(subject.metadata.tableName, childConditions);\n        } else {\n            await this.queryRunner.delete(subject.metadata.tableName, subject.metadata.getDatabaseEntityIdMap(subject.databaseEntity)!);\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Insertion into junction tables\n    // -------------------------------------------------------------------------\n\n    /**\n     * Inserts into database junction tables all given array of subjects junction data.\n     */\n    private async executeInsertJunctionsOperations(): Promise<void> {\n        const promises: Promise<any>[] = [];\n        this.allSubjects.forEach(subject => {\n            subject.junctionInserts.forEach(junctionInsert => {\n                promises.push(this.insertJunctions(subject, junctionInsert));\n            });\n        });\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Inserts into database junction table given subject's junction insert data.\n     */\n    private async insertJunctions(subject: Subject, junctionInsert: JunctionInsert): Promise<void> {\n        // I think here we can only support to work only with single primary key entities\n\n        const getRelationId = (entity: ObjectLiteral, joinColumns: ColumnMetadata[]): any[] => {\n            return joinColumns.map(joinColumn => {\n                const id = joinColumn.referencedColumn!.getEntityValue(entity);\n                if (!id && joinColumn.referencedColumn!.isGenerated) {\n                    const insertSubject = this.insertSubjects.find(subject => subject.entity === entity);\n                    if (insertSubject && insertSubject.generatedMap)\n                        return joinColumn.referencedColumn!.getEntityValue(insertSubject.generatedMap);\n                }\n                // todo: implement other special referenced column types (update date, create date, version, discriminator column, etc.)\n\n                return id;\n            });\n        };\n\n        const relation = junctionInsert.relation;\n        const joinColumns = relation.isManyToManyOwner ? relation.joinColumns : relation.inverseRelation!.inverseJoinColumns;\n        const ownId = getRelationId(subject.entity, joinColumns);\n\n        if (!ownId.length)\n            throw new Error(`Cannot insert object of ${subject.entityTarget} type. Looks like its not persisted yet, or cascades are not set on the relation.`); // todo: better error message\n\n        const promises = junctionInsert.junctionEntities.map(newBindEntity => {\n\n            // get relation id from the newly bind entity\n            const joinColumns = relation.isManyToManyOwner ? relation.inverseJoinColumns : relation.inverseRelation!.joinColumns;\n            const relationId = getRelationId(newBindEntity, joinColumns);\n\n            // if relation id still does not exist - we arise an error\n            if (!relationId)\n                throw new Error(`Cannot insert object of ${(newBindEntity.constructor as any).name} type. Looks like its not persisted yet, or cascades are not set on the relation.`); // todo: better error message\n\n            const columns = relation.junctionEntityMetadata!.columns.map(column => column.databaseName);\n            const values = relation.isOwning ? [...ownId, ...relationId] : [...relationId, ...ownId];\n\n            return this.queryRunner.insert(relation.junctionEntityMetadata!.tablePath, OrmUtils.zipObject(columns, values));\n        });\n\n        await Promise.all(promises);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Remove from junction tables\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes from database junction tables all given array of subjects removal junction data.\n     */\n    private async executeRemoveJunctionsOperations(): Promise<void> {\n        const promises: Promise<any>[] = [];\n        this.allSubjects.forEach(subject => {\n            subject.junctionRemoves.forEach(junctionRemove => {\n                promises.push(this.removeJunctions(subject, junctionRemove));\n            });\n        });\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Removes from database junction table all given subject's removal junction data.\n     */\n    private async removeJunctions(subject: Subject, junctionRemove: JunctionRemove) {\n        const junctionMetadata = junctionRemove.relation.junctionEntityMetadata!;\n        const entity = subject.hasEntity ? subject.entity : subject.databaseEntity;\n\n        const firstJoinColumns = junctionRemove.relation.isOwning ? junctionRemove.relation.joinColumns : junctionRemove.relation.inverseRelation!.inverseJoinColumns;\n        const secondJoinColumns = junctionRemove.relation.isOwning ? junctionRemove.relation.inverseJoinColumns : junctionRemove.relation.inverseRelation!.joinColumns;\n        let conditions: ObjectLiteral = {};\n        firstJoinColumns.forEach(joinColumn => {\n            conditions[joinColumn.databaseName] = joinColumn.referencedColumn!.getEntityValue(entity);\n        });\n\n        const removePromises = junctionRemove.junctionRelationIds.map(relationIds => {\n            let inverseConditions: ObjectLiteral = {};\n            secondJoinColumns.forEach(joinColumn => {\n                inverseConditions[joinColumn.databaseName] = joinColumn.referencedColumn!.getEntityValue(relationIds);\n            });\n            return this.queryRunner.delete(junctionMetadata.tableName, Object.assign({}, inverseConditions, conditions));\n        });\n\n        await Promise.all(removePromises);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods: Refresh entity values after persistence\n    // -------------------------------------------------------------------------\n\n    /**\n     * Updates all special columns of the saving entities (create date, update date, versioning).\n     */\n    private updateSpecialColumnsInPersistedEntities() {\n\n        // update entity columns that gets updated on each entity insert\n        this.insertSubjects.forEach(subject => {\n            // if (subject.generatedObjectId && subject.metadata.objectIdColumn)\n            //     subject.metadata.objectIdColumn.setEntityValue(subject.entity, subject.generatedObjectId);\n\n            if (subject.generatedMap) {\n                subject.metadata.generatedColumns.forEach(generatedColumn => {\n                    const generatedValue = generatedColumn.getEntityValue(subject.generatedMap!);\n                    if (!generatedValue)\n                        return;\n\n                    generatedColumn.setEntityValue(subject.entity, generatedValue);\n                });\n            }\n            subject.metadata.primaryColumns.forEach(primaryColumn => {\n                if (subject.parentGeneratedId)\n                    primaryColumn.setEntityValue(subject.entity, subject.parentGeneratedId);\n            });\n\n            if (subject.metadata.updateDateColumn)\n                subject.metadata.updateDateColumn.setEntityValue(subject.entity, subject.date);\n            if (subject.metadata.createDateColumn)\n                subject.metadata.createDateColumn.setEntityValue(subject.entity, subject.date);\n            if (subject.metadata.versionColumn)\n                subject.metadata.versionColumn.setEntityValue(subject.entity, 1);\n            if (subject.metadata.treeLevelColumn) {\n                // const parentEntity = insertOperation.entity[metadata.treeParentMetadata.propertyName];\n                // const parentLevel = parentEntity ? (parentEntity[metadata.treeLevelColumn.propertyName] || 0) : 0;\n                subject.metadata.treeLevelColumn.setEntityValue(subject.entity, subject.treeLevel);\n            }\n            /*if (subject.metadata.hasTreeChildrenCountColumn) {\n                 subject.entity[subject.metadata.treeChildrenCountColumn.propertyName] = 0;\n            }*/\n\n            // set values to \"null\" for nullable columns that did not have values\n            subject.metadata.columns\n                .filter(column => column.isNullable && !column.isVirtual)\n                .forEach(column => {\n                    const columnValue = column.getEntityValue(subject.entity);\n                    if (columnValue === undefined)\n                        column.setEntityValue(subject.entity, null);\n                });\n        });\n\n        // update special columns that gets updated on each entity update\n        this.updateSubjects.forEach(subject => {\n            if (subject.metadata.updateDateColumn)\n                subject.metadata.updateDateColumn.setEntityValue(subject.entity, subject.date);\n            if (subject.metadata.versionColumn)\n                subject.metadata.versionColumn.setEntityValue(subject.entity, subject.metadata.versionColumn.getEntityValue(subject.entity) + 1);\n        });\n\n        // remove ids from the entities that were removed\n        this.removeSubjects\n            .filter(subject => subject.hasEntity)\n            .forEach(subject => {\n                subject.metadata.primaryColumns.forEach(primaryColumn => {\n                    primaryColumn.setEntityValue(subject.entity, undefined);\n                });\n            });\n\n        this.allSubjects\n            .filter(subject => subject.hasEntity)\n            .forEach(subject => {\n                subject.metadata.relationIds.forEach(relationId => {\n                    relationId.setValue(subject.entity);\n                });\n            });\n    }\n\n}\n","import {EntityMetadata} from \"../../metadata/EntityMetadata\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\n\n/**\n * Transforms plain old javascript object\n * Entity is constructed based on its entity metadata.\n */\nexport class PlainObjectToNewEntityTransformer {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    transform<T>(newEntity: T, object: ObjectLiteral, metadata: EntityMetadata): T {\n        this.groupAndTransform(newEntity, object, metadata);\n        return newEntity;\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Since db returns a duplicated rows of the data where accuracies of the same object can be duplicated\n     * we need to group our result and we must have some unique id (primary key in our case)\n     */\n    private groupAndTransform(entity: any, object: ObjectLiteral, metadata: EntityMetadata): void {\n\n        // copy regular column properties from the given object\n        metadata.columns\n            .filter(column => object.hasOwnProperty(column.propertyName))\n            .forEach(column => entity[column.propertyName] = object[column.propertyName]); // todo: also need to be sure that type is correct\n\n        // if relation is loaded then go into it recursively and transform its values too\n        metadata.relations\n            .filter(relation => object.hasOwnProperty(relation.propertyName))\n            .forEach(relation => {\n                const relationMetadata = relation.inverseEntityMetadata;\n                if (!relationMetadata)\n                    throw new Error(\"Relation metadata for the relation \" + metadata.name + \"#\" + relation.propertyName + \" is missing\");\n\n                if (relation.isManyToMany || relation.isOneToMany) {\n                    if (object[relation.propertyName] instanceof Array) {\n                        entity[relation.propertyName] = object[relation.propertyName].map((subObject: any) => {\n                            let subEntity = relationMetadata.create();\n                            // todo: support custom initial fields here\n                            if (entity[relation.propertyName] instanceof Array) {\n                                const existRelation = entity[relation.propertyName].find((subEntity: any) => {\n                                    return subEntity[relation.propertyName] === subObject[relation.propertyName];\n                                });\n                                if (existRelation)\n                                    this.groupAndTransform(subEntity, existRelation, relationMetadata);\n                            }\n\n                            this.groupAndTransform(subEntity, subObject, relationMetadata);\n                            return subEntity;\n                        });\n                    } else {\n                        entity[relation.propertyName] = object[relation.propertyName];\n                    }\n                } else {\n                    if (object[relation.propertyName]) {\n                        const subEntity = relationMetadata.create();\n                        if (entity[relation.propertyName])\n                            this.groupAndTransform(subEntity, entity[relation.propertyName], relationMetadata);\n\n                        this.groupAndTransform(subEntity, object[relation.propertyName], relationMetadata);\n                        entity[relation.propertyName] = subEntity;\n                    } else {\n                        entity[relation.propertyName] = object[relation.propertyName];\n                    }\n                }\n            });\n    }\n\n}","import {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {EntityMetadata} from \"../../metadata/EntityMetadata\";\nimport {EntityManager} from \"../../entity-manager/EntityManager\";\nimport {RelationMetadata} from \"../../metadata/RelationMetadata\";\n\n/**\n */\nclass LoadMapItem {\n\n    entity?: ObjectLiteral;\n    plainEntity: ObjectLiteral;\n    metadata: EntityMetadata;\n    parentLoadMapItem?: LoadMapItem;\n    relation?: RelationMetadata;\n\n    constructor(plainEntity: ObjectLiteral,\n                metadata: EntityMetadata,\n                parentLoadMapItem?: LoadMapItem,\n                relation?: RelationMetadata) {\n        this.plainEntity = plainEntity;\n        this.metadata = metadata;\n        this.parentLoadMapItem = parentLoadMapItem;\n        this.relation = relation;\n    }\n\n    get target(): Function|string {\n        return this.metadata.target;\n    }\n\n    get id(): any {\n        return this.metadata.getEntityIdMixedMap(this.plainEntity);\n    }\n\n    compareEntities(entity1: any, entity2: any) {\n        return this.metadata.compareEntities(entity1, entity2);\n    }\n\n}\n\nclass LoadMap {\n\n    loadMapItems: LoadMapItem[] = [];\n\n    get mainLoadMapItem(): LoadMapItem|undefined {\n        return this.loadMapItems.find(item => !item.relation && !item.parentLoadMapItem);\n    }\n\n    addLoadMap(newLoadMap: LoadMapItem) {\n        const item = this.loadMapItems.find(item => item.target === newLoadMap.target && item.id === newLoadMap.id);\n        if (!item)\n            this.loadMapItems.push(newLoadMap);\n    }\n\n    fillEntities(target: Function|string, entities: any[]) {\n        entities.forEach(entity => {\n            const item = this.loadMapItems.find(loadMapItem => {\n                return loadMapItem.target === target && loadMapItem.compareEntities(entity, loadMapItem.plainEntity);\n            });\n            if (item)\n                item.entity = entity;\n        });\n    }\n\n    groupByTargetIds(): { target: Function|string, ids: any[] }[] {\n        const groups: { target: Function|string, ids: any[] }[] = [];\n        this.loadMapItems.forEach(loadMapItem => {\n            let group = groups.find(group => group.target === loadMapItem.target);\n            if (!group) {\n                group = { target: loadMapItem.target, ids: [] };\n                groups.push(group);\n            }\n\n            group.ids.push(loadMapItem.id);\n        });\n        return groups;\n    }\n\n}\n\n/**\n * Transforms plain old javascript object\n * Entity is constructed based on its entity metadata.\n */\nexport class PlainObjectToDatabaseEntityTransformer {\n\n    constructor(private manager: EntityManager) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    async transform(plainObject: ObjectLiteral, metadata: EntityMetadata): Promise<ObjectLiteral|undefined> {\n\n        // if plain object does not have id then nothing to load really\n        if (!metadata.checkIfObjectContainsAllPrimaryKeys(plainObject))\n            return Promise.reject(\"Given object does not have a primary column, cannot transform it to database entity.\");\n\n        // create a special load map that will hold all metadata that will be used to operate with entities easily\n        const loadMap = new LoadMap();\n        const fillLoadMap = (entity: ObjectLiteral, entityMetadata: EntityMetadata, parentLoadMapItem?: LoadMapItem, relation?: RelationMetadata) => {\n            const item = new LoadMapItem(entity, entityMetadata, parentLoadMapItem, relation);\n            loadMap.addLoadMap(item);\n\n            entityMetadata\n                .extractRelationValuesFromEntity(entity, metadata.relations)\n                .filter(value => value !== null && value !== undefined)\n                .forEach(([relation, value, inverseEntityMetadata]) => fillLoadMap(value, inverseEntityMetadata, item, relation));\n        };\n        fillLoadMap(plainObject, metadata);\n        // load all entities and store them in the load map\n        await Promise.all(loadMap.groupByTargetIds().map(targetWithIds => { // todo: fix type hinting\n            return this.manager\n                .findByIds<ObjectLiteral>(targetWithIds.target as any, targetWithIds.ids)\n                .then(entities => loadMap.fillEntities(targetWithIds.target, entities));\n        }));\n\n        // go through each item in the load map and set their entity relationship using metadata stored in load map\n        loadMap.loadMapItems.forEach(loadMapItem => {\n            if (!loadMapItem.relation ||\n                !loadMapItem.entity ||\n                !loadMapItem.parentLoadMapItem ||\n                !loadMapItem.parentLoadMapItem.entity)\n                return;\n\n            if (loadMapItem.relation.isManyToMany || loadMapItem.relation.isOneToMany) {\n                if (!loadMapItem.parentLoadMapItem.entity[loadMapItem.relation.propertyName])\n                    loadMapItem.parentLoadMapItem.entity[loadMapItem.relation.propertyName] = [];\n                loadMapItem.parentLoadMapItem.entity[loadMapItem.relation.propertyName].push(loadMapItem.entity);\n\n            } else {\n                loadMapItem.parentLoadMapItem.entity[loadMapItem.relation.propertyName] = loadMapItem.entity;\n            }\n        });\n\n        return loadMap.mainLoadMapItem ? loadMap.mainLoadMapItem.entity : undefined;\n    }\n\n}","/**\n * Thrown if custom repository was not found.\n */\nexport class CustomRepositoryNotFoundError extends Error {\n    name = \"CustomRepositoryNotFoundError\";\n\n    constructor(repository: any) {\n        super();\n        this.message = `Custom repository ${repository instanceof Function ? repository.name : repository.constructor.name } was not found. ` +\n            `Did you forgot to put @EntityRepository decorator on it?`;\n    }\n\n}","/**\n * Thrown if custom repositories that extend AbstractRepository classes does not have managed entity.\n */\nexport class CustomRepositoryDoesNotHaveEntityError extends Error {\n    name = \"CustomRepositoryDoesNotHaveEntityError\";\n\n    constructor(repository: any) {\n        super(`Custom repository ${repository instanceof Function ? repository.name : repository.constructor.name} does not have managed entity. ` +\n        `Did you forget to specify entity for it @EntityRepository(MyEntity)? `);\n    }\n\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {EntityManager} from \"../entity-manager/EntityManager\";\nimport {Repository} from \"./Repository\";\nimport {TreeRepository} from \"./TreeRepository\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {CustomRepositoryDoesNotHaveEntityError} from \"../error/CustomRepositoryDoesNotHaveEntityError\";\nimport {getMetadataArgsStorage} from \"../index\";\nimport {CustomRepositoryNotFoundError} from \"../error/CustomRepositoryNotFoundError\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Provides abstract class for custom repositories that do not inherit from original orm Repository.\n * Contains all most-necessary methods to simplify code in the custom repository.\n * All methods are protected thus not exposed and it allows to create encapsulated custom repository.\n *\n * @experimental\n */\nexport class AbstractRepository<Entity extends ObjectLiteral> {\n\n    // -------------------------------------------------------------------------\n    // Protected Methods Set Dynamically\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets entity manager that allows to perform repository operations with any entity.\n     */\n    protected manager: EntityManager;\n\n    // -------------------------------------------------------------------------\n    // Protected Accessors\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets the original ORM repository for the entity that is managed by this repository.\n     * If current repository does not manage any entity, then exception will be thrown.\n     */\n    protected get repository(): Repository<Entity> {\n        const target = this.getCustomRepositoryTarget(this as any);\n        if (!target)\n            throw new CustomRepositoryDoesNotHaveEntityError(this.constructor);\n\n        return this.manager.getRepository<Entity>(target);\n    }\n\n    /**\n     * Gets the original ORM tree repository for the entity that is managed by this repository.\n     * If current repository does not manage any entity, then exception will be thrown.\n     */\n    protected get treeRepository(): TreeRepository<Entity> {\n        const target = this.getCustomRepositoryTarget(this as any);\n        if (!target)\n            throw new CustomRepositoryDoesNotHaveEntityError(this.constructor);\n\n        return this.manager.getTreeRepository<Entity>(target);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new query builder for the repository's entity that can be used to build a sql query.\n     * If current repository does not manage any entity, then exception will be thrown.\n     */\n    protected createQueryBuilder(alias: string): SelectQueryBuilder<Entity> {\n        const target = this.getCustomRepositoryTarget(this.constructor);\n        if (!target)\n            throw new CustomRepositoryDoesNotHaveEntityError(this.constructor);\n\n        return this.manager.getRepository<Entity>(target).createQueryBuilder(alias);\n    }\n\n    /**\n     * Creates a new query builder for the given entity that can be used to build a sql query.\n     */\n    protected createQueryBuilderFor<T>(entity: ObjectType<T>, alias: string): SelectQueryBuilder<T> {\n        return this.getRepositoryFor(entity).createQueryBuilder(alias);\n    }\n\n    /**\n     * Gets the original ORM repository for the given entity class.\n     */\n    protected getRepositoryFor<T>(entity: ObjectType<T>): Repository<T> {\n        return this.manager.getRepository(entity);\n    }\n\n    /**\n     * Gets the original ORM tree repository for the given entity class.\n     */\n    protected getTreeRepositoryFor<T>(entity: ObjectType<T>): TreeRepository<T> {\n        return this.manager.getTreeRepository(entity);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets custom repository's managed entity.\n     * If given custom repository does not manage any entity then undefined will be returned.\n     */\n    private getCustomRepositoryTarget(customRepository: any): Function|string|undefined {\n        const entityRepositoryMetadataArgs = getMetadataArgsStorage().entityRepositories.find(repository => {\n            return repository.target === (customRepository instanceof Function ? customRepository : (customRepository as any).constructor);\n        });\n        if (!entityRepositoryMetadataArgs)\n            throw new CustomRepositoryNotFoundError(customRepository);\n\n        return entityRepositoryMetadataArgs.entity;\n    }\n\n}","/**\n * Thrown if custom repository inherits Repository class however entity is not set in @EntityRepository decorator.\n */\nexport class CustomRepositoryCannotInheritRepositoryError extends Error {\n    name = \"CustomRepositoryCannotInheritRepositoryError\";\n\n    constructor(repository: any) {\n        super(`Custom entity repository ${repository instanceof Function ? repository.name : repository.constructor.name} ` +\n            ` cannot inherit Repository class without entity being set in the @EntityRepository decorator.`);\n    }\n\n}","/**\n * Thrown when repository for the given class is not found.\n */\nexport class RepositoryNotFoundError extends Error {\n    name = \"RepositoryNotFoundError\";\n\n    constructor(connectionName: string, entityClass: Function|string) {\n        super();\n        const targetName = typeof entityClass === \"function\" && (<any> entityClass).name ? (<any> entityClass).name : entityClass;\n        this.message = `No repository for \"${targetName}\" was found. Looks like this entity is not registered in ` +\n            `current \"${connectionName}\" connection?`;\n        this.stack = new Error().stack;\n    }\n\n}","/**\n * Thrown when repository for the given class is not found.\n */\nexport class RepositoryNotTreeError extends Error {\n    name = \"RepositoryNotTreeError\";\n\n    constructor(entityClass: Function|string) {\n        super();\n        const targetName = typeof entityClass === \"function\" && (<any> entityClass).name ? (<any> entityClass).name : entityClass;\n        this.message = `Repository of the \"${targetName}\" class is not a TreeRepository. Try to use @ClosureEntity decorator instead of @Entity.`;\n        this.stack = new Error().stack;\n    }\n\n}","import {TreeRepository} from \"./TreeRepository\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {Repository} from \"./Repository\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {MongoRepository} from \"./MongoRepository\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {EntityManager} from \"../entity-manager/EntityManager\";\n\n/**\n * Factory used to create different types of repositories.\n */\nexport class RepositoryFactory {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a repository.\n     */\n    create(manager: EntityManager, metadata: EntityMetadata, queryRunner?: QueryRunner): Repository<any> {\n\n        if (metadata.isClosure) {\n            // NOTE: dynamic access to protected properties. We need this to prevent unwanted properties in those classes to be exposed,\n            // however we need these properties for internal work of the class\n            const repository = new TreeRepository<any>();\n            Object.assign(repository, {\n                manager: manager,\n                metadata: metadata,\n                queryRunner: queryRunner,\n            });\n            return repository;\n\n        } else {\n            // NOTE: dynamic access to protected properties. We need this to prevent unwanted properties in those classes to be exposed,\n            // however we need these properties for internal work of the class\n            let repository: Repository<any>;\n            if (manager.connection.driver instanceof MongoDriver) {\n                repository = new MongoRepository();\n            } else {\n                repository = new Repository<any>();\n            }\n            Object.assign(repository, {\n                manager: manager,\n                metadata: metadata,\n                queryRunner: queryRunner,\n            });\n\n            return repository;\n        }\n    }\n\n}","import {Driver} from \"../driver/Driver\";\n\nexport class TreeRepositoryNotSupportedError extends Error {\n    name = \"TreeRepositoryNotSupportedError\";\n\n    constructor(driver: Driver) {\n        super();\n        this.message = `Tree repositories are not supported in ${driver.options.type} driver.`;\n    }\n\n}","\n/**\n * Make all properties in T optional\n */\nexport type QueryPartialEntity<T> = {\n    [P in keyof T]?: T[P]|(() => string);\n};\n","import {Connection} from \"../connection/Connection\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {QueryRunnerProviderAlreadyReleasedError} from \"../error/QueryRunnerProviderAlreadyReleasedError\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {DeepPartial} from \"../common/DeepPartial\";\nimport {RemoveOptions} from \"../repository/RemoveOptions\";\nimport {SaveOptions} from \"../repository/SaveOptions\";\nimport {NoNeedToReleaseEntityManagerError} from \"../error/NoNeedToReleaseEntityManagerError\";\nimport {MongoRepository} from \"../repository/MongoRepository\";\nimport {TreeRepository} from \"../repository/TreeRepository\";\nimport {Repository} from \"../repository/Repository\";\nimport {FindOptionsUtils} from \"../find-options/FindOptionsUtils\";\nimport {SubjectBuilder} from \"../persistence/SubjectBuilder\";\nimport {SubjectOperationExecutor} from \"../persistence/SubjectOperationExecutor\";\nimport {PlainObjectToNewEntityTransformer} from \"../query-builder/transformer/PlainObjectToNewEntityTransformer\";\nimport {PlainObjectToDatabaseEntityTransformer} from \"../query-builder/transformer/PlainObjectToDatabaseEntityTransformer\";\nimport {CustomRepositoryNotFoundError} from \"../error/CustomRepositoryNotFoundError\";\nimport {getMetadataArgsStorage} from \"../index\";\nimport {AbstractRepository} from \"../repository/AbstractRepository\";\nimport {CustomRepositoryCannotInheritRepositoryError} from \"../error/CustomRepositoryCannotInheritRepositoryError\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {RepositoryNotFoundError} from \"../error/RepositoryNotFoundError\";\nimport {RepositoryNotTreeError} from \"../error/RepositoryNotTreeError\";\nimport {RepositoryFactory} from \"../repository/RepositoryFactory\";\nimport {TreeRepositoryNotSupportedError} from \"../error/TreeRepositoryNotSupportedError\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {QueryPartialEntity} from \"../query-builder/QueryPartialEntity\";\n\n/**\n * Entity manager supposed to work with any entity, automatically find its repository and call its methods,\n * whatever entity type are you passing.\n */\nexport class EntityManager {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by this entity manager.\n     */\n    readonly connection: Connection;\n\n    /**\n     * Custom query runner to be used for operations in this entity manager.\n     * Used only in non-global entity manager.\n     */\n    readonly queryRunner?: QueryRunner;\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Once created and then reused by en repositories.\n     */\n    protected repositories: Repository<any>[] = [];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection, queryRunner?: QueryRunner) {\n        this.connection = connection;\n        if (queryRunner) {\n            this.queryRunner = queryRunner;\n            // dynamic: this.queryRunner = manager;\n            Object.assign(this.queryRunner, { manager: this });\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Wraps given function execution (and all operations made there) in a transaction.\n     * All database operations must be executed using provided entity manager.\n     */\n    async transaction<T>(runInTransaction: (entityManger: EntityManager) => Promise<T>): Promise<T> {\n\n        if (this.connection.driver instanceof MongoDriver)\n            throw new Error(`Transactions aren't supported by MongoDB.`);\n\n        if (this.queryRunner && this.queryRunner.isReleased)\n            throw new QueryRunnerProviderAlreadyReleasedError();\n\n        if (this.queryRunner && this.queryRunner.isTransactionActive)\n            throw new Error(`Cannot start transaction because its already started`);\n\n        const usedQueryRunner = this.queryRunner || this.connection.createQueryRunner(\"master\");\n        const transactionEntityManager = this.connection.createEntityManager(usedQueryRunner);\n\n        try {\n            await usedQueryRunner.startTransaction();\n            const result = await runInTransaction(transactionEntityManager);\n            await usedQueryRunner.commitTransaction();\n            return result;\n\n        } catch (err) {\n            try { // we throw original error even if rollback thrown an error\n                await usedQueryRunner.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw err;\n\n        } finally {\n            if (!this.queryRunner) // if we used a new query runner provider then release it\n                await usedQueryRunner.release();\n        }\n    }\n\n    /**\n     * Executes raw SQL query and returns raw database results.\n     */\n    async query(query: string, parameters?: any[]): Promise<any> {\n        return this.connection.query(query, parameters, this.queryRunner);\n    }\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    createQueryBuilder<Entity>(entityClass: ObjectType<Entity>|Function|string, alias: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity>;\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    createQueryBuilder(queryRunner?: QueryRunner): SelectQueryBuilder<any>;\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    createQueryBuilder<Entity>(entityClass?: ObjectType<Entity>|Function|string|QueryRunner, alias?: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity> {\n        if (alias) {\n            return this.connection.createQueryBuilder(entityClass as Function|string, alias, queryRunner || this.queryRunner);\n\n        } else {\n            return this.connection.createQueryBuilder(entityClass as QueryRunner|undefined || this.queryRunner);\n        }\n    }\n\n    /**\n     * Checks if entity has an id.\n     */\n    hasId(entity: any): boolean;\n\n    /**\n     * Checks if entity of given schema name has an id.\n     */\n    hasId(target: Function|string, entity: any): boolean;\n\n    /**\n     * Checks if entity has an id by its Function type or schema name.\n     */\n    hasId(targetOrEntity: any|Function|string, maybeEntity?: any): boolean {\n        const target = arguments.length === 2 ? targetOrEntity : targetOrEntity.constructor;\n        const entity = arguments.length === 2 ? maybeEntity : targetOrEntity;\n        const metadata = this.connection.getMetadata(target);\n        return metadata.hasId(entity);\n    }\n\n    /**\n     * Gets entity mixed id.\n     */\n    getId(entity: any): any;\n\n    /**\n     * Gets entity mixed id.\n     */\n    getId(target: Function|string, entity: any): any;\n\n    /**\n     * Gets entity mixed id.\n     */\n    getId(targetOrEntity: any|Function|string, maybeEntity?: any): any {\n        const target = arguments.length === 2 ? targetOrEntity : targetOrEntity.constructor;\n        const entity = arguments.length === 2 ? maybeEntity : targetOrEntity;\n        const metadata = this.connection.getMetadata(target);\n        return metadata.getEntityIdMixedMap(entity);\n    }\n\n    /**\n     * Creates a new entity instance.\n     */\n    create<Entity>(entityClass: ObjectType<Entity>): Entity;\n\n    /**\n     * Creates a new entity instance and copies all entity properties from this object into a new entity.\n     * Note that it copies only properties that present in entity schema.\n     */\n    create<Entity>(entityClass: ObjectType<Entity>|string, plainObject: DeepPartial<Entity>): Entity;\n\n    /**\n     * Creates a new entities and copies all entity properties from given objects into their new entities.\n     * Note that it copies only properties that present in entity schema.\n     */\n    create<Entity>(entityClass: ObjectType<Entity>|string, plainObjects: DeepPartial<Entity>[]): Entity[];\n\n    /**\n     * Creates a new entity instance or instances.\n     * Can copy properties from the given object into new entities.\n     */\n    create<Entity>(entityClass: ObjectType<Entity>|string, plainObjectOrObjects?: DeepPartial<Entity>|DeepPartial<Entity>[]): Entity|Entity[] {\n        const metadata = this.connection.getMetadata(entityClass);\n\n        if (!plainObjectOrObjects)\n            return metadata.create();\n\n        if (plainObjectOrObjects instanceof Array)\n            return plainObjectOrObjects.map(plainEntityLike => this.create(entityClass, plainEntityLike));\n\n        return this.merge(entityClass, metadata.create(), plainObjectOrObjects);\n    }\n\n    /**\n     * Merges two entities into one new entity.\n     */\n    merge<Entity>(entityClass: ObjectType<Entity>|string, mergeIntoEntity: Entity, ...entityLikes: DeepPartial<Entity>[]): Entity { // todo: throw exception if entity manager is released\n        const metadata = this.connection.getMetadata(entityClass);\n        const plainObjectToEntityTransformer = new PlainObjectToNewEntityTransformer();\n        entityLikes.forEach(object => plainObjectToEntityTransformer.transform(mergeIntoEntity, object, metadata));\n        return mergeIntoEntity;\n    }\n\n    /**\n     * Creates a new entity from the given plan javascript object. If entity already exist in the database, then\n     * it loads it (and everything related to it), replaces all values with the new ones from the given object\n     * and returns this new entity. This new entity is actually a loaded from the db entity with all properties\n     * replaced from the new object.\n     */\n    async preload<Entity>(entityClass: ObjectType<Entity>|string, entityLike: DeepPartial<Entity>): Promise<Entity|undefined> {\n        const metadata = this.connection.getMetadata(entityClass);\n        const plainObjectToDatabaseEntityTransformer = new PlainObjectToDatabaseEntityTransformer(this.connection.manager);\n        const transformedEntity = await plainObjectToDatabaseEntityTransformer.transform(entityLike, metadata);\n        if (transformedEntity)\n            return this.merge(entityClass, transformedEntity as Entity, entityLike);\n\n        return undefined;\n    }\n\n    /**\n     * Saves all given entities in the database.\n     * If entities do not exist in the database then inserts, otherwise updates.\n     */\n    save<Entity>(entity: Entity, options?: SaveOptions): Promise<Entity>;\n\n    /**\n     * Saves all given entities in the database.\n     * If entities do not exist in the database then inserts, otherwise updates.\n     */\n    save<Entity, T extends DeepPartial<Entity>>(targetOrEntity: ObjectType<Entity>|string, entity: T, options?: SaveOptions): Promise<T>;\n\n    /**\n     * Saves all given entities in the database.\n     * If entities do not exist in the database then inserts, otherwise updates.\n     */\n    save<Entity>(entities: Entity[], options?: SaveOptions): Promise<Entity[]>;\n\n    /**\n     * Saves all given entities in the database.\n     * If entities do not exist in the database then inserts, otherwise updates.\n     */\n    save<Entity, T extends DeepPartial<Entity>>(targetOrEntity: ObjectType<Entity>|string, entities: T[], options?: SaveOptions): Promise<T[]>;\n\n    /**\n     * Saves a given entity in the database.\n     */\n    save<Entity, T extends DeepPartial<Entity>>(targetOrEntity: (T|T[])|ObjectType<Entity>|string, maybeEntityOrOptions?: T|T[], maybeOptions?: SaveOptions): Promise<T|T[]> {\n\n        const target = (arguments.length > 1 && (targetOrEntity instanceof Function || typeof targetOrEntity === \"string\")) ? targetOrEntity as Function|string : undefined;\n        const entity: T|T[] = target ? maybeEntityOrOptions as T|T[] : targetOrEntity as T|T[];\n        const options = target ? maybeOptions : maybeEntityOrOptions as SaveOptions;\n\n        // if user passed empty array of entities then we don't need to do anything\n        if (entity instanceof Array && entity.length === 0)\n            return Promise.resolve(entity);\n\n        return Promise.resolve().then(async () => { // we MUST call \"fake\" resolve here to make sure all properties of lazily loaded properties are resolved.\n\n            // todo: use transaction instead if possible\n            // await this.transaction(async transactionEntityManager => {\n            //     if (options && options.data)\n            //         transactionEntityManager.data = options.data;\n            //\n            // });\n\n            const queryRunner = this.queryRunner || this.connection.createQueryRunner(\"master\");\n            const transactionEntityManager = this.connection.createEntityManager(queryRunner);\n            if (options && options.data)\n                Object.assign(queryRunner.data, options.data);\n\n            try {\n                const executors: SubjectOperationExecutor[] = [];\n                if (entity instanceof Array) {\n                    await Promise.all(entity.map(async entity => {\n                        const entityTarget = target ? target : entity.constructor;\n                        const metadata = this.connection.getMetadata(entityTarget);\n\n                        const databaseEntityLoader = new SubjectBuilder(this.connection, queryRunner);\n                        await databaseEntityLoader.persist(entity, metadata);\n\n                        const executor = new SubjectOperationExecutor(this.connection, transactionEntityManager, queryRunner, databaseEntityLoader.operateSubjects);\n                        executors.push(executor);\n                    }));\n\n                } else {\n                    const finalTarget = target ? target : entity.constructor;\n                    const metadata = this.connection.getMetadata(finalTarget);\n\n                    const databaseEntityLoader = new SubjectBuilder(this.connection, queryRunner);\n                    await databaseEntityLoader.persist(entity, metadata);\n\n                    const executor = new SubjectOperationExecutor(this.connection, transactionEntityManager, queryRunner, databaseEntityLoader.operateSubjects);\n                    executors.push(executor);\n                }\n\n                const executorsNeedsToBeExecuted = executors.filter(executor => executor.areExecutableOperations());\n                if (executorsNeedsToBeExecuted.length) {\n\n                    // start execute queries in a transaction\n                    // if transaction is already opened in this query runner then we don't touch it\n                    // if its not opened yet then we open it here, and once we finish - we close it\n                    let isTransactionStartedByItself = false;\n                    try {\n\n                        // open transaction if its not opened yet\n                        if (!queryRunner.isTransactionActive) {\n                            isTransactionStartedByItself = true;\n                            await queryRunner.startTransaction();\n                        }\n\n                        await Promise.all(executorsNeedsToBeExecuted.map(executor => {\n                            return executor.execute();\n                        }));\n\n                        // commit transaction if it was started by us\n                        if (isTransactionStartedByItself === true)\n                            await queryRunner.commitTransaction();\n\n                    } catch (error) {\n\n                        // rollback transaction if it was started by us\n                        if (isTransactionStartedByItself) {\n                            try {\n                                await queryRunner.rollbackTransaction();\n                            } catch (rollbackError) { }\n                        }\n\n                        throw error;\n                    }\n                }\n\n            } finally {\n                if (!this.queryRunner) // release it only if its created by this method\n                    await queryRunner.release();\n            }\n\n            return entity;\n        });\n    }\n\n    /**\n     * Inserts a given entity into the database.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient INSERT query.\n     * Does not check if entity exist in the database, so query will fail if duplicate entity is being inserted.\n     * You can execute bulk inserts using this method.\n     */\n    async insert<Entity>(target: ObjectType<Entity>|string, entity: QueryPartialEntity<Entity>|QueryPartialEntity<Entity>[], options?: SaveOptions): Promise<void> {\n        // todo: in the future create InsertResult with query result information\n        // todo: think if subscribers and listeners can be executed here as well\n\n        await this.createQueryBuilder()\n            .insert()\n            .into(target)\n            .values(entity)\n            .execute();\n    }\n\n    /**\n     * Updates entity partially. Entity can be found by a given conditions.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient UPDATE query.\n     * Does not check if entity exist in the database.\n     */\n    async update<Entity>(target: ObjectType<Entity>|string, conditions: Partial<Entity>, partialEntity: DeepPartial<Entity>, options?: SaveOptions): Promise<void> {\n        // todo: in the future create UpdateResult with query result information\n        // todo: think if subscribers and listeners can be executed here as well\n\n        await this.createQueryBuilder()\n            .update(target)\n            .set(partialEntity)\n            .where(conditions)\n            .execute();\n    }\n\n    /**\n     * Updates entity partially. Entity will be found by a given id.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient UPDATE query.\n     * Does not check if entity exist in the database.\n     */\n    async updateById<Entity>(target: ObjectType<Entity>|string, id: any|any[], partialEntity: DeepPartial<Entity>, options?: SaveOptions): Promise<void> {\n        // todo: in the future create UpdateResult with query result information\n        // todo: think if subscribers and listeners can be executed here as well\n\n        await this.createQueryBuilder()\n            .update(target)\n            .set(partialEntity)\n            .whereInIds(id)\n            .execute();\n    }\n\n    /**\n     * Removes a given entity from the database.\n     */\n    remove<Entity>(entity: Entity): Promise<Entity>;\n\n    /**\n     * Removes a given entity from the database.\n     */\n    remove<Entity>(targetOrEntity: ObjectType<Entity>|string, entity: Entity, options?: RemoveOptions): Promise<Entity>;\n\n    /**\n     * Removes a given entity from the database.\n     */\n    remove<Entity>(entity: Entity[], options?: RemoveOptions): Promise<Entity>;\n\n    /**\n     * Removes a given entity from the database.\n     */\n    remove<Entity>(targetOrEntity: ObjectType<Entity>|string, entity: Entity[], options?: RemoveOptions): Promise<Entity[]>;\n\n    /**\n     * Removes a given entity from the database.\n     */\n    remove<Entity>(targetOrEntity: (Entity|Entity[])|Function|string, maybeEntityOrOptions?: Entity|Entity[], maybeOptions?: RemoveOptions): Promise<Entity|Entity[]> {\n\n        const target = (arguments.length > 1 && (targetOrEntity instanceof Function || typeof targetOrEntity === \"string\")) ? targetOrEntity as Function|string : undefined;\n        const entity: Entity|Entity[] = target ? maybeEntityOrOptions as Entity|Entity[] : targetOrEntity as Entity|Entity[];\n        const options = target ? maybeOptions : maybeEntityOrOptions as SaveOptions;\n\n        // if user passed empty array of entities then we don't need to do anything\n        if (entity instanceof Array && entity.length === 0)\n            return Promise.resolve(entity);\n\n        return Promise.resolve().then(async () => { // we MUST call \"fake\" resolve here to make sure all properties of lazily loaded properties are resolved.\n\n            const queryRunner = this.queryRunner || this.connection.createQueryRunner(\"master\");\n            const transactionEntityManager = this.connection.createEntityManager(queryRunner);\n            if (options && options.data)\n                Object.assign(queryRunner.data, options.data);\n\n            try {\n                const executors: SubjectOperationExecutor[] = [];\n                if (entity instanceof Array) {\n                    await Promise.all(entity.map(async entity => {\n                        const entityTarget = target ? target : entity.constructor;\n                        const metadata = this.connection.getMetadata(entityTarget);\n\n                        const databaseEntityLoader = new SubjectBuilder(this.connection, queryRunner);\n                        await databaseEntityLoader.remove(entity, metadata);\n\n                        const executor = new SubjectOperationExecutor(this.connection, transactionEntityManager, queryRunner, databaseEntityLoader.operateSubjects);\n                        executors.push(executor);\n                    }));\n\n                } else {\n                    const finalTarget = target ? target : entity.constructor;\n                    const metadata = this.connection.getMetadata(finalTarget);\n\n                    const databaseEntityLoader = new SubjectBuilder(this.connection, queryRunner);\n                    await databaseEntityLoader.remove(entity, metadata);\n\n                    const executor = new SubjectOperationExecutor(this.connection, transactionEntityManager, queryRunner, databaseEntityLoader.operateSubjects);\n                    executors.push(executor);\n                }\n\n                const executorsNeedsToBeExecuted = executors.filter(executor => executor.areExecutableOperations());\n                if (executorsNeedsToBeExecuted.length) {\n\n                    // start execute queries in a transaction\n                    // if transaction is already opened in this query runner then we don't touch it\n                    // if its not opened yet then we open it here, and once we finish - we close it\n                    let isTransactionStartedByItself = false;\n                    try {\n\n                        // open transaction if its not opened yet\n                        if (!queryRunner.isTransactionActive) {\n                            isTransactionStartedByItself = true;\n                            await queryRunner.startTransaction();\n                        }\n\n                        await Promise.all(executorsNeedsToBeExecuted.map(executor => {\n                            return executor.execute();\n                        }));\n\n                        // commit transaction if it was started by us\n                        if (isTransactionStartedByItself === true)\n                            await queryRunner.commitTransaction();\n\n                    } catch (error) {\n\n                        // rollback transaction if it was started by us\n                        if (isTransactionStartedByItself) {\n                            try {\n                                await queryRunner.rollbackTransaction();\n                            } catch (rollbackError) { }\n                        }\n\n                        throw error;\n                    }\n                }\n\n            } finally {\n                if (!this.queryRunner) // release it only if its created by this method\n                    await queryRunner.release();\n            }\n\n            return entity;\n        });\n    }\n\n    /**\n     * Deletes entities by a given conditions.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient DELETE query.\n     * Does not check if entity exist in the database.\n     */\n    async delete<Entity>(targetOrEntity: ObjectType<Entity>|string, conditions: Partial<Entity>, options?: RemoveOptions): Promise<void> {\n        // todo: in the future create DeleteResult with query result information\n        // todo: think if subscribers and listeners can be executed here as well\n\n        await this.createQueryBuilder()\n            .delete()\n            .from(targetOrEntity)\n            .where(conditions)\n            .execute();\n    }\n\n    /**\n     * Deletes entities by a given entity id or ids.\n     * Unlike save method executes a primitive operation without cascades, relations and other operations included.\n     * Does not modify source entity and does not execute listeners and subscribers.\n     * Executes fast and efficient DELETE query.\n     * Does not check if entity exist in the database.\n     */\n    async deleteById<Entity>(targetOrEntity: ObjectType<Entity>|string, id: any|any[], options?: RemoveOptions): Promise<void> {\n        // todo: in the future create DeleteResult with query result information\n        // todo: think if subscribers and listeners can be executed here as well\n\n        await this.createQueryBuilder()\n            .delete()\n            .from(targetOrEntity)\n            .whereInIds(id)\n            .execute();\n    }\n\n    /**\n     * Deletes entity by a given entity id.\n     *\n     * @deprecated use deleteById method instead.\n     */\n    async removeById<Entity>(targetOrEntity: ObjectType<Entity>|string, id: any, options?: RemoveOptions): Promise<void> {\n        return this.deleteById(targetOrEntity, id, options);\n    }\n\n    /**\n     * Deletes entity by a given entity ids.\n     *\n     * @deprecated use deleteById method instead.\n     */\n    async removeByIds<Entity>(targetOrEntity: ObjectType<Entity>|string, ids: any[], options?: RemoveOptions): Promise<void> {\n        return this.deleteById(targetOrEntity, ids, options);\n    }\n\n    /**\n     * Counts entities that match given options.\n     * Useful for pagination.\n     */\n    count<Entity>(entityClass: ObjectType<Entity>|string, options?: FindManyOptions<Entity>): Promise<number>;\n\n    /**\n     * Counts entities that match given conditions.\n     * Useful for pagination.\n     */\n    count<Entity>(entityClass: ObjectType<Entity>|string, conditions?: Partial<Entity>): Promise<number>;\n\n    /**\n     * Counts entities that match given find options or conditions.\n     * Useful for pagination.\n     */\n    async count<Entity>(entityClass: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<number> {\n        const metadata = this.connection.getMetadata(entityClass);\n        const qb = this.createQueryBuilder(entityClass, FindOptionsUtils.extractFindManyOptionsAlias(optionsOrConditions) || metadata.name);\n        return FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(qb, optionsOrConditions).getCount();\n    }\n\n    /**\n     * Finds entities that match given options.\n     */\n    find<Entity>(entityClass: ObjectType<Entity>|string, options?: FindManyOptions<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities that match given conditions.\n     */\n    find<Entity>(entityClass: ObjectType<Entity>|string, conditions?: Partial<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    async find<Entity>(entityClass: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        const metadata = this.connection.getMetadata(entityClass);\n        const qb = this.createQueryBuilder(entityClass, FindOptionsUtils.extractFindManyOptionsAlias(optionsOrConditions) || metadata.name);\n        this.joinEagerRelations(qb, qb.alias, metadata);\n        return FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(qb, optionsOrConditions).getMany();\n    }\n\n    /**\n     * Finds entities that match given find options.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount<Entity>(entityClass: ObjectType<Entity>|string, options?: FindManyOptions<Entity>): Promise<[Entity[], number]>;\n\n    /**\n     * Finds entities that match given conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount<Entity>(entityClass: ObjectType<Entity>|string, conditions?: Partial<Entity>): Promise<[Entity[], number]>;\n\n    /**\n     * Finds entities that match given find options and conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    async findAndCount<Entity>(entityClass: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<[Entity[], number]> {\n        const metadata = this.connection.getMetadata(entityClass);\n        const qb = this.createQueryBuilder(entityClass, FindOptionsUtils.extractFindManyOptionsAlias(optionsOrConditions) || metadata.name);\n        this.joinEagerRelations(qb, qb.alias, metadata);\n        return FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(qb, optionsOrConditions).getManyAndCount();\n    }\n\n    /**\n     * Finds entities with ids.\n     * Optionally find options can be applied.\n     */\n    findByIds<Entity>(entityClass: ObjectType<Entity>|string, ids: any[], options?: FindManyOptions<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities with ids.\n     * Optionally conditions can be applied.\n     */\n    findByIds<Entity>(entityClass: ObjectType<Entity>|string, ids: any[], conditions?: Partial<Entity>): Promise<Entity[]>;\n\n    /**\n     * Finds entities with ids.\n     * Optionally find options or conditions can be applied.\n     */\n    async findByIds<Entity>(entityClass: ObjectType<Entity>|string, ids: any[], optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n\n        // if no ids passed, no need to execute a query - just return an empty array of values\n        if (!ids.length)\n            return Promise.resolve([]);\n\n        const metadata = this.connection.getMetadata(entityClass);\n        const qb = this.createQueryBuilder(entityClass, FindOptionsUtils.extractFindManyOptionsAlias(optionsOrConditions) || metadata.name);\n        FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(qb, optionsOrConditions);\n\n        ids = ids.map(id => {\n            if (!metadata.hasMultiplePrimaryKeys && !(id instanceof Object)) {\n                return metadata.createEntityIdMap([id]);\n            }\n            return id;\n        });\n        this.joinEagerRelations(qb, qb.alias, metadata);\n        return qb.andWhereInIds(ids).getMany();\n    }\n\n    /**\n     * Finds first entity that matches given find options.\n     */\n    findOne<Entity>(entityClass: ObjectType<Entity>|string, options?: FindOneOptions<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds first entity that matches given conditions.\n     */\n    findOne<Entity>(entityClass: ObjectType<Entity>|string, conditions?: Partial<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds first entity that matches given conditions.\n     */\n    async findOne<Entity>(entityClass: ObjectType<Entity>|string, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const metadata = this.connection.getMetadata(entityClass);\n        const qb = this.createQueryBuilder(entityClass, FindOptionsUtils.extractFindOneOptionsAlias(optionsOrConditions) || metadata.name);\n        this.joinEagerRelations(qb, qb.alias, metadata);\n        return FindOptionsUtils.applyFindOneOptionsOrConditionsToQueryBuilder(qb, optionsOrConditions).getOne();\n    }\n\n    /**\n     * Finds entity with given id.\n     * Optionally find options can be applied.\n     */\n    findOneById<Entity>(entityClass: ObjectType<Entity>|string, id: any, options?: FindOneOptions<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds entity with given id.\n     * Optionally conditions can be applied.\n     */\n    findOneById<Entity>(entityClass: ObjectType<Entity>|string, id: any, conditions?: Partial<Entity>): Promise<Entity|undefined>;\n\n    /**\n     * Finds entity with given id.\n     * Optionally find options or conditions can be applied.\n     */\n    async findOneById<Entity>(entityClass: ObjectType<Entity>|string, id: any, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const metadata = this.connection.getMetadata(entityClass);\n        const qb = this.createQueryBuilder(entityClass, FindOptionsUtils.extractFindOneOptionsAlias(optionsOrConditions) || metadata.name);\n        if (metadata.hasMultiplePrimaryKeys && !(id instanceof Object)) {\n            // const columnNames = this.metadata.getEntityIdMap({  });\n            throw new Error(`You have multiple primary keys in your entity, to use findOneById with multiple primary keys please provide ` +\n                `complete object with all entity ids, like this: { firstKey: value, secondKey: value }`);\n        }\n\n        if (!metadata.hasMultiplePrimaryKeys && !(id instanceof Object)) {\n            id = metadata.createEntityIdMap([id]);\n        }\n\n        this.joinEagerRelations(qb, qb.alias, metadata);\n        FindOptionsUtils.applyFindOneOptionsOrConditionsToQueryBuilder(qb, optionsOrConditions);\n        return qb.andWhereInIds([id]).getOne();\n    }\n\n    /**\n     * Clears all the data from the given table (truncates/drops it).\n     *\n     * Note: this method uses TRUNCATE and may not work as you expect in transactions on some platforms.\n     * @see https://stackoverflow.com/a/5972738/925151\n     */\n    async clear<Entity>(entityClass: ObjectType<Entity>|string): Promise<void> {\n        const metadata = this.connection.getMetadata(entityClass);\n        const queryRunner = this.queryRunner || this.connection.createQueryRunner(\"master\");\n        try {\n            return await queryRunner.truncate(metadata.tablePath); // await is needed here because we are using finally\n\n        } finally {\n            if (!this.queryRunner)\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Gets repository for the given entity class or name.\n     * If single database connection mode is used, then repository is obtained from the\n     * repository aggregator, where each repository is individually created for this entity manager.\n     * When single database connection is not used, repository is being obtained from the connection.\n     */\n    getRepository<Entity>(target: ObjectType<Entity>|string): Repository<Entity> {\n\n        // throw exception if there is no repository with this target registered\n        if (!this.connection.hasMetadata(target))\n            throw new RepositoryNotFoundError(this.connection.name, target);\n\n        // find already created repository instance and return it if found\n        const metadata = this.connection.getMetadata(target);\n        const repository = this.repositories.find(repository => repository.metadata === metadata);\n        if (repository)\n            return repository;\n\n        // if repository was not found then create it, store its instance and return it\n        const newRepository = new RepositoryFactory().create(this, metadata, this.queryRunner);\n        this.repositories.push(newRepository);\n        return newRepository;\n    }\n\n    /**\n     * Gets tree repository for the given entity class or name.\n     * If single database connection mode is used, then repository is obtained from the\n     * repository aggregator, where each repository is individually created for this entity manager.\n     * When single database connection is not used, repository is being obtained from the connection.\n     */\n    getTreeRepository<Entity>(target: ObjectType<Entity>|string): TreeRepository<Entity> {\n\n        // tree tables aren't supported by some drivers (mongodb)\n        if (this.connection.driver.treeSupport === false)\n            throw new TreeRepositoryNotSupportedError(this.connection.driver);\n\n        // check if repository is real tree repository\n        const repository = this.getRepository(target);\n        if (!(repository instanceof TreeRepository))\n            throw new RepositoryNotTreeError(target);\n\n        return repository;\n    }\n\n    /**\n     * Gets mongodb repository for the given entity class.\n     */\n    getMongoRepository<Entity>(entityClass: ObjectType<Entity>): MongoRepository<Entity>;\n\n    /**\n     * Gets mongodb repository for the given entity name.\n     */\n    getMongoRepository<Entity>(entityName: string): MongoRepository<Entity>;\n\n    /**\n     * Gets mongodb repository for the given entity class or name.\n     */\n    getMongoRepository<Entity>(entityClassOrName: ObjectType<Entity>|string): MongoRepository<Entity> {\n        return this.connection.getMongoRepository<Entity>(entityClassOrName as any);\n    }\n\n    /**\n     * Gets custom entity repository marked with @EntityRepository decorator.\n     */\n    getCustomRepository<T>(customRepository: ObjectType<T>): T {\n        const entityRepositoryMetadataArgs = getMetadataArgsStorage().entityRepositories.find(repository => {\n            return repository.target === (customRepository instanceof Function ? customRepository : (customRepository as any).constructor);\n        });\n        if (!entityRepositoryMetadataArgs)\n            throw new CustomRepositoryNotFoundError(customRepository);\n\n        const entityMetadata = entityRepositoryMetadataArgs.entity ? this.connection.getMetadata(entityRepositoryMetadataArgs.entity) : undefined;\n        const entityRepositoryInstance = new (entityRepositoryMetadataArgs.target as any)(this, entityMetadata);\n\n        // NOTE: dynamic access to protected properties. We need this to prevent unwanted properties in those classes to be exposed,\n        // however we need these properties for internal work of the class\n        if (entityRepositoryInstance instanceof AbstractRepository) {\n            if (!(entityRepositoryInstance as any)[\"manager\"])\n                (entityRepositoryInstance as any)[\"manager\"] = this;\n        }\n        if (entityRepositoryInstance instanceof Repository) {\n            if (!entityMetadata)\n                throw new CustomRepositoryCannotInheritRepositoryError(customRepository);\n\n            (entityRepositoryInstance as any)[\"manager\"] = this;\n            (entityRepositoryInstance as any)[\"metadata\"] = entityMetadata;\n        }\n\n        return entityRepositoryInstance;\n    }\n\n    /**\n     * Releases all resources used by entity manager.\n     * This is used when entity manager is created with a single query runner,\n     * and this single query runner needs to be released after job with entity manager is done.\n     */\n    async release(): Promise<void> {\n        if (!this.queryRunner)\n            throw new NoNeedToReleaseEntityManagerError();\n\n        return this.queryRunner.release();\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Joins all eager relations recursively.\n     */\n    protected joinEagerRelations(qb: SelectQueryBuilder<any>, alias: string, metadata: EntityMetadata) {\n        metadata.eagerRelations.forEach(relation => {\n            const relationAlias = alias + \"_\" + relation.propertyPath.replace(\".\", \"_\");\n            qb.leftJoinAndSelect(alias + \".\" + relation.propertyPath, relationAlias);\n            this.joinEagerRelations(qb, relationAlias, relation.inverseEntityMetadata);\n        });\n    }\n\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\n\nexport interface InsertResult {\n    result: ObjectLiteral[]|undefined;\n    generatedMap: ObjectLiteral|undefined;\n}","import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TransactionAlreadyStartedError} from \"../../error/TransactionAlreadyStartedError\";\nimport {TransactionNotStartedError} from \"../../error/TransactionNotStartedError\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TablePrimaryKey} from \"../../schema-builder/schema/TablePrimaryKey\";\nimport {RandomGenerator} from \"../../util/RandomGenerator\";\nimport {AbstractSqliteDriver} from \"./AbstractSqliteDriver\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {EntityManager} from \"../../entity-manager/EntityManager\";\nimport {InsertResult} from \"../InsertResult\";\n\n/**\n * Runs queries on a single sqlite database connection.\n *\n * Does not support compose primary keys with autoincrement field.\n * todo: need to throw exception for this case.\n */\nexport class AbstractSqliteQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Database driver used by connection.\n     */\n    driver: AbstractSqliteDriver;\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: EntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is in progress.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Indicates if special query runner mode in which sql queries won't be executed is enabled.\n     */\n    protected sqlMemoryMode: boolean = false;\n\n    /**\n     * Sql-s stored if \"sql in memory\" mode is enabled.\n     */\n    protected sqlsInMemory: string[] = [];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: AbstractSqliteDriver) {}\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates/uses database connection from the connection pool to perform further operations.\n     * Returns obtained database connection.\n     */\n    connect(): Promise<any> {\n        return Promise.resolve(this.driver.databaseConnection);\n    }\n\n    /**\n     * Releases used database connection.\n     * We don't do anything here because sqlite do not support multiple connections thus query runners.\n     */\n    release(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        if (this.isTransactionActive)\n            throw new TransactionAlreadyStartedError();\n\n        this.isTransactionActive = true;\n        await this.query(\"BEGIN TRANSACTION\");\n    }\n\n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async commitTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"COMMIT\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Rollbacks transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async rollbackTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"ROLLBACK\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        throw new Error(\"Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers\");\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        throw new Error(`Stream is not supported by sqlite driver.`);\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tableName: string, keyValues: ObjectLiteral): Promise<InsertResult> {\n        throw new Error(\"Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers\");\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(tableName: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        const updateValues = this.parametrize(valuesMap).join(\", \");\n        const conditionString = this.parametrize(conditions, Object.keys(valuesMap).length).join(\" AND \");\n        const query = `UPDATE \"${tableName}\" SET ${updateValues} ${conditionString ? (\" WHERE \" + conditionString) : \"\"}`;\n        const updateParams = Object.keys(valuesMap).map(key => valuesMap[key]);\n        const conditionParams = Object.keys(conditions).map(key => conditions[key]);\n        const allParameters = updateParams.concat(conditionParams);\n        await this.query(query, allParameters);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(tableName: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        const conditionString = typeof conditions === \"string\" ? conditions : this.parametrize(conditions).join(\" AND \");\n        const parameters = conditions instanceof Object ? Object.keys(conditions).map(key => (conditions as ObjectLiteral)[key]) : maybeParameters;\n\n        const sql = `DELETE FROM \"${tableName}\" WHERE ${conditionString}`;\n        await this.query(sql, parameters);\n    }\n\n    /**\n     * Inserts rows into closure table.\n     */\n    async insertIntoClosureTable(tableName: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        let sql = \"\";\n        if (hasLevel) {\n            sql = `INSERT INTO \"${tableName}\"(\"ancestor\", \"descendant\", \"level\") ` +\n                `SELECT \"ancestor\", ${newEntityId}, \"level\" + 1 FROM \"${tableName}\" WHERE \"descendant\" = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}, 1`;\n        } else {\n            sql = `INSERT INTO \"${tableName}\"(\"ancestor\", \"descendant\") ` +\n                `SELECT \"ancestor\", ${newEntityId} FROM \"${tableName}\" WHERE \"descendant\" = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}`;\n        }\n        await this.query(sql);\n        if (hasLevel) {\n            const results: ObjectLiteral[] = await this.query(`SELECT MAX(level) as level FROM ${tableName} WHERE descendant = ${parentId}`);\n            return results && results[0] && results[0][\"level\"] ? parseInt(results[0][\"level\"]) + 1 : 1;\n        } else {\n            return -1;\n        }\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(tableName: string): Promise<Table|undefined> {\n        const tables = await this.getTables([tableName]);\n        return tables.length > 0 ? tables[0] : undefined;\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(tableNames: string[]): Promise<Table[]> {\n        // if no tables given then no need to proceed\n        if (!tableNames || !tableNames.length)\n            return [];\n\n        const tableNamesString = tableNames.map(tableName => `'${tableName}'`).join(\", \");\n\n        // load tables, columns, indices and foreign keys\n        const dbTables: ObjectLiteral[] = await this.query(`SELECT * FROM sqlite_master WHERE type = 'table' AND name IN (${tableNamesString})`);\n\n        // if tables were not found in the db, no need to proceed\n        if (!dbTables || !dbTables.length)\n            return [];\n\n        // create table schemas for loaded tables\n        return Promise.all(dbTables.map(async dbTable => {\n            const table = new Table(dbTable[\"name\"]);\n\n            // load columns and indices\n            const [dbColumns, dbIndices, dbForeignKeys]: ObjectLiteral[][] = await Promise.all([\n                this.query(`PRAGMA table_info(\"${dbTable[\"name\"]}\")`),\n                this.query(`PRAGMA index_list(\"${dbTable[\"name\"]}\")`),\n                this.query(`PRAGMA foreign_key_list(\"${dbTable[\"name\"]}\")`),\n            ]);\n\n            // find column name with auto increment\n            let autoIncrementColumnName: string|undefined = undefined;\n            const tableSql: string = dbTable[\"sql\"];\n            if (tableSql.indexOf(\"AUTOINCREMENT\") !== -1) {\n                autoIncrementColumnName = tableSql.substr(0, tableSql.indexOf(\"AUTOINCREMENT\"));\n                const comma = autoIncrementColumnName.lastIndexOf(\",\");\n                const bracket = autoIncrementColumnName.lastIndexOf(\"(\");\n                if (comma !== -1) {\n                    autoIncrementColumnName = autoIncrementColumnName.substr(comma);\n                    autoIncrementColumnName = autoIncrementColumnName.substr(0, autoIncrementColumnName.lastIndexOf(\"\\\"\"));\n                    autoIncrementColumnName = autoIncrementColumnName.substr(autoIncrementColumnName.indexOf(\"\\\"\") + 1);\n\n                } else if (bracket !== -1) {\n                    autoIncrementColumnName = autoIncrementColumnName.substr(bracket);\n                    autoIncrementColumnName = autoIncrementColumnName.substr(0, autoIncrementColumnName.lastIndexOf(\"\\\"\"));\n                    autoIncrementColumnName = autoIncrementColumnName.substr(autoIncrementColumnName.indexOf(\"\\\"\") + 1);\n                }\n            }\n\n            // create columns from the loaded columns\n            table.columns = dbColumns.map(dbColumn => {\n                const tableColumn = new TableColumn();\n                tableColumn.name = dbColumn[\"name\"];\n                tableColumn.type = dbColumn[\"type\"].toLowerCase();\n                tableColumn.default = dbColumn[\"dflt_value\"] !== null && dbColumn[\"dflt_value\"] !== undefined ? dbColumn[\"dflt_value\"] : undefined;\n                tableColumn.isNullable = dbColumn[\"notnull\"] === 0;\n                // primary keys are numbered starting with 1, columns that aren't primary keys are marked with 0\n                tableColumn.isPrimary = dbColumn[\"pk\"] > 0;\n                tableColumn.comment = \"\"; // todo later\n                tableColumn.isGenerated = autoIncrementColumnName === dbColumn[\"name\"];\n                if (tableColumn.isGenerated) {\n                    tableColumn.generationStrategy = \"increment\";\n                }\n\n                // parse datatype and attempt to retrieve length\n                let pos = tableColumn.type.indexOf(\"(\");\n                if (pos !== -1) {\n                    let dataType = tableColumn.type.substr(0, pos);\n                    if (!!this.driver.withLengthColumnTypes.find(col => col === dataType)) {\n                        let len = parseInt(tableColumn.type.substring(pos + 1, tableColumn.type.length - 1));\n                        if (len) {\n                            tableColumn.length = len.toString();\n                            tableColumn.type = dataType; // remove the length part from the datatype\n                        }\n                    }\n                }\n                const columnForeignKeys = dbForeignKeys\n                    .filter(foreignKey => foreignKey[\"from\"] === dbColumn[\"name\"])\n                    .map(foreignKey => {\n                        // const keyName = this.driver.namingStrategy.foreignKeyName(dbTable[\"name\"], [foreignKey[\"from\"]], foreignKey[\"table\"], [foreignKey[\"to\"]]);\n                        // todo: figure out solution here, name should be same as naming strategy generates!\n                        const key = `${dbTable[\"name\"]}_${[foreignKey[\"from\"]].join(\"_\")}_${foreignKey[\"table\"]}_${[foreignKey[\"to\"]].join(\"_\")}`;\n                        const keyName = \"fk_\" + RandomGenerator.sha1(key).substr(0, 27);\n                        return new TableForeignKey(keyName, [foreignKey[\"from\"]], [foreignKey[\"to\"]], foreignKey[\"table\"], foreignKey[\"on_delete\"]); // todo: how sqlite return from and to when they are arrays? (multiple column foreign keys)\n                    });\n                table.addForeignKeys(columnForeignKeys);\n                return tableColumn;\n            });\n\n            // create primary key schema\n            await Promise.all(dbIndices\n                .filter(index => index[\"origin\"] === \"pk\")\n                .map(async index => {\n                    const indexInfos: ObjectLiteral[] = await this.query(`PRAGMA index_info(\"${index[\"name\"]}\")`);\n                    const indexColumns = indexInfos.map(indexInfo => indexInfo[\"name\"]);\n                    indexColumns.forEach(indexColumn => {\n                        table.primaryKeys.push(new TablePrimaryKey(index[\"name\"], indexColumn));\n                    });\n                }));\n\n            // create index schemas from the loaded indices\n            const indicesPromises = dbIndices\n                .filter(dbIndex => {\n                    return dbIndex[\"origin\"] !== \"pk\" &&\n                        (!table.foreignKeys.find(foreignKey => foreignKey.name === dbIndex[\"name\"])) &&\n                        (!table.primaryKeys.find(primaryKey => primaryKey.name === dbIndex[\"name\"]));\n                })\n                .map(dbIndex => dbIndex[\"name\"])\n                .filter((value, index, self) => self.indexOf(value) === index) // unqiue\n                .map(async dbIndexName => {\n                    const dbIndex = dbIndices.find(dbIndex => dbIndex[\"name\"] === dbIndexName);\n                    const indexInfos: ObjectLiteral[] = await this.query(`PRAGMA index_info(\"${dbIndex![\"name\"]}\")`);\n                    const indexColumns = indexInfos\n                        .sort((indexInfo1, indexInfo2) => parseInt(indexInfo1[\"seqno\"]) - parseInt(indexInfo2[\"seqno\"]))\n                        .map(indexInfo => indexInfo[\"name\"]);\n\n                    // check if db index is generated by sqlite itself and has special use case\n                    if (dbIndex![\"name\"].substr(0, \"sqlite_autoindex\".length) === \"sqlite_autoindex\") {\n                        if (dbIndex![\"unique\"] === 1) { // this means we have a special index generated for a column\n                            // so we find and update the column\n                            indexColumns.forEach(columnName => {\n                                const column = table.columns.find(column => column.name === columnName);\n                                if (column)\n                                    column.isUnique = true;\n                            });\n                        }\n\n                        return Promise.resolve(undefined);\n\n                    } else {\n                        const isUnique = dbIndex![\"unique\"] === \"1\" || dbIndex![\"unique\"] === 1;\n                        return new TableIndex(dbTable[\"name\"], dbIndex![\"name\"], indexColumns, isUnique);\n                    }\n                });\n\n            const indices = await Promise.all(indicesPromises);\n            table.indices = indices.filter(index => !!index) as TableIndex[];\n\n            return table;\n        }));\n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        return Promise.resolve(false);\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(tableName: string): Promise<boolean> {\n        const sql = `SELECT * FROM sqlite_master WHERE type = 'table' AND name = '${tableName}'`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        return Promise.resolve([]);\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemas: string[]): Promise<void[]> {\n        return Promise.resolve([]);\n    }\n\n    /**\n     * Creates a new table from the given table metadata and column metadatas.\n     */\n    async createTable(table: Table): Promise<void> {\n        // skip columns with foreign keys, we will add them later\n        const columnDefinitions = table.columns.map(column => this.buildCreateColumnSql(column)).join(\", \");\n        let sql = `CREATE TABLE \"${table.name}\" (${columnDefinitions}`;\n        const primaryKeyColumns = table.columns.filter(column => column.isPrimary && !column.isGenerated);\n        if (primaryKeyColumns.length > 0)\n            sql += `, PRIMARY KEY(${primaryKeyColumns.map(column => `${column.name}`).join(\", \")})`; // for some reason column escaping here generates a wrong schema\n        sql += `)`;\n        await this.query(sql);\n    }\n\n    /**\n     * Drops the table.\n     */\n    async dropTable(tableName: string): Promise<void> {\n        let sql = `DROP TABLE \"${tableName}\"`;\n        await this.query(sql);\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(tableName: string, columnName: string): Promise<boolean> {\n        const sql = `PRAGMA table_info(\"${tableName}\")`;\n        const columns: ObjectLiteral[] = await this.query(sql);\n        return !!columns.find(column => column[\"name\"] === columnName);\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrName: Table|string, column: TableColumn): Promise<void> {\n        const table = await this.getTableSchema(tableOrName);\n        const newTableSchema = table.clone();\n        newTableSchema.addColumns([column]);\n        await this.recreateTable(newTableSchema, table);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        const table = await this.getTableSchema(tableOrName);\n        const newTableSchema = table.clone();\n        newTableSchema.addColumns(columns);\n        await this.recreateTable(newTableSchema, table);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        let newColumn: TableColumn|undefined = undefined;\n        if (newTableColumnOrName instanceof TableColumn) {\n            newColumn = newTableColumnOrName;\n        } else {\n            newColumn = oldColumn.clone();\n            newColumn.name = newTableColumnOrName;\n        }\n\n        return this.changeColumn(table, oldColumn, newColumn);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        // todo: fix it. it should not depend on table\n        return this.recreateTable(table);\n    }\n\n    /**\n     * Changes a column in the table.\n     * Changed column looses all its keys in the db.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        // todo: fix it. it should not depend on table\n        return this.recreateTable(table);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        return this.dropColumns(table, [column]);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        const updatingTableSchema = table.clone();\n        updatingTableSchema.removeColumns(columns);\n        return this.recreateTable(updatingTableSchema);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(dbTable: Table): Promise<void> {\n        return this.recreateTable(dbTable);\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        return this.createForeignKeys(tableOrName as any, [foreignKey]);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const table = await this.getTableSchema(tableOrName);\n        const changedTableSchema = table.clone();\n        changedTableSchema.addForeignKeys(foreignKeys);\n        return this.recreateTable(changedTableSchema);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        return this.dropForeignKeys(tableOrName as any, [foreignKey]);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const table = await this.getTableSchema(tableOrName);\n        const changedTableSchema = table.clone();\n        changedTableSchema.removeForeignKeys(foreignKeys);\n        return this.recreateTable(changedTableSchema);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(table: Table|string, index: TableIndex): Promise<void> {\n        const columnNames = index.columnNames.map(columnName => `\"${columnName}\"`).join(\",\");\n        const sql = `CREATE ${index.isUnique ? \"UNIQUE \" : \"\"}INDEX \"${index.name}\" ON \"${table instanceof Table ? table.name : table}\"(${columnNames})`;\n        await this.query(sql);\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(tableSchemeOrName: Table|string, indexName: string): Promise<void> {\n        const sql = `DROP INDEX \"${indexName}\"`;\n        await this.query(sql);\n    }\n\n    /**\n     * Truncates table.\n     */\n    async truncate(tableName: string): Promise<void> {\n        await this.query(`DELETE FROM \"${tableName}\"`);\n    }\n\n    /**\n     * Removes all tables from the currently connected database.\n     */\n    async clearDatabase(): Promise<void> {\n        await this.query(`PRAGMA foreign_keys = OFF;`);\n        await this.startTransaction();\n        try {\n            const selectDropsQuery = `select 'drop table \"' || name || '\";' as query from sqlite_master where type = 'table' and name != 'sqlite_sequence'`;\n            const dropQueries: ObjectLiteral[] = await this.query(selectDropsQuery);\n            await Promise.all(dropQueries.map(q => this.query(q[\"query\"])));\n            await this.commitTransaction();\n\n        } catch (error) {\n            try { // we throw original error even if rollback thrown an error\n                await this.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw error;\n\n        } finally {\n            await this.query(`PRAGMA foreign_keys = ON;`);\n        }\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        this.sqlMemoryMode = true;\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        this.sqlsInMemory = [];\n        this.sqlMemoryMode = false;\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql(): (string|{ up: string, down: string })[] {\n        return this.sqlsInMemory;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Parametrizes given object of values. Used to create column=value queries.\n     */\n    protected parametrize(objectLiteral: ObjectLiteral, startIndex: number = 0): string[] {\n        return Object.keys(objectLiteral).map((key, index) => `\"${key}\"` + \"=$\" + (startIndex + index + 1));\n    }\n\n    /**\n     * Builds a query for create column.\n     */\n    protected buildCreateColumnSql(column: TableColumn): string {\n        let c = \"\\\"\" + column.name + \"\\\"\";\n        if (column instanceof ColumnMetadata) {\n            c += \" \" + this.driver.normalizeType(column);\n        } else {\n            c += \" \" + this.connection.driver.createFullType(column);\n        }\n        if (column.collation)\n            c += \" COLLATE \" + column.collation;\n        if (column.isNullable !== true)\n            c += \" NOT NULL\";\n        if (column.isUnique === true)\n            c += \" UNIQUE\";\n        if (column.isGenerated === true && column.generationStrategy === \"increment\") { // don't use skipPrimary here since updates can update already exist primary without auto inc.\n            c += \" PRIMARY KEY AUTOINCREMENT\";\n        } else if (column.isPrimary === true && column.isGenerated === true) {\n            c += \" PRIMARY KEY\";\n        }\n\n        if (column.default !== undefined && column.default !== null) { // todo: same code in all drivers. make it DRY\n            c += \" DEFAULT (\" + column.default + \")\";\n        }\n\n        return c;\n    }\n\n    protected async recreateTable(table: Table, oldTableSchema?: Table, migrateData = true): Promise<void> {\n        // const withoutForeignKeyColumns = columns.filter(column => column.foreignKeys.length === 0);\n        // const createForeignKeys = options && options.createForeignKeys;\n        const columnDefinitions = table.columns.map(dbColumn => this.buildCreateColumnSql(dbColumn)).join(\", \");\n        const columnNames = table.columns.map(column => `\"${column.name}\"`).join(\", \");\n\n        let sql1 = `CREATE TABLE \"temporary_${table.name}\" (${columnDefinitions}`;\n        // if (options && options.createForeignKeys) {\n        table.foreignKeys.forEach(foreignKey => {\n            const columnNames = foreignKey.columnNames.map(name => `\"${name}\"`).join(\", \");\n            const referencedColumnNames = foreignKey.referencedColumnNames.map(name => `\"${name}\"`).join(\", \");\n            sql1 += `, FOREIGN KEY(${columnNames}) REFERENCES \"${foreignKey.referencedTableName}\"(${referencedColumnNames})`;\n            if (foreignKey.onDelete) sql1 += \" ON DELETE \" + foreignKey.onDelete;\n        });\n\n        const primaryKeyColumns = table.columns.filter(column => column.isPrimary && !column.isGenerated);\n        if (primaryKeyColumns.length > 0)\n            sql1 += `, PRIMARY KEY(${primaryKeyColumns.map(column => `${column.name}`).join(\", \")})`; // for some reason column escaping here generate a wrong schema\n\n        sql1 += \")\";\n\n        // todo: need also create uniques and indices?\n\n        // recreate a table with a temporary name\n        await this.query(sql1);\n\n        // we need only select data from old columns\n        const oldColumnNames = oldTableSchema ? oldTableSchema.columns.map(column => `\"${column.name}\"`).join(\", \") : columnNames;\n\n        // migrate all data from the table into temporary table\n        if (migrateData) {\n            const sql2 = `INSERT INTO \"temporary_${table.name}\"(${oldColumnNames}) SELECT ${oldColumnNames} FROM \"${table.name}\"`;\n            await this.query(sql2);\n        }\n\n        // drop old table\n        const sql3 = `DROP TABLE \"${table.name}\"`;\n        await this.query(sql3);\n\n        // rename temporary table\n        const sql4 = `ALTER TABLE \"temporary_${table.name}\" RENAME TO \"${table.name}\"`;\n        await this.query(sql4);\n\n        // also re-create indices\n        const indexPromises = table.indices.map(index => this.createIndex(table.name, index));\n        // const uniquePromises = table.uniqueKeys.map(key => this.createIndex(key));\n        await Promise.all(indexPromises/*.concat(uniquePromises)*/);\n    }\n\n    /**\n     * If given value is a table name then it loads its table schema representation from the database.\n     */\n    protected async getTableSchema(tableOrName: Table|string): Promise<Table> {\n        if (tableOrName instanceof Table) {\n            return tableOrName;\n        } else {\n            const table = await this.getTable(tableOrName);\n            if (!table)\n                throw new Error(`Table named ${tableOrName} was not found in the database.`);\n\n            return table;\n        }\n    }\n\n}\n","import {ForeignKeyMetadata} from \"../metadata/ForeignKeyMetadata\";\nimport {Table} from \"./schema/Table\";\nimport {TableColumn} from \"./schema/TableColumn\";\nimport {TableForeignKey} from \"./schema/TableForeignKey\";\nimport {TableIndex} from \"./schema/TableIndex\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {TablePrimaryKey} from \"./schema/TablePrimaryKey\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {PromiseUtils} from \"../util/PromiseUtils\";\nimport {Connection} from \"../connection/Connection\";\nimport {SchemaBuilder} from \"./SchemaBuilder\";\n\n/**\n * Creates complete tables schemas in the database based on the entity metadatas.\n *\n * Steps how schema is being built:\n * 1. load list of all tables with complete column and keys information from the db\n * 2. drop all (old) foreign keys that exist in the table, but does not exist in the metadata\n * 3. create new tables that does not exist in the db, but exist in the metadata\n * 4. drop all columns exist (left old) in the db table, but does not exist in the metadata\n * 5. add columns from metadata which does not exist in the table\n * 6. update all exist columns which metadata has changed\n * 7. update primary keys - update old and create new primary key from changed columns\n * 8. create foreign keys which does not exist in the table yet\n * 9. create indices which are missing in db yet, and drops indices which exist in the db, but does not exist in the metadata anymore\n */\nexport class RdbmsSchemaBuilder implements SchemaBuilder {\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Used to execute schema creation queries in a single connection.\n     */\n    protected queryRunner: QueryRunner;\n\n    /**\n     * All synchronized tables in the database.\n     */\n    protected tables: Table[];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates complete schemas for the given entity metadatas.\n     */\n    async build(): Promise<void> {\n        this.queryRunner = await this.connection.createQueryRunner(\"master\");\n        await this.createNewDatabases();\n        await this.queryRunner.startTransaction();\n        try {\n            this.tables = await this.loadTableSchemas();\n            await this.executeSchemaSyncOperationsInProperOrder();\n\n            // if cache is enabled then perform cache-synchronization as well\n            if (this.connection.queryResultCache)\n                await this.connection.queryResultCache.synchronize(this.queryRunner);\n\n            await this.queryRunner.commitTransaction();\n\n        } catch (error) {\n\n            try { // we throw original error even if rollback thrown an error\n                await this.queryRunner.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw error;\n\n        } finally {\n            await this.queryRunner.release();\n        }\n    }\n\n    /**\n     * Returns sql queries to be executed by schema builder.\n     */\n    async log(): Promise<(string|{ up: string, down: string })[]> {\n        this.queryRunner = await this.connection.createQueryRunner(\"master\");\n        try {\n            await this.createNewDatabases();\n            this.tables = await this.loadTableSchemas();\n            this.queryRunner.enableSqlMemory();\n            await this.executeSchemaSyncOperationsInProperOrder();\n\n            // if cache is enabled then perform cache-synchronization as well\n            if (this.connection.queryResultCache) // todo: check this functionality\n                await this.connection.queryResultCache.synchronize(this.queryRunner);\n\n            return this.queryRunner.getMemorySql();\n\n        } finally {\n            // its important to disable this mode despite the fact we are release query builder\n            // because there exist drivers which reuse same query runner. Also its important to disable\n            // sql memory after call of getMemorySql() method because last one flushes sql memory.\n            this.queryRunner.disableSqlMemory();\n            await this.queryRunner.release();\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all tables from the database.\n     */\n    protected loadTableSchemas(): Promise<Table[]> {\n        const tablePaths = this.entityToSyncMetadatas.map(metadata => metadata.tablePath);\n        return this.queryRunner.getTables(tablePaths);\n    }\n\n    /**\n     * Returns only entities that should be synced in the database.\n     */\n    protected get entityToSyncMetadatas(): EntityMetadata[] {\n        return this.connection.entityMetadatas.filter(metadata => !metadata.skipSync && metadata.tableType !== \"single-table-child\");\n    }\n\n    /**\n     * Creates new databases if they are not exists.\n     */\n    protected async createNewDatabases(): Promise<void> {\n        const databases: string[] = [];\n        this.connection.entityMetadatas.forEach(metadata => {\n            if (metadata.database && databases.indexOf(metadata.database) === -1)\n                databases.push(metadata.database);\n        });\n\n        await Promise.all(databases.map(database => this.queryRunner.createDatabase(database!)));\n    }\n\n    /**\n     * Executes schema sync operations in a proper order.\n     * Order of operations matter here.\n     */\n    protected async executeSchemaSyncOperationsInProperOrder(): Promise<void> {\n        const schemaPaths: string[] = [];\n        this.connection.entityMetadatas\n            .filter(entityMetadata => !!entityMetadata.schemaPath)\n            .forEach(entityMetadata => {\n                const existSchemaPath = schemaPaths.find(path => path === entityMetadata.schemaPath);\n                if (!existSchemaPath)\n                    schemaPaths.push(entityMetadata.schemaPath!);\n            });\n        await this.queryRunner.createSchema(schemaPaths);\n\n        await this.dropOldForeignKeys();\n        // await this.dropOldPrimaryKeys(); // todo: need to drop primary column because column updates are not possible\n        await this.createNewTables();\n        await this.dropRemovedColumns();\n        await this.addNewColumns();\n        await this.updateExistColumns();\n        await this.updatePrimaryKeys();\n        await this.createIndices(); // we need to create indices before foreign keys because foreign keys rely on unique indices\n        await this.createForeignKeys();\n    }\n\n    /**\n     * Drops all (old) foreign keys that exist in the tables, but do not exist in the entity metadata.\n     */\n    protected async dropOldForeignKeys(): Promise<void> {\n        await PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n\n            const table = this.tables.find(table => table.name === metadata.tableName);\n            if (!table)\n                return;\n\n            // find foreign keys that exist in the schemas but does not exist in the entity metadata\n            const tableForeignKeysToDrop = table.foreignKeys.filter(tableForeignKey => {\n                return !metadata.foreignKeys.find(metadataForeignKey => metadataForeignKey.name === tableForeignKey.name);\n            });\n            if (tableForeignKeysToDrop.length === 0)\n                return;\n\n            this.connection.logger.logSchemaBuild(`dropping old foreign keys of ${table.name}: ${tableForeignKeysToDrop.map(dbForeignKey => dbForeignKey.name).join(\", \")}`);\n\n            // remove foreign keys from the table\n            table.removeForeignKeys(tableForeignKeysToDrop);\n\n            // drop foreign keys from the database\n            await this.queryRunner.dropForeignKeys(table, tableForeignKeysToDrop);\n        });\n    }\n\n    /**\n     * Creates tables that do not exist in the database yet.\n     * New tables are created without foreign and primary keys.\n     * Primary key only can be created in conclusion with auto generated column.\n     */\n    protected async createNewTables(): Promise<void> {\n        await PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n            // check if table does not exist yet\n            const existTableSchema = this.tables.find(table => {\n                if (table.name !== metadata.tableName)\n                    return false;\n\n                if (metadata.schema && table.schema !== metadata.schema)\n                    return false;\n\n                if (metadata.database && table.database !== metadata.database)\n                    return false;\n\n                return true;\n            });\n            if (existTableSchema)\n                return;\n\n            this.connection.logger.logSchemaBuild(`creating a new table: ${metadata.tableName}`);\n\n            // create a new table and sync it in the database\n            const table = new Table(metadata.tableName, this.metadataColumnsToTableColumns(metadata.columns), true, metadata.engine, metadata.database, metadata.schema);\n            this.tables.push(table);\n            await this.queryRunner.createTable(table);\n        });\n    }\n\n    /**\n     * Drops all columns that exist in the table, but does not exist in the metadata (left old).\n     * We drop their keys too, since it should be safe.\n     */\n    protected dropRemovedColumns() {\n        return PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n            const table = this.tables.find(table => table.name === metadata.tableName);\n            if (!table) return;\n\n            // find columns that exist in the database but does not exist in the metadata\n            const droppedTableColumns = table.columns.filter(tableColumn => {\n                return !metadata.columns.find(columnMetadata => columnMetadata.databaseName === tableColumn.name);\n            });\n            if (droppedTableColumns.length === 0)\n                return;\n\n            // drop all foreign keys that has column to be removed in its columns\n            await Promise.all(droppedTableColumns.map(droppedTableColumn => {\n                return this.dropColumnReferencedForeignKeys(metadata.tableName, droppedTableColumn.name);\n            }));\n\n            // drop all indices that point to this column\n            await Promise.all(droppedTableColumns.map(droppedTableColumn => {\n                return this.dropColumnReferencedIndices(metadata.tableName, droppedTableColumn.name);\n            }));\n\n            this.connection.logger.logSchemaBuild(`columns dropped in ${table.name}: ` + droppedTableColumns.map(column => column.name).join(\", \"));\n\n            // remove columns from the table and primary keys of it if its used in the primary keys\n            table.removeColumns(droppedTableColumns);\n            table.removePrimaryKeysOfColumns(droppedTableColumns);\n\n            // drop columns from the database\n            await this.queryRunner.dropColumns(table, droppedTableColumns);\n        });\n    }\n\n    /**\n     * Adds columns from metadata which does not exist in the table.\n     * Columns are created without keys.\n     */\n    protected addNewColumns() {\n        return PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n            const table = this.tables.find(table => table.name === metadata.tableName);\n            if (!table)\n                return;\n\n            // find which columns are new\n            const newColumnMetadatas = metadata.columns.filter(columnMetadata => {\n                return !table.columns.find(tableColumn => tableColumn.name === columnMetadata.databaseName);\n            });\n            if (newColumnMetadatas.length === 0)\n                return;\n\n            this.connection.logger.logSchemaBuild(`new columns added: ` + newColumnMetadatas.map(column => column.databaseName).join(\", \"));\n\n            // create columns in the database\n            const newTableColumns = this.metadataColumnsToTableColumns(newColumnMetadatas);\n            await this.queryRunner.addColumns(table, newTableColumns);\n            table.addColumns(newTableColumns);\n        });\n    }\n\n    /**\n     * Update all exist columns which metadata has changed.\n     * Still don't create keys. Also we don't touch foreign keys of the changed columns.\n     */\n    protected updateExistColumns() {\n        return PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n            const table = this.tables.find(table => table.name === metadata.tableName);\n            if (!table)\n                return;\n\n            const updatedTableColumns = table.findChangedColumns(this.connection.driver, metadata.columns);\n            if (updatedTableColumns.length === 0)\n                return;\n\n            this.connection.logger.logSchemaBuild(`columns changed in ${table.name}. updating: ` + updatedTableColumns.map(column => column.name).join(\", \"));\n\n            // drop all foreign keys that point to this column\n            const dropRelatedForeignKeysPromises = updatedTableColumns\n                .filter(changedTableColumn => !!metadata.columns.find(columnMetadata => columnMetadata.databaseName === changedTableColumn.name))\n                .map(changedTableColumn => this.dropColumnReferencedForeignKeys(metadata.tableName, changedTableColumn.name));\n\n            // wait until all related foreign keys are dropped\n            await Promise.all(dropRelatedForeignKeysPromises);\n\n            // drop all indices that point to this column\n            const dropRelatedIndicesPromises = updatedTableColumns\n                .filter(changedTableColumn => !!metadata.columns.find(columnMetadata => columnMetadata.databaseName === changedTableColumn.name))\n                .map(changedTableColumn => this.dropColumnReferencedIndices(metadata.tableName, changedTableColumn.name));\n\n            // wait until all related indices are dropped\n            await Promise.all(dropRelatedIndicesPromises);\n\n            // generate a map of new/old columns\n            const newAndOldTableColumns = updatedTableColumns.map(changedTableColumn => {\n                const columnMetadata = metadata.columns.find(column => column.databaseName === changedTableColumn.name);\n                const newTableColumn = TableColumn.create(columnMetadata!, \n                    this.connection.driver.normalizeType(columnMetadata!), \n                    this.connection.driver.normalizeDefault(columnMetadata!),\n                    this.connection.driver.getColumnLength(columnMetadata!));\n                table.replaceColumn(changedTableColumn, newTableColumn);\n\n                return {\n                    newColumn: newTableColumn,\n                    oldColumn: changedTableColumn\n                };\n            });\n\n            return this.queryRunner.changeColumns(table, newAndOldTableColumns);\n        });\n    }\n\n    /**\n     * Creates primary keys which does not exist in the table yet.\n     */\n    protected updatePrimaryKeys() {\n        return PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n            const table = this.tables.find(table => table.name === metadata.tableName && !table.justCreated);\n            if (!table)\n                return;\n\n            const metadataPrimaryColumns = metadata.columns.filter(column => column.isPrimary);\n            const addedKeys = metadataPrimaryColumns\n                .filter(primaryKey => {\n                    return !table.primaryKeys.find(dbPrimaryKey => dbPrimaryKey.columnName === primaryKey.databaseName);\n                })\n                .map(primaryKey => new TablePrimaryKey(\"\", primaryKey.databaseName));\n\n            const droppedKeys = table.primaryKeys.filter(primaryKeySchema => {\n                return !metadataPrimaryColumns.find(primaryKeyMetadata => primaryKeyMetadata.databaseName === primaryKeySchema.columnName);\n            });\n\n            if (addedKeys.length === 0 && droppedKeys.length === 0)\n                return;\n\n            this.connection.logger.logSchemaBuild(`primary keys of ${table.name} has changed: dropped - ${droppedKeys.map(key => key.columnName).join(\", \") || \"nothing\"}; added - ${addedKeys.map(key => key.columnName).join(\", \") || \"nothing\"}`);\n            table.addPrimaryKeys(addedKeys);\n            table.removePrimaryKeys(droppedKeys);\n            await this.queryRunner.updatePrimaryKeys(table);\n        });\n    }\n\n    /**\n     * Creates foreign keys which does not exist in the table yet.\n     */\n    protected createForeignKeys() {\n        return PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n            const table = this.tables.find(table => table.name === metadata.tableName);\n            if (!table)\n                return;\n\n            const newKeys = metadata.foreignKeys.filter(foreignKey => {\n                return !table.foreignKeys.find(dbForeignKey => dbForeignKey.name === foreignKey.name);\n            });\n            if (newKeys.length === 0)\n                return;\n\n            const dbForeignKeys = newKeys.map(foreignKeyMetadata => TableForeignKey.create(foreignKeyMetadata));\n            this.connection.logger.logSchemaBuild(`creating a foreign keys: ${newKeys.map(key => key.name).join(\", \")}`);\n            await this.queryRunner.createForeignKeys(table, dbForeignKeys);\n            table.addForeignKeys(dbForeignKeys);\n        });\n    }\n\n    /**\n     * Creates indices which are missing in db yet, and drops indices which exist in the db,\n     * but does not exist in the metadata anymore.\n     */\n    protected createIndices() {\n        // return Promise.all(this.connection.entityMetadatas.map(metadata => this.createIndices(metadata.table, metadata.indices)));\n        return PromiseUtils.runInSequence(this.entityToSyncMetadatas, async metadata => {\n            const table = this.tables.find(table => table.name === metadata.tableName);\n            if (!table)\n                return;\n\n            // drop all indices that exist in the table, but does not exist in the given composite indices\n            const dropQueries = table.indices\n                .filter(tableIndex => {\n                    const metadataIndex = metadata.indices.find(indexMetadata => indexMetadata.name === tableIndex.name);\n                    if (!metadataIndex)\n                        return true;\n                    if (metadataIndex.isUnique !== tableIndex.isUnique)\n                        return true;\n                    if (metadataIndex.columns.length !== tableIndex.columnNames.length)\n                        return true;\n                    if (metadataIndex.columns.findIndex((col, i) => col.databaseName !== tableIndex.columnNames[i]) !== -1)\n                        return true;\n                    \n                    return false;\n                })\n                .map(async tableIndex => {\n                    this.connection.logger.logSchemaBuild(`dropping an index: ${tableIndex.name}`);\n                    table.removeIndex(tableIndex);\n                    await this.queryRunner.dropIndex(metadata.tablePath, tableIndex.name);\n                });\n\n            await Promise.all(dropQueries);\n\n            // then create table indices for all composite indices we have\n            const addQueries = metadata.indices\n                .filter(indexMetadata => !table.indices.find(tableIndex => tableIndex.name === indexMetadata.name))\n                .map(async indexMetadata => {\n                    const tableIndex = TableIndex.create(indexMetadata);\n                    table.indices.push(tableIndex);\n                    this.connection.logger.logSchemaBuild(`adding new index: ${tableIndex.name}`);\n                    await this.queryRunner.createIndex(table, tableIndex);\n                });\n\n            await Promise.all(addQueries);\n        });\n    }\n\n    /**\n     * Drops all indices where given column of the given table is being used.\n     */\n    protected async dropColumnReferencedIndices(tableName: string, columnName: string): Promise<void> {\n\n        const table = this.tables.find(table => table.name === tableName);\n        if (!table)\n            return;\n\n        // find depend indices to drop them\n        const dependIndicesInTable = table.indices.filter(tableIndex => {\n            return tableIndex.tableName === tableName && !!tableIndex.columnNames.find(columnDatabaseName => columnDatabaseName === columnName);\n        });\n        if (dependIndicesInTable.length === 0)\n            return;\n\n        this.connection.logger.logSchemaBuild(`dropping related indices of ${tableName}#${columnName}: ${dependIndicesInTable.map(index => index.name).join(\", \")}`);\n\n        const dropPromises = dependIndicesInTable.map(index => {\n            table.removeIndex(index);\n            return this.queryRunner.dropIndex(table, index.name);\n        });\n\n        await Promise.all(dropPromises);\n    }\n\n    /**\n     * Drops all foreign keys where given column of the given table is being used.\n     */\n    protected async dropColumnReferencedForeignKeys(tableName: string, columnName: string): Promise<void> {\n\n        const allForeignKeyMetadatas = this.connection.entityMetadatas.reduce(\n            (all, metadata) => all.concat(metadata.foreignKeys),\n            [] as ForeignKeyMetadata[]\n        );\n\n        const table = this.tables.find(table => table.name === tableName);\n        if (!table)\n            return;\n\n        // find depend foreign keys to drop them\n        const dependForeignKeys = allForeignKeyMetadatas.filter(foreignKey => {\n            if (foreignKey.tableName === tableName) {\n                return !!foreignKey.columns.find(fkColumn => {\n                    return fkColumn.databaseName === columnName;\n                });\n            } else if (foreignKey.referencedTableName === tableName) {\n                return !!foreignKey.referencedColumns.find(fkColumn => {\n                    return fkColumn.databaseName === columnName;\n                });\n            }\n            return false;\n        });\n        if (!dependForeignKeys.length)\n            return;\n\n        const dependForeignKeyInTable = dependForeignKeys.filter(fk => {\n            return !!table.foreignKeys.find(dbForeignKey => dbForeignKey.name === fk.name);\n        });\n        if (dependForeignKeyInTable.length === 0)\n            return;\n\n        this.connection.logger.logSchemaBuild(`dropping related foreign keys of ${tableName}#${columnName}: ${dependForeignKeyInTable.map(foreignKey => foreignKey.name).join(\", \")}`);\n        const tableForeignKeys = dependForeignKeyInTable.map(foreignKeyMetadata => TableForeignKey.create(foreignKeyMetadata));\n        table.removeForeignKeys(tableForeignKeys);\n        await this.queryRunner.dropForeignKeys(table, tableForeignKeys);\n    }\n\n    /**\n     * Creates new columns from the given column metadatas.\n     */\n    protected metadataColumnsToTableColumns(columns: ColumnMetadata[]): TableColumn[] {\n        return columns.map(columnMetadata => {\n            return TableColumn.create(\n                columnMetadata,\n                this.connection.driver.normalizeType(columnMetadata),\n                this.connection.driver.normalizeDefault(columnMetadata),\n                this.connection.driver.getColumnLength(columnMetadata)\n            );\n        });\n    }\n\n}","import {Driver} from \"../Driver\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {AbstractSqliteQueryRunner} from \"./AbstractSqliteQueryRunner\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {RandomGenerator} from \"../../util/RandomGenerator\";\nimport {BaseConnectionOptions} from \"../../connection/BaseConnectionOptions\";\n\n/**\n * Organizes communication with sqlite DBMS.\n */\nexport class AbstractSqliteDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Sqlite has a single QueryRunner because it works on a single database connection.\n     */\n    queryRunner?: QueryRunner;\n\n    /**\n     * Real database connection with sqlite database.\n     */\n    databaseConnection: any;\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: BaseConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * SQLite underlying library.\n     */\n    sqlite: any;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.tutorialspoint.com/sqlite/sqlite_data_types.htm\n     * @see https://sqlite.org/datatype3.html\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"int\",\n        \"integer\",\n        \"tinyint\",\n        \"smallint\",\n        \"mediumint\",\n        \"bigint\",\n        \"unsigned big int\",\n        \"int2\",\n        \"int8\",\n        \"integer\",\n        \"character\",\n        \"varchar\",\n        \"varying character\",\n        \"nchar\",\n        \"native character\",\n        \"nvarchar\",\n        \"text\",\n        \"clob\",\n        \"text\",\n        \"blob\",\n        \"real\",\n        \"double\",\n        \"double precision\",\n        \"float\",\n        \"real\",\n        \"numeric\",\n        \"decimal\",\n        \"boolean\",\n        \"date\",\n        \"time\",\n        \"datetime\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"character\",\n        \"varchar\",\n        \"varying character\",\n        \"nchar\",\n        \"native character\",\n        \"nvarchar\",\n        \"text\",\n        \"blob\",\n        \"clob\"\n    ];\n    \n    /**\n     * Orm has special columns and we need to know what database column types should be for those types.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime\",\n        createDateDefault: \"datetime('now')\",\n        updateDate: \"datetime\",\n        updateDateDefault: \"datetime('now')\",\n        version: \"integer\",\n        treeLevel: \"integer\",\n        migrationName: \"varchar\",\n        migrationTimestamp: \"bigint\",\n        cacheId: \"int\",\n        cacheIdentifier: \"varchar\",\n        cacheTime: \"bigint\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as BaseConnectionOptions;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n        this.databaseConnection = await this.createDatabaseConnection();\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with database.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.queryRunner = undefined;\n            this.databaseConnection.close((err: any) => err ? fail(err) : ok());\n        });\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        if (!this.queryRunner)\n            this.queryRunner = new AbstractSqliteQueryRunner(this);\n\n        return this.queryRunner;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean || columnMetadata.type === \"boolean\") {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToUtcDatetimeString(value); // to string conversation needs because SQLite stores fate as integer number, when date came as Object\n\n        } else if (columnMetadata.isGenerated && columnMetadata.generationStrategy === \"uuid\" && !value) {\n            return RandomGenerator.uuid4();\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be hydrated, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean || columnMetadata.type === \"boolean\") {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n\n        const builtParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string): string => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Array) {\n                return value.map((v: any) => {\n                    builtParameters.push(v);\n                    return \"$\" + builtParameters.length;\n                }).join(\", \");\n\n            } else if (value instanceof Function) {\n                return value();\n\n            } else {\n                builtParameters.push(value);\n                return \"$\" + builtParameters.length;\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, builtParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return \"\\\"\" + columnName + \"\\\"\";\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number }): string {\n        if (column.type === Number || column.type === \"int\") {\n            return \"integer\";\n\n        } else if (column.type === String) {\n            return \"varchar\";\n\n        } else if (column.type === Date) {\n            return \"datetime\";\n\n        } else if (column.type === Boolean) {\n            return \"boolean\";\n\n        } else if (column.type === \"uuid\") {\n            return \"varchar\";\n\n        } else if (column.type === \"simple-array\") {\n            return \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            return \"text\";\n\n        } else {\n            return column.type as string || \"\";\n        }\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"1\" : \"0\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique;\n    }\n    \n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n        \n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();       \n\n        return \"\";\n    }\n    \n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        return Promise.resolve();\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates connection with the database.\n     */\n    protected createDatabaseConnection() {\n        throw new Error(\"Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers\");\n    }\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        // dependencies have to be loaded in the specific driver\n    }\n\n}","/**\n */\nexport class QueryRunnerAlreadyReleasedError extends Error {\n    name = \"QueryRunnerAlreadyReleasedError\";\n\n    constructor() {\n        super();\n        this.message = `Query runner already released. Cannot run queries anymore.`;\n    }\n\n}","/**\n * Thrown when query execution has failed.\n*/\nexport class QueryFailedError extends Error {\n\n    constructor(query: string, parameters: any[]|undefined, driverError: any) {\n        super();\n        this.message = driverError.toString()\n            .replace(/^error: /, \"\")\n            .replace(/^Error: /, \"\")\n            .replace(/^Request/, \"\");\n        Object.setPrototypeOf(this, QueryFailedError.prototype);\n        Object.assign(this, {\n            ...driverError,\n            name: \"QueryFailedError\",\n            query: query,\n            parameters: parameters || []\n        });\n    }\n\n}","import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TransactionAlreadyStartedError} from \"../../error/TransactionAlreadyStartedError\";\nimport {TransactionNotStartedError} from \"../../error/TransactionNotStartedError\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TablePrimaryKey} from \"../../schema-builder/schema/TablePrimaryKey\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {OracleDriver} from \"./OracleDriver\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {EntityManager} from \"../../entity-manager/EntityManager\";\nimport {QueryFailedError} from \"../../error/QueryFailedError\";\n\n/**\n * Runs queries on a single oracle database connection.\n *\n * todo: this driver is not 100% finished yet, need to fix all issues that are left\n */\nexport class OracleQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Database driver used by connection.\n     */\n    driver: OracleDriver;\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: EntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is in progress.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    protected databaseConnection: any;\n\n    /**\n     * Promise used to obtain a database connection for a first time.\n     */\n    protected databaseConnectionPromise: Promise<any>;\n\n    /**\n     * Indicates if special query runner mode in which sql queries won't be executed is enabled.\n     */\n    protected sqlMemoryMode: boolean = false;\n\n    /**\n     * Sql-s stored if \"sql in memory\" mode is enabled.\n     */\n    protected sqlsInMemory: string[] = [];\n\n    /**\n     * Mode in which query runner executes.\n     * Used for replication.\n     * If replication is not setup its value is ignored.\n     */\n    protected mode: \"master\"|\"slave\";\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: OracleDriver, mode: \"master\"|\"slave\" = \"master\") {\n        this.driver = driver;\n        this.connection = driver.connection;\n        this.mode = mode;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates/uses database connection from the connection pool to perform further operations.\n     * Returns obtained database connection.\n     */\n    connect(): Promise<any> {\n        if (this.databaseConnection)\n            return Promise.resolve(this.databaseConnection);\n\n        if (this.databaseConnectionPromise)\n            return this.databaseConnectionPromise;\n\n        if (this.mode === \"slave\" && this.driver.isReplicated) {\n            this.databaseConnectionPromise = this.driver.obtainSlaveConnection().then(connection => {\n                this.databaseConnection = connection;\n                return this.databaseConnection;\n            });\n\n        } else { // master\n            this.databaseConnectionPromise = this.driver.obtainMasterConnection().then(connection => {\n                this.databaseConnection = connection;\n                return this.databaseConnection;\n            });\n        }\n\n        return this.databaseConnectionPromise;\n    }\n\n    /**\n     * Releases used database connection.\n     * You cannot use query runner methods once its released.\n     */\n    release(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.isReleased = true;\n            if (this.databaseConnection) {\n                this.databaseConnection.close((err: any) => {\n                    if (err)\n                        return fail(err);\n\n                    ok();\n                });\n            }\n        });\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        if (this.isTransactionActive)\n            throw new TransactionAlreadyStartedError();\n\n        // await this.query(\"START TRANSACTION\");\n        this.isTransactionActive = true;\n    }\n\n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async commitTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"COMMIT\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Rollbacks transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async rollbackTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"ROLLBACK\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise(async (ok, fail) => {\n            try {\n                this.driver.connection.logger.logQuery(query, parameters, this);\n                const queryStartTime = +new Date();\n\n                const handler = (err: any, result: any) => {\n\n                    // log slow queries if maxQueryExecution time is set\n                    const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                    const queryEndTime = +new Date();\n                    const queryExecutionTime = queryEndTime - queryStartTime;\n                    if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                        this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                    if (err) {\n                        this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                        return fail(new QueryFailedError(query, parameters, err));\n                    }\n\n                    ok(result.rows || result.outBinds);\n                };\n                const executionOptions = {\n                    autoCommit: this.isTransactionActive ? false : true\n                };\n\n                const databaseConnection = await this.connect();\n                databaseConnection.execute(query, parameters || {}, executionOptions, handler);\n\n            } catch (err) {\n                fail(err);\n            }\n        });\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        throw new Error(`Stream is not supported by Oracle driver.`);\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tableName: string, keyValues: ObjectLiteral): Promise<any> {\n        // todo: fix generated columns\n        let generatedColumn: ColumnMetadata|undefined;\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\"${key}\"`).join(\", \");\n        const values = keys.map(key => \":\" + key).join(\", \");\n        const parameters = keys.map(key => keyValues[key]);\n        const generatedColumns = this.connection.hasMetadata(tableName) ? this.connection.getMetadata(tableName).generatedColumns : [];\n        if (generatedColumns.length > 0)\n            generatedColumn = generatedColumns.find(column => column.isPrimary && column.isGenerated);\n\n        const insertSql = columns.length > 0\n            ? `INSERT INTO \"${tableName}\" (${columns}) VALUES (${values})`\n            : `INSERT INTO \"${tableName}\" DEFAULT VALUES`;\n        if (generatedColumn) {\n            const sql2 = `declare lastId number; begin ${insertSql} returning \"${generatedColumn.databaseName}\" into lastId; dbms_output.enable; dbms_output.put_line(lastId); dbms_output.get_line(:ln, :st); end;`;\n            const saveResult = await this.query(sql2, parameters.concat([\n                { dir: this.driver.oracle.BIND_OUT, type: this.driver.oracle.STRING, maxSize: 32767 },\n                { dir: this.driver.oracle.BIND_OUT, type: this.driver.oracle.NUMBER }\n            ]));\n            return parseInt(saveResult[0]);\n        } else {\n            return this.query(insertSql, parameters);\n        }\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(tableName: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        const updateValues = this.parametrize(valuesMap).join(\", \");\n        const conditionString = this.parametrize(conditions).join(\" AND \");\n        const sql = `UPDATE \"${tableName}\" SET ${updateValues} ${conditionString ? (\" WHERE \" + conditionString) : \"\"}`;\n        const conditionParams = Object.keys(conditions).map(key => conditions[key]);\n        const updateParams = Object.keys(valuesMap).map(key => valuesMap[key]);\n        const allParameters = updateParams.concat(conditionParams);\n        await this.query(sql, allParameters);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(tableName: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        const conditionString = typeof conditions === \"string\" ? conditions : this.parametrize(conditions).join(\" AND \");\n        const parameters = conditions instanceof Object ? Object.keys(conditions).map(key => (conditions as ObjectLiteral)[key]) : maybeParameters;\n\n        const sql = `DELETE FROM \"${tableName}\" WHERE ${conditionString}`;\n        await this.query(sql, parameters);\n    }\n\n    /**\n     * Inserts rows into the closure table.\n     */\n    async insertIntoClosureTable(tableName: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        let sql = \"\";\n        if (hasLevel) {\n            sql =   `INSERT INTO \"${tableName}\"(\"ancestor\", \"descendant\", \"level\") ` +\n                    `SELECT \"ancestor\", ${newEntityId}, \"level\" + 1 FROM \"${tableName}\" WHERE \"descendant\" = ${parentId} ` +\n                    `UNION ALL SELECT ${newEntityId}, ${newEntityId}, 1`;\n        } else {\n            sql =   `INSERT INTO \"${tableName}\" (\"ancestor\", \"descendant\") ` +\n                    `SELECT \"ancestor\", ${newEntityId} FROM \"${tableName}\" WHERE \"descendant\" = ${parentId} ` +\n                    `UNION ALL SELECT ${newEntityId}, ${newEntityId}`;\n        }\n        await this.query(sql);\n        const results: ObjectLiteral[] = await this.query(`SELECT MAX(\"level\") as \"level\" FROM \"${tableName}\" WHERE \"descendant\" = ${parentId}`);\n        return results && results[0] && results[0][\"level\"] ? parseInt(results[0][\"level\"]) + 1 : 1;\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(tableName: string): Promise<Table|undefined> {\n        const tables = await this.getTables([tableName]);\n        return tables.length > 0 ? tables[0] : undefined;\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(tableNames: string[]): Promise<Table[]> {\n        // if no tables given then no need to proceed\n        if (!tableNames || !tableNames.length)\n            return [];\n\n        // load tables, columns, indices and foreign keys\n        const tableNamesString = tableNames.map(name => \"'\" + name + \"'\").join(\", \");\n        const tablesSql      = `SELECT TABLE_NAME FROM user_tables WHERE TABLE_NAME IN (${tableNamesString})`;\n        const columnsSql     = `SELECT TABLE_NAME, COLUMN_NAME, DATA_TYPE, DATA_LENGTH, DATA_PRECISION, DATA_SCALE, NULLABLE, IDENTITY_COLUMN FROM all_tab_cols WHERE TABLE_NAME IN (${tableNamesString})`;\n        const indicesSql     = `SELECT ind.INDEX_NAME, ind.TABLE_NAME, ind.UNIQUENESS, LISTAGG(cols.COLUMN_NAME, ',') WITHIN GROUP (ORDER BY cols.COLUMN_NAME) AS COLUMN_NAMES\n                                FROM USER_INDEXES ind, USER_IND_COLUMNS cols \n                                WHERE ind.INDEX_NAME = cols.INDEX_NAME AND ind.TABLE_NAME IN (${tableNamesString})\n                                GROUP BY ind.INDEX_NAME, ind.TABLE_NAME, ind.UNIQUENESS`;\n        // const foreignKeysSql = `SELECT * FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE TABLE_SCHEMA = '${this.dbName}' AND REFERENCED_COLUMN_NAME IS NOT NULL`;\n        // const uniqueKeysSql  = `SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE TABLE_SCHEMA = '${this.dbName}' AND CONSTRAINT_TYPE = 'UNIQUE'`;\n        const constraintsSql = `SELECT cols.table_name, cols.column_name, cols.position, cons.constraint_type, cons.constraint_name\nFROM all_constraints cons, all_cons_columns cols WHERE cols.table_name IN (${tableNamesString}) \nAND cons.constraint_name = cols.constraint_name AND cons.owner = cols.owner ORDER BY cols.table_name, cols.position`;\n        const [dbTables, dbColumns, dbIndices, /*dbForeignKeys, dbUniqueKeys, */constraints]: ObjectLiteral[][] = await Promise.all([\n            this.query(tablesSql),\n            this.query(columnsSql),\n            this.query(indicesSql),\n            // this.query(foreignKeysSql),\n            // this.query(uniqueKeysSql),\n            this.query(constraintsSql),\n        ]);\n\n        // if tables were not found in the db, no need to proceed\n        if (!dbTables.length)\n            return [];\n\n        // create tables for loaded tables\n        return dbTables.map(dbTable => {\n            const table = new Table(dbTable[\"TABLE_NAME\"]);\n\n            // create columns from the loaded columns\n            table.columns = dbColumns\n                .filter(dbColumn => dbColumn[\"TABLE_NAME\"] === table.name)\n                .map(dbColumn => {\n                    const isPrimary = !!constraints\n                        .find(constraint => {\n                            return  constraint[\"TABLE_NAME\"] === table.name &&\n                                    constraint[\"CONSTRAINT_TYPE\"] === \"P\" &&\n                                    constraint[\"COLUMN_NAME\"] === dbColumn[\"COLUMN_NAME\"];\n                        });\n                    // TODO fix\n                    let columnType = dbColumn[\"DATA_TYPE\"].toLowerCase();\n                    if (dbColumn[\"DATA_TYPE\"].toLowerCase() === \"varchar2\" && dbColumn[\"DATA_LENGTH\"] !== null) {\n                        columnType += \"(\" + dbColumn[\"DATA_LENGTH\"] + \")\";\n                    } else if (dbColumn[\"DATA_PRECISION\"] !== null && dbColumn[\"DATA_SCALE\"] !== null) {\n                        columnType += \"(\" + dbColumn[\"DATA_PRECISION\"] + \",\" + dbColumn[\"DATA_SCALE\"] + \")\";\n                    } else if (dbColumn[\"DATA_SCALE\"] !== null) {\n                        columnType += \"(0,\" + dbColumn[\"DATA_SCALE\"] + \")\";\n                    } else if (dbColumn[\"DATA_PRECISION\"] !== null) {\n                        columnType += \"(\" + dbColumn[\"DATA_PRECISION\"] + \")\";\n                    }\n\n                    const tableColumn = new TableColumn();\n                    tableColumn.name = dbColumn[\"COLUMN_NAME\"];\n                    tableColumn.type = columnType;\n                    tableColumn.default = dbColumn[\"COLUMN_DEFAULT\"] !== null && dbColumn[\"COLUMN_DEFAULT\"] !== undefined ? dbColumn[\"COLUMN_DEFAULT\"] : undefined;\n                    tableColumn.isNullable = dbColumn[\"NULLABLE\"] !== \"N\";\n                    tableColumn.isPrimary = isPrimary;\n                    tableColumn.isGenerated = dbColumn[\"IDENTITY_COLUMN\"] === \"YES\"; // todo\n                    tableColumn.comment = \"\"; // todo\n                    return tableColumn;\n                });\n\n            // create primary key schema\n            table.primaryKeys = constraints\n                .filter(constraint =>\n                    constraint[\"TABLE_NAME\"] === table.name && constraint[\"CONSTRAINT_TYPE\"] === \"P\"\n                )\n                .map(constraint =>\n                    new TablePrimaryKey(constraint[\"CONSTRAINT_NAME\"], constraint[\"COLUMN_NAME\"])\n                );\n\n            // create foreign key schemas from the loaded indices\n            table.foreignKeys = constraints\n                .filter(constraint => constraint[\"TABLE_NAME\"] === table.name && constraint[\"CONSTRAINT_TYPE\"] === \"R\")\n                .map(constraint => new TableForeignKey(constraint[\"CONSTRAINT_NAME\"], [], [], \"\", \"\")); // todo: fix missing params\n\n            // create index schemas from the loaded indices\n            table.indices = dbIndices\n                .filter(dbIndex => {\n                    return  dbIndex[\"TABLE_NAME\"] === table.name &&\n                        (!table.foreignKeys.find(foreignKey => foreignKey.name === dbIndex[\"INDEX_NAME\"])) &&\n                        (!table.primaryKeys.find(primaryKey => primaryKey.name === dbIndex[\"INDEX_NAME\"]));\n                })\n                .map(dbIndex => {\n                    return new TableIndex(dbTable[\"TABLE_NAME\"], dbIndex[\"INDEX_NAME\"], dbIndex[\"COLUMN_NAMES\"], !!(dbIndex[\"COLUMN_NAMES\"] === \"UNIQUE\"));\n                });\n\n            return table;\n        });\n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        return Promise.resolve(false);\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(tableName: string): Promise<boolean> {\n        const sql = `SELECT TABLE_NAME FROM user_tables WHERE TABLE_NAME = '${tableName}'`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        return this.query(`CREATE DATABASE IF NOT EXISTS ${database}`);\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemas: string[]): Promise<void[]> {\n        return Promise.resolve([]);\n    }\n\n    /**\n     * Creates a new table from the given table metadata and column metadatas.\n     */\n    async createTable(table: Table): Promise<void> {\n        const columnDefinitions = table.columns.map(column => this.buildCreateColumnSql(column)).join(\", \");\n        let sql = `CREATE TABLE \"${table.name}\" (${columnDefinitions}`;\n        const primaryKeyColumns = table.columns.filter(column => column.isPrimary);\n        if (primaryKeyColumns.length > 0)\n            sql += `, PRIMARY KEY(${primaryKeyColumns.map(column => `\"${column.name}\"`).join(\", \")})`;\n        sql += `)`;\n        await this.query(sql);\n    }\n\n    /**\n     * Drops the table.\n     */\n    async dropTable(tableName: string): Promise<void> {\n        let sql = `DROP TABLE \"${tableName}\"`;\n        await this.query(sql);\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(tableName: string, columnName: string): Promise<boolean> {\n        const sql = `SELECT COLUMN_NAME FROM all_tab_cols WHERE TABLE_NAME = '${tableName}' AND COLUMN_NAME = '${columnName}'`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrName: Table|string, column: TableColumn): Promise<void> {\n        const tableName = tableOrName instanceof Table ? tableOrName.name : tableOrName;\n        const sql = `ALTER TABLE \"${tableName}\" ADD ${this.buildCreateColumnSql(column)}`;\n        return this.query(sql);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        const queries = columns.map(column => this.addColumn(tableOrName as any, column));\n        await Promise.all(queries);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        let newColumn: TableColumn|undefined = undefined;\n        if (newTableColumnOrName instanceof TableColumn) {\n            newColumn = newTableColumnOrName;\n        } else {\n            newColumn = oldColumn.clone();\n            newColumn.name = newTableColumnOrName;\n        }\n\n        return this.changeColumn(table, oldColumn, newColumn);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        if (newColumn.isGenerated !== oldColumn.isGenerated) {\n\n            if (newColumn.isGenerated) {\n                if (table.primaryKeys.length > 0 && oldColumn.isPrimary) {\n                    // console.log(table.primaryKeys);\n                    const dropPrimarySql = `ALTER TABLE \"${table.name}\" DROP CONSTRAINT \"${table.primaryKeys[0].name}\"`;\n                    await this.query(dropPrimarySql);\n                }\n\n                // since modifying identity column is not supported yet, we need to recreate this column\n                const dropSql = `ALTER TABLE \"${table.name}\" DROP COLUMN \"${newColumn.name}\"`;\n                await this.query(dropSql);\n\n                const createSql = `ALTER TABLE \"${table.name}\" ADD ${this.buildCreateColumnSql(newColumn)}`;\n                await this.query(createSql);\n\n            } else {\n                const sql = `ALTER TABLE \"${table.name}\" MODIFY \"${newColumn.name}\" DROP IDENTITY`;\n                await this.query(sql);\n\n            }\n        }\n\n        if (newColumn.isNullable !== oldColumn.isNullable) {\n            const sql = `ALTER TABLE \"${table.name}\" MODIFY \"${newColumn.name}\" ${this.connection.driver.createFullType(newColumn)} ${newColumn.isNullable ? \"NULL\" : \"NOT NULL\"}`;\n            await this.query(sql);\n\n        } else if (this.connection.driver.createFullType(newColumn) !== this.connection.driver.createFullType(oldColumn)) { // elseif is used because\n            const sql = `ALTER TABLE \"${table.name}\" MODIFY \"${newColumn.name}\" ${this.connection.driver.createFullType(newColumn)}`;\n            await this.query(sql);\n        }\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        const updatePromises = changedColumns.map(async changedColumn => {\n            return this.changeColumn(table, changedColumn.oldColumn, changedColumn.newColumn);\n        });\n        await Promise.all(updatePromises);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        return this.query(`ALTER TABLE \"${table.name}\" DROP COLUMN \"${column.name}\"`);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        const dropPromises = columns.map(column => this.dropColumn(table, column));\n        await Promise.all(dropPromises);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(dbTable: Table): Promise<void> {\n        const primaryColumnNames = dbTable.primaryKeys.map(primaryKey => \"\\\"\" + primaryKey.columnName + \"\\\"\");\n        // console.log(dbTable.primaryKeys);\n        if (dbTable.primaryKeys.length > 0 && dbTable.primaryKeys[0].name)\n            await this.query(`ALTER TABLE \"${dbTable.name}\" DROP CONSTRAINT \"${dbTable.primaryKeys[0].name}\"`);\n        if (primaryColumnNames.length > 0)\n            await this.query(`ALTER TABLE \"${dbTable.name}\" ADD PRIMARY KEY (${primaryColumnNames.join(\", \")})`);\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const tableName = tableOrName instanceof Table ? tableOrName.name : tableOrName;\n        const columnNames = foreignKey.columnNames.map(column => \"\\\"\" + column + \"\\\"\").join(\", \");\n        const referencedColumnNames = foreignKey.referencedColumnNames.map(column => \"\\\"\" + column + \"\\\"\").join(\",\");\n        let sql = `ALTER TABLE \"${tableName}\" ADD CONSTRAINT \"${foreignKey.name}\" ` +\n            `FOREIGN KEY (${columnNames}) ` +\n            `REFERENCES \"${foreignKey.referencedTableName}\"(${referencedColumnNames})`;\n        if (foreignKey.onDelete) sql += \" ON DELETE \" + foreignKey.onDelete;\n        return this.query(sql);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.createForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const tableName = tableOrName instanceof Table ? tableOrName.name : tableOrName;\n        const sql = `ALTER TABLE \"${tableName}\" DROP CONSTRAINT \"${foreignKey.name}\"`;\n        return this.query(sql);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.dropForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(table: Table|string, index: TableIndex): Promise<void> {\n        const columns = index.columnNames.map(columnName => \"\\\"\" + columnName + \"\\\"\").join(\", \");\n        const sql = `CREATE ${index.isUnique ? \"UNIQUE\" : \"\"} INDEX \"${index.name}\" ON \"${table instanceof Table ? table.name : table}\"(${columns})`;\n        await this.query(sql);\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(tableSchemeOrName: Table|string, indexName: string): Promise<void> {\n        const tableName = tableSchemeOrName instanceof Table ? tableSchemeOrName.name : tableSchemeOrName;\n        const sql = `ALTER TABLE \"${tableName}\" DROP INDEX \"${indexName}\"`;\n        await this.query(sql);\n    }\n\n    /**\n     * Truncates table.\n     */\n    async truncate(tableName: string): Promise<void> {\n        await this.query(`TRUNCATE TABLE \"${tableName}\"`);\n    }\n\n    /**\n     * Removes all tables from the currently connected database.\n     */\n    async clearDatabase(): Promise<void> {\n        await this.startTransaction();\n        try {\n            const disableForeignKeysCheckQuery = `SET FOREIGN_KEY_CHECKS = 0;`;\n            const dropTablesQuery = `SELECT concat('DROP TABLE IF EXISTS \"', table_name, '\";') AS query FROM information_schema.tables WHERE table_schema = '${this.dbName}'`;\n            const enableForeignKeysCheckQuery = `SET FOREIGN_KEY_CHECKS = 1;`;\n\n            await this.query(disableForeignKeysCheckQuery);\n            const dropQueries: ObjectLiteral[] = await this.query(dropTablesQuery);\n            await Promise.all(dropQueries.map(query => this.query(query[\"query\"])));\n            await this.query(enableForeignKeysCheckQuery);\n\n            await this.commitTransaction();\n\n        } catch (error) {\n            try { // we throw original error even if rollback thrown an error\n                await this.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw error;\n        }\n\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        this.sqlMemoryMode = true;\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        this.sqlsInMemory = [];\n        this.sqlMemoryMode = false;\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql(): (string|{ up: string, down: string })[] {\n        return this.sqlsInMemory;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Database name shortcut.\n     */\n    protected get dbName(): string {\n        return this.driver.options.schema as string;\n    }\n\n    /**\n     * Parametrizes given object of values. Used to create column=value queries.\n     */\n    protected parametrize(objectLiteral: ObjectLiteral): string[] {\n        return Object.keys(objectLiteral).map(key => `\"${key}\"=:${key}`);\n    }\n\n    /**\n     * Builds a query for create column.\n     */\n    protected buildCreateColumnSql(column: TableColumn) {\n        let c = `\"${column.name}\" ` + this.connection.driver.createFullType(column);\n        if (column.charset)\n            c += \" CHARACTER SET \" + column.charset;\n        if (column.collation)\n            c += \" COLLATE \" + column.collation;\n        if (column.isNullable !== true && !column.isGenerated) // NOT NULL is not supported with GENERATED\n            c += \" NOT NULL\";\n        // if (column.isPrimary === true && addPrimary)\n        //     c += \" PRIMARY KEY\";\n        if (column.isGenerated === true) // don't use skipPrimary here since updates can update already exist primary without auto inc.\n            c += \" GENERATED BY DEFAULT ON NULL AS IDENTITY\";\n        // if (column.comment) // todo: less priority, fix it later\n        //     c += \" COMMENT '\" + column.comment + \"'\";\n        if (column.default !== undefined && column.default !== null) { // todo: same code in all drivers. make it DRY\n            c += \" DEFAULT \" + column.default;\n        }\n\n        return c;\n    }\n\n\n}","import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {OracleQueryRunner} from \"./OracleQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {OracleConnectionOptions} from \"./OracleConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {OracleConnectionCredentialsOptions} from \"./OracleConnectionCredentialsOptions\";\nimport {DriverUtils} from \"../DriverUtils\";\n\n/**\n * Organizes communication with Oracle RDBMS.\n *\n * todo: this driver is not 100% finished yet, need to fix all issues that are left\n */\nexport class OracleDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Underlying oracle library.\n     */\n    oracle: any;\n\n    /**\n     * Pool for master database.\n     */\n    master: any;\n\n    /**\n     * Pool for slave databases.\n     * Used in replication.\n     */\n    slaves: any[] = [];\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: OracleConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.techonthenet.com/oracle/datatypes.php\n     * @see https://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#CNCPT012\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"char\",\n        \"nchar\",\n        \"nvarchar2\",\n        \"varchar2\",\n        \"long\",\n        \"raw\",\n        \"long raw\",\n        \"number\",\n        \"numeric\",\n        \"dec\",\n        \"decimal\",\n        \"integer\",\n        \"int\",\n        \"smallint\",\n        \"real\",\n        \"double precision\",\n        \"date\",\n        \"timestamp\",\n        \"timestamp with time zone\",\n        \"timestamp with local time zone\",\n        \"interval year\",\n        \"interval day\",\n        \"bfile\",\n        \"blob\",\n        \"clob\",\n        \"nclob\",\n        \"rowid\",\n        \"urowid\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"char\",\n        \"nchar\",\n        \"nvarchar2\",\n        \"varchar2\"\n    ];\n\n    /**\n     * Orm has special columns and we need to know what database column types should be for those types.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime\",\n        createDateDefault: \"CURRENT_TIMESTAMP\",\n        updateDate: \"datetime\",\n        updateDateDefault: \"CURRENT_TIMESTAMP\",\n        version: \"number\",\n        treeLevel: \"number\",\n        migrationName: \"nvarchar\",\n        migrationTimestamp: \"timestamp\",\n        cacheId: \"int\",\n        cacheIdentifier: \"nvarchar\",\n        cacheTime: \"timestamp\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as OracleConnectionOptions;\n\n        // load oracle package\n        this.loadDependencies();\n\n        // extra oracle setup\n        this.oracle.outFormat = this.oracle.OBJECT;\n\n        // Object.assign(connection.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        // validate options to make sure everything is set\n        // if (!this.options.host)\n        //     throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.sid)\n        //     throw new DriverOptionNotSetError(\"sid\");\n        //\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     * Based on pooling options, it can either create connection immediately,\n     * either create a pool and create connection when needed.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.slaves = await Promise.all(this.options.replication.slaves.map(slave => {\n                return this.createPool(this.options, slave);\n            }));\n            this.master = await this.createPool(this.options, this.options.replication.master);\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.master = await this.createPool(this.options, this.options);\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.master)\n            return Promise.reject(new ConnectionIsNotSetError(\"oracle\"));\n\n        await this.closePool(this.master);\n        await Promise.all(this.slaves.map(slave => this.closePool(slave)));\n        this.master = undefined;\n        this.slaves = [];\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new OracleQueryRunner(this, mode);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            } else {\n                escapedParameters.push(value);\n                return key;\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return `\"${columnName}\"`;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToUtcDatetimeString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\") {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            value = JSON.parse(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n            \n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number, isArray?: boolean }): string {\n        let type = \"\";\n        if (column.type === Number) {\n            type += \"integer\";\n\n        } else if (column.type === String) {\n            type += \"nvarchar2\";\n\n        } else if (column.type === Date) {\n            type += \"timestamp(0)\";\n\n        } else if (column.type === Boolean) {\n            type += \"number(1)\";\n\n        } else if (column.type === \"simple-array\") {\n            type += \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            type += \"text\";\n\n        } else {\n            type += column.type;\n        }\n\n        return type;\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"true\" : \"false\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique;\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n\n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();\n\n        return \"\";\n    }\n\n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return new Promise<any>((ok, fail) => {\n            this.master.getConnection((err: any, connection: any, release: Function) => {\n                if (err) return fail(err);\n                ok(connection);\n            });\n        });\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.slaves.length)\n            return this.obtainMasterConnection();\n\n        return new Promise<any>((ok, fail) => {\n            const random = Math.floor(Math.random() * this.slaves.length);\n\n            this.slaves[random].getConnection((err: any, connection: any) => {\n                if (err) return fail(err);\n                ok(connection);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all driver dependencies.\n     */\n    protected loadDependencies(): void {\n        try {\n            this.oracle = PlatformTools.load(\"oracledb\");\n\n        } catch (e) {\n            throw new DriverPackageNotInstalledError(\"Oracle\", \"oracledb\");\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected async createPool(options: OracleConnectionOptions, credentials: OracleConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        const connectionOptions = Object.assign({}, {\n            user: credentials.username,\n            password: credentials.password,\n            connectString: credentials.host + \":\" + credentials.port + \"/\" + credentials.sid,\n        }, options.extra || {});\n\n        // pooling is enabled either when its set explicitly to true,\n        // either when its not defined at all (e.g. enabled by default)\n        return new Promise<void>((ok, fail) => {\n            this.oracle.createPool(connectionOptions, (err: any, pool: any) => {\n                if (err)\n                    return fail(err);\n                ok(pool);\n            });\n        });\n\n    }\n\n    /**\n     * Closes connection pool.\n     */\n    protected async closePool(pool: any): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            pool.close((err: any) => err ? fail(err) : ok());\n            pool = undefined;\n        });\n    }\n\n}\n","import {TableColumn} from \"./TableColumn\";\nimport {TableIndex} from \"./TableIndex\";\nimport {TableForeignKey} from \"./TableForeignKey\";\nimport {TablePrimaryKey} from \"./TablePrimaryKey\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {EntityMetadata} from \"../../metadata/EntityMetadata\";\nimport {Driver} from \"../../driver/Driver\";\nimport {ColumnType} from \"../../driver/types/ColumnTypes\";\nimport {AbstractSqliteDriver} from \"../../driver/sqlite-abstract/AbstractSqliteDriver\";\nimport {MysqlDriver} from \"../../driver/mysql/MysqlDriver\";\nimport {OracleDriver} from \"../../driver/oracle/OracleDriver\";\n\n/**\n * Table in the database represented in this class.\n */\nexport class Table {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Table name.\n     */\n    name: string;\n\n    /**\n     * Table columns.\n     */\n    columns: TableColumn[] = [];\n\n    /**\n     * Table indices.\n     */\n    indices: TableIndex[] = [];\n\n    /**\n     * Table foreign keys.\n     */\n    foreignKeys: TableForeignKey[] = [];\n\n    /**\n     * Table primary keys.\n     */\n    primaryKeys: TablePrimaryKey[] = [];\n\n    /**\n     * Indicates if table was just created.\n     * This is needed, for example to check if we need to skip primary keys creation\n     * for new tables.\n     */\n    justCreated: boolean = false;\n\n    /**\n     * Table engine.\n     */\n    engine?: string;\n\n    /**\n     * Database name.\n     */\n    database?: string;\n\n    /**\n     * Schema name. Used in Postgres and Sql Server.\n     */\n    schema?: string;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(name: string, columns?: TableColumn[]|ObjectLiteral[], justCreated?: boolean, engine?: string, database?: string, schema?: string) {\n        this.name = name;\n        if (columns) {\n            this.columns = (columns as any[]).map(column => { // as any[] is a temporary fix (some weird compiler error)\n                if (column instanceof TableColumn) {\n                    return column;\n                } else {\n                    return new TableColumn(column);\n                }\n            });\n        }\n\n        if (justCreated !== undefined)\n            this.justCreated = justCreated;\n\n        this.engine = engine;\n        this.database = database;\n        this.schema = schema;\n    }\n\n    // -------------------------------------------------------------------------\n    // Accessors\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets only those primary keys that does not\n     */\n    get primaryKeysWithoutGenerated(): TablePrimaryKey[] {\n        const generatedColumn = this.columns.find(column => column.isGenerated);\n        if (!generatedColumn)\n            return this.primaryKeys;\n\n        return this.primaryKeys.filter(primaryKey => {\n            return primaryKey.columnName !== generatedColumn.name;\n        });\n    }\n\n    get hasGeneratedColumn(): boolean {\n        return !!this.columns.find(column => column.isGenerated);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Clones this table to a new table with all properties cloned.\n     */\n    clone(): Table {\n        const cloned = new Table(this.name);\n        cloned.columns = this.columns.map(column => column.clone());\n        cloned.indices = this.indices.map(index => index.clone());\n        cloned.foreignKeys = this.foreignKeys.map(key => key.clone());\n        cloned.primaryKeys = this.primaryKeys.map(key => key.clone());\n        cloned.engine = this.engine;\n        cloned.database = this.database;\n        cloned.schema = this.schema;\n        return cloned;\n    }\n\n    /**\n     * Adds columns.\n     */\n    addColumns(columns: TableColumn[]) {\n        this.columns = this.columns.concat(columns);\n    }\n\n    /**\n     * Replaces given column.\n     */\n    replaceColumn(oldColumn: TableColumn, newColumn: TableColumn) {\n        this.columns[this.columns.indexOf(oldColumn)] = newColumn;\n    }\n\n    /**\n     * Removes a columns from this table.\n     */\n    removeColumn(columnToRemove: TableColumn) {\n        const foundColumn = this.columns.find(column => column.name === columnToRemove.name);\n        if (foundColumn)\n            this.columns.splice(this.columns.indexOf(foundColumn), 1);\n    }\n\n    /**\n     * Remove all columns from this table.\n     */\n    removeColumns(columns: TableColumn[]) {\n        columns.forEach(column => this.removeColumn(column));\n    }\n\n    /**\n     * Adds all given primary keys.\n     */\n    addPrimaryKeys(addedKeys: TablePrimaryKey[]) {\n        addedKeys.forEach(key => {\n            this.primaryKeys.push(key);\n            const index = this.columns.findIndex(column => column.name === key.columnName);\n            if (index !== -1) {\n                this.columns[index].isPrimary = true;\n            }\n        });\n    }\n\n    /**\n     * Removes all given primary keys.\n     */\n    removePrimaryKeys(droppedKeys: TablePrimaryKey[]) {\n        droppedKeys.forEach(key => {\n            this.primaryKeys.splice(this.primaryKeys.indexOf(key), 1);\n            const index = this.columns.findIndex(column => column.name === key.columnName);\n            if (index !== -1) {\n                this.columns[index].isPrimary = false;\n            }\n        });\n    }\n\n    /**\n     * Removes primary keys of the given columns.\n     */\n    removePrimaryKeysOfColumns(columns: TableColumn[]) {\n        this.primaryKeys = this.primaryKeys.filter(primaryKey => {\n            return !columns.find(column => column.name === primaryKey.columnName);\n        });\n    }\n\n    /**\n     * Adds foreign keys.\n     */\n    addForeignKeys(foreignKeys: TableForeignKey[]) {\n        this.foreignKeys = this.foreignKeys.concat(foreignKeys);\n    }\n\n    /**\n     * Removes foreign key from this table.\n     */\n    removeForeignKey(removedForeignKey: TableForeignKey) {\n        const fk = this.foreignKeys.find(foreignKey => foreignKey.name === removedForeignKey.name); // this must be by name\n        if (fk)\n            this.foreignKeys.splice(this.foreignKeys.indexOf(fk), 1);\n    }\n\n    /**\n     * Removes all foreign keys from this table.\n     */\n    removeForeignKeys(dbForeignKeys: TableForeignKey[]) {\n        dbForeignKeys.forEach(foreignKey => this.removeForeignKey(foreignKey));\n    }\n\n    /**\n     * Removes indices from this table.\n     */\n    removeIndex(tableIndex: TableIndex) {\n        const index = this.indices.find(index => index.name === tableIndex.name);\n        if (index)\n            this.indices.splice(this.indices.indexOf(index), 1);\n    }\n\n    /**\n     * Differentiate columns of this table and columns from the given column metadatas columns\n     * and returns only changed.\n     */\n    findChangedColumns(driver: Driver, columnMetadatas: ColumnMetadata[]): TableColumn[] {\n        return this.columns.filter(tableColumn => {\n            const columnMetadata = columnMetadatas.find(columnMetadata => columnMetadata.databaseName === tableColumn.name);\n            if (!columnMetadata)\n                return false; // we don't need new columns, we only need exist and changed\n\n            // console.log(tableColumn.name, \"!==\", columnMetadata.databaseName); //  ||\n            // console.log(tableColumn.type, \"!==\", driver.normalizeType(columnMetadata)); // ||\n            // console.log(tableColumn.comment, \"!==\", columnMetadata.comment); //  ||\n            // console.log(this.compareDefaultValues(driver.normalizeDefault(columnMetadata), tableColumn.default)); // || // we included check for generated here, because generated columns already can have default values\n            // console.log(tableColumn.isNullable, \"!==\", columnMetadata.isNullable); //  ||\n            // console.log(tableColumn.isUnique, \"!==\", columnMetadata.isUnique); //  ||\n            // console.log(tableColumn.isGenerated, \"!==\", columnMetadata.isGenerated);\n\n            const skipGenerationCheck = columnMetadata.generationStrategy === \"uuid\" && (driver instanceof AbstractSqliteDriver || driver instanceof MysqlDriver || driver instanceof OracleDriver);\n            return  tableColumn.name !== columnMetadata.databaseName ||\n                    tableColumn.type !== driver.normalizeType(columnMetadata) ||\n                    tableColumn.comment !== columnMetadata.comment ||\n                    (!tableColumn.isGenerated && !this.compareDefaultValues(driver.normalizeDefault(columnMetadata), tableColumn.default)) || // we included check for generated here, because generated columns already can have default values\n                    tableColumn.isNullable !== columnMetadata.isNullable ||\n                    tableColumn.isUnique !== driver.normalizeIsUnique(columnMetadata) ||\n                    // tableColumn.isPrimary !== columnMetadata.isPrimary ||\n                    (skipGenerationCheck === false && tableColumn.isGenerated !== columnMetadata.isGenerated) ||\n                    !this.compareColumnLengths(driver, tableColumn, columnMetadata);\n        });\n    }\n\n    findColumnByName(name: string): TableColumn|undefined {\n        return this.columns.find(column => column.name === name);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Compare column lengths only if the datatype supports it.\n     */\n\n    private compareColumnLengths(driver: Driver, tableColumn: TableColumn, columnMetadata: ColumnMetadata): boolean {\n\n        const normalizedColumn = driver.normalizeType(columnMetadata) as ColumnType;\n        if (driver.withLengthColumnTypes.indexOf(normalizedColumn) !== -1) {\n            let metadataLength = driver.getColumnLength(columnMetadata);\n\n            // if we found something to compare with then do it, else skip it\n            // use use case insensitive comparison to catch \"MAX\" vs \"Max\" case\n            if (metadataLength)\n                return tableColumn.length.toLowerCase() === metadataLength.toLowerCase();\n        }\n\n        return true;\n\n    }    \n\n    /**\n     * Checks if \"DEFAULT\" values in the column metadata and in the database are equal.\n     */\n    protected compareDefaultValues(columnMetadataValue: string, databaseValue: string): boolean {\n\n        // if (typeof columnMetadataValue === \"number\")\n        //     return columnMetadataValue === parseInt(databaseValue);\n        // if (typeof columnMetadataValue === \"boolean\")\n        //     return columnMetadataValue === (!!databaseValue || databaseValue === \"false\");\n        // if (typeof columnMetadataValue === \"function\")\n        // if (typeof columnMetadataValue === \"string\" && typeof databaseValue === \"string\")\n        //     return columnMetadataValue.toLowerCase() === databaseValue.toLowerCase();\n\n\n        if (typeof columnMetadataValue === \"string\" && typeof databaseValue === \"string\") {\n\n            // we need to cut out \"((x))\" where x number generated by mssql\n            columnMetadataValue = columnMetadataValue.replace(/\\(\\([0-9.]*\\)\\)$/g, \"$1\");\n            databaseValue = databaseValue.replace(/\\(\\(([0-9.]*?)\\)\\)$/g, \"$1\");\n\n            // we need to cut out \"(\" because in mssql we can understand returned value is a string or a function\n            // as result compare cannot understand if default is really changed or not\n            columnMetadataValue = columnMetadataValue.replace(/^\\(|\\)$/g, \"\");\n            databaseValue = databaseValue.replace(/^\\(|\\)$/g, \"\");\n\n            // we need to cut out \"'\" because in mysql we can understand returned value is a string or a function\n            // as result compare cannot understand if default is really changed or not\n            columnMetadataValue = columnMetadataValue.replace(/^'+|'+$/g, \"\");\n            databaseValue = databaseValue.replace(/^'+|'+$/g, \"\");\n        }\n\n        // console.log(\"columnMetadataValue\", columnMetadataValue);\n        // console.log(\"databaseValue\", databaseValue);\n        return columnMetadataValue === databaseValue;\n    }\n\n    // -------------------------------------------------------------------------\n    // Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates table from a given entity metadata.\n     *\n     * todo: need deeper implementation\n     */\n    static create(entityMetadata: EntityMetadata, driver: Driver) {\n        const table = new Table(entityMetadata.tableName);\n        table.engine = entityMetadata.engine;\n        table.database = entityMetadata.database;\n        table.schema = entityMetadata.schema;\n        entityMetadata.columns.forEach(column => {\n            const tableColumn = TableColumn.create(column, \n                driver.normalizeType(column), \n                driver.normalizeDefault(column),\n                driver.getColumnLength(column)); \n            table.columns.push(tableColumn);\n        });\n\n        return table;\n    }\n\n}","import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TransactionAlreadyStartedError} from \"../../error/TransactionAlreadyStartedError\";\nimport {TransactionNotStartedError} from \"../../error/TransactionNotStartedError\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TablePrimaryKey} from \"../../schema-builder/schema/TablePrimaryKey\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {MysqlDriver} from \"./MysqlDriver\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {EntityManager} from \"../../entity-manager/EntityManager\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\nimport {InsertResult} from \"../InsertResult\";\nimport {QueryFailedError} from \"../../error/QueryFailedError\";\n\n/**\n * Runs queries on a single mysql database connection.\n */\nexport class MysqlQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Database driver used by connection.\n     */\n    driver: MysqlDriver;\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: EntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is in progress.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    protected databaseConnection: any;\n\n    /**\n     * Promise used to obtain a database connection from a pool for a first time.\n     */\n    protected databaseConnectionPromise: Promise<any>;\n\n    /**\n     * Indicates if special query runner mode in which sql queries won't be executed is enabled.\n     */\n    protected sqlMemoryMode: boolean = false;\n\n    /**\n     * Sql-s stored if \"sql in memory\" mode is enabled.\n     */\n    protected sqlsInMemory: (string|{ up: string, down: string })[] = [];\n\n    /**\n     * Mode in which query runner executes.\n     * Used for replication.\n     * If replication is not setup its value is ignored.\n     */\n    protected mode: \"master\"|\"slave\";\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: MysqlDriver, mode: \"master\"|\"slave\" = \"master\") {\n        this.driver = driver;\n        this.connection = driver.connection;\n        this.mode = mode;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates/uses database connection from the connection pool to perform further operations.\n     * Returns obtained database connection.\n     */\n    connect(): Promise<any> {\n        if (this.databaseConnection)\n            return Promise.resolve(this.databaseConnection);\n\n        if (this.databaseConnectionPromise)\n            return this.databaseConnectionPromise;\n\n        if (this.mode === \"slave\" && this.driver.isReplicated) {\n\n            this.databaseConnectionPromise = this.driver.obtainSlaveConnection().then(connection => {\n                this.databaseConnection = connection;\n                return this.databaseConnection;\n            });\n\n        } else { // master\n            this.databaseConnectionPromise = this.driver.obtainMasterConnection().then(connection => {\n                this.databaseConnection = connection;\n                return this.databaseConnection;\n            });\n        }\n\n        return this.databaseConnectionPromise;\n    }\n\n    /**\n     * Releases used database connection.\n     * You cannot use query runner methods once its released.\n     */\n    release(): Promise<void> {\n        this.isReleased = true;\n        if (this.databaseConnection)\n            this.databaseConnection.release();\n        return Promise.resolve();\n    }\n\n    /**\n     * Starts transaction on the current connection.\n     */\n    async startTransaction(): Promise<void> {\n        if (this.isTransactionActive)\n            throw new TransactionAlreadyStartedError();\n\n        this.isTransactionActive = true;\n        await this.query(\"START TRANSACTION\");\n    }\n\n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async commitTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"COMMIT\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Rollbacks transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async rollbackTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"ROLLBACK\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Executes a raw SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise(async (ok, fail) => {\n            try {\n                const databaseConnection = await this.connect();\n                this.driver.connection.logger.logQuery(query, parameters, this);\n                const queryStartTime = +new Date();\n                databaseConnection.query(query, parameters, (err: any, result: any) => {\n\n                    // log slow queries if maxQueryExecution time is set\n                    const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                    const queryEndTime = +new Date();\n                    const queryExecutionTime = queryEndTime - queryStartTime;\n                    if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                        this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                    if (err) {\n                        this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                        return fail(new QueryFailedError(query, parameters, err));\n                    }\n\n                    ok(result);\n                });\n\n            } catch (err) {\n                fail(err);\n            }\n        });\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise(async (ok, fail) => {\n            try {\n                const databaseConnection = await this.connect();\n                this.driver.connection.logger.logQuery(query, parameters, this);\n                const stream = databaseConnection.query(query, parameters);\n                if (onEnd) stream.on(\"end\", onEnd);\n                if (onError) stream.on(\"error\", onError);\n                ok(stream);\n\n            } catch (err) {\n                fail(err);\n            }\n        });\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tablePath: string, keyValues: ObjectLiteral): Promise<InsertResult> {\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\\`${key}\\``).join(\", \");\n        const values = keys.map(key => \"?\").join(\",\");\n        const parameters = keys.map(key => keyValues[key]);\n        const generatedColumns = this.connection.hasMetadata(tablePath) ? this.connection.getMetadata(tablePath).generatedColumns : [];\n        const sql = `INSERT INTO \\`${this.escapeTablePath(tablePath)}\\`(${columns}) VALUES (${values})`;\n        const result = await this.query(sql, parameters);\n\n        const generatedMap = generatedColumns.reduce((map, generatedColumn) => {\n            const value = generatedColumn.isPrimary && result.insertId ? result.insertId : keyValues[generatedColumn.databaseName];\n            if (!value) return map;\n            return OrmUtils.mergeDeep(map, generatedColumn.createValueMap(value));\n        }, {} as ObjectLiteral);\n\n        return {\n            result: result,\n            generatedMap: Object.keys(generatedMap).length > 0 ? generatedMap : undefined\n        };\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(tablePath: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        const updateValues = this.parametrize(valuesMap).join(\", \");\n        const conditionString = this.parametrize(conditions).join(\" AND \");\n        const sql = `UPDATE \\`${this.escapeTablePath(tablePath)}\\` SET ${updateValues} ${conditionString ? (\" WHERE \" + conditionString) : \"\"}`;\n        const conditionParams = Object.keys(conditions).map(key => conditions[key]);\n        const updateParams = Object.keys(valuesMap).map(key => valuesMap[key]);\n        const allParameters = updateParams.concat(conditionParams);\n        await this.query(sql, allParameters);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(tablePath: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        const conditionString = typeof conditions === \"string\" ? conditions : this.parametrize(conditions).join(\" AND \");\n        const parameters = conditions instanceof Object ? Object.keys(conditions).map(key => (conditions as ObjectLiteral)[key]) : maybeParameters;\n\n        const sql = `DELETE FROM \\`${this.escapeTablePath(tablePath)}\\` WHERE ${conditionString}`;\n        await this.query(sql, parameters);\n    }\n\n    /**\n     * Inserts rows into the closure table.\n     */\n    async insertIntoClosureTable(tablePath: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        // todo: escape column names as well\n        if (hasLevel) {\n            await this.query(\n                `INSERT INTO \\`${this.escapeTablePath(tablePath)}\\`(\\`ancestor\\`, \\`descendant\\`, \\`level\\`) ` +\n                `SELECT \\`ancestor\\`, ${newEntityId}, \\`level\\` + 1 FROM \\`${this.escapeTablePath(tablePath)}\\` WHERE \\`descendant\\` = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}, 1`\n            );\n        } else {\n            await this.query(\n                `INSERT INTO \\`${this.escapeTablePath(tablePath)}\\`(\\`ancestor\\`, \\`descendant\\`) ` +\n                `SELECT \\`ancestor\\`, ${newEntityId} FROM \\`${this.escapeTablePath(tablePath)}\\` WHERE \\`descendant\\` = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}`\n            );\n        }\n        if (hasLevel) {\n            const results: ObjectLiteral[] = await this.query(`SELECT MAX(\\`level\\`) as \\`level\\` FROM \\`${this.escapeTablePath(tablePath)}\\` WHERE \\`descendant\\` = ${parentId}`);\n            return results && results[0] && results[0][\"level\"] ? parseInt(results[0][\"level\"]) + 1 : 1;\n        } else {\n            return -1;\n        }\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(tableName: string): Promise<Table|undefined> {\n        const tables = await this.getTables([tableName]);\n        return tables.length > 0 ? tables[0] : undefined;\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(tablePaths: string[]): Promise<Table[]> {\n        if (this.sqlMemoryMode)\n            throw new Error(`Loading table is not supported in sql memory mode`);\n\n        // if no tables given then no need to proceed\n        if (!tablePaths || !tablePaths.length)\n            return [];\n\n        const tableNames = tablePaths.map(tablePath => {\n            return tablePath.indexOf(\".\") === -1 ? tablePath : tablePath.split(\".\")[1];\n        });\n        const dbNames = tablePaths\n            .filter(tablePath => tablePath.indexOf(\".\") !== -1)\n            .map(tablePath => tablePath.split(\".\")[0]);\n        if (this.driver.database && !dbNames.find(dbName => dbName === this.driver.database))\n            dbNames.push(this.driver.database);\n\n        // load tables, columns, indices and foreign keys\n        const databaseNamesString = dbNames.map(dbName => `'${dbName}'`).join(\", \");\n        const tableNamesString = tableNames.map(tableName => `'${tableName}'`).join(\", \");\n        const tablesSql      = `SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA IN (${databaseNamesString}) AND TABLE_NAME IN (${tableNamesString})`; // todo(dima): fix, remove IN, apply AND and OR like in Mssql\n        const columnsSql     = `SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA IN (${databaseNamesString})`;\n        const indicesSql     = `SELECT * FROM INFORMATION_SCHEMA.STATISTICS WHERE TABLE_SCHEMA IN (${databaseNamesString}) AND INDEX_NAME != 'PRIMARY' ORDER BY SEQ_IN_INDEX`;\n        const foreignKeysSql = `SELECT * FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE TABLE_SCHEMA IN (${databaseNamesString}) AND REFERENCED_COLUMN_NAME IS NOT NULL`;\n        const [dbTables, dbColumns, dbIndices, dbForeignKeys]: ObjectLiteral[][] = await Promise.all([\n            this.query(tablesSql),\n            this.query(columnsSql),\n            this.query(indicesSql),\n            this.query(foreignKeysSql)\n        ]);\n\n        // if tables were not found in the db, no need to proceed\n        if (!dbTables.length)\n            return [];\n\n        const isMariaDb = this.driver.options.type === \"mariadb\";\n\n        // create tables for loaded tables\n        return Promise.all(dbTables.map(async dbTable => {\n            const table = new Table(dbTable[\"TABLE_NAME\"]);\n            table.database = dbTable[\"TABLE_SCHEMA\"];\n            const primaryKeys: ObjectLiteral[] = await this.query(`SHOW INDEX FROM \\`${dbTable[\"TABLE_SCHEMA\"]}\\`.\\`${dbTable[\"TABLE_NAME\"]}\\` WHERE Key_name = 'PRIMARY'`);\n\n            // create columns from the loaded columns\n            table.columns = dbColumns\n                .filter(dbColumn => dbColumn[\"TABLE_NAME\"] === table.name)\n                .map(dbColumn => {\n                    const tableColumn = new TableColumn();\n                    tableColumn.name = dbColumn[\"COLUMN_NAME\"];\n\n                    const columnType = dbColumn[\"COLUMN_TYPE\"].toLowerCase();\n                    const endIndex = columnType.indexOf(\"(\");\n                    tableColumn.type = endIndex !== -1 ? columnType.substring(0, endIndex) : columnType;\n\n                    if (dbColumn[\"COLUMN_DEFAULT\"] === null || dbColumn[\"COLUMN_DEFAULT\"] === undefined \n                        || (isMariaDb && dbColumn[\"COLUMN_DEFAULT\"] === \"NULL\")) {\n\n                        tableColumn.default = undefined;\n                    \n                    } else {\n                        tableColumn.default = dbColumn[\"COLUMN_DEFAULT\"];\n                    }\n\n                    tableColumn.isNullable = dbColumn[\"IS_NULLABLE\"] === \"YES\";\n                    tableColumn.isPrimary = dbColumn[\"COLUMN_KEY\"].indexOf(\"PRI\") !== -1;\n                    tableColumn.isUnique = dbColumn[\"COLUMN_KEY\"].indexOf(\"UNI\") !== -1;\n                    tableColumn.isGenerated = dbColumn[\"EXTRA\"].indexOf(\"auto_increment\") !== -1;\n                    tableColumn.comment = dbColumn[\"COLUMN_COMMENT\"];\n                    tableColumn.precision = dbColumn[\"NUMERIC_PRECISION\"];\n                    tableColumn.scale = dbColumn[\"NUMERIC_SCALE\"];\n                    tableColumn.charset = dbColumn[\"CHARACTER_SET_NAME\"];\n                    tableColumn.collation = dbColumn[\"COLLATION_NAME\"];\n\n                    if (tableColumn.type === \"int\" || tableColumn.type === \"tinyint\"\n                        ||  tableColumn.type === \"smallint\" || tableColumn.type === \"mediumint\"\n                        || tableColumn.type === \"bigint\" || tableColumn.type === \"year\") {\n\n                        const length = columnType.substring(columnType.indexOf(\"(\") + 1, columnType.indexOf(\")\"));\n                        tableColumn.length = length ? length.toString() : \"\";\n\n                    } else {\n                        tableColumn.length = dbColumn[\"CHARACTER_MAXIMUM_LENGTH\"] ? dbColumn[\"CHARACTER_MAXIMUM_LENGTH\"].toString() : \"\";\n                    }\n\n                    if (tableColumn.type === \"enum\") {\n                        const colType = dbColumn[\"COLUMN_TYPE\"];\n                        const items = colType.substring(colType.indexOf(\"(\") + 1, colType.indexOf(\")\")).split(\",\");\n                        tableColumn.enum = (items as string[]).map(item => {\n                            return item.substring(1, item.length - 1);\n                        });\n                    }\n\n                    if (tableColumn.type === \"datetime\" || tableColumn.type === \"time\" || tableColumn.type === \"timestamp\") {\n                        tableColumn.precision = dbColumn[\"DATETIME_PRECISION\"];\n                    }\n\n                    return tableColumn;\n                });\n\n            // create primary keys\n            table.primaryKeys = primaryKeys.map(primaryKey => {\n                return new TablePrimaryKey(primaryKey[\"Key_name\"], primaryKey[\"Column_name\"]);\n            });\n\n            // create foreign key schemas from the loaded indices\n            table.foreignKeys = dbForeignKeys\n                .filter(dbForeignKey => dbForeignKey[\"TABLE_NAME\"] === table.name)\n                .map(dbForeignKey => new TableForeignKey(dbForeignKey[\"CONSTRAINT_NAME\"], [], [], \"\", \"\")); // todo: fix missing params\n\n            // create index schemas from the loaded indices\n            table.indices = dbIndices\n                .filter(dbIndex => {\n                    return dbIndex[\"TABLE_NAME\"] === table.name &&\n                        (!table.foreignKeys.find(foreignKey => foreignKey.name === dbIndex[\"INDEX_NAME\"])) &&\n                        (!table.primaryKeys.find(primaryKey => primaryKey.name === dbIndex[\"INDEX_NAME\"]));\n                })\n                .map(dbIndex => dbIndex[\"INDEX_NAME\"])\n                .filter((value, index, self) => self.indexOf(value) === index) // unqiue\n                .map(dbIndexName => {\n                    const currentDbIndices = dbIndices.filter(dbIndex => dbIndex[\"TABLE_NAME\"] === table.name && dbIndex[\"INDEX_NAME\"] === dbIndexName);\n                    const columnNames = currentDbIndices.map(dbIndex => dbIndex[\"COLUMN_NAME\"]);\n\n                    // find a special index - unique index and\n                    if (currentDbIndices.length === 1 && currentDbIndices[0][\"NON_UNIQUE\"] === 0) {\n                        const column = table.columns.find(column => column.name === currentDbIndices[0][\"INDEX_NAME\"] && column.name === currentDbIndices[0][\"COLUMN_NAME\"]);\n                        if (column) {\n                            column.isUnique = true;\n                            return;\n                        }\n                    }\n\n                    return new TableIndex(dbTable[\"TABLE_NAME\"], dbIndexName, columnNames, currentDbIndices[0][\"NON_UNIQUE\"] === 0);\n                })\n                .filter(index => !!index) as TableIndex[]; // remove empty returns\n\n            return table;\n        }));\n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        const result = await this.query(`SELECT * FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = '${database}'`);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(tableOrPath: Table|string): Promise<boolean> {\n        const parsedTablePath = this.parseTablePath(tableOrPath);\n        const sql = `SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '${parsedTablePath.database}' AND TABLE_NAME = '${parsedTablePath.tableName}'`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(tableOrPath: Table|string, column: TableColumn|string): Promise<boolean> {\n        const parsedTablePath = this.parseTablePath(tableOrPath);\n        const columnName = column instanceof TableColumn ? column.name : column;\n        const sql = `SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '${parsedTablePath.database}' AND TABLE_NAME = '${parsedTablePath.tableName}' AND COLUMN_NAME = '${columnName}'`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        return this.query(`CREATE DATABASE IF NOT EXISTS ${database}`); // todo(dima): IT SHOULD NOT EXECUTE \"IF NOT EXIST\" if user already has a database (privileges issue)\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemas: string[]): Promise<void[]> {\n        return Promise.resolve([]);\n    }\n\n    /**\n     * Creates a new table from the given table and column inside it.\n     */\n    async createTable(table: Table): Promise<void> {\n        const columnDefinitions = table.columns.map(column => this.buildCreateColumnSql(column, false)).join(\", \");\n        let sql = `CREATE TABLE \\`${this.escapeTablePath(table)}\\` (${columnDefinitions}`;\n        const primaryKeyColumns = table.columns.filter(column => column.isPrimary && !column.isGenerated);\n        if (primaryKeyColumns.length > 0)\n            sql += `, PRIMARY KEY(${primaryKeyColumns.map(column => `\\`${column.name}\\``).join(\", \")})`;\n        sql += `) ENGINE=${table.engine || \"InnoDB\"}`;\n\n        const revertSql = `DROP TABLE \\`${this.escapeTablePath(table)}\\``;\n        return this.schemaQuery(sql, revertSql);\n    }\n\n    /**\n     * Drop the table.\n     */\n    async dropTable(tableOrPath: Table|string): Promise<void> {\n        const sql = `DROP TABLE \\`${this.escapeTablePath(tableOrPath)}\\``;\n        return this.query(sql);\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrPath: Table|string, column: TableColumn): Promise<void> {\n        const sql = `ALTER TABLE \\`${this.escapeTablePath(tableOrPath)}\\` ADD ${this.buildCreateColumnSql(column, false)}`;\n        const revertSql = `ALTER TABLE \\`${this.escapeTablePath(tableOrPath)}\\` DROP \\`${column.name}\\``;\n        return this.schemaQuery(sql, revertSql);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        const queries = columns.map(column => this.addColumn(tableOrName as any, column));\n        await Promise.all(queries);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName); // todo: throw exception, this wont work because of sql memory enabled. remove support by table name\n            if (!table)\n                throw new Error(`Table ${tableOrName} was not found.`);\n        }\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        let newColumn: TableColumn|undefined = undefined;\n        if (newTableColumnOrName instanceof TableColumn) {\n            newColumn = newTableColumnOrName;\n        } else {\n            newColumn = oldColumn.clone();\n            newColumn.name = newTableColumnOrName;\n        }\n\n        return this.changeColumn(table, oldColumn, newColumn);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        if (newColumn.isUnique === false && oldColumn.isUnique === true)\n            await this.query(`ALTER TABLE \\`${this.escapeTablePath(table)}\\` DROP INDEX \\`${oldColumn.name}\\``); // todo: add revert code\n\n        const sql = `ALTER TABLE \\`${this.escapeTablePath(table)}\\` CHANGE \\`${oldColumn.name}\\` ${this.buildCreateColumnSql(newColumn, oldColumn.isPrimary)}`;\n        const revertSql = `ALTER TABLE \\`${this.escapeTablePath(table)}\\` CHANGE \\`${oldColumn.name}\\` ${this.buildCreateColumnSql(oldColumn, oldColumn.isPrimary)}`;\n        return this.schemaQuery(sql, revertSql);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        const updatePromises = changedColumns.map(async changedColumn => {\n            return this.changeColumn(table, changedColumn.oldColumn, changedColumn.newColumn);\n        });\n\n        await Promise.all(updatePromises);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        const sql = `ALTER TABLE \\`${this.escapeTablePath(table)}\\` DROP \\`${column.name}\\``;\n        const revertSql = `ALTER TABLE \\`${this.escapeTablePath(table)}\\` ADD ${this.buildCreateColumnSql(column, false)}`;\n        return this.schemaQuery(sql, revertSql);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        const dropPromises = columns.map(column => this.dropColumn(table, column));\n        await Promise.all(dropPromises);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(table: Table): Promise<void> {\n        if (!table.hasGeneratedColumn)\n            await this.query(`ALTER TABLE \\`${this.escapeTablePath(table)}\\` DROP PRIMARY KEY`);\n\n        const primaryColumnNames = table.columns\n            .filter(column => column.isPrimary && !column.isGenerated)\n            .map(column => \"`\" + column.name + \"`\");\n        if (primaryColumnNames.length > 0) {\n            const sql = `ALTER TABLE \\`${this.escapeTablePath(table)}\\` ADD PRIMARY KEY (${primaryColumnNames.join(\", \")})`;\n            const revertSql = `ALTER TABLE \\`${this.escapeTablePath(table)}\\` DROP PRIMARY KEY`;\n            return this.schemaQuery(sql, revertSql);\n        }\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrPath: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const columnNames = foreignKey.columnNames.map(column => \"`\" + column + \"`\").join(\", \");\n        const referencedColumnNames = foreignKey.referencedColumnNames.map(column => \"`\" + column + \"`\").join(\",\");\n        let sql = `ALTER TABLE \\`${this.escapeTablePath(tableOrPath)}\\` ADD CONSTRAINT \\`${foreignKey.name}\\` ` +\n            `FOREIGN KEY (${columnNames}) ` +\n            `REFERENCES \\`${foreignKey.referencedTableName}\\`(${referencedColumnNames})`;\n        if (foreignKey.onDelete) sql += \" ON DELETE \" + foreignKey.onDelete;\n        const revertSql = `ALTER TABLE \\`${this.escapeTablePath(tableOrPath)}\\` DROP FOREIGN KEY \\`${foreignKey.name}\\``;\n        return this.schemaQuery(sql, revertSql);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.createForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrPath: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const sql = `ALTER TABLE \\`${this.escapeTablePath(tableOrPath)}\\` DROP FOREIGN KEY \\`${foreignKey.name}\\``;\n\n        const columnNames = foreignKey.columnNames.map(column => \"`\" + column + \"`\").join(\", \");\n        const referencedColumnNames = foreignKey.referencedColumnNames.map(column => \"`\" + column + \"`\").join(\",\");\n        let revertSql = `ALTER TABLE \\`${this.escapeTablePath(tableOrPath)}\\` ADD CONSTRAINT \\`${foreignKey.name}\\` ` +\n            `FOREIGN KEY (${columnNames}) ` +\n            `REFERENCES \\`${foreignKey.referencedTableName}\\`(${referencedColumnNames})`;\n        if (foreignKey.onDelete) revertSql += \" ON DELETE \" + foreignKey.onDelete;\n\n        return this.schemaQuery(sql, revertSql);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.dropForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(table: Table|string, index: TableIndex): Promise<void> {\n        const columns = index.columnNames.map(columnName => \"`\" + columnName + \"`\").join(\", \");\n        const sql = `CREATE ${index.isUnique ? \"UNIQUE \" : \"\"}INDEX \\`${index.name}\\` ON \\`${this.escapeTablePath(table)}\\`(${columns})`;\n        const revertSql = `ALTER TABLE \\`${this.escapeTablePath(table)}\\` DROP INDEX \\`${index.name}\\``;\n        await this.schemaQuery(sql, revertSql);\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(tableOrPath: Table|string, index: TableIndex|string): Promise<void> {\n        const indexName = index instanceof TableIndex ? index.name : index;\n        const sql = `ALTER TABLE \\`${this.escapeTablePath(tableOrPath)}\\` DROP INDEX \\`${indexName}\\``;\n\n        if (index instanceof TableIndex) {\n            const columns = index.columnNames.map(columnName => \"`\" + columnName + \"`\").join(\", \");\n            const revertSql = `CREATE ${index.isUnique ? \"UNIQUE \" : \"\"}INDEX \\`${index.name}\\` ON \\`${this.escapeTablePath(tableOrPath)}\\`(${columns})`;\n            await this.schemaQuery(sql, revertSql);\n\n        } else {\n            await this.query(sql);\n        }\n    }\n\n    /**\n     * Truncates table.\n     */\n    async truncate(tableOrPath: Table|string): Promise<void> {\n        await this.query(`TRUNCATE TABLE \\`${this.escapeTablePath(tableOrPath)}\\``);\n    }\n\n    /**\n     * Removes all tables from the currently connected database.\n     * Be careful using this method and avoid using it in production or migrations\n     * (because it can clear all your database).\n     */\n    async clearDatabase(tables?: string[], database?: string): Promise<void> {\n        await this.startTransaction();\n        try {\n            const disableForeignKeysCheckQuery = `SET FOREIGN_KEY_CHECKS = 0;`;\n            const dropTablesQuery = `SELECT concat('DROP TABLE IF EXISTS \\`', table_schema, '\\`.\\`', table_name, '\\`;') AS query FROM information_schema.tables WHERE table_schema = '${database}'`;\n            const enableForeignKeysCheckQuery = `SET FOREIGN_KEY_CHECKS = 1;`;\n\n            await this.query(disableForeignKeysCheckQuery);\n            const dropQueries: ObjectLiteral[] = await this.query(dropTablesQuery);\n            await Promise.all(dropQueries.map(query => this.query(query[\"query\"])));\n            await this.query(enableForeignKeysCheckQuery);\n\n            await this.commitTransaction();\n\n        } catch (error) {\n            try { // we throw original error even if rollback thrown an error\n                await this.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw error;\n        }\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        this.sqlMemoryMode = true;\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        this.sqlsInMemory = [];\n        this.sqlMemoryMode = false;\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql(): (string|{ up: string, down: string })[] {\n        return this.sqlsInMemory;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Executes sql used special for schema build.\n     */\n    protected async schemaQuery(upQuery: string, downQuery: string): Promise<void> {\n\n        // if sql-in-memory mode is enabled then simply store sql in memory and return\n        if (this.sqlMemoryMode === true) {\n            this.sqlsInMemory.push({ up: upQuery, down: downQuery });\n            return Promise.resolve() as Promise<any>;\n        }\n\n        await this.query(upQuery);\n    }\n\n    protected parseTablePath(tableOrPath: Table|string) {\n        if (tableOrPath instanceof Table) {\n            return {\n                database: tableOrPath.database || this.driver.database,\n                tableName: tableOrPath.name\n            };\n        } else {\n            return {\n                database: tableOrPath.indexOf(\".\") !== -1 ? tableOrPath.split(\".\")[0] : this.driver.database,\n                tableName: tableOrPath.indexOf(\".\") !== -1 ? tableOrPath.split(\".\")[1] : tableOrPath\n            };\n        }\n    }\n\n    protected escapeTablePath(tableOrPath: Table|string): string {\n        if (tableOrPath instanceof Table)\n            return tableOrPath.database ? `${tableOrPath.database}\\`.\\`${tableOrPath.name}` : `${tableOrPath.name}`;\n\n        return tableOrPath.split(\".\").map(i => `${i}`).join(\"\\`.\\`\");\n    }\n\n    /**\n     * Parametrizes given object of values. Used to create column=value queries.\n     */\n    protected parametrize(objectLiteral: ObjectLiteral): string[] {\n        return Object.keys(objectLiteral).map(key => `\\`${key}\\`=?`);\n    }\n\n    /**\n     * Builds a part of query to create/change a column.\n     */\n    protected buildCreateColumnSql(column: TableColumn, skipPrimary: boolean) {\n        let c = \"`\" + column.name + \"` \" + this.connection.driver.createFullType(column);\n        if (column.enum)\n            c += \"(\" + column.enum.map(value => \"'\" + value + \"'\").join(\", \") +  \")\";\n        if (column.charset)\n            c += \" CHARACTER SET \" + column.charset;\n        if (column.collation)\n            c += \" COLLATE \" + column.collation;\n        if (column.isNullable !== true)\n            c += \" NOT NULL\";\n        if (column.isUnique === true)\n            c += \" UNIQUE\";\n        if (column.isGenerated && column.isPrimary && !skipPrimary)\n            c += \" PRIMARY KEY\";\n        if (column.isGenerated === true && column.generationStrategy === \"increment\") // don't use skipPrimary here since updates can update already exist primary without auto inc.\n            c += \" AUTO_INCREMENT\";\n        if (column.comment)\n            c += \" COMMENT '\" + column.comment + \"'\";\n        if (column.default !== undefined && column.default !== null)\n            c += \" DEFAULT \" + column.default;\n\n        return c;\n    }\n\n}\n","import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverUtils} from \"../DriverUtils\";\nimport {MysqlQueryRunner} from \"./MysqlQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {MysqlConnectionOptions} from \"./MysqlConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {RandomGenerator} from \"../../util/RandomGenerator\";\nimport {MysqlConnectionCredentialsOptions} from \"./MysqlConnectionCredentialsOptions\";\n\n/**\n * Organizes communication with MySQL DBMS.\n */\nexport class MysqlDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Mysql underlying library.\n     */\n    mysql: any;\n\n    /**\n     * Connection pool.\n     * Used in non-replication mode.\n     */\n    pool: any;\n\n    /**\n     * Pool cluster used in replication mode.\n     */\n    poolCluster: any;\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: MysqlConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.tutorialspoint.com/mysql/mysql-data-types.htm\n     * @see https://dev.mysql.com/doc/refman/5.7/en/data-types.html\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"int\",\n        \"tinyint\",\n        \"smallint\",\n        \"mediumint\",\n        \"bigint\",\n        \"float\",\n        \"double\",\n        \"decimal\",\n        \"date\",\n        \"datetime\",\n        \"timestamp\",\n        \"time\",\n        \"year\",\n        \"char\",\n        \"varchar\",\n        \"blob\",\n        \"text\",\n        \"tinyblob\",\n        \"tinytext\",\n        \"mediumblob\",\n        \"mediumtext\",\n        \"longblob\",\n        \"longtext\",\n        \"enum\",\n        \"json\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"int\",\n        \"tinyint\",\n        \"smallint\",\n        \"mediumint\",\n        \"bigint\",\n        \"char\",\n        \"varchar\",\n        \"blob\",\n        \"text\"\n    ];\n\n    /**\n     * ORM has special columns and we need to know what database column types should be for those columns.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime\",\n        createDatePrecision: 6,\n        createDateDefault: \"CURRENT_TIMESTAMP(6)\",\n        updateDate: \"datetime\",\n        updateDatePrecision: 6,\n        updateDateDefault: \"CURRENT_TIMESTAMP(6)\",\n        version: \"int\",\n        treeLevel: \"int\",\n        migrationName: \"varchar\",\n        migrationTimestamp: \"bigint\",\n        cacheId: \"int\",\n        cacheIdentifier: \"varchar\",\n        cacheTime: \"bigint\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults = {\n        varchar: { length: 255 },\n        int: { length: 11 },\n        tinyint: { length: 4 },\n        smallint: { length: 5 },\n        mediumint: { length: 9 },\n        bigint: { length: 20 },\n        year: { length: 4 }\n    };\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n    \n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as MysqlConnectionOptions;\n        this.isReplicated = this.options.replication ? true : false;\n\n        // load mysql package\n        this.loadDependencies();\n\n        // validate options to make sure everything is set\n        // todo: revisit validation with replication in mind\n        // if (!(this.options.host || (this.options.extra && this.options.extra.socketPath)) && !this.options.socketPath)\n        //     throw new DriverOptionNotSetError(\"socketPath and host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.database)\n        //     throw new DriverOptionNotSetError(\"database\");\n        // todo: check what is going on when connection is setup without database and how to connect to a database then?\n        // todo: provide options to auto-create a database if it does not exist yet\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.poolCluster = this.mysql.createPoolCluster(this.options.replication);\n            this.options.replication.slaves.forEach((slave, index) => {\n                this.poolCluster.add(\"SLAVE\" + index, this.createConnectionOptions(this.options, slave));\n            });\n            this.poolCluster.add(\"MASTER\", this.createConnectionOptions(this.options, this.options.replication.master));\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.pool = await this.createPool(this.createConnectionOptions(this.options, this.options));\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.poolCluster && !this.pool)\n            return Promise.reject(new ConnectionIsNotSetError(\"mysql\"));\n\n        if (this.poolCluster) {\n            return new Promise<void>((ok, fail) => {\n                this.poolCluster.end((err: any) => err ? fail(err) : ok());\n                this.poolCluster = undefined;\n            });\n        }\n        if (this.pool) {\n            return new Promise<void>((ok, fail) => {\n                this.pool.end((err: any) => {\n                    if (err) return fail(err);\n                    this.pool = undefined;\n                    ok();\n                });\n            });\n        }\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new MysqlQueryRunner(this, mode);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            } else {\n                escapedParameters.push(parameters[key.substr(1)]);\n                return \"?\";\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return \"`\" + columnName + \"`\";\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToDate(value, true);\n\n        } else if (columnMetadata.isGenerated && columnMetadata.generationStrategy === \"uuid\" && !value) {\n            return RandomGenerator.uuid4();\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n            \n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            value = typeof value === \"string\" ? JSON.parse(value) : value;\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n            \n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type: ColumnType, length?: number | string, precision?: number, scale?: number }): string {\n        if (column.type === Number || column.type === \"integer\") {\n            return \"int\";\n\n        } else if (column.type === String) {\n            return \"varchar\";\n\n        } else if (column.type === Date) {\n            return \"datetime\";\n\n        } else if ((column.type as any) === Buffer) {\n            return \"blob\";\n\n        } else if (column.type === Boolean) {\n            return \"tinyint\";\n\n        } else if (column.type === \"uuid\") {\n            return \"varchar\";\n\n        } else if (column.type === \"simple-array\") {\n            return \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            return \"text\";\n\n        } else {\n            return column.type as string || \"\";\n        }\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"1\" : \"0\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique || \n            !!column.entityMetadata.indices.find(index => index.isUnique && index.columns.length === 1 && index.columns[0] === column);\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n        \n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();       \n\n        return \"\";\n    }    \n    \n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return new Promise<any>((ok, fail) => {\n            if (this.poolCluster) {\n                this.poolCluster.getConnection(\"MASTER\", (err: any, dbConnection: any) => {\n                    err ? fail(err) : ok(dbConnection);\n                });\n\n            } else if (this.pool) {\n                this.pool.getConnection((err: any, dbConnection: any) => {\n                    err ? fail(err) : ok(dbConnection);\n                });\n            } else {\n                fail(new Error(`Connection is not established with mysql database`));\n            }\n        });\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.poolCluster)\n            return this.obtainMasterConnection();\n\n        return new Promise<any>((ok, fail) => {\n            this.poolCluster.getConnection(\"SLAVE*\", (err: any, dbConnection: any) => {\n                err ? fail(err) : ok(dbConnection);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all driver dependencies.\n     */\n    protected loadDependencies(): void {\n        try {\n            this.mysql = PlatformTools.load(\"mysql\");  // try to load first supported package\n\n        } catch (e) {\n            try {\n                this.mysql = PlatformTools.load(\"mysql2\"); // try to load second supported package\n\n            } catch (e) {\n                throw new DriverPackageNotInstalledError(\"Mysql\", \"mysql\");\n            }\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected createConnectionOptions(options: MysqlConnectionOptions, credentials: MysqlConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        return Object.assign({}, {\n            charset: options.charset,\n            timezone: options.timezone,\n            connectTimeout: options.connectTimeout,\n            insecureAuth: options.insecureAuth,\n            supportBigNumbers: options.supportBigNumbers,\n            bigNumberStrings: options.bigNumberStrings,\n            dateStrings: options.dateStrings,\n            debug: options.debug,\n            trace: options.trace,\n            multipleStatements: options.multipleStatements,\n            flags: options.flags\n        }, {\n            host: credentials.host,\n            user: credentials.username,\n            password: credentials.password,\n            database: credentials.database,\n            port: credentials.port,\n            ssl: options.ssl\n        }, options.extra || {});\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected createPool(connectionOptions: any): Promise<any> {\n\n        // create a connection pool\n        const pool = this.mysql.createPool(connectionOptions);\n\n        // make sure connection is working fine\n        return new Promise<void>((ok, fail) => {\n            // (issue #610) we make first connection to database to make sure if connection credentials are wrong\n            // we give error before calling any other method that creates actual query runner\n            pool.getConnection((err: any, connection: any) => {\n                if (err)\n                    return pool.end(() => fail(err));\n\n                connection.release();\n                ok(pool);\n            });\n        });\n    }\n\n}\n","/**\n * Sql server driver requires parameter types to be specified fo input parameters used in the query.\n *\n * @see https://github.com/patriksimek/node-mssql#data-types\n */\nexport class MssqlParameter {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    public params: any[] = [];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(value: any, type: \"bit\");\n    constructor(value: any, type: \"bigint\");\n    constructor(value: any, type: \"decimal\", precision?: number, scale?: number);\n    constructor(value: any, type: \"float\");\n    constructor(value: any, type: \"int\");\n    constructor(value: any, type: \"money\");\n    constructor(value: any, type: \"numeric\", precision?: number, scale?: number);\n    constructor(value: any, type: \"smallint\");\n    constructor(value: any, type: \"smallmoney\");\n    constructor(value: any, type: \"real\");\n    constructor(value: any, type: \"tinyint\");\n    constructor(value: any, type: \"char\", length?: number);\n    constructor(value: any, type: \"nchar\", length?: number);\n    constructor(value: any, type: \"text\");\n    constructor(value: any, type: \"ntext\");\n    constructor(value: any, type: \"varchar\", length?: number);\n    constructor(value: any, type: \"nvarchar\", length?: number);\n    constructor(value: any, type: \"xml\");\n    constructor(value: any, type: \"time\", scale?: number);\n    constructor(value: any, type: \"date\");\n    constructor(value: any, type: \"datetime\");\n    constructor(value: any, type: \"datetime2\", scale?: number);\n    constructor(value: any, type: \"datetimeoffset\", scale?: number);\n    constructor(value: any, type: \"smalldatetime\");\n    constructor(value: any, type: \"uniqueidentifier\");\n    constructor(value: any, type: \"variant\");\n    constructor(value: any, type: \"binary\");\n    constructor(value: any, type: \"varbinary\", length?: number);\n    constructor(value: any, type: \"image\");\n    constructor(value: any, type: \"udt\");\n    constructor(value: any, type: \"geography\");\n    constructor(value: any, type: \"geometry\");\n    constructor(public value: any, public type: string, ...params: number[]) {\n        this.params = params || [];\n    }\n\n}","import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TransactionAlreadyStartedError} from \"../../error/TransactionAlreadyStartedError\";\nimport {TransactionNotStartedError} from \"../../error/TransactionNotStartedError\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TablePrimaryKey} from \"../../schema-builder/schema/TablePrimaryKey\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {SqlServerDriver} from \"./SqlServerDriver\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {MssqlParameter} from \"./MssqlParameter\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\nimport {EntityManager} from \"../../entity-manager/EntityManager\";\nimport {QueryFailedError} from \"../../error/QueryFailedError\";\nimport {PromiseUtils} from \"../../util/PromiseUtils\";\n\n/**\n * Runs queries on a single mysql database connection.\n */\nexport class SqlServerQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Database driver used by connection.\n     */\n    driver: SqlServerDriver;\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: EntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is in progress.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    protected databaseConnection: any;\n\n    /**\n     * Last executed query in a transaction.\n     * This is needed because in transaction mode mssql cannot execute parallel queries,\n     * that's why we store last executed query promise to wait it when we execute next query.\n     *\n     * @see https://github.com/patriksimek/node-mssql/issues/491\n     */\n    protected queryResponsibilityChain: Promise<any>[] = [];\n\n    /**\n     * Indicates if special query runner mode in which sql queries won't be executed is enabled.\n     */\n    protected sqlMemoryMode: boolean = false;\n\n    /**\n     * Sql-s stored if \"sql in memory\" mode is enabled.\n     */\n    protected sqlsInMemory: string[] = [];\n\n    /**\n     * Mode in which query runner executes.\n     * Used for replication.\n     * If replication is not setup its value is ignored.\n     */\n    protected mode: \"master\"|\"slave\";\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: SqlServerDriver, mode: \"master\"|\"slave\" = \"master\") {\n        this.driver = driver;\n        this.connection = driver.connection;\n        this.mode = mode;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates/uses database connection from the connection pool to perform further operations.\n     * Returns obtained database connection.\n     */\n    connect(): Promise<any> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Releases used database connection.\n     * You cannot use query runner methods once its released.\n     */\n    release(): Promise<void> {\n        this.isReleased = true;\n        return Promise.resolve();\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        if (this.isTransactionActive)\n            throw new TransactionAlreadyStartedError();\n\n        return new Promise<void>(async (ok, fail) => {\n            this.isTransactionActive = true;\n\n            const pool = await (this.mode === \"slave\" ? this.driver.obtainSlaveConnection() : this.driver.obtainMasterConnection());\n            this.databaseConnection = pool.transaction();\n            this.databaseConnection.begin((err: any) => {\n                if (err) {\n                    this.isTransactionActive = false;\n                    return fail(err);\n                }\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async commitTransaction(): Promise<void> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        return new Promise<void>((ok, fail) => {\n            this.databaseConnection.commit((err: any) => {\n                if (err) return fail(err);\n                this.isTransactionActive = false;\n                this.databaseConnection = null;\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Rollbacks transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async rollbackTransaction(): Promise<void> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        return new Promise<void>((ok, fail) => {\n            this.databaseConnection.rollback((err: any) => {\n                if (err) return fail(err);\n                this.isTransactionActive = false;\n                this.databaseConnection = null;\n                ok();\n            });\n        });\n    }\n\n    protected mssqlParameterToNativeParameter(parameter: MssqlParameter): any {\n        switch (this.driver.normalizeType({ type: parameter.type as any })) {\n            case \"bit\":\n                return this.driver.mssql.Bit;\n            case \"bigint\":\n                return this.driver.mssql.BigInt;\n            case \"decimal\":\n                return this.driver.mssql.Decimal(...parameter.params);\n            case \"float\":\n                return this.driver.mssql.Float;\n            case \"int\":\n                return this.driver.mssql.Int;\n            case \"money\":\n                return this.driver.mssql.Money;\n            case \"numeric\":\n                return this.driver.mssql.Numeric(...parameter.params);\n            case \"smallint\":\n                return this.driver.mssql.SmallInt;\n            case \"smallmoney\":\n                return this.driver.mssql.SmallMoney;\n            case \"real\":\n                return this.driver.mssql.Real;\n            case \"tinyint\":\n                return this.driver.mssql.TinyInt;\n            case \"char\":\n                return this.driver.mssql.Char(...parameter.params);\n            case \"nchar\":\n                return this.driver.mssql.NChar(...parameter.params);\n            case \"text\":\n                return this.driver.mssql.Text;\n            case \"ntext\":\n                return this.driver.mssql.Ntext;\n            case \"varchar\":\n                return this.driver.mssql.VarChar(...parameter.params);\n            case \"nvarchar\":\n                return this.driver.mssql.NVarChar(...parameter.params);\n            case \"xml\":\n                return this.driver.mssql.Xml;\n            case \"time\":\n                return this.driver.mssql.Time(...parameter.params);\n            case \"date\":\n                return this.driver.mssql.Date;\n            case \"datetime\":\n                return this.driver.mssql.DateTime;\n            case \"datetime2\":\n                return this.driver.mssql.DateTime2(...parameter.params);\n            case \"datetimeoffset\":\n                return this.driver.mssql.DateTimeOffset(...parameter.params);\n            case \"smalldatetime\":\n                return this.driver.mssql.SmallDateTime;\n            case \"uniqueidentifier\":\n                return this.driver.mssql.UniqueIdentifier;\n            case \"variant\":\n                return this.driver.mssql.Variant;\n            case \"binary\":\n                return this.driver.mssql.Binary;\n            case \"varbinary\":\n                return this.driver.mssql.VarBinary(...parameter.params);\n            case \"image\":\n                return this.driver.mssql.Image;\n            case \"udt\":\n                return this.driver.mssql.UDT;\n            case \"geography\":\n                return this.driver.mssql.Geography;\n            case \"geometry\":\n                return this.driver.mssql.Geometry;\n        }\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    async query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        let waitingOkay: Function;\n        const waitingPromise = new Promise((ok) => waitingOkay = ok);\n        if (this.queryResponsibilityChain.length) {\n            const otherWaitingPromises = [...this.queryResponsibilityChain];\n            this.queryResponsibilityChain.push(waitingPromise);\n            await Promise.all(otherWaitingPromises);\n        }\n\n        const promise = new Promise(async (ok, fail) => {\n            try {\n                this.driver.connection.logger.logQuery(query, parameters, this);\n                const pool = await (this.mode === \"slave\" ? this.driver.obtainSlaveConnection() : this.driver.obtainMasterConnection());\n                const request = new this.driver.mssql.Request(this.isTransactionActive ? this.databaseConnection : pool);\n                if (parameters && parameters.length) {\n                    parameters.forEach((parameter, index) => {\n                        if (parameter instanceof MssqlParameter) {\n                            const mssqlParameter = this.mssqlParameterToNativeParameter(parameter);\n                            if (mssqlParameter) {\n                                request.input(index, mssqlParameter, parameter.value);\n                            } else {\n                                request.input(index, parameter.value);\n                            }\n                        } else {\n                            request.input(index, parameter);\n                        }\n                    });\n                }\n                const queryStartTime = +new Date();\n                request.query(query, (err: any, result: any) => {\n\n                    // log slow queries if maxQueryExecution time is set\n                    const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                    const queryEndTime = +new Date();\n                    const queryExecutionTime = queryEndTime - queryStartTime;\n                    if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                        this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                    const resolveChain = () => {\n                        if (promiseIndex !== -1)\n                            this.queryResponsibilityChain.splice(promiseIndex, 1);\n                        if (waitingPromiseIndex !== -1)\n                            this.queryResponsibilityChain.splice(waitingPromiseIndex, 1);\n                        waitingOkay();\n                    };\n\n                    let promiseIndex = this.queryResponsibilityChain.indexOf(promise);\n                    let waitingPromiseIndex = this.queryResponsibilityChain.indexOf(waitingPromise);\n                    if (err) {\n                        this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                        resolveChain();\n                        return fail(new QueryFailedError(query, parameters, err));\n                    }\n\n                    ok(result.recordset);\n                    resolveChain();\n                });\n\n            } catch (err) {\n                fail(err);\n            }\n        });\n        if (this.isTransactionActive)\n            this.queryResponsibilityChain.push(promise);\n\n        return promise;\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    async stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        let waitingOkay: Function;\n        const waitingPromise = new Promise((ok) => waitingOkay = ok);\n        if (this.queryResponsibilityChain.length) {\n            const otherWaitingPromises = [...this.queryResponsibilityChain];\n            this.queryResponsibilityChain.push(waitingPromise);\n            await Promise.all(otherWaitingPromises);\n        }\n\n        const promise = new Promise<ReadStream>(async (ok, fail) => {\n\n            this.driver.connection.logger.logQuery(query, parameters, this);\n            const pool = await (this.mode === \"slave\" ? this.driver.obtainSlaveConnection() : this.driver.obtainMasterConnection());\n            const request = new this.driver.mssql.Request(this.isTransactionActive ? this.databaseConnection : pool);\n            request.stream = true;\n            if (parameters && parameters.length) {\n                parameters.forEach((parameter, index) => {\n                    if (parameter instanceof MssqlParameter) {\n                        request.input(index, this.mssqlParameterToNativeParameter(parameter), parameter.value);\n                    } else {\n                        request.input(index, parameter);\n                    }\n                });\n            }\n            request.query(query, (err: any, result: any) => {\n\n                const resolveChain = () => {\n                    if (promiseIndex !== -1)\n                        this.queryResponsibilityChain.splice(promiseIndex, 1);\n                    if (waitingPromiseIndex !== -1)\n                        this.queryResponsibilityChain.splice(waitingPromiseIndex, 1);\n                    waitingOkay();\n                };\n\n                let promiseIndex = this.queryResponsibilityChain.indexOf(promise);\n                let waitingPromiseIndex = this.queryResponsibilityChain.indexOf(waitingPromise);\n                if (err) {\n                    this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                    resolveChain();\n                    return fail(err);\n                }\n\n                ok(result.recordset);\n                resolveChain();\n            });\n            if (onEnd) request.on(\"done\", onEnd);\n            if (onError) request.on(\"error\", onError);\n            ok(request as ReadStream);\n        });\n        if (this.isTransactionActive)\n            this.queryResponsibilityChain.push(promise);\n\n        return promise;\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tablePath: string, keyValues: ObjectLiteral): Promise<any> {\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\"${key}\"`).join(\", \");\n        const values = keys.map((key, index) => \"@\" + index).join(\",\");\n        const generatedColumns = this.connection.hasMetadata(tablePath) ? this.connection.getMetadata(tablePath).generatedColumns : [];\n        const generatedColumnNames = generatedColumns.map(generatedColumn => `INSERTED.\"${generatedColumn.databaseName}\"`).join(\", \");\n        const generatedColumnSql = generatedColumns.length > 0 ? ` OUTPUT ${generatedColumnNames}` : \"\";\n        const sql = columns.length > 0\n            ? `INSERT INTO ${this.escapeTablePath(tablePath)}(${columns}) ${generatedColumnSql} VALUES (${values})`\n            : `INSERT INTO ${this.escapeTablePath(tablePath)} ${generatedColumnSql} DEFAULT VALUES `;\n\n        const parameters = this.driver.parametrizeMap(tablePath, keyValues);\n        const parametersArray = Object.keys(parameters).map(key => parameters[key]);\n        const result = await this.query(sql, parametersArray);\n        const generatedMap = generatedColumns.reduce((map, column) => {\n            const valueMap = column.createValueMap(result[0][column.databaseName]);\n            return OrmUtils.mergeDeep(map, valueMap);\n        }, {} as ObjectLiteral);\n\n        return {\n            result: result,\n            generatedMap: Object.keys(generatedMap).length > 0 ? generatedMap : undefined\n        };\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(tablePath: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        valuesMap = this.driver.parametrizeMap(tablePath, valuesMap);\n        conditions = this.driver.parametrizeMap(tablePath, conditions);\n\n        const conditionParams = Object.keys(conditions).map(key => conditions[key]);\n        const updateParams = Object.keys(valuesMap).map(key => valuesMap[key]);\n        const allParameters = updateParams.concat(conditionParams);\n\n        const updateValues = this.parametrize(valuesMap).join(\", \");\n        const conditionString = this.parametrize(conditions, updateParams.length).join(\" AND \");\n        const sql = `UPDATE ${this.escapeTablePath(tablePath)} SET ${updateValues} ${conditionString ? (\" WHERE \" + conditionString) : \"\"}`;\n\n        await this.query(sql, allParameters);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(tablePath: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        conditions = typeof conditions === \"object\" ? this.driver.parametrizeMap(tablePath, conditions) : conditions;\n        const conditionString = typeof conditions === \"string\" ? conditions : this.parametrize(conditions).join(\" AND \");\n        const parameters = conditions instanceof Object ? Object.keys(conditions).map(key => (conditions as ObjectLiteral)[key]) : maybeParameters;\n\n        const sql = `DELETE FROM ${this.escapeTablePath(tablePath)} WHERE ${conditionString}`;\n        await this.query(sql, parameters);\n    }\n\n    /**\n     * Inserts rows into the closure table.\n     */\n    async insertIntoClosureTable(tablePath: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        let sql = \"\";\n        if (hasLevel) { // todo: escape all parameters there\n            sql = `INSERT INTO ${this.escapeTablePath(tablePath)}(\"ancestor\", \"descendant\", \"level\") ` +\n                `SELECT \"ancestor\", ${newEntityId}, \"level\" + 1 FROM ${this.escapeTablePath(tablePath)} WHERE \"descendant\" = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}, 1`;\n        } else {\n            sql = `INSERT INTO ${this.escapeTablePath(tablePath)}(\"ancestor\", \"descendant\") ` +\n                `SELECT \"ancestor\", ${newEntityId} FROM ${this.escapeTablePath(tablePath)} WHERE \"descendant\" = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}`;\n        }\n        await this.query(sql);\n        if (hasLevel) {\n            const results: ObjectLiteral[] = await this.query(`SELECT MAX(level) as level FROM ${this.escapeTablePath(tablePath)} WHERE descendant = ${parentId}`);\n            return results && results[0] && results[0][\"level\"] ? parseInt(results[0][\"level\"]) + 1 : 1;\n        } else {\n            return -1;\n        }\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(tablePath: string): Promise<Table|undefined> {\n        const tables = await this.getTables([tablePath]);\n        return tables.length > 0 ? tables[0] : undefined;\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(tablePaths: string[]): Promise<Table[]> {\n\n        // if no tables given then no need to proceed\n        if (!tablePaths || !tablePaths.length)\n            return [];\n\n        const tableNames = tablePaths.map(tablePath => {\n            if (tablePath.split(\".\").length === 3) {\n                return tablePath.split(\".\")[2];\n            } else if (tablePath.split(\".\").length === 2) {\n                return tablePath.split(\".\")[1];\n            } else {\n                return tablePath;\n            }\n        });\n\n        let schemaNames: string[] = [];\n        tablePaths.filter(tablePath => tablePath.indexOf(\".\") !== -1)\n            .forEach(tablePath => {\n                if (tablePath.split(\".\").length === 3) {\n                    if (tablePath.split(\".\")[1] !== \"\")\n                        schemaNames.push(tablePath.split(\".\")[1]);\n                } else {\n                    schemaNames.push(tablePath.split(\".\")[0]);\n                }\n            });\n        schemaNames.push(this.driver.options.schema || \"SCHEMA_NAME()\");\n\n        const dbNames = tablePaths\n            .filter(tablePath => tablePath.split(\".\").length === 3)\n            .map(tablePath => tablePath.split(\".\")[0]);\n        if (this.driver.database && !dbNames.find(dbName => dbName === this.driver.database))\n            dbNames.push(this.driver.database);\n\n        // load tables, columns, indices and foreign keys\n        const schemaNamesString = schemaNames.map(name => {\n            return name === \"SCHEMA_NAME()\" ? name : \"'\" + name + \"'\";\n        }).join(\", \");\n        const tableNamesString = tableNames.map(name => \"'\" + name + \"'\").join(\", \");\n\n        const tablesSql = dbNames.map(dbName => {\n            return `SELECT * FROM ${dbName}.INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME IN (${tableNamesString}) AND TABLE_SCHEMA IN (${schemaNamesString})`;\n        }).join(\" UNION ALL \");\n\n        const columnsSql = dbNames.map(dbName => {\n            return `SELECT * FROM ${dbName}.INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA IN (${schemaNamesString})`;\n        }).join(\" UNION ALL \");\n\n        const constraintsSql = dbNames.map(dbName => {\n            return `SELECT columnUsages.*, tableConstraints.CONSTRAINT_TYPE FROM ${dbName}.INFORMATION_SCHEMA.KEY_COLUMN_USAGE columnUsages ` +\n                `LEFT JOIN ${dbName}.INFORMATION_SCHEMA.TABLE_CONSTRAINTS tableConstraints ON tableConstraints.CONSTRAINT_NAME = columnUsages.CONSTRAINT_NAME ` +\n                `WHERE columnUsages.TABLE_SCHEMA IN (${schemaNamesString}) AND tableConstraints.TABLE_SCHEMA IN (${schemaNamesString})`;\n        }).join(\" UNION ALL \");\n\n        const identityColumnsSql = dbNames.map(dbName => {\n            return  `SELECT COLUMN_NAME, TABLE_NAME FROM ${dbName}.INFORMATION_SCHEMA.COLUMNS WHERE COLUMNPROPERTY(object_id(TABLE_SCHEMA + '.' + TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1 AND TABLE_SCHEMA IN (${schemaNamesString})`;\n        }).join(\" UNION ALL \");\n\n        const indicesSql = dbNames.map(dbName => {\n            return `SELECT TABLE_NAME = t.name, INDEX_NAME = ind.name, IndexId = ind.index_id, ColumnId = ic.index_column_id, \n                    COLUMN_NAME = col.name, IS_UNIQUE = ind.is_unique, ind.*, ic.*, col.* \n                    FROM ${dbName}.sys.indexes ind \n                    INNER JOIN ${dbName}.sys.index_columns ic ON ind.object_id = ic.object_id and ind.index_id = ic.index_id\n                    INNER JOIN ${dbName}.sys.columns col ON ic.object_id = col.object_id and ic.column_id = col.column_id \n                    INNER JOIN ${dbName}.sys.tables t ON ind.object_id = t.object_id WHERE ind.is_primary_key = 0 \n                    AND ind.is_unique_constraint = 0 AND t.is_ms_shipped = 0`;\n        }).join(\" UNION ALL \");\n        const [dbTables, dbColumns, dbConstraints, dbIdentityColumns, dbIndices]: ObjectLiteral[][] = await Promise.all([\n            this.query(tablesSql),\n            this.query(columnsSql),\n            this.query(constraintsSql),\n            this.query(identityColumnsSql),\n            this.query(indicesSql),\n        ]);\n\n        // if tables were not found in the db, no need to proceed\n        if (!dbTables.length)\n            return [];\n\n        // create table schemas for loaded tables\n        return Promise.all(dbTables.map(async dbTable => {\n            const table = new Table(dbTable[\"TABLE_NAME\"]);\n\n            table.database = dbTable[\"TABLE_CATALOG\"];\n            table.schema = dbTable[\"TABLE_SCHEMA\"];\n\n            // create columns from the loaded columns\n            table.columns = dbColumns\n                .filter(dbColumn => dbColumn[\"TABLE_NAME\"] === table.name)\n                .map(dbColumn => {\n                    const isPrimary = !!dbConstraints.find(dbConstraint => {\n                        return  dbConstraint[\"TABLE_NAME\"] === table.name &&\n                                dbConstraint[\"COLUMN_NAME\"] === dbColumn[\"COLUMN_NAME\"] &&\n                                dbConstraint[\"CONSTRAINT_TYPE\"] === \"PRIMARY KEY\";\n                    });\n                    const isGenerated = !!dbIdentityColumns.find(column => {\n                        return  column[\"TABLE_NAME\"] === table.name &&\n                                column[\"COLUMN_NAME\"] === dbColumn[\"COLUMN_NAME\"];\n                    });\n                    const isUnique = !!dbConstraints.find(dbConstraint => {\n                        return  dbConstraint[\"TABLE_NAME\"] === table.name &&\n                                dbConstraint[\"COLUMN_NAME\"] === dbColumn[\"COLUMN_NAME\"] &&\n                                dbConstraint[\"CONSTRAINT_TYPE\"] === \"UNIQUE\";\n                    });\n\n                    const tableColumn = new TableColumn();\n                    tableColumn.name = dbColumn[\"COLUMN_NAME\"];\n                    tableColumn.type = dbColumn[\"DATA_TYPE\"].toLowerCase();\n\n                    tableColumn.length = dbColumn[\"CHARACTER_MAXIMUM_LENGTH\"] ? dbColumn[\"CHARACTER_MAXIMUM_LENGTH\"].toString() : \"\";\n                    if (tableColumn.length === \"-1\")\n                        tableColumn.length = \"MAX\";\n\n                    tableColumn.precision = dbColumn[\"NUMERIC_PRECISION\"];\n                    tableColumn.scale = dbColumn[\"NUMERIC_SCALE\"];\n                    tableColumn.default = dbColumn[\"COLUMN_DEFAULT\"] !== null && dbColumn[\"COLUMN_DEFAULT\"] !== undefined ? dbColumn[\"COLUMN_DEFAULT\"] : undefined;\n                    tableColumn.isNullable = dbColumn[\"IS_NULLABLE\"] === \"YES\";\n                    tableColumn.isPrimary = isPrimary;\n                    tableColumn.isGenerated = isGenerated;\n                    if (tableColumn.default === \"(newsequentialid())\") {\n                        tableColumn.isGenerated = true;\n                        tableColumn.default = undefined;                        \n                    }\n                    tableColumn.isUnique = isUnique;\n                    tableColumn.charset = dbColumn[\"CHARACTER_SET_NAME\"];\n                    tableColumn.collation = dbColumn[\"COLLATION_NAME\"];\n                    tableColumn.comment = \"\"; // todo: less priority, implement this later\n\n                    if (tableColumn.type === \"datetime2\" || tableColumn.type === \"time\" || tableColumn.type === \"datetimeoffset\") {\n                        tableColumn.precision = dbColumn[\"DATETIME_PRECISION\"];\n                    }\n\n                    return tableColumn;\n                });\n\n            // create primary key schema\n            table.primaryKeys = dbConstraints\n                .filter(dbConstraint => {\n                    return  dbConstraint[\"TABLE_NAME\"] === table.name &&\n                            dbConstraint[\"CONSTRAINT_TYPE\"] === \"PRIMARY KEY\";\n                })\n                .map(keyColumnUsage => {\n                    return new TablePrimaryKey(keyColumnUsage[\"CONSTRAINT_NAME\"], keyColumnUsage[\"COLUMN_NAME\"]);\n                });\n\n            // create foreign key schemas from the loaded indices\n            table.foreignKeys = dbConstraints\n                .filter(dbConstraint => {\n                    return  dbConstraint[\"TABLE_NAME\"] === table.name &&\n                            dbConstraint[\"CONSTRAINT_TYPE\"] === \"FOREIGN KEY\";\n                })\n                .map(dbConstraint => new TableForeignKey(dbConstraint[\"CONSTRAINT_NAME\"], [], [], \"\", \"\")); // todo: fix missing params\n\n            // create index schemas from the loaded indices\n            table.indices = dbIndices\n                .filter(dbIndex => {\n                    return  dbIndex[\"TABLE_NAME\"] === table.name &&\n                            (!table.foreignKeys.find(foreignKey => foreignKey.name === dbIndex[\"INDEX_NAME\"])) &&\n                            (!table.primaryKeys.find(primaryKey => primaryKey.name === dbIndex[\"INDEX_NAME\"]));\n                })\n                .map(dbIndex => dbIndex[\"INDEX_NAME\"])\n                .filter((value, index, self) => self.indexOf(value) === index) // unqiue\n                .map(dbIndexName => {\n                    const columnNames = dbIndices\n                        .filter(dbIndex => dbIndex[\"TABLE_NAME\"] === table.name && dbIndex[\"INDEX_NAME\"] === dbIndexName)\n                        .map(dbIndex => dbIndex[\"COLUMN_NAME\"]);\n\n                    const isUnique = !!dbIndices.find(dbIndex => dbIndex[\"TABLE_NAME\"] === table.name && dbIndex[\"INDEX_NAME\"] === dbIndexName && dbIndex[\"IS_UNIQUE\"] === true);\n                    return new TableIndex(dbTable[\"TABLE_NAME\"], dbIndexName, columnNames,  isUnique);\n                });\n\n            return table;\n        }));\n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        const result = await this.query(`SELECT DB_ID('${database}') as db_id`);\n        const dbId = result[0][\"db_id\"];\n        return !!dbId;\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(tablePath: string): Promise<boolean> {\n        const parsedTablePath = this.parseTablePath(tablePath);\n        const sql = `SELECT * FROM ${parsedTablePath.database}.INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = '${parsedTablePath.tableName}' AND TABLE_SCHEMA = ${parsedTablePath.schema === \"SCHEMA_NAME()\" ? parsedTablePath.schema : `'${parsedTablePath.schema}'`}`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        return this.query(`IF DB_ID('${database}') IS NULL CREATE DATABASE ${database}`);\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemaPaths: string[]): Promise<void[]> {\n        if (this.driver.options.schema)\n            schemaPaths.push(this.driver.options.schema);\n\n        return PromiseUtils.runInSequence(schemaPaths, async path => {\n            if (path.indexOf(\".\") === -1) {\n                const query = `IF SCHEMA_ID('${path}') IS NULL BEGIN EXEC sp_executesql N'CREATE SCHEMA ${path}' END`;\n                return this.query(query);\n            } else {\n                const dbName = path.split(\".\")[0];\n                const schema = path.split(\".\")[1];\n                const currentDBQuery = await this.query(`SELECT DB_NAME() AS db_name`);\n                const currentDB = currentDBQuery[0][\"db_name\"];\n                await this.query(`USE ${dbName}`);\n                const query = `IF SCHEMA_ID('${schema}') IS NULL BEGIN EXEC sp_executesql N'CREATE SCHEMA ${schema}' END`;\n                await this.query(query);\n                return this.query(`USE ${currentDB}`);\n            }\n        });\n    }\n\n    /**\n     * Creates a new table from the given table metadata and column metadatas.\n     */\n    async createTable(table: Table): Promise<void> {\n        const columnDefinitions = table.columns.map(column => this.buildCreateColumnSql(table.name, column, false, true)).join(\", \");\n        let sql = `CREATE TABLE ${this.escapeTablePath(table)} (${columnDefinitions}`;\n        sql += table.columns\n            .filter(column => column.isUnique)\n            .map(column => {\n                let constraintName = `${table.name}_${column.name}`;\n                const schema = table.schema || this.driver.options.schema;\n                if (schema)\n                    constraintName = `${schema}_` + constraintName;\n\n                return `, CONSTRAINT \"uk_${constraintName}\" UNIQUE (\"${column.name}\")`;\n            }).join(\" \");\n        const primaryKeyColumns = table.columns.filter(column => column.isPrimary);\n        if (primaryKeyColumns.length > 0)\n            sql += `, PRIMARY KEY(${primaryKeyColumns.map(column => `\"${column.name}\"`).join(\", \")})`;\n        sql += `)`;\n        await this.query(sql);\n    }\n\n    /**\n     * Drops the table.\n     */\n    async dropTable(tablePath: string): Promise<void> {\n        await this.query(`DROP TABLE ${this.escapeTablePath(tablePath)}`);\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(tablePath: string, columnName: string): Promise<boolean> {\n        const parsedTablePath = this.parseTablePath(tablePath);\n        const sql = `SELECT * FROM ${parsedTablePath.database}.INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = '${parsedTablePath.tableName}' AND COLUMN_NAME = '${columnName}' AND TABLE_SCHEMA = ${parsedTablePath.schema === \"SCHEMA_NAME()\" ? parsedTablePath.schema : `'${parsedTablePath.schema}'`}`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrPath: Table|string, column: TableColumn): Promise<void> {\n        const tableName = tableOrPath instanceof Table ? tableOrPath.name : this.parseTablePath(tableOrPath).tableName;\n        const sql = `ALTER TABLE ${this.escapeTablePath(tableOrPath)} ADD ${this.buildCreateColumnSql(tableName, column, false, true)}`;\n        return this.query(sql);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        const queries = columns.map(column => this.addColumn(tableOrName as any, column));\n        await Promise.all(queries);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        let newColumn: TableColumn|undefined = undefined;\n        if (newTableColumnOrName instanceof TableColumn) {\n            newColumn = newTableColumnOrName;\n        } else {\n            newColumn = oldColumn.clone();\n            newColumn.name = newTableColumnOrName;\n        }\n\n        return this.changeColumn(table, oldColumn, newColumn);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        // to update an identy column we have to drop column and recreate it again\n        if (newColumn.isGenerated !== oldColumn.isGenerated) {\n            await this.query(`ALTER TABLE ${this.escapeTablePath(tableOrName)} DROP COLUMN \"${newColumn.name}\"`);\n            await this.query(`ALTER TABLE ${this.escapeTablePath(tableOrName)} ADD ${this.buildCreateColumnSql(table.name, newColumn, false, false)}`);\n        }\n\n        const sql = `ALTER TABLE ${this.escapeTablePath(tableOrName)} ALTER COLUMN ${this.buildCreateColumnSql(table.name, newColumn, true, false)}`; // todo: CHANGE OR MODIFY COLUMN ????\n        await this.query(sql);\n\n        if (newColumn.isUnique !== oldColumn.isUnique) {\n            if (newColumn.isUnique === true) {\n                await this.query(`ALTER TABLE ${this.escapeTablePath(tableOrName)} ADD CONSTRAINT \"uk_${table.name}_${newColumn.name}\" UNIQUE (\"${newColumn.name}\")`);\n\n            } else if (newColumn.isUnique === false) {\n                await this.query(`ALTER TABLE ${this.escapeTablePath(tableOrName)} DROP CONSTRAINT \"uk_${table.name}_${newColumn.name}\"`);\n\n            }\n        }\n        if (newColumn.default !== oldColumn.default) {\n            if (newColumn.default !== null && newColumn.default !== undefined) {\n                await this.query(`ALTER TABLE ${this.escapeTablePath(tableOrName)} DROP CONSTRAINT \"df_${table.name}_${newColumn.name}\"`);\n                await this.query(`ALTER TABLE ${this.escapeTablePath(tableOrName)} ADD CONSTRAINT \"df_${table.name}_${newColumn.name}\" DEFAULT ${newColumn.default} FOR \"${newColumn.name}\"`);\n\n            } else if (oldColumn.default !== null && oldColumn.default !== undefined) {\n                await this.query(`ALTER TABLE ${this.escapeTablePath(tableOrName)} DROP CONSTRAINT \"df_${table.name}_${newColumn.name}\"`);\n\n            }\n        }\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        const updatePromises = changedColumns.map(async changedColumn => {\n            return this.changeColumn(table, changedColumn.oldColumn, changedColumn.newColumn);\n        });\n\n        await Promise.all(updatePromises);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        if (column.default)\n            await this.query(`ALTER TABLE ${this.escapeTablePath(table)} DROP CONSTRAINT \"df_${table.name}_${column.name}\"`);\n        await this.query(`ALTER TABLE ${this.escapeTablePath(table)} DROP COLUMN \"${column.name}\"`);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        const dropPromises = columns.map(column => this.dropColumn(table, column));\n        await Promise.all(dropPromises);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(table: Table): Promise<void> {\n        const schema = table.schema || \"SCHEMA_NAME()\";\n        const database = table.database || this.driver.database;\n        const oldPrimaryKeySql = `SELECT columnUsages.*, tableConstraints.CONSTRAINT_TYPE FROM ${database}.INFORMATION_SCHEMA.KEY_COLUMN_USAGE columnUsages\nLEFT JOIN ${database}.INFORMATION_SCHEMA.TABLE_CONSTRAINTS tableConstraints ON tableConstraints.CONSTRAINT_NAME = columnUsages.CONSTRAINT_NAME AND tableConstraints.CONSTRAINT_TYPE = 'PRIMARY KEY'\nWHERE tableConstraints.TABLE_CATALOG = '${database}' AND columnUsages.TABLE_SCHEMA = '${schema}' AND tableConstraints.TABLE_SCHEMA = '${schema}'`;\n        const oldPrimaryKey = await this.query(oldPrimaryKeySql);\n        if (oldPrimaryKey.length > 0)\n            await this.query(`ALTER TABLE ${this.escapeTablePath(table)} DROP CONSTRAINT \"${oldPrimaryKey[0][\"CONSTRAINT_NAME\"]}\"`);\n\n        const primaryColumnNames = table.primaryKeys.map(primaryKey => `\"` + primaryKey.columnName + `\"`);\n        if (primaryColumnNames.length > 0)\n            await this.query(`ALTER TABLE ${this.escapeTablePath(table)} ADD PRIMARY KEY (${primaryColumnNames.join(\", \")})`);\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrPath: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const columnNames = foreignKey.columnNames.map(column => `\"` + column + `\"`).join(\", \");\n        const referencedColumnNames = foreignKey.referencedColumnNames.map(column => `\"` + column + `\"`).join(\",\");\n        let sql = `ALTER TABLE ${this.escapeTablePath(tableOrPath)} ADD CONSTRAINT \"${foreignKey.name}\" ` +\n            `FOREIGN KEY (${columnNames}) ` +\n            `REFERENCES ${this.escapeTablePath(foreignKey.referencedTablePath)}(${referencedColumnNames})`;\n        if (foreignKey.onDelete) sql += \" ON DELETE \" + foreignKey.onDelete;\n        return this.query(sql);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.createForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrPath: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const sql = `ALTER TABLE ${this.escapeTablePath(tableOrPath)} DROP CONSTRAINT \"${foreignKey.name}\"`;\n        return this.query(sql);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.dropForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(tablePath: Table|string, index: TableIndex): Promise<void> {\n        const columns = index.columnNames.map(columnName => `\"${columnName}\"`).join(\", \");\n        const sql = `CREATE ${index.isUnique ? \"UNIQUE \" : \"\"}INDEX \"${index.name}\" ON ${this.escapeTablePath(tablePath)}(${columns})`;\n        await this.query(sql);\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(tableSchemeOrName: Table|string, indexName: string): Promise<void> {\n        const sql = `DROP INDEX \"${indexName}\" ON ${this.escapeTablePath(tableSchemeOrName)}`;\n        await this.query(sql);\n    }\n\n    /**\n     * Truncates table.\n     */\n    async truncate(tablePath: string): Promise<void> {\n        await this.query(`TRUNCATE TABLE ${this.escapeTablePath(tablePath)}`);\n    }\n\n    /**\n     * Removes all tables from the currently connected database.\n     */\n    async clearDatabase(schemas?: string[], database?: string): Promise<void> {\n        const isDatabaseExist = await this.hasDatabase(database!);\n        if (!isDatabaseExist)\n            return Promise.resolve();\n\n        if (!schemas)\n            schemas = [];\n        schemas.push(this.driver.options.schema || \"SCHEMA_NAME()\");\n        const schemaNamesString = schemas.map(name => {\n            return name === \"SCHEMA_NAME()\" ? name : \"'\" + name + \"'\";\n        }).join(\", \");\n\n        await this.startTransaction();\n        try {\n\n            let allTablesSql = `SELECT * FROM ${database}.INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA IN (${schemaNamesString})`;\n            const allTablesResults: ObjectLiteral[] = await this.query(allTablesSql);\n            await Promise.all(allTablesResults.map(async tablesResult => {\n                const dropForeignKeySql = `SELECT 'ALTER TABLE \"${database}\".\"' + OBJECT_SCHEMA_NAME(fk.parent_object_id, DB_ID('${database}')) + '\".\"' + OBJECT_NAME(fk.parent_object_id, DB_ID('${database}')) + '\" DROP CONSTRAINT \"' + fk.name + '\"' as query FROM ${database}.sys.foreign_keys AS fk WHERE fk.referenced_object_id = object_id('\"${database}\".\"${tablesResult[\"TABLE_SCHEMA\"]}\".\"${tablesResult[\"TABLE_NAME\"]}\"')`;\n                const dropFkQueries: ObjectLiteral[] = await this.query(dropForeignKeySql);\n                return Promise.all(dropFkQueries.map(result => result[\"query\"]).map(dropQuery => {\n                    return this.query(dropQuery);\n                }));\n            }));\n            await Promise.all(allTablesResults.map(tablesResult => {\n                const dropTableSql = `DROP TABLE \"${tablesResult[\"TABLE_CATALOG\"]}\".\"${tablesResult[\"TABLE_SCHEMA\"]}\".\"${tablesResult[\"TABLE_NAME\"]}\"`;\n                return this.query(dropTableSql);\n            }));\n\n            await this.commitTransaction();\n\n        } catch (error) {\n            try { // we throw original error even if rollback thrown an error\n                await this.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw error;\n        }\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        this.sqlMemoryMode = true;\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        this.sqlsInMemory = [];\n        this.sqlMemoryMode = false;\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql(): (string|{ up: string, down: string })[] {\n        return this.sqlsInMemory;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Escapes given table path.\n     */\n    protected escapeTablePath(tableOrPath: Table|string, disableEscape?: boolean): string {\n        let tablePath;\n        if (tableOrPath instanceof Table) {\n            const schema = tableOrPath.schema || this.driver.options.schema;\n            if (schema) {\n                tablePath = `${schema}.${tableOrPath.name}`;\n                if (tableOrPath.database)\n                    tablePath = `${tableOrPath.database}.${tablePath}`;\n            } else {\n                tablePath = tableOrPath.name;\n                if (tableOrPath.database)\n                    tablePath = `${tableOrPath.database}..${tablePath}`;\n            }\n        } else {\n            tablePath = tableOrPath.indexOf(\".\") === -1 && this.driver.options.schema ? this.driver.options.schema + \".\" + tableOrPath : tableOrPath;\n        }\n\n        return tablePath.split(\".\").map(i => {\n            // this condition need because when custom database name was specified and schema name was not, we got `dbName..tableName` string, and doesn't need to escape middle empty string\n            if (i === \"\")\n                return i;\n            return disableEscape ? i : `\"${i}\"`;\n        }).join(\".\");\n    }\n\n    protected parseTablePath(target: Table|string): any {\n        const tableName = target instanceof Table ? target.name : target;\n        if (tableName.split(\".\").length === 3) {\n            return {\n                database:  tableName.split(\".\")[0],\n                schema:  tableName.split(\".\")[1] === \"\" ? \"SCHEMA_NAME()\" : tableName.split(\".\")[1],\n                tableName: tableName.split(\".\")[2]\n            };\n        } else if (tableName.split(\".\").length === 2) {\n            return {\n                database:  this.driver.database,\n                schema: tableName.split(\".\")[0],\n                tableName: tableName.split(\".\")[1]\n            };\n        } else {\n            return {\n                database:  this.driver.database,\n                schema: this.driver.options.schema ? this.driver.options.schema : \"SCHEMA_NAME()\",\n                tableName: tableName\n            };\n        }\n    }\n    /**\n     * Parametrizes given object of values. Used to create column=value queries.\n     */\n    protected parametrize(objectLiteral: ObjectLiteral, startFrom: number = 0): string[] {\n        return Object.keys(objectLiteral).map((key, index) => {\n            return `\"${key}\"` + \"=@\" + (startFrom + index);\n        });\n    }\n\n    /**\n     * Builds a query for create column.\n     */\n    protected buildCreateColumnSql(tableName: string, column: TableColumn, skipIdentity: boolean, createDefault: boolean) {\n        let c = `\"${column.name}\" ${this.connection.driver.createFullType(column)}`;\n        if (column.collation)\n            c += \" COLLATE \" + column.collation;\n        if (column.isNullable !== true)\n            c += \" NOT NULL\";\n        if (column.isGenerated === true && column.generationStrategy === \"increment\" && !skipIdentity) // don't use skipPrimary here since updates can update already exist primary without auto inc.\n            c += \" IDENTITY(1,1)\";\n        // if (column.isPrimary === true && !skipPrimary)\n        //     c += \" PRIMARY KEY\";\n        if (column.comment)\n            c += \" COMMENT '\" + column.comment + \"'\";\n        if (createDefault) {\n            if (column.default !== undefined && column.default !== null) {\n                c += ` CONSTRAINT \"df_${tableName}_${column.name}\" DEFAULT ${column.default}`;\n            }\n        }\n        if (column.isGenerated && column.generationStrategy === \"uuid\" && !column.default)\n            c += \" DEFAULT NEWSEQUENTIALID()\";\n        return c;\n    }\n\n\n}","import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverUtils} from \"../DriverUtils\";\nimport {SqlServerQueryRunner} from \"./SqlServerQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {SqlServerConnectionOptions} from \"./SqlServerConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {MssqlParameter} from \"./MssqlParameter\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {SqlServerConnectionCredentialsOptions} from \"./SqlServerConnectionCredentialsOptions\";\n\n/**\n * Organizes communication with SQL Server DBMS.\n */\nexport class SqlServerDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * SQL Server library.\n     */\n    mssql: any;\n\n    /**\n     * Pool for master database.\n     */\n    master: any;\n\n    /**\n     * Pool for slave databases.\n     * Used in replication.\n     */\n    slaves: any[] = [];\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: SqlServerConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://docs.microsoft.com/en-us/sql/t-sql/data-types/data-types-transact-sql\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"bigint\",\n        \"bit\",\n        \"decimal\",\n        \"int\",\n        \"money\",\n        \"numeric\",\n        \"smallint\",\n        \"smallmoney\",\n        \"tinyint\",\n        \"float\",\n        \"real\",\n        \"date\",\n        \"datetime2\",\n        \"datetime\",\n        \"datetimeoffset\",\n        \"smalldatetime\",\n        \"time\",\n        \"char\",\n        \"text\",\n        \"varchar\",\n        \"nchar\",\n        \"ntext\",\n        \"nvarchar\",\n        \"binary\",\n        \"image\",\n        \"varbinary\",\n        \"cursor\",\n        \"hierarchyid\",\n        \"sql_variant\",\n        \"table\",\n        \"timestamp\",\n        \"uniqueidentifier\",\n        \"xml\"        \n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"char\",\n        \"varchar\",\n        \"nchar\",\n        \"nvarchar\",\n        \"binary\",\n        \"varbinary\"\n    ];\n    \n    /**\n     * Orm has special columns and we need to know what database column types should be for those types.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime2\",\n        createDateDefault: \"getdate()\",\n        updateDate: \"datetime2\",\n        updateDateDefault: \"getdate()\",\n        version: \"int\",\n        treeLevel: \"int\",\n        migrationName: \"varchar\",\n        migrationTimestamp: \"bigint\",\n        cacheId: \"int\",\n        cacheIdentifier: \"nvarchar\",\n        cacheTime: \"bigint\",\n        cacheDuration: \"int\",\n        cacheQuery: \"nvarchar(MAX)\" as any,\n        cacheResult: \"nvarchar(MAX)\" as any,\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults = {\n        varchar: { length: 255 },\n        nvarchar: { length: 255 }\n    };\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as SqlServerConnectionOptions;\n        this.isReplicated = this.options.replication ? true : false;\n\n        // load mssql package\n        this.loadDependencies();\n\n        // Object.assign(connection.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        // validate options to make sure everything is set\n        // if (!this.options.host)\n            // throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.database)\n        //     throw new DriverOptionNotSetError(\"database\");\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     * Based on pooling options, it can either create connection immediately,\n     * either create a pool and create connection when needed.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.slaves = await Promise.all(this.options.replication.slaves.map(slave => {\n                return this.createPool(this.options, slave);\n            }));\n            this.master = await this.createPool(this.options, this.options.replication.master);\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.master = await this.createPool(this.options, this.options);\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.master)\n            return Promise.reject(new ConnectionIsNotSetError(\"mssql\"));\n\n        this.master.close();\n        this.slaves.forEach(slave => slave.close());\n        this.master = undefined;\n        this.slaves = [];\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new SqlServerQueryRunner(this, mode);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Array) {\n                return value.map((v: any) => {\n                    escapedParameters.push(v);\n                    return \"@\" + (escapedParameters.length - 1);\n                }).join(\", \");\n            } else if (value instanceof Function) {\n                return value();\n\n            } else {\n                escapedParameters.push(value);\n                return \"@\" + (escapedParameters.length - 1);\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return `\"${columnName}\"`;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDate(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedTimeToDate(value);\n\n        } else if (columnMetadata.type === \"datetime\"\n            || columnMetadata.type === \"smalldatetime\"\n            || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToDate(value, true, false);\n\n        } else if (columnMetadata.type === \"datetime2\"\n            || columnMetadata.type === \"datetimeoffset\") {\n            return DateUtils.mixedDateToDate(value, true, true);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\"\n            || columnMetadata.type === Date\n            || columnMetadata.type === \"datetime2\"\n            || columnMetadata.type === \"smalldatetime\"\n            || columnMetadata.type === \"datetimeoffset\") {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number }): string {\n        if (column.type === Number) {\n            return \"int\";\n\n        } else if (column.type === String) {\n            return \"nvarchar\";\n\n        } else if (column.type === Date) {\n            return \"datetime\";\n\n        } else if (column.type === Boolean) {\n            return \"bit\";\n\n        } else if ((column.type as any) === Buffer) {\n            return \"binary\";\n\n        } else if (column.type === \"uuid\") {\n            return \"uniqueidentifier\";\n\n        } else if (column.type === \"simple-array\") {\n            return \"ntext\";\n\n        } else if (column.type === \"simple-json\") {\n            return \"ntext\";\n\n        } else if (column.type === \"integer\") {\n            return \"int\";\n\n        } else if (column.type === \"dec\") {\n            return \"decimal\";\n\n        } else if (column.type === \"float\" && (column.precision && (column.precision! >= 1 && column.precision! < 25))) {\n            return \"real\";\n\n        } else if (column.type === \"double precision\") {\n            return \"float\";\n\n        } else {\n            return column.type as string || \"\";\n        }\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"1\" : \"0\";\n\n        } else if (typeof column.default === \"function\") {\n            return \"(\" + column.default() + \")\";\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique;\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n        \n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();       \n\n        return \"\";\n    }\n\n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision && column.type !== \"real\") {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return Promise.resolve(this.master);\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.slaves.length)\n            return this.obtainMasterConnection();\n\n        const random = Math.floor(Math.random() * this.slaves.length);\n        return Promise.resolve(this.slaves[random]);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Sql server's parameters needs to be wrapped into special object with type information about this value.\n     * This method wraps given value into MssqlParameter based on its column definition.\n     */\n    parametrizeValue(column: ColumnMetadata, value: any) {\n\n        // if its already MssqlParameter then simply return it\n        if (value instanceof MssqlParameter)\n            return value;\n\n        const normalizedType = this.normalizeType({ type: column.type });\n        if (column.length) {\n            return new MssqlParameter(value, normalizedType as any, column.length as any);\n\n        } else if (column.precision && column.scale) {\n            return new MssqlParameter(value, normalizedType as any, column.precision, column.scale);\n\n        } else if (column.precision) {\n            return new MssqlParameter(value, normalizedType as any, column.precision);\n\n        } else if (column.scale) {\n            return new MssqlParameter(value, normalizedType as any, column.scale);\n        }\n\n        return new MssqlParameter(value, normalizedType as any);\n    }\n\n    /**\n     * Sql server's parameters needs to be wrapped into special object with type information about this value.\n     * This method wraps all values of the given object into MssqlParameter based on their column definitions in the given table.\n     */\n    parametrizeMap(tablePath: string, map: ObjectLiteral): ObjectLiteral {\n\n        // find metadata for the given table\n        if (!this.connection.hasMetadata(tablePath)) // if no metadata found then we can't proceed because we don't have columns and their types\n            return map;\n        const metadata = this.connection.getMetadata(tablePath);\n\n        return Object.keys(map).reduce((newMap, key) => {\n            const value = map[key];\n\n            // find column metadata\n            const column = metadata.findColumnWithDatabaseName(key);\n            if (!column) // if we didn't find a column then we can't proceed because we don't have a column type\n                return value;\n\n            newMap[key] = this.parametrizeValue(column, value);\n            return newMap;\n        }, {} as ObjectLiteral);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        try {\n            this.mssql = PlatformTools.load(\"mssql\");\n\n        } catch (e) { // todo: better error for browser env\n            throw new DriverPackageNotInstalledError(\"SQL Server\", \"mssql\");\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected createPool(options: SqlServerConnectionOptions, credentials: SqlServerConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        const connectionOptions = Object.assign({}, {\n            connectionTimeout: this.options.connectionTimeout,\n            requestTimeout: this.options.requestTimeout,\n            stream: this.options.stream,\n            pool: this.options.pool,\n            options: this.options.options,\n        }, {\n            server: credentials.host,\n            user: credentials.username,\n            password: credentials.password,\n            database: credentials.database,\n            port: credentials.port,\n            domain: credentials.domain,\n        }, options.extra || {});\n\n        // set default useUTC option if it hasn't been set\n        if (!connectionOptions.options) connectionOptions.options = { useUTC: false };\n        else if (!connectionOptions.options.useUTC) connectionOptions.options.useUTC = false;\n\n        // pooling is enabled either when its set explicitly to true,\n        // either when its not defined at all (e.g. enabled by default)\n        return new Promise<void>((ok, fail) => {\n            const connection = new this.mssql.ConnectionPool(connectionOptions).connect((err: any) => {\n                if (err) return fail(err);\n                ok(connection);\n            });\n        });\n    }\n\n}\n","import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TransactionAlreadyStartedError} from \"../../error/TransactionAlreadyStartedError\";\nimport {TransactionNotStartedError} from \"../../error/TransactionNotStartedError\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TablePrimaryKey} from \"../../schema-builder/schema/TablePrimaryKey\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {PostgresDriver} from \"./PostgresDriver\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {EntityManager} from \"../../entity-manager/EntityManager\";\nimport {InsertResult} from \"../InsertResult\";\nimport {QueryFailedError} from \"../../error/QueryFailedError\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\n\n/**\n * Runs queries on a single postgres database connection.\n */\nexport class PostgresQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Database driver used by connection.\n     */\n    driver: PostgresDriver;\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: EntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is in progress.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    protected databaseConnection: any;\n\n    /**\n     * Promise used to obtain a database connection for a first time.\n     */\n    protected databaseConnectionPromise: Promise<any>;\n\n    /**\n     * Special callback provided by a driver used to release a created connection.\n     */\n    protected releaseCallback: Function;\n\n    /**\n     * Indicates if special query runner mode in which sql queries won't be executed is enabled.\n     */\n    protected sqlMemoryMode: boolean = false;\n\n    /**\n     * Sql-s stored if \"sql in memory\" mode is enabled.\n     */\n    protected sqlsInMemory: (string|{ up: string, down: string })[] = [];\n\n    /**\n     * Mode in which query runner executes.\n     * Used for replication.\n     * If replication is not setup its value is ignored.\n     */\n    protected mode: \"master\"|\"slave\";\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: PostgresDriver, mode: \"master\"|\"slave\" = \"master\") {\n        this.driver = driver;\n        this.connection = driver.connection;\n        this.mode = mode;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates/uses database connection from the connection pool to perform further operations.\n     * Returns obtained database connection.\n     */\n    connect(): Promise<any> {\n        if (this.databaseConnection)\n            return Promise.resolve(this.databaseConnection);\n\n        if (this.databaseConnectionPromise)\n            return this.databaseConnectionPromise;\n\n        if (this.mode === \"slave\" && this.driver.isReplicated)  {\n            this.databaseConnectionPromise = this.driver.obtainSlaveConnection().then(([ connection, release]: any[]) => {\n                this.driver.connectedQueryRunners.push(this);\n                this.databaseConnection = connection;\n                this.releaseCallback = release;\n                return this.databaseConnection;\n            });\n\n        } else { // master\n            this.databaseConnectionPromise = this.driver.obtainMasterConnection().then(([connection, release]: any[]) => {\n                this.driver.connectedQueryRunners.push(this);\n                this.databaseConnection = connection;\n                this.releaseCallback = release;\n                return this.databaseConnection;\n            });\n        }\n\n        return this.databaseConnectionPromise;\n    }\n\n    /**\n     * Releases used database connection.\n     * You cannot use query runner methods once its released.\n     */\n    release(): Promise<void> {\n        this.isReleased = true;\n        if (this.releaseCallback)\n            this.releaseCallback();\n\n        const index = this.driver.connectedQueryRunners.indexOf(this);\n        if (index !== -1) this.driver.connectedQueryRunners.splice(index);\n\n        return Promise.resolve();\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        if (this.isTransactionActive)\n            throw new TransactionAlreadyStartedError();\n\n        this.isTransactionActive = true;\n        await this.query(\"START TRANSACTION\");\n    }\n\n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async commitTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"COMMIT\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Rollbacks transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async rollbackTransaction(): Promise<void> {\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        await this.query(\"ROLLBACK\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        // console.log(\"query: \", query);\n        // console.log(\"parameters: \", parameters);\n        return new Promise<any[]>(async (ok, fail) => {\n            const databaseConnection = await this.connect();\n            this.driver.connection.logger.logQuery(query, parameters, this);\n            const queryStartTime = +new Date();\n\n            databaseConnection.query(query, parameters, (err: any, result: any) => {\n\n                // log slow queries if maxQueryExecution time is set\n                const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                const queryEndTime = +new Date();\n                const queryExecutionTime = queryEndTime - queryStartTime;\n                if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                    this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                if (err) {\n                    this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                    fail(new QueryFailedError(query, parameters, err));\n                } else {\n                    ok(result.rows);\n                }\n            });\n        });\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        const QueryStream = this.driver.loadStreamDependency();\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise(async (ok, fail) => {\n            try {\n                const databaseConnection = await this.connect();\n                this.driver.connection.logger.logQuery(query, parameters, this);\n                const stream = databaseConnection.query(new QueryStream(query, parameters));\n                if (onEnd) stream.on(\"end\", onEnd);\n                if (onError) stream.on(\"error\", onError);\n                ok(stream);\n\n            } catch (err) {\n                fail(err);\n            }\n        });\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tablePath: string, keyValues: ObjectLiteral): Promise<InsertResult> {\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\"${key}\"`).join(\", \");\n        const values = keys.map((key, index) => \"$\" + (index + 1)).join(\",\");\n        const generatedColumns = this.connection.hasMetadata(tablePath) ? this.connection.getMetadata(tablePath).generatedColumns : [];\n        const generatedColumnNames = generatedColumns.map(generatedColumn => `\"${generatedColumn.databaseName}\"`).join(\", \");\n        const generatedColumnSql = generatedColumns.length > 0 ? ` RETURNING ${generatedColumnNames}` : \"\";\n\n        const sql = columns.length > 0\n            ? `INSERT INTO ${this.escapeTablePath(tablePath)}(${columns}) VALUES (${values}) ${generatedColumnSql}`\n            : `INSERT INTO ${this.escapeTablePath(tablePath)} DEFAULT VALUES ${generatedColumnSql}`;\n\n        const parameters = keys.map(key => keyValues[key]);\n        const result: ObjectLiteral[] = await this.query(sql, parameters);\n        const generatedMap = generatedColumns.reduce((map, column) => {\n            const valueMap = column.createValueMap(result[0][column.databaseName]);\n            return OrmUtils.mergeDeep(map, valueMap);\n        }, {} as ObjectLiteral);\n\n        return {\n            result: result,\n            generatedMap: Object.keys(generatedMap).length > 0 ? generatedMap : undefined\n        };\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(tablePath: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        const updateValues = this.parametrize(valuesMap).join(\", \");\n        const conditionString = this.parametrize(conditions, Object.keys(valuesMap).length).join(\" AND \");\n        const query = `UPDATE ${this.escapeTablePath(tablePath)} SET ${updateValues}${conditionString ? (\" WHERE \" + conditionString) : \"\"}`;\n        const updateParams = Object.keys(valuesMap).map(key => valuesMap[key]);\n        const conditionParams = Object.keys(conditions).map(key => conditions[key]);\n        const allParameters = updateParams.concat(conditionParams);\n        await this.query(query, allParameters);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(tablePath: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        const conditionString = typeof conditions === \"string\" ? conditions : this.parametrize(conditions).join(\" AND \");\n        const parameters = conditions instanceof Object ? Object.keys(conditions).map(key => (conditions as ObjectLiteral)[key]) : maybeParameters;\n\n        const sql = `DELETE FROM ${this.escapeTablePath(tablePath)} WHERE ${conditionString}`;\n        await this.query(sql, parameters);\n    }\n\n    /**\n     * Inserts rows into closure table.\n     *\n     * todo: rethink its place\n     */\n    async insertIntoClosureTable(tablePath: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        let sql = \"\";\n        if (hasLevel) {\n            sql = `INSERT INTO ${this.escapeTablePath(tablePath)}(\"ancestor\", \"descendant\", \"level\") ` +\n                `SELECT \"ancestor\", ${newEntityId}, \"level\" + 1 FROM ${this.escapeTablePath(tablePath)} WHERE \"descendant\" = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}, 1`;\n        } else {\n            sql = `INSERT INTO ${this.escapeTablePath(tablePath)}(\"ancestor\", \"descendant\") ` +\n                `SELECT \"ancestor\", ${newEntityId} FROM ${this.escapeTablePath(tablePath)} WHERE \"descendant\" = ${parentId} ` +\n                `UNION ALL SELECT ${newEntityId}, ${newEntityId}`;\n        }\n        await this.query(sql);\n        if (hasLevel) {\n            const results: ObjectLiteral[] = await this.query(`SELECT MAX(level) as level FROM ${this.escapeTablePath(tablePath)} WHERE descendant = ${parentId}`);\n            return results && results[0] && results[0][\"level\"] ? parseInt(results[0][\"level\"]) + 1 : 1;\n        } else {\n            return -1;\n        }\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(tablePath: string): Promise<Table|undefined> {\n        const tables = await this.getTables([tablePath]);\n        return tables.length > 0 ? tables[0] : undefined;\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(tablePaths: string[]): Promise<Table[]> {\n        // if no tables given then no need to proceed\n        if (!tablePaths || !tablePaths.length)\n            return [];\n\n        const tableNames = tablePaths.map(tablePath => {\n            return tablePath.indexOf(\".\") === -1 ? tablePath : tablePath.split(\".\")[1];\n        });\n\n        const currentSchemaQuery = await this.query(`SELECT * FROM current_schema()`);\n        const currentSchema = currentSchemaQuery[0][\"current_schema\"];\n        const schemaNames = tablePaths\n            .filter(tablePath => tablePath.indexOf(\".\") !== -1)\n            .map(tablePath => tablePath.split(\".\")[0]);\n        schemaNames.push(this.driver.options.schema || currentSchema);\n\n        // load tables, columns, indices and foreign keys\n        const tableNamesString = tableNames.map(name => `'${name}'`).join(\", \");\n        const schemaNamesString = schemaNames.map(name => `'${name}'`).join(\", \");\n        const tablesCondition = tablePaths.map(tablePath => {\n            let [schemaName, tableName] = tablePath.split(\".\");\n            if (!tableName) {\n                tableName = schemaName;\n                schemaName = this.driver.options.schema || currentSchema;\n            }\n            return `table_schema = '${schemaName}' AND table_name = '${tableName}'`;\n        }).join(\" OR \");\n        const tablesSql      = `SELECT * FROM information_schema.tables WHERE ` + tablesCondition;\n        const columnsSql     = `SELECT * FROM information_schema.columns WHERE table_schema IN (${schemaNamesString})`;\n        const indicesSql     = `SELECT t.relname AS table_name, i.relname AS index_name, a.attname AS column_name, ix.indisunique AS is_unique, a.attnum, ix.indkey FROM pg_class t, pg_class i, pg_index ix, pg_attribute a, pg_namespace ns\nWHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid\nAND a.attnum = ANY(ix.indkey) AND t.relkind = 'r' AND t.relname IN (${tableNamesString}) AND t.relnamespace = ns.OID AND ns.nspname IN (${schemaNamesString}) ORDER BY t.relname, i.relname`;\n        const foreignKeysSql = `SELECT table_name, constraint_name FROM information_schema.table_constraints WHERE table_schema IN (${schemaNamesString}) AND constraint_type = 'FOREIGN KEY'`;\n        const uniqueKeysSql  = `SELECT * FROM information_schema.table_constraints WHERE table_schema IN (${schemaNamesString}) AND constraint_type = 'UNIQUE'`;\n        const primaryKeysSql = `SELECT c.column_name, tc.table_name, tc.constraint_name FROM information_schema.table_constraints tc\nJOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_name)\nJOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name\nwhere constraint_type = 'PRIMARY KEY' AND c.table_schema IN (${schemaNamesString})`;\n        const [dbTables, dbColumns, dbIndices, dbForeignKeys, dbUniqueKeys, primaryKeys]: ObjectLiteral[][] = await Promise.all([\n            this.query(tablesSql),\n            this.query(columnsSql),\n            this.query(indicesSql),\n            this.query(foreignKeysSql),\n            this.query(uniqueKeysSql),\n            this.query(primaryKeysSql),\n        ]);\n\n        // if tables were not found in the db, no need to proceed\n        if (!dbTables.length)\n            return [];\n\n        // create tables for loaded tables\n        return dbTables.map(dbTable => {\n            const table = new Table(dbTable[\"table_name\"]);\n\n            table.database = dbTable[\"table_catalog\"];\n            table.schema = dbTable[\"table_schema\"];\n\n            // create columns from the loaded columns\n            table.columns = dbColumns\n                .filter(dbColumn => dbColumn[\"table_name\"] === table.name)\n                .map(dbColumn => {\n                    const seqName = table.schema === currentSchema\n                        ? `${dbColumn[\"table_name\"]}_${dbColumn[\"column_name\"]}_seq`\n                        : `${table.schema}.${dbColumn[\"table_name\"]}_${dbColumn[\"column_name\"]}_seq`;\n\n                    const isGenerated = !!dbColumn[\"column_default\"]\n                        && (dbColumn[\"column_default\"].replace(/\"/gi, \"\") === `nextval('${seqName}'::regclass)` || /^uuid\\_generate\\_v\\d\\(\\)/.test(dbColumn[\"column_default\"]));\n                    const tableColumn = new TableColumn();\n                    tableColumn.name = dbColumn[\"column_name\"];\n                    tableColumn.type = dbColumn[\"data_type\"].toLowerCase();\n                    tableColumn.length = dbColumn[\"character_maximum_length\"] ? dbColumn[\"character_maximum_length\"].toString() : \"\";\n                    tableColumn.precision = dbColumn[\"numeric_precision\"];\n                    tableColumn.scale = dbColumn[\"numeric_scale\"];\n                    tableColumn.default = dbColumn[\"column_default\"] !== null && dbColumn[\"column_default\"] !== undefined ? dbColumn[\"column_default\"].replace(/::character varying/, \"\") : undefined;\n                    tableColumn.isNullable = dbColumn[\"is_nullable\"] === \"YES\";\n                    // tableColumn.isPrimary = dbColumn[\"column_key\"].indexOf(\"PRI\") !== -1;\n                    tableColumn.isGenerated = isGenerated;\n                    tableColumn.comment = \"\"; // dbColumn[\"COLUMN_COMMENT\"];\n                    tableColumn.charset = dbColumn[\"character_set_name\"];\n                    tableColumn.collation = dbColumn[\"collation_name\"];\n                    tableColumn.isUnique = !!dbUniqueKeys.find(key => key[\"constraint_name\"] ===  `uk_${dbColumn[\"table_name\"]}_${dbColumn[\"column_name\"]}`);\n                    if (tableColumn.type === \"array\") {\n                        tableColumn.isArray = true;\n                        const type = dbColumn[\"udt_name\"].substring(1);\n                        tableColumn.type = this.connection.driver.normalizeType({type: type});\n                    }\n\n                    if (tableColumn.type === \"time without time zone\"\n                        || tableColumn.type === \"time with time zone\"\n                        || tableColumn.type === \"timestamp without time zone\"\n                        || tableColumn.type === \"timestamp with time zone\") {\n                        tableColumn.precision = dbColumn[\"datetime_precision\"];\n                    }\n                    return tableColumn;\n                });\n\n            // create primary key schema\n            table.primaryKeys = primaryKeys\n                .filter(primaryKey => primaryKey[\"table_name\"] === table.name)\n                .map(primaryKey => new TablePrimaryKey(primaryKey[\"constraint_name\"], primaryKey[\"column_name\"]));\n\n            // create foreign key schemas from the loaded indices\n            table.foreignKeys = dbForeignKeys\n                .filter(dbForeignKey => dbForeignKey[\"table_name\"] === table.name)\n                .map(dbForeignKey => new TableForeignKey(dbForeignKey[\"constraint_name\"], [], [], \"\", \"\")); // todo: fix missing params\n\n            // create unique key schemas from the loaded indices\n            /*table.uniqueKeys = dbUniqueKeys\n                .filter(dbUniqueKey => dbUniqueKey[\"table_name\"] === table.name)\n                .map(dbUniqueKey => {\n                    return new UniqueKeySchema(dbUniqueKey[\"TABLE_NAME\"], dbUniqueKey[\"CONSTRAINT_NAME\"], [/!* todo *!/]);\n                });*/\n\n            // create index schemas from the loaded indices\n            table.indices = dbIndices\n                .filter(dbIndex => {\n                    return dbIndex[\"table_name\"] === table.name &&\n                        (!table.foreignKeys.find(foreignKey => foreignKey.name === dbIndex[\"index_name\"])) &&\n                        (!table.primaryKeys.find(primaryKey => primaryKey.name === dbIndex[\"index_name\"])) &&\n                        (!dbUniqueKeys.find(key => key[\"constraint_name\"] === dbIndex[\"index_name\"]));\n                })\n                .map(dbIndex => dbIndex[\"index_name\"])\n                .filter((value, index, self) => self.indexOf(value) === index) // unqiue\n                .map(dbIndexName => {\n                    const dbIndicesInfos = dbIndices\n                        .filter(dbIndex => dbIndex[\"table_name\"] === table.name && dbIndex[\"index_name\"] === dbIndexName);\n                    const columnPositions = dbIndicesInfos[0][\"indkey\"].split(\" \")\n                        .map((x: string) => parseInt(x));\n                    const columnNames = columnPositions\n                        .map((pos: number) => dbIndicesInfos.find(idx => idx.attnum === pos)![\"column_name\"]);\n\n                    return new TableIndex(dbTable[\"table_name\"], dbIndexName, columnNames, dbIndicesInfos[0][\"is_unique\"]);\n                });\n\n            return table;\n        });\n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        return Promise.resolve(false);\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(tablePath: string): Promise<boolean> {\n        const parsedTablePath = this.parseTablePath(tablePath);\n        const sql = `SELECT * FROM information_schema.tables WHERE table_schema = ${parsedTablePath.schema} AND table_name = ${parsedTablePath.tableName}`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a database if it's not created.\n     * Postgres does not supports database creation inside a transaction block.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        return Promise.resolve([]);\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    async createSchema(schemas: string[]): Promise<void[]> {\n        if (this.driver.options.schema)\n            schemas.push(this.driver.options.schema);\n        return Promise.all(schemas.map(schema => this.query(`CREATE SCHEMA IF NOT EXISTS \"${schema}\"`)));\n    }\n\n    /**\n     * Creates a new table from the given table metadata and column metadatas.\n     */\n    async createTable(table: Table): Promise<void> {\n        const schema = table.schema || this.driver.options.schema;\n        const columnDefinitions = table.columns.map(column => this.buildCreateColumnSql(column, false)).join(\", \");\n        let up = `CREATE TABLE ${this.escapeTablePath(table)} (${columnDefinitions}`;\n        up += table.columns\n            .filter(column => column.isUnique)\n            .map(column => {\n                return schema ? `, CONSTRAINT \"uk_${schema}_${table.name}_${column.name}\" UNIQUE (\"${column.name}\")`\n                              : `, CONSTRAINT \"uk_${table.name}_${column.name}\" UNIQUE (\"${column.name}\")`;\n            }).join(\" \");\n        const primaryKeyColumns = table.columns.filter(column => column.isPrimary);\n        if (primaryKeyColumns.length > 0)\n            up += `, PRIMARY KEY(${primaryKeyColumns.map(column => `\"${column.name}\"`).join(\", \")})`;\n        up += `)`;\n\n        const down = `DROP TABLE \"${table.name}\"`;\n        await this.schemaQuery(up, down);\n    }\n\n    /**\n     * Drops the table.\n     */\n    async dropTable(tablePath: string): Promise<void> {\n        await this.query(`DROP TABLE ${this.escapeTablePath(tablePath)}`);\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(tablePath: string, columnName: string): Promise<boolean> {\n        const parsedTablePath = this.parseTablePath(tablePath);\n        const sql = `SELECT * FROM information_schema.columns WHERE table_schema = ${parsedTablePath.schema} AND table_name = '${parsedTablePath.tableName}' AND column_name = '${columnName}'`;\n        const result = await this.query(sql);\n        return result.length ? true : false;\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrPath: Table|string, column: TableColumn): Promise<void> {\n        const up = `ALTER TABLE ${this.escapeTablePath(tableOrPath)} ADD ${this.buildCreateColumnSql(column, false)}`;\n        const down = `ALTER TABLE ${this.escapeTablePath(tableOrPath)} DROP \"${column.name}\"`;\n        return this.schemaQuery(up, down);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        const queries = columns.map(column => this.addColumn(tableOrName as any, column));\n        await Promise.all(queries);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n\n        let table: Table|undefined = undefined;\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        let newColumn: TableColumn|undefined = undefined;\n        if (newTableColumnOrName instanceof TableColumn) {\n            newColumn = newTableColumnOrName;\n        } else {\n            newColumn = oldColumn.clone();\n            newColumn.name = newTableColumnOrName;\n        }\n\n        return this.changeColumn(table, oldColumn, newColumn);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n\n        let table: Table|undefined = undefined;\n        const sql: Array<{up: string, down: string}> = [];\n\n        if (tableOrName instanceof Table) {\n            table = tableOrName;\n        } else {\n            table = await this.getTable(tableOrName);\n        }\n\n        if (!table)\n            throw new Error(`Table ${tableOrName} was not found.`);\n\n        let oldColumn: TableColumn|undefined = undefined;\n        if (oldTableColumnOrName instanceof TableColumn) {\n            oldColumn = oldTableColumnOrName;\n        } else {\n            oldColumn = table.columns.find(column => column.name === oldTableColumnOrName);\n        }\n\n        if (!oldColumn)\n            throw new Error(`Column \"${oldTableColumnOrName}\" was not found in the \"${tableOrName}\" table.`);\n\n        if (this.connection.driver.createFullType(oldColumn) !== this.connection.driver.createFullType(newColumn) ||\n            oldColumn.name !== newColumn.name) {\n\n            let up = `ALTER TABLE ${this.escapeTablePath(tableOrName)} ALTER COLUMN \"${oldColumn.name}\"`;\n            if (this.connection.driver.createFullType(oldColumn) !== this.connection.driver.createFullType(newColumn)) {\n                up += ` TYPE ${this.connection.driver.createFullType(newColumn)}`;\n            }\n            if (oldColumn.name !== newColumn.name) { // todo: make rename in a separate query too. Need also change sequences and their defaults\n                up += ` RENAME TO ` + newColumn.name;\n            }\n            sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n        }\n\n        if (oldColumn.isNullable !== newColumn.isNullable) {\n            let up = `ALTER TABLE ${this.escapeTablePath(tableOrName)} ALTER COLUMN \"${oldColumn.name}\"`;\n            if (newColumn.isNullable) {\n                up += ` DROP NOT NULL`;\n            } else {\n                up += ` SET NOT NULL`;\n            }\n\n            sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n        }\n\n        // update sequence generation\n        if (oldColumn.isGenerated !== newColumn.isGenerated) {\n            const schema = table.schema || this.driver.options.schema;\n            if (!oldColumn.isGenerated && newColumn.type !== \"uuid\") {\n                const up = schema\n                    ? `CREATE SEQUENCE \"${schema}\".\"${table.name}_${oldColumn.name}_seq\" OWNED BY ${this.escapeTablePath(table)}.\"${oldColumn.name}\"`\n                    : `CREATE SEQUENCE \"${table.name}_${oldColumn.name}_seq\" OWNED BY ${this.escapeTablePath(table)}.\"${oldColumn.name}\"`;\n                sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n\n                const up2 = schema\n                    ? `ALTER TABLE ${this.escapeTablePath(table)} ALTER COLUMN \"${oldColumn.name}\" SET DEFAULT nextval('\"${schema}.${table.name}_${oldColumn.name}_seq\"')`\n                    : `ALTER TABLE ${this.escapeTablePath(table)} ALTER COLUMN \"${oldColumn.name}\" SET DEFAULT nextval('\"${table.name}_${oldColumn.name}_seq\"')`;\n                sql.push({up: up2, down: `-- TODO: revert ${up2}`}); // TODO: Add revert logic\n            } else {\n                const up = `ALTER TABLE ${this.escapeTablePath(table)} ALTER COLUMN \"${oldColumn.name}\" DROP DEFAULT`;\n                sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n\n                const up2 = schema\n                    ? `DROP SEQUENCE \"${schema}\".\"${table.name}_${oldColumn.name}_seq\"`\n                    : `DROP SEQUENCE \"${table.name}_${oldColumn.name}_seq\"`;\n                sql.push({up: up2, down: `-- TODO: revert ${up2}`}); // TODO: Add revert logic\n            }\n        }\n\n        if (oldColumn.comment !== newColumn.comment) {\n            const up = `COMMENT ON COLUMN ${this.escapeTablePath(tableOrName)}.\"${oldColumn.name}\" is '${newColumn.comment}'`;\n            sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n        }\n\n        if (oldColumn.isUnique !== newColumn.isUnique) {\n            if (newColumn.isUnique === true) {\n                const up = `ALTER TABLE ${this.escapeTablePath(tableOrName)} ADD CONSTRAINT \"uk_${table.name}_${newColumn.name}\" UNIQUE (\"${newColumn.name}\")`;\n                sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n            } else if (newColumn.isUnique === false) {\n                const up = `ALTER TABLE ${this.escapeTablePath(tableOrName)} DROP CONSTRAINT \"uk_${table.name}_${newColumn.name}\"`;\n                sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n            }\n\n        }\n\n        if (newColumn.default !== oldColumn.default) {\n            if (newColumn.default !== null && newColumn.default !== undefined) {\n                const up = `ALTER TABLE ${this.escapeTablePath(tableOrName)} ALTER COLUMN \"${newColumn.name}\" SET DEFAULT ${newColumn.default}`;\n                sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n\n            } else if (oldColumn.default !== null && oldColumn.default !== undefined) {\n                const up = `ALTER TABLE ${this.escapeTablePath(tableOrName)} ALTER COLUMN \"${newColumn.name}\" DROP DEFAULT`;\n                sql.push({up, down: `-- TODO: revert ${up}`}); // TODO: Add revert logic\n            }\n        }\n\n        await Promise.all(sql.map(({up, down}) => this.schemaQuery(up, down)));\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        const updatePromises = changedColumns.map(async changedColumn => {\n            return this.changeColumn(table, changedColumn.oldColumn, changedColumn.newColumn);\n        });\n\n        await Promise.all(updatePromises);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        const up = `ALTER TABLE ${this.escapeTablePath(table)} DROP \"${column.name}\"`;\n        const down = `ALTER TABLE ${this.escapeTablePath(table)} ADD ${this.buildCreateColumnSql(column, false)}`;\n\n        return this.schemaQuery(up, down);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        const dropPromises = columns.map(column => this.dropColumn(table, column));\n        await Promise.all(dropPromises);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(table: Table): Promise<void> {\n        const primaryColumnNames = table.primaryKeys.map(primaryKey => `\"${primaryKey.columnName}\"`);\n\n        const up = `ALTER TABLE ${this.escapeTablePath(table)} DROP CONSTRAINT IF EXISTS \"${table.name}_pkey\"`;\n        const down = `-- TODO: revert ${up}`;\n        await this.schemaQuery(up, down); // TODO: Add revert logic\n\n        const up2 = `DROP INDEX IF EXISTS \"${table.name}_pkey\"`;\n        const down2 = `-- TODO: revert ${up2}`;\n        await this.schemaQuery(up2, down2); // TODO: Add revert logic\n\n        if (primaryColumnNames.length > 0) {\n            const up3 = `ALTER TABLE ${this.escapeTablePath(table)} ADD PRIMARY KEY (${primaryColumnNames.join(\", \")})`;\n            const down3 = `ALTER TABLE ${this.escapeTablePath(table)} DROP PRIMARY KEY (${primaryColumnNames.join(\", \")})`;\n            await this.schemaQuery(up3, down3);\n        }\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const {add: up, drop: down} = this.foreignKeySql(tableOrName, foreignKey);\n        return this.schemaQuery(up, down);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.createForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        const {add: down, drop: up} = this.foreignKeySql(tableOrName, foreignKey);\n        return this.schemaQuery(up, down);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        const promises = foreignKeys.map(foreignKey => this.dropForeignKey(tableOrName as any, foreignKey));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(table: Table|string, index: TableIndex): Promise<void> {\n        const columnNames = index.columnNames.map(columnName => `\"${columnName}\"`).join(\",\");\n\n        const up = `CREATE ${index.isUnique ? \"UNIQUE \" : \"\"}INDEX \"${index.name}\" ON ${this.escapeTablePath(table)}(${columnNames})`;\n        const down = `-- TODO: revert ${up}`;\n        await this.schemaQuery(up, down); // TODO: Add revert logic\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(tableSchemeOrPath: Table|string, indexName: string): Promise<void> {\n        const schema = this.extractSchema(tableSchemeOrPath);\n        const up = schema ? `DROP INDEX \"${schema}\".\"${indexName}\"` : `DROP INDEX \"${indexName}\"`; // todo: make sure DROP INDEX should not be used here\n        const down = `-- TODO: revert ${up}`;\n        await this.schemaQuery(up, down); // TODO: Add revert logic\n    }\n\n    /**\n     * Truncates table.\n     */\n    async truncate(tablePath: string): Promise<void> {\n        await this.query(`TRUNCATE TABLE ${this.escapeTablePath(tablePath)}`);\n    }\n\n    /**\n     * Removes all tables from the currently connected database.\n     */\n    async clearDatabase(schemas?: string[]): Promise<void> {\n        if (!schemas)\n            schemas = [];\n        schemas.push(this.driver.options.schema || \"current_schema()\");\n        const schemaNamesString = schemas.map(name => {\n            return name === \"current_schema()\" ? name : \"'\" + name + \"'\";\n        }).join(\", \");\n\n        await this.startTransaction();\n        try {\n            const selectDropsQuery = `SELECT 'DROP TABLE IF EXISTS \"' || schemaname || '\".\"' || tablename || '\" CASCADE;' as query FROM pg_tables WHERE schemaname IN (${schemaNamesString})`;\n            const dropQueries: ObjectLiteral[] = await this.query(selectDropsQuery);\n            await Promise.all(dropQueries.map(q => this.query(q[\"query\"])));\n\n            await this.commitTransaction();\n\n        } catch (error) {\n            try { // we throw original error even if rollback thrown an error\n                await this.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw error;\n        }\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        this.sqlMemoryMode = true;\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        this.sqlsInMemory = [];\n        this.sqlMemoryMode = false;\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql(): (string|{ up: string, down: string })[] {\n        return this.sqlsInMemory;\n    }\n\n  /**\n   * Executes sql used special for schema build.\n   */\n    protected async schemaQuery(upQuery: string, downQuery: string): Promise<void> {\n        // if sql-in-memory mode is enabled then simply store sql in memory and return\n        if (this.sqlMemoryMode === true) {\n          this.sqlsInMemory.push({up: upQuery, down: downQuery});\n          return Promise.resolve() as Promise<any>;\n        }\n\n        await this.query(upQuery);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Extracts schema name from given Table object or tablePath string.\n     */\n    protected extractSchema(tableOrPath: Table|string): string|undefined {\n        if (tableOrPath instanceof Table) {\n            return tableOrPath.schema || this.driver.options.schema;\n        } else {\n            return tableOrPath.indexOf(\".\") === -1 ? this.driver.options.schema : tableOrPath.split(\".\")[0];\n        }\n    }\n\n    protected foreignKeySql(tableOrPath: Table|string, foreignKey: TableForeignKey): { add: string, drop: string } {\n        let add = `ALTER TABLE ${this.escapeTablePath(tableOrPath)} ADD CONSTRAINT \"${foreignKey.name}\" ` +\n            `FOREIGN KEY (\"${foreignKey.columnNames.join(\"\\\", \\\"\")}\") ` +\n            `REFERENCES ${this.escapeTablePath(foreignKey.referencedTablePath)}(\"${foreignKey.referencedColumnNames.join(\"\\\", \\\"\")}\")`;\n\n        if (foreignKey.onDelete) add += \" ON DELETE \" + foreignKey.onDelete;\n        const drop = `ALTER TABLE ${this.escapeTablePath(tableOrPath)} DROP CONSTRAINT \"${foreignKey.name}\"`;\n\n        return {add, drop};\n    }\n\n    /**\n     * Escapes given table path.\n     */\n    protected escapeTablePath(tableOrPath: Table|string, disableEscape?: boolean): string {\n        if (tableOrPath instanceof Table) {\n            const schema = tableOrPath.schema || this.driver.options.schema;\n            if (schema) {\n                tableOrPath = `${schema}.${tableOrPath.name}`;\n            } else {\n                tableOrPath = tableOrPath.name;\n            }\n        } else {\n            tableOrPath = tableOrPath.indexOf(\".\") === -1 && this.driver.options.schema ? this.driver.options.schema + \".\" + tableOrPath : tableOrPath;\n        }\n\n        return tableOrPath.split(\".\").map(i => {\n            return disableEscape ? i : `\"${i}\"`;\n        }).join(\".\");\n    }\n\n    protected parseTablePath(tablePath: string): any {\n        if (tablePath.indexOf(\".\") === -1) {\n            return {\n                schema: this.driver.options.schema ? `'${this.driver.options.schema}'` : \"current_schema()\",\n                tableName: `'${tablePath}'`\n            };\n        } else {\n            return {\n                schema: `'${tablePath.split(\".\")[0]}'`,\n                tableName: `'${tablePath.split(\".\")[1]}'`\n            };\n        }\n    }\n\n    /**\n     * Parametrizes given object of values. Used to create column=value queries.\n     */\n    protected parametrize(objectLiteral: ObjectLiteral, startIndex: number = 0): string[] {\n        return Object.keys(objectLiteral).map((key, index) => \"\\\"\" + key + \"\\\"=$\" + (startIndex + index + 1));\n    }\n\n    /**\n     * Builds a query for create column.\n     */\n    protected buildCreateColumnSql(column: TableColumn, skipPrimary: boolean) {\n        let c = \"\\\"\" + column.name + \"\\\"\";\n        if (column.isGenerated === true && column.generationStrategy === \"increment\") { // don't use skipPrimary here since updates can update already exist primary without auto inc.\n            if (column.type === \"integer\")\n                c += \" SERIAL\";\n            if (column.type === \"smallint\")\n                c += \" SMALLSERIAL\";\n            if (column.type === \"bigint\")\n                c += \" BIGSERIAL\";\n        }\n        if (!column.isGenerated || column.type === \"uuid\")\n            c += \" \" + this.connection.driver.createFullType(column);\n        if (column.charset)\n            c += \" CHARACTER SET \\\"\" + column.charset + \"\\\"\";\n        if (column.collation)\n            c += \" COLLATE \\\"\" + column.collation + \"\\\"\";\n        if (column.isNullable !== true)\n            c += \" NOT NULL\";\n        // if (column.isPrimary)\n        //     c += \" PRIMARY KEY\";\n        if (column.default !== undefined && column.default !== null) { // todo: same code in all drivers. make it DRY\n            c += \" DEFAULT \" + column.default;\n        }\n        if (column.isGenerated && column.generationStrategy === \"uuid\" && !column.default)\n            c += \" DEFAULT uuid_generate_v4()\";\n        return c;\n    }\n\n}\n","import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverUtils} from \"../DriverUtils\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {PostgresQueryRunner} from \"./PostgresQueryRunner\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {PostgresConnectionOptions} from \"./PostgresConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {PostgresConnectionCredentialsOptions} from \"./PostgresConnectionCredentialsOptions\";\n\n/**\n * Organizes communication with PostgreSQL DBMS.\n */\nexport class PostgresDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Postgres underlying library.\n     */\n    postgres: any;\n\n    /**\n     * Pool for master database.\n     */\n    master: any;\n\n    /**\n     * Pool for slave databases.\n     * Used in replication.\n     */\n    slaves: any[] = [];\n\n    /**\n     * We store all created query runners because we need to release them.\n     */\n    connectedQueryRunners: QueryRunner[] = [];\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: PostgresConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.tutorialspoint.com/postgresql/postgresql_data_types.htm\n     * @see https://www.postgresql.org/docs/9.2/static/datatype.html\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"smallint\",\n        \"integer\",\n        \"bigint\",\n        \"decimal\",\n        \"numeric\",\n        \"real\",\n        \"double precision\",\n        \"money\",\n        \"character varying\",\n        \"varchar\",\n        \"character\",\n        \"char\",\n        \"text\",\n        \"citext\",\n        \"bytea\",\n        \"bit\",\n        \"bit varying\",\n        \"timestamp\",\n        \"timestamp without time zone\",\n        \"timestamp with time zone\",\n        \"date\",\n        \"time\",\n        \"time without time zone\",\n        \"time with time zone\",\n        \"interval\",\n        \"boolean\",\n        \"enum\",\n        \"point\",\n        \"line\",\n        \"lseg\",\n        \"box\",\n        \"path\",\n        \"polygon\",\n        \"circle\",\n        \"cidr\",\n        \"inet\",\n        \"macaddr\",\n        \"tsvector\",\n        \"tsquery\",\n        \"uuid\",\n        \"xml\",\n        \"json\",\n        \"jsonb\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"character varying\",\n        \"varchar\",\n        \"character\",\n        \"char\",\n        \"bit\",\n        \"bit varying\"\n    ];\n\n    /**\n     * Orm has special columns and we need to know what database column types should be for those types.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"timestamp\",\n        createDateDefault: \"now()\",\n        updateDate: \"timestamp\",\n        updateDateDefault: \"now()\",\n        version: \"int\",\n        treeLevel: \"int\",\n        migrationName: \"varchar\",\n        migrationTimestamp: \"bigint\",\n        cacheId: \"int\",\n        cacheIdentifier: \"varchar\",\n        cacheTime: \"bigint\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as PostgresConnectionOptions;\n        this.isReplicated = this.options.replication ? true : false;\n\n        // load postgres package\n        this.loadDependencies();\n\n        // Object.assign(this.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        // validate options to make sure everything is set\n        // todo: revisit validation with replication in mind\n        // if (!this.options.host)\n        //     throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.database)\n        //     throw new DriverOptionNotSetError(\"database\");\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     * Based on pooling options, it can either create connection immediately,\n     * either create a pool and create connection when needed.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.slaves = await Promise.all(this.options.replication.slaves.map(slave => {\n                return this.createPool(this.options, slave);\n            }));\n            this.master = await this.createPool(this.options, this.options.replication.master);\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.master = await this.createPool(this.options, this.options);\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    async afterConnect(): Promise<void> {\n        const hasUuidColumns = this.connection.entityMetadatas.some(metadata => {\n            return metadata.generatedColumns.filter(column => column.generationStrategy === \"uuid\").length > 0;\n        });\n        const hasCitextColumns = this.connection.entityMetadatas.some(metadata => {\n            return metadata.columns.filter(column => column.type === \"citext\").length > 0;\n        });\n\n        if (hasUuidColumns || hasCitextColumns) {\n            await Promise.all([this.master, ...this.slaves].map(pool => {\n                return new Promise((ok, fail) => {\n                    pool.connect(async (err: any, connection: any, release: Function) => {\n                        const { logger } = this.connection;\n                        if (err) return fail(err);\n                        if (hasUuidColumns)\n                            try {\n                                await this.executeQuery(connection, `CREATE extension IF NOT EXISTS \"uuid-ossp\"`);\n                            } catch (_) {\n                                logger.log(\"warn\", \"At least one of the entities has uuid column, but the 'uuid-ossp' extension cannot be installed automatically. Please install it manually using superuser rights\");\n                            }\n                        if (hasCitextColumns)\n                            try {\n                                await this.executeQuery(connection, `CREATE extension IF NOT EXISTS \"citext\"`);\n                            } catch (_) {\n                                logger.log(\"warn\", \"At least one of the entities has citext column, but the 'citext' extension cannot be installed automatically. Please install it manually using superuser rights\");\n                            }\n                        release();\n                        ok();\n                    });\n                });\n            }));\n        }\n\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.master)\n            return Promise.reject(new ConnectionIsNotSetError(\"postgres\"));\n\n        await this.closePool(this.master);\n        await Promise.all(this.slaves.map(slave => this.closePool(slave)));\n        this.master = undefined;\n        this.slaves = [];\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new PostgresQueryRunner(this, mode);\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"datetime\"\n            || columnMetadata.type === Date\n            || columnMetadata.type === \"timestamp\"\n            || columnMetadata.type === \"timestamp with time zone\"\n            || columnMetadata.type === \"timestamp without time zone\") {\n            return DateUtils.mixedDateToDate(value, true);\n\n        } else if (columnMetadata.type === \"json\" || columnMetadata.type === \"jsonb\") {\n            return JSON.stringify(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n            \n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\"\n            || columnMetadata.type === Date\n            || columnMetadata.type === \"timestamp\"\n            || columnMetadata.type === \"timestamp with time zone\"\n            || columnMetadata.type === \"timestamp without time zone\") {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n\n        const builtParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string): string => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Array) {\n                return value.map((v: any) => {\n                    builtParameters.push(v);\n                    return \"$\" + builtParameters.length;\n                }).join(\", \");\n\n            } else if (value instanceof Function) {\n                return value();\n\n            } else {\n                builtParameters.push(value);\n                return \"$\" + builtParameters.length;\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, builtParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return \"\\\"\" + columnName + \"\\\"\";\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number, isArray?: boolean }): string {\n        let type = \"\";\n        if (column.type === Number) {\n            type += \"integer\";\n\n        } else if (column.type === String) {\n            type += \"character varying\";\n\n        } else if (column.type === Date) {\n            type += \"timestamp\";\n\n        } else if (column.type === Boolean) {\n            type += \"boolean\";\n\n        } else if (column.type === \"simple-array\") {\n            type += \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            type += \"text\";\n\n        } else {\n            type += column.type;\n        }\n\n        // normalize shortcuts\n        if (type === \"int\" || type === \"int4\") {\n            type = \"integer\";\n\n        } else if (type === \"int2\") {\n            type = \"smallint\";\n\n        } else if (type === \"int8\") {\n            type = \"bigint\";\n\n        } else if (type === \"decimal\") {\n            type = \"numeric\";\n\n        } else if (type === \"float8\") {\n            type = \"double precision\";\n\n        } else if (type === \"float4\") {\n            type = \"real\";\n\n        } else if (type === \"citext\") {\n            type = \"citext\";\n\n        } else if (type === \"char\") {\n            type = \"character\";\n\n        } else if (type === \"varchar\") {\n            type = \"character varying\";\n\n        } else if (type === \"time\") {\n            type = \"time without time zone\";\n\n        } else if (type === \"timetz\") {\n            type = \"time with time zone\";\n\n        } else if (type === \"timestamptz\") {\n            type = \"timestamp with time zone\";\n\n        } else if (type === \"bool\") {\n            type = \"boolean\";\n\n        } else if (type === \"varbit\") {\n            type = \"bit varying\";\n\n        } else if (type === \"timestamp\") {\n            type = \"timestamp without time zone\";\n        }\n\n        return type;\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"true\" : \"false\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else if (typeof column.default === \"object\") {\n            return `'${JSON.stringify(column.default)}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique;\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n        \n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();       \n\n        return \"\";\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.type === \"time without time zone\") {\n            type = \"TIME\" + (column.precision ? \"(\" + column.precision + \")\" : \"\");\n\n        } else if (column.type === \"time with time zone\") {\n            type = \"TIME\" + (column.precision ? \"(\" + column.precision + \")\" : \"\") + \" WITH TIME ZONE\";\n\n        } else if (column.type === \"timestamp without time zone\") {\n            type = \"TIMESTAMP\" + (column.precision ? \"(\" + column.precision + \")\" : \"\");\n\n        } else if (column.type === \"timestamp with time zone\") {\n            type = \"TIMESTAMP\" + (column.precision ? \"(\" + column.precision + \")\" : \"\") + \" WITH TIME ZONE\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return new Promise((ok, fail) => {\n            this.master.connect((err: any, connection: any, release: any) => {\n                err ? fail(err) : ok([connection, release]);\n            });\n        });\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.slaves.length)\n            return this.obtainMasterConnection();\n\n        return new Promise((ok, fail) => {\n            const random = Math.floor(Math.random() * this.slaves.length);\n            this.slaves[random].connect((err: any, connection: any, release: any) => {\n                err ? fail(err) : ok([connection, release]);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads postgres query stream package.\n     */\n    loadStreamDependency() {\n        try {\n            return PlatformTools.load(\"pg-query-stream\");\n\n        } catch (e) { // todo: better error for browser env\n            throw new Error(`To use streams you should install pg-query-stream package. Please run npm i pg-query-stream --save command.`);\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        try {\n            this.postgres = PlatformTools.load(\"pg\");\n            try {\n                const pgNative = PlatformTools.load(\"pg-native\");\n                if (pgNative && this.postgres.native) this.postgres = this.postgres.native;\n                \n            } catch (e) { }\n\n        } catch (e) { // todo: better error for browser env\n            throw new DriverPackageNotInstalledError(\"Postgres\", \"pg\");\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected async createPool(options: PostgresConnectionOptions, credentials: PostgresConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        const connectionOptions = Object.assign({}, {\n            host: credentials.host,\n            user: credentials.username,\n            password: credentials.password,\n            database: credentials.database,\n            port: credentials.port,\n            ssl: credentials.ssl\n        }, options.extra || {});\n\n        // create a connection pool\n        const pool = new this.postgres.Pool(connectionOptions);\n\n        return new Promise((ok, fail) => {\n            pool.connect((err: any, connection: any, release: Function) => {\n                if (err) return fail(err);\n                release();\n                ok(pool);\n            });\n        });\n    }\n\n    /**\n     * Closes connection pool.\n     */\n    protected async closePool(pool: any): Promise<void> {\n        await Promise.all(this.connectedQueryRunners.map(queryRunner => queryRunner.release()));\n        return new Promise<void>((ok, fail) => {\n            pool.end((err: any) => err ? fail(err) : ok());\n        });\n    }\n\n    /**\n     * Executes given query.\n     */\n    protected executeQuery(connection: any, query: string) {\n        return new Promise((ok, fail) => {\n            connection.query(query, (err: any, result: any) => {\n                if (err) return fail(err);\n                ok(result);\n            });\n        });\n    }\n\n}","import {WhereExpression} from \"./WhereExpression\";\n\n/**\n * Syntax sugar.\n * Allows to use brackets in WHERE expressions for better syntax.\n */\nexport class Brackets {\n\n    /**\n     * WHERE expression that will be taken into brackets.\n     */\n    whereFactory: (qb: WhereExpression) => any;\n\n    /**\n     * Given WHERE query builder that will build a WHERE expression that will be taken into brackets.\n     */\n    constructor(whereFactory: (qb: WhereExpression) => any) {\n        this.whereFactory = whereFactory;\n    }\n\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {Brackets} from \"./Brackets\";\n\n/**\n * Query Builders can implement this interface to support where expression\n */\nexport interface WhereExpression {\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(where: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(where: Brackets, parameters?: ObjectLiteral): this;\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(subQuery: (qb: this) => string, parameters?: ObjectLiteral): this;\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(where: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(where: Brackets, parameters?: ObjectLiteral): this;\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(subQuery: (qb: this) => string, parameters?: ObjectLiteral): this;\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(where: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(where: Brackets, parameters?: ObjectLiteral): this;\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(subQuery: (qb: this) => string, parameters?: ObjectLiteral): this;\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    whereInIds(ids: any|any[]): this;\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    andWhereInIds(ids: any[]): this;\n\n    /**\n     * Adds new OR WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    orWhereInIds(ids: any[]): this;\n\n\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {EntityMetadata} from \"./EntityMetadata\";\n\n/**\n * Utils used to work with EntityMetadata objects.\n */\nexport class EntityMetadataUtils {\n\n    /**\n     * Creates a property paths for a given entity.\n     */\n    static createPropertyPath(metadata: EntityMetadata, entity: ObjectLiteral, prefix: string = \"\") {\n        const paths: string[] = [];\n        Object.keys(entity).forEach(key => {\n\n            // check for function is needed in the cases when createPropertyPath used on values containing a function as a value\n            // example: .update().set({ name: () => `SUBSTR('', 1, 2)` })\n            const parentPath = prefix ? prefix + \".\" + key : key;\n            if (metadata.hasEmbeddedWithPropertyPath(parentPath)) {\n                const subPaths = this.createPropertyPath(metadata, entity[key], key);\n                paths.push(...subPaths);\n            } else {\n                const path = prefix ? prefix + \".\" + key : key;\n                paths.push(path);\n            }\n        });\n        return paths;\n    }\n\n    /**\n     * Creates a property paths for a given entity.\n     */\n    static getPropertyPathValue(entity: ObjectLiteral, propertyPath: string) {\n        const properties = propertyPath.split(\".\");\n        const recursive = (object: ObjectLiteral): any => {\n            const propertyName = properties.shift();\n            const value = propertyName ? object[propertyName] : object;\n            if (properties.length)\n                return recursive(value);\n\n            return value;\n        };\n        return recursive(entity);\n    }\n\n}","/**\n * Thrown when user tries to build an UPDATE query with LIMIT but the database does not support it.\n*/\nexport class LimitOnUpdateNotSupportedError extends Error {\n\n    constructor() {\n        super(`Your database does not support LIMIT on UPDATE statements.`);\n        Object.setPrototypeOf(this, LimitOnUpdateNotSupportedError.prototype);\n        this.name = \"LimitOnUpdateNotSupportedError\";\n    }\n\n}","import {QueryBuilder} from \"./QueryBuilder\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {Connection} from \"../connection/Connection\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {MysqlDriver} from \"../driver/mysql/MysqlDriver\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {PostgresDriver} from \"../driver/postgres/PostgresDriver\";\nimport {WhereExpression} from \"./WhereExpression\";\nimport {Brackets} from \"./Brackets\";\nimport {EntityMetadataUtils} from \"../metadata/EntityMetadataUtils\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\nimport {LimitOnUpdateNotSupportedError} from \"../error/LimitOnUpdateNotSupportedError\";\n\n/**\n * Allows to build complex sql queries in a fashion way and execute those queries.\n */\nexport class UpdateQueryBuilder<Entity> extends QueryBuilder<Entity> implements WhereExpression {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connectionOrQueryBuilder: Connection|QueryBuilder<any>, queryRunner?: QueryRunner) {\n        super(connectionOrQueryBuilder as any, queryRunner);\n        this.expressionMap.aliasNamePrefixingEnabled = false;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    getQuery(): string {\n        let sql = this.createUpdateExpression();\n        sql += this.createOrderByExpression();\n        sql += this.createLimitExpression();\n        return sql.trim();\n    }\n\n    /**\n     * Optional returning/output clause.\n     */\n    output(output: string): this {\n         return this.returning(output);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Values needs to be updated.\n     */\n    set(values: ObjectLiteral): this {\n        this.expressionMap.valuesSet = values;\n        return this;\n    }\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(where: string|((qb: this) => string)|Brackets|ObjectLiteral, parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres = []; // don't move this block below since computeWhereParameter can add where expressions\n        const condition = this.computeWhereParameter(where);\n        if (condition)\n            this.expressionMap.wheres = [{ type: \"simple\", condition: condition }];\n        if (parameters)\n            this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(where: string|((qb: this) => string)|Brackets, parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"and\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(where: string|((qb: this) => string)|Brackets, parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"or\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     */\n    whereInIds(ids: any|any[]): this {\n        ids = ids instanceof Array ? ids : [ids];\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.where(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     */\n    andWhereInIds(ids: any|any[]): this {\n        ids = ids instanceof Array ? ids : [ids];\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.andWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE with conditions for the given ids.\n     */\n    orWhereInIds(ids: any|any[]): this {\n        ids = ids instanceof Array ? ids : [ids];\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.orWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     *\n     * Calling order by without order set will remove all previously set order bys.\n     */\n    orderBy(): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort: string, order?: \"ASC\"|\"DESC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(order: OrderByCondition): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort?: string|OrderByCondition, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (sort) {\n            if (sort instanceof Object) {\n                this.expressionMap.orderBys = sort as OrderByCondition;\n            } else {\n                if (nulls) {\n                    this.expressionMap.orderBys = { [sort as string]: { order, nulls } };\n                } else {\n                    this.expressionMap.orderBys = { [sort as string]: order };\n                }\n            }\n        } else {\n            this.expressionMap.orderBys = {};\n        }\n        return this;\n    }\n\n    /**\n     * Adds ORDER BY condition in the query builder.\n     */\n    addOrderBy(sort: string, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (nulls) {\n            this.expressionMap.orderBys[sort] = { order, nulls };\n        } else {\n            this.expressionMap.orderBys[sort] = order;\n        }\n        return this;\n    }\n\n    /**\n     * Sets LIMIT - maximum number of rows to be selected.\n     */\n    limit(limit?: number): this {\n        this.expressionMap.limit = limit;\n        return this;\n    }\n\n    /**\n     * Optional returning/output clause.\n     */\n    returning(returning: string): this {\n        if (this.connection.driver instanceof SqlServerDriver || this.connection.driver instanceof PostgresDriver) {\n            this.expressionMap.returning = returning;\n            return this;\n        } else throw new Error(\"OUTPUT or RETURNING clause only supported by MS SQLServer or PostgreSQL\");\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates UPDATE express used to perform insert query.\n     */\n    protected createUpdateExpression() {\n        const valuesSet = this.getValueSet();\n        const metadata = this.expressionMap.mainAlias!.hasMetadata ? this.expressionMap.mainAlias!.metadata : undefined;\n\n        // prepare columns and values to be updated\n        const updateColumnAndValues: string[] = [];\n        if (metadata) {\n            EntityMetadataUtils.createPropertyPath(metadata, valuesSet).forEach(propertyPath => {\n                // todo: make this and other query builder to work with properly with tables without metadata\n                const column = metadata.findColumnWithPropertyPath(propertyPath);\n\n                // we update an entity and entity can contain property which aren't columns, so we just skip them\n                if (!column) return;\n\n                const paramName = \"_updated_\" + column.databaseName;\n                const value = this.connection.driver.preparePersistentValue(column.getEntityValue(valuesSet), column);\n\n                // todo: duplication zone\n                if (value instanceof Function) { // support for SQL expressions in update query\n                    updateColumnAndValues.push(this.escape(column.databaseName) + \" = \" + value());\n                } else {\n                    if (this.connection.driver instanceof SqlServerDriver) {\n                        this.setParameter(paramName, this.connection.driver.parametrizeValue(column, value));\n                    } else {\n                        this.setParameter(paramName, value);\n                    }\n                    updateColumnAndValues.push(this.escape(column.databaseName) + \" = :\" + paramName);\n                }\n            });\n        } else {\n            Object.keys(valuesSet).map(key => {\n                const value = valuesSet[key];\n\n                // todo: duplication zone\n                if (value instanceof Function) { // support for SQL expressions in update query\n                    updateColumnAndValues.push(this.escape(key) + \" = \" + value());\n                } else {\n                    updateColumnAndValues.push(this.escape(key) + \" = :\" + key);\n                    this.setParameter(key, value);\n                }\n            });\n        }\n\n        // get a table name and all column database names\n        const whereExpression = this.createWhereExpression();\n\n        // generate and return sql update query\n        if (this.expressionMap.returning !== \"\" && this.connection.driver instanceof PostgresDriver) {\n            return `UPDATE ${this.getTableName(this.getMainTableName())} SET ${updateColumnAndValues.join(\", \")}${whereExpression} RETURNING ${this.expressionMap.returning}`;\n\n        } else if (this.expressionMap.returning !== \"\" && this.connection.driver instanceof SqlServerDriver) {\n            return `UPDATE ${this.getTableName(this.getMainTableName())} SET ${updateColumnAndValues.join(\", \")} OUTPUT ${this.expressionMap.returning}${whereExpression}`;\n\n        } else {\n            return `UPDATE ${this.getTableName(this.getMainTableName())} SET ${updateColumnAndValues.join(\", \")}${whereExpression}`; // todo: how do we replace aliases in where to nothing?\n        }\n    }\n\n    /**\n     * Creates \"ORDER BY\" part of SQL query.\n     */\n    protected createOrderByExpression() {\n        const orderBys = this.expressionMap.allOrderBys;\n        if (Object.keys(orderBys).length > 0)\n            return \" ORDER BY \" + Object.keys(orderBys)\n                    .map(columnName => {\n                        if (typeof orderBys[columnName] === \"string\") {\n                            return this.replacePropertyNames(columnName) + \" \" + orderBys[columnName];\n                        } else {\n                            return this.replacePropertyNames(columnName) + \" \" + (orderBys[columnName] as any).order + \" \" + (orderBys[columnName] as any).nulls;\n                        }\n                    })\n                    .join(\", \");\n\n        return \"\";\n    }\n\n    /**\n     * Creates \"LIMIT\" parts of SQL query.\n     */\n    protected createLimitExpression(): string {\n        let limit: number|undefined = this.expressionMap.limit;\n\n        if (limit) {\n            if (this.connection.driver instanceof MysqlDriver) {\n                return \" LIMIT \" + limit;\n            } else {\n                throw new LimitOnUpdateNotSupportedError();\n            }\n        }\n\n        return \"\";\n    }\n\n    /**\n     * Gets array of values need to be inserted into the target table.\n     */\n    protected getValueSet(): ObjectLiteral {\n        if (this.expressionMap.valuesSet instanceof Object)\n            return this.expressionMap.valuesSet;\n\n        throw new Error(`Cannot perform update query because update values are not defined. Call \"qb.set(...)\" method to specify inserted values.`);\n    }\n\n}\n","import {QueryBuilder} from \"./QueryBuilder\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {Connection} from \"../connection/Connection\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {PostgresDriver} from \"../driver/postgres/PostgresDriver\";\nimport {WhereExpression} from \"./WhereExpression\";\nimport {Brackets} from \"./Brackets\";\n\n/**\n * Allows to build complex sql queries in a fashion way and execute those queries.\n */\nexport class DeleteQueryBuilder<Entity> extends QueryBuilder<Entity> implements WhereExpression {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connectionOrQueryBuilder: Connection|QueryBuilder<any>, queryRunner?: QueryRunner) {\n        super(connectionOrQueryBuilder as any, queryRunner);\n        this.expressionMap.aliasNamePrefixingEnabled = false;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    getQuery(): string {\n        let sql = this.createDeleteExpression();\n        return sql.trim();\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    from<T>(entityTarget: ObjectType<T>|string, aliasName?: string): DeleteQueryBuilder<T> {\n        const mainAlias = this.createFromAlias(entityTarget, aliasName);\n        this.expressionMap.setMainAlias(mainAlias);\n        return (this as any) as DeleteQueryBuilder<T>;\n    }\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(where: Brackets|string|((qb: this) => string)|ObjectLiteral, parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres = []; // don't move this block below since computeWhereParameter can add where expressions\n        const condition = this.computeWhereParameter(where);\n        if (condition)\n            this.expressionMap.wheres = [{ type: \"simple\", condition: condition }];\n        if (parameters)\n            this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(where: Brackets|string|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"and\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(where: Brackets|string|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"or\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     */\n    whereInIds(ids: any|any[]): this {\n        ids = ids instanceof Array ? ids : [ids];\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.where(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     */\n    andWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.andWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE with conditions for the given ids.\n     */\n    orWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.orWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Optional returning/output clause.\n     */\n    returning(returning: string): this {\n        if (this.connection.driver instanceof SqlServerDriver || this.connection.driver instanceof PostgresDriver) {\n            this.expressionMap.returning = returning;\n            return this;\n        } else throw new Error(\"OUTPUT or RETURNING clause only supported by MS SQLServer or PostgreSQL\");\n    }\n\n    /**\n     * Optional returning/output clause.\n     */\n    output(output: string): this {\n         return this.returning(output);\n    }\n    \n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates DELETE express used to perform query.\n     */\n    protected createDeleteExpression() {\n        const whereExpression = this.createWhereExpression();\n        if (this.expressionMap.returning !== \"\" && this.connection.driver instanceof PostgresDriver) {\n            return `DELETE FROM ${this.getTableName(this.getMainTableName())}${whereExpression} RETURNING ${this.expressionMap.returning}`;\n        } else if (this.expressionMap.returning !== \"\" && this.connection.driver instanceof SqlServerDriver) {\n            return `DELETE FROM ${this.getTableName(this.getMainTableName())} OUTPUT ${this.expressionMap.returning}${whereExpression}`;\n        } else {\n            return `DELETE FROM ${this.getTableName(this.getMainTableName())}${whereExpression}`; // todo: how do we replace aliases in where to nothing?\n        }\n    }\n\n}\n","import {QueryBuilder} from \"./QueryBuilder\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {QueryPartialEntity} from \"./QueryPartialEntity\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {PostgresDriver} from \"../driver/postgres/PostgresDriver\";\nimport {AbstractSqliteDriver} from \"../driver/sqlite-abstract/AbstractSqliteDriver\";\n\n/**\n * Allows to build complex sql queries in a fashion way and execute those queries.\n */\nexport class InsertQueryBuilder<Entity> extends QueryBuilder<Entity> {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    getQuery(): string {\n        let sql = this.createInsertExpression();\n        return sql.trim();\n    }\n\n    /**\n     * Optional returning/output clause.\n     */\n    output(output: string): this {\n         return this.returning(output);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Specifies INTO which entity's table insertion will be executed.\n     */\n    into<T>(entityTarget: ObjectType<T>|string, columns?: string[]): InsertQueryBuilder<T> {\n        const mainAlias = this.createFromAlias(entityTarget);\n        this.expressionMap.setMainAlias(mainAlias);\n        this.expressionMap.insertColumns = columns || [];\n        return (this as any) as InsertQueryBuilder<T>;\n    }\n\n    /**\n     * Values needs to be inserted into table.\n     */\n    values(values: QueryPartialEntity<Entity>|QueryPartialEntity<Entity>[]): this {\n        this.expressionMap.valuesSet = values;\n        return this;\n    }\n\n    /**\n     * Optional returning/output clause.\n     */\n    returning(returning: string): this {\n        if (this.connection.driver instanceof SqlServerDriver || this.connection.driver instanceof PostgresDriver) {\n            this.expressionMap.returning = returning;\n            return this;\n        } else throw new Error(\"OUTPUT or RETURNING clause only supported by MS SQLServer or PostgreSQL\");\n    }\n\n    /**\n     * Adds additional ON CONFLICT statement supported in postgres.\n     */\n    onConflict(statement: string): this {\n        this.expressionMap.onConflict = statement;\n        return this;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates INSERT express used to perform insert query.\n     */\n    protected createInsertExpression() { // todo: insertion into custom tables wont work because of binding to columns. fix it\n        const valueSets = this.getValueSets();\n        let values: string, columnNames: string;\n\n        if (this.expressionMap.mainAlias!.hasMetadata) {\n            const columns = this.expressionMap.mainAlias!.metadata.columns.filter(column => {\n                if (!this.expressionMap.insertColumns.length)\n                    return !column.isGenerated;\n\n                return this.expressionMap.insertColumns.indexOf(column.propertyPath);\n            });\n\n            // get a table name and all column database names\n            columnNames = columns.map(column => this.escape(column.databaseName)).join(\", \");\n\n            // get values needs to be inserted\n            values = valueSets.map((valueSet, insertionIndex) => {\n                const columnValues = columns.map(column => {\n                    const paramName = \"_inserted_\" + insertionIndex + \"_\" + column.databaseName;\n                    const value = this.connection.driver.preparePersistentValue(column.getEntityValue(valueSet), column);\n\n                    if (value instanceof Function) { // support for SQL expressions in update query\n                        return value();\n\n                    } else if (value === undefined) {\n                        if (this.connection.driver instanceof AbstractSqliteDriver) {\n                            return \"NULL\";\n\n                        } else {\n                            return \"DEFAULT\";\n                        }\n\n                    } else {\n                        if (this.connection.driver instanceof SqlServerDriver) {\n                            this.setParameter(paramName, this.connection.driver.parametrizeValue(column, value));\n                        } else {\n                            this.setParameter(paramName, value);\n                        }\n                        return \":\" + paramName;\n                    }\n                });\n                return \"(\" + columnValues.join(\",\") + \")\";\n            }).join(\", \");\n\n        } else { // for tables without metadata\n\n            // get a table name and all column database names\n            columnNames = this.expressionMap.insertColumns.join(\", \");\n\n            // get values needs to be inserted\n            values = valueSets.map((valueSet, insertionIndex) => {\n                const columnValues = Object.keys(valueSet).map(columnName => {\n                    const paramName = \"_inserted_\" + insertionIndex + \"_\" + columnName;\n                    const value = valueSet[columnName];\n\n                    if (value instanceof Function) { // support for SQL expressions in update query\n                        return value();\n\n                    } else if (value === undefined) {\n                        if (this.connection.driver instanceof AbstractSqliteDriver) {\n                            return \"NULL\";\n\n                        } else {\n                            return \"DEFAULT\";\n                        }\n\n                    } else {\n                        this.setParameter(paramName, value);\n                        return \":\" + paramName;\n                    }\n                });\n                return \"(\" + columnValues.join(\",\") + \")\";\n            }).join(\", \");\n        }\n\n        // generate sql query\n        if (this.expressionMap.returning !== \"\" && this.connection.driver instanceof PostgresDriver) {\n            return `INSERT INTO ${this.getTableName(this.getMainTableName())}${columnNames ? \"(\" + columnNames + \")\" : \"\"} VALUES ${values}${this.expressionMap.onConflict ? \" ON CONFLICT \" + this.expressionMap.onConflict : \"\"} RETURNING ${this.expressionMap.returning}`;\n\n        } else if (this.expressionMap.returning !== \"\" && this.connection.driver instanceof SqlServerDriver) {\n            return `INSERT INTO ${this.getTableName(this.getMainTableName())}(${columnNames}) OUTPUT ${this.expressionMap.returning} VALUES ${values}`;\n\n        } else {\n            return `INSERT INTO ${this.getTableName(this.getMainTableName())}(${columnNames}) VALUES ${values}${this.expressionMap.onConflict ? \" ON CONFLICT \" + this.expressionMap.onConflict : \"\"}`;\n        }\n    }\n\n    /**\n     * Gets array of values need to be inserted into the target table.\n     */\n    protected getValueSets(): ObjectLiteral[] {\n        if (this.expressionMap.valuesSet instanceof Array && this.expressionMap.valuesSet.length > 0)\n            return this.expressionMap.valuesSet;\n\n        if (this.expressionMap.valuesSet instanceof Object)\n            return [this.expressionMap.valuesSet];\n\n        throw new Error(`Cannot perform insert query because values are not defined. Call \"qb.values(...)\" method to specify inserted values.`);\n    }\n\n}\n","import {QueryBuilder} from \"./QueryBuilder\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {QueryExpressionMap} from \"./QueryExpressionMap\";\n\n/**\n * Allows to work with entity relations and perform specific operations with those relations.\n *\n * todo: add transactions everywhere\n */\nexport class RelationUpdater {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected queryBuilder: QueryBuilder<any>,\n                protected expressionMap: QueryExpressionMap) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs set or add operation on a relation.\n     */\n    async update(value: any|any[]): Promise<void> {\n        const relation = this.expressionMap.relationMetadata;\n\n        if (relation.isManyToOne || relation.isOneToOneOwner) {\n\n            const updateSet = relation.joinColumns.reduce((updateSet, joinColumn) => {\n                const relationValue = value instanceof Object ? joinColumn.referencedColumn!.getEntityValue(value) : value;\n                joinColumn.setEntityValue(updateSet, relationValue);\n                return updateSet;\n            }, {} as any);\n\n            if (!this.expressionMap.of || (this.expressionMap.of instanceof Array && !this.expressionMap.of.length)) return;\n\n            await this.queryBuilder\n                .createQueryBuilder()\n                .update(relation.entityMetadata.target)\n                .set(updateSet)\n                .whereInIds(this.expressionMap.of)\n                .execute();\n\n        } else if ((relation.isOneToOneNotOwner || relation.isOneToMany) && value === null) { // we handle null a bit different way\n\n            const updateSet: ObjectLiteral = {};\n            relation.inverseRelation!.joinColumns.forEach(column => {\n                updateSet[column.propertyName] = null;\n            });\n\n            const ofs = this.expressionMap.of instanceof Array ? this.expressionMap.of : [this.expressionMap.of];\n            const parameters: ObjectLiteral = {};\n            const conditions: string[] = [];\n            ofs.forEach((of, ofIndex) => {\n                relation.inverseRelation!.joinColumns.map((column, columnIndex) => {\n                    const parameterName = \"joinColumn_\" + ofIndex + \"_\" + columnIndex;\n                    parameters[parameterName] = of instanceof Object ? column.referencedColumn!.getEntityValue(of) : of;\n                    conditions.push(`${column.propertyPath} = :${parameterName}`);\n                });\n            });\n            const condition = conditions.map(str => \"(\" + str + \")\").join(\" OR \");\n            if (!condition) return;\n\n            await this.queryBuilder\n                .createQueryBuilder()\n                .update(relation.inverseEntityMetadata.target)\n                .set(updateSet)\n                .where(condition)\n                .setParameters(parameters)\n                .execute();\n\n        } else if (relation.isOneToOneNotOwner || relation.isOneToMany) {\n\n            if (this.expressionMap.of instanceof Array)\n                throw new Error(`You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.`);\n\n            const of = this.expressionMap.of;\n            const updateSet = relation.inverseRelation!.joinColumns.reduce((updateSet, joinColumn) => {\n                const relationValue = of instanceof Object ? joinColumn.referencedColumn!.getEntityValue(of) : of;\n                joinColumn.setEntityValue(updateSet, relationValue);\n                return updateSet;\n            }, {} as any);\n\n            if (!value || (value instanceof Array && !value.length)) return;\n\n            await this.queryBuilder\n                .createQueryBuilder()\n                .update(relation.inverseEntityMetadata.target)\n                .set(updateSet)\n                .whereInIds(value)\n                .execute();\n\n        } else { // many to many\n            const junctionMetadata = relation.junctionEntityMetadata!;\n            const ofs = this.expressionMap.of instanceof Array ? this.expressionMap.of : [this.expressionMap.of];\n            const values = value instanceof Array ? value : [value];\n            const firstColumnValues = relation.isManyToManyOwner ? ofs : values;\n            const secondColumnValues = relation.isManyToManyOwner ? values : ofs;\n\n            const bulkInserted: ObjectLiteral[] = [];\n            firstColumnValues.forEach(firstColumnVal => {\n                secondColumnValues.forEach(secondColumnVal => {\n                    const inserted: ObjectLiteral = {};\n                    junctionMetadata.ownerColumns.forEach(column => {\n                        inserted[column.databaseName] = firstColumnVal instanceof Object ? column.referencedColumn!.getEntityValue(firstColumnVal) : firstColumnVal;\n                    });\n                    junctionMetadata.inverseColumns.forEach(column => {\n                        inserted[column.databaseName] = secondColumnVal instanceof Object ? column.referencedColumn!.getEntityValue(secondColumnVal) : secondColumnVal;\n                    });\n                    bulkInserted.push(inserted);\n                });\n            });\n\n            if (!bulkInserted.length) return;\n\n            await this.queryBuilder\n                .createQueryBuilder()\n                .insert()\n                .into(junctionMetadata.tableName)\n                .values(bulkInserted)\n                .execute();\n        }\n    }\n\n}","import {QueryBuilder} from \"./QueryBuilder\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {QueryExpressionMap} from \"./QueryExpressionMap\";\n\n/**\n * Allows to work with entity relations and perform specific operations with those relations.\n *\n * todo: add transactions everywhere\n */\nexport class RelationRemover {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected queryBuilder: QueryBuilder<any>,\n                protected expressionMap: QueryExpressionMap) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs remove operation on a relation.\n     */\n    async remove(value: any|any[]): Promise<void> {\n        const relation = this.expressionMap.relationMetadata;\n\n        if (relation.isOneToMany) {\n\n            // if (this.expressionMap.of instanceof Array)\n            //     throw new Error(`You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.`);\n\n            // DELETE FROM post WHERE post.categoryId = of AND post.id = id\n            const ofs = this.expressionMap.of instanceof Array ? this.expressionMap.of : [this.expressionMap.of];\n            const values = value instanceof Array ? value : [value];\n\n            const updateSet: ObjectLiteral = {};\n            relation.inverseRelation!.joinColumns.forEach(column => {\n                updateSet[column.propertyName] = null;\n            });\n\n            const parameters: ObjectLiteral = {};\n            const conditions: string[] = [];\n            ofs.forEach((of, ofIndex) => {\n                conditions.push(...values.map((value, valueIndex) => {\n                    return [\n                        ...relation.inverseRelation!.joinColumns.map((column, columnIndex) => {\n                            const parameterName = \"joinColumn_\" + ofIndex + \"_\" + valueIndex + \"_\" + columnIndex;\n                            parameters[parameterName] = of instanceof Object ? column.referencedColumn!.getEntityValue(of) : of;\n                            return `${column.propertyPath} = :${parameterName}`;\n                        }),\n                        ...relation.inverseRelation!.entityMetadata.primaryColumns.map((column, columnIndex) => {\n                            const parameterName = \"primaryColumn_\" + valueIndex + \"_\" + valueIndex + \"_\" + columnIndex;\n                            parameters[parameterName] = value instanceof Object ? column.getEntityValue(value) : value;\n                            return `${column.propertyPath} = :${parameterName}`;\n                        })\n                    ].join(\" AND \");\n                }));\n            });\n            const condition = conditions.map(str => \"(\" + str + \")\").join(\" OR \");\n            if (!condition) return;\n\n            await this.queryBuilder\n                .createQueryBuilder()\n                .update(relation.inverseEntityMetadata.target)\n                .set(updateSet)\n                .where(condition)\n                .setParameters(parameters)\n                .execute();\n\n        } else { // many to many\n\n            const junctionMetadata = relation.junctionEntityMetadata!;\n            const ofs = this.expressionMap.of instanceof Array ? this.expressionMap.of : [this.expressionMap.of];\n            const values = value instanceof Array ? value : [value];\n            const firstColumnValues = relation.isManyToManyOwner ? ofs : values;\n            const secondColumnValues = relation.isManyToManyOwner ? values : ofs;\n\n            const parameters: ObjectLiteral = {};\n            const conditions: string[] = [];\n            firstColumnValues.forEach((firstColumnVal, firstColumnValIndex) => {\n                conditions.push(...secondColumnValues.map((secondColumnVal, secondColumnValIndex) => {\n                    return [\n                        ...junctionMetadata.ownerColumns.map((column, columnIndex) => {\n                            const parameterName = \"firstValue_\" + firstColumnValIndex + \"_\" + secondColumnValIndex + \"_\" + columnIndex;\n                            parameters[parameterName] = firstColumnVal instanceof Object ? column.referencedColumn!.getEntityValue(firstColumnVal) : firstColumnVal;\n                            return `${column.databaseName} = :${parameterName}`;\n                        }),\n                        ...junctionMetadata.inverseColumns.map((column, columnIndex) => {\n                            const parameterName = \"secondValue_\" + firstColumnValIndex + \"_\" + secondColumnValIndex + \"_\" + columnIndex;\n                            parameters[parameterName] = firstColumnVal instanceof Object ? column.referencedColumn!.getEntityValue(secondColumnVal) : secondColumnVal;\n                            return `${column.databaseName} = :${parameterName}`;\n                        })\n                    ].join(\" AND \");\n                }));\n            });\n            const condition = conditions.map(str => \"(\" + str + \")\").join(\" OR \");\n\n            await this.queryBuilder\n                .createQueryBuilder()\n                .delete()\n                .from(junctionMetadata.tableName)\n                .where(condition)\n                .setParameters(parameters)\n                .execute();\n        }\n    }\n\n}","import {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {Connection} from \"../connection/Connection\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\n\n/**\n * Wraps entities and creates getters/setters for their relations\n * to be able to lazily load relations when accessing these relations.\n */\nexport class RelationLoader {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads relation data for the given entity and its relation.\n     */\n    load(relation: RelationMetadata, entity: ObjectLiteral): Promise<any> {\n        if (relation.isManyToOne || relation.isOneToOneOwner) {\n            return this.loadManyToOneOrOneToOneOwner(relation, entity);\n\n        } else if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n            return this.loadOneToManyOrOneToOneNotOwner(relation, entity);\n\n        } else if (relation.isManyToManyOwner) {\n            return this.loadManyToManyOwner(relation, entity);\n\n        } else { // many-to-many non owner\n            return this.loadManyToManyNotOwner(relation, entity);\n        }\n    }\n\n    /**\n     * Loads data for many-to-one and one-to-one owner relations.\n     *\n     * (ow) post.category<=>category.post\n     * loaded: category from post\n     * example: SELECT category.id AS category_id, category.name AS category_name FROM category category\n     *              INNER JOIN post Post ON Post.category=category.id WHERE Post.id=1\n     */\n    loadManyToOneOrOneToOneOwner(relation: RelationMetadata, entity: ObjectLiteral): Promise<any> {\n        const primaryColumns = relation.entityMetadata.primaryColumns;\n        const joinColumns = relation.isOwning ? relation.joinColumns : relation.inverseRelation!.joinColumns;\n        const conditions = joinColumns.map(joinColumn => {\n            return `${relation.entityMetadata.name}.${relation.propertyName} = ${relation.propertyName}.${joinColumn.referencedColumn!.propertyName}`;\n        }).join(\" AND \");\n\n        const qb = this.connection\n            .createQueryBuilder()\n            .select(relation.propertyName) // category\n            .from(relation.type, relation.propertyName) // Category, category\n            .innerJoin(relation.entityMetadata.target as Function, relation.entityMetadata.name, conditions);\n\n        primaryColumns.forEach(primaryColumn => {\n            qb.andWhere(`${relation.entityMetadata.name}.${primaryColumn.propertyPath} = :${primaryColumn.propertyName}`)\n                .setParameter(`${primaryColumn.propertyName}`, primaryColumn.getEntityValue(entity));\n        });\n\n        return qb.getOne();\n    }\n\n    /**\n     * Loads data for one-to-many and one-to-one not owner relations.\n     *\n     * SELECT post\n     * FROM post post\n     * WHERE post.[joinColumn.name] = entity[joinColumn.referencedColumn]\n     */\n    loadOneToManyOrOneToOneNotOwner(relation: RelationMetadata, entity: ObjectLiteral): Promise<any> {\n        const qb = this.connection\n            .createQueryBuilder()\n            .select(relation.propertyName)\n            .from(relation.inverseRelation!.entityMetadata.target, relation.propertyName);\n\n        relation.inverseRelation!.joinColumns.forEach(joinColumn => {\n            qb.andWhere(`${relation.propertyName}.${joinColumn.propertyName} = :${joinColumn.referencedColumn!.propertyName}`)\n                .setParameter(`${joinColumn.referencedColumn!.propertyName}`, joinColumn.referencedColumn!.getEntityValue(entity));\n        });\n        return relation.isOneToMany ? qb.getMany() : qb.getOne();\n    }\n\n    /**\n     * Loads data for many-to-many owner relations.\n     *\n     * SELECT category\n     * FROM category category\n     * INNER JOIN post_categories post_categories\n     * ON post_categories.postId = :postId\n     * AND post_categories.categoryId = category.id\n     */\n    loadManyToManyOwner(relation: RelationMetadata, entity: ObjectLiteral): Promise<any> {\n        const mainAlias = relation.propertyName;\n        const joinAlias = relation.junctionEntityMetadata!.tableName;\n        const joinColumnConditions = relation.joinColumns.map(joinColumn => {\n            return `${joinAlias}.${joinColumn.propertyName} = :${joinColumn.propertyName}`;\n        });\n        const inverseJoinColumnConditions = relation.inverseJoinColumns.map(inverseJoinColumn => {\n            return `${joinAlias}.${inverseJoinColumn.propertyName}=${mainAlias}.${inverseJoinColumn.referencedColumn!.propertyName}`;\n        });\n        const parameters = relation.joinColumns.reduce((parameters, joinColumn) => {\n            parameters[joinColumn.propertyName] = joinColumn.referencedColumn!.getEntityValue(entity);\n            return parameters;\n        }, {} as ObjectLiteral);\n\n        return this.connection\n            .createQueryBuilder()\n            .select(mainAlias)\n            .from(relation.type, mainAlias)\n            .innerJoin(joinAlias, joinAlias, [...joinColumnConditions, ...inverseJoinColumnConditions].join(\" AND \"))\n            .setParameters(parameters)\n            .getMany();\n    }\n\n    /**\n     * Loads data for many-to-many not owner relations.\n     *\n     * SELECT post\n     * FROM post post\n     * INNER JOIN post_categories post_categories\n     * ON post_categories.postId = post.id\n     * AND post_categories.categoryId = post_categories.categoryId\n     */\n    loadManyToManyNotOwner(relation: RelationMetadata, entity: ObjectLiteral): Promise<any> {\n        const mainAlias = relation.propertyName;\n        const joinAlias = relation.junctionEntityMetadata!.tableName;\n        const joinColumnConditions = relation.inverseRelation!.joinColumns.map(joinColumn => {\n            return `${joinAlias}.${joinColumn.propertyName} = ${mainAlias}.${joinColumn.referencedColumn!.propertyName}`;\n        });\n        const inverseJoinColumnConditions = relation.inverseRelation!.inverseJoinColumns.map(inverseJoinColumn => {\n            return `${joinAlias}.${inverseJoinColumn.propertyName} = :${inverseJoinColumn.propertyName}`;\n        });\n        const parameters = relation.inverseRelation!.inverseJoinColumns.reduce((parameters, joinColumn) => {\n            parameters[joinColumn.propertyName] = joinColumn.referencedColumn!.getEntityValue(entity);\n            return parameters;\n        }, {} as ObjectLiteral);\n\n        return this.connection\n            .createQueryBuilder()\n            .select(mainAlias)\n            .from(relation.type, mainAlias)\n            .innerJoin(joinAlias, joinAlias, [...joinColumnConditions, ...inverseJoinColumnConditions].join(\" AND \"))\n            .setParameters(parameters)\n            .getMany();\n    }\n\n}","import {QueryBuilder} from \"./QueryBuilder\";\nimport {RelationUpdater} from \"./RelationUpdater\";\nimport {RelationRemover} from \"./RelationRemover\";\nimport {RelationLoader} from \"./RelationLoader\";\n\n/**\n * Allows to work with entity relations and perform specific operations with those relations.\n *\n * todo: add transactions everywhere\n */\nexport class RelationQueryBuilder<Entity> extends QueryBuilder<Entity> {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    getQuery(): string {\n        return \"\";\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Sets entity (target) which relations will be updated.\n     */\n    of(entity: any|any[]): this {\n        this.expressionMap.of = entity;\n        return this;\n    }\n\n    /**\n     * Sets entity relation's value.\n     * Value can be entity, entity id or entity id map (if entity has composite ids).\n     * Works only for many-to-one and one-to-one relations.\n     * For many-to-many and one-to-many relations use #add and #remove methods instead.\n     */\n    async set(value: any): Promise<void> {\n        const relation = this.expressionMap.relationMetadata;\n\n        if (!this.expressionMap.of) // todo: move this check before relation query builder creation?\n            throw new Error(`Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.`);\n\n        if (relation.isManyToMany || relation.isOneToMany)\n            throw new Error(`Set operation is only supported for many-to-one and one-to-one relations. ` +\n                `However given \"${relation.propertyPath}\" has ${relation.relationType} relation. ` +\n                `Use .add() method instead.`);\n\n        // if there are multiple join columns then user must send id map as \"value\" argument. check if he really did it\n        if (relation.joinColumns &&\n            relation.joinColumns.length > 1 &&\n            (!(value instanceof Object) || Object.keys(value).length < relation.joinColumns.length))\n            throw new Error(`Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: \"...\", lastName: \"...\" })`);\n\n        const updater = new RelationUpdater(this, this.expressionMap);\n        return updater.update(value);\n    }\n\n    /**\n     * Adds (binds) given value to entity relation.\n     * Value can be entity, entity id or entity id map (if entity has composite ids).\n     * Value also can be array of entities, array of entity ids or array of entity id maps (if entity has composite ids).\n     * Works only for many-to-many and one-to-many relations.\n     * For many-to-one and one-to-one use #set method instead.\n     */\n    async add(value: any|any[]): Promise<void> {\n        if (value instanceof Array && value.length === 0)\n            return;\n\n        const relation = this.expressionMap.relationMetadata;\n\n        if (!this.expressionMap.of) // todo: move this check before relation query builder creation?\n            throw new Error(`Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.`);\n\n        if (relation.isManyToOne || relation.isOneToOne)\n            throw new Error(`Add operation is only supported for many-to-many and one-to-many relations. ` +\n                `However given \"${relation.propertyPath}\" has ${relation.relationType} relation. ` +\n                `Use .set() method instead.`);\n\n        // if there are multiple join columns then user must send id map as \"value\" argument. check if he really did it\n        if (relation.joinColumns &&\n            relation.joinColumns.length > 1 &&\n            (!(value instanceof Object) || Object.keys(value).length < relation.joinColumns.length))\n            throw new Error(`Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: \"...\", lastName: \"...\" })`);\n\n        const updater = new RelationUpdater(this, this.expressionMap);\n        return updater.update(value);\n    }\n\n    /**\n     * Removes (unbinds) given value from entity relation.\n     * Value can be entity, entity id or entity id map (if entity has composite ids).\n     * Value also can be array of entities, array of entity ids or array of entity id maps (if entity has composite ids).\n     * Works only for many-to-many and one-to-many relations.\n     * For many-to-one and one-to-one use #set method instead.\n     */\n    async remove(value: any|any[]): Promise<void> {\n        if (value instanceof Array && value.length === 0)\n            return;\n\n        const relation = this.expressionMap.relationMetadata;\n\n        if (!this.expressionMap.of) // todo: move this check before relation query builder creation?\n            throw new Error(`Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.`);\n\n        if (relation.isManyToOne || relation.isOneToOne)\n            throw new Error(`Add operation is only supported for many-to-many and one-to-many relations. ` +\n                `However given \"${relation.propertyPath}\" has ${relation.relationType} relation. ` +\n                `Use .set(null) method instead.`);\n\n        const remover = new RelationRemover(this, this.expressionMap);\n        return remover.remove(value);\n    }\n\n    /**\n     * Adds (binds) and removes (unbinds) given values to/from entity relation.\n     * Value can be entity, entity id or entity id map (if entity has composite ids).\n     * Value also can be array of entities, array of entity ids or array of entity id maps (if entity has composite ids).\n     * Works only for many-to-many and one-to-many relations.\n     * For many-to-one and one-to-one use #set method instead.\n     */\n    async addAndRemove(added: any|any[], removed: any|any[]): Promise<void> {\n        await this.remove(removed);\n        await this.add(added);\n    }\n\n    /**\n     * Gets entity's relation id.\n    async getId(): Promise<any> {\n\n    }*/\n\n    /**\n     * Gets entity's relation ids.\n    async getIds(): Promise<any[]> {\n        return [];\n    }*/\n\n    /**\n     * Loads a single entity (relational) from the relation.\n     * You can also provide id of relational entity to filter by.\n     */\n    async loadOne<T = any>(): Promise<T|undefined> {\n        let of = this.expressionMap.of;\n        if (!(of instanceof Object)) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n            if (metadata.hasMultiplePrimaryKeys)\n                throw new Error(`Cannot load entity because only one primary key was specified, however entity contains multiple primary keys`);\n\n            of = metadata.primaryColumns[0].createValueMap(of);\n        }\n\n        const relationLoader = new RelationLoader(this.connection);\n        return relationLoader.load(this.expressionMap.relationMetadata, of);\n    }\n\n    /**\n     * Loads many entities (relational) from the relation.\n     * You can also provide ids of relational entities to filter by.\n     */\n    async loadMany<T = any>(): Promise<T[]> {\n        return this.loadOne();\n    }\n\n}","import {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\nimport {InsertResult} from \"../InsertResult\";\nimport {AbstractSqliteQueryRunner} from \"../sqlite-abstract/AbstractSqliteQueryRunner\";\nimport {SqljsDriver} from \"./SqljsDriver\";\n\n/**\n * Runs queries on a single sqlite database connection.\n *\n * Does not support compose primary keys with autoincrement field.\n * todo: need to throw exception for this case.\n */\nexport class SqljsQueryRunner extends AbstractSqliteQueryRunner {\n    \n    /**\n     * Database driver used by connection.\n     */\n    driver: SqljsDriver;\n    \n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: SqljsDriver) {\n        super(driver);\n        this.driver = driver;\n        this.connection = driver.connection;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public methods\n    // -------------------------------------------------------------------------\n    \n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async commitTransaction(): Promise<void> {\n        await super.commitTransaction();\n        await this.driver.autoSave();\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise<any[]>(async (ok, fail) => {\n            const databaseConnection = await this.connect();\n            this.driver.connection.logger.logQuery(query, parameters, this);\n            const queryStartTime = +new Date();\n            try {\n                const statement = databaseConnection.prepare(query);\n                statement.bind(parameters);\n                \n                // log slow queries if maxQueryExecution time is set\n                const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                const queryEndTime = +new Date();\n                const queryExecutionTime = queryEndTime - queryStartTime;\n                if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                    this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                const result: any[] = [];\n\n                while (statement.step()) {\n                    result.push(statement.getAsObject());\n                }\n                \n                statement.free();\n                ok(result);\n            }\n            catch (e) {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tableName: string, keyValues: ObjectLiteral): Promise<InsertResult> {\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\"${key}\"`).join(\", \");\n        const values = keys.map((key) => \"?\").join(\",\");\n        const generatedColumns = this.connection.hasMetadata(tableName) ? this.connection.getMetadata(tableName).generatedColumns : [];\n        const sql = columns.length > 0 ? (`INSERT INTO \"${tableName}\"(${columns}) VALUES (${values})`) : `INSERT INTO \"${tableName}\" DEFAULT VALUES`;\n        const parameters = keys.map(key => keyValues[key]);\n\n        return new Promise<InsertResult>(async (ok, fail) => {\n            this.driver.connection.logger.logQuery(sql, parameters, this);\n            const databaseConnection = await this.connect();\n            try {\n                const statement = databaseConnection.prepare(sql);\n                statement.bind(parameters);\n                statement.step();\n                \n                const generatedMap = generatedColumns.reduce((map, generatedColumn) => {\n                    let value = keyValues[generatedColumn.databaseName];\n                    // seems to be the only way to get the inserted id, see https://github.com/kripken/sql.js/issues/77\n                    if (generatedColumn.isPrimary && generatedColumn.generationStrategy === \"increment\") {\n                        value = databaseConnection.exec(\"SELECT last_insert_rowid()\")[0].values[0][0];\n                    }\n                    \n                    if (!value) return map;\n                    return OrmUtils.mergeDeep(map, generatedColumn.createValueMap(value));\n                }, {} as ObjectLiteral);\n\n                if (!this.isTransactionActive) {\n                    await this.driver.autoSave();\n                }\n                \n                ok({\n                    result: undefined,\n                    generatedMap: Object.keys(generatedMap).length > 0 ? generatedMap : undefined\n                });\n            }\n            catch (e) {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     * Calls AbstractSqliteQueryRunner.update() and runs autoSave if update() was not called in a transaction.\n     */\n    async update(tableName: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        await super.update(tableName, valuesMap, conditions);\n        \n        if (!this.isTransactionActive) {\n            await this.driver.autoSave();\n        }\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     * Calls AbstractSqliteQueryRunner.delete() and runs autoSave if delete() was not called in a transaction.\n     */\n    async delete(tableName: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        await super.delete(tableName, conditions, maybeParameters);\n        \n        if (!this.isTransactionActive) {\n            await this.driver.autoSave();\n        }\n    }\n}","/**\n * Thrown if some required driver's option is not set.\n */\nexport class DriverOptionNotSetError extends Error {\n    name = \"DriverOptionNotSetError\";\n\n    constructor(optionName: string) {\n        super();\n        this.message = `Driver option (${optionName}) is not set. Please set it to perform connection to the database.`;\n    }\n\n}","import {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\nimport {SqljsConnectionOptions} from \"./SqljsConnectionOptions\";\nimport {SqljsQueryRunner} from \"./SqljsQueryRunner\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {Connection} from \"../../connection/Connection\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\n\n// This is needed to satisfy the typescript compiler.\ninterface Window {\n    SQL: any;\n}\ndeclare var window: Window;\n\nexport class SqljsDriver extends AbstractSqliteDriver {\n    // The driver specific options.\n    options: SqljsConnectionOptions;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n\n        // If autoSave is enabled by user, location or autoSaveCallback have to be set\n        // because either autoSave saves to location or calls autoSaveCallback.\n        if (this.options.autoSave && !this.options.location && !this.options.autoSaveCallback) {\n            throw new DriverOptionNotSetError(`location or autoSaveCallback`);\n        }\n\n        // load sql.js package\n        this.loadDependencies();\n    }\n\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n        this.databaseConnection = await this.createDatabaseConnection();\n    }\n\n    /**\n     * Closes connection with database.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            try {\n                this.queryRunner = undefined;\n                this.databaseConnection.close();\n                ok();\n            }\n            catch (e)  {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\" | \"slave\" = \"master\"): QueryRunner {\n        if (!this.queryRunner)\n            this.queryRunner = new SqljsQueryRunner(this);\n\n        return this.queryRunner;\n    }\n    \n    /**\n     * Loads a database from a given file (Node.js), local storage key (browser) or array.\n     * This will delete the current database!\n     */\n    load(fileNameOrLocalStorageOrData: string | Uint8Array): Promise<any> {\n        if (typeof fileNameOrLocalStorageOrData === \"string\") {\n            // content has to be loaded\n            if (PlatformTools.type === \"node\") {\n                // Node.js\n                // fileNameOrLocalStorageOrData should be a path to the file\n                if (PlatformTools.fileExist(fileNameOrLocalStorageOrData)) {\n                    const database = PlatformTools.readFileSync(fileNameOrLocalStorageOrData);\n                    return this.createDatabaseConnectionWithImport(database);\n                }\n                else {\n                    throw new Error(`File ${fileNameOrLocalStorageOrData} does not exist`);\n                }\n            } \n            else {\n                // browser\n                // fileNameOrLocalStorageOrData should be a local storage key\n                const localStorageContent = PlatformTools.getGlobalVariable().localStorage.getItem(fileNameOrLocalStorageOrData);\n                return this.createDatabaseConnectionWithImport(JSON.parse(localStorageContent));\n            }\n        }\n        else {\n            return this.createDatabaseConnectionWithImport(fileNameOrLocalStorageOrData);\n        }\n    }\n\n    /**\n     * Saved the current database to the given file (Node.js) or local storage key (browser).\n     * If no location path is given, the location path in the options (if specified) will be used.\n     */\n    async save(location?: string) {\n        if (!location && !this.options.location) {\n            throw new Error(`No location is set, specify a location parameter or add the location option to your configuration`);\n        }\n        \n        let path = \"\";\n        if (location) {\n            path = location;\n        }\n        else if (this.options.location) {\n            path = this.options.location;\n        }\n\n        if (PlatformTools.type === \"node\") {\n            try {\n                const content = new Buffer(this.databaseConnection.export());\n                await PlatformTools.writeFile(path, content);\n            }\n            catch (e) {\n                throw new Error(`Could not save database, error: ${e}`);\n            }\n        }\n        else {\n            const database: Uint8Array = this.databaseConnection.export();\n            // convert Uint8Array to number array to improve local-storage storage\n            const databaseArray = [].slice.call(database);\n            PlatformTools.getGlobalVariable().localStorage.setItem(path, JSON.stringify(databaseArray));\n        }\n    }\n\n    /**\n     * This gets called by the QueryRunner when a change to the database is made.\n     * If a custom autoSaveCallback is specified, it get's called with the database as Uint8Array,\n     * otherwise the save method is called which saves it to file (Node.js) or localstorage (browser).\n     */\n    async autoSave() {\n        if (this.options.autoSave) {\n            if (this.options.autoSaveCallback) {\n                await this.options.autoSaveCallback(this.export());\n            }\n            else {\n                await this.save();\n            }\n        }\n    }\n    \n    /**\n     * Returns the current database as Uint8Array.\n     */\n    export(): Uint8Array {\n        return this.databaseConnection.export();\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates connection with the database.\n     * If the location option is set, the database is loaded first.\n     */\n    protected createDatabaseConnection(): Promise<any> {\n        if (this.options.location) {\n            return this.load(this.options.location);\n        }\n\n        return this.createDatabaseConnectionWithImport(this.options.database);\n    }\n\n    /**\n     * Creates connection with an optional database.\n     * If database is specified it is loaded, otherwise a new empty database is created.\n     */\n    protected createDatabaseConnectionWithImport(database?: Uint8Array): Promise<any> {\n        if (database && database.length > 0) {\n            this.databaseConnection = new this.sqlite.Database(database);\n        }\n        else {\n            this.databaseConnection = new this.sqlite.Database();\n        }\n\n        // Enable foreign keys for database\n        return new Promise<any>((ok, fail) => {\n            try {\n                this.databaseConnection.exec(`PRAGMA foreign_keys = ON;`);\n                ok(this.databaseConnection);\n            }\n            catch (e) {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        if (PlatformTools.type === \"browser\") {\n            this.sqlite = window.SQL;\n        }\n        else {\n            try {\n                this.sqlite = PlatformTools.load(\"sql.js\");\n\n            } catch (e) {\n                throw new DriverPackageNotInstalledError(\"sql.js\", \"sql.js\");\n            }\n        }\n    }\n}","import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {Connection} from \"../connection/Connection\";\nimport {QueryExpressionMap} from \"./QueryExpressionMap\";\nimport {SelectQueryBuilder} from \"./SelectQueryBuilder\";\nimport {UpdateQueryBuilder} from \"./UpdateQueryBuilder\";\nimport {DeleteQueryBuilder} from \"./DeleteQueryBuilder\";\nimport {InsertQueryBuilder} from \"./InsertQueryBuilder\";\nimport {RelationQueryBuilder} from \"./RelationQueryBuilder\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {Alias} from \"./Alias\";\nimport {Brackets} from \"./Brackets\";\nimport {QueryPartialEntity} from \"./QueryPartialEntity\";\nimport {WhereExpression} from \"./WhereExpression\";\nimport {EntityMetadataUtils} from \"../metadata/EntityMetadataUtils\";\nimport {SqljsDriver} from \"../driver/sqljs/SqljsDriver\";\n\n// todo: completely cover query builder with tests\n// todo: entityOrProperty can be target name. implement proper behaviour if it is.\n// todo: check in persistment if id exist on object and throw exception (can be in partial selection?)\n// todo: fix problem with long aliases eg getMaxIdentifierLength\n// todo: fix replacing in .select(\"COUNT(post.id) AS cnt\") statement\n// todo: implement joinAlways in relations and relationId\n// todo: finish partial selection\n// todo: sugar methods like: .addCount and .selectCount, selectCountAndMap, selectSum, selectSumAndMap, ...\n// todo: implement @Select decorator\n// todo: add select and map functions\n\n// todo: implement relation/entity loading and setting them into properties within a separate query\n// .loadAndMap(\"post.categories\", \"post.categories\", qb => ...)\n// .loadAndMap(\"post.categories\", Category, qb => ...)\n\n/**\n * Allows to build complex sql queries in a fashion way and execute those queries.\n */\nexport abstract class QueryBuilder<Entity> {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection on which QueryBuilder was created.\n     */\n    readonly connection: Connection;\n\n    /**\n     * Contains all properties of the QueryBuilder that needs to be build a final query.\n     */\n    readonly expressionMap: QueryExpressionMap;\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Query runner used to execute query builder query.\n     */\n    protected queryRunner?: QueryRunner;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    /**\n     * QueryBuilder can be initialized from given Connection and QueryRunner objects or from given other QueryBuilder.\n     */\n    constructor(queryBuilder: QueryBuilder<any>);\n\n    /**\n     * QueryBuilder can be initialized from given Connection and QueryRunner objects or from given other QueryBuilder.\n     */\n    constructor(connection: Connection, queryRunner?: QueryRunner);\n\n    /**\n     * QueryBuilder can be initialized from given Connection and QueryRunner objects or from given other QueryBuilder.\n     */\n    constructor(connectionOrQueryBuilder: Connection|QueryBuilder<any>, queryRunner?: QueryRunner) {\n        if (connectionOrQueryBuilder instanceof QueryBuilder) {\n            this.connection = connectionOrQueryBuilder.connection;\n            this.queryRunner = connectionOrQueryBuilder.queryRunner;\n            this.expressionMap = connectionOrQueryBuilder.expressionMap.clone();\n\n        } else {\n            this.connection = connectionOrQueryBuilder;\n            this.queryRunner = queryRunner;\n            this.expressionMap = new QueryExpressionMap(this.connection);\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Abstract Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    abstract getQuery(): string;\n\n    // -------------------------------------------------------------------------\n    // Accessors\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets the main alias string used in this query builder.\n     */\n    get alias(): string {\n        if (!this.expressionMap.mainAlias)\n            throw new Error(`Main alias is not set`); // todo: better exception\n\n        return this.expressionMap.mainAlias.name;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates SELECT query.\n     * Replaces all previous selections if they exist.\n     */\n    select(): SelectQueryBuilder<Entity>;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string, selectionAliasName?: string): SelectQueryBuilder<Entity>;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string[]): SelectQueryBuilder<Entity>;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection?: string|string[], selectionAliasName?: string): SelectQueryBuilder<Entity> {\n        this.expressionMap.queryType = \"select\";\n        if (selection instanceof Array) {\n            this.expressionMap.selects = selection.map(selection => ({ selection: selection }));\n        } else if (selection) {\n            this.expressionMap.selects = [{ selection: selection, aliasName: selectionAliasName }];\n        }\n\n        // loading it dynamically because of circular issue\n        const SelectQueryBuilderCls = require(\"./SelectQueryBuilder\").SelectQueryBuilder;\n        if (this instanceof SelectQueryBuilderCls)\n            return this as any;\n\n        return new SelectQueryBuilderCls(this);\n    }\n\n    /**\n     * Creates INSERT query.\n     */\n    insert(): InsertQueryBuilder<Entity> {\n        this.expressionMap.queryType = \"insert\";\n\n        // loading it dynamically because of circular issue\n        const InsertQueryBuilderCls = require(\"./InsertQueryBuilder\").InsertQueryBuilder;\n        if (this instanceof InsertQueryBuilderCls)\n            return this as any;\n\n        return new InsertQueryBuilderCls(this);\n    }\n\n    /**\n     * Creates UPDATE query and applies given update values.\n     */\n    update(): UpdateQueryBuilder<Entity>;\n\n    /**\n     * Creates UPDATE query and applies given update values.\n     */\n    update(updateSet: QueryPartialEntity<Entity>): UpdateQueryBuilder<Entity>;\n\n    /**\n     * Creates UPDATE query for the given entity and applies given update values.\n     */\n    update<T>(entity: ObjectType<T>, updateSet?: QueryPartialEntity<T>): UpdateQueryBuilder<T>;\n\n    /**\n     * Creates UPDATE query for the given entity and applies given update values.\n     */\n    update(entity: Function|string, updateSet?: QueryPartialEntity<Entity>): UpdateQueryBuilder<Entity>;\n\n    /**\n     * Creates UPDATE query for the given table name and applies given update values.\n     */\n    update(tableName: string, updateSet?: QueryPartialEntity<Entity>): UpdateQueryBuilder<Entity>;\n\n    /**\n     * Creates UPDATE query and applies given update values.\n     */\n    update(entityOrTableNameUpdateSet?: string|Function|ObjectLiteral, maybeUpdateSet?: ObjectLiteral): UpdateQueryBuilder<any> {\n        const updateSet = maybeUpdateSet ? maybeUpdateSet : entityOrTableNameUpdateSet as ObjectLiteral|undefined;\n\n        if (entityOrTableNameUpdateSet instanceof Function || typeof entityOrTableNameUpdateSet === \"string\") {\n            const mainAlias = this.createFromAlias(entityOrTableNameUpdateSet);\n            this.expressionMap.setMainAlias(mainAlias);\n        }\n\n        this.expressionMap.queryType = \"update\";\n        this.expressionMap.valuesSet = updateSet;\n\n        // loading it dynamically because of circular issue\n        const UpdateQueryBuilderCls = require(\"./UpdateQueryBuilder\").UpdateQueryBuilder;\n        if (this instanceof UpdateQueryBuilderCls)\n            return this as any;\n\n        return new UpdateQueryBuilderCls(this);\n    }\n\n    /**\n     * Creates DELETE query.\n     */\n    delete(): DeleteQueryBuilder<Entity> {\n        this.expressionMap.queryType = \"delete\";\n\n        // loading it dynamically because of circular issue\n        const DeleteQueryBuilderCls = require(\"./DeleteQueryBuilder\").DeleteQueryBuilder;\n        if (this instanceof DeleteQueryBuilderCls)\n            return this as any;\n\n        return new DeleteQueryBuilderCls(this);\n    }\n\n    /**\n     * Sets entity's relation with which this query builder gonna work.\n     */\n    relation(propertyPath: string): RelationQueryBuilder<Entity>;\n\n    /**\n     * Sets entity's relation with which this query builder gonna work.\n     */\n    relation<T>(entityTarget: ObjectType<T>|string, propertyPath: string): RelationQueryBuilder<T>;\n\n    /**\n     * Sets entity's relation with which this query builder gonna work.\n     */\n    relation(entityTargetOrPropertyPath: Function|string, maybePropertyPath?: string): RelationQueryBuilder<Entity> {\n        const entityTarget = arguments.length === 2 ? entityTargetOrPropertyPath : undefined;\n        const propertyPath = arguments.length === 2 ? maybePropertyPath as string : entityTargetOrPropertyPath as string;\n\n        this.expressionMap.queryType = \"relation\";\n        this.expressionMap.relationPropertyPath = propertyPath;\n\n        if (entityTarget) {\n            const mainAlias = this.createFromAlias(entityTarget);\n            this.expressionMap.setMainAlias(mainAlias);\n        }\n\n        // loading it dynamically because of circular issue\n        const RelationQueryBuilderCls = require(\"./RelationQueryBuilder\").RelationQueryBuilder;\n        if (this instanceof RelationQueryBuilderCls)\n            return this as any;\n\n        return new RelationQueryBuilderCls(this);\n    }\n\n\n    /**\n     * Checks if given relation exists in the entity.\n     * Returns true if relation exists, false otherwise.\n     */\n    hasRelation<T>(target: ObjectType<T>|string, relation: string): boolean;\n\n    /**\n     * Checks if given relations exist in the entity.\n     * Returns true if relation exists, false otherwise.\n     */\n    hasRelation<T>(target: ObjectType<T>|string, relation: string[]): boolean;\n\n    /**\n     * Checks if given relation or relations exist in the entity.\n     * Returns true if relation exists, false otherwise.\n     */\n    hasRelation<T>(target: ObjectType<T>|string, relation: string|string[]): boolean {\n        const entityMetadata = this.connection.getMetadata(target);\n        const relations = relation instanceof Array ? relation : [relation];\n        return relations.every(relation => {\n            return !!entityMetadata.findRelationWithPropertyPath(relation);\n        });\n    }\n\n    /**\n     * Sets parameter name and its value.\n     */\n    setParameter(key: string, value: any): this {\n        this.expressionMap.parameters[key] = value;\n        return this;\n    }\n\n    /**\n     * Adds all parameters from the given object.\n     */\n    setParameters(parameters: ObjectLiteral): this {\n\n        // set parent query builder parameters as well in sub-query mode\n        if (this.expressionMap.parentQueryBuilder)\n            this.expressionMap.parentQueryBuilder.setParameters(parameters);\n\n        Object.keys(parameters).forEach(key => {\n            this.expressionMap.parameters[key] = parameters[key];\n        });\n        return this;\n    }\n\n    /**\n     * Gets all parameters.\n     */\n    getParameters(): ObjectLiteral {\n        const parameters: ObjectLiteral = Object.assign({}, this.expressionMap.parameters);\n\n        // add discriminator column parameter if it exist\n        if (this.expressionMap.mainAlias && this.expressionMap.mainAlias.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n            if (metadata.discriminatorColumn && metadata.parentEntityMetadata) {\n                const values = metadata.childEntityMetadatas\n                    .filter(childMetadata => childMetadata.discriminatorColumn)\n                    .map(childMetadata => childMetadata.discriminatorValue);\n                values.push(metadata.discriminatorValue);\n                parameters[\"discriminatorColumnValues\"] = values;\n            }\n        }\n\n        return parameters;\n    }\n\n    /**\n     * Gets generated sql that will be executed.\n     * Parameters in the query are escaped for the currently used driver.\n     */\n    getSql(): string {\n        return this.connection.driver.escapeQueryWithParameters(this.getQuery(), this.getParameters())[0];\n    }\n\n    /**\n     * Prints sql to stdout using console.log.\n     */\n    printSql(): this {\n        console.log(this.getSql());\n        return this;\n    }\n\n    /**\n     * Gets query to be executed with all parameters used in it.\n     */\n    getQueryAndParameters(): [string, any[]] {\n        return this.connection.driver.escapeQueryWithParameters(this.getQuery(), this.getParameters());\n    }\n\n    /**\n     * Executes sql generated by query builder and returns raw database results.\n     */\n    async execute(): Promise<any> {\n        const [sql, parameters] = this.getQueryAndParameters();\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            return await queryRunner.query(sql, parameters);  // await is needed here because we are using finally\n\n        } finally {\n            if (queryRunner !== this.queryRunner) { // means we created our own query runner\n                await queryRunner.release();\n            }\n            if (this.connection.driver instanceof SqljsDriver) {\n                await this.connection.driver.autoSave();\n            }\n        }\n    }\n\n    /**\n     * Creates a completely new query builder.\n     * Uses same query runner as current QueryBuilder.\n     */\n    createQueryBuilder(): this {\n        return new (this.constructor as any)(this.connection, this.queryRunner);\n    }\n\n    /**\n     * Clones query builder as it is.\n     * Note: it uses new query runner, if you want query builder that uses exactly same query runner,\n     * you can create query builder using its constructor, for example new SelectQueryBuilder(queryBuilder)\n     * where queryBuilder is cloned QueryBuilder.\n     */\n    clone(): this {\n        return new (this.constructor as any)(this);\n    }\n\n    /**\n     * Disables escaping.\n     */\n    disableEscaping(): this {\n        this.expressionMap.disableEscaping = false;\n        return this;\n    }\n\n    /**\n     * Escapes table name, column name or alias name using current database's escaping character.\n     */\n    escape(name: string): string {\n        if (!this.expressionMap.disableEscaping)\n            return name;\n        return this.connection.driver.escape(name);\n    }\n\n    /**\n     * Sets or overrides query builder's QueryRunner.\n     */\n    setQueryRunner(queryRunner: QueryRunner): this {\n        this.queryRunner = queryRunner;\n        return this;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets escaped table name with schema name if SqlServer driver used with custom\n     * schema name, otherwise returns escaped table name.\n     */\n    protected getTableName(tablePath: string): string {\n        // let tablePath = tableName;\n        // const driver = this.connection.driver;\n        // const schema = (driver.options as SqlServerConnectionOptions|PostgresConnectionOptions).schema;\n        // const metadata = this.connection.hasMetadata(tableName) ? this.connection.getMetadata(tableName) : undefined;\n\n        /*if (driver instanceof SqlServerDriver || driver instanceof PostgresDriver || driver instanceof MysqlDriver) {\n            if (metadata) {\n                if (metadata.schema) {\n                    tablePath = `${metadata.schema}.${tableName}`;\n                } else if (schema) {\n                    tablePath = `${schema}.${tableName}`;\n                }\n\n                if (metadata.database && !(driver instanceof PostgresDriver)) {\n                    if (!schema && !metadata.schema && driver instanceof SqlServerDriver) {\n                        tablePath = `${metadata.database}..${tablePath}`;\n                    } else {\n                        tablePath = `${metadata.database}.${tablePath}`;\n                    }\n                }\n\n            } else if (schema) {\n                tablePath = `${schema!}.${tableName}`;\n            }\n        }*/\n        return tablePath.split(\".\")\n            .map(i => {\n                // this condition need because in SQL Server driver when custom database name was specified and schema name was not, we got `dbName..tableName` string, and doesn't need to escape middle empty string\n                if (i === \"\")\n                    return i;\n                return this.escape(i);\n            }).join(\".\");\n    }\n\n    /**\n     * Gets name of the table where insert should be performed.\n     */\n    protected getMainTableName(): string {\n        if (!this.expressionMap.mainAlias)\n            throw new Error(`Entity where values should be inserted is not specified. Call \"qb.into(entity)\" method to specify it.`);\n\n        if (this.expressionMap.mainAlias.hasMetadata)\n            return this.expressionMap.mainAlias.metadata.tablePath;\n\n        return this.expressionMap.mainAlias.tablePath!;\n    }\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    protected createFromAlias(entityTarget: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName?: string): Alias {\n\n        // if table has a metadata then find it to properly escape its properties\n        // const metadata = this.connection.entityMetadatas.find(metadata => metadata.tableName === tableName);\n        if (this.connection.hasMetadata(entityTarget)) {\n            const metadata = this.connection.getMetadata(entityTarget);\n\n            return this.expressionMap.createAlias({\n                type: \"from\",\n                name: aliasName,\n                metadata: this.connection.getMetadata(entityTarget),\n                tablePath: metadata.tablePath\n            });\n\n        } else {\n            let subQuery: string = \"\";\n            if (entityTarget instanceof Function) {\n                const subQueryBuilder: SelectQueryBuilder<any> = (entityTarget as any)(((this as any) as SelectQueryBuilder<any>).subQuery());\n                this.setParameters(subQueryBuilder.getParameters());\n                subQuery = subQueryBuilder.getQuery();\n\n            } else {\n                subQuery = entityTarget;\n            }\n            const isSubQuery = entityTarget instanceof Function || entityTarget.substr(0, 1) === \"(\" && entityTarget.substr(-1) === \")\";\n            return this.expressionMap.createAlias({\n                type: \"from\",\n                name: aliasName,\n                tablePath: isSubQuery === false ? entityTarget as string : undefined,\n                subQuery: isSubQuery === true ? subQuery : undefined,\n            });\n        }\n    }\n\n    /**\n     * Replaces all entity's propertyName to name in the given statement.\n     */\n    protected replacePropertyNames(statement: string) {\n        this.expressionMap.aliases.forEach(alias => {\n            if (!alias.hasMetadata) return;\n            const replaceAliasNamePrefix = this.expressionMap.aliasNamePrefixingEnabled ? alias.name + \"\\\\.\" : \"\";\n            const replacementAliasNamePrefix = this.expressionMap.aliasNamePrefixingEnabled ? this.escape(alias.name) + \".\" : \"\";\n            alias.metadata.columns.forEach(column => {\n                const expression = \"([ =\\(]|^.{0})\" + replaceAliasNamePrefix + column.propertyPath + \"([ =\\)\\,]|.{0}$)\";\n                statement = statement.replace(new RegExp(expression, \"gm\"), \"$1\" + replacementAliasNamePrefix + this.escape(column.databaseName) + \"$2\");\n                const expression2 = \"([ =\\(]|^.{0})\" + replaceAliasNamePrefix + column.propertyName + \"([ =\\)\\,]|.{0}$)\";\n                statement = statement.replace(new RegExp(expression2, \"gm\"), \"$1\" + replacementAliasNamePrefix + this.escape(column.databaseName) + \"$2\");\n            });\n            alias.metadata.relations.forEach(relation => {\n                [...relation.joinColumns, ...relation.inverseJoinColumns].forEach(joinColumn => {\n                    const expression = \"([ =\\(]|^.{0})\" + replaceAliasNamePrefix + relation.propertyPath + \"\\\\.\" + joinColumn.referencedColumn!.propertyPath + \"([ =\\)\\,]|.{0}$)\";\n                    statement = statement.replace(new RegExp(expression, \"gm\"), \"$1\" + replacementAliasNamePrefix + this.escape(joinColumn.databaseName) + \"$2\"); // todo: fix relation.joinColumns[0], what if multiple columns\n                });\n                if (relation.joinColumns.length > 0) {\n                    const expression = \"([ =\\(]|^.{0})\" + replaceAliasNamePrefix + relation.propertyPath + \"([ =\\)\\,]|.{0}$)\";\n                    statement = statement.replace(new RegExp(expression, \"gm\"), \"$1\" + replacementAliasNamePrefix + this.escape(relation.joinColumns[0].databaseName) + \"$2\"); // todo: fix relation.joinColumns[0], what if multiple columns\n                }\n            });\n        });\n        return statement;\n    }\n\n    /**\n     * Creates \"WHERE\" expression.\n     */\n    protected createWhereExpression() {\n        const conditions = this.createWhereExpressionString();\n\n        if (this.expressionMap.mainAlias!.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n            if (metadata.discriminatorColumn && metadata.parentEntityMetadata) {\n                const condition = `${this.replacePropertyNames(this.expressionMap.mainAlias!.name + \".\" + metadata.discriminatorColumn.databaseName)} IN (:discriminatorColumnValues)`;\n                return ` WHERE ${ conditions.length ? \"(\" + conditions + \") AND\" : \"\" } ${condition}`;\n            }\n        }\n\n        if (!conditions.length) // TODO copy in to discriminator condition\n            return this.expressionMap.extraAppendedAndWhereCondition ? \" WHERE \" + this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition) : \"\";\n\n        if (this.expressionMap.extraAppendedAndWhereCondition)\n            return \" WHERE (\" + conditions + \") AND \" + this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);\n\n        return \" WHERE \" + conditions;\n    }\n\n    /**\n     * Concatenates all added where expressions into one string.\n     */\n    protected createWhereExpressionString(): string {\n        return this.expressionMap.wheres.map((where, index) => {\n            switch (where.type) {\n                case \"and\":\n                    return (index > 0 ? \"AND \" : \"\") + this.replacePropertyNames(where.condition);\n                case \"or\":\n                    return (index > 0 ? \"OR \" : \"\") + this.replacePropertyNames(where.condition);\n                default:\n                    return this.replacePropertyNames(where.condition);\n            }\n        }).join(\" \");\n    }\n\n    /**\n     * Creates \"WHERE\" expression and variables for the given \"ids\".\n     */\n    protected createWhereIdsExpression(ids: any[]): [string, ObjectLiteral] {\n        const metadata = this.expressionMap.mainAlias!.metadata;\n\n        // create shortcuts for better readability\n        const alias = this.expressionMap.aliasNamePrefixingEnabled ? this.escape(this.expressionMap.mainAlias!.name) + \".\" : \"\";\n        const parameters: ObjectLiteral = {};\n        const whereStrings = ids.map((id, index) => {\n            id = id instanceof Object ? id : metadata.createEntityIdMap(id);\n            const whereSubStrings: string[] = [];\n            metadata.primaryColumns.forEach((primaryColumn, secondIndex) => {\n                whereSubStrings.push(alias + this.escape(primaryColumn.databaseName) + \"=:id_\" + index + \"_\" + secondIndex);\n                parameters[\"id_\" + index + \"_\" + secondIndex] = primaryColumn.getEntityValue(id);\n            });\n            metadata.parentIdColumns.forEach((parentIdColumn, secondIndex) => {\n                whereSubStrings.push(alias + this.escape(parentIdColumn.databaseName) + \"=:parentId_\" + index + \"_\" + secondIndex);\n                parameters[\"parentId_\" + index + \"_\" + secondIndex] = parentIdColumn.getEntityValue(id);\n            });\n            return whereSubStrings.join(\" AND \");\n        });\n\n        const whereString = whereStrings.length > 1 ? \"(\" + whereStrings.join(\" OR \") + \")\" : whereStrings[0];\n        return [whereString, parameters];\n    }\n\n    /**\n     * Computes given where argument - transforms to a where string all forms it can take.\n     */\n    protected computeWhereParameter(where: string|((qb: this) => string)|Brackets|ObjectLiteral) {\n        if (typeof where === \"string\")\n            return where;\n\n        if (where instanceof Brackets) {\n            const whereQueryBuilder = this.createQueryBuilder();\n            where.whereFactory(whereQueryBuilder as any);\n            const whereString = whereQueryBuilder.createWhereExpressionString();\n            this.setParameters(whereQueryBuilder.getParameters());\n            return whereString ? \"(\" + whereString + \")\" : \"\";\n\n        } else if (where instanceof Function) {\n            return where(this);\n\n        } else if (where instanceof Object) {\n            if (this.expressionMap.mainAlias!.metadata) {\n                const propertyPaths = EntityMetadataUtils.createPropertyPath(this.expressionMap.mainAlias!.metadata, where);\n                propertyPaths.forEach((propertyPath, index) => {\n                    const parameterValue = EntityMetadataUtils.getPropertyPathValue((where as ObjectLiteral), propertyPath);\n                    const aliasPath = this.expressionMap.aliasNamePrefixingEnabled ? `${this.alias}.${propertyPath}` : propertyPath;\n                    if (parameterValue === null) {\n                        ((this as any) as WhereExpression).andWhere(`${aliasPath} IS NULL`);\n\n                    } else {\n                        const parameterName = \"where_\" + index;\n                        ((this as any) as WhereExpression).andWhere(`${aliasPath}=:${parameterName}`);\n                        this.setParameter(parameterName, parameterValue);\n                    }\n                });\n\n            } else {\n                Object.keys(where).forEach((key, index) => {\n                    const parameterValue = (where as ObjectLiteral)[key];\n                    const aliasPath = this.expressionMap.aliasNamePrefixingEnabled ? `${this.alias}.${key}` : key;\n                    if (parameterValue === null) {\n                        ((this as any) as WhereExpression).andWhere(`${aliasPath} IS NULL`);\n\n                    } else {\n                        const parameterName = \"where_\" + index;\n                        ((this as any) as WhereExpression).andWhere(`${aliasPath}=:${parameterName}`);\n                        this.setParameter(parameterName, parameterValue);\n                    }\n                });\n\n            }\n        }\n\n        return \"\";\n    }\n\n    /**\n     * Creates a query builder used to execute sql queries inside this query builder.\n     */\n    protected obtainQueryRunner() {\n        return this.queryRunner || this.connection.createQueryRunner(\"master\");\n    }\n\n}\n","import {Alias} from \"./Alias\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\nimport {JoinAttribute} from \"./JoinAttribute\";\nimport {RelationIdAttribute} from \"./relation-id/RelationIdAttribute\";\nimport {RelationCountAttribute} from \"./relation-count/RelationCountAttribute\";\nimport {Connection} from \"../connection/Connection\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {SelectQuery} from \"./SelectQuery\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {QueryBuilder} from \"./QueryBuilder\";\n\n/**\n * Contains all properties of the QueryBuilder that needs to be build a final query.\n */\nexport class QueryExpressionMap {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Indicates if QueryBuilder used to select entities and not a raw results.\n     */\n    queryEntity: boolean = false;\n\n    /**\n     * Main alias is a main selection object selected by QueryBuilder.\n     */\n    mainAlias?: Alias;\n\n    /**\n     * All aliases (including main alias) used in the query.\n     */\n    aliases: Alias[] = [];\n\n    /**\n     * Represents query type. QueryBuilder is able to build SELECT, UPDATE and DELETE queries.\n     */\n    queryType: \"select\"|\"update\"|\"delete\"|\"insert\"|\"relation\" = \"select\";\n\n    /**\n     * Data needs to be SELECT-ed.\n     */\n    selects: SelectQuery[] = [];\n\n    /**\n     * FROM-s to be selected.\n     */\n    // froms: { target: string, alias: string }[] = [];\n\n    /**\n     * If update query was used, it needs \"update set\" - properties which will be updated by this query.\n     * If insert query was used, it needs \"insert set\" - values that needs to be inserted.\n     */\n    valuesSet?: ObjectLiteral|ObjectLiteral[];\n\n    /**\n     * Optional returning (or output) clause for insert, update or delete queries.\n     */\n    returning: string = \"\";\n\n    /**\n     * Optional on conflict statement used in insertion query in postgres.\n     */\n    onConflict: string = \"\";\n\n    /**\n     * JOIN queries.\n     */\n    joinAttributes: JoinAttribute[] = [];\n\n    /**\n     * RelationId queries.\n     */\n    relationIdAttributes: RelationIdAttribute[] = [];\n\n    /**\n     * Relation count queries.\n     */\n    relationCountAttributes: RelationCountAttribute[] = [];\n\n    /**\n     * WHERE queries.\n     */\n    wheres: { type: \"simple\"|\"and\"|\"or\", condition: string }[] = [];\n\n    /**\n     * HAVING queries.\n     */\n    havings: { type: \"simple\"|\"and\"|\"or\", condition: string }[] = [];\n\n    /**\n     * ORDER BY queries.\n     */\n    orderBys: OrderByCondition = {};\n\n    /**\n     * GROUP BY queries.\n     */\n    groupBys: string[] = [];\n\n    /**\n     * LIMIT query.\n     */\n    limit?: number;\n\n    /**\n     * OFFSET query.\n     */\n    offset?: number;\n\n    /**\n     * Number of rows to skip of result using pagination.\n     */\n    skip?: number;\n\n    /**\n     * Number of rows to take using pagination.\n     */\n    take?: number;\n\n    /**\n     * Locking mode.\n     */\n    lockMode?: \"optimistic\"|\"pessimistic_read\"|\"pessimistic_write\";\n\n    /**\n     * Current version of the entity, used for locking.\n     */\n    lockVersion?: number|Date;\n\n    /**\n     * Parameters used to be escaped in final query.\n     */\n    parameters: ObjectLiteral = {};\n\n    /**\n     * Indicates if alias, table names and column names will be ecaped by driver, or not.\n     *\n     * todo: rename to isQuotingDisabled, also think if it should be named \"escaping\"\n     */\n    disableEscaping: boolean = true;\n\n    /**\n     * todo: needs more information.\n     */\n    ignoreParentTablesJoins: boolean = false;\n\n    /**\n     * Indicates if virtual columns should be included in entity result.\n     *\n     * todo: what to do with it? is it properly used? what about persistence?\n     */\n    enableRelationIdValues: boolean = false;\n\n    /**\n     * Extra where condition appended to the end of original where conditions with AND keyword.\n     * Original condition will be wrapped into brackets.\n     */\n    extraAppendedAndWhereCondition: string = \"\";\n\n    /**\n     * Indicates if query builder creates a subquery.\n     */\n    subQuery: boolean = false;\n\n    /**\n     * If QueryBuilder was created in a subquery mode then its parent QueryBuilder (who created subquery) will be stored here.\n     */\n    parentQueryBuilder: QueryBuilder<any>;\n\n    /**\n     * Indicates if property names are prefixed with alias names during property replacement.\n     * By default this is enabled, however we need this because aliases are not supported in UPDATE and DELETE queries,\n     * but user can use them in WHERE expressions.\n     */\n    aliasNamePrefixingEnabled: boolean = true;\n\n    /**\n     * Indicates if query result cache is enabled or not.\n     */\n    cache: boolean = false;\n\n    /**\n     * Time in milliseconds in which cache will expire.\n     * If not set then global caching time will be used.\n     */\n    cacheDuration: number;\n\n    /**\n     * Cache id.\n     * Used to identifier your cache queries.\n     */\n    cacheId: string;\n\n    /**\n     * Property path of relation to work with.\n     * Used in relational query builder.\n     */\n    relationPropertyPath: string;\n\n    /**\n     * Entity (target) which relations will be updated.\n     */\n    of: any|any[];\n\n    /**\n     * List of columns where data should be inserted.\n     * Used in INSERT query.\n     */\n    insertColumns: string[] = [];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Accessors\n    // -------------------------------------------------------------------------\n\n    /**\n     * Get all ORDER BY queries - if order by is specified by user then it uses them,\n     * otherwise it uses default entity order by if it was set.\n     */\n    get allOrderBys() {\n        if (!Object.keys(this.orderBys).length && this.mainAlias!.hasMetadata) {\n            const entityOrderBy = this.mainAlias!.metadata.orderBy || {};\n            return Object.keys(entityOrderBy).reduce((orderBy, key) => {\n                orderBy[this.mainAlias!.name + \".\" + key] = entityOrderBy[key];\n                return orderBy;\n            }, {} as OrderByCondition);\n        }\n\n        return this.orderBys;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a main alias and adds it to the current expression map.\n     */\n    setMainAlias(alias: Alias): Alias {\n\n        // if main alias is already set then remove it from the array\n        if (this.mainAlias)\n            this.aliases.splice(this.aliases.indexOf(this.mainAlias));\n\n        // set new main alias\n        this.mainAlias = alias;\n\n        return alias;\n    }\n\n    /**\n     * Creates a new alias and adds it to the current expression map.\n     */\n    createAlias(options: { type: \"from\"|\"select\"|\"join\"|\"other\", name?: string, target?: Function|string, tablePath?: string, subQuery?: string, metadata?: EntityMetadata }): Alias {\n\n        let aliasName = options.name;\n        if (!aliasName && options.tablePath)\n            aliasName = options.tablePath;\n        if (!aliasName && options.target instanceof Function)\n            aliasName = options.target.name;\n        if (!aliasName && typeof options.target === \"string\")\n            aliasName = options.target;\n\n        const alias = new Alias();\n        alias.type = options.type;\n        if (aliasName)\n            alias.name = aliasName;\n        if (options.metadata)\n            alias.metadata = options.metadata;\n        if (options.target && !alias.hasMetadata)\n            alias.metadata = this.connection.getMetadata(options.target);\n        if (options.tablePath)\n            alias.tablePath = options.tablePath;\n        if (options.subQuery)\n            alias.subQuery = options.subQuery;\n\n        this.aliases.push(alias);\n        return alias;\n    }\n\n    /**\n     * Finds alias with the given name.\n     * If alias was not found it throw an exception.\n     */\n    findAliasByName(aliasName: string): Alias {\n        const alias = this.aliases.find(alias => alias.name === aliasName);\n        if (!alias)\n            throw new Error(`\"${aliasName}\" alias was not found. Maybe you forgot to join it?`);\n\n        return alias;\n    }\n\n    findColumnByAliasExpression(aliasExpression: string): ColumnMetadata|undefined {\n        const [aliasName, propertyPath] = aliasExpression.split(\".\");\n        const alias = this.findAliasByName(aliasName);\n        return alias.metadata.findColumnWithPropertyName(propertyPath);\n    }\n\n    /**\n     * Gets relation metadata of the relation this query builder works with.\n     *\n     * todo: add proper exceptions\n     */\n    get relationMetadata(): RelationMetadata {\n        if (!this.mainAlias)\n            throw new Error(`Entity to work with is not specified!`); // todo: better message\n\n        const relationMetadata = this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);\n        if (!relationMetadata)\n            throw new Error(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`); // todo: better message\n\n        return relationMetadata;\n    }\n\n    /**\n     * Copies all properties of the current QueryExpressionMap into a new one.\n     * Useful when QueryBuilder needs to create a copy of itself.\n     */\n    clone(): QueryExpressionMap {\n        const map = new QueryExpressionMap(this.connection);\n        map.queryType = this.queryType;\n        map.selects = this.selects.map(select => select);\n        this.aliases.forEach(alias => map.aliases.push(new Alias(alias)));\n        map.mainAlias = this.mainAlias;\n        map.valuesSet = this.valuesSet;\n        map.returning = this.returning;\n        map.onConflict = this.onConflict;\n        map.joinAttributes = this.joinAttributes.map(join => new JoinAttribute(this.connection, this, join));\n        map.relationIdAttributes = this.relationIdAttributes.map(relationId => new RelationIdAttribute(this, relationId));\n        map.relationCountAttributes = this.relationCountAttributes.map(relationCount => new RelationCountAttribute(this, relationCount));\n        map.wheres = this.wheres.map(where => ({ ...where }));\n        map.havings = this.havings.map(having => ({ ...having }));\n        map.orderBys = Object.assign({}, this.orderBys);\n        map.groupBys = this.groupBys.map(groupBy => groupBy);\n        map.limit = this.limit;\n        map.offset = this.offset;\n        map.skip = this.skip;\n        map.take = this.take;\n        map.lockMode = this.lockMode;\n        map.lockVersion = this.lockVersion;\n        map.parameters = Object.assign({}, this.parameters);\n        map.disableEscaping = this.disableEscaping;\n        map.ignoreParentTablesJoins = this.ignoreParentTablesJoins;\n        map.enableRelationIdValues = this.enableRelationIdValues;\n        map.extraAppendedAndWhereCondition = this.extraAppendedAndWhereCondition;\n        map.subQuery = this.subQuery;\n        map.aliasNamePrefixingEnabled = this.aliasNamePrefixingEnabled;\n        map.cache = this.cache;\n        map.cacheId = this.cacheId;\n        map.cacheDuration = this.cacheDuration;\n        map.relationPropertyPath = this.relationPropertyPath;\n        map.of = this.of;\n        return map;\n    }\n\n}","import {RelationMetadata} from \"../../metadata/RelationMetadata\";\nimport {QueryBuilderUtils} from \"../QueryBuilderUtils\";\nimport {EntityMetadata} from \"../../metadata/EntityMetadata\";\nimport {QueryExpressionMap} from \"../QueryExpressionMap\";\nimport {SelectQueryBuilder} from \"../SelectQueryBuilder\";\n\n/**\n * Stores all join relation id attributes which will be used to build a JOIN query.\n */\nexport class RelationIdAttribute {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Alias of the joined (destination) table.\n     */\n    alias?: string;\n\n    /**\n     * Name of relation.\n     */\n    relationName: string;\n\n    /**\n     * Property + alias of the object where to joined data should be mapped.\n     */\n    mapToProperty: string;\n\n    /**\n     * Extra condition applied to \"ON\" section of join.\n     */\n    queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>;\n\n    /**\n     * Indicates if relation id should NOT be loaded as id map.\n     */\n    disableMixedMap = false;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private queryExpressionMap: QueryExpressionMap,\n                        relationIdAttribute?: Partial<RelationIdAttribute>) {\n        Object.assign(this, relationIdAttribute || {});\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    get joinInverseSideMetadata(): EntityMetadata {\n        return this.relation.inverseEntityMetadata;\n    }\n\n    /**\n     * Alias of the parent of this join.\n     * For example, if we join (\"post.category\", \"categoryAlias\") then \"post\" is a parent alias.\n     * This value is extracted from entityOrProperty value.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get parentAlias(): string {\n        if (!QueryBuilderUtils.isAliasProperty(this.relationName))\n            throw new Error(`Given value must be a string representation of alias property`);\n\n        return this.relationName.substr(0, this.relationName.indexOf(\".\"));\n    }\n\n    /**\n     * Relation property name of the parent.\n     * This is used to understand what is joined.\n     * For example, if we join (\"post.category\", \"categoryAlias\") then \"category\" is a relation property.\n     * This value is extracted from entityOrProperty value.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get relationPropertyPath(): string {\n        if (!QueryBuilderUtils.isAliasProperty(this.relationName))\n            throw new Error(`Given value must be a string representation of alias property`);\n\n        return this.relationName.substr(this.relationName.indexOf(\".\") + 1);\n    }\n\n    /**\n     * Relation of the parent.\n     * This is used to understand what is joined.\n     * This is available when join was made using \"post.category\" syntax.\n     */\n    get relation(): RelationMetadata {\n        if (!QueryBuilderUtils.isAliasProperty(this.relationName))\n            throw new Error(`Given value must be a string representation of alias property`);\n\n        const relationOwnerSelection = this.queryExpressionMap.findAliasByName(this.parentAlias!);\n        const relation = relationOwnerSelection.metadata.findRelationWithPropertyPath(this.relationPropertyPath!);\n        if (!relation)\n            throw new Error(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);\n        return relation;\n    }\n\n    /**\n     * Generates alias of junction table, whose ids we get.\n     */\n    get junctionAlias(): string {\n        const [parentAlias, relationProperty] = this.relationName.split(\".\");\n        return parentAlias + \"_\" + relationProperty + \"_relation_id\";\n    }\n\n    /**\n     * Metadata of the joined entity.\n     * If extra condition without entity was joined, then it will return undefined.\n     */\n    get junctionMetadata(): EntityMetadata {\n        return this.relation.junctionEntityMetadata!;\n    }\n\n    get mapToPropertyParentAlias(): string {\n        return this.mapToProperty.substr(0, this.mapToProperty.indexOf(\".\"));\n    }\n\n    get mapToPropertyPropertyPath(): string {\n        return this.mapToProperty.substr(this.mapToProperty.indexOf(\".\") + 1);\n    }\n\n}","import {RelationIdAttribute} from \"./RelationIdAttribute\";\n\nexport interface RelationIdLoadResult {\n    relationIdAttribute: RelationIdAttribute;\n    results: any[];\n}","import {RelationCountAttribute} from \"./RelationCountAttribute\";\n\nexport interface RelationCountLoadResult {\n    relationCountAttribute: RelationCountAttribute;\n    results: { cnt: any, parentId: any }[];\n}","import {Driver} from \"../../driver/Driver\";\nimport {RelationIdLoadResult} from \"../relation-id/RelationIdLoadResult\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {Alias} from \"../Alias\";\nimport {RelationCountLoadResult} from \"../relation-count/RelationCountLoadResult\";\nimport {RelationMetadata} from \"../../metadata/RelationMetadata\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\nimport {EntityMetadata} from \"../../metadata/EntityMetadata\";\nimport {QueryExpressionMap} from \"../QueryExpressionMap\";\n\n/**\n * Transforms raw sql results returned from the database into entity object.\n * Entity is constructed based on its entity metadata.\n */\nexport class RawSqlResultsToEntityTransformer {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected expressionMap: QueryExpressionMap,\n                protected driver: Driver,\n                protected rawRelationIdResults: RelationIdLoadResult[],\n                protected rawRelationCountResults: RelationCountLoadResult[]) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Since db returns a duplicated rows of the data where accuracies of the same object can be duplicated\n     * we need to group our result and we must have some unique id (primary key in our case)\n     */\n    transform(rawResults: any[], alias: Alias): any[] {\n        const group = this.group(rawResults, alias);\n        const entities: any[] = [];\n        group.forEach(results => {\n            const entity = this.transformRawResultsGroup(results, alias);\n            if (entity !== undefined)\n                entities.push(entity);\n        });\n        return entities;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Groups given raw results by ids of given alias.\n     */\n    protected group(rawResults: any[], alias: Alias): Map<string, any[]> {\n        const map = new Map();\n        const keys = alias.metadata.primaryColumns.map(column => alias.name + \"_\" + column.databaseName);\n        rawResults.forEach(rawResult => {\n            const id = keys.map(key => rawResult[key]).join(\"_\"); // todo: check partial\n            if (!id) return;\n\n            const items = map.get(id);\n            if (!items) {\n                map.set(id, [rawResult]);\n            } else {\n                items.push(rawResult);\n            }\n        });\n        return map;\n    }\n\n    /**\n     * Transforms set of data results into single entity.\n     */\n    protected transformRawResultsGroup(rawResults: any[], alias: Alias): ObjectLiteral|undefined {\n        let hasColumns = false, hasEmbeddedColumns = false, hasParentColumns = false, hasParentEmbeddedColumns = false, hasRelations = false, hasRelationIds = false, hasRelationCounts = false;\n        let entity: any = alias.metadata.create();\n\n        if (alias.metadata.discriminatorColumn) {\n            const discriminatorValues = rawResults.map(result => result[alias.name + \"_\" + alias.metadata.discriminatorColumn!.databaseName]);\n            const metadata = alias.metadata.childEntityMetadatas.find(childEntityMetadata => {\n                return !!discriminatorValues.find(value => value === childEntityMetadata.discriminatorValue);\n            });\n            if (metadata)\n                entity = metadata.create();\n        }\n\n        // get value from columns selections and put them into newly created entity\n        hasColumns = this.transformColumns(rawResults, alias, entity, alias.metadata);\n\n        hasRelations = this.transformJoins(rawResults, entity, alias);\n        hasRelationIds = this.transformRelationIds(rawResults, alias, entity);\n        hasRelationCounts = this.transformRelationCounts(rawResults, alias, entity);\n\n        // this.removeVirtualColumns(entity, alias);\n\n        return (hasColumns || hasEmbeddedColumns || hasParentColumns || hasParentEmbeddedColumns || hasRelations || hasRelationIds || hasRelationCounts) ? entity : undefined;\n    }\n\n    // get value from columns selections and put them into object\n    protected transformColumns(rawResults: any[], alias: Alias, entity: ObjectLiteral, metadata: EntityMetadata): boolean {\n        let hasData = false;\n        metadata.columns.forEach(column => {\n            const value = rawResults[0][alias.name + \"_\" + column.databaseName];\n            if (value === undefined || column.isVirtual || column.isParentId || column.isDiscriminator)\n                return;\n\n            // if user does not selected the whole entity or he used partial selection and does not select this particular column\n            // then we don't add this column and its value into the entity\n            if (!this.expressionMap.selects.find(select => select.selection === alias.name || select.selection === alias.name + \".\" + column.propertyName))\n                return;\n\n            column.setEntityValue(entity, this.driver.prepareHydratedValue(value, column));\n            if (value !== null) // we don't mark it as has data because if we will have all nulls in our object - we don't need such object\n                hasData = true;\n        });\n\n        if (alias.metadata.parentEntityMetadata) {\n            alias.metadata.parentEntityMetadata.columns.forEach(column => {\n                const value = rawResults[0][\"parentIdColumn_\" + alias.metadata.parentEntityMetadata.tableName + \"_\" + column.databaseName];\n                if (value === undefined || column.isVirtual || column.isParentId || column.isDiscriminator)\n                    return;\n\n                column.setEntityValue(entity, this.driver.prepareHydratedValue(value, column));\n                if (value !== null) // we don't mark it as has data because if we will have all nulls in our object - we don't need such object\n                    hasData = true;\n            });\n        }\n        return hasData;\n    }\n\n    /**\n     * Transforms joined entities in the given raw results by a given alias and stores to the given (parent) entity\n     */\n    protected transformJoins(rawResults: any[], entity: ObjectLiteral, alias: Alias) {\n        let hasData = false;\n        let discriminatorValue: string = \"\";\n\n        if (alias.metadata.discriminatorColumn)\n            discriminatorValue = rawResults[0][alias.name + \"_\" + alias.metadata.discriminatorColumn!.databaseName];\n\n        this.expressionMap.joinAttributes.forEach(join => { // todo: we have problem here - when inner joins are used without selects it still create empty array\n\n            // skip joins without metadata\n            if (!join.metadata)\n                return;\n\n            // this check need to avoid setting properties than not belong to entity when single table inheritance used.\n            const metadata = alias.metadata.childEntityMetadatas.find(childEntityMetadata => discriminatorValue === childEntityMetadata.discriminatorValue);\n            if (metadata && join.relation && metadata.target !== join.relation.target)\n                return;\n\n            // some checks to make sure this join is for current alias\n            if (join.mapToProperty) {\n                if (join.mapToPropertyParentAlias !== alias.name)\n                    return;\n            } else {\n                if (!join.relation || join.parentAlias !== alias.name || join.relationPropertyPath !== join.relation!.propertyPath)\n                    return;\n            }\n\n            // transform joined data into entities\n            const mappedEntities = this.transform(rawResults, join.alias);\n            const result = !join.isMany ? mappedEntities[0] : mappedEntities;\n            if (!result) // if nothing was joined then simply return\n                return;\n\n            // if join was mapped to some property then save result to that property\n            if (join.mapToPropertyPropertyName) {\n                entity[join.mapToPropertyPropertyName] = result; // todo: fix embeds\n\n            } else { // otherwise set to relation\n                join.relation!.setEntityValue(entity, result);\n            }\n\n            hasData = true;\n        });\n        return hasData;\n    }\n\n    protected transformRelationIds(rawSqlResults: any[], alias: Alias, entity: ObjectLiteral): boolean {\n        let hasData = false;\n        this.rawRelationIdResults.forEach(rawRelationIdResult => {\n            if (rawRelationIdResult.relationIdAttribute.parentAlias !== alias.name)\n                return;\n\n            const relation = rawRelationIdResult.relationIdAttribute.relation;\n            const valueMap = this.createValueMapFromJoinColumns(relation, rawRelationIdResult.relationIdAttribute.parentAlias, rawSqlResults);\n            if (valueMap === undefined || valueMap === null)\n                return;\n\n            const idMaps = rawRelationIdResult.results.map(result => {\n                const entityPrimaryIds = this.extractEntityPrimaryIds(relation, result);\n                if (!alias.metadata.compareIds(entityPrimaryIds, valueMap))\n                    return;\n\n                let columns: ColumnMetadata[];\n                if (relation.isManyToOne || relation.isOneToOneOwner) {\n                    columns = relation.joinColumns.map(joinColumn => joinColumn);\n                } else if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n                    columns = relation.inverseEntityMetadata.primaryColumns.map(joinColumn => joinColumn);\n                } else { // ManyToMany\n                    if (relation.isOwning) {\n                        columns = relation.inverseJoinColumns.map(joinColumn => joinColumn);\n                    } else {\n                        columns = relation.inverseRelation!.joinColumns.map(joinColumn => joinColumn);\n                    }\n                }\n\n                // const idMapColumns = (relation.isOneToMany || relation.isOneToOneNotOwner) ? columns : columns.map(column => column.referencedColumn!);\n                // const idMap = idMapColumns.reduce((idMap, column) => {\n                //     return OrmUtils.mergeDeep(idMap, column.createValueMap(result[column.databaseName]));\n                // }, {} as ObjectLiteral); // need to create reusable function for this process\n\n                const idMap = columns.reduce((idMap, column) => {\n                    if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n                        return OrmUtils.mergeDeep(idMap, column.createValueMap(result[column.databaseName]));\n                    } else {\n                        return OrmUtils.mergeDeep(idMap, column.referencedColumn!.createValueMap(result[column.databaseName]));\n                    }\n                }, {} as ObjectLiteral);\n\n                if (columns.length === 1 && rawRelationIdResult.relationIdAttribute.disableMixedMap === false) {\n                    if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n                        return columns[0].getEntityValue(idMap);\n                    } else {\n                        return columns[0].referencedColumn!.getEntityValue(idMap);\n                    }\n                }\n                return idMap;\n            }).filter(result => result);\n\n            const properties = rawRelationIdResult.relationIdAttribute.mapToPropertyPropertyPath.split(\".\");\n            const mapToProperty = (properties: string[], map: ObjectLiteral, value: any): any => {\n\n                const property = properties.shift();\n                if (property && properties.length === 0) {\n                    map[property] = value;\n                    return map;\n                } else if (property && properties.length > 0) {\n                    mapToProperty(properties, map[property], value);\n                } else {\n                    return map;\n                }\n            };\n            if (relation.isOneToOne || relation.isManyToOne) {\n                if (idMaps[0] !== undefined) {\n                    mapToProperty(properties, entity, idMaps[0]);\n                    hasData = true;\n                }\n            } else {\n                mapToProperty(properties, entity, idMaps);\n                if (idMaps.length > 0) {\n                    hasData = true;\n                }\n            }\n        });\n\n        return hasData;\n    }\n\n    protected transformRelationCounts(rawSqlResults: any[], alias: Alias, entity: ObjectLiteral): boolean {\n        let hasData = false;\n        this.rawRelationCountResults\n            .filter(rawRelationCountResult => rawRelationCountResult.relationCountAttribute.parentAlias === alias.name)\n            .forEach(rawRelationCountResult => {\n                const relation = rawRelationCountResult.relationCountAttribute.relation;\n                let referenceColumnName: string;\n\n                if (relation.isOneToMany) {\n                    referenceColumnName = relation.inverseRelation!.joinColumns[0].referencedColumn!.databaseName;  // todo: fix joinColumns[0]\n\n                } else {\n                    referenceColumnName = relation.isOwning ? relation.joinColumns[0].referencedColumn!.databaseName : relation.inverseRelation!.joinColumns[0].referencedColumn!.databaseName;\n                }\n\n                const referenceColumnValue = rawSqlResults[0][alias.name + \"_\" + referenceColumnName]; // we use zero index since its grouped data // todo: selection with alias for entity columns wont work\n                if (referenceColumnValue !== undefined && referenceColumnValue !== null) {\n                    entity[rawRelationCountResult.relationCountAttribute.mapToPropertyPropertyName] = 0;\n                    rawRelationCountResult.results\n                        .filter(result => result[\"parentId\"] === referenceColumnValue)\n                        .forEach(result => {\n                            entity[rawRelationCountResult.relationCountAttribute.mapToPropertyPropertyName] = parseInt(result[\"cnt\"]);\n                            hasData = true;\n                        });\n                }\n            });\n\n        return hasData;\n    }\n\n    private createValueMapFromJoinColumns(relation: RelationMetadata, parentAlias: string, rawSqlResults: any[]): ObjectLiteral {\n        let columns: ColumnMetadata[];\n        if (relation.isManyToOne || relation.isOneToOneOwner) {\n            columns = relation.entityMetadata.primaryColumns.map(joinColumn => joinColumn);\n        } else if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n            columns = relation.inverseRelation!.joinColumns.map(joinColumn => joinColumn);\n        } else {\n            if (relation.isOwning) {\n                columns = relation.joinColumns.map(joinColumn => joinColumn);\n            } else {\n                columns = relation.inverseRelation!.inverseJoinColumns.map(joinColumn => joinColumn);\n            }\n        }\n        return columns.reduce((valueMap, column) => {\n            rawSqlResults.forEach(rawSqlResult => {\n                if (relation.isManyToOne || relation.isOneToOneOwner) {\n                    valueMap[column.databaseName] = rawSqlResult[parentAlias + \"_\" + column.databaseName];\n                } else {\n                    valueMap[column.databaseName] =  rawSqlResult[parentAlias + \"_\" + column.referencedColumn!.databaseName];\n                }\n            });\n            return valueMap;\n        }, {} as ObjectLiteral);\n\n    }\n\n    private extractEntityPrimaryIds(relation: RelationMetadata, relationIdRawResult: any) {\n        let columns: ColumnMetadata[];\n        if (relation.isManyToOne || relation.isOneToOneOwner) {\n            columns = relation.entityMetadata.primaryColumns.map(joinColumn => joinColumn);\n        } else if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n            columns = relation.inverseRelation!.joinColumns.map(joinColumn => joinColumn);\n        } else {\n            if (relation.isOwning) {\n                columns = relation.joinColumns.map(joinColumn => joinColumn);\n            } else {\n                columns = relation.inverseRelation!.inverseJoinColumns.map(joinColumn => joinColumn);\n            }\n        }\n        return columns.reduce((data, column) => {\n            data[column.databaseName] = relationIdRawResult[column.databaseName];\n            return data;\n        }, {} as ObjectLiteral);\n    }\n\n    /*private removeVirtualColumns(entity: ObjectLiteral, alias: Alias) {\n        const virtualColumns = this.expressionMap.selects\n            .filter(select => select.virtual)\n            .map(select => select.selection.replace(alias.name + \".\", \"\"));\n\n        virtualColumns.forEach(virtualColumn => delete entity[virtualColumn]);\n    }*/\n\n}","/**\n * Thrown when a transaction is required for the current operation, but there is none open.\n */\nexport class PessimisticLockTransactionRequiredError extends Error {\n    name = \"PessimisticLockTransactionRequiredError\";\n\n    constructor() {\n        super();\n        Object.setPrototypeOf(this, PessimisticLockTransactionRequiredError.prototype);\n        this.message = `An open transaction is required for pessimistic lock.`;\n    }\n\n}","/**\n * Thrown when an entity does not have no version and no update date column.\n */\nexport class NoVersionOrUpdateDateColumnError extends Error {\n    name = \"NoVersionOrUpdateDateColumnError\";\n\n    constructor(entity: string) {\n        super();\n        Object.setPrototypeOf(this, NoVersionOrUpdateDateColumnError.prototype);\n        this.message = `Entity ${entity} does not have version or update date columns.`;\n    }\n\n}","/**\n * Thrown when a version check on an object that uses optimistic locking through a version field fails.\n */\nexport class OptimisticLockVersionMismatchError extends Error {\n    name = \"OptimisticLockVersionMismatchError\";\n\n    constructor(entity: string, expectedVersion: number|Date, actualVersion: number|Date) {\n        super();\n        Object.setPrototypeOf(this, OptimisticLockVersionMismatchError.prototype);\n        this.message = `The optimistic lock on entity ${entity} failed, version ${expectedVersion} was expected, but is actually ${actualVersion}.`;\n    }\n\n}\n","/**\n * Thrown when an optimistic lock cannot be used in query builder.\n */\nexport class OptimisticLockCanNotBeUsedError extends Error {\n    name = \"OptimisticLockCanNotBeUsedError\";\n\n    constructor() {\n        super();\n        Object.setPrototypeOf(this, OptimisticLockCanNotBeUsedError.prototype);\n        this.message = `The optimistic lock can be used only with getOne() method.`;\n    }\n\n}\n","import {RelationIdAttribute} from \"./RelationIdAttribute\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RelationIdLoadResult} from \"./RelationIdLoadResult\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\n\nexport class RelationIdLoader {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection,\n                protected queryRunner: QueryRunner|undefined,\n                protected relationIdAttributes: RelationIdAttribute[]) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    async load(rawEntities: any[]): Promise<RelationIdLoadResult[]> {\n\n        const promises = this.relationIdAttributes.map(async relationIdAttr => {\n\n            if (relationIdAttr.relation.isManyToOne || relationIdAttr.relation.isOneToOneOwner) {\n                // example: Post and Tag\n                // loadRelationIdAndMap(\"post.tagId\", \"post.tag\")\n                // we expect it to load id of tag\n\n                if (relationIdAttr.queryBuilderFactory)\n                    throw new Error(\"Additional condition can not be used with ManyToOne or OneToOne owner relations.\");\n\n                const results = rawEntities.map(rawEntity => {\n                    const result: ObjectLiteral = {};\n                    relationIdAttr.relation.joinColumns.forEach(joinColumn => {\n                        result[joinColumn.databaseName] = rawEntity[relationIdAttr.parentAlias + \"_\" + joinColumn.databaseName];\n                    });\n\n                    relationIdAttr.relation.entityMetadata.primaryColumns.forEach(primaryColumn => {\n                        result[primaryColumn.databaseName] = rawEntity[relationIdAttr.parentAlias + \"_\" + primaryColumn.databaseName];\n                    });\n                    return result;\n                });\n\n                return {\n                    relationIdAttribute: relationIdAttr,\n                    results: results\n                };\n\n            } else if (relationIdAttr.relation.isOneToMany || relationIdAttr.relation.isOneToOneNotOwner) {\n                // example: Post and Category\n                // loadRelationIdAndMap(\"post.categoryIds\", \"post.categories\")\n                // we expect it to load array of category ids\n\n                const relation = relationIdAttr.relation; // \"post.categories\"\n                const joinColumns = relation.isOwning ? relation.joinColumns : relation.inverseRelation!.joinColumns;\n                const table = relation.inverseEntityMetadata.target; // category\n                const tableName = relation.inverseEntityMetadata.tableName; // category\n                const tableAlias = relationIdAttr.alias || tableName; // if condition (custom query builder factory) is set then relationIdAttr.alias defined\n\n                const parameters: ObjectLiteral = {};\n                const condition = rawEntities.map((rawEntity, index) => {\n                    return joinColumns.map(joinColumn => {\n                        const parameterName = joinColumn.databaseName + index;\n                        parameters[parameterName] = rawEntity[relationIdAttr.parentAlias + \"_\" + joinColumn.referencedColumn!.databaseName];\n                        return tableAlias + \".\" + joinColumn.propertyPath + \" = :\" + parameterName;\n                    }).join(\" AND \");\n                }).map(condition => \"(\" + condition + \")\")\n                    .join(\" OR \");\n\n                // ensure we won't perform redundant queries for joined data which was not found in selection\n                // example: if post.category was not found in db then no need to execute query for category.imageIds\n                if (!condition)\n                    return { relationIdAttribute: relationIdAttr, results: [] };\n\n                // generate query:\n                // SELECT category.id, category.postId FROM category category ON category.postId = :postId\n                const qb = this.connection.createQueryBuilder(this.queryRunner);\n\n                joinColumns.forEach(joinColumn => {\n                    qb.addSelect(tableAlias + \".\" + joinColumn.propertyPath, joinColumn.databaseName);\n                });\n\n                relation.inverseRelation!.entityMetadata.primaryColumns.forEach(primaryColumn => {\n                    qb.addSelect(tableAlias + \".\" + primaryColumn.propertyPath, primaryColumn.databaseName);\n                });\n\n                qb.from(table, tableAlias)\n                    .where(\"(\" + condition + \")\") // need brackets because if we have additional condition and no brackets, it looks like (a = 1) OR (a = 2) AND b = 1, that is incorrect\n                    .setParameters(parameters);\n\n                // apply condition (custom query builder factory)\n                if (relationIdAttr.queryBuilderFactory)\n                    relationIdAttr.queryBuilderFactory(qb);\n\n                return {\n                    relationIdAttribute: relationIdAttr,\n                    results: await qb.getRawMany()\n                };\n\n            } else {\n                // example: Post and Category\n                // owner side: loadRelationIdAndMap(\"post.categoryIds\", \"post.categories\")\n                // inverse side: loadRelationIdAndMap(\"category.postIds\", \"category.posts\")\n                // we expect it to load array of post ids\n\n                const relation = relationIdAttr.relation;\n                const joinColumns = relation.isOwning ? relation.joinColumns : relation.inverseRelation!.inverseJoinColumns;\n                const inverseJoinColumns = relation.isOwning ? relation.inverseJoinColumns : relation.inverseRelation!.joinColumns;\n                const junctionAlias = relationIdAttr.junctionAlias;\n                const inverseSideTableName = relationIdAttr.joinInverseSideMetadata.tableName;\n                const inverseSideTableAlias = relationIdAttr.alias || inverseSideTableName;\n                const junctionTableName = relation.isOwning ? relation.junctionEntityMetadata!.tableName : relation.inverseRelation!.junctionEntityMetadata!.tableName;\n\n\n                const mappedColumns = rawEntities.map(rawEntity => {\n                    return joinColumns.reduce((map, joinColumn) => {\n                        map[joinColumn.propertyPath] = rawEntity[relationIdAttr.parentAlias + \"_\" + joinColumn.referencedColumn!.databaseName];\n                        return map;\n                    }, {} as ObjectLiteral);\n                });\n\n                // ensure we won't perform redundant queries for joined data which was not found in selection\n                // example: if post.category was not found in db then no need to execute query for category.imageIds\n                if (mappedColumns.length === 0)\n                    return { relationIdAttribute: relationIdAttr, results: [] };\n\n                const parameters: ObjectLiteral = {};\n                const joinColumnConditions = mappedColumns.map((mappedColumn, index) => {\n                    return Object.keys(mappedColumn).map(key => {\n                        const parameterName = key + index;\n                        parameters[parameterName] = mappedColumn[key];\n                        return junctionAlias + \".\" + key + \" = :\" + parameterName;\n                    }).join(\" AND \");\n                });\n\n                const inverseJoinColumnCondition = inverseJoinColumns.map(joinColumn => {\n                    return junctionAlias + \".\" + joinColumn.propertyPath + \" = \" + inverseSideTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                }).join(\" AND \");\n\n                const condition = joinColumnConditions.map(condition => {\n                    return \"(\" + condition + \" AND \" + inverseJoinColumnCondition + \")\";\n                }).join(\" OR \");\n\n                const qb = this.connection.createQueryBuilder(this.queryRunner);\n\n                inverseJoinColumns.forEach(joinColumn => {\n                    qb.addSelect(junctionAlias + \".\" + joinColumn.propertyPath, joinColumn.databaseName)\n                    .addOrderBy(junctionAlias + \".\" + joinColumn.propertyPath);\n                });\n\n                joinColumns.forEach(joinColumn => {\n                    qb.addSelect(junctionAlias + \".\" + joinColumn.propertyPath, joinColumn.databaseName)\n                    .addOrderBy(junctionAlias + \".\" + joinColumn.propertyPath);\n                });\n\n                qb.from(inverseSideTableName, inverseSideTableAlias)\n                    .innerJoin(junctionTableName, junctionAlias, condition)\n                    .setParameters(parameters);\n\n                // apply condition (custom query builder factory)\n                if (relationIdAttr.queryBuilderFactory)\n                    relationIdAttr.queryBuilderFactory(qb);\n\n                return {\n                    relationIdAttribute: relationIdAttr,\n                    results: await qb.getRawMany()\n                };\n            }\n        });\n\n        return Promise.all(promises);\n    }\n\n}\n","import {RelationIdAttribute} from \"./RelationIdAttribute\";\nimport {QueryExpressionMap} from \"../QueryExpressionMap\";\nimport {RelationIdMetadata} from \"../../metadata/RelationIdMetadata\";\n\nexport class RelationIdMetadataToAttributeTransformer {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected expressionMap: QueryExpressionMap) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    transform() {\n\n        // by example:\n        // post has relation id:\n        // @RelationId(post => post.categories) categoryIds\n        // category has relation id\n        // @RelationId(category => category.images) imageIds\n        // we load post and join category\n        // we expect post.categoryIds and post.category.imageIds to have relation ids\n\n        // first create relation id attributes for all relation id metadatas of the main selected object (post from example)\n        if (this.expressionMap.mainAlias) {\n            this.expressionMap.mainAlias.metadata.relationIds.forEach(relationId => {\n                const attribute = this.metadataToAttribute(this.expressionMap.mainAlias!.name, relationId);\n                this.expressionMap.relationIdAttributes.push(attribute);\n            });\n        }\n\n        // second create relation id attributes for all relation id metadatas of all joined objects (category from example)\n        this.expressionMap.joinAttributes.forEach(join => {\n\n            // ensure this join has a metadata, because relation id can only work for real orm entities\n            if (!join.metadata || join.metadata.isJunction)\n                return;\n\n            join.metadata.relationIds.forEach(relationId => {\n                const attribute = this.metadataToAttribute(join.alias.name, relationId);\n                this.expressionMap.relationIdAttributes.push(attribute);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods\n    // -------------------------------------------------------------------------\n\n    private metadataToAttribute(parentAliasName: string, relationId: RelationIdMetadata): RelationIdAttribute {\n        return new RelationIdAttribute(this.expressionMap, {\n            relationName: parentAliasName + \".\" + relationId.relation.propertyName, // category.images\n            mapToProperty: parentAliasName + \".\" + relationId.propertyName, // category.imageIds\n            alias: relationId.alias,\n            queryBuilderFactory: relationId.queryBuilderFactory\n        });\n    }\n\n}","import {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RelationCountAttribute} from \"./RelationCountAttribute\";\nimport {RelationCountLoadResult} from \"./RelationCountLoadResult\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\n\nexport class RelationCountLoader {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection,\n                protected queryRunner: QueryRunner|undefined,\n                protected relationCountAttributes: RelationCountAttribute[]) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    async load(rawEntities: any[]): Promise<RelationCountLoadResult[]> {\n\n        const promises = this.relationCountAttributes.map(async relationCountAttr => {\n\n            if (relationCountAttr.relation.isOneToMany) {\n                // example: Post and Category\n                // loadRelationCountAndMap(\"post.categoryCount\", \"post.categories\")\n                // we expect it to load array of post ids\n\n                // todo(dima): fix issues wit multiple primary keys and remove joinColumns[0]\n                const relation = relationCountAttr.relation; // \"category.posts\"\n                const inverseRelation = relation.inverseRelation!; // \"post.category\"\n                const referenceColumnName = inverseRelation.joinColumns[0].referencedColumn!.propertyName; // post id\n                const inverseSideTable = relation.inverseEntityMetadata.target; // Post\n                const inverseSideTableName = relation.inverseEntityMetadata.tableName; // post\n                const inverseSideTableAlias = relationCountAttr.alias || inverseSideTableName; // if condition (custom query builder factory) is set then relationIdAttr.alias defined\n                const inverseSidePropertyName = inverseRelation.propertyName; // \"category\" from \"post.category\"\n\n                const referenceColumnValues = rawEntities\n                    .map(rawEntity => rawEntity[relationCountAttr.parentAlias + \"_\" + referenceColumnName])\n                    .filter(value => !!value);\n\n                // ensure we won't perform redundant queries for joined data which was not found in selection\n                // example: if post.category was not found in db then no need to execute query for category.imageIds\n                if (referenceColumnValues.length === 0)\n                    return { relationCountAttribute: relationCountAttr, results: [] };\n\n                // generate query:\n                // SELECT category.post as parentId, COUNT(*) AS cnt FROM category category WHERE category.post IN (1, 2) GROUP BY category.post\n                const qb = this.connection.createQueryBuilder(this.queryRunner);\n                qb.select(inverseSideTableAlias + \".\" + inverseSidePropertyName, \"parentId\")\n                    .addSelect(\"COUNT(*)\", \"cnt\")\n                    .from(inverseSideTable, inverseSideTableAlias)\n                    .where(inverseSideTableAlias + \".\" + inverseSidePropertyName + \" IN (:ids)\")\n                    .addGroupBy(inverseSideTableAlias + \".\" + inverseSidePropertyName)\n                    .setParameter(\"ids\", referenceColumnValues);\n\n                // apply condition (custom query builder factory)\n                if (relationCountAttr.queryBuilderFactory)\n                    relationCountAttr.queryBuilderFactory(qb);\n\n                return {\n                    relationCountAttribute: relationCountAttr,\n                    results: await qb.getRawMany()\n                };\n\n            } else {\n                // example: Post and Category\n                // owner side: loadRelationIdAndMap(\"post.categoryIds\", \"post.categories\")\n                // inverse side: loadRelationIdAndMap(\"category.postIds\", \"category.posts\")\n                // we expect it to load array of post ids\n\n                let joinTableColumnName: string;\n                let inverseJoinColumnName: string;\n                let firstJunctionColumn: ColumnMetadata;\n                let secondJunctionColumn: ColumnMetadata;\n\n                if (relationCountAttr.relation.isOwning) { // todo fix joinColumns[0] and inverseJoinColumns[0].\n                    joinTableColumnName = relationCountAttr.relation.joinColumns[0].referencedColumn!.databaseName;\n                    inverseJoinColumnName = relationCountAttr.relation.inverseJoinColumns[0].referencedColumn!.databaseName;\n                    firstJunctionColumn = relationCountAttr.relation.junctionEntityMetadata!.columns[0];\n                    secondJunctionColumn = relationCountAttr.relation.junctionEntityMetadata!.columns[1];\n\n                } else {\n                    joinTableColumnName = relationCountAttr.relation.inverseRelation!.inverseJoinColumns[0].referencedColumn!.databaseName;\n                    inverseJoinColumnName = relationCountAttr.relation.inverseRelation!.joinColumns[0].referencedColumn!.databaseName;\n                    firstJunctionColumn = relationCountAttr.relation.junctionEntityMetadata!.columns[1];\n                    secondJunctionColumn = relationCountAttr.relation.junctionEntityMetadata!.columns[0];\n                }\n\n                const referenceColumnValues = rawEntities\n                    .map(rawEntity => rawEntity[relationCountAttr.parentAlias + \"_\" + joinTableColumnName])\n                    .filter(value => value);\n\n                // ensure we won't perform redundant queries for joined data which was not found in selection\n                // example: if post.category was not found in db then no need to execute query for category.imageIds\n                if (referenceColumnValues.length === 0)\n                    return { relationCountAttribute: relationCountAttr, results: [] };\n\n                const junctionAlias = relationCountAttr.junctionAlias;\n                const inverseSideTableName = relationCountAttr.joinInverseSideMetadata.tableName;\n                const inverseSideTableAlias = relationCountAttr.alias || inverseSideTableName;\n                const junctionTableName = relationCountAttr.relation.junctionEntityMetadata!.tableName;\n                const condition = junctionAlias + \".\" + firstJunctionColumn.propertyName + \" IN (\" + referenceColumnValues + \")\" +\n                    \" AND \" + junctionAlias + \".\" + secondJunctionColumn.propertyName + \" = \" + inverseSideTableAlias + \".\" + inverseJoinColumnName;\n\n                const qb = this.connection.createQueryBuilder(this.queryRunner);\n                qb.select(junctionAlias + \".\" + firstJunctionColumn.propertyName, \"parentId\")\n                    .addSelect(\"COUNT(\" + qb.escape(inverseSideTableAlias) + \".\" + qb.escape(inverseJoinColumnName) + \")\", \"cnt\")\n                    .from(inverseSideTableName, inverseSideTableAlias)\n                    .innerJoin(junctionTableName, junctionAlias, condition)\n                    .addGroupBy(junctionAlias + \".\" + firstJunctionColumn.propertyName);\n\n                // apply condition (custom query builder factory)\n                if (relationCountAttr.queryBuilderFactory)\n                    relationCountAttr.queryBuilderFactory(qb);\n\n                return {\n                    relationCountAttribute: relationCountAttr,\n                    results: await qb.getRawMany()\n                };\n            }\n        });\n\n        return Promise.all(promises);\n    }\n\n}\n","import {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n/**\n * Arguments for RelationCountMetadata class.\n */\nexport interface RelationCountMetadataArgs {\n\n    /**\n     * Class to which this decorator is applied.\n     */\n    readonly target: Function;\n\n    /**\n     * Class's property name to which this decorator is applied.\n     */\n    readonly propertyName: string;\n\n    /**\n     * Target's relation which it should count.\n     */\n    readonly relation: string|((object: any) => any);\n\n    /**\n     * Alias of the joined (destination) table.\n     */\n    readonly alias?: string;\n\n    /**\n     * Extra condition applied to \"ON\" section of join.\n     */\n    readonly queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>;\n\n}\n","import {RelationCountMetadataArgs} from \"../metadata-args/RelationCountMetadataArgs\";\nimport {EntityMetadata} from \"./EntityMetadata\";\nimport {RelationMetadata} from \"./RelationMetadata\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Contains all information about entity's relation count.\n */\nexport class RelationCountMetadata {\n\n    // ---------------------------------------------------------------------\n    // Public Properties\n    // ---------------------------------------------------------------------\n\n    /**\n     * Entity metadata where this column metadata is.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Relation which needs to be counted.\n     */\n    relation: RelationMetadata;\n\n    /**\n     * Relation name which need to count.\n     */\n    relationNameOrFactory: string|((object: any) => any);\n\n    /**\n     * Target class to which metadata is applied.\n     */\n    target: Function|string;\n\n    /**\n     * Target's property name to which this metadata is applied.\n     */\n    propertyName: string;\n\n    /**\n     * Alias of the joined (destination) table.\n     */\n    alias?: string;\n\n    /**\n     * Extra condition applied to \"ON\" section of join.\n     */\n    queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>;\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        entityMetadata: EntityMetadata,\n        args: RelationCountMetadataArgs\n    }) {\n        this.entityMetadata = options.entityMetadata;\n        this.target = options.args.target;\n        this.propertyName = options.args.propertyName;\n        this.relationNameOrFactory = options.args.relation;\n        this.alias = options.args.alias;\n        this.queryBuilderFactory = options.args.queryBuilderFactory;\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Builder Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Builds some depend relation count metadata properties.\n     * This builder method should be used only after entity metadata, its properties map and all relations are build.\n     */\n    build() {\n        const propertyPath = this.relationNameOrFactory instanceof Function ? this.relationNameOrFactory(this.entityMetadata.propertiesMap) : this.relationNameOrFactory;\n        const relation = this.entityMetadata.findRelationWithPropertyPath(propertyPath);\n        if (!relation)\n            throw new Error(`Cannot find relation ${propertyPath}. Wrong relation specified for @RelationCount decorator.`);\n\n        this.relation = relation;\n    }\n\n}","import {QueryExpressionMap} from \"../QueryExpressionMap\";\nimport {RelationCountMetadata} from \"../../metadata/RelationCountMetadata\";\nimport {RelationCountAttribute} from \"./RelationCountAttribute\";\n\nexport class RelationCountMetadataToAttributeTransformer {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected expressionMap: QueryExpressionMap) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    transform() {\n\n        // by example:\n        // post has relation count:\n        // @RelationCount(post => post.categories) categoryCount\n        // category has relation count\n        // @RelationCount(category => category.images) imageCount\n        // we load post and join category\n        // we expect post.categoryCount and post.category.imageCount to have relation counts\n\n        // first create relation count attributes for all relation count metadatas of the main selected object (post from example)\n        if (this.expressionMap.mainAlias) {\n            this.expressionMap.mainAlias.metadata.relationCounts.forEach(relationCount => {\n                const attribute = this.metadataToAttribute(this.expressionMap.mainAlias!.name, relationCount);\n                this.expressionMap.relationCountAttributes.push(attribute);\n            });\n        }\n\n        // second create relation count attributes for all relation count metadatas of all joined objects (category from example)\n        this.expressionMap.joinAttributes.forEach(join => {\n\n            // ensure this join has a metadata, because relation count can only work for real orm entities\n            if (!join.metadata || join.metadata.isJunction)\n                return;\n\n            join.metadata.relationCounts.forEach(relationCount => {\n                const attribute = this.metadataToAttribute(join.alias.name, relationCount);\n                this.expressionMap.relationCountAttributes.push(attribute);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods\n    // -------------------------------------------------------------------------\n\n    private metadataToAttribute(parentAliasName: string, relationCount: RelationCountMetadata): RelationCountAttribute {\n        return new RelationCountAttribute(this.expressionMap, {\n            relationName: parentAliasName + \".\" + relationCount.relation.propertyName, // category.images\n            mapToProperty: parentAliasName + \".\" + relationCount.propertyName, // category.imageIds\n            alias: relationCount.alias,\n            queryBuilderFactory: relationCount.queryBuilderFactory\n        });\n    }\n\n}","/**\n * Thrown when selected sql driver does not supports locking.\n */\nexport class LockNotSupportedOnGivenDriverError extends Error {\n    name = \"LockNotSupportedOnGivenDriverError\";\n\n    constructor() {\n        super();\n        Object.setPrototypeOf(this, LockNotSupportedOnGivenDriverError.prototype);\n        this.message = `Locking not supported on given driver.`;\n    }\n\n}","/**\n * Options passed to QueryResultCache class.\n */\nexport interface QueryResultCacheOptions {\n\n    /**\n     * Cache identifier set by user.\n     * Can be empty.\n     */\n    identifier: string;\n\n    /**\n     * Time, when cache was created.\n     */\n    time?: number;\n\n    /**\n     * Duration in milliseconds during which results will be returned from cache.\n     */\n    duration: number;\n\n    /**\n     * Cached query.\n     */\n    query: string;\n\n    /**\n     * Query result that will be cached.\n     */\n    result?: any;\n\n}","/**\n * Thrown when user tries to build SELECT query using OFFSET without LIMIT applied but database does not support it.\n*/\nexport class OffsetWithoutLimitNotSupportedError extends Error {\n\n    constructor(driverName: string) {\n        super(`${driverName} does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).`);\n        Object.setPrototypeOf(this, OffsetWithoutLimitNotSupportedError.prototype);\n        this.name = \"OffsetWithoutLimitNotSupportedError\";\n    }\n\n}","import {RawSqlResultsToEntityTransformer} from \"./transformer/RawSqlResultsToEntityTransformer\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {PessimisticLockTransactionRequiredError} from \"../error/PessimisticLockTransactionRequiredError\";\nimport {NoVersionOrUpdateDateColumnError} from \"../error/NoVersionOrUpdateDateColumnError\";\nimport {OptimisticLockVersionMismatchError} from \"../error/OptimisticLockVersionMismatchError\";\nimport {OptimisticLockCanNotBeUsedError} from \"../error/OptimisticLockCanNotBeUsedError\";\nimport {JoinAttribute} from \"./JoinAttribute\";\nimport {RelationIdAttribute} from \"./relation-id/RelationIdAttribute\";\nimport {RelationCountAttribute} from \"./relation-count/RelationCountAttribute\";\nimport {RelationIdLoader} from \"./relation-id/RelationIdLoader\";\nimport {RelationIdMetadataToAttributeTransformer} from \"./relation-id/RelationIdMetadataToAttributeTransformer\";\nimport {RelationCountLoader} from \"./relation-count/RelationCountLoader\";\nimport {RelationCountMetadataToAttributeTransformer} from \"./relation-count/RelationCountMetadataToAttributeTransformer\";\nimport {Broadcaster} from \"../subscriber/Broadcaster\";\nimport {QueryBuilder} from \"./QueryBuilder\";\nimport {ReadStream} from \"../platform/PlatformTools\";\nimport {LockNotSupportedOnGivenDriverError} from \"../error/LockNotSupportedOnGivenDriverError\";\nimport {MysqlDriver} from \"../driver/mysql/MysqlDriver\";\nimport {PostgresDriver} from \"../driver/postgres/PostgresDriver\";\nimport {OracleDriver} from \"../driver/oracle/OracleDriver\";\nimport {SelectQuery} from \"./SelectQuery\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\nimport {QueryExpressionMap} from \"./QueryExpressionMap\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {WhereExpression} from \"./WhereExpression\";\nimport {Brackets} from \"./Brackets\";\nimport {AbstractSqliteDriver} from \"../driver/sqlite-abstract/AbstractSqliteDriver\";\nimport {QueryResultCacheOptions} from \"../cache/QueryResultCacheOptions\";\nimport {OffsetWithoutLimitNotSupportedError} from \"../error/OffsetWithoutLimitNotSupportedError\";\n\n/**\n * Allows to build complex sql queries in a fashion way and execute those queries.\n */\nexport class SelectQueryBuilder<Entity> extends QueryBuilder<Entity> implements WhereExpression {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    getQuery(): string {\n        let sql = this.createSelectExpression();\n        sql += this.createJoinExpression();\n        sql += this.createWhereExpression();\n        sql += this.createGroupByExpression();\n        sql += this.createHavingExpression();\n        sql += this.createOrderByExpression();\n        sql += this.createLimitOffsetExpression();\n        sql += this.createLockExpression();\n        sql = this.createLimitOffsetOracleSpecificExpression(sql);\n        sql = sql.trim();\n        if (this.expressionMap.subQuery)\n            sql = \"(\" + sql + \")\";\n        return sql;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a subquery - query that can be used inside other queries.\n     */\n    subQuery(): SelectQueryBuilder<any> {\n        const qb = this.createQueryBuilder();\n        qb.expressionMap.subQuery = true;\n        qb.expressionMap.parentQueryBuilder = this;\n        return qb;\n    }\n\n    /**\n     * Creates SELECT query.\n     * Replaces all previous selections if they exist.\n     */\n    select(): this;\n\n    /**\n     * Creates SELECT query.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, selectionAliasName?: string): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string, selectionAliasName?: string): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string[]): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection?: string|string[]|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), selectionAliasName?: string): SelectQueryBuilder<Entity> {\n        this.expressionMap.queryType = \"select\";\n        if (selection instanceof Array) {\n            this.expressionMap.selects = selection.map(selection => ({ selection: selection }));\n\n        } else if (selection instanceof Function) {\n            const subQueryBuilder = selection(this.subQuery());\n            this.setParameters(subQueryBuilder.getParameters());\n            this.expressionMap.selects.push({ selection: subQueryBuilder.getQuery(), aliasName: selectionAliasName });\n\n        } else if (selection) {\n            this.expressionMap.selects = [{ selection: selection, aliasName: selectionAliasName }];\n        }\n\n        return this;\n    }\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, selectionAliasName?: string): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string, selectionAliasName?: string): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string[]): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string|string[]|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), selectionAliasName?: string): this {\n        if (!selection)\n            return this;\n\n        if (selection instanceof Array) {\n            this.expressionMap.selects = this.expressionMap.selects.concat(selection.map(selection => ({ selection: selection })));\n\n        } else if (selection instanceof Function) {\n            const subQueryBuilder = selection(this.subQuery());\n            this.setParameters(subQueryBuilder.getParameters());\n            this.expressionMap.selects.push({ selection: subQueryBuilder.getQuery(), aliasName: selectionAliasName });\n\n        } else if (selection) {\n            this.expressionMap.selects.push({ selection: selection, aliasName: selectionAliasName });\n        }\n\n        return this;\n    }\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: ObjectType<T>|string, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: ObjectType<T>|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string): SelectQueryBuilder<T> {\n        const mainAlias = this.createFromAlias(entityTarget, aliasName);\n        this.expressionMap.setMainAlias(mainAlias);\n        return (this as any) as SelectQueryBuilder<T>;\n    }\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: ObjectType<T>|string, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: ObjectType<T>|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string): SelectQueryBuilder<T> {\n        const alias = this.createFromAlias(entityTarget, aliasName);\n        if (!this.expressionMap.mainAlias)\n            this.expressionMap.setMainAlias(alias);\n\n        return (this as any) as SelectQueryBuilder<T>;\n    }\n\n    /**\n     * INNER JOINs (without selection) given subquery.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) entity's property.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) given entity's table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) given table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection).\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs (without selection) given subquery.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) entity's property.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) entity's table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) given table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection).\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery and adds all selection properties to SELECT..\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property and adds all selection properties to SELECT.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.innerJoin(entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery and adds all selection properties to SELECT..\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property and adds all selection properties to SELECT.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.leftJoin(entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters, mapToProperty, true);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters, mapToProperty, false);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters, mapToProperty, true);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters, mapToProperty, false);\n        return this;\n    }\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, property: string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, entity: Function|string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, tableName: string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, entityOrProperty: Function|string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this {\n    //     const select = new SelectAttribute(this.expressionMap);\n    //     select.mapToProperty = mapToProperty;\n    //     select.entityOrProperty = entityOrProperty;\n    //     select.aliasName = aliasName;\n    //     select.qbFactory = qbFactory;\n    //     return this;\n    // }\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string, options: { disableMixedMap: boolean }): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string, aliasName: string, queryBuilderFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string,\n                         relationName: string,\n                         aliasNameOrOptions?: string|{ disableMixedMap?: boolean },\n                         queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this {\n\n        const relationIdAttribute = new RelationIdAttribute(this.expressionMap);\n        relationIdAttribute.mapToProperty = mapToProperty;\n        relationIdAttribute.relationName = relationName;\n        if (typeof aliasNameOrOptions === \"string\")\n            relationIdAttribute.alias = aliasNameOrOptions;\n        if (aliasNameOrOptions instanceof Object && (aliasNameOrOptions as any).disableMixedMap)\n            relationIdAttribute.disableMixedMap = true;\n\n        relationIdAttribute.queryBuilderFactory = queryBuilderFactory;\n        this.expressionMap.relationIdAttributes.push(relationIdAttribute);\n\n        if (relationIdAttribute.relation.junctionEntityMetadata) {\n            this.expressionMap.createAlias({\n                type: \"other\",\n                name: relationIdAttribute.junctionAlias,\n                metadata: relationIdAttribute.relation.junctionEntityMetadata\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Counts number of entities of entity's relation and maps the value into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationCountAndMap(mapToProperty: string, relationName: string, aliasName?: string, queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this {\n        const relationCountAttribute = new RelationCountAttribute(this.expressionMap);\n        relationCountAttribute.mapToProperty = mapToProperty;\n        relationCountAttribute.relationName = relationName;\n        relationCountAttribute.alias = aliasName;\n        relationCountAttribute.queryBuilderFactory = queryBuilderFactory;\n        this.expressionMap.relationCountAttributes.push(relationCountAttribute);\n\n        this.expressionMap.createAlias({\n            type: \"other\",\n            name: relationCountAttribute.junctionAlias\n        });\n        if (relationCountAttribute.relation.junctionEntityMetadata) {\n            this.expressionMap.createAlias({\n                type: \"other\",\n                name: relationCountAttribute.junctionAlias,\n                metadata: relationCountAttribute.relation.junctionEntityMetadata\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Loads all relation ids for all relations of the selected entity.\n     * All relation ids will be mapped to relation property themself.\n     */\n    loadAllRelationIds(): this {\n        this.expressionMap.mainAlias!.metadata.relations.forEach(relation => {\n            this.loadRelationIdAndMap(\n                this.expressionMap.mainAlias!.name + \".\" + relation.propertyPath,\n                this.expressionMap.mainAlias!.name + \".\" + relation.propertyPath,\n                { disableMixedMap: true }\n            );\n        });\n        return this;\n    }\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(where: Brackets|string|((qb: this) => string)|ObjectLiteral, parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres = []; // don't move this block below since computeWhereParameter can add where expressions\n        const condition = this.computeWhereParameter(where);\n        if (condition)\n            this.expressionMap.wheres = [{ type: \"simple\", condition: condition }];\n        if (parameters)\n            this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(where: string|Brackets|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"and\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(where: Brackets|string|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"or\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    whereInIds(ids: any|any[]): this {\n        ids = ids instanceof Array ? ids : [ids];\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.where(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    andWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.andWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    orWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.orWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Sets HAVING condition in the query builder.\n     * If you had previously HAVING expression defined,\n     * calling this function will override previously set HAVING conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    having(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"simple\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND HAVING condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andHaving(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"and\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR HAVING condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orHaving(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"or\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(): this;\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(groupBy: string): this;\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(groupBy?: string): this {\n        if (groupBy) {\n            this.expressionMap.groupBys = [groupBy];\n        } else {\n            this.expressionMap.groupBys = [];\n        }\n        return this;\n    }\n\n    /**\n     * Adds GROUP BY condition in the query builder.\n     */\n    addGroupBy(groupBy: string): this {\n        this.expressionMap.groupBys.push(groupBy);\n        return this;\n    }\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     *\n     * Calling order by without order set will remove all previously set order bys.\n     */\n    orderBy(): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort: string, order?: \"ASC\"|\"DESC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(order: OrderByCondition): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort?: string|OrderByCondition, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (sort) {\n            if (sort instanceof Object) {\n                this.expressionMap.orderBys = sort as OrderByCondition;\n            } else {\n                if (nulls) {\n                    this.expressionMap.orderBys = { [sort as string]: { order, nulls } };\n                } else {\n                    this.expressionMap.orderBys = { [sort as string]: order };\n                }\n            }\n        } else {\n            this.expressionMap.orderBys = {};\n        }\n        return this;\n    }\n\n    /**\n     * Adds ORDER BY condition in the query builder.\n     */\n    addOrderBy(sort: string, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (nulls) {\n            this.expressionMap.orderBys[sort] = { order, nulls };\n        } else {\n            this.expressionMap.orderBys[sort] = order;\n        }\n        return this;\n    }\n\n    /**\n     * Set's LIMIT - maximum number of rows to be selected.\n     * NOTE that it may not work as you expect if you are using joins.\n     * If you want to implement pagination, and you are having join in your query,\n     * then use instead take method instead.\n     */\n    limit(limit?: number): this {\n        this.expressionMap.limit = this.normalizeNumber(limit);\n        return this;\n    }\n\n    /**\n     * Set's OFFSET - selection offset.\n     * NOTE that it may not work as you expect if you are using joins.\n     * If you want to implement pagination, and you are having join in your query,\n     * then use instead skip method instead.\n     */\n    offset(offset?: number): this {\n        this.expressionMap.offset = this.normalizeNumber(offset);\n        return this;\n    }\n\n    /**\n     * Sets maximal number of entities to take.\n     */\n    take(take?: number): this {\n        this.expressionMap.take = this.normalizeNumber(take);\n        return this;\n    }\n\n    /**\n     * Sets number of entities to skip.\n     */\n    skip(skip?: number): this {\n        this.expressionMap.skip = this.normalizeNumber(skip);\n        return this;\n    }\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\", lockVersion: number): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\", lockVersion: Date): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"pessimistic_read\"|\"pessimistic_write\"): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\"|\"pessimistic_read\"|\"pessimistic_write\", lockVersion?: number|Date): this {\n        this.expressionMap.lockMode = lockMode;\n        this.expressionMap.lockVersion = lockVersion;\n        return this;\n\n    }\n\n    /**\n     * Gets first raw result returned by execution of generated query builder sql.\n     */\n    async getRawOne(): Promise<any> {\n        return (await this.getRawMany())[0];\n    }\n\n    /**\n     * Gets all raw results returned by execution of generated query builder sql.\n     */\n    async getRawMany(): Promise<any[]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        this.expressionMap.queryEntity = false;\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            return await this.loadRawResults(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) { // means we created our own query runner\n                await queryRunner.release();\n            }\n        }\n    }\n\n    /**\n     * Executes sql generated by query builder and returns object with raw results and entities created from them.\n     */\n    async getRawAndEntities(): Promise<{ entities: Entity[], raw: any[] }> {\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            this.expressionMap.queryEntity = true;\n            return await this.executeEntitiesAndRawResults(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Gets single entity returned by execution of generated query builder sql.\n     */\n    async getOne(): Promise<Entity|undefined> {\n        const results = await this.getRawAndEntities();\n        const result = results.entities[0] as any;\n\n        if (result && this.expressionMap.lockMode === \"optimistic\" && this.expressionMap.lockVersion) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n\n            if (this.expressionMap.lockVersion instanceof Date) {\n                const actualVersion = result[metadata.updateDateColumn!.propertyName]; // what if columns arent set?\n                if (actualVersion.getTime() !== this.expressionMap.lockVersion.getTime())\n                    throw new OptimisticLockVersionMismatchError(metadata.name, this.expressionMap.lockVersion, actualVersion);\n\n            } else {\n                const actualVersion = result[metadata.versionColumn!.propertyName]; // what if columns arent set?\n                if (actualVersion !== this.expressionMap.lockVersion)\n                    throw new OptimisticLockVersionMismatchError(metadata.name, this.expressionMap.lockVersion, actualVersion);\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Gets entities returned by execution of generated query builder sql.\n     */\n    async getMany(): Promise<Entity[]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const results = await this.getRawAndEntities();\n        return results.entities;\n    }\n\n    /**\n     * Gets count - number of entities selected by sql generated by this query builder.\n     * Count excludes all limitations set by setFirstResult and setMaxResults methods call.\n     */\n    async getCount(): Promise<number> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            return await this.executeCountQuery(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Executes built SQL query and returns entities and overall entities count (without limitation).\n     * This method is useful to build pagination.\n     */\n    async getManyAndCount(): Promise<[Entity[], number]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            const entitiesAndRaw = await this.executeEntitiesAndRawResults(queryRunner);\n            const count = await this.executeCountQuery(queryRunner);\n            return [entitiesAndRaw.entities, count];\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Executes built SQL query and returns raw data stream.\n     */\n    async stream(): Promise<ReadStream> {\n        this.expressionMap.queryEntity = false;\n        const [sql, parameters] = this.getQueryAndParameters();\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            const releaseFn = () => {\n                if (queryRunner !== this.queryRunner) // means we created our own query runner\n                    return queryRunner.release();\n                return;\n            };\n            return queryRunner.stream(sql, parameters, releaseFn, releaseFn);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Enables or disables query result caching.\n     */\n    cache(enabled: boolean): this;\n\n    /**\n     * Enables query result caching and sets in milliseconds in which cache will expire.\n     * If not set then global caching time will be used.\n     */\n    cache(milliseconds: number): this;\n\n    /**\n     * Enables query result caching and sets cache id and milliseconds in which cache will expire.\n     */\n    cache(id: any, milliseconds?: number): this;\n\n    /**\n     * Enables or disables query result caching.\n     */\n    cache(enabledOrMillisecondsOrId: boolean|number|string, maybeMilliseconds?: number): this {\n\n        if (typeof enabledOrMillisecondsOrId === \"boolean\") {\n            this.expressionMap.cache = enabledOrMillisecondsOrId;\n\n        } else if (typeof enabledOrMillisecondsOrId === \"number\") {\n            this.expressionMap.cache = true;\n            this.expressionMap.cacheDuration = enabledOrMillisecondsOrId;\n\n        } else if (typeof enabledOrMillisecondsOrId === \"string\" || typeof enabledOrMillisecondsOrId === \"number\") {\n            this.expressionMap.cache = true;\n            this.expressionMap.cacheId = enabledOrMillisecondsOrId;\n        }\n\n        if (maybeMilliseconds) {\n            this.expressionMap.cacheDuration = maybeMilliseconds;\n        }\n\n        return this;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    protected join(direction: \"INNER\"|\"LEFT\",\n                   entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>),\n                   aliasName: string,\n                   condition?: string,\n                   parameters?: ObjectLiteral,\n                   mapToProperty?: string,\n                   isMappingMany?: boolean): void {\n\n        this.setParameters(parameters || {});\n\n        const joinAttribute = new JoinAttribute(this.connection, this.expressionMap);\n        joinAttribute.direction = direction;\n        joinAttribute.mapToProperty = mapToProperty;\n        joinAttribute.isMappingMany = isMappingMany;\n        joinAttribute.entityOrProperty = entityOrProperty; // relationName\n        joinAttribute.condition = condition; // joinInverseSideCondition\n        // joinAttribute.junctionAlias = joinAttribute.relation.isOwning ? parentAlias + \"_\" + destinationTableAlias : destinationTableAlias + \"_\" + parentAlias;\n        this.expressionMap.joinAttributes.push(joinAttribute);\n\n        if (joinAttribute.metadata) {\n\n            // todo: find and set metadata right there?\n            joinAttribute.alias = this.expressionMap.createAlias({\n                type: \"join\",\n                name: aliasName,\n                metadata: joinAttribute.metadata\n            });\n            if (joinAttribute.relation && joinAttribute.relation.junctionEntityMetadata) {\n                this.expressionMap.createAlias({\n                    type: \"join\",\n                    name: joinAttribute.junctionAlias,\n                    metadata: joinAttribute.relation.junctionEntityMetadata\n                });\n            }\n\n        } else {\n            let subQuery: string = \"\";\n            if (entityOrProperty instanceof Function) {\n                const subQueryBuilder: SelectQueryBuilder<any> = (entityOrProperty as any)(((this as any) as SelectQueryBuilder<any>).subQuery());\n                this.setParameters(subQueryBuilder.getParameters());\n                subQuery = subQueryBuilder.getQuery();\n\n            } else {\n                subQuery = entityOrProperty;\n            }\n            const isSubQuery = entityOrProperty instanceof Function || entityOrProperty.substr(0, 1) === \"(\" && entityOrProperty.substr(-1) === \")\";\n            joinAttribute.alias = this.expressionMap.createAlias({\n                type: \"join\",\n                name: aliasName,\n                tablePath: isSubQuery === false ? entityOrProperty as string : undefined,\n                subQuery: isSubQuery === true ? subQuery : undefined,\n            });\n        }\n    }\n\n    /**\n     * Creates \"SELECT FROM\" part of SQL query.\n     */\n    protected createSelectExpression() {\n\n        if (!this.expressionMap.mainAlias)\n            throw new Error(\"Cannot build query because main alias is not set (call qb#from method)\");\n\n        // todo throw exception if selects or from is missing\n\n        const allSelects: SelectQuery[] = [];\n        const excludedSelects: SelectQuery[] = [];\n\n        if (this.expressionMap.mainAlias.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            allSelects.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name, metadata));\n            excludedSelects.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name, metadata));\n        }\n\n        // add selects from joins\n        this.expressionMap.joinAttributes\n            .forEach(join => {\n                if (join.metadata) {\n                    allSelects.push(...this.buildEscapedEntityColumnSelects(join.alias.name!, join.metadata));\n                    excludedSelects.push(...this.findEntityColumnSelects(join.alias.name!, join.metadata));\n                } else {\n                    const hasMainAlias = this.expressionMap.selects.some(select => select.selection === join.alias.name);\n                    if (hasMainAlias) {\n                        allSelects.push({ selection: this.escape(join.alias.name!) + \".*\" });\n                        const excludedSelect = this.expressionMap.selects.find(select => select.selection === join.alias.name);\n                        excludedSelects.push(excludedSelect!);\n                    }\n                }\n            });\n\n        if (!this.expressionMap.ignoreParentTablesJoins && this.expressionMap.mainAlias.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            if (metadata.parentEntityMetadata && metadata.parentEntityMetadata.inheritanceType === \"class-table\" && metadata.parentIdColumns) {\n                const alias = \"parentIdColumn_\" + metadata.parentEntityMetadata.tableName;\n                metadata.parentEntityMetadata.columns.forEach(column => {\n                    // TODO implement partial select\n                    allSelects.push({ selection: this.escape(alias) + \".\" + this.escape(column.databaseName), aliasName: alias + \"_\" + column.databaseName });\n                });\n            }\n        }\n\n        // add selects from relation id joins\n        // this.relationIdAttributes.forEach(relationIdAttr => {\n        // });\n\n        /*if (this.enableRelationIdValues) {\n         const parentMetadata = this.aliasMap.getEntityMetadataByAlias(this.aliasMap.mainAlias);\n         if (!parentMetadata)\n         throw new Error(\"Cannot get entity metadata for the given alias \" + this.aliasMap.mainAlias.name);\n\n         const metadata = this.connection.entityMetadatas.findByTarget(this.aliasMap.mainAlias.target);\n         metadata.manyToManyRelations.forEach(relation => {\n\n         const junctionMetadata = relation.junctionEntityMetadata;\n         junctionMetadata.columns.forEach(column => {\n         const select = ea(this.aliasMap.mainAlias.name + \"_\" + junctionMetadata.table.name + \"_ids\") + \".\" +\n         ec(column.name) + \" AS \" +\n         ea(this.aliasMap.mainAlias.name + \"_\" + relation.name + \"_ids_\" + column.name);\n         allSelects.push(select);\n         });\n         });\n         }*/\n\n        // add all other selects\n        this.expressionMap.selects\n            .filter(select => excludedSelects.indexOf(select) === -1)\n            .forEach(select => allSelects.push({ selection: this.replacePropertyNames(select.selection), aliasName: select.aliasName }));\n\n        // if still selection is empty, then simply set it to all (*)\n        if (allSelects.length === 0)\n            allSelects.push({ selection: \"*\" });\n\n        let lock: string = \"\";\n        if (this.connection.driver instanceof SqlServerDriver) {\n            switch (this.expressionMap.lockMode) {\n                case \"pessimistic_read\":\n                    lock = \" WITH (HOLDLOCK, ROWLOCK)\";\n                    break;\n                case \"pessimistic_write\":\n                    lock = \" WITH (UPDLOCK, ROWLOCK)\";\n                    break;\n            }\n        }\n\n        // create a selection query\n        const froms = this.expressionMap.aliases\n            .filter(alias => alias.type === \"from\" && (alias.tablePath || alias.subQuery))\n            .map(alias => {\n                if (alias.subQuery)\n                    return alias.subQuery + \" \" + this.escape(alias.name);\n\n                return this.getTableName(alias.tablePath!) + \" \" + this.escape(alias.name);\n            });\n        const selection = allSelects.map(select => select.selection + (select.aliasName ? \" AS \" + this.escape(select.aliasName) : \"\")).join(\", \");\n        if ((this.expressionMap.limit || this.expressionMap.offset) && this.connection.driver instanceof OracleDriver)\n            return \"SELECT ROWNUM \" + this.escape(\"RN\") + \",\" + selection + \" FROM \" + froms.join(\", \") + lock;\n\n        return \"SELECT \" + selection + \" FROM \" + froms.join(\", \") + lock;\n    }\n\n    /**\n     * Creates \"JOIN\" part of SQL query.\n     */\n    protected createJoinExpression(): string {\n\n        // examples:\n        // select from owning side\n        // qb.select(\"post\")\n        //     .leftJoinAndSelect(\"post.category\", \"category\");\n        // select from non-owning side\n        // qb.select(\"category\")\n        //     .leftJoinAndSelect(\"category.post\", \"post\");\n\n        const joins = this.expressionMap.joinAttributes.map(joinAttr => {\n\n            const relation = joinAttr.relation;\n            const destinationTableName = joinAttr.tablePath;\n            const destinationTableAlias = joinAttr.alias.name;\n            const appendedCondition = joinAttr.condition ? \" AND (\" + joinAttr.condition + \")\" : \"\";\n            const parentAlias = joinAttr.parentAlias;\n\n            // if join was build without relation (e.g. without \"post.category\") then it means that we have direct\n            // table to join, without junction table involved. This means we simply join direct table.\n            if (!parentAlias || !relation) {\n                const destinationJoin = joinAttr.alias.subQuery ? joinAttr.alias.subQuery : this.getTableName(destinationTableName);\n                return \" \" + joinAttr.direction + \" JOIN \" + destinationJoin + \" \" + this.escape(destinationTableAlias) +\n                    (joinAttr.condition ? \" ON \" + this.replacePropertyNames(joinAttr.condition) : \"\");\n            }\n\n            // if real entity relation is involved\n            if (relation.isManyToOne || relation.isOneToOneOwner) {\n\n                // JOIN `category` `category` ON `category`.`id` = `post`.`categoryId`\n                const condition = relation.joinColumns.map(joinColumn => {\n                    return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" +\n                        parentAlias + \".\" + relation.propertyPath + \".\" + joinColumn.referencedColumn!.propertyPath;\n                }).join(\" AND \");\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(condition + appendedCondition);\n\n            } else if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n\n                // JOIN `post` `post` ON `post`.`categoryId` = `category`.`id`\n                const condition = relation.inverseRelation!.joinColumns.map(joinColumn => {\n                    return destinationTableAlias + \".\" + relation.inverseRelation!.propertyPath + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" +\n                        parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                }).join(\" AND \");\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(condition + appendedCondition);\n\n            } else { // means many-to-many\n                const junctionTableName = relation.junctionEntityMetadata!.tablePath;\n\n                const junctionAlias = joinAttr.junctionAlias;\n                let junctionCondition = \"\", destinationCondition = \"\";\n\n                if (relation.isOwning) {\n\n                    junctionCondition = relation.joinColumns.map(joinColumn => {\n                        // `post_category`.`postId` = `post`.`id`\n                        return junctionAlias + \".\" + joinColumn.propertyPath + \"=\" + parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                    }).join(\" AND \");\n\n                    destinationCondition = relation.inverseJoinColumns.map(joinColumn => {\n                        // `category`.`id` = `post_category`.`categoryId`\n                        return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" + junctionAlias + \".\" + joinColumn.propertyPath;\n                    }).join(\" AND \");\n\n                } else {\n                    junctionCondition = relation.inverseRelation!.inverseJoinColumns.map(joinColumn => {\n                        // `post_category`.`categoryId` = `category`.`id`\n                        return junctionAlias + \".\" + joinColumn.propertyPath + \"=\" + parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                    }).join(\" AND \");\n\n                    destinationCondition = relation.inverseRelation!.joinColumns.map(joinColumn => {\n                        // `post`.`id` = `post_category`.`postId`\n                        return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" + junctionAlias + \".\" + joinColumn.propertyPath;\n                    }).join(\" AND \");\n                }\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(junctionTableName) + \" \" + this.escape(junctionAlias) + \" ON \" + this.replacePropertyNames(junctionCondition) +\n                    \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(destinationCondition + appendedCondition);\n\n            }\n        });\n\n        if (!this.expressionMap.ignoreParentTablesJoins && this.expressionMap.mainAlias!.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n            if (metadata.parentEntityMetadata && metadata.parentEntityMetadata.inheritanceType === \"class-table\" && metadata.parentIdColumns) {\n                const alias = \"parentIdColumn_\" + metadata.parentEntityMetadata.tableName;\n                const condition = metadata.parentIdColumns.map(parentIdColumn => {\n                    return this.expressionMap.mainAlias!.name + \".\" + parentIdColumn.propertyPath + \" = \" + this.escape(alias) + \".\" + this.escape(parentIdColumn.referencedColumn!.propertyPath);\n                }).join(\" AND \");\n                const join = \" JOIN \" + this.getTableName(metadata.parentEntityMetadata.tablePath) + \" \" + this.escape(alias) + \" ON \" + this.replacePropertyNames(condition);\n                joins.push(join);\n            }\n        }\n\n        return joins.join(\" \");\n    }\n\n    /**\n     * Creates \"GROUP BY\" part of SQL query.\n     */\n    protected createGroupByExpression() {\n        if (!this.expressionMap.groupBys || !this.expressionMap.groupBys.length) return \"\";\n        return \" GROUP BY \" + this.replacePropertyNames(this.expressionMap.groupBys.join(\", \"));\n    }\n\n    /**\n     * Creates \"ORDER BY\" part of SQL query.\n     */\n    protected createOrderByExpression() {\n        const orderBys = this.expressionMap.allOrderBys;\n        if (Object.keys(orderBys).length > 0)\n            return \" ORDER BY \" + Object.keys(orderBys)\n                    .map(columnName => {\n                        if (typeof orderBys[columnName] === \"string\") {\n                            return this.replacePropertyNames(columnName) + \" \" + orderBys[columnName];\n                        } else {\n                            return this.replacePropertyNames(columnName) + \" \" + (orderBys[columnName] as any).order + \" \" + (orderBys[columnName] as any).nulls;\n                        }\n                    })\n                    .join(\", \");\n\n        return \"\";\n    }\n\n    /**\n     * Creates \"LIMIT\" and \"OFFSET\" parts of SQL query for Oracle database.\n     */\n    protected createLimitOffsetOracleSpecificExpression(sql: string): string {\n        if ((this.expressionMap.offset || this.expressionMap.limit) && this.connection.driver instanceof OracleDriver) {\n            sql = \"SELECT * FROM (\" + sql + \") WHERE \";\n            if (this.expressionMap.offset) {\n                sql += this.escape(\"RN\") + \" >= \" + this.expressionMap.offset;\n            }\n            if (this.expressionMap.limit) {\n                sql += (this.expressionMap.offset ? \" AND \" : \"\") + this.escape(\"RN\") + \" <= \" + ((this.expressionMap.offset || 0) + this.expressionMap.limit);\n            }\n        }\n        return sql;\n    }\n\n    /**\n     * Creates \"LIMIT\" and \"OFFSET\" parts of SQL query.\n     */\n    protected createLimitOffsetExpression(): string {\n        if (this.connection.driver instanceof OracleDriver)\n            return \"\";\n\n        // in the case if nothing is joined in the query builder we don't need to make two requests to get paginated results\n        // we can use regular limit / offset, that's why we add offset and limit construction here based on skip and take values\n        let offset: number|undefined = this.expressionMap.offset,\n            limit: number|undefined = this.expressionMap.limit;\n        if (!offset && !limit && this.expressionMap.joinAttributes.length === 0) {\n            offset = this.expressionMap.skip;\n            limit = this.expressionMap.take;\n        }\n\n        if (this.connection.driver instanceof SqlServerDriver) {\n\n            if (limit && offset)\n                return \" OFFSET \" + offset + \" ROWS FETCH NEXT \" + limit + \" ROWS ONLY\";\n            if (limit)\n                return \" OFFSET 0 ROWS FETCH NEXT \" + limit + \" ROWS ONLY\";\n            if (offset)\n                return \" OFFSET \" + offset + \" ROWS\";\n\n        } else if (this.connection.driver instanceof MysqlDriver) {\n\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                throw new OffsetWithoutLimitNotSupportedError(\"MySQL\");\n\n        } else if (this.connection.driver instanceof AbstractSqliteDriver) {\n\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                return \" LIMIT -1 OFFSET \" + offset;\n\n        } else {\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                return \" OFFSET \" + offset;\n        }\n\n        return \"\";\n    }\n\n    /**\n     * Creates \"LOCK\" part of SQL query.\n     */\n    protected createLockExpression(): string {\n        switch (this.expressionMap.lockMode) {\n            case \"pessimistic_read\":\n                if (this.connection.driver instanceof MysqlDriver) {\n                    return \" LOCK IN SHARE MODE\";\n\n                } else if (this.connection.driver instanceof PostgresDriver) {\n                    return \" FOR SHARE\";\n\n                } else if (this.connection.driver instanceof SqlServerDriver) {\n                    return \"\";\n\n                } else {\n                    throw new LockNotSupportedOnGivenDriverError();\n                }\n            case \"pessimistic_write\":\n                if (this.connection.driver instanceof MysqlDriver || this.connection.driver instanceof PostgresDriver) {\n                    return \" FOR UPDATE\";\n\n                } else if (this.connection.driver instanceof SqlServerDriver) {\n                    return \"\";\n\n                } else {\n                    throw new LockNotSupportedOnGivenDriverError();\n                }\n            default:\n                return \"\";\n        }\n    }\n\n    /**\n     * Creates \"HAVING\" part of SQL query.\n     */\n    protected createHavingExpression() {\n        if (!this.expressionMap.havings || !this.expressionMap.havings.length) return \"\";\n        const conditions = this.expressionMap.havings.map((having, index) => {\n            switch (having.type) {\n                case \"and\":\n                    return (index > 0 ? \"AND \" : \"\") + this.replacePropertyNames(having.condition);\n                case \"or\":\n                    return (index > 0 ? \"OR \" : \"\") + this.replacePropertyNames(having.condition);\n                default:\n                    return this.replacePropertyNames(having.condition);\n            }\n        }).join(\" \");\n\n        if (!conditions.length) return \"\";\n        return \" HAVING \" + conditions;\n    }\n\n    protected buildEscapedEntityColumnSelects(aliasName: string, metadata: EntityMetadata): SelectQuery[] {\n        const hasMainAlias = this.expressionMap.selects.some(select => select.selection === aliasName);\n\n        const columns: ColumnMetadata[] = [];\n        if (hasMainAlias) {\n            columns.push(...metadata.columns.filter(column => column.isSelect === true));\n        }\n        columns.push(...metadata.columns.filter(column => {\n            return this.expressionMap.selects.some(select => select.selection === aliasName + \".\" + column.propertyName);\n        }));\n\n        // if user used partial selection and did not select some primary columns which are required to be selected\n        // we select those primary columns and mark them as \"virtual\". Later virtual column values will be removed from final entity\n        // to make entity contain exactly what user selected\n        const nonSelectedPrimaryColumns = this.expressionMap.queryEntity ? metadata.primaryColumns.filter(primaryColumn => columns.indexOf(primaryColumn) === -1) : [];\n        const allColumns = [...columns, ...nonSelectedPrimaryColumns];\n\n        return allColumns.map(column => {\n            const selection = this.expressionMap.selects.find(select => select.selection === aliasName + \".\" + column.propertyName);\n            return {\n                selection: this.escape(aliasName) + \".\" + this.escape(column.databaseName),\n                aliasName: selection && selection.aliasName ? selection.aliasName : aliasName + \"_\" + column.databaseName,\n                // todo: need to keep in mind that custom selection.aliasName breaks hydrator. fix it later!\n                virtual: selection ? selection.virtual === true : (hasMainAlias ? false : true),\n            };\n        });\n    }\n\n    protected findEntityColumnSelects(aliasName: string, metadata: EntityMetadata): SelectQuery[] {\n        const mainSelect = this.expressionMap.selects.find(select => select.selection === aliasName);\n        if (mainSelect)\n            return [mainSelect];\n\n        return this.expressionMap.selects.filter(select => {\n            return metadata.columns.some(column => select.selection === aliasName + \".\" + column.propertyName);\n        });\n    }\n\n    protected async executeCountQuery(queryRunner: QueryRunner): Promise<number> {\n        this.expressionMap.queryEntity = false;\n\n        const mainAlias = this.expressionMap.mainAlias!.name; // todo: will this work with \"fromTableName\"?\n        const metadata = this.expressionMap.mainAlias!.metadata;\n\n        const distinctAlias = this.escape(mainAlias);\n        let countSql: string = \"\";\n        if (metadata.hasMultiplePrimaryKeys) {\n            if (this.connection.driver instanceof AbstractSqliteDriver) {\n                countSql = `COUNT(DISTINCT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                    const propertyName = this.escape(primaryColumn.databaseName);\n                    return `${distinctAlias}.${propertyName}`;\n                }).join(\" || \") + \")) as \\\"cnt\\\"\";\n\n            } else {\n                countSql = `COUNT(DISTINCT(CONCAT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                    const propertyName = this.escape(primaryColumn.databaseName);\n                    return `${distinctAlias}.${propertyName}`;\n                }).join(\", \") + \"))) as \\\"cnt\\\"\";\n            }\n\n        } else {\n            countSql = `COUNT(DISTINCT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                const propertyName = this.escape(primaryColumn.databaseName);\n                return `${distinctAlias}.${propertyName}`;\n            }).join(\", \") + \")) as \\\"cnt\\\"\";\n        }\n\n        const results = await this.clone()\n            .mergeExpressionMap({ ignoreParentTablesJoins: true })\n            .orderBy()\n            .groupBy()\n            .offset(undefined)\n            .limit(undefined)\n            .skip(undefined)\n            .take(undefined)\n            .select(countSql)\n            .loadRawResults(queryRunner);\n\n        if (!results || !results[0] || !results[0][\"cnt\"])\n            return 0;\n\n        return parseInt(results[0][\"cnt\"]);\n    }\n\n    /**\n     * Executes sql generated by query builder and returns object with raw results and entities created from them.\n     */\n    protected async executeEntitiesAndRawResults(queryRunner: QueryRunner): Promise<{ entities: Entity[], raw: any[] }> {\n\n        if (!this.expressionMap.mainAlias)\n            throw new Error(`Alias is not set. Use \"from\" method to set an alias.`);\n\n        if ((this.expressionMap.lockMode === \"pessimistic_read\" || this.expressionMap.lockMode === \"pessimistic_write\") && !queryRunner.isTransactionActive)\n            throw new PessimisticLockTransactionRequiredError();\n\n        if (this.expressionMap.lockMode === \"optimistic\") {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            if (!metadata.versionColumn && !metadata.updateDateColumn)\n                throw new NoVersionOrUpdateDateColumnError(metadata.name);\n        }\n\n        const broadcaster = new Broadcaster(this.connection);\n        const relationIdLoader = new RelationIdLoader(this.connection, queryRunner, this.expressionMap.relationIdAttributes);\n        const relationCountLoader = new RelationCountLoader(this.connection, queryRunner, this.expressionMap.relationCountAttributes);\n        const relationIdMetadataTransformer = new RelationIdMetadataToAttributeTransformer(this.expressionMap);\n        relationIdMetadataTransformer.transform();\n        const relationCountMetadataTransformer = new RelationCountMetadataToAttributeTransformer(this.expressionMap);\n        relationCountMetadataTransformer.transform();\n\n        let rawResults: any[] = [], entities: any[] = [];\n\n        // for pagination enabled (e.g. skip and take) its much more complicated - its a special process\n        // where we make two queries to find the data we need\n        // first query find ids in skip and take range\n        // and second query loads the actual data in given ids range\n        if ((this.expressionMap.skip || this.expressionMap.take) && this.expressionMap.joinAttributes.length > 0) {\n\n            // we are skipping order by here because its not working in subqueries anyway\n            // to make order by working we need to apply it on a distinct query\n            const [selects, orderBys] = this.createOrderByCombinedWithSelectExpression(\"distinctAlias\");\n            const metadata = this.expressionMap.mainAlias.metadata;\n            const mainAliasName = this.expressionMap.mainAlias.name;\n\n            const querySelects = metadata.primaryColumns.map(primaryColumn => {\n                const distinctAlias = this.escape(\"distinctAlias\");\n                const columnAlias = this.escape(mainAliasName + \"_\" + primaryColumn.databaseName);\n                if (!orderBys[columnAlias]) // make sure we aren't overriding user-defined order in inverse direction\n                    orderBys[columnAlias] = \"ASC\";\n                return `${distinctAlias}.${columnAlias} as \"ids_${mainAliasName + \"_\" + primaryColumn.databaseName}\"`;\n            });\n\n            rawResults = await new SelectQueryBuilder(this.connection, queryRunner)\n                .select(`DISTINCT ${querySelects.join(\", \")}`)\n                .addSelect(selects)\n                .from(`(${this.clone().orderBy().groupBy().getQuery()})`, \"distinctAlias\")\n                .offset(this.expressionMap.skip)\n                .limit(this.expressionMap.take)\n                .orderBy(orderBys)\n                .cache(this.expressionMap.cache ? this.expressionMap.cache : this.expressionMap.cacheId, this.expressionMap.cacheDuration)\n                .setParameters(this.getParameters())\n                .getRawMany();\n\n            if (rawResults.length > 0) {\n                let condition = \"\";\n                const parameters: ObjectLiteral = {};\n                if (metadata.hasMultiplePrimaryKeys) {\n                    condition = rawResults.map((result, index) => {\n                        return metadata.primaryColumns.map(primaryColumn => {\n                            parameters[`ids_${index}_${primaryColumn.propertyName}`] = result[`ids_${mainAliasName}_${primaryColumn.databaseName}`];\n                            return `${mainAliasName}.${primaryColumn.propertyName}=:ids_${index}_${primaryColumn.databaseName}`;\n                        }).join(\" AND \");\n                    }).join(\" OR \");\n                } else {\n                    const ids = rawResults.map(result => result[\"ids_\" + mainAliasName + \"_\" + metadata.primaryColumns[0].databaseName]);\n                    const areAllNumbers = ids.every((id: any) => typeof id === \"number\");\n                    if (areAllNumbers) {\n                        // fixes #190. if all numbers then its safe to perform query without parameter\n                        condition = `${mainAliasName}.${metadata.primaryColumns[0].propertyName} IN (${ids.join(\", \")})`;\n                    } else {\n                        parameters[\"ids\"] = ids;\n                        condition = mainAliasName + \".\" + metadata.primaryColumns[0].propertyName + \" IN (:ids)\";\n                    }\n                }\n                rawResults = await this.clone()\n                    .mergeExpressionMap({ extraAppendedAndWhereCondition: condition })\n                    .setParameters(parameters)\n                    .loadRawResults(queryRunner);\n            }\n\n        } else {\n            rawResults = await this.loadRawResults(queryRunner);\n        }\n\n        if (rawResults.length > 0) {\n\n            // transform raw results into entities\n            const rawRelationIdResults = await relationIdLoader.load(rawResults);\n            const rawRelationCountResults = await relationCountLoader.load(rawResults);\n            const transformer = new RawSqlResultsToEntityTransformer(this.expressionMap, this.connection.driver, rawRelationIdResults, rawRelationCountResults);\n            entities = transformer.transform(rawResults, this.expressionMap.mainAlias!);\n\n            // broadcast all \"after load\" events\n            if (this.expressionMap.mainAlias.hasMetadata)\n                await broadcaster.broadcastLoadEventsForAll(this.expressionMap.mainAlias.target, entities);\n        }\n\n        return {\n            raw: rawResults,\n            entities: entities,\n        };\n    }\n\n    protected createOrderByCombinedWithSelectExpression(parentAlias: string): [ string, OrderByCondition] {\n\n        // if table has a default order then apply it\n        const orderBys = this.expressionMap.allOrderBys;\n        const selectString = Object.keys(orderBys)\n            .map(orderCriteria => {\n                if (orderCriteria.indexOf(\".\") !== -1) {\n                    const [aliasName, propertyPath] = orderCriteria.split(\".\");\n                    const alias = this.expressionMap.findAliasByName(aliasName);\n                    const column = alias.metadata.findColumnWithPropertyName(propertyPath);\n                    return this.escape(parentAlias) + \".\" + this.escape(aliasName + \"_\" + column!.databaseName);\n                } else {\n                    if (this.expressionMap.selects.find(select => select.selection === orderCriteria || select.aliasName === orderCriteria))\n                        return this.escape(parentAlias) + \".\" + orderCriteria;\n\n                    return \"\";\n                }\n            })\n            .join(\", \");\n\n        const orderByObject: OrderByCondition = {};\n        Object.keys(orderBys).forEach(orderCriteria => {\n            if (orderCriteria.indexOf(\".\") !== -1) {\n                const [aliasName, propertyPath] = orderCriteria.split(\".\");\n                const alias = this.expressionMap.findAliasByName(aliasName);\n                const column = alias.metadata.findColumnWithPropertyName(propertyPath);\n                orderByObject[this.escape(parentAlias) + \".\" + this.escape(aliasName + \"_\" + column!.databaseName)] = orderBys[orderCriteria];\n            } else {\n                if (this.expressionMap.selects.find(select => select.selection === orderCriteria || select.aliasName === orderCriteria)) {\n                    orderByObject[this.escape(parentAlias) + \".\" + orderCriteria] = orderBys[orderCriteria];\n                } else {\n                    orderByObject[orderCriteria] = orderBys[orderCriteria];\n                }\n            }\n        });\n\n        return [selectString, orderByObject];\n    }\n\n    /**\n     * Loads raw results from the database.\n     */\n    protected async loadRawResults(queryRunner: QueryRunner) {\n        const [sql, parameters] = this.getQueryAndParameters();\n        const cacheOptions = typeof this.connection.options.cache === \"object\" ? this.connection.options.cache : {};\n        let savedQueryResultCacheOptions: QueryResultCacheOptions|undefined = undefined;\n        if (this.connection.queryResultCache && (this.expressionMap.cache || cacheOptions.alwaysEnabled)) {\n            savedQueryResultCacheOptions = await this.connection.queryResultCache.getFromCache({\n                identifier: this.expressionMap.cacheId,\n                query: this.getSql(),\n                duration: this.expressionMap.cacheDuration || cacheOptions.duration || 1000\n            }, queryRunner);\n            if (savedQueryResultCacheOptions && !this.connection.queryResultCache.isExpired(savedQueryResultCacheOptions))\n                return JSON.parse(savedQueryResultCacheOptions.result);\n        }\n\n        const results = await queryRunner.query(sql, parameters);\n\n        if (this.connection.queryResultCache && (this.expressionMap.cache || cacheOptions.alwaysEnabled)) {\n            await this.connection.queryResultCache.storeInCache({\n                identifier: this.expressionMap.cacheId,\n                query: this.getSql(),\n                time: new Date().getTime(),\n                duration: this.expressionMap.cacheDuration || cacheOptions.duration || 1000,\n                result: JSON.stringify(results)\n            }, savedQueryResultCacheOptions, queryRunner);\n        }\n\n        return results;\n    }\n\n    /**\n     * Merges into expression map given expression map properties.\n     */\n    protected mergeExpressionMap(expressionMap: Partial<QueryExpressionMap>): this {\n        Object.assign(this.expressionMap, expressionMap);\n        return this;\n    }\n\n    /**\n     * Normalizes a give number - converts to int if possible.\n     */\n    protected normalizeNumber(num: any) {\n        if (typeof num === \"number\" || num === undefined || num === null)\n            return num;\n\n        return parseInt(num);\n    }\n\n    /**\n     * Creates a query builder used to execute sql queries inside this query builder.\n     */\n    protected obtainQueryRunner() {\n        return this.queryRunner || this.connection.createQueryRunner(\"slave\");\n    }\n\n}\n","import {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n/**\n * Arguments for RelationIdMetadataArgs class.\n */\nexport interface RelationIdMetadataArgs {\n\n    /**\n     * Class to which this decorator is applied.\n     */\n    readonly target: Function;\n\n    /**\n     * Class's property name to which this decorator is applied.\n     */\n    readonly propertyName: string;\n\n    /**\n     * Target's relation which it should count.\n     */\n    readonly relation: string|((object: any) => any);\n\n    /**\n     * Alias of the joined (destination) table.\n     */\n    readonly alias?: string;\n\n    /**\n     * Extra condition applied to \"ON\" section of join.\n     */\n    readonly queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>;\n\n}\n","import {RelationIdMetadataArgs} from \"../metadata-args/RelationIdMetadataArgs\";\nimport {EntityMetadata} from \"./EntityMetadata\";\nimport {RelationMetadata} from \"./RelationMetadata\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\n\n/**\n * Contains all information about entity's relation count.\n */\nexport class RelationIdMetadata {\n\n    // ---------------------------------------------------------------------\n    // Public Properties\n    // ---------------------------------------------------------------------\n\n    /**\n     * Entity metadata where this column metadata is.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Relation from which ids will be extracted.\n     */\n    relation: RelationMetadata;\n\n    /**\n     * Relation name which need to count.\n     */\n    relationNameOrFactory: string|((object: any) => any);\n\n    /**\n     * Target class to which metadata is applied.\n     */\n    target: Function|string;\n\n    /**\n     * Target's property name to which this metadata is applied.\n     */\n    propertyName: string;\n\n    /**\n     * Alias of the joined (destination) table.\n     */\n    alias?: string;\n\n    /**\n     * Extra condition applied to \"ON\" section of join.\n     */\n    queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>;\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        entityMetadata: EntityMetadata,\n        args: RelationIdMetadataArgs\n    }) {\n        this.entityMetadata = options.entityMetadata;\n        this.target = options.args.target;\n        this.propertyName = options.args.propertyName;\n        this.relationNameOrFactory = options.args.relation;\n        this.alias = options.args.alias;\n        this.queryBuilderFactory = options.args.queryBuilderFactory;\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Sets relation id value from the given entity.\n     *\n     * todo: make it to work in embeds as well.\n     */\n    setValue(entity: ObjectLiteral) {\n        const inverseEntity = this.relation.getEntityValue(entity);\n\n        if (inverseEntity instanceof Array) {\n            entity[this.propertyName] = inverseEntity.map(item => {\n               return this.relation.inverseEntityMetadata.getEntityIdMixedMap(item);\n            }).filter(item => item !== null && item !== undefined);\n\n        } else {\n            const value = this.relation.inverseEntityMetadata.getEntityIdMixedMap(inverseEntity);\n            if (value !== undefined)\n                entity[this.propertyName] = value;\n        }\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Builder Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Builds some depend relation id properties.\n     * This builder method should be used only after entity metadata, its properties map and all relations are build.\n     */\n    build() {\n        const propertyPath = this.relationNameOrFactory instanceof Function ? this.relationNameOrFactory(this.entityMetadata.propertiesMap) : this.relationNameOrFactory;\n        const relation = this.entityMetadata.findRelationWithPropertyPath(propertyPath);\n        if (!relation)\n            throw new Error(`Cannot find relation ${propertyPath}. Wrong relation specified for @RelationId decorator.`);\n\n        this.relation = relation;\n    }\n\n\n}","import {EventListenerType} from \"../metadata/types/EventListenerTypes\";\n\n/**\n * Arguments for EntityListenerMetadata class.\n */\nexport interface EntityListenerMetadataArgs {\n\n    /**\n     * Class to which listener is applied.\n     */\n    readonly target: Function;\n\n    /**\n     * Class's property name to which listener is applied.\n     */\n    readonly propertyName: string;\n\n    /**\n     * The type of the listener.\n     */\n    readonly type: EventListenerType;\n\n}\n","import {EventListenerType} from \"./types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../metadata-args/EntityListenerMetadataArgs\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {EntityMetadata} from \"./EntityMetadata\";\nimport {EmbeddedMetadata} from \"./EmbeddedMetadata\";\n\n/**\n * This metadata contains all information about entity's listeners.\n */\nexport class EntityListenerMetadata {\n\n    // ---------------------------------------------------------------------\n    // Properties\n    // ---------------------------------------------------------------------\n\n    /**\n     * Entity metadata of the listener.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Embedded metadata of the listener, in the case if listener is in embedded.\n     */\n    embeddedMetadata?: EmbeddedMetadata;\n\n    /**\n     * Target class to which metadata is applied.\n     * This can be different then entityMetadata.target in the case if listener is in the embedded.\n     */\n    target: Function|string;\n\n    /**\n     * Target's property name to which this metadata is applied.\n     */\n    propertyName: string;\n\n    /**\n     * The type of the listener.\n     */\n    type: EventListenerType;\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: { entityMetadata: EntityMetadata, embeddedMetadata?: EmbeddedMetadata, args: EntityListenerMetadataArgs }) {\n        this.entityMetadata = options.entityMetadata;\n        this.embeddedMetadata = options.embeddedMetadata;\n        this.target = options.args.target;\n        this.propertyName = options.args.propertyName;\n        this.type = options.args.type;\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Checks if entity listener is allowed to be executed on the given entity.\n     */\n    isAllowed(entity: ObjectLiteral) { // todo: create in entity metadata method like isInherited?\n        return this.entityMetadata.target === entity.constructor || // todo: .constructor won't work for entity schemas, but there are no entity listeners in schemas since there are no objects, right?\n            (this.entityMetadata.target instanceof Function && entity.constructor.prototype instanceof this.entityMetadata.target); // todo: also need to implement entity schema inheritance\n    }\n\n    /**\n     * Executes listener method of the given entity.\n     */\n    execute(entity: ObjectLiteral) {\n        if (!this.embeddedMetadata)\n            return entity[this.propertyName]();\n\n        this.callEntityEmbeddedMethod(entity, this.embeddedMetadata.propertyPath.split(\".\"));\n    }\n\n    // ---------------------------------------------------------------------\n    // Protected Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Calls embedded entity listener method no matter how nested it is.\n     */\n    protected callEntityEmbeddedMethod(entity: ObjectLiteral, propertyPaths: string[]): void {\n        const propertyPath = propertyPaths.shift();\n        if (!propertyPath)\n            return;\n\n        if (propertyPaths.length === 0) {\n            entity[propertyPath][this.propertyName]();\n        } else {\n            if (entity[propertyPath])\n                this.callEntityEmbeddedMethod(entity[propertyPath], propertyPaths);\n        }\n    }\n\n}","import {ColumnMetadata} from \"./ColumnMetadata\";\nimport {RelationMetadata} from \"./RelationMetadata\";\nimport {EntityMetadata} from \"./EntityMetadata\";\nimport {EmbeddedMetadataArgs} from \"../metadata-args/EmbeddedMetadataArgs\";\nimport {RelationIdMetadata} from \"./RelationIdMetadata\";\nimport {RelationCountMetadata} from \"./RelationCountMetadata\";\nimport {Connection} from \"../connection/Connection\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {EntityListenerMetadata} from \"./EntityListenerMetadata\";\nimport {IndexMetadata} from \"./IndexMetadata\";\n\n/**\n * Contains all information about entity's embedded property.\n */\nexport class EmbeddedMetadata {\n\n    // ---------------------------------------------------------------------\n    // Public Properties\n    // ---------------------------------------------------------------------\n\n    /**\n     * Entity metadata where this embedded is.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Parent embedded in the case if this embedded inside other embedded.\n     */\n    parentEmbeddedMetadata?: EmbeddedMetadata;\n\n    /**\n     * Embedded target type.\n     */\n    type: Function;\n\n    /**\n     * Property name on which this embedded is attached.\n     */\n    propertyName: string;\n\n    /**\n     * Gets full path to this embedded property (including embedded property name).\n     * Full path is relevant when embedded is used inside other embeds (one or multiple nested).\n     * For example it will return \"counters.subcounters\".\n     */\n    propertyPath: string;\n\n    /**\n     * Columns inside this embed.\n     */\n    columns: ColumnMetadata[] = [];\n\n    /**\n     * Relations inside this embed.\n     */\n    relations: RelationMetadata[] = [];\n\n    /**\n     * Entity listeners inside this embed.\n     */\n    listeners: EntityListenerMetadata[] = [];\n\n    /**\n     * Indices applied to the embed columns.\n     */\n    indices: IndexMetadata[] = [];\n\n    /**\n     * Relation ids inside this embed.\n     */\n    relationIds: RelationIdMetadata[] = [];\n\n    /**\n     * Relation counts inside this embed.\n     */\n    relationCounts: RelationCountMetadata[] = [];\n\n    /**\n     * Nested embeddable in this embeddable (which has current embedded as parent embedded).\n     */\n    embeddeds: EmbeddedMetadata[] = [];\n\n    /**\n     * Indicates if this embedded is in array mode.\n     *\n     * This option works only in monogodb.\n     */\n    isArray: boolean = false;\n\n    /**\n     * Prefix of the embedded, used instead of propertyName.\n     * If set to empty string, then prefix is not set at all.\n     */\n    customPrefix: string|boolean|undefined;\n\n    /**\n     * Gets the prefix of the columns.\n     * By default its a property name of the class where this prefix is.\n     * But if custom prefix is set then it takes its value as a prefix.\n     * However if custom prefix is set to empty string prefix to column is not applied at all.\n     */\n    prefix: string;\n\n    /**\n     * Returns array of property names of current embed and all its parent embeds.\n     *\n     * example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeds\n     * we need to get value of \"id\" column from the post real entity object.\n     * this method will return [\"data\", \"information\", \"counters\"]\n     */\n    parentPropertyNames: string[] = [];\n\n    /**\n     * Returns array of prefixes of current embed and all its parent embeds.\n     */\n    parentPrefixes: string[] = [];\n\n    /**\n     * Returns embed metadatas from all levels of the parent tree.\n     *\n     * example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeds\n     * this method will return [embed metadata of data, embed metadata of information, embed metadata of counters]\n     */\n    embeddedMetadataTree: EmbeddedMetadata[] = [];\n\n    /**\n     * Embed metadatas from all levels of the parent tree.\n     *\n     * example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeds\n     * this method will return [embed metadata of data, embed metadata of information, embed metadata of counters]\n     */\n    columnsFromTree: ColumnMetadata[] = [];\n\n    /**\n     * Relations of this embed and all relations from its child embeds.\n     */\n    relationsFromTree: RelationMetadata[] = [];\n\n    /**\n     * Relations of this embed and all relations from its child embeds.\n     */\n    listenersFromTree: EntityListenerMetadata[] = [];\n\n    /**\n     * Indices of this embed and all indices from its child embeds.\n     */\n    indicesFromTree: IndexMetadata[] = [];\n\n    /**\n     * Relation ids of this embed and all relation ids from its child embeds.\n     */\n    relationIdsFromTree: RelationIdMetadata[] = [];\n\n    /**\n     * Relation counts of this embed and all relation counts from its child embeds.\n     */\n    relationCountsFromTree: RelationCountMetadata[] = [];\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        entityMetadata: EntityMetadata,\n        args: EmbeddedMetadataArgs,\n    }) {\n        this.entityMetadata = options.entityMetadata;\n        this.type = options.args.type();\n        this.propertyName = options.args.propertyName;\n        this.customPrefix = options.args.prefix;\n        this.isArray = options.args.isArray;\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Creates a new embedded object.\n     */\n    create(): any {\n        return new (this.type as any);\n    }\n\n    // ---------------------------------------------------------------------\n    // Builder Methods\n    // ---------------------------------------------------------------------\n\n    build(connection: Connection): this {\n        this.embeddeds.forEach(embedded => embedded.build(connection));\n        this.prefix = this.buildPrefix(connection);\n        this.parentPropertyNames = this.buildParentPropertyNames();\n        this.parentPrefixes = this.buildParentPrefixes();\n        this.propertyPath = this.parentPropertyNames.join(\".\");\n        this.embeddedMetadataTree = this.buildEmbeddedMetadataTree();\n        this.columnsFromTree = this.buildColumnsFromTree();\n        this.relationsFromTree = this.buildRelationsFromTree();\n        this.listenersFromTree = this.buildListenersFromTree();\n        this.indicesFromTree = this.buildIndicesFromTree();\n        this.relationIdsFromTree = this.buildRelationIdsFromTree();\n        this.relationCountsFromTree = this.buildRelationCountsFromTree();\n        return this;\n    }\n\n    // ---------------------------------------------------------------------\n    // Protected Methods\n    // ---------------------------------------------------------------------\n\n    protected buildPrefix(connection: Connection): string {\n        if (connection.driver instanceof MongoDriver)\n            return this.propertyName;\n\n        let prefixes: string[] = [];\n        if (this.parentEmbeddedMetadata)\n            prefixes.push(this.parentEmbeddedMetadata.buildPrefix(connection));\n\n        if (this.customPrefix === undefined) {\n            prefixes.push(this.propertyName);\n        } else if (typeof this.customPrefix === \"string\") {\n            prefixes.push(this.customPrefix);\n        }\n\n        return prefixes.join(\"_\"); // todo: use naming strategy instead of \"_\"  !!!\n    }\n\n    protected buildParentPropertyNames(): string[] {\n        return this.parentEmbeddedMetadata ? this.parentEmbeddedMetadata.buildParentPropertyNames().concat(this.propertyName) : [this.propertyName];\n    }\n\n    protected buildParentPrefixes(): string[] {\n        return [this.prefix || this.propertyName];\n    }\n\n    protected buildEmbeddedMetadataTree(): EmbeddedMetadata[] {\n        return this.parentEmbeddedMetadata ? this.parentEmbeddedMetadata.buildEmbeddedMetadataTree().concat(this) : [this];\n    }\n\n    protected buildColumnsFromTree(): ColumnMetadata[] {\n        return this.embeddeds.reduce((columns, embedded) => columns.concat(embedded.buildColumnsFromTree()), this.columns);\n    }\n\n    protected buildRelationsFromTree(): RelationMetadata[] {\n        return this.embeddeds.reduce((relations, embedded) => relations.concat(embedded.buildRelationsFromTree()), this.relations);\n    }\n\n    protected buildListenersFromTree(): EntityListenerMetadata[] {\n        return this.embeddeds.reduce((relations, embedded) => relations.concat(embedded.buildListenersFromTree()), this.listeners);\n    }\n\n    protected buildIndicesFromTree(): IndexMetadata[] {\n        return this.embeddeds.reduce((relations, embedded) => relations.concat(embedded.buildIndicesFromTree()), this.indices);\n    }\n\n    protected buildRelationIdsFromTree(): RelationIdMetadata[] {\n        return this.embeddeds.reduce((relations, embedded) => relations.concat(embedded.buildRelationIdsFromTree()), this.relationIds);\n    }\n\n    protected buildRelationCountsFromTree(): RelationCountMetadata[] {\n        return this.embeddeds.reduce((relations, embedded) => relations.concat(embedded.buildRelationCountsFromTree()), this.relationCounts);\n    }\n\n}\n","import {OnDeleteType} from \"../../metadata/types/OnDeleteType\";\n\n// todo: add ON_UPDATE\n\n/**\n * Describes all relation's options.\n */\nexport interface RelationOptions {\n\n    /**\n     * If set to true then it means that related object can be allowed to be inserted / updated / removed to the db.\n     * This is option a shortcut if you would like to set cascadeInsert, cascadeUpdate and cascadeRemove to true.\n     */\n    cascadeAll?: boolean;\n\n    /**\n     * If set to true then it means that related object can be allowed to be inserted to the db.\n     */\n    cascadeInsert?: boolean;\n\n    /**\n     * If set to true then it means that related object can be allowed to be updated in the db.\n     */\n    cascadeUpdate?: boolean;\n\n    /**\n     * If set to true then it means that related object can be allowed to be remove from the db.\n     */\n    cascadeRemove?: boolean;\n\n    /**\n     * Indicates if relation column value can be nullable or not.\n     */\n    nullable?: boolean;\n\n    /**\n     * Database cascade action on delete.\n     */\n    onDelete?: OnDeleteType;\n\n    /**\n     * Indicates if this relation will be a primary key.\n     * Can be used only for many-to-one and owner one-to-one relations.\n     */\n    primary?: boolean;\n\n    /**\n     * Set this relation to be lazy. Note: lazy relations are promises. When you call them they return promise\n     * which resolve relation result then. If your property's type is Promise then this relation is set to lazy automatically.\n     */\n    lazy?: boolean;\n\n    /**\n     * Set this relation to be eager.\n     * Eager relations are always loaded automatically when relation's owner entity is loaded using find* methods.\n     * Only using QueryBuilder prevents loading eager relations.\n     * Eager flag cannot be set from both sides of relation - you can eager load only one side of the relationship.\n     */\n    eager?: boolean;\n\n}","/**\n * Contains the name of the property of the object, or the function that returns this name.\n */\nexport type PropertyTypeFactory<T> = string|((t: T) => string|any);\n","/**\n * Function that returns a type of the field. Returned value must be a class used on the relation.\n */\nexport type RelationTypeInFunction = ((type?: any) => Function)|Function|string; // todo: |string ?\n\n","import {RelationType} from \"../metadata/types/RelationTypes\";\nimport {RelationOptions} from \"../decorator/options/RelationOptions\";\nimport {PropertyTypeFactory} from \"../metadata/types/PropertyTypeInFunction\";\nimport {RelationTypeInFunction} from \"../metadata/types/RelationTypeInFunction\";\n\n/**\n * Arguments for RelationMetadata class.\n */\nexport interface RelationMetadataArgs {\n\n    /**\n     * Class to which this relation is applied.\n     */\n    readonly target: Function|string;\n\n    /**\n     * In the case if this relation is without a target, targetId must be specified.\n     * This is used for entity schemas without classes.\n     */\n    // readonly targetId?: string;\n\n    /**\n     * Class's property name to which this relation is applied.\n     */\n    readonly propertyName: string;\n\n    /**\n     * Indicates if this relation will be lazily loaded.\n     */\n    readonly isLazy: boolean;\n\n    /**\n     * Original (reflected) class's property type.\n     *\n     * todo: this can be empty for relations from entity schemas.\n     */\n    // readonly propertyType?: any;\n\n    /**\n     * Type of relation. Can be one of the value of the RelationTypes class.\n     */\n    readonly relationType: RelationType;\n\n    /**\n     * Type of the relation. This type is in function because of language specifics and problems with recursive\n     * referenced classes.\n     */\n    readonly type: RelationTypeInFunction;\n\n    /**\n     * Inverse side of the relation.\n     */\n    readonly inverseSideProperty?: PropertyTypeFactory<any>;\n\n    /**\n     * Additional relation options.\n     */\n    readonly options: RelationOptions;\n\n    /**\n     * Indicates if this is a parent (can be only many-to-one relation) relation in the tree tables.\n     */\n    readonly isTreeParent?: boolean;\n\n    /**\n     * Indicates if this is a children (can be only one-to-many relation) relation in the tree tables.\n     */\n    readonly isTreeChildren?: boolean;\n\n}","import {RelationType} from \"./types/RelationTypes\";\nimport {EntityMetadata} from \"./EntityMetadata\";\nimport {ForeignKeyMetadata} from \"./ForeignKeyMetadata\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"./ColumnMetadata\";\nimport {EmbeddedMetadata} from \"./EmbeddedMetadata\";\nimport {RelationMetadataArgs} from \"../metadata-args/RelationMetadataArgs\";\nimport {OnDeleteType} from \"./types/OnDeleteType\";\nimport {PropertyTypeFactory} from \"./types/PropertyTypeInFunction\";\n\n/**\n * Contains all information about some entity's relation.\n */\nexport class RelationMetadata {\n\n    // ---------------------------------------------------------------------\n    // Public Properties\n    // ---------------------------------------------------------------------\n\n    /**\n     * Entity metadata of the entity where this relation is placed.\n     *\n     * For example for @ManyToMany(type => Category) in Post, entityMetadata will be metadata of Post entity.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Entity metadata of the entity that is targeted by this relation.\n     *\n     * For example for @ManyToMany(type => Category) in Post, inverseEntityMetadata will be metadata of Category entity.\n     */\n    inverseEntityMetadata: EntityMetadata;\n\n    /**\n     * Entity metadata of the junction table.\n     * Junction tables have their own entity metadata objects.\n     * Defined only for many-to-many relations.\n     */\n    junctionEntityMetadata?: EntityMetadata;\n\n    /**\n     * Embedded metadata where this relation is.\n     * If this relation is not in embed then this property value is undefined.\n     */\n    embeddedMetadata?: EmbeddedMetadata;\n\n    /**\n     * Relation type, e.g. is it one-to-one, one-to-many, many-to-one or many-to-many.\n     */\n    relationType: RelationType;\n\n    /**\n     * Target entity to which this relation is applied.\n     * Target IS NOT equal to entityMetadata.target, because relation\n     *\n     * For example for @ManyToMany(type => Category) in Post, target will be Post.\n     * If @ManyToMany(type => Category) is in Counters which is embedded into Post, target will be Counters.\n     * If @ManyToMany(type => Category) is in abstract class BaseUser which Post extends, target will be BaseUser.\n     * Target can be string if its defined in entity schema instead of class.\n     */\n    target: Function|string;\n\n    /**\n     * Target's property name to which relation decorator is applied.\n     */\n    propertyName: string;\n\n    /**\n     * Gets full path to this column property (including relation name).\n     * Full path is relevant when column is used in embeds (one or multiple nested).\n     * For example it will return \"counters.subcounters.likes\".\n     * If property is not in embeds then it returns just property name of the column.\n     */\n    propertyPath: string;\n\n    /**\n     * Indicates if this is a parent (can be only many-to-one relation) relation in the tree tables.\n     */\n    isTreeParent: boolean = false;\n\n    /**\n     * Indicates if this is a children (can be only one-to-many relation) relation in the tree tables.\n     */\n    isTreeChildren: boolean = false;\n\n    /**\n     * Indicates if this relation's column is a primary key.\n     * Can be used only for many-to-one and owner one-to-one relations.\n     */\n    isPrimary: boolean = false;\n\n    /**\n     * Indicates if this relation is lazily loaded.\n     */\n    isLazy: boolean = false;\n\n    /**\n     * Indicates if this relation is eagerly loaded.\n     */\n    isEager: boolean = false;\n\n    /**\n     * If set to true then related objects are allowed to be inserted to the database.\n     */\n    isCascadeInsert: boolean = false;\n\n    /**\n     * If set to true then related objects are allowed to be updated in the database.\n     */\n    isCascadeUpdate: boolean = false;\n\n    /**\n     * If set to true then related objects are allowed to be remove from the database.\n     */\n    isCascadeRemove: boolean = false;\n\n    /**\n     * Indicates if relation column value can be nullable or not.\n     */\n    isNullable: boolean = true;\n\n    /**\n     * What to do with a relation on deletion of the row containing a foreign key.\n     */\n    onDelete?: OnDeleteType;\n\n    /**\n     * Gets the property's type to which this relation is applied.\n     *\n     * For example for @ManyToMany(type => Category) in Post, target will be Category.\n     */\n    type: Function|string;\n\n    /**\n     * Indicates if this side is an owner of this relation.\n     */\n    isOwning: boolean = false;\n\n    /**\n     * Checks if this relation's type is \"one-to-one\".\n     */\n    isOneToOne: boolean = false;\n\n    /**\n     * Checks if this relation is owner side of the \"one-to-one\" relation.\n     * Owner side means this side of relation has a join column in the table.\n     */\n    isOneToOneOwner: boolean = false;\n\n    /**\n     * Checks if this relation has a join column (e.g. is it many-to-one or one-to-one owner side).\n     */\n    isWithJoinColumn: boolean = false;\n\n    /**\n     * Checks if this relation is NOT owner side of the \"one-to-one\" relation.\n     * NOT owner side means this side of relation does not have a join column in the table.\n     */\n    isOneToOneNotOwner: boolean = false;\n\n    /**\n     * Checks if this relation's type is \"one-to-many\".\n     */\n    isOneToMany: boolean = false;\n\n    /**\n     * Checks if this relation's type is \"many-to-one\".\n     */\n    isManyToOne: boolean = false;\n\n    /**\n     * Checks if this relation's type is \"many-to-many\".\n     */\n    isManyToMany: boolean = false;\n\n    /**\n     * Checks if this relation's type is \"many-to-many\", and is owner side of the relationship.\n     * Owner side means this side of relation has a join table.\n     */\n    isManyToManyOwner: boolean = false;\n\n    /**\n     * Checks if this relation's type is \"many-to-many\", and is NOT owner side of the relationship.\n     * Not owner side means this side of relation does not have a join table.\n     */\n    isManyToManyNotOwner: boolean = false;\n\n    /**\n     * Gets the property path of the inverse side of the relation.\n     */\n    inverseSidePropertyPath: string;\n\n    /**\n     * Inverse side of the relation set by user.\n     *\n     * Inverse side set in the relation can be either string - property name of the column on inverse side,\n     * either can be a function that accepts a map of properties with the object and returns one of them.\n     * Second approach is used to achieve type-safety.\n     */\n    givenInverseSidePropertyFactory: PropertyTypeFactory<any>;\n\n    /**\n     * Gets the relation metadata of the inverse side of this relation.\n     */\n    inverseRelation?: RelationMetadata;\n\n    /**\n     * Join table name.\n     */\n    joinTableName: string;\n\n    /**\n     * Foreign keys created for this relation.\n     */\n    foreignKeys: ForeignKeyMetadata[] = [];\n\n    /**\n     * Join table columns.\n     * Join columns can be obtained only from owner side of the relation.\n     * From non-owner side of the relation join columns will be empty.\n     * If this relation is a many-to-one/one-to-one then it takes join columns from the current entity.\n     * If this relation is many-to-many then it takes all owner join columns from the junction entity.\n     */\n    joinColumns: ColumnMetadata[] = [];\n\n    /**\n     * Inverse join table columns.\n     * Inverse join columns are supported only for many-to-many relations\n     * and can be obtained only from owner side of the relation.\n     * From non-owner side of the relation join columns will be undefined.\n     */\n    inverseJoinColumns: ColumnMetadata[] = [];\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        entityMetadata: EntityMetadata,\n        embeddedMetadata?: EmbeddedMetadata,\n        args: RelationMetadataArgs\n    }) {\n        this.entityMetadata = options.entityMetadata;\n        this.embeddedMetadata = options.embeddedMetadata!;\n        const args = options.args;\n        this.target = args.target;\n        this.propertyName = args.propertyName;\n        this.relationType = args.relationType;\n\n        if (args.inverseSideProperty)\n            this.givenInverseSidePropertyFactory = args.inverseSideProperty;\n\n        this.isLazy = args.isLazy || false;\n        this.isCascadeInsert = args.options.cascadeInsert || args.options.cascadeAll || false;\n        this.isCascadeUpdate = args.options.cascadeUpdate || args.options.cascadeAll || false;\n        this.isCascadeRemove = args.options.cascadeRemove || args.options.cascadeAll || false;\n        this.isNullable = args.options.nullable === false || this.isPrimary ? false : true;\n        this.onDelete = args.options.onDelete;\n        this.isPrimary = args.options.primary || false;\n        this.isEager = args.options.eager || false;\n        this.isTreeParent = args.isTreeParent || false;\n        this.isTreeChildren = args.isTreeChildren || false;\n        this.type = args.type instanceof Function ? (args.type as () => any)() : args.type;\n\n        this.isOneToOne = this.relationType === \"one-to-one\";\n        this.isOneToMany = this.relationType === \"one-to-many\";\n        this.isManyToOne = this.relationType === \"many-to-one\";\n        this.isManyToMany = this.relationType === \"many-to-many\";\n        this.isOneToOneNotOwner = this.isOneToOne ? true : false;\n        this.isManyToManyNotOwner = this.isManyToMany ? true : false;\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Extracts column value from the given entity.\n     * If column is in embedded (or recursive embedded) it extracts its value from there.\n     */\n    getEntityValue(entity: ObjectLiteral): any|undefined {\n\n        // extract column value from embeddeds of entity if column is in embedded\n        if (this.embeddedMetadata) {\n\n            // example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeddeds\n            // we need to get value of \"id\" column from the post real entity object\n\n            // first step - we extract all parent properties of the entity relative to this column, e.g. [data, information, counters]\n            const propertyNames = [...this.embeddedMetadata.parentPropertyNames];\n\n            // next we need to access post[data][information][counters][this.propertyName] to get column value from the counters\n            // this recursive function takes array of generated property names and gets the post[data][information][counters] embed\n            const extractEmbeddedColumnValue = (propertyNames: string[], value: ObjectLiteral): any => {\n                const propertyName = propertyNames.shift();\n                return propertyName ? extractEmbeddedColumnValue(propertyNames, value[propertyName]) : value;\n            };\n\n            // once we get nested embed object we get its column, e.g. post[data][information][counters][this.propertyName]\n            const embeddedObject = extractEmbeddedColumnValue(propertyNames, entity);\n            return embeddedObject ? embeddedObject[this.isLazy ? \"__\" + this.propertyName + \"__\" : this.propertyName] : undefined;\n\n        } else { // no embeds - no problems. Simply return column name by property name of the entity\n            return entity[this.isLazy ? \"__\" + this.propertyName + \"__\" : this.propertyName];\n        }\n    }\n\n    /**\n     * Sets given entity's relation's value.\n     * Using of this method helps to set entity relation's value of the lazy and non-lazy relations.\n     */\n    setEntityValue(entity: ObjectLiteral, value: any): void {\n        if (this.embeddedMetadata) {\n\n            // first step - we extract all parent properties of the entity relative to this column, e.g. [data, information, counters]\n            const extractEmbeddedColumnValue = (embeddedMetadatas: EmbeddedMetadata[], map: ObjectLiteral): any => {\n                // if (!object[embeddedMetadata.propertyName])\n                //     object[embeddedMetadata.propertyName] = embeddedMetadata.create();\n\n                const embeddedMetadata = embeddedMetadatas.shift();\n                if (embeddedMetadata) {\n                    if (!map[embeddedMetadata.propertyName])\n                        map[embeddedMetadata.propertyName] = embeddedMetadata.create();\n\n                    extractEmbeddedColumnValue(embeddedMetadatas, map[embeddedMetadata.propertyName]);\n                    return map;\n                }\n                map[this.propertyName] = value;\n                return map;\n            };\n            return extractEmbeddedColumnValue([...this.embeddedMetadata.embeddedMetadataTree], entity);\n\n        } else {\n            entity[this.propertyName] = value;\n        }\n    }\n\n    /**\n     * Creates entity id map from the given entity ids array.\n     */\n    createValueMap(value: any) {\n\n        // extract column value from embeds of entity if column is in embedded\n        if (this.embeddedMetadata) {\n\n            // example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeddeds\n            // we need to get value of \"id\" column from the post real entity object and return it in a\n            // { data: { information: { counters: { id: ... } } } } format\n\n            // first step - we extract all parent properties of the entity relative to this column, e.g. [data, information, counters]\n            const propertyNames = [...this.embeddedMetadata.parentPropertyNames];\n\n            // now need to access post[data][information][counters] to get column value from the counters\n            // and on each step we need to create complex literal object, e.g. first { data },\n            // then { data: { information } }, then { data: { information: { counters } } },\n            // then { data: { information: { counters: [this.propertyName]: entity[data][information][counters][this.propertyName] } } }\n            // this recursive function helps doing that\n            const extractEmbeddedColumnValue = (propertyNames: string[], map: ObjectLiteral): any => {\n                const propertyName = propertyNames.shift();\n                if (propertyName) {\n                    map[propertyName] = {};\n                    extractEmbeddedColumnValue(propertyNames, map[propertyName]);\n                    return map;\n                }\n                map[this.propertyName] = value;\n                return map;\n            };\n            return extractEmbeddedColumnValue(propertyNames, {});\n\n        } else { // no embeds - no problems. Simply return column property name and its value of the entity\n            return { [this.propertyName]: value };\n        }\n    }\n\n    // ---------------------------------------------------------------------\n    // Builder Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Builds some depend relation metadata properties.\n     * This builder method should be used only after embedded metadata tree was build.\n     */\n    build() {\n        this.propertyPath = this.buildPropertyPath();\n    }\n\n    /**\n     * Registers given foreign keys in the relation.\n     * This builder method should be used to register foreign key in the relation.\n     */\n    registerForeignKeys(...foreignKeys: ForeignKeyMetadata[]) {\n        this.foreignKeys.push(...foreignKeys);\n        this.joinColumns = this.foreignKeys[0] ? this.foreignKeys[0].columns : [];\n        this.inverseJoinColumns = this.foreignKeys[1] ? this.foreignKeys[1].columns : [];\n        this.isOwning = this.isManyToOne || ((this.isManyToMany || this.isOneToOne) && this.joinColumns.length > 0);\n        this.isOneToOneOwner = this.isOneToOne && this.isOwning;\n        this.isOneToOneNotOwner = this.isOneToOne && !this.isOwning;\n        this.isManyToManyOwner = this.isManyToMany && this.isOwning;\n        this.isManyToManyNotOwner = this.isManyToMany && !this.isOwning;\n        this.isWithJoinColumn = this.isManyToOne || this.isOneToOneOwner;\n    }\n\n    /**\n     * Registers a given junction entity metadata.\n     * This builder method can be called after junction entity metadata for the many-to-many relation was created.\n     */\n    registerJunctionEntityMetadata(junctionEntityMetadata: EntityMetadata) {\n        this.junctionEntityMetadata = junctionEntityMetadata;\n        this.joinTableName = junctionEntityMetadata.tableName;\n        if (this.inverseRelation) {\n            this.inverseRelation.junctionEntityMetadata = junctionEntityMetadata;\n            this.joinTableName = junctionEntityMetadata.tableName;\n        }\n    }\n\n    /**\n     * Builds inverse side property path based on given inverse side property factory.\n     * This builder method should be used only after properties map of the inverse entity metadata was build.\n     */\n    buildInverseSidePropertyPath(): string {\n\n        if (this.givenInverseSidePropertyFactory) {\n            const ownerEntityPropertiesMap = this.inverseEntityMetadata.propertiesMap;\n            if (typeof this.givenInverseSidePropertyFactory === \"function\")\n                return this.givenInverseSidePropertyFactory(ownerEntityPropertiesMap);\n\n            if (typeof this.givenInverseSidePropertyFactory === \"string\")\n                return this.givenInverseSidePropertyFactory;\n\n        } else if (this.isTreeParent && this.entityMetadata.treeChildrenRelation) {\n            return this.entityMetadata.treeChildrenRelation.propertyName;\n\n        } else if (this.isTreeChildren && this.entityMetadata.treeParentRelation) {\n            return this.entityMetadata.treeParentRelation.propertyName;\n        }\n\n        return \"\";\n    }\n\n    /**\n     * Builds relation's property path based on its embedded tree.\n     */\n    buildPropertyPath(): string {\n        if (!this.embeddedMetadata || !this.embeddedMetadata.parentPropertyNames.length)\n            return this.propertyName;\n\n        return this.embeddedMetadata.parentPropertyNames.join(\".\") + \".\" + this.propertyName;\n    }\n\n}","import {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {Connection} from \"../connection/Connection\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {RelationLoader} from \"../query-builder/RelationLoader\";\n\n/**\n * Wraps entities and creates getters/setters for their relations\n * to be able to lazily load relations when accessing these relations.\n */\nexport class LazyRelationsWrapper {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Wraps given entity and creates getters/setters for its given relation\n     * to be able to lazily load data when accessing these relation.\n     */\n    wrap(object: ObjectLiteral, relation: RelationMetadata) {\n        const relationLoader = new RelationLoader(this.connection);\n        const dataIndex = \"__\" + relation.propertyName + \"__\"; // in what property of the entity loaded data will be stored\n        const promiseIndex = \"__promise_\" + relation.propertyName + \"__\"; // in what property of the entity loading promise will be stored\n        const resolveIndex = \"__has_\" + relation.propertyName + \"__\"; // indicates if relation data already was loaded or not, we need this flag if loaded data is empty\n\n        Object.defineProperty(object, relation.propertyName, {\n            get: function() {\n                if (this[resolveIndex] === true) // if related data already was loaded then simply return it\n                    return Promise.resolve(this[dataIndex]);\n\n                if (this[promiseIndex]) // if related data is loading then return a promise relationLoader loads it\n                    return this[promiseIndex];\n\n                // nothing is loaded yet, load relation data and save it in the model once they are loaded\n                this[promiseIndex] = relationLoader.load(relation, this).then(result => {\n                    this[dataIndex] = result;\n                    this[resolveIndex] = true;\n                    delete this[promiseIndex];\n                    return this[dataIndex];\n\n                }); // .catch((err: any) => { throw err; });\n                return this[promiseIndex];\n            },\n            set: function(promise: Promise<any>) {\n                if (promise instanceof Promise) { // if set data is a promise then wait for its resolve and save in the object\n                    promise.then(result => {\n                        this[dataIndex] = result;\n                        this[resolveIndex] = true;\n                    });\n\n                } else { // if its direct data set (non promise, probably not safe-typed)\n                    this[dataIndex] = promise;\n                    this[resolveIndex] = true;\n                }\n            },\n            configurable: true\n        });\n    }\n\n}","import {TableType} from \"../metadata/types/TableTypes\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\n\n/**\n * Arguments for TableMetadata class, helps to construct an TableMetadata object.\n */\nexport interface TableMetadataArgs {\n\n    /**\n     * Class to which table is applied.\n     * Function target is a table defined in the class.\n     * String target is a table defined in a json schema.\n     */\n    target: Function|string;\n\n    /**\n     * Table's name. If name is not set then table's name will be generated from target's name.\n     */\n    name?: string;\n\n    /**\n     * Table type. Tables can be abstract, closure, junction, embedded, etc.\n     */\n    type: TableType;\n\n    /**\n     * Specifies a default order by used for queries from this table when no explicit order by is specified.\n     */\n    orderBy?: OrderByCondition|((object: any) => OrderByCondition|any);\n\n    /**\n     * Table's database engine type (like \"InnoDB\", \"MyISAM\", etc).\n     */\n    engine?: string;\n\n    /**\n     * Database name. Used in MySql and Sql Server.\n     */\n    database?: string;\n\n    /**\n     * Schema name. Used in Postgres and Sql Server.\n     */\n    schema?: string;\n\n    /**\n     * Whether table must be synced during schema build or not\n     */\n    skipSync?: boolean;\n\n}\n","import {ColumnMetadata} from \"./ColumnMetadata\";\nimport {RelationMetadata} from \"./RelationMetadata\";\nimport {IndexMetadata} from \"./IndexMetadata\";\nimport {ForeignKeyMetadata} from \"./ForeignKeyMetadata\";\nimport {EmbeddedMetadata} from \"./EmbeddedMetadata\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {LazyRelationsWrapper} from \"../lazy-loading/LazyRelationsWrapper\";\nimport {RelationIdMetadata} from \"./RelationIdMetadata\";\nimport {RelationCountMetadata} from \"./RelationCountMetadata\";\nimport {TableType} from \"./types/TableTypes\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\nimport {OrmUtils} from \"../util/OrmUtils\";\nimport {TableMetadataArgs} from \"../metadata-args/TableMetadataArgs\";\nimport {Connection} from \"../connection/Connection\";\nimport {EntityListenerMetadata} from \"./EntityListenerMetadata\";\nimport {PropertyTypeFactory} from \"./types/PropertyTypeInFunction\";\nimport {Driver} from \"../driver/Driver\";\nimport {PostgresDriver} from \"../driver/postgres/PostgresDriver\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {PostgresConnectionOptions} from \"../driver/postgres/PostgresConnectionOptions\";\nimport {SqlServerConnectionOptions} from \"../driver/sqlserver/SqlServerConnectionOptions\";\n\n/**\n * Contains all entity metadata.\n */\nexport class EntityMetadata {\n\n    // -------------------------------------------------------------------------\n    // Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Used to wrap lazy relations.\n     */\n    lazyRelationsWrapper: LazyRelationsWrapper;\n\n    /**\n     * If entity's table is a closure-typed table, then this entity will have a closure junction table metadata.\n     */\n    closureJunctionTable: EntityMetadata;\n\n    /**\n     * If this is entity metadata for a junction closure table then its owner closure table metadata will be set here.\n     */\n    parentClosureEntityMetadata: EntityMetadata;\n\n    /**\n     * Parent's entity metadata. Used in inheritance patterns.\n     */\n    parentEntityMetadata: EntityMetadata;\n\n    /**\n     * Children entity metadatas. Used in inheritance patterns.\n     */\n    childEntityMetadatas: EntityMetadata[] = [];\n\n    /**\n     * Table type. Tables can be abstract, closure, junction, embedded, etc.\n     */\n    tableType: TableType = \"regular\";\n\n    /**\n     * Target class to which this entity metadata is bind.\n     * Note, that when using table inheritance patterns target can be different rather then table's target.\n     * For virtual tables which lack of real entity (like junction tables) target is equal to their table name.\n     */\n    target: Function|string;\n\n    /**\n     * Indicates if this entity metadata of a junction table, or not.\n     * Junction table is a table created by many-to-many relationship.\n     *\n     * Its also possible to understand if entity is junction via tableType.\n     */\n    isJunction: boolean = false;\n\n    /**\n     * Entity's name.\n     * Equal to entity target class's name if target is set to table.\n     * If target class is not then then it equals to table name.\n     */\n    name: string;\n\n    /**\n     * Gets the name of the target.\n     */\n    targetName: string;\n\n    /**\n     * Original user-given table name (taken from schema or @Entity(tableName) decorator).\n     * If user haven't specified a table name this property will be undefined.\n     */\n    givenTableName?: string;\n\n    /**\n     * Entity table name in the database.\n     * This is final table name of the entity.\n     * This name already passed naming strategy, and generated based on\n     * multiple criteria, including user table name and global table prefix.\n     */\n    tableName: string;\n\n    /**\n     * Entity table path. Contains database name, schema name and table name.\n     * E.g. \"myDB\".\"mySchema\".\"myTable\"\n     */\n    tablePath: string;\n\n    /**\n     * Entity schema path. Contains database name and schema name.\n     * E.g. \"myDB\".\"mySchema\"\n     */\n    schemaPath?: string;\n\n    /**\n     * Gets the table name without global table prefix.\n     * When querying table you need a table name with prefix, but in some scenarios,\n     * for example when you want to name a junction table that contains names of two other tables,\n     * you may want a table name without prefix.\n     */\n    tableNameWithoutPrefix: string;\n\n    /**\n     * Indicates if schema sync is skipped for this entity.\n     */\n    skipSync: boolean;\n\n    /**\n     * Table's database engine type (like \"InnoDB\", \"MyISAM\", etc).\n     */\n    engine?: string;\n\n    /**\n     * Database name.\n     */\n    database?: string;\n\n    /**\n     * Schema name. Used in Postgres and Sql Server.\n     */\n    schema?: string;\n\n    /**\n     * Specifies a default order by used for queries from this table when no explicit order by is specified.\n     */\n    orderBy?: OrderByCondition;\n\n    /**\n     * Entity's column metadatas defined by user.\n     */\n    ownColumns: ColumnMetadata[] = [];\n\n    /**\n     * Entity's relation metadatas.\n     */\n    ownRelations: RelationMetadata[] = [];\n\n    /**\n     * Entity's own listener metadatas.\n     */\n    ownListeners: EntityListenerMetadata[] = [];\n\n    /**\n     * Entity's own indices.\n     */\n    ownIndices: IndexMetadata[] = [];\n\n    /**\n     * Relations of the entity, including relations that are coming from the embeddeds of this entity.\n     */\n    relations: RelationMetadata[] = [];\n\n    /**\n     * List of eager relations this metadata has.\n     */\n    eagerRelations: RelationMetadata[] = [];\n\n    /**\n     * List of eager relations this metadata has.\n     */\n    lazyRelations: RelationMetadata[] = [];\n\n    /**\n     * Columns of the entity, including columns that are coming from the embeddeds of this entity.\n     */\n    columns: ColumnMetadata[] = [];\n\n    /**\n     * In the case if this entity metadata is junction table's entity metadata,\n     * this will contain all referenced columns of owner entity.\n     */\n    ownerColumns: ColumnMetadata[] = [];\n\n    /**\n     * In the case if this entity metadata is junction table's entity metadata,\n     * this will contain all referenced columns of inverse entity.\n     */\n    inverseColumns: ColumnMetadata[] = [];\n\n    /**\n     * Entity's relation id metadatas.\n     */\n    relationIds: RelationIdMetadata[] = [];\n\n    /**\n     * Entity's relation id metadatas.\n     */\n    relationCounts: RelationCountMetadata[] = [];\n\n    /**\n     * Entity's index metadatas.\n     */\n    indices: IndexMetadata[] = [];\n\n    /**\n     * Entity's foreign key metadatas.\n     */\n    foreignKeys: ForeignKeyMetadata[] = [];\n\n    /**\n     * Entity's embedded metadatas.\n     */\n    embeddeds: EmbeddedMetadata[] = [];\n\n    /**\n     * Entity listener metadatas.\n     */\n    listeners: EntityListenerMetadata[] = [];\n\n    /**\n     * If this entity metadata's table using one of the inheritance patterns,\n     * then this will contain what pattern it uses.\n     */\n    inheritanceType?: \"single-table\"|\"class-table\";\n\n    /**\n     * If this entity metadata is a child table of some table, it should have a discriminator value.\n     * Used to store a value in a discriminator column.\n     */\n    discriminatorValue?: string;\n\n    /**\n     * Checks if entity's table has multiple primary columns.\n     */\n    hasMultiplePrimaryKeys: boolean;\n\n    /**\n     * Gets the column with generated flag.\n     */\n    generatedColumns: ColumnMetadata[] = [];\n\n    /**\n     * Gets the object id column used with mongodb database.\n     */\n    objectIdColumn?: ColumnMetadata;\n\n    /**\n     * Gets entity column which contains a create date value.\n     */\n    createDateColumn?: ColumnMetadata;\n\n    /**\n     * Gets entity column which contains an update date value.\n     */\n    updateDateColumn?: ColumnMetadata;\n\n    /**\n     * Gets entity column which contains an entity version.\n     */\n    versionColumn?: ColumnMetadata;\n\n    /**\n     * Gets the discriminator column used to store entity identificator in single-table inheritance tables.\n     */\n    discriminatorColumn?: ColumnMetadata;\n\n    /**\n     * Special column that stores tree level in tree entities.\n     */\n    treeLevelColumn?: ColumnMetadata;\n\n    /**\n     * Gets the primary columns.\n     */\n    primaryColumns: ColumnMetadata[] = [];\n\n    /**\n     * Id columns in the parent table (used in table inheritance).\n     */\n    parentIdColumns: ColumnMetadata[] = [];\n\n    /**\n     * Gets only one-to-one relations of the entity.\n     */\n    oneToOneRelations: RelationMetadata[] = [];\n\n    /**\n     * Gets only owner one-to-one relations of the entity.\n     */\n    ownerOneToOneRelations: RelationMetadata[] = [];\n\n    /**\n     * Gets only one-to-many relations of the entity.\n     */\n    oneToManyRelations: RelationMetadata[] = [];\n\n    /**\n     * Gets only many-to-one relations of the entity.\n     */\n    manyToOneRelations: RelationMetadata[] = [];\n\n    /**\n     * Gets only many-to-many relations of the entity.\n     */\n    manyToManyRelations: RelationMetadata[] = [];\n\n    /**\n     * Gets only owner many-to-many relations of the entity.\n     */\n    ownerManyToManyRelations: RelationMetadata[] = [];\n\n    /**\n     * Gets only owner one-to-one and many-to-one relations.\n     */\n    relationsWithJoinColumns: RelationMetadata[] = [];\n\n    /**\n     * Tree parent relation. Used only in tree-tables.\n     */\n    treeParentRelation?: RelationMetadata;\n\n    /**\n     * Tree children relation. Used only in tree-tables.\n     */\n    treeChildrenRelation?: RelationMetadata;\n\n    /**\n     * Checks if there any non-nullable column exist in this entity.\n     */\n    hasNonNullableRelations: boolean;\n\n    /**\n     * Checks if this table is regular.\n     * All non-specific tables are just regular tables. Its a default table type.\n     */\n    isRegular: boolean;\n\n    /**\n     * Checks if this table is abstract.\n     * This type is for the tables that does not exist in the database,\n     * but provide columns and relations for the tables of the child classes who inherit them.\n     */\n    isAbstract: boolean;\n\n    /**\n     * Checks if this table is a closure table.\n     * Closure table is one of the tree-specific tables that supports closure database pattern.\n     */\n    isClosure: boolean;\n\n    /**\n     * Checks if this table is a junction table of the closure table.\n     * This type is for tables that contain junction metadata of the closure tables.\n     */\n    isClosureJunction: boolean;\n\n    /**\n     * Checks if this table is an embeddable table.\n     * Embeddable tables are not stored in the database as separate tables.\n     * Instead their columns are embed into tables who owns them.\n     */\n    isEmbeddable: boolean;\n\n    /**\n     * Checks if this table is a single table child.\n     * Special table type for tables that are mapped into single table using Single Table Inheritance pattern.\n     */\n    isSingleTableChild: boolean;\n\n    /**\n     * Checks if this table is a class table child.\n     * Special table type for tables that are mapped into multiple tables using Class Table Inheritance pattern.\n     */\n    isClassTableChild: boolean;\n\n    /**\n     * Map of columns and relations of the entity.\n     *\n     * example: Post{ id: number, name: string, counterEmbed: { count: number }, category: Category }.\n     * This method will create following object:\n     * { id: \"id\", counterEmbed: { count: \"counterEmbed.count\" }, category: \"category\" }\n     */\n    propertiesMap: ObjectLiteral;\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        connection: Connection,\n        parentClosureEntityMetadata?: EntityMetadata,\n        args: TableMetadataArgs\n    }) {\n        const namingStrategy = options.connection.namingStrategy;\n        const entityPrefix = options.connection.options.entityPrefix;\n        this.lazyRelationsWrapper = new LazyRelationsWrapper(options.connection);\n        this.parentClosureEntityMetadata = options.parentClosureEntityMetadata!;\n        this.target = options.args.target;\n        this.tableType = options.args.type;\n        this.engine = options.args.engine;\n        this.database = options.args.database;\n        this.schema = options.args.schema || (options.connection.options as PostgresConnectionOptions|SqlServerConnectionOptions).schema;\n        this.givenTableName = options.args.name;\n        this.skipSync = options.args.skipSync || false;\n        this.targetName = options.args.target instanceof Function ? (options.args.target as any).name : options.args.target;\n        this.tableNameWithoutPrefix = this.tableType === \"closure-junction\" ? namingStrategy.closureJunctionTableName(this.givenTableName!) : namingStrategy.tableName(this.targetName, this.givenTableName);\n        this.tableName = entityPrefix ? namingStrategy.prefixTableName(entityPrefix, this.tableNameWithoutPrefix) : this.tableNameWithoutPrefix;\n        this.target = this.target ? this.target : this.tableName;\n        this.name = this.targetName ? this.targetName : this.tableName;\n        this.tablePath = this.buildTablePath(options.connection.driver);\n        this.schemaPath = this.buildSchemaPath(options.connection.driver);\n\n        this.isClassTableChild = this.tableType === \"class-table-child\";\n        this.isSingleTableChild = this.tableType === \"single-table-child\";\n        this.isEmbeddable = this.tableType === \"embeddable\";\n        this.isJunction = this.tableType === \"closure-junction\" || this.tableType === \"junction\";\n        this.isClosureJunction = this.tableType === \"closure-junction\";\n        this.isClosure = this.tableType === \"closure\";\n        this.isAbstract = this.tableType === \"abstract\";\n        this.isRegular = this.tableType === \"regular\";\n        this.orderBy = (options.args.orderBy instanceof Function) ? options.args.orderBy(this.propertiesMap) : options.args.orderBy;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new entity.\n     */\n    create(): any {\n\n        // if target is set to a function (e.g. class) that can be created then create it\n        if (this.target instanceof Function)\n            return new (<any> this.target)();\n\n        // otherwise simply return a new empty object\n        const newObject = {};\n        this.relations\n            .filter(relation => relation.isLazy)\n            .forEach(relation => this.lazyRelationsWrapper.wrap(newObject, relation));\n\n        return newObject;\n    }\n\n    /**\n     * Checks if given entity has an id.\n     */\n    hasId(entity: ObjectLiteral): boolean {\n        if (!entity)\n            return false;\n\n        return this.primaryColumns.every(primaryColumn => { /// todo: this.metadata.parentEntityMetadata ?\n            const value = primaryColumn.getEntityValue(entity);\n            return value !== null && value !== undefined && value !== \"\";\n        });\n    }\n\n    /**\n     * Compares ids of the two entities.\n     * Returns true if they match, false otherwise.\n     */\n    compareIds(firstId: ObjectLiteral|undefined, secondId: ObjectLiteral|undefined): boolean {\n        if (firstId === undefined || firstId === null || secondId === undefined || secondId === null)\n            return false;\n\n        return OrmUtils.deepCompare(firstId, secondId);\n    }\n\n    /**\n     * Compares two different entity instances by their ids.\n     * Returns true if they match, false otherwise.\n     */\n    compareEntities(firstEntity: ObjectLiteral, secondEntity: ObjectLiteral): boolean {\n\n        // if any entity ids are empty then they aren't equal\n        const isFirstEntityEmpty = this.isEntityMapEmpty(firstEntity);\n        const isSecondEntityEmpty = this.isEntityMapEmpty(secondEntity);\n        if (isFirstEntityEmpty || isSecondEntityEmpty)\n            return false;\n\n        const firstEntityIds = this.getEntityIdMap(firstEntity);\n        const secondEntityIds = this.getEntityIdMap(secondEntity);\n        return this.compareIds(firstEntityIds, secondEntityIds);\n    }\n\n    /**\n     * Checks if there is an embedded with a given property path.\n     */\n    hasEmbeddedWithPropertyPath(propertyPath: string): boolean {\n        return !!this.findEmbeddedWithPropertyPath(propertyPath);\n    }\n\n    /**\n     * Finds embedded with a given property path.\n     */\n    findEmbeddedWithPropertyPath(propertyPath: string): EmbeddedMetadata|undefined {\n        return this.embeddeds.find(embedded => {\n            return embedded.propertyPath === propertyPath;\n        });\n    }\n\n    /**\n     * Finds column with a given property name.\n     */\n    findColumnWithPropertyName(propertyName: string): ColumnMetadata|undefined {\n        return this.columns.find(column => column.propertyName === propertyName);\n    }\n\n    /**\n     * Finds column with a given property path.\n     */\n    findColumnWithPropertyPath(propertyPath: string): ColumnMetadata|undefined {\n        const column = this.columns.find(column => column.propertyPath === propertyPath);\n        if (column)\n            return column;\n\n        // in the case if column with property path was not found, try to find a relation with such property path\n        // if we find relation and it has a single join column then its the column user was seeking\n        const relation = this.relations.find(relation => relation.propertyPath === propertyPath);\n        if (relation && relation.joinColumns.length === 1)\n            return relation.joinColumns[0];\n\n        return undefined;\n    }\n\n    /**\n     * Finds column with a given database name.\n     */\n    findColumnWithDatabaseName(databaseName: string): ColumnMetadata|undefined {\n        return this.columns.find(column => column.databaseName === databaseName);\n    }\n\n    /**\n     * Finds relation with the given name.\n     */\n    findRelationWithDbName(dbName: string): RelationMetadata|undefined {\n        return this.relationsWithJoinColumns.find(relation => {\n            return !!relation.joinColumns.find(column => column.databaseName === dbName);\n        });\n    }\n\n    /**\n     * Finds relation with the given property path.\n     */\n    findRelationWithPropertyPath(propertyPath: string): RelationMetadata|undefined {\n        return this.relations.find(relation => relation.propertyPath === propertyPath);\n    }\n\n    /**\n     * Computes property name of the entity using given PropertyTypeInFunction.\n     */\n    computePropertyPath(nameOrFn: PropertyTypeFactory<any>) {\n        return typeof nameOrFn === \"string\" ? nameOrFn : nameOrFn(this.propertiesMap);\n    }\n\n    /**\n     * Creates entity id map from the given entity ids array.\n     */\n    createEntityIdMap(ids: any|any[]) {\n        if (!(ids instanceof Array))\n            ids = [ids];\n\n        return this.primaryColumns.reduce((map, column, index) => {\n            return OrmUtils.mergeDeep(map, column.createValueMap(ids[index]));\n        }, {} as ObjectLiteral);\n    }\n\n    /**\n     * Checks each id in the given entity id map if they all aren't empty.\n     * If they all aren't empty it returns true.\n     * If at least one id in the given map is empty it returns false.\n     */\n    isEntityMapEmpty(entity: ObjectLiteral): boolean {\n        return !this.primaryColumns.every(column => {\n            const value = column.getEntityValue(entity);\n            return value !== null && value !== undefined;\n        });\n    }\n\n    /**\n     * Gets primary keys of the entity and returns them in a literal object.\n     * For example, for Post{ id: 1, title: \"hello\" } where id is primary it will return { id: 1 }\n     * For multiple primary keys it returns multiple keys in object.\n     * For primary keys inside embeds it returns complex object literal with keys in them.\n     */\n    getEntityIdMap(entity: ObjectLiteral|undefined): ObjectLiteral|undefined {\n        if (!entity) // todo: shall it accept an empty entity? try to remove this\n            return undefined;\n\n        const map = this.primaryColumns.reduce((map, column) => {\n            if (column.isObjectId)\n                return Object.assign(map, column.getEntityValueMap(entity));\n\n            return OrmUtils.mergeDeep(map, column.getEntityValueMap(entity));\n        }, {});\n        return Object.keys(map).length > 0 ? map : undefined;\n    }\n\n    /**\n     * Same as getEntityIdMap, but instead of id column property names it returns database column names.\n     */\n    getDatabaseEntityIdMap(entity: ObjectLiteral): ObjectLiteral|undefined {\n        const map: ObjectLiteral = {};\n        this.primaryColumns.forEach(column => {\n            const entityValue = column.getEntityValue(entity);\n            if (entityValue === null || entityValue === undefined)\n                return;\n\n            map[column.databaseName] = entityValue;\n        });\n        const hasAllIds = Object.keys(map).every(key => {\n            return map[key] !== undefined && map[key] !== null;\n        });\n        return hasAllIds ? map : undefined;\n    }\n\n    /**\n     * Creates a \"mixed id map\".\n     * If entity has multiple primary keys (ids) then it will return just regular id map, like what getEntityIdMap returns.\n     * But if entity has a single primary key then it will return just value of the id column of the entity, just value.\n     * This is called mixed id map.\n     */\n    getEntityIdMixedMap(entity: ObjectLiteral|undefined): ObjectLiteral|undefined {\n        if (!entity) // todo: undefined entities should not go there??\n            return entity;\n\n        const idMap = this.getEntityIdMap(entity);\n        if (this.hasMultiplePrimaryKeys) {\n            return idMap;\n        } else if (idMap) {\n            return idMap[this.primaryColumns[0].propertyName]; // todo: what about parent primary column?\n        }\n\n        return idMap;\n    }\n\n    /**\n     * Checks if given object contains ALL primary keys entity must have.\n     * Returns true if it contains all of them, false if at least one of them is not defined.\n     */\n    checkIfObjectContainsAllPrimaryKeys(object: ObjectLiteral) {\n        return this.primaryColumns.every(primaryColumn => {\n            return object.hasOwnProperty(primaryColumn.propertyName);\n        });\n    }\n\n    /**\n     * Iterates throw entity and finds and extracts all values from relations in the entity.\n     * If relation value is an array its being flattened.\n     */\n    extractRelationValuesFromEntity(entity: ObjectLiteral, relations: RelationMetadata[]): [RelationMetadata, any, EntityMetadata][] {\n        const relationsAndValues: [RelationMetadata, any, EntityMetadata][] = [];\n        relations.forEach(relation => {\n            const value = relation.getEntityValue(entity);\n            if (value instanceof Array) {\n                value.forEach(subValue => relationsAndValues.push([relation, subValue, relation.inverseEntityMetadata]));\n            } else if (value) {\n                relationsAndValues.push([relation, value, relation.inverseEntityMetadata]);\n            }\n        });\n        return relationsAndValues;\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Builder Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Registers a new column in the entity and recomputes all depend properties.\n     */\n    registerColumn(column: ColumnMetadata) {\n        this.ownColumns.push(column);\n        this.columns = this.embeddeds.reduce((columns, embedded) => columns.concat(embedded.columnsFromTree), this.ownColumns);\n        this.parentIdColumns = this.columns.filter(column => column.isParentId);\n        this.primaryColumns = this.columns.filter(column => column.isPrimary);\n        this.hasMultiplePrimaryKeys = this.primaryColumns.length > 1;\n        this.propertiesMap = this.createPropertiesMap();\n    }\n\n    /**\n     * Creates a special object - all columns and relations of the object (plus columns and relations from embeds)\n     * in a special format - { propertyName: propertyName }.\n     *\n     * example: Post{ id: number, name: string, counterEmbed: { count: number }, category: Category }.\n     * This method will create following object:\n     * { id: \"id\", counterEmbed: { count: \"counterEmbed.count\" }, category: \"category\" }\n     */\n    createPropertiesMap(): { [name: string]: string|any } {\n        const map: { [name: string]: string|any } = {};\n        this.columns.forEach(column => OrmUtils.mergeDeep(map, column.createValueMap(column.propertyPath)));\n        this.relations.forEach(relation => OrmUtils.mergeDeep(map, relation.createValueMap(relation.propertyPath)));\n        return map;\n    }\n\n    // ---------------------------------------------------------------------\n    // Protected Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Builds table path using database name and schema name and table name.\n     */\n    protected buildTablePath(driver: Driver): string {\n        let tablePath = this.tableName;\n        if (this.schema)\n            tablePath = this.schema + \".\" + tablePath;\n        if (this.database && !(driver instanceof PostgresDriver)) {\n            if (!this.schema && driver instanceof SqlServerDriver) {\n                tablePath = this.database + \"..\" + tablePath;\n            } else {\n                tablePath = this.database + \".\" + tablePath;\n            }\n        }\n\n        return tablePath;\n    }\n\n    /**\n     * Builds table path using schema name and database name.\n     */\n    protected buildSchemaPath(driver: Driver): string|undefined {\n        if (!this.schema)\n            return undefined;\n\n        return this.database && !(driver instanceof PostgresDriver) ? this.database + \".\" + this.schema : this.schema;\n    }\n\n}","/**\n * Interface for objects that deal with (un)marshalling data.\n */\nexport interface ValueTransformer {\n\n    /**\n     * Used to marshal data when writing to\n     * the database.\n     */\n    to (value: any): any;\n\n    /**\n     * Used to unmarshal data when reading from\n     * the database.\n     */\n    from (value: any): any;\n\n}\n","import {ColumnType} from \"../../driver/types/ColumnTypes\";\nimport {ValueTransformer} from \"./ValueTransformer\";\n\n/**\n * Describes all column's options.\n */\nexport interface ColumnOptions {\n\n    /**\n     * Column type. Must be one of the value from the ColumnTypes class.\n     */\n    type?: ColumnType;\n\n    /**\n     * Column name in the database.\n     */\n    name?: string;\n\n    /**\n     * Column type's length. Used only on some column types.\n     * For example type = \"string\" and length = \"100\" means that ORM will create a column with type varchar(100).\n     */\n    length?: string|number;\n\n    /**\n     * Indicates if column's value can be set to NULL.\n     */\n    nullable?: boolean;\n\n    /**\n     * Indicates if column value is not updated by \"save\" operation.\n     * It means you'll be able to write this value only when you first time insert the object.\n     * Default value is \"false\".\n     */\n    readonly?: boolean;\n\n    /**\n     * Indicates if column is always selected by QueryBuilder and find operations.\n     * Default value is \"true\".\n     */\n    select?: boolean;\n\n    /**\n     * Default database value.\n     */\n    default?: any;\n\n    /**\n     * Indicates if this column is a primary key.\n     * Same can be achieved when @PrimaryColumn decorator is used.\n     */\n    primary?: boolean;\n\n    /**\n     * Specifies if column's value must be unique or not.\n     */\n    unique?: boolean;\n\n    /**\n     * Column comment. Not supported by all database types.\n     */\n    comment?: string;\n\n    /**\n     * The precision for a decimal (exact numeric) column (applies only for decimal column), which is the maximum\n     * number of digits that are stored for the values.\n     */\n    precision?: number;\n\n    /**\n     * The scale for a decimal (exact numeric) column (applies only for decimal column), which represents the number\n     * of digits to the right of the decimal point and must not be greater than precision.\n     */\n    scale?: number;\n\n    /**\n     * Defines a column character set.\n     * Not supported by all database types.\n     */\n    charset?: string;\n\n    /**\n     * Defines a column collation.\n     */\n    collation?: string;\n\n    /**\n     * Array of possible enumerated values.\n     */\n    enum?: any[]|Object;\n\n    /**\n     * Indicates if this column is an array.\n     * Can be simply set to true or array length can be specified.\n     * Supported only by postgres.\n     *\n     * @deprecated use array: true instead. Will be removed in 0.2.0\n     */\n    isArray?: boolean;\n\n    /**\n     * Indicates if this column is an array.\n     * Can be simply set to true or array length can be specified.\n     * Supported only by postgres.\n     */\n    array?: boolean;\n\n    /**\n     * Specifies a value transformer that is to be used to (un)marshal\n     * this column when reading or writing to the database.\n     */\n    transformer?: ValueTransformer;\n    \n}\n","/**\n * Kinda type of the column. Not a type in the database, but locally used type to determine what kind of column\n * we are working with.\n * For example, \"primary\" means that it will be a primary column, or \"createDate\" means that it will create a create\n * date column.\n */\nexport type ColumnMode = \"regular\"|\"virtual\"|\"createDate\"|\"updateDate\"|\"version\"|\"treeChildrenCount\"|\"treeLevel\"|\"discriminator\"|\"parentId\"|\"objectId\"|\"array\";\n","import {ColumnOptions} from \"../decorator/options/ColumnOptions\";\nimport {ColumnMode} from \"./types/ColumnMode\";\n\n/**\n * Arguments for ColumnMetadata class.\n */\nexport interface ColumnMetadataArgs {\n\n    /**\n     * Class to which column is applied.\n     */\n    readonly target: Function|string;\n\n    /**\n     * Class's property name to which column is applied.\n     */\n    readonly propertyName: string;\n\n    /**\n     * Class's property type (reflected) to which column is applied.\n     *\n     * todo: check when this is not set, because for the entity schemas we don't set it.\n     */\n    // readonly propertyType?: string;\n\n    /**\n     * Column mode in which column will work.\n     *\n     * todo: find name better then \"mode\".\n     */\n    readonly mode: ColumnMode;\n\n    /**\n     * Extra column options.\n     */\n    readonly options: ColumnOptions;\n\n}\n","import {ColumnType} from \"../driver/types/ColumnTypes\";\nimport {EntityMetadata} from \"./EntityMetadata\";\nimport {EmbeddedMetadata} from \"./EmbeddedMetadata\";\nimport {RelationMetadata} from \"./RelationMetadata\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {ColumnMetadataArgs} from \"../metadata-args/ColumnMetadataArgs\";\nimport {Connection} from \"../connection/Connection\";\nimport {OrmUtils} from \"../util/OrmUtils\";\nimport {ValueTransformer} from \"../decorator/options/ValueTransformer\";\n\n/**\n * This metadata contains all information about entity's column.\n */\nexport class ColumnMetadata {\n\n    // ---------------------------------------------------------------------\n    // Public Properties\n    // ---------------------------------------------------------------------\n\n    /**\n     * Target class where column decorator is used.\n     * This may not be always equal to entity metadata (for example embeds or inheritance cases).\n     */\n    target: Function|string;\n\n    /**\n     * Entity metadata where this column metadata is.\n     *\n     * For example for @Column() name: string in Post, entityMetadata will be metadata of Post entity.\n     */\n    entityMetadata: EntityMetadata;\n\n    /**\n     * Embedded metadata where this column metadata is.\n     * If this column is not in embed then this property value is undefined.\n     */\n    embeddedMetadata?: EmbeddedMetadata;\n\n    /**\n     * If column is a foreign key of some relation then this relation's metadata will be there.\n     * If this column does not have a foreign key then this property value is undefined.\n     */\n    relationMetadata?: RelationMetadata;\n\n    /**\n     * Class's property name on which this column is applied.\n     */\n    propertyName: string;\n\n    /**\n     * The database type of the column.\n     */\n    type: ColumnType;\n\n    /**\n     * Type's length in the database.\n     */\n    length: string = \"\";\n\n    /**\n     * Defines column character set.\n     */\n    charset?: string;\n\n    /**\n     * Defines column collation.\n     */\n    collation?: string;\n\n    /**\n     * Indicates if this column is a primary key.\n     */\n    isPrimary: boolean = false;\n\n    /**\n     * Indicates if this column is generated (auto increment or generated other way).\n     */\n    isGenerated: boolean = false;\n\n    /**\n     * Specifies generation strategy if this column will use auto increment.\n     */\n    generationStrategy: \"uuid\"|\"increment\";\n\n    /**\n     * Indicates if column value in the database should be unique or not.\n     */\n    isUnique: boolean = false;\n\n    /**\n     * Indicates if column can contain nulls or not.\n     */\n    isNullable: boolean = false;\n\n    /**\n     * Indicates if column is selected by query builder or not.\n     */\n    isSelect: boolean = true;\n\n    /**\n     * Indicates if column is protected from updates or not.\n     */\n    isReadonly: boolean = false;\n\n    /**\n     * Column comment.\n     * This feature is not supported by all databases.\n     */\n    comment: string = \"\";\n\n    /**\n     * Default database value.\n     */\n    default?: any;\n\n    /**\n     * The precision for a decimal (exact numeric) column (applies only for decimal column),\n     * which is the maximum number of digits that are stored for the values.\n     */\n    precision?: number;\n\n    /**\n     * The scale for a decimal (exact numeric) column (applies only for decimal column),\n     * which represents the number of digits to the right of the decimal point and must not be greater than precision.\n     */\n    scale?: number;\n\n    /**\n     * Array of possible enumerated values.\n     */\n    enum?: any[];\n\n    /**\n     * Indicates if this column is an array.\n     * Can be simply set to true or array length can be specified.\n     * Supported only by postgres.\n     */\n    isArray?: boolean;\n\n    /**\n     * Gets full path to this column property (including column property name).\n     * Full path is relevant when column is used in embeds (one or multiple nested).\n     * For example it will return \"counters.subcounters.likes\".\n     * If property is not in embeds then it returns just property name of the column.\n     */\n    propertyPath: string;\n\n    /**\n     * Complete column name in the database including its embedded prefixes.\n     */\n    databaseName: string;\n\n    /**\n     * Database name in the database without embedded prefixes applied.\n     */\n    databaseNameWithoutPrefixes: string;\n\n    /**\n     * Database name set by entity metadata builder, not yet passed naming strategy process and without embedded prefixes.\n     */\n    givenDatabaseName?: string;\n\n    /**\n     * Indicates if column is virtual. Virtual columns are not mapped to the entity.\n     */\n    isVirtual: boolean = false;\n\n    /**\n     * Indicates if column is a parent id. Parent id columns are not mapped to the entity.\n     */\n    isParentId: boolean = false;\n\n    /**\n     * Indicates if column is discriminator. Discriminator columns are not mapped to the entity.\n     */\n    isDiscriminator: boolean = false;\n\n    /**\n     * Indicates if column is tree-level column. Tree-level columns are used in closure entities.\n     */\n    isTreeLevel: boolean = false;\n\n    /**\n     * Indicates if this column contains an entity creation date.\n     */\n    isCreateDate: boolean = false;\n\n    /**\n     * Indicates if this column contains an entity update date.\n     */\n    isUpdateDate: boolean = false;\n\n    /**\n     * Indicates if this column contains an entity version.\n     */\n    isVersion: boolean = false;\n\n    /**\n     * Indicates if this column contains an object id.\n     */\n    isObjectId: boolean = false;\n\n    /**\n     * If this column is foreign key then it references some other column,\n     * and this property will contain reference to this column.\n     */\n    referencedColumn: ColumnMetadata|undefined;\n\n    /**\n     * Specifies a value transformer that is to be used to (un)marshal\n     * this column when reading or writing to the database.\n     */\n    transformer?: ValueTransformer;\n\n    // ---------------------------------------------------------------------\n    // Constructor\n    // ---------------------------------------------------------------------\n\n    constructor(options: {\n        connection: Connection,\n        entityMetadata: EntityMetadata,\n        embeddedMetadata?: EmbeddedMetadata,\n        referencedColumn?: ColumnMetadata,\n        args: ColumnMetadataArgs\n    }) {\n        this.entityMetadata = options.entityMetadata;\n        this.embeddedMetadata = options.embeddedMetadata!;\n        this.referencedColumn = options.referencedColumn;\n        if (options.args.target)\n            this.target = options.args.target;\n        if (options.args.propertyName)\n            this.propertyName = options.args.propertyName;\n        if (options.args.options.name)\n            this.givenDatabaseName = options.args.options.name;\n        if (options.args.options.type)\n            this.type = options.args.options.type;\n        if (options.args.options.length)\n            this.length = options.args.options.length ? options.args.options.length.toString() : \"\";\n        if (options.args.options.charset)\n            this.charset = options.args.options.charset;\n        if (options.args.options.collation)\n            this.collation = options.args.options.collation;\n        if (options.args.options.primary)\n            this.isPrimary = options.args.options.primary;\n        if (options.args.options.unique)\n            this.isUnique = options.args.options.unique;\n        if (options.args.options.default === null) // to make sure default: null is the same as nullable: true\n            this.isNullable = true;\n        if (options.args.options.nullable !== undefined)\n            this.isNullable = options.args.options.nullable;\n        if (options.args.options.select !== undefined)\n            this.isSelect = options.args.options.select;\n        if (options.args.options.readonly !== undefined)\n            this.isReadonly = options.args.options.readonly;\n        if (options.args.options.comment)\n            this.comment = options.args.options.comment;\n        if (options.args.options.default !== undefined)\n            this.default = options.args.options.default;\n        if (options.args.options.scale)\n            this.scale = options.args.options.scale;\n        if (options.args.options.precision)\n            this.precision = options.args.options.precision;\n        if (options.args.options.enum) {\n            if (options.args.options.enum instanceof Object) {\n                this.enum = Object.keys(options.args.options.enum).map(key => {\n                    return (options.args.options.enum as ObjectLiteral)[key];\n                });\n\n            } else {\n                this.enum = options.args.options.enum;\n            }\n        }\n        if (options.args.options.isArray)\n            this.isArray = options.args.options.isArray;\n        if (options.args.options.array)\n            this.isArray = options.args.options.array;\n        if (options.args.mode) {\n            this.isVirtual = options.args.mode === \"virtual\";\n            this.isParentId = options.args.mode === \"parentId\";\n            this.isDiscriminator = options.args.mode === \"discriminator\";\n            this.isTreeLevel = options.args.mode === \"treeLevel\";\n            this.isCreateDate = options.args.mode === \"createDate\";\n            this.isUpdateDate = options.args.mode === \"updateDate\";\n            this.isVersion = options.args.mode === \"version\";\n            this.isObjectId = options.args.mode === \"objectId\";\n        }\n        if (options.args.options.transformer)\n            this.transformer = options.args.options.transformer;\n        if (this.isTreeLevel)\n            this.type = options.connection.driver.mappedDataTypes.treeLevel;\n        if (this.isCreateDate) {\n            this.type = options.connection.driver.mappedDataTypes.createDate;\n            if (!this.default)\n                this.default = () => options.connection.driver.mappedDataTypes.createDateDefault;\n            if (!this.precision && options.connection.driver.mappedDataTypes.createDatePrecision)\n                this.precision = options.connection.driver.mappedDataTypes.createDatePrecision;\n        }\n        if (this.isUpdateDate) {\n            this.type = options.connection.driver.mappedDataTypes.updateDate;\n            if (!this.default)\n                this.default = () => options.connection.driver.mappedDataTypes.updateDateDefault;\n            if (!this.precision && options.connection.driver.mappedDataTypes.updateDatePrecision)\n                this.precision = options.connection.driver.mappedDataTypes.updateDatePrecision;\n        }\n        if (this.isVersion)\n            this.type = options.connection.driver.mappedDataTypes.version;\n    }\n\n    // ---------------------------------------------------------------------\n    // Public Methods\n    // ---------------------------------------------------------------------\n\n    /**\n     * Creates entity id map from the given entity ids array.\n     */\n    createValueMap(value: any) {\n\n        // extract column value from embeds of entity if column is in embedded\n        if (this.embeddedMetadata) {\n\n            // example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeddeds\n            // we need to get value of \"id\" column from the post real entity object and return it in a\n            // { data: { information: { counters: { id: ... } } } } format\n\n            // first step - we extract all parent properties of the entity relative to this column, e.g. [data, information, counters]\n            const propertyNames = [...this.embeddedMetadata.parentPropertyNames];\n\n            // now need to access post[data][information][counters] to get column value from the counters\n            // and on each step we need to create complex literal object, e.g. first { data },\n            // then { data: { information } }, then { data: { information: { counters } } },\n            // then { data: { information: { counters: [this.propertyName]: entity[data][information][counters][this.propertyName] } } }\n            // this recursive function helps doing that\n            const extractEmbeddedColumnValue = (propertyNames: string[], map: ObjectLiteral): any => {\n                const propertyName = propertyNames.shift();\n                if (propertyName) {\n                    map[propertyName] = {};\n                    extractEmbeddedColumnValue(propertyNames, map[propertyName]);\n                    return map;\n                }\n\n                // this is bugfix for #720 when increment number is bigint we need to make sure its a string\n                if (this.generationStrategy === \"increment\" && this.type === \"bigint\")\n                    value = String(value);\n\n                map[this.propertyName] = value;\n                return map;\n            };\n            return extractEmbeddedColumnValue(propertyNames, {});\n\n        } else { // no embeds - no problems. Simply return column property name and its value of the entity\n\n            // this is bugfix for #720 when increment number is bigint we need to make sure its a string\n            if (this.generationStrategy === \"increment\" && this.type === \"bigint\")\n                value = String(value);\n\n            return { [this.propertyName]: value };\n        }\n    }\n\n    /**\n     * Extracts column value and returns its column name with this value in a literal object.\n     * If column is in embedded (or recursive embedded) it returns complex literal object.\n     *\n     * Examples what this method can return depend if this column is in embeds.\n     * { id: 1 } or { title: \"hello\" }, { counters: { code: 1 } }, { data: { information: { counters: { code: 1 } } } }\n     */\n    getEntityValueMap(entity: ObjectLiteral): ObjectLiteral {\n\n        // extract column value from embeds of entity if column is in embedded\n        if (this.embeddedMetadata) {\n\n            // example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeddeds\n            // we need to get value of \"id\" column from the post real entity object and return it in a\n            // { data: { information: { counters: { id: ... } } } } format\n\n            // first step - we extract all parent properties of the entity relative to this column, e.g. [data, information, counters]\n            const propertyNames = [...this.embeddedMetadata.parentPropertyNames];\n\n            // now need to access post[data][information][counters] to get column value from the counters\n            // and on each step we need to create complex literal object, e.g. first { data },\n            // then { data: { information } }, then { data: { information: { counters } } },\n            // then { data: { information: { counters: [this.propertyName]: entity[data][information][counters][this.propertyName] } } }\n            // this recursive function helps doing that\n            const extractEmbeddedColumnValue = (propertyNames: string[], value: ObjectLiteral, map: ObjectLiteral): any => {\n                const propertyName = propertyNames.shift();\n                if (propertyName) {\n                    map[propertyName] = {};\n                    extractEmbeddedColumnValue(propertyNames, value ? value[propertyName] : undefined, map[propertyName]);\n                    return map;\n                }\n                map[this.propertyName] = value ? value[this.propertyName] : undefined;\n                return map;\n            };\n            return extractEmbeddedColumnValue(propertyNames, entity, {});\n\n        } else { // no embeds - no problems. Simply return column property name and its value of the entity\n            if (this.relationMetadata && entity[this.propertyName] && entity[this.propertyName] instanceof Object) {\n                const map = this.relationMetadata.joinColumns.reduce((map, joinColumn) => {\n                    return OrmUtils.mergeDeep(map, joinColumn.referencedColumn!.getEntityValueMap(entity[this.propertyName]));\n                }, {});\n                return { [this.propertyName]: map };\n            } else {\n                return { [this.propertyName]: entity[this.propertyName] };\n            }\n        }\n    }\n\n    /**\n     * Extracts column value from the given entity.\n     * If column is in embedded (or recursive embedded) it extracts its value from there.\n     */\n     getEntityValue(entity: ObjectLiteral): any|undefined {\n        // if (entity === undefined || entity === null) return undefined; // uncomment if needed\n\n        // extract column value from embeddeds of entity if column is in embedded\n        if (this.embeddedMetadata) {\n\n            // example: post[data][information][counters].id where \"data\", \"information\" and \"counters\" are embeddeds\n            // we need to get value of \"id\" column from the post real entity object\n\n            // first step - we extract all parent properties of the entity relative to this column, e.g. [data, information, counters]\n            const propertyNames = [...this.embeddedMetadata.parentPropertyNames];\n\n            // next we need to access post[data][information][counters][this.propertyName] to get column value from the counters\n            // this recursive function takes array of generated property names and gets the post[data][information][counters] embed\n            const extractEmbeddedColumnValue = (propertyNames: string[], value: ObjectLiteral): any => {\n                const propertyName = propertyNames.shift();\n                return propertyName && value ? extractEmbeddedColumnValue(propertyNames, value[propertyName]) : value;\n            };\n\n            // once we get nested embed object we get its column, e.g. post[data][information][counters][this.propertyName]\n            const embeddedObject = extractEmbeddedColumnValue(propertyNames, entity);\n            if (embeddedObject) {\n                if (this.relationMetadata && this.referencedColumn && this.isVirtual) {\n                    const relatedEntity = this.relationMetadata.getEntityValue(embeddedObject);\n                    if (relatedEntity && relatedEntity instanceof Object)\n                        return this.referencedColumn.getEntityValue(relatedEntity);\n                }\n                return embeddedObject[this.propertyName];\n            }\n            return undefined;\n\n        } else { // no embeds - no problems. Simply return column name by property name of the entity\n            if (this.relationMetadata && this.referencedColumn && this.isVirtual) {\n                const relatedEntity = this.relationMetadata.getEntityValue(entity);\n                if (relatedEntity && relatedEntity instanceof Object)\n                    return this.referencedColumn.getEntityValue(relatedEntity);\n            }\n            return entity[this.propertyName];\n        }\n    }\n\n    /**\n     * Sets given entity's column value.\n     * Using of this method helps to set entity relation's value of the lazy and non-lazy relations.\n     */\n    setEntityValue(entity: ObjectLiteral, value: any): void {\n        if (this.embeddedMetadata) {\n\n            // first step - we extract all parent properties of the entity relative to this column, e.g. [data, information, counters]\n            const extractEmbeddedColumnValue = (embeddedMetadatas: EmbeddedMetadata[], map: ObjectLiteral): any => {\n                // if (!object[embeddedMetadata.propertyName])\n                //     object[embeddedMetadata.propertyName] = embeddedMetadata.create();\n\n                const embeddedMetadata = embeddedMetadatas.shift();\n                if (embeddedMetadata) {\n                    if (!map[embeddedMetadata.propertyName])\n                        map[embeddedMetadata.propertyName] = embeddedMetadata.create();\n\n                    extractEmbeddedColumnValue(embeddedMetadatas, map[embeddedMetadata.propertyName]);\n                    return map;\n                }\n                map[this.propertyName] = value;\n                return map;\n            };\n            return extractEmbeddedColumnValue([...this.embeddedMetadata.embeddedMetadataTree], entity);\n\n        } else {\n            entity[this.propertyName] = value;\n        }\n    }\n\n    // ---------------------------------------------------------------------\n    // Builder Methods\n    // ---------------------------------------------------------------------\n\n    build(connection: Connection): this {\n        this.propertyPath = this.buildPropertyPath();\n        this.databaseName = this.buildDatabaseName(connection);\n        this.databaseNameWithoutPrefixes = connection.namingStrategy.columnName(this.propertyName, this.givenDatabaseName, []);\n        return this;\n    }\n\n    // ---------------------------------------------------------------------\n    // Protected Methods\n    // ---------------------------------------------------------------------\n\n    protected buildPropertyPath(): string {\n        let path = \"\";\n        if (this.embeddedMetadata && this.embeddedMetadata.parentPropertyNames.length)\n            path = this.embeddedMetadata.parentPropertyNames.join(\".\") + \".\";\n\n        path += this.propertyName;\n\n        // we add reference column to property path only if this column is virtual\n        // because if its not virtual it means user defined a real column for this relation\n        if (this.isVirtual && this.referencedColumn && this.referencedColumn.propertyName !== this.propertyName)\n            path += \".\" + this.referencedColumn.propertyName;\n\n        return path;\n    }\n\n    protected buildDatabaseName(connection: Connection): string {\n        const propertyNames = this.embeddedMetadata ? this.embeddedMetadata.parentPrefixes : [];\n        return connection.namingStrategy.columnName(this.propertyName, this.givenDatabaseName, propertyNames);\n    }\n\n}","import {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\n\n/**\n * Table's columns in the database represented in this class.\n */\nexport class TableColumn {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Column name.\n     */\n    name: string;\n\n    /**\n     * Column type.\n     */\n    type: string;\n\n    /**\n     * Column's default value.\n     */\n    default: any;\n\n    /**\n     * Indicates if column is NULL, or is NOT NULL in the database.\n     */\n    isNullable: boolean = false;\n\n    /**\n     * Indicates if column is auto-generated sequence.\n     */\n    isGenerated: boolean = false;\n\n    /**\n     * Specifies generation strategy if this column will use auto increment.\n     */\n    generationStrategy?: \"uuid\"|\"increment\";\n\n    /**\n     * Indicates if column is a primary key.\n     */\n    isPrimary: boolean = false;\n\n    /**\n     * Indicates if column has unique value.\n     */\n    isUnique: boolean = false;\n\n    /**\n     * Indicates if column stores array.\n     */\n    isArray: boolean = false;\n\n    /**\n     * Column's comment.\n     */\n    comment?: string;\n\n    /**\n     * Column type's length. Used only on some column types.\n     * For example type = \"string\" and length = \"100\" means that ORM will create a column with type varchar(100).\n     */\n    length: string = \"\";\n\n    /**\n     * Defines column character set.\n     */\n    charset?: string;\n\n    /**\n     * Defines column collation.\n     */\n    collation?: string;\n\n    /**\n     * The precision for a decimal (exact numeric) column (applies only for decimal column), which is the maximum\n     * number of digits that are stored for the values.\n     */\n    precision?: number;\n\n    /**\n     * The scale for a decimal (exact numeric) column (applies only for decimal column), which represents the number\n     * of digits to the right of the decimal point and must not be greater than precision.\n     */\n    scale?: number;\n\n    /**\n     * Array of possible enumerated values.\n     */\n    enum?: any[];\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(options?: {\n        name?: string,\n        type?: string,\n        length?: string,\n        charset?: string,\n        collation?: string,\n        precision?: number,\n        scale?: number,\n        default?: any,\n        isNullable?: boolean,\n        isGenerated?: boolean,\n        generationStrategy?: \"uuid\"|\"increment\",\n        isPrimary?: boolean,\n        isUnique?: boolean,\n        comment?: string,\n        enum?: any[]\n    }) {\n        if (options) {\n            this.name = options.name || \"\";\n            this.type = options.type || \"\";\n            this.length = options.length || \"\";\n            this.charset = options.charset;\n            this.collation = options.collation;\n            this.precision = options.precision;\n            this.scale = options.scale;\n            this.default = options.default;\n            this.isNullable = options.isNullable || false;\n            this.isGenerated = options.isGenerated || false;\n            this.generationStrategy = options.generationStrategy;\n            this.isPrimary = options.isPrimary || false;\n            this.isUnique = options.isUnique || false;\n            this.comment = options.comment;\n            this.enum = options.enum;\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Clones this column to a new column with exact same properties as this column has.\n     */\n    clone(): TableColumn {\n        const newTableColumn = new TableColumn();\n        newTableColumn.name = this.name;\n        newTableColumn.type = this.type;\n        newTableColumn.length = this.length;\n        newTableColumn.charset = this.charset;\n        newTableColumn.collation = this.collation;\n        newTableColumn.precision = this.precision;\n        newTableColumn.scale = this.scale;\n        newTableColumn.enum = this.enum;\n        newTableColumn.default = this.default;\n        newTableColumn.isNullable = this.isNullable;\n        newTableColumn.isGenerated = this.isGenerated;\n        newTableColumn.generationStrategy = this.generationStrategy;\n        newTableColumn.isPrimary = this.isPrimary;\n        newTableColumn.isUnique = this.isUnique;\n        newTableColumn.isArray = this.isArray;\n        newTableColumn.comment = this.comment;\n        return newTableColumn;\n    }\n\n    // -------------------------------------------------------------------------\n    // Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new column based on the given column metadata.\n     */\n    static create(columnMetadata: ColumnMetadata, normalizedType: string, normalizedDefault: string, normalizedLength: string): TableColumn {\n        const tableColumn = new TableColumn();\n        tableColumn.name = columnMetadata.databaseName;\n        tableColumn.length = normalizedLength;\n        tableColumn.charset = columnMetadata.charset;\n        tableColumn.collation = columnMetadata.collation;\n        tableColumn.precision = columnMetadata.precision;\n        tableColumn.scale = columnMetadata.scale;\n        tableColumn.default = normalizedDefault;\n        tableColumn.comment = columnMetadata.comment;\n        tableColumn.isGenerated = columnMetadata.isGenerated;\n        tableColumn.generationStrategy = columnMetadata.generationStrategy;\n        tableColumn.isNullable = columnMetadata.isNullable;\n        tableColumn.type = normalizedType;\n        tableColumn.isPrimary = columnMetadata.isPrimary;\n        tableColumn.isUnique = columnMetadata.isUnique;\n        tableColumn.isArray = columnMetadata.isArray || false;\n        tableColumn.enum = columnMetadata.enum;\n        return tableColumn;\n    }\n\n}","import {TableColumn} from \"../schema-builder/schema/TableColumn\";\nimport {Table} from \"../schema-builder/schema/Table\";\nimport {TableForeignKey} from \"../schema-builder/schema/TableForeignKey\";\nimport {TableIndex} from \"../schema-builder/schema/TableIndex\";\nimport {Connection} from \"../connection/Connection\";\nimport {ReadStream} from \"../platform/PlatformTools\";\nimport {InsertResult} from \"../driver/InsertResult\";\nimport {EntityManager} from \"../entity-manager/EntityManager\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\n\n/**\n * Runs queries on a single database connection.\n *\n * todo: extract schema build operations out of query runner.\n *\n * todo: add following methods:\n * - renameTable\n */\nexport interface QueryRunner {\n\n    /**\n     * Connection used by this query runner.\n     */\n    readonly connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    readonly manager: EntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     */\n    readonly isReleased: boolean;\n\n    /**\n     * Indicates if transaction is in progress.\n     */\n    readonly isTransactionActive: boolean;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data: ObjectLiteral;\n\n    /**\n     * Creates/uses database connection from the connection pool to perform further operations.\n     * Returns obtained database connection.\n     */\n    connect(): Promise<void>;\n\n    /**\n     * Releases used database connection.\n     * You cannot use this query runner methods after connection is released.\n     */\n    release(): Promise<void>;\n\n    /**\n     * Removes all tables from the currently connected database.\n     * Be careful with using this method and avoid using it in production or migrations\n     * (because it can clear all your database).\n     */\n    clearDatabase(tables?: string[], database?: string): Promise<void>;\n\n    /**\n     * Starts transaction.\n     */\n    startTransaction(): Promise<void>;\n\n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    commitTransaction(): Promise<void>;\n\n    /**\n     * Ends transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    rollbackTransaction(): Promise<void>;\n\n    /**\n     * Executes a given SQL query and returns raw database results.\n     */\n    query(query: string, parameters?: any[]): Promise<any>;\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream>; // todo: ReadStream gonna bring problems in websql driver\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    insert(tablePath: string, valuesMap: Object): Promise<InsertResult>;\n\n    /**\n     * Updates rows that match given simple conditions in the given table.\n     */\n    update(tablePath: string, valuesMap: Object, conditions: Object): Promise<void>;\n\n    /**\n     * Performs a simple DELETE query by a given conditions in a given table.\n     */\n    delete(tablePath: string, condition: string, parameters?: any[]): Promise<void>;\n\n    /**\n     * Performs a simple DELETE query by a given conditions in a given table.\n     */\n    delete(tablePath: string, conditions: Object): Promise<void>;\n\n    /**\n     * Inserts new values into closure table.\n     */\n    insertIntoClosureTable(tablePath: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number>;\n\n    /**\n     * Loads a table by a given given name from the database and creates a Table from them.\n     */\n    getTable(tablePath: string): Promise<Table|undefined>;\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     *\n     * todo: make tableNames optional\n     */\n    getTables(tablePaths: string[]): Promise<Table[]>;\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    hasDatabase(database: string): Promise<boolean>;\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    hasTable(tablePath: string): Promise<boolean>;\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]>;\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemas: string[]): Promise<void[]>;\n\n    /**\n     * Creates a new table from the given table metadata and column metadatas.\n     */\n    createTable(table: Table): Promise<void>;\n\n    // todo: create createTableIfNotExist method\n\n    /**\n     * Drops the table.\n     */\n    dropTable(tablePath: string): Promise<void>;\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    hasColumn(tableName: string, columnName: string): Promise<boolean>;\n\n    /**\n     * Adds a new column in the table.\n     */\n    addColumn(tableName: string, column: TableColumn): Promise<void>;\n\n    /**\n     * Adds a new column in the table.\n     */\n    addColumn(table: Table, column: TableColumn): Promise<void>;\n\n    /**\n     * Adds new columns in the table.\n     */\n    addColumns(table: string, columns: TableColumn[]): Promise<void>;\n\n    /**\n     * Adds new columns in the table.\n     */\n    addColumns(table: Table, columns: TableColumn[]): Promise<void>;\n\n    /**\n     * Renames column in the given table.\n     */\n    renameColumn(table: Table, oldColumn: TableColumn, newColumn: TableColumn): Promise<void>;\n\n    /**\n     * Renames column in the given table.\n     */\n    renameColumn(tableName: string, oldColumnName: string, newColumnName: string): Promise<void>;\n\n    /**\n     * Changes a column in the table.\n     */\n    changeColumn(table: Table, oldColumn: TableColumn, newColumn: TableColumn): Promise<void>;\n\n    /**\n     * Changes a column in the table.\n     */\n    changeColumn(table: string, oldColumn: string, newColumn: TableColumn): Promise<void>;\n\n    /**\n     * Changes a columns in the table.\n     */\n    changeColumns(table: Table, changedColumns: { oldColumn: TableColumn, newColumn: TableColumn }[]): Promise<void>;\n\n    /**\n     * Drops the column in the table.\n     */\n    dropColumn(table: Table, column: TableColumn): Promise<void>;\n\n    /**\n     * Drops the columns in the table.\n     */\n    dropColumns(table: Table, columns: TableColumn[]): Promise<void>;\n\n    /**\n     * Updates primary keys in the table.\n     */\n    updatePrimaryKeys(table: Table): Promise<void>;\n\n    /**\n     * Creates a new foreign key.\n     */\n    createForeignKey(tableName: string, foreignKey: TableForeignKey): Promise<void>;\n\n    /**\n     * Creates a new foreign key.\n     */\n    createForeignKey(table: Table, foreignKey: TableForeignKey): Promise<void>;\n\n    /**\n     * Creates a new foreign keys.\n     */\n    createForeignKeys(table: Table, foreignKeys: TableForeignKey[]): Promise<void>;\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    dropForeignKey(table: string, foreignKey: TableForeignKey): Promise<void>;\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    dropForeignKey(table: Table, foreignKey: TableForeignKey): Promise<void>;\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    dropForeignKeys(table: string, foreignKeys: TableForeignKey[]): Promise<void>;\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    dropForeignKeys(table: Table, foreignKeys: TableForeignKey[]): Promise<void>;\n\n    /**\n     * Creates a new index.\n     */\n    createIndex(tableName: Table|string, index: TableIndex): Promise<void>;\n\n    /**\n     * Drops an index from the table.\n     */\n    dropIndex(tableSchemeOrPath: Table|string, index: TableIndex|string): Promise<void>;\n\n    /**\n     * Truncates table.\n     *\n     * todo: probably this should be renamed to drop or clear?\n     */\n    truncate(tableName: string): Promise<void>;\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void;\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void;\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql(): (string|{ up: string, down: string })[];\n\n}","import {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {ColumnType} from \"./types/ColumnTypes\";\nimport {MappedColumnTypes} from \"./types/MappedColumnTypes\";\nimport {SchemaBuilder} from \"../schema-builder/SchemaBuilder\";\nimport {DataTypeDefaults} from \"./types/DataTypeDefaults\";\nimport {BaseConnectionOptions} from \"../connection/BaseConnectionOptions\";\nimport {TableColumn} from \"../schema-builder/schema/TableColumn\";\n\n/**\n * Driver organizes TypeORM communication with specific database management system.\n */\nexport interface Driver {\n\n    /**\n     * Connection options.\n     */\n    options: BaseConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     *\n     * todo: probably move into query runner.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport: boolean;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     */\n    supportedDataTypes: ColumnType[];\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults;\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[];\n\n    /**\n     * Orm has special columns and we need to know what database column types should be for those types.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes;\n\n    /**\n     * Performs connection to the database.\n     * Depend on driver type it may create a connection pool.\n     */\n    connect(): Promise<void>;\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void>;\n\n    /**\n     * Closes connection with database and releases all resources.\n     */\n    disconnect(): Promise<void>;\n\n    /**\n     * Synchronizes database schema (creates tables, indices, etc).\n     */\n    createSchemaBuilder(): SchemaBuilder;\n\n    /**\n     * Creates a query runner used for common queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\"): QueryRunner;\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]];\n\n    /**\n     * Escapes a table name, column name or an alias.\n     */\n    escape(tableName: string): string;\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, column: ColumnMetadata): any;\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type.\n     */\n    prepareHydratedValue(value: any, column: ColumnMetadata): any;\n\n    /**\n     * Transforms type of the given column to a database column type.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number, isArray?: boolean }): string;\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string;\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean;\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string;\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    createFullType(column: TableColumn): string;\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any>;\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any>;\n\n}","/**\n * Converts string into camelCase.\n *\n * @see http://stackoverflow.com/questions/2970525/converting-any-string-into-camel-case\n */\nexport function camelCase(str: string) {\n    return str.replace(/^([A-Z])|[\\s-_](\\w)/g, function(match, p1, p2, offset) {\n        if (p2) return p2.toUpperCase();\n        return p1.toLowerCase();\n    });\n}\n\n/**\n * Converts string into snake-case.\n *\n * @see http://stackoverflow.com/questions/30521224/javascript-convert-pascalcase-to-underscore-case\n */\nexport function snakeCase(str: string) {\n    return str.replace(/(?:^|\\.?)([A-Z])/g, (x, y) => \"_\" + y.toLowerCase()).replace(/^_/, \"\");\n}\n\n/**\n * Converts string into title-case.\n *\n * @see http://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript\n */\nexport function titleCase(str: string) {\n    return str.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\n}","import {NamingStrategyInterface} from \"./NamingStrategyInterface\";\nimport {RandomGenerator} from \"../util/RandomGenerator\";\nimport {camelCase, snakeCase, titleCase} from \"../util/StringUtils\";\n\n/**\n * Naming strategy that is used by default.\n */\nexport class DefaultNamingStrategy implements NamingStrategyInterface {\n\n    /**\n     * Normalizes table name.\n     *\n     * @param targetName Name of the target entity that can be used to generate a table name.\n     * @param userSpecifiedName For example if user specified a table name in a decorator, e.g. @Entity(\"name\")\n     */\n    tableName(targetName: string, userSpecifiedName: string|undefined): string {\n        return userSpecifiedName ? userSpecifiedName : snakeCase(targetName);\n    }\n\n    /**\n     * Creates a table name for a junction table of a closure table.\n     *\n     * @param originalClosureTableName Name of the closure table which owns this junction table.\n     */\n    closureJunctionTableName(originalClosureTableName: string): string {\n        return originalClosureTableName + \"_closure\";\n    }\n\n    columnName(propertyName: string, customName: string, embeddedPrefixes: string[]): string { // todo: simplify\n        if (embeddedPrefixes.length)\n            return camelCase(embeddedPrefixes.join(\"_\")) + (customName ? titleCase(customName) : titleCase(propertyName));\n\n        return customName ? customName : propertyName;\n    }\n\n    relationName(propertyName: string): string {\n        return propertyName;\n    }\n\n    indexName(customName: string|undefined, tableName: string, columns: string[]): string {\n        if (customName)\n            return customName;\n\n        const key = \"ind_\" + tableName + \"_\" + columns.join(\"_\");\n        return \"ind_\" + RandomGenerator.sha1(key).substr(0, 26);\n    }\n\n    joinColumnName(relationName: string, referencedColumnName: string): string {\n        return camelCase(relationName + \"_\" + referencedColumnName);\n    }\n\n    joinTableName(firstTableName: string,\n                  secondTableName: string,\n                  firstPropertyName: string,\n                  secondPropertyName: string): string {\n        return snakeCase(firstTableName + \"_\" + firstPropertyName.replace(/\\./gi, \"_\") + \"_\" + secondTableName);\n    }\n\n    joinTableColumnDuplicationPrefix(columnName: string, index: number): string {\n        return columnName + \"_\" + index;\n    }\n\n    joinTableColumnName(tableName: string, propertyName: string, columnName?: string): string {\n        return camelCase(tableName + \"_\" + (columnName ? columnName : propertyName));\n    }\n\n    joinTableInverseColumnName(tableName: string, propertyName: string, columnName?: string): string {\n        return this.joinTableColumnName(tableName, propertyName, columnName);\n    }\n\n    foreignKeyName(tableName: string, columnNames: string[], referencedTableName: string, referencedColumnNames: string[]): string {\n        const key = `${tableName}_${columnNames.join(\"_\")}_${referencedTableName}_${referencedColumnNames.join(\"_\")}`;\n        return \"fk_\" + RandomGenerator.sha1(key).substr(0, 27); // todo: use crypto instead?\n    }\n\n    classTableInheritanceParentColumnName(parentTableName: any, parentTableIdPropertyName: any): string {\n        return camelCase(parentTableName + \"_\" + parentTableIdPropertyName);\n    }\n\n    /**\n     * Adds globally set prefix to the table name.\n     * This method is executed no matter if prefix was set or not.\n     * Table name is either user's given table name, either name generated from entity target.\n     * Note that table name comes here already normalized by #tableName method.\n     */\n    prefixTableName(prefix: string, tableName: string): string {\n        return prefix + tableName;\n    }\n\n}\n","/**\n * Thrown when consumer tries to execute operation allowed only if connection is opened.\n */\nexport class CannotExecuteNotConnectedError extends Error {\n    name = \"CannotExecuteNotConnectedError\";\n\n    constructor(connectionName: string) {\n        super();\n        this.message = `Cannot execute operation on \"${connectionName}\" connection because connection is not yet established.`;\n        this.stack = new Error().stack;\n    }\n\n}","/**\n * Thrown when consumer tries to connect when he already connected.\n */\nexport class CannotConnectAlreadyConnectedError extends Error {\n    name = \"CannotConnectAlreadyConnectedError\";\n\n    constructor(connectionName: string) {\n        super();\n        this.message = `Cannot create a \"${connectionName}\" connection because connection to the database already established.`;\n        this.stack = new Error().stack;\n    }\n\n}","/**\n */\nexport class EntityMetadataNotFound extends Error {\n    name = \"EntityMetadataNotFound\";\n\n    constructor(target: Function|string) {\n        super();\n        const targetName = typeof target === \"function\" && (<any> target).name ? (<any> target).name : target;\n        this.message = `No metadata for \"${targetName}\" was found.`;\n    }\n\n}","import {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * Migrations should implement this interface and all its methods.\n */\nexport interface MigrationInterface {\n\n    /**\n     * Run the migrations.\n     */\n    up(queryRunner: QueryRunner): Promise<any>;\n\n    /**\n     * Reverse the migrations.\n     */\n    down(queryRunner: QueryRunner): Promise<any>;\n\n}","import {MigrationInterface} from \"./MigrationInterface\";\n\n/**\n * Represents entity of the migration in the database.\n */\nexport class Migration {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Timestamp of the migration.\n     */\n    timestamp: number;\n\n    /**\n     * Name of the migration (class name).\n     */\n    name: string;\n\n    /**\n     * Migration instance that needs to be run.\n     */\n    instance?: MigrationInterface;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(timestamp: number, name: string, instance?: MigrationInterface) {\n        this.timestamp = timestamp;\n        this.name = name;\n        this.instance = instance;\n    }\n\n}","import {Table} from \"../schema-builder/schema/Table\";\nimport {TableColumn} from \"../schema-builder/schema/TableColumn\";\nimport {Connection} from \"../connection/Connection\";\nimport {Migration} from \"./Migration\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {PromiseUtils} from \"../util/PromiseUtils\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {MssqlParameter} from \"../driver/sqlserver/MssqlParameter\";\n\n/**\n * Executes migrations: runs pending and reverts previously executed migrations.\n */\nexport class MigrationExecutor {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection,\n                protected queryRunner?: QueryRunner) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Executes all pending migrations. Pending migrations are migrations that are not yet executed,\n     * thus not saved in the database.\n     */\n    async executePendingMigrations(): Promise<void> {\n\n        const queryRunner = this.queryRunner || this.connection.createQueryRunner(\"master\");\n\n        // create migrations table if its not created yet\n        await this.createMigrationsTableIfNotExist(queryRunner);\n\n        // get all migrations that are executed and saved in the database\n        const executedMigrations = await this.loadExecutedMigrations(queryRunner);\n\n        // get the time when last migration was executed\n        let lastTimeExecutedMigration = this.getLatestMigration(executedMigrations);\n\n        // get all user's migrations in the source code\n        const allMigrations = this.getMigrations();\n\n        // find all migrations that needs to be executed\n        const pendingMigrations = allMigrations.filter(migration => {\n            // check if we already have executed migration\n            const executedMigration = executedMigrations.find(executedMigration => executedMigration.name === migration.name);\n            if (executedMigration)\n                return false;\n\n            // migration is new and not executed. now check if its timestamp is correct\n            if (lastTimeExecutedMigration && migration.timestamp < lastTimeExecutedMigration.timestamp)\n                throw new Error(`New migration found: ${migration.name}, however this migration's timestamp is not valid. Migration's timestamp should not be older then migrations already executed in the database.`);\n\n            // every check is passed means that migration was not run yet and we need to run it\n            return true;\n        });\n\n        // if no migrations are pending then nothing to do here\n        if (!pendingMigrations.length) {\n            this.connection.logger.logSchemaBuild(`No migrations are pending`);\n            return;\n        }\n\n        // log information about migration execution\n        this.connection.logger.logSchemaBuild(`${executedMigrations.length} migrations are already loaded in the database.`);\n        this.connection.logger.logSchemaBuild(`${allMigrations.length} migrations were found in the source code.`);\n        if (lastTimeExecutedMigration)\n            this.connection.logger.logSchemaBuild(`${lastTimeExecutedMigration.name} is the last executed migration. It was executed on ${new Date(lastTimeExecutedMigration.timestamp * 1000).toString()}.`);\n        this.connection.logger.logSchemaBuild(`${pendingMigrations.length} migrations are new migrations that needs to be executed.`);\n\n        // start transaction if its not started yet\n        let transactionStartedByUs = false;\n        if (!queryRunner.isTransactionActive) {\n            await queryRunner.startTransaction();\n            transactionStartedByUs = true;\n        }\n\n        // run all pending migrations in a sequence\n        try {\n            await PromiseUtils.runInSequence(pendingMigrations, migration => {\n                return migration.instance!.up(queryRunner)\n                    .then(() => { // now when migration is executed we need to insert record about it into the database\n                        return this.insertExecutedMigration(queryRunner, migration);\n                    })\n                    .then(() => { // informative log about migration success\n                        this.connection.logger.logSchemaBuild(`Migration ${migration.name} has been executed successfully.`);\n                    });\n            });\n\n            // commit transaction if we started it\n            if (transactionStartedByUs)\n                await queryRunner.commitTransaction();\n\n        } catch (err) { // rollback transaction if we started it\n            if (transactionStartedByUs) {\n                try { // we throw original error even if rollback thrown an error\n                    await queryRunner.rollbackTransaction();\n                } catch (rollbackError) { }\n            }\n\n            throw err;\n\n        } finally {\n\n            // if query runner was created by us then release it\n            if (!this.queryRunner)\n                await queryRunner.release();\n        }\n\n    }\n\n    /**\n     * Reverts last migration that were run.\n     */\n    async undoLastMigration(): Promise<void> {\n\n        const queryRunner = this.queryRunner || this.connection.createQueryRunner(\"master\");\n\n        // create migrations table if its not created yet\n        await this.createMigrationsTableIfNotExist(queryRunner);\n\n        // get all migrations that are executed and saved in the database\n        const executedMigrations = await this.loadExecutedMigrations(queryRunner);\n\n        // get the time when last migration was executed\n        let lastTimeExecutedMigration = this.getLatestMigration(executedMigrations);\n\n        // if no migrations found in the database then nothing to revert\n        if (!lastTimeExecutedMigration) {\n            this.connection.logger.logSchemaBuild(`No migrations was found in the database. Nothing to revert!`);\n            return;\n        }\n\n        // get all user's migrations in the source code\n        const allMigrations = this.getMigrations();\n\n        // find the instance of the migration we need to remove\n        const migrationToRevert = allMigrations.find(migration => migration.name === lastTimeExecutedMigration!.name);\n\n        // if no migrations found in the database then nothing to revert\n        if (!migrationToRevert)\n            throw new Error(`No migration ${lastTimeExecutedMigration.name} was found in the source code. Make sure you have this migration in your codebase and its included in the connection options.`);\n\n        // log information about migration execution\n        this.connection.logger.logSchemaBuild(`${executedMigrations.length} migrations are already loaded in the database.`);\n        this.connection.logger.logSchemaBuild(`${lastTimeExecutedMigration.name} is the last executed migration. It was executed on ${new Date(lastTimeExecutedMigration.timestamp * 1000).toString()}.`);\n        this.connection.logger.logSchemaBuild(`Now reverting it...`);\n\n        // start transaction if its not started yet\n        let transactionStartedByUs = false;\n        if (!queryRunner.isTransactionActive) {\n            await queryRunner.startTransaction();\n            transactionStartedByUs = true;\n        }\n\n        try {\n            await migrationToRevert.instance!.down(queryRunner);\n            await this.deleteExecutedMigration(queryRunner, migrationToRevert);\n            this.connection.logger.logSchemaBuild(`Migration ${migrationToRevert.name} has been reverted successfully.`);\n\n            // commit transaction if we started it\n            if (transactionStartedByUs)\n                await queryRunner.commitTransaction();\n\n        } catch (err) { // rollback transaction if we started it\n            if (transactionStartedByUs) {\n                try { // we throw original error even if rollback thrown an error\n                    await queryRunner.rollbackTransaction();\n                } catch (rollbackError) { }\n            }\n\n            throw err;\n\n        } finally {\n\n            // if query runner was created by us then release it\n            if (!this.queryRunner)\n                await queryRunner.release();\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates table \"migrations\" that will store information about executed migrations.\n     */\n    protected async createMigrationsTableIfNotExist(queryRunner: QueryRunner): Promise<void> {\n        const tableExist = await queryRunner.hasTable(\"migrations\"); // todo: table name should be configurable\n        if (!tableExist) {\n            await queryRunner.createTable(new Table(\"migrations\", [\n                new TableColumn({\n                    name: \"timestamp\",\n                    type: this.connection.driver.normalizeType({ type: this.connection.driver.mappedDataTypes.migrationTimestamp }),\n                    isPrimary: true,\n                    isNullable: false\n                }),\n                new TableColumn({\n                    name: \"name\",\n                    type: this.connection.driver.normalizeType({ type: this.connection.driver.mappedDataTypes.migrationName }),\n                    isNullable: false\n                }),\n            ]));\n        }\n    }\n\n    /**\n     * Loads all migrations that were executed and saved into the database.\n     */\n    protected async loadExecutedMigrations(queryRunner: QueryRunner): Promise<Migration[]> {\n        const migrationsRaw: ObjectLiteral[] = await this.connection.manager\n            .createQueryBuilder(queryRunner)\n            .select()\n            .from(\"migrations\", \"migrations\")\n            .getRawMany();\n\n        return migrationsRaw.map(migrationRaw => {\n            return new Migration(parseInt(migrationRaw[\"timestamp\"]), migrationRaw[\"name\"]);\n        });\n    }\n\n    /**\n     * Gets all migrations that setup for this connection.\n     */\n    protected getMigrations(): Migration[] {\n        const migrations = this.connection.migrations.map(migration => {\n            const migrationClassName = (migration.constructor as any).name;\n            const migrationTimestamp = parseInt(migrationClassName.substr(-13));\n            if (!migrationTimestamp)\n                throw new Error(`${migrationClassName} migration name is wrong. Migration class name should have a UNIX timestamp appended. `);\n\n            return new Migration(migrationTimestamp, migrationClassName, migration);\n        });\n\n        // sort them by timestamp\n        return migrations.sort((a, b) => a.timestamp - b.timestamp);\n    }\n\n    /**\n     * Finds the latest migration (sorts by timestamp) in the given array of migrations.\n     */\n    protected getLatestMigration(migrations: Migration[]): Migration|undefined {\n        const sortedMigrations = migrations.map(migration => migration).sort((a, b) => (a.timestamp - b.timestamp) * -1);\n        return sortedMigrations.length > 0 ? sortedMigrations[0] : undefined;\n    }\n\n    /**\n     * Inserts new executed migration's data into migrations table.\n     */\n    protected async insertExecutedMigration(queryRunner: QueryRunner, migration: Migration): Promise<void> {\n        if (this.connection.driver instanceof SqlServerDriver) {\n            await queryRunner.insert(\"migrations\", {\n                timestamp: new MssqlParameter(migration.timestamp, this.connection.driver.normalizeType({ type: this.connection.driver.mappedDataTypes.migrationTimestamp }) as any),\n                name: new MssqlParameter(migration.name, this.connection.driver.normalizeType({ type: this.connection.driver.mappedDataTypes.migrationName }) as any),\n            });\n\n        } else {\n            await queryRunner.insert(\"migrations\", {\n                timestamp: migration.timestamp,\n                name: migration.name,\n            });\n        }\n    }\n\n    /**\n     * Delete previously executed migration's data from the migrations table.\n     */\n    protected async deleteExecutedMigration(queryRunner: QueryRunner, migration: Migration): Promise<void> {\n        if (this.connection.driver instanceof SqlServerDriver) {\n            await queryRunner.delete(\"migrations\", {\n                timestamp: new MssqlParameter(migration.timestamp, this.connection.driver.normalizeType({ type: this.connection.driver.mappedDataTypes.migrationTimestamp }) as any),\n                name: new MssqlParameter(migration.name, this.connection.driver.normalizeType({ type: this.connection.driver.mappedDataTypes.migrationName }) as any),\n            });\n\n        } else {\n            await queryRunner.delete(\"migrations\", {\n                timestamp: migration.timestamp,\n                name: migration.name,\n            });\n        }\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\n\n/**\n */\nexport class MissingPrimaryColumnError extends Error {\n    name = \"MissingPrimaryColumnError\";\n\n    constructor(entityMetadata: EntityMetadata) {\n        super();\n        this.message = `Entity \"${entityMetadata.name}\" does not have a primary column. Primary column is required to ` +\n            `have in all your entities. Use @PrimaryColumn decorator to add a primary column to your entity.`;\n    }\n\n}","/**\n * Thrown when circular relations detected with nullable set to false.\n */\nexport class CircularRelationsError extends Error {\n    name = \"CircularRelationsError\";\n\n    constructor(path: string) {\n        super(`Circular relations detected: ${path}. To resolve this issue you need to set nullable: false somewhere in this dependency structure.`);\n    }\n\n}","/**\n * This source code is from https://github.com/jriecken/dependency-graph\n * Just added \"any\" types here, wrapper everything into exported class.\n * We cant use a package itself because we want to package \"everything-in-it\" for the frontend users of TypeORM.\n */\n\n/**\n * A simple dependency graph\n */\n\n/**\n * Helper for creating a Depth-First-Search on\n * a set of edges.\n *\n * Detects cycles and throws an Error if one is detected.\n *\n * @param edges The set of edges to DFS through\n * @param leavesOnly Whether to only return \"leaf\" nodes (ones who have no edges)\n * @param result An array in which the results will be populated\n */\nfunction createDFS(edges: any, leavesOnly: any, result: any) {\n    let currentPath: any[] = [];\n    let visited: any = {};\n    return function DFS(currentNode: any) {\n        visited[currentNode] = true;\n        currentPath.push(currentNode);\n        edges[currentNode].forEach(function (node: any) {\n            if (!visited[node]) {\n                DFS(node);\n            } else if (currentPath.indexOf(node) >= 0) {\n                currentPath.push(node);\n                throw new Error(`Dependency Cycle Found: ${currentPath.join(\" -> \")}`);\n            }\n        });\n        currentPath.pop();\n        if ((!leavesOnly || edges[currentNode].length === 0) && result.indexOf(currentNode) === -1) {\n            result.push(currentNode);\n        }\n    };\n}\n\n\nexport class DepGraph {\n    nodes: any = {};\n    outgoingEdges: any = {}; // Node -> [Dependency Node]\n    incomingEdges: any = {}; // Node -> [Dependant Node]\n\n    /**\n     * Add a node to the dependency graph. If a node already exists, this method will do nothing.\n     */\n    addNode(node: any, data?: any) {\n        if (!this.hasNode(node)) {\n            // Checking the arguments length allows the user to add a node with undefined data\n            if (arguments.length === 2) {\n                this.nodes[node] = data;\n            } else {\n                this.nodes[node] = node;\n            }\n            this.outgoingEdges[node] = [];\n            this.incomingEdges[node] = [];\n        }\n    }\n\n    /**\n     * Remove a node from the dependency graph. If a node does not exist, this method will do nothing.\n     */\n    removeNode(node: any) {\n        if (this.hasNode(node)) {\n            delete this.nodes[node];\n            delete this.outgoingEdges[node];\n            delete this.incomingEdges[node];\n            [this.incomingEdges, this.outgoingEdges].forEach(function (edgeList) {\n                Object.keys(edgeList).forEach(function (key: any) {\n                    let idx = edgeList[key].indexOf(node);\n                    if (idx >= 0) {\n                        edgeList[key].splice(idx, 1);\n                    }\n                }, this);\n            });\n        }\n    }\n\n    /**\n     * Check if a node exists in the graph\n     */\n    hasNode(node: any) {\n        return this.nodes.hasOwnProperty(node);\n    }\n\n    /**\n     * Get the data associated with a node name\n     */\n    getNodeData(node: any) {\n        if (this.hasNode(node)) {\n            return this.nodes[node];\n        } else {\n            throw new Error(`Node does not exist: ${node}`);\n        }\n    }\n\n    /**\n     * Set the associated data for a given node name. If the node does not exist, this method will throw an error\n     */\n    setNodeData(node: any, data: any) {\n        if (this.hasNode(node)) {\n            this.nodes[node] = data;\n        } else {\n            throw new Error(`Node does not exist: ${node}`);\n        }\n    }\n\n    /**\n     * Add a dependency between two nodes. If either of the nodes does not exist,\n     * an Error will be thrown.\n     */\n    addDependency(from: any, to: any) {\n        if (!this.hasNode(from)) {\n            throw new Error(`Node does not exist: ${from}`);\n        }\n        if (!this.hasNode(to)) {\n            throw new Error(`Node does not exist: ${to}`);\n        }\n        if (this.outgoingEdges[from].indexOf(to) === -1) {\n            this.outgoingEdges[from].push(to);\n        }\n        if (this.incomingEdges[to].indexOf(from) === -1) {\n            this.incomingEdges[to].push(from);\n        }\n        return true;\n    }\n\n    /**\n     * Remove a dependency between two nodes.\n     */\n    removeDependency(from: any, to: any) {\n        let idx: any;\n        if (this.hasNode(from)) {\n            idx = this.outgoingEdges[from].indexOf(to);\n            if (idx >= 0) {\n                this.outgoingEdges[from].splice(idx, 1);\n            }\n        }\n\n        if (this.hasNode(to)) {\n            idx = this.incomingEdges[to].indexOf(from);\n            if (idx >= 0) {\n                this.incomingEdges[to].splice(idx, 1);\n            }\n        }\n    }\n\n    /**\n     * Get an array containing the nodes that the specified node depends on (transitively).\n     *\n     * Throws an Error if the graph has a cycle, or the specified node does not exist.\n     *\n     * If `leavesOnly` is true, only nodes that do not depend on any other nodes will be returned\n     * in the array.\n     */\n    dependenciesOf(node: any, leavesOnly: any) {\n        if (this.hasNode(node)) {\n            let result: any[] = [];\n            let DFS = createDFS(this.outgoingEdges, leavesOnly, result);\n            DFS(node);\n            let idx = result.indexOf(node);\n            if (idx >= 0) {\n                result.splice(idx, 1);\n            }\n            return result;\n        }\n        else {\n            throw new Error(`Node does not exist: ${node}`);\n        }\n    }\n\n    /**\n     * get an array containing the nodes that depend on the specified node (transitively).\n     *\n     * Throws an Error if the graph has a cycle, or the specified node does not exist.\n     *\n     * If `leavesOnly` is true, only nodes that do not have any dependants will be returned in the array.\n     */\n    dependantsOf(node: any, leavesOnly: any) {\n        if (this.hasNode(node)) {\n            let result: any[] = [];\n            let DFS = createDFS(this.incomingEdges, leavesOnly, result);\n            DFS(node);\n            let idx = result.indexOf(node);\n            if (idx >= 0) {\n                result.splice(idx, 1);\n            }\n            return result;\n        } else {\n            throw new Error(`Node does not exist: ${node}`);\n        }\n    }\n\n    /**\n     * Construct the overall processing order for the dependency graph.\n     *\n     * Throws an Error if the graph has a cycle.\n     *\n     * If `leavesOnly` is true, only nodes that do not depend on any other nodes will be returned.\n     */\n    overallOrder(leavesOnly?: any) {\n        let self = this;\n        let result: any[] = [];\n        let keys = Object.keys(this.nodes);\n        if (keys.length === 0) {\n            return result; // Empty graph\n        } else {\n            // Look for cycles - we run the DFS starting at all the nodes in case there\n            // are several disconnected subgraphs inside this dependency graph.\n            let CycleDFS = createDFS(this.outgoingEdges, false, []);\n            keys.forEach(function (n: any) {\n                CycleDFS(n);\n            });\n\n            let DFS = createDFS(this.outgoingEdges, leavesOnly, result);\n            // Find all potential starting points (nodes with nothing depending on them) an\n            // run a DFS starting at these points to get the order\n            keys.filter(function (node) {\n                return self.incomingEdges[node].length === 0;\n            }).forEach(function (n) {\n                DFS(n);\n            });\n\n            return result;\n        }\n    }\n\n}","import {ColumnType} from \"../driver/types/ColumnTypes\";\nimport {DatabaseType} from \"../driver/types/DatabaseType\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\n\nexport class DataTypeNotSupportedError extends Error {\n    name = \"DataTypeNotSupportedError\";\n\n    constructor(column: ColumnMetadata, dataType: ColumnType, database?: DatabaseType) {\n        super();\n        const type = typeof dataType === \"string\" ? dataType : (<any>dataType).name;\n        this.message = `Data type \"${type}\" in \"${column.entityMetadata.targetName}.${column.propertyName}\" is not supported by \"${database}\" database.`;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {MissingPrimaryColumnError} from \"../error/MissingPrimaryColumnError\";\nimport {CircularRelationsError} from \"../error/CircularRelationsError\";\nimport {DepGraph} from \"../util/DepGraph\";\nimport {Driver} from \"../driver/Driver\";\nimport {DataTypeNotSupportedError} from \"../error/DataTypeNotSupportedError\";\nimport {ColumnType} from \"../driver/types/ColumnTypes\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {MysqlDriver} from \"../driver/mysql/MysqlDriver\";\n\n/// todo: add check if there are multiple tables with the same name\n/// todo: add checks when generated column / table names are too long for the specific driver\n// todo: type in function validation, inverse side function validation\n// todo: check on build for duplicate names, since naming checking was removed from MetadataStorage\n// todo: duplicate name checking for: table, relation, column, index, naming strategy, join tables/columns?\n// todo: check if multiple tree parent metadatas in validator\n// todo: tree decorators can be used only on closure table (validation)\n// todo: throw error if parent tree metadata was not specified in a closure table\n\n// todo: MetadataArgsStorage: type in function validation, inverse side function validation\n// todo: MetadataArgsStorage: check on build for duplicate names, since naming checking was removed from MetadataStorage\n// todo: MetadataArgsStorage: duplicate name checking for: table, relation, column, index, naming strategy, join tables/columns?\n// todo: MetadataArgsStorage: check for duplicate targets too since this check has been removed too\n\n/**\n * Validates built entity metadatas.\n */\nexport class EntityMetadataValidator {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Validates all given entity metadatas.\n     */\n    validateMany(entityMetadatas: EntityMetadata[], driver: Driver) {\n        entityMetadatas.forEach(entityMetadata => this.validate(entityMetadata, entityMetadatas, driver));\n        this.validateDependencies(entityMetadatas);\n        this.validateEagerRelations(entityMetadatas);\n    }\n\n    /**\n     * Validates given entity metadata.\n     */\n    validate(entityMetadata: EntityMetadata, allEntityMetadatas: EntityMetadata[], driver: Driver) {\n\n        // check if table metadata has an id\n        if (!entityMetadata.isClassTableChild && !entityMetadata.primaryColumns.length && !entityMetadata.isJunction)\n            throw new MissingPrimaryColumnError(entityMetadata);\n\n        // validate if table is using inheritance it has a discriminator\n        // also validate if discriminator values are not empty and not repeated\n        if (entityMetadata.inheritanceType === \"single-table\") {\n            if (!entityMetadata.discriminatorColumn)\n                throw new Error(`Entity ${entityMetadata.name} using single-table inheritance, it should also have a discriminator column. Did you forget to put @DiscriminatorColumn decorator?`);\n\n            if ([\"\", undefined, null].indexOf(entityMetadata.discriminatorValue) !== -1)\n                throw new Error(`Entity ${entityMetadata.name} has empty discriminator value. Discriminator value should not be empty.`);\n\n            const sameDiscriminatorValueEntityMetadata = allEntityMetadatas.find(metadata => {\n                return metadata !== entityMetadata && metadata.discriminatorValue === entityMetadata.discriminatorValue;\n            });\n            if (sameDiscriminatorValueEntityMetadata)\n                throw new Error(`Entities ${entityMetadata.name} and ${sameDiscriminatorValueEntityMetadata.name} as equal discriminator values. Make sure their discriminator values are not equal using @DiscriminatorValue decorator.`);\n        }\n\n        entityMetadata.relationCounts.forEach(relationCount => {\n            if (relationCount.relation.isManyToOne || relationCount.relation.isOneToOne)\n                throw new Error(`Relation count can not be implemented on ManyToOne or OneToOne relations.`);\n        });\n\n        if (!(driver instanceof MongoDriver)) {\n            entityMetadata.columns.forEach(column => {\n                const normalizedColumn = driver.normalizeType(column) as ColumnType;\n                if (driver.supportedDataTypes.indexOf(normalizedColumn) === -1)\n                    throw new DataTypeNotSupportedError(column, normalizedColumn, driver.options.type);\n                if (column.length && driver.withLengthColumnTypes.indexOf(normalizedColumn) === -1)\n                    throw new Error(`Column ${column.propertyName} of Entity ${entityMetadata.name} does not support length property.`);\n            });\n        }\n\n       /* if (driver instanceof MysqlDriver) {\n            const generatedColumns = entityMetadata.columns.filter(column => column.isGenerated && column.generationStrategy !== \"uuid\");\n            if (generatedColumns.length > 1)\n                throw new Error(`Error in ${entityMetadata.name} entity. There can be only one auto-increment column in MySql table.`);\n        }*/\n\n        if (driver instanceof MysqlDriver) {\n            const metadatasWithDatabase = allEntityMetadatas.filter(metadata => metadata.database);\n            if (metadatasWithDatabase.length === 0 && !driver.database)\n                throw new Error(`Database not specified`);\n        }\n\n        if (driver instanceof SqlServerDriver) {\n            const charsetColumns = entityMetadata.columns.filter(column => column.charset);\n            if (charsetColumns.length > 1)\n                throw new Error(`Character set specifying is not supported in Sql Server`);\n        }\n\n        // validate relations\n        entityMetadata.relations.forEach(relation => {\n\n            // check join tables:\n            // using JoinTable is possible only on one side of the many-to-many relation\n            // todo(dima): fix\n            // if (relation.joinTable) {\n            //     if (!relation.isManyToMany)\n            //         throw new UsingJoinTableIsNotAllowedError(entityMetadata, relation);\n\n            //     // if there is inverse side of the relation, then check if it does not have join table too\n            //     if (relation.hasInverseSide && relation.inverseRelation.joinTable)\n            //         throw new UsingJoinTableOnlyOnOneSideAllowedError(entityMetadata, relation);\n            // }\n\n            // check join columns:\n            // using JoinColumn is possible only on one side of the relation and on one-to-one, many-to-one relation types\n            // first check if relation is one-to-one or many-to-one\n            // todo(dima): fix\n            /*if (relation.joinColumn) {\n\n                // join column can be applied only on one-to-one and many-to-one relations\n                if (!relation.isOneToOne && !relation.isManyToOne)\n                    throw new UsingJoinColumnIsNotAllowedError(entityMetadata, relation);\n\n                // if there is inverse side of the relation, then check if it does not have join table too\n                if (relation.hasInverseSide && relation.inverseRelation.joinColumn && relation.isOneToOne)\n                    throw new UsingJoinColumnOnlyOnOneSideAllowedError(entityMetadata, relation);\n\n                // check if join column really has referenced column\n                if (relation.joinColumn && !relation.joinColumn.referencedColumn)\n                    throw new Error(`Join column does not have referenced column set`);\n\n            }\n\n            // if its a one-to-one relation and JoinColumn is missing on both sides of the relation\n            // or its one-side relation without JoinColumn we should give an error\n            if (!relation.joinColumn && relation.isOneToOne && (!relation.hasInverseSide || !relation.inverseRelation.joinColumn))\n                throw new MissingJoinColumnError(entityMetadata, relation);*/\n\n            // if its a many-to-many relation and JoinTable is missing on both sides of the relation\n            // or its one-side relation without JoinTable we should give an error\n            // todo(dima): fix it\n            // if (!relation.joinTable && relation.isManyToMany && (!relation.hasInverseSide || !relation.inverseRelation.joinTable))\n            //     throw new MissingJoinTableError(entityMetadata, relation);\n\n\n            // todo: validate if its one-to-one and side which does not have join column MUST have inverse side\n            // todo: validate if its many-to-many and side which does not have join table MUST have inverse side\n            // todo: if there is a relation, and inverse side is specified only on one side, shall we give error\n            // todo: with message like: \"Inverse side is specified only on one side of the relationship. Specify on other side too to prevent confusion\".\n            // todo: add validation if there two entities with the same target, and show error message with description of the problem (maybe file was renamed/moved but left in output directory)\n            // todo: check if there are multiple columns on the same column applied.\n            // todo: check column type if is missing in relational databases (throw new Error(`Column type of ${type} cannot be determined.`);)\n            // todo: include driver-specific checks. for example in mongodb empty prefixes are not allowed\n            // todo: if multiple columns with same name - throw exception, including cases when columns are in embeds with same prefixes or without prefix at all\n            // todo: if multiple primary key used, at least one of them must be unique or @Index decorator must be set on entity\n            // todo: check if entity with duplicate names, some decorators exist\n\n\n        });\n\n        // make sure cascade remove is not set for both sides of relationships (can be set in OneToOne decorators)\n        entityMetadata.relations.forEach(relation => {\n            const isCircularCascadeRemove = relation.isCascadeRemove && relation.inverseRelation && relation.inverseRelation!.isCascadeRemove;\n            if (isCircularCascadeRemove)\n                throw new Error(`Relation ${entityMetadata.name}#${relation.propertyName} and ${relation.inverseRelation!.entityMetadata.name}#${relation.inverseRelation!.propertyName} both has cascade remove set. ` +\n                    `This may lead to unexpected circular removals. Please set cascade remove only from one side of relationship.`);\n        }); // todo: maybe better just deny removal from one to one relation without join column?\n\n        entityMetadata.eagerRelations.forEach(relation => {\n\n        });\n    }\n\n    /**\n     * Validates dependencies of the entity metadatas.\n     */\n    protected validateDependencies(entityMetadatas: EntityMetadata[]) {\n\n        const graph = new DepGraph();\n        entityMetadatas.forEach(entityMetadata => {\n            graph.addNode(entityMetadata.name);\n        });\n        entityMetadatas.forEach(entityMetadata => {\n            entityMetadata.relationsWithJoinColumns\n                .filter(relation => !relation.isNullable)\n                .forEach(relation => {\n                    graph.addDependency(entityMetadata.name, relation.inverseEntityMetadata.name);\n                });\n        });\n        try {\n            graph.overallOrder();\n\n        } catch (err) {\n            throw new CircularRelationsError(err.toString().replace(\"Error: Dependency Cycle Found: \", \"\"));\n        }\n    }\n\n    /**\n     * Validates eager relations to prevent circular dependency in them.\n     */\n    protected validateEagerRelations(entityMetadatas: EntityMetadata[]) {\n        entityMetadatas.forEach(entityMetadata => {\n            entityMetadata.eagerRelations.forEach(relation => {\n                if (relation.inverseRelation && relation.inverseRelation.isEager)\n                    throw new Error(`Circular eager relations are disallowed. ` +\n                        `${entityMetadata.targetName}#${relation.propertyPath} contains \"eager: true\", and its inverse side ` +\n                        `${relation.inverseEntityMetadata.targetName}#${relation.inverseRelation.propertyPath} contains \"eager: true\" as well.` +\n                        ` Remove \"eager: true\" from one side of the relation.`);\n            });\n        });\n    }\n\n}","import {Connection} from \"../connection/Connection\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {EntityManager} from \"./EntityManager\";\nimport {SqljsDriver} from \"../driver/sqljs/SqljsDriver\";\n\n/**\n * A special EntityManager that includes import/export and load/save function\n * that are unique to Sql.js.\n */\nexport class SqljsEntityManager extends EntityManager {\n    private driver: SqljsDriver;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection, queryRunner?: QueryRunner) {\n        super(connection, queryRunner);\n        this.driver = connection.driver as SqljsDriver;\n    }\n    \n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads either the definition from a file (Node.js) or localstorage (browser)\n     * or uses the given definition to open a new database.\n     */\n    loadDatabase(fileNameOrLocalStorageOrData: string | Uint8Array) {\n        this.driver.load(fileNameOrLocalStorageOrData);\n    }\n    \n    /**\n     * Saves the current database to a file (Node.js) or localstorage (browser)\n     * if fileNameOrLocalStorage is not set options.location is used.\n     */\n    async saveDatabase(fileNameOrLocalStorage?: string): Promise<void> {\n        await this.driver.save(fileNameOrLocalStorage);\n    }\n\n    /**\n     * Returns the current database definition.\n     */\n    exportDatabase(): Uint8Array {\n        return this.driver.export();\n    }\n }","import {Connection} from \"../connection/Connection\";\nimport {EntityManager} from \"./EntityManager\";\nimport {MongoEntityManager} from \"./MongoEntityManager\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {SqljsEntityManager} from \"./SqljsEntityManager\";\nimport {SqljsDriver} from \"../driver/sqljs/SqljsDriver\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * Helps to create entity managers.\n */\nexport class EntityManagerFactory {\n\n    /**\n     * Creates a new entity manager depend on a given connection's driver.\n     */\n    create(connection: Connection, queryRunner?: QueryRunner): EntityManager {\n        if (connection.driver instanceof MongoDriver)\n            return new MongoEntityManager(connection);\n\n        if (connection.driver instanceof SqljsDriver)\n            return new SqljsEntityManager(connection, queryRunner);\n\n        return new EntityManager(connection, queryRunner);\n    }\n\n}","/**\n * Thrown when consumer specifies driver type that does not exist or supported.\n */\nexport class MissingDriverError extends Error {\n    name = \"MissingDriverError\";\n\n    constructor(driverType: string) {\n        super();\n        this.message = `Wrong driver ${driverType} given. Supported drivers are: \"cordova\", \"mysql\", \"postgres\", \"mssql\", \"oracle\", \"mariadb\", \"sqlite\".`;\n        this.stack = new Error().stack;\n    }\n\n}","import {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TransactionAlreadyStartedError} from \"../../error/TransactionAlreadyStartedError\";\nimport {TransactionNotStartedError} from \"../../error/TransactionNotStartedError\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\nimport {InsertResult} from \"../InsertResult\";\nimport {QueryFailedError} from \"../../error/QueryFailedError\";\nimport {AbstractSqliteQueryRunner} from \"../sqlite-abstract/AbstractSqliteQueryRunner\";\nimport {WebsqlDriver} from \"./WebsqlDriver\";\n\n/**\n * Declare a global function that is only available in browsers that support WebSQL.\n */\ndeclare function openDatabase(...params: any[]): any;\n\n/**\n * Runs queries on a single websql database connection.\n */\nexport class WebsqlQueryRunner extends AbstractSqliteQueryRunner {\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    protected databaseConnection: any;\n\n    /**\n     * Promise used to obtain a database connection for a first time.\n     */\n    protected databaseConnectionPromise: Promise<any>;\n\n    /**\n     * Database driver used by connection.\n     */\n    driver: WebsqlDriver;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: WebsqlDriver) {\n        super(driver);\n\n        this.driver = driver;\n        this.connection = driver.connection;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates/uses database connection from the connection pool to perform further operations.\n     * Returns obtained database connection.\n     */\n    connect(): Promise<any> {\n        if (this.databaseConnection)\n            return Promise.resolve(this.databaseConnection);\n\n        if (this.databaseConnectionPromise)\n            return this.databaseConnectionPromise;\n\n        const options = Object.assign({}, {\n            database: this.driver.options.database,\n            version: this.driver.options.version,\n            description: this.driver.options.description,\n            size: this.driver.options.size,\n        }, this.driver.options.extra || {});\n\n        this.databaseConnectionPromise = new Promise<void>((ok, fail) => {\n            this.databaseConnection = openDatabase(\n                options.database,\n                options.version,\n                options.description,\n                options.size,\n            );\n            ok(this.databaseConnection);\n        });\n\n        return this.databaseConnectionPromise;\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        if (this.isTransactionActive)\n            throw new TransactionAlreadyStartedError();\n\n        this.isTransactionActive = true;\n        // await this.query(\"BEGIN TRANSACTION\");\n    }\n\n    /**\n     * Commits transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async commitTransaction(): Promise<void> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        // await this.query(\"COMMIT\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Rollbacks transaction.\n     * Error will be thrown if transaction was not started.\n     */\n    async rollbackTransaction(): Promise<void> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        if (!this.isTransactionActive)\n            throw new TransactionNotStartedError();\n\n        // await this.query(\"ROLLBACK\");\n        this.isTransactionActive = false;\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise(async (ok, fail) => {\n            try {\n                const db = await this.connect();\n                // todo(dima): check if transaction is not active\n\n                this.driver.connection.logger.logQuery(query, parameters, this);\n                const queryStartTime = +new Date();\n\n                db.transaction((tx: any) => {\n                    tx.executeSql(query, parameters, (tx: any, result: any) => {\n\n                        // log slow queries if maxQueryExecution time is set\n                        const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                        const queryEndTime = +new Date();\n                        const queryExecutionTime = queryEndTime - queryStartTime;\n                        if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                            this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                        const rows = Object\n                            .keys(result.rows)\n                            .filter(key => key !== \"length\")\n                            .map(key => result.rows[key]);\n                        ok(rows);\n\n                    }, (tx: any, err: any) => {\n                        this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                        return fail(new QueryFailedError(query, parameters, err));\n                    });\n                });\n\n            } catch (err) {\n                fail(err);\n            }\n        });\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tableName: string, keyValues: ObjectLiteral): Promise<InsertResult> {\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\"${key}\"`).join(\", \");\n        const values = keys.map((key, index) => \"$\" + (index + 1)).join(\",\");\n        const generatedColumns = this.connection.hasMetadata(tableName) ? this.connection.getMetadata(tableName).generatedColumns : [];\n        const sql = columns.length > 0 ? (`INSERT INTO \"${tableName}\"(${columns}) VALUES (${values})`) : `INSERT INTO \"${tableName}\" DEFAULT VALUES`;\n        const parameters = keys.map(key => keyValues[key]);\n\n        return new Promise<InsertResult>(async (ok, fail) => {\n            this.driver.connection.logger.logQuery(sql, parameters, this);\n\n            const db = await this.connect();\n            // todo: check if transaction is not active\n            db.transaction((tx: any) => {\n                tx.executeSql(sql, parameters, (tx: any, result: any) => {\n                    const generatedMap = generatedColumns.reduce((map, generatedColumn) => {\n                        const value = generatedColumn.isPrimary && generatedColumn.generationStrategy === \"increment\" && result[\"insertId\"] ? result[\"insertId\"] : keyValues[generatedColumn.databaseName];\n                        if (!value) return map;\n                        return OrmUtils.mergeDeep(map, generatedColumn.createValueMap(value));\n                    }, {} as ObjectLiteral);\n\n                    ok({\n                        result: undefined,\n                        generatedMap: Object.keys(generatedMap).length > 0 ? generatedMap : undefined\n                    });\n\n                }, (tx: any, err: any) => {\n                    this.driver.connection.logger.logQueryError(err, sql, parameters, this);\n                    return fail(err);\n                });\n            });\n        });\n    }\n\n    // TODO: finish the table schema loading\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(tableNames: string[]): Promise<Table[]> {\n\n        // if no tables given then no need to proceed\n        if (!tableNames || !tableNames.length)\n            return [];\n\n        const tableNamesString = tableNames.map(tableName => `'${tableName}'`).join(\", \");\n\n        // load tables, columns, indices and foreign keys\n        const dbTables: ObjectLiteral[] = await this.query(`SELECT * FROM sqlite_master WHERE type = 'table' AND name IN (${tableNamesString})`);\n\n        // if tables were not found in the db, no need to proceed\n        if (!dbTables || !dbTables.length)\n            return [];\n\n        // create table schemas for loaded tables\n        return Promise.all(dbTables.map(async dbTable => {\n            const table = new Table(dbTable[\"name\"]);\n\n            // load columns and indices\n            /*const [dbColumns, dbIndices, dbForeignKeys]: ObjectLiteral[][] = await Promise.all([\n                this.query(`PRAGMA table_info(\"${dbTable[\"name\"]}\")`),\n                this.query(`PRAGMA index_list(\"${dbTable[\"name\"]}\")`),\n                this.query(`PRAGMA foreign_key_list(\"${dbTable[\"name\"]}\")`),\n            ]);\n\n            // find column name with auto increment\n            let autoIncrementColumnName: string|undefined = undefined;\n            const tableSql: string = dbTable[\"sql\"];\n            if (tableSql.indexOf(\"AUTOINCREMENT\") !== -1) {\n                autoIncrementColumnName = tableSql.substr(0, tableSql.indexOf(\"AUTOINCREMENT\"));\n                const comma = autoIncrementColumnName.lastIndexOf(\",\");\n                const bracket = autoIncrementColumnName.lastIndexOf(\"(\");\n                if (comma !== -1) {\n                    autoIncrementColumnName = autoIncrementColumnName.substr(comma);\n                    autoIncrementColumnName = autoIncrementColumnName.substr(0, autoIncrementColumnName.lastIndexOf(\"\\\"\"));\n                    autoIncrementColumnName = autoIncrementColumnName.substr(autoIncrementColumnName.indexOf(\"\\\"\") + 1);\n\n                } else if (bracket !== -1) {\n                    autoIncrementColumnName = autoIncrementColumnName.substr(bracket);\n                    autoIncrementColumnName = autoIncrementColumnName.substr(0, autoIncrementColumnName.lastIndexOf(\"\\\"\"));\n                    autoIncrementColumnName = autoIncrementColumnName.substr(autoIncrementColumnName.indexOf(\"\\\"\") + 1);\n                }\n            }\n\n            // create columns from the loaded columns\n            table.columns = dbColumns.map(dbColumn => {\n                const tableColumn = new TableColumn();\n                tableColumn.name = dbColumn[\"name\"];\n                tableColumn.type = dbColumn[\"type\"].toLowerCase();\n                tableColumn.default = dbColumn[\"dflt_value\"] !== null && dbColumn[\"dflt_value\"] !== undefined ? dbColumn[\"dflt_value\"] : undefined;\n                tableColumn.isNullable = dbColumn[\"notnull\"] === 0;\n                tableColumn.isPrimary = dbColumn[\"pk\"] === 1;\n                tableColumn.comment = \"\"; // todo later\n                tableColumn.isGenerated = autoIncrementColumnName === dbColumn[\"name\"];\n                const columnForeignKeys = dbForeignKeys\n                    .filter(foreignKey => foreignKey[\"from\"] === dbColumn[\"name\"])\n                    .map(foreignKey => {\n                        const keyName = namingStrategy.foreignKeyName(dbTable[\"name\"], [foreignKey[\"from\"]], foreignKey[\"table\"], [foreignKey[\"to\"]]);\n                        return new TableForeignKey(keyName, [foreignKey[\"from\"]], [foreignKey[\"to\"]], foreignKey[\"table\"], foreignKey[\"on_delete\"]); // todo: how sqlite return from and to when they are arrays? (multiple column foreign keys)\n                    });\n                table.addForeignKeys(columnForeignKeys);\n                return tableColumn;\n            });\n\n            // create primary key schema\n            await Promise.all(dbIndices\n                .filter(index => index[\"origin\"] === \"pk\")\n                .map(async index => {\n                    const indexInfos: ObjectLiteral[] = await this.query(`PRAGMA index_info(\"${index[\"name\"]}\")`);\n                    const indexColumns = indexInfos.map(indexInfo => indexInfo[\"name\"]);\n                    indexColumns.forEach(indexColumn => {\n                        table.primaryKeys.push(new TablePrimaryKey(index[\"name\"], indexColumn));\n                    });\n                }));\n\n            // create index schemas from the loaded indices\n            const indicesPromises = dbIndices\n                .filter(dbIndex => {\n                    return  dbIndex[\"origin\"] !== \"pk\" &&\n                        (!table.foreignKeys.find(foreignKey => foreignKey.name === dbIndex[\"name\"])) &&\n                        (!table.primaryKeys.find(primaryKey => primaryKey.name === dbIndex[\"name\"]));\n                })\n                .map(dbIndex => dbIndex[\"name\"])\n                .filter((value, index, self) => self.indexOf(value) === index) // unqiue\n                .map(async dbIndexName => {\n                    const dbIndex = dbIndices.find(dbIndex => dbIndex[\"name\"] === dbIndexName);\n                    const indexInfos: ObjectLiteral[] = await this.query(`PRAGMA index_info(\"${dbIndex![\"name\"]}\")`);\n                    const indexColumns = indexInfos.map(indexInfo => indexInfo[\"name\"]);\n\n                    // check if db index is generated by sqlite itself and has special use case\n                    if (dbIndex![\"name\"].substr(0, \"sqlite_autoindex\".length) === \"sqlite_autoindex\") {\n                        if (dbIndex![\"unique\"] === 1) { // this means we have a special index generated for a column\n                            // so we find and update the column\n                            indexColumns.forEach(columnName => {\n                                const column = table.columns.find(column => column.name === columnName);\n                                if (column)\n                                    column.isUnique = true;\n                            });\n                        }\n\n                        return Promise.resolve(undefined);\n\n                    } else {\n                        return new TableIndex(dbTable[\"name\"], dbIndex![\"name\"], indexColumns, dbIndex![\"unique\"] === \"1\");\n                    }\n                });\n\n            const indices = await Promise.all(indicesPromises);\n            table.indices = indices.filter(index => !!index) as TableIndex[];*/\n\n            return table;\n        }));\n    }\n\n    /**\n     * Removes all tables from the currently connected database.\n     */\n    async clearDatabase(): Promise<void> {\n        // await this.query(`PRAGMA foreign_keys = OFF;`);\n        await this.startTransaction();\n        try {\n            const selectDropsQuery = `select 'drop table \"' || name || '\";' as query from sqlite_master where type = 'table' and name != 'sqlite_sequence'`;\n            const dropQueries: ObjectLiteral[] = await this.query(selectDropsQuery);\n            await Promise.all(dropQueries.map(q => this.query(q[\"query\"])));\n            await this.commitTransaction();\n\n        } catch (error) {\n            try { // we throw original error even if rollback thrown an error\n                await this.rollbackTransaction();\n            } catch (rollbackError) { }\n            throw error;\n\n            // await this.query(`PRAGMA foreign_keys = ON;`);\n        }\n    }\n}","import {DriverUtils} from \"../DriverUtils\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {WebsqlQueryRunner} from \"./WebsqlQueryRunner\";\nimport {Connection} from \"../../connection/Connection\";\nimport {WebSqlConnectionOptions} from \"./WebSqlConnectionOptions\";\nimport {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\n\n/**\n * Organizes communication with WebSQL in the browser.\n */\nexport class WebsqlDriver extends AbstractSqliteDriver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: WebSqlConnectionOptions;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n        \n        this.options = connection.options as WebSqlConnectionOptions;\n        Object.assign(connection.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        this.database = this.options.database;\n\n        // validate options to make sure everything is set\n        // if (!this.options.host)\n        //     throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        if (!this.options.database)\n            throw new DriverOptionNotSetError(\"database\");\n        // todo: what about extra options: version, description, size\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    disconnect(): Promise<void> {\n        return Promise.resolve();\n        // if (!this.databaseConnection)\n        //     throw new ConnectionIsNotSetError(\"websql\");\n\n        // return new Promise<void>((ok, fail) => {\n            // const handler = (err: any) => err ? fail(err) : ok();\n            // todo: find out how to close connection\n            // ok();\n        // });\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\"): WebsqlQueryRunner {\n        return new WebsqlQueryRunner(this);\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n        }\n\n        return super.preparePersistentValue(value, columnMetadata);\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.type === \"json\") {\n            return JSON.parse(value);\n        }\n\n        return super.prepareHydratedValue(value, columnMetadata);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            }\n            // Websql doesn't support queries boolean values. Therefore 1 and 0 has to be used.\n            else if ((typeof value) === \"boolean\") {\n                escapedParameters.push((value ? 1 : 0));\n                return \"?\";\n            } else {\n                escapedParameters.push(value);\n                return \"?\";\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return columnName; // \"`\" + columnName + \"`\";\n    }\n}","import {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\nimport {InsertResult} from \"../InsertResult\";\nimport {QueryFailedError} from \"../../error/QueryFailedError\";\nimport {AbstractSqliteQueryRunner} from \"../sqlite-abstract/AbstractSqliteQueryRunner\";\nimport {SqliteDriver} from \"./SqliteDriver\";\n\n/**\n * Runs queries on a single sqlite database connection.\n *\n * Does not support compose primary keys with autoincrement field.\n * todo: need to throw exception for this case.\n */\nexport class SqliteQueryRunner extends AbstractSqliteQueryRunner {\n\n    /**\n     * Database driver used by connection.\n     */\n    driver: SqliteDriver;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: SqliteDriver) {\n        super(driver);\n        this.driver = driver;\n        this.connection = driver.connection;\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise<any[]>(async (ok, fail) => {\n            const databaseConnection = await this.connect();\n            this.driver.connection.logger.logQuery(query, parameters, this);\n            const queryStartTime = +new Date();\n            databaseConnection.all(query, parameters, (err: any, result: any) => {\n\n                // log slow queries if maxQueryExecution time is set\n                const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                const queryEndTime = +new Date();\n                const queryExecutionTime = queryEndTime - queryStartTime;\n                if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                    this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                if (err) {\n                    this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                    fail(new QueryFailedError(query, parameters, err));\n                } else {\n                    ok(result);\n                }\n            });\n        });\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tableName: string, keyValues: ObjectLiteral): Promise<InsertResult> {\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\"${key}\"`).join(\", \");\n        const values = keys.map((key, index) => \"$\" + (index + 1)).join(\",\");\n        const generatedColumns = this.connection.hasMetadata(tableName) ? this.connection.getMetadata(tableName).generatedColumns : [];\n        const sql = columns.length > 0 ? (`INSERT INTO \"${tableName}\"(${columns}) VALUES (${values})`) : `INSERT INTO \"${tableName}\" DEFAULT VALUES`;\n        const parameters = keys.map(key => keyValues[key]);\n\n        return new Promise<InsertResult>(async (ok, fail) => {\n            this.driver.connection.logger.logQuery(sql, parameters, this);\n            const __this = this;\n            const databaseConnection = await this.connect();\n            databaseConnection.run(sql, parameters, function (err: any): void {\n                if (err) {\n                    __this.driver.connection.logger.logQueryError(err, sql, parameters, this);\n                    fail(err);\n                } else {\n                    const generatedMap = generatedColumns.reduce((map, generatedColumn) => {\n                        const value = generatedColumn.isPrimary && generatedColumn.generationStrategy === \"increment\" && this[\"lastID\"] ? this[\"lastID\"] : keyValues[generatedColumn.databaseName];\n                        if (!value) return map;\n                        return OrmUtils.mergeDeep(map, generatedColumn.createValueMap(value));\n                    }, {} as ObjectLiteral);\n\n                    ok({\n                        result: undefined,\n                        generatedMap: Object.keys(generatedMap).length > 0 ? generatedMap : undefined\n                    });\n                }\n            });\n        });\n    }\n}","import {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {SqliteQueryRunner} from \"./SqliteQueryRunner\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {SqliteConnectionOptions} from \"./SqliteConnectionOptions\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\n\n/**\n * Organizes communication with sqlite DBMS.\n */\nexport class SqliteDriver extends AbstractSqliteDriver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: SqliteConnectionOptions;\n\n    /**\n     * SQLite underlying library.\n     */\n    sqlite: any;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n\n        this.connection = connection;\n        this.options = connection.options as SqliteConnectionOptions;\n        this.database = this.options.database;\n\n        // validate options to make sure everything is set\n        if (!this.options.database)\n            throw new DriverOptionNotSetError(\"database\");\n\n        // load sqlite package\n        this.loadDependencies();\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Closes connection with database.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.queryRunner = undefined;\n            this.databaseConnection.close((err: any) => err ? fail(err) : ok());\n        });\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\"): QueryRunner {\n        if (!this.queryRunner)\n            this.queryRunner = new SqliteQueryRunner(this);\n\n        return this.queryRunner;\n    }\n\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number }): string {\n        if ((column.type as any) === Buffer) {\n            return \"blob\";\n        }\n\n        return super.normalizeType(column);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates connection with the database.\n     */\n    protected createDatabaseConnection() {\n        return new Promise<void>(async (ok, fail) => {\n            await this.createDatabaseDirectory(this.options.database);\n            const databaseConnection = new this.sqlite.Database(this.options.database, (err: any) => {\n                if (err) return fail(err);\n\n                // we need to enable foreign keys in sqlite to make sure all foreign key related features\n                // working properly. this also makes onDelete to work with sqlite.\n                databaseConnection.run(`PRAGMA foreign_keys = ON;`, (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok(databaseConnection);\n                });\n            });\n        });\n    }\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        try {\n            this.sqlite = PlatformTools.load(\"sqlite3\").verbose();\n\n        } catch (e) {\n            throw new DriverPackageNotInstalledError(\"SQLite\", \"sqlite3\");\n        }\n    }\n\n    /**\n     * Auto creates database directory if it does not exist.\n     */\n    protected createDatabaseDirectory(fullPath: string): Promise<void> {\n        return new Promise<void>((resolve, reject) => {\n            const mkdirp = PlatformTools.load(\"mkdirp\");\n            const path = PlatformTools.load(\"path\");\n            mkdirp(path.dirname(fullPath), (err: any) => err ? reject(err) : resolve());\n        });\n    }\n\n}","import {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {QueryRunnerAlreadyReleasedError} from \"../../error/QueryRunnerAlreadyReleasedError\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\nimport {InsertResult} from \"../InsertResult\";\nimport {QueryFailedError} from \"../../error/QueryFailedError\";\nimport {AbstractSqliteQueryRunner} from \"../sqlite-abstract/AbstractSqliteQueryRunner\";\nimport {CordovaDriver} from \"./CordovaDriver\";\n\n/**\n * Runs queries on a single sqlite database connection.\n *\n * Does not support compose primary keys with autoincrement field.\n * todo: need to throw exception for this case.\n */\nexport class CordovaQueryRunner extends AbstractSqliteQueryRunner {\n    \n    /**\n     * Database driver used by connection.\n     */\n    driver: CordovaDriver;\n    \n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(driver: CordovaDriver) {\n        super(driver);\n        this.driver = driver;\n        this.connection = driver.connection;\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        if (this.isReleased)\n            throw new QueryRunnerAlreadyReleasedError();\n\n        return new Promise<any[]>(async (ok, fail) => {\n            const databaseConnection = await this.connect();\n            this.driver.connection.logger.logQuery(query, parameters, this);\n            const queryStartTime = +new Date();\n            databaseConnection.executeSql(query, parameters, (result: any) => {\n\n                // log slow queries if maxQueryExecution time is set\n                const maxQueryExecutionTime = this.driver.connection.options.maxQueryExecutionTime;\n                const queryEndTime = +new Date();\n                const queryExecutionTime = queryEndTime - queryStartTime;\n                if (maxQueryExecutionTime && queryExecutionTime > maxQueryExecutionTime)\n                    this.driver.connection.logger.logQuerySlow(queryExecutionTime, query, parameters, this);\n\n                if (result.rows.length === 0) {\n                    ok([]);\n                }\n\n                let resultSet = [];\n                for (let i = 0; i < result.rows.length; i++) {\n                    resultSet.push(result.rows.item(i));\n                }\n                \n                ok(resultSet);\n            }, (err: any) => {\n                this.driver.connection.logger.logQueryError(err, query, parameters, this);\n                fail(new QueryFailedError(query, parameters, err));\n            });\n        });\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of the generated column if given and generate column exist in the table.\n     */\n    async insert(tableName: string, keyValues: ObjectLiteral): Promise<InsertResult> {\n        const keys = Object.keys(keyValues);\n        const columns = keys.map(key => `\"${key}\"`).join(\", \");\n        const values = keys.map(key => \"?\").join(\",\");\n        const generatedColumns = this.connection.hasMetadata(tableName) ? this.connection.getMetadata(tableName).generatedColumns : [];\n        const sql = columns.length > 0 ? (`INSERT INTO \"${tableName}\"(${columns}) VALUES (${values})`) : `INSERT INTO \"${tableName}\" DEFAULT VALUES`;\n        const parameters = keys.map(key => keyValues[key]);\n\n        return new Promise<InsertResult>(async (ok, fail) => {\n            this.driver.connection.logger.logQuery(sql, parameters, this);\n            const __this = this;\n            const databaseConnection = await this.connect();\n            databaseConnection.executeSql(sql, parameters, (resultSet: any) => {\n                const generatedMap = generatedColumns.reduce((map, generatedColumn) => {\n                    const value = generatedColumn.isPrimary && generatedColumn.generationStrategy === \"increment\" && resultSet.insertId ? resultSet.insertId : keyValues[generatedColumn.databaseName];\n                    if (!value) return map;\n                    return OrmUtils.mergeDeep(map, generatedColumn.createValueMap(value));\n                }, {} as ObjectLiteral);\n\n                ok({\n                    result: undefined,\n                    generatedMap: Object.keys(generatedMap).length > 0 ? generatedMap : undefined\n                });\n            }, (err: any) => {\n                __this.driver.connection.logger.logQueryError(err, sql, parameters, this);\n                fail(err);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Parametrizes given object of values. Used to create column=value queries.\n     */\n    protected parametrize(objectLiteral: ObjectLiteral, startIndex: number = 0): string[] {\n        return Object.keys(objectLiteral).map((key, index) => `\"${key}\"` + \"=?\");\n    }\n}","import {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\nimport {CordovaConnectionOptions} from \"./CordovaConnectionOptions\";\nimport {CordovaQueryRunner} from \"./CordovaQueryRunner\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {Connection} from \"../../connection/Connection\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\n\n// needed for typescript compiler\ninterface Window {\n    sqlitePlugin: any;\n}\n\ndeclare var window: Window;\n\nexport class CordovaDriver extends AbstractSqliteDriver {\n    options: CordovaConnectionOptions;\n    \n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n\n        // this.connection = connection;\n        // this.options = connection.options as CordovaConnectionOptions;\n        this.database = this.options.database;\n\n        // validate options to make sure everything is set\n        if (!this.options.database)\n            throw new DriverOptionNotSetError(\"database\");\n\n        if (!this.options.location)\n            throw new DriverOptionNotSetError(\"location\");\n\n        // load sqlite package\n        this.loadDependencies();\n    }\n    \n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Closes connection with database.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.queryRunner = undefined;\n            this.databaseConnection.close(ok, fail);\n        });\n    }\n    \n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\"): QueryRunner {\n        if (!this.queryRunner)\n            this.queryRunner = new CordovaQueryRunner(this);\n\n        return this.queryRunner;\n    }\n    \n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates connection with the database.\n     */\n    protected createDatabaseConnection() {\n        return new Promise<void>((ok, fail) => {\n            const options = Object.assign({}, {\n                name: this.options.database,\n                location: this.options.location,\n            }, this.options.extra || {});\n\n            this.sqlite.openDatabase(options, (db: any) => {\n                const databaseConnection = db;\n\n                // we need to enable foreign keys in sqlite to make sure all foreign key related features\n                // working properly. this also makes onDelete to work with sqlite.\n                databaseConnection.executeSql(`PRAGMA foreign_keys = ON;`, [], (result: any) => {\n                    ok(databaseConnection);\n                }, (error: any) => {\n                    fail(error);\n                });\n            }, (error: any) => {\n                fail(error);\n            });\n        });\n    }\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        try {\n            this.sqlite = window.sqlitePlugin;\n\n        } catch (e) {\n            throw new DriverPackageNotInstalledError(\"Cordova-SQLite\", \"cordova-sqlite-storage\");\n        }\n    }\n}","import {MissingDriverError} from \"../error/MissingDriverError\";\nimport {MongoDriver} from \"./mongodb/MongoDriver\";\nimport {WebsqlDriver} from \"./websql/WebsqlDriver\";\nimport {SqlServerDriver} from \"./sqlserver/SqlServerDriver\";\nimport {OracleDriver} from \"./oracle/OracleDriver\";\nimport {SqliteDriver} from \"./sqlite/SqliteDriver\";\nimport {CordovaDriver} from \"./cordova/CordovaDriver\";\nimport {SqljsDriver} from \"./sqljs/SqljsDriver\";\nimport {MysqlDriver} from \"./mysql/MysqlDriver\";\nimport {PostgresDriver} from \"./postgres/PostgresDriver\";\nimport {Driver} from \"./Driver\";\nimport {Connection} from \"../connection/Connection\";\n\n/**\n * Helps to create drivers.\n */\nexport class DriverFactory {\n\n    /**\n     * Creates a new driver depend on a given connection's driver type.\n     */\n    create(connection: Connection): Driver {\n        const type = connection.options.type;\n        switch (type) {\n            case \"mysql\":\n                return new MysqlDriver(connection);\n            case \"postgres\":\n                return new PostgresDriver(connection);\n            case \"mariadb\":\n                return new MysqlDriver(connection);\n            case \"sqlite\":\n                return new SqliteDriver(connection);\n            case \"cordova\":\n                return new CordovaDriver(connection);\n            case \"sqljs\":\n                return new SqljsDriver(connection);\n            case \"oracle\":\n                return new OracleDriver(connection);\n            case \"mssql\":\n                return new SqlServerDriver(connection);\n            case \"websql\":\n                return new WebsqlDriver(connection);\n            case \"mongodb\":\n                return new MongoDriver(connection);\n            default:\n                throw new MissingDriverError(type);\n        }\n    }\n\n}","import {PlatformTools} from \"../platform/PlatformTools\";\n\n/**\n * Loads all exported classes from the given directory.\n */\nexport function importClassesFromDirectories(directories: string[], formats = [\".js\", \".ts\"]): Function[] {\n\n    function loadFileClasses(exported: any, allLoaded: Function[]) {\n        if (typeof exported === \"function\") {\n            allLoaded.push(exported);\n\n        } else if (Array.isArray(exported)) {\n            exported.forEach((i: any) => loadFileClasses(i, allLoaded));\n\n        } else if (typeof exported === \"object\") {\n            Object.keys(exported).forEach(key => loadFileClasses(exported[key], allLoaded));\n\n        }\n        return allLoaded;\n    }\n\n    const allFiles = directories.reduce((allDirs, dir) => {\n        return allDirs.concat(PlatformTools.load(\"glob\").sync(PlatformTools.pathNormalize(dir)));\n    }, [] as string[]);\n\n    const dirs = allFiles\n        .filter(file => {\n            const dtsExtension = file.substring(file.length - 5, file.length);\n            return formats.indexOf(PlatformTools.pathExtname(file)) !== -1 && dtsExtension !== \".d.ts\";\n        })\n        .map(file => PlatformTools.load(PlatformTools.pathResolve(file)));\n\n    return loadFileClasses(dirs, []);\n}\n\n/**\n * Loads all json files from the given directory.\n */\nexport function importJsonsFromDirectories(directories: string[], format = \".json\"): any[] {\n\n    const allFiles = directories.reduce((allDirs, dir) => {\n        return allDirs.concat(PlatformTools.load(\"glob\").sync(PlatformTools.pathNormalize(dir)));\n    }, [] as string[]);\n\n    return allFiles\n        .filter(file => PlatformTools.pathExtname(file) === format)\n        .map(file => PlatformTools.load(PlatformTools.pathResolve(file)));\n}","/**\n * Container options.\n */\nexport interface UseContainerOptions {\n\n    /**\n     * If set to true, then default container will be used in the case if given container haven't returned anything.\n     */\n    fallback?: boolean;\n\n    /**\n     * If set to true, then default container will be used in the case if given container thrown an exception.\n     */\n    fallbackOnErrors?: boolean;\n\n}\n\n/**\n * Container to be used by this library for inversion control. If container was not implicitly set then by default\n * container simply creates a new instance of the given class.\n */\nexport const defaultContainer: { get<T>(someClass: { new (...args: any[]): T }|Function): T } = new (class {\n    private instances: { type: Function, object: any }[] = [];\n\n    get<T>(someClass: { new (...args: any[]): T }): T {\n        let instance = this.instances.find(instance => instance.type === someClass);\n        if (!instance) {\n            instance = { type: someClass, object: new someClass() };\n            this.instances.push(instance);\n        }\n\n        return instance.object;\n    }\n})();\n\nlet userContainer: { get<T>(someClass: { new (...args: any[]): T }|Function): T };\nlet userContainerOptions: UseContainerOptions|undefined;\n\n/**\n * Sets container to be used by this library.\n */\nexport function useContainer(iocContainer: { get(someClass: any): any }, options?: UseContainerOptions) {\n    userContainer = iocContainer;\n    userContainerOptions = options;\n}\n\n/**\n * Gets the IOC container used by this library.\n */\nexport function getFromContainer<T>(someClass: { new (...args: any[]): T }|Function): T {\n    if (userContainer) {\n        try {\n            const instance = userContainer.get(someClass);\n            if (instance)\n                return instance;\n\n            if (!userContainerOptions || !userContainerOptions.fallback)\n                return instance;\n\n        } catch (error) {\n            if (!userContainerOptions || !userContainerOptions.fallbackOnErrors)\n                throw error;\n        }\n    }\n    return defaultContainer.get<T>(someClass);\n}","/**\n * Arguments for NamingStrategyMetadata class.\n */\nexport interface NamingStrategyMetadataArgs {\n\n    /**\n     * Class to which this column is applied.\n     */\n    readonly target: Function;\n\n    /**\n     * Strategy name.\n     */\n    readonly name: string;\n\n}\n","/**\n * Arguments for JoinColumnMetadata class.\n */\nexport interface JoinColumnMetadataArgs {\n\n    /**\n     * Class to which this column is applied.\n     */\n    target: Function|string;\n\n    /**\n     * Class's property name to which this column is applied.\n     */\n    propertyName: string;\n\n    /**\n     * Name of the column.\n     */\n    name?: string;\n\n    /**\n     * Name of the column in the entity to which this column is referenced.\n     * This is column property name, not a column database name.\n     */\n    referencedColumnName?: string;\n\n}\n","import {JoinColumnMetadataArgs} from \"./JoinColumnMetadataArgs\";\n\n/**\n * Arguments for JoinTableMetadata class.\n */\nexport interface JoinTableMetadataArgs {\n\n    /**\n     * Class to which this column is applied.\n     */\n    readonly target: Function|string;\n\n    /**\n     * Class's property name to which this column is applied.\n     */\n    readonly propertyName: string;\n\n    /**\n     * Name of the table that will be created to store values of the both tables (join table).\n     * By default is auto generated.\n     */\n    readonly name?: string;\n\n    /**\n     * First column of the join table.\n     */\n    readonly joinColumns?: JoinColumnMetadataArgs[];\n\n    /**\n     * Second (inverse) column of the join table.\n     */\n    readonly inverseJoinColumns?: JoinColumnMetadataArgs[];\n\n    /**\n     * Database where join table will be created.\n     * Works only in some databases (like mysql and mssql).\n     */\n    readonly database?: string;\n\n    /**\n     * Schema where join table will be created.\n     * Works only in some databases (like postgres and mssql).\n     */\n    readonly schema?: string;\n\n}\n","/**\n * Arguments for EntitySubscriberMetadata class.\n */\nexport interface EntitySubscriberMetadataArgs {\n\n    /**\n     * Class to which subscriber is applied.\n     */\n    readonly target: Function;\n\n}\n","/**\n * Arguments for InheritanceMetadata class.\n */\nexport interface InheritanceMetadataArgs {\n\n    /**\n     * Class to which inheritance is applied.\n     */\n    readonly target?: Function|string;\n\n    /**\n     * Inheritance type.\n     */\n    readonly type: \"single-table\"|\"class-table\";\n\n}\n","/**\n * DiscriminatorValue properties.\n */\nexport interface DiscriminatorValueMetadataArgs {\n\n    /**\n     * Class to which discriminator name is applied.\n     */\n    readonly target: Function|string;\n\n    /**\n     * Discriminator value.\n     */\n    readonly value: any;\n\n}\n","/**\n * Arguments for EntityRepositoryMetadata class, helps to construct an EntityRepositoryMetadata object.\n */\nexport interface EntityRepositoryMetadataArgs {\n\n    /**\n     * Constructor of the custom entity repository.\n     */\n    readonly target: Function;\n\n    /**\n     * Entity managed by this custom repository.\n     */\n    readonly entity?: Function|string;\n\n}\n","/**\n * Used to inject transaction's entity managed into the method wrapped with @Transaction decorator.\n */\nexport interface TransactionEntityMetadataArgs {\n\n    /**\n     * Target class on which decorator is used.\n     */\n    readonly target: Function;\n\n    /**\n     * Method on which decorator is used.\n     */\n    readonly methodName: string;\n\n    /**\n     * Index of the parameter on which decorator is used.\n     */\n    readonly index: number;\n\n}\n","/**\n * Used to inject transaction's repository into the method wrapped with @Transaction decorator.\n */\nexport interface TransactionRepositoryMetadataArgs {\n    \n        /**\n         * Target class on which decorator is used.\n         */\n        readonly target: Function;\n    \n        /**\n         * Method on which decorator is used.\n         */\n        readonly methodName: string;\n    \n        /**\n         * Index of the parameter on which decorator is used.\n         */\n        readonly index: number;\n\n        /**\n         * Type of the repository class (Repository, TreeRepository or MongoRepository) or custom repository class.\n         */\n        readonly repositoryType: Function;\n\n        /**\n         * Argument of generic Repository<T> class if it's not custom repository class.\n         */\n        readonly entityType?: Function;\n    \n    }\n    ","/**\n * Metadata args utility functions.\n */\nexport class MetadataUtils {\n\n    /**\n     * Gets given's entity all inherited classes.\n     * Gives in order from parents to children.\n     * For example Post extends ContentModel which extends Unit it will give\n     * [Unit, ContentModel, Post]\n     */\n    static getInheritanceTree(entity: Function): Function[] {\n        const tree: Function[] = [entity];\n        const getPrototypeOf = (object: Function): void => {\n            const proto = Object.getPrototypeOf(object);\n            if (proto && proto.name) {\n                tree.push(proto);\n                getPrototypeOf(proto);\n            }\n        };\n        getPrototypeOf(entity);\n        return tree;\n    }\n\n    /**\n     * Checks if this table is inherited from another table.\n     */\n    static isInherited(target1: Function, target2: Function) {\n        return target1.prototype instanceof target2;\n    }\n\n    /**\n     * Filters given array of targets by a given classes.\n     * If classes are not given, then it returns array itself.\n     */\n    static filterByTarget<T extends { target?: any }>(array: T[], classes?: any[]): T[] {\n        if (!classes) return array;\n        return array.filter(item => item.target && classes.indexOf(item.target) !== -1);\n    }\n\n}","/**\n * Arguments for Generated decorator class.\n */\nexport interface GeneratedMetadataArgs {\n\n    /**\n     * Class to which decorator is applied.\n     */\n    readonly target: Function|string;\n\n    /**\n     * Class's property name to which decorator is applied.\n     */\n    readonly propertyName: string;\n\n    /**\n     * Generation strategy.\n     */\n    readonly strategy: \"uuid\"|\"increment\";\n\n}\n","import {RelationMetadataArgs} from \"./RelationMetadataArgs\";\nimport {ColumnMetadataArgs} from \"./ColumnMetadataArgs\";\nimport {RelationCountMetadataArgs} from \"./RelationCountMetadataArgs\";\nimport {IndexMetadataArgs} from \"./IndexMetadataArgs\";\nimport {EntityListenerMetadataArgs} from \"./EntityListenerMetadataArgs\";\nimport {TableMetadataArgs} from \"./TableMetadataArgs\";\nimport {NamingStrategyMetadataArgs} from \"./NamingStrategyMetadataArgs\";\nimport {JoinTableMetadataArgs} from \"./JoinTableMetadataArgs\";\nimport {JoinColumnMetadataArgs} from \"./JoinColumnMetadataArgs\";\nimport {EmbeddedMetadataArgs} from \"./EmbeddedMetadataArgs\";\nimport {EntitySubscriberMetadataArgs} from \"./EntitySubscriberMetadataArgs\";\nimport {RelationIdMetadataArgs} from \"./RelationIdMetadataArgs\";\nimport {InheritanceMetadataArgs} from \"./InheritanceMetadataArgs\";\nimport {DiscriminatorValueMetadataArgs} from \"./DiscriminatorValueMetadataArgs\";\nimport {EntityRepositoryMetadataArgs} from \"./EntityRepositoryMetadataArgs\";\nimport {TransactionEntityMetadataArgs} from \"./TransactionEntityMetadataArgs\";\nimport {TransactionRepositoryMetadataArgs} from \"./TransactionRepositoryMetadataArgs\";\nimport {MetadataUtils} from \"../metadata-builder/MetadataUtils\";\nimport {GeneratedMetadataArgs} from \"./GeneratedMetadataArgs\";\n\n/**\n * Storage all metadatas args of all available types: tables, columns, subscribers, relations, etc.\n * Each metadata args represents some specifications of what it represents.\n * MetadataArgs used to create a real Metadata objects.\n */\nexport class MetadataArgsStorage {\n\n    // -------------------------------------------------------------------------\n    // Properties\n    // -------------------------------------------------------------------------\n\n    readonly tables: TableMetadataArgs[] = [];\n    readonly entityRepositories: EntityRepositoryMetadataArgs[] = [];\n    readonly transactionEntityManagers: TransactionEntityMetadataArgs[] = [];\n    readonly transactionRepositories: TransactionRepositoryMetadataArgs[] = [];\n    readonly namingStrategies: NamingStrategyMetadataArgs[] = [];\n    readonly entitySubscribers: EntitySubscriberMetadataArgs[] = [];\n    readonly indices: IndexMetadataArgs[] = [];\n    readonly columns: ColumnMetadataArgs[] = [];\n    readonly generations: GeneratedMetadataArgs[] = [];\n    readonly relations: RelationMetadataArgs[] = [];\n    readonly joinColumns: JoinColumnMetadataArgs[] = [];\n    readonly joinTables: JoinTableMetadataArgs[] = [];\n    readonly entityListeners: EntityListenerMetadataArgs[] = [];\n    readonly relationCounts: RelationCountMetadataArgs[] = [];\n    readonly relationIds: RelationIdMetadataArgs[] = [];\n    readonly embeddeds: EmbeddedMetadataArgs[] = [];\n    readonly inheritances: InheritanceMetadataArgs[] = [];\n    readonly discriminatorValues: DiscriminatorValueMetadataArgs[] = [];\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    filterTables(target: Function|string): TableMetadataArgs[];\n    filterTables(target: (Function|string)[]): TableMetadataArgs[];\n    filterTables(target: (Function|string)|(Function|string)[]): TableMetadataArgs[] {\n        return this.filterByTarget(this.tables, target);\n    }\n\n    filterColumns(target: Function|string): ColumnMetadataArgs[];\n    filterColumns(target: (Function|string)[]): ColumnMetadataArgs[];\n    filterColumns(target: (Function|string)|(Function|string)[]): ColumnMetadataArgs[] {\n        return this.filterByTargetAndWithoutDuplicateProperties(this.columns, target);\n    }\n\n    findGenerated(target: Function|string, propertyName: string): GeneratedMetadataArgs|undefined;\n    findGenerated(target: (Function|string)[], propertyName: string): GeneratedMetadataArgs|undefined;\n    findGenerated(target: (Function|string)|(Function|string)[], propertyName: string): GeneratedMetadataArgs|undefined {\n        return this.generations.find(generated => {\n            return (target instanceof Array ? target.indexOf(generated.target) !== -1 : generated.target === target) && generated.propertyName === propertyName;\n        });\n    }\n\n    filterRelations(target: Function|string): RelationMetadataArgs[];\n    filterRelations(target: (Function|string)[]): RelationMetadataArgs[];\n    filterRelations(target: (Function|string)|(Function|string)[]): RelationMetadataArgs[] {\n        return this.filterByTargetAndWithoutDuplicateProperties(this.relations, target);\n    }\n\n    filterRelationIds(target: Function|string): RelationIdMetadataArgs[];\n    filterRelationIds(target: (Function|string)[]): RelationIdMetadataArgs[];\n    filterRelationIds(target: (Function|string)|(Function|string)[]): RelationIdMetadataArgs[] {\n        return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds, target);\n    }\n\n    filterRelationCounts(target: Function|string): RelationCountMetadataArgs[];\n    filterRelationCounts(target: (Function|string)[]): RelationCountMetadataArgs[];\n    filterRelationCounts(target: (Function|string)|(Function|string)[]): RelationCountMetadataArgs[] {\n        return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts, target);\n    }\n\n    filterIndices(target: Function|string): IndexMetadataArgs[];\n    filterIndices(target: (Function|string)[]): IndexMetadataArgs[];\n    filterIndices(target: (Function|string)|(Function|string)[]): IndexMetadataArgs[] {\n        // todo: implement parent-entity overrides?\n        return this.indices.filter(index => {\n            return target instanceof Array ? target.indexOf(index.target) !== -1 : index.target === target;\n        });\n    }\n\n    filterListeners(target: Function|string): EntityListenerMetadataArgs[];\n    filterListeners(target: (Function|string)[]): EntityListenerMetadataArgs[];\n    filterListeners(target: (Function|string)|(Function|string)[]): EntityListenerMetadataArgs[] {\n        return this.filterByTarget(this.entityListeners, target);\n    }\n\n    filterEmbeddeds(target: Function|string): EmbeddedMetadataArgs[];\n    filterEmbeddeds(target: (Function|string)[]): EmbeddedMetadataArgs[];\n    filterEmbeddeds(target: (Function|string)|(Function|string)[]): EmbeddedMetadataArgs[] {\n        return this.filterByTargetAndWithoutDuplicateProperties(this.embeddeds, target);\n    }\n\n    findJoinTable(target: Function|string, propertyName: string): JoinTableMetadataArgs|undefined {\n        return this.joinTables.find(joinTable => {\n            return joinTable.target === target && joinTable.propertyName === propertyName;\n        });\n    }\n\n    filterJoinColumns(target: Function|string, propertyName: string): JoinColumnMetadataArgs[] {\n        // todo: implement parent-entity overrides?\n        return this.joinColumns.filter(joinColumn => {\n            return joinColumn.target === target && joinColumn.propertyName === propertyName;\n        });\n    }\n\n    filterSubscribers(target: Function|string): EntitySubscriberMetadataArgs[];\n    filterSubscribers(target: (Function|string)[]): EntitySubscriberMetadataArgs[];\n    filterSubscribers(target: (Function|string)|(Function|string)[]): EntitySubscriberMetadataArgs[] {\n        return this.filterByTarget(this.entitySubscribers, target);\n    }\n\n    filterNamingStrategies(target: Function|string): NamingStrategyMetadataArgs[];\n    filterNamingStrategies(target: (Function|string)[]): NamingStrategyMetadataArgs[];\n    filterNamingStrategies(target: (Function|string)|(Function|string)[]): NamingStrategyMetadataArgs[] {\n        return this.filterByTarget(this.namingStrategies, target);\n    }\n\n    filterTransactionEntityManagers(target: Function|string): TransactionEntityMetadataArgs[];\n    filterTransactionEntityManagers(target: (Function|string)[]): TransactionEntityMetadataArgs[];\n    filterTransactionEntityManagers(target: (Function|string)|(Function|string)[]): TransactionEntityMetadataArgs[] {\n        return this.filterByTarget(this.transactionEntityManagers, target);\n    }\n    \n    filterTransactionRepository(target: Function|string): TransactionRepositoryMetadataArgs[];\n    filterTransactionRepository(target: (Function|string)[]): TransactionRepositoryMetadataArgs[];\n    filterTransactionRepository(target: (Function|string)|(Function|string)[]): TransactionRepositoryMetadataArgs[] {\n        return this.filterByTarget(this.transactionRepositories, target);\n    }\n\n    filterSingleTableChildren(target: Function|string): TableMetadataArgs[] {\n        return this.tables.filter(table => {\n            return table.target instanceof Function\n                && target instanceof Function\n                && MetadataUtils.isInherited(table.target, target)\n                && table.type === \"single-table-child\";\n        });\n    }\n\n    findInheritanceType(target: Function|string): InheritanceMetadataArgs|undefined {\n        return this.inheritances.find(inheritance => inheritance.target === target);\n    }\n\n    findDiscriminatorValue(target: Function|string): DiscriminatorValueMetadataArgs|undefined {\n        return this.discriminatorValues.find(discriminatorValue => discriminatorValue.target === target);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Filters given array by a given target or targets.\n     */\n    protected filterByTarget<T extends { target: Function|string }>(array: T[], target: (Function|string)|(Function|string)[]): T[] {\n        return array.filter(table => {\n            return target instanceof Array ? target.indexOf(table.target) !== -1 : table.target === target;\n        });\n    }\n\n    /**\n     * Filters given array by a given target or targets and prevents duplicate property names.\n     */\n    protected filterByTargetAndWithoutDuplicateProperties<T extends { target: Function|string, propertyName: string }>(array: T[], target: (Function|string)|(Function|string)[]): T[] {\n        const newArray: T[] = [];\n        array.forEach(item => {\n            const sameTarget = target instanceof Array ? target.indexOf(item.target) !== -1 : item.target === target;\n            if (sameTarget) {\n                if (!newArray.find(newItem => newItem.propertyName === item.propertyName))\n                    newArray.push(item);\n            }\n        });\n        return newArray;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {ForeignKeyMetadata} from \"../metadata/ForeignKeyMetadata\";\nimport {IndexMetadata} from \"../metadata/IndexMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {JoinTableMetadataArgs} from \"../metadata-args/JoinTableMetadataArgs\";\nimport {Connection} from \"../connection/Connection\";\n\n/**\n * Creates EntityMetadata for junction tables.\n * Junction tables are tables generated by many-to-many relations.\n */\nexport class JunctionEntityMetadataBuilder {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Builds EntityMetadata for the junction of the given many-to-many relation.\n     */\n    build(relation: RelationMetadata, joinTable: JoinTableMetadataArgs): EntityMetadata {\n        const referencedColumns = this.collectReferencedColumns(relation, joinTable);\n        const inverseReferencedColumns = this.collectInverseReferencedColumns(relation, joinTable);\n\n        const joinTableName = joinTable.name || this.connection.namingStrategy.joinTableName(\n            relation.entityMetadata.tableNameWithoutPrefix,\n            relation.inverseEntityMetadata.tableNameWithoutPrefix,\n            relation.propertyPath,\n            relation.inverseRelation ? relation.inverseRelation.propertyName : \"\"\n        );\n\n        const entityMetadata = new EntityMetadata({\n            connection: this.connection,\n            args: {\n                target: \"\",\n                name: joinTableName,\n                type: \"junction\",\n                database: joinTable.database || relation.entityMetadata.database,\n                schema: joinTable.schema || relation.entityMetadata.schema,\n            }\n        });\n\n        // create original side junction columns\n        const junctionColumns = referencedColumns.map(referencedColumn => {\n            const joinColumn = joinTable.joinColumns ? joinTable.joinColumns.find(joinColumnArgs => {\n                return (!joinColumnArgs.referencedColumnName || joinColumnArgs.referencedColumnName === referencedColumn.propertyName) &&\n                    !!joinColumnArgs.name;\n            }) : undefined;\n            const columnName = joinColumn && joinColumn.name ? joinColumn.name\n                : this.connection.namingStrategy.joinTableColumnName(relation.entityMetadata.tableNameWithoutPrefix, referencedColumn.propertyName, referencedColumn.databaseName);\n\n            return new ColumnMetadata({\n                connection: this.connection,\n                entityMetadata: entityMetadata,\n                referencedColumn: referencedColumn,\n                args: {\n                    target: \"\",\n                    mode: \"virtual\",\n                    propertyName: columnName,\n                    options: {\n                        name: columnName,\n                        length: referencedColumn.length,\n                        type: referencedColumn.type,\n                        nullable: false,\n                        primary: true,\n                    }\n                }\n            });\n        });\n\n        // create inverse side junction columns\n        const inverseJunctionColumns = inverseReferencedColumns.map(inverseReferencedColumn => {\n            const joinColumn = joinTable.inverseJoinColumns ? joinTable.inverseJoinColumns.find(joinColumnArgs => {\n                return (!joinColumnArgs.referencedColumnName || joinColumnArgs.referencedColumnName === inverseReferencedColumn.propertyName) &&\n                    !!joinColumnArgs.name;\n            }) : undefined;\n            const columnName = joinColumn && joinColumn.name ? joinColumn.name\n                : this.connection.namingStrategy.joinTableInverseColumnName(relation.inverseEntityMetadata.tableNameWithoutPrefix, inverseReferencedColumn.propertyName, inverseReferencedColumn.databaseName);\n\n            return new ColumnMetadata({\n                connection: this.connection,\n                entityMetadata: entityMetadata,\n                referencedColumn: inverseReferencedColumn,\n                args: {\n                    target: \"\",\n                    mode: \"virtual\",\n                    propertyName: columnName,\n                    options: {\n                        length: inverseReferencedColumn.length,\n                        type: inverseReferencedColumn.type,\n                        name: columnName,\n                        nullable: false,\n                        primary: true,\n                    }\n                }\n            });\n        });\n\n        this.changeDuplicatedColumnNames(junctionColumns, inverseJunctionColumns);\n\n        // set junction table columns\n        entityMetadata.ownerColumns = junctionColumns;\n        entityMetadata.inverseColumns = inverseJunctionColumns;\n        entityMetadata.ownColumns = [...junctionColumns, ...inverseJunctionColumns];\n        entityMetadata.ownColumns.forEach(column => column.relationMetadata = relation);\n\n        // create junction table foreign keys\n        entityMetadata.foreignKeys = [\n            new ForeignKeyMetadata({\n                entityMetadata: entityMetadata,\n                referencedEntityMetadata: relation.entityMetadata,\n                columns: junctionColumns,\n                referencedColumns: referencedColumns\n            }),\n            new ForeignKeyMetadata({\n                entityMetadata: entityMetadata,\n                referencedEntityMetadata: relation.inverseEntityMetadata,\n                columns: inverseJunctionColumns,\n                referencedColumns: inverseReferencedColumns\n            }),\n        ];\n\n        // create junction table indices\n        entityMetadata.indices = [\n            new IndexMetadata({\n                entityMetadata: entityMetadata,\n                columns: junctionColumns,\n                args: {\n                    target: \"\",\n                    unique: false\n                }\n            }),\n\n            new IndexMetadata({\n                entityMetadata: entityMetadata,\n                columns: inverseJunctionColumns,\n                args: {\n                    target: \"\",\n                    unique: false\n                }\n            })\n        ];\n\n        // finally return entity metadata\n        return entityMetadata;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Collects referenced columns from the given join column args.\n     */\n    protected collectReferencedColumns(relation: RelationMetadata, joinTable: JoinTableMetadataArgs): ColumnMetadata[] {\n        const hasAnyReferencedColumnName = joinTable.joinColumns ? joinTable.joinColumns.find(joinColumn => !!joinColumn.referencedColumnName) : false;\n        if (!joinTable.joinColumns || (joinTable.joinColumns && !hasAnyReferencedColumnName)) {\n            return relation.entityMetadata.columns.filter(column => column.isPrimary);\n        } else {\n            return joinTable.joinColumns.map(joinColumn => {\n                const referencedColumn = relation.entityMetadata.columns.find(column => column.propertyName === joinColumn.referencedColumnName);\n                if (!referencedColumn)\n                    throw new Error(`Referenced column ${joinColumn.referencedColumnName} was not found in entity ${relation.entityMetadata.name}`);\n\n                return referencedColumn;\n            });\n        }\n    }\n\n    /**\n     * Collects inverse referenced columns from the given join column args.\n     */\n    protected collectInverseReferencedColumns(relation: RelationMetadata, joinTable: JoinTableMetadataArgs): ColumnMetadata[] {\n        const hasInverseJoinColumns = !!joinTable.inverseJoinColumns;\n        const hasAnyInverseReferencedColumnName = hasInverseJoinColumns ? joinTable.inverseJoinColumns!.find(joinColumn => !!joinColumn.referencedColumnName) : false;\n        if (!hasInverseJoinColumns || (hasInverseJoinColumns && !hasAnyInverseReferencedColumnName)) {\n            return relation.inverseEntityMetadata.primaryColumns;\n        } else {\n            return joinTable.inverseJoinColumns!.map(joinColumn => {\n                const referencedColumn = relation.inverseEntityMetadata.ownColumns.find(column => column.propertyName === joinColumn.referencedColumnName);\n                if (!referencedColumn)\n                    throw new Error(`Referenced column ${joinColumn.referencedColumnName} was not found in entity ${relation.inverseEntityMetadata.name}`);\n\n                return referencedColumn;\n            });\n        }\n    }\n\n    protected changeDuplicatedColumnNames(junctionColumns: ColumnMetadata[], inverseJunctionColumns: ColumnMetadata[]) {\n        junctionColumns.forEach(junctionColumn => {\n            inverseJunctionColumns.forEach(inverseJunctionColumn => {\n                if (junctionColumn.givenDatabaseName === inverseJunctionColumn.givenDatabaseName) {\n                    const junctionColumnName = this.connection.namingStrategy.joinTableColumnDuplicationPrefix(junctionColumn.propertyName, 1);\n                    junctionColumn.propertyName = junctionColumnName;\n                    junctionColumn.givenDatabaseName = junctionColumnName;\n\n                    const inverseJunctionColumnName = this.connection.namingStrategy.joinTableColumnDuplicationPrefix(inverseJunctionColumn.propertyName, 2);\n                    inverseJunctionColumn.propertyName = inverseJunctionColumnName;\n                    inverseJunctionColumn.givenDatabaseName = inverseJunctionColumnName;\n                }\n            });\n        });\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {ForeignKeyMetadata} from \"../metadata/ForeignKeyMetadata\";\nimport {Connection} from \"../connection/Connection\";\n\n/**\n * Creates EntityMetadata for junction tables of the closure entities.\n * Closure junction tables are tables generated by closure entities.\n */\nexport class ClosureJunctionEntityMetadataBuilder {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Builds EntityMetadata for the closure junction of the given closure entity.\n     */\n    build(parentClosureEntityMetadata: EntityMetadata) {\n\n        // create entity metadata itself\n        const entityMetadata = new EntityMetadata({\n            parentClosureEntityMetadata: parentClosureEntityMetadata,\n            connection: this.connection,\n            args: {\n                target: \"\",\n                name: parentClosureEntityMetadata.tableNameWithoutPrefix,\n                type: \"closure-junction\"\n            }\n        });\n\n        // create ancestor and descendant columns for new closure junction table\n        parentClosureEntityMetadata.primaryColumns.forEach(primaryColumn => {\n            entityMetadata.ownColumns.push(new ColumnMetadata({\n                connection: this.connection,\n                entityMetadata: entityMetadata,\n                args: {\n                    target: \"\",\n                    mode: \"virtual\",\n                    propertyName: \"ancestor\", // todo: naming strategy\n                    options: {\n                        length: primaryColumn.length,\n                        type: primaryColumn.type,\n                    }\n                }\n            }));\n            entityMetadata.ownColumns.push(new ColumnMetadata({\n                connection: this.connection,\n                entityMetadata: entityMetadata,\n                args: {\n                    target: \"\",\n                    mode: \"virtual\",\n                    propertyName: \"descendant\",\n                    options: {\n                        length: primaryColumn.length,\n                        type: primaryColumn.type,\n                    }\n                }\n            }));\n        });\n\n        // if tree level column was defined by a closure entity then add it to the junction columns as well\n        if (parentClosureEntityMetadata.treeLevelColumn) {\n            entityMetadata.ownColumns.push(new ColumnMetadata({\n                connection: this.connection,\n                entityMetadata: entityMetadata,\n                args: {\n                    target: \"\",\n                    mode: \"virtual\",\n                    propertyName: \"level\",\n                    options: {\n                        type: this.connection.driver.mappedDataTypes.treeLevel,\n                    }\n                }\n            }));\n        }\n\n        // create junction table foreign keys\n        entityMetadata.foreignKeys = [\n            new ForeignKeyMetadata({\n                entityMetadata: entityMetadata,\n                referencedEntityMetadata: parentClosureEntityMetadata,\n                columns: [entityMetadata.ownColumns[0]],\n                referencedColumns: parentClosureEntityMetadata.primaryColumns\n            }),\n            new ForeignKeyMetadata({\n                entityMetadata: entityMetadata,\n                referencedEntityMetadata: parentClosureEntityMetadata,\n                columns: [entityMetadata.ownColumns[1]],\n                referencedColumns: parentClosureEntityMetadata.primaryColumns\n            }),\n        ];\n\n        return entityMetadata;\n    }\n\n}\n","import {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {ForeignKeyMetadata} from \"../metadata/ForeignKeyMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {JoinColumnMetadataArgs} from \"../metadata-args/JoinColumnMetadataArgs\";\nimport {Connection} from \"../connection/Connection\";\n\n/**\n * Builds join column for the many-to-one and one-to-one owner relations.\n *\n * Cases it should cover:\n * 1. when join column is set with custom name and without referenced column name\n * we need automatically set referenced column name - primary ids by default\n * @JoinColumn({ name: \"custom_name\" })\n *\n * 2. when join column is set with only referenced column name\n * we need automatically set join column name - relation name + referenced column name\n * @JoinColumn({ referencedColumnName: \"title\" })\n *\n * 3. when join column is set without both referenced column name and join column name\n * we need to automatically set both of them\n * @JoinColumn()\n *\n * 4. when join column is not set at all (as in case of @ManyToOne relation)\n * we need to create join column for it with proper referenced column name and join column name\n *\n * 5. when multiple join columns set none of referencedColumnName and name can be optional\n * both options are required\n * @JoinColumn([\n *      { name: \"category_title\", referencedColumnName: \"type\" },\n *      { name: \"category_title\", referencedColumnName: \"name\" },\n * ])\n *\n * Since for many-to-one relations having JoinColumn decorator is not required,\n * we need to go thought each many-to-one relation without join column decorator set\n * and create join column metadata args for them.\n */\nexport class RelationJoinColumnBuilder {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Builds a foreign key of the many-to-one or one-to-one owner relations.\n     */\n    build(joinColumns: JoinColumnMetadataArgs[], relation: RelationMetadata): ForeignKeyMetadata|undefined {\n        const referencedColumns = this.collectReferencedColumns(joinColumns, relation);\n        if (!referencedColumns.length)\n            return undefined; // this case is possible only for one-to-one non owning side\n\n        const columns = this.collectColumns(joinColumns, relation, referencedColumns);\n        return new ForeignKeyMetadata({\n            entityMetadata: relation.entityMetadata,\n            referencedEntityMetadata: relation.inverseEntityMetadata,\n            namingStrategy: this.connection.namingStrategy,\n            columns: columns,\n            referencedColumns: referencedColumns,\n            onDelete: relation.onDelete,\n        });\n    }\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Collects referenced columns from the given join column args.\n     */\n    protected collectReferencedColumns(joinColumns: JoinColumnMetadataArgs[], relation: RelationMetadata): ColumnMetadata[] {\n        const hasAnyReferencedColumnName = joinColumns.find(joinColumnArgs => !!joinColumnArgs.referencedColumnName);\n        const manyToOneWithoutJoinColumn = joinColumns.length === 0 && relation.isManyToOne;\n        const hasJoinColumnWithoutAnyReferencedColumnName = joinColumns.length > 0 && !hasAnyReferencedColumnName;\n\n        if (manyToOneWithoutJoinColumn || hasJoinColumnWithoutAnyReferencedColumnName) { // covers case3 and case1\n            return relation.inverseEntityMetadata.primaryColumns;\n\n        } else { // cases with referenced columns defined\n            return joinColumns.map(joinColumn => {\n                const referencedColumn = relation.inverseEntityMetadata.ownColumns.find(column => column.propertyName === joinColumn.referencedColumnName); // todo: can we also search in relations?\n                if (!referencedColumn)\n                    throw new Error(`Referenced column ${joinColumn.referencedColumnName} was not found in entity ${relation.inverseEntityMetadata.name}`);\n\n                return referencedColumn;\n            });\n        }\n    }\n\n    /**\n     * Collects columns from the given join column args.\n     */\n    private collectColumns(joinColumns: JoinColumnMetadataArgs[], relation: RelationMetadata, referencedColumns: ColumnMetadata[]): ColumnMetadata[] {\n        return referencedColumns.map(referencedColumn => {\n\n            // in the case if relation has join column with only name set we need this check\n            const joinColumnMetadataArg = joinColumns.find(joinColumn => {\n                return (!joinColumn.referencedColumnName || joinColumn.referencedColumnName === referencedColumn.propertyName) &&\n                    !!joinColumn.name;\n            });\n            const joinColumnName = joinColumnMetadataArg ? joinColumnMetadataArg.name : this.connection.namingStrategy.joinColumnName(relation.propertyName, referencedColumn.propertyName);\n\n            let relationalColumn = relation.entityMetadata.ownColumns.find(column => column.databaseName === joinColumnName);\n            if (!relationalColumn) {\n                relationalColumn = new ColumnMetadata({\n                    connection: this.connection,\n                    entityMetadata: relation.entityMetadata,\n                    args: {\n                        target: \"\",\n                        mode: \"virtual\",\n                        propertyName: relation.propertyName,\n                        options: {\n                            name: joinColumnName,\n                            type: referencedColumn.type,\n                            length: referencedColumn.length,\n                            charset: referencedColumn.charset,\n                            collation: referencedColumn.collation,\n                            precision: referencedColumn.precision,\n                            scale: referencedColumn.scale,\n                            comment: referencedColumn.comment,\n                            primary: relation.isPrimary,\n                            nullable: relation.isNullable,\n                        }\n                    }\n                });\n                relation.entityMetadata.registerColumn(relationalColumn);\n            }\n            relationalColumn.referencedColumn = referencedColumn; // its important to set it here because we need to set referenced column for user defined join column\n            relationalColumn.type = referencedColumn.type; // also since types of relational column and join column must be equal we override user defined column type\n            relationalColumn.relationMetadata = relation;\n            relationalColumn.build(this.connection);\n            return relationalColumn;\n        });\n    }\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {IndexMetadata} from \"../metadata/IndexMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\nimport {EmbeddedMetadata} from \"../metadata/EmbeddedMetadata\";\nimport {MetadataArgsStorage} from \"../metadata-args/MetadataArgsStorage\";\nimport {EmbeddedMetadataArgs} from \"../metadata-args/EmbeddedMetadataArgs\";\nimport {RelationIdMetadata} from \"../metadata/RelationIdMetadata\";\nimport {RelationCountMetadata} from \"../metadata/RelationCountMetadata\";\nimport {MetadataUtils} from \"./MetadataUtils\";\nimport {TableMetadataArgs} from \"../metadata-args/TableMetadataArgs\";\nimport {JunctionEntityMetadataBuilder} from \"./JunctionEntityMetadataBuilder\";\nimport {ClosureJunctionEntityMetadataBuilder} from \"./ClosureJunctionEntityMetadataBuilder\";\nimport {RelationJoinColumnBuilder} from \"./RelationJoinColumnBuilder\";\nimport {Connection} from \"../connection/Connection\";\nimport {EntityListenerMetadata} from \"../metadata/EntityListenerMetadata\";\nimport {ColumnOptions} from \"../decorator/options/ColumnOptions\";\nimport {ForeignKeyMetadata} from \"../metadata/ForeignKeyMetadata\";\nimport {LazyRelationsWrapper} from \"../lazy-loading/LazyRelationsWrapper\";\n\n/**\n * Builds EntityMetadata objects and all its sub-metadatas.\n */\nexport class EntityMetadataBuilder {\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Used to build entity metadatas of the junction entities.\n     */\n    protected junctionEntityMetadataBuilder: JunctionEntityMetadataBuilder;\n\n    /**\n     * Used to build entity metadatas of the closure junction entities.\n     */\n    protected closureJunctionEntityMetadataBuilder: ClosureJunctionEntityMetadataBuilder;\n\n    /**\n     * Used to build join columns of the relations.\n     */\n    protected relationJoinColumnBuilder: RelationJoinColumnBuilder;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private connection: Connection,\n                private metadataArgsStorage: MetadataArgsStorage) {\n\n        this.junctionEntityMetadataBuilder = new JunctionEntityMetadataBuilder(connection);\n        this.closureJunctionEntityMetadataBuilder = new ClosureJunctionEntityMetadataBuilder(connection);\n        this.relationJoinColumnBuilder = new RelationJoinColumnBuilder(connection);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Builds a complete entity metadatas for the given entity classes.\n     */\n    build(entityClasses?: Function[]): EntityMetadata[] {\n\n        // if entity classes to filter entities by are given then do filtering, otherwise use all\n        const allTables = entityClasses ? this.metadataArgsStorage.filterTables(entityClasses) : this.metadataArgsStorage.tables;\n\n        // filter out table metadata args for those we really create entity metadatas and tables in the db\n        const realTables = allTables.filter(table => table.type === \"regular\" || table.type === \"closure\" || table.type === \"class-table-child\" || table.type === \"single-table-child\");\n\n        // create entity metadatas for a user defined entities (marked with @Entity decorator or loaded from entity schemas)\n        const entityMetadatas = realTables.map(tableArgs => this.createEntityMetadata(tableArgs));\n\n        // calculate entity metadata computed properties and all its sub-metadatas\n        entityMetadatas.forEach(entityMetadata => this.computeEntityMetadata(entityMetadata));\n\n        // calculate entity metadata's inverse properties\n        entityMetadatas.forEach(entityMetadata => this.computeInverseProperties(entityMetadata, entityMetadatas));\n\n        // go through all entity metadatas and create foreign keys / junction entity metadatas for their relations\n        entityMetadatas\n            .filter(entityMetadata => entityMetadata.tableType !== \"single-table-child\")\n            .forEach(entityMetadata => {\n\n                // create entity's relations join columns (for many-to-one and one-to-one owner)\n                entityMetadata.relations.filter(relation => relation.isOneToOne || relation.isManyToOne).forEach(relation => {\n                    const joinColumns = this.metadataArgsStorage.filterJoinColumns(relation.target, relation.propertyName);\n                    const foreignKey = this.relationJoinColumnBuilder.build(joinColumns, relation); // create a foreign key based on its metadata args\n                    if (foreignKey) {\n                        relation.registerForeignKeys(foreignKey); // push it to the relation and thus register there a join column\n                        entityMetadata.foreignKeys.push(foreignKey);\n                    }\n                });\n\n                // create junction entity metadatas for entity many-to-many relations\n                entityMetadata.relations.filter(relation => relation.isManyToMany).forEach(relation => {\n                    const joinTable = this.metadataArgsStorage.findJoinTable(relation.target, relation.propertyName);\n                    if (!joinTable) return; // no join table set - no need to do anything (it means this is many-to-many inverse side)\n\n                    // here we create a junction entity metadata for a new junction table of many-to-many relation\n                    const junctionEntityMetadata = this.junctionEntityMetadataBuilder.build(relation, joinTable);\n                    relation.registerForeignKeys(...junctionEntityMetadata.foreignKeys);\n                    relation.registerJunctionEntityMetadata(junctionEntityMetadata);\n\n                    // compute new entity metadata properties and push it to entity metadatas pool\n                    this.computeEntityMetadata(junctionEntityMetadata);\n                    this.computeInverseProperties(junctionEntityMetadata, entityMetadatas);\n                    entityMetadatas.push(junctionEntityMetadata);\n                });\n\n                // update entity metadata depend properties\n                entityMetadata.relationsWithJoinColumns = entityMetadata.relations.filter(relation => relation.isWithJoinColumn);\n                entityMetadata.hasNonNullableRelations = entityMetadata.relationsWithJoinColumns.some(relation => !relation.isNullable || relation.isPrimary);\n        });\n\n        // generate closure junction tables for all closure tables\n        entityMetadatas\n            .filter(metadata => metadata.isClosure)\n            .forEach(entityMetadata => {\n                const closureJunctionEntityMetadata = this.closureJunctionEntityMetadataBuilder.build(entityMetadata);\n                entityMetadata.closureJunctionTable = closureJunctionEntityMetadata;\n                this.computeEntityMetadata(closureJunctionEntityMetadata);\n                this.computeInverseProperties(closureJunctionEntityMetadata, entityMetadatas);\n                entityMetadatas.push(closureJunctionEntityMetadata);\n            });\n\n        // after all metadatas created we set parent entity metadata for class-table inheritance\n        entityMetadatas\n            .filter(metadata => metadata.tableType === \"single-table-child\" || metadata.tableType === \"class-table-child\")\n            .forEach(entityMetadata => {\n                const inheritanceTree: any[] = entityMetadata.target instanceof Function\n                    ? MetadataUtils.getInheritanceTree(entityMetadata.target)\n                    : [entityMetadata.target];\n\n                const parentMetadata = entityMetadatas.find(metadata => {\n                    return inheritanceTree.find(inheritance => inheritance === metadata.target) && (metadata.inheritanceType === \"single-table\" || metadata.inheritanceType === \"class-table\");\n                });\n\n                if (parentMetadata) {\n                    entityMetadata.parentEntityMetadata = parentMetadata;\n                    if (parentMetadata.inheritanceType === \"single-table\")\n                        entityMetadata.tableName = parentMetadata.tableName;\n                }\n            });\n\n        // after all metadatas created we set child entity metadatas for class-table inheritance\n        entityMetadatas.forEach(metadata => {\n            metadata.childEntityMetadatas = entityMetadatas.filter(childMetadata => {\n                return metadata.target instanceof Function\n                    && childMetadata.target instanceof Function\n                    && MetadataUtils.isInherited(childMetadata.target, metadata.target);\n            });\n        });\n\n        // generate keys for tables with single-table inheritance\n        entityMetadatas\n            .filter(metadata => metadata.inheritanceType === \"single-table\" && metadata.discriminatorColumn)\n            .forEach(entityMetadata => this.createKeysForTableInheritance(entityMetadata));\n\n        // build all indices (need to do it after relations and their join columns are built)\n        entityMetadatas.forEach(entityMetadata => {\n            entityMetadata.indices.forEach(index => index.build(this.connection.namingStrategy));\n        });\n\n        entityMetadatas\n            .filter(metadata => !!metadata.parentEntityMetadata && metadata.tableType === \"class-table-child\")\n            .forEach(metadata => {\n                const parentPrimaryColumns = metadata.parentEntityMetadata.primaryColumns;\n                const parentRelationColumns = parentPrimaryColumns.map(parentPrimaryColumn => {\n                    const columnName = this.connection.namingStrategy.classTableInheritanceParentColumnName(metadata.parentEntityMetadata.tableName, parentPrimaryColumn.propertyPath);\n                    const column = new ColumnMetadata({\n                        connection: this.connection,\n                        entityMetadata: metadata,\n                        referencedColumn: parentPrimaryColumn,\n                        args: {\n                            target: metadata.target,\n                            propertyName: columnName,\n                            mode: \"parentId\",\n                            options: <ColumnOptions> {\n                                name: columnName,\n                                type: parentPrimaryColumn.type,\n                                unique: false,\n                                nullable: false,\n                                primary: true\n                            }\n                        }\n                    });\n                    metadata.registerColumn(column);\n                    column.build(this.connection);\n                    return column;\n                });\n\n                metadata.foreignKeys = [\n                    new ForeignKeyMetadata({\n                        entityMetadata: metadata,\n                        referencedEntityMetadata: metadata.parentEntityMetadata,\n                        namingStrategy: this.connection.namingStrategy,\n                        columns: parentRelationColumns,\n                        referencedColumns: parentPrimaryColumns,\n                        onDelete: \"CASCADE\"\n                    })\n                ];\n            });\n\n        // add lazy initializer for entity relations\n        entityMetadatas\n            .filter(metadata => metadata.target instanceof Function)\n            .forEach(entityMetadata => {\n                entityMetadata.relations\n                    .filter(relation => relation.isLazy)\n                    .forEach(relation => {\n                        const lazyRelationsWrapper = new LazyRelationsWrapper(this.connection);\n                        lazyRelationsWrapper.wrap((entityMetadata.target as Function).prototype, relation);\n                    });\n            });\n\n        entityMetadatas.forEach(entityMetadata => {\n            entityMetadata.columns.forEach(column => {\n                // const target = column.embeddedMetadata ? column.embeddedMetadata.type : column.target;\n                const generated = this.metadataArgsStorage.findGenerated(column.target, column.propertyName);\n                if (generated) {\n                    column.isGenerated = true;\n                    column.generationStrategy = generated.strategy;\n                    column.type = generated.strategy === \"increment\" ? (column.type || Number) : \"uuid\";\n                    column.build(this.connection);\n                    this.computeEntityMetadata(entityMetadata);\n                }\n            });\n\n        });\n\n        return entityMetadatas;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates entity metadata from the given table args.\n     * Creates column, relation, etc. metadatas for everything this entity metadata owns.\n     */\n    protected createEntityMetadata(tableArgs: TableMetadataArgs): EntityMetadata {\n\n        // we take all \"inheritance tree\" from a target entity to collect all stored metadata args\n        // (by decorators or inside entity schemas). For example for target Post < ContentModel < Unit\n        // it will be an array of [Post, ContentModel, Unit] and we can then get all metadata args of those classes\n        const inheritanceTree: any[] = tableArgs.target instanceof Function\n            ? MetadataUtils.getInheritanceTree(tableArgs.target)\n            : [tableArgs.target]; // todo: implement later here inheritance for string-targets\n\n        // if single table inheritance used, we need to copy all children columns in to parent table\n        let singleTableChildrenTargets: any[];\n        if (tableArgs.type === \"single-table-child\") {\n            singleTableChildrenTargets = this.metadataArgsStorage\n                .filterSingleTableChildren(tableArgs.target)\n                .map(args => args.target)\n                .filter(target => target instanceof Function);\n\n            inheritanceTree.push(...singleTableChildrenTargets);\n\n        } else if (tableArgs.type === \"class-table-child\") {\n            inheritanceTree.forEach(inheritanceTreeItem => {\n                const isParent = !!this.metadataArgsStorage.inheritances.find(i => i.target === inheritanceTreeItem);\n                if (isParent)\n                    inheritanceTree.splice(inheritanceTree.indexOf(inheritanceTreeItem), 1);\n            });\n        }\n\n        const entityMetadata = new EntityMetadata({\n            connection: this.connection,\n            args: tableArgs\n        });\n\n        const inheritanceType = this.metadataArgsStorage.findInheritanceType(tableArgs.target);\n        entityMetadata.inheritanceType = inheritanceType ? inheritanceType.type : undefined;\n\n        const discriminatorValue = this.metadataArgsStorage.findDiscriminatorValue(tableArgs.target);\n        entityMetadata.discriminatorValue = discriminatorValue ? discriminatorValue.value : (tableArgs.target as any).name; // todo: pass this to naming strategy to generate a name\n\n        entityMetadata.embeddeds = this.createEmbeddedsRecursively(entityMetadata, this.metadataArgsStorage.filterEmbeddeds(inheritanceTree));\n        entityMetadata.ownColumns = this.metadataArgsStorage\n            .filterColumns(inheritanceTree)\n            .map(args => {\n                const column = new ColumnMetadata({ connection: this.connection, entityMetadata, args });\n                // console.log(column.propertyName);\n                // if single table inheritance used, we need to mark all inherit table columns as nullable\n                if (singleTableChildrenTargets && singleTableChildrenTargets.indexOf(args.target) !== -1)\n                    column.isNullable = true;\n                return column;\n            });\n\n        entityMetadata.ownRelations = this.metadataArgsStorage.filterRelations(inheritanceTree).map(args => {\n            return new RelationMetadata({ entityMetadata, args });\n        });\n        entityMetadata.relationIds = this.metadataArgsStorage.filterRelationIds(inheritanceTree).map(args => {\n            return new RelationIdMetadata({ entityMetadata, args });\n        });\n        entityMetadata.relationCounts = this.metadataArgsStorage.filterRelationCounts(inheritanceTree).map(args => {\n            return new RelationCountMetadata({ entityMetadata, args });\n        });\n        entityMetadata.ownIndices = this.metadataArgsStorage.filterIndices(inheritanceTree).map(args => {\n            return new IndexMetadata({ entityMetadata, args });\n        });\n        entityMetadata.ownListeners = this.metadataArgsStorage.filterListeners(inheritanceTree).map(args => {\n            return new EntityListenerMetadata({ entityMetadata: entityMetadata, args: args });\n        });\n        return entityMetadata;\n    }\n\n    /**\n     * Creates from the given embedded metadata args real embedded metadatas with its columns and relations,\n     * and does the same for all its sub-embeddeds (goes recursively).\n     */\n    protected createEmbeddedsRecursively(entityMetadata: EntityMetadata, embeddedArgs: EmbeddedMetadataArgs[]): EmbeddedMetadata[] {\n        return embeddedArgs.map(embeddedArgs => {\n            const embeddedMetadata = new EmbeddedMetadata({ entityMetadata: entityMetadata, args: embeddedArgs });\n            const targets = MetadataUtils.getInheritanceTree(embeddedMetadata.type);\n\n            embeddedMetadata.columns = this.metadataArgsStorage.filterColumns(targets).map(args => {\n                return new ColumnMetadata({ connection: this.connection, entityMetadata, embeddedMetadata, args});\n            });\n            embeddedMetadata.relations = this.metadataArgsStorage.filterRelations(targets).map(args => {\n                return new RelationMetadata({ entityMetadata, embeddedMetadata, args });\n            });\n            embeddedMetadata.listeners = this.metadataArgsStorage.filterListeners(targets).map(args => {\n                return new EntityListenerMetadata({ entityMetadata, embeddedMetadata, args });\n            });\n            embeddedMetadata.indices = this.metadataArgsStorage.filterIndices(targets).map(args => {\n                return new IndexMetadata({ entityMetadata, embeddedMetadata, args });\n            });\n            embeddedMetadata.relationIds = this.metadataArgsStorage.filterRelationIds(targets).map(args => {\n                return new RelationIdMetadata({ entityMetadata, args });\n            });\n            embeddedMetadata.relationCounts = this.metadataArgsStorage.filterRelationCounts(targets).map(args => {\n                return new RelationCountMetadata({ entityMetadata, args });\n            });\n            embeddedMetadata.embeddeds = this.createEmbeddedsRecursively(entityMetadata, this.metadataArgsStorage.filterEmbeddeds(targets));\n            embeddedMetadata.embeddeds.forEach(subEmbedded => subEmbedded.parentEmbeddedMetadata = embeddedMetadata);\n            return embeddedMetadata;\n        });\n    }\n\n    /**\n     * Computes all entity metadata's computed properties, and all its sub-metadatas (relations, columns, embeds, etc).\n     */\n    protected computeEntityMetadata(entityMetadata: EntityMetadata) {\n        entityMetadata.embeddeds.forEach(embedded => embedded.build(this.connection));\n        entityMetadata.embeddeds.forEach(embedded => {\n            embedded.columnsFromTree.forEach(column => column.build(this.connection));\n            embedded.relationsFromTree.forEach(relation => relation.build());\n        });\n        entityMetadata.ownColumns.forEach(column => column.build(this.connection));\n        entityMetadata.ownRelations.forEach(relation => relation.build());\n        entityMetadata.relations = entityMetadata.embeddeds.reduce((relations, embedded) => relations.concat(embedded.relationsFromTree), entityMetadata.ownRelations);\n        entityMetadata.eagerRelations = entityMetadata.relations.filter(relation => relation.isEager);\n        entityMetadata.lazyRelations = entityMetadata.relations.filter(relation => relation.isLazy);\n        entityMetadata.oneToOneRelations = entityMetadata.relations.filter(relation => relation.isOneToOne);\n        entityMetadata.oneToManyRelations = entityMetadata.relations.filter(relation => relation.isOneToMany);\n        entityMetadata.manyToOneRelations = entityMetadata.relations.filter(relation => relation.isManyToOne);\n        entityMetadata.manyToManyRelations = entityMetadata.relations.filter(relation => relation.isManyToMany);\n        entityMetadata.ownerOneToOneRelations = entityMetadata.relations.filter(relation => relation.isOneToOneOwner);\n        entityMetadata.ownerManyToManyRelations = entityMetadata.relations.filter(relation => relation.isManyToManyOwner);\n        entityMetadata.treeParentRelation = entityMetadata.relations.find(relation => relation.isTreeParent);\n        entityMetadata.treeChildrenRelation = entityMetadata.relations.find(relation => relation.isTreeChildren);\n        entityMetadata.columns = entityMetadata.embeddeds.reduce((columns, embedded) => columns.concat(embedded.columnsFromTree), entityMetadata.ownColumns);\n        entityMetadata.listeners = entityMetadata.embeddeds.reduce((columns, embedded) => columns.concat(embedded.listenersFromTree), entityMetadata.ownListeners);\n        entityMetadata.indices = entityMetadata.embeddeds.reduce((columns, embedded) => columns.concat(embedded.indicesFromTree), entityMetadata.ownIndices);\n        entityMetadata.primaryColumns = entityMetadata.columns.filter(column => column.isPrimary);\n        entityMetadata.hasMultiplePrimaryKeys = entityMetadata.primaryColumns.length > 1;\n        entityMetadata.generatedColumns = entityMetadata.columns.filter(column => column.isGenerated || column.isObjectId);\n        entityMetadata.createDateColumn = entityMetadata.columns.find(column => column.isCreateDate);\n        entityMetadata.updateDateColumn = entityMetadata.columns.find(column => column.isUpdateDate);\n        entityMetadata.versionColumn = entityMetadata.columns.find(column => column.isVersion);\n        entityMetadata.discriminatorColumn = entityMetadata.columns.find(column => column.isDiscriminator);\n        entityMetadata.treeLevelColumn = entityMetadata.columns.find(column => column.isTreeLevel);\n        entityMetadata.parentIdColumns = entityMetadata.columns.filter(column => column.isParentId);\n        entityMetadata.objectIdColumn = entityMetadata.columns.find(column => column.isObjectId);\n        entityMetadata.foreignKeys.forEach(foreignKey => foreignKey.build(this.connection.namingStrategy));\n        entityMetadata.propertiesMap = entityMetadata.createPropertiesMap();\n        entityMetadata.relationIds.forEach(relationId => relationId.build());\n        entityMetadata.relationCounts.forEach(relationCount => relationCount.build());\n        entityMetadata.embeddeds.forEach(embedded => {\n            embedded.relationIdsFromTree.forEach(relationId => relationId.build());\n            embedded.relationCountsFromTree.forEach(relationCount => relationCount.build());\n        });\n    }\n\n    /**\n     * Computes entity metadata's relations inverse side properties.\n     */\n    protected computeInverseProperties(entityMetadata: EntityMetadata, entityMetadatas: EntityMetadata[]) {\n        entityMetadata.relations.forEach(relation => {\n\n            // compute inverse side (related) entity metadatas for all relation metadatas\n            const inverseEntityMetadata = entityMetadatas.find(m => m.target === relation.type || (typeof relation.type === \"string\" && m.targetName === relation.type));\n            if (!inverseEntityMetadata)\n                throw new Error(\"Entity metadata for \" + entityMetadata.name + \"#\" + relation.propertyPath + \" was not found. Check if you specified a correct entity object, check its really entity and its connected in the connection options.\");\n\n            relation.inverseEntityMetadata = inverseEntityMetadata;\n            relation.inverseSidePropertyPath = relation.buildInverseSidePropertyPath();\n\n            // and compute inverse relation and mark if it has such\n            relation.inverseRelation = inverseEntityMetadata.relations.find(foundRelation => foundRelation.propertyPath === relation.inverseSidePropertyPath);\n        });\n    }\n\n    /**\n     * Creates indices for the table of single table inheritance.\n     */\n    protected createKeysForTableInheritance(entityMetadata: EntityMetadata) {\n        entityMetadata.indices.push(\n            new IndexMetadata({\n                entityMetadata: entityMetadata,\n                columns: [entityMetadata.discriminatorColumn!],\n                args: {\n                    target: entityMetadata.target,\n                    unique: false\n                }\n            }),\n            new IndexMetadata({\n                entityMetadata: entityMetadata,\n                columns: [...entityMetadata.primaryColumns, entityMetadata.discriminatorColumn!],\n                args: {\n                    target: entityMetadata.target,\n                    unique: false\n                }\n            })\n        );\n    }\n\n}\n\n// generate virtual column with foreign key for class-table inheritance\n/*entityMetadatas.forEach(entityMetadata => {\n if (!entityMetadata.parentEntityMetadata)\n return;\n\n const parentPrimaryColumns = entityMetadata.parentEntityMetadata.primaryColumns;\n const parentIdColumns = parentPrimaryColumns.map(primaryColumn => {\n const columnName = this.namingStrategy.classTableInheritanceParentColumnName(entityMetadata.parentEntityMetadata.tableName, primaryColumn.propertyName);\n const column = new ColumnMetadataBuilder(entityMetadata);\n column.type = primaryColumn.type;\n column.propertyName = primaryColumn.propertyName; // todo: check why needed\n column.givenName = columnName;\n column.mode = \"parentId\";\n column.isUnique = true;\n column.isNullable = false;\n // column.entityTarget = entityMetadata.target;\n return column;\n });\n\n // add foreign key\n const foreignKey = new ForeignKeyMetadataBuilder(\n entityMetadata,\n parentIdColumns,\n entityMetadata.parentEntityMetadata,\n parentPrimaryColumns,\n \"CASCADE\"\n );\n entityMetadata.ownColumns.push(...parentIdColumns);\n entityMetadata.foreignKeys.push(foreignKey);\n });*/\n\n\n/*protected createEntityMetadata(metadata: EntityMetadata, options: {\n userSpecifiedTableName?: string,\n closureOwnerTableName?: string,\n }) {\n\n const tableNameUserSpecified = options.userSpecifiedTableName;\n const isClosureJunction = metadata.tableType === \"closure-junction\";\n const targetName = metadata.target instanceof Function ? (metadata.target as any).name : metadata.target;\n const tableNameWithoutPrefix = isClosureJunction\n ? this.namingStrategy.closureJunctionTableName(options.closureOwnerTableName!)\n : this.namingStrategy.tableName(targetName, options.userSpecifiedTableName);\n\n const tableName = this.namingStrategy.prefixTableName(this.driver.options.tablesPrefix, tableNameWithoutPrefix);\n\n // for virtual tables (like junction table) target is equal to undefined at this moment\n // we change this by setting virtual's table name to a target name\n // todo: add validation so targets with same schema names won't conflicts with virtual table names\n metadata.target = metadata.target ? metadata.target : tableName;\n metadata.targetName = targetName;\n metadata.givenTableName = tableNameUserSpecified;\n metadata.tableNameWithoutPrefix = tableNameWithoutPrefix;\n metadata.tableName = tableName;\n metadata.name = targetName ? targetName : tableName;\n // metadata.namingStrategy = this.namingStrategy;\n }*/\n\n/*protected createEntityMetadata(tableArgs: any, argsForTable: any, ): EntityMetadata {\n const metadata = new EntityMetadata({\n junction: false,\n target: tableArgs.target,\n tablesPrefix: this.driver.options.tablesPrefix,\n namingStrategy: this.namingStrategy,\n tableName: argsForTable.name,\n tableType: argsForTable.type,\n orderBy: argsForTable.orderBy,\n engine: argsForTable.engine,\n skipSchemaSync: argsForTable.skipSchemaSync,\n columnMetadatas: columns,\n relationMetadatas: relations,\n relationIdMetadatas: relationIds,\n relationCountMetadatas: relationCounts,\n indexMetadatas: indices,\n embeddedMetadatas: embeddeds,\n inheritanceType: mergedArgs.inheritance ? mergedArgs.inheritance.type : undefined,\n discriminatorValue: discriminatorValueArgs ? discriminatorValueArgs.value : (tableArgs.target as any).name // todo: pass this to naming strategy to generate a name\n }, this.lazyRelationsWrapper);\n return metadata;\n }*/\n\n\n// const tables = [mergedArgs.table].concat(mergedArgs.children);\n// tables.forEach(tableArgs => {\n\n// find embeddable tables for embeddeds registered in this table and create EmbeddedMetadatas from them\n// const findEmbeddedsRecursively = (embeddedArgs: EmbeddedMetadataArgs[]) => {\n//     const embeddeds: EmbeddedMetadata[] = [];\n//     embeddedArgs.forEach(embedded => {\n//         const embeddableTable = embeddableMergedArgs.find(embeddedMergedArgs => embeddedMergedArgs.table.target === embedded.type());\n//         if (embeddableTable) {\n//             const columns = embeddableTable.columns.toArray().map(args => new ColumnMetadata(args));\n//             const relations = embeddableTable.relations.toArray().map(args => new RelationMetadata(args));\n//             const subEmbeddeds = findEmbeddedsRecursively(embeddableTable.embeddeds.toArray());\n//             embeddeds.push(new EmbeddedMetadata(columns, relations, subEmbeddeds, embedded));\n//         }\n//     });\n//     return embeddeds;\n// };\n// const embeddeds = findEmbeddedsRecursively(mergedArgs.embeddeds.toArray());\n\n// create metadatas from args\n// const argsForTable = mergedArgs.inheritance && mergedArgs.inheritance.type === \"single-table\" ? mergedArgs.table : tableArgs;\n\n// const table = new TableMetadata(argsForTable);\n// const columns = mergedArgs.columns.toArray().map(args => {\n//\n//     // if column's target is a child table then this column should have all nullable columns\n//     if (mergedArgs.inheritance &&\n//         mergedArgs.inheritance.type === \"single-table\" &&\n//         args.target !== mergedArgs.table.target && !!mergedArgs.children.find(childTable => childTable.target === args.target)) {\n//         args.options.nullable = true;\n//     }\n//     return new ColumnMetadata(args);\n// });\n// const discriminatorValueArgs = mergedArgs.discriminatorValues.find(discriminatorValueArgs => {\n//     return discriminatorValueArgs.target === tableArgs.target;\n// });\n\n\n\n// after all metadatas created we set parent entity metadata for class-table inheritance\n// entityMetadatas.forEach(entityMetadata => {\n//     const mergedArgs = realTables.find(args => args.target === entityMetadata.target);\n//     if (mergedArgs && mergedArgs.parent) {\n//         const parentEntityMetadata = entityMetadatas.find(entityMetadata => entityMetadata.target === (mergedArgs!.parent! as any).target); // todo: weird compiler error here, thats why type casing is used\n//         if (parentEntityMetadata)\n//             entityMetadata.parentEntityMetadata = parentEntityMetadata;\n//     }\n// });","import {JoinColumnOptions} from \"./JoinColumnOptions\";\n\n/**\n * Describes all relation's options.\n */\nexport interface JoinTableOptions {\n\n    /**\n     * Name of the table that will be created to store values of the both tables (join table).\n     * By default is auto generated.\n     */\n    name?: string;\n\n    /**\n     * First column of the join table.\n     */\n    joinColumn?: JoinColumnOptions;\n\n    /**\n     * Second (inverse) column of the join table.\n     */\n    inverseJoinColumn?: JoinColumnOptions;\n\n    /**\n     * Database where join table will be created.\n     * Works only in some databases (like mysql and mssql).\n     */\n    database?: string;\n\n    /**\n     * Schema where join table will be created.\n     * Works only in some databases (like postgres and mssql).\n     */\n    schema?: string;\n\n}","import {EntitySchema} from \"./EntitySchema\";\nimport {MetadataArgsStorage} from \"../metadata-args/MetadataArgsStorage\";\nimport {TableMetadataArgs} from \"../metadata-args/TableMetadataArgs\";\nimport {ColumnMetadataArgs} from \"../metadata-args/ColumnMetadataArgs\";\nimport {IndexMetadataArgs} from \"../metadata-args/IndexMetadataArgs\";\nimport {RelationMetadataArgs} from \"../metadata-args/RelationMetadataArgs\";\nimport {JoinColumnMetadataArgs} from \"../metadata-args/JoinColumnMetadataArgs\";\nimport {JoinTableMetadataArgs} from \"../metadata-args/JoinTableMetadataArgs\";\nimport {JoinTableOptions} from \"../decorator/options/JoinTableOptions\";\nimport {JoinTableMultipleColumnsOptions} from \"../decorator/options/JoinTableMuplipleColumnsOptions\";\nimport {ColumnMode} from \"../metadata-args/types/ColumnMode\";\nimport {GeneratedMetadataArgs} from \"../metadata-args/GeneratedMetadataArgs\";\n\n/**\n * Transforms entity schema into metadata args storage.\n * The result will be just like entities read from decorators.\n */\nexport class EntitySchemaTransformer {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Transforms entity schema into new metadata args storage object.\n     */\n    transform(schemas: EntitySchema[]): MetadataArgsStorage {\n        const metadataArgsStorage = new MetadataArgsStorage();\n\n        schemas.forEach(schema => {\n\n            // add table metadata args from the schema\n            const table = schema.table || {} as any;\n            const tableMetadata: TableMetadataArgs = {\n                target: schema.target || schema.name,\n                name: table.name,\n                type: table.type || \"regular\",\n                orderBy: table.orderBy\n            };\n            metadataArgsStorage.tables.push(tableMetadata);\n\n            // add columns metadata args from the schema\n            Object.keys(schema.columns).forEach(columnName => {\n                const tableColumn = schema.columns[columnName];\n                let mode: ColumnMode = \"regular\";\n                if (tableColumn.createDate)\n                    mode = \"createDate\";\n                if (tableColumn.updateDate)\n                    mode = \"updateDate\";\n                if (tableColumn.version)\n                    mode = \"version\";\n                if (tableColumn.treeChildrenCount)\n                    mode = \"treeChildrenCount\";\n                if (tableColumn.treeLevel)\n                    mode = \"treeLevel\";\n\n                const columnAgrs: ColumnMetadataArgs = {\n                    target: schema.target || schema.name,\n                    mode: mode,\n                    propertyName: columnName,\n                    options: {\n                        type: tableColumn.type,\n                        name: tableColumn.name,\n                        length: tableColumn.length,\n                        primary: tableColumn.primary,\n                        unique: tableColumn.unique,\n                        nullable: tableColumn.nullable,\n                        comment: tableColumn.comment,\n                        default: tableColumn.default,\n                        precision: tableColumn.precision,\n                        scale: tableColumn.scale\n                    }\n                };\n                metadataArgsStorage.columns.push(columnAgrs);\n\n                if (tableColumn.generated) {\n                    const generationArgs: GeneratedMetadataArgs = {\n                        target: schema.target || schema.name,\n                        propertyName: columnName,\n                        strategy: typeof tableColumn.generated === \"string\" ? tableColumn.generated : \"increment\"\n                    };\n                    metadataArgsStorage.generations.push(generationArgs);\n                }\n            });\n\n            // add relation metadata args from the schema\n            if (schema.relations) {\n                Object.keys(schema.relations).forEach(relationName => {\n                    const relationSchema = schema.relations![relationName];\n                    const relation: RelationMetadataArgs = {\n                        target: schema.target || schema.name,\n                        propertyName: relationName,\n                        relationType: relationSchema.type,\n                        isLazy: relationSchema.isLazy || false,\n                        type: relationSchema.target,\n                        inverseSideProperty: relationSchema.inverseSide,\n                        isTreeParent: relationSchema.isTreeParent,\n                        isTreeChildren: relationSchema.isTreeChildren,\n                        options: {\n                            cascadeAll: relationSchema.cascadeAll,\n                            cascadeInsert: relationSchema.cascadeInsert,\n                            cascadeUpdate: relationSchema.cascadeUpdate,\n                            cascadeRemove: relationSchema.cascadeRemove,\n                            nullable: relationSchema.nullable,\n                            onDelete: relationSchema.onDelete\n                        }\n                    };\n\n                    metadataArgsStorage.relations.push(relation);\n\n                    // add join column\n                    if (relationSchema.joinColumn) {\n                        if (typeof relationSchema.joinColumn === \"boolean\") {\n                            const joinColumn: JoinColumnMetadataArgs = {\n                                target: schema.target || schema.name,\n                                propertyName: relationName\n                            };\n                            metadataArgsStorage.joinColumns.push(joinColumn);\n                        } else {\n                            const joinColumn: JoinColumnMetadataArgs = {\n                                target: schema.target || schema.name,\n                                propertyName: relationName,\n                                name: relationSchema.joinColumn.name,\n                                referencedColumnName: relationSchema.joinColumn.referencedColumnName\n                            };\n                            metadataArgsStorage.joinColumns.push(joinColumn);\n                        }\n                    }\n\n                    // add join table\n                    if (relationSchema.joinTable) {\n                        if (typeof relationSchema.joinTable === \"boolean\") {\n                            const joinTable: JoinTableMetadataArgs = {\n                                target: schema.target || schema.name,\n                                propertyName: relationName\n                            };\n                            metadataArgsStorage.joinTables.push(joinTable);\n                        } else {\n                            const joinTable: JoinTableMetadataArgs = {\n                                target: schema.target || schema.name,\n                                propertyName: relationName,\n                                name: relationSchema.joinTable.name,\n                                joinColumns: ((relationSchema.joinTable as JoinTableOptions).joinColumn ? [(relationSchema.joinTable as JoinTableOptions).joinColumn!] : (relationSchema.joinTable as JoinTableMultipleColumnsOptions).joinColumns) as any,\n                                inverseJoinColumns: ((relationSchema.joinTable as JoinTableOptions).inverseJoinColumn ? [(relationSchema.joinTable as JoinTableOptions).inverseJoinColumn!] : (relationSchema.joinTable as JoinTableMultipleColumnsOptions).inverseJoinColumns) as any,\n                            };\n                            metadataArgsStorage.joinTables.push(joinTable);\n                        }\n                    }\n                });\n            }\n\n            // add relation metadata args from the schema\n            if (schema.indices) {\n                Object.keys(schema.indices).forEach(indexName => {\n                    const tableIndex = schema.indices![indexName];\n                    const indexAgrs: IndexMetadataArgs = {\n                        target: schema.target || schema.name,\n                        name: indexName,\n                        unique: tableIndex.unique,\n                        sparse: tableIndex.sparse,\n                        columns: tableIndex.columns\n                    };\n                    metadataArgsStorage.indices.push(indexAgrs);                        \n                });\n            }    \n\n        });\n\n        return metadataArgsStorage;\n    }\n}","import {importClassesFromDirectories, importJsonsFromDirectories} from \"../util/DirectoryExportedClassesLoader\";\nimport {OrmUtils} from \"../util/OrmUtils\";\nimport {getFromContainer} from \"../container\";\nimport {MigrationInterface} from \"../migration/MigrationInterface\";\nimport {getMetadataArgsStorage} from \"../index\";\nimport {EntityMetadataBuilder} from \"../metadata-builder/EntityMetadataBuilder\";\nimport {EntitySchemaTransformer} from \"../entity-schema/EntitySchemaTransformer\";\nimport {Connection} from \"./Connection\";\nimport {EntitySchema} from \"../entity-schema/EntitySchema\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {EntitySubscriberInterface} from \"../subscriber/EntitySubscriberInterface\";\n\n/**\n * Builds migration instances, subscriber instances and entity metadatas for the given classes.\n */\nexport class ConnectionMetadataBuilder {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Builds migration instances for the given classes or directories.\n     */\n    buildMigrations(migrations: Function[]|string[]): MigrationInterface[] {\n        const [migrationClasses, migrationDirectories] = OrmUtils.splitClassesAndStrings(migrations);\n        const allMigrationClasses = [...migrationClasses, ...importClassesFromDirectories(migrationDirectories)];\n        return allMigrationClasses.map(migrationClass => getFromContainer<MigrationInterface>(migrationClass));\n    }\n\n    /**\n     * Builds subscriber instances for the given classes or directories.\n     */\n    buildSubscribers(subscribers: Function[]|string[]): EntitySubscriberInterface<any>[] {\n        const [subscriberClasses, subscriberDirectories] = OrmUtils.splitClassesAndStrings(subscribers || []);\n        const allSubscriberClasses = [...subscriberClasses, ...importClassesFromDirectories(subscriberDirectories)];\n        return getMetadataArgsStorage()\n            .filterSubscribers(allSubscriberClasses)\n            .map(metadata => getFromContainer<EntitySubscriberInterface<any>>(metadata.target));\n    }\n\n    /**\n     * Builds entity metadatas for the given classes or directories.\n     */\n    buildEntityMetadatas(entities: Function[]|string[], schemas: EntitySchema[]|string[]): EntityMetadata[] {\n        const [entityClasses, entityDirectories] = OrmUtils.splitClassesAndStrings(entities || []);\n        const allEntityClasses = [...entityClasses, ...importClassesFromDirectories(entityDirectories)];\n        const decoratorEntityMetadatas = new EntityMetadataBuilder(this.connection, getMetadataArgsStorage()).build(allEntityClasses);\n\n        const [entitySchemaClasses, entitySchemaDirectories] = OrmUtils.splitClassesAndStrings(schemas || []);\n        const allEntitySchemaClasses = [...entitySchemaClasses, ...importJsonsFromDirectories(entitySchemaDirectories)];\n        const metadataArgsStorageFromSchema = new EntitySchemaTransformer().transform(allEntitySchemaClasses);\n        const schemaEntityMetadatas = new EntityMetadataBuilder(this.connection, metadataArgsStorageFromSchema).build();\n\n        return [...decoratorEntityMetadatas, ...schemaEntityMetadatas];\n    }\n\n}","import {LoggerOptions} from \"./LoggerOptions\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {Logger} from \"./Logger\";\n\n/**\n * Performs logging of the events in TypeORM.\n * This version of logger uses console to log events and does not use syntax highlighting.\n */\nexport class SimpleConsoleLogger implements Logger {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private options?: LoggerOptions) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Logs query and parameters used in it.\n     */\n    logQuery(query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (this.options instanceof Array && this.options.indexOf(\"query\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            console.log(\"executing query\" + \": \" + sql);\n        }\n    }\n\n    /**\n     * Logs query that is failed.\n     */\n    logQueryError(error: string, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (this.options instanceof Array && this.options.indexOf(\"error\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            console.log(`query failed: ` + sql);\n            console.log(`error:`, error);\n        }\n    }\n\n    /**\n     * Logs query that is slow.\n     */\n    logQuerySlow(time: number, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n        console.log(`query is slow: ` + sql);\n        console.log(`execution time: ` + time);\n    }\n\n    /**\n     * Logs events from the schema build process.\n     */\n    logSchemaBuild(message: string, queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"schema\") !== -1)) {\n            console.log(message);\n        }\n    }\n\n    /**\n     * Logs events from the migrations run process.\n     */\n    logMigration(message: string, queryRunner?: QueryRunner) {\n        console.log(message);\n    }\n\n    /**\n     * Perform logging using given logger, or by default to the console.\n     * Log has its own level and message.\n     */\n    log(level: \"log\"|\"info\"|\"warn\", message: any, queryRunner?: QueryRunner) {\n        switch (level) {\n            case \"log\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"log\") !== -1))\n                    console.log(message);\n                break;\n            case \"info\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"info\") !== -1))\n                    console.info(message);\n                break;\n            case \"warn\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"warn\") !== -1))\n                    console.warn(message);\n                break;\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Converts parameters to a string.\n     * Sometimes parameters can have circular objects and therefor we are handle this case too.\n     */\n    protected stringifyParams(parameters: any[]) {\n        try {\n            return JSON.stringify(parameters);\n\n        } catch (error) { // most probably circular objects in parameters\n            return parameters;\n        }\n    }\n\n}","import {LoggerOptions} from \"./LoggerOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {Logger} from \"./Logger\";\n\n/**\n * Performs logging of the events in TypeORM.\n * This version of logger uses console to log events and use syntax highlighting.\n */\nexport class AdvancedConsoleLogger implements Logger {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private options?: LoggerOptions) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Logs query and parameters used in it.\n     */\n    logQuery(query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (this.options instanceof Array && this.options.indexOf(\"query\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            PlatformTools.logInfo(\"executing query:\", PlatformTools.highlightSql(sql));\n        }\n    }\n\n    /**\n     * Logs query that is failed.\n     */\n    logQueryError(error: string, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (this.options instanceof Array && this.options.indexOf(\"error\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            PlatformTools.logError(`query failed:`, PlatformTools.highlightSql(sql));\n            PlatformTools.logError(`error:`, error);\n        }\n    }\n\n    /**\n     * Logs query that is slow.\n     */\n    logQuerySlow(time: number, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n        PlatformTools.logWarn(`query is slow:`, PlatformTools.highlightSql(sql));\n        PlatformTools.logWarn(`execution time:`, time);\n    }\n\n    /**\n     * Logs events from the schema build process.\n     */\n    logSchemaBuild(message: string, queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"schema\") !== -1)) {\n            PlatformTools.log(message);\n        }\n    }\n\n    /**\n     * Logs events from the migration run process.\n     */\n    logMigration(message: string, queryRunner?: QueryRunner) {\n        PlatformTools.log(message);\n    }\n\n    /**\n     * Perform logging using given logger, or by default to the console.\n     * Log has its own level and message.\n     */\n    log(level: \"log\"|\"info\"|\"warn\", message: any, queryRunner?: QueryRunner) {\n        switch (level) {\n            case \"log\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"log\") !== -1))\n                    console.log(message);\n                break;\n            case \"info\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"info\") !== -1))\n                    console.info(message);\n                break;\n            case \"warn\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"warn\") !== -1))\n                    console.warn(PlatformTools.warn(message));\n                break;\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Converts parameters to a string.\n     * Sometimes parameters can have circular objects and therefor we are handle this case too.\n     */\n    protected stringifyParams(parameters: any[]) {\n        try {\n            return JSON.stringify(parameters);\n\n        } catch (error) { // most probably circular objects in parameters\n            return parameters;\n        }\n    }\n\n}","import {LoggerOptions} from \"./LoggerOptions\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {Logger} from \"./Logger\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\n\n/**\n * Performs logging of the events in TypeORM.\n * This version of logger logs everything into ormlogs.log file.\n */\nexport class FileLogger implements Logger {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private options?: LoggerOptions) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Logs query and parameters used in it.\n     */\n    logQuery(query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (this.options instanceof Array && this.options.indexOf(\"query\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            this.write(\"[QUERY]: \" + sql);\n        }\n    }\n\n    /**\n     * Logs query that is failed.\n     */\n    logQueryError(error: string, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (this.options instanceof Array && this.options.indexOf(\"error\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            this.write([\n                `[FAILED QUERY]: ${sql}`,\n                `[QUERY ERROR]: ${error}`\n            ]);\n        }\n    }\n\n    /**\n     * Logs query that is slow.\n     */\n    logQuerySlow(time: number, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n        this.write(`[SLOW QUERY: ${time} ms]: ` + sql);\n    }\n\n    /**\n     * Logs events from the schema build process.\n     */\n    logSchemaBuild(message: string, queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"schema\") !== -1)) {\n            this.write(message);\n        }\n    }\n\n    /**\n     * Logs events from the migrations run process.\n     */\n    logMigration(message: string, queryRunner?: QueryRunner) {\n        this.write(message);\n    }\n\n    /**\n     * Perform logging using given logger, or by default to the console.\n     * Log has its own level and message.\n     */\n    log(level: \"log\"|\"info\"|\"warn\", message: any, queryRunner?: QueryRunner) {\n        switch (level) {\n            case \"log\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"log\") !== -1))\n                    this.write(\"[LOG]: \" + message);\n                break;\n            case \"info\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"info\") !== -1))\n                    this.write(\"[INFO]: \" + message);\n                break;\n            case \"warn\":\n                if (this.options === \"all\" || (this.options instanceof Array && this.options.indexOf(\"warn\") !== -1))\n                    this.write(\"[WARN]: \" + message);\n                break;\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Writes given strings into the log file.\n     */\n    protected write(strings: string|string[]) {\n        strings = strings instanceof Array ? strings : [strings];\n        const basePath = PlatformTools.load(\"app-root-path\").path;\n        strings = (strings as string[]).map(str => \"[\" + new Date().toISOString() + \"]\" + str);\n        PlatformTools.appendFileSync(basePath + \"/ormlogs.log\", strings.join(\"\\r\\n\") + \"\\r\\n\"); // todo: use async or implement promises?\n    }\n\n    /**\n     * Converts parameters to a string.\n     * Sometimes parameters can have circular objects and therefor we are handle this case too.\n     */\n    protected stringifyParams(parameters: any[]) {\n        try {\n            return JSON.stringify(parameters);\n\n        } catch (error) { // most probably circular objects in parameters\n            return parameters;\n        }\n    }\n\n}","import {Logger} from \"./Logger\";\nimport {QueryRunner} from \"../\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\n\n/**\n * Performs logging of the events in TypeORM via debug library.\n */\nexport class DebugLogger implements Logger {\n    private debug = PlatformTools.load(\"debug\");\n\n    private debugQueryLog = this.debug(\"typeorm:query:log\");\n    private debugQueryError = this.debug(\"typeorm:query:error\");\n    private debugQuerySlow = this.debug(\"typeorm:query:slow\");\n    private debugSchemaBuild = this.debug(\"typeorm:schema\");\n    private debugMigration = this.debug(\"typeorm:migration\");\n    \n    private debugLog = this.debug(\"typeorm:log\");\n    private debugInfo = this.debug(\"typeorm:info\");\n    private debugWarn = this.debug(\"typeorm:warn\");\n    \n    /**\n     * Logs query and parameters used in it.\n     */\n    logQuery(query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.debugQueryLog.enabled) {\n            this.debugQueryLog(PlatformTools.highlightSql(query) + \";\");\n            if (parameters && parameters.length) {\n                this.debugQueryLog(\"parameters:\", parameters);\n            }\n        }\n    }\n    \n    /**\n     * Logs query that failed.\n     */\n    logQueryError(error: string, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.debugQueryError.enabled) {\n            this.debugQueryError(PlatformTools.highlightSql(query) + \";\");\n            if (parameters && parameters.length) {\n                this.debugQueryError(\"parameters:\", parameters);\n            }\n            this.debugQueryError(\"error: \", error);\n        }\n    }\n    \n    /**\n     * Logs query that is slow.\n     */\n    logQuerySlow(time: number, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.debugQuerySlow.enabled) {\n            this.debugQuerySlow(PlatformTools.highlightSql(query) + \";\");\n            if (parameters && parameters.length) {\n                this.debugQuerySlow(\"parameters:\", parameters);\n            }\n            this.debugQuerySlow(\"execution time:\", time);\n        }\n    }\n    \n    /**\n     * Logs events from the schema build process.\n     */\n    logSchemaBuild(message: string, queryRunner?: QueryRunner) {\n        if (this.debugSchemaBuild.enabled) {\n            this.debugSchemaBuild(message);\n        }\n    }\n    \n    /**\n     * Logs events from the migration run process.\n     */\n    logMigration(message: string, queryRunner?: QueryRunner) {\n        if (this.debugMigration.enabled) {\n            this.debugMigration(message);\n        }\n    }\n    \n    /**\n     * Perform logging using given logger.\n     * Log has its own level and message.\n     */\n    log(level: \"log\" | \"info\" | \"warn\", message: any, queryRunner?: QueryRunner) {\n        switch (level) {\n            case \"log\":\n                if (this.debugLog.enabled) {\n                    this.debugLog(message);\n                }\n                break;\n            case \"info\":\n                if (this.debugInfo.enabled) {\n                    this.debugInfo(message);\n                }\n                break;\n            case \"warn\":\n                if (this.debugWarn.enabled) {\n                    this.debugWarn(message);\n                }\n                break;\n        }\n    }\n}\n","import {Logger} from \"./Logger\";\nimport {LoggerOptions} from \"./LoggerOptions\";\nimport {SimpleConsoleLogger} from \"./SimpleConsoleLogger\";\nimport {AdvancedConsoleLogger} from \"./AdvancedConsoleLogger\";\nimport {FileLogger} from \"./FileLogger\";\nimport {DebugLogger} from \"./DebugLogger\";\n\n/**\n * Helps to create logger instances.\n */\nexport class LoggerFactory {\n\n    /**\n     * Creates a new logger depend on a given connection's driver.\n     */\n    create(logger?: \"advanced-console\"|\"simple-console\"|\"file\"|\"debug\"|Logger, options?: LoggerOptions): Logger {\n        if (logger instanceof Object)\n            return logger as Logger;\n\n        if (logger) {\n            switch (logger) {\n                case \"simple-console\":\n                    return new SimpleConsoleLogger(options);\n\n                case \"file\":\n                    return new FileLogger(options);\n\n                case \"advanced-console\":\n                    return new AdvancedConsoleLogger(options);\n\n                case \"debug\":\n                    return new DebugLogger();\n            }\n        }\n\n        return new AdvancedConsoleLogger(options);\n    }\n\n}\n","import {QueryResultCacheOptions} from \"./QueryResultCacheOptions\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * Implementations of this interface provide different strategies to cache query builder results.\n */\nexport interface QueryResultCache {\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    connect(): Promise<void>;\n\n    /**\n     * Closes a connection with given cache provider.\n     */\n    disconnect(): Promise<void>;\n\n    /**\n     * Performs operations needs to be created during schema synchronization.\n     */\n    synchronize(queryRunner?: QueryRunner): Promise<void>;\n\n    /**\n     * Caches given query result.\n     */\n    getFromCache(options: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<QueryResultCacheOptions|undefined>;\n\n    /**\n     * Stores given query result in the cache.\n     */\n    storeInCache(options: QueryResultCacheOptions, savedCache: QueryResultCacheOptions|undefined, queryRunner?: QueryRunner): Promise<void>;\n\n    /**\n     * Checks if cache is expired or not.\n     */\n    isExpired(savedCache: QueryResultCacheOptions): boolean;\n\n    /**\n     * Clears everything stored in the cache.\n     */\n    clear(queryRunner?: QueryRunner): Promise<void>;\n\n    /**\n     * Removes all cached results by given identifiers from cache.\n     */\n    remove(identifiers: string[], queryRunner?: QueryRunner): Promise<void>;\n\n}","import {QueryResultCache} from \"./QueryResultCache\";\nimport {QueryResultCacheOptions} from \"./QueryResultCacheOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\nimport {Connection} from \"../connection/Connection\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * Caches query result into Redis database.\n */\nexport class RedisQueryResultCache implements QueryResultCache {\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Redis module instance loaded dynamically.\n     */\n    protected redis: any;\n\n    /**\n     * Connected redis client.\n     */\n    protected client: any;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n        this.redis = this.loadRedis();\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    async connect(): Promise<void> {\n        const cacheOptions: any = this.connection.options.cache;\n        if (cacheOptions && cacheOptions.options) {\n            this.client = this.redis.createClient(cacheOptions.options);\n        } else {\n            this.client = this.redis.createClient();\n        }\n    }\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.quit((err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n                this.client = undefined;\n            });\n        });\n    }\n\n    /**\n     * Creates table for storing cache if it does not exist yet.\n     */\n    async synchronize(queryRunner: QueryRunner): Promise<void> {\n    }\n\n    /**\n     * Caches given query result.\n     * Returns cache result if found.\n     * Returns undefined if result is not cached.\n     */\n    getFromCache(options: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<QueryResultCacheOptions|undefined> {\n        return new Promise((ok, fail) => {\n\n            if (options.identifier) {\n                this.client.get(options.identifier, (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok(JSON.parse(result));\n                });\n\n            } else if (options.query) {\n                this.client.get(options.query, (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok(JSON.parse(result));\n                });\n\n            } else {\n                ok(undefined);\n            }\n        });\n    }\n\n    /**\n     * Checks if cache is expired or not.\n     */\n    isExpired(savedCache: QueryResultCacheOptions): boolean {\n        return (savedCache.time! + savedCache.duration) < new Date().getTime();\n    }\n\n    /**\n     * Stores given query result in the cache.\n     */\n    async storeInCache(options: QueryResultCacheOptions, savedCache: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            if (options.identifier) {\n                this.client.set(options.identifier, JSON.stringify(options), (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok();\n                });\n\n            } else if (options.query) {\n                this.client.set(options.query, JSON.stringify(options), (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok();\n                });\n            }\n        });\n    }\n\n    /**\n     * Clears everything stored in the cache.\n     */\n    async clear(queryRunner?: QueryRunner): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.flushdb((err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Removes all cached results by given identifiers from cache.\n     */\n    async remove(identifiers: string[], queryRunner?: QueryRunner): Promise<void> {\n        await Promise.all(identifiers.map(identifier => {\n            return this.deleteKey(identifier);\n        }));\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes a single key from redis database.\n     */\n    protected deleteKey(key: string): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.del(key, (err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Loads redis dependency.\n     */\n    protected loadRedis(): any {\n        try {\n            return PlatformTools.load(\"redis\");\n\n        } catch (e) {\n            throw new Error(`Cannot use cache because redis is not installed. Please run \"npm i redis --save\".`);\n        }\n    }\n\n\n}","import {QueryResultCache} from \"./QueryResultCache\";\nimport {QueryResultCacheOptions} from \"./QueryResultCacheOptions\";\nimport {Table} from \"../schema-builder/schema/Table\";\nimport {TableColumn} from \"../schema-builder/schema/TableColumn\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {Connection} from \"../connection/Connection\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {MssqlParameter} from \"../driver/sqlserver/MssqlParameter\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\n\n/**\n * Caches query result into current database, into separate table called \"query-result-cache\".\n */\nexport class DbQueryResultCache implements QueryResultCache {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    async connect(): Promise<void> {\n    }\n\n    /**\n     * Disconnects with given cache provider.\n     */\n    async disconnect(): Promise<void> {\n    }\n\n    /**\n     * Creates table for storing cache if it does not exist yet.\n     */\n    async synchronize(queryRunner?: QueryRunner): Promise<void> {\n        queryRunner = this.getQueryRunner(queryRunner);\n        const driver = this.connection.driver;\n        const tableExist = await queryRunner.hasTable(\"query-result-cache\"); // todo: table name should be configurable\n        if (tableExist)\n            return;\n\n        await queryRunner.createTable(new Table(\"query-result-cache\", [ // createTableIfNotExist\n            new TableColumn({\n                name: \"id\",\n                isNullable: true,\n                isPrimary: true,\n                type: driver.normalizeType({ type: driver.mappedDataTypes.cacheId }),\n                generationStrategy: \"increment\",\n                isGenerated: true\n            }),\n            new TableColumn({\n                name: \"identifier\",\n                type: driver.normalizeType({ type: driver.mappedDataTypes.cacheIdentifier }),\n                isNullable: true\n            }),\n            new TableColumn({\n                name: \"time\",\n                type: driver.normalizeType({ type: driver.mappedDataTypes.cacheTime }),\n                isPrimary: false,\n                isNullable: false\n            }),\n            new TableColumn({\n                name: \"duration\",\n                type: driver.normalizeType({ type: driver.mappedDataTypes.cacheDuration }),\n                isPrimary: false,\n                isNullable: false\n            }),\n            new TableColumn({\n                name: \"query\",\n                type: driver.normalizeType({ type: driver.mappedDataTypes.cacheQuery }),\n                isPrimary: false,\n                isNullable: false\n            }),\n            new TableColumn({\n                name: \"result\",\n                type: driver.normalizeType({ type: driver.mappedDataTypes.cacheResult }),\n                isNullable: false\n            }),\n        ]));\n    }\n\n    /**\n     * Caches given query result.\n     * Returns cache result if found.\n     * Returns undefined if result is not cached.\n     */\n    getFromCache(options: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<QueryResultCacheOptions|undefined> {\n        queryRunner = this.getQueryRunner(queryRunner);\n        const qb = this.connection\n            .createQueryBuilder(queryRunner)\n            .select()\n            .from(\"query-result-cache\", \"cache\");\n\n        if (options.identifier) {\n            return qb\n                .where(`${qb.escape(\"cache\")}.${qb.escape(\"identifier\")} = :identifier`)\n                .setParameters({ identifier: this.connection.driver instanceof SqlServerDriver ? new MssqlParameter(options.identifier, \"nvarchar\") : options.identifier })\n                .getRawOne();\n\n        } else if (options.query) {\n            return qb\n                .where(`${qb.escape(\"cache\")}.${qb.escape(\"query\")} = :query`)\n                .setParameters({ query: this.connection.driver instanceof SqlServerDriver ? new MssqlParameter(options.query, \"nvarchar\") : options.query })\n                .getRawOne();\n        }\n\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Checks if cache is expired or not.\n     */\n    isExpired(savedCache: QueryResultCacheOptions): boolean {\n        return ((typeof savedCache.time === \"string\" ? parseInt(savedCache.time as any) : savedCache.time)! + savedCache.duration) < new Date().getTime();\n    }\n\n    /**\n     * Stores given query result in the cache.\n     */\n    async storeInCache(options: QueryResultCacheOptions, savedCache: QueryResultCacheOptions|undefined, queryRunner?: QueryRunner): Promise<void> {\n        queryRunner = this.getQueryRunner(queryRunner);\n\n        let insertedValues: ObjectLiteral = options;\n        if (this.connection.driver instanceof SqlServerDriver) { // todo: bad abstraction, re-implement this part, probably better if we create an entity metadata for cache table\n            insertedValues = {\n                identifier: new MssqlParameter(options.identifier, \"nvarchar\"),\n                time: new MssqlParameter(options.time, \"bigint\"),\n                duration: new MssqlParameter(options.duration, \"int\"),\n                query: new MssqlParameter(options.query, \"nvarchar\"),\n                result: new MssqlParameter(options.result, \"nvarchar\"),\n            };\n        }\n\n        if (savedCache && savedCache.identifier) { // if exist then update\n            await queryRunner.update(\"query-result-cache\", insertedValues, { identifier: insertedValues.identifier });\n\n        } else if (savedCache && savedCache.query) { // if exist then update\n            await queryRunner.update(\"query-result-cache\", insertedValues, { query: insertedValues.query });\n\n        } else { // otherwise insert\n            await queryRunner.insert(\"query-result-cache\", insertedValues);\n        }\n    }\n\n    /**\n     * Clears everything stored in the cache.\n     */\n    async clear(queryRunner: QueryRunner): Promise<void> {\n        return this.getQueryRunner(queryRunner).truncate(\"query-result-cache\");\n    }\n\n    /**\n     * Removes all cached results by given identifiers from cache.\n     */\n    async remove(identifiers: string[], queryRunner?: QueryRunner): Promise<void> {\n        await Promise.all(identifiers.map(identifier => {\n            return this.getQueryRunner(queryRunner).delete(\"query-result-cache\", { identifier });\n        }));\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets a query runner to work with.\n     */\n    protected getQueryRunner(queryRunner: QueryRunner|undefined): QueryRunner {\n        if (queryRunner)\n            return queryRunner;\n\n        return this.connection.createQueryRunner(\"master\");\n    }\n\n}","import {RedisQueryResultCache} from \"./RedisQueryResultCache\";\nimport {DbQueryResultCache} from \"./DbQueryResultCache\";\nimport {QueryResultCache} from \"./QueryResultCache\";\nimport {Connection} from \"../connection/Connection\";\n\n/**\n * Caches query result into Redis database.\n */\nexport class QueryResultCacheFactory {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a new query result cache based on connection options.\n     */\n    create(): QueryResultCache {\n        if (!this.connection.options.cache)\n            throw new Error(`To use cache you need to enable it in connection options by setting cache: true or providing some caching options. Example: { host: ..., username: ..., cache: true }`);\n\n        if ((this.connection.options.cache as any).type === \"redis\")\n            return new RedisQueryResultCache(this.connection);\n\n        return new DbQueryResultCache(this.connection);\n    }\n\n\n}","import {Driver} from \"../driver/Driver\";\nimport {Repository} from \"../repository/Repository\";\nimport {EntitySubscriberInterface} from \"../subscriber/EntitySubscriberInterface\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {EntityManager} from \"../entity-manager/EntityManager\";\nimport {DefaultNamingStrategy} from \"../naming-strategy/DefaultNamingStrategy\";\nimport {CannotExecuteNotConnectedError} from \"../error/CannotExecuteNotConnectedError\";\nimport {CannotConnectAlreadyConnectedError} from \"../error/CannotConnectAlreadyConnectedError\";\nimport {TreeRepository} from \"../repository/TreeRepository\";\nimport {NamingStrategyInterface} from \"../naming-strategy/NamingStrategyInterface\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {Logger} from \"../logger/Logger\";\nimport {EntityMetadataNotFound} from \"../error/EntityMetadataNotFound\";\nimport {MigrationInterface} from \"../migration/MigrationInterface\";\nimport {MigrationExecutor} from \"../migration/MigrationExecutor\";\nimport {MongoRepository} from \"../repository/MongoRepository\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {MongoEntityManager} from \"../entity-manager/MongoEntityManager\";\nimport {EntityMetadataValidator} from \"../metadata-builder/EntityMetadataValidator\";\nimport {ConnectionOptions} from \"./ConnectionOptions\";\nimport {QueryRunnerProviderAlreadyReleasedError} from \"../error/QueryRunnerProviderAlreadyReleasedError\";\nimport {EntityManagerFactory} from \"../entity-manager/EntityManagerFactory\";\nimport {DriverFactory} from \"../driver/DriverFactory\";\nimport {ConnectionMetadataBuilder} from \"./ConnectionMetadataBuilder\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\nimport {LoggerFactory} from \"../logger/LoggerFactory\";\nimport {QueryResultCacheFactory} from \"../cache/QueryResultCacheFactory\";\nimport {QueryResultCache} from \"../cache/QueryResultCache\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {MysqlDriver} from \"../driver/mysql/MysqlDriver\";\nimport {PromiseUtils} from \"../util/PromiseUtils\";\nimport {SqljsEntityManager} from \"../entity-manager/SqljsEntityManager\";\n\n/**\n * Connection is a single database ORM connection to a specific database.\n * Its not required to be a database connection, depend on database type it can create connection pool.\n * You can have multiple connections to multiple databases in your application.\n */\nexport class Connection {\n\n    // -------------------------------------------------------------------------\n    // Public Readonly Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection name.\n     */\n    readonly name: string;\n\n    /**\n     * Connection options.\n     */\n    readonly options: ConnectionOptions;\n\n    /**\n     * Indicates if connection is initialized or not.\n     */\n    readonly isConnected = false;\n\n    /**\n     * Database driver used by this connection.\n     */\n    readonly driver: Driver;\n\n    /**\n     * EntityManager of this connection.\n     */\n    readonly manager: EntityManager;\n\n    /**\n     * Naming strategy used in the connection.\n     */\n    readonly namingStrategy: NamingStrategyInterface;\n\n    /**\n     * Logger used to log orm events.\n     */\n    readonly logger: Logger;\n\n    /**\n     * Migration instances that are registered for this connection.\n     */\n    readonly migrations: MigrationInterface[] = [];\n\n    /**\n     * Entity subscriber instances that are registered for this connection.\n     */\n    readonly subscribers: EntitySubscriberInterface<any>[] = [];\n\n    /**\n     * All entity metadatas that are registered for this connection.\n     */\n    readonly entityMetadatas: EntityMetadata[] = [];\n\n    /**\n     * Used to work with query result cache.\n     */\n    readonly queryResultCache?: QueryResultCache;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(options: ConnectionOptions) {\n        this.name = options.name || \"default\";\n        this.options = options;\n        this.logger = new LoggerFactory().create(this.options.logger, this.options.logging);\n        this.driver = new DriverFactory().create(this);\n        this.manager = this.createEntityManager();\n        this.namingStrategy = options.namingStrategy || new DefaultNamingStrategy();\n        this.queryResultCache = options.cache ? new QueryResultCacheFactory(this).create() : undefined;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Accessors\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets the mongodb entity manager that allows to perform mongodb-specific repository operations\n     * with any entity in this connection.\n     *\n     * Available only in mongodb connections.\n     */\n    get mongoManager(): MongoEntityManager {\n        if (!(this.manager instanceof MongoEntityManager))\n            throw new Error(`MongoEntityManager is only available for MongoDB databases.`);\n\n        return this.manager as MongoEntityManager;\n    }\n\n    /**\n     * Gets a sql.js specific Entity Manager that allows to perform special load and save operations\n     * \n     * Available only in connection with the sqljs driver.\n     */\n    get sqljsManager(): SqljsEntityManager {\n        if (!(this.manager instanceof SqljsEntityManager))\n            throw new Error(`SqljsEntityManager is only available for Sqljs databases.`);\n\n        return this.manager as SqljsEntityManager;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     * This method should be called once on application bootstrap.\n     * This method not necessarily creates database connection (depend on database type),\n     * but it also can setup a connection pool with database to use.\n     */\n    async connect(): Promise<this> {\n        if (this.isConnected)\n            throw new CannotConnectAlreadyConnectedError(this.name);\n\n        // connect to the database via its driver\n        await this.driver.connect();\n\n        // connect to the cache-specific database if cache is enabled\n        if (this.queryResultCache)\n            await this.queryResultCache.connect();\n\n        // set connected status for the current connection\n        Object.assign(this, { isConnected: true });\n\n        try {\n\n            // build all metadatas registered in the current connection\n            this.buildMetadatas();\n\n            await this.driver.afterConnect();\n\n            // if option is set - drop schema once connection is done\n            if (this.options.dropSchema)\n                await this.dropDatabase();\n\n            // if option is set - automatically synchronize a schema\n            if (this.options.synchronize)\n                await this.synchronize();\n\n            // if option is set - automatically synchronize a schema\n            if (this.options.migrationsRun)\n                await this.runMigrations();\n\n        } catch (error) {\n\n            // if for some reason build metadata fail (for example validation error during entity metadata check)\n            // connection needs to be closed\n            await this.close();\n            throw error;\n        }\n\n        return this;\n    }\n\n    /**\n     * Closes connection with the database.\n     * Once connection is closed, you cannot use repositories or perform any operations except opening connection again.\n     */\n    async close(): Promise<void> {\n        if (!this.isConnected)\n            throw new CannotExecuteNotConnectedError(this.name);\n\n        await this.driver.disconnect();\n\n        // disconnect from the cache-specific database if cache was enabled\n        if (this.queryResultCache)\n            await this.queryResultCache.disconnect();\n\n        Object.assign(this, { isConnected: false });\n    }\n\n    /**\n     * Creates database schema for all entities registered in this connection.\n     * Can be used only after connection to the database is established.\n     *\n     * @param dropBeforeSync If set to true then it drops the database with all its tables and data\n     */\n    async synchronize(dropBeforeSync: boolean = false): Promise<void> {\n\n        if (!this.isConnected)\n            throw new CannotExecuteNotConnectedError(this.name);\n\n        if (dropBeforeSync)\n            await this.dropDatabase();\n\n        const schemaBuilder = this.driver.createSchemaBuilder();\n        await schemaBuilder.build();\n    }\n\n    /**\n     * Drops the database and all its data.\n     * Be careful with this method on production since this method will erase all your database tables and their data.\n     * Can be used only after connection to the database is established.\n     */\n    async dropDatabase(): Promise<void> {\n        const queryRunner = await this.createQueryRunner(\"master\");\n        const schemas = this.entityMetadatas\n            .filter(metadata => metadata.schema)\n            .map(metadata => metadata.schema!);\n\n        if (this.driver instanceof SqlServerDriver || this.driver instanceof MysqlDriver) {\n            const databases: string[] = this.driver.database ? [this.driver.database] : [];\n            this.entityMetadatas.forEach(metadata => {\n                if (metadata.database && databases.indexOf(metadata.database) === -1)\n                    databases.push(metadata.database);\n            });\n\n            await PromiseUtils.runInSequence(databases, database => queryRunner.clearDatabase(schemas, database));\n        } else {\n            await queryRunner.clearDatabase(schemas);\n        }\n        await queryRunner.release();\n    }\n\n    /**\n     * Runs all pending migrations.\n     * Can be used only after connection to the database is established.\n     */\n    async runMigrations(): Promise<void> {\n\n        if (!this.isConnected)\n            throw new CannotExecuteNotConnectedError(this.name);\n\n        const migrationExecutor = new MigrationExecutor(this);\n        await migrationExecutor.executePendingMigrations();\n    }\n\n    /**\n     * Reverts last executed migration.\n     * Can be used only after connection to the database is established.\n     */\n    async undoLastMigration(): Promise<void> {\n\n        if (!this.isConnected)\n            throw new CannotExecuteNotConnectedError(this.name);\n\n        const migrationExecutor = new MigrationExecutor(this);\n        await migrationExecutor.undoLastMigration();\n    }\n\n    /**\n     * Checks if entity metadata exist for the given entity class, target name or table name.\n     */\n    hasMetadata(target: Function|string): boolean {\n        return !!this.findMetadata(target);\n    }\n\n    /**\n     * Gets entity metadata for the given entity class or schema name.\n     */\n    getMetadata(target: Function|string): EntityMetadata {\n        const metadata = this.findMetadata(target);\n        if (!metadata)\n            throw new EntityMetadataNotFound(target);\n\n        return metadata;\n    }\n\n    /**\n     * Gets repository for the given entity.\n     */\n    getRepository<Entity>(target: ObjectType<Entity>|string): Repository<Entity> {\n        return this.manager.getRepository(target);\n    }\n\n    /**\n     * Gets tree repository for the given entity class or name.\n     * Only tree-type entities can have a TreeRepository, like ones decorated with @ClosureEntity decorator.\n     */\n    getTreeRepository<Entity>(target: ObjectType<Entity>|string): TreeRepository<Entity> {\n        return this.manager.getTreeRepository(target);\n    }\n\n    /**\n     * Gets mongodb-specific repository for the given entity class or name.\n     * Works only if connection is mongodb-specific.\n     */\n    getMongoRepository<Entity>(target: ObjectType<Entity>|string): MongoRepository<Entity> {\n        if (!(this.driver instanceof MongoDriver))\n            throw new Error(`You can use getMongoRepository only for MongoDB connections.`);\n\n        return this.manager.getRepository(target) as any;\n    }\n\n    /**\n     * Gets custom entity repository marked with @EntityRepository decorator.\n     */\n    getCustomRepository<T>(customRepository: ObjectType<T>): T {\n        return this.manager.getCustomRepository(customRepository);\n    }\n\n    /**\n     * Wraps given function execution (and all operations made there) into a transaction.\n     * All database operations must be executed using provided entity manager.\n     */\n    async transaction(runInTransaction: (entityManger: EntityManager) => Promise<any>): Promise<any> {\n        return this.manager.transaction(runInTransaction);\n    }\n\n    /**\n     * Executes raw SQL query and returns raw database results.\n     */\n    async query(query: string, parameters?: any[], queryRunner?: QueryRunner): Promise<any> {\n        if (this instanceof MongoEntityManager)\n            throw new Error(`Queries aren't supported by MongoDB.`);\n\n        if (queryRunner && queryRunner.isReleased)\n            throw new QueryRunnerProviderAlreadyReleasedError();\n\n        const usedQueryRunner = queryRunner || this.createQueryRunner(\"master\");\n\n        try {\n            return await usedQueryRunner.query(query, parameters);  // await is needed here because we are using finally\n\n        } finally {\n            if (!queryRunner)\n                await usedQueryRunner.release();\n        }\n    }\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    createQueryBuilder<Entity>(entityClass: ObjectType<Entity>|Function|string, alias: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity>;\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    createQueryBuilder(queryRunner?: QueryRunner): SelectQueryBuilder<any>;\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    createQueryBuilder<Entity>(entityOrRunner?: ObjectType<Entity>|Function|string|QueryRunner, alias?: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity> {\n        if (this instanceof MongoEntityManager)\n            throw new Error(`Query Builder is not supported by MongoDB.`);\n\n        if (alias) {\n            const metadata = this.getMetadata(entityOrRunner as Function|string);\n            return new SelectQueryBuilder(this, queryRunner)\n                .select(alias)\n                .from(metadata.target, alias);\n\n        } else {\n            return new SelectQueryBuilder(this, entityOrRunner as QueryRunner|undefined);\n        }\n    }\n\n    /**\n     * Creates a query runner used for perform queries on a single database connection.\n     * Using query runners you can control your queries to execute using single database connection and\n     * manually control your database transaction.\n     *\n     * Mode is used in replication mode and indicates whatever you want to connect\n     * to master database or any of slave databases.\n     * If you perform writes you must use master database,\n     * if you perform reads you can use slave databases.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\"): QueryRunner {\n        const queryRunner = this.driver.createQueryRunner(mode);\n        const manager = this.createEntityManager(queryRunner);\n        Object.assign(queryRunner, { manager: manager });\n        return queryRunner;\n    }\n\n    /**\n     * Gets entity metadata of the junction table (many-to-many table).\n     */\n    getManyToManyMetadata(entityTarget: Function|string, relationPropertyPath: string) {\n        const relationMetadata = this.getMetadata(entityTarget).findRelationWithPropertyPath(relationPropertyPath);\n        if (!relationMetadata)\n            throw new Error(`Relation \"${relationPropertyPath}\" was not found in ${entityTarget} entity.`);\n        if (!relationMetadata.isManyToMany)\n            throw new Error(`Relation \"${entityTarget}#${relationPropertyPath}\" does not have a many-to-many relationship.` +\n                `You can use this method only on many-to-many relations.`);\n\n        return relationMetadata.junctionEntityMetadata;\n    }\n    \n    /**\n     * Creates an Entity Manager for the current connection with the help of the EntityManagerFactory.\n     */\n    createEntityManager(queryRunner?: QueryRunner): EntityManager {\n        return new EntityManagerFactory().create(this, queryRunner);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Finds exist entity metadata by the given entity class, target name or table name.\n     */\n    protected findMetadata(target: Function|string): EntityMetadata|undefined {\n        return this.entityMetadatas.find(metadata => {\n            if (metadata.target === target)\n                return true;\n            if (typeof target === \"string\") {\n                if (target.indexOf(\".\") !== -1) {\n                    return metadata.tablePath === target;\n                } else {\n                    return metadata.name === target || metadata.tableName === target;\n                }\n            }\n\n            return false;\n        });\n    }\n\n    /**\n     * Builds metadatas for all registered classes inside this connection.\n     */\n    protected buildMetadatas(): void {\n\n        const connectionMetadataBuilder = new ConnectionMetadataBuilder(this);\n        const entityMetadataValidator = new EntityMetadataValidator();\n\n        // create subscribers instances if they are not disallowed from high-level (for example they can disallowed from migrations run process)\n        const subscribers = connectionMetadataBuilder.buildSubscribers(this.options.subscribers || []);\n        Object.assign(this, { subscribers: subscribers });\n\n        // build entity metadatas\n        const entityMetadatas = connectionMetadataBuilder.buildEntityMetadatas(this.options.entities || [], this.options.entitySchemas || []);\n        Object.assign(this, { entityMetadatas: entityMetadatas });\n\n        // create migration instances\n        const migrations = connectionMetadataBuilder.buildMigrations(this.options.migrations || []);\n        Object.assign(this, { migrations: migrations });\n\n        // validate all created entity metadatas to make sure user created entities are valid and correct\n        entityMetadataValidator.validateMany(this.entityMetadatas, this.driver);\n    }\n\n}","/**\n * Thrown when consumer tries to get connection that does not exist.\n */\nexport class ConnectionNotFoundError extends Error {\n    name = \"ConnectionNotFoundError\";\n\n    constructor(name: string) {\n        super();\n        this.message = `Connection \"${name}\" was not found.`;\n        this.stack = new Error().stack;\n    }\n\n}","/**\n * Thrown when consumer tries to recreate connection with the same name, but previous connection was not closed yet.\n */\nexport class AlreadyHasActiveConnectionError extends Error {\n    name = \"AlreadyHasActiveConnectionError\";\n\n    constructor(connectionName: string) {\n        super();\n        this.message = `Cannot create a new connection named \"${connectionName}\", because connection with such name ` +\n            `already exist and it now has an active connection session.`;\n        this.stack = new Error().stack;\n    }\n\n}","import {Connection} from \"./Connection\";\nimport {ConnectionNotFoundError} from \"../error/ConnectionNotFoundError\";\nimport {ConnectionOptions} from \"./ConnectionOptions\";\nimport {AlreadyHasActiveConnectionError} from \"../error/AlreadyHasActiveConnectionError\";\n\n/**\n * ConnectionManager is used to store and manage multiple orm connections.\n * It also provides useful factory methods to simplify connection creation.\n */\nexport class ConnectionManager {\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * List of connections registered in this connection manager.\n     */\n    protected readonly connections: Connection[] = [];\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Checks if connection with the given name exist in the manager.\n     */\n    has(name: string): boolean {\n        return !!this.connections.find(connection => connection.name === name);\n    }\n\n    /**\n     * Gets registered connection with the given name.\n     * If connection name is not given then it will get a default connection.\n     * Throws error if connection with the given name was not found.\n     */\n    get(name: string = \"default\"): Connection {\n        const connection = this.connections.find(connection => connection.name === name);\n        if (!connection)\n            throw new ConnectionNotFoundError(name);\n\n        return connection;\n    }\n\n    /**\n     * Creates a new connection based on the given connection options and registers it in the manager.\n     * Connection won't be established, you'll need to manually call connect method to establish connection.\n     */\n    create(options: ConnectionOptions): Connection {\n\n        // check if such connection is already registered\n        const existConnection = this.connections.find(connection => connection.name === (options.name || \"default\"));\n        if (existConnection) {\n\n            // if connection is registered and its not closed then throw an error\n            if (existConnection.isConnected)\n                throw new AlreadyHasActiveConnectionError(options.name || \"default\");\n\n            // if its registered but closed then simply remove it from the manager\n            this.connections.splice(this.connections.indexOf(existConnection), 1);\n        }\n\n        // create a new connection\n        const connection = new Connection(options);\n        this.connections.push(connection);\n        return connection;\n    }\n\n}\n","import {ConnectionOptions} from \"../ConnectionOptions\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\n\n/**\n * Reads connection options from environment variables.\n * Environment variables can have only a single connection.\n * Its strongly required to define TYPEORM_CONNECTION env variable.\n */\nexport class ConnectionOptionsEnvReader {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Reads connection options from environment variables.\n     */\n    read(): ConnectionOptions {\n        return {\n            type: PlatformTools.getEnvVariable(\"TYPEORM_CONNECTION\"),\n            url: PlatformTools.getEnvVariable(\"TYPEORM_URL\"),\n            host: PlatformTools.getEnvVariable(\"TYPEORM_HOST\"),\n            port: PlatformTools.getEnvVariable(\"TYPEORM_PORT\"),\n            username: PlatformTools.getEnvVariable(\"TYPEORM_USERNAME\"),\n            password: PlatformTools.getEnvVariable(\"TYPEORM_PASSWORD\"),\n            database: PlatformTools.getEnvVariable(\"TYPEORM_DATABASE\"),\n            sid: PlatformTools.getEnvVariable(\"TYPEORM_SID\"),\n            schema: PlatformTools.getEnvVariable(\"TYPEORM_SCHEMA\"),\n            extra: PlatformTools.getEnvVariable(\"TYPEORM_DRIVER_EXTRA\") ? JSON.parse(PlatformTools.getEnvVariable(\"TYPEORM_DRIVER_EXTRA\")) : undefined,\n            synchronize: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_SYNCHRONIZE\")),\n            dropSchema: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_DROP_SCHEMA\")),\n            migrationsRun: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS_RUN\")),\n            entities: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_ENTITIES\")),\n            migrations: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS\")),\n            subscribers: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_SUBSCRIBERS\")),\n            entitySchemas: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_ENTITY_SCHEMAS\")),\n            logging: this.transformLogging(PlatformTools.getEnvVariable(\"TYPEORM_LOGGING\")),\n            logger: PlatformTools.getEnvVariable(\"TYPEORM_LOGGER\"),\n            entityPrefix: PlatformTools.getEnvVariable(\"TYPEORM_ENTITY_PREFIX\"),\n            maxQueryExecutionTime: PlatformTools.getEnvVariable(\"TYPEORM_MAX_QUERY_EXECUTION_TIME\"),\n            cli: {\n                entitiesDir: PlatformTools.getEnvVariable(\"TYPEORM_ENTITIES_DIR\"),\n                migrationsDir: PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS_DIR\"),\n                subscribersDir: PlatformTools.getEnvVariable(\"TYPEORM_SUBSCRIBERS_DIR\"),\n            }\n        };\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Transforms logging string into real logging value connection requires.\n     */\n    protected transformLogging(logging: string): any {\n        if (logging === \"true\" || logging === \"TRUE\" || logging === \"1\")\n            return true;\n        if (logging === \"all\")\n            return \"all\";\n\n        return this.stringToArray(logging);\n    }\n\n    /**\n     * Converts a string which contains multiple elements split by comma into a string array of strings.\n     */\n    protected stringToArray(variable?: string) {\n        if (!variable)\n            return [];\n        return variable.split(\",\").map(str => str.trim());\n    }\n\n}\n","import {PlatformTools} from \"../../platform/PlatformTools\";\nimport {ConnectionOptions} from \"../ConnectionOptions\";\n\n/**\n * Reads connection options defined in the yml file.\n */\nexport class ConnectionOptionsYmlReader {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Reads connection options from given yml file.\n     */\n    read(path: string): ConnectionOptions[] {\n        const ymlParser = PlatformTools.load(\"js-yaml\");\n        const config = ymlParser.safeLoad(PlatformTools.readFileSync(path));\n        return Object.keys(config).map(connectionName => {\n            return Object.assign({ name: connectionName }, config[connectionName]);\n        });\n    }\n\n}","import {PlatformTools} from \"../../platform/PlatformTools\";\nimport {ConnectionOptions} from \"../ConnectionOptions\";\n\n/**\n * Reads connection options defined in the xml file.\n */\nexport class ConnectionOptionsXmlReader {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Reads connection options from given xml file.\n     */\n    async read(path: string): Promise<ConnectionOptions[]> {\n        const xml = await this.readXml(path);\n        return (xml.connection as any[]).map(connection => {\n            return {\n                name: connection.$.name,\n                type: connection.$.type,\n                url: connection.url ? connection.url[0] : undefined,\n                host: connection.host ? connection.host[0] : undefined,\n                port: connection.port && connection.port[0] ? parseInt(connection.port[0]) : undefined,\n                username: connection.username ? connection.username[0] : undefined,\n                password: connection.password ? connection.password[0] : undefined,\n                database: connection.database ? connection.database[0] : undefined,\n                sid: connection.sid ? connection.sid[0] : undefined,\n                extra: connection.extra ? connection.extra[0] : undefined,\n                synchronize: connection.synchronize ? connection.synchronize[0] : undefined,\n                entities: connection.entities ? connection.entities[0].entity : [],\n                subscribers: connection.subscribers ? connection.subscribers[0].entity : [],\n                entitySchemas: connection.entitySchemas ? connection.entitySchemas[0].entity : [],\n                logging: connection.logging[0] ? connection.logging[0].split(\",\") : undefined,\n            };\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Reads xml file contents and returns them in a promise.\n     */\n    protected readXml(path: string): Promise<any> {\n        const xmlParser = PlatformTools.load(\"xml2js\").parseString;\n        const xmlOptions = { trim: true, explicitRoot: false };\n        return new Promise((ok, fail) => {\n            xmlParser(PlatformTools.readFileSync(path), xmlOptions, (err: any, result: any) => err ? fail(err) : ok(result));\n        });\n    }\n\n}","import {ConnectionOptions} from \"./ConnectionOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\nimport {ConnectionOptionsEnvReader} from \"./options-reader/ConnectionOptionsEnvReader\";\nimport {ConnectionOptionsYmlReader} from \"./options-reader/ConnectionOptionsYmlReader\";\nimport {ConnectionOptionsXmlReader} from \"./options-reader/ConnectionOptionsXmlReader\";\n\n/**\n * Reads connection options from the ormconfig.\n * Can read from multiple file extensions including env, json, js, xml and yml.\n */\nexport class ConnectionOptionsReader {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected options?: {\n        /**\n         * Directory where ormconfig should be read from.\n         * By default its your application root (where your app package.json is located).\n         */\n        root?: string,\n\n        /**\n         * Filename of the ormconfig configuration. By default its equal to \"ormconfig\".\n         */\n        configName?: string\n    }) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Returns all connection options read from the ormconfig.\n     */\n    async all(): Promise<ConnectionOptions[]> {\n        return this.load();\n    }\n\n    /**\n     * Gets a connection with a given name read from ormconfig.\n     * If connection with such name would not be found then it throw error.\n     */\n    async get(name: string): Promise<ConnectionOptions> {\n        const allOptions = await this.all();\n        const targetOptions = allOptions.find(options => options.name === name || (name === \"default\" && !options.name));\n        if (!targetOptions)\n            throw new Error(`Cannot find connection ${name} because its not defined in any orm configuration files.`);\n\n        return targetOptions;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all connection options from a configuration file.\n     *\n     * todo: get in count NODE_ENV somehow\n     */\n    protected async load(): Promise<ConnectionOptions[]> {\n\n        // try to find any of following configuration formats\n        const foundFileFormat = [\"env\", \"js\", \"json\", \"yml\", \"yaml\", \"xml\"].find(format => {\n            return PlatformTools.fileExist(this.baseFilePath + \".\" + format);\n        });\n        \n        // if .env file found then load all its variables into process.env using dotenv package\n        if (foundFileFormat === \"env\") {\n            const dotenv = PlatformTools.load(\"dotenv\");\n            dotenv.config({ path: this.baseFilePath + \".env\" });\n        } else if (PlatformTools.fileExist(\".env\")) {\n            const dotenv = PlatformTools.load(\"dotenv\");\n            dotenv.config({ path: \".env\" });\n        }\n\n        // try to find connection options from any of available sources of configuration\n        let connectionOptions: ConnectionOptions|ConnectionOptions[];\n        if (PlatformTools.getEnvVariable(\"TYPEORM_CONNECTION\")) {\n            connectionOptions = new ConnectionOptionsEnvReader().read();\n\n        } else if (foundFileFormat === \"js\") {\n            connectionOptions = PlatformTools.load(this.baseFilePath + \".js\");\n\n        } else if (foundFileFormat === \"json\") {\n            connectionOptions = PlatformTools.load(this.baseFilePath + \".json\");\n\n        } else if (foundFileFormat === \"yml\") {\n            connectionOptions = new ConnectionOptionsYmlReader().read(this.baseFilePath + \".yml\");\n\n        } else if (foundFileFormat === \"yaml\") {\n            connectionOptions = new ConnectionOptionsYmlReader().read(this.baseFilePath + \".yaml\");\n\n        } else if (foundFileFormat === \"xml\") {\n            connectionOptions = await new ConnectionOptionsXmlReader().read(this.baseFilePath + \".xml\");\n\n        } else {\n            throw new Error(`No connection options were found in any of configurations file.`);\n        }\n\n        // normalize and return connection options\n        return this.normalizeConnectionOptions(connectionOptions);\n    }\n\n    /**\n     * Normalize connection options.\n     */\n    protected normalizeConnectionOptions(connectionOptions: ConnectionOptions|ConnectionOptions[]): ConnectionOptions[] {\n        if (!(connectionOptions instanceof Array))\n            connectionOptions = [connectionOptions];\n\n        connectionOptions.forEach(options => {\n\n            if (options.entities) {\n                const entities = (options.entities as any[]).map(entity => {\n                    if (typeof entity === \"string\" && entity.substr(0, 1) !== \"/\")\n                        return this.baseFilePath + \"/\" + entity;\n\n                    return entity;\n                });\n                Object.assign(connectionOptions, { entities: entities });\n            }\n            if (options.subscribers) {\n                const subscribers = (options.subscribers as any[]).map(subscriber => {\n                    if (typeof subscriber === \"string\" && subscriber.substr(0, 1) !== \"/\")\n                        return this.baseFilePath + \"/\" + subscriber;\n\n                    return subscriber;\n                });\n                Object.assign(connectionOptions, { subscribers: subscribers });\n            }\n            if (options.migrations) {\n                const migrations = (options.migrations as any[]).map(migration => {\n                    if (typeof migration === \"string\" && migration.substr(0, 1) !== \"/\")\n                        return this.baseFilePath + \"/\" + migration;\n\n                    return migration;\n                });\n                Object.assign(connectionOptions, { migrations: migrations });\n            }\n\n            // make database path file in sqlite relative to package.json\n            if (options.type === \"sqlite\") {\n                if (typeof options.database === \"string\" && options.database.substr(0, 1) !== \"/\" && options.database !== \":memory:\") {\n                    Object.assign(options, {\n                        database: this.baseDirectory + \"/\" + options.database\n                    });\n                }\n            }\n        });\n\n        return connectionOptions;\n    }\n\n    /**\n     * Gets directory where configuration file should be located and configuration file name without extension.\n     */\n    protected get baseFilePath(): string {\n        return this.baseDirectory + \"/\" + this.baseConfigName;\n    }\n\n    /**\n     * Gets directory where configuration file should be located.\n     */\n    protected get baseDirectory(): string {\n        if (this.options && this.options.root)\n            return this.options.root;\n\n        return PlatformTools.load(\"app-root-path\").path;\n    }\n\n    /**\n     * Gets configuration file name.\n     */\n    protected get baseConfigName(): string {\n        if (this.options && this.options.configName)\n            return this.options.configName;\n\n        return \"ormconfig\";\n    }\n\n}\n","import {ValueTransformer} from \"./ValueTransformer\";\n\n/**\n * Column options specific to all column types.\n */\nexport interface ColumnCommonOptions {\n\n    /**\n     * Indicates if column is always selected by QueryBuilder and find operations.\n     * Default value is \"true\".\n     */\n    select?: boolean;\n\n    /**\n     * Column name in the database.\n     */\n    name?: string;\n\n    /**\n     * Indicates if this column is a primary key.\n     * Same can be achieved when @PrimaryColumn decorator is used.\n     */\n    primary?: boolean;\n\n    /**\n     * Specifies if this column will use auto increment (sequence, generated identity).\n     * Note that only one column in entity can be marked as generated, and it must be a primary column.\n     */\n    generated?: boolean;\n\n    /**\n     * Specifies if column's value must be unique or not.\n     */\n    unique?: boolean;\n\n    /**\n     * Indicates if column's value can be set to NULL.\n     */\n    nullable?: boolean;\n\n    /**\n     * Default database value.\n     */\n    default?: any;\n\n    /**\n     * Column comment. Not supported by all database types.\n     */\n    comment?: string;\n\n    /**\n     * Indicates if this column is an array.\n     * Can be simply set to true or array length can be specified.\n     * Supported only by postgres.\n     */\n    isArray?: boolean;\n\n    /**\n     * Specifies a value transformer that is to be used to (un)marshal\n     * this column when reading or writing to the database.\n     */\n    transformer?: ValueTransformer;\n\n}\n","/**\n * Options for columns that can define a length of the column type.\n */\nexport interface ColumnWithLengthOptions {\n\n    /**\n     * Column type's length.\n     * For example type = \"varchar\" and length = \"100\" means ORM will create a column with type varchar(100).\n     */\n    length?: string|number;\n\n}\n","/**\n * Options for numeric column types where user can specify scale and precision.\n */\nexport interface ColumnNumericOptions {\n\n    /**\n     * The precision for a decimal (exact numeric) column (applies only for decimal column), which is the maximum\n     * number of digits that are stored for the values.\n     */\n    precision?: number;\n\n    /**\n     * The scale for a decimal (exact numeric) column (applies only for decimal column), which represents the number\n     * of digits to the right of the decimal point and must not be greater than precision.\n     */\n    scale?: number;\n\n}\n","/**\n * Column options for enum-typed columns.\n */\nexport interface ColumnEnumOptions {\n\n    /**\n     * Array of possible enumerated values.\n     */\n    enum?: any[]|Object;\n\n}","/**\n * Column options specific to all column types.\n */\nexport interface ColumnEmbeddedOptions {\n\n    /**\n     * Embedded column prefix.\n     */\n    prefix?: string;\n\n}\n","import {ColumnOptions} from \"../options/ColumnOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {\n    ColumnType,\n    SimpleColumnType,\n    WithLengthColumnType,\n    WithPrecisionColumnType\n} from \"../../driver/types/ColumnTypes\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\nimport {ColumnCommonOptions} from \"../options/ColumnCommonOptions\";\nimport {ColumnWithLengthOptions} from \"../options/ColumnWithLengthOptions\";\nimport {ColumnNumericOptions} from \"../options/ColumnNumericOptions\";\nimport {ColumnEnumOptions} from \"../options/ColumnEnumOptions\";\nimport {ColumnEmbeddedOptions} from \"../options/ColumnEmbeddedOptions\";\nimport {EmbeddedMetadataArgs} from \"../../metadata-args/EmbeddedMetadataArgs\";\n\n/**\n * Column decorator is used to mark a specific class property as a table column. Only properties decorated with this\n * decorator will be persisted to the database when entity be saved.\n */\nexport function Column(): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n */\nexport function Column(options: ColumnOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n */\nexport function Column(type: SimpleColumnType, options?: ColumnCommonOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n */\nexport function Column(type: WithLengthColumnType, options?: ColumnCommonOptions & ColumnWithLengthOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n */\nexport function Column(type: WithPrecisionColumnType, options?: ColumnCommonOptions & ColumnNumericOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n */\nexport function Column(type: \"enum\", options?: ColumnCommonOptions & ColumnEnumOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n *\n * Property in entity can be marked as Embedded, and on persist all columns from the embedded are mapped to the\n * single table of the entity where Embedded is used. And on hydration all columns which supposed to be in the\n * embedded will be mapped to it from the single table.\n */\nexport function Column(type: (type?: any) => Function, options?: ColumnEmbeddedOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n */\nexport function Column(typeOrOptions?: ((type?: any) => Function)|ColumnType|(ColumnOptions&ColumnEmbeddedOptions), options?: (ColumnOptions&ColumnEmbeddedOptions)): Function {\n    let type: ColumnType|undefined;\n    if (typeof typeOrOptions === \"string\" || typeOrOptions instanceof Function) {\n        type = <ColumnType> typeOrOptions;\n\n    } else if (typeOrOptions) {\n        options = <ColumnOptions> typeOrOptions;\n        type = typeOrOptions.type;\n    }\n    return function (object: Object, propertyName: string) {\n\n        if (typeOrOptions instanceof Function) {\n\n            const reflectMetadataType = Reflect && (Reflect as any).getMetadata ? (Reflect as any).getMetadata(\"design:type\", object, propertyName) : undefined;\n            const isArray = reflectMetadataType === Array || (options && (options.isArray === true || options.array === true)) ? true : false;\n\n            const args: EmbeddedMetadataArgs = {\n                target: object.constructor,\n                propertyName: propertyName,\n                isArray: isArray,\n                prefix: options && options.prefix !== undefined ? options.prefix : undefined,\n                type: typeOrOptions as (type?: any) => Function\n            };\n            getMetadataArgsStorage().embeddeds.push(args);\n\n        } else {\n            // if type is not given implicitly then try to guess it\n            if (!type) {\n                const reflectMetadataType = Reflect && (Reflect as any).getMetadata ? (Reflect as any).getMetadata(\"design:type\", object, propertyName) : undefined;\n                if (reflectMetadataType)\n                    type = reflectMetadataType; // todo: need to determine later on driver level\n            }\n\n            // if column options are not given then create a new empty options\n            if (!options) options = {} as ColumnOptions;\n\n            // check if there is no type in column options then set type from first function argument, or guessed one\n            if (!options.type && type)\n                options = Object.assign({ type: type } as ColumnOptions, options);\n\n            // create and register a new column metadata\n            const args: ColumnMetadataArgs = {\n                target: object.constructor,\n                propertyName: propertyName,\n                mode: \"regular\",\n                options: options\n            };\n            getMetadataArgsStorage().columns.push(args);\n        }\n\n    };\n}\n","import {ColumnOptions} from \"../options/ColumnOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\n\n/**\n * This column will store a creation date of the inserted object.\n * Creation date is generated and inserted only once,\n * at the first time when you create an object, the value is inserted into the table, and is never touched again.\n */\nexport function CreateDateColumn(options?: ColumnOptions): Function {\n    return function (object: Object, propertyName: string) {\n\n        // const reflectedType = ColumnTypes.typeToString((Reflect as any).getMetadata(\"design:type\", object, propertyName));\n\n        // if column options are not given then create a new empty options\n        if (!options) options = {} as ColumnOptions;\n\n        // implicitly set a type, because this column's type cannot be anything else except date\n        // options = Object.assign({ type: Date } as ColumnOptions, options);\n\n        // create and register a new column metadata\n        const args: ColumnMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            mode: \"createDate\",\n            options: options\n        };\n        getMetadataArgsStorage().columns.push(args);\n    };\n}\n","import {ColumnOptions} from \"../options/ColumnOptions\";\nimport {ColumnType} from \"../../driver/types/ColumnTypes\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\n\n/**\n * DiscriminatorColumn is a special type column used on entity class (not entity property)\n * and creates a special column which will contain an entity type.\n * This type is required for entities which use single table inheritance pattern.\n */\nexport function DiscriminatorColumn(discriminatorOptions: { name: string, type: ColumnType }): Function {\n    return function (target: Function) {\n\n        // if column options are not given then create a new empty options\n        const options: ColumnOptions = {\n            name: discriminatorOptions.name,\n            type: discriminatorOptions.type\n        };\n\n        // create and register a new column metadata\n        const args: ColumnMetadataArgs = {\n            target: target,\n            mode: \"discriminator\",\n            propertyName: discriminatorOptions.name,\n            options: options\n        };\n        getMetadataArgsStorage().columns.push(args);\n    };\n}\n\n","import {PrimaryGeneratedColumnType} from \"../../driver/types/ColumnTypes\";\n\n/**\n * Describes all column's options.\n */\nexport interface PrimaryGeneratedColumnNumericOptions {\n\n    /**\n     * Column type. Must be one of the value from the ColumnTypes class.\n     */\n    type?: PrimaryGeneratedColumnType;\n\n    /**\n     * Column name in the database.\n     */\n    name?: string;\n\n    /**\n     * Column comment. Not supported by all database types.\n     */\n    comment?: string;\n\n}\n","/**\n * Describes all column's options.\n */\nexport interface PrimaryGeneratedColumnUUIDOptions {\n\n    /**\n     * Column name in the database.\n     */\n    name?: string;\n\n    /**\n     * Column comment. Not supported by all database types.\n     */\n    comment?: string;\n\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\nimport {PrimaryGeneratedColumnNumericOptions} from \"../options/PrimaryGeneratedColumnNumericOptions\";\nimport {ColumnOptions} from \"../options/ColumnOptions\";\nimport {PrimaryGeneratedColumnUUIDOptions} from \"../options/PrimaryGeneratedColumnUUIDOptions\";\nimport {GeneratedMetadataArgs} from \"../../metadata-args/GeneratedMetadataArgs\";\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n */\nexport function PrimaryGeneratedColumn(): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n */\nexport function PrimaryGeneratedColumn(options: PrimaryGeneratedColumnNumericOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n */\nexport function PrimaryGeneratedColumn(strategy: \"increment\", options?: PrimaryGeneratedColumnNumericOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n */\nexport function PrimaryGeneratedColumn(strategy: \"uuid\", options?: PrimaryGeneratedColumnUUIDOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n * This column creates an integer PRIMARY COLUMN with generated set to true.\n */\nexport function PrimaryGeneratedColumn(strategyOrOptions?: \"increment\"|\"uuid\"|PrimaryGeneratedColumnNumericOptions|PrimaryGeneratedColumnUUIDOptions,\n                                       maybeOptions?: PrimaryGeneratedColumnNumericOptions|PrimaryGeneratedColumnUUIDOptions): Function {\n    const options: ColumnOptions = {};\n    let strategy: \"increment\"|\"uuid\";\n\n    if (strategyOrOptions) {\n        if (typeof strategyOrOptions === \"string\")\n            strategy = strategyOrOptions as \"increment\"|\"uuid\";\n\n        if (strategyOrOptions instanceof Object) {\n            strategy = \"increment\";\n            Object.assign(options, strategyOrOptions);\n        }\n    } else {\n        strategy = \"increment\";\n    }\n\n    if (maybeOptions instanceof Object)\n        Object.assign(options, maybeOptions);\n\n    return function (object: Object, propertyName: string) {\n\n        // check if there is no type in column options then set the int type - by default for auto generated column\n        if (!options.type) {\n            if (strategy === \"increment\") {\n                Object.assign(options, { type: Number } as ColumnOptions);\n            } else {\n                Object.assign(options, { type: \"uuid\" } as ColumnOptions);\n            }\n        }\n\n        // implicitly set a primary and generated to column options\n        Object.assign(options, { primary: true } as ColumnOptions);\n\n        // create and register a new column metadata\n        const columnArgs: ColumnMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            mode: \"regular\",\n            options: options\n        };\n        getMetadataArgsStorage().columns.push(columnArgs);\n\n        const generationArgs: GeneratedMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            strategy: strategy\n        };\n        getMetadataArgsStorage().generations.push(generationArgs);\n    };\n}\n\n","export class ColumnTypeUndefinedError extends Error {\n    name = \"ColumnTypeUndefinedError\";\n\n    constructor(object: Object, propertyName: string) {\n        super();\n        this.message = `Column type for ${(<any>object.constructor).name}#${propertyName} is not defined or cannot be guessed. ` +\n            `Try to explicitly provide a column type to the @Column decorator.`;\n    }\n\n}","export class PrimaryColumnCannotBeNullableError extends Error {\n    name = \"PrimaryColumnCannotBeNullableError\";\n\n    constructor(object: Object, propertyName: string) {\n        super();\n        this.message = `Primary column ${(<any>object.constructor).name}#${propertyName} cannot be nullable. ` +\n            `Its not allowed for primary keys. Try to remove nullable option.`;\n    }\n\n}","import {ColumnOptions} from \"../options/ColumnOptions\";\nimport {ColumnType} from \"../../driver/types/ColumnTypes\";\nimport {ColumnTypeUndefinedError} from \"../../error/ColumnTypeUndefinedError\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {PrimaryColumnCannotBeNullableError} from \"../../error/PrimaryColumnCannotBeNullableError\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n * Primary columns also creates a PRIMARY KEY for this column in a db.\n */\nexport function PrimaryColumn(options?: ColumnOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n * Primary columns also creates a PRIMARY KEY for this column in a db.\n */\nexport function PrimaryColumn(type?: ColumnType, options?: ColumnOptions): Function;\n\n/**\n * Column decorator is used to mark a specific class property as a table column.\n * Only properties decorated with this decorator will be persisted to the database when entity be saved.\n * Primary columns also creates a PRIMARY KEY for this column in a db.\n */\nexport function PrimaryColumn(typeOrOptions?: ColumnType|ColumnOptions, options?: ColumnOptions): Function {\n    let type: ColumnType|undefined;\n    if (typeof typeOrOptions === \"string\") {\n        type = <ColumnType> typeOrOptions;\n    } else {\n        options = <ColumnOptions> typeOrOptions;\n    }\n    return function (object: Object, propertyName: string) {\n\n        // const reflectedType = ColumnTypes.typeToString((Reflect as any).getMetadata(\"design:type\", object, propertyName));\n\n        // if type is not given implicitly then try to guess it\n        if (!type) {\n            const reflectMetadataType = Reflect && (Reflect as any).getMetadata ? (Reflect as any).getMetadata(\"design:type\", object, propertyName) : undefined;\n            if (reflectMetadataType)\n                type = reflectMetadataType;\n        }\n\n        // if column options are not given then create a new empty options\n        if (!options) options = {} as ColumnOptions;\n\n        // check if there is no type in column options then set type from first function argument, or guessed one\n        if (!options.type && type)\n            options = Object.assign({ type: type } as ColumnOptions, options);\n\n        // if we still don't have a type then we need to give error to user that type is required\n        if (!options.type)\n            throw new ColumnTypeUndefinedError(object, propertyName);\n\n        // check if column is not nullable, because we cannot allow a primary key to be nullable\n        if (options.nullable)\n            throw new PrimaryColumnCannotBeNullableError(object, propertyName);\n\n        // implicitly set a primary to column options\n        options = Object.assign({ primary: true } as ColumnOptions, options);\n\n        // create and register a new column metadata\n        const args: ColumnMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            mode: \"regular\",\n            options: options\n        };\n        getMetadataArgsStorage().columns.push(args);\n    };\n}\n\n","import {ColumnOptions} from \"../options/ColumnOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\n\n/**\n * This column will store an update date of the updated object.\n * This date is being updated each time you persist the object.\n */\nexport function UpdateDateColumn(options?: ColumnOptions): Function {\n    return function (object: Object, propertyName: string) {\n\n        const args: ColumnMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            mode: \"updateDate\",\n            options: options ? options : {}\n        };\n        getMetadataArgsStorage().columns.push(args);\n    };\n}\n\n","import {ColumnOptions} from \"../options/ColumnOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\n\n/**\n * This column will store a number - version of the entity.\n * Every time your entity will be persisted, this number will be increased by one -\n * so you can organize visioning and update strategies of your entity.\n */\nexport function VersionColumn(options?: ColumnOptions): Function {\n    return function (object: Object, propertyName: string) {\n\n        // if column options are not given then create a new empty options\n        if (!options) options = {} as ColumnOptions;\n\n        // create and register a new column metadata\n        const args: ColumnMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            mode: \"version\",\n            options: options\n        };\n        getMetadataArgsStorage().columns.push(args);\n    };\n}\n\n","import {ColumnOptions} from \"../options/ColumnOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\n\n/**\n * Special type of column that is available only for MongoDB database.\n * Marks your entity's column to be an object id.\n */\nexport function ObjectIdColumn(options?: ColumnOptions): Function {\n    return function (object: Object, propertyName: string) {\n\n        // if column options are not given then create a new empty options\n        if (!options) options = {} as ColumnOptions;\n        options = Object.assign(options, {\n            primary: true,\n            name: options.name ? options.name : \"_id\"\n        });\n\n        // create and register a new column metadata\n        const args: ColumnMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            mode: \"objectId\",\n            options: options\n        };\n        getMetadataArgsStorage().columns.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {EventListenerTypes} from \"../../metadata/types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../../metadata-args/EntityListenerMetadataArgs\";\n\n/**\n * Calls a method on which this decorator is applied after this entity insertion.\n */\nexport function AfterInsert() {\n    return function (object: Object, propertyName: string) {\n\n        const args: EntityListenerMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            type: EventListenerTypes.AFTER_INSERT\n        };\n        getMetadataArgsStorage().entityListeners.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {EventListenerTypes} from \"../../metadata/types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../../metadata-args/EntityListenerMetadataArgs\";\n\n/**\n * Calls a method on which this decorator is applied after entity is loaded.\n */\nexport function AfterLoad() {\n    return function (object: Object, propertyName: string) {\n        const args: EntityListenerMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            type: EventListenerTypes.AFTER_LOAD\n        };\n        getMetadataArgsStorage().entityListeners.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {EventListenerTypes} from \"../../metadata/types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../../metadata-args/EntityListenerMetadataArgs\";\n\n/**\n * Calls a method on which this decorator is applied after this entity removal.\n */\nexport function AfterRemove() {\n    return function (object: Object, propertyName: string) {\n        const args: EntityListenerMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            type: EventListenerTypes.AFTER_REMOVE\n        };\n        getMetadataArgsStorage().entityListeners.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {EventListenerTypes} from \"../../metadata/types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../../metadata-args/EntityListenerMetadataArgs\";\n\n/**\n * Calls a method on which this decorator is applied after this entity update.\n */\nexport function AfterUpdate() {\n    return function (object: Object, propertyName: string) {\n        const args: EntityListenerMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            type: EventListenerTypes.AFTER_UPDATE\n        };\n        getMetadataArgsStorage().entityListeners.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {EventListenerTypes} from \"../../metadata/types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../../metadata-args/EntityListenerMetadataArgs\";\n\n/**\n * Calls a method on which this decorator is applied before this entity insertion.\n */\nexport function BeforeInsert() {\n    return function (object: Object, propertyName: string) {\n        const args: EntityListenerMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            type: EventListenerTypes.BEFORE_INSERT\n        };\n        getMetadataArgsStorage().entityListeners.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {EventListenerTypes} from \"../../metadata/types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../../metadata-args/EntityListenerMetadataArgs\";\n\n/**\n * Calls a method on which this decorator is applied before this entity removal.\n */\nexport function BeforeRemove() {\n    return function (object: Object, propertyName: string) {\n        const args: EntityListenerMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            type: EventListenerTypes.BEFORE_REMOVE\n        };\n        getMetadataArgsStorage().entityListeners.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {EventListenerTypes} from \"../../metadata/types/EventListenerTypes\";\nimport {EntityListenerMetadataArgs} from \"../../metadata-args/EntityListenerMetadataArgs\";\n\n/**\n * Calls a method on which this decorator is applied before this entity update.\n */\nexport function BeforeUpdate() {\n    return function (object: Object, propertyName: string) {\n        const args: EntityListenerMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            type: EventListenerTypes.BEFORE_UPDATE\n        };\n        getMetadataArgsStorage().entityListeners.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {EntitySubscriberMetadataArgs} from \"../../metadata-args/EntitySubscriberMetadataArgs\";\n\n/**\n * Classes decorated with this decorator will listen to ORM events and their methods will be triggered when event\n * occurs. Those classes must implement EventSubscriberInterface interface.\n */\nexport function EventSubscriber() {\n    return function (target: Function) {\n        const args: EntitySubscriberMetadataArgs = {\n            target: target\n        };\n        getMetadataArgsStorage().entitySubscribers.push(args);\n    };\n}","/**\n * Describes all composite index's options.\n */\nexport interface IndexOptions {\n\n    /**\n     * Indicates if this composite index must be unique or not.\n     */\n    unique?: boolean;\n\n    /**\n     * If true, the index only references documents with the specified field.\n     * These indexes use less space but behave differently in some situations (particularly sorts).\n     * This option is only supported for mongodb database.\n     */\n    sparse?: boolean;\n\n}","import {OrderByCondition} from \"../../find-options/OrderByCondition\";\n\n/**\n * Describes all entity's options.\n */\nexport interface EntityOptions {\n\n    /**\n     * Specifies a default order by used for queries from this table when no explicit order by is specified.\n     */\n    orderBy?: OrderByCondition|((object: any) => OrderByCondition|any);\n\n    /**\n     * Table's database engine type (like \"InnoDB\", \"MyISAM\", etc).\n     * It is used only during table creation.\n     * If you update this value and table is already created, it will not change table's engine type.\n     * Note that not all databases support this option.\n     */\n    engine?: string;\n\n    /**\n     * Database name. Used in Mysql and Sql Server.\n     */\n    database?: string;\n\n    /**\n     * Schema name. Used in Postgres and Sql Server.\n     */\n    schema?: string;\n\n    /**\n     * Specifies if this table will be skipped during schema synchronization.\n     */\n    skipSync?: boolean;\n\n    /**\n     * Table name\n     */\n    name ?: string;\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {RelationCountMetadataArgs} from \"../../metadata-args/RelationCountMetadataArgs\";\nimport {SelectQueryBuilder} from \"../../query-builder/SelectQueryBuilder\";\n\n/**\n * Holds a number of children in the closure table of the column.\n */\nexport function RelationCount<T>(relation: string|((object: T) => any), alias?: string, queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): Function {\n    return function (object: Object, propertyName: string) {\n        const args: RelationCountMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            relation: relation,\n            alias: alias,\n            queryBuilderFactory: queryBuilderFactory\n        };\n        getMetadataArgsStorage().relationCounts.push(args);\n    };\n}\n\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {JoinColumnOptions} from \"../options/JoinColumnOptions\";\nimport {JoinColumnMetadataArgs} from \"../../metadata-args/JoinColumnMetadataArgs\";\n\n/**\n * JoinColumn decorator used on one-to-one relations to specify owner side of relationship.\n * It also can be used on both one-to-one and many-to-one relations to specify custom column name\n * or custom referenced column.\n */\nexport function JoinColumn(): Function;\n\n/**\n * JoinColumn decorator used on one-to-one relations to specify owner side of relationship.\n * It also can be used on both one-to-one and many-to-one relations to specify custom column name\n * or custom referenced column.\n */\nexport function JoinColumn(options: JoinColumnOptions): Function;\n\n/**\n * JoinColumn decorator used on one-to-one relations to specify owner side of relationship.\n * It also can be used on both one-to-one and many-to-one relations to specify custom column name\n * or custom referenced column.\n */\nexport function JoinColumn(options: JoinColumnOptions[]): Function;\n\n/**\n * JoinColumn decorator used on one-to-one relations to specify owner side of relationship.\n * It also can be used on both one-to-one and many-to-one relations to specify custom column name\n * or custom referenced column.\n */\nexport function JoinColumn(optionsOrOptionsArray?: JoinColumnOptions|JoinColumnOptions[]): Function {\n    return function (object: Object, propertyName: string) {\n        const options = optionsOrOptionsArray instanceof Array ? optionsOrOptionsArray : [optionsOrOptionsArray || {}];\n        options.forEach(options => {\n            const args: JoinColumnMetadataArgs = {\n                target: object.constructor,\n                propertyName: propertyName,\n                name: options.name,\n                referencedColumnName: options.referencedColumnName\n            };\n            getMetadataArgsStorage().joinColumns.push(args);\n        });\n    };\n}\n\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {JoinTableOptions} from \"../options/JoinTableOptions\";\nimport {JoinTableMetadataArgs} from \"../../metadata-args/JoinTableMetadataArgs\";\nimport {JoinTableMultipleColumnsOptions} from \"../options/JoinTableMuplipleColumnsOptions\";\n\n/**\n * JoinTable decorator is used in many-to-many relationship to specify owner side of relationship.\n * Its also used to set a custom junction table's name, column names and referenced columns.\n */\nexport function JoinTable(): Function;\n\n/**\n * JoinTable decorator is used in many-to-many relationship to specify owner side of relationship.\n * Its also used to set a custom junction table's name, column names and referenced columns.\n */\nexport function JoinTable(options: JoinTableOptions): Function;\n\n/**\n * JoinTable decorator is used in many-to-many relationship to specify owner side of relationship.\n * Its also used to set a custom junction table's name, column names and referenced columns.\n */\nexport function JoinTable(options: JoinTableMultipleColumnsOptions): Function;\n\n/**\n * JoinTable decorator is used in many-to-many relationship to specify owner side of relationship.\n * Its also used to set a custom junction table's name, column names and referenced columns.\n */\nexport function JoinTable(options?: JoinTableOptions|JoinTableMultipleColumnsOptions): Function {\n    return function (object: Object, propertyName: string) {\n        options = options || {} as JoinTableOptions|JoinTableMultipleColumnsOptions;\n        const args: JoinTableMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            name: options.name,\n            joinColumns: (options && (options as JoinTableOptions).joinColumn ? [(options as JoinTableOptions).joinColumn!] : (options as JoinTableMultipleColumnsOptions).joinColumns) as any,\n            inverseJoinColumns: (options && (options as JoinTableOptions).inverseJoinColumn ? [(options as JoinTableOptions).inverseJoinColumn!] : (options as JoinTableMultipleColumnsOptions).inverseJoinColumns) as any,\n            schema: options && options.schema ? options.schema : undefined,\n            database: options && options.database ? options.database : undefined,\n        };\n        getMetadataArgsStorage().joinTables.push(args);\n    };\n}\n\n","import {RelationOptions} from \"../options/RelationOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ObjectType} from \"../../common/ObjectType\";\nimport {RelationMetadataArgs} from \"../../metadata-args/RelationMetadataArgs\";\n\n/**\n * Many-to-many is a type of relationship when Entity1 can have multiple instances of Entity2, and Entity2 can have\n * multiple instances of Entity1. To achieve it, this type of relation creates a junction table, where it storage\n * entity1 and entity2 ids. This is owner side of the relationship.\n */\nexport function ManyToMany<T>(typeFunction: (type?: any) => ObjectType<T>, options?: { cascadeInsert?: boolean, cascadeUpdate?: boolean, lazy?: boolean, eager?: boolean }): Function;\n\n/**\n * Many-to-many is a type of relationship when Entity1 can have multiple instances of Entity2, and Entity2 can have\n * multiple instances of Entity1. To achieve it, this type of relation creates a junction table, where it storage\n * entity1 and entity2 ids. This is owner side of the relationship.\n */\nexport function ManyToMany<T>(typeFunction: (type?: any) => ObjectType<T>,\n                              inverseSide?: string|((object: T) => any),\n                              options?: { cascadeInsert?: boolean, cascadeUpdate?: boolean, lazy?: boolean, eager?: boolean }): Function;\n\n/**\n * Many-to-many is a type of relationship when Entity1 can have multiple instances of Entity2, and Entity2 can have\n * multiple instances of Entity1. To achieve it, this type of relation creates a junction table, where it storage\n * entity1 and entity2 ids. This is owner side of the relationship.\n */\nexport function ManyToMany<T>(typeFunction: (type?: any) => ObjectType<T>,\n                              inverseSideOrOptions?: string|((object: T) => any)|{ cascadeInsert?: boolean, cascadeUpdate?: boolean, lazy?: boolean, eager?: boolean },\n                              options?: { cascadeInsert?: boolean, cascadeUpdate?: boolean, lazy?: boolean, eager?: boolean }): Function {\n    let inverseSideProperty: string|((object: T) => any);\n    if (typeof inverseSideOrOptions === \"object\") {\n        options = <RelationOptions> inverseSideOrOptions;\n    } else {\n        inverseSideProperty = <string|((object: T) => any)> inverseSideOrOptions;\n    }\n\n    return function (object: Object, propertyName: string) {\n        if (!options) options = {} as RelationOptions;\n\n        // now try to determine it its lazy relation\n        let isLazy = options && options.lazy === true ? true : false;\n        if (!isLazy && Reflect && (Reflect as any).getMetadata) { // automatic determination\n            const reflectedType = (Reflect as any).getMetadata(\"design:type\", object, propertyName);\n            if (reflectedType && typeof reflectedType.name === \"string\" && reflectedType.name.toLowerCase() === \"promise\")\n                isLazy = true;\n        }\n\n        const args: RelationMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            relationType: \"many-to-many\",\n            isLazy: isLazy,\n            type: typeFunction,\n            inverseSideProperty: inverseSideProperty,\n            options: options\n        };\n        getMetadataArgsStorage().relations.push(args);\n    };\n}\n\n","import {RelationOptions} from \"../options/RelationOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ObjectType} from \"../../common/ObjectType\";\nimport {RelationMetadataArgs} from \"../../metadata-args/RelationMetadataArgs\";\n\n/**\n * Many-to-one relation allows to create type of relation when Entity1 can have single instance of Entity2, but\n * Entity2 can have a multiple instances of Entity1. Entity1 is an owner of the relationship, and storages Entity2 id\n * on its own side.\n */\nexport function ManyToOne<T>(typeFunction: (type?: any) => ObjectType<T>, options?: RelationOptions): Function;\n\n/**\n * Many-to-one relation allows to create type of relation when Entity1 can have single instance of Entity2, but\n * Entity2 can have a multiple instances of Entity1. Entity1 is an owner of the relationship, and storages Entity2 id\n * on its own side.\n */\nexport function ManyToOne<T>(typeFunction: (type?: any) => ObjectType<T>,\n                             inverseSide?: string|((object: T) => any),\n                             options?: RelationOptions): Function;\n\n/**\n * Many-to-one relation allows to create type of relation when Entity1 can have single instance of Entity2, but\n * Entity2 can have a multiple instances of Entity1. Entity1 is an owner of the relationship, and storages Entity2 id\n * on its own side.\n */\nexport function ManyToOne<T>(typeFunction: (type?: any) => ObjectType<T>,\n                             inverseSideOrOptions?: string|((object: T) => any)|RelationOptions,\n                             options?: RelationOptions): Function {\n    let inverseSideProperty: string|((object: T) => any);\n    if (typeof inverseSideOrOptions === \"object\") {\n        options = <RelationOptions> inverseSideOrOptions;\n    } else {\n        inverseSideProperty = <string|((object: T) => any)> inverseSideOrOptions;\n    }\n\n    return function (object: Object, propertyName: string) {\n        if (!options) options = {} as RelationOptions;\n\n        // now try to determine it its lazy relation\n        let isLazy = options && options.lazy === true ? true : false;\n        if (!isLazy && Reflect && (Reflect as any).getMetadata) { // automatic determination\n            const reflectedType = (Reflect as any).getMetadata(\"design:type\", object, propertyName);\n            if (reflectedType && typeof reflectedType.name === \"string\" && reflectedType.name.toLowerCase() === \"promise\")\n                isLazy = true;\n        }\n\n        const args: RelationMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            relationType: \"many-to-one\",\n            isLazy: isLazy,\n            type: typeFunction,\n            inverseSideProperty: inverseSideProperty,\n            options: options\n        };\n        getMetadataArgsStorage().relations.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {ObjectType} from \"../../common/ObjectType\";\nimport {RelationMetadataArgs} from \"../../metadata-args/RelationMetadataArgs\";\nimport {RelationOptions} from \"../options/RelationOptions\";\n\n// todo: make decorators which use inverse side string separate\n\n/**\n * One-to-many relation allows to create type of relation when Entity2 can have multiple instances of Entity1.\n * Entity1 have only one Entity2. Entity1 is an owner of the relationship, and storages Entity2 id on its own side.\n */\nexport function OneToMany<T>(typeFunction: (type?: any) => ObjectType<T>, inverseSide: string|((object: T) => any), options?: { cascadeInsert?: boolean, cascadeUpdate?: boolean, lazy?: boolean, eager?: boolean }): Function {\n    return function (object: Object, propertyName: string) {\n        if (!options) options = {} as RelationOptions;\n\n        // now try to determine it its lazy relation\n        let isLazy = options && options.lazy === true ? true : false;\n        if (!isLazy && Reflect && (Reflect as any).getMetadata) { // automatic determination\n            const reflectedType = (Reflect as any).getMetadata(\"design:type\", object, propertyName);\n            if (reflectedType && typeof reflectedType.name === \"string\" && reflectedType.name.toLowerCase() === \"promise\")\n                isLazy = true;\n        }\n\n        const args: RelationMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            isLazy: isLazy,\n            relationType: \"one-to-many\",\n            type: typeFunction,\n            inverseSideProperty: inverseSide,\n            options: options\n        };\n        getMetadataArgsStorage().relations.push(args);\n    };\n}\n\n","import {RelationOptions} from \"../options/RelationOptions\";\nimport {getMetadataArgsStorage} from \"../../index\";\nimport {ObjectType} from \"../../common/ObjectType\";\nimport {RelationMetadataArgs} from \"../../metadata-args/RelationMetadataArgs\";\n\n/**\n * One-to-one relation allows to create direct relation between two entities. Entity1 have only one Entity2.\n * Entity1 is an owner of the relationship, and storages Entity1 id on its own side.\n */\nexport function OneToOne<T>(typeFunction: (type?: any) => ObjectType<T>, options?: RelationOptions): Function;\n\n/**\n * One-to-one relation allows to create direct relation between two entities. Entity1 have only one Entity2.\n * Entity1 is an owner of the relationship, and storages Entity1 id on its own side.\n */\nexport function OneToOne<T>(typeFunction: (type?: any) => ObjectType<T>,\n                            inverseSide?: string|((object: T) => any),\n                            options?: RelationOptions): Function;\n\n/**\n * One-to-one relation allows to create direct relation between two entities. Entity1 have only one Entity2.\n * Entity1 is an owner of the relationship, and storages Entity1 id on its own side.\n */\nexport function OneToOne<T>(typeFunction: (type?: any) => ObjectType<T>,\n                            inverseSideOrOptions?: string|((object: T) => any)|RelationOptions,\n                            options?: RelationOptions): Function {\n    let inverseSideProperty: string|((object: T) => any);\n    if (typeof inverseSideOrOptions === \"object\") {\n        options = <RelationOptions> inverseSideOrOptions;\n    } else {\n        inverseSideProperty = <string|((object: T) => any)> inverseSideOrOptions;\n    }\n\n    return function (object: Object, propertyName: string) {\n        if (!options) options = {} as RelationOptions;\n\n        // now try to determine it its lazy relation\n        let isLazy = options && options.lazy === true ? true : false;\n        if (!isLazy && Reflect && (Reflect as any).getMetadata) { // automatic determination\n            const reflectedType = (Reflect as any).getMetadata(\"design:type\", object, propertyName);\n            if (reflectedType && typeof reflectedType.name === \"string\" && reflectedType.name.toLowerCase() === \"promise\")\n                isLazy = true;\n        }\n\n        const args: RelationMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            isLazy: isLazy,\n            relationType: \"one-to-one\",\n            type: typeFunction,\n            inverseSideProperty: inverseSideProperty,\n            options: options\n        };\n        getMetadataArgsStorage().relations.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {RelationIdMetadataArgs} from \"../../metadata-args/RelationIdMetadataArgs\";\nimport {SelectQueryBuilder} from \"../../query-builder/SelectQueryBuilder\";\n\n/**\n * Special decorator used to extract relation id into separate entity property.\n */\nexport function RelationId<T>(relation: string|((object: T) => any), alias?: string, queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): Function {\n    return function (object: Object, propertyName: string) {\n        const args: RelationIdMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            relation: relation,\n            alias: alias,\n            queryBuilderFactory: queryBuilderFactory\n        };\n        getMetadataArgsStorage().relationIds.push(args);\n    };\n}\n\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {TableMetadataArgs} from \"../../metadata-args/TableMetadataArgs\";\nimport {EntityOptions} from \"../options/EntityOptions\";\n\n/**\n * This decorator is used to mark classes that will be an entity (table or document depend on database type).\n * Database schema will be created for all classes decorated with it, and Repository can be retrieved and used for it.\n */\nexport function Entity(options?: EntityOptions): Function;\n\n/**\n * This decorator is used to mark classes that will be an entity (table or document depend on database type).\n * Database schema will be created for all classes decorated with it, and Repository can be retrieved and used for it.\n */\nexport function Entity(name?: string, options?: EntityOptions): Function;\n\n/**\n * This decorator is used to mark classes that will be an entity (table or document depend on database type).\n * Database schema will be created for all classes decorated with it, and Repository can be retrieved and used for it.\n */\nexport function Entity(nameOrOptions?: string|EntityOptions, maybeOptions?: EntityOptions): Function {\n    const options = (typeof nameOrOptions === \"object\" ? nameOrOptions as EntityOptions : maybeOptions) || {};\n    const name = typeof nameOrOptions === \"string\" ? nameOrOptions : options.name;\n\n    return function (target: Function) {\n        const args: TableMetadataArgs = {\n            target: target,\n            name: name,\n            type: \"regular\",\n            orderBy: options && options.orderBy ? options.orderBy : undefined,\n            engine: options && options.engine ? options.engine : undefined,\n            database: options && options.database ? options.database : undefined,\n            schema: options && options.schema ? options.schema : undefined,\n            skipSync: !!(options && options.skipSync === true)\n        };\n        getMetadataArgsStorage().tables.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {TableMetadataArgs} from \"../../metadata-args/TableMetadataArgs\";\nimport {EntityOptions} from \"../options/EntityOptions\";\n\n/**\n * Special type of the entity used in the class-table inherited tables.\n */\nexport function ClassEntityChild(tableName?: string, options?: EntityOptions) {\n    return function (target: Function) {\n        const args: TableMetadataArgs = {\n            target: target,\n            name: tableName,\n            type: \"class-table-child\",\n            orderBy: options && options.orderBy ? options.orderBy : undefined,\n            skipSync: !!(options && options.skipSync === true)\n        };\n        getMetadataArgsStorage().tables.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {TableMetadataArgs} from \"../../metadata-args/TableMetadataArgs\";\nimport {EntityOptions} from \"../options/EntityOptions\";\n\n/**\n * Used on a entities that stores its children in a tree using closure design pattern.\n */\nexport function ClosureEntity(name?: string, options?: EntityOptions) {\n    return function (target: Function) {\n        const args: TableMetadataArgs = {\n            target: target,\n            name: name,\n            type: \"closure\",\n            orderBy: options && options.orderBy ? options.orderBy : undefined,\n            skipSync: !!(options && options.skipSync === true)\n        };\n        getMetadataArgsStorage().tables.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {TableMetadataArgs} from \"../../metadata-args/TableMetadataArgs\";\n\n/**\n * Special type of the table used in the single-table inherited tables.\n */\nexport function SingleEntityChild() {\n    return function (target: Function) {\n        const args: TableMetadataArgs = {\n            target: target,\n            name: undefined,\n            type: \"single-table-child\",\n            orderBy: undefined\n        };\n        getMetadataArgsStorage().tables.push(args);\n    };\n}","import {getMetadataArgsStorage} from \"../../index\";\nimport {InheritanceMetadataArgs} from \"../../metadata-args/InheritanceMetadataArgs\";\n\n/**\n * Sets what kind of table-inheritance table will use.\n */\nexport function TableInheritance(type: \"single-table\"|\"class-table\") { // todo: create two decorators instead?\n    return function (target: Function) {\n        const args: InheritanceMetadataArgs = {\n            target: target,\n            type: type\n        };\n        getMetadataArgsStorage().inheritances.push(args);\n    };\n}","import { getConnection, getMetadataArgsStorage, Repository, MongoRepository, TreeRepository } from \"../../index\";\n\n/**\n * Wraps some method into the transaction.\n * Note, method result will return a promise if this decorator applied.\n * Note, all database operations in the wrapped method should be executed using entity managed passed as a first parameter\n * into the wrapped method.\n * If you want to control at what position in your method parameters entity manager should be injected,\n * then use @TransactionEntityManager() decorator.\n * If you want to use repositories instead of bare entity manager,\n * then use @TransactionRepository() decorator.\n */\nexport function Transaction(connectionName: string = \"default\"): MethodDecorator {\n    return function (target: Object, methodName: string, descriptor: PropertyDescriptor) {\n\n        // save original method - we gonna need it\n        const originalMethod = descriptor.value;\n\n        // override method descriptor with proxy method\n        descriptor.value = function(...args: any[]) {\n            return getConnection(connectionName)\n                .manager\n                .transaction(entityManager => {\n                    let argsWithInjectedTransactionManagerAndRepositories: any[];\n\n                    // gets all @TransactionEntityManager() decorator usages for this method\n                    const transactionEntityManagerMetadatas = getMetadataArgsStorage()\n                        .filterTransactionEntityManagers(target.constructor)\n                        .filter(transactionEntityManagerMetadata => {\n                            return transactionEntityManagerMetadata.methodName === methodName;\n                        });\n\n                    // gets all @TransactionRepository() decorator usages for this method\n                    const transactionRepositoryMetadatas = getMetadataArgsStorage()\n                        .filterTransactionRepository(target.constructor)\n                        .filter(transactionRepositoryMetadata => {\n                            return transactionRepositoryMetadata.methodName === methodName;\n                        });\n                        \n                    // if there are @TransactionEntityManager() decorator usages the inject them\n                    if (transactionEntityManagerMetadatas.length > 0) { \n                        argsWithInjectedTransactionManagerAndRepositories = [...args];\n                        // replace method params with injection of transactionEntityManager\n                        transactionEntityManagerMetadatas.forEach(metadata => {\n                            argsWithInjectedTransactionManagerAndRepositories.splice(metadata.index, 0, entityManager);\n                        });\n\n                    } else if (transactionRepositoryMetadatas.length === 0) { // otherwise if there's no transaction repositories in use, inject it as a first parameter\n                        argsWithInjectedTransactionManagerAndRepositories = [entityManager, ...args];\n\n                    } else {\n                        argsWithInjectedTransactionManagerAndRepositories = [...args];\n                    }\n\n                    // for every usage of @TransactionRepository decorator\n                    transactionRepositoryMetadatas.forEach(metadata => {\n                        let repositoryInstance: any;\n\n                        // detect type of the repository and get instance from transaction entity manager\n                        switch (metadata.repositoryType) {\n                            case Repository:\n                                repositoryInstance = entityManager.getRepository(metadata.entityType!);\n                                break;\n                            case MongoRepository:\n                                repositoryInstance = entityManager.getMongoRepository(metadata.entityType!);\n                                break;\n                            case TreeRepository:\n                                repositoryInstance = entityManager.getTreeRepository(metadata.entityType!);\n                                break;\n                            // if not the TypeORM's ones, there must be custom repository classes\n                            default:\n                                repositoryInstance = entityManager.getCustomRepository(metadata.repositoryType);\n                        }\n\n                        // replace method param with injection of repository instance\n                        argsWithInjectedTransactionManagerAndRepositories.splice(metadata.index, 0, repositoryInstance);\n                    });\n\n                    return originalMethod.apply(this, argsWithInjectedTransactionManagerAndRepositories);\n                });\n        };\n    };\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {TransactionEntityMetadataArgs} from \"../../metadata-args/TransactionEntityMetadataArgs\";\n\n/**\n * Injects transaction's entity manager into the method wrapped with @Transaction decorator.\n */\nexport function TransactionManager(): Function {\n    return function (object: Object, methodName: string, index: number) {\n        const args: TransactionEntityMetadataArgs = {\n            target: object.constructor,\n            methodName: methodName,\n            index: index,\n        };\n        getMetadataArgsStorage().transactionEntityManagers.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {TransactionRepositoryMetadataArgs} from \"../../metadata-args/TransactionRepositoryMetadataArgs\";\n\n/**\n * Injects transaction's repository into the method wrapped with @Transaction decorator.\n */\nexport function TransactionRepository(entityType?: Function): ParameterDecorator {\n    return (object: Object, methodName: string, index: number) => {\n        let repositoryType: Function;\n        try {\n            repositoryType = Reflect.getOwnMetadata(\"design:paramtypes\", object, methodName)[index];\n        } catch (err) {\n            throw new Error(\n                `Cannot get reflected type for a \"${methodName}\" method's parameter of ${object.constructor.name} class. ` +\n                `Make sure you have turned on an \"emitDecoratorMetadata\": true, option in tsconfig.json. ` +\n                `Also make sure you have imported \"reflect-metadata\" on top of the main entry file in your application.`\n            );\n        }\n        \n        const args: TransactionRepositoryMetadataArgs = {\n            target: object.constructor,\n            methodName,\n            index,\n            repositoryType,\n            entityType,\n        };\n        getMetadataArgsStorage().transactionRepositories.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {ColumnMetadataArgs} from \"../../metadata-args/ColumnMetadataArgs\";\n\n/**\n * Creates a \"level\"/\"length\" column to the table that holds a closure table.\n */\nexport function TreeLevelColumn(): Function {\n    return function (object: Object, propertyName: string) {\n\n        // create and register a new column metadata\n        const args: ColumnMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            mode: \"treeLevel\",\n            options: {}\n        };\n        getMetadataArgsStorage().columns.push(args);\n    };\n}\n\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {RelationOptions} from \"../options/RelationOptions\";\nimport {RelationMetadataArgs} from \"../../metadata-args/RelationMetadataArgs\";\n\n/**\n * Marks a specific property of the class as a parent of the tree.\n */\nexport function TreeParent(options?: { cascadeInsert?: boolean, cascadeUpdate?: boolean, lazy?: boolean }): Function {\n    return function (object: Object, propertyName: string) {\n        if (!options) options = {} as RelationOptions;\n\n        // now try to determine it its lazy relation\n        let isLazy = options && options.lazy === true ? true : false;\n        if (!isLazy && Reflect && (Reflect as any).getMetadata) { // automatic determination\n            const reflectedType = (Reflect as any).getMetadata(\"design:type\", object, propertyName);\n            if (reflectedType && typeof reflectedType.name === \"string\" && reflectedType.name.toLowerCase() === \"promise\")\n                isLazy = true;\n        }\n\n        const args: RelationMetadataArgs = {\n            isTreeParent: true,\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            isLazy: isLazy,\n            relationType: \"many-to-one\",\n            type: () => object.constructor,\n            options: options\n        };\n        getMetadataArgsStorage().relations.push(args);\n    };\n}\n\n","import {getMetadataArgsStorage} from \"../../index\";\nimport {RelationOptions} from \"../options/RelationOptions\";\nimport {RelationMetadataArgs} from \"../../metadata-args/RelationMetadataArgs\";\n\n/**\n * Marks a specific property of the class as a children of the tree.\n */\nexport function TreeChildren(options?: { cascadeInsert?: boolean, cascadeUpdate?: boolean, lazy?: boolean }): Function {\n    return function (object: Object, propertyName: string) {\n        if (!options) options = {} as RelationOptions;\n\n        // now try to determine it its lazy relation\n        let isLazy = options && options.lazy === true ? true : false;\n        if (!isLazy && Reflect && (Reflect as any).getMetadata) { // automatic determination\n            const reflectedType = (Reflect as any).getMetadata(\"design:type\", object, propertyName);\n            if (reflectedType && typeof reflectedType.name === \"string\" && reflectedType.name.toLowerCase() === \"promise\")\n                isLazy = true;\n        }\n\n        // add one-to-many relation for this \n        const args: RelationMetadataArgs = {\n            isTreeChildren: true,\n            target: object.constructor,\n            propertyName: propertyName,\n            // propertyType: reflectedType,\n            isLazy: isLazy,\n            relationType: \"one-to-many\",\n            type: () => object.constructor,\n            options: options\n        };\n        getMetadataArgsStorage().relations.push(args);\n    };\n}\n\n","import {getMetadataArgsStorage} from \"../index\";\nimport {IndexMetadataArgs} from \"../metadata-args/IndexMetadataArgs\";\nimport {IndexOptions} from \"./options/IndexOptions\";\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(name: string, options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(name: string, fields: string[], options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(fields: string[], options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(fields: (object?: any) => (any[]|{ [key: string]: number }), options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(name: string, fields: (object?: any) => (any[]|{ [key: string]: number }), options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(nameOrFieldsOrOptions?: string|string[]|((object: any) => (any[]|{ [key: string]: number }))|IndexOptions,\n                      maybeFieldsOrOptions?: ((object?: any) => (any[]|{ [key: string]: number }))|IndexOptions|string[],\n                      maybeOptions?: IndexOptions): Function {\n    const name = typeof nameOrFieldsOrOptions === \"string\" ? nameOrFieldsOrOptions : undefined;\n    const fields = typeof nameOrFieldsOrOptions === \"string\" ? <((object?: any) => (any[]|{ [key: string]: number }))|string[]> maybeFieldsOrOptions : nameOrFieldsOrOptions as string[];\n    let options = (typeof nameOrFieldsOrOptions === \"object\" && !Array.isArray(nameOrFieldsOrOptions)) ? nameOrFieldsOrOptions as IndexOptions : maybeOptions;\n    if (!options)\n        options = (typeof maybeFieldsOrOptions === \"object\" && !Array.isArray(maybeFieldsOrOptions)) ? maybeFieldsOrOptions as IndexOptions : maybeOptions;\n\n    return function (clsOrObject: Function|Object, propertyName?: string) {\n        const args: IndexMetadataArgs = {\n            target: propertyName ? clsOrObject.constructor : clsOrObject as Function,\n            name: name,\n            columns: propertyName ? [propertyName] : fields,\n            unique: options && options.unique ? true : false,\n            sparse: options && options.sparse ? true : false\n        };\n        getMetadataArgsStorage().indices.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../index\";\nimport {GeneratedMetadataArgs} from \"../metadata-args/GeneratedMetadataArgs\";\n\n/**\n * Generated decorator is used to mark a specific class property as a generated table column.\n */\nexport function Generated(strategy: \"increment\"|\"uuid\" = \"increment\"): Function {\n    return function (object: Object, propertyName: string) {\n        const args: GeneratedMetadataArgs = {\n            target: object.constructor,\n            propertyName: propertyName,\n            strategy: strategy\n        };\n        getMetadataArgsStorage().generations.push(args);\n    };\n}\n\n","import {getMetadataArgsStorage} from \"../index\";\nimport {DiscriminatorValueMetadataArgs} from \"../metadata-args/DiscriminatorValueMetadataArgs\";\n\n/**\n * If entity is a child table of some table, it should have a discriminator value.\n * This decorator sets custom discriminator value for the entity.\n */\nexport function DiscriminatorValue(value: any): Function {\n    return function (target: Function) {\n        const args: DiscriminatorValueMetadataArgs = {\n            target: target,\n            value: value\n        };\n        getMetadataArgsStorage().discriminatorValues.push(args);\n    };\n}\n","import {getMetadataArgsStorage} from \"../index\";\nimport {EntityRepositoryMetadataArgs} from \"../metadata-args/EntityRepositoryMetadataArgs\";\n\n/**\n * Used to declare a class as a custom repository.\n * Custom repository can either manage some specific entity, either just be generic.\n * Custom repository can extend AbstractRepository or regular Repository or TreeRepository.\n */\nexport function EntityRepository(entity?: Function): Function {\n    return function (target: Function) {\n        const args: EntityRepositoryMetadataArgs = {\n            target: target,\n            entity: entity,\n        };\n        getMetadataArgsStorage().entityRepositories.push(args);\n    };\n}\n","import {Repository} from \"./Repository\";\nimport {getConnection} from \"../index\";\nimport {DeepPartial} from \"../common/DeepPartial\";\nimport {SaveOptions} from \"./SaveOptions\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {RemoveOptions} from \"./RemoveOptions\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {Connection} from \"../connection/Connection\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Base abstract entity for all entities, used in ActiveRecord patterns.\n */\nexport class BaseEntity {\n\n    // -------------------------------------------------------------------------\n    // Private Static Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used in all static methods of the BaseEntity.\n     */\n    // @ts-ignore: Unused variable which is actually used\n    private static usedConnection?: Connection;\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Checks if entity has an id.\n     * If entity composite compose ids, it will check them all.\n     */\n    hasId(): boolean {\n        return (this.constructor as any).getRepository().hasId(this);\n    }\n\n    /**\n     * Saves current entity in the database.\n     * If entity does not exist in the database then inserts, otherwise updates.\n     */\n    save(): Promise<this> {\n        return (this.constructor as any).getRepository().save(this);\n    }\n\n    /**\n     * Removes current entity from the database.\n     */\n    remove(): Promise<this> {\n        return (this.constructor as any).getRepository().remove(this);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Sets connection to be used by entity.\n     */\n    static useConnection(connection: Connection) {\n        this.usedConnection = connection;\n    }\n\n    /**\n     * Gets current entity's Repository.\n     */\n    static getRepository<T extends BaseEntity>(this: ObjectType<T>): Repository<T> {\n        const connection: Connection = (this as any).usedConnection || getConnection();\n        return connection.getRepository<T>(this);\n    }\n\n    /**\n     * Returns object that is managed by this repository.\n     * If this repository manages entity from schema,\n     * then it returns a name of that schema instead.\n     */\n    static get target(): Function|string {\n        return this.getRepository().target;\n    }\n\n    /**\n     * Checks entity has an id.\n     * If entity composite compose ids, it will check them all.\n     */\n    static hasId(entity: BaseEntity): boolean {\n        return this.getRepository().hasId(entity);\n    }\n\n    /**\n     * Gets entity mixed id.\n     */\n    static getId<T extends BaseEntity>(this: ObjectType<T>, entity: T): any {\n        return (this as any).getRepository().getId(entity);\n    }\n\n    /**\n     * Creates a new query builder that can be used to build a sql query.\n     */\n    static createQueryBuilder<T extends BaseEntity>(this: ObjectType<T>, alias?: string): SelectQueryBuilder<T> {\n        return (this as any).getRepository().createQueryBuilder(alias);\n    }\n\n    /**\n     * Creates a new entity instance.\n     */\n    static create<T extends BaseEntity>(this: ObjectType<T>): T;\n\n    /**\n     * Creates a new entities and copies all entity properties from given objects into their new entities.\n     * Note that it copies only properties that present in entity schema.\n     */\n    static create<T extends BaseEntity>(this: ObjectType<T>, entityLikeArray: DeepPartial<T>[]): T;\n\n    /**\n     * Creates a new entity instance and copies all entity properties from this object into a new entity.\n     * Note that it copies only properties that present in entity schema.\n     */\n    static create<T extends BaseEntity>(this: ObjectType<T>, entityLike: DeepPartial<T>): T;\n\n    /**\n     * Creates a new entity instance and copies all entity properties from this object into a new entity.\n     * Note that it copies only properties that present in entity schema.\n     */\n    static create<T extends BaseEntity>(this: ObjectType<T>, entityOrEntities?: any): T {\n        return (this as any).getRepository().create(entityOrEntities);\n    }\n\n    /**\n     * Merges multiple entities (or entity-like objects) into a given entity.\n     */\n    static merge<T extends BaseEntity>(this: ObjectType<T>, mergeIntoEntity: T, ...entityLikes: DeepPartial<T>[]): T {\n        return (this as any).getRepository().merge(mergeIntoEntity, ...entityLikes);\n    }\n\n    /**\n     * Creates a new entity from the given plan javascript object. If entity already exist in the database, then\n     * it loads it (and everything related to it), replaces all values with the new ones from the given object\n     * and returns this new entity. This new entity is actually a loaded from the db entity with all properties\n     * replaced from the new object.\n     *\n     * Note that given entity-like object must have an entity id / primary key to find entity by.\n     * Returns undefined if entity with given id was not found.\n     */\n    static preload<T extends BaseEntity>(this: ObjectType<T>, entityLike: DeepPartial<T>): Promise<T|undefined> {\n        return (this as any).getRepository().preload(entityLike);\n    }\n\n    /**\n     * Saves all given entities in the database.\n     * If entities do not exist in the database then inserts, otherwise updates.\n     */\n    static save<T extends BaseEntity>(this: ObjectType<T>, entities: T[], options?: SaveOptions): Promise<T[]>;\n\n    /**\n     * Saves a given entity in the database.\n     * If entity does not exist in the database then inserts, otherwise updates.\n     */\n    static save<T extends BaseEntity>(this: ObjectType<T>, entity: T, options?: SaveOptions): Promise<T>;\n\n    /**\n     * Saves one or many given entities.\n     */\n    static save<T extends BaseEntity>(this: ObjectType<T>, entityOrEntities: T|T[], options?: SaveOptions): Promise<T|T[]> {\n        return (this as any).getRepository().save(entityOrEntities as any, options);\n    }\n\n    /**\n     * Updates entity partially. Entity can be found by a given conditions.\n     */\n    static update<T extends BaseEntity>(this: ObjectType<T>, conditions: Partial<T>, partialEntity: DeepPartial<T>, options?: SaveOptions): Promise<void>;\n\n    /**\n     * Updates entity partially. Entity can be found by a given find options.\n     */\n    static update<T extends BaseEntity>(this: ObjectType<T>, findOptions: FindOneOptions<T>, partialEntity: DeepPartial<T>, options?: SaveOptions): Promise<void>;\n\n    /**\n     * Updates entity partially. Entity can be found by a given conditions.\n     */\n    static update<T extends BaseEntity>(this: ObjectType<T>, conditionsOrFindOptions: Partial<T>|FindOneOptions<T>, partialEntity: DeepPartial<T>, options?: SaveOptions): Promise<void> {\n        return (this as any).getRepository().update(conditionsOrFindOptions as any, partialEntity, options);\n    }\n\n    /**\n     * Updates entity partially. Entity will be found by a given id.\n     */\n    static updateById<T extends BaseEntity>(this: ObjectType<T>, id: any, partialEntity: DeepPartial<T>, options?: SaveOptions): Promise<void> {\n        return (this as any).getRepository().updateById(id, partialEntity, options);\n    }\n\n    /**\n     * Removes a given entities from the database.\n     */\n    static remove<T extends BaseEntity>(this: ObjectType<T>, entities: T[], options?: RemoveOptions): Promise<T[]>;\n\n    /**\n     * Removes a given entity from the database.\n     */\n    static remove<T extends BaseEntity>(this: ObjectType<T>, entity: T, options?: RemoveOptions): Promise<T>;\n\n    /**\n     * Removes one or many given entities.\n     */\n    static remove<T extends BaseEntity>(this: ObjectType<T>, entityOrEntities: T|T[], options?: RemoveOptions): Promise<T|T[]> {\n        return (this as any).getRepository().remove(entityOrEntities as any, options);\n    }\n\n    /**\n     * Removes entity by a given entity id.\n     */\n    static removeById<T extends BaseEntity>(this: ObjectType<T>, id: any, options?: RemoveOptions): Promise<void> {\n        return (this as any).getRepository().deleteById(id, options);\n    }\n\n    /**\n     * Counts entities that match given options.\n     */\n    static count<T extends BaseEntity>(this: ObjectType<T>, options?: FindManyOptions<T>): Promise<number>;\n\n    /**\n     * Counts entities that match given conditions.\n     */\n    static count<T extends BaseEntity>(this: ObjectType<T>, conditions?: DeepPartial<T>): Promise<number>;\n\n    /**\n     * Counts entities that match given find options or conditions.\n     */\n    static count<T extends BaseEntity>(this: ObjectType<T>, optionsOrConditions?: FindManyOptions<T>|DeepPartial<T>): Promise<number> {\n        return (this as any).getRepository().count(optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entities that match given options.\n     */\n    static find<T extends BaseEntity>(this: ObjectType<T>, options?: FindManyOptions<T>): Promise<T[]>;\n\n    /**\n     * Finds entities that match given conditions.\n     */\n    static find<T extends BaseEntity>(this: ObjectType<T>, conditions?: DeepPartial<T>): Promise<T[]>;\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    static find<T extends BaseEntity>(this: ObjectType<T>, optionsOrConditions?: FindManyOptions<T>|DeepPartial<T>): Promise<T[]> {\n        return (this as any).getRepository().find(optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entities that match given find options.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    static findAndCount<T extends BaseEntity>(this: ObjectType<T>, options?: FindManyOptions<T>): Promise<[ T[], number ]>;\n\n    /**\n     * Finds entities that match given conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    static findAndCount<T extends BaseEntity>(this: ObjectType<T>, conditions?: DeepPartial<T>): Promise<[ T[], number ]>;\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    static findAndCount<T extends BaseEntity>(this: ObjectType<T>, optionsOrConditions?: FindManyOptions<T>|DeepPartial<T>): Promise<[ T[], number ]> {\n        return (this as any).getRepository().findAndCount(optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    static findByIds<T extends BaseEntity>(this: ObjectType<T>, ids: any[], options?: FindManyOptions<T>): Promise<T[]>;\n\n    /**\n     * Finds entities by ids.\n     * Optionally conditions can be applied.\n     */\n    static findByIds<T extends BaseEntity>(this: ObjectType<T>, ids: any[], conditions?: DeepPartial<T>): Promise<T[]>;\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    static findByIds<T extends BaseEntity>(this: ObjectType<T>, ids: any[], optionsOrConditions?: FindManyOptions<T>|DeepPartial<T>): Promise<T[]> {\n        return (this as any).getRepository().findByIds(ids, optionsOrConditions as any);\n    }\n\n    /**\n     * Finds first entity that matches given options.\n     */\n    static findOne<T extends BaseEntity>(this: ObjectType<T>, options?: FindOneOptions<T>): Promise<T|undefined>;\n\n    /**\n     * Finds first entity that matches given conditions.\n     */\n    static findOne<T extends BaseEntity>(this: ObjectType<T>, conditions?: DeepPartial<T>): Promise<T|undefined>;\n\n    /**\n     * Finds first entity that matches given conditions.\n     */\n    static findOne<T extends BaseEntity>(this: ObjectType<T>, optionsOrConditions?: FindOneOptions<T>|DeepPartial<T>): Promise<T|undefined> {\n        return (this as any).getRepository().findOne(optionsOrConditions as any);\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options can be applied.\n     */\n    static findOneById<T extends BaseEntity>(this: ObjectType<T>, id: any, options?: FindOneOptions<T>): Promise<T|undefined>;\n\n    /**\n     * Finds entity by given id.\n     * Optionally conditions can be applied.\n     */\n    static findOneById<T extends BaseEntity>(this: ObjectType<T>, id: any, conditions?: DeepPartial<T>): Promise<T|undefined>;\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    static findOneById<T extends BaseEntity>(this: ObjectType<T>, id: any, optionsOrConditions?: FindOneOptions<T>|DeepPartial<T>): Promise<T|undefined> {\n        return (this as any).getRepository().findOneById(id, optionsOrConditions as any);\n    }\n\n    /**\n     * Executes a raw SQL query and returns a raw database results.\n     * Raw query execution is supported only by relational databases (MongoDB is not supported).\n     */\n    static query<T extends BaseEntity>(this: ObjectType<T>, query: string, parameters?: any[]): Promise<any> {\n        return (this as any).getRepository().query(query, parameters);\n    }\n\n    /**\n     * Clears all the data from the given table/collection (truncates/drops it).\n     */\n    static clear<T extends BaseEntity>(this: ObjectType<T>, ): Promise<void> {\n        return (this as any).getRepository().clear();\n    }\n\n}","/*!\n */\nimport {ConnectionManager} from \"./connection/ConnectionManager\";\nimport {Connection} from \"./connection/Connection\";\nimport {MetadataArgsStorage} from \"./metadata-args/MetadataArgsStorage\";\nimport {ConnectionOptions} from \"./connection/ConnectionOptions\";\nimport {getFromContainer} from \"./container\";\nimport {ObjectType} from \"./common/ObjectType\";\nimport {Repository} from \"./repository/Repository\";\nimport {EntityManager} from \"./entity-manager/EntityManager\";\nimport {PlatformTools} from \"./platform/PlatformTools\";\nimport {TreeRepository} from \"./repository/TreeRepository\";\nimport {MongoRepository} from \"./repository/MongoRepository\";\nimport {ConnectionOptionsReader} from \"./connection/ConnectionOptionsReader\";\nimport {PromiseUtils} from \"./util/PromiseUtils\";\nimport {MongoEntityManager} from \"./entity-manager/MongoEntityManager\";\nimport {SqljsEntityManager} from \"./entity-manager/SqljsEntityManager\";\n\n// -------------------------------------------------------------------------\n// Commonly Used exports\n// -------------------------------------------------------------------------\n\nexport * from \"./container\";\nexport * from \"./common/ObjectType\";\nexport * from \"./common/ObjectLiteral\";\nexport * from \"./common/DeepPartial\";\nexport * from \"./error/QueryFailedError\";\nexport * from \"./decorator/columns/Column\";\nexport * from \"./decorator/columns/CreateDateColumn\";\nexport * from \"./decorator/columns/DiscriminatorColumn\";\nexport * from \"./decorator/columns/PrimaryGeneratedColumn\";\nexport * from \"./decorator/columns/PrimaryColumn\";\nexport * from \"./decorator/columns/UpdateDateColumn\";\nexport * from \"./decorator/columns/VersionColumn\";\nexport * from \"./decorator/columns/ObjectIdColumn\";\nexport * from \"./decorator/listeners/AfterInsert\";\nexport * from \"./decorator/listeners/AfterLoad\";\nexport * from \"./decorator/listeners/AfterRemove\";\nexport * from \"./decorator/listeners/AfterUpdate\";\nexport * from \"./decorator/listeners/BeforeInsert\";\nexport * from \"./decorator/listeners/BeforeRemove\";\nexport * from \"./decorator/listeners/BeforeUpdate\";\nexport * from \"./decorator/listeners/EventSubscriber\";\nexport * from \"./decorator/options/ColumnOptions\";\nexport * from \"./decorator/options/IndexOptions\";\nexport * from \"./decorator/options/JoinColumnOptions\";\nexport * from \"./decorator/options/JoinTableOptions\";\nexport * from \"./decorator/options/RelationOptions\";\nexport * from \"./decorator/options/EntityOptions\";\nexport * from \"./decorator/relations/RelationCount\";\nexport * from \"./decorator/relations/JoinColumn\";\nexport * from \"./decorator/relations/JoinTable\";\nexport * from \"./decorator/relations/ManyToMany\";\nexport * from \"./decorator/relations/ManyToOne\";\nexport * from \"./decorator/relations/OneToMany\";\nexport * from \"./decorator/relations/OneToOne\";\nexport * from \"./decorator/relations/RelationCount\";\nexport * from \"./decorator/relations/RelationId\";\nexport * from \"./decorator/entity/Entity\";\nexport * from \"./decorator/entity/ClassEntityChild\";\nexport * from \"./decorator/entity/ClosureEntity\";\nexport * from \"./decorator/entity/SingleEntityChild\";\nexport * from \"./decorator/entity/TableInheritance\";\nexport * from \"./decorator/transaction/Transaction\";\nexport * from \"./decorator/transaction/TransactionManager\";\nexport * from \"./decorator/transaction/TransactionRepository\";\nexport * from \"./decorator/tree/TreeLevelColumn\";\nexport * from \"./decorator/tree/TreeParent\";\nexport * from \"./decorator/tree/TreeChildren\";\nexport * from \"./decorator/Index\";\nexport * from \"./decorator/Generated\";\nexport * from \"./decorator/DiscriminatorValue\";\nexport * from \"./decorator/EntityRepository\";\nexport * from \"./find-options/FindOneOptions\";\nexport * from \"./find-options/FindManyOptions\";\nexport * from \"./logger/Logger\";\nexport * from \"./logger/AdvancedConsoleLogger\";\nexport * from \"./logger/SimpleConsoleLogger\";\nexport * from \"./logger/FileLogger\";\nexport * from \"./metadata/EntityMetadataUtils\";\nexport * from \"./entity-manager/EntityManager\";\nexport * from \"./repository/AbstractRepository\";\nexport * from \"./repository/Repository\";\nexport * from \"./repository/BaseEntity\";\nexport * from \"./repository/TreeRepository\";\nexport * from \"./repository/MongoRepository\";\nexport * from \"./repository/RemoveOptions\";\nexport * from \"./repository/SaveOptions\";\nexport * from \"./schema-builder/schema/TableColumn\";\nexport * from \"./schema-builder/schema/TableForeignKey\";\nexport * from \"./schema-builder/schema/TableIndex\";\nexport * from \"./schema-builder/schema/TablePrimaryKey\";\nexport * from \"./schema-builder/schema/Table\";\nexport * from \"./driver/mongodb/typings\";\nexport * from \"./driver/types/DatabaseType\";\nexport * from \"./driver/sqlserver/MssqlParameter\";\n\nexport {ConnectionOptionsReader} from \"./connection/ConnectionOptionsReader\";\nexport {Connection} from \"./connection/Connection\";\nexport {ConnectionManager} from \"./connection/ConnectionManager\";\nexport {ConnectionOptions} from \"./connection/ConnectionOptions\";\nexport {Driver} from \"./driver/Driver\";\nexport {QueryBuilder} from \"./query-builder/QueryBuilder\";\nexport {SelectQueryBuilder} from \"./query-builder/SelectQueryBuilder\";\nexport {DeleteQueryBuilder} from \"./query-builder/DeleteQueryBuilder\";\nexport {InsertQueryBuilder} from \"./query-builder/InsertQueryBuilder\";\nexport {UpdateQueryBuilder} from \"./query-builder/UpdateQueryBuilder\";\nexport {RelationQueryBuilder} from \"./query-builder/RelationQueryBuilder\";\nexport {Brackets} from \"./query-builder/Brackets\";\nexport {WhereExpression} from \"./query-builder/WhereExpression\";\nexport {QueryRunner} from \"./query-runner/QueryRunner\";\nexport {EntityManager} from \"./entity-manager/EntityManager\";\nexport {MongoEntityManager} from \"./entity-manager/MongoEntityManager\";\nexport {MigrationInterface} from \"./migration/MigrationInterface\";\nexport {DefaultNamingStrategy} from \"./naming-strategy/DefaultNamingStrategy\";\nexport {NamingStrategyInterface} from \"./naming-strategy/NamingStrategyInterface\";\nexport {Repository} from \"./repository/Repository\";\nexport {TreeRepository} from \"./repository/TreeRepository\";\nexport {MongoRepository} from \"./repository/MongoRepository\";\nexport {FindOneOptions} from \"./find-options/FindOneOptions\";\nexport {FindManyOptions} from \"./find-options/FindManyOptions\";\nexport {InsertEvent} from \"./subscriber/event/InsertEvent\";\nexport {UpdateEvent} from \"./subscriber/event/UpdateEvent\";\nexport {RemoveEvent} from \"./subscriber/event/RemoveEvent\";\nexport {EntitySubscriberInterface} from \"./subscriber/EntitySubscriberInterface\";\nexport {BaseEntity} from \"./repository/BaseEntity\";\nexport {EntitySchema} from \"./entity-schema/EntitySchema\";\nexport {EntitySchemaTable} from \"./entity-schema/EntitySchemaTable\";\nexport {EntitySchemaColumn} from \"./entity-schema/EntitySchemaColumn\";\nexport {EntitySchemaIndex} from \"./entity-schema/EntitySchemaIndex\";\nexport {EntitySchemaRelation} from \"./entity-schema/EntitySchemaRelation\";\nexport {ColumnType} from \"./driver/types/ColumnTypes\";\nexport {PromiseUtils} from \"./util/PromiseUtils\";\n\n// -------------------------------------------------------------------------\n// Deprecated\n// -------------------------------------------------------------------------\n\n// -------------------------------------------------------------------------\n// Commonly used functionality\n// -------------------------------------------------------------------------\n\n/**\n * Gets metadata args storage.\n */\nexport function getMetadataArgsStorage(): MetadataArgsStorage {\n    // we should store metadata storage in a global variable otherwise it brings too much problems\n    // one of the problem is that if any entity (or any other) will be imported before consumer will call\n    // useContainer method with his own container implementation, that entity will be registered in the\n    // old old container (default one post probably) and consumer will his entity.\n    // calling useContainer before he imports any entity (or any other) is not always convenient.\n    // another reason is that when we run migrations typeorm is being called from a global package\n    // and it may load entities which register decorators in typeorm of local package\n    // this leads to impossibility of usage of entities in migrations and cli related operations\n    const globalScope = PlatformTools.getGlobalVariable();\n    if (!globalScope.typeormMetadataArgsStorage)\n        globalScope.typeormMetadataArgsStorage = new MetadataArgsStorage();\n\n    return globalScope.typeormMetadataArgsStorage;\n}\n\n/**\n * Reads connection options stored in ormconfig configuration file.\n */\nexport async function getConnectionOptions(connectionName: string = \"default\"): Promise<ConnectionOptions> {\n    return new ConnectionOptionsReader().get(connectionName);\n}\n\n/**\n * Gets a ConnectionManager which creates connections.\n */\nexport function getConnectionManager(): ConnectionManager {\n    return getFromContainer(ConnectionManager);\n}\n\n/**\n * Creates a new connection and registers it in the manager.\n *\n * If connection options were not specified, then it will try to create connection automatically,\n * based on content of ormconfig (json/js/yml/xml/env) file or environment variables.\n * Only one connection from ormconfig will be created (name \"default\" or connection without name).\n */\nexport async function createConnection(options?: ConnectionOptions): Promise<Connection> {\n    if (!options)\n        options = await getConnectionOptions();\n\n    return getConnectionManager().create(options).connect();\n}\n\n/**\n * Creates new connections and registers them in the manager.\n *\n * If connection options were not specified, then it will try to create connection automatically,\n * based on content of ormconfig (json/js/yml/xml/env) file or environment variables.\n * All connections from the ormconfig will be created.\n */\nexport async function createConnections(options?: ConnectionOptions[]): Promise<Connection[]> {\n    if (!options)\n        options = await new ConnectionOptionsReader().all();\n    const connections = options.map(options => getConnectionManager().create(options));\n    return PromiseUtils.runInSequence(connections, connection => connection.connect());\n}\n\n/**\n * Gets connection from the connection manager.\n * If connection name wasn't specified, then \"default\" connection will be retrieved.\n */\nexport function getConnection(connectionName: string = \"default\"): Connection {\n    return getConnectionManager().get(connectionName);\n}\n\n/**\n * Gets entity manager from the connection.\n * If connection name wasn't specified, then \"default\" connection will be retrieved.\n */\nexport function getManager(connectionName: string = \"default\"): EntityManager {\n    return getConnectionManager().get(connectionName).manager;\n}\n\n/**\n * Gets MongoDB entity manager from the connection.\n * If connection name wasn't specified, then \"default\" connection will be retrieved.\n */\nexport function getMongoManager(connectionName: string = \"default\"): MongoEntityManager {\n    return getConnectionManager().get(connectionName).manager as MongoEntityManager;\n}\n\nexport function getSqljsManager(connectionName: string = \"default\"): SqljsEntityManager {\n    return getConnectionManager().get(connectionName).manager as SqljsEntityManager;\n}\n\n/**\n * Gets repository for the given entity class.\n */\nexport function getRepository<Entity>(entityClass: ObjectType<Entity>|string, connectionName: string = \"default\"): Repository<Entity> {\n    return getConnectionManager().get(connectionName).getRepository<Entity>(entityClass);\n}\n\n/**\n * Gets tree repository for the given entity class.\n */\nexport function getTreeRepository<Entity>(entityClass: ObjectType<Entity>|string, connectionName: string = \"default\"): TreeRepository<Entity> {\n    return getConnectionManager().get(connectionName).getTreeRepository<Entity>(entityClass);\n}\n\n/**\n * Gets tree repository for the given entity class.\n */\nexport function getCustomRepository<T>(customRepository: ObjectType<T>, connectionName: string = \"default\"): T {\n    return getConnectionManager().get(connectionName).getCustomRepository(customRepository);\n}\n\n/**\n * Gets mongodb repository for the given entity class or name.\n */\nexport function getMongoRepository<Entity>(entityClass: ObjectType<Entity>|string, connectionName: string = \"default\"): MongoRepository<Entity> {\n    return getConnectionManager().get(connectionName).getMongoRepository<Entity>(entityClass);\n}\n","export * from \"./typeorm/index\";","/**\n * Thrown when consumer tries to access entity manager before connection is established.\n */\nexport class CannotGetEntityManagerNotConnectedError extends Error {\n    name = \"CannotGetEntityManagerNotConnectedError\";\n\n    constructor(connectionName: string) {\n        super();\n        this.message = `Cannot get entity manager for \"${connectionName}\" connection because connection is not yet established.`;\n        this.stack = new Error().stack;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\n\n/**\n */\nexport class CascadesNotAllowedError extends Error {\n    name = \"CascadesNotAllowedError\";\n\n    // todo: remove metadata attribute since its present in relation attribute\n    constructor(type: \"insert\"|\"update\"|\"remove\", metadata: EntityMetadata, relation: RelationMetadata) {\n        super();\n        this.message = `Cascades (${type}) are not allowed for the given relation ${metadata.name}#${relation.joinColumns[0].referencedColumn!.databaseName}`;\n    }\n\n}","/**\n * Thrown if same custom repository instance is reused between different connections.\n */\nexport class CustomRepositoryReusedError extends Error {\n    name = \"CustomRepositoryReusedError\";\n\n    constructor(repository: any) {\n        super(`Custom entity repository ${repository instanceof Function ? repository.name : repository.constructor.name} ` +\n            `was already used in the different connection. You can't share entity repositories between different connections ` +\n            `when useContainer is set to true for the entity repository.`);\n    }\n\n}","export class GeneratedOnlyForPrimaryError extends Error {\n    name = \"GeneratedOnlyForPrimaryError\";\n\n    constructor(object: Object, propertyName: string) {\n        super();\n        this.message = `Column for property ${(<any>object.constructor).name}#${propertyName} cannot have a generated ` +\n            `value. Generated values supports only in PrimaryColumn decorator or UUID column type.`;\n    }\n\n}","/**\n */\nexport class MetadataAlreadyExistsError extends Error {\n    name = \"MetadataAlreadyExistsError\";\n\n    constructor(metadataType: string, constructor: Function, propertyName?: string) {\n        super();\n        this.message = metadataType + \" metadata already exists for the class constructor \" + JSON.stringify(constructor) +\n            (propertyName ? \" on property \" + propertyName : \". If you previously renamed or moved entity class, make sure\" +\n            \" that compiled version of old entity class source wasn't left in the compiler output directory.\");\n    }\n\n}","/**\n */\nexport class MetadataWithSuchNameAlreadyExistsError extends Error {\n    name = \"MetadataWithSuchNameAlreadyExistsError\";\n\n    constructor(metadataType: string, name: string) {\n        super();\n        this.message = metadataType + \" metadata with such name \" + name + \" already exists. \" +\n            \"Do you apply decorator twice? Or maybe try to change a name?\";\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\n\n/**\n */\nexport class MissingJoinColumnError extends Error {\n    name = \"MissingJoinColumnError\";\n\n    constructor(entityMetadata: EntityMetadata, relation: RelationMetadata) {\n        super();\n        if (relation.inverseRelation) {\n            this.message = `JoinColumn is missing on both sides of ${entityMetadata.name}#${relation.propertyName} and ` +\n                `${relation.inverseEntityMetadata.name}#${relation.inverseRelation.propertyName} one-to-one relationship. ` +\n                `You need to put JoinColumn decorator on one of the sides.`;\n        } else {\n            this.message = `JoinColumn is missing on ${entityMetadata.name}#${relation.propertyName} one-to-one relationship. ` +\n                `You need to put JoinColumn decorator on it.`;\n        }\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\n\n/**\n */\nexport class MissingJoinTableError extends Error {\n    name = \"MissingJoinTableError\";\n\n    constructor(entityMetadata: EntityMetadata, relation: RelationMetadata) {\n        super();\n\n        if (relation.inverseRelation) {\n            this.message = `JoinTable is missing on both sides of ${entityMetadata.name}#${relation.propertyName} and ` +\n                `${relation.inverseEntityMetadata.name}#${relation.inverseRelation.propertyName} many-to-many relationship. ` +\n                `You need to put decorator decorator on one of the sides.`;\n        } else {\n            this.message = `JoinTable is missing on ${entityMetadata.name}#${relation.propertyName} many-to-many relationship. ` +\n                `You need to put JoinTable decorator on it.`;\n        }\n    }\n\n}","/**\n * Thrown when consumer tries to use naming strategy that does not exist.\n */\nexport class NamingStrategyNotFoundError extends Error {\n    name = \"NamingStrategyNotFoundError\";\n\n    constructor(strategyName: string|Function, connectionName: string) {\n        super();\n        const name = strategyName instanceof Function ? (strategyName as any).name : strategyName;\n        this.message = `Naming strategy \"${name}\" was not found. Looks like this naming strategy does not ` +\n            `exist or it was not registered in current \"${connectionName}\" connection?`;\n        this.stack = new Error().stack;\n    }\n\n}","/**\n * Thrown when consumer tries to access repository before connection is established.\n */\nexport class NoConnectionForRepositoryError extends Error {\n    name = \"NoConnectionForRepositoryError\";\n\n    constructor(connectionName: string) {\n        super();\n        this.message = `Cannot get a Repository for \"${connectionName} connection, because connection with the database ` +\n            `is not established yet. Call connection#connect method to establish connection.`;\n        this.stack = new Error().stack;\n    }\n\n}","/**\n * Thrown . Theoretically can't be thrown.\n */\nexport class PersistedEntityNotFoundError extends Error {\n    name = \"PersistedEntityNotFoundError\";\n\n    constructor() {\n        super();\n        this.message = `Internal error. Persisted entity was not found in the list of prepared operated entities.`;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\n\n/**\n */\nexport class UsingJoinColumnIsNotAllowedError extends Error {\n    name = \"UsingJoinColumnIsNotAllowedError\";\n\n    constructor(entityMetadata: EntityMetadata, relation: RelationMetadata) {\n        super();\n        this.message = `Using JoinColumn on ${entityMetadata.name}#${relation.propertyName} is wrong. ` +\n            `You can use JoinColumn only on one-to-one and many-to-one relations.`;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\n\n/**\n */\nexport class UsingJoinColumnOnlyOnOneSideAllowedError extends Error {\n    name = \"UsingJoinColumnOnlyOnOneSideAllowedError\";\n\n    constructor(entityMetadata: EntityMetadata, relation: RelationMetadata) {\n        super();\n        this.message = `Using JoinColumn is allowed only on one side of the one-to-one relationship. ` +\n            `Both ${entityMetadata.name}#${relation.propertyName} and ${relation.inverseEntityMetadata.name}#${relation.inverseRelation!.propertyName} ` +\n            `has JoinTable decorators. Choose one of them and left JoinTable decorator only on it.`;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\n\n/**\n */\nexport class UsingJoinTableIsNotAllowedError extends Error {\n    name = \"UsingJoinTableIsNotAllowedError\";\n\n    constructor(entityMetadata: EntityMetadata, relation: RelationMetadata) {\n        super();\n        this.message = `Using JoinTable on ${entityMetadata.name}#${relation.propertyName} is wrong. ` +\n            `${entityMetadata.name}#${relation.propertyName} has ${relation.relationType} relation, ` +\n            `however you can use JoinTable only on many-to-many relations.`;\n    }\n\n}","import {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {RelationMetadata} from \"../metadata/RelationMetadata\";\n\n/**\n */\nexport class UsingJoinTableOnlyOnOneSideAllowedError extends Error {\n    name = \"UsingJoinTableOnlyOnOneSideAllowedError\";\n\n    constructor(entityMetadata: EntityMetadata, relation: RelationMetadata) {\n        super();\n        this.message = `Using JoinTable is allowed only on one side of the many-to-many relationship. ` +\n            `Both ${entityMetadata.name}#${relation.propertyName} and ${relation.inverseEntityMetadata.name}#${relation.inverseRelation!.propertyName} ` +\n            `has JoinTable decorators. Choose one of them and left JoinColumn decorator only on it.`;\n    }\n\n}","export interface JoinOptions {\n    limit?: number;\n}","/*import {TableSchema} from \"./schema/TableSchema\";\n\nexport class Schema {\n\n    createTable(name: string): TableSchema;\n    createTable(entity: Function): TableSchema;\n    createTable(nameOrEntity: Function|string): TableSchema {\n        return new TableSchema(nameOrEntity as string);\n    }\n\n    updateTable(table: TableSchema): Promise<void> {\n\n    }\n\n    dropTable(name: string): Promise<void>;\n    dropTable(entity: Function): Promise<void>;\n    dropTable(nameOrEntity: Function|string): Promise<void> {\n    }\n\n\n    hasTable(name: string): Promise<boolean>;\n    hasTable(entity: Function): Promise<boolean>;\n    hasTable(nameOrEntity: Function|string): Promise<boolean> {\n    }\n\n    getTables(): Promise<TableSchema[]> {\n\n    }\n\n\n    getTableNames(): Promise<string[]> {\n\n    }\n\n}*/"],"sourceRoot":"."}
##############################################
/src/connection/options-reader/ConnectionOptionsEnvReader.js-29-            schema: PlatformTools_1.PlatformTools.getEnvVariable("TYPEORM_SCHEMA"),
/src/connection/options-reader/ConnectionOptionsEnvReader.js:30:            extra: PlatformTools_1.PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA") ? JSON.parse(PlatformTools_1.PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA")) : undefined,
/src/connection/options-reader/ConnectionOptionsEnvReader.js-31-            synchronize: OrmUtils_1.OrmUtils.toBoolean(PlatformTools_1.PlatformTools.getEnvVariable("TYPEORM_SYNCHRONIZE")),
##############################################
/src/connection/options-reader/ConnectionOptionsEnvReader.js.map:1:{"version":3,"sources":["../../src/connection/options-reader/ConnectionOptionsEnvReader.ts"],"names":[],"mappings":"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","file":"ConnectionOptionsEnvReader.js","sourcesContent":["import {ConnectionOptions} from \"../ConnectionOptions\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {OrmUtils} from \"../../util/OrmUtils\";\n\n/**\n * Reads connection options from environment variables.\n * Environment variables can have only a single connection.\n * Its strongly required to define TYPEORM_CONNECTION env variable.\n */\nexport class ConnectionOptionsEnvReader {\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Reads connection options from environment variables.\n     */\n    read(): ConnectionOptions {\n        return {\n            type: PlatformTools.getEnvVariable(\"TYPEORM_CONNECTION\"),\n            url: PlatformTools.getEnvVariable(\"TYPEORM_URL\"),\n            host: PlatformTools.getEnvVariable(\"TYPEORM_HOST\"),\n            port: PlatformTools.getEnvVariable(\"TYPEORM_PORT\"),\n            username: PlatformTools.getEnvVariable(\"TYPEORM_USERNAME\"),\n            password: PlatformTools.getEnvVariable(\"TYPEORM_PASSWORD\"),\n            database: PlatformTools.getEnvVariable(\"TYPEORM_DATABASE\"),\n            sid: PlatformTools.getEnvVariable(\"TYPEORM_SID\"),\n            schema: PlatformTools.getEnvVariable(\"TYPEORM_SCHEMA\"),\n            extra: PlatformTools.getEnvVariable(\"TYPEORM_DRIVER_EXTRA\") ? JSON.parse(PlatformTools.getEnvVariable(\"TYPEORM_DRIVER_EXTRA\")) : undefined,\n            synchronize: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_SYNCHRONIZE\")),\n            dropSchema: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_DROP_SCHEMA\")),\n            migrationsRun: OrmUtils.toBoolean(PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS_RUN\")),\n            entities: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_ENTITIES\")),\n            migrations: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS\")),\n            subscribers: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_SUBSCRIBERS\")),\n            entitySchemas: this.stringToArray(PlatformTools.getEnvVariable(\"TYPEORM_ENTITY_SCHEMAS\")),\n            logging: this.transformLogging(PlatformTools.getEnvVariable(\"TYPEORM_LOGGING\")),\n            logger: PlatformTools.getEnvVariable(\"TYPEORM_LOGGER\"),\n            entityPrefix: PlatformTools.getEnvVariable(\"TYPEORM_ENTITY_PREFIX\"),\n            maxQueryExecutionTime: PlatformTools.getEnvVariable(\"TYPEORM_MAX_QUERY_EXECUTION_TIME\"),\n            cli: {\n                entitiesDir: PlatformTools.getEnvVariable(\"TYPEORM_ENTITIES_DIR\"),\n                migrationsDir: PlatformTools.getEnvVariable(\"TYPEORM_MIGRATIONS_DIR\"),\n                subscribersDir: PlatformTools.getEnvVariable(\"TYPEORM_SUBSCRIBERS_DIR\"),\n            }\n        };\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Transforms logging string into real logging value connection requires.\n     */\n    protected transformLogging(logging: string): any {\n        if (logging === \"true\" || logging === \"TRUE\" || logging === \"1\")\n            return true;\n        if (logging === \"all\")\n            return \"all\";\n\n        return this.stringToArray(logging);\n    }\n\n    /**\n     * Converts a string which contains multiple elements split by comma into a string array of strings.\n     */\n    protected stringToArray(variable?: string) {\n        if (!variable)\n            return [];\n        return variable.split(\",\").map(str => str.trim());\n    }\n\n}\n"],"sourceRoot":"../.."}
##############################################
/src/entity-manager/MongoEntityManager.js-493-        var metadata = this.connection.getMetadata(entityClassOrName);
/src/entity-manager/MongoEntityManager.js:494:        return this.queryRunner.rename(metadata.tableName, newName, options);
/src/entity-manager/MongoEntityManager.js-495-    };
##############################################
/src/entity-manager/MongoEntityManager.js.map:1:{"version":3,"sources":["../../src/entity-manager/MongoEntityManager.ts"],"names":[],"mappings":"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","file":"MongoEntityManager.js","sourcesContent":["import {Connection} from \"../connection/Connection\";\nimport {EntityManager} from \"./EntityManager\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    CursorResult,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCallback,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    MongoError,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"../driver/mongodb/typings\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {MongoQueryRunner} from \"../driver/mongodb/MongoQueryRunner\";\nimport {MongoDriver} from \"../driver/mongodb/MongoDriver\";\nimport {DocumentToEntityTransformer} from \"../query-builder/transformer/DocumentToEntityTransformer\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {FindOptionsUtils} from \"../find-options/FindOptionsUtils\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\n\n/**\n * Entity manager supposed to work with any entity, automatically find its repository and call its methods,\n * whatever entity type are you passing.\n *\n * This implementation is used for MongoDB driver which has some specifics in its EntityManager.\n */\nexport class MongoEntityManager extends EntityManager {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n    }\n\n    // -------------------------------------------------------------------------\n    // Overridden Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets query runner used to execute queries.\n     */\n    get queryRunner(): MongoQueryRunner {\n        return (this.connection.driver as MongoDriver).queryRunner!;\n    }\n\n    // -------------------------------------------------------------------------\n    // Overridden Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    async find<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        return cursor.toArray();\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    async findAndCount<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<[ Entity[], number ]> {\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        const [results, count] = await Promise.all<any>([\n            cursor.toArray(),\n            this.count(entityClassOrName, query),\n        ]);\n        return [results, parseInt(count)];\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    async findByIds<Entity>(entityClassOrName: ObjectType<Entity>|string, ids: any[], optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        const query = this.convertFindManyOptionsOrConditionsToMongodbQuery(optionsOrConditions) || {};\n        const objectIdInstance = PlatformTools.load(\"mongodb\").ObjectID;\n        query[\"_id\"] = { $in: ids.map(id => {\n            if (id instanceof objectIdInstance)\n                return id;\n\n            return id[metadata.objectIdColumn!.propertyName];\n        }) };\n\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions)) {\n            if (optionsOrConditions.skip)\n                cursor.skip(optionsOrConditions.skip);\n            if (optionsOrConditions.take)\n                cursor.limit(optionsOrConditions.take);\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n        return await cursor.toArray();\n    }\n\n    /**\n     * Finds first entity that matches given conditions and/or find options.\n     */\n    async findOne<Entity>(entityClassOrName: ObjectType<Entity>|string, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const query = this.convertFindOneOptionsOrConditionsToMongodbQuery(optionsOrConditions);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions)) {\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n\n        // const result = await cursor.limit(1).next();\n        const result = await cursor.limit(1).toArray();\n        return result.length > 0 ? result[0] : undefined;\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    async findOneById<Entity>(entityClassOrName: ObjectType<Entity>|string, id: any, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        const query = this.convertFindOneOptionsOrConditionsToMongodbQuery(optionsOrConditions) || {};\n        const objectIdInstance = PlatformTools.load(\"mongodb\").ObjectID;\n        query[\"_id\"] = (id instanceof objectIdInstance)\n            ? id\n            : new objectIdInstance(id);\n        const cursor = await this.createEntityCursor(entityClassOrName, query);\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions)) {\n            if (optionsOrConditions.order)\n                cursor.sort(this.convertFindOptionsOrderToOrderCriteria(optionsOrConditions.order));\n        }\n\n        // const result = await cursor.limit(1).next();\n        const result = await cursor.limit(1).toArray();\n        return result.length > 0 ? result[0] : undefined;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    createCursor<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral): Cursor<Entity> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.cursor(metadata.tableName, query);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     * This returns modified version of cursor that transforms each result into Entity model.\n     */\n    createEntityCursor<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral): Cursor<Entity> {\n\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        const cursor = this.createCursor(entityClassOrName, query);\n        const ParentCursor = PlatformTools.load(\"mongodb\").Cursor;\n        cursor.toArray = function (callback?: MongoCallback<Entity[]>) {\n            if (callback) {\n                ParentCursor.prototype.toArray.call(this, (error: MongoError, results: Entity[]): void => {\n                    if (error) {\n                        callback(error, results);\n                        return;\n                    }\n\n                    const transformer = new DocumentToEntityTransformer();\n                    return callback(error, transformer.transformAll(results, metadata));\n                });\n            } else {\n                return ParentCursor.prototype.toArray.call(this).then((results: Entity[]) => {\n                    const transformer = new DocumentToEntityTransformer();\n                    return transformer.transformAll(results, metadata);\n                });\n            }\n        };\n        cursor.next = function (callback?: MongoCallback<CursorResult>) {\n            if (callback) {\n                ParentCursor.prototype.next.call(this, (error: MongoError, result: CursorResult): void => {\n                    if (error || !result) {\n                        callback(error, result);\n                        return;\n                    }\n\n                    const transformer = new DocumentToEntityTransformer();\n                    return callback(error, transformer.transform(result, metadata));\n                });\n            } else {\n                return ParentCursor.prototype.next.call(this).then((result: Entity) => {\n                    if (!result) return result;\n                    const transformer = new DocumentToEntityTransformer();\n                    return transformer.transform(result, metadata);\n                });\n            }\n        };\n        return cursor;\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate<Entity>(entityClassOrName: ObjectType<Entity>|string, pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<Entity> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.aggregate(metadata.tableName, pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    bulkWrite<Entity>(entityClassOrName: ObjectType<Entity>|string, operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.bulkWrite(metadata.tableName, operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    count<Entity>(entityClassOrName: ObjectType<Entity>|string, query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.count(metadata.tableName, query, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    createCollectionIndex<Entity>(entityClassOrName: ObjectType<Entity>|string, fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.createCollectionIndex(metadata.tableName, fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error.\n     * Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    createCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string, indexSpecs: ObjectLiteral[]): Promise<void> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.createCollectionIndexes(metadata.tableName, indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    deleteMany<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.deleteMany(metadata.tableName, query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    deleteOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.deleteOne(metadata.tableName, query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    distinct<Entity>(entityClassOrName: ObjectType<Entity>|string, key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.distinct(metadata.tableName, key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    dropCollectionIndex<Entity>(entityClassOrName: ObjectType<Entity>|string, indexName: string, options?: CollectionOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.dropCollectionIndex(metadata.tableName, indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    dropCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.dropCollectionIndexes(metadata.tableName);\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndDelete<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndDelete(metadata.tableName, query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndReplace<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndReplace(metadata.tableName, query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndUpdate<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.findOneAndUpdate(metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    geoHaystackSearch<Entity>(entityClassOrName: ObjectType<Entity>|string, x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.geoHaystackSearch(metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    geoNear<Entity>(entityClassOrName: ObjectType<Entity>|string, x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.geoNear(metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    group<Entity>(entityClassOrName: ObjectType<Entity>|string, keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.group(metadata.tableName, keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexes(metadata.tableName);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexExists<Entity>(entityClassOrName: ObjectType<Entity>|string, indexes: string|string[]): Promise<boolean> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexExists(metadata.tableName, indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    collectionIndexInformation<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { full: boolean }): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.collectionIndexInformation(metadata.tableName, options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: CollectionOptions): OrderedBulkOperation {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.initializeOrderedBulkOp(metadata.tableName, options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: CollectionOptions): UnorderedBulkOperation {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.initializeUnorderedBulkOp(metadata.tableName, options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    insertMany<Entity>(entityClassOrName: ObjectType<Entity>|string, docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.insertMany(metadata.tableName, docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    insertOne<Entity>(entityClassOrName: ObjectType<Entity>|string, doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.insertOne(metadata.tableName, doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    isCapped<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.isCapped(metadata.tableName);\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.listCollectionIndexes(metadata.tableName, options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    mapReduce<Entity>(entityClassOrName: ObjectType<Entity>|string, map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.mapReduce(metadata.tableName, map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    parallelCollectionScan<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: ParallelCollectionScanOptions): Promise<Cursor<Entity>[]> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.parallelCollectionScan(metadata.tableName, options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    reIndex<Entity>(entityClassOrName: ObjectType<Entity>|string): Promise<any> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.reIndex(metadata.tableName);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    rename<Entity>(entityClassOrName: ObjectType<Entity>|string, newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.rename(metadata.tableName, newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    replaceOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.replaceOne(metadata.tableName, query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    stats<Entity>(entityClassOrName: ObjectType<Entity>|string, options?: { scale: number }): Promise<CollStats> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.stats(metadata.tableName, options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    updateMany<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.updateMany(metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    updateOne<Entity>(entityClassOrName: ObjectType<Entity>|string, query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        const metadata = this.connection.getMetadata(entityClassOrName);\n        return this.queryRunner.updateOne(metadata.tableName, query, update, options);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Converts FindManyOptions to mongodb query.\n     */\n    protected convertFindManyOptionsOrConditionsToMongodbQuery<Entity>(optionsOrConditions: FindManyOptions<Entity>|Partial<Entity>|undefined): ObjectLiteral|undefined {\n        if (!optionsOrConditions)\n            return undefined;\n\n        if (FindOptionsUtils.isFindManyOptions(optionsOrConditions))\n            // If where condition is passed as a string which contains sql we have to ignore\n            // as mongo is not a sql database\n            return typeof optionsOrConditions.where === \"string\"\n                ? {}\n                : optionsOrConditions.where;\n\n        return optionsOrConditions;\n    }\n\n    /**\n     * Converts FindOneOptions to mongodb query.\n     */\n    protected convertFindOneOptionsOrConditionsToMongodbQuery<Entity>(optionsOrConditions: FindOneOptions<Entity>|Partial<Entity>|undefined): ObjectLiteral|undefined {\n        if (!optionsOrConditions)\n            return undefined;\n\n        if (FindOptionsUtils.isFindOneOptions(optionsOrConditions))\n            // If where condition is passed as a string which contains sql we have to ignore\n            // as mongo is not a sql database\n            return typeof optionsOrConditions.where === \"string\"\n                ? {}\n                : optionsOrConditions.where;\n\n        return optionsOrConditions;\n    }\n\n    /**\n     * Converts FindOptions into mongodb order by criteria.\n     */\n    protected convertFindOptionsOrderToOrderCriteria(order: ObjectLiteral) {\n        return Object.keys(order).reduce((orderCriteria, key) => {\n            switch (order[key]) {\n                case \"DESC\":\n                    orderCriteria[key] = -1;\n                    break;\n                case \"ASC\":\n                    orderCriteria[key] = 1;\n                    break;\n                default:\n                    orderCriteria[key] = order[key];\n            }\n            return orderCriteria;\n        }, {} as ObjectLiteral);\n    }\n\n}"],"sourceRoot":".."}
##############################################
/src/commands/InitCommand.js.map:1:{"version":3,"sources":["../../src/commands/InitCommand.ts"],"names":[],"mappings":"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","file":"InitCommand.js","sourcesContent":["import {CommandUtils} from \"./CommandUtils\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nconst chalk = require(\"chalk\");\nimport * as path from \"path\";\n\n/**\n * Generates a new project with TypeORM.\n */\nexport class InitCommand {\n    command = \"init\";\n    describe = \"Generates initial TypeORM project structure. \" +\n        \"If name specified then creates files inside directory called as name. \" +\n        \"If its not specified then creates files inside current directory.\";\n\n    builder(yargs: any) {\n        return yargs\n            .option(\"c\", {\n                alias: \"connection\",\n                default: \"default\",\n                describe: \"Name of the connection on which to run a query\"\n            })\n            .option(\"n\", {\n                alias: \"name\",\n                describe: \"Name of the project directory.\"\n            })\n            .option(\"db\", {\n                alias: \"database\",\n                describe: \"Database type you'll use in your project.\"\n            })\n            .option(\"express\", {\n                describe: \"Indicates if express should be included in the project.\"\n            })\n            .option(\"docker\", {\n                describe: \"Set to true if docker-compose must be generated as well. False by default.\"\n            });\n    }\n\n    async handler(argv: any) {\n        try {\n            const database = argv.database || \"mysql\";\n            const isExpress = argv.express !== undefined ? true : false;\n            const isDocker = argv.docker !== undefined ? true : false;\n            const basePath = process.cwd() + (argv.name ? (\"/\" + argv.name) : \"\");\n            const projectName = argv.name ? path.basename(argv.name) : undefined;\n            await CommandUtils.createFile(basePath + \"/package.json\", InitCommand.getPackageJsonTemplate(projectName), false);\n            if (isDocker)\n                await CommandUtils.createFile(basePath + \"/docker-compose.yml\", InitCommand.getDockerComposeTemplate(database), false);\n            await CommandUtils.createFile(basePath + \"/.gitignore\", InitCommand.getGitIgnoreFile());\n            await CommandUtils.createFile(basePath + \"/README.md\", InitCommand.getReadmeTemplate({ docker: isDocker }), false);\n            await CommandUtils.createFile(basePath + \"/tsconfig.json\", InitCommand.getTsConfigTemplate());\n            await CommandUtils.createFile(basePath + \"/ormconfig.json\", InitCommand.getOrmConfigTemplate(database));\n            await CommandUtils.createFile(basePath + \"/src/entity/User.ts\", InitCommand.getUserEntityTemplate(database));\n            await CommandUtils.createFile(basePath + \"/src/index.ts\", InitCommand.getAppIndexTemplate(isExpress));\n            await CommandUtils.createDirectories(basePath + \"/src/migration\");\n\n            // generate extra files for express application\n            if (isExpress) {\n                await CommandUtils.createFile(basePath + \"/src/routes.ts\", InitCommand.getRoutesTemplate());\n                await CommandUtils.createFile(basePath + \"/src/controller/UserController.ts\", InitCommand.getControllerTemplate());\n            }\n\n            const packageJsonContents = await CommandUtils.readFile(basePath + \"/package.json\");\n            await CommandUtils.createFile(basePath + \"/package.json\", InitCommand.appendPackageJson(packageJsonContents, database, isExpress));\n\n            if (argv.name) {\n                console.log(chalk.green(`Project created inside ${chalk.blue(basePath)} directory.`));\n\n            } else {\n                console.log(chalk.green(`Project created inside current directory.`));\n            }\n\n        } catch (err) {\n            console.log(chalk.black.bgRed(\"Error during project initialization:\"));\n            console.error(err);\n            process.exit(1);\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets contents of the ormconfig file.\n     */\n    protected static getOrmConfigTemplate(database: string): string {\n        const options: ObjectLiteral = { };\n        switch (database) {\n            case \"mysql\":\n                Object.assign(options, {\n                    type: \"mysql\",\n                    host: \"localhost\",\n                    port: 3306,\n                    username: \"test\",\n                    password: \"test\",\n                    database: \"test\",\n                });\n                break;\n            case \"mariadb\":\n                Object.assign(options, {\n                    type: \"mariadb\",\n                    host: \"localhost\",\n                    port: 3306,\n                    username: \"test\",\n                    password: \"test\",\n                    database: \"test\",\n                });\n                break;\n            case \"sqlite\":\n                Object.assign(options, {\n                    type: \"sqlite\",\n                    \"database\": \"database.db\",\n                });\n                break;\n            case \"postgres\":\n                Object.assign(options, {\n                    \"type\": \"postgres\",\n                    \"host\": \"localhost\",\n                    \"port\": 5432,\n                    \"username\": \"test\",\n                    \"password\": \"test\",\n                    \"database\": \"test\",\n                });\n                break;\n            case \"mssql\":\n                Object.assign(options, {\n                    \"type\": \"mssql\",\n                    \"host\": \"localhost\",\n                    \"username\": \"sa\",\n                    \"password\": \"Admin12345\",\n                    \"database\": \"tempdb\",\n                });\n                break;\n            case \"oracle\":\n                Object.assign(options, {\n                    \"type\": \"oracle\",\n                    \"host\": \"localhost\",\n                    \"username\": \"system\",\n                    \"password\": \"oracle\",\n                    \"port\": 1521,\n                    \"sid\": \"xe.oracle.docker\",\n                });\n                break;\n            case \"mongodb\":\n                Object.assign(options, {\n                    \"type\": \"mongodb\",\n                    \"database\": \"test\",\n                });\n                break;\n        }\n        Object.assign(options, {\n            synchronize: true,\n            logging: false,\n            entities: [\n                \"src/entity/**/*.ts\"\n            ],\n            migrations: [\n                \"src/migration/**/*.ts\"\n            ],\n            subscribers: [\n                \"src/subscriber/**/*.ts\"\n            ],\n            cli: {\n                entitiesDir: \"src/entity\",\n                migrationsDir: \"src/migration\",\n                subscribersDir: \"src/subscriber\"\n            }\n        });\n        return JSON.stringify(options, undefined, 3);\n    }\n\n    /**\n     * Gets contents of the ormconfig file.\n     */\n    protected static getTsConfigTemplate(): string {\n        return JSON.stringify({\n            compilerOptions: {\n                lib: [\"es5\", \"es6\"],\n                target: \"es5\",\n                module: \"commonjs\",\n                moduleResolution: \"node\",\n                outDir: \"./build\",\n                emitDecoratorMetadata: true,\n                experimentalDecorators: true,\n                sourceMap: true\n            }\n        }\n        , undefined, 3);\n    }\n\n    /**\n     * Gets contents of the .gitignore file.\n     */\n    protected static getGitIgnoreFile(): string {\n        return `.idea/\n.vscode/\nnode_modules/\nbuild/\ntmp/\ntemp/`;\n    }\n\n    /**\n     * Gets contents of the user entity.\n     */\n    protected static getUserEntityTemplate(database: string): string {\n        return `import {Entity, ${ database === \"mongodb\" ? \"ObjectIdColumn, ObjectID\" : \"PrimaryGeneratedColumn\" }, Column} from \"typeorm\";\n\n@Entity()\nexport class User {\n\n    ${ database === \"mongodb\" ? \"@ObjectIdColumn()\" : \"@PrimaryGeneratedColumn()\" }\n    id: ${ database === \"mongodb\" ? \"ObjectID\" : \"number\" };\n\n    @Column()\n    firstName: string;\n\n    @Column()\n    lastName: string;\n\n    @Column()\n    age: number;\n\n}\n`;\n    }\n\n    /**\n     * Gets contents of the route file (used when express is enabled).\n     */\n    protected static getRoutesTemplate(): string {\n        return `import {UserController} from \"./controller/UserController\";\n\nexport const Routes = [{\n    method: \"get\",\n    route: \"/users\",\n    controller: UserController,\n    action: \"all\"\n}, {\n    method: \"get\",\n    route: \"/users/:id\",\n    controller: UserController,\n    action: \"one\"\n}, {\n    method: \"post\",\n    route: \"/users\",\n    controller: UserController,\n    action: \"save\"\n}, {\n    method: \"delete\",\n    route: \"/users\",\n    controller: UserController,\n    action: \"remove\"\n}];`;\n    }\n\n    /**\n     * Gets contents of the user controller file (used when express is enabled).\n     */\n    protected static getControllerTemplate(): string {\n        return `import {getRepository} from \"typeorm\";\nimport {NextFunction, Request, Response} from \"express\";\nimport {User} from \"../entity/User\";\n\nexport class UserController {\n\n    private userRepository = getRepository(User);\n\n    async all(request: Request, response: Response, next: NextFunction) {\n        return this.userRepository.find();\n    }\n\n    async one(request: Request, response: Response, next: NextFunction) {\n        return this.userRepository.findOneById(request.params.id);\n    }\n\n    async save(request: Request, response: Response, next: NextFunction) {\n        return this.userRepository.save(request.body);\n    }\n\n    async remove(request: Request, response: Response, next: NextFunction) {\n        await this.userRepository.removeById(request.params.id);\n    }\n\n}`;\n    }\n\n    /**\n     * Gets contents of the main (index) application file.\n     */\n    protected static getAppIndexTemplate(express: boolean): string {\n        if (express) {\n            return `import \"reflect-metadata\";\nimport {createConnection} from \"typeorm\";\nimport * as express from \"express\";\nimport * as bodyParser from \"body-parser\";\nimport {Request, Response} from \"express\";\nimport {Routes} from \"./routes\";\nimport {User} from \"./entity/User\";\n\ncreateConnection().then(async connection => {\n\n    // create express app\n    const app = express();\n    app.use(bodyParser.json());\n\n    // register express routes from defined application routes\n    Routes.forEach(route => {\n        (app as any)[route.method](route.route, (req: Request, res: Response, next: Function) => {\n            const result = (new (route.controller as any))[route.action](req, res, next);\n            if (result instanceof Promise) {\n                result.then(result => result !== null && result !== undefined ? res.send(result) : undefined);\n\n            } else if (result !== null && result !== undefined) {\n                res.json(result);\n            }\n        });\n    });\n\n    // setup express app here\n    // ...\n\n    // start express server\n    app.listen(3000);\n\n    // insert new users for test\n    await connection.manager.save(connection.manager.create(User, {\n        firstName: \"Timber\",\n        lastName: \"Saw\",\n        age: 27\n    }));\n    await connection.manager.save(connection.manager.create(User, {\n        firstName: \"Phantom\",\n        lastName: \"Assassin\",\n        age: 24\n    }));\n\n    console.log(\"Express server has started on port 3000. Open http://localhost:3000/users to see results\");\n\n}).catch(error => console.log(error));\n`;\n\n        } else {\n            return `import \"reflect-metadata\";\nimport {createConnection} from \"typeorm\";\nimport {User} from \"./entity/User\";\n\ncreateConnection().then(async connection => {\n\n    console.log(\"Inserting a new user into the database...\");\n    const user = new User();\n    user.firstName = \"Timber\";\n    user.lastName = \"Saw\";\n    user.age = 25;\n    await connection.manager.save(user);\n    console.log(\"Saved a new user with id: \" + user.id);\n    \n    console.log(\"Loading users from the database...\");\n    const users = await connection.manager.find(User);\n    console.log(\"Loaded users: \", users);\n     \n    console.log(\"Here you can setup and run express/koa/any other framework.\");\n    \n}).catch(error => console.log(error));\n`;\n        }\n    }\n\n    /**\n     * Gets contents of the new package.json file.\n     */\n    protected static getPackageJsonTemplate(projectName?: string): string {\n        return JSON.stringify({\n            name: projectName || \"new-typeorm-project\",\n            version: \"0.0.1\",\n            description: \"Awesome project developed with TypeORM.\",\n            devDependencies: {\n            },\n            dependencies: {\n            },\n            scripts: {\n            }\n        }, undefined, 3);\n    }\n\n    /**\n     * Gets contents of the new docker-compose.yml file.\n     */\n    protected static getDockerComposeTemplate(database: string): string {\n\n        switch (database) {\n            case \"mysql\":\n                return `version: '3'\nservices:\n\n  mysql:\n    image: \"mysql:5.7.10\"\n    ports:\n      - \"3306:3306\"\n    environment:\n      MYSQL_ROOT_PASSWORD: \"admin\"\n      MYSQL_USER: \"test\"\n      MYSQL_PASSWORD: \"test\"\n      MYSQL_DATABASE: \"test\"\n\n`;\n            case \"mariadb\":\n                return `version: '3'\nservices:\n\n  mariadb:\n    image: \"mariadb:10.1.16\"\n    ports:\n      - \"3306:3306\"\n    environment:\n      MYSQL_ROOT_PASSWORD: \"admin\"\n      MYSQL_USER: \"test\"\n      MYSQL_PASSWORD: \"test\"\n      MYSQL_DATABASE: \"test\"\n\n`;\n            case \"postgres\":\n                return `version: '3'\nservices:\n\n  postgres:\n    image: \"postgres:9.6.1\"\n    ports:\n      - \"5432:5432\"\n    environment:\n      POSTGRES_USER: \"test\"\n      POSTGRES_PASSWORD: \"test\"\n      POSTGRES_DB: \"test\"\n\n`;\n            case \"sqlite\":\n                return `version: '3'\nservices:\n`;\n            case \"oracle\":\n                throw new Error(`You cannot initialize a project with docker for Oracle driver yet.`); // todo: implement for oracle as well\n\n            case \"mssql\":\n                return `version: '3'\nservices:\n\n  mssql:\n    image: \"microsoft/mssql-server-linux:rc2\"\n    ports:\n      - \"1433:1433\"\n    environment:\n      SA_PASSWORD: \"Admin12345\"\n      ACCEPT_EULA: \"Y\"\n\n`;\n            case \"mongodb\":\n                return `version: '3'\nservices:\n\n  mongodb:\n    image: \"mongo:3.4.1\"\n    container_name: \"typeorm-mongodb\"\n    ports:\n      - \"27017:27017\"\n\n`;\n        }\n        return \"\";\n    }\n\n    /**\n     * Gets contents of the new readme.md file.\n     */\n    protected static getReadmeTemplate(options: { docker: boolean }): string {\n        let template = `# Awesome Project Build with TypeORM\n        \nSteps to run this project:\n\n1. Run \\`npm i\\` command\n`;\n\n        if (options.docker) {\n            template += `2. Run \\`docker-compose up\\` command\n`;\n        } else {\n            template += `2. Setup database settings inside \\`ormconfig.json\\` file\n`;\n        }\n\n        template += `3. Run \\`npm start\\` command\n`;\n        return template;\n    }\n\n    /**\n     * Appends to a given package.json template everything needed.\n     */\n    protected static appendPackageJson(packageJsonContents: string, database: string, express: boolean /*, docker: boolean*/): string {\n        const packageJson = JSON.parse(packageJsonContents);\n\n        if (!packageJson.devDependencies) packageJson.devDependencies = {};\n        Object.assign(packageJson.devDependencies, {\n            \"ts-node\": \"3.3.0\",\n            \"@types/node\": \"^8.0.29\",\n            \"typescript\": \"2.5.2\"\n        });\n\n        if (!packageJson.dependencies) packageJson.dependencies = {};\n        Object.assign(packageJson.dependencies, {\n            \"typeorm\": require(\"../package.json\").version,\n            \"reflect-metadata\": \"^0.1.10\"\n        });\n\n        switch (database) {\n            case \"mysql\":\n            case \"mariadb\":\n                packageJson.dependencies[\"mysql\"] = \"^2.14.1\";\n                break;\n            case \"postgres\":\n                packageJson.dependencies[\"pg\"] = \"^7.3.0\";\n                break;\n            case \"sqlite\":\n                packageJson.dependencies[\"sqlite3\"] = \"^3.1.10\";\n                break;\n            case \"oracle\":\n                packageJson.dependencies[\"oracledb\"] = \"^1.13.1\";\n                break;\n            case \"mssql\":\n                packageJson.dependencies[\"mssql\"] = \"^4.0.4\";\n                break;\n            case \"mongodb\":\n                packageJson.dependencies[\"mongodb\"] = \"^2.2.31\";\n                break;\n        }\n\n        if (express) {\n            packageJson.dependencies[\"express\"] = \"^4.15.4\";\n            packageJson.dependencies[\"body-parser\"] = \"^1.18.1\";\n        }\n\n        if (!packageJson.scripts) packageJson.scripts = {};\n        Object.assign(packageJson.scripts, {\n            start: /*(docker ? \"docker-compose up && \" : \"\") + */\"ts-node src/index.ts\"\n        });\n        return JSON.stringify(packageJson, undefined, 3);\n    }\n\n}\n"],"sourceRoot":".."}
##############################################
/src/commands/CommandUtils.js.map:1:{"version":3,"sources":["../../src/commands/CommandUtils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uBAAyB;AACzB,2BAA6B;AAC7B,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEjC;;GAEG;AACH;IAAA;IA+BA,CAAC;IA7BG;;OAEG;IACI,8BAAiB,GAAxB,UAAyB,SAAiB;QACtC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,EAAE,EAAE,IAAI,IAAK,OAAA,MAAM,CAAC,SAAS,EAAE,UAAC,GAAQ,IAAK,OAAA,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAtB,CAAsB,CAAC,EAAvD,CAAuD,CAAC,CAAC;IAC9F,CAAC;IAED;;OAEG;IACU,uBAAU,GAAvB,UAAwB,QAAgB,EAAE,OAAe,EAAE,QAAwB;QAAxB,yBAAA,EAAA,eAAwB;;;;4BAC/E,qBAAM,YAAY,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAA;;wBAA5D,SAA4D,CAAC;wBAC7D,sBAAO,IAAI,OAAO,CAAO,UAAC,EAAE,EAAE,IAAI;gCAC9B,EAAE,CAAC,CAAC,QAAQ,KAAK,KAAK,IAAI,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;oCAC9C,MAAM,CAAC,EAAE,EAAE,CAAC;gCAEhB,EAAE,CAAC,SAAS,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAtB,CAAsB,CAAC,CAAC;4BACnE,CAAC,CAAC,EAAC;;;;KACN;IAED;;OAEG;IACU,qBAAQ,GAArB,UAAsB,QAAgB;;;gBAClC,sBAAO,IAAI,OAAO,CAAS,UAAC,EAAE,EAAE,IAAI;wBAChC,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,UAAC,GAAG,EAAE,IAAI,IAAK,OAAA,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAArC,CAAqC,CAAC,CAAC;oBAChF,CAAC,CAAC,EAAC;;;KACN;IAEL,mBAAC;AAAD,CA/BA,AA+BC,IAAA;AA/BY,oCAAY","file":"CommandUtils.js","sourcesContent":["import * as fs from \"fs\";\nimport * as path from \"path\";\nconst mkdirp = require(\"mkdirp\");\n\n/**\n * Command line utils functions.\n */\nexport class CommandUtils {\n\n    /**\n     * Creates directories recursively.\n     */\n    static createDirectories(directory: string) {\n        return new Promise((ok, fail) => mkdirp(directory, (err: any) => err ? fail(err) : ok()));\n    }\n\n    /**\n     * Creates a file with the given content in the given path.\n     */\n    static async createFile(filePath: string, content: string, override: boolean = true): Promise<void> {\n        await CommandUtils.createDirectories(path.dirname(filePath));\n        return new Promise<void>((ok, fail) => {\n            if (override === false && fs.existsSync(filePath))\n                return ok();\n\n            fs.writeFile(filePath, content, err => err ? fail(err) : ok());\n        });\n    }\n\n    /**\n     * Reads everything from a given file and returns its content as a string.\n     */\n    static async readFile(filePath: string): Promise<string> {\n        return new Promise<string>((ok, fail) => {\n            fs.readFile(filePath, (err, data) => err ? fail(err) : ok(data.toString()));\n        });\n    }\n\n}"],"sourceRoot":".."}
##############################################
/src/commands/InitCommand.js-121-                        _a.label = 13;
/src/commands/InitCommand.js:122:                    case 13: return [4 /*yield*/, CommandUtils_1.CommandUtils.readFile(basePath + "/package.json")];
/src/commands/InitCommand.js-123-                    case 14:
##############################################
/src/commands/InitCommand.js-341-    InitCommand.appendPackageJson = function (packageJsonContents, database, express /*, docker: boolean*/) {
/src/commands/InitCommand.js:342:        var packageJson = JSON.parse(packageJsonContents);
/src/commands/InitCommand.js-343-        if (!packageJson.devDependencies)
##############################################
/src/commands/CommandUtils.js-66-                                    return ok();
/src/commands/CommandUtils.js:67:                                fs.writeFile(filePath, content, function (err) { return err ? fail(err) : ok(); });
/src/commands/CommandUtils.js-68-                            })];
##############################################
/src/commands/CommandUtils.js-79-                return [2 /*return*/, new Promise(function (ok, fail) {
/src/commands/CommandUtils.js:80:                        fs.readFile(filePath, function (err, data) { return err ? fail(err) : ok(data.toString()); });
/src/commands/CommandUtils.js-81-                    })];
##############################################
/src/query-builder/SelectQueryBuilder.js.map:1:{"version":3,"sources":["../../src/query-builder/SelectQueryBuilder.ts"],"names":[],"mappings":"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","file":"SelectQueryBuilder.js","sourcesContent":["import {RawSqlResultsToEntityTransformer} from \"./transformer/RawSqlResultsToEntityTransformer\";\nimport {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {SqlServerDriver} from \"../driver/sqlserver/SqlServerDriver\";\nimport {PessimisticLockTransactionRequiredError} from \"../error/PessimisticLockTransactionRequiredError\";\nimport {NoVersionOrUpdateDateColumnError} from \"../error/NoVersionOrUpdateDateColumnError\";\nimport {OptimisticLockVersionMismatchError} from \"../error/OptimisticLockVersionMismatchError\";\nimport {OptimisticLockCanNotBeUsedError} from \"../error/OptimisticLockCanNotBeUsedError\";\nimport {JoinAttribute} from \"./JoinAttribute\";\nimport {RelationIdAttribute} from \"./relation-id/RelationIdAttribute\";\nimport {RelationCountAttribute} from \"./relation-count/RelationCountAttribute\";\nimport {RelationIdLoader} from \"./relation-id/RelationIdLoader\";\nimport {RelationIdMetadataToAttributeTransformer} from \"./relation-id/RelationIdMetadataToAttributeTransformer\";\nimport {RelationCountLoader} from \"./relation-count/RelationCountLoader\";\nimport {RelationCountMetadataToAttributeTransformer} from \"./relation-count/RelationCountMetadataToAttributeTransformer\";\nimport {Broadcaster} from \"../subscriber/Broadcaster\";\nimport {QueryBuilder} from \"./QueryBuilder\";\nimport {ReadStream} from \"../platform/PlatformTools\";\nimport {LockNotSupportedOnGivenDriverError} from \"../error/LockNotSupportedOnGivenDriverError\";\nimport {MysqlDriver} from \"../driver/mysql/MysqlDriver\";\nimport {PostgresDriver} from \"../driver/postgres/PostgresDriver\";\nimport {OracleDriver} from \"../driver/oracle/OracleDriver\";\nimport {SelectQuery} from \"./SelectQuery\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {ColumnMetadata} from \"../metadata/ColumnMetadata\";\nimport {OrderByCondition} from \"../find-options/OrderByCondition\";\nimport {QueryExpressionMap} from \"./QueryExpressionMap\";\nimport {ObjectType} from \"../common/ObjectType\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {WhereExpression} from \"./WhereExpression\";\nimport {Brackets} from \"./Brackets\";\nimport {AbstractSqliteDriver} from \"../driver/sqlite-abstract/AbstractSqliteDriver\";\nimport {QueryResultCacheOptions} from \"../cache/QueryResultCacheOptions\";\nimport {OffsetWithoutLimitNotSupportedError} from \"../error/OffsetWithoutLimitNotSupportedError\";\n\n/**\n * Allows to build complex sql queries in a fashion way and execute those queries.\n */\nexport class SelectQueryBuilder<Entity> extends QueryBuilder<Entity> implements WhereExpression {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets generated sql query without parameters being replaced.\n     */\n    getQuery(): string {\n        let sql = this.createSelectExpression();\n        sql += this.createJoinExpression();\n        sql += this.createWhereExpression();\n        sql += this.createGroupByExpression();\n        sql += this.createHavingExpression();\n        sql += this.createOrderByExpression();\n        sql += this.createLimitOffsetExpression();\n        sql += this.createLockExpression();\n        sql = this.createLimitOffsetOracleSpecificExpression(sql);\n        sql = sql.trim();\n        if (this.expressionMap.subQuery)\n            sql = \"(\" + sql + \")\";\n        return sql;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a subquery - query that can be used inside other queries.\n     */\n    subQuery(): SelectQueryBuilder<any> {\n        const qb = this.createQueryBuilder();\n        qb.expressionMap.subQuery = true;\n        qb.expressionMap.parentQueryBuilder = this;\n        return qb;\n    }\n\n    /**\n     * Creates SELECT query.\n     * Replaces all previous selections if they exist.\n     */\n    select(): this;\n\n    /**\n     * Creates SELECT query.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, selectionAliasName?: string): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string, selectionAliasName?: string): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection: string[]): this;\n\n    /**\n     * Creates SELECT query and selects given data.\n     * Replaces all previous selections if they exist.\n     */\n    select(selection?: string|string[]|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), selectionAliasName?: string): SelectQueryBuilder<Entity> {\n        this.expressionMap.queryType = \"select\";\n        if (selection instanceof Array) {\n            this.expressionMap.selects = selection.map(selection => ({ selection: selection }));\n\n        } else if (selection instanceof Function) {\n            const subQueryBuilder = selection(this.subQuery());\n            this.setParameters(subQueryBuilder.getParameters());\n            this.expressionMap.selects.push({ selection: subQueryBuilder.getQuery(), aliasName: selectionAliasName });\n\n        } else if (selection) {\n            this.expressionMap.selects = [{ selection: selection, aliasName: selectionAliasName }];\n        }\n\n        return this;\n    }\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, selectionAliasName?: string): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string, selectionAliasName?: string): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string[]): this;\n\n    /**\n     * Adds new selection to the SELECT query.\n     */\n    addSelect(selection: string|string[]|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), selectionAliasName?: string): this {\n        if (!selection)\n            return this;\n\n        if (selection instanceof Array) {\n            this.expressionMap.selects = this.expressionMap.selects.concat(selection.map(selection => ({ selection: selection })));\n\n        } else if (selection instanceof Function) {\n            const subQueryBuilder = selection(this.subQuery());\n            this.setParameters(subQueryBuilder.getParameters());\n            this.expressionMap.selects.push({ selection: subQueryBuilder.getQuery(), aliasName: selectionAliasName });\n\n        } else if (selection) {\n            this.expressionMap.selects.push({ selection: selection, aliasName: selectionAliasName });\n        }\n\n        return this;\n    }\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: ObjectType<T>|string, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     * Removes all previously set from-s.\n     */\n    from<T>(entityTarget: ObjectType<T>|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string): SelectQueryBuilder<T> {\n        const mainAlias = this.createFromAlias(entityTarget, aliasName);\n        this.expressionMap.setMainAlias(mainAlias);\n        return (this as any) as SelectQueryBuilder<T>;\n    }\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: ObjectType<T>|string, aliasName: string): SelectQueryBuilder<T>;\n\n    /**\n     * Specifies FROM which entity's table select/update/delete will be executed.\n     * Also sets a main string alias of the selection data.\n     */\n    addFrom<T>(entityTarget: ObjectType<T>|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string): SelectQueryBuilder<T> {\n        const alias = this.createFromAlias(entityTarget, aliasName);\n        if (!this.expressionMap.mainAlias)\n            this.expressionMap.setMainAlias(alias);\n\n        return (this as any) as SelectQueryBuilder<T>;\n    }\n\n    /**\n     * INNER JOINs (without selection) given subquery.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) entity's property.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) given entity's table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection) given table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs (without selection).\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoin(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs (without selection) given subquery.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) entity's property.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) entity's table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection) given table.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs (without selection).\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoin(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery and adds all selection properties to SELECT..\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property and adds all selection properties to SELECT.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(entity: Function|string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndSelect(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.innerJoin(entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery and adds all selection properties to SELECT..\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property and adds all selection properties to SELECT.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(tableName: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs and adds all selection properties to SELECT.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndSelect(entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.leftJoin(entityOrProperty, aliasName, condition, parameters);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapMany(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters, mapToProperty, true);\n        return this;\n    }\n\n    /**\n     * INNER JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * INNER JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    innerJoinAndMapOne(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"INNER\", entityOrProperty, aliasName, condition, parameters, mapToProperty, false);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there are multiple rows of selecting data, and mapped result will be an array.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapMany(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters, mapToProperty, true);\n        return this;\n    }\n\n    /**\n     * LEFT JOINs given subquery, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, subQueryFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's property, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * Given entity property should be a relation.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, property: string, aliasName: string, condition?: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs entity's table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, entity: Function|string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs table, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, tableName: string, aliasName: string, condition: string, parameters?: ObjectLiteral): this;\n\n    /**\n     * LEFT JOINs, SELECTs the data returned by a join and MAPs all that data to some entity's property.\n     * This is extremely useful when you want to select some data and map it to some virtual property.\n     * It will assume that there is a single row of selecting data, and mapped result will be a single selected value.\n     * You also need to specify an alias of the joined data.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    leftJoinAndMapOne(mapToProperty: string, entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>), aliasName: string, condition: string = \"\", parameters?: ObjectLiteral): this {\n        this.addSelect(aliasName);\n        this.join(\"LEFT\", entityOrProperty, aliasName, condition, parameters, mapToProperty, false);\n        return this;\n    }\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, property: string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, entity: Function|string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, tableName: string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this;\n\n    /**\n     */\n    // selectAndMap(mapToProperty: string, entityOrProperty: Function|string, aliasName: string, qbFactory: ((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>)): this {\n    //     const select = new SelectAttribute(this.expressionMap);\n    //     select.mapToProperty = mapToProperty;\n    //     select.entityOrProperty = entityOrProperty;\n    //     select.aliasName = aliasName;\n    //     select.qbFactory = qbFactory;\n    //     return this;\n    // }\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string, options: { disableMixedMap: boolean }): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string, relationName: string, aliasName: string, queryBuilderFactory: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this;\n\n    /**\n     * LEFT JOINs relation id and maps it into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationIdAndMap(mapToProperty: string,\n                         relationName: string,\n                         aliasNameOrOptions?: string|{ disableMixedMap?: boolean },\n                         queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this {\n\n        const relationIdAttribute = new RelationIdAttribute(this.expressionMap);\n        relationIdAttribute.mapToProperty = mapToProperty;\n        relationIdAttribute.relationName = relationName;\n        if (typeof aliasNameOrOptions === \"string\")\n            relationIdAttribute.alias = aliasNameOrOptions;\n        if (aliasNameOrOptions instanceof Object && (aliasNameOrOptions as any).disableMixedMap)\n            relationIdAttribute.disableMixedMap = true;\n\n        relationIdAttribute.queryBuilderFactory = queryBuilderFactory;\n        this.expressionMap.relationIdAttributes.push(relationIdAttribute);\n\n        if (relationIdAttribute.relation.junctionEntityMetadata) {\n            this.expressionMap.createAlias({\n                type: \"other\",\n                name: relationIdAttribute.junctionAlias,\n                metadata: relationIdAttribute.relation.junctionEntityMetadata\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Counts number of entities of entity's relation and maps the value into some entity's property.\n     * Optionally, you can add condition and parameters used in condition.\n     */\n    loadRelationCountAndMap(mapToProperty: string, relationName: string, aliasName?: string, queryBuilderFactory?: (qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>): this {\n        const relationCountAttribute = new RelationCountAttribute(this.expressionMap);\n        relationCountAttribute.mapToProperty = mapToProperty;\n        relationCountAttribute.relationName = relationName;\n        relationCountAttribute.alias = aliasName;\n        relationCountAttribute.queryBuilderFactory = queryBuilderFactory;\n        this.expressionMap.relationCountAttributes.push(relationCountAttribute);\n\n        this.expressionMap.createAlias({\n            type: \"other\",\n            name: relationCountAttribute.junctionAlias\n        });\n        if (relationCountAttribute.relation.junctionEntityMetadata) {\n            this.expressionMap.createAlias({\n                type: \"other\",\n                name: relationCountAttribute.junctionAlias,\n                metadata: relationCountAttribute.relation.junctionEntityMetadata\n            });\n        }\n        return this;\n    }\n\n    /**\n     * Loads all relation ids for all relations of the selected entity.\n     * All relation ids will be mapped to relation property themself.\n     */\n    loadAllRelationIds(): this {\n        this.expressionMap.mainAlias!.metadata.relations.forEach(relation => {\n            this.loadRelationIdAndMap(\n                this.expressionMap.mainAlias!.name + \".\" + relation.propertyPath,\n                this.expressionMap.mainAlias!.name + \".\" + relation.propertyPath,\n                { disableMixedMap: true }\n            );\n        });\n        return this;\n    }\n\n    /**\n     * Sets WHERE condition in the query builder.\n     * If you had previously WHERE expression defined,\n     * calling this function will override previously set WHERE conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    where(where: Brackets|string|((qb: this) => string)|ObjectLiteral, parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres = []; // don't move this block below since computeWhereParameter can add where expressions\n        const condition = this.computeWhereParameter(where);\n        if (condition)\n            this.expressionMap.wheres = [{ type: \"simple\", condition: condition }];\n        if (parameters)\n            this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andWhere(where: string|Brackets|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"and\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orWhere(where: Brackets|string|((qb: this) => string), parameters?: ObjectLiteral): this {\n        this.expressionMap.wheres.push({ type: \"or\", condition: this.computeWhereParameter(where) });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    whereInIds(ids: any|any[]): this {\n        ids = ids instanceof Array ? ids : [ids];\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.where(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    andWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.andWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR WHERE with conditions for the given ids.\n     *\n     * Ids are mixed.\n     * It means if you have single primary key you can pass a simple id values, for example [1, 2, 3].\n     * If you have multiple primary keys you need to pass object with property names and values specified,\n     * for example [{ firstId: 1, secondId: 2 }, { firstId: 2, secondId: 3 }, ...]\n     */\n    orWhereInIds(ids: any[]): this {\n        const [whereExpression, parameters] = this.createWhereIdsExpression(ids);\n        this.orWhere(whereExpression, parameters);\n        return this;\n    }\n\n    /**\n     * Sets HAVING condition in the query builder.\n     * If you had previously HAVING expression defined,\n     * calling this function will override previously set HAVING conditions.\n     * Additionally you can add parameters used in where expression.\n     */\n    having(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"simple\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new AND HAVING condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    andHaving(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"and\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Adds new OR HAVING condition in the query builder.\n     * Additionally you can add parameters used in where expression.\n     */\n    orHaving(having: string, parameters?: ObjectLiteral): this {\n        this.expressionMap.havings.push({ type: \"or\", condition: having });\n        if (parameters) this.setParameters(parameters);\n        return this;\n    }\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(): this;\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(groupBy: string): this;\n\n    /**\n     * Sets GROUP BY condition in the query builder.\n     * If you had previously GROUP BY expression defined,\n     * calling this function will override previously set GROUP BY conditions.\n     */\n    groupBy(groupBy?: string): this {\n        if (groupBy) {\n            this.expressionMap.groupBys = [groupBy];\n        } else {\n            this.expressionMap.groupBys = [];\n        }\n        return this;\n    }\n\n    /**\n     * Adds GROUP BY condition in the query builder.\n     */\n    addGroupBy(groupBy: string): this {\n        this.expressionMap.groupBys.push(groupBy);\n        return this;\n    }\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     *\n     * Calling order by without order set will remove all previously set order bys.\n     */\n    orderBy(): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort: string, order?: \"ASC\"|\"DESC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(order: OrderByCondition): this;\n\n    /**\n     * Sets ORDER BY condition in the query builder.\n     * If you had previously ORDER BY expression defined,\n     * calling this function will override previously set ORDER BY conditions.\n     */\n    orderBy(sort?: string|OrderByCondition, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (sort) {\n            if (sort instanceof Object) {\n                this.expressionMap.orderBys = sort as OrderByCondition;\n            } else {\n                if (nulls) {\n                    this.expressionMap.orderBys = { [sort as string]: { order, nulls } };\n                } else {\n                    this.expressionMap.orderBys = { [sort as string]: order };\n                }\n            }\n        } else {\n            this.expressionMap.orderBys = {};\n        }\n        return this;\n    }\n\n    /**\n     * Adds ORDER BY condition in the query builder.\n     */\n    addOrderBy(sort: string, order: \"ASC\"|\"DESC\" = \"ASC\", nulls?: \"NULLS FIRST\"|\"NULLS LAST\"): this {\n        if (nulls) {\n            this.expressionMap.orderBys[sort] = { order, nulls };\n        } else {\n            this.expressionMap.orderBys[sort] = order;\n        }\n        return this;\n    }\n\n    /**\n     * Set's LIMIT - maximum number of rows to be selected.\n     * NOTE that it may not work as you expect if you are using joins.\n     * If you want to implement pagination, and you are having join in your query,\n     * then use instead take method instead.\n     */\n    limit(limit?: number): this {\n        this.expressionMap.limit = this.normalizeNumber(limit);\n        return this;\n    }\n\n    /**\n     * Set's OFFSET - selection offset.\n     * NOTE that it may not work as you expect if you are using joins.\n     * If you want to implement pagination, and you are having join in your query,\n     * then use instead skip method instead.\n     */\n    offset(offset?: number): this {\n        this.expressionMap.offset = this.normalizeNumber(offset);\n        return this;\n    }\n\n    /**\n     * Sets maximal number of entities to take.\n     */\n    take(take?: number): this {\n        this.expressionMap.take = this.normalizeNumber(take);\n        return this;\n    }\n\n    /**\n     * Sets number of entities to skip.\n     */\n    skip(skip?: number): this {\n        this.expressionMap.skip = this.normalizeNumber(skip);\n        return this;\n    }\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\", lockVersion: number): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\", lockVersion: Date): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"pessimistic_read\"|\"pessimistic_write\"): this;\n\n    /**\n     * Sets locking mode.\n     */\n    setLock(lockMode: \"optimistic\"|\"pessimistic_read\"|\"pessimistic_write\", lockVersion?: number|Date): this {\n        this.expressionMap.lockMode = lockMode;\n        this.expressionMap.lockVersion = lockVersion;\n        return this;\n\n    }\n\n    /**\n     * Gets first raw result returned by execution of generated query builder sql.\n     */\n    async getRawOne(): Promise<any> {\n        return (await this.getRawMany())[0];\n    }\n\n    /**\n     * Gets all raw results returned by execution of generated query builder sql.\n     */\n    async getRawMany(): Promise<any[]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        this.expressionMap.queryEntity = false;\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            return await this.loadRawResults(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) { // means we created our own query runner\n                await queryRunner.release();\n            }\n        }\n    }\n\n    /**\n     * Executes sql generated by query builder and returns object with raw results and entities created from them.\n     */\n    async getRawAndEntities(): Promise<{ entities: Entity[], raw: any[] }> {\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            this.expressionMap.queryEntity = true;\n            return await this.executeEntitiesAndRawResults(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Gets single entity returned by execution of generated query builder sql.\n     */\n    async getOne(): Promise<Entity|undefined> {\n        const results = await this.getRawAndEntities();\n        const result = results.entities[0] as any;\n\n        if (result && this.expressionMap.lockMode === \"optimistic\" && this.expressionMap.lockVersion) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n\n            if (this.expressionMap.lockVersion instanceof Date) {\n                const actualVersion = result[metadata.updateDateColumn!.propertyName]; // what if columns arent set?\n                if (actualVersion.getTime() !== this.expressionMap.lockVersion.getTime())\n                    throw new OptimisticLockVersionMismatchError(metadata.name, this.expressionMap.lockVersion, actualVersion);\n\n            } else {\n                const actualVersion = result[metadata.versionColumn!.propertyName]; // what if columns arent set?\n                if (actualVersion !== this.expressionMap.lockVersion)\n                    throw new OptimisticLockVersionMismatchError(metadata.name, this.expressionMap.lockVersion, actualVersion);\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Gets entities returned by execution of generated query builder sql.\n     */\n    async getMany(): Promise<Entity[]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const results = await this.getRawAndEntities();\n        return results.entities;\n    }\n\n    /**\n     * Gets count - number of entities selected by sql generated by this query builder.\n     * Count excludes all limitations set by setFirstResult and setMaxResults methods call.\n     */\n    async getCount(): Promise<number> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            return await this.executeCountQuery(queryRunner);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Executes built SQL query and returns entities and overall entities count (without limitation).\n     * This method is useful to build pagination.\n     */\n    async getManyAndCount(): Promise<[Entity[], number]> {\n        if (this.expressionMap.lockMode === \"optimistic\")\n            throw new OptimisticLockCanNotBeUsedError();\n\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            const entitiesAndRaw = await this.executeEntitiesAndRawResults(queryRunner);\n            const count = await this.executeCountQuery(queryRunner);\n            return [entitiesAndRaw.entities, count];\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Executes built SQL query and returns raw data stream.\n     */\n    async stream(): Promise<ReadStream> {\n        this.expressionMap.queryEntity = false;\n        const [sql, parameters] = this.getQueryAndParameters();\n        const queryRunner = this.obtainQueryRunner();\n        try {\n            const releaseFn = () => {\n                if (queryRunner !== this.queryRunner) // means we created our own query runner\n                    return queryRunner.release();\n                return;\n            };\n            return queryRunner.stream(sql, parameters, releaseFn, releaseFn);\n\n        } finally {\n            if (queryRunner !== this.queryRunner) // means we created our own query runner\n                await queryRunner.release();\n        }\n    }\n\n    /**\n     * Enables or disables query result caching.\n     */\n    cache(enabled: boolean): this;\n\n    /**\n     * Enables query result caching and sets in milliseconds in which cache will expire.\n     * If not set then global caching time will be used.\n     */\n    cache(milliseconds: number): this;\n\n    /**\n     * Enables query result caching and sets cache id and milliseconds in which cache will expire.\n     */\n    cache(id: any, milliseconds?: number): this;\n\n    /**\n     * Enables or disables query result caching.\n     */\n    cache(enabledOrMillisecondsOrId: boolean|number|string, maybeMilliseconds?: number): this {\n\n        if (typeof enabledOrMillisecondsOrId === \"boolean\") {\n            this.expressionMap.cache = enabledOrMillisecondsOrId;\n\n        } else if (typeof enabledOrMillisecondsOrId === \"number\") {\n            this.expressionMap.cache = true;\n            this.expressionMap.cacheDuration = enabledOrMillisecondsOrId;\n\n        } else if (typeof enabledOrMillisecondsOrId === \"string\" || typeof enabledOrMillisecondsOrId === \"number\") {\n            this.expressionMap.cache = true;\n            this.expressionMap.cacheId = enabledOrMillisecondsOrId;\n        }\n\n        if (maybeMilliseconds) {\n            this.expressionMap.cacheDuration = maybeMilliseconds;\n        }\n\n        return this;\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    protected join(direction: \"INNER\"|\"LEFT\",\n                   entityOrProperty: Function|string|((qb: SelectQueryBuilder<any>) => SelectQueryBuilder<any>),\n                   aliasName: string,\n                   condition?: string,\n                   parameters?: ObjectLiteral,\n                   mapToProperty?: string,\n                   isMappingMany?: boolean): void {\n\n        this.setParameters(parameters || {});\n\n        const joinAttribute = new JoinAttribute(this.connection, this.expressionMap);\n        joinAttribute.direction = direction;\n        joinAttribute.mapToProperty = mapToProperty;\n        joinAttribute.isMappingMany = isMappingMany;\n        joinAttribute.entityOrProperty = entityOrProperty; // relationName\n        joinAttribute.condition = condition; // joinInverseSideCondition\n        // joinAttribute.junctionAlias = joinAttribute.relation.isOwning ? parentAlias + \"_\" + destinationTableAlias : destinationTableAlias + \"_\" + parentAlias;\n        this.expressionMap.joinAttributes.push(joinAttribute);\n\n        if (joinAttribute.metadata) {\n\n            // todo: find and set metadata right there?\n            joinAttribute.alias = this.expressionMap.createAlias({\n                type: \"join\",\n                name: aliasName,\n                metadata: joinAttribute.metadata\n            });\n            if (joinAttribute.relation && joinAttribute.relation.junctionEntityMetadata) {\n                this.expressionMap.createAlias({\n                    type: \"join\",\n                    name: joinAttribute.junctionAlias,\n                    metadata: joinAttribute.relation.junctionEntityMetadata\n                });\n            }\n\n        } else {\n            let subQuery: string = \"\";\n            if (entityOrProperty instanceof Function) {\n                const subQueryBuilder: SelectQueryBuilder<any> = (entityOrProperty as any)(((this as any) as SelectQueryBuilder<any>).subQuery());\n                this.setParameters(subQueryBuilder.getParameters());\n                subQuery = subQueryBuilder.getQuery();\n\n            } else {\n                subQuery = entityOrProperty;\n            }\n            const isSubQuery = entityOrProperty instanceof Function || entityOrProperty.substr(0, 1) === \"(\" && entityOrProperty.substr(-1) === \")\";\n            joinAttribute.alias = this.expressionMap.createAlias({\n                type: \"join\",\n                name: aliasName,\n                tablePath: isSubQuery === false ? entityOrProperty as string : undefined,\n                subQuery: isSubQuery === true ? subQuery : undefined,\n            });\n        }\n    }\n\n    /**\n     * Creates \"SELECT FROM\" part of SQL query.\n     */\n    protected createSelectExpression() {\n\n        if (!this.expressionMap.mainAlias)\n            throw new Error(\"Cannot build query because main alias is not set (call qb#from method)\");\n\n        // todo throw exception if selects or from is missing\n\n        const allSelects: SelectQuery[] = [];\n        const excludedSelects: SelectQuery[] = [];\n\n        if (this.expressionMap.mainAlias.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            allSelects.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name, metadata));\n            excludedSelects.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name, metadata));\n        }\n\n        // add selects from joins\n        this.expressionMap.joinAttributes\n            .forEach(join => {\n                if (join.metadata) {\n                    allSelects.push(...this.buildEscapedEntityColumnSelects(join.alias.name!, join.metadata));\n                    excludedSelects.push(...this.findEntityColumnSelects(join.alias.name!, join.metadata));\n                } else {\n                    const hasMainAlias = this.expressionMap.selects.some(select => select.selection === join.alias.name);\n                    if (hasMainAlias) {\n                        allSelects.push({ selection: this.escape(join.alias.name!) + \".*\" });\n                        const excludedSelect = this.expressionMap.selects.find(select => select.selection === join.alias.name);\n                        excludedSelects.push(excludedSelect!);\n                    }\n                }\n            });\n\n        if (!this.expressionMap.ignoreParentTablesJoins && this.expressionMap.mainAlias.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            if (metadata.parentEntityMetadata && metadata.parentEntityMetadata.inheritanceType === \"class-table\" && metadata.parentIdColumns) {\n                const alias = \"parentIdColumn_\" + metadata.parentEntityMetadata.tableName;\n                metadata.parentEntityMetadata.columns.forEach(column => {\n                    // TODO implement partial select\n                    allSelects.push({ selection: this.escape(alias) + \".\" + this.escape(column.databaseName), aliasName: alias + \"_\" + column.databaseName });\n                });\n            }\n        }\n\n        // add selects from relation id joins\n        // this.relationIdAttributes.forEach(relationIdAttr => {\n        // });\n\n        /*if (this.enableRelationIdValues) {\n         const parentMetadata = this.aliasMap.getEntityMetadataByAlias(this.aliasMap.mainAlias);\n         if (!parentMetadata)\n         throw new Error(\"Cannot get entity metadata for the given alias \" + this.aliasMap.mainAlias.name);\n\n         const metadata = this.connection.entityMetadatas.findByTarget(this.aliasMap.mainAlias.target);\n         metadata.manyToManyRelations.forEach(relation => {\n\n         const junctionMetadata = relation.junctionEntityMetadata;\n         junctionMetadata.columns.forEach(column => {\n         const select = ea(this.aliasMap.mainAlias.name + \"_\" + junctionMetadata.table.name + \"_ids\") + \".\" +\n         ec(column.name) + \" AS \" +\n         ea(this.aliasMap.mainAlias.name + \"_\" + relation.name + \"_ids_\" + column.name);\n         allSelects.push(select);\n         });\n         });\n         }*/\n\n        // add all other selects\n        this.expressionMap.selects\n            .filter(select => excludedSelects.indexOf(select) === -1)\n            .forEach(select => allSelects.push({ selection: this.replacePropertyNames(select.selection), aliasName: select.aliasName }));\n\n        // if still selection is empty, then simply set it to all (*)\n        if (allSelects.length === 0)\n            allSelects.push({ selection: \"*\" });\n\n        let lock: string = \"\";\n        if (this.connection.driver instanceof SqlServerDriver) {\n            switch (this.expressionMap.lockMode) {\n                case \"pessimistic_read\":\n                    lock = \" WITH (HOLDLOCK, ROWLOCK)\";\n                    break;\n                case \"pessimistic_write\":\n                    lock = \" WITH (UPDLOCK, ROWLOCK)\";\n                    break;\n            }\n        }\n\n        // create a selection query\n        const froms = this.expressionMap.aliases\n            .filter(alias => alias.type === \"from\" && (alias.tablePath || alias.subQuery))\n            .map(alias => {\n                if (alias.subQuery)\n                    return alias.subQuery + \" \" + this.escape(alias.name);\n\n                return this.getTableName(alias.tablePath!) + \" \" + this.escape(alias.name);\n            });\n        const selection = allSelects.map(select => select.selection + (select.aliasName ? \" AS \" + this.escape(select.aliasName) : \"\")).join(\", \");\n        if ((this.expressionMap.limit || this.expressionMap.offset) && this.connection.driver instanceof OracleDriver)\n            return \"SELECT ROWNUM \" + this.escape(\"RN\") + \",\" + selection + \" FROM \" + froms.join(\", \") + lock;\n\n        return \"SELECT \" + selection + \" FROM \" + froms.join(\", \") + lock;\n    }\n\n    /**\n     * Creates \"JOIN\" part of SQL query.\n     */\n    protected createJoinExpression(): string {\n\n        // examples:\n        // select from owning side\n        // qb.select(\"post\")\n        //     .leftJoinAndSelect(\"post.category\", \"category\");\n        // select from non-owning side\n        // qb.select(\"category\")\n        //     .leftJoinAndSelect(\"category.post\", \"post\");\n\n        const joins = this.expressionMap.joinAttributes.map(joinAttr => {\n\n            const relation = joinAttr.relation;\n            const destinationTableName = joinAttr.tablePath;\n            const destinationTableAlias = joinAttr.alias.name;\n            const appendedCondition = joinAttr.condition ? \" AND (\" + joinAttr.condition + \")\" : \"\";\n            const parentAlias = joinAttr.parentAlias;\n\n            // if join was build without relation (e.g. without \"post.category\") then it means that we have direct\n            // table to join, without junction table involved. This means we simply join direct table.\n            if (!parentAlias || !relation) {\n                const destinationJoin = joinAttr.alias.subQuery ? joinAttr.alias.subQuery : this.getTableName(destinationTableName);\n                return \" \" + joinAttr.direction + \" JOIN \" + destinationJoin + \" \" + this.escape(destinationTableAlias) +\n                    (joinAttr.condition ? \" ON \" + this.replacePropertyNames(joinAttr.condition) : \"\");\n            }\n\n            // if real entity relation is involved\n            if (relation.isManyToOne || relation.isOneToOneOwner) {\n\n                // JOIN `category` `category` ON `category`.`id` = `post`.`categoryId`\n                const condition = relation.joinColumns.map(joinColumn => {\n                    return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" +\n                        parentAlias + \".\" + relation.propertyPath + \".\" + joinColumn.referencedColumn!.propertyPath;\n                }).join(\" AND \");\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(condition + appendedCondition);\n\n            } else if (relation.isOneToMany || relation.isOneToOneNotOwner) {\n\n                // JOIN `post` `post` ON `post`.`categoryId` = `category`.`id`\n                const condition = relation.inverseRelation!.joinColumns.map(joinColumn => {\n                    return destinationTableAlias + \".\" + relation.inverseRelation!.propertyPath + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" +\n                        parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                }).join(\" AND \");\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(condition + appendedCondition);\n\n            } else { // means many-to-many\n                const junctionTableName = relation.junctionEntityMetadata!.tablePath;\n\n                const junctionAlias = joinAttr.junctionAlias;\n                let junctionCondition = \"\", destinationCondition = \"\";\n\n                if (relation.isOwning) {\n\n                    junctionCondition = relation.joinColumns.map(joinColumn => {\n                        // `post_category`.`postId` = `post`.`id`\n                        return junctionAlias + \".\" + joinColumn.propertyPath + \"=\" + parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                    }).join(\" AND \");\n\n                    destinationCondition = relation.inverseJoinColumns.map(joinColumn => {\n                        // `category`.`id` = `post_category`.`categoryId`\n                        return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" + junctionAlias + \".\" + joinColumn.propertyPath;\n                    }).join(\" AND \");\n\n                } else {\n                    junctionCondition = relation.inverseRelation!.inverseJoinColumns.map(joinColumn => {\n                        // `post_category`.`categoryId` = `category`.`id`\n                        return junctionAlias + \".\" + joinColumn.propertyPath + \"=\" + parentAlias + \".\" + joinColumn.referencedColumn!.propertyPath;\n                    }).join(\" AND \");\n\n                    destinationCondition = relation.inverseRelation!.joinColumns.map(joinColumn => {\n                        // `post`.`id` = `post_category`.`postId`\n                        return destinationTableAlias + \".\" + joinColumn.referencedColumn!.propertyPath + \"=\" + junctionAlias + \".\" + joinColumn.propertyPath;\n                    }).join(\" AND \");\n                }\n\n                return \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(junctionTableName) + \" \" + this.escape(junctionAlias) + \" ON \" + this.replacePropertyNames(junctionCondition) +\n                    \" \" + joinAttr.direction + \" JOIN \" + this.getTableName(destinationTableName) + \" \" + this.escape(destinationTableAlias) + \" ON \" + this.replacePropertyNames(destinationCondition + appendedCondition);\n\n            }\n        });\n\n        if (!this.expressionMap.ignoreParentTablesJoins && this.expressionMap.mainAlias!.hasMetadata) {\n            const metadata = this.expressionMap.mainAlias!.metadata;\n            if (metadata.parentEntityMetadata && metadata.parentEntityMetadata.inheritanceType === \"class-table\" && metadata.parentIdColumns) {\n                const alias = \"parentIdColumn_\" + metadata.parentEntityMetadata.tableName;\n                const condition = metadata.parentIdColumns.map(parentIdColumn => {\n                    return this.expressionMap.mainAlias!.name + \".\" + parentIdColumn.propertyPath + \" = \" + this.escape(alias) + \".\" + this.escape(parentIdColumn.referencedColumn!.propertyPath);\n                }).join(\" AND \");\n                const join = \" JOIN \" + this.getTableName(metadata.parentEntityMetadata.tablePath) + \" \" + this.escape(alias) + \" ON \" + this.replacePropertyNames(condition);\n                joins.push(join);\n            }\n        }\n\n        return joins.join(\" \");\n    }\n\n    /**\n     * Creates \"GROUP BY\" part of SQL query.\n     */\n    protected createGroupByExpression() {\n        if (!this.expressionMap.groupBys || !this.expressionMap.groupBys.length) return \"\";\n        return \" GROUP BY \" + this.replacePropertyNames(this.expressionMap.groupBys.join(\", \"));\n    }\n\n    /**\n     * Creates \"ORDER BY\" part of SQL query.\n     */\n    protected createOrderByExpression() {\n        const orderBys = this.expressionMap.allOrderBys;\n        if (Object.keys(orderBys).length > 0)\n            return \" ORDER BY \" + Object.keys(orderBys)\n                    .map(columnName => {\n                        if (typeof orderBys[columnName] === \"string\") {\n                            return this.replacePropertyNames(columnName) + \" \" + orderBys[columnName];\n                        } else {\n                            return this.replacePropertyNames(columnName) + \" \" + (orderBys[columnName] as any).order + \" \" + (orderBys[columnName] as any).nulls;\n                        }\n                    })\n                    .join(\", \");\n\n        return \"\";\n    }\n\n    /**\n     * Creates \"LIMIT\" and \"OFFSET\" parts of SQL query for Oracle database.\n     */\n    protected createLimitOffsetOracleSpecificExpression(sql: string): string {\n        if ((this.expressionMap.offset || this.expressionMap.limit) && this.connection.driver instanceof OracleDriver) {\n            sql = \"SELECT * FROM (\" + sql + \") WHERE \";\n            if (this.expressionMap.offset) {\n                sql += this.escape(\"RN\") + \" >= \" + this.expressionMap.offset;\n            }\n            if (this.expressionMap.limit) {\n                sql += (this.expressionMap.offset ? \" AND \" : \"\") + this.escape(\"RN\") + \" <= \" + ((this.expressionMap.offset || 0) + this.expressionMap.limit);\n            }\n        }\n        return sql;\n    }\n\n    /**\n     * Creates \"LIMIT\" and \"OFFSET\" parts of SQL query.\n     */\n    protected createLimitOffsetExpression(): string {\n        if (this.connection.driver instanceof OracleDriver)\n            return \"\";\n\n        // in the case if nothing is joined in the query builder we don't need to make two requests to get paginated results\n        // we can use regular limit / offset, that's why we add offset and limit construction here based on skip and take values\n        let offset: number|undefined = this.expressionMap.offset,\n            limit: number|undefined = this.expressionMap.limit;\n        if (!offset && !limit && this.expressionMap.joinAttributes.length === 0) {\n            offset = this.expressionMap.skip;\n            limit = this.expressionMap.take;\n        }\n\n        if (this.connection.driver instanceof SqlServerDriver) {\n\n            if (limit && offset)\n                return \" OFFSET \" + offset + \" ROWS FETCH NEXT \" + limit + \" ROWS ONLY\";\n            if (limit)\n                return \" OFFSET 0 ROWS FETCH NEXT \" + limit + \" ROWS ONLY\";\n            if (offset)\n                return \" OFFSET \" + offset + \" ROWS\";\n\n        } else if (this.connection.driver instanceof MysqlDriver) {\n\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                throw new OffsetWithoutLimitNotSupportedError(\"MySQL\");\n\n        } else if (this.connection.driver instanceof AbstractSqliteDriver) {\n\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                return \" LIMIT -1 OFFSET \" + offset;\n\n        } else {\n            if (limit && offset)\n                return \" LIMIT \" + limit + \" OFFSET \" + offset;\n            if (limit)\n                return \" LIMIT \" + limit;\n            if (offset)\n                return \" OFFSET \" + offset;\n        }\n\n        return \"\";\n    }\n\n    /**\n     * Creates \"LOCK\" part of SQL query.\n     */\n    protected createLockExpression(): string {\n        switch (this.expressionMap.lockMode) {\n            case \"pessimistic_read\":\n                if (this.connection.driver instanceof MysqlDriver) {\n                    return \" LOCK IN SHARE MODE\";\n\n                } else if (this.connection.driver instanceof PostgresDriver) {\n                    return \" FOR SHARE\";\n\n                } else if (this.connection.driver instanceof SqlServerDriver) {\n                    return \"\";\n\n                } else {\n                    throw new LockNotSupportedOnGivenDriverError();\n                }\n            case \"pessimistic_write\":\n                if (this.connection.driver instanceof MysqlDriver || this.connection.driver instanceof PostgresDriver) {\n                    return \" FOR UPDATE\";\n\n                } else if (this.connection.driver instanceof SqlServerDriver) {\n                    return \"\";\n\n                } else {\n                    throw new LockNotSupportedOnGivenDriverError();\n                }\n            default:\n                return \"\";\n        }\n    }\n\n    /**\n     * Creates \"HAVING\" part of SQL query.\n     */\n    protected createHavingExpression() {\n        if (!this.expressionMap.havings || !this.expressionMap.havings.length) return \"\";\n        const conditions = this.expressionMap.havings.map((having, index) => {\n            switch (having.type) {\n                case \"and\":\n                    return (index > 0 ? \"AND \" : \"\") + this.replacePropertyNames(having.condition);\n                case \"or\":\n                    return (index > 0 ? \"OR \" : \"\") + this.replacePropertyNames(having.condition);\n                default:\n                    return this.replacePropertyNames(having.condition);\n            }\n        }).join(\" \");\n\n        if (!conditions.length) return \"\";\n        return \" HAVING \" + conditions;\n    }\n\n    protected buildEscapedEntityColumnSelects(aliasName: string, metadata: EntityMetadata): SelectQuery[] {\n        const hasMainAlias = this.expressionMap.selects.some(select => select.selection === aliasName);\n\n        const columns: ColumnMetadata[] = [];\n        if (hasMainAlias) {\n            columns.push(...metadata.columns.filter(column => column.isSelect === true));\n        }\n        columns.push(...metadata.columns.filter(column => {\n            return this.expressionMap.selects.some(select => select.selection === aliasName + \".\" + column.propertyName);\n        }));\n\n        // if user used partial selection and did not select some primary columns which are required to be selected\n        // we select those primary columns and mark them as \"virtual\". Later virtual column values will be removed from final entity\n        // to make entity contain exactly what user selected\n        const nonSelectedPrimaryColumns = this.expressionMap.queryEntity ? metadata.primaryColumns.filter(primaryColumn => columns.indexOf(primaryColumn) === -1) : [];\n        const allColumns = [...columns, ...nonSelectedPrimaryColumns];\n\n        return allColumns.map(column => {\n            const selection = this.expressionMap.selects.find(select => select.selection === aliasName + \".\" + column.propertyName);\n            return {\n                selection: this.escape(aliasName) + \".\" + this.escape(column.databaseName),\n                aliasName: selection && selection.aliasName ? selection.aliasName : aliasName + \"_\" + column.databaseName,\n                // todo: need to keep in mind that custom selection.aliasName breaks hydrator. fix it later!\n                virtual: selection ? selection.virtual === true : (hasMainAlias ? false : true),\n            };\n        });\n    }\n\n    protected findEntityColumnSelects(aliasName: string, metadata: EntityMetadata): SelectQuery[] {\n        const mainSelect = this.expressionMap.selects.find(select => select.selection === aliasName);\n        if (mainSelect)\n            return [mainSelect];\n\n        return this.expressionMap.selects.filter(select => {\n            return metadata.columns.some(column => select.selection === aliasName + \".\" + column.propertyName);\n        });\n    }\n\n    protected async executeCountQuery(queryRunner: QueryRunner): Promise<number> {\n        this.expressionMap.queryEntity = false;\n\n        const mainAlias = this.expressionMap.mainAlias!.name; // todo: will this work with \"fromTableName\"?\n        const metadata = this.expressionMap.mainAlias!.metadata;\n\n        const distinctAlias = this.escape(mainAlias);\n        let countSql: string = \"\";\n        if (metadata.hasMultiplePrimaryKeys) {\n            if (this.connection.driver instanceof AbstractSqliteDriver) {\n                countSql = `COUNT(DISTINCT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                    const propertyName = this.escape(primaryColumn.databaseName);\n                    return `${distinctAlias}.${propertyName}`;\n                }).join(\" || \") + \")) as \\\"cnt\\\"\";\n\n            } else {\n                countSql = `COUNT(DISTINCT(CONCAT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                    const propertyName = this.escape(primaryColumn.databaseName);\n                    return `${distinctAlias}.${propertyName}`;\n                }).join(\", \") + \"))) as \\\"cnt\\\"\";\n            }\n\n        } else {\n            countSql = `COUNT(DISTINCT(` + metadata.primaryColumns.map((primaryColumn, index) => {\n                const propertyName = this.escape(primaryColumn.databaseName);\n                return `${distinctAlias}.${propertyName}`;\n            }).join(\", \") + \")) as \\\"cnt\\\"\";\n        }\n\n        const results = await this.clone()\n            .mergeExpressionMap({ ignoreParentTablesJoins: true })\n            .orderBy()\n            .groupBy()\n            .offset(undefined)\n            .limit(undefined)\n            .skip(undefined)\n            .take(undefined)\n            .select(countSql)\n            .loadRawResults(queryRunner);\n\n        if (!results || !results[0] || !results[0][\"cnt\"])\n            return 0;\n\n        return parseInt(results[0][\"cnt\"]);\n    }\n\n    /**\n     * Executes sql generated by query builder and returns object with raw results and entities created from them.\n     */\n    protected async executeEntitiesAndRawResults(queryRunner: QueryRunner): Promise<{ entities: Entity[], raw: any[] }> {\n\n        if (!this.expressionMap.mainAlias)\n            throw new Error(`Alias is not set. Use \"from\" method to set an alias.`);\n\n        if ((this.expressionMap.lockMode === \"pessimistic_read\" || this.expressionMap.lockMode === \"pessimistic_write\") && !queryRunner.isTransactionActive)\n            throw new PessimisticLockTransactionRequiredError();\n\n        if (this.expressionMap.lockMode === \"optimistic\") {\n            const metadata = this.expressionMap.mainAlias.metadata;\n            if (!metadata.versionColumn && !metadata.updateDateColumn)\n                throw new NoVersionOrUpdateDateColumnError(metadata.name);\n        }\n\n        const broadcaster = new Broadcaster(this.connection);\n        const relationIdLoader = new RelationIdLoader(this.connection, queryRunner, this.expressionMap.relationIdAttributes);\n        const relationCountLoader = new RelationCountLoader(this.connection, queryRunner, this.expressionMap.relationCountAttributes);\n        const relationIdMetadataTransformer = new RelationIdMetadataToAttributeTransformer(this.expressionMap);\n        relationIdMetadataTransformer.transform();\n        const relationCountMetadataTransformer = new RelationCountMetadataToAttributeTransformer(this.expressionMap);\n        relationCountMetadataTransformer.transform();\n\n        let rawResults: any[] = [], entities: any[] = [];\n\n        // for pagination enabled (e.g. skip and take) its much more complicated - its a special process\n        // where we make two queries to find the data we need\n        // first query find ids in skip and take range\n        // and second query loads the actual data in given ids range\n        if ((this.expressionMap.skip || this.expressionMap.take) && this.expressionMap.joinAttributes.length > 0) {\n\n            // we are skipping order by here because its not working in subqueries anyway\n            // to make order by working we need to apply it on a distinct query\n            const [selects, orderBys] = this.createOrderByCombinedWithSelectExpression(\"distinctAlias\");\n            const metadata = this.expressionMap.mainAlias.metadata;\n            const mainAliasName = this.expressionMap.mainAlias.name;\n\n            const querySelects = metadata.primaryColumns.map(primaryColumn => {\n                const distinctAlias = this.escape(\"distinctAlias\");\n                const columnAlias = this.escape(mainAliasName + \"_\" + primaryColumn.databaseName);\n                if (!orderBys[columnAlias]) // make sure we aren't overriding user-defined order in inverse direction\n                    orderBys[columnAlias] = \"ASC\";\n                return `${distinctAlias}.${columnAlias} as \"ids_${mainAliasName + \"_\" + primaryColumn.databaseName}\"`;\n            });\n\n            rawResults = await new SelectQueryBuilder(this.connection, queryRunner)\n                .select(`DISTINCT ${querySelects.join(\", \")}`)\n                .addSelect(selects)\n                .from(`(${this.clone().orderBy().groupBy().getQuery()})`, \"distinctAlias\")\n                .offset(this.expressionMap.skip)\n                .limit(this.expressionMap.take)\n                .orderBy(orderBys)\n                .cache(this.expressionMap.cache ? this.expressionMap.cache : this.expressionMap.cacheId, this.expressionMap.cacheDuration)\n                .setParameters(this.getParameters())\n                .getRawMany();\n\n            if (rawResults.length > 0) {\n                let condition = \"\";\n                const parameters: ObjectLiteral = {};\n                if (metadata.hasMultiplePrimaryKeys) {\n                    condition = rawResults.map((result, index) => {\n                        return metadata.primaryColumns.map(primaryColumn => {\n                            parameters[`ids_${index}_${primaryColumn.propertyName}`] = result[`ids_${mainAliasName}_${primaryColumn.databaseName}`];\n                            return `${mainAliasName}.${primaryColumn.propertyName}=:ids_${index}_${primaryColumn.databaseName}`;\n                        }).join(\" AND \");\n                    }).join(\" OR \");\n                } else {\n                    const ids = rawResults.map(result => result[\"ids_\" + mainAliasName + \"_\" + metadata.primaryColumns[0].databaseName]);\n                    const areAllNumbers = ids.every((id: any) => typeof id === \"number\");\n                    if (areAllNumbers) {\n                        // fixes #190. if all numbers then its safe to perform query without parameter\n                        condition = `${mainAliasName}.${metadata.primaryColumns[0].propertyName} IN (${ids.join(\", \")})`;\n                    } else {\n                        parameters[\"ids\"] = ids;\n                        condition = mainAliasName + \".\" + metadata.primaryColumns[0].propertyName + \" IN (:ids)\";\n                    }\n                }\n                rawResults = await this.clone()\n                    .mergeExpressionMap({ extraAppendedAndWhereCondition: condition })\n                    .setParameters(parameters)\n                    .loadRawResults(queryRunner);\n            }\n\n        } else {\n            rawResults = await this.loadRawResults(queryRunner);\n        }\n\n        if (rawResults.length > 0) {\n\n            // transform raw results into entities\n            const rawRelationIdResults = await relationIdLoader.load(rawResults);\n            const rawRelationCountResults = await relationCountLoader.load(rawResults);\n            const transformer = new RawSqlResultsToEntityTransformer(this.expressionMap, this.connection.driver, rawRelationIdResults, rawRelationCountResults);\n            entities = transformer.transform(rawResults, this.expressionMap.mainAlias!);\n\n            // broadcast all \"after load\" events\n            if (this.expressionMap.mainAlias.hasMetadata)\n                await broadcaster.broadcastLoadEventsForAll(this.expressionMap.mainAlias.target, entities);\n        }\n\n        return {\n            raw: rawResults,\n            entities: entities,\n        };\n    }\n\n    protected createOrderByCombinedWithSelectExpression(parentAlias: string): [ string, OrderByCondition] {\n\n        // if table has a default order then apply it\n        const orderBys = this.expressionMap.allOrderBys;\n        const selectString = Object.keys(orderBys)\n            .map(orderCriteria => {\n                if (orderCriteria.indexOf(\".\") !== -1) {\n                    const [aliasName, propertyPath] = orderCriteria.split(\".\");\n                    const alias = this.expressionMap.findAliasByName(aliasName);\n                    const column = alias.metadata.findColumnWithPropertyName(propertyPath);\n                    return this.escape(parentAlias) + \".\" + this.escape(aliasName + \"_\" + column!.databaseName);\n                } else {\n                    if (this.expressionMap.selects.find(select => select.selection === orderCriteria || select.aliasName === orderCriteria))\n                        return this.escape(parentAlias) + \".\" + orderCriteria;\n\n                    return \"\";\n                }\n            })\n            .join(\", \");\n\n        const orderByObject: OrderByCondition = {};\n        Object.keys(orderBys).forEach(orderCriteria => {\n            if (orderCriteria.indexOf(\".\") !== -1) {\n                const [aliasName, propertyPath] = orderCriteria.split(\".\");\n                const alias = this.expressionMap.findAliasByName(aliasName);\n                const column = alias.metadata.findColumnWithPropertyName(propertyPath);\n                orderByObject[this.escape(parentAlias) + \".\" + this.escape(aliasName + \"_\" + column!.databaseName)] = orderBys[orderCriteria];\n            } else {\n                if (this.expressionMap.selects.find(select => select.selection === orderCriteria || select.aliasName === orderCriteria)) {\n                    orderByObject[this.escape(parentAlias) + \".\" + orderCriteria] = orderBys[orderCriteria];\n                } else {\n                    orderByObject[orderCriteria] = orderBys[orderCriteria];\n                }\n            }\n        });\n\n        return [selectString, orderByObject];\n    }\n\n    /**\n     * Loads raw results from the database.\n     */\n    protected async loadRawResults(queryRunner: QueryRunner) {\n        const [sql, parameters] = this.getQueryAndParameters();\n        const cacheOptions = typeof this.connection.options.cache === \"object\" ? this.connection.options.cache : {};\n        let savedQueryResultCacheOptions: QueryResultCacheOptions|undefined = undefined;\n        if (this.connection.queryResultCache && (this.expressionMap.cache || cacheOptions.alwaysEnabled)) {\n            savedQueryResultCacheOptions = await this.connection.queryResultCache.getFromCache({\n                identifier: this.expressionMap.cacheId,\n                query: this.getSql(),\n                duration: this.expressionMap.cacheDuration || cacheOptions.duration || 1000\n            }, queryRunner);\n            if (savedQueryResultCacheOptions && !this.connection.queryResultCache.isExpired(savedQueryResultCacheOptions))\n                return JSON.parse(savedQueryResultCacheOptions.result);\n        }\n\n        const results = await queryRunner.query(sql, parameters);\n\n        if (this.connection.queryResultCache && (this.expressionMap.cache || cacheOptions.alwaysEnabled)) {\n            await this.connection.queryResultCache.storeInCache({\n                identifier: this.expressionMap.cacheId,\n                query: this.getSql(),\n                time: new Date().getTime(),\n                duration: this.expressionMap.cacheDuration || cacheOptions.duration || 1000,\n                result: JSON.stringify(results)\n            }, savedQueryResultCacheOptions, queryRunner);\n        }\n\n        return results;\n    }\n\n    /**\n     * Merges into expression map given expression map properties.\n     */\n    protected mergeExpressionMap(expressionMap: Partial<QueryExpressionMap>): this {\n        Object.assign(this.expressionMap, expressionMap);\n        return this;\n    }\n\n    /**\n     * Normalizes a give number - converts to int if possible.\n     */\n    protected normalizeNumber(num: any) {\n        if (typeof num === \"number\" || num === undefined || num === null)\n            return num;\n\n        return parseInt(num);\n    }\n\n    /**\n     * Creates a query builder used to execute sql queries inside this query builder.\n     */\n    protected obtainQueryRunner() {\n        return this.queryRunner || this.connection.createQueryRunner(\"slave\");\n    }\n\n}\n"],"sourceRoot":".."}
##############################################
/src/query-builder/SelectQueryBuilder.js-1382-                        if (savedQueryResultCacheOptions && !this.connection.queryResultCache.isExpired(savedQueryResultCacheOptions))
/src/query-builder/SelectQueryBuilder.js:1383:                            return [2 /*return*/, JSON.parse(savedQueryResultCacheOptions.result)];
/src/query-builder/SelectQueryBuilder.js-1384-                        _b.label = 2;
##############################################
/src/driver/oracle/OracleDriver.js-308-        else if (columnMetadata.type === "json") {
/src/driver/oracle/OracleDriver.js:309:            value = JSON.parse(value);
/src/driver/oracle/OracleDriver.js-310-        }
##############################################
/src/driver/oracle/OracleDriver.js.map:1:{"version":3,"sources":["../../src/driver/oracle/OracleDriver.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,+EAA4E;AAC5E,6FAA0F;AAC1F,yDAAsD;AAGtD,kDAA+C;AAC/C,8DAA2D;AAE3D,8EAA2E;AAO3E,8CAA2C;AAE3C;;;;GAIG;AACH;IA6HI,4EAA4E;IAC5E,cAAc;IACd,4EAA4E;IAE5E,sBAAY,UAAsB;QA5GlC;;;WAGG;QACH,WAAM,GAAU,EAAE,CAAC;QAgBnB;;WAEG;QACH,iBAAY,GAAY,KAAK,CAAC;QAE9B;;WAEG;QACH,gBAAW,GAAG,IAAI,CAAC;QAEnB;;;;;WAKG;QACH,uBAAkB,GAAiB;YAC/B,MAAM;YACN,OAAO;YACP,WAAW;YACX,UAAU;YACV,MAAM;YACN,KAAK;YACL,UAAU;YACV,QAAQ;YACR,SAAS;YACT,KAAK;YACL,SAAS;YACT,SAAS;YACT,KAAK;YACL,UAAU;YACV,MAAM;YACN,kBAAkB;YAClB,MAAM;YACN,WAAW;YACX,0BAA0B;YAC1B,gCAAgC;YAChC,eAAe;YACf,cAAc;YACd,OAAO;YACP,MAAM;YACN,MAAM;YACN,OAAO;YACP,OAAO;YACP,QAAQ;SACX,CAAC;QAEF;;WAEG;QACH,0BAAqB,GAAiB;YAClC,MAAM;YACN,OAAO;YACP,WAAW;YACX,UAAU;SACb,CAAC;QAEF;;;WAGG;QACH,oBAAe,GAAsB;YACjC,UAAU,EAAE,UAAU;YACtB,iBAAiB,EAAE,mBAAmB;YACtC,UAAU,EAAE,UAAU;YACtB,iBAAiB,EAAE,mBAAmB;YACtC,OAAO,EAAE,QAAQ;YACjB,SAAS,EAAE,QAAQ;YACnB,aAAa,EAAE,UAAU;YACzB,kBAAkB,EAAE,WAAW;YAC/B,OAAO,EAAE,KAAK;YACd,eAAe,EAAE,UAAU;YAC3B,SAAS,EAAE,WAAW;YACtB,aAAa,EAAE,KAAK;YACpB,UAAU,EAAE,MAAM;YAClB,WAAW,EAAE,MAAM;SACtB,CAAC;QAaE,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,OAAkC,CAAC;QAE7D,sBAAsB;QACtB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAExB,qBAAqB;QACrB,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAE3C,mHAAmH;QACnH,kDAAkD;QAClD,0BAA0B;QAC1B,iDAAiD;QACjD,8BAA8B;QAC9B,qDAAqD;QACrD,yBAAyB;QACzB,gDAAgD;QAChD,EAAE;IACN,CAAC;IAED,4EAA4E;IAC5E,iBAAiB;IACjB,4EAA4E;IAE5E;;;;OAIG;IACG,8BAAO,GAAb;;;;;;;6BAEQ,IAAI,CAAC,OAAO,CAAC,WAAW,EAAxB,wBAAwB;wBACxB,KAAA,IAAI,CAAA;wBAAU,qBAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,UAAA,KAAK;gCACrE,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;4BAChD,CAAC,CAAC,CAAC,EAAA;;wBAFH,GAAK,MAAM,GAAG,SAEX,CAAC;wBACJ,KAAA,IAAI,CAAA;wBAAU,qBAAM,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,EAAA;;wBAAlF,GAAK,MAAM,GAAG,SAAoE,CAAC;wBACnF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC;;;wBAGzD,KAAA,IAAI,CAAA;wBAAU,qBAAM,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAA;;wBAA/D,GAAK,MAAM,GAAG,SAAiD,CAAC;wBAChE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;;;;;;KAE7C;IAED;;OAEG;IACH,mCAAY,GAAZ;QACI,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAC7B,CAAC;IAED;;OAEG;IACG,iCAAU,GAAhB;;;;;;wBACI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;4BACb,MAAM,gBAAC,OAAO,CAAC,MAAM,CAAC,IAAI,iDAAuB,CAAC,QAAQ,CAAC,CAAC,EAAC;wBAEjE,qBAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,EAAA;;wBAAjC,SAAiC,CAAC;wBAClC,qBAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAArB,CAAqB,CAAC,CAAC,EAAA;;wBAAlE,SAAkE,CAAC;wBACnE,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;wBACxB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;;;;;KACpB;IAED;;OAEG;IACH,0CAAmB,GAAnB;QACI,MAAM,CAAC,IAAI,uCAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACnD,CAAC;IAED;;OAEG;IACH,wCAAiB,GAAjB,UAAkB,IAAiC;QAAjC,qBAAA,EAAA,eAAiC;QAC/C,MAAM,CAAC,IAAI,qCAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED;;;OAGG;IACH,gDAAyB,GAAzB,UAA0B,GAAW,EAAE,UAAyB;QAC5D,EAAE,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC;YAC/C,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QACrB,IAAM,iBAAiB,GAAU,EAAE,CAAC;QACpC,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,UAAA,SAAS,IAAI,OAAA,IAAI,GAAG,SAAS,GAAG,MAAM,EAAzB,CAAyB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC3F,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,UAAC,GAAW;YACjD,IAAM,KAAK,GAAG,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,EAAE,CAAC,CAAC,KAAK,YAAY,QAAQ,CAAC,CAAC,CAAC;gBAC5B,MAAM,CAAC,KAAK,EAAE,CAAC;YAEnB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC9B,MAAM,CAAC,GAAG,CAAC;YACf,CAAC;QACL,CAAC,CAAC,CAAC,CAAC,kEAAkE;QACtE,MAAM,CAAC,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC;IACpC,CAAC;IAED;;OAEG;IACH,6BAAM,GAAN,UAAO,UAAkB;QACrB,MAAM,CAAC,OAAI,UAAU,OAAG,CAAC;IAC7B,CAAC;IAED;;OAEG;IACH,6CAAsB,GAAtB,UAAuB,KAAU,EAAE,cAA8B;QAC7D,EAAE,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC;YAC3B,KAAK,GAAG,cAAc,CAAC,WAAW,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAEjD,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,CAAC;YACtC,MAAM,CAAC,KAAK,CAAC;QAEjB,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;YAClC,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAElC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,qBAAS,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAElD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,qBAAS,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAElD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,UAAU,IAAI,cAAc,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;YAC5E,MAAM,CAAC,qBAAS,CAAC,4BAA4B,CAAC,KAAK,CAAC,CAAC;QAEzD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAEjC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC,CAAC;YAChD,MAAM,CAAC,qBAAS,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;QAEhD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC,CAAC;YAC/C,MAAM,CAAC,qBAAS,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC/C,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACH,2CAAoB,GAApB,UAAqB,KAAU,EAAE,cAA8B;QAC3D,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,CAAC;YACtC,MAAM,CAAC,KAAK,CAAC;QAEjB,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;YAClC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;QAEjC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC;YAC5C,KAAK,GAAG,qBAAS,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAEnD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACxC,KAAK,GAAG,qBAAS,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QAEnD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACxC,KAAK,GAAG,qBAAS,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAE/C,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACxC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAE9B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC,CAAC;YAChD,KAAK,GAAG,qBAAS,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;QAEjD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC,CAAC;YAC/C,KAAK,GAAG,qBAAS,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAChD,CAAC;QAED,EAAE,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC;YAC3B,KAAK,GAAG,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEnD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACH,oCAAa,GAAb,UAAc,MAA8G;QACxH,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACzB,IAAI,IAAI,SAAS,CAAC;QAEtB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YAChC,IAAI,IAAI,WAAW,CAAC;QAExB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;YAC9B,IAAI,IAAI,cAAc,CAAC;QAE3B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;YACjC,IAAI,IAAI,WAAW,CAAC;QAExB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC,CAAC;YACxC,IAAI,IAAI,MAAM,CAAC;QAEnB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC,CAAC;YACvC,IAAI,IAAI,MAAM,CAAC;QAEnB,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC;QACxB,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;OAEG;IACH,uCAAgB,GAAhB,UAAiB,MAAsB;QACnC,EAAE,CAAC,CAAC,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC;YACrC,MAAM,CAAC,EAAE,GAAG,MAAM,CAAC,OAAO,CAAC;QAE/B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,MAAM,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC;QAEtD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,MAAM,CAAC,OAAO,KAAK,UAAU,CAAC,CAAC,CAAC;YAC9C,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QAE5B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC5C,MAAM,CAAC,MAAI,MAAM,CAAC,OAAO,MAAG,CAAC;QAEjC,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;QAC1B,CAAC;IACL,CAAC;IAED;;OAEG;IACH,wCAAiB,GAAjB,UAAkB,MAAsB;QACpC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;IAC3B,CAAC;IAED;;OAEG;IACH,sCAAe,GAAf,UAAgB,MAAsB;QAElC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;YACd,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;QAEzB,IAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAW,CAAC;QAC5D,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC;YAC/G,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC,MAAO,CAAC,QAAQ,EAAE,CAAC;QAEpE,MAAM,CAAC,EAAE,CAAC;IACd,CAAC;IAED,qCAAc,GAAd,UAAe,MAAmB;QAC9B,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;QAEvB,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,IAAI,IAAI,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;QACtC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1C,IAAI,IAAI,GAAG,GAAG,MAAM,CAAC,SAAS,GAAG,GAAG,GAAG,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;QAC9D,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;YAC1B,IAAI,IAAK,GAAG,GAAG,MAAM,CAAC,SAAS,GAAG,GAAG,CAAC;QAC1C,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;YACtB,IAAI,IAAK,GAAG,GAAG,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;QACtC,CAAC;QAAC,IAAI,CAAE,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACnH,IAAI,IAAK,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAO,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;QAC/E,CAAC;QAED,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;YACf,IAAI,IAAI,QAAQ,CAAC;QAErB,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;OAIG;IACH,6CAAsB,GAAtB;QAAA,iBAOC;QANG,MAAM,CAAC,IAAI,OAAO,CAAM,UAAC,EAAE,EAAE,IAAI;YAC7B,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,UAAC,GAAQ,EAAE,UAAe,EAAE,OAAiB;gBACnE,EAAE,CAAC,CAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC1B,EAAE,CAAC,UAAU,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;;OAIG;IACH,4CAAqB,GAArB;QAAA,iBAYC;QAXG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACpB,MAAM,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAEzC,MAAM,CAAC,IAAI,OAAO,CAAM,UAAC,EAAE,EAAE,IAAI;YAC7B,IAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAE9D,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,aAAa,CAAC,UAAC,GAAQ,EAAE,UAAe;gBACxD,EAAE,CAAC,CAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC1B,EAAE,CAAC,UAAU,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED,4EAA4E;IAC5E,oBAAoB;IACpB,4EAA4E;IAE5E;;OAEG;IACO,uCAAgB,GAA1B;QACI,IAAI,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,6BAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAEjD,CAAC;QAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACT,MAAM,IAAI,+DAA8B,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QACnE,CAAC;IACL,CAAC;IAED;;OAEG;IACa,iCAAU,GAA1B,UAA2B,OAAgC,EAAE,WAA+C;;;;;gBAExG,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,yBAAW,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,yBAAyB;gBAG1G,iBAAiB,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;oBACxC,IAAI,EAAE,WAAW,CAAC,QAAQ;oBAC1B,QAAQ,EAAE,WAAW,CAAC,QAAQ;oBAC9B,aAAa,EAAE,WAAW,CAAC,IAAI,GAAG,GAAG,GAAG,WAAW,CAAC,IAAI,GAAG,GAAG,GAAG,WAAW,CAAC,GAAG;iBACnF,EAAE,OAAO,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;gBAExB,6DAA6D;gBAC7D,+DAA+D;gBAC/D,sBAAO,IAAI,OAAO,CAAO,UAAC,EAAE,EAAE,IAAI;wBAC9B,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,iBAAiB,EAAE,UAAC,GAAQ,EAAE,IAAS;4BAC1D,EAAE,CAAC,CAAC,GAAG,CAAC;gCACJ,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BACrB,EAAE,CAAC,IAAI,CAAC,CAAC;wBACb,CAAC,CAAC,CAAC;oBACP,CAAC,CAAC,EAAC;;;KAEN;IAED;;OAEG;IACa,gCAAS,GAAzB,UAA0B,IAAS;;;gBAC/B,sBAAO,IAAI,OAAO,CAAO,UAAC,EAAE,EAAE,IAAI;wBAC9B,IAAI,CAAC,KAAK,CAAC,UAAC,GAAQ,IAAK,OAAA,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAtB,CAAsB,CAAC,CAAC;wBACjD,IAAI,GAAG,SAAS,CAAC;oBACrB,CAAC,CAAC,EAAC;;;KACN;IAEL,mBAAC;AAAD,CAteA,AAseC,IAAA;AAteY,oCAAY","file":"OracleDriver.js","sourcesContent":["import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {OracleQueryRunner} from \"./OracleQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {OracleConnectionOptions} from \"./OracleConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {OracleConnectionCredentialsOptions} from \"./OracleConnectionCredentialsOptions\";\nimport {DriverUtils} from \"../DriverUtils\";\n\n/**\n * Organizes communication with Oracle RDBMS.\n *\n * todo: this driver is not 100% finished yet, need to fix all issues that are left\n */\nexport class OracleDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Underlying oracle library.\n     */\n    oracle: any;\n\n    /**\n     * Pool for master database.\n     */\n    master: any;\n\n    /**\n     * Pool for slave databases.\n     * Used in replication.\n     */\n    slaves: any[] = [];\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: OracleConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.techonthenet.com/oracle/datatypes.php\n     * @see https://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#CNCPT012\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"char\",\n        \"nchar\",\n        \"nvarchar2\",\n        \"varchar2\",\n        \"long\",\n        \"raw\",\n        \"long raw\",\n        \"number\",\n        \"numeric\",\n        \"dec\",\n        \"decimal\",\n        \"integer\",\n        \"int\",\n        \"smallint\",\n        \"real\",\n        \"double precision\",\n        \"date\",\n        \"timestamp\",\n        \"timestamp with time zone\",\n        \"timestamp with local time zone\",\n        \"interval year\",\n        \"interval day\",\n        \"bfile\",\n        \"blob\",\n        \"clob\",\n        \"nclob\",\n        \"rowid\",\n        \"urowid\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"char\",\n        \"nchar\",\n        \"nvarchar2\",\n        \"varchar2\"\n    ];\n\n    /**\n     * Orm has special columns and we need to know what database column types should be for those types.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime\",\n        createDateDefault: \"CURRENT_TIMESTAMP\",\n        updateDate: \"datetime\",\n        updateDateDefault: \"CURRENT_TIMESTAMP\",\n        version: \"number\",\n        treeLevel: \"number\",\n        migrationName: \"nvarchar\",\n        migrationTimestamp: \"timestamp\",\n        cacheId: \"int\",\n        cacheIdentifier: \"nvarchar\",\n        cacheTime: \"timestamp\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as OracleConnectionOptions;\n\n        // load oracle package\n        this.loadDependencies();\n\n        // extra oracle setup\n        this.oracle.outFormat = this.oracle.OBJECT;\n\n        // Object.assign(connection.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        // validate options to make sure everything is set\n        // if (!this.options.host)\n        //     throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.sid)\n        //     throw new DriverOptionNotSetError(\"sid\");\n        //\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     * Based on pooling options, it can either create connection immediately,\n     * either create a pool and create connection when needed.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.slaves = await Promise.all(this.options.replication.slaves.map(slave => {\n                return this.createPool(this.options, slave);\n            }));\n            this.master = await this.createPool(this.options, this.options.replication.master);\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.master = await this.createPool(this.options, this.options);\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.master)\n            return Promise.reject(new ConnectionIsNotSetError(\"oracle\"));\n\n        await this.closePool(this.master);\n        await Promise.all(this.slaves.map(slave => this.closePool(slave)));\n        this.master = undefined;\n        this.slaves = [];\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new OracleQueryRunner(this, mode);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            } else {\n                escapedParameters.push(value);\n                return key;\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return `\"${columnName}\"`;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToUtcDatetimeString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\") {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            value = JSON.parse(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n            \n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type?: ColumnType, length?: number | string, precision?: number, scale?: number, isArray?: boolean }): string {\n        let type = \"\";\n        if (column.type === Number) {\n            type += \"integer\";\n\n        } else if (column.type === String) {\n            type += \"nvarchar2\";\n\n        } else if (column.type === Date) {\n            type += \"timestamp(0)\";\n\n        } else if (column.type === Boolean) {\n            type += \"number(1)\";\n\n        } else if (column.type === \"simple-array\") {\n            type += \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            type += \"text\";\n\n        } else {\n            type += column.type;\n        }\n\n        return type;\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"true\" : \"false\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique;\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n\n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();\n\n        return \"\";\n    }\n\n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return new Promise<any>((ok, fail) => {\n            this.master.getConnection((err: any, connection: any, release: Function) => {\n                if (err) return fail(err);\n                ok(connection);\n            });\n        });\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.slaves.length)\n            return this.obtainMasterConnection();\n\n        return new Promise<any>((ok, fail) => {\n            const random = Math.floor(Math.random() * this.slaves.length);\n\n            this.slaves[random].getConnection((err: any, connection: any) => {\n                if (err) return fail(err);\n                ok(connection);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all driver dependencies.\n     */\n    protected loadDependencies(): void {\n        try {\n            this.oracle = PlatformTools.load(\"oracledb\");\n\n        } catch (e) {\n            throw new DriverPackageNotInstalledError(\"Oracle\", \"oracledb\");\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected async createPool(options: OracleConnectionOptions, credentials: OracleConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        const connectionOptions = Object.assign({}, {\n            user: credentials.username,\n            password: credentials.password,\n            connectString: credentials.host + \":\" + credentials.port + \"/\" + credentials.sid,\n        }, options.extra || {});\n\n        // pooling is enabled either when its set explicitly to true,\n        // either when its not defined at all (e.g. enabled by default)\n        return new Promise<void>((ok, fail) => {\n            this.oracle.createPool(connectionOptions, (err: any, pool: any) => {\n                if (err)\n                    return fail(err);\n                ok(pool);\n            });\n        });\n\n    }\n\n    /**\n     * Closes connection pool.\n     */\n    protected async closePool(pool: any): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            pool.close((err: any) => err ? fail(err) : ok());\n            pool = undefined;\n        });\n    }\n\n}\n"],"sourceRoot":"../.."}
##############################################
/src/driver/sqljs/SqljsDriver.js.map:1:{"version":3,"sources":["../../src/driver/sqljs/SqljsDriver.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gFAA6E;AAE7E,uDAAoD;AAGpD,6FAA0F;AAC1F,+EAA4E;AAC5E,8DAA2D;AAQ3D;IAAiC,+BAAoB;IAIjD,4EAA4E;IAC5E,cAAc;IACd,4EAA4E;IAE5E,qBAAY,UAAsB;QAAlC,YACI,kBAAM,UAAU,CAAC,SAUpB;QARG,8EAA8E;QAC9E,uEAAuE;QACvE,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACpF,MAAM,IAAI,iDAAuB,CAAC,8BAA8B,CAAC,CAAC;QACtE,CAAC;QAED,sBAAsB;QACtB,KAAI,CAAC,gBAAgB,EAAE,CAAC;;IAC5B,CAAC;IAGD,4EAA4E;IAC5E,iBAAiB;IACjB,4EAA4E;IAE5E;;OAEG;IACG,6BAAO,GAAb;;;;;;wBACI,KAAA,IAAI,CAAA;wBAAsB,qBAAM,IAAI,CAAC,wBAAwB,EAAE,EAAA;;wBAA/D,GAAK,kBAAkB,GAAG,SAAqC,CAAC;;;;;KACnE;IAED;;OAEG;IACG,gCAAU,GAAhB;;;;gBACI,sBAAO,IAAI,OAAO,CAAO,UAAC,EAAE,EAAE,IAAI;wBAC9B,IAAI,CAAC;4BACD,KAAI,CAAC,WAAW,GAAG,SAAS,CAAC;4BAC7B,KAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;4BAChC,EAAE,EAAE,CAAC;wBACT,CAAC;wBACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;4BACR,IAAI,CAAC,CAAC,CAAC,CAAC;wBACZ,CAAC;oBACL,CAAC,CAAC,EAAC;;;KACN;IAED;;OAEG;IACH,uCAAiB,GAAjB,UAAkB,IAAmC;QAAnC,qBAAA,EAAA,eAAmC;QACjD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;YAClB,IAAI,CAAC,WAAW,GAAG,IAAI,mCAAgB,CAAC,IAAI,CAAC,CAAC;QAElD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED;;;OAGG;IACH,0BAAI,GAAJ,UAAK,4BAAiD;QAClD,EAAE,CAAC,CAAC,OAAO,4BAA4B,KAAK,QAAQ,CAAC,CAAC,CAAC;YACnD,2BAA2B;YAC3B,EAAE,CAAC,CAAC,6BAAa,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;gBAChC,UAAU;gBACV,4DAA4D;gBAC5D,EAAE,CAAC,CAAC,6BAAa,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;oBACxD,IAAM,QAAQ,GAAG,6BAAa,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;oBAC1E,MAAM,CAAC,IAAI,CAAC,kCAAkC,CAAC,QAAQ,CAAC,CAAC;gBAC7D,CAAC;gBACD,IAAI,CAAC,CAAC;oBACF,MAAM,IAAI,KAAK,CAAC,UAAQ,4BAA4B,oBAAiB,CAAC,CAAC;gBAC3E,CAAC;YACL,CAAC;YACD,IAAI,CAAC,CAAC;gBACF,UAAU;gBACV,6DAA6D;gBAC7D,IAAM,mBAAmB,GAAG,6BAAa,CAAC,iBAAiB,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC;gBACjH,MAAM,CAAC,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACpF,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACF,MAAM,CAAC,IAAI,CAAC,kCAAkC,CAAC,4BAA4B,CAAC,CAAC;QACjF,CAAC;IACL,CAAC;IAED;;;OAGG;IACG,0BAAI,GAAV,UAAW,QAAiB;;;;;;wBACxB,EAAE,CAAC,CAAC,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;4BACtC,MAAM,IAAI,KAAK,CAAC,mGAAmG,CAAC,CAAC;wBACzH,CAAC;wBAEG,IAAI,GAAG,EAAE,CAAC;wBACd,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;4BACX,IAAI,GAAG,QAAQ,CAAC;wBACpB,CAAC;wBACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;4BAC7B,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;wBACjC,CAAC;6BAEG,CAAA,6BAAa,CAAC,IAAI,KAAK,MAAM,CAAA,EAA7B,wBAA6B;;;;wBAEnB,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC,CAAC;wBAC7D,qBAAM,6BAAa,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,CAAC,EAAA;;wBAA5C,SAA4C,CAAC;;;;wBAG7C,MAAM,IAAI,KAAK,CAAC,qCAAmC,GAAG,CAAC,CAAC;;;wBAItD,QAAQ,GAAe,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;wBAExD,aAAa,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;wBAC9C,6BAAa,CAAC,iBAAiB,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;;;;;;KAEnG;IAED;;;;OAIG;IACG,8BAAQ,GAAd;;;;;6BACQ,IAAI,CAAC,OAAO,CAAC,QAAQ,EAArB,wBAAqB;6BACjB,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAA7B,wBAA6B;wBAC7B,qBAAM,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAA;;wBAAlD,SAAkD,CAAC;;4BAGnD,qBAAM,IAAI,CAAC,IAAI,EAAE,EAAA;;wBAAjB,SAAiB,CAAC;;;;;;KAG7B;IAED;;OAEG;IACH,4BAAM,GAAN;QACI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;IAC5C,CAAC;IAED,4EAA4E;IAC5E,oBAAoB;IACpB,4EAA4E;IAE5E;;;OAGG;IACO,8CAAwB,GAAlC;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC5C,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAC1E,CAAC;IAED;;;OAGG;IACO,wDAAkC,GAA5C,UAA6C,QAAqB;QAAlE,iBAkBC;QAjBG,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,kBAAkB,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACjE,CAAC;QACD,IAAI,CAAC,CAAC;YACF,IAAI,CAAC,kBAAkB,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QACzD,CAAC;QAED,mCAAmC;QACnC,MAAM,CAAC,IAAI,OAAO,CAAM,UAAC,EAAE,EAAE,IAAI;YAC7B,IAAI,CAAC;gBACD,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;gBAC1D,EAAE,CAAC,KAAI,CAAC,kBAAkB,CAAC,CAAC;YAChC,CAAC;YACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACP,IAAI,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;OAEG;IACO,sCAAgB,GAA1B;QACI,EAAE,CAAC,CAAC,6BAAa,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;QAC7B,CAAC;QACD,IAAI,CAAC,CAAC;YACF,IAAI,CAAC;gBACD,IAAI,CAAC,MAAM,GAAG,6BAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAE/C,CAAC;YAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACT,MAAM,IAAI,+DAA8B,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;YACjE,CAAC;QACL,CAAC;IACL,CAAC;IACL,kBAAC;AAAD,CA1MA,AA0MC,CA1MgC,2CAAoB,GA0MpD;AA1MY,kCAAW","file":"SqljsDriver.js","sourcesContent":["import {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\nimport {SqljsConnectionOptions} from \"./SqljsConnectionOptions\";\nimport {SqljsQueryRunner} from \"./SqljsQueryRunner\";\nimport {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {Connection} from \"../../connection/Connection\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\n\n// This is needed to satisfy the typescript compiler.\ninterface Window {\n    SQL: any;\n}\ndeclare var window: Window;\n\nexport class SqljsDriver extends AbstractSqliteDriver {\n    // The driver specific options.\n    options: SqljsConnectionOptions;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n\n        // If autoSave is enabled by user, location or autoSaveCallback have to be set\n        // because either autoSave saves to location or calls autoSaveCallback.\n        if (this.options.autoSave && !this.options.location && !this.options.autoSaveCallback) {\n            throw new DriverOptionNotSetError(`location or autoSaveCallback`);\n        }\n\n        // load sql.js package\n        this.loadDependencies();\n    }\n\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n        this.databaseConnection = await this.createDatabaseConnection();\n    }\n\n    /**\n     * Closes connection with database.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            try {\n                this.queryRunner = undefined;\n                this.databaseConnection.close();\n                ok();\n            }\n            catch (e)  {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\" | \"slave\" = \"master\"): QueryRunner {\n        if (!this.queryRunner)\n            this.queryRunner = new SqljsQueryRunner(this);\n\n        return this.queryRunner;\n    }\n    \n    /**\n     * Loads a database from a given file (Node.js), local storage key (browser) or array.\n     * This will delete the current database!\n     */\n    load(fileNameOrLocalStorageOrData: string | Uint8Array): Promise<any> {\n        if (typeof fileNameOrLocalStorageOrData === \"string\") {\n            // content has to be loaded\n            if (PlatformTools.type === \"node\") {\n                // Node.js\n                // fileNameOrLocalStorageOrData should be a path to the file\n                if (PlatformTools.fileExist(fileNameOrLocalStorageOrData)) {\n                    const database = PlatformTools.readFileSync(fileNameOrLocalStorageOrData);\n                    return this.createDatabaseConnectionWithImport(database);\n                }\n                else {\n                    throw new Error(`File ${fileNameOrLocalStorageOrData} does not exist`);\n                }\n            } \n            else {\n                // browser\n                // fileNameOrLocalStorageOrData should be a local storage key\n                const localStorageContent = PlatformTools.getGlobalVariable().localStorage.getItem(fileNameOrLocalStorageOrData);\n                return this.createDatabaseConnectionWithImport(JSON.parse(localStorageContent));\n            }\n        }\n        else {\n            return this.createDatabaseConnectionWithImport(fileNameOrLocalStorageOrData);\n        }\n    }\n\n    /**\n     * Saved the current database to the given file (Node.js) or local storage key (browser).\n     * If no location path is given, the location path in the options (if specified) will be used.\n     */\n    async save(location?: string) {\n        if (!location && !this.options.location) {\n            throw new Error(`No location is set, specify a location parameter or add the location option to your configuration`);\n        }\n        \n        let path = \"\";\n        if (location) {\n            path = location;\n        }\n        else if (this.options.location) {\n            path = this.options.location;\n        }\n\n        if (PlatformTools.type === \"node\") {\n            try {\n                const content = new Buffer(this.databaseConnection.export());\n                await PlatformTools.writeFile(path, content);\n            }\n            catch (e) {\n                throw new Error(`Could not save database, error: ${e}`);\n            }\n        }\n        else {\n            const database: Uint8Array = this.databaseConnection.export();\n            // convert Uint8Array to number array to improve local-storage storage\n            const databaseArray = [].slice.call(database);\n            PlatformTools.getGlobalVariable().localStorage.setItem(path, JSON.stringify(databaseArray));\n        }\n    }\n\n    /**\n     * This gets called by the QueryRunner when a change to the database is made.\n     * If a custom autoSaveCallback is specified, it get's called with the database as Uint8Array,\n     * otherwise the save method is called which saves it to file (Node.js) or localstorage (browser).\n     */\n    async autoSave() {\n        if (this.options.autoSave) {\n            if (this.options.autoSaveCallback) {\n                await this.options.autoSaveCallback(this.export());\n            }\n            else {\n                await this.save();\n            }\n        }\n    }\n    \n    /**\n     * Returns the current database as Uint8Array.\n     */\n    export(): Uint8Array {\n        return this.databaseConnection.export();\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates connection with the database.\n     * If the location option is set, the database is loaded first.\n     */\n    protected createDatabaseConnection(): Promise<any> {\n        if (this.options.location) {\n            return this.load(this.options.location);\n        }\n\n        return this.createDatabaseConnectionWithImport(this.options.database);\n    }\n\n    /**\n     * Creates connection with an optional database.\n     * If database is specified it is loaded, otherwise a new empty database is created.\n     */\n    protected createDatabaseConnectionWithImport(database?: Uint8Array): Promise<any> {\n        if (database && database.length > 0) {\n            this.databaseConnection = new this.sqlite.Database(database);\n        }\n        else {\n            this.databaseConnection = new this.sqlite.Database();\n        }\n\n        // Enable foreign keys for database\n        return new Promise<any>((ok, fail) => {\n            try {\n                this.databaseConnection.exec(`PRAGMA foreign_keys = ON;`);\n                ok(this.databaseConnection);\n            }\n            catch (e) {\n                fail(e);\n            }\n        });\n    }\n\n    /**\n     * If driver dependency is not given explicitly, then try to load it via \"require\".\n     */\n    protected loadDependencies(): void {\n        if (PlatformTools.type === \"browser\") {\n            this.sqlite = window.SQL;\n        }\n        else {\n            try {\n                this.sqlite = PlatformTools.load(\"sql.js\");\n\n            } catch (e) {\n                throw new DriverPackageNotInstalledError(\"sql.js\", \"sql.js\");\n            }\n        }\n    }\n}"],"sourceRoot":"../.."}
##############################################
/src/driver/sqljs/SqljsDriver.js-140-                var localStorageContent = PlatformTools_1.PlatformTools.getGlobalVariable().localStorage.getItem(fileNameOrLocalStorageOrData);
/src/driver/sqljs/SqljsDriver.js:141:                return this.createDatabaseConnectionWithImport(JSON.parse(localStorageContent));
/src/driver/sqljs/SqljsDriver.js-142-            }
##############################################
/src/driver/sqljs/SqljsDriver.js-172-                        content = new Buffer(this.databaseConnection.export());
/src/driver/sqljs/SqljsDriver.js:173:                        return [4 /*yield*/, PlatformTools_1.PlatformTools.writeFile(path, content)];
/src/driver/sqljs/SqljsDriver.js-174-                    case 2:
##############################################
/src/driver/mongodb/MongoQueryRunner.js-418-                switch (_a.label) {
/src/driver/mongodb/MongoQueryRunner.js:419:                    case 0: return [4 /*yield*/, this.getCollection(collectionName).rename(newName, options)];
/src/driver/mongodb/MongoQueryRunner.js-420-                    case 1: return [2 /*return*/, _a.sent()];
##############################################
/src/driver/mongodb/MongoQueryRunner.js.map:1:{"version":3,"sources":["../../src/driver/mongodb/MongoQueryRunner.ts"],"names":[],"mappings":"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","file":"MongoQueryRunner.js","sourcesContent":["import {QueryRunner} from \"../../query-runner/QueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {Table} from \"../../schema-builder/schema/Table\";\nimport {TableForeignKey} from \"../../schema-builder/schema/TableForeignKey\";\nimport {TableIndex} from \"../../schema-builder/schema/TableIndex\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    Db,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"./typings\";\nimport {Connection} from \"../../connection/Connection\";\nimport {ReadStream} from \"../../platform/PlatformTools\";\nimport {MongoEntityManager} from \"../../entity-manager/MongoEntityManager\";\n\n/**\n * Runs queries on a single MongoDB connection.\n */\nexport class MongoQueryRunner implements QueryRunner {\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by this query runner.\n     */\n    connection: Connection;\n\n    /**\n     * Isolated entity manager working only with current query runner.\n     */\n    manager: MongoEntityManager;\n\n    /**\n     * Indicates if connection for this query runner is released.\n     * Once its released, query runner cannot run queries anymore.\n     * Always false for mongodb since mongodb has a single query executor instance.\n     */\n    isReleased = false;\n\n    /**\n     * Indicates if transaction is active in this query executor.\n     * Always false for mongodb since mongodb does not support transactions.\n     */\n    isTransactionActive = false;\n\n    /**\n     * Stores temporarily user data.\n     * Useful for sharing data with subscribers.\n     */\n    data = {};\n\n    /**\n     * Real database connection from a connection pool used to perform queries.\n     */\n    databaseConnection: Db;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection, databaseConnection: Db) {\n        this.connection = connection;\n        this.databaseConnection = databaseConnection;\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    cursor(collectionName: string, query?: ObjectLiteral): Cursor<any> {\n        return this.getCollection(collectionName).find(query || {});\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate(collectionName: string, pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<any> {\n        return this.getCollection(collectionName).aggregate(pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    async bulkWrite(collectionName: string, operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        return await this.getCollection(collectionName).bulkWrite(operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    async count(collectionName: string, query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        return await this.getCollection(collectionName).count(query || {}, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    async createCollectionIndex(collectionName: string, fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        return await this.getCollection(collectionName).createIndex(fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error. Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    async createCollectionIndexes(collectionName: string, indexSpecs: ObjectLiteral[]): Promise<void> {\n        return await this.getCollection(collectionName).createIndexes(indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    async deleteMany(collectionName: string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return await this.getCollection(collectionName).deleteMany(query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    async deleteOne(collectionName: string, query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return await this.getCollection(collectionName).deleteOne(query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    async distinct(collectionName: string, key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        return await this.getCollection(collectionName).distinct(key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    async dropCollectionIndex(collectionName: string, indexName: string, options?: CollectionOptions): Promise<any> {\n        return await this.getCollection(collectionName).dropIndex(indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    async dropCollectionIndexes(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).dropIndexes();\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndDelete(collectionName: string, query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndDelete(query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndReplace(collectionName: string, query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndReplace(query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    async findOneAndUpdate(collectionName: string, query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return await this.getCollection(collectionName).findOneAndUpdate(query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    async geoHaystackSearch(collectionName: string, x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        return await this.getCollection(collectionName).geoHaystackSearch(x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    async geoNear(collectionName: string, x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        return await this.getCollection(collectionName).geoNear(x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    async group(collectionName: string, keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        return await this.getCollection(collectionName).group(keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    async collectionIndexes(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).indexes();\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    async collectionIndexExists(collectionName: string, indexes: string|string[]): Promise<boolean> {\n        return await this.getCollection(collectionName).indexExists(indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    async collectionIndexInformation(collectionName: string, options?: { full: boolean }): Promise<any> {\n        return await this.getCollection(collectionName).indexInformation(options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp(collectionName: string, options?: CollectionOptions): OrderedBulkOperation {\n        return this.getCollection(collectionName).initializeOrderedBulkOp(options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp(collectionName: string, options?: CollectionOptions): UnorderedBulkOperation {\n        return this.getCollection(collectionName).initializeUnorderedBulkOp(options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    async insertMany(collectionName: string, docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        return await this.getCollection(collectionName).insertMany(docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    async insertOne(collectionName: string, doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        return await this.getCollection(collectionName).insertOne(doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    async isCapped(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).isCapped();\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes(collectionName: string, options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        return this.getCollection(collectionName).listIndexes(options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    async mapReduce(collectionName: string, map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        return await this.getCollection(collectionName).mapReduce(map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    async parallelCollectionScan(collectionName: string, options?: ParallelCollectionScanOptions): Promise<Cursor<any>[]> {\n        return await this.getCollection(collectionName).parallelCollectionScan(options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    async reIndex(collectionName: string): Promise<any> {\n        return await this.getCollection(collectionName).reIndex();\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    async rename(collectionName: string, newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        return await this.getCollection(collectionName).rename(newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    async replaceOne(collectionName: string, query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).replaceOne(query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    async stats(collectionName: string, options?: { scale: number }): Promise<CollStats> {\n        return await this.getCollection(collectionName).stats(options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    async updateMany(collectionName: string, query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).updateMany(query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    async updateOne(collectionName: string, query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return await this.getCollection(collectionName).updateOne(query, update, options);\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Methods (from QueryRunner)\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes all collections from the currently connected database.\n     * Be careful with using this method and avoid using it in production or migrations\n     * (because it can clear all your database).\n     */\n    async clearDatabase(): Promise<void> {\n        await this.databaseConnection.dropDatabase();\n    }\n\n    /**\n     * For MongoDB database we don't create connection, because its single connection already created by a driver.\n     */\n    async connect(): Promise<any> {\n    }\n\n    /**\n     * For MongoDB database we don't release connection, because its single connection.\n     */\n    async release(): Promise<void> {\n        // releasing connection are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Starts transaction.\n     */\n    async startTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Commits transaction.\n     */\n    async commitTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Rollbacks transaction.\n     */\n    async rollbackTransaction(): Promise<void> {\n        // transactions are not supported by mongodb driver, so simply don't do anything here\n    }\n\n    /**\n     * Executes a given SQL query.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        throw new Error(`Executing SQL query is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Returns raw data stream.\n     */\n    stream(query: string, parameters?: any[], onEnd?: Function, onError?: Function): Promise<ReadStream> {\n        throw new Error(`Stream is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Insert a new row with given values into the given table.\n     * Returns value of inserted object id.\n     */\n    async insert(collectionName: string, keyValues: ObjectLiteral): Promise<any> {\n        const results = await this.databaseConnection\n            .collection(collectionName)\n            .insertOne(keyValues);\n        const generatedMap = this.connection.getMetadata(collectionName).objectIdColumn!.createValueMap(results.insertedId);\n        return {\n            result: results,\n            generatedMap: generatedMap\n        };\n    }\n\n    /**\n     * Updates rows that match given conditions in the given table.\n     */\n    async update(collectionName: string, valuesMap: ObjectLiteral, conditions: ObjectLiteral): Promise<void> {\n        await this.databaseConnection\n            .collection(collectionName)\n            .updateOne(conditions, valuesMap);\n    }\n\n    /**\n     * Deletes from the given table by a given conditions.\n     */\n    async delete(collectionName: string, conditions: ObjectLiteral|string, maybeParameters?: any[]): Promise<void> {\n        if (typeof conditions === \"string\")\n            throw new Error(`String condition is not supported by MongoDB driver.`);\n\n        await this.databaseConnection\n            .collection(collectionName)\n            .deleteOne(conditions);\n    }\n\n    /**\n     * Inserts rows into the closure table.\n     */\n    async insertIntoClosureTable(collectionName: string, newEntityId: any, parentId: any, hasLevel: boolean): Promise<number> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Loads given table's data from the database.\n     */\n    async getTable(collectionName: string): Promise<Table|undefined> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Loads all tables (with given names) from the database and creates a Table from them.\n     */\n    async getTables(collectionNames: string[]): Promise<Table[]> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n        //          .            \n    }\n\n    /**\n     * Checks if database with the given name exist.\n     */\n    async hasDatabase(database: string): Promise<boolean> {\n        throw new Error(`Check database queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Checks if table with the given name exist in the database.\n     */\n    async hasTable(collectionName: string): Promise<boolean> {\n        throw new Error(`Check schema queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a database if it's not created.\n     */\n    createDatabase(database: string): Promise<void[]> {\n        throw new Error(`Database create queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a schema if it's not created.\n     */\n    createSchema(schemas: string[]): Promise<void[]> {\n        throw new Error(`Schema create queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new table from the given table and columns inside it.\n     */\n    async createTable(table: Table): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops the table.\n     */\n    async dropTable(tableName: string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Checks if column with the given name exist in the given table.\n     */\n    async hasColumn(collectionName: string, columnName: string): Promise<boolean> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new column from the column in the table.\n     */\n    async addColumn(tableOrName: Table|string, column: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new columns from the column in the table.\n     */\n    async addColumns(tableOrName: Table|string, columns: TableColumn[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Renames column in the given table.\n     */\n    async renameColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newTableColumnOrName: TableColumn|string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumn(tableOrName: Table|string, oldTableColumnOrName: TableColumn|string, newColumn: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Changes a column in the table.\n     */\n    async changeColumns(table: Table, changedColumns: { newColumn: TableColumn, oldColumn: TableColumn }[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops column in the table.\n     */\n    async dropColumn(table: Table, column: TableColumn): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops the columns in the table.\n     */\n    async dropColumns(table: Table, columns: TableColumn[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Updates table's primary keys.\n     */\n    async updatePrimaryKeys(table: Table): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new foreign key.\n     */\n    async createForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new foreign keys.\n     */\n    async createForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops a foreign key from the table.\n     */\n    async dropForeignKey(tableOrName: Table|string, foreignKey: TableForeignKey): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops a foreign keys from the table.\n     */\n    async dropForeignKeys(tableOrName: Table|string, foreignKeys: TableForeignKey[]): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Creates a new index.\n     */\n    async createIndex(collectionName: string, index: TableIndex): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops an index from the table.\n     */\n    async dropIndex(collectionName: string, indexName: string): Promise<void> {\n        throw new Error(`Schema update queries are not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Drops collection.\n     */\n    async truncate(collectionName: string): Promise<void> {\n        await this.databaseConnection\n            .dropCollection(collectionName);\n    }\n\n    /**\n     * Enables special query runner mode in which sql queries won't be executed,\n     * instead they will be memorized into a special variable inside query runner.\n     * You can get memorized sql using getMemorySql() method.\n     */\n    enableSqlMemory(): void {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Disables special query runner mode in which sql queries won't be executed\n     * started by calling enableSqlMemory() method.\n     *\n     * Previously memorized sql will be flushed.\n     */\n    disableSqlMemory(): void {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    /**\n     * Gets sql stored in the memory. Parameters in the sql are already replaced.\n     */\n    getMemorySql():  (string|{ up: string, down: string })[] {\n        throw new Error(`This operation is not supported by MongoDB driver.`);\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Gets collection from the database with a given name.\n     */\n    protected getCollection(collectionName: string): Collection {\n        return this.databaseConnection.collection(collectionName);\n    }\n\n}"],"sourceRoot":"../.."}
##############################################
/src/driver/mysql/MysqlDriver.js-317-        else if (columnMetadata.type === "json") {
/src/driver/mysql/MysqlDriver.js:318:            value = typeof value === "string" ? JSON.parse(value) : value;
/src/driver/mysql/MysqlDriver.js-319-        }
##############################################
/src/driver/mysql/MysqlDriver.js.map:1:{"version":3,"sources":["../../src/driver/mysql/MysqlDriver.ts"],"names":[],"mappings":"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","file":"MysqlDriver.js","sourcesContent":["import {Driver} from \"../Driver\";\nimport {ConnectionIsNotSetError} from \"../../error/ConnectionIsNotSetError\";\nimport {DriverPackageNotInstalledError} from \"../../error/DriverPackageNotInstalledError\";\nimport {DriverUtils} from \"../DriverUtils\";\nimport {MysqlQueryRunner} from \"./MysqlQueryRunner\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DateUtils} from \"../../util/DateUtils\";\nimport {PlatformTools} from \"../../platform/PlatformTools\";\nimport {Connection} from \"../../connection/Connection\";\nimport {RdbmsSchemaBuilder} from \"../../schema-builder/RdbmsSchemaBuilder\";\nimport {MysqlConnectionOptions} from \"./MysqlConnectionOptions\";\nimport {MappedColumnTypes} from \"../types/MappedColumnTypes\";\nimport {ColumnType} from \"../types/ColumnTypes\";\nimport {DataTypeDefaults} from \"../types/DataTypeDefaults\";\nimport {TableColumn} from \"../../schema-builder/schema/TableColumn\";\nimport {RandomGenerator} from \"../../util/RandomGenerator\";\nimport {MysqlConnectionCredentialsOptions} from \"./MysqlConnectionCredentialsOptions\";\n\n/**\n * Organizes communication with MySQL DBMS.\n */\nexport class MysqlDriver implements Driver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection used by driver.\n     */\n    connection: Connection;\n\n    /**\n     * Mysql underlying library.\n     */\n    mysql: any;\n\n    /**\n     * Connection pool.\n     * Used in non-replication mode.\n     */\n    pool: any;\n\n    /**\n     * Pool cluster used in replication mode.\n     */\n    poolCluster: any;\n\n    // -------------------------------------------------------------------------\n    // Public Implemented Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: MysqlConnectionOptions;\n\n    /**\n     * Master database used to perform all write queries.\n     */\n    database?: string;\n\n    /**\n     * Indicates if replication is enabled.\n     */\n    isReplicated: boolean = false;\n\n    /**\n     * Indicates if tree tables are supported by this driver.\n     */\n    treeSupport = true;\n\n    /**\n     * Gets list of supported column data types by a driver.\n     *\n     * @see https://www.tutorialspoint.com/mysql/mysql-data-types.htm\n     * @see https://dev.mysql.com/doc/refman/5.7/en/data-types.html\n     */\n    supportedDataTypes: ColumnType[] = [\n        \"int\",\n        \"tinyint\",\n        \"smallint\",\n        \"mediumint\",\n        \"bigint\",\n        \"float\",\n        \"double\",\n        \"decimal\",\n        \"date\",\n        \"datetime\",\n        \"timestamp\",\n        \"time\",\n        \"year\",\n        \"char\",\n        \"varchar\",\n        \"blob\",\n        \"text\",\n        \"tinyblob\",\n        \"tinytext\",\n        \"mediumblob\",\n        \"mediumtext\",\n        \"longblob\",\n        \"longtext\",\n        \"enum\",\n        \"json\"\n    ];\n\n    /**\n     * Gets list of column data types that support length by a driver.\n     */\n    withLengthColumnTypes: ColumnType[] = [\n        \"int\",\n        \"tinyint\",\n        \"smallint\",\n        \"mediumint\",\n        \"bigint\",\n        \"char\",\n        \"varchar\",\n        \"blob\",\n        \"text\"\n    ];\n\n    /**\n     * ORM has special columns and we need to know what database column types should be for those columns.\n     * Column types are driver dependant.\n     */\n    mappedDataTypes: MappedColumnTypes = {\n        createDate: \"datetime\",\n        createDatePrecision: 6,\n        createDateDefault: \"CURRENT_TIMESTAMP(6)\",\n        updateDate: \"datetime\",\n        updateDatePrecision: 6,\n        updateDateDefault: \"CURRENT_TIMESTAMP(6)\",\n        version: \"int\",\n        treeLevel: \"int\",\n        migrationName: \"varchar\",\n        migrationTimestamp: \"bigint\",\n        cacheId: \"int\",\n        cacheIdentifier: \"varchar\",\n        cacheTime: \"bigint\",\n        cacheDuration: \"int\",\n        cacheQuery: \"text\",\n        cacheResult: \"text\",\n    };\n\n    /**\n     * Default values of length, precision and scale depends on column data type.\n     * Used in the cases when length/precision/scale is not specified by user.\n     */\n    dataTypeDefaults: DataTypeDefaults = {\n        varchar: { length: 255 },\n        int: { length: 11 },\n        tinyint: { length: 4 },\n        smallint: { length: 5 },\n        mediumint: { length: 9 },\n        bigint: { length: 20 },\n        year: { length: 4 }\n    };\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n    \n    constructor(connection: Connection) {\n        this.connection = connection;\n        this.options = connection.options as MysqlConnectionOptions;\n        this.isReplicated = this.options.replication ? true : false;\n\n        // load mysql package\n        this.loadDependencies();\n\n        // validate options to make sure everything is set\n        // todo: revisit validation with replication in mind\n        // if (!(this.options.host || (this.options.extra && this.options.extra.socketPath)) && !this.options.socketPath)\n        //     throw new DriverOptionNotSetError(\"socketPath and host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        // if (!this.options.database)\n        //     throw new DriverOptionNotSetError(\"database\");\n        // todo: check what is going on when connection is setup without database and how to connect to a database then?\n        // todo: provide options to auto-create a database if it does not exist yet\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n\n        if (this.options.replication) {\n            this.poolCluster = this.mysql.createPoolCluster(this.options.replication);\n            this.options.replication.slaves.forEach((slave, index) => {\n                this.poolCluster.add(\"SLAVE\" + index, this.createConnectionOptions(this.options, slave));\n            });\n            this.poolCluster.add(\"MASTER\", this.createConnectionOptions(this.options, this.options.replication.master));\n            this.database = this.options.replication.master.database;\n\n        } else {\n            this.pool = await this.createPool(this.createConnectionOptions(this.options, this.options));\n            this.database = this.options.database;\n        }\n    }\n\n    /**\n     * Makes any action after connection (e.g. create extensions in Postgres driver).\n     */\n    afterConnect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    async disconnect(): Promise<void> {\n        if (!this.poolCluster && !this.pool)\n            return Promise.reject(new ConnectionIsNotSetError(\"mysql\"));\n\n        if (this.poolCluster) {\n            return new Promise<void>((ok, fail) => {\n                this.poolCluster.end((err: any) => err ? fail(err) : ok());\n                this.poolCluster = undefined;\n            });\n        }\n        if (this.pool) {\n            return new Promise<void>((ok, fail) => {\n                this.pool.end((err: any) => {\n                    if (err) return fail(err);\n                    this.pool = undefined;\n                    ok();\n                });\n            });\n        }\n    }\n\n    /**\n     * Creates a schema builder used to build and sync a schema.\n     */\n    createSchemaBuilder() {\n        return new RdbmsSchemaBuilder(this.connection);\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\") {\n        return new MysqlQueryRunner(this, mode);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            } else {\n                escapedParameters.push(parameters[key.substr(1)]);\n                return \"?\";\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return \"`\" + columnName + \"`\";\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.to(value);\n\n        if (value === null || value === undefined)\n            return value;\n\n        if (columnMetadata.type === Boolean) {\n            return value === true ? 1 : 0;\n\n        } else if (columnMetadata.type === \"date\") {\n            return DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"time\") {\n            return DateUtils.mixedDateToTimeString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            return DateUtils.mixedDateToDate(value, true);\n\n        } else if (columnMetadata.isGenerated && columnMetadata.generationStrategy === \"uuid\" && !value) {\n            return RandomGenerator.uuid4();\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            return DateUtils.simpleArrayToString(value);\n\n        } else if (columnMetadata.type === \"simple-json\") {\n            return DateUtils.simpleJsonToString(value);\n        }\n\n        return value;\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (value === null || value === undefined)\n            return value;\n            \n        if (columnMetadata.type === Boolean) {\n            value = value ? true : false;\n\n        } else if (columnMetadata.type === \"datetime\" || columnMetadata.type === Date) {\n            value = DateUtils.normalizeHydratedDate(value);\n\n        } else if (columnMetadata.type === \"date\") {\n            value = DateUtils.mixedDateToDateString(value);\n\n        } else if (columnMetadata.type === \"json\") {\n            value = typeof value === \"string\" ? JSON.parse(value) : value;\n\n        } else if (columnMetadata.type === \"time\") {\n            value = DateUtils.mixedTimeToString(value);\n\n        } else if (columnMetadata.type === \"simple-array\") {\n            value = DateUtils.stringToSimpleArray(value);\n            \n        } else if (columnMetadata.type === \"simple-json\") {\n            value = DateUtils.stringToSimpleJson(value);\n        }\n\n        if (columnMetadata.transformer)\n            value = columnMetadata.transformer.from(value);\n\n        return value;\n    }\n\n    /**\n     * Creates a database type from a given column metadata.\n     */\n    normalizeType(column: { type: ColumnType, length?: number | string, precision?: number, scale?: number }): string {\n        if (column.type === Number || column.type === \"integer\") {\n            return \"int\";\n\n        } else if (column.type === String) {\n            return \"varchar\";\n\n        } else if (column.type === Date) {\n            return \"datetime\";\n\n        } else if ((column.type as any) === Buffer) {\n            return \"blob\";\n\n        } else if (column.type === Boolean) {\n            return \"tinyint\";\n\n        } else if (column.type === \"uuid\") {\n            return \"varchar\";\n\n        } else if (column.type === \"simple-array\") {\n            return \"text\";\n\n        } else if (column.type === \"simple-json\") {\n            return \"text\";\n\n        } else {\n            return column.type as string || \"\";\n        }\n    }\n\n    /**\n     * Normalizes \"default\" value of the column.\n     */\n    normalizeDefault(column: ColumnMetadata): string {\n        if (typeof column.default === \"number\") {\n            return \"\" + column.default;\n\n        } else if (typeof column.default === \"boolean\") {\n            return column.default === true ? \"1\" : \"0\";\n\n        } else if (typeof column.default === \"function\") {\n            return column.default();\n\n        } else if (typeof column.default === \"string\") {\n            return `'${column.default}'`;\n\n        } else {\n            return column.default;\n        }\n    }\n\n    /**\n     * Normalizes \"isUnique\" value of the column.\n     */\n    normalizeIsUnique(column: ColumnMetadata): boolean {\n        return column.isUnique || \n            !!column.entityMetadata.indices.find(index => index.isUnique && index.columns.length === 1 && index.columns[0] === column);\n    }\n\n    /**\n     * Calculates column length taking into account the default length values.\n     */\n    getColumnLength(column: ColumnMetadata): string {\n        \n        if (column.length)\n            return column.length;\n\n        const normalizedType = this.normalizeType(column) as string;\n        if (this.dataTypeDefaults && this.dataTypeDefaults[normalizedType] && this.dataTypeDefaults[normalizedType].length)\n            return this.dataTypeDefaults[normalizedType].length!.toString();       \n\n        return \"\";\n    }    \n    \n    createFullType(column: TableColumn): string {\n        let type = column.type;\n\n        if (column.length) {\n            type += \"(\" + column.length + \")\";\n        } else if (column.precision && column.scale) {\n            type += \"(\" + column.precision + \",\" + column.scale + \")\";\n        } else if (column.precision) {\n            type +=  \"(\" + column.precision + \")\";\n        } else if (column.scale) {\n            type +=  \"(\" + column.scale + \")\";\n        } else  if (this.dataTypeDefaults && this.dataTypeDefaults[column.type] && this.dataTypeDefaults[column.type].length) {\n            type +=  \"(\" + this.dataTypeDefaults[column.type].length!.toString() + \")\";\n        }\n\n        if (column.isArray)\n            type += \" array\";\n\n        return type;\n    }\n\n    /**\n     * Obtains a new database connection to a master server.\n     * Used for replication.\n     * If replication is not setup then returns default connection's database connection.\n     */\n    obtainMasterConnection(): Promise<any> {\n        return new Promise<any>((ok, fail) => {\n            if (this.poolCluster) {\n                this.poolCluster.getConnection(\"MASTER\", (err: any, dbConnection: any) => {\n                    err ? fail(err) : ok(dbConnection);\n                });\n\n            } else if (this.pool) {\n                this.pool.getConnection((err: any, dbConnection: any) => {\n                    err ? fail(err) : ok(dbConnection);\n                });\n            } else {\n                fail(new Error(`Connection is not established with mysql database`));\n            }\n        });\n    }\n\n    /**\n     * Obtains a new database connection to a slave server.\n     * Used for replication.\n     * If replication is not setup then returns master (default) connection's database connection.\n     */\n    obtainSlaveConnection(): Promise<any> {\n        if (!this.poolCluster)\n            return this.obtainMasterConnection();\n\n        return new Promise<any>((ok, fail) => {\n            this.poolCluster.getConnection(\"SLAVE*\", (err: any, dbConnection: any) => {\n                err ? fail(err) : ok(dbConnection);\n            });\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Loads all driver dependencies.\n     */\n    protected loadDependencies(): void {\n        try {\n            this.mysql = PlatformTools.load(\"mysql\");  // try to load first supported package\n\n        } catch (e) {\n            try {\n                this.mysql = PlatformTools.load(\"mysql2\"); // try to load second supported package\n\n            } catch (e) {\n                throw new DriverPackageNotInstalledError(\"Mysql\", \"mysql\");\n            }\n        }\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected createConnectionOptions(options: MysqlConnectionOptions, credentials: MysqlConnectionCredentialsOptions): Promise<any> {\n\n        credentials = Object.assign(credentials, DriverUtils.buildDriverOptions(credentials)); // todo: do it better way\n\n        // build connection options for the driver\n        return Object.assign({}, {\n            charset: options.charset,\n            timezone: options.timezone,\n            connectTimeout: options.connectTimeout,\n            insecureAuth: options.insecureAuth,\n            supportBigNumbers: options.supportBigNumbers,\n            bigNumberStrings: options.bigNumberStrings,\n            dateStrings: options.dateStrings,\n            debug: options.debug,\n            trace: options.trace,\n            multipleStatements: options.multipleStatements,\n            flags: options.flags\n        }, {\n            host: credentials.host,\n            user: credentials.username,\n            password: credentials.password,\n            database: credentials.database,\n            port: credentials.port,\n            ssl: options.ssl\n        }, options.extra || {});\n    }\n\n    /**\n     * Creates a new connection pool for a given database credentials.\n     */\n    protected createPool(connectionOptions: any): Promise<any> {\n\n        // create a connection pool\n        const pool = this.mysql.createPool(connectionOptions);\n\n        // make sure connection is working fine\n        return new Promise<void>((ok, fail) => {\n            // (issue #610) we make first connection to database to make sure if connection credentials are wrong\n            // we give error before calling any other method that creates actual query runner\n            pool.getConnection((err: any, connection: any) => {\n                if (err)\n                    return pool.end(() => fail(err));\n\n                connection.release();\n                ok(pool);\n            });\n        });\n    }\n\n}\n"],"sourceRoot":"../.."}
##############################################
/src/driver/websql/WebsqlDriver.js-121-        if (columnMetadata.type === "json") {
/src/driver/websql/WebsqlDriver.js:122:            return JSON.parse(value);
/src/driver/websql/WebsqlDriver.js-123-        }
##############################################
/src/driver/websql/WebsqlDriver.js.map:1:{"version":3,"sources":["../../src/driver/websql/WebsqlDriver.ts"],"names":[],"mappings":"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","file":"WebsqlDriver.js","sourcesContent":["import {DriverUtils} from \"../DriverUtils\";\nimport {ObjectLiteral} from \"../../common/ObjectLiteral\";\nimport {ColumnMetadata} from \"../../metadata/ColumnMetadata\";\nimport {DriverOptionNotSetError} from \"../../error/DriverOptionNotSetError\";\nimport {WebsqlQueryRunner} from \"./WebsqlQueryRunner\";\nimport {Connection} from \"../../connection/Connection\";\nimport {WebSqlConnectionOptions} from \"./WebSqlConnectionOptions\";\nimport {AbstractSqliteDriver} from \"../sqlite-abstract/AbstractSqliteDriver\";\n\n/**\n * Organizes communication with WebSQL in the browser.\n */\nexport class WebsqlDriver extends AbstractSqliteDriver {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Connection options.\n     */\n    options: WebSqlConnectionOptions;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection) {\n        super(connection);\n        \n        this.options = connection.options as WebSqlConnectionOptions;\n        Object.assign(connection.options, DriverUtils.buildDriverOptions(connection.options)); // todo: do it better way\n        this.database = this.options.database;\n\n        // validate options to make sure everything is set\n        // if (!this.options.host)\n        //     throw new DriverOptionNotSetError(\"host\");\n        // if (!this.options.username)\n        //     throw new DriverOptionNotSetError(\"username\");\n        if (!this.options.database)\n            throw new DriverOptionNotSetError(\"database\");\n        // todo: what about extra options: version, description, size\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Performs connection to the database.\n     */\n    async connect(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    /**\n     * Closes connection with the database.\n     */\n    disconnect(): Promise<void> {\n        return Promise.resolve();\n        // if (!this.databaseConnection)\n        //     throw new ConnectionIsNotSetError(\"websql\");\n\n        // return new Promise<void>((ok, fail) => {\n            // const handler = (err: any) => err ? fail(err) : ok();\n            // todo: find out how to close connection\n            // ok();\n        // });\n    }\n\n    /**\n     * Creates a query runner used to execute database queries.\n     */\n    createQueryRunner(mode: \"master\"|\"slave\" = \"master\"): WebsqlQueryRunner {\n        return new WebsqlQueryRunner(this);\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type and metadata.\n     */\n    preparePersistentValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.type === \"json\") {\n            return JSON.stringify(value);\n        }\n\n        return super.preparePersistentValue(value, columnMetadata);\n    }\n\n    /**\n     * Prepares given value to a value to be persisted, based on its column type or metadata.\n     */\n    prepareHydratedValue(value: any, columnMetadata: ColumnMetadata): any {\n        if (columnMetadata.type === \"json\") {\n            return JSON.parse(value);\n        }\n\n        return super.prepareHydratedValue(value, columnMetadata);\n    }\n\n    /**\n     * Replaces parameters in the given sql with special escaping character\n     * and an array of parameter names to be passed to a query.\n     */\n    escapeQueryWithParameters(sql: string, parameters: ObjectLiteral): [string, any[]] {\n        if (!parameters || !Object.keys(parameters).length)\n            return [sql, []];\n        const escapedParameters: any[] = [];\n        const keys = Object.keys(parameters).map(parameter => \"(:\" + parameter + \"\\\\b)\").join(\"|\");\n        sql = sql.replace(new RegExp(keys, \"g\"), (key: string) => {\n            const value = parameters[key.substr(1)];\n            if (value instanceof Function) {\n                return value();\n\n            }\n            // Websql doesn't support queries boolean values. Therefore 1 and 0 has to be used.\n            else if ((typeof value) === \"boolean\") {\n                escapedParameters.push((value ? 1 : 0));\n                return \"?\";\n            } else {\n                escapedParameters.push(value);\n                return \"?\";\n            }\n        }); // todo: make replace only in value statements, otherwise problems\n        return [sql, escapedParameters];\n    }\n\n    /**\n     * Escapes a column name.\n     */\n    escape(columnName: string): string {\n        return columnName; // \"`\" + columnName + \"`\";\n    }\n}"],"sourceRoot":"../.."}
##############################################
/src/repository/MongoRepository.js.map:1:{"version":3,"sources":["../../src/repository/MongoRepository.ts"],"names":[],"mappings":"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","file":"MongoRepository.js","sourcesContent":["import {ObjectLiteral} from \"../common/ObjectLiteral\";\nimport {Repository} from \"./Repository\";\nimport {FindManyOptions} from \"../find-options/FindManyOptions\";\nimport {FindOneOptions} from \"../find-options/FindOneOptions\";\nimport {\n    AggregationCursor,\n    BulkWriteOpResultObject,\n    Code,\n    Collection,\n    CollectionAggregationOptions,\n    CollectionBluckWriteOptions,\n    CollectionInsertManyOptions,\n    CollectionInsertOneOptions,\n    CollectionOptions,\n    CollStats,\n    CommandCursor,\n    Cursor,\n    DeleteWriteOpResultObject,\n    FindAndModifyWriteOpResultObject,\n    FindOneAndReplaceOption,\n    GeoHaystackSearchOptions,\n    GeoNearOptions,\n    InsertOneWriteOpResult,\n    InsertWriteOpResult,\n    MapReduceOptions,\n    MongoCountPreferences,\n    MongodbIndexOptions,\n    OrderedBulkOperation,\n    ParallelCollectionScanOptions,\n    ReadPreference,\n    ReplaceOneOptions,\n    UnorderedBulkOperation,\n    UpdateWriteOpResult\n} from \"../driver/mongodb/typings\";\nimport {MongoEntityManager} from \"../entity-manager/MongoEntityManager\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {SelectQueryBuilder} from \"../query-builder/SelectQueryBuilder\";\n\n/**\n * Repository used to manage mongodb documents of a single entity type.\n */\nexport class MongoRepository<Entity extends ObjectLiteral> extends Repository<Entity> {\n\n    // -------------------------------------------------------------------------\n    // Public Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity Manager used by this repository.\n     */\n    readonly manager: MongoEntityManager;\n\n    // -------------------------------------------------------------------------\n    // Overridden Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Raw SQL query execution is not supported by MongoDB.\n     * Calling this method will return an error.\n     */\n    query(query: string, parameters?: any[]): Promise<any> {\n        throw new Error(`Queries aren't supported by MongoDB.`);\n    }\n\n    /**\n     * Using Query Builder with MongoDB is not supported yet.\n     * Calling this method will return an error.\n     */\n    createQueryBuilder(alias: string, queryRunner?: QueryRunner): SelectQueryBuilder<Entity> {\n        throw new Error(`Query Builder is not supported by MongoDB.`);\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     */\n    find(optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        return this.manager.find(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entities that match given find options or conditions.\n     * Also counts all entities that match given conditions,\n     * but ignores pagination settings (from and take options).\n     */\n    findAndCount(optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<[ Entity[], number ]> {\n        return this.manager.findAndCount(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entities by ids.\n     * Optionally find options can be applied.\n     */\n    findByIds(ids: any[], optionsOrConditions?: FindManyOptions<Entity>|Partial<Entity>): Promise<Entity[]> {\n        return this.manager.findByIds(this.metadata.target, ids, optionsOrConditions);\n    }\n\n    /**\n     * Finds first entity that matches given conditions and/or find options.\n     */\n    findOne(optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOne(this.metadata.target, optionsOrConditions);\n    }\n\n    /**\n     * Finds entity by given id.\n     * Optionally find options or conditions can be applied.\n     */\n    findOneById(id: any, optionsOrConditions?: FindOneOptions<Entity>|Partial<Entity>): Promise<Entity|undefined> {\n        return this.manager.findOneById(this.metadata.target, id, optionsOrConditions);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     */\n    createCursor(query?: ObjectLiteral): Cursor<Entity> {\n        return this.manager.createCursor(this.metadata.target, query);\n    }\n\n    /**\n     * Creates a cursor for a query that can be used to iterate over results from MongoDB.\n     * This returns modified version of cursor that transforms each result into Entity model.\n     */\n    createEntityCursor(query?: ObjectLiteral): Cursor<Entity> {\n        return this.manager.createEntityCursor(this.metadata.target, query);\n    }\n\n    /**\n     * Execute an aggregation framework pipeline against the collection.\n     */\n    aggregate(pipeline: ObjectLiteral[], options?: CollectionAggregationOptions): AggregationCursor<Entity> {\n        return this.manager.aggregate(this.metadata.target, pipeline, options);\n    }\n\n    /**\n     * Perform a bulkWrite operation without a fluent API.\n     */\n    bulkWrite(operations: ObjectLiteral[], options?: CollectionBluckWriteOptions): Promise<BulkWriteOpResultObject> {\n        return this.manager.bulkWrite(this.metadata.target, operations, options);\n    }\n\n    /**\n     * Count number of matching documents in the db to a query.\n     */\n    count(query?: ObjectLiteral, options?: MongoCountPreferences): Promise<any> {\n        return this.manager.count(this.metadata.target, query || {}, options);\n    }\n\n    /**\n     * Creates an index on the db and collection.\n     */\n    createCollectionIndex(fieldOrSpec: string|any, options?: MongodbIndexOptions): Promise<string> {\n        return this.manager.createCollectionIndex(this.metadata.target, fieldOrSpec, options);\n    }\n\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for MongoDB 2.6 or higher.\n     * Earlier version of MongoDB will throw a command not supported error.\n     * Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n     */\n    createCollectionIndexes(indexSpecs: ObjectLiteral[]): Promise<void> {\n        return this.manager.createCollectionIndexes(this.metadata.target, indexSpecs);\n    }\n\n    /**\n     * Delete multiple documents on MongoDB.\n     */\n    deleteMany(query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return this.manager.deleteMany(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * Delete a document on MongoDB.\n     */\n    deleteOne(query: ObjectLiteral, options?: CollectionOptions): Promise<DeleteWriteOpResultObject> {\n        return this.manager.deleteOne(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * The distinct command returns returns a list of distinct values for the given key across a collection.\n     */\n    distinct(key: string, query: ObjectLiteral, options?: { readPreference?: ReadPreference|string }): Promise<any> {\n        return this.manager.distinct(this.metadata.tableName, key, query, options);\n    }\n\n    /**\n     * Drops an index from this collection.\n     */\n    dropCollectionIndex(indexName: string, options?: CollectionOptions): Promise<any> {\n        return this.manager.dropCollectionIndex(this.metadata.tableName, indexName, options);\n    }\n\n    /**\n     * Drops all indexes from the collection.\n     */\n    dropCollectionIndexes(): Promise<any> {\n        return this.manager.dropCollectionIndexes(this.metadata.tableName);\n    }\n\n    /**\n     * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndDelete(query: ObjectLiteral, options?: { projection?: Object, sort?: Object, maxTimeMS?: number }): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndDelete(this.metadata.tableName, query, options);\n    }\n\n    /**\n     * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndReplace(query: ObjectLiteral, replacement: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndReplace(this.metadata.tableName, query, replacement, options);\n    }\n\n    /**\n     * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n     */\n    findOneAndUpdate(query: ObjectLiteral, update: Object, options?: FindOneAndReplaceOption): Promise<FindAndModifyWriteOpResultObject> {\n        return this.manager.findOneAndUpdate(this.metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Execute a geo search using a geo haystack index on a collection.\n     */\n    geoHaystackSearch(x: number, y: number, options?: GeoHaystackSearchOptions): Promise<any> {\n        return this.manager.geoHaystackSearch(this.metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Execute the geoNear command to search for items in the collection.\n     */\n    geoNear(x: number, y: number, options?: GeoNearOptions): Promise<any> {\n        return this.manager.geoNear(this.metadata.tableName, x, y, options);\n    }\n\n    /**\n     * Run a group command across a collection.\n     */\n    group(keys: Object|Array<any>|Function|Code, condition: Object, initial: Object, reduce: Function|Code, finalize: Function|Code, command: boolean, options?: { readPreference?: ReadPreference | string }): Promise<any> {\n        return this.manager.group(this.metadata.tableName, keys, condition, initial, reduce, finalize, command, options);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexes(): Promise<any> {\n        return this.manager.collectionIndexes(this.metadata.tableName);\n    }\n\n    /**\n     * Retrieve all the indexes on the collection.\n     */\n    collectionIndexExists(indexes: string|string[]): Promise<boolean> {\n        return this.manager.collectionIndexExists(this.metadata.tableName, indexes);\n    }\n\n    /**\n     * Retrieves this collections index info.\n     */\n    collectionIndexInformation(options?: { full: boolean }): Promise<any> {\n        return this.manager.collectionIndexInformation(this.metadata.tableName, options);\n    }\n\n    /**\n     * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     */\n    initializeOrderedBulkOp(options?: CollectionOptions): OrderedBulkOperation {\n        return this.manager.initializeOrderedBulkOp(this.metadata.tableName, options);\n    }\n\n    /**\n     * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     */\n    initializeUnorderedBulkOp(options?: CollectionOptions): UnorderedBulkOperation {\n        return this.manager.initializeUnorderedBulkOp(this.metadata.tableName, options);\n    }\n\n    /**\n     * Inserts an array of documents into MongoDB.\n     */\n    insertMany(docs: ObjectLiteral[], options?: CollectionInsertManyOptions): Promise<InsertWriteOpResult> {\n        return this.manager.insertMany(this.metadata.tableName, docs, options);\n    }\n\n    /**\n     * Inserts a single document into MongoDB.\n     */\n    insertOne(doc: ObjectLiteral, options?: CollectionInsertOneOptions): Promise<InsertOneWriteOpResult> {\n        return this.manager.insertOne(this.metadata.tableName, doc, options);\n    }\n\n    /**\n     * Returns if the collection is a capped collection.\n     */\n    isCapped(): Promise<any> {\n        return this.manager.isCapped(this.metadata.tableName);\n    }\n\n    /**\n     * Get the list of all indexes information for the collection.\n     */\n    listCollectionIndexes(options?: { batchSize?: number, readPreference?: ReadPreference|string }): CommandCursor {\n        return this.manager.listCollectionIndexes(this.metadata.tableName, options);\n    }\n\n    /**\n     * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n     */\n    mapReduce(map: Function|string, reduce: Function|string, options?: MapReduceOptions): Promise<any> {\n        return this.manager.mapReduce(this.metadata.tableName, map, reduce, options);\n    }\n\n    /**\n     * Return N number of parallel cursors for a collection allowing parallel reading of entire collection.\n     * There are no ordering guarantees for returned results.\n     */\n    parallelCollectionScan(options?: ParallelCollectionScanOptions): Promise<Cursor<Entity>[]> {\n        return this.manager.parallelCollectionScan(this.metadata.tableName, options);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    reIndex(): Promise<any> {\n        return this.manager.reIndex(this.metadata.tableName);\n    }\n\n    /**\n     * Reindex all indexes on the collection Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n     */\n    rename(newName: string, options?: { dropTarget?: boolean }): Promise<Collection> {\n        return this.manager.rename(this.metadata.tableName, newName, options);\n    }\n\n    /**\n     * Replace a document on MongoDB.\n     */\n    replaceOne(query: ObjectLiteral, doc: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return this.manager.replaceOne(this.metadata.tableName, query, doc, options);\n    }\n\n    /**\n     * Get all the collection statistics.\n     */\n    stats(options?: { scale: number }): Promise<CollStats> {\n        return this.manager.stats(this.metadata.tableName, options);\n    }\n\n    /**\n     * Update multiple documents on MongoDB.\n     */\n    updateMany(query: ObjectLiteral, update: ObjectLiteral, options?: { upsert?: boolean, w?: any, wtimeout?: number, j?: boolean }): Promise<UpdateWriteOpResult> {\n        return this.manager.updateMany(this.metadata.tableName, query, update, options);\n    }\n\n    /**\n     * Update a single document on MongoDB.\n     */\n    updateOne(query: ObjectLiteral, update: ObjectLiteral, options?: ReplaceOneOptions): Promise<UpdateWriteOpResult> {\n        return this.manager.updateOne(this.metadata.tableName, query, update, options);\n    }\n\n}"],"sourceRoot":".."}
##############################################
/src/repository/MongoRepository.js-260-    MongoRepository.prototype.rename = function (newName, options) {
/src/repository/MongoRepository.js:261:        return this.manager.rename(this.metadata.tableName, newName, options);
/src/repository/MongoRepository.js-262-    };
##############################################
/src/typeorm-browser.min.js:1:var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};System.register("typeorm/driver/types/ColumnTypes",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/types/RelationTypes",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/naming-strategy/NamingStrategyInterface",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/types/OnDeleteType",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/ForeignKeyMetadata",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.columns=[],this.referencedColumns=[],this.columnNames=[],this.referencedColumnNames=[],this.entityMetadata=e.entityMetadata,this.referencedEntityMetadata=e.referencedEntityMetadata,this.columns=e.columns,this.referencedColumns=e.referencedColumns,this.onDelete=e.onDelete,e.namingStrategy&&this.build(e.namingStrategy)}return e.prototype.build=function(e){this.columnNames=this.columns.map(function(e){return e.databaseName}),this.referencedColumnNames=this.referencedColumns.map(function(e){return e.databaseName}),this.tableName=this.entityMetadata.tableName,this.referencedTableName=this.referencedEntityMetadata.tableName,this.name=e.foreignKeyName(this.tableName,this.columnNames,this.referencedEntityMetadata.tableName,this.referencedColumnNames)},e}(),e("ForeignKeyMetadata",n)}}}),System.register("typeorm/common/ObjectLiteral",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/EmbeddedMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/query-builder/QueryBuilderUtils",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.isAliasProperty=function(e){if("string"!=typeof e||-1===e.indexOf("."))return!1;var t=e.split("."),n=t[0],r=t[1];if(!n||!r)return!1;var i=/^[a-zA-Z0-9_-]+$/;return!(!i.test(n)||!i.test(r))},e}(),e("QueryBuilderUtils",n)}}}),System.register("typeorm/query-builder/Alias",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){Object.assign(this,e||{})}return Object.defineProperty(e.prototype,"target",{get:function(){return this.metadata.target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetadata",{get:function(){return!!this._metadata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){if(!this._metadata)throw new Error('Cannot get entity metadata for the given alias "'+this.name+'"');return this._metadata},set:function(e){this._metadata=e},enumerable:!0,configurable:!0}),e}(),e("Alias",n)}}}),System.register("typeorm/find-options/OrderByCondition",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/query-builder/JoinAttribute",["typeorm/query-builder/QueryBuilderUtils"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t,n){this.connection=e,this.queryExpressionMap=t,Object.assign(this,n||{})}return Object.defineProperty(e.prototype,"isMany",{get:function(){return void 0!==this.isMappingMany?this.isMappingMany:!!this.relation&&(this.relation.isManyToMany||this.relation.isOneToMany)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tablePath",{get:function(){return this.metadata?this.metadata.tablePath:this.entityOrProperty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentAlias",{get:function(){if(n.QueryBuilderUtils.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relationPropertyPath",{get:function(){if(n.QueryBuilderUtils.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relation",{get:function(){if(n.QueryBuilderUtils.isAliasProperty(this.entityOrProperty)){var e=this.queryExpressionMap.findAliasByName(this.parentAlias),t=e.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(t)return t;if(e.metadata.parentEntityMetadata&&(t=e.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath)))return t;throw new Error("Relation with property path "+this.relationPropertyPath+" in entity was not found.")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.relation?this.relation.inverseEntityMetadata:this.connection.hasMetadata(this.entityOrProperty)?this.connection.getMetadata(this.entityOrProperty):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"junctionAlias",{get:function(){if(!this.relation)throw new Error("Cannot get junction table for join without relation.");return this.relation.isOwning?this.parentAlias+"_"+this.alias.name:this.alias.name+"_"+this.parentAlias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapToPropertyParentAlias",{get:function(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapToPropertyPropertyName",{get:function(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]},enumerable:!0,configurable:!0}),e}(),e("JoinAttribute",r)}}}),System.register("typeorm/query-builder/relation-count/RelationCountAttribute",["typeorm/query-builder/QueryBuilderUtils"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t){this.expressionMap=e,Object.assign(this,t||{})}return Object.defineProperty(e.prototype,"joinInverseSideMetadata",{get:function(){return this.relation.inverseEntityMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentAlias",{get:function(){if(!n.QueryBuilderUtils.isAliasProperty(this.relationName))throw new Error("Given value must be a string representation of alias property");return this.relationName.split(".")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relationProperty",{get:function(){if(!n.QueryBuilderUtils.isAliasProperty(this.relationName))throw new Error("Given value is a string representation of alias property");return this.relationName.split(".")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"junctionAlias",{get:function(){var e=this.relationName.split(".");return e[0]+"_"+e[1]+"_relation_count"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relation",{get:function(){if(!n.QueryBuilderUtils.isAliasProperty(this.relationName))throw new Error("Given value is a string representation of alias property");var e=this.relationName.split("."),t=e[0],r=e[1],i=this.expressionMap.findAliasByName(t).metadata.findRelationWithPropertyPath(r);if(!i)throw new Error("Relation with property path "+r+" in entity was not found.");return i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){if(!n.QueryBuilderUtils.isAliasProperty(this.relationName))throw new Error("Given value is a string representation of alias property");var e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapToPropertyPropertyName",{get:function(){return this.mapToProperty.split(".")[1]},enumerable:!0,configurable:!0}),e}(),e("RelationCountAttribute",r)}}}),System.register("typeorm/query-builder/SelectQuery",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/error/ConnectionIsNotSetError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="ConnectionIsNotSetError",n.message="Connection with "+t+" database is not established. Check connection configuration.",n}return __extends(t,e),t}(Error),e("ConnectionIsNotSetError",n)}}}),System.register("typeorm/error/DriverPackageNotInstalledError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="DriverPackageNotInstalledError",r.message=t+" package has not been found installed. Try to install it: npm install "+n+" --save",r}return __extends(t,e),t}(Error),e("DriverPackageNotInstalledError",n)}}}),System.register("typeorm/driver/DriverUtils",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.buildDriverOptions=function(e,t){if(e.url){var n=this.parseConnectionUrl(e.url);if(t&&t.useSid){r={type:e.type,host:n.host,username:n.username,password:n.password,port:n.port,sid:n.database};return Object.assign(r,e)}var r={type:e.type,host:n.host,username:n.username,password:n.password,port:n.port,database:n.database};return Object.assign(r,e)}return Object.assign({},e)},e.parseConnectionUrl=function(e){var t=e.indexOf("//"),n=e.substr(t+2),r=n.indexOf("/"),i=-1!==r?n.substr(0,r):n,o=-1!==r?n.substr(r+1):void 0,a=i.split("@"),s=a[0],u=a[1],c=s.split(":"),l=c[0],p=c[1],d=u.split(":"),m=d[0],f=d[1];return{host:m,username:l,password:p,port:f?parseInt(f):void 0,database:o||void 0}},e}(),e("DriverUtils",n)}}}),System.register("typeorm/error/TransactionAlreadyStartedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var t=e.call(this)||this;return t.name="TransactionAlreadyStartedError",t.message="Transaction already started for the given connection, commit current transaction before starting a new one.",t}return __extends(t,e),t}(Error),e("TransactionAlreadyStartedError",n)}}}),System.register("typeorm/error/TransactionNotStartedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var t=e.call(this)||this;return t.name="TransactionNotStartedError",t.message="Transaction is not started yet, start transaction before committing or rolling it back.",t}return __extends(t,e),t}(Error),e("TransactionNotStartedError",n)}}}),System.register("typeorm/metadata-args/IndexMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/IndexMetadata",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.isUnique=!1,this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,this.isUnique=e.args.unique,this.isSparse=e.args.sparse,this.givenName=e.args.name,this.givenColumnNames=e.args.columns)}return e.prototype.build=function(e){var t=this,n={};if(this.tableName=this.entityMetadata.tableName,this.givenColumnNames){var r=[];if(this.givenColumnNames instanceof Array)(r=this.givenColumnNames.map(function(e){return t.embeddedMetadata?t.embeddedMetadata.propertyPath+"."+e:e})).forEach(function(e){return n[e]=1});else{var i=this.givenColumnNames(this.entityMetadata.propertiesMap);i instanceof Array?(r=i.map(function(e){return String(e)})).forEach(function(e){return n[e]=1}):(r=Object.keys(i).map(function(e){return String(e)}),Object.keys(i).forEach(function(e){return n[e]=i[e]}))}this.columns=r.map(function(e){var n=t.entityMetadata.columns.find(function(t){return t.propertyPath===e});if(n)return[n];var r=t.entityMetadata.relations.find(function(t){return t.isWithJoinColumn&&t.propertyName===e});if(r)return r.joinColumns;throw new Error("Index "+(t.givenName?'"'+t.givenName+'" ':"")+"contains column that is missing in the entity: "+e)}).reduce(function(e,t){return e.concat(t)})}return this.columnNamesWithOrderingMap=Object.keys(n).reduce(function(e,r){var i=t.entityMetadata.columns.find(function(e){return e.propertyPath===r});return i&&(e[i.databaseName]=n[r]),e},{}),this.name=e.indexName(this.givenName?this.givenName:void 0,this.entityMetadata.tableName,this.columns.map(function(e){return e.databaseName})),this},e}(),e("IndexMetadata",n)}}}),System.register("typeorm/schema-builder/schema/TableIndex",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n,r){this.tableName=e,this.name=t,this.columnNames=n,this.isUnique=r}return e.prototype.clone=function(){return new e(this.tableName,this.name,this.columnNames.map(function(e){return e}),this.isUnique)},e.create=function(t){return new e(t.entityMetadata.tableName,t.name,t.columns.map(function(e){return e.databaseName}),t.isUnique)},e}(),e("TableIndex",n)}}}),System.register("typeorm/schema-builder/schema/TableForeignKey",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n,r,i,o){this.name=e,this.columnNames=t,this.referencedColumnNames=n,this.referencedTableName=r,this.referencedTablePath=i,this.onDelete=o}return e.prototype.clone=function(){return new e(this.name,this.columnNames,this.referencedColumnNames,this.referencedTableName,this.referencedTablePath)},e.create=function(t){return new e(t.name,t.columnNames,t.referencedColumnNames,t.referencedTableName,t.referencedEntityMetadata.tablePath,t.onDelete)},e}(),e("TableForeignKey",n)}}}),System.register("typeorm/schema-builder/schema/TablePrimaryKey",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t){this.name=e,this.columnName=t}return e.prototype.clone=function(){return new e(this.name,this.columnName)},e}(),e("TablePrimaryKey",n)}}}),System.register("typeorm/util/RandomGenerator",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.sha1=function(e){var t,n,r,i,o,a,s,u,c,l=function(e,t){return e<<t|e>>>32-t},p=function(e){var t,n="";for(t=7;t>=0;t--)n+=(e>>>4*t&15).toString(16);return n},d=new Array(80),m=1732584193,f=4023233417,h=2562383102,y=271733878,g=3285377520,v=(e=encodeURIComponent(e)).length,b=[];for(n=0;n<v-3;n+=4)r=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),b.push(r);switch(v%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(v-1)<<24|8388608;break;case 2:n=e.charCodeAt(v-2)<<24|e.charCodeAt(v-1)<<16|32768;break;case 3:n=e.charCodeAt(v-3)<<24|e.charCodeAt(v-2)<<16|e.charCodeAt(v-1)<<8|128}for(b.push(n);b.length%16!=14;)b.push(0);for(b.push(v>>>29),b.push(v<<3&4294967295),t=0;t<b.length;t+=16){for(n=0;n<16;n++)d[n]=b[t+n];for(n=16;n<=79;n++)d[n]=l(d[n-3]^d[n-8]^d[n-14]^d[n-16],1);for(i=m,o=f,a=h,s=y,u=g,n=0;n<=19;n++)c=l(i,5)+(o&a|~o&s)+u+d[n]+1518500249&4294967295,u=s,s=a,a=l(o,30),o=i,i=c;for(n=20;n<=39;n++)c=l(i,5)+(o^a^s)+u+d[n]+1859775393&4294967295,u=s,s=a,a=l(o,30),o=i,i=c;for(n=40;n<=59;n++)c=l(i,5)+(o&a|o&s|a&s)+u+d[n]+2400959708&4294967295,u=s,s=a,a=l(o,30),o=i,i=c;for(n=60;n<=79;n++)c=l(i,5)+(o^a^s)+u+d[n]+3395469782&4294967295,u=s,s=a,a=l(o,30),o=i,i=c;m=m+i&4294967295,f=f+o&4294967295,h=h+a&4294967295,y=y+s&4294967295,g=g+u&4294967295}return(c=p(m)+p(f)+p(h)+p(y)+p(g)).toLowerCase()},e.uuid4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e}(),e("RandomGenerator",n)}}}),System.register("typeorm/platform/PlatformTools",[],function(e,t){"use strict";var n,r,i,o;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.getGlobalVariable=function(){return window},e.load=function(e){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: require("'+e+'").');return""},e.pathNormalize=function(e){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: path.normalize("'+e+'").');return""},e.pathExtname=function(e){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: path.extname("'+e+'").');return""},e.pathResolve=function(e){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: path.resolve("'+e+'").');return""},e.fileExist=function(e){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.existsSync("'+e+'").');return!1},e.getEnvVariable=function(e){},e.readFileSync=function(e){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("'+e+'").');return null},e.appendFileSync=function(e,t){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("'+e+'").')},e.writeFile=function(e,t){if("browser"===this.type)throw new Error('This option/function is not supported in the browser environment. Failed operation: fs.writeFile("'+e+'").');return Promise.reject(null)},e.highlightSql=function(e){return e},e.highlightJson=function(e){return e},e.logInfo=function(e,t){console.info(e+" ",t)},e.logError=function(e,t){console.error(e+" ",t)},e.logWarn=function(e,t){console.warn(e+" ",t)},e.log=function(e){console.log(e)},e.warn=function(e){return e},e.type="browser",e}(),e("PlatformTools",n),r=function(){return function(){}}(),e("EventEmitter",r),i=function(){return function(){}}(),e("Readable",i),o=function(){return function(){}}(),e("Writable",o)}}}),System.register("typeorm/find-options/JoinOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/find-options/FindOneOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/find-options/FindManyOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/common/ObjectType",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/error/QueryRunnerProviderAlreadyReleasedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var t=e.call(this)||this;return t.name="QueryRunnerProviderAlreadyReleasedError",t.message="Database connection provided by a query runner was already released, cannot continue to use its querying methods anymore.",t.stack=(new Error).stack,t}return __extends(t,e),t}(Error),e("QueryRunnerProviderAlreadyReleasedError",n)}}}),System.register("typeorm/common/DeepPartial",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/repository/RemoveOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/repository/SaveOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/error/NoNeedToReleaseEntityManagerError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var t=e.call(this)||this;return t.name="NoNeedToReleaseEntityManagerError",t.message="Entity manager is not using single database connection and cannot be released. Only entity managers created by connection#createEntityManagerWithSingleDatabaseConnection methods have a single database connection and they should be released.",t.stack=(new Error).stack,t}return __extends(t,e),t}(Error),e("NoNeedToReleaseEntityManagerError",n)}}}),System.register("typeorm/repository/Repository",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.prototype.createQueryBuilder=function(e,t){return this.manager.createQueryBuilder(this.metadata.target,e||this.metadata.targetName,t||this.queryRunner)},Object.defineProperty(e.prototype,"target",{get:function(){return this.metadata.target},enumerable:!0,configurable:!0}),e.prototype.hasId=function(e){return this.manager.hasId(this.metadata.target,e)},e.prototype.getId=function(e){return this.manager.getId(this.metadata.target,e)},e.prototype.create=function(e){return this.manager.create(this.metadata.target,e)},e.prototype.merge=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return(r=this.manager).merge.apply(r,[this.metadata.target,e].concat(t));var r},e.prototype.preload=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.manager.preload(this.metadata.target,e)]})})},e.prototype.save=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.save(this.metadata.target,e,t)]})})},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.insert(this.metadata.target,e,t)]})})},e.prototype.update=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.manager.update(this.metadata.target,e,t,n)]})})},e.prototype.updateById=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.manager.updateById(this.metadata.target,e,t,n)]})})},e.prototype.remove=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.remove(this.metadata.target,e,t)]})})},e.prototype.delete=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.delete(this.metadata.target,e,t)]})})},e.prototype.deleteById=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.deleteById(this.metadata.target,e,t)]})})},e.prototype.removeById=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.deleteById(this.metadata.target,e,t)]})})},e.prototype.removeByIds=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.removeByIds(this.metadata.target,e,t)]})})},e.prototype.count=function(e){return this.manager.count(this.metadata.target,e)},e.prototype.find=function(e){return this.manager.find(this.metadata.target,e)},e.prototype.findAndCount=function(e){return this.manager.findAndCount(this.metadata.target,e)},e.prototype.findByIds=function(e,t){return this.manager.findByIds(this.metadata.target,e,t)},e.prototype.findOne=function(e){return this.manager.findOne(this.metadata.target,e)},e.prototype.findOneById=function(e,t){return this.manager.findOneById(this.metadata.target,e,t)},e.prototype.query=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.manager.query(e,t)]})})},e.prototype.clear=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.manager.clear(this.metadata.target)]})})},e}(),e("Repository",n)}}}),System.register("typeorm/driver/mongodb/typings",["typeorm/platform/PlatformTools"],function(e,t){"use strict";var n;t&&t.id;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/driver/mongodb/MongoQueryRunner",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t){this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.connection=e,this.databaseConnection=t}return e.prototype.cursor=function(e,t){return this.getCollection(e).find(t||{})},e.prototype.aggregate=function(e,t,n){return this.getCollection(e).aggregate(t,n)},e.prototype.bulkWrite=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).bulkWrite(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.count=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).count(t||{},n)];case 1:return[2,r.sent()]}})})},e.prototype.createCollectionIndex=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).createIndex(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.createCollectionIndexes=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.getCollection(e).createIndexes(t)];case 1:return[2,n.sent()]}})})},e.prototype.deleteMany=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).deleteMany(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.deleteOne=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).deleteOne(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.distinct=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).distinct(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.dropCollectionIndex=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).dropIndex(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.dropCollectionIndexes=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.getCollection(e).dropIndexes()];case 1:return[2,t.sent()]}})})},e.prototype.findOneAndDelete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).findOneAndDelete(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.findOneAndReplace=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).findOneAndReplace(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.findOneAndUpdate=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).findOneAndUpdate(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.geoHaystackSearch=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).geoHaystackSearch(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.geoNear=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).geoNear(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.group=function(e,t,n,r,i,o,a,s){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(u){switch(u.label){case 0:return[4,this.getCollection(e).group(t,n,r,i,o,a,s)];case 1:return[2,u.sent()]}})})},e.prototype.collectionIndexes=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.getCollection(e).indexes()];case 1:return[2,t.sent()]}})})},e.prototype.collectionIndexExists=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.getCollection(e).indexExists(t)];case 1:return[2,n.sent()]}})})},e.prototype.collectionIndexInformation=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.getCollection(e).indexInformation(t)];case 1:return[2,n.sent()]}})})},e.prototype.initializeOrderedBulkOp=function(e,t){return this.getCollection(e).initializeOrderedBulkOp(t)},e.prototype.initializeUnorderedBulkOp=function(e,t){return this.getCollection(e).initializeUnorderedBulkOp(t)},e.prototype.insertMany=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).insertMany(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.insertOne=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).insertOne(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.isCapped=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.getCollection(e).isCapped()];case 1:return[2,t.sent()]}})})},e.prototype.listCollectionIndexes=function(e,t){return this.getCollection(e).listIndexes(t)},e.prototype.mapReduce=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).mapReduce(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.parallelCollectionScan=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.getCollection(e).parallelCollectionScan(t)];case 1:return[2,n.sent()]}})})},e.prototype.reIndex=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.getCollection(e).reIndex()];case 1:return[2,t.sent()]}})})},e.prototype.rename=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.getCollection(e).rename(t,n)];case 1:return[2,r.sent()]}})})},e.prototype.replaceOne=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).replaceOne(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.stats=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.getCollection(e).stats(t)];case 1:return[2,n.sent()]}})})},e.prototype.updateMany=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).updateMany(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.updateOne=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.getCollection(e).updateOne(t,n,r)];case 1:return[2,i.sent()]}})})},e.prototype.clearDatabase=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.databaseConnection.dropDatabase()];case 1:return e.sent(),[2]}})})},e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.release=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.startTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.rollbackTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.query=function(e,t){throw new Error("Executing SQL query is not supported by MongoDB driver.")},e.prototype.stream=function(e,t,n,r){throw new Error("Stream is not supported by MongoDB driver.")},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.databaseConnection.collection(e).insertOne(t)];case 1:return n=i.sent(),r=this.connection.getMetadata(e).objectIdColumn.createValueMap(n.insertedId),[2,{result:n,generatedMap:r}]}})})},e.prototype.update=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.databaseConnection.collection(e).updateOne(n,t)];case 1:return r.sent(),[2]}})})},e.prototype.delete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:if("string"==typeof t)throw new Error("String condition is not supported by MongoDB driver.");return[4,this.databaseConnection.collection(e).deleteOne(t)];case 1:return n.sent(),[2]}})})},e.prototype.insertIntoClosureTable=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.getTable=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.getTables=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.hasDatabase=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Check database queries are not supported by MongoDB driver.")})})},e.prototype.hasTable=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Check schema queries are not supported by MongoDB driver.")})})},e.prototype.createDatabase=function(e){throw new Error("Database create queries are not supported by MongoDB driver.")},e.prototype.createSchema=function(e){throw new Error("Schema create queries are not supported by MongoDB driver.")},e.prototype.createTable=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.dropTable=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.hasColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.addColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.addColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.renameColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.changeColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.changeColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.dropColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.dropColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.updatePrimaryKeys=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.createForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.createForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.dropForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.dropForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.createIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.dropIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Schema update queries are not supported by MongoDB driver.")})})},e.prototype.truncate=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.databaseConnection.dropCollection(e)];case 1:return t.sent(),[2]}})})},e.prototype.enableSqlMemory=function(){throw new Error("This operation is not supported by MongoDB driver.")},e.prototype.disableSqlMemory=function(){throw new Error("This operation is not supported by MongoDB driver.")},e.prototype.getMemorySql=function(){throw new Error("This operation is not supported by MongoDB driver.")},e.prototype.getCollection=function(e){return this.databaseConnection.collection(e)},e}(),e("MongoQueryRunner",n)}}}),System.register("typeorm/metadata/types/TableTypes",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/entity-schema/EntitySchemaTable",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/entity-schema/EntitySchemaIndex",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/entity-schema/EntitySchemaColumn",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/JoinColumnOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/JoinTableMuplipleColumnsOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/entity-schema/EntitySchemaRelation",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/entity-schema/EntitySchema",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/logger/LoggerOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/types/DatabaseType",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/logger/Logger",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/connection/BaseConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/mongodb/MongoConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/types/MappedColumnTypes",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/schema-builder/SchemaBuilder",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/schema-builder/MongoSchemaBuilder",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.connection=e}return e.prototype.build=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=this.connection.driver.createQueryRunner(),t=[],this.connection.entityMetadatas.forEach(function(n){n.indices.forEach(function(r){var i={name:r.name,unique:r.isUnique,sparse:r.isSparse};t.push(e.createCollectionIndex(n.tableName,r.columnNamesWithOrderingMap,i))})}),[4,Promise.all(t)];case 1:return n.sent(),[2]}})})},e.prototype.log=function(){return Promise.resolve([])},e}(),e("MongoSchemaBuilder",n)}}}),System.register("typeorm/driver/types/DataTypeDefaults",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/mysql/MysqlConnectionCredentialsOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/mysql/MysqlConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/postgres/PostgresConnectionCredentialsOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/postgres/PostgresConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/sqlite/SqliteConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/sqlserver/SqlServerConnectionCredentialsOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/sqlserver/SqlServerConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/oracle/OracleConnectionCredentialsOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/oracle/OracleConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/websql/WebSqlConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/cordova/CordovaConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/sqljs/SqljsConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/connection/ConnectionOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/mongodb/MongoDriver",["typeorm/error/ConnectionIsNotSetError","typeorm/error/DriverPackageNotInstalledError","typeorm/driver/mongodb/MongoQueryRunner","typeorm/platform/PlatformTools","typeorm/schema-builder/MongoSchemaBuilder"],function(e,t){"use strict";var n,r,i,o,a,s;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e}],execute:function(){s=function(){function e(e){this.connection=e,this.isReplicated=!1,this.treeSupport=!1,this.supportedDataTypes=[],this.withLengthColumnTypes=[],this.mappedDataTypes={createDate:"int",createDateDefault:"",updateDate:"int",updateDateDefault:"",version:"int",treeLevel:"int",migrationName:"int",migrationTimestamp:"int",cacheId:"int",cacheIdentifier:"int",cacheTime:"int",cacheDuration:"int",cacheQuery:"int",cacheResult:"int"},this.options=e.options,this.validateOptions(e.options),this.loadDependencies()}return e.prototype.connect=function(){var e=this;return new Promise(function(t,n){e.mongodb.MongoClient.connect(e.buildConnectionUrl(),{poolSize:e.options.poolSize,ssl:e.options.ssl,sslValidate:e.options.sslValidate,sslCA:e.options.sslCA,sslCert:e.options.sslCert,sslKey:e.options.sslKey,sslPass:e.options.sslPass,autoReconnect:e.options.autoReconnect,noDelay:e.options.noDelay,keepAlive:e.options.keepAlive,connectTimeoutMS:e.options.connectTimeoutMS,socketTimeoutMS:e.options.socketTimeoutMS,reconnectTries:e.options.reconnectTries,reconnectInterval:e.options.reconnectInterval,ha:e.options.ha,haInterval:e.options.haInterval,replicaSet:e.options.replicaSet,acceptableLatencyMS:e.options.acceptableLatencyMS,secondaryAcceptableLatencyMS:e.options.secondaryAcceptableLatencyMS,connectWithNoPrimary:e.options.connectWithNoPrimary,authSource:e.options.authSource,w:e.options.w,wtimeout:e.options.wtimeout,j:e.options.j,forceServerObjectId:e.options.forceServerObjectId,serializeFunctions:e.options.serializeFunctions,ignoreUndefined:e.options.ignoreUndefined,raw:e.options.raw,promoteLongs:e.options.promoteLongs,promoteBuffers:e.options.promoteBuffers,promoteValues:e.options.promoteValues,domainsEnabled:e.options.domainsEnabled,bufferMaxEntries:e.options.bufferMaxEntries,readPreference:e.options.readPreference,pkFactory:e.options.pkFactory,promiseLibrary:e.options.promiseLibrary,readConcern:e.options.readConcern,maxStalenessSeconds:e.options.maxStalenessSeconds,loggerLevel:e.options.loggerLevel,logger:e.options.logger},function(r,o){if(r)return n(r);e.queryRunner=new i.MongoQueryRunner(e.connection,o),t()})})},e.prototype.afterConnect=function(){return Promise.resolve()},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,r){if(!e.queryRunner)return r(new n.ConnectionIsNotSetError("mongodb"));e.queryRunner.databaseConnection.close(function(e){return e?r(e):t()}),e.queryRunner=void 0})]})})},e.prototype.createSchemaBuilder=function(){return new a.MongoSchemaBuilder(this.connection)},e.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),this.queryRunner},e.prototype.escapeQueryWithParameters=function(e,t){throw new Error("This operation is not supported by Mongodb driver.")},e.prototype.escape=function(e){return e},e.prototype.preparePersistentValue=function(e,t){return t.transformer&&(e=t.transformer.to(e)),e},e.prototype.prepareHydratedValue=function(e,t){return t.transformer&&(e=t.transformer.from(e)),e},e.prototype.normalizeType=function(e){throw new Error("MongoDB is schema-less, not supported by this driver.")},e.prototype.normalizeDefault=function(e){throw new Error("MongoDB is schema-less, not supported by this driver.")},e.prototype.normalizeIsUnique=function(e){throw new Error("MongoDB is schema-less, not supported by this driver.")},e.prototype.getColumnLength=function(e){throw new Error("MongoDB is schema-less, not supported by this driver.")},e.prototype.createFullType=function(e){throw new Error("MongoDB is schema-less, not supported by this driver.")},e.prototype.obtainMasterConnection=function(){return Promise.resolve()},e.prototype.obtainSlaveConnection=function(){return Promise.resolve()},e.prototype.validateOptions=function(e){},e.prototype.loadDependencies=function(){try{this.mongodb=o.PlatformTools.load("mongodb")}catch(e){throw new r.DriverPackageNotInstalledError("MongoDB","mongodb")}},e.prototype.buildConnectionUrl=function(){return this.options.url?this.options.url:"mongodb://"+(this.options.username&&this.options.password?this.options.username+":"+this.options.password+"@":"")+(this.options.host||"127.0.0.1")+":"+(this.options.port||"27017")+"/"+this.options.database},e}(),e("MongoDriver",s)}}}),System.register("typeorm/query-builder/transformer/DocumentToEntityTransformer",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){void 0===e&&(e=!1),this.enableRelationIdValues=e}return e.prototype.transformAll=function(e,t){var n=this;return e.map(function(e){return n.transform(e,t)})},e.prototype.transform=function(e,t){var n=t.create(),r=!1;t.objectIdColumn&&e[t.objectIdColumn.databaseNameWithoutPrefixes]&&(n[t.objectIdColumn.propertyName]=e[t.objectIdColumn.databaseNameWithoutPrefixes],r=!0),this.enableRelationIdValues&&t.columns.filter(function(e){return!!e.relationMetadata}).forEach(function(t){var i=e[t.databaseNameWithoutPrefixes];void 0!==i&&null!==i&&t.propertyName&&(n[t.propertyName]=i,r=!0)}),t.ownColumns.forEach(function(t){var i=e[t.databaseNameWithoutPrefixes];void 0===i||null===i||!t.propertyName||t.isVirtual||t.isParentId||t.isDiscriminator||(n[t.propertyName]=i,r=!0)});var i=function(e,t,n){n.forEach(function(n){t[n.prefix]&&(n.isArray?e[n.propertyName]=t[n.prefix].map(function(e){var t=n.create();return n.columns.forEach(function(n){t[n.propertyName]=e[n.databaseNameWithoutPrefixes]}),t}):n.columns.forEach(function(r){var i=t[n.prefix][r.databaseNameWithoutPrefixes];i&&(e[n.propertyName]||(e[n.propertyName]=n.create()),e[n.propertyName][r.propertyName]=i)}),i(e[n.propertyName],t[n.prefix],n.embeddeds))})};return i(n,e,t.embeddeds),r?n:null},e}(),e("DocumentToEntityTransformer",n)}}}),System.register("typeorm/error/FindRelationsNotFoundError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(n){var r=e.call(this)||this;return 1===n.length?r.message='Relation "'+n[0]+'" was not found, please check if it is correct and really exist in your entity.':r.message="Relations "+n.map(function(e){return'"'+e+'"'}).join(", ")+" were not found, please check if relations are correct and they exist in your entities.",Object.setPrototypeOf(r,t.prototype),r}return __extends(t,e),t}(Error),e("FindRelationsNotFoundError",n)}}}),System.register("typeorm/find-options/FindOptionsUtils",["typeorm/error/FindRelationsNotFoundError"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.isFindOneOptions=function(e){var t=e;return t&&(t.select instanceof Array||t.where instanceof Object||"string"==typeof t.where||t.relations instanceof Array||t.join instanceof Object||t.order instanceof Object||t.cache instanceof Object||"boolean"==typeof t.cache||"number"==typeof t.cache)},e.isFindManyOptions=function(e){var t=e;return t&&(this.isFindOneOptions(t)||"number"==typeof t.skip||"number"==typeof t.take)},e.extractFindOneOptionsAlias=function(e){if(this.isFindOneOptions(e)&&e.join)return e.join.alias},e.extractFindManyOptionsAlias=function(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias},e.applyFindOneOptionsOrConditionsToQueryBuilder=function(e,t){return this.isFindOneOptions(t)?this.applyOptionsToQueryBuilder(e,t):t?e.where(t):e},e.applyFindManyOptionsOrConditionsToQueryBuilder=function(e,t){return this.isFindManyOptions(t)?this.applyOptionsToQueryBuilder(e,t):t?e.where(t):e},e.applyOptionsToQueryBuilder=function(e,t){if(!t||!this.isFindOneOptions(t)&&!this.isFindManyOptions(t))return e;if(t.select&&e.select(t.select.map(function(t){return e.alias+"."+t})),t.where&&e.where(t.where),t.skip&&e.skip(t.skip),t.take&&e.take(t.take),t.order&&Object.keys(t.order).forEach(function(n){switch(t.order[n]){case 1:e.addOrderBy(e.alias+"."+n,"ASC");break;case-1:e.addOrderBy(e.alias+"."+n,"DESC");break;case"ASC":e.addOrderBy(e.alias+"."+n,"ASC");break;case"DESC":e.addOrderBy(e.alias+"."+n,"DESC")}}),t.relations){var r=t.relations.map(function(e){return e});if(this.applyRelationsRecursively(e,r,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),r.length>0)throw new n.FindRelationsNotFoundError(r)}if(t.join&&(t.join.leftJoin&&Object.keys(t.join.leftJoin).forEach(function(n){e.leftJoin(t.join.leftJoin[n],n)}),t.join.innerJoin&&Object.keys(t.join.innerJoin).forEach(function(n){e.innerJoin(t.join.innerJoin[n],n)}),t.join.leftJoinAndSelect&&Object.keys(t.join.leftJoinAndSelect).forEach(function(n){e.leftJoinAndSelect(t.join.leftJoinAndSelect[n],n)}),t.join.innerJoinAndSelect&&Object.keys(t.join.innerJoinAndSelect).forEach(function(n){e.innerJoinAndSelect(t.join.innerJoinAndSelect[n],n)})),t.cache)if(t.cache instanceof Object){var i=t.cache;e.cache(i.id,i.milliseconds)}else e.cache(t.cache);return e},e.applyRelationsRecursively=function(e,t,n,r,i){var o=this,a=[];if(i){var s=new RegExp("^"+i.replace(".","\\.")+"\\.");a=t.filter(function(e){return e.match(s)}).map(function(e){return e.replace(s,"")}).filter(function(e){return r.findRelationWithPropertyPath(e)})}else a=t.filter(function(e){return r.findRelationWithPropertyPath(e)});a.forEach(function(r){var a=n+"."+r;e.leftJoinAndSelect(a,n+"_"+r),t.splice(t.indexOf(i?i+"."+r:r),1);var s=e.expressionMap.joinAttributes.find(function(e){return e.entityOrProperty===a});o.applyRelationsRecursively(e,t,s.alias.name,s.metadata,i?i+"."+r:r)})},e}(),e("FindOptionsUtils",r)}}}),System.register("typeorm/entity-manager/MongoEntityManager",["typeorm/entity-manager/EntityManager","typeorm/query-builder/transformer/DocumentToEntityTransformer","typeorm/find-options/FindOptionsUtils","typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),Object.defineProperty(t.prototype,"queryRunner",{get:function(){return this.connection.driver.queryRunner},enumerable:!0,configurable:!0}),t.prototype.find=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){switch(o.label){case 0:return n=this.convertFindManyOptionsOrConditionsToMongodbQuery(t),[4,this.createEntityCursor(e,n)];case 1:return r=o.sent(),i.FindOptionsUtils.isFindManyOptions(t)&&(t.skip&&r.skip(t.skip),t.take&&r.limit(t.take),t.order&&r.sort(this.convertFindOptionsOrderToOrderCriteria(t.order))),[2,r.toArray()]}})})},t.prototype.findAndCount=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,o,a,s;return __generator(this,function(u){switch(u.label){case 0:return n=this.convertFindManyOptionsOrConditionsToMongodbQuery(t),[4,this.createEntityCursor(e,n)];case 1:return r=u.sent(),i.FindOptionsUtils.isFindManyOptions(t)&&(t.skip&&r.skip(t.skip),t.take&&r.limit(t.take),t.order&&r.sort(this.convertFindOptionsOrderToOrderCriteria(t.order))),[4,Promise.all([r.toArray(),this.count(e,n)])];case 2:return o=u.sent(),a=o[0],s=o[1],[2,[a,parseInt(s)]]}})})},t.prototype.findByIds=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return r=this.connection.getMetadata(e),a=this.convertFindManyOptionsOrConditionsToMongodbQuery(n)||{},s=o.PlatformTools.load("mongodb").ObjectID,a._id={$in:t.map(function(e){return e instanceof s?e:e[r.objectIdColumn.propertyName]})},[4,this.createEntityCursor(e,a)];case 1:return u=c.sent(),i.FindOptionsUtils.isFindManyOptions(n)&&(n.skip&&u.skip(n.skip),n.take&&u.limit(n.take),n.order&&u.sort(this.convertFindOptionsOrderToOrderCriteria(n.order))),[4,u.toArray()];case 2:return[2,c.sent()]}})})},t.prototype.findOne=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,o;return __generator(this,function(a){switch(a.label){case 0:return n=this.convertFindOneOptionsOrConditionsToMongodbQuery(t),[4,this.createEntityCursor(e,n)];case 1:return r=a.sent(),i.FindOptionsUtils.isFindOneOptions(t)&&t.order&&r.sort(this.convertFindOptionsOrderToOrderCriteria(t.order)),[4,r.limit(1).toArray()];case 2:return o=a.sent(),[2,o.length>0?o[0]:void 0]}})})},t.prototype.findOneById=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return r=this.convertFindOneOptionsOrConditionsToMongodbQuery(n)||{},a=o.PlatformTools.load("mongodb").ObjectID,r._id=t instanceof a?t:new a(t),[4,this.createEntityCursor(e,r)];case 1:return s=c.sent(),i.FindOptionsUtils.isFindOneOptions(n)&&n.order&&s.sort(this.convertFindOptionsOrderToOrderCriteria(n.order)),[4,s.limit(1).toArray()];case 2:return u=c.sent(),[2,u.length>0?u[0]:void 0]}})})},t.prototype.createCursor=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.cursor(n.tableName,t)},t.prototype.createEntityCursor=function(e,t){var n=this.connection.getMetadata(e),i=this.createCursor(e,t),a=o.PlatformTools.load("mongodb").Cursor;return i.toArray=function(e){if(!e)return a.prototype.toArray.call(this).then(function(e){return(new r.DocumentToEntityTransformer).transformAll(e,n)});a.prototype.toArray.call(this,function(t,i){if(!t){var o=new r.DocumentToEntityTransformer;return e(t,o.transformAll(i,n))}e(t,i)})},i.next=function(e){if(!e)return a.prototype.next.call(this).then(function(e){return e?(new r.DocumentToEntityTransformer).transform(e,n):e});a.prototype.next.call(this,function(t,i){if(!t&&i){var o=new r.DocumentToEntityTransformer;return e(t,o.transform(i,n))}e(t,i)})},i},t.prototype.aggregate=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.aggregate(r.tableName,t,n)},t.prototype.bulkWrite=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.bulkWrite(r.tableName,t,n)},t.prototype.count=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.count(r.tableName,t,n)},t.prototype.createCollectionIndex=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.createCollectionIndex(r.tableName,t,n)},t.prototype.createCollectionIndexes=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.createCollectionIndexes(n.tableName,t)},t.prototype.deleteMany=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.deleteMany(r.tableName,t,n)},t.prototype.deleteOne=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.deleteOne(r.tableName,t,n)},t.prototype.distinct=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.distinct(i.tableName,t,n,r)},t.prototype.dropCollectionIndex=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.dropCollectionIndex(r.tableName,t,n)},t.prototype.dropCollectionIndexes=function(e){var t=this.connection.getMetadata(e);return this.queryRunner.dropCollectionIndexes(t.tableName)},t.prototype.findOneAndDelete=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.findOneAndDelete(r.tableName,t,n)},t.prototype.findOneAndReplace=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.findOneAndReplace(i.tableName,t,n,r)},t.prototype.findOneAndUpdate=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.findOneAndUpdate(i.tableName,t,n,r)},t.prototype.geoHaystackSearch=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.geoHaystackSearch(i.tableName,t,n,r)},t.prototype.geoNear=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.geoNear(i.tableName,t,n,r)},t.prototype.group=function(e,t,n,r,i,o,a,s){var u=this.connection.getMetadata(e);return this.queryRunner.group(u.tableName,t,n,r,i,o,a,s)},t.prototype.collectionIndexes=function(e){var t=this.connection.getMetadata(e);return this.queryRunner.collectionIndexes(t.tableName)},t.prototype.collectionIndexExists=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.collectionIndexExists(n.tableName,t)},t.prototype.collectionIndexInformation=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.collectionIndexInformation(n.tableName,t)},t.prototype.initializeOrderedBulkOp=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.initializeOrderedBulkOp(n.tableName,t)},t.prototype.initializeUnorderedBulkOp=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.initializeUnorderedBulkOp(n.tableName,t)},t.prototype.insertMany=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.insertMany(r.tableName,t,n)},t.prototype.insertOne=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.insertOne(r.tableName,t,n)},t.prototype.isCapped=function(e){var t=this.connection.getMetadata(e);return this.queryRunner.isCapped(t.tableName)},t.prototype.listCollectionIndexes=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.listCollectionIndexes(n.tableName,t)},t.prototype.mapReduce=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.mapReduce(i.tableName,t,n,r)},t.prototype.parallelCollectionScan=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.parallelCollectionScan(n.tableName,t)},t.prototype.reIndex=function(e){var t=this.connection.getMetadata(e);return this.queryRunner.reIndex(t.tableName)},t.prototype.rename=function(e,t,n){var r=this.connection.getMetadata(e);return this.queryRunner.rename(r.tableName,t,n)},t.prototype.replaceOne=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.replaceOne(i.tableName,t,n,r)},t.prototype.stats=function(e,t){var n=this.connection.getMetadata(e);return this.queryRunner.stats(n.tableName,t)},t.prototype.updateMany=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.updateMany(i.tableName,t,n,r)},t.prototype.updateOne=function(e,t,n,r){var i=this.connection.getMetadata(e);return this.queryRunner.updateOne(i.tableName,t,n,r)},t.prototype.convertFindManyOptionsOrConditionsToMongodbQuery=function(e){if(e)return i.FindOptionsUtils.isFindManyOptions(e)?"string"==typeof e.where?{}:e.where:e},t.prototype.convertFindOneOptionsOrConditionsToMongodbQuery=function(e){if(e)return i.FindOptionsUtils.isFindOneOptions(e)?"string"==typeof e.where?{}:e.where:e},t.prototype.convertFindOptionsOrderToOrderCriteria=function(e){return Object.keys(e).reduce(function(t,n){switch(e[n]){case"DESC":t[n]=-1;break;case"ASC":t[n]=1;break;default:t[n]=e[n]}return t},{})},t}(n.EntityManager),e("MongoEntityManager",a)}}}),System.register("typeorm/repository/MongoRepository",["typeorm/repository/Repository"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.query=function(e,t){throw new Error("Queries aren't supported by MongoDB.")},t.prototype.createQueryBuilder=function(e,t){throw new Error("Query Builder is not supported by MongoDB.")},t.prototype.find=function(e){return this.manager.find(this.metadata.target,e)},t.prototype.findAndCount=function(e){return this.manager.findAndCount(this.metadata.target,e)},t.prototype.findByIds=function(e,t){return this.manager.findByIds(this.metadata.target,e,t)},t.prototype.findOne=function(e){return this.manager.findOne(this.metadata.target,e)},t.prototype.findOneById=function(e,t){return this.manager.findOneById(this.metadata.target,e,t)},t.prototype.createCursor=function(e){return this.manager.createCursor(this.metadata.target,e)},t.prototype.createEntityCursor=function(e){return this.manager.createEntityCursor(this.metadata.target,e)},t.prototype.aggregate=function(e,t){return this.manager.aggregate(this.metadata.target,e,t)},t.prototype.bulkWrite=function(e,t){return this.manager.bulkWrite(this.metadata.target,e,t)},t.prototype.count=function(e,t){return this.manager.count(this.metadata.target,e||{},t)},t.prototype.createCollectionIndex=function(e,t){return this.manager.createCollectionIndex(this.metadata.target,e,t)},t.prototype.createCollectionIndexes=function(e){return this.manager.createCollectionIndexes(this.metadata.target,e)},t.prototype.deleteMany=function(e,t){return this.manager.deleteMany(this.metadata.tableName,e,t)},t.prototype.deleteOne=function(e,t){return this.manager.deleteOne(this.metadata.tableName,e,t)},t.prototype.distinct=function(e,t,n){return this.manager.distinct(this.metadata.tableName,e,t,n)},t.prototype.dropCollectionIndex=function(e,t){return this.manager.dropCollectionIndex(this.metadata.tableName,e,t)},t.prototype.dropCollectionIndexes=function(){return this.manager.dropCollectionIndexes(this.metadata.tableName)},t.prototype.findOneAndDelete=function(e,t){return this.manager.findOneAndDelete(this.metadata.tableName,e,t)},t.prototype.findOneAndReplace=function(e,t,n){return this.manager.findOneAndReplace(this.metadata.tableName,e,t,n)},t.prototype.findOneAndUpdate=function(e,t,n){return this.manager.findOneAndUpdate(this.metadata.tableName,e,t,n)},t.prototype.geoHaystackSearch=function(e,t,n){return this.manager.geoHaystackSearch(this.metadata.tableName,e,t,n)},t.prototype.geoNear=function(e,t,n){return this.manager.geoNear(this.metadata.tableName,e,t,n)},t.prototype.group=function(e,t,n,r,i,o,a){return this.manager.group(this.metadata.tableName,e,t,n,r,i,o,a)},t.prototype.collectionIndexes=function(){return this.manager.collectionIndexes(this.metadata.tableName)},t.prototype.collectionIndexExists=function(e){return this.manager.collectionIndexExists(this.metadata.tableName,e)},t.prototype.collectionIndexInformation=function(e){return this.manager.collectionIndexInformation(this.metadata.tableName,e)},t.prototype.initializeOrderedBulkOp=function(e){return this.manager.initializeOrderedBulkOp(this.metadata.tableName,e)},t.prototype.initializeUnorderedBulkOp=function(e){return this.manager.initializeUnorderedBulkOp(this.metadata.tableName,e)},t.prototype.insertMany=function(e,t){return this.manager.insertMany(this.metadata.tableName,e,t)},t.prototype.insertOne=function(e,t){return this.manager.insertOne(this.metadata.tableName,e,t)},t.prototype.isCapped=function(){return this.manager.isCapped(this.metadata.tableName)},t.prototype.listCollectionIndexes=function(e){return this.manager.listCollectionIndexes(this.metadata.tableName,e)},t.prototype.mapReduce=function(e,t,n){return this.manager.mapReduce(this.metadata.tableName,e,t,n)},t.prototype.parallelCollectionScan=function(e){return this.manager.parallelCollectionScan(this.metadata.tableName,e)},t.prototype.reIndex=function(){return this.manager.reIndex(this.metadata.tableName)},t.prototype.rename=function(e,t){return this.manager.rename(this.metadata.tableName,e,t)},t.prototype.replaceOne=function(e,t,n){return this.manager.replaceOne(this.metadata.tableName,e,t,n)},t.prototype.stats=function(e){return this.manager.stats(this.metadata.tableName,e)},t.prototype.updateMany=function(e,t,n){return this.manager.updateMany(this.metadata.tableName,e,t,n)},t.prototype.updateOne=function(e,t,n){return this.manager.updateOne(this.metadata.tableName,e,t,n)},t}(n.Repository),e("MongoRepository",r)}}}),System.register("typeorm/repository/TreeRepository",["typeorm/repository/Repository"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.findTrees=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return[4,this.findRoots()];case 1:return e=n.sent(),[4,Promise.all(e.map(function(e){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.findDescendantsTree(e)];case 1:return t.sent(),[2]}})})}))];case 2:return n.sent(),[2,e]}})})},t.prototype.findRoots=function(){var e=this,t=this.manager.connection.namingStrategy.joinColumnName(this.metadata.treeParentRelation.propertyName,"id");return this.createQueryBuilder("treeEntity").where(function(t){return e.manager.connection.driver.escape(t)}("treeEntity")+"."+function(t){return e.manager.connection.driver.escape(t)}(t)+" IS NULL").getMany()},t.prototype.findDescendants=function(e){return this.createDescendantsQueryBuilder("treeEntity","treeClosure",e).getMany()},t.prototype.findDescendantsTree=function(e){var t=this;return this.createDescendantsQueryBuilder("treeEntity","treeClosure",e).getRawAndEntities().then(function(n){var r=t.createRelationMaps("treeEntity",n.raw);return t.buildChildrenEntityTree(e,n.entities,r),e})},t.prototype.countDescendants=function(e){return this.createDescendantsQueryBuilder("treeEntity","treeClosure",e).getCount()},t.prototype.createDescendantsQueryBuilder=function(e,t,n){var r=this,i=function(e){return r.manager.connection.driver.escape(e)},o=i(e)+"."+i(this.metadata.primaryColumns[0].databaseName)+"="+i(t)+"."+i("descendant");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,o).where(i(t)+"."+i("ancestor")+"="+this.metadata.getEntityIdMap(n)[this.metadata.primaryColumns[0].propertyName])},t.prototype.findAncestors=function(e){return this.createAncestorsQueryBuilder("treeEntity","treeClosure",e).getMany()},t.prototype.findAncestorsTree=function(e){var t=this;return this.createAncestorsQueryBuilder("treeEntity","treeClosure",e).getRawAndEntities().then(function(n){var r=t.createRelationMaps("treeEntity",n.raw);return t.buildParentEntityTree(e,n.entities,r),e})},t.prototype.countAncestors=function(e){return this.createAncestorsQueryBuilder("treeEntity","treeClosure",e).getCount()},t.prototype.createAncestorsQueryBuilder=function(e,t,n){var r=this,i=function(e){return r.manager.connection.driver.escape(e)},o=function(e){return r.manager.connection.driver.escape(e)},a=i(e)+"."+o(this.metadata.primaryColumns[0].databaseName)+"="+i(t)+"."+o("ancestor");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,a).where(i(t)+"."+o("descendant")+"="+this.metadata.getEntityIdMap(n)[this.metadata.primaryColumns[0].propertyName])},t.prototype.createRelationMaps=function(e,t){var n=this;return t.map(function(t){return{id:t[e+"_"+n.metadata.primaryColumns[0].databaseName],parentId:t[e+"_"+n.metadata.treeParentRelation.joinColumns[0].givenDatabaseName]}})},t.prototype.buildChildrenEntityTree=function(e,t,n){var r=this,i=this.metadata.treeChildrenRelation.propertyName,o=this.metadata.primaryColumns[0].getEntityValue(e),a=n.filter(function(e){return e.parentId===o}).map(function(e){return e.id});e[i]=t.filter(function(e){return-1!==a.indexOf(e.id)}),e[i].forEach(function(e){r.buildChildrenEntityTree(e,t,n)})},t.prototype.buildParentEntityTree=function(e,t,n){var r=this,i=this.metadata.treeParentRelation.propertyName,o=this.metadata.primaryColumns[0].getEntityValue(e),a=n.find(function(e){return e.id===o}),s=t.find(function(e){return!!a&&e[r.metadata.primaryColumns[0].propertyName]===a.parentId});s&&(e[i]=s,this.buildParentEntityTree(e[i],t,n))},t}(n.Repository),e("TreeRepository",r)}}}),System.register("typeorm/util/DateUtils",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.normalizeHydratedDate=function(e){if(!e)return e;var t="string"==typeof e?new Date(e):e,n=new Date;return n.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setUTCHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n},e.mixedDateToDateString=function(e){return e instanceof Date?this.formatZerolessValue(e.getFullYear())+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate()):e},e.mixedDateToDate=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r="string"==typeof e?new Date(e):e;return t&&(r=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())),n||r.setUTCMilliseconds(0),r},e.mixedDateToTimeString=function(e,t){return void 0===t&&(t=!1),e instanceof Date?this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+(t?"":":"+this.formatZerolessValue(e.getSeconds())):e},e.mixedTimeToDate=function(e){if("string"==typeof e){var t=e.split(":"),n=t[0],r=t[1],i=t[2],o=new Date;return n&&o.setHours(parseInt(n)),r&&o.setMinutes(parseInt(r)),i&&o.setSeconds(parseInt(i)),o}return e},e.mixedTimeToString=function(e,t){return void 0===t&&(t=!1),"string"==typeof(e=e instanceof Date?e.getHours()+":"+e.getMinutes()+(t?"":":"+e.getSeconds()):e)?e.split(":").map(function(e){return 1===e.length?"0"+e:e}).join(":"):e},e.mixedDateToDatetimeString=function(e){return"string"==typeof e&&(e=new Date(e)),e instanceof Date?this.formatZerolessValue(e.getFullYear())+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate())+" "+this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+":"+this.formatZerolessValue(e.getSeconds())+"."+this.formatMilliseconds(e.getUTCMilliseconds()):e},e.mixedDateToUtcDatetimeString=function(e){return"string"==typeof e&&(e=new Date(e)),e instanceof Date?this.formatZerolessValue(e.getUTCFullYear())+"-"+this.formatZerolessValue(e.getUTCMonth()+1)+"-"+this.formatZerolessValue(e.getUTCDate())+" "+this.formatZerolessValue(e.getUTCHours())+":"+this.formatZerolessValue(e.getUTCMinutes())+":"+this.formatZerolessValue(e.getUTCSeconds())+"."+this.formatMilliseconds(e.getUTCMilliseconds()):e},e.simpleArrayToString=function(e){return e instanceof Array?e.map(function(e){return String(e)}).join(","):e},e.stringToSimpleArray=function(e){return e instanceof String||"string"==typeof e?e.length>0?e.split(","):[]:e},e.simpleJsonToString=function(e){return JSON.stringify(e)},e.stringToSimpleJson=function(e){return JSON.parse(e)},e.formatZerolessValue=function(e){return e<10?"0"+e:String(e)},e.formatMilliseconds=function(e){return e<100?"0"+e:String(e)},e}(),e("DateUtils",n)}}}),System.register("typeorm/persistence/Subject",["typeorm/util/DateUtils"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t,n){this.date=new Date,this.canBeInserted=!1,this.canBeUpdated=!1,this.mustBeRemoved=!1,this.diffColumns=[],this.diffRelations=[],this.relationUpdates=[],this.junctionInserts=[],this.junctionRemoves=[],this.metadata=e,this._persistEntity=t,this._databaseEntity=n}return Object.defineProperty(e.prototype,"entity",{get:function(){if(!this._persistEntity)throw new Error("Persistence entity is not set for the given subject.");return this._persistEntity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasEntity",{get:function(){return!!this._persistEntity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"databaseEntity",{get:function(){if(!this._databaseEntity)throw new Error("Database entity is not set for the given subject.");return this._databaseEntity},set:function(e){this._databaseEntity=e,this.recompute()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDatabaseEntity",{get:function(){return!!this._databaseEntity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityTarget",{get:function(){return this.metadata.target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mustBeInserted",{get:function(){return this.canBeInserted&&!this.hasDatabaseEntity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mustBeUpdated",{get:function(){return this.canBeUpdated&&(this.diffColumns.length>0||this.diffRelations.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasRelationUpdates",{get:function(){return this.relationUpdates.length>0},enumerable:!0,configurable:!0}),e.prototype.validate=function(){if(this.mustBeInserted&&this.mustBeRemoved)throw new Error("Removed entity "+this.metadata.name+" is also scheduled for insert operation. This looks like ORM problem. Please report a github issue.");if(this.mustBeUpdated&&this.mustBeRemoved)throw new Error('Removed entity "'+this.metadata.name+'" is also scheduled for update operation. Make sure you are not updating and removing same object (note that update or remove may be executed by cascade operations).');if(this.mustBeInserted&&this.mustBeUpdated)throw new Error("Inserted entity "+this.metadata.name+" is also scheduled for updated operation. This looks like ORM problem. Please report a github issue.")},e.prototype.recompute=function(){this.hasEntity&&this._databaseEntity&&(this.computeDiffColumns(),this.computeDiffRelationalColumns())},e.prototype.computeDiffColumns=function(){var e=this;this.diffColumns=this.metadata.columns.filter(function(t){var r=t.getEntityValue(e.entity),i=t.getEntityValue(e.databaseEntity);if(void 0===r)return!1;if(null!==r&&void 0!==r&&("date"===t.type?r=n.DateUtils.mixedDateToDateString(r):"time"===t.type?r=n.DateUtils.mixedDateToTimeString(r):"datetime"===t.type||t.type===Date?(r=n.DateUtils.mixedDateToUtcDatetimeString(r),i=n.DateUtils.mixedDateToUtcDatetimeString(i)):"json"===t.type||"jsonb"===t.type?(r=JSON.stringify(r),null!==i&&void 0!==i&&(i=JSON.stringify(i))):"sample-array"===t.type&&(r=n.DateUtils.simpleArrayToString(r),i=n.DateUtils.simpleArrayToString(i))),t.isVirtual||t.isParentId||t.isDiscriminator||t.isUpdateDate||t.isVersion||t.isCreateDate||r===i)return!1;var o=e.metadata.findRelationWithDbName(t.databaseName);if(o){var a=o.getEntityValue(e.entity);if(null!==a&&void 0!==a)return!1}return!0})},e.prototype.computeDiffRelationalColumns=function(){var e=this;this.diffRelations=this.metadata.relations.filter(function(t){if(!(t.isManyToOne||t.isOneToOne&&t.isOwning))return!1;var n=t.getEntityValue(e.entity),r=n instanceof Object?t.inverseEntityMetadata.getEntityIdMixedMap(n):n,i=t.getEntityValue(e.databaseEntity);return void 0!==r&&((void 0!==r&&null!==r||void 0!==i&&null!==i)&&r!==i)})},e}(),e("Subject",r)}}}),System.register("typeorm/util/OrmUtils",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.splitClassesAndStrings=function(e){return[e.filter(function(e){return"string"!=typeof e}),e.filter(function(e){return"string"==typeof e})]},e.groupBy=function(e,t){return e.reduce(function(e,n){var r=t(n),i=e.find(function(e){return e.id===r});return i||(i={id:r,items:[]},e.push(i)),i.items.push(n),e},[])},e.uniq=function(e,t){return e.reduce(function(e,n){var r=!1;if(t instanceof Function){var i=t(n);r=!!e.find(function(e){return t(e)===i})}else r="string"==typeof t?!!e.find(function(e){return e[t]===n[t]}):-1!==e.indexOf(n);return r||e.push(n),e},[])},e.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},e.mergeDeep=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!t.length)return e;var r=t.shift();if(this.isObject(e)&&this.isObject(r))for(var i in r)this.isObject(r[i])?(e[i]||Object.assign(e,(o={},o[i]={},o)),this.mergeDeep(e[i],r[i])):Object.assign(e,(a={},a[i]=r[i],a));return this.mergeDeep.apply(this,[e].concat(t));var o,a},e.deepCompare=function(){function e(t,n){var r;if(isNaN(t)&&isNaN(n)&&"number"==typeof t&&"number"==typeof n)return!0;if(t===n)return!0;if(t.equals instanceof Function&&t.equals(n))return!0;if("function"==typeof t&&"function"==typeof n||t instanceof Date&&n instanceof Date||t instanceof RegExp&&n instanceof RegExp||t instanceof String&&n instanceof String||t instanceof Number&&n instanceof Number)return t.toString()===n.toString();if(!(t instanceof Object&&n instanceof Object))return!1;if(t.isPrototypeOf(n)||n.isPrototypeOf(t))return!1;if(t.constructor!==n.constructor)return!1;if(t.prototype!==n.prototype)return!1;if(o.indexOf(t)>-1||a.indexOf(n)>-1)return!1;for(r in n){if(n.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;if(typeof n[r]!=typeof t[r])return!1}for(r in t){if(n.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;if(typeof n[r]!=typeof t[r])return!1;switch(typeof t[r]){case"object":case"function":if(o.push(t),a.push(n),!e(t[r],n[r]))return!1;o.pop(),a.pop();break;default:if(t[r]!==n[r])return!1}}return!0}for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,i,o,a;if(arguments.length<1)return!0;for(r=1,i=arguments.length;r<i;r++)if(o=[],a=[],!e(arguments[0],arguments[r]))return!1;return!0},e.toBoolean=function(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e||"1"===e:"number"==typeof e&&e>0},e.zipObject=function(e,t){return e.reduce(function(e,n,r){return e[n]=t[r],e},{})},e}(),e("OrmUtils",n)}}}),System.register("typeorm/persistence/SubjectBuilder",["typeorm/persistence/Subject","typeorm/driver/mongodb/MongoDriver","typeorm/util/OrmUtils"],function(e,t){"use strict";var n,r,i,o;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){o=function(){function e(e,t){this.connection=e,this.queryRunner=t,this.operateSubjects=[]}return e.prototype.persist=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=new n.Subject(t,e),r.canBeInserted=!0,r.canBeUpdated=!0,this.operateSubjects.push(r),this.buildCascadeUpdateAndInsertOperateSubjects(r),[4,this.loadOperateSubjectsDatabaseEntities()];case 1:return a.sent(),i=this.operateSubjects.filter(function(e){return e.hasDatabaseEntity}),[4,Promise.all(i.map(function(e){return o.buildCascadeRemovedAndRelationUpdateOperateSubjects(e)}))];case 2:return a.sent(),[4,this.buildJunctionOperations({insert:!0,remove:!0})];case 3:return a.sent(),[2]}})})},e.prototype.remove=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=new n.Subject(t,e),r.mustBeRemoved=!0,this.operateSubjects.push(r),this.buildCascadeRemoveOperateSubjects(r),[4,this.loadOperateSubjectsDatabaseEntities()];case 1:return a.sent(),i=this.operateSubjects.filter(function(e){return e.hasDatabaseEntity}),[4,Promise.all(i.map(function(e){return o.buildCascadeRemovedAndRelationUpdateOperateSubjects(e)}))];case 2:return a.sent(),[4,this.buildJunctionOperations({insert:!1,remove:!0})];case 3:return a.sent(),[2]}})})},e.prototype.buildCascadeUpdateAndInsertOperateSubjects=function(e){var t=this;e.metadata.extractRelationValuesFromEntity(e.entity,e.metadata.relations).filter(function(e){var t=e[0],n=e[1];e[2];return void 0!==n&&null!==n&&(t.isCascadeInsert||t.isCascadeUpdate)}).forEach(function(e){var r=e[0],i=e[1],o=e[2],a=t.findByEntityLike(o.target,i);if(a)return!1===a.canBeInserted&&(a.canBeInserted=!0===r.isCascadeInsert),void(!1===a.canBeUpdated&&(a.canBeUpdated=!0===r.isCascadeUpdate));var s=new n.Subject(o,i);s.canBeInserted=!0===r.isCascadeInsert,s.canBeUpdated=!0===r.isCascadeUpdate,t.operateSubjects.push(s),t.buildCascadeUpdateAndInsertOperateSubjects(s)})},e.prototype.buildCascadeRemoveOperateSubjects=function(e){var t=this;e.metadata.extractRelationValuesFromEntity(e.entity,e.metadata.relations).filter(function(e){var t=e[0],n=e[1];e[2];return void 0!==n&&null!==n&&t.isCascadeRemove}).forEach(function(e){e[0];var r=e[1],i=e[2],o=t.findByEntityLike(i.target,r);if(o)o.mustBeRemoved=!0;else{var a=new n.Subject(i,r);a.mustBeRemoved=!0,t.operateSubjects.push(a),t.buildCascadeRemoveOperateSubjects(a)}})},e.prototype.loadOperateSubjectsDatabaseEntities=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return e=this.groupByEntityTargets().map(function(e){return __awaiter(t,void 0,void 0,function(){var t,n,i=this;return __generator(this,function(o){switch(o.label){case 0:return(t=e.subjects.filter(function(e){return!e.hasDatabaseEntity}).filter(function(e){return!e.metadata.isEntityMapEmpty(e.entity)}).map(function(e){return e.metadata.getEntityIdMap(e.entity)})).length?this.connection.driver instanceof r.MongoDriver?[4,this.connection.getMongoRepository(e.target).findByIds(t)]:[3,2]:[2];case 1:return n=o.sent(),[3,4];case 2:return[4,this.connection.getRepository(e.target).createQueryBuilder("subject",this.queryRunner).whereInIds(t).loadAllRelationIds().getMany()];case 3:n=o.sent(),o.label=4;case 4:return n.forEach(function(t){var n=i.findByEntityLike(e.target,t);n&&(n.databaseEntity=t)}),[2]}})})}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},e.prototype.buildCascadeRemovedAndRelationUpdateOperateSubjects=function(e){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(i){switch(i.label){case 0:return t=e.metadata.relations.map(function(t){return __awaiter(r,void 0,void 0,function(){var r,i,o,a,s,u,c,l,p,d,m,f,h,y,g,v,b,E,_,T,M,C,w,N,R=this;return __generator(this,function(S){switch(S.label){case 0:return r=t.inverseEntityMetadata,i=r.tableName,e.hasDatabaseEntity?t.isOneToOneOwner||t.isManyToOne?t.isCascadeRemove?null===(o=t.getEntityValue(e.databaseEntity))||void 0===o?[2]:(c=void 0,a=void 0,e.hasEntity&&(null===(a=t.getEntityValue(e.entity))&&(c=null),a&&(c=t.joinColumns.reduce(function(e,t){return t.referencedColumn.getEntityValueMap(a)},{})),void 0===c)?[2]:null!==c&&t.entityMetadata.compareIds(o,a)?[2]:(d=this.operateSubjects.find(function(e){return!(!e.hasDatabaseEntity||e.entityTarget!==r.target)&&t.entityMetadata.compareIds(o,t.getEntityValue(e.databaseEntity))}))?[3,2]:(s=this.connection.getRepository(r.target).createQueryBuilder(i,this.queryRunner).loadAllRelationIds(),u=t.joinColumns.map(function(e){return i+"."+e.referencedColumn.propertyPath+" = :"+e.databaseName}).join(" AND "),M=t.joinColumns.reduce(function(e,t){return e[t.databaseName]=t.referencedColumn.getEntityValue(o),e},{}),s.where(u).setParameters(M),[4,s.getOne()])):[2]:[3,4]:[2];case 1:(m=S.sent())&&(d=new n.Subject(r,void 0,m),this.operateSubjects.push(d)),S.label=2;case 2:return d?d.mustBeRemoved?[2]:(d.mustBeRemoved=!0,[4,this.buildCascadeRemovedAndRelationUpdateOperateSubjects(d)]):[3,4];case 3:S.sent(),S.label=4;case 4:return t.isOneToOneNotOwner?t.isCascadeRemove?(c=void 0,e.hasEntity&&!e.mustBeRemoved&&((l=t.getEntityValue(e.entity))&&(c=t.inverseRelation.getEntityValue(l)),void 0===c)?[2]:null===(p=t.inverseRelation.joinColumns[0].referencedColumn.getEntityValue(e.databaseEntity))||void 0===p?[2]:(d=this.operateSubjects.find(function(e){return!(!e.hasDatabaseEntity||e.entityTarget!==r.target)&&t.inverseRelation.getEntityValue(e.databaseEntity)===p}))?[3,6]:[4,this.connection.getRepository(r.target).createQueryBuilder(i,this.queryRunner).where(i+"."+t.inverseSidePropertyPath+"=:id").setParameter("id",p).loadAllRelationIds().getOne()]):[2]:[3,8];case 5:m=S.sent(),d=new n.Subject(r,void 0,m),this.operateSubjects.push(d),S.label=6;case 6:return d&&d.hasDatabaseEntity?(f=t.inverseRelation.getEntityValue(d.databaseEntity),c&&c===f?[2]:d.mustBeRemoved?[2]:(d.mustBeRemoved=!0,[4,this.buildCascadeRemovedAndRelationUpdateOperateSubjects(d)])):[3,8];case 7:S.sent(),S.label=8;case 8:return t.isOneToMany||t.isManyToMany?(h=void 0,e.hasEntity&&void 0===(h=t.getEntityValue(e.entity))?[2]:(y=[],g=function(e){return R.connection.driver.escape(e)},t.isManyToManyOwner?t.isCascadeRemove?(v=g("persistenceJoinedRelation"),E=t.joinColumns.map(function(e){return v+"."+e.propertyName+" = :"+e.propertyName}),_=t.inverseJoinColumns.map(function(e){return v+"."+e.propertyName+" = "+g(i)+"."+g(e.referencedColumn.propertyName)}),T=E.concat(_).join(" AND "),M=t.joinColumns.reduce(function(t,n){return t[n.propertyName]=n.referencedColumn.getEntityValue(e.databaseEntity),t},{}),[4,this.connection.getRepository(r.target).createQueryBuilder(i,this.queryRunner).innerJoin(t.junctionEntityMetadata.tableName,v,T).setParameters(M).loadAllRelationIds().getMany()]):[2]:[3,10])):[3,18];case 9:return y=S.sent(),[3,14];case 10:return t.isManyToManyNotOwner?t.isCascadeRemove?(b=g("persistenceJoinedRelation"),E=t.joinColumns.map(function(e){return b+"."+e.propertyName+" = "+g(i)+"."+g(e.referencedColumn.propertyName)}),_=t.inverseJoinColumns.map(function(e){return b+"."+e.propertyName+" = :"+e.propertyName}),T=E.concat(_).join(" AND "),M=t.inverseRelation.inverseJoinColumns.reduce(function(t,n){return t[n.propertyName]=n.referencedColumn.getEntityValue(e.databaseEntity),t},{}),[4,this.connection.getRepository(r.target).createQueryBuilder(i,this.queryRunner).innerJoin(t.junctionEntityMetadata.tableName,b,T).setParameters(M).loadAllRelationIds().getMany()]):[2]:[3,12];case 11:return y=S.sent(),[3,14];case 12:return C=t.inverseRelation.joinColumns[0].referencedColumn.getEntityValue(e.databaseEntity),[4,this.connection.getRepository(r.target).createQueryBuilder(i,this.queryRunner).where(i+"."+t.inverseSidePropertyPath+"=:id").setParameter("id",C).loadAllRelationIds().getMany()];case 13:y=S.sent(),S.label=14;case 14:return y.forEach(function(e){var t=R.findByEntityLike(r.target,e);if(t&&!t.hasDatabaseEntity)t.databaseEntity=e;else if(!t){var i=new n.Subject(r,void 0,e);R.operateSubjects.push(i)}}),t.isOneToMany&&h?(w=h.map(function(o){return __awaiter(R,void 0,void 0,function(){var a,s,u,c;return __generator(this,function(l){switch(l.label){case 0:return(a=y.find(function(e){return r.compareEntities(o,e)}))?[3,3]:(s=this.findByDatabaseEntityLike(r.target,o))?[3,2]:(u=r.getEntityIdMap(o))?[4,this.connection.getRepository(r.target).createQueryBuilder(i,this.queryRunner).whereInIds([u]).loadAllRelationIds().getOne()]:[3,2];case 1:(c=l.sent())&&(s=new n.Subject(r,void 0,c),this.operateSubjects.push(s)),l.label=2;case 2:s&&s.relationUpdates.push({relation:t.inverseRelation,value:e.entity}),l.label=3;case 3:return[2]}})})}),[4,Promise.all(w)]):[3,16];case 15:S.sent(),S.label=16;case 16:return N=y.map(function(e){return __awaiter(R,void 0,void 0,function(){var n,i;return __generator(this,function(o){switch(o.label){case 0:return(n=this.findByDatabaseEntityLike(r.target,e))?n.mustBeRemoved?[2]:(i=(h||[]).find(function(e){return r.compareEntities(n.databaseEntity,e)}),null!==h&&i?[3,3]:t.isCascadeRemove?(n.mustBeRemoved=!0,[4,this.buildCascadeRemovedAndRelationUpdateOperateSubjects(n)]):[3,2]):[2];case 1:return o.sent(),[3,3];case 2:t.isOneToMany&&t.inverseRelation&&n.relationUpdates.push({relation:t.inverseRelation,value:null}),o.label=3;case 3:return[2]}})})}),[4,Promise.all(N)];case 17:S.sent(),S.label=18;case 18:return[2]}})})}),[4,Promise.all(t)];case 1:return i.sent(),[2]}})})},e.prototype.buildJunctionOperations=function(e){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(r){switch(r.label){case 0:return t=this.operateSubjects.filter(function(e){return e.hasEntity}).map(function(t){var r=(t.metadata.parentEntityMetadata?t.metadata.parentEntityMetadata:t.metadata).manyToManyRelations.map(function(r){return __awaiter(n,void 0,void 0,function(){var n,o,a,s,u,c;return __generator(this,function(l){return t.mustBeRemoved&&e.remove?((n=r.getEntityValue(t.databaseEntity)).length>0&&t.junctionRemoves.push({relation:r,junctionRelationIds:n}),[2]):t.hasEntity&&(o=r.getEntityValue(t.entity))instanceof Array?(a=[],t.hasDatabaseEntity&&(a=r.getEntityValue(t.databaseEntity)),s=o.map(function(e){return(r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns).reduce(function(t,n){return i.OrmUtils.mergeDeep(t,n.referencedColumn.createValueMap(n.referencedColumn.getEntityValue(e)))},{})}).filter(function(e){return void 0!==e&&null!==e}),u=a.filter(function(e){return!s.find(function(t){return r.inverseEntityMetadata.compareIds(t,e)})}),(c=o.filter(function(e){var t=(r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns).reduce(function(t,n){return i.OrmUtils.mergeDeep(t,n.referencedColumn.createValueMap(n.referencedColumn.getEntityValue(e)))},{});return!a.find(function(e){return r.inverseEntityMetadata.compareIds(e,t)})})).length>0&&e.insert&&t.junctionInserts.push({relation:r,junctionEntities:c}),u.length>0&&e.remove&&t.junctionRemoves.push({relation:r,junctionRelationIds:u}),[2]):[2]})})});return Promise.all(r)}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.findByEntityLike=function(e,t){return this.operateSubjects.find(function(n){return!!n.hasEntity&&(n.entity===t||n.entityTarget===e&&n.metadata.compareEntities(n.entity,t))})},e.prototype.findByDatabaseEntityLike=function(e,t){return this.operateSubjects.find(function(n){return!!n.hasDatabaseEntity&&(n.entityTarget===e&&n.metadata.compareEntities(n.databaseEntity,t))})},e.prototype.groupByEntityTargets=function(){return this.operateSubjects.reduce(function(e,t){var n=e.find(function(e){return e.target===t.entityTarget});return n||(n={target:t.entityTarget,subjects:[]},e.push(n)),n.subjects.push(t),e},[])},e}(),e("SubjectBuilder",o)}}}),System.register("typeorm/util/PromiseUtils",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.runInSequence=function(e,t){var n=[];return e.reduce(function(e,r){return e.then(function(){return t(r)}).then(function(e){n.push(e)})},Promise.resolve()).then(function(){return n})},e.settle=function(e){return Promise.all(e.map(function(e){return Promise.resolve(e).then(function(e){return{state:"fulfilled",value:e}},function(e){return{state:"rejected",reason:e}})})).then(function(e){var t=e.find(function(e){return"rejected"===e.state});return t?Promise.reject(t.reason):e.map(function(e){return e.value})})},e}(),e("PromiseUtils",n)}}}),System.register("typeorm/subscriber/event/UpdateEvent",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/subscriber/event/RemoveEvent",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/subscriber/event/InsertEvent",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/subscriber/EntitySubscriberInterface",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/types/EventListenerTypes",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.AFTER_LOAD="after-load",e.BEFORE_INSERT="before-insert",e.AFTER_INSERT="after-insert",e.BEFORE_UPDATE="before-update",e.AFTER_UPDATE="after-update",e.BEFORE_REMOVE="before-remove",e.AFTER_REMOVE="after-remove",e}(),e("EventListenerTypes",n)}}}),System.register("typeorm/subscriber/Broadcaster",["typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.connection=e}return e.prototype.broadcastBeforeEventsForAll=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i,o,a,s,u=this;return __generator(this,function(c){switch(c.label){case 0:return i=t.map(function(t){return u.broadcastBeforeInsertEvent(e,t)}),o=n.map(function(t){return u.broadcastBeforeUpdateEvent(e,t)}),a=r.map(function(t){return u.broadcastBeforeRemoveEvent(e,t)}),s=i.concat(o).concat(a),[4,Promise.all(s)];case 1:return c.sent(),[2]}})})},e.prototype.broadcastAfterEventsForAll=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i,o,a,s,u=this;return __generator(this,function(c){switch(c.label){case 0:return i=t.map(function(t){return u.broadcastAfterInsertEvent(e,t)}),o=n.map(function(t){return u.broadcastAfterUpdateEvent(e,t)}),a=r.map(function(t){return u.broadcastAfterRemoveEvent(e,t)}),s=i.concat(o).concat(a),[4,Promise.all(s)];case 1:return c.sent(),[2]}})})},e.prototype.broadcastBeforeInsertEvent=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=t.metadata.listeners.filter(function(e){return e.type===n.EventListenerTypes.BEFORE_INSERT&&e.isAllowed(t.entity)}).map(function(e){return e.execute(t.entity)}),i=this.connection.subscribers.filter(function(e){return o.isAllowedSubscriber(e,t.entityTarget)&&e.beforeInsert}).map(function(n){return n.beforeInsert({manager:e,entity:t.entity})}),[4,Promise.all(r.concat(i))];case 1:return a.sent(),[2]}})})},e.prototype.broadcastBeforeUpdateEvent=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=t.metadata.listeners.filter(function(e){return e.type===n.EventListenerTypes.BEFORE_UPDATE&&e.isAllowed(t.entity)}).map(function(e){return e.execute(t.entity)}),i=this.connection.subscribers.filter(function(e){return o.isAllowedSubscriber(e,t.entityTarget)&&e.beforeUpdate}).map(function(n){return n.beforeUpdate({manager:e,entity:t.entity,databaseEntity:t.databaseEntity,updatedColumns:t.diffColumns,updatedRelations:t.diffRelations})}),[4,Promise.all(r.concat(i))];case 1:return a.sent(),[2]}})})},e.prototype.broadcastBeforeRemoveEvent=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=t.metadata.listeners.filter(function(e){return e.type===n.EventListenerTypes.BEFORE_REMOVE&&e.isAllowed(t.entity)}).map(function(e){return e.execute(t.databaseEntity)}),i=this.connection.subscribers.filter(function(e){return o.isAllowedSubscriber(e,t.entityTarget)&&e.beforeRemove}).map(function(n){return n.beforeRemove({manager:e,entity:t.hasEntity?t.entity:void 0,databaseEntity:t.databaseEntity,entityId:t.metadata.getEntityIdMixedMap(t.databaseEntity)})}),[4,Promise.all(r.concat(i))];case 1:return a.sent(),[2]}})})},e.prototype.broadcastAfterInsertEvent=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=t.metadata.listeners.filter(function(e){return e.type===n.EventListenerTypes.AFTER_INSERT&&e.isAllowed(t.entity)}).map(function(e){return e.execute(t.entity)}),i=this.connection.subscribers.filter(function(e){return o.isAllowedSubscriber(e,t.entityTarget)&&e.afterInsert}).map(function(n){return n.afterInsert({manager:e,entity:t.entity})}),[4,Promise.all(r.concat(i))];case 1:return a.sent(),[2]}})})},e.prototype.broadcastAfterUpdateEvent=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=t.metadata.listeners.filter(function(e){return e.type===n.EventListenerTypes.AFTER_UPDATE&&e.isAllowed(t.entity)}).map(function(e){return e.execute(t.entity)}),i=this.connection.subscribers.filter(function(e){return o.isAllowedSubscriber(e,t.entityTarget)&&e.afterUpdate}).map(function(n){return n.afterUpdate({manager:e,entity:t.entity,databaseEntity:t.databaseEntity,updatedColumns:t.diffColumns,updatedRelations:t.diffRelations})}),[4,Promise.all(r.concat(i))];case 1:return a.sent(),[2]}})})},e.prototype.broadcastAfterRemoveEvent=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return r=t.metadata.listeners.filter(function(e){return e.type===n.EventListenerTypes.AFTER_REMOVE&&e.isAllowed(t.entity)}).map(function(e){return e.execute(t.entity)}),i=this.connection.subscribers.filter(function(e){return o.isAllowedSubscriber(e,t.entityTarget)&&e.afterRemove}).map(function(n){return n.afterRemove({manager:e,entity:t.hasEntity?t.entity:void 0,databaseEntity:t.databaseEntity,entityId:t.metadata.getEntityIdMixedMap(t.databaseEntity)})}),[4,Promise.all(r.concat(i))];case 1:return a.sent(),[2]}})})},e.prototype.broadcastLoadEventsForAll=function(e,t){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(t){return n.broadcastLoadEvents(e,t)}))];case 1:return r.sent(),[2]}})})},e.prototype.broadcastLoadEvents=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return t instanceof Promise?[2]:(r=this.connection.getMetadata(e).relations.reduce(function(e,n){if(!t.hasOwnProperty(n.propertyName))return e;var r=n.getEntityValue(t);return r instanceof Array?e=e.concat(a.broadcastLoadEventsForAll(n.inverseEntityMetadata.target,r)):r&&e.push(a.broadcastLoadEvents(n.inverseEntityMetadata.target,r)),e},[]),i=this.connection.getMetadata(e).listeners.filter(function(e){return e.type===n.EventListenerTypes.AFTER_LOAD&&e.isAllowed(t)}).map(function(e){return t[e.propertyName]()}),o=this.connection.subscribers.filter(function(t){return a.isAllowedSubscriber(t,e)&&t.afterLoad}).map(function(e){return e.afterLoad(t)}),[4,Promise.all(r.concat(i.concat(o)))]);case 1:return s.sent(),[2]}})})},e.prototype.isAllowedSubscriber=function(e,t){return!e.listenTo||!e.listenTo()||e.listenTo()===Object||e.listenTo()===t||e.listenTo().isPrototypeOf(t)},e}(),e("Broadcaster",r)}}}),System.register("typeorm/persistence/SubjectOperationExecutor",["typeorm/util/OrmUtils","typeorm/util/PromiseUtils","typeorm/driver/mongodb/MongoDriver","typeorm/subscriber/Broadcaster"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e,t,n,r){this.connection=e,this.transactionEntityManager=t,this.queryRunner=n,r.forEach(function(e){return e.validate()}),this.allSubjects=r,this.insertSubjects=r.filter(function(e){return e.mustBeInserted}),this.updateSubjects=r.filter(function(e){return e.mustBeUpdated}),this.removeSubjects=r.filter(function(e){return e.mustBeRemoved}),this.relationUpdateSubjects=r.filter(function(e){return e.hasRelationUpdates}),this.broadcaster=new o.Broadcaster(this.connection)}return e.prototype.areExecutableOperations=function(){return this.insertSubjects.length>0||this.updateSubjects.length>0||this.removeSubjects.length>0||this.relationUpdateSubjects.length>0||this.allSubjects.some(function(e){return e.junctionInserts.length>0})||this.allSubjects.some(function(e){return e.junctionRemoves.length>0})},e.prototype.execute=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.broadcaster.broadcastBeforeEventsForAll(this.transactionEntityManager,this.insertSubjects,this.updateSubjects,this.removeSubjects)];case 1:return e.sent(),this.updateSubjects.forEach(function(e){return e.recompute()}),[4,this.executeInsertOperations()];case 2:return e.sent(),[4,this.executeInsertClosureTableOperations()];case 3:return e.sent(),[4,this.executeInsertJunctionsOperations()];case 4:return e.sent(),[4,this.executeRemoveJunctionsOperations()];case 5:return e.sent(),[4,this.executeUpdateOperations()];case 6:return e.sent(),[4,this.executeUpdateRelations()];case 7:return e.sent(),[4,this.executeRemoveOperations()];case 8:return e.sent(),[4,this.updateSpecialColumnsInPersistedEntities()];case 9:return e.sent(),[4,this.broadcaster.broadcastAfterEventsForAll(this.transactionEntityManager,this.insertSubjects,this.updateSubjects,this.removeSubjects)];case 10:return e.sent(),[2]}})})},e.prototype.executeInsertOperations=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r=this;return __generator(this,function(i){switch(i.label){case 0:return e=this.insertSubjects.filter(function(e){return!e.metadata.hasNonNullableRelations}),t=this.insertSubjects.filter(function(e){return e.metadata.hasNonNullableRelations}),[4,Promise.all(e.map(function(e){return r.insert(e,[])}))];case 1:return i.sent(),[4,Promise.all(t.map(function(t){return r.insert(t,e)}))];case 2:return i.sent(),n=[],e.forEach(function(e){var t={};if(e.metadata.relationsWithJoinColumns.forEach(function(n){n.joinColumns.forEach(function(i){var o=i.referencedColumn,a=n.getEntityValue(e.entity);if(a){var s,u=n.inverseEntityMetadata.findRelationWithPropertyPath(i.referencedColumn.propertyPath);if(u)(c=r.insertSubjects.find(function(e){return e.entity===o.getEntityValue(a)}))&&((s=u.getEntityValue(o.getEntityValue(a)))||o.isGenerated&&c.generatedMap&&(s=o.getEntityValue(c.generatedMap)));else{var c=r.insertSubjects.find(function(e){return e.entity===a});c&&((s=o.getEntityValue(a))||o.isGenerated&&c.generatedMap&&(s=o.getEntityValue(c.generatedMap)))}s&&(t[i.databaseName]=s)}})}),Object.keys(t).length>0){var i={};if((e.metadata.parentEntityMetadata,e.metadata.primaryColumns).forEach(function(t){var n=t.getEntityValue(e.entity),o=e.metadata.relations.find(function(e){return e.propertyName===t.propertyName});n&&o?o.joinColumns.forEach(function(e){var o=n[e.referencedColumn.propertyName];if(!o){var a=r.insertSubjects.find(function(e){return e.entity===n});a&&e.referencedColumn.isGenerated&&a.generatedMap&&(o=e.referencedColumn.getEntityValue(a.generatedMap))}o&&(i[t.databaseName]=o)}):n?i[t.databaseName]=n:e.generatedMap&&(i[t.databaseName]=t.getEntityValue(e.generatedMap))}),!Object.keys(i).length)return;var o=r.queryRunner.update(e.metadata.tablePath,t,i);n.push(o)}var a=e.metadata.oneToManyRelations.concat(e.metadata.oneToOneRelations.filter(function(e){return!e.isOwning}));e.metadata.extractRelationValuesFromEntity(e.entity,a).forEach(function(t){var i=t[0],o=t[1],a=t[2];i.inverseRelation.joinColumns.forEach(function(t){var s=t.referencedColumn,u={};if((a.parentEntityMetadata,a.primaryColumns).forEach(function(e){var t=e.getEntityValue(o),n=a.relations.find(function(t){return t.propertyName===e.propertyName});if(t&&n)n.joinColumns.forEach(function(n){var i=t[n.referencedColumn.propertyName];if(!i){var o=r.insertSubjects.find(function(e){return e.entity===t});o&&n.referencedColumn.isGenerated&&o.generatedMap&&(i=n.referencedColumn.getEntityValue(o.generatedMap))}i&&(u[e.databaseName]=i)});else{var i=r.insertSubjects.find(function(e){return e.entity===o});t?u[e.databaseName]=t:i&&i.generatedMap&&(u[e.databaseName]=e.getEntityValue(i.generatedMap))}}),Object.keys(u).length){var c={},l=i.inverseEntityMetadata.relations.find(function(e){return e.propertyName===s.propertyName}),p=s.getEntityValue(e.entity);if(l){var d=l.getEntityValue(p);if(!d){var m=r.insertSubjects.find(function(e){return e.entity===p});m&&m.generatedMap&&(d=s.getEntityValue(m.generatedMap))}c[t.databaseName]=d}else{var f=e.generatedMap?s.getEntityValue(e.generatedMap):void 0;c[t.databaseName]=p||f}var h=r.queryRunner.update(i.inverseEntityMetadata.tablePath,c,u);n.push(h)}})})}),[4,Promise.all(n)];case 3:return i.sent(),[2]}})})},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l;return __generator(this,function(p){switch(p.label){case 0:return n=e.metadata.parentEntityMetadata,r=e.metadata,i=e.entity,r.isClassTableChild?(s=this.collectColumnsAndValues(n,i,e.date,void 0,r.discriminatorValue,t,"insert"),[4,this.queryRunner.insert(n.tablePath,s)]):[3,3];case 1:return o=a=p.sent(),u=this.collectColumnsAndValues(r,i,e.date,o.generatedMap[n.primaryColumns[0].propertyName],void 0,t,"insert"),[4,this.queryRunner.insert(r.tablePath,u)];case 2:return c=p.sent(),!o&&c&&(o=c),[3,5];case 3:return l=this.collectColumnsAndValues(r,i,e.date,void 0,void 0,t,"insert"),[4,this.queryRunner.insert(r.tablePath,l)];case 4:o=p.sent(),p.label=5;case 5:return a&&(e.parentGeneratedId=a.generatedMap[n.primaryColumns[0].propertyName]),o.generatedMap&&(e.generatedMap=o.generatedMap),[2]}})})},e.prototype.collectColumns=function(e,t,n,r){var i=this;e.forEach(function(e){if(!(e.isVirtual||e.isParentId||e.isDiscriminator||"update"===r&&e.isReadonly)){var o=t[e.propertyName];void 0!==o&&(n[e.databaseNameWithoutPrefixes]=i.connection.driver.preparePersistentValue(o,e))}})},e.prototype.collectEmbeds=function(e,t,n,r){var i=this;e.isArray?t[e.propertyName]instanceof Array&&(n[e.prefix]||(n[e.prefix]=[]),t[e.propertyName].forEach(function(t,o){n[e.prefix][o]||(n[e.prefix][o]={}),i.collectColumns(e.columns,t,n[e.prefix][o],r),e.embeddeds.forEach(function(a){return i.collectEmbeds(a,t,n[e.prefix][o],r)})})):void 0!==t[e.propertyName]&&(n[e.prefix]||(n[e.prefix]={}),this.collectColumns(e.columns,t[e.propertyName],n[e.prefix],r),e.embeddeds.forEach(function(o){return i.collectEmbeds(o,t[e.propertyName],n[e.prefix],r)}))},e.prototype.collectColumnsAndValues=function(e,t,n,r,o,a,s){var u=this,c={};if(this.connection.driver instanceof i.MongoDriver?(this.collectColumns(e.ownColumns,t,c,s),e.embeddeds.forEach(function(e){return u.collectEmbeds(e,t,c,s)})):e.columns.forEach(function(e){if(!(e.isVirtual||e.isParentId||e.isDiscriminator)){var n=e.getEntityValue(t);void 0!==n&&(c[e.databaseName]=u.connection.driver.preparePersistentValue(n,e))}}),e.relationsWithJoinColumns.forEach(function(e){e.joinColumns.forEach(function(n){var r,i=e.getEntityValue(t);if(i){var o=n.referencedColumn.getEntityValue(i);o&&(r=o);var s=a.find(function(e){return e.entity===i});if(s){var l=n.referencedColumn;l.referencedColumn&&l.referencedColumn.isGenerated&&l.isParentId&&(r=s.parentGeneratedId),l.isGenerated&&s.generatedMap&&(r=l.getEntityValue(s.generatedMap)),(l.isCreateDate||l.isUpdateDate)&&(r=u.connection.driver.preparePersistentValue(s.date,l)),l.isVersion&&(r=u.connection.driver.preparePersistentValue(1,l))}}else if(e.inverseRelation){var p=u.allSubjects.find(function(n){if(!n.hasEntity||n.entityTarget!==e.inverseRelation.target)return!1;var r=e.inverseRelation.getEntityValue(n.entity);return r?r instanceof Array?r.find(function(e){return e===e}):r===t:void 0});p&&n.referencedColumn.getEntityValue(p.entity)&&(r=n.referencedColumn.getEntityValue(p.entity))}r&&(c[n.databaseName]=r)})}),e.createDateColumn){l=this.connection.driver.preparePersistentValue(n,e.createDateColumn);c[e.createDateColumn.databaseName]=l}if(e.updateDateColumn){l=this.connection.driver.preparePersistentValue(n,e.updateDateColumn);c[e.updateDateColumn.databaseName]=l}if(e.versionColumn){l=this.connection.driver.preparePersistentValue(1,e.versionColumn);c[e.versionColumn.databaseName]=l}if(e.discriminatorColumn){var l=this.connection.driver.preparePersistentValue(o||e.discriminatorValue,e.discriminatorColumn);c[e.discriminatorColumn.databaseName]=l}if(e.generatedColumns.filter(function(e){return"uuid"===e.generationStrategy}).forEach(function(e){if(!e.isNullable||null!==c[e.databaseName]){var t=u.connection.driver.preparePersistentValue("",e);t&&!c[e.databaseName]&&(c[e.databaseName]=t)}}),e.treeLevelColumn&&e.treeParentRelation){var p=e.treeParentRelation.getEntityValue(t),d=p?e.treeLevelColumn.getEntityValue(p)||0:0;c[e.treeLevelColumn.databaseName]=d+1}return e.parentEntityMetadata&&e.parentIdColumns.length&&(c[e.parentIdColumns[0].databaseName]=r||e.parentEntityMetadata.primaryColumns[0].getEntityValue(t)),c},e.prototype.executeInsertClosureTableOperations=function(){var e=this,t=this.insertSubjects.filter(function(e){return e.metadata.isClosure}).map(function(t){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.insertClosureTableValues(t)];case 1:return e.sent(),[2]}})})});return Promise.all(t)},e.prototype.insertClosureTableValues=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,p;return __generator(this,function(d){switch(d.label){case 0:return t=e.metadata.closureJunctionTable.tablePath,n=e.metadata.treeParentRelation.joinColumns[0].referencedColumn,!(r=n.getEntityValue(e.entity))&&n.isGenerated&&e.generatedMap&&(r=n.getEntityValue(e.generatedMap)),i=e.metadata.treeParentRelation.getEntityValue(e.entity),o=0,i&&!(o=n.getEntityValue(i))&&n.isGenerated&&(a=this.insertSubjects.find(function(e){return e.entity===i})).generatedMap&&(o=n.getEntityValue(a.generatedMap)),o||(s=this.allSubjects.find(function(t){if(!t.hasEntity||!t.metadata.isClosure||!t.metadata.treeChildrenRelation)return!1;var n=e.metadata.treeChildrenRelation.getEntityValue(t.entity);return n instanceof Array&&-1!==n.indexOf(e.entity)}))&&!(o=n.getEntityValue(s.entity))&&s.generatedMap&&(o=n.getEntityValue(s.generatedMap)),u=e,[4,this.queryRunner.insertIntoClosureTable(t,r,o,!!e.metadata.treeLevelColumn)];case 1:return u.treeLevel=d.sent(),e.metadata.treeLevelColumn?(l={},l[e.metadata.treeLevelColumn.databaseName]=e.treeLevel,c=l,[4,this.queryRunner.update(e.metadata.tablePath,c,(p={},p[n.databaseName]=r,p))]):[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}})})},e.prototype.executeUpdateOperations=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.updateSubjects.map(function(t){return e.update(t)}))];case 1:return t.sent(),[2]}})})},e.prototype.update=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,o,a,s=this;return __generator(this,function(u){switch(u.label){case 0:if(t=e.entity,this.connection.driver instanceof i.MongoDriver){if(!(n=e.metadata.getDatabaseEntityIdMap(t)))throw new Error("Internal error. Cannot get id of the updating entity.");return r={},this.collectColumns(e.metadata.ownColumns,t,r,"update"),e.metadata.embeddeds.forEach(function(e){return s.collectEmbeds(e,t,r,"update")}),0===Object.keys(r).length?[2]:(e.metadata.updateDateColumn&&(r[e.metadata.updateDateColumn.databaseName]=this.connection.driver.preparePersistentValue(new Date,e.metadata.updateDateColumn)),e.metadata.versionColumn&&(r[e.metadata.versionColumn.databaseName]=this.connection.driver.preparePersistentValue(e.metadata.versionColumn.getEntityValue(t)+1,e.metadata.versionColumn)),[2,this.queryRunner.update(e.metadata.tablePath,r,n)])}return o=[],e.diffColumns.forEach(function(e){var n=s.connection.getMetadata(e.entityMetadata.target),r=o.find(function(e){return e.tablePath===n.tablePath});r||(r={tablePath:n.tablePath,metadata:n,values:{}},o.push(r)),r.values[e.databaseName]=s.connection.driver.preparePersistentValue(e.getEntityValue(t),e)}),e.diffRelations.forEach(function(e){var n=o.find(function(t){return t.tablePath===e.entityMetadata.tablePath});n||(n={tablePath:e.entityMetadata.tablePath,metadata:e.entityMetadata,values:{}},o.push(n));var r=e.getEntityValue(t);e.joinColumns.forEach(function(e){n.values[e.databaseName]=null!==r&&void 0!==r?r[e.referencedColumn.propertyName]:null})}),0===Object.keys(o).length?[2]:(e.metadata.updateDateColumn&&((a=o.find(function(t){return t.tablePath===e.metadata.tablePath}))||(a={tablePath:e.metadata.tablePath,metadata:e.metadata,values:{}},o.push(a)),a.values[e.metadata.updateDateColumn.databaseName]=this.connection.driver.preparePersistentValue(new Date,e.metadata.updateDateColumn)),e.metadata.versionColumn&&((a=o.find(function(t){return t.tablePath===e.metadata.tablePath}))||(a={tablePath:e.metadata.tablePath,metadata:e.metadata,values:{}},o.push(a)),a.values[e.metadata.versionColumn.databaseName]=this.connection.driver.preparePersistentValue(e.metadata.versionColumn.getEntityValue(t)+1,e.metadata.versionColumn)),e.metadata.parentEntityMetadata&&(e.metadata.parentEntityMetadata.updateDateColumn&&((a=o.find(function(t){return t.tablePath===e.metadata.parentEntityMetadata.tablePath}))||(a={tablePath:e.metadata.parentEntityMetadata.tablePath,metadata:e.metadata.parentEntityMetadata,values:{}},o.push(a)),a.values[e.metadata.parentEntityMetadata.updateDateColumn.databaseName]=this.connection.driver.preparePersistentValue(new Date,e.metadata.parentEntityMetadata.updateDateColumn)),e.metadata.parentEntityMetadata.versionColumn&&((a=o.find(function(t){return t.tablePath===e.metadata.parentEntityMetadata.tablePath}))||(a={tablePath:e.metadata.parentEntityMetadata.tablePath,metadata:e.metadata.parentEntityMetadata,values:{}},o.push(a)),a.values[e.metadata.parentEntityMetadata.versionColumn.databaseName]=this.connection.driver.preparePersistentValue(e.metadata.parentEntityMetadata.versionColumn.getEntityValue(t)+1,e.metadata.parentEntityMetadata.versionColumn))),[4,Promise.all(o.map(function(e){var n=e.metadata.getDatabaseEntityIdMap(t);if(!n)throw new Error("Internal error. Cannot get id of the updating entity.");return s.queryRunner.update(e.tablePath,e.values,n)}))]);case 1:return u.sent(),[2]}})})},e.prototype.executeUpdateRelations=function(){var e=this;return Promise.all(this.relationUpdateSubjects.map(function(t){return e.updateRelations(t)}))},e.prototype.updateRelations=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){if(t={},e.relationUpdates.forEach(function(e){e.relation.joinColumns.forEach(function(n){var r=e.value?e.value[n.referencedColumn.propertyName]:null;t[n.databaseName]=r})}),!(n=e.metadata.getDatabaseEntityIdMap(e.databaseEntity)))throw new Error("Internal error. Cannot get id of the updating entity.");return[2,this.queryRunner.update(e.metadata.tablePath,t,n)]})})},e.prototype.executeRemoveOperations=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return[4,r.PromiseUtils.runInSequence(this.removeSubjects,function(t){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.remove(t)];case 1:return[2,e.sent()]}})})})];case 1:return t.sent(),[2]}})})},e.prototype.remove=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return e.metadata.parentEntityMetadata?(t={},e.metadata.primaryColumns.forEach(function(n){t[n.databaseName]=n.getEntityValue(e.databaseEntity)}),[4,this.queryRunner.delete(e.metadata.parentEntityMetadata.tableName,t)]):[3,3];case 1:return r.sent(),n={},e.metadata.primaryColumns.forEach(function(t){n[t.databaseName]=t.getEntityValue(e.databaseEntity)}),[4,this.queryRunner.delete(e.metadata.tableName,n)];case 2:return r.sent(),[3,5];case 3:return[4,this.queryRunner.delete(e.metadata.tableName,e.metadata.getDatabaseEntityIdMap(e.databaseEntity))];case 4:r.sent(),r.label=5;case 5:return[2]}})})},e.prototype.executeInsertJunctionsOperations=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return e=[],this.allSubjects.forEach(function(n){n.junctionInserts.forEach(function(r){e.push(t.insertJunctions(n,r))})}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},e.prototype.insertJunctions=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u=this;return __generator(this,function(c){switch(c.label){case 0:if(r=function(e,t){return t.map(function(t){var n=t.referencedColumn.getEntityValue(e);if(!n&&t.referencedColumn.isGenerated){var r=u.insertSubjects.find(function(t){return t.entity===e});if(r&&r.generatedMap)return t.referencedColumn.getEntityValue(r.generatedMap)}return n})},i=t.relation,o=i.isManyToManyOwner?i.joinColumns:i.inverseRelation.inverseJoinColumns,!(a=r(e.entity,o)).length)throw new Error("Cannot insert object of "+e.entityTarget+" type. Looks like its not persisted yet, or cascades are not set on the relation.");return s=t.junctionEntities.map(function(e){var t=i.isManyToManyOwner?i.inverseJoinColumns:i.inverseRelation.joinColumns,o=r(e,t);if(!o)throw new Error("Cannot insert object of "+e.constructor.name+" type. Looks like its not persisted yet, or cascades are not set on the relation.");var s=i.junctionEntityMetadata.columns.map(function(e){return e.databaseName}),c=i.isOwning?a.concat(o):o.concat(a);return u.queryRunner.insert(i.junctionEntityMetadata.tablePath,n.OrmUtils.zipObject(s,c))}),[4,Promise.all(s)];case 1:return c.sent(),[2]}})})},e.prototype.executeRemoveJunctionsOperations=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return e=[],this.allSubjects.forEach(function(n){n.junctionRemoves.forEach(function(r){e.push(t.removeJunctions(n,r))})}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},e.prototype.removeJunctions=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return __generator(this,function(c){switch(c.label){case 0:return n=t.relation.junctionEntityMetadata,r=e.hasEntity?e.entity:e.databaseEntity,i=t.relation.isOwning?t.relation.joinColumns:t.relation.inverseRelation.inverseJoinColumns,o=t.relation.isOwning?t.relation.inverseJoinColumns:t.relation.inverseRelation.joinColumns,a={},i.forEach(function(e){a[e.databaseName]=e.referencedColumn.getEntityValue(r)}),s=t.junctionRelationIds.map(function(e){var t={};return o.forEach(function(n){t[n.databaseName]=n.referencedColumn.getEntityValue(e)}),u.queryRunner.delete(n.tableName,Object.assign({},t,a))}),[4,Promise.all(s)];case 1:return c.sent(),[2]}})})},e.prototype.updateSpecialColumnsInPersistedEntities=function(){this.insertSubjects.forEach(function(e){e.generatedMap&&e.metadata.generatedColumns.forEach(function(t){var n=t.getEntityValue(e.generatedMap);n&&t.setEntityValue(e.entity,n)}),e.metadata.primaryColumns.forEach(function(t){e.parentGeneratedId&&t.setEntityValue(e.entity,e.parentGeneratedId)}),e.metadata.updateDateColumn&&e.metadata.updateDateColumn.setEntityValue(e.entity,e.date),e.metadata.createDateColumn&&e.metadata.createDateColumn.setEntityValue(e.entity,e.date),e.metadata.versionColumn&&e.metadata.versionColumn.setEntityValue(e.entity,1),e.metadata.treeLevelColumn&&e.metadata.treeLevelColumn.setEntityValue(e.entity,e.treeLevel),e.metadata.columns.filter(function(e){return e.isNullable&&!e.isVirtual}).forEach(function(t){void 0===t.getEntityValue(e.entity)&&t.setEntityValue(e.entity,null)})}),this.updateSubjects.forEach(function(e){e.metadata.updateDateColumn&&e.metadata.updateDateColumn.setEntityValue(e.entity,e.date),e.metadata.versionColumn&&e.metadata.versionColumn.setEntityValue(e.entity,e.metadata.versionColumn.getEntityValue(e.entity)+1)}),this.removeSubjects.filter(function(e){return e.hasEntity}).forEach(function(e){e.metadata.primaryColumns.forEach(function(t){t.setEntityValue(e.entity,void 0)})}),this.allSubjects.filter(function(e){return e.hasEntity}).forEach(function(e){e.metadata.relationIds.forEach(function(t){t.setValue(e.entity)})})},e}(),e("SubjectOperationExecutor",a)}}}),System.register("typeorm/query-builder/transformer/PlainObjectToNewEntityTransformer",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.prototype.transform=function(e,t,n){return this.groupAndTransform(e,t,n),e},e.prototype.groupAndTransform=function(e,t,n){var r=this;n.columns.filter(function(e){return t.hasOwnProperty(e.propertyName)}).forEach(function(n){return e[n.propertyName]=t[n.propertyName]}),n.relations.filter(function(e){return t.hasOwnProperty(e.propertyName)}).forEach(function(i){var o=i.inverseEntityMetadata;if(!o)throw new Error("Relation metadata for the relation "+n.name+"#"+i.propertyName+" is missing");if(i.isManyToMany||i.isOneToMany)t[i.propertyName]instanceof Array?e[i.propertyName]=t[i.propertyName].map(function(t){var n=o.create();if(e[i.propertyName]instanceof Array){var a=e[i.propertyName].find(function(e){return e[i.propertyName]===t[i.propertyName]});a&&r.groupAndTransform(n,a,o)}return r.groupAndTransform(n,t,o),n}):e[i.propertyName]=t[i.propertyName];else if(t[i.propertyName]){var a=o.create();e[i.propertyName]&&r.groupAndTransform(a,e[i.propertyName],o),r.groupAndTransform(a,t[i.propertyName],o),e[i.propertyName]=a}else e[i.propertyName]=t[i.propertyName]})},e}(),e("PlainObjectToNewEntityTransformer",n)}}}),System.register("typeorm/query-builder/transformer/PlainObjectToDatabaseEntityTransformer",[],function(e,t){"use strict";var n,r,i;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n,r){this.plainEntity=e,this.metadata=t,this.parentLoadMapItem=n,this.relation=r}return Object.defineProperty(e.prototype,"target",{get:function(){return this.metadata.target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.metadata.getEntityIdMixedMap(this.plainEntity)},enumerable:!0,configurable:!0}),e.prototype.compareEntities=function(e,t){return this.metadata.compareEntities(e,t)},e}(),r=function(){function e(){this.loadMapItems=[]}return Object.defineProperty(e.prototype,"mainLoadMapItem",{get:function(){return this.loadMapItems.find(function(e){return!e.relation&&!e.parentLoadMapItem})},enumerable:!0,configurable:!0}),e.prototype.addLoadMap=function(e){this.loadMapItems.find(function(t){return t.target===e.target&&t.id===e.id})||this.loadMapItems.push(e)},e.prototype.fillEntities=function(e,t){var n=this;t.forEach(function(t){var r=n.loadMapItems.find(function(n){return n.target===e&&n.compareEntities(t,n.plainEntity)});r&&(r.entity=t)})},e.prototype.groupByTargetIds=function(){var e=[];return this.loadMapItems.forEach(function(t){var n=e.find(function(e){return e.target===t.target});n||(n={target:t.target,ids:[]},e.push(n)),n.ids.push(t.id)}),e},e}(),i=function(){function e(e){this.manager=e}return e.prototype.transform=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return t.checkIfObjectContainsAllPrimaryKeys(e)?(i=new r,(o=function(e,r,a,s){var u=new n(e,r,a,s);i.addLoadMap(u),r.extractRelationValuesFromEntity(e,t.relations).filter(function(e){return null!==e&&void 0!==e}).forEach(function(e){var t=e[0],n=e[1],r=e[2];return o(n,r,u,t)})})(e,t),[4,Promise.all(i.groupByTargetIds().map(function(e){return a.manager.findByIds(e.target,e.ids).then(function(t){return i.fillEntities(e.target,t)})}))]):[2,Promise.reject("Given object does not have a primary column, cannot transform it to database entity.")];case 1:return s.sent(),i.loadMapItems.forEach(function(e){e.relation&&e.entity&&e.parentLoadMapItem&&e.parentLoadMapItem.entity&&(e.relation.isManyToMany||e.relation.isOneToMany?(e.parentLoadMapItem.entity[e.relation.propertyName]||(e.parentLoadMapItem.entity[e.relation.propertyName]=[]),e.parentLoadMapItem.entity[e.relation.propertyName].push(e.entity)):e.parentLoadMapItem.entity[e.relation.propertyName]=e.entity)}),[2,i.mainLoadMapItem?i.mainLoadMapItem.entity:void 0]}})})},e}(),e("PlainObjectToDatabaseEntityTransformer",i)}}}),System.register("typeorm/error/CustomRepositoryNotFoundError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="CustomRepositoryNotFoundError",n.message="Custom repository "+(t instanceof Function?t.name:t.constructor.name)+" was not found. Did you forgot to put @EntityRepository decorator on it?",n}return __extends(t,e),t}(Error),e("CustomRepositoryNotFoundError",n)}}}),System.register("typeorm/error/CustomRepositoryDoesNotHaveEntityError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this,"Custom repository "+(t instanceof Function?t.name:t.constructor.name)+" does not have managed entity. Did you forget to specify entity for it @EntityRepository(MyEntity)? ")||this;return n.name="CustomRepositoryDoesNotHaveEntityError",n}return __extends(t,e),t}(Error),e("CustomRepositoryDoesNotHaveEntityError",n)}}}),System.register("typeorm/repository/AbstractRepository",["typeorm/error/CustomRepositoryDoesNotHaveEntityError","typeorm/index","typeorm/error/CustomRepositoryNotFoundError"],function(e,t){"use strict";var n,r,i,o;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){o=function(){function e(){}return Object.defineProperty(e.prototype,"repository",{get:function(){var e=this.getCustomRepositoryTarget(this);if(!e)throw new n.CustomRepositoryDoesNotHaveEntityError(this.constructor);return this.manager.getRepository(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeRepository",{get:function(){var e=this.getCustomRepositoryTarget(this);if(!e)throw new n.CustomRepositoryDoesNotHaveEntityError(this.constructor);return this.manager.getTreeRepository(e)},enumerable:!0,configurable:!0}),e.prototype.createQueryBuilder=function(e){var t=this.getCustomRepositoryTarget(this.constructor);if(!t)throw new n.CustomRepositoryDoesNotHaveEntityError(this.constructor);return this.manager.getRepository(t).createQueryBuilder(e)},e.prototype.createQueryBuilderFor=function(e,t){return this.getRepositoryFor(e).createQueryBuilder(t)},e.prototype.getRepositoryFor=function(e){return this.manager.getRepository(e)},e.prototype.getTreeRepositoryFor=function(e){return this.manager.getTreeRepository(e)},e.prototype.getCustomRepositoryTarget=function(e){var t=r.getMetadataArgsStorage().entityRepositories.find(function(t){return t.target===(e instanceof Function?e:e.constructor)});if(!t)throw new i.CustomRepositoryNotFoundError(e);return t.entity},e}(),e("AbstractRepository",o)}}}),System.register("typeorm/error/CustomRepositoryCannotInheritRepositoryError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this,"Custom entity repository "+(t instanceof Function?t.name:t.constructor.name)+"  cannot inherit Repository class without entity being set in the @EntityRepository decorator.")||this;return n.name="CustomRepositoryCannotInheritRepositoryError",n}return __extends(t,e),t}(Error),e("CustomRepositoryCannotInheritRepositoryError",n)}}}),System.register("typeorm/error/RepositoryNotFoundError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;r.name="RepositoryNotFoundError";var i="function"==typeof n&&n.name?n.name:n;return r.message='No repository for "'+i+'" was found. Looks like this entity is not registered in current "'+t+'" connection?',r.stack=(new Error).stack,r}return __extends(t,e),t}(Error),e("RepositoryNotFoundError",n)}}}),System.register("typeorm/error/RepositoryNotTreeError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;n.name="RepositoryNotTreeError";var r="function"==typeof t&&t.name?t.name:t;return n.message='Repository of the "'+r+'" class is not a TreeRepository. Try to use @ClosureEntity decorator instead of @Entity.',n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("RepositoryNotTreeError",n)}}}),System.register("typeorm/repository/RepositoryFactory",["typeorm/repository/TreeRepository","typeorm/repository/Repository","typeorm/driver/mongodb/MongoDriver","typeorm/repository/MongoRepository"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(){}return e.prototype.create=function(e,t,a){if(t.isClosure){s=new n.TreeRepository;return Object.assign(s,{manager:e,metadata:t,queryRunner:a}),s}var s=void 0;return s=e.connection.driver instanceof i.MongoDriver?new o.MongoRepository:new r.Repository,Object.assign(s,{manager:e,metadata:t,queryRunner:a}),s},e}(),e("RepositoryFactory",a)}}}),System.register("typeorm/error/TreeRepositoryNotSupportedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="TreeRepositoryNotSupportedError",n.message="Tree repositories are not supported in "+t.options.type+" driver.",n}return __extends(t,e),t}(Error),e("TreeRepositoryNotSupportedError",n)}}}),System.register("typeorm/query-builder/QueryPartialEntity",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/entity-manager/EntityManager",["typeorm/error/QueryRunnerProviderAlreadyReleasedError","typeorm/error/NoNeedToReleaseEntityManagerError","typeorm/repository/TreeRepository","typeorm/repository/Repository","typeorm/find-options/FindOptionsUtils","typeorm/persistence/SubjectBuilder","typeorm/persistence/SubjectOperationExecutor","typeorm/query-builder/transformer/PlainObjectToNewEntityTransformer","typeorm/query-builder/transformer/PlainObjectToDatabaseEntityTransformer","typeorm/error/CustomRepositoryNotFoundError","typeorm/index","typeorm/repository/AbstractRepository","typeorm/error/CustomRepositoryCannotInheritRepositoryError","typeorm/driver/mongodb/MongoDriver","typeorm/error/RepositoryNotFoundError","typeorm/error/RepositoryNotTreeError","typeorm/repository/RepositoryFactory","typeorm/error/TreeRepositoryNotSupportedError"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d,m,f,h,y,g,v,b,E;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e},function(e){d=e},function(e){m=e},function(e){f=e},function(e){h=e},function(e){y=e},function(e){g=e},function(e){v=e},function(e){b=e}],execute:function(){E=function(){function e(e,t){this.repositories=[],this.connection=e,t&&(this.queryRunner=t,Object.assign(this.queryRunner,{manager:this}))}return e.prototype.transaction=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,i,o,a;return __generator(this,function(s){switch(s.label){case 0:if(this.connection.driver instanceof h.MongoDriver)throw new Error("Transactions aren't supported by MongoDB.");if(this.queryRunner&&this.queryRunner.isReleased)throw new n.QueryRunnerProviderAlreadyReleasedError;if(this.queryRunner&&this.queryRunner.isTransactionActive)throw new Error("Cannot start transaction because its already started");t=this.queryRunner||this.connection.createQueryRunner("master"),r=this.connection.createEntityManager(t),s.label=1;case 1:return s.trys.push([1,5,10,13]),[4,t.startTransaction()];case 2:return s.sent(),[4,e(r)];case 3:return i=s.sent(),[4,t.commitTransaction()];case 4:return s.sent(),[2,i];case 5:o=s.sent(),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,t.rollbackTransaction()];case 7:return s.sent(),[3,9];case 8:return a=s.sent(),[3,9];case 9:throw o;case 10:return this.queryRunner?[3,12]:[4,t.release()];case 11:s.sent(),s.label=12;case 12:return[7];case 13:return[2]}})})},e.prototype.query=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.connection.query(e,t,this.queryRunner)]})})},e.prototype.createQueryBuilder=function(e,t,n){return t?this.connection.createQueryBuilder(e,t,n||this.queryRunner):this.connection.createQueryBuilder(e||this.queryRunner)},e.prototype.hasId=function(e,t){var n=2===arguments.length?e:e.constructor,r=2===arguments.length?t:e;return this.connection.getMetadata(n).hasId(r)},e.prototype.getId=function(e,t){var n=2===arguments.length?e:e.constructor,r=2===arguments.length?t:e;return this.connection.getMetadata(n).getEntityIdMixedMap(r)},e.prototype.create=function(e,t){var n=this,r=this.connection.getMetadata(e);return t?t instanceof Array?t.map(function(t){return n.create(e,t)}):this.merge(e,r.create(),t):r.create()},e.prototype.merge=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this.connection.getMetadata(e),o=new c.PlainObjectToNewEntityTransformer;return n.forEach(function(e){return o.transform(t,e,i)}),t},e.prototype.preload=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){switch(o.label){case 0:return n=this.connection.getMetadata(e),r=new l.PlainObjectToDatabaseEntityTransformer(this.connection.manager),[4,r.transform(t,n)];case 1:return(i=o.sent())?[2,this.merge(e,i,t)]:[2,void 0]}})})},e.prototype.save=function(e,t,n){var r=this,i=arguments.length>1&&(e instanceof Function||"string"==typeof e)?e:void 0,o=i?t:e,a=i?n:t;return o instanceof Array&&0===o.length?Promise.resolve(o):Promise.resolve().then(function(){return __awaiter(r,void 0,void 0,function(){var e,t,n,r,c,l,p,d,m,f,h,y=this;return __generator(this,function(g){switch(g.label){case 0:e=this.queryRunner||this.connection.createQueryRunner("master"),t=this.connection.createEntityManager(e),a&&a.data&&Object.assign(e.data,a.data),g.label=1;case 1:return g.trys.push([1,,18,21]),n=[],o instanceof Array?[4,Promise.all(o.map(function(r){return __awaiter(y,void 0,void 0,function(){var o,a,c,l;return __generator(this,function(p){switch(p.label){case 0:return o=i||r.constructor,a=this.connection.getMetadata(o),c=new s.SubjectBuilder(this.connection,e),[4,c.persist(r,a)];case 1:return p.sent(),l=new u.SubjectOperationExecutor(this.connection,t,e,c.operateSubjects),n.push(l),[2]}})})}))]:[3,3];case 2:return g.sent(),[3,5];case 3:return r=i||o.constructor,c=this.connection.getMetadata(r),l=new s.SubjectBuilder(this.connection,e),[4,l.persist(o,c)];case 4:g.sent(),p=new u.SubjectOperationExecutor(this.connection,t,e,l.operateSubjects),n.push(p),g.label=5;case 5:if(!(d=n.filter(function(e){return e.areExecutableOperations()})).length)return[3,17];m=!1,g.label=6;case 6:return g.trys.push([6,12,,17]),e.isTransactionActive?[3,8]:(m=!0,[4,e.startTransaction()]);case 7:g.sent(),g.label=8;case 8:return[4,Promise.all(d.map(function(e){return e.execute()}))];case 9:return g.sent(),!0!==m?[3,11]:[4,e.commitTransaction()];case 10:g.sent(),g.label=11;case 11:return[3,17];case 12:if(f=g.sent(),!m)return[3,16];g.label=13;case 13:return g.trys.push([13,15,,16]),[4,e.rollbackTransaction()];case 14:return g.sent(),[3,16];case 15:return h=g.sent(),[3,16];case 16:throw f;case 17:return[3,21];case 18:return this.queryRunner?[3,20]:[4,e.release()];case 19:g.sent(),g.label=20;case 20:return[7];case 21:return[2,o]}})})})},e.prototype.insert=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.createQueryBuilder().insert().into(e).values(t).execute()];case 1:return n.sent(),[2]}})})},e.prototype.update=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.createQueryBuilder().update(e).set(n).where(t).execute()];case 1:return r.sent(),[2]}})})},e.prototype.updateById=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,this.createQueryBuilder().update(e).set(n).whereInIds(t).execute()];case 1:return r.sent(),[2]}})})},e.prototype.remove=function(e,t,n){var r=this,i=arguments.length>1&&(e instanceof Function||"string"==typeof e)?e:void 0,o=i?t:e,a=i?n:t;return o instanceof Array&&0===o.length?Promise.resolve(o):Promise.resolve().then(function(){return __awaiter(r,void 0,void 0,function(){var e,t,n,r,c,l,p,d,m,f,h,y=this;return __generator(this,function(g){switch(g.label){case 0:e=this.queryRunner||this.connection.createQueryRunner("master"),t=this.connection.createEntityManager(e),a&&a.data&&Object.assign(e.data,a.data),g.label=1;case 1:return g.trys.push([1,,18,21]),n=[],o instanceof Array?[4,Promise.all(o.map(function(r){return __awaiter(y,void 0,void 0,function(){var o,a,c,l;return __generator(this,function(p){switch(p.label){case 0:return o=i||r.constructor,a=this.connection.getMetadata(o),c=new s.SubjectBuilder(this.connection,e),[4,c.remove(r,a)];case 1:return p.sent(),l=new u.SubjectOperationExecutor(this.connection,t,e,c.operateSubjects),n.push(l),[2]}})})}))]:[3,3];case 2:return g.sent(),[3,5];case 3:return r=i||o.constructor,c=this.connection.getMetadata(r),l=new s.SubjectBuilder(this.connection,e),[4,l.remove(o,c)];case 4:g.sent(),p=new u.SubjectOperationExecutor(this.connection,t,e,l.operateSubjects),n.push(p),g.label=5;case 5:if(!(d=n.filter(function(e){return e.areExecutableOperations()})).length)return[3,17];m=!1,g.label=6;case 6:return g.trys.push([6,12,,17]),e.isTransactionActive?[3,8]:(m=!0,[4,e.startTransaction()]);case 7:g.sent(),g.label=8;case 8:return[4,Promise.all(d.map(function(e){return e.execute()}))];case 9:return g.sent(),!0!==m?[3,11]:[4,e.commitTransaction()];case 10:g.sent(),g.label=11;case 11:return[3,17];case 12:if(f=g.sent(),!m)return[3,16];g.label=13;case 13:return g.trys.push([13,15,,16]),[4,e.rollbackTransaction()];case 14:return g.sent(),[3,16];case 15:return h=g.sent(),[3,16];case 16:throw f;case 17:return[3,21];case 18:return this.queryRunner?[3,20]:[4,e.release()];case 19:g.sent(),g.label=20;case 20:return[7];case 21:return[2,o]}})})})},e.prototype.delete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.createQueryBuilder().delete().from(e).where(t).execute()];case 1:return n.sent(),[2]}})})},e.prototype.deleteById=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.createQueryBuilder().delete().from(e).whereInIds(t).execute()];case 1:return n.sent(),[2]}})})},e.prototype.removeById=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.deleteById(e,t,n)]})})},e.prototype.removeByIds=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.deleteById(e,t,n)]})})},e.prototype.count=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n=this.connection.getMetadata(e),r=this.createQueryBuilder(e,a.FindOptionsUtils.extractFindManyOptionsAlias(t)||n.name),[2,a.FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(r,t).getCount()]})})},e.prototype.find=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n=this.connection.getMetadata(e),r=this.createQueryBuilder(e,a.FindOptionsUtils.extractFindManyOptionsAlias(t)||n.name),this.joinEagerRelations(r,r.alias,n),[2,a.FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(r,t).getMany()]})})},e.prototype.findAndCount=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n=this.connection.getMetadata(e),r=this.createQueryBuilder(e,a.FindOptionsUtils.extractFindManyOptionsAlias(t)||n.name),this.joinEagerRelations(r,r.alias,n),[2,a.FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(r,t).getManyAndCount()]})})},e.prototype.findByIds=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i;return __generator(this,function(o){return t.length?(r=this.connection.getMetadata(e),i=this.createQueryBuilder(e,a.FindOptionsUtils.extractFindManyOptionsAlias(n)||r.name),a.FindOptionsUtils.applyFindManyOptionsOrConditionsToQueryBuilder(i,n),t=t.map(function(e){return r.hasMultiplePrimaryKeys||e instanceof Object?e:r.createEntityIdMap([e])}),this.joinEagerRelations(i,i.alias,r),[2,i.andWhereInIds(t).getMany()]):[2,Promise.resolve([])]})})},e.prototype.findOne=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n=this.connection.getMetadata(e),r=this.createQueryBuilder(e,a.FindOptionsUtils.extractFindOneOptionsAlias(t)||n.name),this.joinEagerRelations(r,r.alias,n),[2,a.FindOptionsUtils.applyFindOneOptionsOrConditionsToQueryBuilder(r,t).getOne()]})})},e.prototype.findOneById=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i;return __generator(this,function(o){if(r=this.connection.getMetadata(e),i=this.createQueryBuilder(e,a.FindOptionsUtils.extractFindOneOptionsAlias(n)||r.name),r.hasMultiplePrimaryKeys&&!(t instanceof Object))throw new Error("You have multiple primary keys in your entity, to use findOneById with multiple primary keys please provide complete object with all entity ids, like this: { firstKey: value, secondKey: value }");return r.hasMultiplePrimaryKeys||t instanceof Object||(t=r.createEntityIdMap([t])),this.joinEagerRelations(i,i.alias,r),a.FindOptionsUtils.applyFindOneOptionsOrConditionsToQueryBuilder(i,n),[2,i.andWhereInIds([t]).getOne()]})})},e.prototype.clear=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:t=this.connection.getMetadata(e),n=this.queryRunner||this.connection.createQueryRunner("master"),r.label=1;case 1:return r.trys.push([1,,3,6]),[4,n.truncate(t.tablePath)];case 2:return[2,r.sent()];case 3:return this.queryRunner?[3,5]:[4,n.release()];case 4:r.sent(),r.label=5;case 5:return[7];case 6:return[2]}})})},e.prototype.getRepository=function(e){if(!this.connection.hasMetadata(e))throw new y.RepositoryNotFoundError(this.connection.name,e);var t=this.connection.getMetadata(e),n=this.repositories.find(function(e){return e.metadata===t});if(n)return n;var r=(new v.RepositoryFactory).create(this,t,this.queryRunner);return this.repositories.push(r),r},e.prototype.getTreeRepository=function(e){if(!1===this.connection.driver.treeSupport)throw new b.TreeRepositoryNotSupportedError(this.connection.driver);var t=this.getRepository(e);if(!(t instanceof i.TreeRepository))throw new g.RepositoryNotTreeError(e);return t},e.prototype.getMongoRepository=function(e){return this.connection.getMongoRepository(e)},e.prototype.getCustomRepository=function(e){var t=d.getMetadataArgsStorage().entityRepositories.find(function(t){return t.target===(e instanceof Function?e:e.constructor)});if(!t)throw new p.CustomRepositoryNotFoundError(e);var n=t.entity?this.connection.getMetadata(t.entity):void 0,r=new t.target(this,n);if(r instanceof m.AbstractRepository&&(r.manager||(r.manager=this)),r instanceof o.Repository){if(!n)throw new f.CustomRepositoryCannotInheritRepositoryError(e);r.manager=this,r.metadata=n}return r},e.prototype.release=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){if(!this.queryRunner)throw new r.NoNeedToReleaseEntityManagerError;return[2,this.queryRunner.release()]})})},e.prototype.joinEagerRelations=function(e,t,n){var r=this;n.eagerRelations.forEach(function(n){var i=t+"_"+n.propertyPath.replace(".","_");e.leftJoinAndSelect(t+"."+n.propertyPath,i),r.joinEagerRelations(e,i,n.inverseEntityMetadata)})},e}(),e("EntityManager",E)}}}),System.register("typeorm/driver/InsertResult",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/sqlite-abstract/AbstractSqliteQueryRunner",["typeorm/error/TransactionAlreadyStartedError","typeorm/error/TransactionNotStartedError","typeorm/schema-builder/schema/TableColumn","typeorm/metadata/ColumnMetadata","typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableIndex","typeorm/schema-builder/schema/TableForeignKey","typeorm/schema-builder/schema/TablePrimaryKey","typeorm/util/RandomGenerator"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e}],execute:function(){p=function(){function e(e){this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.sqlMemoryMode=!1,this.sqlsInMemory=[]}return e.prototype.connect=function(){return Promise.resolve(this.driver.databaseConnection)},e.prototype.release=function(){return Promise.resolve()},e.prototype.startTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(this.isTransactionActive)throw new n.TransactionAlreadyStartedError;return this.isTransactionActive=!0,[4,this.query("BEGIN TRANSACTION")];case 1:return e.sent(),[2]}})})},e.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("COMMIT")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.rollbackTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("ROLLBACK")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.query=function(e,t){throw new Error("Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers")},e.prototype.stream=function(e,t,n,r){throw new Error("Stream is not supported by sqlite driver.")},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers")})})},e.prototype.update=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return r=this.parametrize(t).join(", "),i=this.parametrize(n,Object.keys(t).length).join(" AND "),o='UPDATE "'+e+'" SET '+r+" "+(i?" WHERE "+i:""),a=Object.keys(t).map(function(e){return t[e]}),s=Object.keys(n).map(function(e){return n[e]}),u=a.concat(s),[4,this.query(o,u)];case 1:return c.sent(),[2]}})})},e.prototype.delete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o;return __generator(this,function(a){switch(a.label){case 0:return r="string"==typeof t?t:this.parametrize(t).join(" AND "),i=t instanceof Object?Object.keys(t).map(function(e){return t[e]}):n,o='DELETE FROM "'+e+'" WHERE '+r,[4,this.query(o,i)];case 1:return a.sent(),[2]}})})},e.prototype.insertIntoClosureTable=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i,o;return __generator(this,function(a){switch(a.label){case 0:return i="",i=r?'INSERT INTO "'+e+'"("ancestor", "descendant", "level") SELECT "ancestor", '+t+', "level" + 1 FROM "'+e+'" WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t+", 1":'INSERT INTO "'+e+'"("ancestor", "descendant") SELECT "ancestor", '+t+' FROM "'+e+'" WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t,[4,this.query(i)];case 1:return a.sent(),r?[4,this.query("SELECT MAX(level) as level FROM "+e+" WHERE descendant = "+n)]:[3,3];case 2:return o=a.sent(),[2,o&&o[0]&&o[0].level?parseInt(o[0].level)+1:1];case 3:return[2,-1]}})})},e.prototype.getTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.getTables([e])];case 1:return t=n.sent(),[2,t.length>0?t[0]:void 0]}})})},e.prototype.getTables=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r=this;return __generator(this,function(o){switch(o.label){case 0:return e&&e.length?(t=e.map(function(e){return"'"+e+"'"}).join(", "),[4,this.query("SELECT * FROM sqlite_master WHERE type = 'table' AND name IN ("+t+")")]):[2,[]];case 1:return(n=o.sent())&&n.length?[2,Promise.all(n.map(function(e){return __awaiter(r,void 0,void 0,function(){var t,n,r,o,p,d,m,f,h,y,g,v=this;return __generator(this,function(b){switch(b.label){case 0:return t=new a.Table(e.name),[4,Promise.all([this.query('PRAGMA table_info("'+e.name+'")'),this.query('PRAGMA index_list("'+e.name+'")'),this.query('PRAGMA foreign_key_list("'+e.name+'")')])];case 1:return n=b.sent(),r=n[0],o=n[1],p=n[2],d=void 0,-1!==(m=e.sql).indexOf("AUTOINCREMENT")&&(d=m.substr(0,m.indexOf("AUTOINCREMENT")),f=d.lastIndexOf(","),h=d.lastIndexOf("("),-1!==f?(d=d.substr(f),d=d.substr(0,d.lastIndexOf('"')),d=d.substr(d.indexOf('"')+1)):-1!==h&&(d=d.substr(h),d=d.substr(0,d.lastIndexOf('"')),d=d.substr(d.indexOf('"')+1))),t.columns=r.map(function(n){var r=new i.TableColumn;r.name=n.name,r.type=n.type.toLowerCase(),r.default=null!==n.dflt_value&&void 0!==n.dflt_value?n.dflt_value:void 0,r.isNullable=0===n.notnull,r.isPrimary=n.pk>0,r.comment="",r.isGenerated=d===n.name,r.isGenerated&&(r.generationStrategy="increment");var o=r.type.indexOf("(");if(-1!==o){var a=r.type.substr(0,o);if(v.driver.withLengthColumnTypes.find(function(e){return e===a})){var s=parseInt(r.type.substring(o+1,r.type.length-1));s&&(r.length=s.toString(),r.type=a)}}var c=p.filter(function(e){return e.from===n.name}).map(function(t){var n=e.name+"_"+[t.from].join("_")+"_"+t.table+"_"+[t.to].join("_"),r="fk_"+l.RandomGenerator.sha1(n).substr(0,27);return new u.TableForeignKey(r,[t.from],[t.to],t.table,t.on_delete)});return t.addForeignKeys(c),r}),[4,Promise.all(o.filter(function(e){return"pk"===e.origin}).map(function(e){return __awaiter(v,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.query('PRAGMA index_info("'+e.name+'")')];case 1:return n=i.sent(),(r=n.map(function(e){return e.name})).forEach(function(n){t.primaryKeys.push(new c.TablePrimaryKey(e.name,n))}),[2]}})})}))];case 2:return b.sent(),y=o.filter(function(e){return"pk"!==e.origin&&!t.foreignKeys.find(function(t){return t.name===e.name})&&!t.primaryKeys.find(function(t){return t.name===e.name})}).map(function(e){return e.name}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(n){return __awaiter(v,void 0,void 0,function(){var r,i,a,u;return __generator(this,function(c){switch(c.label){case 0:return r=o.find(function(e){return e.name===n}),[4,this.query('PRAGMA index_info("'+r.name+'")')];case 1:return i=c.sent(),a=i.sort(function(e,t){return parseInt(e.seqno)-parseInt(t.seqno)}).map(function(e){return e.name}),"sqlite_autoindex"===r.name.substr(0,"sqlite_autoindex".length)?(1===r.unique&&a.forEach(function(e){var n=t.columns.find(function(t){return t.name===e});n&&(n.isUnique=!0)}),[2,Promise.resolve(void 0)]):(u="1"===r.unique||1===r.unique,[2,new s.TableIndex(e.name,r.name,a,u)])}})})}),[4,Promise.all(y)];case 3:return g=b.sent(),t.indices=g.filter(function(e){return!!e}),[2,t]}})})}))]:[2,[]]}})})},e.prototype.hasDatabase=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve(!1)]})})},e.prototype.hasTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return t="SELECT * FROM sqlite_master WHERE type = 'table' AND name = '"+e+"'",[4,this.query(t)];case 1:return n=r.sent(),[2,!!n.length]}})})},e.prototype.createDatabase=function(e){return Promise.resolve([])},e.prototype.createSchema=function(e){return Promise.resolve([])},e.prototype.createTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i=this;return __generator(this,function(o){switch(o.label){case 0:return t=e.columns.map(function(e){return i.buildCreateColumnSql(e)}).join(", "),n='CREATE TABLE "'+e.name+'" ('+t,(r=e.columns.filter(function(e){return e.isPrimary&&!e.isGenerated})).length>0&&(n+=", PRIMARY KEY("+r.map(function(e){return""+e.name}).join(", ")+")"),n+=")",[4,this.query(n)];case 1:return o.sent(),[2]}})})},e.prototype.dropTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return t='DROP TABLE "'+e+'"',[4,this.query(t)];case 1:return n.sent(),[2]}})})},e.prototype.hasColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return n='PRAGMA table_info("'+e+'")',[4,this.query(n)];case 1:return r=i.sent(),[2,!!r.find(function(e){return e.name===t})]}})})},e.prototype.addColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.getTableSchema(e)];case 1:return n=i.sent(),(r=n.clone()).addColumns([t]),[4,this.recreateTable(r,n)];case 2:return i.sent(),[2]}})})},e.prototype.addColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.getTableSchema(e)];case 1:return n=i.sent(),(r=n.clone()).addColumns(t),[4,this.recreateTable(r,n)];case 2:return i.sent(),[2]}})})},e.prototype.renameColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,o,s;return __generator(this,function(u){switch(u.label){case 0:return r=void 0,e instanceof a.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=u.sent(),u.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(o=void 0,!(o=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return s=void 0,n instanceof i.TableColumn?s=n:(s=o.clone()).name=n,[2,this.changeColumn(r,o,s)]}})})},e.prototype.changeColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){switch(o.label){case 0:return n=void 0,e instanceof a.Table?(n=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:n=o.sent(),o.label=3;case 3:if(!n)throw new Error("Table "+e+" was not found.");if(r=void 0,!(r=t instanceof i.TableColumn?t:n.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return[2,this.recreateTable(n)]}})})},e.prototype.changeColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.recreateTable(e)]})})},e.prototype.dropColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.dropColumns(e,[t])]})})},e.prototype.dropColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){return(n=e.clone()).removeColumns(t),[2,this.recreateTable(n)]})})},e.prototype.updatePrimaryKeys=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.recreateTable(e)]})})},e.prototype.createForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.createForeignKeys(e,[t])]})})},e.prototype.createForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.getTableSchema(e)];case 1:return n=i.sent(),(r=n.clone()).addForeignKeys(t),[2,this.recreateTable(r)]}})})},e.prototype.dropForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.dropForeignKeys(e,[t])]})})},e.prototype.dropForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.getTableSchema(e)];case 1:return n=i.sent(),(r=n.clone()).removeForeignKeys(t),[2,this.recreateTable(r)]}})})},e.prototype.createIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return n=t.columnNames.map(function(e){return'"'+e+'"'}).join(","),r="CREATE "+(t.isUnique?"UNIQUE ":"")+'INDEX "'+t.name+'" ON "'+(e instanceof a.Table?e.name:e)+'"('+n+")",[4,this.query(r)];case 1:return i.sent(),[2]}})})},e.prototype.dropIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return e='DROP INDEX "'+t+'"',[4,this.query(e)];case 1:return n.sent(),[2]}})})},e.prototype.truncate=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.query('DELETE FROM "'+e+'"')];case 1:return t.sent(),[2]}})})},e.prototype.clearDatabase=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r,i=this;return __generator(this,function(o){switch(o.label){case 0:return[4,this.query("PRAGMA foreign_keys = OFF;")];case 1:return o.sent(),[4,this.startTransaction()];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,7,12,14]),e="select 'drop table \"' || name || '\";' as query from sqlite_master where type = 'table' and name != 'sqlite_sequence'",[4,this.query(e)];case 4:return t=o.sent(),[4,Promise.all(t.map(function(e){return i.query(e.query)}))];case 5:return o.sent(),[4,this.commitTransaction()];case 6:return o.sent(),[3,14];case 7:n=o.sent(),o.label=8;case 8:return o.trys.push([8,10,,11]),[4,this.rollbackTransaction()];case 9:return o.sent(),[3,11];case 10:return r=o.sent(),[3,11];case 11:throw n;case 12:return[4,this.query("PRAGMA foreign_keys = ON;")];case 13:return o.sent(),[7];case 14:return[2]}})})},e.prototype.enableSqlMemory=function(){this.sqlMemoryMode=!0},e.prototype.disableSqlMemory=function(){this.sqlsInMemory=[],this.sqlMemoryMode=!1},e.prototype.getMemorySql=function(){return this.sqlsInMemory},e.prototype.parametrize=function(e,t){return void 0===t&&(t=0),Object.keys(e).map(function(e,n){return'"'+e+'"=$'+(t+n+1)})},e.prototype.buildCreateColumnSql=function(e){var t='"'+e.name+'"';return e instanceof o.ColumnMetadata?t+=" "+this.driver.normalizeType(e):t+=" "+this.connection.driver.createFullType(e),e.collation&&(t+=" COLLATE "+e.collation),!0!==e.isNullable&&(t+=" NOT NULL"),!0===e.isUnique&&(t+=" UNIQUE"),!0===e.isGenerated&&"increment"===e.generationStrategy?t+=" PRIMARY KEY AUTOINCREMENT":!0===e.isPrimary&&!0===e.isGenerated&&(t+=" PRIMARY KEY"),void 0!==e.default&&null!==e.default&&(t+=" DEFAULT ("+e.default+")"),t},e.prototype.recreateTable=function(e,t,n){return void 0===n&&(n=!0),__awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,p,d=this;return __generator(this,function(m){switch(m.label){case 0:return r=e.columns.map(function(e){return d.buildCreateColumnSql(e)}).join(", "),i=e.columns.map(function(e){return'"'+e.name+'"'}).join(", "),o='CREATE TABLE "temporary_'+e.name+'" ('+r,e.foreignKeys.forEach(function(e){var t=e.columnNames.map(function(e){return'"'+e+'"'}).join(", "),n=e.referencedColumnNames.map(function(e){return'"'+e+'"'}).join(", ");o+=", FOREIGN KEY("+t+') REFERENCES "'+e.referencedTableName+'"('+n+")",e.onDelete&&(o+=" ON DELETE "+e.onDelete)}),(a=e.columns.filter(function(e){return e.isPrimary&&!e.isGenerated})).length>0&&(o+=", PRIMARY KEY("+a.map(function(e){return""+e.name}).join(", ")+")"),o+=")",[4,this.query(o)];case 1:return m.sent(),s=t?t.columns.map(function(e){return'"'+e.name+'"'}).join(", "):i,n?(u='INSERT INTO "temporary_'+e.name+'"('+s+") SELECT "+s+' FROM "'+e.name+'"',[4,this.query(u)]):[3,3];case 2:m.sent(),m.label=3;case 3:return c='DROP TABLE "'+e.name+'"',[4,this.query(c)];case 4:return m.sent(),l='ALTER TABLE "temporary_'+e.name+'" RENAME TO "'+e.name+'"',[4,this.query(l)];case 5:return m.sent(),p=e.indices.map(function(t){return d.createIndex(e.name,t)}),[4,Promise.all(p)];case 6:return m.sent(),[2]}})})},e.prototype.getTableSchema=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return e instanceof a.Table?[2,e]:[3,1];case 1:return[4,this.getTable(e)];case 2:if(!(t=n.sent()))throw new Error("Table named "+e+" was not found in the database.");return[2,t]}})})},e}(),e("AbstractSqliteQueryRunner",p)}}}),System.register("typeorm/schema-builder/RdbmsSchemaBuilder",["typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableColumn","typeorm/schema-builder/schema/TableForeignKey","typeorm/schema-builder/schema/TableIndex","typeorm/schema-builder/schema/TablePrimaryKey","typeorm/util/PromiseUtils"],function(e,t){"use strict";var n,r,i,o,a,s,u;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e}],execute:function(){u=function(){function e(e){this.connection=e}return e.prototype.build=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r;return __generator(this,function(i){switch(i.label){case 0:return e=this,[4,this.connection.createQueryRunner("master")];case 1:return e.queryRunner=i.sent(),[4,this.createNewDatabases()];case 2:return i.sent(),[4,this.queryRunner.startTransaction()];case 3:i.sent(),i.label=4;case 4:return i.trys.push([4,10,15,17]),t=this,[4,this.loadTableSchemas()];case 5:return t.tables=i.sent(),[4,this.executeSchemaSyncOperationsInProperOrder()];case 6:return i.sent(),this.connection.queryResultCache?[4,this.connection.queryResultCache.synchronize(this.queryRunner)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[4,this.queryRunner.commitTransaction()];case 9:return i.sent(),[3,17];case 10:n=i.sent(),i.label=11;case 11:return i.trys.push([11,13,,14]),[4,this.queryRunner.rollbackTransaction()];case 12:return i.sent(),[3,14];case 13:return r=i.sent(),[3,14];case 14:throw n;case 15:return[4,this.queryRunner.release()];case 16:return i.sent(),[7];case 17:return[2]}})})},e.prototype.log=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=this,[4,this.connection.createQueryRunner("master")];case 1:e.queryRunner=n.sent(),n.label=2;case 2:return n.trys.push([2,,8,10]),[4,this.createNewDatabases()];case 3:return n.sent(),t=this,[4,this.loadTableSchemas()];case 4:return t.tables=n.sent(),this.queryRunner.enableSqlMemory(),[4,this.executeSchemaSyncOperationsInProperOrder()];case 5:return n.sent(),this.connection.queryResultCache?[4,this.connection.queryResultCache.synchronize(this.queryRunner)]:[3,7];case 6:n.sent(),n.label=7;case 7:return[2,this.queryRunner.getMemorySql()];case 8:return this.queryRunner.disableSqlMemory(),[4,this.queryRunner.release()];case 9:return n.sent(),[7];case 10:return[2]}})})},e.prototype.loadTableSchemas=function(){var e=this.entityToSyncMetadatas.map(function(e){return e.tablePath});return this.queryRunner.getTables(e)},Object.defineProperty(e.prototype,"entityToSyncMetadatas",{get:function(){return this.connection.entityMetadatas.filter(function(e){return!e.skipSync&&"single-table-child"!==e.tableType})},enumerable:!0,configurable:!0}),e.prototype.createNewDatabases=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return e=[],this.connection.entityMetadatas.forEach(function(t){t.database&&-1===e.indexOf(t.database)&&e.push(t.database)}),[4,Promise.all(e.map(function(e){return t.queryRunner.createDatabase(e)}))];case 1:return n.sent(),[2]}})})},e.prototype.executeSchemaSyncOperationsInProperOrder=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=[],this.connection.entityMetadatas.filter(function(e){return!!e.schemaPath}).forEach(function(t){e.find(function(e){return e===t.schemaPath})||e.push(t.schemaPath)}),[4,this.queryRunner.createSchema(e)];case 1:return t.sent(),[4,this.dropOldForeignKeys()];case 2:return t.sent(),[4,this.createNewTables()];case 3:return t.sent(),[4,this.dropRemovedColumns()];case 4:return t.sent(),[4,this.addNewColumns()];case 5:return t.sent(),[4,this.updateExistColumns()];case 6:return t.sent(),[4,this.updatePrimaryKeys()];case 7:return t.sent(),[4,this.createIndices()];case 8:return t.sent(),[4,this.createForeignKeys()];case 9:return t.sent(),[2]}})})},e.prototype.dropOldForeignKeys=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return[4,s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,n;return __generator(this,function(r){switch(r.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName}))?0===(n=e.foreignKeys.filter(function(e){return!t.foreignKeys.find(function(t){return t.name===e.name})})).length?[2]:(this.connection.logger.logSchemaBuild("dropping old foreign keys of "+e.name+": "+n.map(function(e){return e.name}).join(", ")),e.removeForeignKeys(n),[4,this.queryRunner.dropForeignKeys(e,n)]):[2];case 1:return r.sent(),[2]}})})})];case 1:return t.sent(),[2]}})})},e.prototype.createNewTables=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return[4,s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,r;return __generator(this,function(i){switch(i.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName&&((!t.schema||e.schema===t.schema)&&(!t.database||e.database===t.database))}))?[2]:(this.connection.logger.logSchemaBuild("creating a new table: "+t.tableName),r=new n.Table(t.tableName,this.metadataColumnsToTableColumns(t.columns),!0,t.engine,t.database,t.schema),this.tables.push(r),[4,this.queryRunner.createTable(r)]);case 1:return i.sent(),[2]}})})})];case 1:return t.sent(),[2]}})})},e.prototype.dropRemovedColumns=function(){var e=this;return s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,n,r=this;return __generator(this,function(i){switch(i.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName}))?0===(n=e.columns.filter(function(e){return!t.columns.find(function(t){return t.databaseName===e.name})})).length?[2]:[4,Promise.all(n.map(function(e){return r.dropColumnReferencedForeignKeys(t.tableName,e.name)}))]:[2];case 1:return i.sent(),[4,Promise.all(n.map(function(e){return r.dropColumnReferencedIndices(t.tableName,e.name)}))];case 2:return i.sent(),this.connection.logger.logSchemaBuild("columns dropped in "+e.name+": "+n.map(function(e){return e.name}).join(", ")),e.removeColumns(n),e.removePrimaryKeysOfColumns(n),[4,this.queryRunner.dropColumns(e,n)];case 3:return i.sent(),[2]}})})})},e.prototype.addNewColumns=function(){var e=this;return s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,n,r;return __generator(this,function(i){switch(i.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName}))?0===(n=t.columns.filter(function(t){return!e.columns.find(function(e){return e.name===t.databaseName})})).length?[2]:(this.connection.logger.logSchemaBuild("new columns added: "+n.map(function(e){return e.databaseName}).join(", ")),r=this.metadataColumnsToTableColumns(n),[4,this.queryRunner.addColumns(e,r)]):[2];case 1:return i.sent(),e.addColumns(r),[2]}})})})},e.prototype.updateExistColumns=function(){var e=this;return s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,n,i,o,a,s=this;return __generator(this,function(u){switch(u.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName}))?0===(n=e.findChangedColumns(this.connection.driver,t.columns)).length?[2]:(this.connection.logger.logSchemaBuild("columns changed in "+e.name+". updating: "+n.map(function(e){return e.name}).join(", ")),i=n.filter(function(e){return!!t.columns.find(function(t){return t.databaseName===e.name})}).map(function(e){return s.dropColumnReferencedForeignKeys(t.tableName,e.name)}),[4,Promise.all(i)]):[2];case 1:return u.sent(),o=n.filter(function(e){return!!t.columns.find(function(t){return t.databaseName===e.name})}).map(function(e){return s.dropColumnReferencedIndices(t.tableName,e.name)}),[4,Promise.all(o)];case 2:return u.sent(),a=n.map(function(n){var i=t.columns.find(function(e){return e.databaseName===n.name}),o=r.TableColumn.create(i,s.connection.driver.normalizeType(i),s.connection.driver.normalizeDefault(i),s.connection.driver.getColumnLength(i));return e.replaceColumn(n,o),{newColumn:o,oldColumn:n}}),[2,this.queryRunner.changeColumns(e,a)]}})})})},e.prototype.updatePrimaryKeys=function(){var e=this;return s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,n,r,i;return __generator(this,function(o){switch(o.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName&&!e.justCreated}))?(n=t.columns.filter(function(e){return e.isPrimary}),r=n.filter(function(t){return!e.primaryKeys.find(function(e){return e.columnName===t.databaseName})}).map(function(e){return new a.TablePrimaryKey("",e.databaseName)}),i=e.primaryKeys.filter(function(e){return!n.find(function(t){return t.databaseName===e.columnName})}),0===r.length&&0===i.length?[2]:(this.connection.logger.logSchemaBuild("primary keys of "+e.name+" has changed: dropped - "+(i.map(function(e){return e.columnName}).join(", ")||"nothing")+"; added - "+(r.map(function(e){return e.columnName}).join(", ")||"nothing")),e.addPrimaryKeys(r),e.removePrimaryKeys(i),[4,this.queryRunner.updatePrimaryKeys(e)])):[2];case 1:return o.sent(),[2]}})})})},e.prototype.createForeignKeys=function(){var e=this;return s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,n,r;return __generator(this,function(o){switch(o.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName}))?0===(n=t.foreignKeys.filter(function(t){return!e.foreignKeys.find(function(e){return e.name===t.name})})).length?[2]:(r=n.map(function(e){return i.TableForeignKey.create(e)}),this.connection.logger.logSchemaBuild("creating a foreign keys: "+n.map(function(e){return e.name}).join(", ")),[4,this.queryRunner.createForeignKeys(e,r)]):[2];case 1:return o.sent(),e.addForeignKeys(r),[2]}})})})},e.prototype.createIndices=function(){var e=this;return s.PromiseUtils.runInSequence(this.entityToSyncMetadatas,function(t){return __awaiter(e,void 0,void 0,function(){var e,n,r,i=this;return __generator(this,function(a){switch(a.label){case 0:return(e=this.tables.find(function(e){return e.name===t.tableName}))?(n=e.indices.filter(function(e){var n=t.indices.find(function(t){return t.name===e.name});return!n||(n.isUnique!==e.isUnique||(n.columns.length!==e.columnNames.length||-1!==n.columns.findIndex(function(t,n){return t.databaseName!==e.columnNames[n]})))}).map(function(n){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return this.connection.logger.logSchemaBuild("dropping an index: "+n.name),e.removeIndex(n),[4,this.queryRunner.dropIndex(t.tablePath,n.name)];case 1:return r.sent(),[2]}})})}),[4,Promise.all(n)]):[2];case 1:return a.sent(),r=t.indices.filter(function(t){return!e.indices.find(function(e){return e.name===t.name})}).map(function(t){return __awaiter(i,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return n=o.TableIndex.create(t),e.indices.push(n),this.connection.logger.logSchemaBuild("adding new index: "+n.name),[4,this.queryRunner.createIndex(e,n)];case 1:return r.sent(),[2]}})})}),[4,Promise.all(r)];case 2:return a.sent(),[2]}})})})},e.prototype.dropColumnReferencedIndices=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:return(n=this.tables.find(function(t){return t.name===e}))?0===(r=n.indices.filter(function(n){return n.tableName===e&&!!n.columnNames.find(function(e){return e===t})})).length?[2]:(this.connection.logger.logSchemaBuild("dropping related indices of "+e+"#"+t+": "+r.map(function(e){return e.name}).join(", ")),i=r.map(function(e){return n.removeIndex(e),o.queryRunner.dropIndex(n,e.name)}),[4,Promise.all(i)]):[2];case 1:return a.sent(),[2]}})})},e.prototype.dropColumnReferencedForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,o,a,s;return __generator(this,function(u){switch(u.label){case 0:return n=this.connection.entityMetadatas.reduce(function(e,t){return e.concat(t.foreignKeys)},[]),(r=this.tables.find(function(t){return t.name===e}))?(o=n.filter(function(n){return n.tableName===e?!!n.columns.find(function(e){return e.databaseName===t}):n.referencedTableName===e&&!!n.referencedColumns.find(function(e){return e.databaseName===t})})).length?0===(a=o.filter(function(e){return!!r.foreignKeys.find(function(t){return t.name===e.name})})).length?[2]:(this.connection.logger.logSchemaBuild("dropping related foreign keys of "+e+"#"+t+": "+a.map(function(e){return e.name}).join(", ")),s=a.map(function(e){return i.TableForeignKey.create(e)}),r.removeForeignKeys(s),[4,this.queryRunner.dropForeignKeys(r,s)]):[2]:[2];case 1:return u.sent(),[2]}})})},e.prototype.metadataColumnsToTableColumns=function(e){var t=this;return e.map(function(e){return r.TableColumn.create(e,t.connection.driver.normalizeType(e),t.connection.driver.normalizeDefault(e),t.connection.driver.getColumnLength(e))})},e}(),e("RdbmsSchemaBuilder",u)}}}),System.register("typeorm/driver/sqlite-abstract/AbstractSqliteDriver",["typeorm/driver/sqlite-abstract/AbstractSqliteQueryRunner","typeorm/util/DateUtils","typeorm/schema-builder/RdbmsSchemaBuilder","typeorm/util/RandomGenerator"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e){this.isReplicated=!1,this.treeSupport=!0,this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime"],this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",version:"integer",treeLevel:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text"},this.connection=e,this.options=e.options}return e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,this.createDatabaseConnection()];case 1:return e.databaseConnection=t.sent(),[2]}})})},e.prototype.afterConnect=function(){return Promise.resolve()},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,n){e.queryRunner=void 0,e.databaseConnection.close(function(e){return e?n(e):t()})})]})})},e.prototype.createSchemaBuilder=function(){return new i.RdbmsSchemaBuilder(this.connection)},e.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),this.queryRunner||(this.queryRunner=new n.AbstractSqliteQueryRunner(this)),this.queryRunner},e.prototype.preparePersistentValue=function(e,t){return t.transformer&&(e=t.transformer.to(e)),null===e||void 0===e?e:t.type===Boolean||"boolean"===t.type?!0===e?1:0:"date"===t.type?r.DateUtils.mixedDateToDateString(e):"time"===t.type?r.DateUtils.mixedDateToTimeString(e):"datetime"===t.type||t.type===Date?r.DateUtils.mixedDateToUtcDatetimeString(e):t.isGenerated&&"uuid"===t.generationStrategy&&!e?o.RandomGenerator.uuid4():"simple-array"===t.type?r.DateUtils.simpleArrayToString(e):"simple-json"===t.type?r.DateUtils.simpleJsonToString(e):e},e.prototype.prepareHydratedValue=function(e,t){return null===e||void 0===e?e:(t.type===Boolean||"boolean"===t.type?e=!!e:"datetime"===t.type||t.type===Date?e=r.DateUtils.normalizeHydratedDate(e):"date"===t.type?e=r.DateUtils.mixedDateToDateString(e):"time"===t.type?e=r.DateUtils.mixedTimeToString(e):"simple-array"===t.type?e=r.DateUtils.stringToSimpleArray(e):"simple-json"===t.type&&(e=r.DateUtils.stringToSimpleJson(e)),t.transformer&&(e=t.transformer.from(e)),e)},e.prototype.escapeQueryWithParameters=function(e,t){if(!t||!Object.keys(t).length)return[e,[]];var n=[],r=Object.keys(t).map(function(e){return"(:"+e+"\\b)"}).join("|");return e=e.replace(new RegExp(r,"g"),function(e){var r=t[e.substr(1)];return r instanceof Array?r.map(function(e){return n.push(e),"$"+n.length}).join(", "):r instanceof Function?r():(n.push(r),"$"+n.length)}),[e,n]},e.prototype.escape=function(e){return'"'+e+'"'},e.prototype.normalizeType=function(e){return e.type===Number||"int"===e.type?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":"uuid"===e.type?"varchar":"simple-array"===e.type?"text":"simple-json"===e.type?"text":e.type||""},e.prototype.normalizeDefault=function(e){return"number"==typeof e.default?""+e.default:"boolean"==typeof e.default?!0===e.default?"1":"0":"function"==typeof e.default?e.default():"string"==typeof e.default?"'"+e.default+"'":e.default},e.prototype.normalizeIsUnique=function(e){return e.isUnique},e.prototype.getColumnLength=function(e){if(e.length)return e.length;var t=this.normalizeType(e);return this.dataTypeDefaults&&this.dataTypeDefaults[t]&&this.dataTypeDefaults[t].length?this.dataTypeDefaults[t].length.toString():""},e.prototype.createFullType=function(e){var t=e.type;return e.length?t+="("+e.length+")":e.precision&&e.scale?t+="("+e.precision+","+e.scale+")":e.precision?t+="("+e.precision+")":e.scale?t+="("+e.scale+")":this.dataTypeDefaults&&this.dataTypeDefaults[e.type]&&this.dataTypeDefaults[e.type].length&&(t+="("+this.dataTypeDefaults[e.type].length.toString()+")"),e.isArray&&(t+=" array"),t},e.prototype.obtainMasterConnection=function(){return Promise.resolve()},e.prototype.obtainSlaveConnection=function(){return Promise.resolve()},e.prototype.createDatabaseConnection=function(){throw new Error("Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers")},e.prototype.loadDependencies=function(){},e}(),e("AbstractSqliteDriver",a)}}}),System.register("typeorm/error/QueryRunnerAlreadyReleasedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var t=e.call(this)||this;return t.name="QueryRunnerAlreadyReleasedError",t.message="Query runner already released. Cannot run queries anymore.",t}return __extends(t,e),t}(Error),e("QueryRunnerAlreadyReleasedError",n)}}}),System.register("typeorm/error/QueryFailedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(n,r,i){var o=e.call(this)||this;return o.message=i.toString().replace(/^error: /,"").replace(/^Error: /,"").replace(/^Request/,""),Object.setPrototypeOf(o,t.prototype),Object.assign(o,__assign({},i,{name:"QueryFailedError",query:n,parameters:r||[]})),o}return __extends(t,e),t}(Error),e("QueryFailedError",n)}}}),System.register("typeorm/driver/oracle/OracleQueryRunner",["typeorm/error/TransactionAlreadyStartedError","typeorm/error/TransactionNotStartedError","typeorm/schema-builder/schema/TableColumn","typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableForeignKey","typeorm/schema-builder/schema/TablePrimaryKey","typeorm/schema-builder/schema/TableIndex","typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/error/QueryFailedError"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e}],execute:function(){p=function(){function e(e,t){void 0===t&&(t="master"),this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.sqlMemoryMode=!1,this.sqlsInMemory=[],this.driver=e,this.connection=e.connection,this.mode=t}return e.prototype.connect=function(){var e=this;return this.databaseConnection?Promise.resolve(this.databaseConnection):this.databaseConnectionPromise?this.databaseConnectionPromise:("slave"===this.mode&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then(function(t){return e.databaseConnection=t,e.databaseConnection}):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then(function(t){return e.databaseConnection=t,e.databaseConnection}),this.databaseConnectionPromise)},e.prototype.release=function(){var e=this;return new Promise(function(t,n){e.isReleased=!0,e.databaseConnection&&e.databaseConnection.close(function(e){if(e)return n(e);t()})})},e.prototype.startTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;if(this.isTransactionActive)throw new n.TransactionAlreadyStartedError;return this.isTransactionActive=!0,[2]})})},e.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("COMMIT")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.rollbackTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("ROLLBACK")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.query=function(e,t){var n=this;if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;return new Promise(function(r,i){return __awaiter(n,void 0,void 0,function(){var n,o,a,s,u,c=this;return __generator(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),this.driver.connection.logger.logQuery(e,t,this),n=+new Date,o=function(o,a){var s=c.driver.connection.options.maxQueryExecutionTime,u=+new Date-n;if(s&&u>s&&c.driver.connection.logger.logQuerySlow(u,e,t,c),o)return c.driver.connection.logger.logQueryError(o,e,t,c),i(new l.QueryFailedError(e,t,o));r(a.rows||a.outBinds)},a={autoCommit:!this.isTransactionActive},[4,this.connect()];case 1:return(s=p.sent()).execute(e,t||{},a,o),[3,3];case 2:return u=p.sent(),i(u),[3,3];case 3:return[2]}})})})},e.prototype.stream=function(e,t,n,r){throw new Error("Stream is not supported by Oracle driver.")},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l;return __generator(this,function(p){switch(p.label){case 0:return r=Object.keys(t),i=r.map(function(e){return'"'+e+'"'}).join(", "),o=r.map(function(e){return":"+e}).join(", "),a=r.map(function(e){return t[e]}),(s=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[]).length>0&&(n=s.find(function(e){return e.isPrimary&&e.isGenerated})),u=i.length>0?'INSERT INTO "'+e+'" ('+i+") VALUES ("+o+")":'INSERT INTO "'+e+'" DEFAULT VALUES',n?(c="declare lastId number; begin "+u+' returning "'+n.databaseName+'" into lastId; dbms_output.enable; dbms_output.put_line(lastId); dbms_output.get_line(:ln, :st); end;',[4,this.query(c,a.concat([{dir:this.driver.oracle.BIND_OUT,type:this.driver.oracle.STRING,maxSize:32767},{dir:this.driver.oracle.BIND_OUT,type:this.driver.oracle.NUMBER}]))]):[3,2];case 1:return l=p.sent(),[2,parseInt(l[0])];case 2:return[2,this.query(u,a)]}})})},e.prototype.update=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return r=this.parametrize(t).join(", "),i=this.parametrize(n).join(" AND "),o='UPDATE "'+e+'" SET '+r+" "+(i?" WHERE "+i:""),a=Object.keys(n).map(function(e){return n[e]}),s=Object.keys(t).map(function(e){return t[e]}),u=s.concat(a),[4,this.query(o,u)];case 1:return c.sent(),[2]}})})},e.prototype.delete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o;return __generator(this,function(a){switch(a.label){case 0:return r="string"==typeof t?t:this.parametrize(t).join(" AND "),i=t instanceof Object?Object.keys(t).map(function(e){return t[e]}):n,o='DELETE FROM "'+e+'" WHERE '+r,[4,this.query(o,i)];case 1:return a.sent(),[2]}})})},e.prototype.insertIntoClosureTable=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i,o;return __generator(this,function(a){switch(a.label){case 0:return i="",i=r?'INSERT INTO "'+e+'"("ancestor", "descendant", "level") SELECT "ancestor", '+t+', "level" + 1 FROM "'+e+'" WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t+", 1":'INSERT INTO "'+e+'" ("ancestor", "descendant") SELECT "ancestor", '+t+' FROM "'+e+'" WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t,[4,this.query(i)];case 1:return a.sent(),[4,this.query('SELECT MAX("level") as "level" FROM "'+e+'" WHERE "descendant" = '+n)];case 2:return o=a.sent(),[2,o&&o[0]&&o[0].level?parseInt(o[0].level)+1:1]}})})},e.prototype.getTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.getTables([e])];case 1:return t=n.sent(),[2,t.length>0?t[0]:void 0]}})})},e.prototype.getTables=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,c,l,p,d,m,f,h;return __generator(this,function(y){switch(y.label){case 0:return e&&e.length?(t=e.map(function(e){return"'"+e+"'"}).join(", "),n="SELECT TABLE_NAME FROM user_tables WHERE TABLE_NAME IN ("+t+")",r="SELECT TABLE_NAME, COLUMN_NAME, DATA_TYPE, DATA_LENGTH, DATA_PRECISION, DATA_SCALE, NULLABLE, IDENTITY_COLUMN FROM all_tab_cols WHERE TABLE_NAME IN ("+t+")",c="SELECT ind.INDEX_NAME, ind.TABLE_NAME, ind.UNIQUENESS, LISTAGG(cols.COLUMN_NAME, ',') WITHIN GROUP (ORDER BY cols.COLUMN_NAME) AS COLUMN_NAMES\n                                FROM USER_INDEXES ind, USER_IND_COLUMNS cols \n                                WHERE ind.INDEX_NAME = cols.INDEX_NAME AND ind.TABLE_NAME IN ("+t+")\n                                GROUP BY ind.INDEX_NAME, ind.TABLE_NAME, ind.UNIQUENESS",l="SELECT cols.table_name, cols.column_name, cols.position, cons.constraint_type, cons.constraint_name\nFROM all_constraints cons, all_cons_columns cols WHERE cols.table_name IN ("+t+") \nAND cons.constraint_name = cols.constraint_name AND cons.owner = cols.owner ORDER BY cols.table_name, cols.position",[4,Promise.all([this.query(n),this.query(r),this.query(c),this.query(l)])]):[2,[]];case 1:return p=y.sent(),d=p[0],m=p[1],f=p[2],h=p[3],d.length?[2,d.map(function(e){var t=new o.Table(e.TABLE_NAME);return t.columns=m.filter(function(e){return e.TABLE_NAME===t.name}).map(function(e){var n=!!h.find(function(n){return n.TABLE_NAME===t.name&&"P"===n.CONSTRAINT_TYPE&&n.COLUMN_NAME===e.COLUMN_NAME}),r=e.DATA_TYPE.toLowerCase();"varchar2"===e.DATA_TYPE.toLowerCase()&&null!==e.DATA_LENGTH?r+="("+e.DATA_LENGTH+")":null!==e.DATA_PRECISION&&null!==e.DATA_SCALE?r+="("+e.DATA_PRECISION+","+e.DATA_SCALE+")":null!==e.DATA_SCALE?r+="(0,"+e.DATA_SCALE+")":null!==e.DATA_PRECISION&&(r+="("+e.DATA_PRECISION+")");var o=new i.TableColumn;return o.name=e.COLUMN_NAME,o.type=r,o.default=null!==e.COLUMN_DEFAULT&&void 0!==e.COLUMN_DEFAULT?e.COLUMN_DEFAULT:void 0,o.isNullable="N"!==e.NULLABLE,o.isPrimary=n,o.isGenerated="YES"===e.IDENTITY_COLUMN,o.comment="",o}),t.primaryKeys=h.filter(function(e){return e.TABLE_NAME===t.name&&"P"===e.CONSTRAINT_TYPE}).map(function(e){return new s.TablePrimaryKey(e.CONSTRAINT_NAME,e.COLUMN_NAME)}),t.foreignKeys=h.filter(function(e){return e.TABLE_NAME===t.name&&"R"===e.CONSTRAINT_TYPE}).map(function(e){return new a.TableForeignKey(e.CONSTRAINT_NAME,[],[],"","")}),t.indices=f.filter(function(e){return e.TABLE_NAME===t.name&&!t.foreignKeys.find(function(t){return t.name===e.INDEX_NAME})&&!t.primaryKeys.find(function(t){return t.name===e.INDEX_NAME})}).map(function(t){return new u.TableIndex(e.TABLE_NAME,t.INDEX_NAME,t.COLUMN_NAMES,!("UNIQUE"!==t.COLUMN_NAMES))}),t})]:[2,[]]}})})},e.prototype.hasDatabase=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve(!1)]})})},e.prototype.hasTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return t="SELECT TABLE_NAME FROM user_tables WHERE TABLE_NAME = '"+e+"'",[4,this.query(t)];case 1:return n=r.sent(),[2,!!n.length]}})})},e.prototype.createDatabase=function(e){return this.query("CREATE DATABASE IF NOT EXISTS "+e)},e.prototype.createSchema=function(e){return Promise.resolve([])},e.prototype.createTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i=this;return __generator(this,function(o){switch(o.label){case 0:return t=e.columns.map(function(e){return i.buildCreateColumnSql(e)}).join(", "),n='CREATE TABLE "'+e.name+'" ('+t,(r=e.columns.filter(function(e){return e.isPrimary})).length>0&&(n+=", PRIMARY KEY("+r.map(function(e){return'"'+e.name+'"'}).join(", ")+")"),n+=")",[4,this.query(n)];case 1:return o.sent(),[2]}})})},e.prototype.dropTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return t='DROP TABLE "'+e+'"',[4,this.query(t)];case 1:return n.sent(),[2]}})})},e.prototype.hasColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return n="SELECT COLUMN_NAME FROM all_tab_cols WHERE TABLE_NAME = '"+e+"' AND COLUMN_NAME = '"+t+"'",[4,this.query(n)];case 1:return r=i.sent(),[2,!!r.length]}})})},e.prototype.addColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n=e instanceof o.Table?e.name:e,r='ALTER TABLE "'+n+'" ADD '+this.buildCreateColumnSql(t),[2,this.query(r)]})})},e.prototype.addColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.addColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.renameColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s;return __generator(this,function(u){switch(u.label){case 0:return r=void 0,e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=u.sent(),u.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(a=void 0,!(a=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return s=void 0,n instanceof i.TableColumn?s=n:(s=a.clone()).name=n,[2,this.changeColumn(r,a,s)]}})})},e.prototype.changeColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s,u,c,l;return __generator(this,function(p){switch(p.label){case 0:return r=void 0,e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=p.sent(),p.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(a=void 0,!(a=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return n.isGenerated===a.isGenerated?[3,10]:n.isGenerated?r.primaryKeys.length>0&&a.isPrimary?(s='ALTER TABLE "'+r.name+'" DROP CONSTRAINT "'+r.primaryKeys[0].name+'"',[4,this.query(s)]):[3,5]:[3,8];case 4:p.sent(),p.label=5;case 5:return u='ALTER TABLE "'+r.name+'" DROP COLUMN "'+n.name+'"',[4,this.query(u)];case 6:return p.sent(),c='ALTER TABLE "'+r.name+'" ADD '+this.buildCreateColumnSql(n),[4,this.query(c)];case 7:return p.sent(),[3,10];case 8:return l='ALTER TABLE "'+r.name+'" MODIFY "'+n.name+'" DROP IDENTITY',[4,this.query(l)];case 9:p.sent(),p.label=10;case 10:return n.isNullable===a.isNullable?[3,12]:(l='ALTER TABLE "'+r.name+'" MODIFY "'+n.name+'" '+this.connection.driver.createFullType(n)+" "+(n.isNullable?"NULL":"NOT NULL"),[4,this.query(l)]);case 11:return p.sent(),[3,14];case 12:return this.connection.driver.createFullType(n)===this.connection.driver.createFullType(a)?[3,14]:(l='ALTER TABLE "'+r.name+'" MODIFY "'+n.name+'" '+this.connection.driver.createFullType(n),[4,this.query(l)]);case 13:p.sent(),p.label=14;case 14:return[2]}})})},e.prototype.changeColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(n){return[2,this.changeColumn(e,t.oldColumn,t.newColumn)]})})}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.query('ALTER TABLE "'+e.name+'" DROP COLUMN "'+t.name+'"')]})})},e.prototype.dropColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.updatePrimaryKeys=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return t=e.primaryKeys.map(function(e){return'"'+e.columnName+'"'}),e.primaryKeys.length>0&&e.primaryKeys[0].name?[4,this.query('ALTER TABLE "'+e.name+'" DROP CONSTRAINT "'+e.primaryKeys[0].name+'"')]:[3,2];case 1:n.sent(),n.label=2;case 2:return t.length>0?[4,this.query('ALTER TABLE "'+e.name+'" ADD PRIMARY KEY ('+t.join(", ")+")")]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.createForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,a;return __generator(this,function(s){return n=e instanceof o.Table?e.name:e,r=t.columnNames.map(function(e){return'"'+e+'"'}).join(", "),i=t.referencedColumnNames.map(function(e){return'"'+e+'"'}).join(","),a='ALTER TABLE "'+n+'" ADD CONSTRAINT "'+t.name+'" FOREIGN KEY ('+r+') REFERENCES "'+t.referencedTableName+'"('+i+")",t.onDelete&&(a+=" ON DELETE "+t.onDelete),[2,this.query(a)]})})},e.prototype.createForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.createForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n=e instanceof o.Table?e.name:e,r='ALTER TABLE "'+n+'" DROP CONSTRAINT "'+t.name+'"',[2,this.query(r)]})})},e.prototype.dropForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.createIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return n=t.columnNames.map(function(e){return'"'+e+'"'}).join(", "),r="CREATE "+(t.isUnique?"UNIQUE":"")+' INDEX "'+t.name+'" ON "'+(e instanceof o.Table?e.name:e)+'"('+n+")",[4,this.query(r)];case 1:return i.sent(),[2]}})})},e.prototype.dropIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return n=e instanceof o.Table?e.name:e,r='ALTER TABLE "'+n+'" DROP INDEX "'+t+'"',[4,this.query(r)];case 1:return i.sent(),[2]}})})},e.prototype.truncate=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.query('TRUNCATE TABLE "'+e+'"')];case 1:return t.sent(),[2]}})})},e.prototype.clearDatabase=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return[4,this.startTransaction()];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,8,,13]),e="SET FOREIGN_KEY_CHECKS = 0;",t="SELECT concat('DROP TABLE IF EXISTS \"', table_name, '\";') AS query FROM information_schema.tables WHERE table_schema = '"+this.dbName+"'",n="SET FOREIGN_KEY_CHECKS = 1;",[4,this.query(e)];case 3:return s.sent(),[4,this.query(t)];case 4:return r=s.sent(),[4,Promise.all(r.map(function(e){return a.query(e.query)}))];case 5:return s.sent(),[4,this.query(n)];case 6:return s.sent(),[4,this.commitTransaction()];case 7:return s.sent(),[3,13];case 8:i=s.sent(),s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.rollbackTransaction()];case 10:return s.sent(),[3,12];case 11:return o=s.sent(),[3,12];case 12:throw i;case 13:return[2]}})})},e.prototype.enableSqlMemory=function(){this.sqlMemoryMode=!0},e.prototype.disableSqlMemory=function(){this.sqlsInMemory=[],this.sqlMemoryMode=!1},e.prototype.getMemorySql=function(){return this.sqlsInMemory},Object.defineProperty(e.prototype,"dbName",{get:function(){return this.driver.options.schema},enumerable:!0,configurable:!0}),e.prototype.parametrize=function(e){return Object.keys(e).map(function(e){return'"'+e+'"=:'+e})},e.prototype.buildCreateColumnSql=function(e){var t='"'+e.name+'" '+this.connection.driver.createFullType(e);return e.charset&&(t+=" CHARACTER SET "+e.charset),e.collation&&(t+=" COLLATE "+e.collation),!0===e.isNullable||e.isGenerated||(t+=" NOT NULL"),!0===e.isGenerated&&(t+=" GENERATED BY DEFAULT ON NULL AS IDENTITY"),void 0!==e.default&&null!==e.default&&(t+=" DEFAULT "+e.default),t},e}(),e("OracleQueryRunner",p)}}}),System.register("typeorm/driver/oracle/OracleDriver",["typeorm/error/ConnectionIsNotSetError","typeorm/error/DriverPackageNotInstalledError","typeorm/driver/oracle/OracleQueryRunner","typeorm/util/DateUtils","typeorm/platform/PlatformTools","typeorm/schema-builder/RdbmsSchemaBuilder","typeorm/driver/DriverUtils"],function(e,t){"use strict";var n,r,i,o,a,s,u,c;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e}],execute:function(){c=function(){function e(e){this.slaves=[],this.isReplicated=!1,this.treeSupport=!0,this.supportedDataTypes=["char","nchar","nvarchar2","varchar2","long","raw","long raw","number","numeric","dec","decimal","integer","int","smallint","real","double precision","date","timestamp","timestamp with time zone","timestamp with local time zone","interval year","interval day","bfile","blob","clob","nclob","rowid","urowid"],this.withLengthColumnTypes=["char","nchar","nvarchar2","varchar2"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"CURRENT_TIMESTAMP",updateDate:"datetime",updateDateDefault:"CURRENT_TIMESTAMP",version:"number",treeLevel:"number",migrationName:"nvarchar",migrationTimestamp:"timestamp",cacheId:"int",cacheIdentifier:"nvarchar",cacheTime:"timestamp",cacheDuration:"int",cacheQuery:"text",cacheResult:"text"},this.connection=e,this.options=e.options,this.loadDependencies(),this.oracle.outFormat=this.oracle.OBJECT}return e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r=this;return __generator(this,function(i){switch(i.label){case 0:return this.options.replication?(e=this,[4,Promise.all(this.options.replication.slaves.map(function(e){return r.createPool(r.options,e)}))]):[3,3];case 1:return e.slaves=i.sent(),t=this,[4,this.createPool(this.options,this.options.replication.master)];case 2:return t.master=i.sent(),this.database=this.options.replication.master.database,[3,5];case 3:return n=this,[4,this.createPool(this.options,this.options)];case 4:n.master=i.sent(),this.database=this.options.database,i.label=5;case 5:return[2]}})})},e.prototype.afterConnect=function(){return Promise.resolve()},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return this.master?[4,this.closePool(this.master)]:[2,Promise.reject(new n.ConnectionIsNotSetError("oracle"))];case 1:return t.sent(),[4,Promise.all(this.slaves.map(function(t){return e.closePool(t)}))];case 2:return t.sent(),this.master=void 0,this.slaves=[],[2]}})})},e.prototype.createSchemaBuilder=function(){return new s.RdbmsSchemaBuilder(this.connection)},e.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),new i.OracleQueryRunner(this,e)},e.prototype.escapeQueryWithParameters=function(e,t){if(!t||!Object.keys(t).length)return[e,[]];var n=[],r=Object.keys(t).map(function(e){return"(:"+e+"\\b)"}).join("|");return e=e.replace(new RegExp(r,"g"),function(e){var r=t[e.substr(1)];return r instanceof Function?r():(n.push(r),e)}),[e,n]},e.prototype.escape=function(e){return'"'+e+'"'},e.prototype.preparePersistentValue=function(e,t){return t.transformer&&(e=t.transformer.to(e)),null===e||void 0===e?e:t.type===Boolean?!0===e?1:0:"date"===t.type?o.DateUtils.mixedDateToDateString(e):"time"===t.type?o.DateUtils.mixedDateToTimeString(e):"datetime"===t.type||t.type===Date?o.DateUtils.mixedDateToUtcDatetimeString(e):"json"===t.type?JSON.stringify(e):"simple-array"===t.type?o.DateUtils.simpleArrayToString(e):"simple-json"===t.type?o.DateUtils.simpleJsonToString(e):e},e.prototype.prepareHydratedValue=function(e,t){return null===e||void 0===e?e:(t.type===Boolean?e=!!e:"datetime"===t.type?e=o.DateUtils.normalizeHydratedDate(e):"date"===t.type?e=o.DateUtils.mixedDateToDateString(e):"time"===t.type?e=o.DateUtils.mixedTimeToString(e):"json"===t.type?e=JSON.parse(e):"simple-array"===t.type?e=o.DateUtils.stringToSimpleArray(e):"simple-json"===t.type&&(e=o.DateUtils.stringToSimpleJson(e)),t.transformer&&(e=t.transformer.from(e)),e)},e.prototype.normalizeType=function(e){var t="";return e.type===Number?t+="integer":e.type===String?t+="nvarchar2":e.type===Date?t+="timestamp(0)":e.type===Boolean?t+="number(1)":"simple-array"===e.type?t+="text":"simple-json"===e.type?t+="text":t+=e.type,t},e.prototype.normalizeDefault=function(e){return"number"==typeof e.default?""+e.default:"boolean"==typeof e.default?!0===e.default?"true":"false":"function"==typeof e.default?e.default():"string"==typeof e.default?"'"+e.default+"'":e.default},e.prototype.normalizeIsUnique=function(e){return e.isUnique},e.prototype.getColumnLength=function(e){if(e.length)return e.length;var t=this.normalizeType(e);return this.dataTypeDefaults&&this.dataTypeDefaults[t]&&this.dataTypeDefaults[t].length?this.dataTypeDefaults[t].length.toString():""},e.prototype.createFullType=function(e){var t=e.type;return e.length?t+="("+e.length+")":e.precision&&e.scale?t+="("+e.precision+","+e.scale+")":e.precision?t+="("+e.precision+")":e.scale?t+="("+e.scale+")":this.dataTypeDefaults&&this.dataTypeDefaults[e.type]&&this.dataTypeDefaults[e.type].length&&(t+="("+this.dataTypeDefaults[e.type].length.toString()+")"),e.isArray&&(t+=" array"),t},e.prototype.obtainMasterConnection=function(){var e=this;return new Promise(function(t,n){e.master.getConnection(function(e,r,i){if(e)return n(e);t(r)})})},e.prototype.obtainSlaveConnection=function(){var e=this;return this.slaves.length?new Promise(function(t,n){var r=Math.floor(Math.random()*e.slaves.length);e.slaves[r].getConnection(function(e,r){if(e)return n(e);t(r)})}):this.obtainMasterConnection()},e.prototype.loadDependencies=function(){try{this.oracle=a.PlatformTools.load("oracledb")}catch(e){throw new r.DriverPackageNotInstalledError("Oracle","oracledb")}},e.prototype.createPool=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){return t=Object.assign(t,u.DriverUtils.buildDriverOptions(t)),n=Object.assign({},{user:t.username,password:t.password,connectString:t.host+":"+t.port+"/"+t.sid},e.extra||{}),[2,new Promise(function(e,t){r.oracle.createPool(n,function(n,r){if(n)return t(n);e(r)})})]})})},e.prototype.closePool=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,n){e.close(function(e){return e?n(e):t()}),e=void 0})]})})},e}(),e("OracleDriver",c)}}}),System.register("typeorm/schema-builder/schema/Table",["typeorm/schema-builder/schema/TableColumn","typeorm/driver/sqlite-abstract/AbstractSqliteDriver","typeorm/driver/mysql/MysqlDriver","typeorm/driver/oracle/OracleDriver"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e,t,r,i,o,a){this.columns=[],this.indices=[],this.foreignKeys=[],this.primaryKeys=[],this.justCreated=!1,this.name=e,t&&(this.columns=t.map(function(e){return e instanceof n.TableColumn?e:new n.TableColumn(e)})),void 0!==r&&(this.justCreated=r),this.engine=i,this.database=o,this.schema=a}return Object.defineProperty(e.prototype,"primaryKeysWithoutGenerated",{get:function(){var e=this.columns.find(function(e){return e.isGenerated});return e?this.primaryKeys.filter(function(t){return t.columnName!==e.name}):this.primaryKeys},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasGeneratedColumn",{get:function(){return!!this.columns.find(function(e){return e.isGenerated})},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e(this.name);return t.columns=this.columns.map(function(e){return e.clone()}),t.indices=this.indices.map(function(e){return e.clone()}),t.foreignKeys=this.foreignKeys.map(function(e){return e.clone()}),t.primaryKeys=this.primaryKeys.map(function(e){return e.clone()}),t.engine=this.engine,t.database=this.database,t.schema=this.schema,t},e.prototype.addColumns=function(e){this.columns=this.columns.concat(e)},e.prototype.replaceColumn=function(e,t){this.columns[this.columns.indexOf(e)]=t},e.prototype.removeColumn=function(e){var t=this.columns.find(function(t){return t.name===e.name});t&&this.columns.splice(this.columns.indexOf(t),1)},e.prototype.removeColumns=function(e){var t=this;e.forEach(function(e){return t.removeColumn(e)})},e.prototype.addPrimaryKeys=function(e){var t=this;e.forEach(function(e){t.primaryKeys.push(e);var n=t.columns.findIndex(function(t){return t.name===e.columnName});-1!==n&&(t.columns[n].isPrimary=!0)})},e.prototype.removePrimaryKeys=function(e){var t=this;e.forEach(function(e){t.primaryKeys.splice(t.primaryKeys.indexOf(e),1);var n=t.columns.findIndex(function(t){return t.name===e.columnName});-1!==n&&(t.columns[n].isPrimary=!1)})},e.prototype.removePrimaryKeysOfColumns=function(e){this.primaryKeys=this.primaryKeys.filter(function(t){return!e.find(function(e){return e.name===t.columnName})})},e.prototype.addForeignKeys=function(e){this.foreignKeys=this.foreignKeys.concat(e)},e.prototype.removeForeignKey=function(e){var t=this.foreignKeys.find(function(t){return t.name===e.name});t&&this.foreignKeys.splice(this.foreignKeys.indexOf(t),1)},e.prototype.removeForeignKeys=function(e){var t=this;e.forEach(function(e){return t.removeForeignKey(e)})},e.prototype.removeIndex=function(e){var t=this.indices.find(function(t){return t.name===e.name});t&&this.indices.splice(this.indices.indexOf(t),1)},e.prototype.findChangedColumns=function(e,t){var n=this;return this.columns.filter(function(a){var s=t.find(function(e){return e.databaseName===a.name});if(!s)return!1;var u="uuid"===s.generationStrategy&&(e instanceof r.AbstractSqliteDriver||e instanceof i.MysqlDriver||e instanceof o.OracleDriver);return a.name!==s.databaseName||a.type!==e.normalizeType(s)||a.comment!==s.comment||!a.isGenerated&&!n.compareDefaultValues(e.normalizeDefault(s),a.default)||a.isNullable!==s.isNullable||a.isUnique!==e.normalizeIsUnique(s)||!1===u&&a.isGenerated!==s.isGenerated||!n.compareColumnLengths(e,a,s)})},e.prototype.findColumnByName=function(e){return this.columns.find(function(t){return t.name===e})},e.prototype.compareColumnLengths=function(e,t,n){var r=e.normalizeType(n);if(-1!==e.withLengthColumnTypes.indexOf(r)){var i=e.getColumnLength(n);if(i)return t.length.toLowerCase()===i.toLowerCase()}return!0},e.prototype.compareDefaultValues=function(e,t){return"string"==typeof e&&"string"==typeof t&&(e=e.replace(/\(\([0-9.]*\)\)$/g,"$1"),t=t.replace(/\(\(([0-9.]*?)\)\)$/g,"$1"),e=e.replace(/^\(|\)$/g,""),t=t.replace(/^\(|\)$/g,""),e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t},e.create=function(t,r){var i=new e(t.tableName);return i.engine=t.engine,i.database=t.database,i.schema=t.schema,t.columns.forEach(function(e){var t=n.TableColumn.create(e,r.normalizeType(e),r.normalizeDefault(e),r.getColumnLength(e));i.columns.push(t)}),i},e}(),e("Table",a)}}}),System.register("typeorm/driver/mysql/MysqlQueryRunner",["typeorm/error/TransactionAlreadyStartedError","typeorm/error/TransactionNotStartedError","typeorm/schema-builder/schema/TableColumn","typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableForeignKey","typeorm/schema-builder/schema/TablePrimaryKey","typeorm/schema-builder/schema/TableIndex","typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/util/OrmUtils","typeorm/error/QueryFailedError"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e}],execute:function(){d=function(){function e(e,t){void 0===t&&(t="master"),this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.sqlMemoryMode=!1,this.sqlsInMemory=[],this.driver=e,this.connection=e.connection,this.mode=t}return e.prototype.connect=function(){var e=this;return this.databaseConnection?Promise.resolve(this.databaseConnection):this.databaseConnectionPromise?this.databaseConnectionPromise:("slave"===this.mode&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then(function(t){return e.databaseConnection=t,e.databaseConnection}):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then(function(t){return e.databaseConnection=t,e.databaseConnection}),this.databaseConnectionPromise)},e.prototype.release=function(){return this.isReleased=!0,this.databaseConnection&&this.databaseConnection.release(),Promise.resolve()},e.prototype.startTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(this.isTransactionActive)throw new n.TransactionAlreadyStartedError;return this.isTransactionActive=!0,[4,this.query("START TRANSACTION")];case 1:return e.sent(),[2]}})})},e.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("COMMIT")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.rollbackTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("ROLLBACK")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.query=function(e,t){var n=this;if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;return new Promise(function(r,i){return __awaiter(n,void 0,void 0,function(){var n,o,a,s=this;return __generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.connect()];case 1:return n=u.sent(),this.driver.connection.logger.logQuery(e,t,this),o=+new Date,n.query(e,t,function(n,a){var u=s.driver.connection.options.maxQueryExecutionTime,c=+new Date-o;if(u&&c>u&&s.driver.connection.logger.logQuerySlow(c,e,t,s),n)return s.driver.connection.logger.logQueryError(n,e,t,s),i(new p.QueryFailedError(e,t,n));r(a)}),[3,3];case 2:return a=u.sent(),i(a),[3,3];case 3:return[2]}})})})},e.prototype.stream=function(e,t,n,r){var i=this;if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;return new Promise(function(o,a){return __awaiter(i,void 0,void 0,function(){var i,s,u;return __generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.connect()];case 1:return i=c.sent(),this.driver.connection.logger.logQuery(e,t,this),s=i.query(e,t),n&&s.on("end",n),r&&s.on("error",r),o(s),[3,3];case 2:return u=c.sent(),a(u),[3,3];case 3:return[2]}})})})},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c;return __generator(this,function(p){switch(p.label){case 0:return n=Object.keys(t),r=n.map(function(e){return"`"+e+"`"}).join(", "),i=n.map(function(e){return"?"}).join(","),o=n.map(function(e){return t[e]}),a=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[],s="INSERT INTO `"+this.escapeTablePath(e)+"`("+r+") VALUES ("+i+")",[4,this.query(s,o)];case 1:return u=p.sent(),c=a.reduce(function(e,n){var r=n.isPrimary&&u.insertId?u.insertId:t[n.databaseName];return r?l.OrmUtils.mergeDeep(e,n.createValueMap(r)):e},{}),[2,{result:u,generatedMap:Object.keys(c).length>0?c:void 0}]}})})},e.prototype.update=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return r=this.parametrize(t).join(", "),i=this.parametrize(n).join(" AND "),o="UPDATE `"+this.escapeTablePath(e)+"` SET "+r+" "+(i?" WHERE "+i:""),a=Object.keys(n).map(function(e){return n[e]}),s=Object.keys(t).map(function(e){return t[e]}),u=s.concat(a),[4,this.query(o,u)];case 1:return c.sent(),[2]}})})},e.prototype.delete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o;return __generator(this,function(a){switch(a.label){case 0:return r="string"==typeof t?t:this.parametrize(t).join(" AND "),i=t instanceof Object?Object.keys(t).map(function(e){return t[e]}):n,o="DELETE FROM `"+this.escapeTablePath(e)+"` WHERE "+r,[4,this.query(o,i)];case 1:return a.sent(),[2]}})})},e.prototype.insertIntoClosureTable=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(o){switch(o.label){case 0:return r?[4,this.query("INSERT INTO `"+this.escapeTablePath(e)+"`(`ancestor`, `descendant`, `level`) SELECT `ancestor`, "+t+", `level` + 1 FROM `"+this.escapeTablePath(e)+"` WHERE `descendant` = "+n+" UNION ALL SELECT "+t+", "+t+", 1")]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,this.query("INSERT INTO `"+this.escapeTablePath(e)+"`(`ancestor`, `descendant`) SELECT `ancestor`, "+t+" FROM `"+this.escapeTablePath(e)+"` WHERE `descendant` = "+n+" UNION ALL SELECT "+t+", "+t)];case 3:o.sent(),o.label=4;case 4:return r?[4,this.query("SELECT MAX(`level`) as `level` FROM `"+this.escapeTablePath(e)+"` WHERE `descendant` = "+n)]:[3,6];case 5:return i=o.sent(),[2,i&&i[0]&&i[0].level?parseInt(i[0].level)+1:1];case 6:return[2,-1]}})})},e.prototype.getTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.getTables([e])];case 1:return t=n.sent(),[2,t.length>0?t[0]:void 0]}})})},e.prototype.getTables=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,c,l,p,d,m,f,h,y,g,v,b,E=this;return __generator(this,function(_){switch(_.label){case 0:if(this.sqlMemoryMode)throw new Error("Loading table is not supported in sql memory mode");return e&&e.length?(t=e.map(function(e){return-1===e.indexOf(".")?e:e.split(".")[1]}),n=e.filter(function(e){return-1!==e.indexOf(".")}).map(function(e){return e.split(".")[0]}),this.driver.database&&!n.find(function(e){return e===E.driver.database})&&n.push(this.driver.database),r=n.map(function(e){return"'"+e+"'"}).join(", "),c=t.map(function(e){return"'"+e+"'"}).join(", "),l="SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA IN ("+r+") AND TABLE_NAME IN ("+c+")",p="SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA IN ("+r+")",d="SELECT * FROM INFORMATION_SCHEMA.STATISTICS WHERE TABLE_SCHEMA IN ("+r+") AND INDEX_NAME != 'PRIMARY' ORDER BY SEQ_IN_INDEX",m="SELECT * FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE TABLE_SCHEMA IN ("+r+") AND REFERENCED_COLUMN_NAME IS NOT NULL",[4,Promise.all([this.query(l),this.query(p),this.query(d),this.query(m)])]):[2,[]];case 1:return f=_.sent(),h=f[0],y=f[1],g=f[2],v=f[3],h.length?(b="mariadb"===this.driver.options.type,[2,Promise.all(h.map(function(e){return __awaiter(E,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return t=new o.Table(e.TABLE_NAME),t.database=e.TABLE_SCHEMA,[4,this.query("SHOW INDEX FROM `"+e.TABLE_SCHEMA+"`.`"+e.TABLE_NAME+"` WHERE Key_name = 'PRIMARY'")];case 1:return n=r.sent(),t.columns=y.filter(function(e){return e.TABLE_NAME===t.name}).map(function(e){var t=new i.TableColumn;t.name=e.COLUMN_NAME;var n=e.COLUMN_TYPE.toLowerCase(),r=n.indexOf("(");if(t.type=-1!==r?n.substring(0,r):n,null===e.COLUMN_DEFAULT||void 0===e.COLUMN_DEFAULT||b&&"NULL"===e.COLUMN_DEFAULT?t.default=void 0:t.default=e.COLUMN_DEFAULT,t.isNullable="YES"===e.IS_NULLABLE,t.isPrimary=-1!==e.COLUMN_KEY.indexOf("PRI"),t.isUnique=-1!==e.COLUMN_KEY.indexOf("UNI"),t.isGenerated=-1!==e.EXTRA.indexOf("auto_increment"),t.comment=e.COLUMN_COMMENT,t.precision=e.NUMERIC_PRECISION,t.scale=e.NUMERIC_SCALE,t.charset=e.CHARACTER_SET_NAME,t.collation=e.COLLATION_NAME,"int"===t.type||"tinyint"===t.type||"smallint"===t.type||"mediumint"===t.type||"bigint"===t.type||"year"===t.type){var o=n.substring(n.indexOf("(")+1,n.indexOf(")"));t.length=o?o.toString():""}else t.length=e.CHARACTER_MAXIMUM_LENGTH?e.CHARACTER_MAXIMUM_LENGTH.toString():"";if("enum"===t.type){var a=e.COLUMN_TYPE,s=a.substring(a.indexOf("(")+1,a.indexOf(")")).split(",");t.enum=s.map(function(e){return e.substring(1,e.length-1)})}return"datetime"!==t.type&&"time"!==t.type&&"timestamp"!==t.type||(t.precision=e.DATETIME_PRECISION),t}),t.primaryKeys=n.map(function(e){return new s.TablePrimaryKey(e.Key_name,e.Column_name)}),t.foreignKeys=v.filter(function(e){return e.TABLE_NAME===t.name}).map(function(e){return new a.TableForeignKey(e.CONSTRAINT_NAME,[],[],"","")}),t.indices=g.filter(function(e){return e.TABLE_NAME===t.name&&!t.foreignKeys.find(function(t){return t.name===e.INDEX_NAME})&&!t.primaryKeys.find(function(t){return t.name===e.INDEX_NAME})}).map(function(e){return e.INDEX_NAME}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(n){var r=g.filter(function(e){return e.TABLE_NAME===t.name&&e.INDEX_NAME===n}),i=r.map(function(e){return e.COLUMN_NAME});if(1===r.length&&0===r[0].NON_UNIQUE){var o=t.columns.find(function(e){return e.name===r[0].INDEX_NAME&&e.name===r[0].COLUMN_NAME});if(o)return void(o.isUnique=!0)}return new u.TableIndex(e.TABLE_NAME,n,i,0===r[0].NON_UNIQUE)}).filter(function(e){return!!e}),[2,t]}})})}))]):[2,[]]}})})},e.prototype.hasDatabase=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.query("SELECT * FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = '"+e+"'")];case 1:return t=n.sent(),[2,!!t.length]}})})},e.prototype.hasTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r;return __generator(this,function(i){switch(i.label){case 0:return t=this.parseTablePath(e),n="SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '"+t.database+"' AND TABLE_NAME = '"+t.tableName+"'",[4,this.query(n)];case 1:return r=i.sent(),[2,!!r.length]}})})},e.prototype.hasColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,o,a;return __generator(this,function(s){switch(s.label){case 0:return n=this.parseTablePath(e),r=t instanceof i.TableColumn?t.name:t,o="SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = '"+n.database+"' AND TABLE_NAME = '"+n.tableName+"' AND COLUMN_NAME = '"+r+"'",[4,this.query(o)];case 1:return a=s.sent(),[2,!!a.length]}})})},e.prototype.createDatabase=function(e){return this.query("CREATE DATABASE IF NOT EXISTS "+e)},e.prototype.createSchema=function(e){return Promise.resolve([])},e.prototype.createTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o=this;return __generator(this,function(a){return t=e.columns.map(function(e){return o.buildCreateColumnSql(e,!1)}).join(", "),n="CREATE TABLE `"+this.escapeTablePath(e)+"` ("+t,(r=e.columns.filter(function(e){return e.isPrimary&&!e.isGenerated})).length>0&&(n+=", PRIMARY KEY("+r.map(function(e){return"`"+e.name+"`"}).join(", ")+")"),n+=") ENGINE="+(e.engine||"InnoDB"),i="DROP TABLE `"+this.escapeTablePath(e)+"`",[2,this.schemaQuery(n,i)]})})},e.prototype.dropTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t="DROP TABLE `"+this.escapeTablePath(e)+"`",[2,this.query(t)]})})},e.prototype.addColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n="ALTER TABLE `"+this.escapeTablePath(e)+"` ADD "+this.buildCreateColumnSql(t,!1),r="ALTER TABLE `"+this.escapeTablePath(e)+"` DROP `"+t.name+"`",[2,this.schemaQuery(n,r)]})})},e.prototype.addColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.addColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.renameColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s;return __generator(this,function(u){switch(u.label){case 0:return r=void 0,e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:if(!(r=u.sent()))throw new Error("Table "+e+" was not found.");u.label=3;case 3:if(a=void 0,!(a=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return s=void 0,n instanceof i.TableColumn?s=n:(s=a.clone()).name=n,[2,this.changeColumn(r,a,s)]}})})},e.prototype.changeColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return r=void 0,e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=c.sent(),c.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(a=void 0,!(a=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return!1!==n.isUnique||!0!==a.isUnique?[3,5]:[4,this.query("ALTER TABLE `"+this.escapeTablePath(r)+"` DROP INDEX `"+a.name+"`")];case 4:c.sent(),c.label=5;case 5:return s="ALTER TABLE `"+this.escapeTablePath(r)+"` CHANGE `"+a.name+"` "+this.buildCreateColumnSql(n,a.isPrimary),u="ALTER TABLE `"+this.escapeTablePath(r)+"` CHANGE `"+a.name+"` "+this.buildCreateColumnSql(a,a.isPrimary),[2,this.schemaQuery(s,u)]}})})},e.prototype.changeColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(n){return[2,this.changeColumn(e,t.oldColumn,t.newColumn)]})})}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n="ALTER TABLE `"+this.escapeTablePath(e)+"` DROP `"+t.name+"`",r="ALTER TABLE `"+this.escapeTablePath(e)+"` ADD "+this.buildCreateColumnSql(t,!1),[2,this.schemaQuery(n,r)]})})},e.prototype.dropColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.updatePrimaryKeys=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r;return __generator(this,function(i){switch(i.label){case 0:return e.hasGeneratedColumn?[3,2]:[4,this.query("ALTER TABLE `"+this.escapeTablePath(e)+"` DROP PRIMARY KEY")];case 1:i.sent(),i.label=2;case 2:return(t=e.columns.filter(function(e){return e.isPrimary&&!e.isGenerated}).map(function(e){return"`"+e.name+"`"})).length>0?(n="ALTER TABLE `"+this.escapeTablePath(e)+"` ADD PRIMARY KEY ("+t.join(", ")+")",r="ALTER TABLE `"+this.escapeTablePath(e)+"` DROP PRIMARY KEY",[2,this.schemaQuery(n,r)]):[2]}})})},e.prototype.createForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o;return __generator(this,function(a){return n=t.columnNames.map(function(e){return"`"+e+"`"}).join(", "),r=t.referencedColumnNames.map(function(e){return"`"+e+"`"}).join(","),i="ALTER TABLE `"+this.escapeTablePath(e)+"` ADD CONSTRAINT `"+t.name+"` FOREIGN KEY ("+n+") REFERENCES `"+t.referencedTableName+"`("+r+")",t.onDelete&&(i+=" ON DELETE "+t.onDelete),o="ALTER TABLE `"+this.escapeTablePath(e)+"` DROP FOREIGN KEY `"+t.name+"`",[2,this.schemaQuery(i,o)]})})},e.prototype.createForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.createForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o;return __generator(this,function(a){return n="ALTER TABLE `"+this.escapeTablePath(e)+"` DROP FOREIGN KEY `"+t.name+"`",r=t.columnNames.map(function(e){return"`"+e+"`"}).join(", "),i=t.referencedColumnNames.map(function(e){return"`"+e+"`"}).join(","),o="ALTER TABLE `"+this.escapeTablePath(e)+"` ADD CONSTRAINT `"+t.name+"` FOREIGN KEY ("+r+") REFERENCES `"+t.referencedTableName+"`("+i+")",t.onDelete&&(o+=" ON DELETE "+t.onDelete),[2,this.schemaQuery(n,o)]})})},e.prototype.dropForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.createIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){switch(o.label){case 0:return n=t.columnNames.map(function(e){return"`"+e+"`"}).join(", "),r="CREATE "+(t.isUnique?"UNIQUE ":"")+"INDEX `"+t.name+"` ON `"+this.escapeTablePath(e)+"`("+n+")",i="ALTER TABLE `"+this.escapeTablePath(e)+"` DROP INDEX `"+t.name+"`",[4,this.schemaQuery(r,i)];case 1:return o.sent(),[2]}})})},e.prototype.dropIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o;return __generator(this,function(a){switch(a.label){case 0:return n=t instanceof u.TableIndex?t.name:t,r="ALTER TABLE `"+this.escapeTablePath(e)+"` DROP INDEX `"+n+"`",t instanceof u.TableIndex?(i=t.columnNames.map(function(e){return"`"+e+"`"}).join(", "),o="CREATE "+(t.isUnique?"UNIQUE ":"")+"INDEX `"+t.name+"` ON `"+this.escapeTablePath(e)+"`("+i+")",[4,this.schemaQuery(r,o)]):[3,2];case 1:return a.sent(),[3,4];case 2:return[4,this.query(r)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},e.prototype.truncate=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.query("TRUNCATE TABLE `"+this.escapeTablePath(e)+"`")];case 1:return t.sent(),[2]}})})},e.prototype.clearDatabase=function(e,t){return __awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s=this;return __generator(this,function(u){switch(u.label){case 0:return[4,this.startTransaction()];case 1:u.sent(),u.label=2;case 2:return u.trys.push([2,8,,13]),e="SET FOREIGN_KEY_CHECKS = 0;",n="SELECT concat('DROP TABLE IF EXISTS `', table_schema, '`.`', table_name, '`;') AS query FROM information_schema.tables WHERE table_schema = '"+t+"'",r="SET FOREIGN_KEY_CHECKS = 1;",[4,this.query(e)];case 3:return u.sent(),[4,this.query(n)];case 4:return i=u.sent(),[4,Promise.all(i.map(function(e){return s.query(e.query)}))];case 5:return u.sent(),[4,this.query(r)];case 6:return u.sent(),[4,this.commitTransaction()];case 7:return u.sent(),[3,13];case 8:o=u.sent(),u.label=9;case 9:return u.trys.push([9,11,,12]),[4,this.rollbackTransaction()];case 10:return u.sent(),[3,12];case 11:return a=u.sent(),[3,12];case 12:throw o;case 13:return[2]}})})},e.prototype.enableSqlMemory=function(){this.sqlMemoryMode=!0},e.prototype.disableSqlMemory=function(){this.sqlsInMemory=[],this.sqlMemoryMode=!1},e.prototype.getMemorySql=function(){return this.sqlsInMemory},e.prototype.schemaQuery=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return!0===this.sqlMemoryMode?(this.sqlsInMemory.push({up:e,down:t}),[2,Promise.resolve()]):[4,this.query(e)];case 1:return n.sent(),[2]}})})},e.prototype.parseTablePath=function(e){return e instanceof o.Table?{database:e.database||this.driver.database,tableName:e.name}:{database:-1!==e.indexOf(".")?e.split(".")[0]:this.driver.database,tableName:-1!==e.indexOf(".")?e.split(".")[1]:e}},e.prototype.escapeTablePath=function(e){return e instanceof o.Table?e.database?e.database+"`.`"+e.name:""+e.name:e.split(".").map(function(e){return""+e}).join("`.`")},e.prototype.parametrize=function(e){return Object.keys(e).map(function(e){return"`"+e+"`=?"})},e.prototype.buildCreateColumnSql=function(e,t){var n="`"+e.name+"` "+this.connection.driver.createFullType(e);return e.enum&&(n+="("+e.enum.map(function(e){return"'"+e+"'"}).join(", ")+")"),e.charset&&(n+=" CHARACTER SET "+e.charset),e.collation&&(n+=" COLLATE "+e.collation),!0!==e.isNullable&&(n+=" NOT NULL"),!0===e.isUnique&&(n+=" UNIQUE"),e.isGenerated&&e.isPrimary&&!t&&(n+=" PRIMARY KEY"),!0===e.isGenerated&&"increment"===e.generationStrategy&&(n+=" AUTO_INCREMENT"),e.comment&&(n+=" COMMENT '"+e.comment+"'"),void 0!==e.default&&null!==e.default&&(n+=" DEFAULT "+e.default),n},e}(),e("MysqlQueryRunner",d)}}}),System.register("typeorm/driver/mysql/MysqlDriver",["typeorm/error/ConnectionIsNotSetError","typeorm/error/DriverPackageNotInstalledError","typeorm/driver/DriverUtils","typeorm/driver/mysql/MysqlQueryRunner","typeorm/util/DateUtils","typeorm/platform/PlatformTools","typeorm/schema-builder/RdbmsSchemaBuilder","typeorm/util/RandomGenerator"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e}],execute:function(){l=function(){function e(e){this.isReplicated=!1,this.treeSupport=!0,this.supportedDataTypes=["int","tinyint","smallint","mediumint","bigint","float","double","decimal","date","datetime","timestamp","time","year","char","varchar","blob","text","tinyblob","tinytext","mediumblob","mediumtext","longblob","longtext","enum","json"],this.withLengthColumnTypes=["int","tinyint","smallint","mediumint","bigint","char","varchar","blob","text"],this.mappedDataTypes={createDate:"datetime",createDatePrecision:6,createDateDefault:"CURRENT_TIMESTAMP(6)",updateDate:"datetime",updateDatePrecision:6,updateDateDefault:"CURRENT_TIMESTAMP(6)",version:"int",treeLevel:"int",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text"},this.dataTypeDefaults={varchar:{length:255},int:{length:11},tinyint:{length:4},smallint:{length:5},mediumint:{length:9},bigint:{length:20},year:{length:4}},this.connection=e,this.options=e.options,this.isReplicated=!!this.options.replication,this.loadDependencies()}return e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return this.options.replication?(this.poolCluster=this.mysql.createPoolCluster(this.options.replication),this.options.replication.slaves.forEach(function(e,n){t.poolCluster.add("SLAVE"+n,t.createConnectionOptions(t.options,e))}),this.poolCluster.add("MASTER",this.createConnectionOptions(this.options,this.options.replication.master)),this.database=this.options.replication.master.database,[3,3]):[3,1];case 1:return e=this,[4,this.createPool(this.createConnectionOptions(this.options,this.options))];case 2:e.pool=n.sent(),this.database=this.options.database,n.label=3;case 3:return[2]}})})},e.prototype.afterConnect=function(){return Promise.resolve()},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return this.poolCluster||this.pool?this.poolCluster?[2,new Promise(function(t,n){e.poolCluster.end(function(e){return e?n(e):t()}),e.poolCluster=void 0})]:this.pool?[2,new Promise(function(t,n){e.pool.end(function(r){if(r)return n(r);e.pool=void 0,t()})})]:[2]:[2,Promise.reject(new n.ConnectionIsNotSetError("mysql"))]})})},e.prototype.createSchemaBuilder=function(){return new u.RdbmsSchemaBuilder(this.connection)},e.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),new o.MysqlQueryRunner(this,e)},e.prototype.escapeQueryWithParameters=function(e,t){if(!t||!Object.keys(t).length)return[e,[]];var n=[],r=Object.keys(t).map(function(e){return"(:"+e+"\\b)"}).join("|");return e=e.replace(new RegExp(r,"g"),function(e){var r=t[e.substr(1)];return r instanceof Function?r():(n.push(t[e.substr(1)]),"?")}),[e,n]},e.prototype.escape=function(e){return"`"+e+"`"},e.prototype.preparePersistentValue=function(e,t){return t.transformer&&(e=t.transformer.to(e)),null===e||void 0===e?e:t.type===Boolean?!0===e?1:0:"date"===t.type?a.DateUtils.mixedDateToDateString(e):"time"===t.type?a.DateUtils.mixedDateToTimeString(e):"json"===t.type?JSON.stringify(e):"datetime"===t.type||t.type===Date?a.DateUtils.mixedDateToDate(e,!0):t.isGenerated&&"uuid"===t.generationStrategy&&!e?c.RandomGenerator.uuid4():"simple-array"===t.type?a.DateUtils.simpleArrayToString(e):"simple-json"===t.type?a.DateUtils.simpleJsonToString(e):e},e.prototype.prepareHydratedValue=function(e,t){return null===e||void 0===e?e:(t.type===Boolean?e=!!e:"datetime"===t.type||t.type===Date?e=a.DateUtils.normalizeHydratedDate(e):"date"===t.type?e=a.DateUtils.mixedDateToDateString(e):"json"===t.type?e="string"==typeof e?JSON.parse(e):e:"time"===t.type?e=a.DateUtils.mixedTimeToString(e):"simple-array"===t.type?e=a.DateUtils.stringToSimpleArray(e):"simple-json"===t.type&&(e=a.DateUtils.stringToSimpleJson(e)),t.transformer&&(e=t.transformer.from(e)),e)},e.prototype.normalizeType=function(e){return e.type===Number||"integer"===e.type?"int":e.type===String?"varchar":e.type===Date?"datetime":e.type===Buffer?"blob":e.type===Boolean?"tinyint":"uuid"===e.type?"varchar":"simple-array"===e.type?"text":"simple-json"===e.type?"text":e.type||""},e.prototype.normalizeDefault=function(e){return"number"==typeof e.default?""+e.default:"boolean"==typeof e.default?!0===e.default?"1":"0":"function"==typeof e.default?e.default():"string"==typeof e.default?"'"+e.default+"'":e.default},e.prototype.normalizeIsUnique=function(e){return e.isUnique||!!e.entityMetadata.indices.find(function(t){return t.isUnique&&1===t.columns.length&&t.columns[0]===e})},e.prototype.getColumnLength=function(e){if(e.length)return e.length;var t=this.normalizeType(e);return this.dataTypeDefaults&&this.dataTypeDefaults[t]&&this.dataTypeDefaults[t].length?this.dataTypeDefaults[t].length.toString():""},e.prototype.createFullType=function(e){var t=e.type;return e.length?t+="("+e.length+")":e.precision&&e.scale?t+="("+e.precision+","+e.scale+")":e.precision?t+="("+e.precision+")":e.scale?t+="("+e.scale+")":this.dataTypeDefaults&&this.dataTypeDefaults[e.type]&&this.dataTypeDefaults[e.type].length&&(t+="("+this.dataTypeDefaults[e.type].length.toString()+")"),e.isArray&&(t+=" array"),t},e.prototype.obtainMasterConnection=function(){var e=this;return new Promise(function(t,n){e.poolCluster?e.poolCluster.getConnection("MASTER",function(e,r){e?n(e):t(r)}):e.pool?e.pool.getConnection(function(e,r){e?n(e):t(r)}):n(new Error("Connection is not established with mysql database"))})},e.prototype.obtainSlaveConnection=function(){var e=this;return this.poolCluster?new Promise(function(t,n){e.poolCluster.getConnection("SLAVE*",function(e,r){e?n(e):t(r)})}):this.obtainMasterConnection()},e.prototype.loadDependencies=function(){try{this.mysql=s.PlatformTools.load("mysql")}catch(e){try{this.mysql=s.PlatformTools.load("mysql2")}catch(e){throw new r.DriverPackageNotInstalledError("Mysql","mysql")}}},e.prototype.createConnectionOptions=function(e,t){return t=Object.assign(t,i.DriverUtils.buildDriverOptions(t)),Object.assign({},{charset:e.charset,timezone:e.timezone,connectTimeout:e.connectTimeout,insecureAuth:e.insecureAuth,supportBigNumbers:e.supportBigNumbers,bigNumberStrings:e.bigNumberStrings,dateStrings:e.dateStrings,debug:e.debug,trace:e.trace,multipleStatements:e.multipleStatements,flags:e.flags},{host:t.host,user:t.username,password:t.password,database:t.database,port:t.port,ssl:e.ssl},e.extra||{})},e.prototype.createPool=function(e){var t=this.mysql.createPool(e);return new Promise(function(e,n){t.getConnection(function(r,i){if(r)return t.end(function(){return n(r)});i.release(),e(t)})})},e}(),e("MysqlDriver",l)}}}),System.register("typeorm/driver/sqlserver/MssqlParameter",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){return function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.value=e,this.type=t,this.params=[],this.params=n||[]}}(),e("MssqlParameter",n)}}}),System.register("typeorm/driver/sqlserver/SqlServerQueryRunner",["typeorm/error/TransactionAlreadyStartedError","typeorm/error/TransactionNotStartedError","typeorm/schema-builder/schema/TableColumn","typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableForeignKey","typeorm/schema-builder/schema/TablePrimaryKey","typeorm/schema-builder/schema/TableIndex","typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/driver/sqlserver/MssqlParameter","typeorm/util/OrmUtils","typeorm/error/QueryFailedError","typeorm/util/PromiseUtils"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d,m,f;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e},function(e){d=e},function(e){m=e}],execute:function(){f=function(){function e(e,t){void 0===t&&(t="master"),this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.queryResponsibilityChain=[],this.sqlMemoryMode=!1,this.sqlsInMemory=[],this.driver=e,this.connection=e.connection,this.mode=t}return e.prototype.connect=function(){return Promise.resolve()},e.prototype.release=function(){return this.isReleased=!0,Promise.resolve()},e.prototype.startTransaction=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;if(this.isTransactionActive)throw new n.TransactionAlreadyStartedError;return[2,new Promise(function(t,n){return __awaiter(e,void 0,void 0,function(){var e,r=this;return __generator(this,function(i){switch(i.label){case 0:return this.isTransactionActive=!0,[4,"slave"===this.mode?this.driver.obtainSlaveConnection():this.driver.obtainMasterConnection()];case 1:return e=i.sent(),this.databaseConnection=e.transaction(),this.databaseConnection.begin(function(e){if(e)return r.isTransactionActive=!1,n(e);t()}),[2]}})})})]})})},e.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[2,new Promise(function(t,n){e.databaseConnection.commit(function(r){if(r)return n(r);e.isTransactionActive=!1,e.databaseConnection=null,t()})})]})})},e.prototype.rollbackTransaction=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[2,new Promise(function(t,n){e.databaseConnection.rollback(function(r){if(r)return n(r);e.isTransactionActive=!1,e.databaseConnection=null,t()})})]})})},e.prototype.mssqlParameterToNativeParameter=function(e){switch(this.driver.normalizeType({type:e.type})){case"bit":return this.driver.mssql.Bit;case"bigint":return this.driver.mssql.BigInt;case"decimal":return(t=this.driver.mssql).Decimal.apply(t,e.params);case"float":return this.driver.mssql.Float;case"int":return this.driver.mssql.Int;case"money":return this.driver.mssql.Money;case"numeric":return(n=this.driver.mssql).Numeric.apply(n,e.params);case"smallint":return this.driver.mssql.SmallInt;case"smallmoney":return this.driver.mssql.SmallMoney;case"real":return this.driver.mssql.Real;case"tinyint":return this.driver.mssql.TinyInt;case"char":return(r=this.driver.mssql).Char.apply(r,e.params);case"nchar":return(i=this.driver.mssql).NChar.apply(i,e.params);case"text":return this.driver.mssql.Text;case"ntext":return this.driver.mssql.Ntext;case"varchar":return(o=this.driver.mssql).VarChar.apply(o,e.params);case"nvarchar":return(a=this.driver.mssql).NVarChar.apply(a,e.params);case"xml":return this.driver.mssql.Xml;case"time":return(s=this.driver.mssql).Time.apply(s,e.params);case"date":return this.driver.mssql.Date;case"datetime":return this.driver.mssql.DateTime;case"datetime2":return(u=this.driver.mssql).DateTime2.apply(u,e.params);case"datetimeoffset":return(c=this.driver.mssql).DateTimeOffset.apply(c,e.params);case"smalldatetime":return this.driver.mssql.SmallDateTime;case"uniqueidentifier":return this.driver.mssql.UniqueIdentifier;case"variant":return this.driver.mssql.Variant;case"binary":return this.driver.mssql.Binary;case"varbinary":return(l=this.driver.mssql).VarBinary.apply(l,e.params);case"image":return this.driver.mssql.Image;case"udt":return this.driver.mssql.UDT;case"geography":return this.driver.mssql.Geography;case"geometry":return this.driver.mssql.Geometry}var t,n,r,i,o,a,s,u,c,l},e.prototype.query=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;return r=new Promise(function(e){return n=e}),this.queryResponsibilityChain.length?(i=this.queryResponsibilityChain.slice(),this.queryResponsibilityChain.push(r),[4,Promise.all(i)]):[3,2];case 1:s.sent(),s.label=2;case 2:return o=new Promise(function(i,s){return __awaiter(a,void 0,void 0,function(){var a,u,c,p,m=this;return __generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),this.driver.connection.logger.logQuery(e,t,this),[4,"slave"===this.mode?this.driver.obtainSlaveConnection():this.driver.obtainMasterConnection()];case 1:return a=f.sent(),u=new this.driver.mssql.Request(this.isTransactionActive?this.databaseConnection:a),t&&t.length&&t.forEach(function(e,t){if(e instanceof l.MssqlParameter){var n=m.mssqlParameterToNativeParameter(e);n?u.input(t,n,e.value):u.input(t,e.value)}else u.input(t,e)}),c=+new Date,u.query(e,function(a,u){var l=m.driver.connection.options.maxQueryExecutionTime,p=+new Date-c;l&&p>l&&m.driver.connection.logger.logQuerySlow(p,e,t,m);var f=function(){-1!==h&&m.queryResponsibilityChain.splice(h,1),-1!==y&&m.queryResponsibilityChain.splice(y,1),n()},h=m.queryResponsibilityChain.indexOf(o),y=m.queryResponsibilityChain.indexOf(r);if(a)return m.driver.connection.logger.logQueryError(a,e,t,m),f(),s(new d.QueryFailedError(e,t,a));i(u.recordset),f()}),[3,3];case 2:return p=f.sent(),s(p),[3,3];case 3:return[2]}})})}),this.isTransactionActive&&this.queryResponsibilityChain.push(o),[2,o]}})})},e.prototype.stream=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i,o,a,s,u=this;return __generator(this,function(p){switch(p.label){case 0:if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;return o=new Promise(function(e){return i=e}),this.queryResponsibilityChain.length?(a=this.queryResponsibilityChain.slice(),this.queryResponsibilityChain.push(o),[4,Promise.all(a)]):[3,2];case 1:p.sent(),p.label=2;case 2:return s=new Promise(function(a,c){return __awaiter(u,void 0,void 0,function(){var u,p,d=this;return __generator(this,function(m){switch(m.label){case 0:return this.driver.connection.logger.logQuery(e,t,this),[4,"slave"===this.mode?this.driver.obtainSlaveConnection():this.driver.obtainMasterConnection()];case 1:return u=m.sent(),p=new this.driver.mssql.Request(this.isTransactionActive?this.databaseConnection:u),p.stream=!0,t&&t.length&&t.forEach(function(e,t){e instanceof l.MssqlParameter?p.input(t,d.mssqlParameterToNativeParameter(e),e.value):p.input(t,e)}),p.query(e,function(n,r){var u=function(){-1!==l&&d.queryResponsibilityChain.splice(l,1),-1!==p&&d.queryResponsibilityChain.splice(p,1),i()},l=d.queryResponsibilityChain.indexOf(s),p=d.queryResponsibilityChain.indexOf(o);if(n)return d.driver.connection.logger.logQueryError(n,e,t,d),u(),c(n);a(r.recordset),u()}),n&&p.on("done",n),r&&p.on("error",r),a(p),[2]}})})}),this.isTransactionActive&&this.queryResponsibilityChain.push(s),[2,s]}})})},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,d,m;return __generator(this,function(f){switch(f.label){case 0:return n=Object.keys(t),r=n.map(function(e){return'"'+e+'"'}).join(", "),i=n.map(function(e,t){return"@"+t}).join(","),o=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[],a=o.map(function(e){return'INSERTED."'+e.databaseName+'"'}).join(", "),s=o.length>0?" OUTPUT "+a:"",u=r.length>0?"INSERT INTO "+this.escapeTablePath(e)+"("+r+") "+s+" VALUES ("+i+")":"INSERT INTO "+this.escapeTablePath(e)+" "+s+" DEFAULT VALUES ",c=this.driver.parametrizeMap(e,t),l=Object.keys(c).map(function(e){return c[e]}),[4,this.query(u,l)];case 1:return d=f.sent(),m=o.reduce(function(e,t){var n=t.createValueMap(d[0][t.databaseName]);return p.OrmUtils.mergeDeep(e,n)},{}),[2,{result:d,generatedMap:Object.keys(m).length>0?m:void 0}]}})})},e.prototype.update=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return t=this.driver.parametrizeMap(e,t),n=this.driver.parametrizeMap(e,n),r=Object.keys(n).map(function(e){return n[e]}),i=Object.keys(t).map(function(e){return t[e]}),o=i.concat(r),a=this.parametrize(t).join(", "),s=this.parametrize(n,i.length).join(" AND "),u="UPDATE "+this.escapeTablePath(e)+" SET "+a+" "+(s?" WHERE "+s:""),[4,this.query(u,o)];case 1:return c.sent(),[2]}})})},e.prototype.delete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o;return __generator(this,function(a){switch(a.label){case 0:return t="object"==typeof t?this.driver.parametrizeMap(e,t):t,r="string"==typeof t?t:this.parametrize(t).join(" AND "),i=t instanceof Object?Object.keys(t).map(function(e){return t[e]}):n,o="DELETE FROM "+this.escapeTablePath(e)+" WHERE "+r,[4,this.query(o,i)];case 1:return a.sent(),[2]}})})},e.prototype.insertIntoClosureTable=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i,o;return __generator(this,function(a){switch(a.label){case 0:return i="",i=r?"INSERT INTO "+this.escapeTablePath(e)+'("ancestor", "descendant", "level") SELECT "ancestor", '+t+', "level" + 1 FROM '+this.escapeTablePath(e)+' WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t+", 1":"INSERT INTO "+this.escapeTablePath(e)+'("ancestor", "descendant") SELECT "ancestor", '+t+" FROM "+this.escapeTablePath(e)+' WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t,[4,this.query(i)];case 1:return a.sent(),r?[4,this.query("SELECT MAX(level) as level FROM "+this.escapeTablePath(e)+" WHERE descendant = "+n)]:[3,3];case 2:return o=a.sent(),[2,o&&o[0]&&o[0].level?parseInt(o[0].level)+1:1];case 3:return[2,-1]}})})},e.prototype.getTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.getTables([e])];case 1:return t=n.sent(),[2,t.length>0?t[0]:void 0]}})})},e.prototype.getTables=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,c,l,p,d,m,f,h,y,g,v,b,E,_,T=this;return __generator(this,function(M){switch(M.label){case 0:return e&&e.length?(t=e.map(function(e){return 3===e.split(".").length?e.split(".")[2]:2===e.split(".").length?e.split(".")[1]:e}),n=[],e.filter(function(e){return-1!==e.indexOf(".")}).forEach(function(e){3===e.split(".").length?""!==e.split(".")[1]&&n.push(e.split(".")[1]):n.push(e.split(".")[0])}),n.push(this.driver.options.schema||"SCHEMA_NAME()"),r=e.filter(function(e){return 3===e.split(".").length}).map(function(e){return e.split(".")[0]}),this.driver.database&&!r.find(function(e){return e===T.driver.database})&&r.push(this.driver.database),c=n.map(function(e){return"SCHEMA_NAME()"===e?e:"'"+e+"'"}).join(", "),l=t.map(function(e){return"'"+e+"'"}).join(", "),p=r.map(function(e){return"SELECT * FROM "+e+".INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME IN ("+l+") AND TABLE_SCHEMA IN ("+c+")"}).join(" UNION ALL "),d=r.map(function(e){return"SELECT * FROM "+e+".INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA IN ("+c+")"}).join(" UNION ALL "),m=r.map(function(e){return"SELECT columnUsages.*, tableConstraints.CONSTRAINT_TYPE FROM "+e+".INFORMATION_SCHEMA.KEY_COLUMN_USAGE columnUsages LEFT JOIN "+e+".INFORMATION_SCHEMA.TABLE_CONSTRAINTS tableConstraints ON tableConstraints.CONSTRAINT_NAME = columnUsages.CONSTRAINT_NAME WHERE columnUsages.TABLE_SCHEMA IN ("+c+") AND tableConstraints.TABLE_SCHEMA IN ("+c+")"}).join(" UNION ALL "),f=r.map(function(e){return"SELECT COLUMN_NAME, TABLE_NAME FROM "+e+".INFORMATION_SCHEMA.COLUMNS WHERE COLUMNPROPERTY(object_id(TABLE_SCHEMA + '.' + TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1 AND TABLE_SCHEMA IN ("+c+")"}).join(" UNION ALL "),h=r.map(function(e){return"SELECT TABLE_NAME = t.name, INDEX_NAME = ind.name, IndexId = ind.index_id, ColumnId = ic.index_column_id, \n                    COLUMN_NAME = col.name, IS_UNIQUE = ind.is_unique, ind.*, ic.*, col.* \n                    FROM "+e+".sys.indexes ind \n                    INNER JOIN "+e+".sys.index_columns ic ON ind.object_id = ic.object_id and ind.index_id = ic.index_id\n                    INNER JOIN "+e+".sys.columns col ON ic.object_id = col.object_id and ic.column_id = col.column_id \n                    INNER JOIN "+e+".sys.tables t ON ind.object_id = t.object_id WHERE ind.is_primary_key = 0 \n                    AND ind.is_unique_constraint = 0 AND t.is_ms_shipped = 0"}).join(" UNION ALL "),[4,Promise.all([this.query(p),this.query(d),this.query(m),this.query(f),this.query(h)])]):[2,[]];case 1:return y=M.sent(),g=y[0],v=y[1],b=y[2],E=y[3],_=y[4],g.length?[2,Promise.all(g.map(function(e){return __awaiter(T,void 0,void 0,function(){var t;return __generator(this,function(n){return t=new o.Table(e.TABLE_NAME),t.database=e.TABLE_CATALOG,t.schema=e.TABLE_SCHEMA,t.columns=v.filter(function(e){return e.TABLE_NAME===t.name}).map(function(e){var n=!!b.find(function(n){return n.TABLE_NAME===t.name&&n.COLUMN_NAME===e.COLUMN_NAME&&"PRIMARY KEY"===n.CONSTRAINT_TYPE}),r=!!E.find(function(n){return n.TABLE_NAME===t.name&&n.COLUMN_NAME===e.COLUMN_NAME}),o=!!b.find(function(n){return n.TABLE_NAME===t.name&&n.COLUMN_NAME===e.COLUMN_NAME&&"UNIQUE"===n.CONSTRAINT_TYPE}),a=new i.TableColumn;return a.name=e.COLUMN_NAME,a.type=e.DATA_TYPE.toLowerCase(),a.length=e.CHARACTER_MAXIMUM_LENGTH?e.CHARACTER_MAXIMUM_LENGTH.toString():"","-1"===a.length&&(a.length="MAX"),a.precision=e.NUMERIC_PRECISION,a.scale=e.NUMERIC_SCALE,a.default=null!==e.COLUMN_DEFAULT&&void 0!==e.COLUMN_DEFAULT?e.COLUMN_DEFAULT:void 0,a.isNullable="YES"===e.IS_NULLABLE,a.isPrimary=n,a.isGenerated=r,"(newsequentialid())"===a.default&&(a.isGenerated=!0,a.default=void 0),a.isUnique=o,a.charset=e.CHARACTER_SET_NAME,a.collation=e.COLLATION_NAME,a.comment="","datetime2"!==a.type&&"time"!==a.type&&"datetimeoffset"!==a.type||(a.precision=e.DATETIME_PRECISION),a}),t.primaryKeys=b.filter(function(e){return e.TABLE_NAME===t.name&&"PRIMARY KEY"===e.CONSTRAINT_TYPE}).map(function(e){return new s.TablePrimaryKey(e.CONSTRAINT_NAME,e.COLUMN_NAME)}),t.foreignKeys=b.filter(function(e){return e.TABLE_NAME===t.name&&"FOREIGN KEY"===e.CONSTRAINT_TYPE}).map(function(e){return new a.TableForeignKey(e.CONSTRAINT_NAME,[],[],"","")}),t.indices=_.filter(function(e){return e.TABLE_NAME===t.name&&!t.foreignKeys.find(function(t){return t.name===e.INDEX_NAME})&&!t.primaryKeys.find(function(t){return t.name===e.INDEX_NAME})}).map(function(e){return e.INDEX_NAME}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(n){var r=_.filter(function(e){return e.TABLE_NAME===t.name&&e.INDEX_NAME===n}).map(function(e){return e.COLUMN_NAME}),i=!!_.find(function(e){return e.TABLE_NAME===t.name&&e.INDEX_NAME===n&&!0===e.IS_UNIQUE});return new u.TableIndex(e.TABLE_NAME,n,r,i)}),[2,t]})})}))]:[2,[]]}})})},e.prototype.hasDatabase=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.query("SELECT DB_ID('"+e+"') as db_id")];case 1:return t=r.sent(),n=t[0].db_id,[2,!!n]}})})},e.prototype.hasTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r;return __generator(this,function(i){switch(i.label){case 0:return t=this.parseTablePath(e),n="SELECT * FROM "+t.database+".INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = '"+t.tableName+"' AND TABLE_SCHEMA = "+("SCHEMA_NAME()"===t.schema?t.schema:"'"+t.schema+"'"),[4,this.query(n)];case 1:return r=i.sent(),[2,!!r.length]}})})},e.prototype.createDatabase=function(e){return this.query("IF DB_ID('"+e+"') IS NULL CREATE DATABASE "+e)},e.prototype.createSchema=function(e){var t=this;return this.driver.options.schema&&e.push(this.driver.options.schema),m.PromiseUtils.runInSequence(e,function(e){return __awaiter(t,void 0,void 0,function(){var t,n,r,i,o;return __generator(this,function(a){switch(a.label){case 0:return-1!==e.indexOf(".")?[3,1]:(o="IF SCHEMA_ID('"+e+"') IS NULL BEGIN EXEC sp_executesql N'CREATE SCHEMA "+e+"' END",[2,this.query(o)]);case 1:return t=e.split(".")[0],n=e.split(".")[1],[4,this.query("SELECT DB_NAME() AS db_name")];case 2:return r=a.sent(),i=r[0].db_name,[4,this.query("USE "+t)];case 3:return a.sent(),o="IF SCHEMA_ID('"+n+"') IS NULL BEGIN EXEC sp_executesql N'CREATE SCHEMA "+n+"' END",[4,this.query(o)];case 4:return a.sent(),[2,this.query("USE "+i)]}})})})},e.prototype.createTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i=this;return __generator(this,function(o){switch(o.label){case 0:return t=e.columns.map(function(t){return i.buildCreateColumnSql(e.name,t,!1,!0)}).join(", "),n="CREATE TABLE "+this.escapeTablePath(e)+" ("+t,n+=e.columns.filter(function(e){return e.isUnique}).map(function(t){var n=e.name+"_"+t.name,r=e.schema||i.driver.options.schema;return r&&(n=r+"_"+n),', CONSTRAINT "uk_'+n+'" UNIQUE ("'+t.name+'")'}).join(" "),(r=e.columns.filter(function(e){return e.isPrimary})).length>0&&(n+=", PRIMARY KEY("+r.map(function(e){return'"'+e.name+'"'}).join(", ")+")"),n+=")",[4,this.query(n)];case 1:return o.sent(),[2]}})})},e.prototype.dropTable=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.query("DROP TABLE "+this.escapeTablePath(e))];case 1:return t.sent(),[2]}})})},e.prototype.hasColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){switch(o.label){case 0:return n=this.parseTablePath(e),r="SELECT * FROM "+n.database+".INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = '"+n.tableName+"' AND COLUMN_NAME = '"+t+"' AND TABLE_SCHEMA = "+("SCHEMA_NAME()"===n.schema?n.schema:"'"+n.schema+"'"),[4,this.query(r)];case 1:return i=o.sent(),[2,!!i.length]}})})},e.prototype.addColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n=e instanceof o.Table?e.name:this.parseTablePath(e).tableName,r="ALTER TABLE "+this.escapeTablePath(e)+" ADD "+this.buildCreateColumnSql(n,t,!1,!0),[2,this.query(r)]})})},e.prototype.addColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.addColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.renameColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s;return __generator(this,function(u){switch(u.label){case 0:return r=void 0,e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=u.sent(),u.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(a=void 0,!(a=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return s=void 0,n instanceof i.TableColumn?s=n:(s=a.clone()).name=n,[2,this.changeColumn(r,a,s)]}})})},e.prototype.changeColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s;return __generator(this,function(u){switch(u.label){case 0:return r=void 0,e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=u.sent(),u.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(a=void 0,!(a=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return n.isGenerated===a.isGenerated?[3,6]:[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' DROP COLUMN "'+n.name+'"')];case 4:return u.sent(),[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+" ADD "+this.buildCreateColumnSql(r.name,n,!1,!1))];case 5:u.sent(),u.label=6;case 6:return s="ALTER TABLE "+this.escapeTablePath(e)+" ALTER COLUMN "+this.buildCreateColumnSql(r.name,n,!0,!1),[4,this.query(s)];case 7:return u.sent(),n.isUnique===a.isUnique?[3,11]:!0!==n.isUnique?[3,9]:[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' ADD CONSTRAINT "uk_'+r.name+"_"+n.name+'" UNIQUE ("'+n.name+'")')];case 8:return u.sent(),[3,11];case 9:return!1!==n.isUnique?[3,11]:[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "uk_'+r.name+"_"+n.name+'"')];case 10:u.sent(),u.label=11;case 11:return n.default===a.default?[3,16]:null===n.default||void 0===n.default?[3,14]:[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "df_'+r.name+"_"+n.name+'"')];case 12:return u.sent(),[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' ADD CONSTRAINT "df_'+r.name+"_"+n.name+'" DEFAULT '+n.default+' FOR "'+n.name+'"')];case 13:return u.sent(),[3,16];case 14:return null===a.default||void 0===a.default?[3,16]:[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "df_'+r.name+"_"+n.name+'"')];case 15:u.sent(),u.label=16;case 16:return[2]}})})},e.prototype.changeColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(n){return[2,this.changeColumn(e,t.oldColumn,t.newColumn)]})})}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return t.default?[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "df_'+e.name+"_"+t.name+'"')]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' DROP COLUMN "'+t.name+'"')];case 3:return n.sent(),[2]}})})},e.prototype.dropColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.updatePrimaryKeys=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return __generator(this,function(a){switch(a.label){case 0:return t=e.schema||"SCHEMA_NAME()",n=e.database||this.driver.database,r="SELECT columnUsages.*, tableConstraints.CONSTRAINT_TYPE FROM "+n+".INFORMATION_SCHEMA.KEY_COLUMN_USAGE columnUsages\nLEFT JOIN "+n+".INFORMATION_SCHEMA.TABLE_CONSTRAINTS tableConstraints ON tableConstraints.CONSTRAINT_NAME = columnUsages.CONSTRAINT_NAME AND tableConstraints.CONSTRAINT_TYPE = 'PRIMARY KEY'\nWHERE tableConstraints.TABLE_CATALOG = '"+n+"' AND columnUsages.TABLE_SCHEMA = '"+t+"' AND tableConstraints.TABLE_SCHEMA = '"+t+"'",[4,this.query(r)];case 1:return(i=a.sent()).length>0?[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "'+i[0].CONSTRAINT_NAME+'"')]:[3,3];case 2:a.sent(),a.label=3;case 3:return(o=e.primaryKeys.map(function(e){return'"'+e.columnName+'"'})).length>0?[4,this.query("ALTER TABLE "+this.escapeTablePath(e)+" ADD PRIMARY KEY ("+o.join(", ")+")")]:[3,5];case 4:a.sent(),a.label=5;case 5:return[2]}})})},e.prototype.createForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){return n=t.columnNames.map(function(e){return'"'+e+'"'}).join(", "),r=t.referencedColumnNames.map(function(e){return'"'+e+'"'}).join(","),i="ALTER TABLE "+this.escapeTablePath(e)+' ADD CONSTRAINT "'+t.name+'" FOREIGN KEY ('+n+") REFERENCES "+this.escapeTablePath(t.referencedTablePath)+"("+r+")",t.onDelete&&(i+=" ON DELETE "+t.onDelete),[2,this.query(i)]})})},e.prototype.createForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.createForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){return n="ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "'+t.name+'"',[2,this.query(n)]})})},e.prototype.dropForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.createIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:return n=t.columnNames.map(function(e){return'"'+e+'"'}).join(", "),r="CREATE "+(t.isUnique?"UNIQUE ":"")+'INDEX "'+t.name+'" ON '+this.escapeTablePath(e)+"("+n+")",[4,this.query(r)];case 1:return i.sent(),[2]}})})},e.prototype.dropIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return n='DROP INDEX "'+t+'" ON '+this.escapeTablePath(e),[4,this.query(n)];case 1:return r.sent(),[2]}})})},e.prototype.truncate=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.query("TRUNCATE TABLE "+this.escapeTablePath(e))];case 1:return t.sent(),[2]}})})},e.prototype.clearDatabase=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return __generator(this,function(c){switch(c.label){case 0:return[4,this.hasDatabase(t)];case 1:return(n=c.sent())?(e||(e=[]),e.push(this.driver.options.schema||"SCHEMA_NAME()"),r=e.map(function(e){return"SCHEMA_NAME()"===e?e:"'"+e+"'"}).join(", "),[4,this.startTransaction()]):[2,Promise.resolve()];case 2:c.sent(),c.label=3;case 3:return c.trys.push([3,8,,13]),i="SELECT * FROM "+t+".INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA IN ("+r+")",[4,this.query(i)];case 4:return o=c.sent(),[4,Promise.all(o.map(function(e){return __awaiter(u,void 0,void 0,function(){var n,r,i=this;return __generator(this,function(o){switch(o.label){case 0:return n="SELECT 'ALTER TABLE \""+t+"\".\"' + OBJECT_SCHEMA_NAME(fk.parent_object_id, DB_ID('"+t+"')) + '\".\"' + OBJECT_NAME(fk.parent_object_id, DB_ID('"+t+"')) + '\" DROP CONSTRAINT \"' + fk.name + '\"' as query FROM "+t+".sys.foreign_keys AS fk WHERE fk.referenced_object_id = object_id('\""+t+'"."'+e.TABLE_SCHEMA+'"."'+e.TABLE_NAME+"\"')",[4,this.query(n)];case 1:return r=o.sent(),[2,Promise.all(r.map(function(e){return e.query}).map(function(e){return i.query(e)}))]}})})}))];case 5:return c.sent(),[4,Promise.all(o.map(function(e){var t='DROP TABLE "'+e.TABLE_CATALOG+'"."'+e.TABLE_SCHEMA+'"."'+e.TABLE_NAME+'"';return u.query(t)}))];case 6:return c.sent(),[4,this.commitTransaction()];case 7:return c.sent(),[3,13];case 8:a=c.sent(),c.label=9;case 9:return c.trys.push([9,11,,12]),[4,this.rollbackTransaction()];case 10:return c.sent(),[3,12];case 11:return s=c.sent(),[3,12];case 12:throw a;case 13:return[2]}})})},e.prototype.enableSqlMemory=function(){this.sqlMemoryMode=!0},e.prototype.disableSqlMemory=function(){this.sqlsInMemory=[],this.sqlMemoryMode=!1},e.prototype.getMemorySql=function(){return this.sqlsInMemory},e.prototype.escapeTablePath=function(e,t){var n;if(e instanceof o.Table){var r=e.schema||this.driver.options.schema;r?(n=r+"."+e.name,e.database&&(n=e.database+"."+n)):(n=e.name,e.database&&(n=e.database+".."+n))}else n=-1===e.indexOf(".")&&this.driver.options.schema?this.driver.options.schema+"."+e:e;return n.split(".").map(function(e){return""===e?e:t?e:'"'+e+'"'}).join(".")},e.prototype.parseTablePath=function(e){var t=e instanceof o.Table?e.name:e;return 3===t.split(".").length?{database:t.split(".")[0],schema:""===t.split(".")[1]?"SCHEMA_NAME()":t.split(".")[1],tableName:t.split(".")[2]}:2===t.split(".").length?{database:this.driver.database,schema:t.split(".")[0],tableName:t.split(".")[1]}:{database:this.driver.database,schema:this.driver.options.schema?this.driver.options.schema:"SCHEMA_NAME()",tableName:t}},e.prototype.parametrize=function(e,t){return void 0===t&&(t=0),Object.keys(e).map(function(e,n){return'"'+e+'"=@'+(t+n)})},e.prototype.buildCreateColumnSql=function(e,t,n,r){var i='"'+t.name+'" '+this.connection.driver.createFullType(t);return t.collation&&(i+=" COLLATE "+t.collation),!0!==t.isNullable&&(i+=" NOT NULL"),!0!==t.isGenerated||"increment"!==t.generationStrategy||n||(i+=" IDENTITY(1,1)"),t.comment&&(i+=" COMMENT '"+t.comment+"'"),r&&void 0!==t.default&&null!==t.default&&(i+=' CONSTRAINT "df_'+e+"_"+t.name+'" DEFAULT '+t.default),t.isGenerated&&"uuid"===t.generationStrategy&&!t.default&&(i+=" DEFAULT NEWSEQUENTIALID()"),i},e}(),e("SqlServerQueryRunner",f)}}}),System.register("typeorm/driver/sqlserver/SqlServerDriver",["typeorm/error/ConnectionIsNotSetError","typeorm/error/DriverPackageNotInstalledError","typeorm/driver/DriverUtils","typeorm/driver/sqlserver/SqlServerQueryRunner","typeorm/util/DateUtils","typeorm/platform/PlatformTools","typeorm/schema-builder/RdbmsSchemaBuilder","typeorm/driver/sqlserver/MssqlParameter"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e}],execute:function(){l=function(){function e(e){this.slaves=[],this.isReplicated=!1,this.treeSupport=!0,this.supportedDataTypes=["bigint","bit","decimal","int","money","numeric","smallint","smallmoney","tinyint","float","real","date","datetime2","datetime","datetimeoffset","smalldatetime","time","char","text","varchar","nchar","ntext","nvarchar","binary","image","varbinary","cursor","hierarchyid","sql_variant","table","timestamp","uniqueidentifier","xml"],this.withLengthColumnTypes=["char","varchar","nchar","nvarchar","binary","varbinary"],this.mappedDataTypes={createDate:"datetime2",createDateDefault:"getdate()",updateDate:"datetime2",updateDateDefault:"getdate()",version:"int",treeLevel:"int",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"nvarchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"nvarchar(MAX)",cacheResult:"nvarchar(MAX)"},this.dataTypeDefaults={varchar:{length:255},nvarchar:{length:255}},this.connection=e,this.options=e.options,this.isReplicated=!!this.options.replication,this.loadDependencies()}return e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r=this;return __generator(this,function(i){switch(i.label){case 0:return this.options.replication?(e=this,[4,Promise.all(this.options.replication.slaves.map(function(e){return r.createPool(r.options,e)}))]):[3,3];case 1:return e.slaves=i.sent(),t=this,[4,this.createPool(this.options,this.options.replication.master)];case 2:return t.master=i.sent(),this.database=this.options.replication.master.database,[3,5];case 3:return n=this,[4,this.createPool(this.options,this.options)];case 4:n.master=i.sent(),this.database=this.options.database,i.label=5;case 5:return[2]}})})},e.prototype.afterConnect=function(){return Promise.resolve()},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.master?(this.master.close(),this.slaves.forEach(function(e){return e.close()}),this.master=void 0,this.slaves=[],[2]):[2,Promise.reject(new n.ConnectionIsNotSetError("mssql"))]})})},e.prototype.createSchemaBuilder=function(){return new u.RdbmsSchemaBuilder(this.connection)},e.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),new o.SqlServerQueryRunner(this,e)},e.prototype.escapeQueryWithParameters=function(e,t){if(!t||!Object.keys(t).length)return[e,[]];var n=[],r=Object.keys(t).map(function(e){return"(:"+e+"\\b)"}).join("|");return e=e.replace(new RegExp(r,"g"),function(e){var r=t[e.substr(1)];return r instanceof Array?r.map(function(e){return n.push(e),"@"+(n.length-1)}).join(", "):r instanceof Function?r():(n.push(r),"@"+(n.length-1))}),[e,n]},e.prototype.escape=function(e){return'"'+e+'"'},e.prototype.preparePersistentValue=function(e,t){return t.transformer&&(e=t.transformer.to(e)),null===e||void 0===e?e:t.type===Boolean?!0===e?1:0:"date"===t.type?a.DateUtils.mixedDateToDate(e):"time"===t.type?a.DateUtils.mixedTimeToDate(e):"datetime"===t.type||"smalldatetime"===t.type||t.type===Date?a.DateUtils.mixedDateToDate(e,!0,!1):"datetime2"===t.type||"datetimeoffset"===t.type?a.DateUtils.mixedDateToDate(e,!0,!0):"simple-array"===t.type?a.DateUtils.simpleArrayToString(e):"simple-json"===t.type?a.DateUtils.simpleJsonToString(e):e},e.prototype.prepareHydratedValue=function(e,t){return null===e||void 0===e?e:(t.type===Boolean?e=!!e:"datetime"===t.type||t.type===Date||"datetime2"===t.type||"smalldatetime"===t.type||"datetimeoffset"===t.type?e=a.DateUtils.normalizeHydratedDate(e):"date"===t.type?e=a.DateUtils.mixedDateToDateString(e):"time"===t.type?e=a.DateUtils.mixedTimeToString(e):"simple-array"===t.type?e=a.DateUtils.stringToSimpleArray(e):"simple-json"===t.type&&(e=a.DateUtils.stringToSimpleJson(e)),t.transformer&&(e=t.transformer.from(e)),e)},e.prototype.normalizeType=function(e){return e.type===Number?"int":e.type===String?"nvarchar":e.type===Date?"datetime":e.type===Boolean?"bit":e.type===Buffer?"binary":"uuid"===e.type?"uniqueidentifier":"simple-array"===e.type?"ntext":"simple-json"===e.type?"ntext":"integer"===e.type?"int":"dec"===e.type?"decimal":"float"===e.type&&e.precision&&e.precision>=1&&e.precision<25?"real":"double precision"===e.type?"float":e.type||""},e.prototype.normalizeDefault=function(e){return"number"==typeof e.default?""+e.default:"boolean"==typeof e.default?!0===e.default?"1":"0":"function"==typeof e.default?"("+e.default()+")":"string"==typeof e.default?"'"+e.default+"'":e.default},e.prototype.normalizeIsUnique=function(e){return e.isUnique},e.prototype.getColumnLength=function(e){if(e.length)return e.length;var t=this.normalizeType(e);return this.dataTypeDefaults&&this.dataTypeDefaults[t]&&this.dataTypeDefaults[t].length?this.dataTypeDefaults[t].length.toString():""},e.prototype.createFullType=function(e){var t=e.type;return e.length?t+="("+e.length+")":e.precision&&e.scale?t+="("+e.precision+","+e.scale+")":e.precision&&"real"!==e.type?t+="("+e.precision+")":e.scale?t+="("+e.scale+")":this.dataTypeDefaults&&this.dataTypeDefaults[e.type]&&this.dataTypeDefaults[e.type].length&&(t+="("+this.dataTypeDefaults[e.type].length.toString()+")"),e.isArray&&(t+=" array"),t},e.prototype.obtainMasterConnection=function(){return Promise.resolve(this.master)},e.prototype.obtainSlaveConnection=function(){if(!this.slaves.length)return this.obtainMasterConnection();var e=Math.floor(Math.random()*this.slaves.length);return Promise.resolve(this.slaves[e])},e.prototype.parametrizeValue=function(e,t){if(t instanceof c.MssqlParameter)return t;var n=this.normalizeType({type:e.type});return e.length?new c.MssqlParameter(t,n,e.length):e.precision&&e.scale?new c.MssqlParameter(t,n,e.precision,e.scale):e.precision?new c.MssqlParameter(t,n,e.precision):e.scale?new c.MssqlParameter(t,n,e.scale):new c.MssqlParameter(t,n)},e.prototype.parametrizeMap=function(e,t){var n=this;if(!this.connection.hasMetadata(e))return t;var r=this.connection.getMetadata(e);return Object.keys(t).reduce(function(e,i){var o=t[i],a=r.findColumnWithDatabaseName(i);return a?(e[i]=n.parametrizeValue(a,o),e):o},{})},e.prototype.loadDependencies=function(){try{this.mssql=s.PlatformTools.load("mssql")}catch(e){throw new r.DriverPackageNotInstalledError("SQL Server","mssql")}},e.prototype.createPool=function(e,t){var n=this;t=Object.assign(t,i.DriverUtils.buildDriverOptions(t));var r=Object.assign({},{connectionTimeout:this.options.connectionTimeout,requestTimeout:this.options.requestTimeout,stream:this.options.stream,pool:this.options.pool,options:this.options.options},{server:t.host,user:t.username,password:t.password,database:t.database,port:t.port,domain:t.domain},e.extra||{});return r.options?r.options.useUTC||(r.options.useUTC=!1):r.options={useUTC:!1},new Promise(function(e,t){var i=new n.mssql.ConnectionPool(r).connect(function(n){if(n)return t(n);e(i)})})},e}(),e("SqlServerDriver",l)}}}),System.register("typeorm/driver/postgres/PostgresQueryRunner",["typeorm/error/TransactionAlreadyStartedError","typeorm/error/TransactionNotStartedError","typeorm/schema-builder/schema/TableColumn","typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableIndex","typeorm/schema-builder/schema/TableForeignKey","typeorm/schema-builder/schema/TablePrimaryKey","typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/error/QueryFailedError","typeorm/util/OrmUtils"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e}],execute:function(){d=function(){function e(e,t){void 0===t&&(t="master"),this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.sqlMemoryMode=!1,this.sqlsInMemory=[],this.driver=e,this.connection=e.connection,this.mode=t}return e.prototype.connect=function(){var e=this;return this.databaseConnection?Promise.resolve(this.databaseConnection):this.databaseConnectionPromise?this.databaseConnectionPromise:("slave"===this.mode&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then(function(t){var n=t[0],r=t[1];return e.driver.connectedQueryRunners.push(e),e.databaseConnection=n,e.releaseCallback=r,e.databaseConnection}):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then(function(t){var n=t[0],r=t[1];return e.driver.connectedQueryRunners.push(e),e.databaseConnection=n,e.releaseCallback=r,e.databaseConnection}),this.databaseConnectionPromise)},e.prototype.release=function(){this.isReleased=!0,this.releaseCallback&&this.releaseCallback();var e=this.driver.connectedQueryRunners.indexOf(this);return-1!==e&&this.driver.connectedQueryRunners.splice(e),Promise.resolve()},e.prototype.startTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(this.isTransactionActive)throw new n.TransactionAlreadyStartedError;return this.isTransactionActive=!0,[4,this.query("START TRANSACTION")];case 1:return e.sent(),[2]}})})},e.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("COMMIT")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.rollbackTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return[4,this.query("ROLLBACK")];case 1:return e.sent(),this.isTransactionActive=!1,[2]}})})},e.prototype.query=function(e,t){var n=this;if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;return new Promise(function(r,i){return __awaiter(n,void 0,void 0,function(){var n,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return[4,this.connect()];case 1:return n=s.sent(),this.driver.connection.logger.logQuery(e,t,this),o=+new Date,n.query(e,t,function(n,s){var u=a.driver.connection.options.maxQueryExecutionTime,c=+new Date-o;u&&c>u&&a.driver.connection.logger.logQuerySlow(c,e,t,a),n?(a.driver.connection.logger.logQueryError(n,e,t,a),i(new l.QueryFailedError(e,t,n))):r(s.rows)}),[2]}})})})},e.prototype.stream=function(e,t,n,r){var i=this,o=this.driver.loadStreamDependency();if(this.isReleased)throw new c.QueryRunnerAlreadyReleasedError;return new Promise(function(a,s){return __awaiter(i,void 0,void 0,function(){var i,u,c;return __generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.connect()];case 1:return i=l.sent(),this.driver.connection.logger.logQuery(e,t,this),u=i.query(new o(e,t)),n&&u.on("end",n),r&&u.on("error",r),a(u),[3,3];case 2:return c=l.sent(),s(c),[3,3];case 3:return[2]}})})})},e.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,d;return __generator(this,function(m){switch(m.label){case 0:return n=Object.keys(t),r=n.map(function(e){return'"'+e+'"'}).join(", "),i=n.map(function(e,t){return"$"+(t+1)}).join(","),o=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[],a=o.map(function(e){return'"'+e.databaseName+'"'}).join(", "),s=o.length>0?" RETURNING "+a:"",u=r.length>0?"INSERT INTO "+this.escapeTablePath(e)+"("+r+") VALUES ("+i+") "+s:"INSERT INTO "+this.escapeTablePath(e)+" DEFAULT VALUES "+s,c=n.map(function(e){return t[e]}),[4,this.query(u,c)];case 1:return l=m.sent(),d=o.reduce(function(e,t){var n=t.createValueMap(l[0][t.databaseName]);return p.OrmUtils.mergeDeep(e,n)},{}),[2,{result:l,generatedMap:Object.keys(d).length>0?d:void 0}]}})})},e.prototype.update=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u;return __generator(this,function(c){switch(c.label){case 0:return r=this.parametrize(t).join(", "),i=this.parametrize(n,Object.keys(t).length).join(" AND "),o="UPDATE "+this.escapeTablePath(e)+" SET "+r+(i?" WHERE "+i:""),a=Object.keys(t).map(function(e){return t[e]}),s=Object.keys(n).map(function(e){return n[e]}),u=a.concat(s),[4,this.query(o,u)];case 1:return c.sent(),[2]}})})},e.prototype.delete=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,i,o;return __generator(this,function(a){switch(a.label){case 0:return r="string"==typeof t?t:this.parametrize(t).join(" AND "),i=t instanceof Object?Object.keys(t).map(function(e){return t[e]}):n,o="DELETE FROM "+this.escapeTablePath(e)+" WHERE "+r,[4,this.query(o,i)];case 1:return a.sent(),[2]}})})},e.prototype.insertIntoClosureTable=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){var i,o;return __generator(this,function(a){switch(a.label){case 0:return i="",i=r?"INSERT INTO "+this.escapeTablePath(e)+'("ancestor", "descendant", "level") SELECT "ancestor", '+t+', "level" + 1 FROM '+this.escapeTablePath(e)+' WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t+", 1":"INSERT INTO "+this.escapeTablePath(e)+'("ancestor", "descendant") SELECT "ancestor", '+t+" FROM "+this.escapeTablePath(e)+' WHERE "descendant" = '+n+" UNION ALL SELECT "+t+", "+t,[4,this.query(i)];case 1:return a.sent(),r?[4,this.query("SELECT MAX(level) as level FROM "+this.escapeTablePath(e)+" WHERE descendant = "+n)]:[3,3];case 2:return o=a.sent(),[2,o&&o[0]&&o[0].level?parseInt(o[0].level)+1:1];case 3:return[2,-1]}})})},e.prototype.getTable=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.getTables([e])];case 1:return t=n.sent(),[2,t.length>0?t[0]:void 0]}})})},e.prototype.getTables=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,c,l,p,d,m,f,h,y,g,v,b,E,_,T,M,C,w,N=this;return __generator(this,function(R){switch(R.label){case 0:return e&&e.length?(t=e.map(function(e){return-1===e.indexOf(".")?e:e.split(".")[1]}),[4,this.query("SELECT * FROM current_schema()")]):[2,[]];case 1:return n=R.sent(),r=n[0].current_schema,(c=e.filter(function(e){return-1!==e.indexOf(".")}).map(function(e){return e.split(".")[0]})).push(this.driver.options.schema||r),l=t.map(function(e){return"'"+e+"'"}).join(", "),p=c.map(function(e){return"'"+e+"'"}).join(", "),d=e.map(function(e){var t=e.split("."),n=t[0],i=t[1];return i||(i=n,n=N.driver.options.schema||r),"table_schema = '"+n+"' AND table_name = '"+i+"'"}).join(" OR "),m="SELECT * FROM information_schema.tables WHERE "+d,f="SELECT * FROM information_schema.columns WHERE table_schema IN ("+p+")",h="SELECT t.relname AS table_name, i.relname AS index_name, a.attname AS column_name, ix.indisunique AS is_unique, a.attnum, ix.indkey FROM pg_class t, pg_class i, pg_index ix, pg_attribute a, pg_namespace ns\nWHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid\nAND a.attnum = ANY(ix.indkey) AND t.relkind = 'r' AND t.relname IN ("+l+") AND t.relnamespace = ns.OID AND ns.nspname IN ("+p+") ORDER BY t.relname, i.relname",y="SELECT table_name, constraint_name FROM information_schema.table_constraints WHERE table_schema IN ("+p+") AND constraint_type = 'FOREIGN KEY'",g="SELECT * FROM information_schema.table_constraints WHERE table_schema IN ("+p+") AND constraint_type = 'UNIQUE'",v="SELECT c.column_name, tc.table_name, tc.constraint_name FROM information_schema.table_constraints tc\nJOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_name)\nJOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name\nwhere constraint_type = 'PRIMARY KEY' AND c.table_schema IN ("+p+")",[4,Promise.all([this.query(m),this.query(f),this.query(h),this.query(y),this.query(g),this.query(v)])];case 2:return b=R.sent(),E=b[0],_=b[1],T=b[2],M=b[3],C=b[4],w=b[5],E.length?[2,E.map(function(e){var t=new o.Table(e.table_name);return t.database=e.table_catalog,t.schema=e.table_schema,t.columns=_.filter(function(e){return e.table_name===t.name}).map(function(e){var n=t.schema===r?e.table_name+"_"+e.column_name+"_seq":t.schema+"."+e.table_name+"_"+e.column_name+"_seq",o=!!e.column_default&&(e.column_default.replace(/"/gi,"")==="nextval('"+n+"'::regclass)"||/^uuid\_generate\_v\d\(\)/.test(e.column_default)),a=new i.TableColumn;if(a.name=e.column_name,a.type=e.data_type.toLowerCase(),a.length=e.character_maximum_length?e.character_maximum_length.toString():"",a.precision=e.numeric_precision,a.scale=e.numeric_scale,a.default=null!==e.column_default&&void 0!==e.column_default?e.column_default.replace(/::character varying/,""):void 0,a.isNullable="YES"===e.is_nullable,a.isGenerated=o,a.comment="",a.charset=e.character_set_name,a.collation=e.collation_name,a.isUnique=!!C.find(function(t){return t.constraint_name==="uk_"+e.table_name+"_"+e.column_name}),"array"===a.type){a.isArray=!0;var s=e.udt_name.substring(1);a.type=N.connection.driver.normalizeType({type:s})}return"time without time zone"!==a.type&&"time with time zone"!==a.type&&"timestamp without time zone"!==a.type&&"timestamp with time zone"!==a.type||(a.precision=e.datetime_precision),a}),t.primaryKeys=w.filter(function(e){return e.table_name===t.name}).map(function(e){return new u.TablePrimaryKey(e.constraint_name,e.column_name)}),t.foreignKeys=M.filter(function(e){return e.table_name===t.name}).map(function(e){return new s.TableForeignKey(e.constraint_name,[],[],"","")}),t.indices=T.filter(function(e){return e.table_name===t.name&&!t.foreignKeys.find(function(t){return t.name===e.index_name})&&!t.primaryKeys.find(function(t){return t.name===e.index_name})&&!C.find(function(t){return t.constraint_name===e.index_name})}).map(function(e){return e.index_name}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(n){var r=T.filter(function(e){return e.table_name===t.name&&e.index_name===n}),i=r[0].indkey.split(" ").map(function(e){return parseInt(e)}).map(function(e){return r.find(function(t){return t.attnum===e}).column_name});return new a.TableIndex(e.table_name,n,i,r[0].is_unique)}),t})]:[2,[]]}})})},e.prototype.hasDatabase=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve(!1)]})})},e.prototype.hasTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r;return __generator(this,function(i){switch(i.label){case 0:return t=this.parseTablePath(e),n="SELECT * FROM information_schema.tables WHERE table_schema = "+t.schema+" AND table_name = "+t.tableName,[4,this.query(n)];case 1:return r=i.sent(),[2,!!r.length]}})})},e.prototype.createDatabase=function(e){return Promise.resolve([])},e.prototype.createSchema=function(e){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(n){return this.driver.options.schema&&e.push(this.driver.options.schema),[2,Promise.all(e.map(function(e){return t.query('CREATE SCHEMA IF NOT EXISTS "'+e+'"')}))]})})},e.prototype.createTable=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return t=e.schema||this.driver.options.schema,n=e.columns.map(function(e){return a.buildCreateColumnSql(e,!1)}).join(", "),r="CREATE TABLE "+this.escapeTablePath(e)+" ("+n,r+=e.columns.filter(function(e){return e.isUnique}).map(function(n){return t?', CONSTRAINT "uk_'+t+"_"+e.name+"_"+n.name+'" UNIQUE ("'+n.name+'")':', CONSTRAINT "uk_'+e.name+"_"+n.name+'" UNIQUE ("'+n.name+'")'}).join(" "),(i=e.columns.filter(function(e){return e.isPrimary})).length>0&&(r+=", PRIMARY KEY("+i.map(function(e){return'"'+e.name+'"'}).join(", ")+")"),r+=")",o='DROP TABLE "'+e.name+'"',[4,this.schemaQuery(r,o)];case 1:return s.sent(),[2]}})})},e.prototype.dropTable=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.query("DROP TABLE "+this.escapeTablePath(e))];case 1:return t.sent(),[2]}})})},e.prototype.hasColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){switch(o.label){case 0:return n=this.parseTablePath(e),r="SELECT * FROM information_schema.columns WHERE table_schema = "+n.schema+" AND table_name = '"+n.tableName+"' AND column_name = '"+t+"'",[4,this.query(r)];case 1:return i=o.sent(),[2,!!i.length]}})})},e.prototype.addColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n="ALTER TABLE "+this.escapeTablePath(e)+" ADD "+this.buildCreateColumnSql(t,!1),r="ALTER TABLE "+this.escapeTablePath(e)+' DROP "'+t.name+'"',[2,this.schemaQuery(n,r)]})})},e.prototype.addColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.addColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.renameColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s;return __generator(this,function(u){switch(u.label){case 0:return r=void 0,e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=u.sent(),u.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(a=void 0,!(a=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return s=void 0,n instanceof i.TableColumn?s=n:(s=a.clone()).name=n,[2,this.changeColumn(r,a,s)]}})})},e.prototype.changeColumn=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,a,s,u,c,l,p=this;return __generator(this,function(d){switch(d.label){case 0:return r=void 0,a=[],e instanceof o.Table?(r=e,[3,3]):[3,1];case 1:return[4,this.getTable(e)];case 2:r=d.sent(),d.label=3;case 3:if(!r)throw new Error("Table "+e+" was not found.");if(s=void 0,!(s=t instanceof i.TableColumn?t:r.columns.find(function(e){return e.name===t})))throw new Error('Column "'+t+'" was not found in the "'+e+'" table.');return this.connection.driver.createFullType(s)===this.connection.driver.createFullType(n)&&s.name===n.name||(l="ALTER TABLE "+this.escapeTablePath(e)+' ALTER COLUMN "'+s.name+'"',this.connection.driver.createFullType(s)!==this.connection.driver.createFullType(n)&&(l+=" TYPE "+this.connection.driver.createFullType(n)),s.name!==n.name&&(l+=" RENAME TO "+n.name),a.push({up:l,down:"-- TODO: revert "+l})),s.isNullable!==n.isNullable&&(l="ALTER TABLE "+this.escapeTablePath(e)+' ALTER COLUMN "'+s.name+'"',n.isNullable?l+=" DROP NOT NULL":l+=" SET NOT NULL",a.push({up:l,down:"-- TODO: revert "+l})),s.isGenerated!==n.isGenerated&&(u=r.schema||this.driver.options.schema,s.isGenerated||"uuid"===n.type?(l="ALTER TABLE "+this.escapeTablePath(r)+' ALTER COLUMN "'+s.name+'" DROP DEFAULT',a.push({up:l,down:"-- TODO: revert "+l}),c=u?'DROP SEQUENCE "'+u+'"."'+r.name+"_"+s.name+'_seq"':'DROP SEQUENCE "'+r.name+"_"+s.name+'_seq"',a.push({up:c,down:"-- TODO: revert "+c})):(l=u?'CREATE SEQUENCE "'+u+'"."'+r.name+"_"+s.name+'_seq" OWNED BY '+this.escapeTablePath(r)+'."'+s.name+'"':'CREATE SEQUENCE "'+r.name+"_"+s.name+'_seq" OWNED BY '+this.escapeTablePath(r)+'."'+s.name+'"',a.push({up:l,down:"-- TODO: revert "+l}),c=u?"ALTER TABLE "+this.escapeTablePath(r)+' ALTER COLUMN "'+s.name+'" SET DEFAULT nextval(\'"'+u+"."+r.name+"_"+s.name+"_seq\"')":"ALTER TABLE "+this.escapeTablePath(r)+' ALTER COLUMN "'+s.name+'" SET DEFAULT nextval(\'"'+r.name+"_"+s.name+"_seq\"')",a.push({up:c,down:"-- TODO: revert "+c}))),s.comment!==n.comment&&(l="COMMENT ON COLUMN "+this.escapeTablePath(e)+'."'+s.name+"\" is '"+n.comment+"'",a.push({up:l,down:"-- TODO: revert "+l})),s.isUnique!==n.isUnique&&(!0===n.isUnique?(l="ALTER TABLE "+this.escapeTablePath(e)+' ADD CONSTRAINT "uk_'+r.name+"_"+n.name+'" UNIQUE ("'+n.name+'")',a.push({up:l,down:"-- TODO: revert "+l})):!1===n.isUnique&&(l="ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "uk_'+r.name+"_"+n.name+'"',a.push({up:l,down:"-- TODO: revert "+l}))),n.default!==s.default&&(null!==n.default&&void 0!==n.default?(l="ALTER TABLE "+this.escapeTablePath(e)+' ALTER COLUMN "'+n.name+'" SET DEFAULT '+n.default,a.push({up:l,down:"-- TODO: revert "+l})):null!==s.default&&void 0!==s.default&&(l="ALTER TABLE "+this.escapeTablePath(e)+' ALTER COLUMN "'+n.name+'" DROP DEFAULT',a.push({up:l,down:"-- TODO: revert "+l}))),[4,Promise.all(a.map(function(e){var t=e.up,n=e.down;return p.schemaQuery(t,n)}))];case 4:return d.sent(),[2]}})})},e.prototype.changeColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(n){return[2,this.changeColumn(e,t.oldColumn,t.newColumn)]})})}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropColumn=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){return n="ALTER TABLE "+this.escapeTablePath(e)+' DROP "'+t.name+'"',r="ALTER TABLE "+this.escapeTablePath(e)+" ADD "+this.buildCreateColumnSql(t,!1),[2,this.schemaQuery(n,r)]})})},e.prototype.dropColumns=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropColumn(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.updatePrimaryKeys=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return __generator(this,function(u){switch(u.label){case 0:return t=e.primaryKeys.map(function(e){return'"'+e.columnName+'"'}),n="ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT IF EXISTS "'+e.name+'_pkey"',r="-- TODO: revert "+n,[4,this.schemaQuery(n,r)];case 1:return u.sent(),i='DROP INDEX IF EXISTS "'+e.name+'_pkey"',o="-- TODO: revert "+i,[4,this.schemaQuery(i,o)];case 2:return u.sent(),t.length>0?(a="ALTER TABLE "+this.escapeTablePath(e)+" ADD PRIMARY KEY ("+t.join(", ")+")",s="ALTER TABLE "+this.escapeTablePath(e)+" DROP PRIMARY KEY ("+t.join(", ")+")",[4,this.schemaQuery(a,s)]):[3,4];case 3:u.sent(),u.label=4;case 4:return[2]}})})},e.prototype.createForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){return n=this.foreignKeySql(e,t),r=n.add,i=n.drop,[2,this.schemaQuery(r,i)]})})},e.prototype.createForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.createForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.dropForeignKey=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){return n=this.foreignKeySql(e,t),r=n.add,i=n.drop,[2,this.schemaQuery(i,r)]})})},e.prototype.dropForeignKeys=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r=this;return __generator(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return r.dropForeignKey(e,t)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.createIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){switch(o.label){case 0:return n=t.columnNames.map(function(e){return'"'+e+'"'}).join(","),r="CREATE "+(t.isUnique?"UNIQUE ":"")+'INDEX "'+t.name+'" ON '+this.escapeTablePath(e)+"("+n+")",i="-- TODO: revert "+r,[4,this.schemaQuery(r,i)];case 1:return o.sent(),[2]}})})},e.prototype.dropIndex=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i;return __generator(this,function(o){switch(o.label){case 0:return n=this.extractSchema(e),r=n?'DROP INDEX "'+n+'"."'+t+'"':'DROP INDEX "'+t+'"',i="-- TODO: revert "+r,[4,this.schemaQuery(r,i)];case 1:return o.sent(),[2]}})})},e.prototype.truncate=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.query("TRUNCATE TABLE "+this.escapeTablePath(e))];case 1:return t.sent(),[2]}})})},e.prototype.clearDatabase=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return e||(e=[]),e.push(this.driver.options.schema||"current_schema()"),t=e.map(function(e){return"current_schema()"===e?e:"'"+e+"'"}).join(", "),[4,this.startTransaction()];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,6,,11]),n="SELECT 'DROP TABLE IF EXISTS \"' || schemaname || '\".\"' || tablename || '\" CASCADE;' as query FROM pg_tables WHERE schemaname IN ("+t+")",[4,this.query(n)];case 3:return r=s.sent(),[4,Promise.all(r.map(function(e){return a.query(e.query)}))];case 4:return s.sent(),[4,this.commitTransaction()];case 5:return s.sent(),[3,11];case 6:i=s.sent(),s.label=7;case 7:return s.trys.push([7,9,,10]),[4,this.rollbackTransaction()];case 8:return s.sent(),[3,10];case 9:return o=s.sent(),[3,10];case 10:throw i;case 11:return[2]}})})},e.prototype.enableSqlMemory=function(){this.sqlMemoryMode=!0},e.prototype.disableSqlMemory=function(){this.sqlsInMemory=[],this.sqlMemoryMode=!1},e.prototype.getMemorySql=function(){return this.sqlsInMemory},e.prototype.schemaQuery=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return!0===this.sqlMemoryMode?(this.sqlsInMemory.push({up:e,down:t}),[2,Promise.resolve()]):[4,this.query(e)];case 1:return n.sent(),[2]}})})},e.prototype.extractSchema=function(e){return e instanceof o.Table?e.schema||this.driver.options.schema:-1===e.indexOf(".")?this.driver.options.schema:e.split(".")[0]},e.prototype.foreignKeySql=function(e,t){var n="ALTER TABLE "+this.escapeTablePath(e)+' ADD CONSTRAINT "'+t.name+'" FOREIGN KEY ("'+t.columnNames.join('", "')+'") REFERENCES '+this.escapeTablePath(t.referencedTablePath)+'("'+t.referencedColumnNames.join('", "')+'")';return t.onDelete&&(n+=" ON DELETE "+t.onDelete),{add:n,drop:"ALTER TABLE "+this.escapeTablePath(e)+' DROP CONSTRAINT "'+t.name+'"'}},e.prototype.escapeTablePath=function(e,t){if(e instanceof o.Table){var n=e.schema||this.driver.options.schema;e=n?n+"."+e.name:e.name}else e=-1===e.indexOf(".")&&this.driver.options.schema?this.driver.options.schema+"."+e:e;return e.split(".").map(function(e){return t?e:'"'+e+'"'}).join(".")},e.prototype.parseTablePath=function(e){return-1===e.indexOf(".")?{schema:this.driver.options.schema?"'"+this.driver.options.schema+"'":"current_schema()",tableName:"'"+e+"'"}:{schema:"'"+e.split(".")[0]+"'",tableName:"'"+e.split(".")[1]+"'"}},e.prototype.parametrize=function(e,t){return void 0===t&&(t=0),Object.keys(e).map(function(e,n){return'"'+e+'"=$'+(t+n+1)})},e.prototype.buildCreateColumnSql=function(e,t){var n='"'+e.name+'"';return!0===e.isGenerated&&"increment"===e.generationStrategy&&("integer"===e.type&&(n+=" SERIAL"),"smallint"===e.type&&(n+=" SMALLSERIAL"),"bigint"===e.type&&(n+=" BIGSERIAL")),e.isGenerated&&"uuid"!==e.type||(n+=" "+this.connection.driver.createFullType(e)),e.charset&&(n+=' CHARACTER SET "'+e.charset+'"'),e.collation&&(n+=' COLLATE "'+e.collation+'"'),!0!==e.isNullable&&(n+=" NOT NULL"),void 0!==e.default&&null!==e.default&&(n+=" DEFAULT "+e.default),e.isGenerated&&"uuid"===e.generationStrategy&&!e.default&&(n+=" DEFAULT uuid_generate_v4()"),n},e}(),e("PostgresQueryRunner",d)}}}),System.register("typeorm/driver/postgres/PostgresDriver",["typeorm/error/ConnectionIsNotSetError","typeorm/error/DriverPackageNotInstalledError","typeorm/driver/DriverUtils","typeorm/driver/postgres/PostgresQueryRunner","typeorm/util/DateUtils","typeorm/platform/PlatformTools","typeorm/schema-builder/RdbmsSchemaBuilder"],function(e,t){"use strict";var n,r,i,o,a,s,u,c;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e}],execute:function(){c=function(){function e(e){this.slaves=[],this.connectedQueryRunners=[],this.isReplicated=!1,this.treeSupport=!0,this.supportedDataTypes=["smallint","integer","bigint","decimal","numeric","real","double precision","money","character varying","varchar","character","char","text","citext","bytea","bit","bit varying","timestamp","timestamp without time zone","timestamp with time zone","date","time","time without time zone","time with time zone","interval","boolean","enum","point","line","lseg","box","path","polygon","circle","cidr","inet","macaddr","tsvector","tsquery","uuid","xml","json","jsonb"],this.withLengthColumnTypes=["character varying","varchar","character","char","bit","bit varying"],this.mappedDataTypes={createDate:"timestamp",createDateDefault:"now()",updateDate:"timestamp",updateDateDefault:"now()",version:"int",treeLevel:"int",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text"},this.connection=e,this.options=e.options,this.isReplicated=!!this.options.replication,this.loadDependencies()}return e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r=this;return __generator(this,function(i){switch(i.label){case 0:return this.options.replication?(e=this,[4,Promise.all(this.options.replication.slaves.map(function(e){return r.createPool(r.options,e)}))]):[3,3];case 1:return e.slaves=i.sent(),t=this,[4,this.createPool(this.options,this.options.replication.master)];case 2:return t.master=i.sent(),this.database=this.options.replication.master.database,[3,5];case 3:return n=this,[4,this.createPool(this.options,this.options)];case 4:n.master=i.sent(),this.database=this.options.database,i.label=5;case 5:return[2]}})})},e.prototype.afterConnect=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n=this;return __generator(this,function(r){switch(r.label){case 0:return e=this.connection.entityMetadatas.some(function(e){return e.generatedColumns.filter(function(e){return"uuid"===e.generationStrategy}).length>0}),t=this.connection.entityMetadatas.some(function(e){return e.columns.filter(function(e){return"citext"===e.type}).length>0}),e||t?[4,Promise.all([this.master].concat(this.slaves).map(function(r){return new Promise(function(i,o){r.connect(function(r,a,s){return __awaiter(n,void 0,void 0,function(){var n,u,c;return __generator(this,function(l){switch(l.label){case 0:if(n=this.connection.logger,r)return[2,o(r)];if(!e)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.executeQuery(a,'CREATE extension IF NOT EXISTS "uuid-ossp"')];case 2:return l.sent(),[3,4];case 3:return u=l.sent(),n.log("warn","At least one of the entities has uuid column, but the 'uuid-ossp' extension cannot be installed automatically. Please install it manually using superuser rights"),[3,4];case 4:if(!t)return[3,8];l.label=5;case 5:return l.trys.push([5,7,,8]),[4,this.executeQuery(a,'CREATE extension IF NOT EXISTS "citext"')];case 6:return l.sent(),[3,8];case 7:return c=l.sent(),n.log("warn","At least one of the entities has citext column, but the 'citext' extension cannot be installed automatically. Please install it manually using superuser rights"),[3,8];case 8:return s(),i(),[2]}})})})})}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,Promise.resolve()]}})})},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return this.master?[4,this.closePool(this.master)]:[2,Promise.reject(new n.ConnectionIsNotSetError("postgres"))];case 1:return t.sent(),[4,Promise.all(this.slaves.map(function(t){return e.closePool(t)}))];case 2:return t.sent(),this.master=void 0,this.slaves=[],[2]}})})},e.prototype.createSchemaBuilder=function(){return new u.RdbmsSchemaBuilder(this.connection)},e.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),new o.PostgresQueryRunner(this,e)},e.prototype.preparePersistentValue=function(e,t){return t.transformer&&(e=t.transformer.to(e)),null===e||void 0===e?e:t.type===Boolean?!0===e?1:0:"date"===t.type?a.DateUtils.mixedDateToDateString(e):"time"===t.type?a.DateUtils.mixedDateToTimeString(e):"datetime"===t.type||t.type===Date||"timestamp"===t.type||"timestamp with time zone"===t.type||"timestamp without time zone"===t.type?a.DateUtils.mixedDateToDate(e,!0):"json"===t.type||"jsonb"===t.type?JSON.stringify(e):"simple-array"===t.type?a.DateUtils.simpleArrayToString(e):"simple-json"===t.type?a.DateUtils.simpleJsonToString(e):e},e.prototype.prepareHydratedValue=function(e,t){return null===e||void 0===e?e:(t.type===Boolean?e=!!e:"datetime"===t.type||t.type===Date||"timestamp"===t.type||"timestamp with time zone"===t.type||"timestamp without time zone"===t.type?e=a.DateUtils.normalizeHydratedDate(e):"date"===t.type?e=a.DateUtils.mixedDateToDateString(e):"time"===t.type?e=a.DateUtils.mixedTimeToString(e):"simple-array"===t.type?e=a.DateUtils.stringToSimpleArray(e):"simple-json"===t.type&&(e=a.DateUtils.stringToSimpleJson(e)),t.transformer&&(e=t.transformer.from(e)),e)},e.prototype.escapeQueryWithParameters=function(e,t){if(!t||!Object.keys(t).length)return[e,[]];var n=[],r=Object.keys(t).map(function(e){return"(:"+e+"\\b)"}).join("|");return e=e.replace(new RegExp(r,"g"),function(e){var r=t[e.substr(1)];return r instanceof Array?r.map(function(e){return n.push(e),"$"+n.length}).join(", "):r instanceof Function?r():(n.push(r),"$"+n.length)}),[e,n]},e.prototype.escape=function(e){return'"'+e+'"'},e.prototype.normalizeType=function(e){var t="";return e.type===Number?t+="integer":e.type===String?t+="character varying":e.type===Date?t+="timestamp":e.type===Boolean?t+="boolean":"simple-array"===e.type?t+="text":"simple-json"===e.type?t+="text":t+=e.type,"int"===t||"int4"===t?t="integer":"int2"===t?t="smallint":"int8"===t?t="bigint":"decimal"===t?t="numeric":"float8"===t?t="double precision":"float4"===t?t="real":"citext"===t?t="citext":"char"===t?t="character":"varchar"===t?t="character varying":"time"===t?t="time without time zone":"timetz"===t?t="time with time zone":"timestamptz"===t?t="timestamp with time zone":"bool"===t?t="boolean":"varbit"===t?t="bit varying":"timestamp"===t&&(t="timestamp without time zone"),t},e.prototype.normalizeDefault=function(e){return"number"==typeof e.default?""+e.default:"boolean"==typeof e.default?!0===e.default?"true":"false":"function"==typeof e.default?e.default():"string"==typeof e.default?"'"+e.default+"'":"object"==typeof e.default?"'"+JSON.stringify(e.default)+"'":e.default},e.prototype.normalizeIsUnique=function(e){return e.isUnique},e.prototype.getColumnLength=function(e){if(e.length)return e.length;var t=this.normalizeType(e);return this.dataTypeDefaults&&this.dataTypeDefaults[t]&&this.dataTypeDefaults[t].length?this.dataTypeDefaults[t].length.toString():""},e.prototype.createFullType=function(e){var t=e.type;return e.length?t+="("+e.length+")":e.precision&&e.scale?t+="("+e.precision+","+e.scale+")":e.precision?t+="("+e.precision+")":e.scale?t+="("+e.scale+")":this.dataTypeDefaults&&this.dataTypeDefaults[e.type]&&this.dataTypeDefaults[e.type].length&&(t+="("+this.dataTypeDefaults[e.type].length.toString()+")"),"time without time zone"===e.type?t="TIME"+(e.precision?"("+e.precision+")":""):"time with time zone"===e.type?t="TIME"+(e.precision?"("+e.precision+")":"")+" WITH TIME ZONE":"timestamp without time zone"===e.type?t="TIMESTAMP"+(e.precision?"("+e.precision+")":""):"timestamp with time zone"===e.type&&(t="TIMESTAMP"+(e.precision?"("+e.precision+")":"")+" WITH TIME ZONE"),e.isArray&&(t+=" array"),t},e.prototype.obtainMasterConnection=function(){var e=this;return new Promise(function(t,n){e.master.connect(function(e,r,i){e?n(e):t([r,i])})})},e.prototype.obtainSlaveConnection=function(){var e=this;return this.slaves.length?new Promise(function(t,n){var r=Math.floor(Math.random()*e.slaves.length);e.slaves[r].connect(function(e,r,i){e?n(e):t([r,i])})}):this.obtainMasterConnection()},e.prototype.loadStreamDependency=function(){try{return s.PlatformTools.load("pg-query-stream")}catch(e){throw new Error("To use streams you should install pg-query-stream package. Please run npm i pg-query-stream --save command.")}},e.prototype.loadDependencies=function(){try{this.postgres=s.PlatformTools.load("pg");try{s.PlatformTools.load("pg-native")&&this.postgres.native&&(this.postgres=this.postgres.native)}catch(e){}}catch(e){throw new r.DriverPackageNotInstalledError("Postgres","pg")}},e.prototype.createPool=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){return t=Object.assign(t,i.DriverUtils.buildDriverOptions(t)),n=Object.assign({},{host:t.host,user:t.username,password:t.password,database:t.database,port:t.port,ssl:t.ssl},e.extra||{}),r=new this.postgres.Pool(n),[2,new Promise(function(e,t){r.connect(function(n,i,o){if(n)return t(n);o(),e(r)})})]})})},e.prototype.closePool=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.connectedQueryRunners.map(function(e){return e.release()}))];case 1:return t.sent(),[2,new Promise(function(t,n){e.end(function(e){return e?n(e):t()})})]}})})},e.prototype.executeQuery=function(e,t){return new Promise(function(n,r){e.query(t,function(e,t){if(e)return r(e);n(t)})})},e}(),e("PostgresDriver",c)}}}),System.register("typeorm/query-builder/Brackets",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){return function(e){this.whereFactory=e}}(),e("Brackets",n)}}}),System.register("typeorm/query-builder/WhereExpression",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/EntityMetadataUtils",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.createPropertyPath=function(e,t,n){var r=this;void 0===n&&(n="");var i=[];return Object.keys(t).forEach(function(o){var a=n?n+"."+o:o;if(e.hasEmbeddedWithPropertyPath(a)){var s=r.createPropertyPath(e,t[o],o);i.push.apply(i,s)}else{var u=n?n+"."+o:o;i.push(u)}}),i},e.getPropertyPathValue=function(e,t){var n=t.split("."),r=function(e){var t=n.shift(),i=t?e[t]:e;return n.length?r(i):i};return r(e)},e}(),e("EntityMetadataUtils",n)}}}),System.register("typeorm/error/LimitOnUpdateNotSupportedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var n=e.call(this,"Your database does not support LIMIT on UPDATE statements.")||this;return Object.setPrototypeOf(n,t.prototype),n.name="LimitOnUpdateNotSupportedError",n}return __extends(t,e),t}(Error),e("LimitOnUpdateNotSupportedError",n)}}}),System.register("typeorm/query-builder/UpdateQueryBuilder",["typeorm/query-builder/QueryBuilder","typeorm/driver/mysql/MysqlDriver","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/postgres/PostgresDriver","typeorm/metadata/EntityMetadataUtils","typeorm/error/LimitOnUpdateNotSupportedError"],function(e,t){"use strict";var n,r,i,o,a,s,u;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e}],execute:function(){u=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.expressionMap.aliasNamePrefixingEnabled=!1,r}return __extends(t,e),t.prototype.getQuery=function(){var e=this.createUpdateExpression();return e+=this.createOrderByExpression(),(e+=this.createLimitExpression()).trim()},t.prototype.output=function(e){return this.returning(e)},t.prototype.set=function(e){return this.expressionMap.valuesSet=e,this},t.prototype.where=function(e,t){this.expressionMap.wheres=[];var n=this.computeWhereParameter(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this},t.prototype.andWhere=function(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.computeWhereParameter(e)}),t&&this.setParameters(t),this},t.prototype.orWhere=function(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.computeWhereParameter(e)}),t&&this.setParameters(t),this},t.prototype.whereInIds=function(e){e=e instanceof Array?e:[e];var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.where(n,r),this},t.prototype.andWhereInIds=function(e){e=e instanceof Array?e:[e];var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.andWhere(n,r),this},t.prototype.orWhereInIds=function(e){e=e instanceof Array?e:[e];var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.orWhere(n,r),this},t.prototype.orderBy=function(e,t,n){return void 0===t&&(t="ASC"),e?e instanceof Object?this.expressionMap.orderBys=e:this.expressionMap.orderBys=n?(r={},r[e]={order:t,nulls:n},r):(i={},i[e]=t,i):this.expressionMap.orderBys={},this;var r,i},t.prototype.addOrderBy=function(e,t,n){return void 0===t&&(t="ASC"),this.expressionMap.orderBys[e]=n?{order:t,nulls:n}:t,this},t.prototype.limit=function(e){return this.expressionMap.limit=e,this},t.prototype.returning=function(e){if(this.connection.driver instanceof i.SqlServerDriver||this.connection.driver instanceof o.PostgresDriver)return this.expressionMap.returning=e,this;throw new Error("OUTPUT or RETURNING clause only supported by MS SQLServer or PostgreSQL")},t.prototype.createUpdateExpression=function(){var e=this,t=this.getValueSet(),n=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,r=[];n?a.EntityMetadataUtils.createPropertyPath(n,t).forEach(function(o){var a=n.findColumnWithPropertyPath(o);if(a){var s="_updated_"+a.databaseName,u=e.connection.driver.preparePersistentValue(a.getEntityValue(t),a);u instanceof Function?r.push(e.escape(a.databaseName)+" = "+u()):(e.connection.driver instanceof i.SqlServerDriver?e.setParameter(s,e.connection.driver.parametrizeValue(a,u)):e.setParameter(s,u),r.push(e.escape(a.databaseName)+" = :"+s))}}):Object.keys(t).map(function(n){var i=t[n];i instanceof Function?r.push(e.escape(n)+" = "+i()):(r.push(e.escape(n)+" = :"+n),e.setParameter(n,i))});var s=this.createWhereExpression();return""!==this.expressionMap.returning&&this.connection.driver instanceof o.PostgresDriver?"UPDATE "+this.getTableName(this.getMainTableName())+" SET "+r.join(", ")+s+" RETURNING "+this.expressionMap.returning:""!==this.expressionMap.returning&&this.connection.driver instanceof i.SqlServerDriver?"UPDATE "+this.getTableName(this.getMainTableName())+" SET "+r.join(", ")+" OUTPUT "+this.expressionMap.returning+s:"UPDATE "+this.getTableName(this.getMainTableName())+" SET "+r.join(", ")+s},t.prototype.createOrderByExpression=function(){var e=this,t=this.expressionMap.allOrderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(function(n){return"string"==typeof t[n]?e.replacePropertyNames(n)+" "+t[n]:e.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls}).join(", "):""},t.prototype.createLimitExpression=function(){var e=this.expressionMap.limit;if(e){if(this.connection.driver instanceof r.MysqlDriver)return" LIMIT "+e;throw new s.LimitOnUpdateNotSupportedError}return""},t.prototype.getValueSet=function(){if(this.expressionMap.valuesSet instanceof Object)return this.expressionMap.valuesSet;throw new Error('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify inserted values.')},t}(n.QueryBuilder),e("UpdateQueryBuilder",u)}}}),System.register("typeorm/query-builder/DeleteQueryBuilder",["typeorm/query-builder/QueryBuilder","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/postgres/PostgresDriver"],function(e,t){"use strict";var n,r,i,o;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.expressionMap.aliasNamePrefixingEnabled=!1,r}return __extends(t,e),t.prototype.getQuery=function(){return this.createDeleteExpression().trim()},t.prototype.from=function(e,t){var n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this},t.prototype.where=function(e,t){this.expressionMap.wheres=[];var n=this.computeWhereParameter(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this},t.prototype.andWhere=function(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.computeWhereParameter(e)}),t&&this.setParameters(t),this},t.prototype.orWhere=function(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.computeWhereParameter(e)}),t&&this.setParameters(t),this},t.prototype.whereInIds=function(e){e=e instanceof Array?e:[e];var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.where(n,r),this},t.prototype.andWhereInIds=function(e){var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.andWhere(n,r),this},t.prototype.orWhereInIds=function(e){var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.orWhere(n,r),this},t.prototype.returning=function(e){if(this.connection.driver instanceof r.SqlServerDriver||this.connection.driver instanceof i.PostgresDriver)return this.expressionMap.returning=e,this;throw new Error("OUTPUT or RETURNING clause only supported by MS SQLServer or PostgreSQL")},t.prototype.output=function(e){return this.returning(e)},t.prototype.createDeleteExpression=function(){var e=this.createWhereExpression();return""!==this.expressionMap.returning&&this.connection.driver instanceof i.PostgresDriver?"DELETE FROM "+this.getTableName(this.getMainTableName())+e+" RETURNING "+this.expressionMap.returning:""!==this.expressionMap.returning&&this.connection.driver instanceof r.SqlServerDriver?"DELETE FROM "+this.getTableName(this.getMainTableName())+" OUTPUT "+this.expressionMap.returning+e:"DELETE FROM "+this.getTableName(this.getMainTableName())+e},t}(n.QueryBuilder),e("DeleteQueryBuilder",o)}}}),System.register("typeorm/query-builder/InsertQueryBuilder",["typeorm/query-builder/QueryBuilder","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/postgres/PostgresDriver","typeorm/driver/sqlite-abstract/AbstractSqliteDriver"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getQuery=function(){return this.createInsertExpression().trim()},t.prototype.output=function(e){return this.returning(e)},t.prototype.into=function(e,t){var n=this.createFromAlias(e);return this.expressionMap.setMainAlias(n),this.expressionMap.insertColumns=t||[],this},t.prototype.values=function(e){return this.expressionMap.valuesSet=e,this},t.prototype.returning=function(e){if(this.connection.driver instanceof r.SqlServerDriver||this.connection.driver instanceof i.PostgresDriver)return this.expressionMap.returning=e,this;throw new Error("OUTPUT or RETURNING clause only supported by MS SQLServer or PostgreSQL")},t.prototype.onConflict=function(e){return this.expressionMap.onConflict=e,this},t.prototype.createInsertExpression=function(){var e,t,n=this,a=this.getValueSets();if(this.expressionMap.mainAlias.hasMetadata){var s=this.expressionMap.mainAlias.metadata.columns.filter(function(e){return n.expressionMap.insertColumns.length?n.expressionMap.insertColumns.indexOf(e.propertyPath):!e.isGenerated});t=s.map(function(e){return n.escape(e.databaseName)}).join(", "),e=a.map(function(e,t){return"("+s.map(function(i){var a="_inserted_"+t+"_"+i.databaseName,s=n.connection.driver.preparePersistentValue(i.getEntityValue(e),i);return s instanceof Function?s():void 0===s?n.connection.driver instanceof o.AbstractSqliteDriver?"NULL":"DEFAULT":(n.connection.driver instanceof r.SqlServerDriver?n.setParameter(a,n.connection.driver.parametrizeValue(i,s)):n.setParameter(a,s),":"+a)}).join(",")+")"}).join(", ")}else t=this.expressionMap.insertColumns.join(", "),e=a.map(function(e,t){return"("+Object.keys(e).map(function(r){var i="_inserted_"+t+"_"+r,a=e[r];return a instanceof Function?a():void 0===a?n.connection.driver instanceof o.AbstractSqliteDriver?"NULL":"DEFAULT":(n.setParameter(i,a),":"+i)}).join(",")+")"}).join(", ");return""!==this.expressionMap.returning&&this.connection.driver instanceof i.PostgresDriver?"INSERT INTO "+this.getTableName(this.getMainTableName())+(t?"("+t+")":"")+" VALUES "+e+(this.expressionMap.onConflict?" ON CONFLICT "+this.expressionMap.onConflict:"")+" RETURNING "+this.expressionMap.returning:""!==this.expressionMap.returning&&this.connection.driver instanceof r.SqlServerDriver?"INSERT INTO "+this.getTableName(this.getMainTableName())+"("+t+") OUTPUT "+this.expressionMap.returning+" VALUES "+e:"INSERT INTO "+this.getTableName(this.getMainTableName())+"("+t+") VALUES "+e+(this.expressionMap.onConflict?" ON CONFLICT "+this.expressionMap.onConflict:"")},t.prototype.getValueSets=function(){if(this.expressionMap.valuesSet instanceof Array&&this.expressionMap.valuesSet.length>0)return this.expressionMap.valuesSet;if(this.expressionMap.valuesSet instanceof Object)return[this.expressionMap.valuesSet];throw new Error('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')},t}(n.QueryBuilder),e("InsertQueryBuilder",a)}}}),System.register("typeorm/query-builder/RelationUpdater",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t){this.queryBuilder=e,this.expressionMap=t}return e.prototype.update=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,p,d,m;return __generator(this,function(f){switch(f.label){case 0:return(t=this.expressionMap.relationMetadata).isManyToOne||t.isOneToOneOwner?(s=t.joinColumns.reduce(function(t,n){var r=e instanceof Object?n.referencedColumn.getEntityValue(e):e;return n.setEntityValue(t,r),t},{}),!this.expressionMap.of||this.expressionMap.of instanceof Array&&!this.expressionMap.of.length?[2]:[4,this.queryBuilder.createQueryBuilder().update(t.entityMetadata.target).set(s).whereInIds(this.expressionMap.of).execute()]):[3,2];case 1:return f.sent(),[3,8];case 2:return!t.isOneToOneNotOwner&&!t.isOneToMany||null!==e?[3,4]:(n={},t.inverseRelation.joinColumns.forEach(function(e){n[e.propertyName]=null}),c=this.expressionMap.of instanceof Array?this.expressionMap.of:[this.expressionMap.of],r={},i=[],c.forEach(function(e,n){t.inverseRelation.joinColumns.map(function(t,o){var a="joinColumn_"+n+"_"+o;r[a]=e instanceof Object?t.referencedColumn.getEntityValue(e):e,i.push(t.propertyPath+" = :"+a)})}),(o=i.map(function(e){return"("+e+")"}).join(" OR "))?[4,this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(n).where(o).setParameters(r).execute()]:[2]);case 3:return f.sent(),[3,8];case 4:if(!t.isOneToOneNotOwner&&!t.isOneToMany)return[3,6];if(this.expressionMap.of instanceof Array)throw new Error("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");return a=this.expressionMap.of,s=t.inverseRelation.joinColumns.reduce(function(e,t){var n=a instanceof Object?t.referencedColumn.getEntityValue(a):a;return t.setEntityValue(e,n),e},{}),!e||e instanceof Array&&!e.length?[2]:[4,this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(s).whereInIds(e).execute()];case 5:return f.sent(),[3,8];case 6:return u=t.junctionEntityMetadata,c=this.expressionMap.of instanceof Array?this.expressionMap.of:[this.expressionMap.of],l=e instanceof Array?e:[e],p=t.isManyToManyOwner?c:l,d=t.isManyToManyOwner?l:c,m=[],p.forEach(function(e){d.forEach(function(t){var n={};u.ownerColumns.forEach(function(t){n[t.databaseName]=e instanceof Object?t.referencedColumn.getEntityValue(e):e}),u.inverseColumns.forEach(function(e){n[e.databaseName]=t instanceof Object?e.referencedColumn.getEntityValue(t):t}),m.push(n)})}),m.length?[4,this.queryBuilder.createQueryBuilder().insert().into(u.tableName).values(m).execute()]:[2];case 7:f.sent(),f.label=8;case 8:return[2]}})})},e}(),e("RelationUpdater",n)}}}),System.register("typeorm/query-builder/RelationRemover",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t){this.queryBuilder=e,this.expressionMap=t}return e.prototype.remove=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,p,d,m;return __generator(this,function(f){switch(f.label){case 0:return(t=this.expressionMap.relationMetadata).isOneToMany?(s=this.expressionMap.of instanceof Array?this.expressionMap.of:[this.expressionMap.of],n=e instanceof Array?e:[e],r={},t.inverseRelation.joinColumns.forEach(function(e){r[e.propertyName]=null}),i={},o=[],s.forEach(function(e,r){o.push.apply(o,n.map(function(n,o){return t.inverseRelation.joinColumns.map(function(t,n){var a="joinColumn_"+r+"_"+o+"_"+n;return i[a]=e instanceof Object?t.referencedColumn.getEntityValue(e):e,t.propertyPath+" = :"+a}).concat(t.inverseRelation.entityMetadata.primaryColumns.map(function(e,t){var r="primaryColumn_"+o+"_"+o+"_"+t;return i[r]=n instanceof Object?e.getEntityValue(n):n,e.propertyPath+" = :"+r})).join(" AND ")}))}),(m=o.map(function(e){return"("+e+")"}).join(" OR "))?[4,this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(r).where(m).setParameters(i).execute()]:[2]):[3,2];case 1:return f.sent(),[3,4];case 2:return a=t.junctionEntityMetadata,s=this.expressionMap.of instanceof Array?this.expressionMap.of:[this.expressionMap.of],u=e instanceof Array?e:[e],c=t.isManyToManyOwner?s:u,l=t.isManyToManyOwner?u:s,p={},d=[],c.forEach(function(e,t){d.push.apply(d,l.map(function(n,r){return a.ownerColumns.map(function(n,i){var o="firstValue_"+t+"_"+r+"_"+i;return p[o]=e instanceof Object?n.referencedColumn.getEntityValue(e):e,n.databaseName+" = :"+o}).concat(a.inverseColumns.map(function(i,o){var a="secondValue_"+t+"_"+r+"_"+o;return p[a]=e instanceof Object?i.referencedColumn.getEntityValue(n):n,i.databaseName+" = :"+a})).join(" AND ")}))}),m=d.map(function(e){return"("+e+")"}).join(" OR "),[4,this.queryBuilder.createQueryBuilder().delete().from(a.tableName).where(m).setParameters(p).execute()];case 3:f.sent(),f.label=4;case 4:return[2]}})})},e}(),e("RelationRemover",n)}}}),System.register("typeorm/query-builder/RelationLoader",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.connection=e}return e.prototype.load=function(e,t){return e.isManyToOne||e.isOneToOneOwner?this.loadManyToOneOrOneToOneOwner(e,t):e.isOneToMany||e.isOneToOneNotOwner?this.loadOneToManyOrOneToOneNotOwner(e,t):e.isManyToManyOwner?this.loadManyToManyOwner(e,t):this.loadManyToManyNotOwner(e,t)},e.prototype.loadManyToOneOrOneToOneOwner=function(e,t){var n=e.entityMetadata.primaryColumns,r=(e.isOwning?e.joinColumns:e.inverseRelation.joinColumns).map(function(t){return e.entityMetadata.name+"."+e.propertyName+" = "+e.propertyName+"."+t.referencedColumn.propertyName}).join(" AND "),i=this.connection.createQueryBuilder().select(e.propertyName).from(e.type,e.propertyName).innerJoin(e.entityMetadata.target,e.entityMetadata.name,r);return n.forEach(function(n){i.andWhere(e.entityMetadata.name+"."+n.propertyPath+" = :"+n.propertyName).setParameter(""+n.propertyName,n.getEntityValue(t))}),i.getOne()},e.prototype.loadOneToManyOrOneToOneNotOwner=function(e,t){var n=this.connection.createQueryBuilder().select(e.propertyName).from(e.inverseRelation.entityMetadata.target,e.propertyName);return e.inverseRelation.joinColumns.forEach(function(r){n.andWhere(e.propertyName+"."+r.propertyName+" = :"+r.referencedColumn.propertyName).setParameter(""+r.referencedColumn.propertyName,r.referencedColumn.getEntityValue(t))}),e.isOneToMany?n.getMany():n.getOne()},e.prototype.loadManyToManyOwner=function(e,t){var n=e.propertyName,r=e.junctionEntityMetadata.tableName,i=e.joinColumns.map(function(e){return r+"."+e.propertyName+" = :"+e.propertyName}),o=e.inverseJoinColumns.map(function(e){return r+"."+e.propertyName+"="+n+"."+e.referencedColumn.propertyName}),a=e.joinColumns.reduce(function(e,n){return e[n.propertyName]=n.referencedColumn.getEntityValue(t),e},{});return this.connection.createQueryBuilder().select(n).from(e.type,n).innerJoin(r,r,i.concat(o).join(" AND ")).setParameters(a).getMany()},e.prototype.loadManyToManyNotOwner=function(e,t){var n=e.propertyName,r=e.junctionEntityMetadata.tableName,i=e.inverseRelation.joinColumns.map(function(e){return r+"."+e.propertyName+" = "+n+"."+e.referencedColumn.propertyName}),o=e.inverseRelation.inverseJoinColumns.map(function(e){return r+"."+e.propertyName+" = :"+e.propertyName}),a=e.inverseRelation.inverseJoinColumns.reduce(function(e,n){return e[n.propertyName]=n.referencedColumn.getEntityValue(t),e},{});return this.connection.createQueryBuilder().select(n).from(e.type,n).innerJoin(r,r,i.concat(o).join(" AND ")).setParameters(a).getMany()},e}(),e("RelationLoader",n)}}}),System.register("typeorm/query-builder/RelationQueryBuilder",["typeorm/query-builder/QueryBuilder","typeorm/query-builder/RelationUpdater","typeorm/query-builder/RelationRemover","typeorm/query-builder/RelationLoader"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getQuery=function(){return""},t.prototype.of=function(e){return this.expressionMap.of=e,this},t.prototype.set=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(i){if(t=this.expressionMap.relationMetadata,!this.expressionMap.of)throw new Error("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToMany||t.isOneToMany)throw new Error('Set operation is only supported for many-to-one and one-to-one relations. However given "'+t.propertyPath+'" has '+t.relationType+" relation. Use .add() method instead.");if(t.joinColumns&&t.joinColumns.length>1&&(!(e instanceof Object)||Object.keys(e).length<t.joinColumns.length))throw new Error('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return n=new r.RelationUpdater(this,this.expressionMap),[2,n.update(e)]})})},t.prototype.add=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(i){if(e instanceof Array&&0===e.length)return[2];if(t=this.expressionMap.relationMetadata,!this.expressionMap.of)throw new Error("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new Error('Add operation is only supported for many-to-many and one-to-many relations. However given "'+t.propertyPath+'" has '+t.relationType+" relation. Use .set() method instead.");if(t.joinColumns&&t.joinColumns.length>1&&(!(e instanceof Object)||Object.keys(e).length<t.joinColumns.length))throw new Error('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return n=new r.RelationUpdater(this,this.expressionMap),[2,n.update(e)]})})},t.prototype.remove=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){if(e instanceof Array&&0===e.length)return[2];if(t=this.expressionMap.relationMetadata,!this.expressionMap.of)throw new Error("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new Error('Add operation is only supported for many-to-many and one-to-many relations. However given "'+t.propertyPath+'" has '+t.relationType+" relation. Use .set(null) method instead.");return n=new i.RelationRemover(this,this.expressionMap),[2,n.remove(e)]})})},t.prototype.addAndRemove=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.remove(t)];case 1:return n.sent(),[4,this.add(e)];case 2:return n.sent(),[2]}})})},t.prototype.loadOne=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(r){if(!((e=this.expressionMap.of)instanceof Object)){if((t=this.expressionMap.mainAlias.metadata).hasMultiplePrimaryKeys)throw new Error("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");e=t.primaryColumns[0].createValueMap(e)}return n=new o.RelationLoader(this.connection),[2,n.load(this.expressionMap.relationMetadata,e)]})})},t.prototype.loadMany=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.loadOne()]})})},t}(n.QueryBuilder),e("RelationQueryBuilder",a)}}}),System.register("typeorm/driver/sqljs/SqljsQueryRunner",["typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/util/OrmUtils","typeorm/driver/sqlite-abstract/AbstractSqliteQueryRunner"],function(e,t){"use strict";var n,r,i,o;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){o=function(e){function t(t){var n=e.call(this,t)||this;return n.driver=t,n.connection=t.connection,n}return __extends(t,e),t.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,e.prototype.commitTransaction.call(this)];case 1:return t.sent(),[4,this.driver.autoSave()];case 2:return t.sent(),[2]}})})},t.prototype.query=function(e,t){var r=this;if(this.isReleased)throw new n.QueryRunnerAlreadyReleasedError;return new Promise(function(n,i){return __awaiter(r,void 0,void 0,function(){var r,o,a,s,u,c,l;return __generator(this,function(p){switch(p.label){case 0:return[4,this.connect()];case 1:r=p.sent(),this.driver.connection.logger.logQuery(e,t,this),o=+new Date;try{for((a=r.prepare(e)).bind(t),s=this.driver.connection.options.maxQueryExecutionTime,u=+new Date,c=u-o,s&&c>s&&this.driver.connection.logger.logQuerySlow(c,e,t,this),l=[];a.step();)l.push(a.getAsObject());a.free(),n(l)}catch(e){i(e)}return[2]}})})})},t.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,i,o,a,s,u,c=this;return __generator(this,function(l){return n=Object.keys(t),i=n.map(function(e){return'"'+e+'"'}).join(", "),o=n.map(function(e){return"?"}).join(","),a=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[],s=i.length>0?'INSERT INTO "'+e+'"('+i+") VALUES ("+o+")":'INSERT INTO "'+e+'" DEFAULT VALUES',u=n.map(function(e){return t[e]}),[2,new Promise(function(e,n){return __awaiter(c,void 0,void 0,function(){var i,o,c,l;return __generator(this,function(p){switch(p.label){case 0:return this.driver.connection.logger.logQuery(s,u,this),[4,this.connect()];case 1:i=p.sent(),p.label=2;case 2:return p.trys.push([2,5,,6]),(o=i.prepare(s)).bind(u),o.step(),c=a.reduce(function(e,n){var o=t[n.databaseName];return n.isPrimary&&"increment"===n.generationStrategy&&(o=i.exec("SELECT last_insert_rowid()")[0].values[0][0]),o?r.OrmUtils.mergeDeep(e,n.createValueMap(o)):e},{}),this.isTransactionActive?[3,4]:[4,this.driver.autoSave()];case 3:p.sent(),p.label=4;case 4:return e({result:void 0,generatedMap:Object.keys(c).length>0?c:void 0}),[3,6];case 5:return l=p.sent(),n(l),[3,6];case 6:return[2]}})})})]})})},t.prototype.update=function(t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,e.prototype.update.call(this,t,n,r)];case 1:return i.sent(),this.isTransactionActive?[3,3]:[4,this.driver.autoSave()];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.delete=function(t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,e.prototype.delete.call(this,t,n,r)];case 1:return i.sent(),this.isTransactionActive?[3,3]:[4,this.driver.autoSave()];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t}(i.AbstractSqliteQueryRunner),e("SqljsQueryRunner",o)}}}),System.register("typeorm/error/DriverOptionNotSetError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="DriverOptionNotSetError",n.message="Driver option ("+t+") is not set. Please set it to perform connection to the database.",n}return __extends(t,e),t}(Error),e("DriverOptionNotSetError",n)}}}),System.register("typeorm/driver/sqljs/SqljsDriver",["typeorm/driver/sqlite-abstract/AbstractSqliteDriver","typeorm/driver/sqljs/SqljsQueryRunner","typeorm/error/DriverPackageNotInstalledError","typeorm/error/DriverOptionNotSetError","typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r,i,o,a,s;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e}],execute:function(){s=function(e){function t(t){var n=e.call(this,t)||this;if(n.options.autoSave&&!n.options.location&&!n.options.autoSaveCallback)throw new o.DriverOptionNotSetError("location or autoSaveCallback");return n.loadDependencies(),n}return __extends(t,e),t.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,this.createDatabaseConnection()];case 1:return e.databaseConnection=t.sent(),[2]}})})},t.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,n){try{e.queryRunner=void 0,e.databaseConnection.close(),t()}catch(e){n(e)}})]})})},t.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),this.queryRunner||(this.queryRunner=new r.SqljsQueryRunner(this)),this.queryRunner},t.prototype.load=function(e){if("string"==typeof e){if("node"===a.PlatformTools.type){if(a.PlatformTools.fileExist(e)){var t=a.PlatformTools.readFileSync(e);return this.createDatabaseConnectionWithImport(t)}throw new Error("File "+e+" does not exist")}var n=a.PlatformTools.getGlobalVariable().localStorage.getItem(e);return this.createDatabaseConnectionWithImport(JSON.parse(n))}return this.createDatabaseConnectionWithImport(e)},t.prototype.save=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return __generator(this,function(s){switch(s.label){case 0:if(!e&&!this.options.location)throw new Error("No location is set, specify a location parameter or add the location option to your configuration");if(t="",e?t=e:this.options.location&&(t=this.options.location),"node"!==a.PlatformTools.type)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),n=new Buffer(this.databaseConnection.export()),[4,a.PlatformTools.writeFile(t,n)];case 2:return s.sent(),[3,4];case 3:throw r=s.sent(),new Error("Could not save database, error: "+r);case 4:return[3,6];case 5:i=this.databaseConnection.export(),o=[].slice.call(i),a.PlatformTools.getGlobalVariable().localStorage.setItem(t,JSON.stringify(o)),s.label=6;case 6:return[2]}})})},t.prototype.autoSave=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.options.autoSave?this.options.autoSaveCallback?[4,this.options.autoSaveCallback(this.export())]:[3,2]:[3,4];case 1:return e.sent(),[3,4];case 2:return[4,this.save()];case 3:e.sent(),e.label=4;case 4:return[2]}})})},t.prototype.export=function(){return this.databaseConnection.export()},t.prototype.createDatabaseConnection=function(){return this.options.location?this.load(this.options.location):this.createDatabaseConnectionWithImport(this.options.database)},t.prototype.createDatabaseConnectionWithImport=function(e){var t=this;return e&&e.length>0?this.databaseConnection=new this.sqlite.Database(e):this.databaseConnection=new this.sqlite.Database,new Promise(function(e,n){try{t.databaseConnection.exec("PRAGMA foreign_keys = ON;"),e(t.databaseConnection)}catch(e){n(e)}})},t.prototype.loadDependencies=function(){if("browser"===a.PlatformTools.type)this.sqlite=window.SQL;else try{this.sqlite=a.PlatformTools.load("sql.js")}catch(e){throw new i.DriverPackageNotInstalledError("sql.js","sql.js")}},t}(n.AbstractSqliteDriver),e("SqljsDriver",s)}}}),System.register("typeorm/query-builder/QueryBuilder",["typeorm/query-builder/QueryExpressionMap","typeorm/query-builder/Brackets","typeorm/metadata/EntityMetadataUtils","typeorm/driver/sqljs/SqljsDriver"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(t,r){t instanceof e?(this.connection=t.connection,this.queryRunner=t.queryRunner,this.expressionMap=t.expressionMap.clone()):(this.connection=t,this.queryRunner=r,this.expressionMap=new n.QueryExpressionMap(this.connection))}return Object.defineProperty(e.prototype,"alias",{get:function(){if(!this.expressionMap.mainAlias)throw new Error("Main alias is not set");return this.expressionMap.mainAlias.name},enumerable:!0,configurable:!0}),e.prototype.select=function(e,t){this.expressionMap.queryType="select",e instanceof Array?this.expressionMap.selects=e.map(function(e){return{selection:e}}):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);var n=require("./SelectQueryBuilder").SelectQueryBuilder;return this instanceof n?this:new n(this)},e.prototype.insert=function(){this.expressionMap.queryType="insert";var e=require("./InsertQueryBuilder").InsertQueryBuilder;return this instanceof e?this:new e(this)},e.prototype.update=function(e,t){var n=t||e;if(e instanceof Function||"string"==typeof e){var r=this.createFromAlias(e);this.expressionMap.setMainAlias(r)}this.expressionMap.queryType="update",this.expressionMap.valuesSet=n;var i=require("./UpdateQueryBuilder").UpdateQueryBuilder;return this instanceof i?this:new i(this)},e.prototype.delete=function(){this.expressionMap.queryType="delete";var e=require("./DeleteQueryBuilder").DeleteQueryBuilder;return this instanceof e?this:new e(this)},e.prototype.relation=function(e,t){var n=2===arguments.length?e:void 0,r=2===arguments.length?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=r,n){var i=this.createFromAlias(n);this.expressionMap.setMainAlias(i)}var o=require("./RelationQueryBuilder").RelationQueryBuilder;return this instanceof o?this:new o(this)},e.prototype.hasRelation=function(e,t){var n=this.connection.getMetadata(e);return(t instanceof Array?t:[t]).every(function(e){return!!n.findRelationWithPropertyPath(e)})},e.prototype.setParameter=function(e,t){return this.expressionMap.parameters[e]=t,this},e.prototype.setParameters=function(e){var t=this;return this.expressionMap.parentQueryBuilder&&this.expressionMap.parentQueryBuilder.setParameters(e),Object.keys(e).forEach(function(n){t.expressionMap.parameters[n]=e[n]}),this},e.prototype.getParameters=function(){var e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){var t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){var n=t.childEntityMetadatas.filter(function(e){return e.discriminatorColumn}).map(function(e){return e.discriminatorValue});n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e},e.prototype.getSql=function(){return this.connection.driver.escapeQueryWithParameters(this.getQuery(),this.getParameters())[0]},e.prototype.printSql=function(){return console.log(this.getSql()),this},e.prototype.getQueryAndParameters=function(){return this.connection.driver.escapeQueryWithParameters(this.getQuery(),this.getParameters())},e.prototype.execute=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r;return __generator(this,function(i){switch(i.label){case 0:e=this.getQueryAndParameters(),t=e[0],n=e[1],r=this.obtainQueryRunner(),i.label=1;case 1:return i.trys.push([1,,3,8]),[4,r.query(t,n)];case 2:return[2,i.sent()];case 3:return r===this.queryRunner?[3,5]:[4,r.release()];case 4:i.sent(),i.label=5;case 5:return this.connection.driver instanceof o.SqljsDriver?[4,this.connection.driver.autoSave()]:[3,7];case 6:i.sent(),i.label=7;case 7:return[7];case 8:return[2]}})})},e.prototype.createQueryBuilder=function(){return new this.constructor(this.connection,this.queryRunner)},e.prototype.clone=function(){return new this.constructor(this)},e.prototype.disableEscaping=function(){return this.expressionMap.disableEscaping=!1,this},e.prototype.escape=function(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e},e.prototype.setQueryRunner=function(e){return this.queryRunner=e,this},e.prototype.getTableName=function(e){var t=this;return e.split(".").map(function(e){return""===e?e:t.escape(e)}).join(".")},e.prototype.getMainTableName=function(){if(!this.expressionMap.mainAlias)throw new Error('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath},e.prototype.createFromAlias=function(e,t){if(this.connection.hasMetadata(e)){var n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}var r="";if(e instanceof Function){var i=e(this.subQuery());this.setParameters(i.getParameters()),r=i.getQuery()}else r=e;var o=e instanceof Function||"("===e.substr(0,1)&&")"===e.substr(-1);return this.expressionMap.createAlias({type:"from",name:t,tablePath:!1===o?e:void 0,subQuery:!0===o?r:void 0})},e.prototype.replacePropertyNames=function(e){var t=this;return this.expressionMap.aliases.forEach(function(n){if(n.hasMetadata){var r=t.expressionMap.aliasNamePrefixingEnabled?n.name+"\\.":"",i=t.expressionMap.aliasNamePrefixingEnabled?t.escape(n.name)+".":"";n.metadata.columns.forEach(function(n){var o="([ =(]|^.{0})"+r+n.propertyPath+"([ =),]|.{0}$)";e=e.replace(new RegExp(o,"gm"),"$1"+i+t.escape(n.databaseName)+"$2");var a="([ =(]|^.{0})"+r+n.propertyName+"([ =),]|.{0}$)";e=e.replace(new RegExp(a,"gm"),"$1"+i+t.escape(n.databaseName)+"$2")}),n.metadata.relations.forEach(function(n){if(n.joinColumns.concat(n.inverseJoinColumns).forEach(function(o){var a="([ =(]|^.{0})"+r+n.propertyPath+"\\."+o.referencedColumn.propertyPath+"([ =),]|.{0}$)";e=e.replace(new RegExp(a,"gm"),"$1"+i+t.escape(o.databaseName)+"$2")}),n.joinColumns.length>0){var o="([ =(]|^.{0})"+r+n.propertyPath+"([ =),]|.{0}$)";e=e.replace(new RegExp(o,"gm"),"$1"+i+t.escape(n.joinColumns[0].databaseName)+"$2")}})}}),e},e.prototype.createWhereExpression=function(){var e=this.createWhereExpressionString();if(this.expressionMap.mainAlias.hasMetadata){var t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){var n=this.replacePropertyNames(this.expressionMap.mainAlias.name+"."+t.discriminatorColumn.databaseName)+" IN (:discriminatorColumnValues)";return" WHERE "+(e.length?"("+e+") AND":"")+" "+n}}return e.length?this.expressionMap.extraAppendedAndWhereCondition?" WHERE ("+e+") AND "+this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition):" WHERE "+e:this.expressionMap.extraAppendedAndWhereCondition?" WHERE "+this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition):""},e.prototype.createWhereExpressionString=function(){var e=this;return this.expressionMap.wheres.map(function(t,n){switch(t.type){case"and":return(n>0?"AND ":"")+e.replacePropertyNames(t.condition);case"or":return(n>0?"OR ":"")+e.replacePropertyNames(t.condition);default:return e.replacePropertyNames(t.condition)}}).join(" ")},e.prototype.createWhereIdsExpression=function(e){var t=this,n=this.expressionMap.mainAlias.metadata,r=this.expressionMap.aliasNamePrefixingEnabled?this.escape(this.expressionMap.mainAlias.name)+".":"",i={},o=e.map(function(e,o){e=e instanceof Object?e:n.createEntityIdMap(e);var a=[];return n.primaryColumns.forEach(function(n,s){a.push(r+t.escape(n.databaseName)+"=:id_"+o+"_"+s),i["id_"+o+"_"+s]=n.getEntityValue(e)}),n.parentIdColumns.forEach(function(n,s){a.push(r+t.escape(n.databaseName)+"=:parentId_"+o+"_"+s),i["parentId_"+o+"_"+s]=n.getEntityValue(e)}),a.join(" AND ")});return[o.length>1?"("+o.join(" OR ")+")":o[0],i]},e.prototype.computeWhereParameter=function(e){var t=this;if("string"==typeof e)return e;if(e instanceof r.Brackets){var n=this.createQueryBuilder();e.whereFactory(n);var o=n.createWhereExpressionString();return this.setParameters(n.getParameters()),o?"("+o+")":""}return e instanceof Function?e(this):(e instanceof Object&&(this.expressionMap.mainAlias.metadata?i.EntityMetadataUtils.createPropertyPath(this.expressionMap.mainAlias.metadata,e).forEach(function(n,r){var o=i.EntityMetadataUtils.getPropertyPathValue(e,n),a=t.expressionMap.aliasNamePrefixingEnabled?t.alias+"."+n:n;if(null===o)t.andWhere(a+" IS NULL");else{var s="where_"+r;t.andWhere(a+"=:"+s),t.setParameter(s,o)}}):Object.keys(e).forEach(function(n,r){var i=e[n],o=t.expressionMap.aliasNamePrefixingEnabled?t.alias+"."+n:n;if(null===i)t.andWhere(o+" IS NULL");else{var a="where_"+r;t.andWhere(o+"=:"+a),t.setParameter(a,i)}})),"")},e.prototype.obtainQueryRunner=function(){return this.queryRunner||this.connection.createQueryRunner("master")},e}(),e("QueryBuilder",a)}}}),System.register("typeorm/query-builder/QueryExpressionMap",["typeorm/query-builder/Alias","typeorm/query-builder/JoinAttribute","typeorm/query-builder/relation-id/RelationIdAttribute","typeorm/query-builder/relation-count/RelationCountAttribute"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e){this.connection=e,this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.returning="",this.onConflict="",this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.parameters={},this.disableEscaping=!0,this.ignoreParentTablesJoins=!1,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.cache=!1,this.insertColumns=[]}return Object.defineProperty(e.prototype,"allOrderBys",{get:function(){var e=this;if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata){var t=this.mainAlias.metadata.orderBy||{};return Object.keys(t).reduce(function(n,r){return n[e.mainAlias.name+"."+r]=t[r],n},{})}return this.orderBys},enumerable:!0,configurable:!0}),e.prototype.setMainAlias=function(e){return this.mainAlias&&this.aliases.splice(this.aliases.indexOf(this.mainAlias)),this.mainAlias=e,e},e.prototype.createAlias=function(e){var t=e.name;!t&&e.tablePath&&(t=e.tablePath),!t&&e.target instanceof Function&&(t=e.target.name),t||"string"!=typeof e.target||(t=e.target);var r=new n.Alias;return r.type=e.type,t&&(r.name=t),e.metadata&&(r.metadata=e.metadata),e.target&&!r.hasMetadata&&(r.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(r.tablePath=e.tablePath),e.subQuery&&(r.subQuery=e.subQuery),this.aliases.push(r),r},e.prototype.findAliasByName=function(e){var t=this.aliases.find(function(t){return t.name===e});if(!t)throw new Error('"'+e+'" alias was not found. Maybe you forgot to join it?');return t},e.prototype.findColumnByAliasExpression=function(e){var t=e.split("."),n=t[0],r=t[1];return this.findAliasByName(n).metadata.findColumnWithPropertyName(r)},Object.defineProperty(e.prototype,"relationMetadata",{get:function(){if(!this.mainAlias)throw new Error("Entity to work with is not specified!");var e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new Error("Relation "+this.relationPropertyPath+" was not found in entity "+this.mainAlias.name);return e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=this,a=new e(this.connection);return a.queryType=this.queryType,a.selects=this.selects.map(function(e){return e}),this.aliases.forEach(function(e){return a.aliases.push(new n.Alias(e))}),a.mainAlias=this.mainAlias,a.valuesSet=this.valuesSet,a.returning=this.returning,a.onConflict=this.onConflict,a.joinAttributes=this.joinAttributes.map(function(e){return new r.JoinAttribute(t.connection,t,e)}),a.relationIdAttributes=this.relationIdAttributes.map(function(e){return new i.RelationIdAttribute(t,e)}),a.relationCountAttributes=this.relationCountAttributes.map(function(e){return new o.RelationCountAttribute(t,e)}),a.wheres=this.wheres.map(function(e){return __assign({},e)}),a.havings=this.havings.map(function(e){return __assign({},e)}),a.orderBys=Object.assign({},this.orderBys),a.groupBys=this.groupBys.map(function(e){return e}),a.limit=this.limit,a.offset=this.offset,a.skip=this.skip,a.take=this.take,a.lockMode=this.lockMode,a.lockVersion=this.lockVersion,a.parameters=Object.assign({},this.parameters),a.disableEscaping=this.disableEscaping,a.ignoreParentTablesJoins=this.ignoreParentTablesJoins,a.enableRelationIdValues=this.enableRelationIdValues,a.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,a.subQuery=this.subQuery,a.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,a.cache=this.cache,a.cacheId=this.cacheId,a.cacheDuration=this.cacheDuration,a.relationPropertyPath=this.relationPropertyPath,a.of=this.of,a},e}(),e("QueryExpressionMap",a)}}}),System.register("typeorm/query-builder/relation-id/RelationIdAttribute",["typeorm/query-builder/QueryBuilderUtils"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,Object.assign(this,t||{})}return Object.defineProperty(e.prototype,"joinInverseSideMetadata",{get:function(){return this.relation.inverseEntityMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentAlias",{get:function(){if(!n.QueryBuilderUtils.isAliasProperty(this.relationName))throw new Error("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relationPropertyPath",{get:function(){if(!n.QueryBuilderUtils.isAliasProperty(this.relationName))throw new Error("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relation",{get:function(){if(!n.QueryBuilderUtils.isAliasProperty(this.relationName))throw new Error("Given value must be a string representation of alias property");var e=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new Error("Relation with property path "+this.relationPropertyPath+" in entity was not found.");return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"junctionAlias",{get:function(){var e=this.relationName.split(".");return e[0]+"_"+e[1]+"_relation_id"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"junctionMetadata",{get:function(){return this.relation.junctionEntityMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapToPropertyParentAlias",{get:function(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapToPropertyPropertyPath",{get:function(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)},enumerable:!0,configurable:!0}),e}(),e("RelationIdAttribute",r)}}}),System.register("typeorm/query-builder/relation-id/RelationIdLoadResult",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/query-builder/relation-count/RelationCountLoadResult",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/query-builder/transformer/RawSqlResultsToEntityTransformer",["typeorm/util/OrmUtils"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t,n,r){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=r}return e.prototype.transform=function(e,t){var n=this,r=[];return this.group(e,t).forEach(function(e){var i=n.transformRawResultsGroup(e,t);void 0!==i&&r.push(i)}),r},e.prototype.group=function(e,t){var n=new Map,r=t.metadata.primaryColumns.map(function(e){return t.name+"_"+e.databaseName});return e.forEach(function(e){var t=r.map(function(t){return e[t]}).join("_");if(t){var i=n.get(t);i?i.push(e):n.set(t,[e])}}),n},e.prototype.transformRawResultsGroup=function(e,t){var n=!1,r=!1,i=!1,o=!1,a=t.metadata.create();if(t.metadata.discriminatorColumn){var s=e.map(function(e){return e[t.name+"_"+t.metadata.discriminatorColumn.databaseName]}),u=t.metadata.childEntityMetadatas.find(function(e){return!!s.find(function(t){return t===e.discriminatorValue})});u&&(a=u.create())}return n=this.transformColumns(e,t,a,t.metadata),r=this.transformJoins(e,a,t),i=this.transformRelationIds(e,t,a),o=this.transformRelationCounts(e,t,a),n||r||i||o?a:void 0},e.prototype.transformColumns=function(e,t,n,r){var i=this,o=!1;return r.columns.forEach(function(r){var a=e[0][t.name+"_"+r.databaseName];void 0===a||r.isVirtual||r.isParentId||r.isDiscriminator||i.expressionMap.selects.find(function(e){return e.selection===t.name||e.selection===t.name+"."+r.propertyName})&&(r.setEntityValue(n,i.driver.prepareHydratedValue(a,r)),null!==a&&(o=!0))}),t.metadata.parentEntityMetadata&&t.metadata.parentEntityMetadata.columns.forEach(function(r){var a=e[0]["parentIdColumn_"+t.metadata.parentEntityMetadata.tableName+"_"+r.databaseName];void 0===a||r.isVirtual||r.isParentId||r.isDiscriminator||(r.setEntityValue(n,i.driver.prepareHydratedValue(a,r)),null!==a&&(o=!0))}),o},e.prototype.transformJoins=function(e,t,n){var r=this,i=!1,o="";return n.metadata.discriminatorColumn&&(o=e[0][n.name+"_"+n.metadata.discriminatorColumn.databaseName]),this.expressionMap.joinAttributes.forEach(function(a){if(a.metadata){var s=n.metadata.childEntityMetadatas.find(function(e){return o===e.discriminatorValue});if(!s||!a.relation||s.target===a.relation.target){if(a.mapToProperty){if(a.mapToPropertyParentAlias!==n.name)return}else if(!a.relation||a.parentAlias!==n.name||a.relationPropertyPath!==a.relation.propertyPath)return;var u=r.transform(e,a.alias),c=a.isMany?u:u[0];c&&(a.mapToPropertyPropertyName?t[a.mapToPropertyPropertyName]=c:a.relation.setEntityValue(t,c),i=!0)}}}),i},e.prototype.transformRelationIds=function(e,t,r){var i=this,o=!1;return this.rawRelationIdResults.forEach(function(a){if(a.relationIdAttribute.parentAlias===t.name){var s=a.relationIdAttribute.relation,u=i.createValueMapFromJoinColumns(s,a.relationIdAttribute.parentAlias,e);if(void 0!==u&&null!==u){var c=a.results.map(function(e){var r=i.extractEntityPrimaryIds(s,e);if(t.metadata.compareIds(r,u)){var o,c=(o=s.isManyToOne||s.isOneToOneOwner?s.joinColumns.map(function(e){return e}):s.isOneToMany||s.isOneToOneNotOwner?s.inverseEntityMetadata.primaryColumns.map(function(e){return e}):s.isOwning?s.inverseJoinColumns.map(function(e){return e}):s.inverseRelation.joinColumns.map(function(e){return e})).reduce(function(t,r){return s.isOneToMany||s.isOneToOneNotOwner?n.OrmUtils.mergeDeep(t,r.createValueMap(e[r.databaseName])):n.OrmUtils.mergeDeep(t,r.referencedColumn.createValueMap(e[r.databaseName]))},{});return 1===o.length&&!1===a.relationIdAttribute.disableMixedMap?s.isOneToMany||s.isOneToOneNotOwner?o[0].getEntityValue(c):o[0].referencedColumn.getEntityValue(c):c}}).filter(function(e){return e}),l=a.relationIdAttribute.mapToPropertyPropertyPath.split("."),p=function(e,t,n){var r=e.shift();return r&&0===e.length?(t[r]=n,t):r&&e.length>0?void p(e,t[r],n):t};s.isOneToOne||s.isManyToOne?void 0!==c[0]&&(p(l,r,c[0]),o=!0):(p(l,r,c),c.length>0&&(o=!0))}}}),o},e.prototype.transformRelationCounts=function(e,t,n){var r=!1;return this.rawRelationCountResults.filter(function(e){return e.relationCountAttribute.parentAlias===t.name}).forEach(function(i){var o,a=i.relationCountAttribute.relation;o=a.isOneToMany?a.inverseRelation.joinColumns[0].referencedColumn.databaseName:a.isOwning?a.joinColumns[0].referencedColumn.databaseName:a.inverseRelation.joinColumns[0].referencedColumn.databaseName;var s=e[0][t.name+"_"+o];void 0!==s&&null!==s&&(n[i.relationCountAttribute.mapToPropertyPropertyName]=0,i.results.filter(function(e){return e.parentId===s}).forEach(function(e){n[i.relationCountAttribute.mapToPropertyPropertyName]=parseInt(e.cnt),r=!0}))}),r},e.prototype.createValueMapFromJoinColumns=function(e,t,n){return(e.isManyToOne||e.isOneToOneOwner?e.entityMetadata.primaryColumns.map(function(e){return e}):e.isOneToMany||e.isOneToOneNotOwner?e.inverseRelation.joinColumns.map(function(e){return e}):e.isOwning?e.joinColumns.map(function(e){return e}):e.inverseRelation.inverseJoinColumns.map(function(e){return e})).reduce(function(r,i){return n.forEach(function(n){e.isManyToOne||e.isOneToOneOwner?r[i.databaseName]=n[t+"_"+i.databaseName]:r[i.databaseName]=n[t+"_"+i.referencedColumn.databaseName]}),r},{})},e.prototype.extractEntityPrimaryIds=function(e,t){return(e.isManyToOne||e.isOneToOneOwner?e.entityMetadata.primaryColumns.map(function(e){return e}):e.isOneToMany||e.isOneToOneNotOwner?e.inverseRelation.joinColumns.map(function(e){return e}):e.isOwning?e.joinColumns.map(function(e){return e}):e.inverseRelation.inverseJoinColumns.map(function(e){return e})).reduce(function(e,n){return e[n.databaseName]=t[n.databaseName],e},{})},e}(),e("RawSqlResultsToEntityTransformer",r)}}}),System.register("typeorm/error/PessimisticLockTransactionRequiredError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var n=e.call(this)||this;return n.name="PessimisticLockTransactionRequiredError",Object.setPrototypeOf(n,t.prototype),n.message="An open transaction is required for pessimistic lock.",n}return __extends(t,e),t}(Error),e("PessimisticLockTransactionRequiredError",n)}}}),System.register("typeorm/error/NoVersionOrUpdateDateColumnError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(n){var r=e.call(this)||this;return r.name="NoVersionOrUpdateDateColumnError",Object.setPrototypeOf(r,t.prototype),r.message="Entity "+n+" does not have version or update date columns.",r}return __extends(t,e),t}(Error),e("NoVersionOrUpdateDateColumnError",n)}}}),System.register("typeorm/error/OptimisticLockVersionMismatchError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(n,r,i){var o=e.call(this)||this;return o.name="OptimisticLockVersionMismatchError",Object.setPrototypeOf(o,t.prototype),o.message="The optimistic lock on entity "+n+" failed, version "+r+" was expected, but is actually "+i+".",o}return __extends(t,e),t}(Error),e("OptimisticLockVersionMismatchError",n)}}}),System.register("typeorm/error/OptimisticLockCanNotBeUsedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var n=e.call(this)||this;return n.name="OptimisticLockCanNotBeUsedError",Object.setPrototypeOf(n,t.prototype),n.message="The optimistic lock can be used only with getOne() method.",n}return __extends(t,e),t}(Error),e("OptimisticLockCanNotBeUsedError",n)}}}),System.register("typeorm/query-builder/relation-id/RelationIdLoader",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}return e.prototype.load=function(e){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(r){return t=this.relationIdAttributes.map(function(t){return __awaiter(n,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,p,d,m,f,h,y,g,v,b,E,_,T,M;return __generator(this,function(C){switch(C.label){case 0:if(!t.relation.isManyToOne&&!t.relation.isOneToOneOwner)return[3,1];if(t.queryBuilderFactory)throw new Error("Additional condition can not be used with ManyToOne or OneToOne owner relations.");return n=e.map(function(e){var n={};return t.relation.joinColumns.forEach(function(r){n[r.databaseName]=e[t.parentAlias+"_"+r.databaseName]}),t.relation.entityMetadata.primaryColumns.forEach(function(r){n[r.databaseName]=e[t.parentAlias+"_"+r.databaseName]}),n}),[2,{relationIdAttribute:t,results:n}];case 1:return t.relation.isOneToMany||t.relation.isOneToOneNotOwner?(l=t.relation,r=l.isOwning?l.joinColumns:l.inverseRelation.joinColumns,i=l.inverseEntityMetadata.target,o=l.inverseEntityMetadata.tableName,a=t.alias||o,s={},(_=e.map(function(e,n){return r.map(function(r){var i=r.databaseName+n;return s[i]=e[t.parentAlias+"_"+r.referencedColumn.databaseName],a+"."+r.propertyPath+" = :"+i}).join(" AND ")}).map(function(e){return"("+e+")"}).join(" OR "))?(u=this.connection.createQueryBuilder(this.queryRunner),r.forEach(function(e){u.addSelect(a+"."+e.propertyPath,e.databaseName)}),l.inverseRelation.entityMetadata.primaryColumns.forEach(function(e){u.addSelect(a+"."+e.propertyPath,e.databaseName)}),u.from(i,a).where("("+_+")").setParameters(s),t.queryBuilderFactory&&t.queryBuilderFactory(u),c={relationIdAttribute:t},[4,u.getRawMany()]):[2,{relationIdAttribute:t,results:[]}]):[3,3];case 2:return[2,(c.results=C.sent(),c)];case 3:return l=t.relation,p=l.isOwning?l.joinColumns:l.inverseRelation.inverseJoinColumns,d=l.isOwning?l.inverseJoinColumns:l.inverseRelation.joinColumns,m=t.junctionAlias,f=t.joinInverseSideMetadata.tableName,h=t.alias||f,y=l.isOwning?l.junctionEntityMetadata.tableName:l.inverseRelation.junctionEntityMetadata.tableName,0===(g=e.map(function(e){return p.reduce(function(n,r){return n[r.propertyPath]=e[t.parentAlias+"_"+r.referencedColumn.databaseName],n},{})})).length?[2,{relationIdAttribute:t,results:[]}]:(v={},b=g.map(function(e,t){return Object.keys(e).map(function(n){var r=n+t;return v[r]=e[n],m+"."+n+" = :"+r}).join(" AND ")}),E=d.map(function(e){return m+"."+e.propertyPath+" = "+h+"."+e.referencedColumn.propertyPath}).join(" AND "),_=b.map(function(e){return"("+e+" AND "+E+")"}).join(" OR "),T=this.connection.createQueryBuilder(this.queryRunner),d.forEach(function(e){T.addSelect(m+"."+e.propertyPath,e.databaseName).addOrderBy(m+"."+e.propertyPath)}),p.forEach(function(e){T.addSelect(m+"."+e.propertyPath,e.databaseName).addOrderBy(m+"."+e.propertyPath)}),T.from(f,h).innerJoin(y,m,_).setParameters(v),t.queryBuilderFactory&&t.queryBuilderFactory(T),M={relationIdAttribute:t},[4,T.getRawMany()]);case 4:return[2,(M.results=C.sent(),M)]}})})}),[2,Promise.all(t)]})})},e}(),e("RelationIdLoader",n)}}}),System.register("typeorm/query-builder/relation-id/RelationIdMetadataToAttributeTransformer",["typeorm/query-builder/relation-id/RelationIdAttribute"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.expressionMap=e}return e.prototype.transform=function(){var e=this;this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(function(t){var n=e.metadataToAttribute(e.expressionMap.mainAlias.name,t);e.expressionMap.relationIdAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(function(t){t.metadata&&!t.metadata.isJunction&&t.metadata.relationIds.forEach(function(n){var r=e.metadataToAttribute(t.alias.name,n);e.expressionMap.relationIdAttributes.push(r)})})},e.prototype.metadataToAttribute=function(e,t){return new n.RelationIdAttribute(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})},e}(),e("RelationIdMetadataToAttributeTransformer",r)}}}),System.register("typeorm/query-builder/relation-count/RelationCountLoader",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}return e.prototype.load=function(e){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(r){return t=this.relationCountAttributes.map(function(t){return __awaiter(n,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,p,d,m,f,h,y,g,v,b;return __generator(this,function(E){switch(E.label){case 0:return t.relation.isOneToMany?(n=t.relation,r=n.inverseRelation,i=r.joinColumns[0].referencedColumn.propertyName,o=n.inverseEntityMetadata.target,f=n.inverseEntityMetadata.tableName,h=t.alias||f,a=r.propertyName,0===(d=e.map(function(e){return e[t.parentAlias+"_"+i]}).filter(function(e){return!!e})).length?[2,{relationCountAttribute:t,results:[]}]:((v=this.connection.createQueryBuilder(this.queryRunner)).select(h+"."+a,"parentId").addSelect("COUNT(*)","cnt").from(o,h).where(h+"."+a+" IN (:ids)").addGroupBy(h+"."+a).setParameter("ids",d),t.queryBuilderFactory&&t.queryBuilderFactory(v),s={relationCountAttribute:t},[4,v.getRawMany()])):[3,2];case 1:return[2,(s.results=E.sent(),s)];case 2:return c=void 0,l=void 0,p=void 0,t.relation.isOwning?(u=t.relation.joinColumns[0].referencedColumn.databaseName,c=t.relation.inverseJoinColumns[0].referencedColumn.databaseName,l=t.relation.junctionEntityMetadata.columns[0],p=t.relation.junctionEntityMetadata.columns[1]):(u=t.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,c=t.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,l=t.relation.junctionEntityMetadata.columns[1],p=t.relation.junctionEntityMetadata.columns[0]),0===(d=e.map(function(e){return e[t.parentAlias+"_"+u]}).filter(function(e){return e})).length?[2,{relationCountAttribute:t,results:[]}]:(m=t.junctionAlias,f=t.joinInverseSideMetadata.tableName,h=t.alias||f,y=t.relation.junctionEntityMetadata.tableName,g=m+"."+l.propertyName+" IN ("+d+") AND "+m+"."+p.propertyName+" = "+h+"."+c,(v=this.connection.createQueryBuilder(this.queryRunner)).select(m+"."+l.propertyName,"parentId").addSelect("COUNT("+v.escape(h)+"."+v.escape(c)+")","cnt").from(f,h).innerJoin(y,m,g).addGroupBy(m+"."+l.propertyName),t.queryBuilderFactory&&t.queryBuilderFactory(v),b={relationCountAttribute:t},[4,v.getRawMany()]);case 3:return[2,(b.results=E.sent(),b)]}})})}),[2,Promise.all(t)]})})},e}(),e("RelationCountLoader",n)}}}),System.register("typeorm/metadata-args/RelationCountMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/RelationCountMetadata",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}return e.prototype.build=function(){var e=this.relationNameOrFactory instanceof Function?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new Error("Cannot find relation "+e+". Wrong relation specified for @RelationCount decorator.");this.relation=t},e}(),e("RelationCountMetadata",n)}}}),System.register("typeorm/query-builder/relation-count/RelationCountMetadataToAttributeTransformer",["typeorm/query-builder/relation-count/RelationCountAttribute"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.expressionMap=e}return e.prototype.transform=function(){var e=this;this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(function(t){var n=e.metadataToAttribute(e.expressionMap.mainAlias.name,t);e.expressionMap.relationCountAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(function(t){t.metadata&&!t.metadata.isJunction&&t.metadata.relationCounts.forEach(function(n){var r=e.metadataToAttribute(t.alias.name,n);e.expressionMap.relationCountAttributes.push(r)})})},e.prototype.metadataToAttribute=function(e,t){return new n.RelationCountAttribute(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})},e}(),e("RelationCountMetadataToAttributeTransformer",r)}}}),System.register("typeorm/error/LockNotSupportedOnGivenDriverError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var n=e.call(this)||this;return n.name="LockNotSupportedOnGivenDriverError",Object.setPrototypeOf(n,t.prototype),n.message="Locking not supported on given driver.",n}return __extends(t,e),t}(Error),e("LockNotSupportedOnGivenDriverError",n)}}}),System.register("typeorm/cache/QueryResultCacheOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/error/OffsetWithoutLimitNotSupportedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(n){var r=e.call(this,n+" does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")||this;return Object.setPrototypeOf(r,t.prototype),r.name="OffsetWithoutLimitNotSupportedError",r}return __extends(t,e),t}(Error),e("OffsetWithoutLimitNotSupportedError",n)}}}),System.register("typeorm/query-builder/SelectQueryBuilder",["typeorm/query-builder/transformer/RawSqlResultsToEntityTransformer","typeorm/driver/sqlserver/SqlServerDriver","typeorm/error/PessimisticLockTransactionRequiredError","typeorm/error/NoVersionOrUpdateDateColumnError","typeorm/error/OptimisticLockVersionMismatchError","typeorm/error/OptimisticLockCanNotBeUsedError","typeorm/query-builder/JoinAttribute","typeorm/query-builder/relation-id/RelationIdAttribute","typeorm/query-builder/relation-count/RelationCountAttribute","typeorm/query-builder/relation-id/RelationIdLoader","typeorm/query-builder/relation-id/RelationIdMetadataToAttributeTransformer","typeorm/query-builder/relation-count/RelationCountLoader","typeorm/query-builder/relation-count/RelationCountMetadataToAttributeTransformer","typeorm/subscriber/Broadcaster","typeorm/query-builder/QueryBuilder","typeorm/error/LockNotSupportedOnGivenDriverError","typeorm/driver/mysql/MysqlDriver","typeorm/driver/postgres/PostgresDriver","typeorm/driver/oracle/OracleDriver","typeorm/driver/sqlite-abstract/AbstractSqliteDriver","typeorm/error/OffsetWithoutLimitNotSupportedError"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d,m,f,h,y,g,v,b,E,_,T,M;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e},function(e){d=e},function(e){m=e},function(e){f=e},function(e){h=e},function(e){y=e},function(e){g=e},function(e){v=e},function(e){b=e},function(e){E=e},function(e){_=e},function(e){T=e}],execute:function(){M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getQuery=function(){var e=this.createSelectExpression();return e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=this.createLimitOffsetOracleSpecificExpression(e),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),e},t.prototype.subQuery=function(){var e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.expressionMap.parentQueryBuilder=this,e},t.prototype.select=function(e,t){if(this.expressionMap.queryType="select",e instanceof Array)this.expressionMap.selects=e.map(function(e){return{selection:e}});else if(e instanceof Function){var n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this},t.prototype.addSelect=function(e,t){if(!e)return this;if(e instanceof Array)this.expressionMap.selects=this.expressionMap.selects.concat(e.map(function(e){return{selection:e}}));else if(e instanceof Function){var n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this},t.prototype.from=function(e,t){var n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this},t.prototype.addFrom=function(e,t){var n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this},t.prototype.innerJoin=function(e,t,n,r){return void 0===n&&(n=""),this.join("INNER",e,t,n,r),this},t.prototype.leftJoin=function(e,t,n,r){return void 0===n&&(n=""),this.join("LEFT",e,t,n,r),this},t.prototype.innerJoinAndSelect=function(e,t,n,r){return void 0===n&&(n=""),this.addSelect(t),this.innerJoin(e,t,n,r),this},t.prototype.leftJoinAndSelect=function(e,t,n,r){return void 0===n&&(n=""),this.addSelect(t),this.leftJoin(e,t,n,r),this},t.prototype.innerJoinAndMapMany=function(e,t,n,r,i){return void 0===r&&(r=""),this.addSelect(n),this.join("INNER",t,n,r,i,e,!0),this},t.prototype.innerJoinAndMapOne=function(e,t,n,r,i){return void 0===r&&(r=""),this.addSelect(n),this.join("INNER",t,n,r,i,e,!1),this},t.prototype.leftJoinAndMapMany=function(e,t,n,r,i){return void 0===r&&(r=""),this.addSelect(n),this.join("LEFT",t,n,r,i,e,!0),this},t.prototype.leftJoinAndMapOne=function(e,t,n,r,i){return void 0===r&&(r=""),this.addSelect(n),this.join("LEFT",t,n,r,i,e,!1),this},t.prototype.loadRelationIdAndMap=function(e,t,n,r){var i=new c.RelationIdAttribute(this.expressionMap);return i.mapToProperty=e,i.relationName=t,"string"==typeof n&&(i.alias=n),n instanceof Object&&n.disableMixedMap&&(i.disableMixedMap=!0),i.queryBuilderFactory=r,this.expressionMap.relationIdAttributes.push(i),i.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:i.junctionAlias,metadata:i.relation.junctionEntityMetadata}),this},t.prototype.loadRelationCountAndMap=function(e,t,n,r){var i=new l.RelationCountAttribute(this.expressionMap);return i.mapToProperty=e,i.relationName=t,i.alias=n,i.queryBuilderFactory=r,this.expressionMap.relationCountAttributes.push(i),this.expressionMap.createAlias({type:"other",name:i.junctionAlias}),i.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:i.junctionAlias,metadata:i.relation.junctionEntityMetadata}),this},t.prototype.loadAllRelationIds=function(){var e=this;return this.expressionMap.mainAlias.metadata.relations.forEach(function(t){e.loadRelationIdAndMap(e.expressionMap.mainAlias.name+"."+t.propertyPath,e.expressionMap.mainAlias.name+"."+t.propertyPath,{disableMixedMap:!0})}),this},t.prototype.where=function(e,t){this.expressionMap.wheres=[];var n=this.computeWhereParameter(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this},t.prototype.andWhere=function(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.computeWhereParameter(e)}),t&&this.setParameters(t),this},t.prototype.orWhere=function(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.computeWhereParameter(e)}),t&&this.setParameters(t),this},t.prototype.whereInIds=function(e){e=e instanceof Array?e:[e];var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.where(n,r),this},t.prototype.andWhereInIds=function(e){var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.andWhere(n,r),this},t.prototype.orWhereInIds=function(e){var t=this.createWhereIdsExpression(e),n=t[0],r=t[1];return this.orWhere(n,r),this},t.prototype.having=function(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this},t.prototype.andHaving=function(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this},t.prototype.orHaving=function(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this},t.prototype.groupBy=function(e){return this.expressionMap.groupBys=e?[e]:[],this},t.prototype.addGroupBy=function(e){return this.expressionMap.groupBys.push(e),this},t.prototype.orderBy=function(e,t,n){return void 0===t&&(t="ASC"),e?e instanceof Object?this.expressionMap.orderBys=e:this.expressionMap.orderBys=n?(r={},r[e]={order:t,nulls:n},r):(i={},i[e]=t,i):this.expressionMap.orderBys={},this;var r,i},t.prototype.addOrderBy=function(e,t,n){return void 0===t&&(t="ASC"),this.expressionMap.orderBys[e]=n?{order:t,nulls:n}:t,this},t.prototype.limit=function(e){return this.expressionMap.limit=this.normalizeNumber(e),this},t.prototype.offset=function(e){return this.expressionMap.offset=this.normalizeNumber(e),this},t.prototype.take=function(e){return this.expressionMap.take=this.normalizeNumber(e),this},t.prototype.skip=function(e){return this.expressionMap.skip=this.normalizeNumber(e),this},t.prototype.setLock=function(e,t){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this},t.prototype.getRawOne=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.getRawMany()];case 1:return[2,e.sent()[0]]}})})},t.prototype.getRawMany=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if("optimistic"===this.expressionMap.lockMode)throw new s.OptimisticLockCanNotBeUsedError;this.expressionMap.queryEntity=!1,e=this.obtainQueryRunner(),t.label=1;case 1:return t.trys.push([1,,3,6]),[4,this.loadRawResults(e)];case 2:return[2,t.sent()];case 3:return e===this.queryRunner?[3,5]:[4,e.release()];case 4:t.sent(),t.label=5;case 5:return[7];case 6:return[2]}})})},t.prototype.getRawAndEntities=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:e=this.obtainQueryRunner(),t.label=1;case 1:return t.trys.push([1,,3,6]),this.expressionMap.queryEntity=!0,[4,this.executeEntitiesAndRawResults(e)];case 2:return[2,t.sent()];case 3:return e===this.queryRunner?[3,5]:[4,e.release()];case 4:t.sent(),t.label=5;case 5:return[7];case 6:return[2]}})})},t.prototype.getOne=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.getRawAndEntities()];case 1:if(e=i.sent(),(t=e.entities[0])&&"optimistic"===this.expressionMap.lockMode&&this.expressionMap.lockVersion)if(n=this.expressionMap.mainAlias.metadata,this.expressionMap.lockVersion instanceof Date){if((r=t[n.updateDateColumn.propertyName]).getTime()!==this.expressionMap.lockVersion.getTime())throw new a.OptimisticLockVersionMismatchError(n.name,this.expressionMap.lockVersion,r)}else if((r=t[n.versionColumn.propertyName])!==this.expressionMap.lockVersion)throw new a.OptimisticLockVersionMismatchError(n.name,this.expressionMap.lockVersion,r);return[2,t]}})})},t.prototype.getMany=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if("optimistic"===this.expressionMap.lockMode)throw new s.OptimisticLockCanNotBeUsedError;return[4,this.getRawAndEntities()];case 1:return e=t.sent(),[2,e.entities]}})})},t.prototype.getCount=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if("optimistic"===this.expressionMap.lockMode)throw new s.OptimisticLockCanNotBeUsedError;e=this.obtainQueryRunner(),t.label=1;case 1:return t.trys.push([1,,3,6]),[4,this.executeCountQuery(e)];case 2:return[2,t.sent()];case 3:return e===this.queryRunner?[3,5]:[4,e.release()];case 4:t.sent(),t.label=5;case 5:return[7];case 6:return[2]}})})},t.prototype.getManyAndCount=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(r){switch(r.label){case 0:if("optimistic"===this.expressionMap.lockMode)throw new s.OptimisticLockCanNotBeUsedError;e=this.obtainQueryRunner(),r.label=1;case 1:return r.trys.push([1,,4,7]),[4,this.executeEntitiesAndRawResults(e)];case 2:return t=r.sent(),[4,this.executeCountQuery(e)];case 3:return n=r.sent(),[2,[t.entities,n]];case 4:return e===this.queryRunner?[3,6]:[4,e.release()];case 5:r.sent(),r.label=6;case 6:return[7];case 7:return[2]}})})},t.prototype.stream=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o=this;return __generator(this,function(a){switch(a.label){case 0:this.expressionMap.queryEntity=!1,e=this.getQueryAndParameters(),t=e[0],n=e[1],r=this.obtainQueryRunner(),a.label=1;case 1:return a.trys.push([1,,2,5]),i=function(){if(r!==o.queryRunner)return r.release()},[2,r.stream(t,n,i,i)];case 2:return r===this.queryRunner?[3,4]:[4,r.release()];case 3:a.sent(),a.label=4;case 4:return[7];case 5:return[2]}})})},t.prototype.cache=function(e,t){return"boolean"==typeof e?this.expressionMap.cache=e:"number"==typeof e?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):"string"!=typeof e&&"number"!=typeof e||(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this},t.prototype.join=function(e,t,n,r,i,o,a){this.setParameters(i||{});var s=new u.JoinAttribute(this.connection,this.expressionMap);if(s.direction=e,s.mapToProperty=o,s.isMappingMany=a,s.entityOrProperty=t,s.condition=r,this.expressionMap.joinAttributes.push(s),s.metadata)s.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:s.metadata}),s.relation&&s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata});else{var c="";if(t instanceof Function){var l=t(this.subQuery());this.setParameters(l.getParameters()),c=l.getQuery()}else c=t;var p=t instanceof Function||"("===t.substr(0,1)&&")"===t.substr(-1);s.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:!1===p?t:void 0,subQuery:!0===p?c:void 0})}},t.prototype.createSelectExpression=function(){var e=this;if(!this.expressionMap.mainAlias)throw new Error("Cannot build query because main alias is not set (call qb#from method)");var t=[],n=[];if(this.expressionMap.mainAlias.hasMetadata){var i=this.expressionMap.mainAlias.metadata;t.push.apply(t,this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,i)),n.push.apply(n,this.findEntityColumnSelects(this.expressionMap.mainAlias.name,i))}if(this.expressionMap.joinAttributes.forEach(function(r){if(r.metadata)t.push.apply(t,e.buildEscapedEntityColumnSelects(r.alias.name,r.metadata)),n.push.apply(n,e.findEntityColumnSelects(r.alias.name,r.metadata));else if(e.expressionMap.selects.some(function(e){return e.selection===r.alias.name})){t.push({selection:e.escape(r.alias.name)+".*"});var i=e.expressionMap.selects.find(function(e){return e.selection===r.alias.name});n.push(i)}}),!this.expressionMap.ignoreParentTablesJoins&&this.expressionMap.mainAlias.hasMetadata&&(i=this.expressionMap.mainAlias.metadata).parentEntityMetadata&&"class-table"===i.parentEntityMetadata.inheritanceType&&i.parentIdColumns){var o="parentIdColumn_"+i.parentEntityMetadata.tableName;i.parentEntityMetadata.columns.forEach(function(n){t.push({selection:e.escape(o)+"."+e.escape(n.databaseName),aliasName:o+"_"+n.databaseName})})}this.expressionMap.selects.filter(function(e){return-1===n.indexOf(e)}).forEach(function(n){return t.push({selection:e.replacePropertyNames(n.selection),aliasName:n.aliasName})}),0===t.length&&t.push({selection:"*"});var a="";if(this.connection.driver instanceof r.SqlServerDriver)switch(this.expressionMap.lockMode){case"pessimistic_read":a=" WITH (HOLDLOCK, ROWLOCK)";break;case"pessimistic_write":a=" WITH (UPDLOCK, ROWLOCK)"}var s=this.expressionMap.aliases.filter(function(e){return"from"===e.type&&(e.tablePath||e.subQuery)}).map(function(t){return t.subQuery?t.subQuery+" "+e.escape(t.name):e.getTableName(t.tablePath)+" "+e.escape(t.name)}),u=t.map(function(t){return t.selection+(t.aliasName?" AS "+e.escape(t.aliasName):"")}).join(", ");return(this.expressionMap.limit||this.expressionMap.offset)&&this.connection.driver instanceof E.OracleDriver?"SELECT ROWNUM "+this.escape("RN")+","+u+" FROM "+s.join(", ")+a:"SELECT "+u+" FROM "+s.join(", ")+a},t.prototype.createJoinExpression=function(){var e=this,t=this.expressionMap.joinAttributes.map(function(t){var n=t.relation,r=t.tablePath,i=t.alias.name,o=t.condition?" AND ("+t.condition+")":"",a=t.parentAlias;if(!a||!n){var s=t.alias.subQuery?t.alias.subQuery:e.getTableName(r);return" "+t.direction+" JOIN "+s+" "+e.escape(i)+(t.condition?" ON "+e.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){u=n.joinColumns.map(function(e){return i+"."+e.referencedColumn.propertyPath+"="+a+"."+n.propertyPath+"."+e.referencedColumn.propertyPath}).join(" AND ");return" "+t.direction+" JOIN "+e.getTableName(r)+" "+e.escape(i)+" ON "+e.replacePropertyNames(u+o)}if(n.isOneToMany||n.isOneToOneNotOwner){var u=n.inverseRelation.joinColumns.map(function(e){return i+"."+n.inverseRelation.propertyPath+"."+e.referencedColumn.propertyPath+"="+a+"."+e.referencedColumn.propertyPath}).join(" AND ");return" "+t.direction+" JOIN "+e.getTableName(r)+" "+e.escape(i)+" ON "+e.replacePropertyNames(u+o)}var c=n.junctionEntityMetadata.tablePath,l=t.junctionAlias,p="",d="";return n.isOwning?(p=n.joinColumns.map(function(e){return l+"."+e.propertyPath+"="+a+"."+e.referencedColumn.propertyPath}).join(" AND "),d=n.inverseJoinColumns.map(function(e){return i+"."+e.referencedColumn.propertyPath+"="+l+"."+e.propertyPath}).join(" AND ")):(p=n.inverseRelation.inverseJoinColumns.map(function(e){return l+"."+e.propertyPath+"="+a+"."+e.referencedColumn.propertyPath}).join(" AND "),d=n.inverseRelation.joinColumns.map(function(e){return i+"."+e.referencedColumn.propertyPath+"="+l+"."+e.propertyPath}).join(" AND "))," "+t.direction+" JOIN "+e.getTableName(c)+" "+e.escape(l)+" ON "+e.replacePropertyNames(p)+" "+t.direction+" JOIN "+e.getTableName(r)+" "+e.escape(i)+" ON "+e.replacePropertyNames(d+o)});if(!this.expressionMap.ignoreParentTablesJoins&&this.expressionMap.mainAlias.hasMetadata){var n=this.expressionMap.mainAlias.metadata;if(n.parentEntityMetadata&&"class-table"===n.parentEntityMetadata.inheritanceType&&n.parentIdColumns){var r="parentIdColumn_"+n.parentEntityMetadata.tableName,i=n.parentIdColumns.map(function(t){return e.expressionMap.mainAlias.name+"."+t.propertyPath+" = "+e.escape(r)+"."+e.escape(t.referencedColumn.propertyPath)}).join(" AND "),o=" JOIN "+this.getTableName(n.parentEntityMetadata.tablePath)+" "+this.escape(r)+" ON "+this.replacePropertyNames(i);t.push(o)}}return t.join(" ")},t.prototype.createGroupByExpression=function(){return this.expressionMap.groupBys&&this.expressionMap.groupBys.length?" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", ")):""},t.prototype.createOrderByExpression=function(){var e=this,t=this.expressionMap.allOrderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(function(n){return"string"==typeof t[n]?e.replacePropertyNames(n)+" "+t[n]:e.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls}).join(", "):""},t.prototype.createLimitOffsetOracleSpecificExpression=function(e){return(this.expressionMap.offset||this.expressionMap.limit)&&this.connection.driver instanceof E.OracleDriver&&(e="SELECT * FROM ("+e+") WHERE ",this.expressionMap.offset&&(e+=this.escape("RN")+" >= "+this.expressionMap.offset),this.expressionMap.limit&&(e+=(this.expressionMap.offset?" AND ":"")+this.escape("RN")+" <= "+((this.expressionMap.offset||0)+this.expressionMap.limit))),e},t.prototype.createLimitOffsetExpression=function(){if(this.connection.driver instanceof E.OracleDriver)return"";var e=this.expressionMap.offset,t=this.expressionMap.limit;if(e||t||0!==this.expressionMap.joinAttributes.length||(e=this.expressionMap.skip,t=this.expressionMap.take),this.connection.driver instanceof r.SqlServerDriver){if(t&&e)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(e)return" OFFSET "+e+" ROWS"}else if(this.connection.driver instanceof v.MysqlDriver){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)throw new T.OffsetWithoutLimitNotSupportedError("MySQL")}else if(this.connection.driver instanceof _.AbstractSqliteDriver){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" LIMIT -1 OFFSET "+e}else{if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" OFFSET "+e}return""},t.prototype.createLockExpression=function(){switch(this.expressionMap.lockMode){case"pessimistic_read":if(this.connection.driver instanceof v.MysqlDriver)return" LOCK IN SHARE MODE";if(this.connection.driver instanceof b.PostgresDriver)return" FOR SHARE";if(this.connection.driver instanceof r.SqlServerDriver)return"";throw new g.LockNotSupportedOnGivenDriverError;case"pessimistic_write":if(this.connection.driver instanceof v.MysqlDriver||this.connection.driver instanceof b.PostgresDriver)return" FOR UPDATE";if(this.connection.driver instanceof r.SqlServerDriver)return"";throw new g.LockNotSupportedOnGivenDriverError;default:return""}},t.prototype.createHavingExpression=function(){var e=this;if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";var t=this.expressionMap.havings.map(function(t,n){switch(t.type){case"and":return(n>0?"AND ":"")+e.replacePropertyNames(t.condition);case"or":return(n>0?"OR ":"")+e.replacePropertyNames(t.condition);default:return e.replacePropertyNames(t.condition)}}).join(" ");return t.length?" HAVING "+t:""},t.prototype.buildEscapedEntityColumnSelects=function(e,t){var n=this,r=this.expressionMap.selects.some(function(t){return t.selection===e}),i=[];r&&i.push.apply(i,t.columns.filter(function(e){return!0===e.isSelect})),i.push.apply(i,t.columns.filter(function(t){return n.expressionMap.selects.some(function(n){return n.selection===e+"."+t.propertyName})}));var o=this.expressionMap.queryEntity?t.primaryColumns.filter(function(e){return-1===i.indexOf(e)}):[];return i.concat(o).map(function(t){var i=n.expressionMap.selects.find(function(n){return n.selection===e+"."+t.propertyName});return{selection:n.escape(e)+"."+n.escape(t.databaseName),aliasName:i&&i.aliasName?i.aliasName:e+"_"+t.databaseName,virtual:i?!0===i.virtual:!r}})},t.prototype.findEntityColumnSelects=function(e,t){var n=this.expressionMap.selects.find(function(t){return t.selection===e});return n?[n]:this.expressionMap.selects.filter(function(n){return t.columns.some(function(t){return n.selection===e+"."+t.propertyName})})},t.prototype.executeCountQuery=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return this.expressionMap.queryEntity=!1,t=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata,r=this.escape(t),i="",i=n.hasMultiplePrimaryKeys?this.connection.driver instanceof _.AbstractSqliteDriver?"COUNT(DISTINCT("+n.primaryColumns.map(function(e,t){var n=a.escape(e.databaseName);return r+"."+n}).join(" || ")+')) as "cnt"':"COUNT(DISTINCT(CONCAT("+n.primaryColumns.map(function(e,t){var n=a.escape(e.databaseName);return r+"."+n}).join(", ")+'))) as "cnt"':"COUNT(DISTINCT("+n.primaryColumns.map(function(e,t){var n=a.escape(e.databaseName);return r+"."+n}).join(", ")+')) as "cnt"',[4,this.clone().mergeExpressionMap({ignoreParentTablesJoins:!0}).orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(i).loadRawResults(e)];case 1:return(o=s.sent())&&o[0]&&o[0].cnt?[2,parseInt(o[0].cnt)]:[2,0]}})})},t.prototype.executeEntitiesAndRawResults=function(e){return __awaiter(this,void 0,void 0,function(){var r,a,s,u,c,l,y,g,v,b,E,_,T,M,C,w,N,R,S,O,A,P=this;return __generator(this,function(x){switch(x.label){case 0:if(!this.expressionMap.mainAlias)throw new Error('Alias is not set. Use "from" method to set an alias.');if(("pessimistic_read"===this.expressionMap.lockMode||"pessimistic_write"===this.expressionMap.lockMode)&&!e.isTransactionActive)throw new i.PessimisticLockTransactionRequiredError;if("optimistic"===this.expressionMap.lockMode&&!(r=this.expressionMap.mainAlias.metadata).versionColumn&&!r.updateDateColumn)throw new o.NoVersionOrUpdateDateColumnError(r.name);return a=new h.Broadcaster(this.connection),s=new p.RelationIdLoader(this.connection,e,this.expressionMap.relationIdAttributes),u=new m.RelationCountLoader(this.connection,e,this.expressionMap.relationCountAttributes),(c=new d.RelationIdMetadataToAttributeTransformer(this.expressionMap)).transform(),(l=new f.RelationCountMetadataToAttributeTransformer(this.expressionMap)).transform(),y=[],g=[],(this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0?(v=this.createOrderByCombinedWithSelectExpression("distinctAlias"),b=v[0],E=v[1],_=this.expressionMap.mainAlias.metadata,T=this.expressionMap.mainAlias.name,M=_.primaryColumns.map(function(e){var t=P.escape("distinctAlias"),n=P.escape(T+"_"+e.databaseName);return E[n]||(E[n]="ASC"),t+"."+n+' as "ids_'+T+"_"+e.databaseName+'"'}),[4,new t(this.connection,e).select("DISTINCT "+M.join(", ")).addSelect(b).from("("+this.clone().orderBy().groupBy().getQuery()+")","distinctAlias").offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(E).cache(this.expressionMap.cache?this.expressionMap.cache:this.expressionMap.cacheId,this.expressionMap.cacheDuration).setParameters(this.getParameters()).getRawMany()]):[3,4];case 1:return(y=x.sent()).length>0?(C="",w={},_.hasMultiplePrimaryKeys?C=y.map(function(e,t){return _.primaryColumns.map(function(n){return w["ids_"+t+"_"+n.propertyName]=e["ids_"+T+"_"+n.databaseName],T+"."+n.propertyName+"=:ids_"+t+"_"+n.databaseName}).join(" AND ")}).join(" OR "):(N=y.map(function(e){return e["ids_"+T+"_"+_.primaryColumns[0].databaseName]}),(R=N.every(function(e){return"number"==typeof e}))?C=T+"."+_.primaryColumns[0].propertyName+" IN ("+N.join(", ")+")":(w.ids=N,C=T+"."+_.primaryColumns[0].propertyName+" IN (:ids)")),[4,this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:C}).setParameters(w).loadRawResults(e)]):[3,3];case 2:y=x.sent(),x.label=3;case 3:return[3,6];case 4:return[4,this.loadRawResults(e)];case 5:y=x.sent(),x.label=6;case 6:return y.length>0?[4,s.load(y)]:[3,10];case 7:return S=x.sent(),[4,u.load(y)];case 8:return O=x.sent(),A=new n.RawSqlResultsToEntityTransformer(this.expressionMap,this.connection.driver,S,O),g=A.transform(y,this.expressionMap.mainAlias),this.expressionMap.mainAlias.hasMetadata?[4,a.broadcastLoadEventsForAll(this.expressionMap.mainAlias.target,g)]:[3,10];case 9:x.sent(),x.label=10;case 10:return[2,{raw:y,entities:g}]}})})},t.prototype.createOrderByCombinedWithSelectExpression=function(e){var t=this,n=this.expressionMap.allOrderBys,r=Object.keys(n).map(function(n){if(-1!==n.indexOf(".")){var r=n.split("."),i=r[0],o=r[1],a=t.expressionMap.findAliasByName(i).metadata.findColumnWithPropertyName(o);return t.escape(e)+"."+t.escape(i+"_"+a.databaseName)}return t.expressionMap.selects.find(function(e){return e.selection===n||e.aliasName===n})?t.escape(e)+"."+n:""}).join(", "),i={};return Object.keys(n).forEach(function(r){if(-1!==r.indexOf(".")){var o=r.split("."),a=o[0],s=o[1],u=t.expressionMap.findAliasByName(a).metadata.findColumnWithPropertyName(s);i[t.escape(e)+"."+t.escape(a+"_"+u.databaseName)]=n[r]}else t.expressionMap.selects.find(function(e){return e.selection===r||e.aliasName===r})?i[t.escape(e)+"."+r]=n[r]:i[r]=n[r]}),[r,i]},t.prototype.loadRawResults=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a;return __generator(this,function(s){switch(s.label){case 0:return t=this.getQueryAndParameters(),n=t[0],r=t[1],i="object"==typeof this.connection.options.cache?this.connection.options.cache:{},o=void 0,this.connection.queryResultCache&&(this.expressionMap.cache||i.alwaysEnabled)?[4,this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:this.getSql(),duration:this.expressionMap.cacheDuration||i.duration||1e3},e)]:[3,2];case 1:if((o=s.sent())&&!this.connection.queryResultCache.isExpired(o))return[2,JSON.parse(o.result)];s.label=2;case 2:return[4,e.query(n,r)];case 3:return a=s.sent(),this.connection.queryResultCache&&(this.expressionMap.cache||i.alwaysEnabled)?[4,this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:this.getSql(),time:(new Date).getTime(),duration:this.expressionMap.cacheDuration||i.duration||1e3,result:JSON.stringify(a)},o,e)]:[3,5];case 4:s.sent(),s.label=5;case 5:return[2,a]}})})},t.prototype.mergeExpressionMap=function(e){return Object.assign(this.expressionMap,e),this},t.prototype.normalizeNumber=function(e){return"number"==typeof e||void 0===e||null===e?e:parseInt(e)},t.prototype.obtainQueryRunner=function(){return this.queryRunner||this.connection.createQueryRunner("slave")},t}(y.QueryBuilder),e("SelectQueryBuilder",M)}}}),System.register("typeorm/metadata-args/RelationIdMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/RelationIdMetadata",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}return e.prototype.setValue=function(e){var t=this,n=this.relation.getEntityValue(e);if(n instanceof Array)e[this.propertyName]=n.map(function(e){return t.relation.inverseEntityMetadata.getEntityIdMixedMap(e)}).filter(function(e){return null!==e&&void 0!==e});else{var r=this.relation.inverseEntityMetadata.getEntityIdMixedMap(n);void 0!==r&&(e[this.propertyName]=r)}},e.prototype.build=function(){var e=this.relationNameOrFactory instanceof Function?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new Error("Cannot find relation "+e+". Wrong relation specified for @RelationId decorator.");this.relation=t},e}(),e("RelationIdMetadata",n)}}}),System.register("typeorm/metadata-args/EntityListenerMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/EntityListenerMetadata",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.type=e.args.type}return e.prototype.isAllowed=function(e){return this.entityMetadata.target===e.constructor||this.entityMetadata.target instanceof Function&&e.constructor.prototype instanceof this.entityMetadata.target},e.prototype.execute=function(e){if(!this.embeddedMetadata)return e[this.propertyName]();this.callEntityEmbeddedMethod(e,this.embeddedMetadata.propertyPath.split("."))},e.prototype.callEntityEmbeddedMethod=function(e,t){var n=t.shift();n&&(0===t.length?e[n][this.propertyName]():e[n]&&this.callEntityEmbeddedMethod(e[n],t))},e}(),e("EntityListenerMetadata",n)}}}),System.register("typeorm/metadata/EmbeddedMetadata",["typeorm/driver/mongodb/MongoDriver"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.columns=[],this.relations=[],this.listeners=[],this.indices=[],this.relationIds=[],this.relationCounts=[],this.embeddeds=[],this.isArray=!1,this.parentPropertyNames=[],this.parentPrefixes=[],this.embeddedMetadataTree=[],this.columnsFromTree=[],this.relationsFromTree=[],this.listenersFromTree=[],this.indicesFromTree=[],this.relationIdsFromTree=[],this.relationCountsFromTree=[],this.entityMetadata=e.entityMetadata,this.type=e.args.type(),this.propertyName=e.args.propertyName,this.customPrefix=e.args.prefix,this.isArray=e.args.isArray}return e.prototype.create=function(){return new this.type},e.prototype.build=function(e){return this.embeddeds.forEach(function(t){return t.build(e)}),this.prefix=this.buildPrefix(e),this.parentPropertyNames=this.buildParentPropertyNames(),this.parentPrefixes=this.buildParentPrefixes(),this.propertyPath=this.parentPropertyNames.join("."),this.embeddedMetadataTree=this.buildEmbeddedMetadataTree(),this.columnsFromTree=this.buildColumnsFromTree(),this.relationsFromTree=this.buildRelationsFromTree(),this.listenersFromTree=this.buildListenersFromTree(),this.indicesFromTree=this.buildIndicesFromTree(),this.relationIdsFromTree=this.buildRelationIdsFromTree(),this.relationCountsFromTree=this.buildRelationCountsFromTree(),this},e.prototype.buildPrefix=function(e){if(e.driver instanceof n.MongoDriver)return this.propertyName;var t=[];return this.parentEmbeddedMetadata&&t.push(this.parentEmbeddedMetadata.buildPrefix(e)),void 0===this.customPrefix?t.push(this.propertyName):"string"==typeof this.customPrefix&&t.push(this.customPrefix),t.join("_")},e.prototype.buildParentPropertyNames=function(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPropertyNames().concat(this.propertyName):[this.propertyName]},e.prototype.buildParentPrefixes=function(){return[this.prefix||this.propertyName]},e.prototype.buildEmbeddedMetadataTree=function(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildEmbeddedMetadataTree().concat(this):[this]},e.prototype.buildColumnsFromTree=function(){return this.embeddeds.reduce(function(e,t){return e.concat(t.buildColumnsFromTree())},this.columns)},e.prototype.buildRelationsFromTree=function(){return this.embeddeds.reduce(function(e,t){return e.concat(t.buildRelationsFromTree())},this.relations)},e.prototype.buildListenersFromTree=function(){return this.embeddeds.reduce(function(e,t){return e.concat(t.buildListenersFromTree())},this.listeners)},e.prototype.buildIndicesFromTree=function(){return this.embeddeds.reduce(function(e,t){return e.concat(t.buildIndicesFromTree())},this.indices)},e.prototype.buildRelationIdsFromTree=function(){return this.embeddeds.reduce(function(e,t){return e.concat(t.buildRelationIdsFromTree())},this.relationIds)},e.prototype.buildRelationCountsFromTree=function(){return this.embeddeds.reduce(function(e,t){return e.concat(t.buildRelationCountsFromTree())},this.relationCounts)},e}(),e("EmbeddedMetadata",r)}}}),System.register("typeorm/decorator/options/RelationOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/types/PropertyTypeInFunction",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/types/RelationTypeInFunction",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/RelationMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/RelationMetadata",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.isTreeParent=!1,this.isTreeChildren=!1,this.isPrimary=!1,this.isLazy=!1,this.isEager=!1,this.isCascadeInsert=!1,this.isCascadeUpdate=!1,this.isCascadeRemove=!1,this.isNullable=!0,this.isOwning=!1,this.isOneToOne=!1,this.isOneToOneOwner=!1,this.isWithJoinColumn=!1,this.isOneToOneNotOwner=!1,this.isOneToMany=!1,this.isManyToOne=!1,this.isManyToMany=!1,this.isManyToManyOwner=!1,this.isManyToManyNotOwner=!1,this.foreignKeys=[],this.joinColumns=[],this.inverseJoinColumns=[],this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata;var t=e.args;this.target=t.target,this.propertyName=t.propertyName,this.relationType=t.relationType,t.inverseSideProperty&&(this.givenInverseSidePropertyFactory=t.inverseSideProperty),this.isLazy=t.isLazy||!1,this.isCascadeInsert=t.options.cascadeInsert||t.options.cascadeAll||!1,this.isCascadeUpdate=t.options.cascadeUpdate||t.options.cascadeAll||!1,this.isCascadeRemove=t.options.cascadeRemove||t.options.cascadeAll||!1,this.isNullable=!1!==t.options.nullable&&!this.isPrimary,this.onDelete=t.options.onDelete,this.isPrimary=t.options.primary||!1,this.isEager=t.options.eager||!1,this.isTreeParent=t.isTreeParent||!1,this.isTreeChildren=t.isTreeChildren||!1,this.type=t.type instanceof Function?t.type():t.type,this.isOneToOne="one-to-one"===this.relationType,this.isOneToMany="one-to-many"===this.relationType,this.isManyToOne="many-to-one"===this.relationType,this.isManyToMany="many-to-many"===this.relationType,this.isOneToOneNotOwner=!!this.isOneToOne,this.isManyToManyNotOwner=!!this.isManyToMany}return e.prototype.getEntityValue=function(e){if(this.embeddedMetadata){var t=this.embeddedMetadata.parentPropertyNames.slice(),n=function(e,t){var r=e.shift();return r?n(e,t[r]):t},r=n(t,e);return r?r[this.isLazy?"__"+this.propertyName+"__":this.propertyName]:void 0}return e[this.isLazy?"__"+this.propertyName+"__":this.propertyName]},e.prototype.setEntityValue=function(e,t){var n=this;if(this.embeddedMetadata){var r=function(e,i){var o=e.shift();return o?(i[o.propertyName]||(i[o.propertyName]=o.create()),r(e,i[o.propertyName]),i):(i[n.propertyName]=t,i)};return r(this.embeddedMetadata.embeddedMetadataTree.slice(),e)}e[this.propertyName]=t},e.prototype.createValueMap=function(e){var t=this;if(this.embeddedMetadata){var n=this.embeddedMetadata.parentPropertyNames.slice(),r=function(n,i){var o=n.shift();return o?(i[o]={},r(n,i[o]),i):(i[t.propertyName]=e,i)};return r(n,{})}return i={},i[this.propertyName]=e,i;var i},e.prototype.build=function(){this.propertyPath=this.buildPropertyPath()},e.prototype.registerForeignKeys=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(n=this.foreignKeys).push.apply(n,e),this.joinColumns=this.foreignKeys[0]?this.foreignKeys[0].columns:[],this.inverseJoinColumns=this.foreignKeys[1]?this.foreignKeys[1].columns:[],this.isOwning=this.isManyToOne||(this.isManyToMany||this.isOneToOne)&&this.joinColumns.length>0,this.isOneToOneOwner=this.isOneToOne&&this.isOwning,this.isOneToOneNotOwner=this.isOneToOne&&!this.isOwning,this.isManyToManyOwner=this.isManyToMany&&this.isOwning,this.isManyToManyNotOwner=this.isManyToMany&&!this.isOwning,this.isWithJoinColumn=this.isManyToOne||this.isOneToOneOwner;var n},e.prototype.registerJunctionEntityMetadata=function(e){this.junctionEntityMetadata=e,this.joinTableName=e.tableName,this.inverseRelation&&(this.inverseRelation.junctionEntityMetadata=e,this.joinTableName=e.tableName)},e.prototype.buildInverseSidePropertyPath=function(){if(this.givenInverseSidePropertyFactory){var e=this.inverseEntityMetadata.propertiesMap;if("function"==typeof this.givenInverseSidePropertyFactory)return this.givenInverseSidePropertyFactory(e);if("string"==typeof this.givenInverseSidePropertyFactory)return this.givenInverseSidePropertyFactory}else{if(this.isTreeParent&&this.entityMetadata.treeChildrenRelation)return this.entityMetadata.treeChildrenRelation.propertyName;if(this.isTreeChildren&&this.entityMetadata.treeParentRelation)return this.entityMetadata.treeParentRelation.propertyName}return""},e.prototype.buildPropertyPath=function(){return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length?this.embeddedMetadata.parentPropertyNames.join(".")+"."+this.propertyName:this.propertyName},e}(),e("RelationMetadata",n)}}}),System.register("typeorm/lazy-loading/LazyRelationsWrapper",["typeorm/query-builder/RelationLoader"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.connection=e}return e.prototype.wrap=function(e,t){var r=new n.RelationLoader(this.connection),i="__"+t.propertyName+"__",o="__promise_"+t.propertyName+"__",a="__has_"+t.propertyName+"__";Object.defineProperty(e,t.propertyName,{get:function(){var e=this;return!0===this[a]?Promise.resolve(this[i]):this[o]?this[o]:(this[o]=r.load(t,this).then(function(t){return e[i]=t,e[a]=!0,delete e[o],e[i]}),this[o])},set:function(e){var t=this;e instanceof Promise?e.then(function(e){t[i]=e,t[a]=!0}):(this[i]=e,this[a]=!0)},configurable:!0})},e}(),e("LazyRelationsWrapper",r)}}}),System.register("typeorm/metadata-args/TableMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/EntityMetadata",["typeorm/lazy-loading/LazyRelationsWrapper","typeorm/util/OrmUtils","typeorm/driver/postgres/PostgresDriver","typeorm/driver/sqlserver/SqlServerDriver"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e){this.childEntityMetadatas=[],this.tableType="regular",this.isJunction=!1,this.ownColumns=[],this.ownRelations=[],this.ownListeners=[],this.ownIndices=[],this.relations=[],this.eagerRelations=[],this.lazyRelations=[],this.columns=[],this.ownerColumns=[],this.inverseColumns=[],this.relationIds=[],this.relationCounts=[],this.indices=[],this.foreignKeys=[],this.embeddeds=[],this.listeners=[],this.generatedColumns=[],this.primaryColumns=[],this.parentIdColumns=[],this.oneToOneRelations=[],this.ownerOneToOneRelations=[],this.oneToManyRelations=[],this.manyToOneRelations=[],this.manyToManyRelations=[],this.ownerManyToManyRelations=[],this.relationsWithJoinColumns=[];var t=e.connection.namingStrategy,r=e.connection.options.entityPrefix;this.lazyRelationsWrapper=new n.LazyRelationsWrapper(e.connection),this.parentClosureEntityMetadata=e.parentClosureEntityMetadata,this.target=e.args.target,this.tableType=e.args.type,this.engine=e.args.engine,this.database=e.args.database,this.schema=e.args.schema||e.connection.options.schema,this.givenTableName=e.args.name,this.skipSync=e.args.skipSync||!1,this.targetName=e.args.target instanceof Function?e.args.target.name:e.args.target,this.tableNameWithoutPrefix="closure-junction"===this.tableType?t.closureJunctionTableName(this.givenTableName):t.tableName(this.targetName,this.givenTableName),this.tableName=r?t.prefixTableName(r,this.tableNameWithoutPrefix):this.tableNameWithoutPrefix,this.target=this.target?this.target:this.tableName,this.name=this.targetName?this.targetName:this.tableName,this.tablePath=this.buildTablePath(e.connection.driver),this.schemaPath=this.buildSchemaPath(e.connection.driver),this.isClassTableChild="class-table-child"===this.tableType,this.isSingleTableChild="single-table-child"===this.tableType,this.isEmbeddable="embeddable"===this.tableType,this.isJunction="closure-junction"===this.tableType||"junction"===this.tableType,this.isClosureJunction="closure-junction"===this.tableType,this.isClosure="closure"===this.tableType,this.isAbstract="abstract"===this.tableType,this.isRegular="regular"===this.tableType,this.orderBy=e.args.orderBy instanceof Function?e.args.orderBy(this.propertiesMap):e.args.orderBy}return e.prototype.create=function(){var e=this;if(this.target instanceof Function)return new this.target;var t={};return this.relations.filter(function(e){return e.isLazy}).forEach(function(n){return e.lazyRelationsWrapper.wrap(t,n)}),t},e.prototype.hasId=function(e){return!!e&&this.primaryColumns.every(function(t){var n=t.getEntityValue(e);return null!==n&&void 0!==n&&""!==n})},e.prototype.compareIds=function(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&r.OrmUtils.deepCompare(e,t)},e.prototype.compareEntities=function(e,t){var n=this.isEntityMapEmpty(e),r=this.isEntityMapEmpty(t);if(n||r)return!1;var i=this.getEntityIdMap(e),o=this.getEntityIdMap(t);return this.compareIds(i,o)},e.prototype.hasEmbeddedWithPropertyPath=function(e){return!!this.findEmbeddedWithPropertyPath(e)},e.prototype.findEmbeddedWithPropertyPath=function(e){return this.embeddeds.find(function(t){return t.propertyPath===e})},e.prototype.findColumnWithPropertyName=function(e){return this.columns.find(function(t){return t.propertyName===e})},e.prototype.findColumnWithPropertyPath=function(e){var t=this.columns.find(function(t){return t.propertyPath===e});if(t)return t;var n=this.relations.find(function(t){return t.propertyPath===e});return n&&1===n.joinColumns.length?n.joinColumns[0]:void 0},e.prototype.findColumnWithDatabaseName=function(e){return this.columns.find(function(t){return t.databaseName===e})},e.prototype.findRelationWithDbName=function(e){return this.relationsWithJoinColumns.find(function(t){return!!t.joinColumns.find(function(t){return t.databaseName===e})})},e.prototype.findRelationWithPropertyPath=function(e){return this.relations.find(function(t){return t.propertyPath===e})},e.prototype.computePropertyPath=function(e){return"string"==typeof e?e:e(this.propertiesMap)},e.prototype.createEntityIdMap=function(e){return e instanceof Array||(e=[e]),this.primaryColumns.reduce(function(t,n,i){return r.OrmUtils.mergeDeep(t,n.createValueMap(e[i]))},{})},e.prototype.isEntityMapEmpty=function(e){return!this.primaryColumns.every(function(t){var n=t.getEntityValue(e);return null!==n&&void 0!==n})},e.prototype.getEntityIdMap=function(e){if(e){var t=this.primaryColumns.reduce(function(t,n){return n.isObjectId?Object.assign(t,n.getEntityValueMap(e)):r.OrmUtils.mergeDeep(t,n.getEntityValueMap(e))},{});return Object.keys(t).length>0?t:void 0}},e.prototype.getDatabaseEntityIdMap=function(e){var t={};return this.primaryColumns.forEach(function(n){var r=n.getEntityValue(e);null!==r&&void 0!==r&&(t[n.databaseName]=r)}),Object.keys(t).every(function(e){return void 0!==t[e]&&null!==t[e]})?t:void 0},e.prototype.getEntityIdMixedMap=function(e){if(!e)return e;var t=this.getEntityIdMap(e);return this.hasMultiplePrimaryKeys?t:t?t[this.primaryColumns[0].propertyName]:t},e.prototype.checkIfObjectContainsAllPrimaryKeys=function(e){return this.primaryColumns.every(function(t){return e.hasOwnProperty(t.propertyName)})},e.prototype.extractRelationValuesFromEntity=function(e,t){var n=[];return t.forEach(function(t){var r=t.getEntityValue(e);r instanceof Array?r.forEach(function(e){return n.push([t,e,t.inverseEntityMetadata])}):r&&n.push([t,r,t.inverseEntityMetadata])}),n},e.prototype.registerColumn=function(e){this.ownColumns.push(e),this.columns=this.embeddeds.reduce(function(e,t){return e.concat(t.columnsFromTree)},this.ownColumns),this.parentIdColumns=this.columns.filter(function(e){return e.isParentId}),this.primaryColumns=this.columns.filter(function(e){return e.isPrimary}),this.hasMultiplePrimaryKeys=this.primaryColumns.length>1,this.propertiesMap=this.createPropertiesMap()},e.prototype.createPropertiesMap=function(){var e={};return this.columns.forEach(function(t){return r.OrmUtils.mergeDeep(e,t.createValueMap(t.propertyPath))}),this.relations.forEach(function(t){return r.OrmUtils.mergeDeep(e,t.createValueMap(t.propertyPath))}),e},e.prototype.buildTablePath=function(e){var t=this.tableName;return this.schema&&(t=this.schema+"."+t),!this.database||e instanceof i.PostgresDriver||(t=!this.schema&&e instanceof o.SqlServerDriver?this.database+".."+t:this.database+"."+t),t},e.prototype.buildSchemaPath=function(e){if(this.schema)return!this.database||e instanceof i.PostgresDriver?this.schema:this.database+"."+this.schema},e}(),e("EntityMetadata",a)}}}),System.register("typeorm/decorator/options/ValueTransformer",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/ColumnOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/types/ColumnMode",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/ColumnMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata/ColumnMetadata",["typeorm/util/OrmUtils"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.length="",this.isPrimary=!1,this.isGenerated=!1,this.isUnique=!1,this.isNullable=!1,this.isSelect=!0,this.isReadonly=!1,this.comment="",this.isVirtual=!1,this.isParentId=!1,this.isDiscriminator=!1,this.isTreeLevel=!1,this.isCreateDate=!1,this.isUpdateDate=!1,this.isVersion=!1,this.isObjectId=!1,this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.referencedColumn=e.referencedColumn,e.args.target&&(this.target=e.args.target),e.args.propertyName&&(this.propertyName=e.args.propertyName),e.args.options.name&&(this.givenDatabaseName=e.args.options.name),e.args.options.type&&(this.type=e.args.options.type),e.args.options.length&&(this.length=e.args.options.length?e.args.options.length.toString():""),e.args.options.charset&&(this.charset=e.args.options.charset),e.args.options.collation&&(this.collation=e.args.options.collation),e.args.options.primary&&(this.isPrimary=e.args.options.primary),e.args.options.unique&&(this.isUnique=e.args.options.unique),null===e.args.options.default&&(this.isNullable=!0),void 0!==e.args.options.nullable&&(this.isNullable=e.args.options.nullable),void 0!==e.args.options.select&&(this.isSelect=e.args.options.select),void 0!==e.args.options.readonly&&(this.isReadonly=e.args.options.readonly),e.args.options.comment&&(this.comment=e.args.options.comment),void 0!==e.args.options.default&&(this.default=e.args.options.default),e.args.options.scale&&(this.scale=e.args.options.scale),e.args.options.precision&&(this.precision=e.args.options.precision),e.args.options.enum&&(e.args.options.enum instanceof Object?this.enum=Object.keys(e.args.options.enum).map(function(t){return e.args.options.enum[t]}):this.enum=e.args.options.enum),e.args.options.isArray&&(this.isArray=e.args.options.isArray),e.args.options.array&&(this.isArray=e.args.options.array),e.args.mode&&(this.isVirtual="virtual"===e.args.mode,this.isParentId="parentId"===e.args.mode,this.isDiscriminator="discriminator"===e.args.mode,this.isTreeLevel="treeLevel"===e.args.mode,this.isCreateDate="createDate"===e.args.mode,this.isUpdateDate="updateDate"===e.args.mode,this.isVersion="version"===e.args.mode,this.isObjectId="objectId"===e.args.mode),e.args.options.transformer&&(this.transformer=e.args.options.transformer),this.isTreeLevel&&(this.type=e.connection.driver.mappedDataTypes.treeLevel),this.isCreateDate&&(this.type=e.connection.driver.mappedDataTypes.createDate,this.default||(this.default=function(){return e.connection.driver.mappedDataTypes.createDateDefault}),!this.precision&&e.connection.driver.mappedDataTypes.createDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.createDatePrecision)),this.isUpdateDate&&(this.type=e.connection.driver.mappedDataTypes.updateDate,this.default||(this.default=function(){return e.connection.driver.mappedDataTypes.updateDateDefault}),!this.precision&&e.connection.driver.mappedDataTypes.updateDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.updateDatePrecision)),this.isVersion&&(this.type=e.connection.driver.mappedDataTypes.version)}return e.prototype.createValueMap=function(e){var t=this;if(this.embeddedMetadata){var n=this.embeddedMetadata.parentPropertyNames.slice(),r=function(n,i){var o=n.shift();return o?(i[o]={},r(n,i[o]),i):("increment"===t.generationStrategy&&"bigint"===t.type&&(e=String(e)),i[t.propertyName]=e,i)};return r(n,{})}return"increment"===this.generationStrategy&&"bigint"===this.type&&(e=String(e)),i={},i[this.propertyName]=e,i;var i},e.prototype.getEntityValueMap=function(e){var t=this;if(this.embeddedMetadata){var r=this.embeddedMetadata.parentPropertyNames.slice(),i=function(e,n,r){var o=e.shift();return o?(r[o]={},i(e,n?n[o]:void 0,r[o]),r):(r[t.propertyName]=n?n[t.propertyName]:void 0,r)};return i(r,e,{})}if(this.relationMetadata&&e[this.propertyName]&&e[this.propertyName]instanceof Object){var o=this.relationMetadata.joinColumns.reduce(function(r,i){return n.OrmUtils.mergeDeep(r,i.referencedColumn.getEntityValueMap(e[t.propertyName]))},{});return a={},a[this.propertyName]=o,a}return s={},s[this.propertyName]=e[this.propertyName],s;var a,s},e.prototype.getEntityValue=function(e){if(!this.embeddedMetadata){if(this.relationMetadata&&this.referencedColumn&&this.isVirtual){var t=this.relationMetadata.getEntityValue(e);if(t&&t instanceof Object)return this.referencedColumn.getEntityValue(t)}return e[this.propertyName]}var n=this.embeddedMetadata.parentPropertyNames.slice(),r=function(e,t){var n=e.shift();return n&&t?r(e,t[n]):t},i=r(n,e);if(i)return this.relationMetadata&&this.referencedColumn&&this.isVirtual&&(t=this.relationMetadata.getEntityValue(i))&&t instanceof Object?this.referencedColumn.getEntityValue(t):i[this.propertyName]},e.prototype.setEntityValue=function(e,t){var n=this;if(this.embeddedMetadata){var r=function(e,i){var o=e.shift();return o?(i[o.propertyName]||(i[o.propertyName]=o.create()),r(e,i[o.propertyName]),i):(i[n.propertyName]=t,i)};return r(this.embeddedMetadata.embeddedMetadataTree.slice(),e)}e[this.propertyName]=t},e.prototype.build=function(e){return this.propertyPath=this.buildPropertyPath(),this.databaseName=this.buildDatabaseName(e),this.databaseNameWithoutPrefixes=e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,[]),this},e.prototype.buildPropertyPath=function(){var e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.propertyName,this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName&&(e+="."+this.referencedColumn.propertyName),e},e.prototype.buildDatabaseName=function(e){var t=this.embeddedMetadata?this.embeddedMetadata.parentPrefixes:[];return e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,t)},e}(),e("ColumnMetadata",r)}}}),System.register("typeorm/schema-builder/schema/TableColumn",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.isNullable=!1,this.isGenerated=!1,this.isPrimary=!1,this.isUnique=!1,this.isArray=!1,this.length="",e&&(this.name=e.name||"",this.type=e.type||"",this.length=e.length||"",this.charset=e.charset,this.collation=e.collation,this.precision=e.precision,this.scale=e.scale,this.default=e.default,this.isNullable=e.isNullable||!1,this.isGenerated=e.isGenerated||!1,this.generationStrategy=e.generationStrategy,this.isPrimary=e.isPrimary||!1,this.isUnique=e.isUnique||!1,this.comment=e.comment,this.enum=e.enum)}return e.prototype.clone=function(){var t=new e;return t.name=this.name,t.type=this.type,t.length=this.length,t.charset=this.charset,t.collation=this.collation,t.precision=this.precision,t.scale=this.scale,t.enum=this.enum,t.default=this.default,t.isNullable=this.isNullable,t.isGenerated=this.isGenerated,t.generationStrategy=this.generationStrategy,t.isPrimary=this.isPrimary,t.isUnique=this.isUnique,t.isArray=this.isArray,t.comment=this.comment,t},e.create=function(t,n,r,i){var o=new e;return o.name=t.databaseName,o.length=i,o.charset=t.charset,o.collation=t.collation,o.precision=t.precision,o.scale=t.scale,o.default=r,o.comment=t.comment,o.isGenerated=t.isGenerated,o.generationStrategy=t.generationStrategy,o.isNullable=t.isNullable,o.type=n,o.isPrimary=t.isPrimary,o.isUnique=t.isUnique,o.isArray=t.isArray||!1,o.enum=t.enum,o},e}(),e("TableColumn",n)}}}),System.register("typeorm/query-runner/QueryRunner",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/driver/Driver",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/util/StringUtils",[],function(e,t){"use strict";t&&t.id;return e("camelCase",function(e){return e.replace(/^([A-Z])|[\s-_](\w)/g,function(e,t,n,r){return n?n.toUpperCase():t.toLowerCase()})}),e("snakeCase",function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")}),e("titleCase",function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}),{setters:[],execute:function(){}}}),System.register("typeorm/naming-strategy/DefaultNamingStrategy",["typeorm/util/RandomGenerator","typeorm/util/StringUtils"],function(e,t){"use strict";var n,r,i;t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=function(){function e(){}return e.prototype.tableName=function(e,t){return t||r.snakeCase(e)},e.prototype.closureJunctionTableName=function(e){return e+"_closure"},e.prototype.columnName=function(e,t,n){return n.length?r.camelCase(n.join("_"))+(t?r.titleCase(t):r.titleCase(e)):t||e},e.prototype.relationName=function(e){return e},e.prototype.indexName=function(e,t,r){if(e)return e;var i="ind_"+t+"_"+r.join("_");return"ind_"+n.RandomGenerator.sha1(i).substr(0,26)},e.prototype.joinColumnName=function(e,t){return r.camelCase(e+"_"+t)},e.prototype.joinTableName=function(e,t,n,i){return r.snakeCase(e+"_"+n.replace(/\./gi,"_")+"_"+t)},e.prototype.joinTableColumnDuplicationPrefix=function(e,t){return e+"_"+t},e.prototype.joinTableColumnName=function(e,t,n){return r.camelCase(e+"_"+(n||t))},e.prototype.joinTableInverseColumnName=function(e,t,n){return this.joinTableColumnName(e,t,n)},e.prototype.foreignKeyName=function(e,t,r,i){var o=e+"_"+t.join("_")+"_"+r+"_"+i.join("_");return"fk_"+n.RandomGenerator.sha1(o).substr(0,27)},e.prototype.classTableInheritanceParentColumnName=function(e,t){return r.camelCase(e+"_"+t)},e.prototype.prefixTableName=function(e,t){return e+t},e}(),e("DefaultNamingStrategy",i)}}}),System.register("typeorm/error/CannotExecuteNotConnectedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="CannotExecuteNotConnectedError",n.message='Cannot execute operation on "'+t+'" connection because connection is not yet established.',n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("CannotExecuteNotConnectedError",n)}}}),System.register("typeorm/error/CannotConnectAlreadyConnectedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="CannotConnectAlreadyConnectedError",n.message='Cannot create a "'+t+'" connection because connection to the database already established.',n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("CannotConnectAlreadyConnectedError",n)}}}),System.register("typeorm/error/EntityMetadataNotFound",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;n.name="EntityMetadataNotFound";var r="function"==typeof t&&t.name?t.name:t;return n.message='No metadata for "'+r+'" was found.',n}return __extends(t,e),t}(Error),e("EntityMetadataNotFound",n)}}}),System.register("typeorm/migration/MigrationInterface",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/migration/Migration",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){return function(e,t,n){this.timestamp=e,this.name=t,this.instance=n}}(),e("Migration",n)}}}),System.register("typeorm/migration/MigrationExecutor",["typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableColumn","typeorm/migration/Migration","typeorm/util/PromiseUtils","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/sqlserver/MssqlParameter"],function(e,t){"use strict";var n,r,i,o,a,s,u;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e}],execute:function(){u=function(){function e(e,t){this.connection=e,this.queryRunner=t}return e.prototype.executePendingMigrations=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r,i,a,s,u,c=this;return __generator(this,function(l){switch(l.label){case 0:return e=this.queryRunner||this.connection.createQueryRunner("master"),[4,this.createMigrationsTableIfNotExist(e)];case 1:return l.sent(),[4,this.loadExecutedMigrations(e)];case 2:return t=l.sent(),n=this.getLatestMigration(t),r=this.getMigrations(),(i=r.filter(function(e){if(t.find(function(t){return t.name===e.name}))return!1;if(n&&e.timestamp<n.timestamp)throw new Error("New migration found: "+e.name+", however this migration's timestamp is not valid. Migration's timestamp should not be older then migrations already executed in the database.");return!0})).length?(this.connection.logger.logSchemaBuild(t.length+" migrations are already loaded in the database."),this.connection.logger.logSchemaBuild(r.length+" migrations were found in the source code."),n&&this.connection.logger.logSchemaBuild(n.name+" is the last executed migration. It was executed on "+new Date(1e3*n.timestamp).toString()+"."),this.connection.logger.logSchemaBuild(i.length+" migrations are new migrations that needs to be executed."),a=!1,e.isTransactionActive?[3,4]:[4,e.startTransaction()]):(this.connection.logger.logSchemaBuild("No migrations are pending"),[2]);case 3:l.sent(),a=!0,l.label=4;case 4:return l.trys.push([4,8,13,16]),[4,o.PromiseUtils.runInSequence(i,function(t){return t.instance.up(e).then(function(){return c.insertExecutedMigration(e,t)}).then(function(){c.connection.logger.logSchemaBuild("Migration "+t.name+" has been executed successfully.")})})];case 5:return l.sent(),a?[4,e.commitTransaction()]:[3,7];case 6:l.sent(),l.label=7;case 7:return[3,16];case 8:if(s=l.sent(),!a)return[3,12];l.label=9;case 9:return l.trys.push([9,11,,12]),[4,e.rollbackTransaction()];case 10:return l.sent(),[3,12];case 11:return u=l.sent(),[3,12];case 12:throw s;case 13:return this.queryRunner?[3,15]:[4,e.release()];case 14:l.sent(),l.label=15;case 15:return[7];case 16:return[2]}})})},e.prototype.undoLastMigration=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s;return __generator(this,function(u){switch(u.label){case 0:return e=this.queryRunner||this.connection.createQueryRunner("master"),[4,this.createMigrationsTableIfNotExist(e)];case 1:return u.sent(),[4,this.loadExecutedMigrations(e)];case 2:if(t=u.sent(),!(n=this.getLatestMigration(t)))return this.connection.logger.logSchemaBuild("No migrations was found in the database. Nothing to revert!"),[2];if(r=this.getMigrations(),!(i=r.find(function(e){return e.name===n.name})))throw new Error("No migration "+n.name+" was found in the source code. Make sure you have this migration in your codebase and its included in the connection options.");return this.connection.logger.logSchemaBuild(t.length+" migrations are already loaded in the database."),this.connection.logger.logSchemaBuild(n.name+" is the last executed migration. It was executed on "+new Date(1e3*n.timestamp).toString()+"."),this.connection.logger.logSchemaBuild("Now reverting it..."),o=!1,e.isTransactionActive?[3,4]:[4,e.startTransaction()];case 3:u.sent(),o=!0,u.label=4;case 4:return u.trys.push([4,9,14,17]),[4,i.instance.down(e)];case 5:return u.sent(),[4,this.deleteExecutedMigration(e,i)];case 6:return u.sent(),this.connection.logger.logSchemaBuild("Migration "+i.name+" has been reverted successfully."),o?[4,e.commitTransaction()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,17];case 9:if(a=u.sent(),!o)return[3,13];u.label=10;case 10:return u.trys.push([10,12,,13]),[4,e.rollbackTransaction()];case 11:return u.sent(),[3,13];case 12:return s=u.sent(),[3,13];case 13:throw a;case 14:return this.queryRunner?[3,16]:[4,e.release()];case 15:u.sent(),u.label=16;case 16:return[7];case 17:return[2]}})})},e.prototype.createMigrationsTableIfNotExist=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return[4,e.hasTable("migrations")];case 1:return(t=i.sent())?[3,3]:[4,e.createTable(new n.Table("migrations",[new r.TableColumn({name:"timestamp",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp}),isPrimary:!0,isNullable:!1}),new r.TableColumn({name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}),isNullable:!1})]))];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.loadExecutedMigrations=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.connection.manager.createQueryBuilder(e).select().from("migrations","migrations").getRawMany()];case 1:return t=n.sent(),[2,t.map(function(e){return new i.Migration(parseInt(e.timestamp),e.name)})]}})})},e.prototype.getMigrations=function(){return this.connection.migrations.map(function(e){var t=e.constructor.name,n=parseInt(t.substr(-13));if(!n)throw new Error(t+" migration name is wrong. Migration class name should have a UNIX timestamp appended. ");return new i.Migration(n,t,e)}).sort(function(e,t){return e.timestamp-t.timestamp})},e.prototype.getLatestMigration=function(e){var t=e.map(function(e){return e}).sort(function(e,t){return-1*(e.timestamp-t.timestamp)});return t.length>0?t[0]:void 0},e.prototype.insertExecutedMigration=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return this.connection.driver instanceof a.SqlServerDriver?[4,e.insert("migrations",{timestamp:new s.MssqlParameter(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),name:new s.MssqlParameter(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))})]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.insert("migrations",{timestamp:t.timestamp,name:t.name})];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.deleteExecutedMigration=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return this.connection.driver instanceof a.SqlServerDriver?[4,e.delete("migrations",{timestamp:new s.MssqlParameter(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),name:new s.MssqlParameter(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))})]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.delete("migrations",{timestamp:t.timestamp,name:t.name})];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e}(),e("MigrationExecutor",u)}}}),System.register("typeorm/error/MissingPrimaryColumnError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="MissingPrimaryColumnError",n.message='Entity "'+t.name+'" does not have a primary column. Primary column is required to have in all your entities. Use @PrimaryColumn decorator to add a primary column to your entity.',n}return __extends(t,e),t}(Error),e("MissingPrimaryColumnError",n)}}}),System.register("typeorm/error/CircularRelationsError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this,"Circular relations detected: "+t+". To resolve this issue you need to set nullable: false somewhere in this dependency structure.")||this;return n.name="CircularRelationsError",n}return __extends(t,e),t}(Error),e("CircularRelationsError",n)}}}),System.register("typeorm/util/DepGraph",[],function(e,t){"use strict";function n(e,t,n){var r=[],i={};return function o(a){i[a]=!0,r.push(a),e[a].forEach(function(e){if(i[e]){if(r.indexOf(e)>=0)throw r.push(e),new Error("Dependency Cycle Found: "+r.join(" -> "))}else o(e)}),r.pop(),t&&0!==e[a].length||-1!==n.indexOf(a)||n.push(a)}}var r;t&&t.id;return{setters:[],execute:function(){r=function(){function e(){this.nodes={},this.outgoingEdges={},this.incomingEdges={}}return e.prototype.addNode=function(e,t){this.hasNode(e)||(2===arguments.length?this.nodes[e]=t:this.nodes[e]=e,this.outgoingEdges[e]=[],this.incomingEdges[e]=[])},e.prototype.removeNode=function(e){this.hasNode(e)&&(delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],[this.incomingEdges,this.outgoingEdges].forEach(function(t){Object.keys(t).forEach(function(n){var r=t[n].indexOf(e);r>=0&&t[n].splice(r,1)},this)}))},e.prototype.hasNode=function(e){return this.nodes.hasOwnProperty(e)},e.prototype.getNodeData=function(e){if(this.hasNode(e))return this.nodes[e];throw new Error("Node does not exist: "+e)},e.prototype.setNodeData=function(e,t){if(!this.hasNode(e))throw new Error("Node does not exist: "+e);this.nodes[e]=t},e.prototype.addDependency=function(e,t){if(!this.hasNode(e))throw new Error("Node does not exist: "+e);if(!this.hasNode(t))throw new Error("Node does not exist: "+t);return-1===this.outgoingEdges[e].indexOf(t)&&this.outgoingEdges[e].push(t),-1===this.incomingEdges[t].indexOf(e)&&this.incomingEdges[t].push(e),!0},e.prototype.removeDependency=function(e,t){var n;this.hasNode(e)&&(n=this.outgoingEdges[e].indexOf(t))>=0&&this.outgoingEdges[e].splice(n,1),this.hasNode(t)&&(n=this.incomingEdges[t].indexOf(e))>=0&&this.incomingEdges[t].splice(n,1)},e.prototype.dependenciesOf=function(e,t){if(this.hasNode(e)){var r=[];n(this.outgoingEdges,t,r)(e);var i=r.indexOf(e);return i>=0&&r.splice(i,1),r}throw new Error("Node does not exist: "+e)},e.prototype.dependantsOf=function(e,t){if(this.hasNode(e)){var r=[];n(this.incomingEdges,t,r)(e);var i=r.indexOf(e);return i>=0&&r.splice(i,1),r}throw new Error("Node does not exist: "+e)},e.prototype.overallOrder=function(e){var t=this,r=[],i=Object.keys(this.nodes);if(0===i.length)return r;var o=n(this.outgoingEdges,!1,[]);i.forEach(function(e){o(e)});var a=n(this.outgoingEdges,e,r);return i.filter(function(e){return 0===t.incomingEdges[e].length}).forEach(function(e){a(e)}),r},e}(),e("DepGraph",r)}}}),System.register("typeorm/error/DataTypeNotSupportedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n,r){var i=e.call(this)||this;i.name="DataTypeNotSupportedError";var o="string"==typeof n?n:n.name;return i.message='Data type "'+o+'" in "'+t.entityMetadata.targetName+"."+t.propertyName+'" is not supported by "'+r+'" database.',i}return __extends(t,e),t}(Error),e("DataTypeNotSupportedError",n)}}}),System.register("typeorm/metadata-builder/EntityMetadataValidator",["typeorm/error/MissingPrimaryColumnError","typeorm/error/CircularRelationsError","typeorm/util/DepGraph","typeorm/error/DataTypeNotSupportedError","typeorm/driver/mongodb/MongoDriver","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/mysql/MysqlDriver"],function(e,t){"use strict";var n,r,i,o,a,s,u,c;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e}],execute:function(){c=function(){function e(){}return e.prototype.validateMany=function(e,t){var n=this;e.forEach(function(r){return n.validate(r,e,t)}),this.validateDependencies(e),this.validateEagerRelations(e)},e.prototype.validate=function(e,t,r){if(!e.isClassTableChild&&!e.primaryColumns.length&&!e.isJunction)throw new n.MissingPrimaryColumnError(e);if("single-table"===e.inheritanceType){if(!e.discriminatorColumn)throw new Error("Entity "+e.name+" using single-table inheritance, it should also have a discriminator column. Did you forget to put @DiscriminatorColumn decorator?");if(-1!==["",void 0,null].indexOf(e.discriminatorValue))throw new Error("Entity "+e.name+" has empty discriminator value. Discriminator value should not be empty.");var i=t.find(function(t){return t!==e&&t.discriminatorValue===e.discriminatorValue});if(i)throw new Error("Entities "+e.name+" and "+i.name+" as equal discriminator values. Make sure their discriminator values are not equal using @DiscriminatorValue decorator.")}if(e.relationCounts.forEach(function(e){if(e.relation.isManyToOne||e.relation.isOneToOne)throw new Error("Relation count can not be implemented on ManyToOne or OneToOne relations.")}),r instanceof a.MongoDriver||e.columns.forEach(function(t){var n=r.normalizeType(t);if(-1===r.supportedDataTypes.indexOf(n))throw new o.DataTypeNotSupportedError(t,n,r.options.type);if(t.length&&-1===r.withLengthColumnTypes.indexOf(n))throw new Error("Column "+t.propertyName+" of Entity "+e.name+" does not support length property.")}),r instanceof u.MysqlDriver&&0===t.filter(function(e){return e.database}).length&&!r.database)throw new Error("Database not specified");if(r instanceof s.SqlServerDriver&&e.columns.filter(function(e){return e.charset}).length>1)throw new Error("Character set specifying is not supported in Sql Server");e.relations.forEach(function(e){}),e.relations.forEach(function(t){if(t.isCascadeRemove&&t.inverseRelation&&t.inverseRelation.isCascadeRemove)throw new Error("Relation "+e.name+"#"+t.propertyName+" and "+t.inverseRelation.entityMetadata.name+"#"+t.inverseRelation.propertyName+" both has cascade remove set. This may lead to unexpected circular removals. Please set cascade remove only from one side of relationship.")}),e.eagerRelations.forEach(function(e){})},e.prototype.validateDependencies=function(e){var t=new i.DepGraph;e.forEach(function(e){t.addNode(e.name)}),e.forEach(function(e){e.relationsWithJoinColumns.filter(function(e){return!e.isNullable}).forEach(function(n){t.addDependency(e.name,n.inverseEntityMetadata.name)})});try{t.overallOrder()}catch(e){throw new r.CircularRelationsError(e.toString().replace("Error: Dependency Cycle Found: ",""))}},e.prototype.validateEagerRelations=function(e){e.forEach(function(e){e.eagerRelations.forEach(function(t){if(t.inverseRelation&&t.inverseRelation.isEager)throw new Error("Circular eager relations are disallowed. "+e.targetName+"#"+t.propertyPath+' contains "eager: true", and its inverse side '+t.inverseEntityMetadata.targetName+"#"+t.inverseRelation.propertyPath+' contains "eager: true" as well. Remove "eager: true" from one side of the relation.')})})},e}(),e("EntityMetadataValidator",c)}}}),System.register("typeorm/entity-manager/SqljsEntityManager",["typeorm/entity-manager/EntityManager"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.driver=t.driver,r}return __extends(t,e),t.prototype.loadDatabase=function(e){this.driver.load(e)},t.prototype.saveDatabase=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.driver.save(e)];case 1:return t.sent(),[2]}})})},t.prototype.exportDatabase=function(){return this.driver.export()},t}(n.EntityManager),e("SqljsEntityManager",r)}}}),System.register("typeorm/entity-manager/EntityManagerFactory",["typeorm/entity-manager/EntityManager","typeorm/entity-manager/MongoEntityManager","typeorm/driver/mongodb/MongoDriver","typeorm/entity-manager/SqljsEntityManager","typeorm/driver/sqljs/SqljsDriver"],function(e,t){"use strict";var n,r,i,o,a,s;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e}],execute:function(){s=function(){function e(){}return e.prototype.create=function(e,t){return e.driver instanceof i.MongoDriver?new r.MongoEntityManager(e):e.driver instanceof a.SqljsDriver?new o.SqljsEntityManager(e,t):new n.EntityManager(e,t)},e}(),e("EntityManagerFactory",s)}}}),System.register("typeorm/error/MissingDriverError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="MissingDriverError",n.message="Wrong driver "+t+' given. Supported drivers are: "cordova", "mysql", "postgres", "mssql", "oracle", "mariadb", "sqlite".',n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("MissingDriverError",n)}}}),System.register("typeorm/driver/websql/WebsqlQueryRunner",["typeorm/error/TransactionAlreadyStartedError","typeorm/error/TransactionNotStartedError","typeorm/schema-builder/schema/Table","typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/util/OrmUtils","typeorm/error/QueryFailedError","typeorm/driver/sqlite-abstract/AbstractSqliteQueryRunner"],function(e,t){"use strict";var n,r,i,o,a,s,u,c;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e}],execute:function(){c=function(e){function t(t){var n=e.call(this,t)||this;return n.driver=t,n.connection=t.connection,n}return __extends(t,e),t.prototype.connect=function(){var e=this;if(this.databaseConnection)return Promise.resolve(this.databaseConnection);if(this.databaseConnectionPromise)return this.databaseConnectionPromise;var t=Object.assign({},{database:this.driver.options.database,version:this.driver.options.version,description:this.driver.options.description,size:this.driver.options.size},this.driver.options.extra||{});return this.databaseConnectionPromise=new Promise(function(n,r){e.databaseConnection=openDatabase(t.database,t.version,t.description,t.size),n(e.databaseConnection)}),this.databaseConnectionPromise},t.prototype.startTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){if(this.isReleased)throw new o.QueryRunnerAlreadyReleasedError;if(this.isTransactionActive)throw new n.TransactionAlreadyStartedError;return this.isTransactionActive=!0,[2]})})},t.prototype.commitTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){if(this.isReleased)throw new o.QueryRunnerAlreadyReleasedError;if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return this.isTransactionActive=!1,[2]})})},t.prototype.rollbackTransaction=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){if(this.isReleased)throw new o.QueryRunnerAlreadyReleasedError;if(!this.isTransactionActive)throw new r.TransactionNotStartedError;return this.isTransactionActive=!1,[2]})})},t.prototype.query=function(e,t){var n=this;if(this.isReleased)throw new o.QueryRunnerAlreadyReleasedError;return new Promise(function(r,i){return __awaiter(n,void 0,void 0,function(){var n,o,a,u=this;return __generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.connect()];case 1:return n=c.sent(),this.driver.connection.logger.logQuery(e,t,this),o=+new Date,n.transaction(function(n){n.executeSql(e,t,function(n,i){var a=u.driver.connection.options.maxQueryExecutionTime,s=+new Date-o;a&&s>a&&u.driver.connection.logger.logQuerySlow(s,e,t,u);var c=Object.keys(i.rows).filter(function(e){return"length"!==e}).map(function(e){return i.rows[e]});r(c)},function(n,r){return u.driver.connection.logger.logQueryError(r,e,t,u),i(new s.QueryFailedError(e,t,r))})}),[3,3];case 2:return a=c.sent(),i(a),[3,3];case 3:return[2]}})})})},t.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,c=this;return __generator(this,function(l){return n=Object.keys(t),r=n.map(function(e){return'"'+e+'"'}).join(", "),i=n.map(function(e,t){return"$"+(t+1)}).join(","),o=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[],s=r.length>0?'INSERT INTO "'+e+'"('+r+") VALUES ("+i+")":'INSERT INTO "'+e+'" DEFAULT VALUES',u=n.map(function(e){return t[e]}),[2,new Promise(function(e,n){return __awaiter(c,void 0,void 0,function(){var r,i=this;return __generator(this,function(c){switch(c.label){case 0:return this.driver.connection.logger.logQuery(s,u,this),[4,this.connect()];case 1:return(r=c.sent()).transaction(function(r){r.executeSql(s,u,function(n,r){var i=o.reduce(function(e,n){var i=n.isPrimary&&"increment"===n.generationStrategy&&r.insertId?r.insertId:t[n.databaseName];return i?a.OrmUtils.mergeDeep(e,n.createValueMap(i)):e},{});e({result:void 0,generatedMap:Object.keys(i).length>0?i:void 0})},function(e,t){return i.driver.connection.logger.logQueryError(t,s,u,i),n(t)})}),[2]}})})})]})})},t.prototype.getTables=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,r=this;return __generator(this,function(o){switch(o.label){case 0:return e&&e.length?(t=e.map(function(e){return"'"+e+"'"}).join(", "),[4,this.query("SELECT * FROM sqlite_master WHERE type = 'table' AND name IN ("+t+")")]):[2,[]];case 1:return(n=o.sent())&&n.length?[2,Promise.all(n.map(function(e){return __awaiter(r,void 0,void 0,function(){var t;return __generator(this,function(n){return t=new i.Table(e.name),[2,t]})})}))]:[2,[]]}})})},t.prototype.clearDatabase=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r,i=this;return __generator(this,function(o){switch(o.label){case 0:return[4,this.startTransaction()];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,6,,11]),e="select 'drop table \"' || name || '\";' as query from sqlite_master where type = 'table' and name != 'sqlite_sequence'",[4,this.query(e)];case 3:return t=o.sent(),[4,Promise.all(t.map(function(e){return i.query(e.query)}))];case 4:return o.sent(),[4,this.commitTransaction()];case 5:return o.sent(),[3,11];case 6:n=o.sent(),o.label=7;case 7:return o.trys.push([7,9,,10]),[4,this.rollbackTransaction()];case 8:return o.sent(),[3,10];case 9:return r=o.sent(),[3,10];case 10:throw n;case 11:return[2]}})})},t}(u.AbstractSqliteQueryRunner),e("WebsqlQueryRunner",c)}}}),System.register("typeorm/driver/websql/WebsqlDriver",["typeorm/driver/DriverUtils","typeorm/error/DriverOptionNotSetError","typeorm/driver/websql/WebsqlQueryRunner","typeorm/driver/sqlite-abstract/AbstractSqliteDriver"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(e){function t(t){var i=e.call(this,t)||this;if(i.options=t.options,Object.assign(t.options,n.DriverUtils.buildDriverOptions(t.options)),i.database=i.options.database,!i.options.database)throw new r.DriverOptionNotSetError("database");return i}return __extends(t,e),t.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},t.prototype.disconnect=function(){return Promise.resolve()},t.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),new i.WebsqlQueryRunner(this)},t.prototype.preparePersistentValue=function(t,n){return"json"===n.type?JSON.stringify(t):e.prototype.preparePersistentValue.call(this,t,n)},t.prototype.prepareHydratedValue=function(t,n){return"json"===n.type?JSON.parse(t):e.prototype.prepareHydratedValue.call(this,t,n)},t.prototype.escapeQueryWithParameters=function(e,t){if(!t||!Object.keys(t).length)return[e,[]];var n=[],r=Object.keys(t).map(function(e){return"(:"+e+"\\b)"}).join("|");return e=e.replace(new RegExp(r,"g"),function(e){var r=t[e.substr(1)];return r instanceof Function?r():"boolean"==typeof r?(n.push(r?1:0),"?"):(n.push(r),"?")}),[e,n]},t.prototype.escape=function(e){return e},t}(o.AbstractSqliteDriver),e("WebsqlDriver",a)}}}),System.register("typeorm/driver/sqlite/SqliteQueryRunner",["typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/util/OrmUtils","typeorm/error/QueryFailedError","typeorm/driver/sqlite-abstract/AbstractSqliteQueryRunner"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(e){function t(t){var n=e.call(this,t)||this;return n.driver=t,n.connection=t.connection,n}return __extends(t,e),t.prototype.query=function(e,t){var r=this;if(this.isReleased)throw new n.QueryRunnerAlreadyReleasedError;return new Promise(function(n,o){return __awaiter(r,void 0,void 0,function(){var r,a,s=this;return __generator(this,function(u){switch(u.label){case 0:return[4,this.connect()];case 1:return r=u.sent(),this.driver.connection.logger.logQuery(e,t,this),a=+new Date,r.all(e,t,function(r,u){var c=s.driver.connection.options.maxQueryExecutionTime,l=+new Date-a;c&&l>c&&s.driver.connection.logger.logQuerySlow(l,e,t,s),r?(s.driver.connection.logger.logQueryError(r,e,t,s),o(new i.QueryFailedError(e,t,r))):n(u)}),[2]}})})})},t.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,i,o,a,s,u,c=this;return __generator(this,function(l){return n=Object.keys(t),i=n.map(function(e){return'"'+e+'"'}).join(", "),o=n.map(function(e,t){return"$"+(t+1)}).join(","),a=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[],s=i.length>0?'INSERT INTO "'+e+'"('+i+") VALUES ("+o+")":'INSERT INTO "'+e+'" DEFAULT VALUES',u=n.map(function(e){return t[e]}),[2,new Promise(function(e,n){return __awaiter(c,void 0,void 0,function(){var i,o;return __generator(this,function(c){switch(c.label){case 0:return this.driver.connection.logger.logQuery(s,u,this),i=this,[4,this.connect()];case 1:return(o=c.sent()).run(s,u,function(o){var c=this;if(o)i.driver.connection.logger.logQueryError(o,s,u,this),n(o);else{var l=a.reduce(function(e,n){var i=n.isPrimary&&"increment"===n.generationStrategy&&c.lastID?c.lastID:t[n.databaseName];return i?r.OrmUtils.mergeDeep(e,n.createValueMap(i)):e},{});e({result:void 0,generatedMap:Object.keys(l).length>0?l:void 0})}}),[2]}})})})]})})},t}(o.AbstractSqliteQueryRunner),e("SqliteQueryRunner",a)}}}),System.register("typeorm/driver/sqlite/SqliteDriver",["typeorm/error/DriverPackageNotInstalledError","typeorm/driver/sqlite/SqliteQueryRunner","typeorm/error/DriverOptionNotSetError","typeorm/platform/PlatformTools","typeorm/driver/sqlite-abstract/AbstractSqliteDriver"],function(e,t){"use strict";var n,r,i,o,a,s;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e}],execute:function(){s=function(e){function t(t){var n=e.call(this,t)||this;if(n.connection=t,n.options=t.options,n.database=n.options.database,!n.options.database)throw new i.DriverOptionNotSetError("database");return n.loadDependencies(),n}return __extends(t,e),t.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,n){e.queryRunner=void 0,e.databaseConnection.close(function(e){return e?n(e):t()})})]})})},t.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),this.queryRunner||(this.queryRunner=new r.SqliteQueryRunner(this)),this.queryRunner},t.prototype.normalizeType=function(t){return t.type===Buffer?"blob":e.prototype.normalizeType.call(this,t)},t.prototype.createDatabaseConnection=function(){var e=this;return new Promise(function(t,n){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(r){switch(r.label){case 0:return[4,this.createDatabaseDirectory(this.options.database)];case 1:return r.sent(),e=new this.sqlite.Database(this.options.database,function(r){if(r)return n(r);e.run("PRAGMA foreign_keys = ON;",function(r,i){if(r)return n(r);t(e)})}),[2]}})})})},t.prototype.loadDependencies=function(){try{this.sqlite=o.PlatformTools.load("sqlite3").verbose()}catch(e){throw new n.DriverPackageNotInstalledError("SQLite","sqlite3")}},t.prototype.createDatabaseDirectory=function(e){return new Promise(function(t,n){o.PlatformTools.load("mkdirp")(o.PlatformTools.load("path").dirname(e),function(e){return e?n(e):t()})})},t}(a.AbstractSqliteDriver),e("SqliteDriver",s)}}}),System.register("typeorm/driver/cordova/CordovaQueryRunner",["typeorm/error/QueryRunnerAlreadyReleasedError","typeorm/util/OrmUtils","typeorm/error/QueryFailedError","typeorm/driver/sqlite-abstract/AbstractSqliteQueryRunner"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(e){function t(t){var n=e.call(this,t)||this;return n.driver=t,n.connection=t.connection,n}return __extends(t,e),t.prototype.query=function(e,t){var r=this;if(this.isReleased)throw new n.QueryRunnerAlreadyReleasedError;return new Promise(function(n,o){return __awaiter(r,void 0,void 0,function(){var r,a,s=this;return __generator(this,function(u){switch(u.label){case 0:return[4,this.connect()];case 1:return r=u.sent(),this.driver.connection.logger.logQuery(e,t,this),a=+new Date,r.executeSql(e,t,function(r){var i=s.driver.connection.options.maxQueryExecutionTime,o=+new Date-a;i&&o>i&&s.driver.connection.logger.logQuerySlow(o,e,t,s),0===r.rows.length&&n([]);for(var u=[],c=0;c<r.rows.length;c++)u.push(r.rows.item(c));n(u)},function(n){s.driver.connection.logger.logQueryError(n,e,t,s),o(new i.QueryFailedError(e,t,n))}),[2]}})})})},t.prototype.insert=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,i,o,a,s,u,c=this;return __generator(this,function(l){return n=Object.keys(t),i=n.map(function(e){return'"'+e+'"'}).join(", "),o=n.map(function(e){return"?"}).join(","),a=this.connection.hasMetadata(e)?this.connection.getMetadata(e).generatedColumns:[],s=i.length>0?'INSERT INTO "'+e+'"('+i+") VALUES ("+o+")":'INSERT INTO "'+e+'" DEFAULT VALUES',u=n.map(function(e){return t[e]}),[2,new Promise(function(e,n){return __awaiter(c,void 0,void 0,function(){var i,o,c=this;return __generator(this,function(l){switch(l.label){case 0:return this.driver.connection.logger.logQuery(s,u,this),i=this,[4,this.connect()];case 1:return(o=l.sent()).executeSql(s,u,function(n){var i=a.reduce(function(e,i){var o=i.isPrimary&&"increment"===i.generationStrategy&&n.insertId?n.insertId:t[i.databaseName];return o?r.OrmUtils.mergeDeep(e,i.createValueMap(o)):e},{});e({result:void 0,generatedMap:Object.keys(i).length>0?i:void 0})},function(e){i.driver.connection.logger.logQueryError(e,s,u,c),n(e)}),[2]}})})})]})})},t.prototype.parametrize=function(e,t){return void 0===t&&(t=0),Object.keys(e).map(function(e,t){return'"'+e+'"=?'})},t}(o.AbstractSqliteQueryRunner),e("CordovaQueryRunner",a)}}}),System.register("typeorm/driver/cordova/CordovaDriver",["typeorm/driver/sqlite-abstract/AbstractSqliteDriver","typeorm/driver/cordova/CordovaQueryRunner","typeorm/error/DriverOptionNotSetError","typeorm/error/DriverPackageNotInstalledError"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(e){function t(t){var n=e.call(this,t)||this;if(n.database=n.options.database,!n.options.database)throw new i.DriverOptionNotSetError("database");if(!n.options.location)throw new i.DriverOptionNotSetError("location");return n.loadDependencies(),n}return __extends(t,e),t.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,n){e.queryRunner=void 0,e.databaseConnection.close(t,n)})]})})},t.prototype.createQueryRunner=function(e){return void 0===e&&(e="master"),this.queryRunner||(this.queryRunner=new r.CordovaQueryRunner(this)),this.queryRunner},t.prototype.createDatabaseConnection=function(){var e=this;return new Promise(function(t,n){var r=Object.assign({},{name:e.options.database,location:e.options.location},e.options.extra||{});e.sqlite.openDatabase(r,function(e){var r=e;r.executeSql("PRAGMA foreign_keys = ON;",[],function(e){t(r)},function(e){n(e)})},function(e){n(e)})})},t.prototype.loadDependencies=function(){try{this.sqlite=window.sqlitePlugin}catch(e){throw new o.DriverPackageNotInstalledError("Cordova-SQLite","cordova-sqlite-storage")}},t}(n.AbstractSqliteDriver),e("CordovaDriver",a)}}}),System.register("typeorm/driver/DriverFactory",["typeorm/error/MissingDriverError","typeorm/driver/mongodb/MongoDriver","typeorm/driver/websql/WebsqlDriver","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/oracle/OracleDriver","typeorm/driver/sqlite/SqliteDriver","typeorm/driver/cordova/CordovaDriver","typeorm/driver/sqljs/SqljsDriver","typeorm/driver/mysql/MysqlDriver","typeorm/driver/postgres/PostgresDriver"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e}],execute:function(){d=function(){function e(){}return e.prototype.create=function(e){var t=e.options.type;switch(t){case"mysql":return new l.MysqlDriver(e);case"postgres":return new p.PostgresDriver(e);case"mariadb":return new l.MysqlDriver(e);case"sqlite":return new s.SqliteDriver(e);case"cordova":return new u.CordovaDriver(e);case"sqljs":return new c.SqljsDriver(e);case"oracle":return new a.OracleDriver(e);case"mssql":return new o.SqlServerDriver(e);case"websql":return new i.WebsqlDriver(e);case"mongodb":return new r.MongoDriver(e);default:throw new n.MissingDriverError(t)}},e}(),e("DriverFactory",d)}}}),System.register("typeorm/util/DirectoryExportedClassesLoader",["typeorm/platform/PlatformTools"],function(e,t){"use strict";t&&t.id;e("importClassesFromDirectories",function(e,t){function r(e,t){return"function"==typeof e?t.push(e):Array.isArray(e)?e.forEach(function(e){return r(e,t)}):"object"==typeof e&&Object.keys(e).forEach(function(n){return r(e[n],t)}),t}return void 0===t&&(t=[".js",".ts"]),r(e.reduce(function(e,t){return e.concat(n.PlatformTools.load("glob").sync(n.PlatformTools.pathNormalize(t)))},[]).filter(function(e){var r=e.substring(e.length-5,e.length);return-1!==t.indexOf(n.PlatformTools.pathExtname(e))&&".d.ts"!==r}).map(function(e){return n.PlatformTools.load(n.PlatformTools.pathResolve(e))}),[])}),e("importJsonsFromDirectories",function(e,t){return void 0===t&&(t=".json"),e.reduce(function(e,t){return e.concat(n.PlatformTools.load("glob").sync(n.PlatformTools.pathNormalize(t)))},[]).filter(function(e){return n.PlatformTools.pathExtname(e)===t}).map(function(e){return n.PlatformTools.load(n.PlatformTools.pathResolve(e))})});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/container",[],function(e,t){"use strict";t&&t.id;e("useContainer",function(e,t){r=e,i=t}),e("getFromContainer",function(e){if(r)try{var t=r.get(e);if(t)return t;if(!i||!i.fallback)return t}catch(e){if(!i||!i.fallbackOnErrors)throw e}return n.get(e)});var n,r,i;return{setters:[],execute:function(){e("defaultContainer",n=new(function(){function e(){this.instances=[]}return e.prototype.get=function(e){var t=this.instances.find(function(t){return t.type===e});return t||(t={type:e,object:new e},this.instances.push(t)),t.object},e}()))}}}),System.register("typeorm/metadata-args/NamingStrategyMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/JoinColumnMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/JoinTableMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/EntitySubscriberMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/InheritanceMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/DiscriminatorValueMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/EntityRepositoryMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/TransactionEntityMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/TransactionRepositoryMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-builder/MetadataUtils",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.getInheritanceTree=function(e){var t=[e],n=function(e){var r=Object.getPrototypeOf(e);r&&r.name&&(t.push(r),n(r))};return n(e),t},e.isInherited=function(e,t){return e.prototype instanceof t},e.filterByTarget=function(e,t){return t?e.filter(function(e){return e.target&&-1!==t.indexOf(e.target)}):e},e}(),e("MetadataUtils",n)}}}),System.register("typeorm/metadata-args/GeneratedMetadataArgs",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/metadata-args/MetadataArgsStorage",["typeorm/metadata-builder/MetadataUtils"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){this.tables=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}return e.prototype.filterTables=function(e){return this.filterByTarget(this.tables,e)},e.prototype.filterColumns=function(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)},e.prototype.findGenerated=function(e,t){return this.generations.find(function(n){return(e instanceof Array?-1!==e.indexOf(n.target):n.target===e)&&n.propertyName===t})},e.prototype.filterRelations=function(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relations,e)},e.prototype.filterRelationIds=function(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)},e.prototype.filterRelationCounts=function(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)},e.prototype.filterIndices=function(e){return this.indices.filter(function(t){return e instanceof Array?-1!==e.indexOf(t.target):t.target===e})},e.prototype.filterListeners=function(e){return this.filterByTarget(this.entityListeners,e)},e.prototype.filterEmbeddeds=function(e){return this.filterByTargetAndWithoutDuplicateProperties(this.embeddeds,e)},e.prototype.findJoinTable=function(e,t){return this.joinTables.find(function(n){return n.target===e&&n.propertyName===t})},e.prototype.filterJoinColumns=function(e,t){return this.joinColumns.filter(function(n){return n.target===e&&n.propertyName===t})},e.prototype.filterSubscribers=function(e){return this.filterByTarget(this.entitySubscribers,e)},e.prototype.filterNamingStrategies=function(e){return this.filterByTarget(this.namingStrategies,e)},e.prototype.filterTransactionEntityManagers=function(e){return this.filterByTarget(this.transactionEntityManagers,e)},e.prototype.filterTransactionRepository=function(e){return this.filterByTarget(this.transactionRepositories,e)},e.prototype.filterSingleTableChildren=function(e){return this.tables.filter(function(t){return t.target instanceof Function&&e instanceof Function&&n.MetadataUtils.isInherited(t.target,e)&&"single-table-child"===t.type})},e.prototype.findInheritanceType=function(e){return this.inheritances.find(function(t){return t.target===e})},e.prototype.findDiscriminatorValue=function(e){return this.discriminatorValues.find(function(t){return t.target===e})},e.prototype.filterByTarget=function(e,t){return e.filter(function(e){return t instanceof Array?-1!==t.indexOf(e.target):e.target===t})},e.prototype.filterByTargetAndWithoutDuplicateProperties=function(e,t){var n=[];return e.forEach(function(e){(t instanceof Array?-1!==t.indexOf(e.target):e.target===t)&&(n.find(function(t){return t.propertyName===e.propertyName})||n.push(e))}),n},e}(),e("MetadataArgsStorage",r)}}}),System.register("typeorm/metadata-builder/JunctionEntityMetadataBuilder",["typeorm/metadata/EntityMetadata","typeorm/metadata/ColumnMetadata","typeorm/metadata/ForeignKeyMetadata","typeorm/metadata/IndexMetadata"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e){this.connection=e}return e.prototype.build=function(e,t){var a=this,s=this.collectReferencedColumns(e,t),u=this.collectInverseReferencedColumns(e,t),c=t.name||this.connection.namingStrategy.joinTableName(e.entityMetadata.tableNameWithoutPrefix,e.inverseEntityMetadata.tableNameWithoutPrefix,e.propertyPath,e.inverseRelation?e.inverseRelation.propertyName:""),l=new n.EntityMetadata({connection:this.connection,args:{target:"",name:c,type:"junction",database:t.database||e.entityMetadata.database,schema:t.schema||e.entityMetadata.schema}}),p=s.map(function(n){var i=t.joinColumns?t.joinColumns.find(function(e){return!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name)}):void 0,o=i&&i.name?i.name:a.connection.namingStrategy.joinTableColumnName(e.entityMetadata.tableNameWithoutPrefix,n.propertyName,n.databaseName);return new r.ColumnMetadata({connection:a.connection,entityMetadata:l,referencedColumn:n,args:{target:"",mode:"virtual",propertyName:o,options:{name:o,length:n.length,type:n.type,nullable:!1,primary:!0}}})}),d=u.map(function(n){var i=t.inverseJoinColumns?t.inverseJoinColumns.find(function(e){return!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name)}):void 0,o=i&&i.name?i.name:a.connection.namingStrategy.joinTableInverseColumnName(e.inverseEntityMetadata.tableNameWithoutPrefix,n.propertyName,n.databaseName);return new r.ColumnMetadata({connection:a.connection,entityMetadata:l,referencedColumn:n,args:{target:"",mode:"virtual",propertyName:o,options:{length:n.length,type:n.type,name:o,nullable:!1,primary:!0}}})});return this.changeDuplicatedColumnNames(p,d),l.ownerColumns=p,l.inverseColumns=d,l.ownColumns=p.concat(d),l.ownColumns.forEach(function(t){return t.relationMetadata=e}),l.foreignKeys=[new i.ForeignKeyMetadata({entityMetadata:l,referencedEntityMetadata:e.entityMetadata,columns:p,referencedColumns:s}),new i.ForeignKeyMetadata({entityMetadata:l,referencedEntityMetadata:e.inverseEntityMetadata,columns:d,referencedColumns:u})],l.indices=[new o.IndexMetadata({entityMetadata:l,columns:p,args:{target:"",unique:!1}}),new o.IndexMetadata({entityMetadata:l,columns:d,args:{target:"",unique:!1}})],l},e.prototype.collectReferencedColumns=function(e,t){var n=!!t.joinColumns&&t.joinColumns.find(function(e){return!!e.referencedColumnName});return!t.joinColumns||t.joinColumns&&!n?e.entityMetadata.columns.filter(function(e){return e.isPrimary}):t.joinColumns.map(function(t){var n=e.entityMetadata.columns.find(function(e){return e.propertyName===t.referencedColumnName});if(!n)throw new Error("Referenced column "+t.referencedColumnName+" was not found in entity "+e.entityMetadata.name);return n})},e.prototype.collectInverseReferencedColumns=function(e,t){var n=!!t.inverseJoinColumns,r=!!n&&t.inverseJoinColumns.find(function(e){return!!e.referencedColumnName});return!n||n&&!r?e.inverseEntityMetadata.primaryColumns:t.inverseJoinColumns.map(function(t){var n=e.inverseEntityMetadata.ownColumns.find(function(e){return e.propertyName===t.referencedColumnName});if(!n)throw new Error("Referenced column "+t.referencedColumnName+" was not found in entity "+e.inverseEntityMetadata.name);return n})},e.prototype.changeDuplicatedColumnNames=function(e,t){var n=this;e.forEach(function(e){t.forEach(function(t){if(e.givenDatabaseName===t.givenDatabaseName){var r=n.connection.namingStrategy.joinTableColumnDuplicationPrefix(e.propertyName,1);e.propertyName=r,e.givenDatabaseName=r;var i=n.connection.namingStrategy.joinTableColumnDuplicationPrefix(t.propertyName,2);t.propertyName=i,t.givenDatabaseName=i}})})},e}(),e("JunctionEntityMetadataBuilder",a)}}}),System.register("typeorm/metadata-builder/ClosureJunctionEntityMetadataBuilder",["typeorm/metadata/EntityMetadata","typeorm/metadata/ColumnMetadata","typeorm/metadata/ForeignKeyMetadata"],function(e,t){"use strict";var n,r,i,o;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){o=function(){function e(e){this.connection=e}return e.prototype.build=function(e){var t=this,o=new n.EntityMetadata({parentClosureEntityMetadata:e,connection:this.connection,args:{target:"",name:e.tableNameWithoutPrefix,type:"closure-junction"}});return e.primaryColumns.forEach(function(e){o.ownColumns.push(new r.ColumnMetadata({connection:t.connection,entityMetadata:o,args:{target:"",mode:"virtual",propertyName:"ancestor",options:{length:e.length,type:e.type}}})),o.ownColumns.push(new r.ColumnMetadata({connection:t.connection,entityMetadata:o,args:{target:"",mode:"virtual",propertyName:"descendant",options:{length:e.length,type:e.type}}}))}),e.treeLevelColumn&&o.ownColumns.push(new r.ColumnMetadata({connection:this.connection,entityMetadata:o,args:{target:"",mode:"virtual",propertyName:"level",options:{type:this.connection.driver.mappedDataTypes.treeLevel}}})),o.foreignKeys=[new i.ForeignKeyMetadata({entityMetadata:o,referencedEntityMetadata:e,columns:[o.ownColumns[0]],referencedColumns:e.primaryColumns}),new i.ForeignKeyMetadata({entityMetadata:o,referencedEntityMetadata:e,columns:[o.ownColumns[1]],referencedColumns:e.primaryColumns})],o},e}(),e("ClosureJunctionEntityMetadataBuilder",o)}}}),System.register("typeorm/metadata-builder/RelationJoinColumnBuilder",["typeorm/metadata/ColumnMetadata","typeorm/metadata/ForeignKeyMetadata"],function(e,t){"use strict";var n,r,i;t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=function(){function e(e){this.connection=e}return e.prototype.build=function(e,t){var n=this.collectReferencedColumns(e,t);if(n.length){var i=this.collectColumns(e,t,n);return new r.ForeignKeyMetadata({entityMetadata:t.entityMetadata,referencedEntityMetadata:t.inverseEntityMetadata,namingStrategy:this.connection.namingStrategy,columns:i,referencedColumns:n,onDelete:t.onDelete})}},e.prototype.collectReferencedColumns=function(e,t){var n=e.find(function(e){return!!e.referencedColumnName}),r=0===e.length&&t.isManyToOne,i=e.length>0&&!n;return r||i?t.inverseEntityMetadata.primaryColumns:e.map(function(e){var n=t.inverseEntityMetadata.ownColumns.find(function(t){return t.propertyName===e.referencedColumnName});if(!n)throw new Error("Referenced column "+e.referencedColumnName+" was not found in entity "+t.inverseEntityMetadata.name);return n})},e.prototype.collectColumns=function(e,t,r){var i=this;return r.map(function(r){var o=e.find(function(e){return!(e.referencedColumnName&&e.referencedColumnName!==r.propertyName||!e.name)}),a=o?o.name:i.connection.namingStrategy.joinColumnName(t.propertyName,r.propertyName),s=t.entityMetadata.ownColumns.find(function(e){return e.databaseName===a});return s||(s=new n.ColumnMetadata({connection:i.connection,entityMetadata:t.entityMetadata,args:{target:"",mode:"virtual",propertyName:t.propertyName,options:{name:a,type:r.type,length:r.length,charset:r.charset,collation:r.collation,precision:r.precision,scale:r.scale,comment:r.comment,primary:t.isPrimary,nullable:t.isNullable}}}),t.entityMetadata.registerColumn(s)),s.referencedColumn=r,s.type=r.type,s.relationMetadata=t,s.build(i.connection),s})},e}(),e("RelationJoinColumnBuilder",i)}}}),System.register("typeorm/metadata-builder/EntityMetadataBuilder",["typeorm/metadata/EntityMetadata","typeorm/metadata/ColumnMetadata","typeorm/metadata/IndexMetadata","typeorm/metadata/RelationMetadata","typeorm/metadata/EmbeddedMetadata","typeorm/metadata/RelationIdMetadata","typeorm/metadata/RelationCountMetadata","typeorm/metadata-builder/MetadataUtils","typeorm/metadata-builder/JunctionEntityMetadataBuilder","typeorm/metadata-builder/ClosureJunctionEntityMetadataBuilder","typeorm/metadata-builder/RelationJoinColumnBuilder","typeorm/metadata/EntityListenerMetadata","typeorm/metadata/ForeignKeyMetadata","typeorm/lazy-loading/LazyRelationsWrapper"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d,m,f,h,y;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e},function(e){d=e},function(e){m=e},function(e){f=e},function(e){h=e}],execute:function(){y=function(){function e(e,t){this.connection=e,this.metadataArgsStorage=t,this.junctionEntityMetadataBuilder=new l.JunctionEntityMetadataBuilder(e),this.closureJunctionEntityMetadataBuilder=new p.ClosureJunctionEntityMetadataBuilder(e),this.relationJoinColumnBuilder=new d.RelationJoinColumnBuilder(e)}return e.prototype.build=function(e){var t=this,n=(e?this.metadataArgsStorage.filterTables(e):this.metadataArgsStorage.tables).filter(function(e){return"regular"===e.type||"closure"===e.type||"class-table-child"===e.type||"single-table-child"===e.type}).map(function(e){return t.createEntityMetadata(e)});return n.forEach(function(e){return t.computeEntityMetadata(e)}),n.forEach(function(e){return t.computeInverseProperties(e,n)}),n.filter(function(e){return"single-table-child"!==e.tableType}).forEach(function(e){e.relations.filter(function(e){return e.isOneToOne||e.isManyToOne}).forEach(function(n){var r=t.metadataArgsStorage.filterJoinColumns(n.target,n.propertyName),i=t.relationJoinColumnBuilder.build(r,n);i&&(n.registerForeignKeys(i),e.foreignKeys.push(i))}),e.relations.filter(function(e){return e.isManyToMany}).forEach(function(e){var r=t.metadataArgsStorage.findJoinTable(e.target,e.propertyName);if(r){var i=t.junctionEntityMetadataBuilder.build(e,r);e.registerForeignKeys.apply(e,i.foreignKeys),e.registerJunctionEntityMetadata(i),t.computeEntityMetadata(i),t.computeInverseProperties(i,n),n.push(i)}}),e.relationsWithJoinColumns=e.relations.filter(function(e){return e.isWithJoinColumn}),e.hasNonNullableRelations=e.relationsWithJoinColumns.some(function(e){return!e.isNullable||e.isPrimary})}),n.filter(function(e){return e.isClosure}).forEach(function(e){var r=t.closureJunctionEntityMetadataBuilder.build(e);e.closureJunctionTable=r,t.computeEntityMetadata(r),t.computeInverseProperties(r,n),n.push(r)}),n.filter(function(e){return"single-table-child"===e.tableType||"class-table-child"===e.tableType}).forEach(function(e){var t=e.target instanceof Function?c.MetadataUtils.getInheritanceTree(e.target):[e.target],r=n.find(function(e){return t.find(function(t){return t===e.target})&&("single-table"===e.inheritanceType||"class-table"===e.inheritanceType)});r&&(e.parentEntityMetadata=r,"single-table"===r.inheritanceType&&(e.tableName=r.tableName))}),n.forEach(function(e){e.childEntityMetadatas=n.filter(function(t){return e.target instanceof Function&&t.target instanceof Function&&c.MetadataUtils.isInherited(t.target,e.target)})}),n.filter(function(e){return"single-table"===e.inheritanceType&&e.discriminatorColumn}).forEach(function(e){return t.createKeysForTableInheritance(e)}),n.forEach(function(e){e.indices.forEach(function(e){return e.build(t.connection.namingStrategy)})}),n.filter(function(e){return!!e.parentEntityMetadata&&"class-table-child"===e.tableType}).forEach(function(e){var n=e.parentEntityMetadata.primaryColumns,i=n.map(function(n){var i=t.connection.namingStrategy.classTableInheritanceParentColumnName(e.parentEntityMetadata.tableName,n.propertyPath),o=new r.ColumnMetadata({connection:t.connection,entityMetadata:e,referencedColumn:n,args:{target:e.target,propertyName:i,mode:"parentId",options:{name:i,type:n.type,unique:!1,nullable:!1,primary:!0}}});return e.registerColumn(o),o.build(t.connection),o});e.foreignKeys=[new f.ForeignKeyMetadata({entityMetadata:e,referencedEntityMetadata:e.parentEntityMetadata,namingStrategy:t.connection.namingStrategy,columns:i,referencedColumns:n,onDelete:"CASCADE"})]}),n.filter(function(e){return e.target instanceof Function}).forEach(function(e){e.relations.filter(function(e){return e.isLazy}).forEach(function(n){new h.LazyRelationsWrapper(t.connection).wrap(e.target.prototype,n)})}),n.forEach(function(e){e.columns.forEach(function(n){var r=t.metadataArgsStorage.findGenerated(n.target,n.propertyName);r&&(n.isGenerated=!0,n.generationStrategy=r.strategy,n.type="increment"===r.strategy?n.type||Number:"uuid",n.build(t.connection),t.computeEntityMetadata(e))})}),n},e.prototype.createEntityMetadata=function(e){var t,a=this,l=e.target instanceof Function?c.MetadataUtils.getInheritanceTree(e.target):[e.target];"single-table-child"===e.type?(t=this.metadataArgsStorage.filterSingleTableChildren(e.target).map(function(e){return e.target}).filter(function(e){return e instanceof Function}),l.push.apply(l,t)):"class-table-child"===e.type&&l.forEach(function(e){!!a.metadataArgsStorage.inheritances.find(function(t){return t.target===e})&&l.splice(l.indexOf(e),1)});var p=new n.EntityMetadata({connection:this.connection,args:e}),d=this.metadataArgsStorage.findInheritanceType(e.target);p.inheritanceType=d?d.type:void 0;var f=this.metadataArgsStorage.findDiscriminatorValue(e.target);return p.discriminatorValue=f?f.value:e.target.name,p.embeddeds=this.createEmbeddedsRecursively(p,this.metadataArgsStorage.filterEmbeddeds(l)),p.ownColumns=this.metadataArgsStorage.filterColumns(l).map(function(e){var n=new r.ColumnMetadata({connection:a.connection,entityMetadata:p,args:e});return t&&-1!==t.indexOf(e.target)&&(n.isNullable=!0),n}),p.ownRelations=this.metadataArgsStorage.filterRelations(l).map(function(e){return new o.RelationMetadata({entityMetadata:p,args:e})}),p.relationIds=this.metadataArgsStorage.filterRelationIds(l).map(function(e){return new s.RelationIdMetadata({entityMetadata:p,args:e})}),p.relationCounts=this.metadataArgsStorage.filterRelationCounts(l).map(function(e){return new u.RelationCountMetadata({entityMetadata:p,args:e})}),p.ownIndices=this.metadataArgsStorage.filterIndices(l).map(function(e){return new i.IndexMetadata({entityMetadata:p,args:e})}),p.ownListeners=this.metadataArgsStorage.filterListeners(l).map(function(e){return new m.EntityListenerMetadata({entityMetadata:p,args:e})}),p},e.prototype.createEmbeddedsRecursively=function(e,t){var n=this;return t.map(function(t){var l=new a.EmbeddedMetadata({entityMetadata:e,args:t}),p=c.MetadataUtils.getInheritanceTree(l.type);return l.columns=n.metadataArgsStorage.filterColumns(p).map(function(t){return new r.ColumnMetadata({connection:n.connection,entityMetadata:e,embeddedMetadata:l,args:t})}),l.relations=n.metadataArgsStorage.filterRelations(p).map(function(t){return new o.RelationMetadata({entityMetadata:e,embeddedMetadata:l,args:t})}),l.listeners=n.metadataArgsStorage.filterListeners(p).map(function(t){return new m.EntityListenerMetadata({entityMetadata:e,embeddedMetadata:l,args:t})}),l.indices=n.metadataArgsStorage.filterIndices(p).map(function(t){return new i.IndexMetadata({entityMetadata:e,embeddedMetadata:l,args:t})}),l.relationIds=n.metadataArgsStorage.filterRelationIds(p).map(function(t){return new s.RelationIdMetadata({entityMetadata:e,args:t})}),l.relationCounts=n.metadataArgsStorage.filterRelationCounts(p).map(function(t){return new u.RelationCountMetadata({entityMetadata:e,args:t})}),l.embeddeds=n.createEmbeddedsRecursively(e,n.metadataArgsStorage.filterEmbeddeds(p)),l.embeddeds.forEach(function(e){return e.parentEmbeddedMetadata=l}),l})},e.prototype.computeEntityMetadata=function(e){var t=this;e.embeddeds.forEach(function(e){return e.build(t.connection)}),e.embeddeds.forEach(function(e){e.columnsFromTree.forEach(function(e){return e.build(t.connection)}),e.relationsFromTree.forEach(function(e){return e.build()})}),e.ownColumns.forEach(function(e){return e.build(t.connection)}),e.ownRelations.forEach(function(e){return e.build()}),e.relations=e.embeddeds.reduce(function(e,t){return e.concat(t.relationsFromTree)},e.ownRelations),e.eagerRelations=e.relations.filter(function(e){return e.isEager}),e.lazyRelations=e.relations.filter(function(e){return e.isLazy}),e.oneToOneRelations=e.relations.filter(function(e){return e.isOneToOne}),e.oneToManyRelations=e.relations.filter(function(e){return e.isOneToMany}),e.manyToOneRelations=e.relations.filter(function(e){return e.isManyToOne}),e.manyToManyRelations=e.relations.filter(function(e){return e.isManyToMany}),e.ownerOneToOneRelations=e.relations.filter(function(e){return e.isOneToOneOwner}),e.ownerManyToManyRelations=e.relations.filter(function(e){return e.isManyToManyOwner}),e.treeParentRelation=e.relations.find(function(e){return e.isTreeParent}),e.treeChildrenRelation=e.relations.find(function(e){return e.isTreeChildren}),e.columns=e.embeddeds.reduce(function(e,t){return e.concat(t.columnsFromTree)},e.ownColumns),e.listeners=e.embeddeds.reduce(function(e,t){return e.concat(t.listenersFromTree)},e.ownListeners),e.indices=e.embeddeds.reduce(function(e,t){return e.concat(t.indicesFromTree)},e.ownIndices),e.primaryColumns=e.columns.filter(function(e){return e.isPrimary}),e.hasMultiplePrimaryKeys=e.primaryColumns.length>1,e.generatedColumns=e.columns.filter(function(e){return e.isGenerated||e.isObjectId}),e.createDateColumn=e.columns.find(function(e){return e.isCreateDate}),e.updateDateColumn=e.columns.find(function(e){return e.isUpdateDate}),e.versionColumn=e.columns.find(function(e){return e.isVersion}),e.discriminatorColumn=e.columns.find(function(e){return e.isDiscriminator}),e.treeLevelColumn=e.columns.find(function(e){return e.isTreeLevel}),e.parentIdColumns=e.columns.filter(function(e){return e.isParentId}),e.objectIdColumn=e.columns.find(function(e){return e.isObjectId}),e.foreignKeys.forEach(function(e){return e.build(t.connection.namingStrategy)}),e.propertiesMap=e.createPropertiesMap(),e.relationIds.forEach(function(e){return e.build()}),e.relationCounts.forEach(function(e){return e.build()}),e.embeddeds.forEach(function(e){e.relationIdsFromTree.forEach(function(e){return e.build()}),e.relationCountsFromTree.forEach(function(e){return e.build()})})},e.prototype.computeInverseProperties=function(e,t){e.relations.forEach(function(n){var r=t.find(function(e){return e.target===n.type||"string"==typeof n.type&&e.targetName===n.type});if(!r)throw new Error("Entity metadata for "+e.name+"#"+n.propertyPath+" was not found. Check if you specified a correct entity object, check its really entity and its connected in the connection options.");n.inverseEntityMetadata=r,n.inverseSidePropertyPath=n.buildInverseSidePropertyPath(),n.inverseRelation=r.relations.find(function(e){return e.propertyPath===n.inverseSidePropertyPath})})},e.prototype.createKeysForTableInheritance=function(e){e.indices.push(new i.IndexMetadata({entityMetadata:e,columns:[e.discriminatorColumn],args:{target:e.target,unique:!1}}),new i.IndexMetadata({entityMetadata:e,columns:e.primaryColumns.concat([e.discriminatorColumn]),args:{target:e.target,unique:!1}}))},e}(),e("EntityMetadataBuilder",y)}}}),System.register("typeorm/decorator/options/JoinTableOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/entity-schema/EntitySchemaTransformer",["typeorm/metadata-args/MetadataArgsStorage"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.prototype.transform=function(e){var t=new n.MetadataArgsStorage;return e.forEach(function(e){var n=e.table||{},r={target:e.target||e.name,name:n.name,type:n.type||"regular",orderBy:n.orderBy};t.tables.push(r),Object.keys(e.columns).forEach(function(n){var r=e.columns[n],i="regular";r.createDate&&(i="createDate"),r.updateDate&&(i="updateDate"),r.version&&(i="version"),r.treeChildrenCount&&(i="treeChildrenCount"),r.treeLevel&&(i="treeLevel");var o={target:e.target||e.name,mode:i,propertyName:n,options:{type:r.type,name:r.name,length:r.length,primary:r.primary,unique:r.unique,nullable:r.nullable,comment:r.comment,default:r.default,precision:r.precision,scale:r.scale}};if(t.columns.push(o),r.generated){var a={target:e.target||e.name,propertyName:n,strategy:"string"==typeof r.generated?r.generated:"increment"};t.generations.push(a)}}),e.relations&&Object.keys(e.relations).forEach(function(n){var r=e.relations[n],i={target:e.target||e.name,propertyName:n,relationType:r.type,isLazy:r.isLazy||!1,type:r.target,inverseSideProperty:r.inverseSide,isTreeParent:r.isTreeParent,isTreeChildren:r.isTreeChildren,options:{cascadeAll:r.cascadeAll,cascadeInsert:r.cascadeInsert,cascadeUpdate:r.cascadeUpdate,cascadeRemove:r.cascadeRemove,nullable:r.nullable,onDelete:r.onDelete}};if(t.relations.push(i),r.joinColumn)if("boolean"==typeof r.joinColumn){o={target:e.target||e.name,propertyName:n};t.joinColumns.push(o)}else{var o={target:e.target||e.name,propertyName:n,name:r.joinColumn.name,referencedColumnName:r.joinColumn.referencedColumnName};t.joinColumns.push(o)}if(r.joinTable)if("boolean"==typeof r.joinTable){a={target:e.target||e.name,propertyName:n};t.joinTables.push(a)}else{var a={target:e.target||e.name,propertyName:n,name:r.joinTable.name,joinColumns:r.joinTable.joinColumn?[r.joinTable.joinColumn]:r.joinTable.joinColumns,inverseJoinColumns:r.joinTable.inverseJoinColumn?[r.joinTable.inverseJoinColumn]:r.joinTable.inverseJoinColumns};t.joinTables.push(a)}}),e.indices&&Object.keys(e.indices).forEach(function(n){var r=e.indices[n],i={target:e.target||e.name,name:n,unique:r.unique,sparse:r.sparse,columns:r.columns};t.indices.push(i)})}),t},e}(),e("EntitySchemaTransformer",r)}}}),System.register("typeorm/connection/ConnectionMetadataBuilder",["typeorm/util/DirectoryExportedClassesLoader","typeorm/util/OrmUtils","typeorm/container","typeorm/index","typeorm/metadata-builder/EntityMetadataBuilder","typeorm/entity-schema/EntitySchemaTransformer"],function(e,t){"use strict";var n,r,i,o,a,s,u;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e}],execute:function(){u=function(){function e(e){this.connection=e}return e.prototype.buildMigrations=function(e){var t=r.OrmUtils.splitClassesAndStrings(e),o=t[0],a=t[1];return o.concat(n.importClassesFromDirectories(a)).map(function(e){return i.getFromContainer(e)})},e.prototype.buildSubscribers=function(e){var t=r.OrmUtils.splitClassesAndStrings(e||[]),a=t[0],s=t[1],u=a.concat(n.importClassesFromDirectories(s));return o.getMetadataArgsStorage().filterSubscribers(u).map(function(e){return i.getFromContainer(e.target)})},e.prototype.buildEntityMetadatas=function(e,t){var i=r.OrmUtils.splitClassesAndStrings(e||[]),u=i[0],c=i[1],l=u.concat(n.importClassesFromDirectories(c)),p=new a.EntityMetadataBuilder(this.connection,o.getMetadataArgsStorage()).build(l),d=r.OrmUtils.splitClassesAndStrings(t||[]),m=d[0],f=d[1],h=m.concat(n.importJsonsFromDirectories(f)),y=(new s.EntitySchemaTransformer).transform(h),g=new a.EntityMetadataBuilder(this.connection,y).build();return p.concat(g)},e}(),e("ConnectionMetadataBuilder",u)}}}),System.register("typeorm/logger/SimpleConsoleLogger",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.options=e}return e.prototype.logQuery=function(e,t,n){if("all"===this.options||!0===this.options||this.options instanceof Array&&-1!==this.options.indexOf("query")){var r=e+(t&&t.length?" -- PARAMETERS: "+this.stringifyParams(t):"");console.log("executing query: "+r)}},e.prototype.logQueryError=function(e,t,n,r){if("all"===this.options||!0===this.options||this.options instanceof Array&&-1!==this.options.indexOf("error")){var i=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");console.log("query failed: "+i),console.log("error:",e)}},e.prototype.logQuerySlow=function(e,t,n,r){var i=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");console.log("query is slow: "+i),console.log("execution time: "+e)},e.prototype.logSchemaBuild=function(e,t){("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("schema"))&&console.log(e)},e.prototype.logMigration=function(e,t){console.log(e)},e.prototype.log=function(e,t,n){switch(e){case"log":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("log"))&&console.log(t);break;case"info":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("info"))&&console.info(t);break;case"warn":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("warn"))&&console.warn(t)}},e.prototype.stringifyParams=function(e){try{return JSON.stringify(e)}catch(t){return e}},e}(),e("SimpleConsoleLogger",n)}}}),System.register("typeorm/logger/AdvancedConsoleLogger",["typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.options=e}return e.prototype.logQuery=function(e,t,r){if("all"===this.options||!0===this.options||this.options instanceof Array&&-1!==this.options.indexOf("query")){var i=e+(t&&t.length?" -- PARAMETERS: "+this.stringifyParams(t):"");n.PlatformTools.logInfo("executing query:",n.PlatformTools.highlightSql(i))}},e.prototype.logQueryError=function(e,t,r,i){if("all"===this.options||!0===this.options||this.options instanceof Array&&-1!==this.options.indexOf("error")){var o=t+(r&&r.length?" -- PARAMETERS: "+this.stringifyParams(r):"");n.PlatformTools.logError("query failed:",n.PlatformTools.highlightSql(o)),n.PlatformTools.logError("error:",e)}},e.prototype.logQuerySlow=function(e,t,r,i){var o=t+(r&&r.length?" -- PARAMETERS: "+this.stringifyParams(r):"");n.PlatformTools.logWarn("query is slow:",n.PlatformTools.highlightSql(o)),n.PlatformTools.logWarn("execution time:",e)},e.prototype.logSchemaBuild=function(e,t){("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("schema"))&&n.PlatformTools.log(e)},e.prototype.logMigration=function(e,t){n.PlatformTools.log(e)},e.prototype.log=function(e,t,r){switch(e){case"log":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("log"))&&console.log(t);break;case"info":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("info"))&&console.info(t);break;case"warn":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("warn"))&&console.warn(n.PlatformTools.warn(t))}},e.prototype.stringifyParams=function(e){try{return JSON.stringify(e)}catch(t){return e}},e}(),e("AdvancedConsoleLogger",r)}}}),System.register("typeorm/logger/FileLogger",["typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.options=e}return e.prototype.logQuery=function(e,t,n){if("all"===this.options||!0===this.options||this.options instanceof Array&&-1!==this.options.indexOf("query")){var r=e+(t&&t.length?" -- PARAMETERS: "+this.stringifyParams(t):"");this.write("[QUERY]: "+r)}},e.prototype.logQueryError=function(e,t,n,r){if("all"===this.options||!0===this.options||this.options instanceof Array&&-1!==this.options.indexOf("error")){var i=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");this.write(["[FAILED QUERY]: "+i,"[QUERY ERROR]: "+e])}},e.prototype.logQuerySlow=function(e,t,n,r){var i=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");this.write("[SLOW QUERY: "+e+" ms]: "+i)},e.prototype.logSchemaBuild=function(e,t){("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("schema"))&&this.write(e)},e.prototype.logMigration=function(e,t){this.write(e)},e.prototype.log=function(e,t,n){switch(e){case"log":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("log"))&&this.write("[LOG]: "+t);break;case"info":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("info"))&&this.write("[INFO]: "+t);break;case"warn":("all"===this.options||this.options instanceof Array&&-1!==this.options.indexOf("warn"))&&this.write("[WARN]: "+t)}},e.prototype.write=function(e){e=e instanceof Array?e:[e];var t=n.PlatformTools.load("app-root-path").path;e=e.map(function(e){return"["+(new Date).toISOString()+"]"+e}),n.PlatformTools.appendFileSync(t+"/ormlogs.log",e.join("\r\n")+"\r\n")},e.prototype.stringifyParams=function(e){try{return JSON.stringify(e)}catch(t){return e}},e}(),e("FileLogger",r)}}}),System.register("typeorm/logger/DebugLogger",["typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){this.debug=n.PlatformTools.load("debug"),this.debugQueryLog=this.debug("typeorm:query:log"),this.debugQueryError=this.debug("typeorm:query:error"),this.debugQuerySlow=this.debug("typeorm:query:slow"),this.debugSchemaBuild=this.debug("typeorm:schema"),this.debugMigration=this.debug("typeorm:migration"),this.debugLog=this.debug("typeorm:log"),this.debugInfo=this.debug("typeorm:info"),this.debugWarn=this.debug("typeorm:warn")}return e.prototype.logQuery=function(e,t,r){this.debugQueryLog.enabled&&(this.debugQueryLog(n.PlatformTools.highlightSql(e)+";"),t&&t.length&&this.debugQueryLog("parameters:",t))},e.prototype.logQueryError=function(e,t,r,i){this.debugQueryError.enabled&&(this.debugQueryError(n.PlatformTools.highlightSql(t)+";"),r&&r.length&&this.debugQueryError("parameters:",r),this.debugQueryError("error: ",e))},e.prototype.logQuerySlow=function(e,t,r,i){this.debugQuerySlow.enabled&&(this.debugQuerySlow(n.PlatformTools.highlightSql(t)+";"),r&&r.length&&this.debugQuerySlow("parameters:",r),this.debugQuerySlow("execution time:",e))},e.prototype.logSchemaBuild=function(e,t){this.debugSchemaBuild.enabled&&this.debugSchemaBuild(e)},e.prototype.logMigration=function(e,t){this.debugMigration.enabled&&this.debugMigration(e)},e.prototype.log=function(e,t,n){switch(e){case"log":this.debugLog.enabled&&this.debugLog(t);break;case"info":this.debugInfo.enabled&&this.debugInfo(t);break;case"warn":this.debugWarn.enabled&&this.debugWarn(t)}},e}(),e("DebugLogger",r)}}}),System.register("typeorm/logger/LoggerFactory",["typeorm/logger/SimpleConsoleLogger","typeorm/logger/AdvancedConsoleLogger","typeorm/logger/FileLogger","typeorm/logger/DebugLogger"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(){}return e.prototype.create=function(e,t){if(e instanceof Object)return e;if(e)switch(e){case"simple-console":return new n.SimpleConsoleLogger(t);case"file":return new i.FileLogger(t);case"advanced-console":return new r.AdvancedConsoleLogger(t);case"debug":return new o.DebugLogger}return new r.AdvancedConsoleLogger(t)},e}(),e("LoggerFactory",a)}}}),System.register("typeorm/cache/QueryResultCache",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/cache/RedisQueryResultCache",["typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.connection=e,this.redis=this.loadRedis()}return e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return(e=this.connection.options.cache)&&e.options?this.client=this.redis.createClient(e.options):this.client=this.redis.createClient(),[2]})})},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,n){e.client.quit(function(r,i){if(r)return n(r);t(),e.client=void 0})})]})})},e.prototype.synchronize=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getFromCache=function(e,t){var n=this;return new Promise(function(t,r){e.identifier?n.client.get(e.identifier,function(e,n){if(e)return r(e);t(JSON.parse(n))}):e.query?n.client.get(e.query,function(e,n){if(e)return r(e);t(JSON.parse(n))}):t(void 0)})},e.prototype.isExpired=function(e){return e.time+e.duration<(new Date).getTime()},e.prototype.storeInCache=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(n){return[2,new Promise(function(n,r){e.identifier?t.client.set(e.identifier,JSON.stringify(e),function(e,t){if(e)return r(e);n()}):e.query&&t.client.set(e.query,JSON.stringify(e),function(e,t){if(e)return r(e);n()})})]})})},e.prototype.clear=function(e){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,n){e.client.flushdb(function(e,r){if(e)return n(e);t()})})]})})},e.prototype.remove=function(e,t){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(e){return t.deleteKey(e)}))];case 1:return n.sent(),[2]}})})},e.prototype.deleteKey=function(e){var t=this;return new Promise(function(n,r){t.client.del(e,function(e,t){if(e)return r(e);n()})})},e.prototype.loadRedis=function(){try{return n.PlatformTools.load("redis")}catch(e){throw new Error('Cannot use cache because redis is not installed. Please run "npm i redis --save".')}},e}(),e("RedisQueryResultCache",r)}}}),System.register("typeorm/cache/DbQueryResultCache",["typeorm/schema-builder/schema/Table","typeorm/schema-builder/schema/TableColumn","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/sqlserver/MssqlParameter"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e){this.connection=e}return e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.disconnect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.synchronize=function(e){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(o){switch(o.label){case 0:return e=this.getQueryRunner(e),t=this.connection.driver,[4,e.hasTable("query-result-cache")];case 1:return(i=o.sent())?[2]:[4,e.createTable(new n.Table("query-result-cache",[new r.TableColumn({name:"id",isNullable:!0,isPrimary:!0,type:t.normalizeType({type:t.mappedDataTypes.cacheId}),generationStrategy:"increment",isGenerated:!0}),new r.TableColumn({name:"identifier",type:t.normalizeType({type:t.mappedDataTypes.cacheIdentifier}),isNullable:!0}),new r.TableColumn({name:"time",type:t.normalizeType({type:t.mappedDataTypes.cacheTime}),isPrimary:!1,isNullable:!1}),new r.TableColumn({name:"duration",type:t.normalizeType({type:t.mappedDataTypes.cacheDuration}),isPrimary:!1,isNullable:!1}),new r.TableColumn({name:"query",type:t.normalizeType({type:t.mappedDataTypes.cacheQuery}),isPrimary:!1,isNullable:!1}),new r.TableColumn({name:"result",type:t.normalizeType({type:t.mappedDataTypes.cacheResult}),isNullable:!1})]))];case 2:return o.sent(),[2]}})})},e.prototype.getFromCache=function(e,t){t=this.getQueryRunner(t);var n=this.connection.createQueryBuilder(t).select().from("query-result-cache","cache");return e.identifier?n.where(n.escape("cache")+"."+n.escape("identifier")+" = :identifier").setParameters({identifier:this.connection.driver instanceof i.SqlServerDriver?new o.MssqlParameter(e.identifier,"nvarchar"):e.identifier}).getRawOne():e.query?n.where(n.escape("cache")+"."+n.escape("query")+" = :query").setParameters({query:this.connection.driver instanceof i.SqlServerDriver?new o.MssqlParameter(e.query,"nvarchar"):e.query}).getRawOne():Promise.resolve(void 0)},e.prototype.isExpired=function(e){return("string"==typeof e.time?parseInt(e.time):e.time)+e.duration<(new Date).getTime()},e.prototype.storeInCache=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(a){switch(a.label){case 0:return n=this.getQueryRunner(n),r=e,this.connection.driver instanceof i.SqlServerDriver&&(r={identifier:new o.MssqlParameter(e.identifier,"nvarchar"),time:new o.MssqlParameter(e.time,"bigint"),duration:new o.MssqlParameter(e.duration,"int"),query:new o.MssqlParameter(e.query,"nvarchar"),result:new o.MssqlParameter(e.result,"nvarchar")}),t&&t.identifier?[4,n.update("query-result-cache",r,{identifier:r.identifier})]:[3,2];case 1:return a.sent(),[3,6];case 2:return t&&t.query?[4,n.update("query-result-cache",r,{query:r.query})]:[3,4];case 3:return a.sent(),[3,6];case 4:return[4,n.insert("query-result-cache",r)];case 5:a.sent(),a.label=6;case 6:return[2]}})})},e.prototype.clear=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.getQueryRunner(e).truncate("query-result-cache")]})})},e.prototype.remove=function(e,t){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(e){return n.getQueryRunner(t).delete("query-result-cache",{identifier:e})}))];case 1:return r.sent(),[2]}})})},e.prototype.getQueryRunner=function(e){return e||this.connection.createQueryRunner("master")},e}(),e("DbQueryResultCache",a)}}}),System.register("typeorm/cache/QueryResultCacheFactory",["typeorm/cache/RedisQueryResultCache","typeorm/cache/DbQueryResultCache"],function(e,t){"use strict";var n,r,i;t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=function(){function e(e){this.connection=e}return e.prototype.create=function(){if(!this.connection.options.cache)throw new Error("To use cache you need to enable it in connection options by setting cache: true or providing some caching options. Example: { host: ..., username: ..., cache: true }");return"redis"===this.connection.options.cache.type?new n.RedisQueryResultCache(this.connection):new r.DbQueryResultCache(this.connection)},e}(),e("QueryResultCacheFactory",i)}}}),System.register("typeorm/connection/Connection",["typeorm/naming-strategy/DefaultNamingStrategy","typeorm/error/CannotExecuteNotConnectedError","typeorm/error/CannotConnectAlreadyConnectedError","typeorm/error/EntityMetadataNotFound","typeorm/migration/MigrationExecutor","typeorm/driver/mongodb/MongoDriver","typeorm/entity-manager/MongoEntityManager","typeorm/metadata-builder/EntityMetadataValidator","typeorm/error/QueryRunnerProviderAlreadyReleasedError","typeorm/entity-manager/EntityManagerFactory","typeorm/driver/DriverFactory","typeorm/connection/ConnectionMetadataBuilder","typeorm/query-builder/SelectQueryBuilder","typeorm/logger/LoggerFactory","typeorm/cache/QueryResultCacheFactory","typeorm/driver/sqlserver/SqlServerDriver","typeorm/driver/mysql/MysqlDriver","typeorm/util/PromiseUtils","typeorm/entity-manager/SqljsEntityManager"],function(e,t){"use strict";var n,r,i,o,a,s,u,c,l,p,d,m,f,h,y,g,v,b,E,_;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e},function(e){a=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){l=e},function(e){p=e},function(e){d=e},function(e){m=e},function(e){f=e},function(e){h=e},function(e){y=e},function(e){g=e},function(e){v=e},function(e){b=e},function(e){E=e}],execute:function(){_=function(){function e(e){this.isConnected=!1,this.migrations=[],this.subscribers=[],this.entityMetadatas=[],this.name=e.name||"default",this.options=e,this.logger=(new h.LoggerFactory).create(this.options.logger,this.options.logging),this.driver=(new d.DriverFactory).create(this),this.manager=this.createEntityManager(),this.namingStrategy=e.namingStrategy||new n.DefaultNamingStrategy,this.queryResultCache=e.cache?new y.QueryResultCacheFactory(this).create():void 0}return Object.defineProperty(e.prototype,"mongoManager",{get:function(){if(!(this.manager instanceof u.MongoEntityManager))throw new Error("MongoEntityManager is only available for MongoDB databases.");return this.manager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sqljsManager",{get:function(){if(!(this.manager instanceof E.SqljsEntityManager))throw new Error("SqljsEntityManager is only available for Sqljs databases.");return this.manager},enumerable:!0,configurable:!0}),e.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(this.isConnected)throw new i.CannotConnectAlreadyConnectedError(this.name);return[4,this.driver.connect()];case 1:return t.sent(),this.queryResultCache?[4,this.queryResultCache.connect()]:[3,3];case 2:t.sent(),t.label=3;case 3:Object.assign(this,{isConnected:!0}),t.label=4;case 4:return t.trys.push([4,12,,14]),this.buildMetadatas(),[4,this.driver.afterConnect()];case 5:return t.sent(),this.options.dropSchema?[4,this.dropDatabase()]:[3,7];case 6:t.sent(),t.label=7;case 7:return this.options.synchronize?[4,this.synchronize()]:[3,9];case 8:t.sent(),t.label=9;case 9:return this.options.migrationsRun?[4,this.runMigrations()]:[3,11];case 10:t.sent(),t.label=11;case 11:return[3,14];case 12:return e=t.sent(),[4,this.close()];case 13:throw t.sent(),e;case 14:return[2,this]}})})},e.prototype.close=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:if(!this.isConnected)throw new r.CannotExecuteNotConnectedError(this.name);return[4,this.driver.disconnect()];case 1:return e.sent(),this.queryResultCache?[4,this.queryResultCache.disconnect()]:[3,3];case 2:e.sent(),e.label=3;case 3:return Object.assign(this,{isConnected:!1}),[2]}})})},e.prototype.synchronize=function(e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:if(!this.isConnected)throw new r.CannotExecuteNotConnectedError(this.name);return e?[4,this.dropDatabase()]:[3,2];case 1:n.sent(),n.label=2;case 2:return t=this.driver.createSchemaBuilder(),[4,t.build()];case 3:return n.sent(),[2]}})})},e.prototype.dropDatabase=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.createQueryRunner("master")];case 1:return e=r.sent(),t=this.entityMetadatas.filter(function(e){return e.schema}).map(function(e){return e.schema}),this.driver instanceof g.SqlServerDriver||this.driver instanceof v.MysqlDriver?(n=this.driver.database?[this.driver.database]:[],this.entityMetadatas.forEach(function(e){e.database&&-1===n.indexOf(e.database)&&n.push(e.database)}),[4,b.PromiseUtils.runInSequence(n,function(n){return e.clearDatabase(t,n)})]):[3,3];case 2:return r.sent(),[3,5];case 3:return[4,e.clearDatabase(t)];case 4:r.sent(),r.label=5;case 5:return[4,e.release()];case 6:return r.sent(),[2]}})})},e.prototype.runMigrations=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(!this.isConnected)throw new r.CannotExecuteNotConnectedError(this.name);return e=new a.MigrationExecutor(this),[4,e.executePendingMigrations()];case 1:return t.sent(),[2]}})})},e.prototype.undoLastMigration=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(!this.isConnected)throw new r.CannotExecuteNotConnectedError(this.name);return e=new a.MigrationExecutor(this),[4,e.undoLastMigration()];case 1:return t.sent(),[2]}})})},e.prototype.hasMetadata=function(e){return!!this.findMetadata(e)},e.prototype.getMetadata=function(e){var t=this.findMetadata(e);if(!t)throw new o.EntityMetadataNotFound(e);return t},e.prototype.getRepository=function(e){return this.manager.getRepository(e)},e.prototype.getTreeRepository=function(e){return this.manager.getTreeRepository(e)},e.prototype.getMongoRepository=function(e){if(!(this.driver instanceof s.MongoDriver))throw new Error("You can use getMongoRepository only for MongoDB connections.");return this.manager.getRepository(e)},e.prototype.getCustomRepository=function(e){return this.manager.getCustomRepository(e)},e.prototype.transaction=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.manager.transaction(e)]})})},e.prototype.query=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){switch(i.label){case 0:if(this instanceof u.MongoEntityManager)throw new Error("Queries aren't supported by MongoDB.");if(n&&n.isReleased)throw new l.QueryRunnerProviderAlreadyReleasedError;r=n||this.createQueryRunner("master"),i.label=1;case 1:return i.trys.push([1,,3,6]),[4,r.query(e,t)];case 2:return[2,i.sent()];case 3:return n?[3,5]:[4,r.release()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})},e.prototype.createQueryBuilder=function(e,t,n){if(this instanceof u.MongoEntityManager)throw new Error("Query Builder is not supported by MongoDB.");if(t){var r=this.getMetadata(e);return new f.SelectQueryBuilder(this,n).select(t).from(r.target,t)}return new f.SelectQueryBuilder(this,e)},e.prototype.createQueryRunner=function(e){void 0===e&&(e="master");var t=this.driver.createQueryRunner(e),n=this.createEntityManager(t);return Object.assign(t,{manager:n}),t},e.prototype.getManyToManyMetadata=function(e,t){var n=this.getMetadata(e).findRelationWithPropertyPath(t);if(!n)throw new Error('Relation "'+t+'" was not found in '+e+" entity.");if(!n.isManyToMany)throw new Error('Relation "'+e+"#"+t+'" does not have a many-to-many relationship.You can use this method only on many-to-many relations.');return n.junctionEntityMetadata},e.prototype.createEntityManager=function(e){return(new p.EntityManagerFactory).create(this,e)},e.prototype.findMetadata=function(e){return this.entityMetadatas.find(function(t){return t.target===e||"string"==typeof e&&(-1!==e.indexOf(".")?t.tablePath===e:t.name===e||t.tableName===e)})},e.prototype.buildMetadatas=function(){var e=new m.ConnectionMetadataBuilder(this),t=new c.EntityMetadataValidator,n=e.buildSubscribers(this.options.subscribers||[]);Object.assign(this,{subscribers:n});var r=e.buildEntityMetadatas(this.options.entities||[],this.options.entitySchemas||[]);Object.assign(this,{entityMetadatas:r});var i=e.buildMigrations(this.options.migrations||[]);Object.assign(this,{migrations:i}),t.validateMany(this.entityMetadatas,this.driver)},e}(),e("Connection",_)}}}),System.register("typeorm/error/ConnectionNotFoundError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="ConnectionNotFoundError",n.message='Connection "'+t+'" was not found.',n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("ConnectionNotFoundError",n)}}}),System.register("typeorm/error/AlreadyHasActiveConnectionError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="AlreadyHasActiveConnectionError",n.message='Cannot create a new connection named "'+t+'", because connection with such name already exist and it now has an active connection session.',n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("AlreadyHasActiveConnectionError",n)}}}),System.register("typeorm/connection/ConnectionManager",["typeorm/connection/Connection","typeorm/error/ConnectionNotFoundError","typeorm/error/AlreadyHasActiveConnectionError"],function(e,t){"use strict";var n,r,i,o;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){o=function(){function e(){this.connections=[]}return e.prototype.has=function(e){return!!this.connections.find(function(t){return t.name===e})},e.prototype.get=function(e){void 0===e&&(e="default");var t=this.connections.find(function(t){return t.name===e});if(!t)throw new r.ConnectionNotFoundError(e);return t},e.prototype.create=function(e){var t=this.connections.find(function(t){return t.name===(e.name||"default")});if(t){if(t.isConnected)throw new i.AlreadyHasActiveConnectionError(e.name||"default");this.connections.splice(this.connections.indexOf(t),1)}var r=new n.Connection(e);return this.connections.push(r),r},e}(),e("ConnectionManager",o)}}}),System.register("typeorm/connection/options-reader/ConnectionOptionsEnvReader",["typeorm/platform/PlatformTools","typeorm/util/OrmUtils"],function(e,t){"use strict";var n,r,i;t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=function(){function e(){}return e.prototype.read=function(){return{type:n.PlatformTools.getEnvVariable("TYPEORM_CONNECTION"),url:n.PlatformTools.getEnvVariable("TYPEORM_URL"),host:n.PlatformTools.getEnvVariable("TYPEORM_HOST"),port:n.PlatformTools.getEnvVariable("TYPEORM_PORT"),username:n.PlatformTools.getEnvVariable("TYPEORM_USERNAME"),password:n.PlatformTools.getEnvVariable("TYPEORM_PASSWORD"),database:n.PlatformTools.getEnvVariable("TYPEORM_DATABASE"),sid:n.PlatformTools.getEnvVariable("TYPEORM_SID"),schema:n.PlatformTools.getEnvVariable("TYPEORM_SCHEMA"),extra:n.PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA")?JSON.parse(n.PlatformTools.getEnvVariable("TYPEORM_DRIVER_EXTRA")):void 0,synchronize:r.OrmUtils.toBoolean(n.PlatformTools.getEnvVariable("TYPEORM_SYNCHRONIZE")),dropSchema:r.OrmUtils.toBoolean(n.PlatformTools.getEnvVariable("TYPEORM_DROP_SCHEMA")),migrationsRun:r.OrmUtils.toBoolean(n.PlatformTools.getEnvVariable("TYPEORM_MIGRATIONS_RUN")),entities:this.stringToArray(n.PlatformTools.getEnvVariable("TYPEORM_ENTITIES")),migrations:this.stringToArray(n.PlatformTools.getEnvVariable("TYPEORM_MIGRATIONS")),subscribers:this.stringToArray(n.PlatformTools.getEnvVariable("TYPEORM_SUBSCRIBERS")),entitySchemas:this.stringToArray(n.PlatformTools.getEnvVariable("TYPEORM_ENTITY_SCHEMAS")),logging:this.transformLogging(n.PlatformTools.getEnvVariable("TYPEORM_LOGGING")),logger:n.PlatformTools.getEnvVariable("TYPEORM_LOGGER"),entityPrefix:n.PlatformTools.getEnvVariable("TYPEORM_ENTITY_PREFIX"),maxQueryExecutionTime:n.PlatformTools.getEnvVariable("TYPEORM_MAX_QUERY_EXECUTION_TIME"),cli:{entitiesDir:n.PlatformTools.getEnvVariable("TYPEORM_ENTITIES_DIR"),migrationsDir:n.PlatformTools.getEnvVariable("TYPEORM_MIGRATIONS_DIR"),subscribersDir:n.PlatformTools.getEnvVariable("TYPEORM_SUBSCRIBERS_DIR")}}},e.prototype.transformLogging=function(e){return"true"===e||"TRUE"===e||"1"===e||("all"===e?"all":this.stringToArray(e))},e.prototype.stringToArray=function(e){return e?e.split(",").map(function(e){return e.trim()}):[]},e}(),e("ConnectionOptionsEnvReader",i)}}}),System.register("typeorm/connection/options-reader/ConnectionOptionsYmlReader",["typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.prototype.read=function(e){var t=n.PlatformTools.load("js-yaml").safeLoad(n.PlatformTools.readFileSync(e));return Object.keys(t).map(function(e){return Object.assign({name:e},t[e])})},e}(),e("ConnectionOptionsYmlReader",r)}}}),System.register("typeorm/connection/options-reader/ConnectionOptionsXmlReader",["typeorm/platform/PlatformTools"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.prototype.read=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.readXml(e)];case 1:return t=n.sent(),[2,t.connection.map(function(e){return{name:e.$.name,type:e.$.type,url:e.url?e.url[0]:void 0,host:e.host?e.host[0]:void 0,port:e.port&&e.port[0]?parseInt(e.port[0]):void 0,username:e.username?e.username[0]:void 0,password:e.password?e.password[0]:void 0,database:e.database?e.database[0]:void 0,sid:e.sid?e.sid[0]:void 0,extra:e.extra?e.extra[0]:void 0,synchronize:e.synchronize?e.synchronize[0]:void 0,entities:e.entities?e.entities[0].entity:[],subscribers:e.subscribers?e.subscribers[0].entity:[],entitySchemas:e.entitySchemas?e.entitySchemas[0].entity:[],logging:e.logging[0]?e.logging[0].split(","):void 0}})]}})})},e.prototype.readXml=function(e){var t=n.PlatformTools.load("xml2js").parseString,r={trim:!0,explicitRoot:!1};return new Promise(function(i,o){t(n.PlatformTools.readFileSync(e),r,function(e,t){return e?o(e):i(t)})})},e}(),e("ConnectionOptionsXmlReader",r)}}}),System.register("typeorm/connection/ConnectionOptionsReader",["typeorm/platform/PlatformTools","typeorm/connection/options-reader/ConnectionOptionsEnvReader","typeorm/connection/options-reader/ConnectionOptionsYmlReader","typeorm/connection/options-reader/ConnectionOptionsXmlReader"],function(e,t){"use strict";var n,r,i,o,a;t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){o=e}],execute:function(){a=function(){function e(e){this.options=e}return e.prototype.all=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.load()]})})},e.prototype.get=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.all()];case 1:if(t=r.sent(),!(n=t.find(function(t){return t.name===e||"default"===e&&!t.name})))throw new Error("Cannot find connection "+e+" because its not defined in any orm configuration files.");return[2,n]}})})},e.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var e,t,a,s=this;return __generator(this,function(u){switch(u.label){case 0:return"env"===(e=["env","js","json","yml","yaml","xml"].find(function(e){return n.PlatformTools.fileExist(s.baseFilePath+"."+e)}))?(t=n.PlatformTools.load("dotenv")).config({path:this.baseFilePath+".env"}):n.PlatformTools.fileExist(".env")&&(t=n.PlatformTools.load("dotenv")).config({path:".env"}),n.PlatformTools.getEnvVariable("TYPEORM_CONNECTION")?(a=(new r.ConnectionOptionsEnvReader).read(),[3,8]):[3,1];case 1:return"js"!==e?[3,2]:(a=n.PlatformTools.load(this.baseFilePath+".js"),[3,8]);case 2:return"json"!==e?[3,3]:(a=n.PlatformTools.load(this.baseFilePath+".json"),[3,8]);case 3:return"yml"!==e?[3,4]:(a=(new i.ConnectionOptionsYmlReader).read(this.baseFilePath+".yml"),[3,8]);case 4:return"yaml"!==e?[3,5]:(a=(new i.ConnectionOptionsYmlReader).read(this.baseFilePath+".yaml"),[3,8]);case 5:return"xml"!==e?[3,7]:[4,(new o.ConnectionOptionsXmlReader).read(this.baseFilePath+".xml")];case 6:return a=u.sent(),[3,8];case 7:throw new Error("No connection options were found in any of configurations file.");case 8:return[2,this.normalizeConnectionOptions(a)]}})})},e.prototype.normalizeConnectionOptions=function(e){var t=this;return e instanceof Array||(e=[e]),e.forEach(function(n){if(n.entities){var r=n.entities.map(function(e){return"string"==typeof e&&"/"!==e.substr(0,1)?t.baseFilePath+"/"+e:e});Object.assign(e,{entities:r})}if(n.subscribers){var i=n.subscribers.map(function(e){return"string"==typeof e&&"/"!==e.substr(0,1)?t.baseFilePath+"/"+e:e});Object.assign(e,{subscribers:i})}if(n.migrations){var o=n.migrations.map(function(e){return"string"==typeof e&&"/"!==e.substr(0,1)?t.baseFilePath+"/"+e:e});Object.assign(e,{migrations:o})}"sqlite"===n.type&&"string"==typeof n.database&&"/"!==n.database.substr(0,1)&&":memory:"!==n.database&&Object.assign(n,{database:t.baseDirectory+"/"+n.database})}),e},Object.defineProperty(e.prototype,"baseFilePath",{get:function(){return this.baseDirectory+"/"+this.baseConfigName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseDirectory",{get:function(){return this.options&&this.options.root?this.options.root:n.PlatformTools.load("app-root-path").path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseConfigName",{get:function(){return this.options&&this.options.configName?this.options.configName:"ormconfig"},enumerable:!0,configurable:!0}),e}(),e("ConnectionOptionsReader",a)}}}),System.register("typeorm/decorator/options/ColumnCommonOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/ColumnWithLengthOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/ColumnNumericOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/ColumnEnumOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/ColumnEmbeddedOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/columns/Column",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("Column",function(e,t){var r;return"string"==typeof e||e instanceof Function?r=e:e&&(t=e,r=e.type),function(i,o){if(e instanceof Function){var a=!((u=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",i,o):void 0)!==Array&&(!t||!0!==t.isArray&&!0!==t.array)),s={target:i.constructor,propertyName:o,isArray:a,prefix:t&&void 0!==t.prefix?t.prefix:void 0,type:e};n.getMetadataArgsStorage().embeddeds.push(s)}else{if(!r){var u=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",i,o):void 0;u&&(r=u)}t||(t={}),!t.type&&r&&(t=Object.assign({type:r},t)),s={target:i.constructor,propertyName:o,mode:"regular",options:t},n.getMetadataArgsStorage().columns.push(s)}}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/columns/CreateDateColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("CreateDateColumn",function(e){return function(t,r){e||(e={});var i={target:t.constructor,propertyName:r,mode:"createDate",options:e};n.getMetadataArgsStorage().columns.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/columns/DiscriminatorColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("DiscriminatorColumn",function(e){return function(t){var r={name:e.name,type:e.type},i={target:t,mode:"discriminator",propertyName:e.name,options:r};n.getMetadataArgsStorage().columns.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/options/PrimaryGeneratedColumnNumericOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/PrimaryGeneratedColumnUUIDOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/columns/PrimaryGeneratedColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("PrimaryGeneratedColumn",function(e,t){var r,i={};return e?("string"==typeof e&&(r=e),e instanceof Object&&(r="increment",Object.assign(i,e))):r="increment",t instanceof Object&&Object.assign(i,t),function(e,t){i.type||("increment"===r?Object.assign(i,{type:Number}):Object.assign(i,{type:"uuid"})),Object.assign(i,{primary:!0});var o={target:e.constructor,propertyName:t,mode:"regular",options:i};n.getMetadataArgsStorage().columns.push(o);var a={target:e.constructor,propertyName:t,strategy:r};n.getMetadataArgsStorage().generations.push(a)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/error/ColumnTypeUndefinedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="ColumnTypeUndefinedError",r.message="Column type for "+t.constructor.name+"#"+n+" is not defined or cannot be guessed. Try to explicitly provide a column type to the @Column decorator.",r}return __extends(t,e),t}(Error),e("ColumnTypeUndefinedError",n)}}}),System.register("typeorm/error/PrimaryColumnCannotBeNullableError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="PrimaryColumnCannotBeNullableError",r.message="Primary column "+t.constructor.name+"#"+n+" cannot be nullable. Its not allowed for primary keys. Try to remove nullable option.",r}return __extends(t,e),t}(Error),e("PrimaryColumnCannotBeNullableError",n)}}}),System.register("typeorm/decorator/columns/PrimaryColumn",["typeorm/error/ColumnTypeUndefinedError","typeorm/index","typeorm/error/PrimaryColumnCannotBeNullableError"],function(e,t){"use strict";t&&t.id;e("PrimaryColumn",function(e,t){var o;return"string"==typeof e?o=e:t=e,function(e,a){if(!o){var s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",e,a):void 0;s&&(o=s)}if(t||(t={}),!t.type&&o&&(t=Object.assign({type:o},t)),!t.type)throw new n.ColumnTypeUndefinedError(e,a);if(t.nullable)throw new i.PrimaryColumnCannotBeNullableError(e,a);t=Object.assign({primary:!0},t);var u={target:e.constructor,propertyName:a,mode:"regular",options:t};r.getMetadataArgsStorage().columns.push(u)}});var n,r,i;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){}}}),System.register("typeorm/decorator/columns/UpdateDateColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("UpdateDateColumn",function(e){return function(t,r){var i={target:t.constructor,propertyName:r,mode:"updateDate",options:e||{}};n.getMetadataArgsStorage().columns.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/columns/VersionColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("VersionColumn",function(e){return function(t,r){e||(e={});var i={target:t.constructor,propertyName:r,mode:"version",options:e};n.getMetadataArgsStorage().columns.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/columns/ObjectIdColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("ObjectIdColumn",function(e){return function(t,r){e||(e={}),e=Object.assign(e,{primary:!0,name:e.name?e.name:"_id"});var i={target:t.constructor,propertyName:r,mode:"objectId",options:e};n.getMetadataArgsStorage().columns.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/AfterInsert",["typeorm/index","typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";t&&t.id;e("AfterInsert",function(){return function(e,t){var i={target:e.constructor,propertyName:t,type:r.EventListenerTypes.AFTER_INSERT};n.getMetadataArgsStorage().entityListeners.push(i)}});var n,r;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/AfterLoad",["typeorm/index","typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";t&&t.id;e("AfterLoad",function(){return function(e,t){var i={target:e.constructor,propertyName:t,type:r.EventListenerTypes.AFTER_LOAD};n.getMetadataArgsStorage().entityListeners.push(i)}});var n,r;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/AfterRemove",["typeorm/index","typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";t&&t.id;e("AfterRemove",function(){return function(e,t){var i={target:e.constructor,propertyName:t,type:r.EventListenerTypes.AFTER_REMOVE};n.getMetadataArgsStorage().entityListeners.push(i)}});var n,r;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/AfterUpdate",["typeorm/index","typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";t&&t.id;e("AfterUpdate",function(){return function(e,t){var i={target:e.constructor,propertyName:t,type:r.EventListenerTypes.AFTER_UPDATE};n.getMetadataArgsStorage().entityListeners.push(i)}});var n,r;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/BeforeInsert",["typeorm/index","typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";t&&t.id;e("BeforeInsert",function(){return function(e,t){var i={target:e.constructor,propertyName:t,type:r.EventListenerTypes.BEFORE_INSERT};n.getMetadataArgsStorage().entityListeners.push(i)}});var n,r;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/BeforeRemove",["typeorm/index","typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";t&&t.id;e("BeforeRemove",function(){return function(e,t){var i={target:e.constructor,propertyName:t,type:r.EventListenerTypes.BEFORE_REMOVE};n.getMetadataArgsStorage().entityListeners.push(i)}});var n,r;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/BeforeUpdate",["typeorm/index","typeorm/metadata/types/EventListenerTypes"],function(e,t){"use strict";t&&t.id;e("BeforeUpdate",function(){return function(e,t){var i={target:e.constructor,propertyName:t,type:r.EventListenerTypes.BEFORE_UPDATE};n.getMetadataArgsStorage().entityListeners.push(i)}});var n,r;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){}}}),System.register("typeorm/decorator/listeners/EventSubscriber",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("EventSubscriber",function(){return function(e){var t={target:e};n.getMetadataArgsStorage().entitySubscribers.push(t)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/options/IndexOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/options/EntityOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}}),System.register("typeorm/decorator/relations/RelationCount",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("RelationCount",function(e,t,r){return function(i,o){var a={target:i.constructor,propertyName:o,relation:e,alias:t,queryBuilderFactory:r};n.getMetadataArgsStorage().relationCounts.push(a)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/relations/JoinColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("JoinColumn",function(e){return function(t,r){(e instanceof Array?e:[e||{}]).forEach(function(e){var i={target:t.constructor,propertyName:r,name:e.name,referencedColumnName:e.referencedColumnName};n.getMetadataArgsStorage().joinColumns.push(i)})}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/relations/JoinTable",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("JoinTable",function(e){return function(t,r){e=e||{};var i={target:t.constructor,propertyName:r,name:e.name,joinColumns:e&&e.joinColumn?[e.joinColumn]:e.joinColumns,inverseJoinColumns:e&&e.inverseJoinColumn?[e.inverseJoinColumn]:e.inverseJoinColumns,schema:e&&e.schema?e.schema:void 0,database:e&&e.database?e.database:void 0};n.getMetadataArgsStorage().joinTables.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/relations/ManyToMany",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("ManyToMany",function(e,t,r){var i;return"object"==typeof t?r=t:i=t,function(t,o){r||(r={});var a=!(!r||!0!==r.lazy);if(!a&&Reflect&&Reflect.getMetadata){var s=Reflect.getMetadata("design:type",t,o);s&&"string"==typeof s.name&&"promise"===s.name.toLowerCase()&&(a=!0)}var u={target:t.constructor,propertyName:o,relationType:"many-to-many",isLazy:a,type:e,inverseSideProperty:i,options:r};n.getMetadataArgsStorage().relations.push(u)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/relations/ManyToOne",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("ManyToOne",function(e,t,r){var i;return"object"==typeof t?r=t:i=t,function(t,o){r||(r={});var a=!(!r||!0!==r.lazy);if(!a&&Reflect&&Reflect.getMetadata){var s=Reflect.getMetadata("design:type",t,o);s&&"string"==typeof s.name&&"promise"===s.name.toLowerCase()&&(a=!0)}var u={target:t.constructor,propertyName:o,relationType:"many-to-one",isLazy:a,type:e,inverseSideProperty:i,options:r};n.getMetadataArgsStorage().relations.push(u)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/relations/OneToMany",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("OneToMany",function(e,t,r){return function(i,o){r||(r={});var a=!(!r||!0!==r.lazy);if(!a&&Reflect&&Reflect.getMetadata){var s=Reflect.getMetadata("design:type",i,o);s&&"string"==typeof s.name&&"promise"===s.name.toLowerCase()&&(a=!0)}var u={target:i.constructor,propertyName:o,isLazy:a,relationType:"one-to-many",type:e,inverseSideProperty:t,options:r};n.getMetadataArgsStorage().relations.push(u)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/relations/OneToOne",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("OneToOne",function(e,t,r){var i;return"object"==typeof t?r=t:i=t,function(t,o){r||(r={});var a=!(!r||!0!==r.lazy);if(!a&&Reflect&&Reflect.getMetadata){var s=Reflect.getMetadata("design:type",t,o);s&&"string"==typeof s.name&&"promise"===s.name.toLowerCase()&&(a=!0)}var u={target:t.constructor,propertyName:o,isLazy:a,relationType:"one-to-one",type:e,inverseSideProperty:i,options:r};n.getMetadataArgsStorage().relations.push(u)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/relations/RelationId",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("RelationId",function(e,t,r){return function(i,o){var a={target:i.constructor,propertyName:o,relation:e,alias:t,queryBuilderFactory:r};n.getMetadataArgsStorage().relationIds.push(a)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/entity/Entity",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("Entity",function(e,t){var r=("object"==typeof e?e:t)||{},i="string"==typeof e?e:r.name;return function(e){var t={target:e,name:i,type:"regular",orderBy:r&&r.orderBy?r.orderBy:void 0,engine:r&&r.engine?r.engine:void 0,database:r&&r.database?r.database:void 0,schema:r&&r.schema?r.schema:void 0,skipSync:!(!r||!0!==r.skipSync)};n.getMetadataArgsStorage().tables.push(t)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/entity/ClassEntityChild",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("ClassEntityChild",function(e,t){return function(r){var i={target:r,name:e,type:"class-table-child",orderBy:t&&t.orderBy?t.orderBy:void 0,skipSync:!(!t||!0!==t.skipSync)};n.getMetadataArgsStorage().tables.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/entity/ClosureEntity",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("ClosureEntity",function(e,t){return function(r){var i={target:r,name:e,type:"closure",orderBy:t&&t.orderBy?t.orderBy:void 0,skipSync:!(!t||!0!==t.skipSync)};n.getMetadataArgsStorage().tables.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/entity/SingleEntityChild",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("SingleEntityChild",function(){return function(e){var t={target:e,name:void 0,type:"single-table-child",orderBy:void 0};n.getMetadataArgsStorage().tables.push(t)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/entity/TableInheritance",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("TableInheritance",function(e){return function(t){var r={target:t,type:e};n.getMetadataArgsStorage().inheritances.push(r)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/transaction/Transaction",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("Transaction",function(e){return void 0===e&&(e="default"),function(t,r,i){var o=i.value;i.value=function(){for(var i=this,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.getConnection(e).manager.transaction(function(e){var s,u=n.getMetadataArgsStorage().filterTransactionEntityManagers(t.constructor).filter(function(e){return e.methodName===r}),c=n.getMetadataArgsStorage().filterTransactionRepository(t.constructor).filter(function(e){return e.methodName===r});return u.length>0?(s=a.slice(),u.forEach(function(t){s.splice(t.index,0,e)})):s=0===c.length?[e].concat(a):a.slice(),c.forEach(function(t){var r;switch(t.repositoryType){case n.Repository:r=e.getRepository(t.entityType);break;case n.MongoRepository:r=e.getMongoRepository(t.entityType);break;case n.TreeRepository:r=e.getTreeRepository(t.entityType);break;default:r=e.getCustomRepository(t.repositoryType)}s.splice(t.index,0,r)}),o.apply(i,s)})}}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/transaction/TransactionManager",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("TransactionManager",function(){return function(e,t,r){var i={target:e.constructor,methodName:t,index:r};n.getMetadataArgsStorage().transactionEntityManagers.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/transaction/TransactionRepository",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("TransactionRepository",function(e){return function(t,r,i){var o;try{o=Reflect.getOwnMetadata("design:paramtypes",t,r)[i]}catch(e){throw new Error('Cannot get reflected type for a "'+r+"\" method's parameter of "+t.constructor.name+' class. Make sure you have turned on an "emitDecoratorMetadata": true, option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application.')}var a={target:t.constructor,methodName:r,index:i,repositoryType:o,entityType:e};n.getMetadataArgsStorage().transactionRepositories.push(a)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/tree/TreeLevelColumn",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("TreeLevelColumn",function(){return function(e,t){var r={target:e.constructor,propertyName:t,mode:"treeLevel",options:{}};n.getMetadataArgsStorage().columns.push(r)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/tree/TreeParent",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("TreeParent",function(e){return function(t,r){e||(e={});var i=!(!e||!0!==e.lazy);if(!i&&Reflect&&Reflect.getMetadata){var o=Reflect.getMetadata("design:type",t,r);o&&"string"==typeof o.name&&"promise"===o.name.toLowerCase()&&(i=!0)}var a={isTreeParent:!0,target:t.constructor,propertyName:r,isLazy:i,relationType:"many-to-one",type:function(){return t.constructor},options:e};n.getMetadataArgsStorage().relations.push(a)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/tree/TreeChildren",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("TreeChildren",function(e){return function(t,r){e||(e={});var i=!(!e||!0!==e.lazy);if(!i&&Reflect&&Reflect.getMetadata){var o=Reflect.getMetadata("design:type",t,r);o&&"string"==typeof o.name&&"promise"===o.name.toLowerCase()&&(i=!0)}var a={isTreeChildren:!0,target:t.constructor,propertyName:r,isLazy:i,relationType:"one-to-many",type:function(){return t.constructor},options:e};n.getMetadataArgsStorage().relations.push(a)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/Index",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("Index",function(e,t,r){var i="string"==typeof e?e:void 0,o="string"==typeof e?t:e,a="object"!=typeof e||Array.isArray(e)?r:e;return a||(a="object"!=typeof t||Array.isArray(t)?r:t),function(e,t){var r={target:t?e.constructor:e,name:i,columns:t?[t]:o,unique:!(!a||!a.unique),sparse:!(!a||!a.sparse)};n.getMetadataArgsStorage().indices.push(r)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/Generated",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("Generated",function(e){return void 0===e&&(e="increment"),function(t,r){var i={target:t.constructor,propertyName:r,strategy:e};n.getMetadataArgsStorage().generations.push(i)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/DiscriminatorValue",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("DiscriminatorValue",function(e){return function(t){var r={target:t,value:e};n.getMetadataArgsStorage().discriminatorValues.push(r)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/decorator/EntityRepository",["typeorm/index"],function(e,t){"use strict";t&&t.id;e("EntityRepository",function(e){return function(t){var r={target:t,entity:e};n.getMetadataArgsStorage().entityRepositories.push(r)}});var n;return{setters:[function(e){n=e}],execute:function(){}}}),System.register("typeorm/repository/BaseEntity",["typeorm/index"],function(e,t){"use strict";var n,r;t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.prototype.hasId=function(){return this.constructor.getRepository().hasId(this)},e.prototype.save=function(){return this.constructor.getRepository().save(this)},e.prototype.remove=function(){return this.constructor.getRepository().remove(this)},e.useConnection=function(e){this.usedConnection=e},e.getRepository=function(){return(this.usedConnection||n.getConnection()).getRepository(this)},Object.defineProperty(e,"target",{get:function(){return this.getRepository().target},enumerable:!0,configurable:!0}),e.hasId=function(e){return this.getRepository().hasId(e)},e.getId=function(e){return this.getRepository().getId(e)},e.createQueryBuilder=function(e){return this.getRepository().createQueryBuilder(e)},e.create=function(e){return this.getRepository().create(e)},e.merge=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return(r=this.getRepository()).merge.apply(r,[e].concat(t));var r},e.preload=function(e){return this.getRepository().preload(e)},e.save=function(e,t){return this.getRepository().save(e,t)},e.update=function(e,t,n){return this.getRepository().update(e,t,n)},e.updateById=function(e,t,n){return this.getRepository().updateById(e,t,n)},e.remove=function(e,t){return this.getRepository().remove(e,t)},e.removeById=function(e,t){return this.getRepository().deleteById(e,t)},e.count=function(e){return this.getRepository().count(e)},e.find=function(e){return this.getRepository().find(e)},e.findAndCount=function(e){return this.getRepository().findAndCount(e)},e.findByIds=function(e,t){return this.getRepository().findByIds(e,t)},e.findOne=function(e){return this.getRepository().findOne(e)},e.findOneById=function(e,t){return this.getRepository().findOneById(e,t)},e.query=function(e,t){return this.getRepository().query(e,t)},e.clear=function(){return this.getRepository().clear()},e}(),e("BaseEntity",r)}}}),System.register("typeorm/index",["typeorm/connection/ConnectionManager","typeorm/metadata-args/MetadataArgsStorage","typeorm/container","typeorm/platform/PlatformTools","typeorm/connection/ConnectionOptionsReader","typeorm/util/PromiseUtils","typeorm/error/QueryFailedError","typeorm/decorator/columns/Column","typeorm/decorator/columns/CreateDateColumn","typeorm/decorator/columns/DiscriminatorColumn","typeorm/decorator/columns/PrimaryGeneratedColumn","typeorm/decorator/columns/PrimaryColumn","typeorm/decorator/columns/UpdateDateColumn","typeorm/decorator/columns/VersionColumn","typeorm/decorator/columns/ObjectIdColumn","typeorm/decorator/listeners/AfterInsert","typeorm/decorator/listeners/AfterLoad","typeorm/decorator/listeners/AfterRemove","typeorm/decorator/listeners/AfterUpdate","typeorm/decorator/listeners/BeforeInsert","typeorm/decorator/listeners/BeforeRemove","typeorm/decorator/listeners/BeforeUpdate","typeorm/decorator/listeners/EventSubscriber","typeorm/decorator/relations/RelationCount","typeorm/decorator/relations/JoinColumn","typeorm/decorator/relations/JoinTable","typeorm/decorator/relations/ManyToMany","typeorm/decorator/relations/ManyToOne","typeorm/decorator/relations/OneToMany","typeorm/decorator/relations/OneToOne","typeorm/decorator/relations/RelationId","typeorm/decorator/entity/Entity","typeorm/decorator/entity/ClassEntityChild","typeorm/decorator/entity/ClosureEntity","typeorm/decorator/entity/SingleEntityChild","typeorm/decorator/entity/TableInheritance","typeorm/decorator/transaction/Transaction","typeorm/decorator/transaction/TransactionManager","typeorm/decorator/transaction/TransactionRepository","typeorm/decorator/tree/TreeLevelColumn","typeorm/decorator/tree/TreeParent","typeorm/decorator/tree/TreeChildren","typeorm/decorator/Index","typeorm/decorator/Generated","typeorm/decorator/DiscriminatorValue","typeorm/decorator/EntityRepository","typeorm/logger/AdvancedConsoleLogger","typeorm/logger/SimpleConsoleLogger","typeorm/logger/FileLogger","typeorm/metadata/EntityMetadataUtils","typeorm/entity-manager/EntityManager","typeorm/repository/AbstractRepository","typeorm/repository/Repository","typeorm/repository/BaseEntity","typeorm/repository/TreeRepository","typeorm/repository/MongoRepository","typeorm/schema-builder/schema/TableColumn","typeorm/schema-builder/schema/TableForeignKey","typeorm/schema-builder/schema/TableIndex","typeorm/schema-builder/schema/TablePrimaryKey","typeorm/schema-builder/schema/Table","typeorm/driver/mongodb/typings","typeorm/driver/sqlserver/MssqlParameter","typeorm/connection/Connection","typeorm/query-builder/QueryBuilder","typeorm/query-builder/SelectQueryBuilder","typeorm/query-builder/DeleteQueryBuilder","typeorm/query-builder/InsertQueryBuilder","typeorm/query-builder/UpdateQueryBuilder","typeorm/query-builder/RelationQueryBuilder","typeorm/query-builder/Brackets","typeorm/entity-manager/MongoEntityManager","typeorm/naming-strategy/DefaultNamingStrategy"],function(e,t){"use strict";function n(e){return void 0===e&&(e="default"),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,(new c.ConnectionOptionsReader).get(e)]})})}function r(){return s.getFromContainer(o.ConnectionManager)}function i(t){var n={};for(var r in t)"default"===r||p.hasOwnProperty(r)||(n[r]=t[r]);e(n)}t&&t.id;e("getMetadataArgsStorage",function(){var e=u.PlatformTools.getGlobalVariable();return e.typeormMetadataArgsStorage||(e.typeormMetadataArgsStorage=new a.MetadataArgsStorage),e.typeormMetadataArgsStorage}),e("getConnectionOptions",n),e("getConnectionManager",r),e("createConnection",function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return e?[3,2]:[4,n()];case 1:e=t.sent(),t.label=2;case 2:return[2,r().create(e).connect()]}})})}),e("createConnections",function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return e?[3,2]:[4,(new c.ConnectionOptionsReader).all()];case 1:e=n.sent(),n.label=2;case 2:return t=e.map(function(e){return r().create(e)}),[2,l.PromiseUtils.runInSequence(t,function(e){return e.connect()})]}})})}),e("getConnection",function(e){return void 0===e&&(e="default"),r().get(e)}),e("getManager",function(e){return void 0===e&&(e="default"),r().get(e).manager}),e("getMongoManager",function(e){return void 0===e&&(e="default"),r().get(e).manager}),e("getSqljsManager",function(e){return void 0===e&&(e="default"),r().get(e).manager}),e("getRepository",function(e,t){return void 0===t&&(t="default"),r().get(t).getRepository(e)}),e("getTreeRepository",function(e,t){return void 0===t&&(t="default"),r().get(t).getTreeRepository(e)}),e("getCustomRepository",function(e,t){return void 0===t&&(t="default"),r().get(t).getCustomRepository(e)}),e("getMongoRepository",function(e,t){return void 0===t&&(t="default"),r().get(t).getMongoRepository(e)});var o,a,s,u,c,l,p={getMetadataArgsStorage:!0,getConnectionOptions:!0,getConnectionManager:!0,createConnection:!0,createConnections:!0,getConnection:!0,getManager:!0,getMongoManager:!0,getSqljsManager:!0,getRepository:!0,getTreeRepository:!0,getCustomRepository:!0,getMongoRepository:!0,ConnectionOptionsReader:!0,Connection:!0,ConnectionManager:!0,QueryBuilder:!0,SelectQueryBuilder:!0,DeleteQueryBuilder:!0,InsertQueryBuilder:!0,UpdateQueryBuilder:!0,RelationQueryBuilder:!0,Brackets:!0,EntityManager:!0,MongoEntityManager:!0,DefaultNamingStrategy:!0,Repository:!0,TreeRepository:!0,MongoRepository:!0,BaseEntity:!0,PromiseUtils:!0};return{setters:[function(t){o=t,e({ConnectionManager:t.ConnectionManager})},function(e){a=e},function(e){s=e,i(e)},function(e){u=e},function(t){c=t,e({ConnectionOptionsReader:t.ConnectionOptionsReader})},function(t){l=t,e({PromiseUtils:t.PromiseUtils})},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e),i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(t){i(t),e({EntityManager:t.EntityManager})},function(e){i(e)},function(t){i(t),e({Repository:t.Repository})},function(t){i(t),e({BaseEntity:t.BaseEntity})},function(t){i(t),e({TreeRepository:t.TreeRepository})},function(t){i(t),e({MongoRepository:t.MongoRepository})},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(e){i(e)},function(t){e({Connection:t.Connection})},function(t){e({QueryBuilder:t.QueryBuilder})},function(t){e({SelectQueryBuilder:t.SelectQueryBuilder})},function(t){e({DeleteQueryBuilder:t.DeleteQueryBuilder})},function(t){e({InsertQueryBuilder:t.InsertQueryBuilder})},function(t){e({UpdateQueryBuilder:t.UpdateQueryBuilder})},function(t){e({RelationQueryBuilder:t.RelationQueryBuilder})},function(t){e({Brackets:t.Brackets})},function(t){e({MongoEntityManager:t.MongoEntityManager})},function(t){e({DefaultNamingStrategy:t.DefaultNamingStrategy})}],execute:function(){}}}),System.register("typeorm",["typeorm/index"],function(e,t){"use strict";function n(t){var n={};for(var r in t)"default"!==r&&(n[r]=t[r]);e(n)}t&&t.id;return{setters:[function(e){n(e)}],execute:function(){}}}),System.register("typeorm/error/CannotGetEntityManagerNotConnectedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="CannotGetEntityManagerNotConnectedError",n.message='Cannot get entity manager for "'+t+'" connection because connection is not yet established.',n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("CannotGetEntityManagerNotConnectedError",n)}}}),System.register("typeorm/error/CascadesNotAllowedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n,r){var i=e.call(this)||this;return i.name="CascadesNotAllowedError",i.message="Cascades ("+t+") are not allowed for the given relation "+n.name+"#"+r.joinColumns[0].referencedColumn.databaseName,i}return __extends(t,e),t}(Error),e("CascadesNotAllowedError",n)}}}),System.register("typeorm/error/CustomRepositoryReusedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this,"Custom entity repository "+(t instanceof Function?t.name:t.constructor.name)+" was already used in the different connection. You can't share entity repositories between different connections when useContainer is set to true for the entity repository.")||this;return n.name="CustomRepositoryReusedError",n}return __extends(t,e),t}(Error),e("CustomRepositoryReusedError",n)}}}),System.register("typeorm/error/GeneratedOnlyForPrimaryError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="GeneratedOnlyForPrimaryError",r.message="Column for property "+t.constructor.name+"#"+n+" cannot have a generated value. Generated values supports only in PrimaryColumn decorator or UUID column type.",r}return __extends(t,e),t}(Error),e("GeneratedOnlyForPrimaryError",n)}}}),System.register("typeorm/error/MetadataAlreadyExistsError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n,r){var i=e.call(this)||this;return i.name="MetadataAlreadyExistsError",i.message=t+" metadata already exists for the class constructor "+JSON.stringify(n)+(r?" on property "+r:". If you previously renamed or moved entity class, make sure that compiled version of old entity class source wasn't left in the compiler output directory."),i}return __extends(t,e),t}(Error),e("MetadataAlreadyExistsError",n)}}}),System.register("typeorm/error/MetadataWithSuchNameAlreadyExistsError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="MetadataWithSuchNameAlreadyExistsError",r.message=t+" metadata with such name "+n+" already exists. Do you apply decorator twice? Or maybe try to change a name?",r}return __extends(t,e),t}(Error),e("MetadataWithSuchNameAlreadyExistsError",n)}}}),System.register("typeorm/error/MissingJoinColumnError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="MissingJoinColumnError",n.inverseRelation?r.message="JoinColumn is missing on both sides of "+t.name+"#"+n.propertyName+" and "+n.inverseEntityMetadata.name+"#"+n.inverseRelation.propertyName+" one-to-one relationship. You need to put JoinColumn decorator on one of the sides.":r.message="JoinColumn is missing on "+t.name+"#"+n.propertyName+" one-to-one relationship. You need to put JoinColumn decorator on it.",r}return __extends(t,e),t}(Error),e("MissingJoinColumnError",n)}}}),System.register("typeorm/error/MissingJoinTableError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="MissingJoinTableError",n.inverseRelation?r.message="JoinTable is missing on both sides of "+t.name+"#"+n.propertyName+" and "+n.inverseEntityMetadata.name+"#"+n.inverseRelation.propertyName+" many-to-many relationship. You need to put decorator decorator on one of the sides.":r.message="JoinTable is missing on "+t.name+"#"+n.propertyName+" many-to-many relationship. You need to put JoinTable decorator on it.",r}return __extends(t,e),t}(Error),e("MissingJoinTableError",n)}}}),System.register("typeorm/error/NamingStrategyNotFoundError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;r.name="NamingStrategyNotFoundError";var i=t instanceof Function?t.name:t;return r.message='Naming strategy "'+i+'" was not found. Looks like this naming strategy does not exist or it was not registered in current "'+n+'" connection?',r.stack=(new Error).stack,r}return __extends(t,e),t}(Error),e("NamingStrategyNotFoundError",n)}}}),System.register("typeorm/error/NoConnectionForRepositoryError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t){var n=e.call(this)||this;return n.name="NoConnectionForRepositoryError",n.message='Cannot get a Repository for "'+t+" connection, because connection with the database is not established yet. Call connection#connect method to establish connection.",n.stack=(new Error).stack,n}return __extends(t,e),t}(Error),e("NoConnectionForRepositoryError",n)}}}),System.register("typeorm/error/PersistedEntityNotFoundError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(){var t=e.call(this)||this;return t.name="PersistedEntityNotFoundError",t.message="Internal error. Persisted entity was not found in the list of prepared operated entities.",t}return __extends(t,e),t}(Error),e("PersistedEntityNotFoundError",n)}}}),System.register("typeorm/error/UsingJoinColumnIsNotAllowedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="UsingJoinColumnIsNotAllowedError",r.message="Using JoinColumn on "+t.name+"#"+n.propertyName+" is wrong. You can use JoinColumn only on one-to-one and many-to-one relations.",r}return __extends(t,e),t}(Error),e("UsingJoinColumnIsNotAllowedError",n)}}}),System.register("typeorm/error/UsingJoinColumnOnlyOnOneSideAllowedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="UsingJoinColumnOnlyOnOneSideAllowedError",r.message="Using JoinColumn is allowed only on one side of the one-to-one relationship. Both "+t.name+"#"+n.propertyName+" and "+n.inverseEntityMetadata.name+"#"+n.inverseRelation.propertyName+" has JoinTable decorators. Choose one of them and left JoinTable decorator only on it.",r}return __extends(t,e),t}(Error),e("UsingJoinColumnOnlyOnOneSideAllowedError",n)}}}),System.register("typeorm/error/UsingJoinTableIsNotAllowedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="UsingJoinTableIsNotAllowedError",r.message="Using JoinTable on "+t.name+"#"+n.propertyName+" is wrong. "+t.name+"#"+n.propertyName+" has "+n.relationType+" relation, however you can use JoinTable only on many-to-many relations.",r}return __extends(t,e),t}(Error),e("UsingJoinTableIsNotAllowedError",n)}}}),System.register("typeorm/error/UsingJoinTableOnlyOnOneSideAllowedError",[],function(e,t){"use strict";var n;t&&t.id;return{setters:[],execute:function(){n=function(e){function t(t,n){var r=e.call(this)||this;return r.name="UsingJoinTableOnlyOnOneSideAllowedError",r.message="Using JoinTable is allowed only on one side of the many-to-many relationship. Both "+t.name+"#"+n.propertyName+" and "+n.inverseEntityMetadata.name+"#"+n.inverseRelation.propertyName+" has JoinTable decorators. Choose one of them and left JoinColumn decorator only on it.",r}return __extends(t,e),t}(Error),e("UsingJoinTableOnlyOnOneSideAllowedError",n)}}}),System.register("typeorm/query-builder/JoinOptions",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){}}});
##############################################
/src/cache/RedisQueryResultCache.js-110-                        return fail(err);
/src/cache/RedisQueryResultCache.js:111:                    ok(JSON.parse(result));
/src/cache/RedisQueryResultCache.js-112-                });
##############################################
/src/cache/RedisQueryResultCache.js-117-                        return fail(err);
/src/cache/RedisQueryResultCache.js:118:                    ok(JSON.parse(result));
/src/cache/RedisQueryResultCache.js-119-                });
##############################################
/src/cache/RedisQueryResultCache.js.map:1:{"version":3,"sources":["../../src/cache/RedisQueryResultCache.ts"],"names":[],"mappings":"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","file":"RedisQueryResultCache.js","sourcesContent":["import {QueryResultCache} from \"./QueryResultCache\";\nimport {QueryResultCacheOptions} from \"./QueryResultCacheOptions\";\nimport {PlatformTools} from \"../platform/PlatformTools\";\nimport {Connection} from \"../connection/Connection\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\n\n/**\n * Caches query result into Redis database.\n */\nexport class RedisQueryResultCache implements QueryResultCache {\n\n    // -------------------------------------------------------------------------\n    // Protected Properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Redis module instance loaded dynamically.\n     */\n    protected redis: any;\n\n    /**\n     * Connected redis client.\n     */\n    protected client: any;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(protected connection: Connection) {\n        this.redis = this.loadRedis();\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    async connect(): Promise<void> {\n        const cacheOptions: any = this.connection.options.cache;\n        if (cacheOptions && cacheOptions.options) {\n            this.client = this.redis.createClient(cacheOptions.options);\n        } else {\n            this.client = this.redis.createClient();\n        }\n    }\n\n    /**\n     * Creates a connection with given cache provider.\n     */\n    async disconnect(): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.quit((err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n                this.client = undefined;\n            });\n        });\n    }\n\n    /**\n     * Creates table for storing cache if it does not exist yet.\n     */\n    async synchronize(queryRunner: QueryRunner): Promise<void> {\n    }\n\n    /**\n     * Caches given query result.\n     * Returns cache result if found.\n     * Returns undefined if result is not cached.\n     */\n    getFromCache(options: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<QueryResultCacheOptions|undefined> {\n        return new Promise((ok, fail) => {\n\n            if (options.identifier) {\n                this.client.get(options.identifier, (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok(JSON.parse(result));\n                });\n\n            } else if (options.query) {\n                this.client.get(options.query, (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok(JSON.parse(result));\n                });\n\n            } else {\n                ok(undefined);\n            }\n        });\n    }\n\n    /**\n     * Checks if cache is expired or not.\n     */\n    isExpired(savedCache: QueryResultCacheOptions): boolean {\n        return (savedCache.time! + savedCache.duration) < new Date().getTime();\n    }\n\n    /**\n     * Stores given query result in the cache.\n     */\n    async storeInCache(options: QueryResultCacheOptions, savedCache: QueryResultCacheOptions, queryRunner?: QueryRunner): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            if (options.identifier) {\n                this.client.set(options.identifier, JSON.stringify(options), (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok();\n                });\n\n            } else if (options.query) {\n                this.client.set(options.query, JSON.stringify(options), (err: any, result: any) => {\n                    if (err) return fail(err);\n                    ok();\n                });\n            }\n        });\n    }\n\n    /**\n     * Clears everything stored in the cache.\n     */\n    async clear(queryRunner?: QueryRunner): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.flushdb((err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Removes all cached results by given identifiers from cache.\n     */\n    async remove(identifiers: string[], queryRunner?: QueryRunner): Promise<void> {\n        await Promise.all(identifiers.map(identifier => {\n            return this.deleteKey(identifier);\n        }));\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Removes a single key from redis database.\n     */\n    protected deleteKey(key: string): Promise<void> {\n        return new Promise<void>((ok, fail) => {\n            this.client.del(key, (err: any, result: any) => {\n                if (err) return fail(err);\n                ok();\n            });\n        });\n    }\n\n    /**\n     * Loads redis dependency.\n     */\n    protected loadRedis(): any {\n        try {\n            return PlatformTools.load(\"redis\");\n\n        } catch (e) {\n            throw new Error(`Cannot use cache because redis is not installed. Please run \"npm i redis --save\".`);\n        }\n    }\n\n\n}"],"sourceRoot":".."}
##############################################
/src/util/DateUtils.js.map:1:{"version":3,"sources":["../../src/util/DateUtils.ts"],"names":[],"mappings":";;AAAA;;GAEG;AACH;IAAA;IA6MA,CAAC;IA3MG,4EAA4E;IAC5E,wBAAwB;IACxB,4EAA4E;IAE5E;;OAEG;IACI,+BAAqB,GAA5B,UAA6B,SAAgC;QACzD,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;YACX,MAAM,CAAC,SAAS,CAAC;QAErB,IAAM,IAAI,GAAG,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAiB,CAAC;QACrF,wBAAwB;QAExB,0EAA0E;QAC1E,+GAA+G;QAE/G,IAAM,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;QACjC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QAClF,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;QACzG,MAAM,CAAC,aAAa,CAAC;QACrB,IAAI;QACJ,eAAe;IACnB,CAAC;IAED;;OAEG;IACI,+BAAqB,GAA5B,UAA6B,KAAe;QACxC,EAAE,CAAC,CAAC,KAAK,YAAY,IAAI,CAAC;YACtB,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAElK,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,yBAAe,GAAtB,UAAuB,SAAsB,EAAE,KAAsB,EAAE,eAAsB;QAA9C,sBAAA,EAAA,aAAsB;QAAE,gCAAA,EAAA,sBAAsB;QACzF,IAAI,IAAI,GAAG,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAE3E,EAAE,CAAC,CAAC,KAAK,CAAC;YACN,IAAI,GAAG,IAAI,IAAI,CACX,IAAI,CAAC,cAAc,EAAE,EACrB,IAAI,CAAC,WAAW,EAAE,EAClB,IAAI,CAAC,UAAU,EAAE,EACjB,IAAI,CAAC,WAAW,EAAE,EAClB,IAAI,CAAC,aAAa,EAAE,EACpB,IAAI,CAAC,aAAa,EAAE,EACpB,IAAI,CAAC,kBAAkB,EAAE,CAC5B,CAAC;QAEN,EAAE,CAAC,CAAC,CAAC,eAAe,CAAC;YACjB,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;QAE/B,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;OAEG;IACI,+BAAqB,GAA5B,UAA6B,KAAe,EAAE,WAA4B;QAA5B,4BAAA,EAAA,mBAA4B;QACtE,EAAE,CAAC,CAAC,KAAK,YAAY,IAAI,CAAC;YACtB,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;gBAC7C,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;gBAClD,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QAEjF,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,yBAAe,GAAtB,UAAuB,KAAe;QAClC,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YACtB,IAAA,qBAA4C,EAA3C,aAAK,EAAE,eAAO,EAAE,eAAO,CAAqB;YACnD,IAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;YACxB,EAAE,CAAC,CAAC,KAAK,CAAC;gBACN,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,OAAO,CAAC;gBACR,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,OAAO,CAAC;gBACR,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;YACvC,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,2BAAiB,GAAxB,UAAyB,KAAiB,EAAE,WAA4B;QAA5B,4BAAA,EAAA,mBAA4B;QACpE,KAAK,GAAG,KAAK,YAAY,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,GAAG,GAAG,KAAK,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QACvI,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC5B,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;iBAClB,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAA5B,CAA4B,CAAC,CAAC,+DAA+D;iBACtG,IAAI,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,mCAAyB,GAAhC,UAAiC,KAAe;QAC5C,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC5B,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC;QACD,EAAE,CAAC,CAAC,KAAK,YAAY,IAAI,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,GAAG,GAAG;gBACtD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG;gBACpD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,GAAG,GAAG;gBAC/C,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,GAAG,GAAG;gBAChD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,GAAG,GAAG;gBAClD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,GAAG,GAAG;gBAClD,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,sCAA4B,GAAnC,UAAoC,KAAe;QAC/C,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC5B,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC;QACD,EAAE,CAAC,CAAC,KAAK,YAAY,IAAI,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,GAAG,GAAG;gBACzD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG;gBACvD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,GAAG,GAAG;gBAClD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,GAAG,GAAG;gBACnD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC,GAAG,GAAG;gBACrD,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC,GAAG,GAAG;gBACrD,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,6BAAmB,GAA1B,UAA2B,KAAgB;QACvC,EAAE,CAAC,CAAC,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC;YACzB,MAAM,CAAE,KAAe;iBAClB,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,MAAM,CAAC,CAAC,CAAC,EAAT,CAAS,CAAC;iBACnB,IAAI,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,6BAAmB,GAA1B,UAA2B,KAAiB;QACxC,EAAE,CAAC,CAAC,KAAK,YAAY,MAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YACvD,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACnB,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,MAAM,CAAC,EAAE,CAAC;YACd,CAAC;QACL,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAEM,4BAAkB,GAAzB,UAA0B,KAAU;QAChC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC;IAEM,4BAAkB,GAAzB,UAA0B,KAAa;QACnC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAC7B,CAAC;IAED,4EAA4E;IAC5E,yBAAyB;IACzB,4EAA4E;IAE5E;;OAEG;IACY,6BAAmB,GAAlC,UAAmC,KAAa;QAC5C,EAAE,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YACX,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC;QAEvB,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC;IAED;;OAEG;IACY,4BAAkB,GAAjC,UAAkC,KAAa;QAC3C,EAAE,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC;YACZ,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC;QAEvB,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC;IAEL,gBAAC;AAAD,CA7MA,AA6MC,IAAA;AA7MY,8BAAS","file":"DateUtils.js","sourcesContent":["/**\n * Provides utilities to transform hydrated and persisted data.\n */\nexport class DateUtils {\n\n    // -------------------------------------------------------------------------\n    // Public Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Normalizes date object hydrated from the database.\n     */\n    static normalizeHydratedDate(mixedDate: Date|string|undefined): Date|string|undefined {\n        if (!mixedDate)\n            return mixedDate;\n\n        const date = typeof mixedDate === \"string\" ? new Date(mixedDate) : mixedDate as Date;\n        // if (!storedInLocal) {\n\n        // else if it was not stored in local timezone, means it was stored in UTC\n        // because driver hydrates it with timezone applied why we need to add timezone hours to match a local timezone\n\n        const correctedDate = new Date();\n        correctedDate.setUTCFullYear(date.getFullYear(), date.getMonth(), date.getDate());\n        correctedDate.setUTCHours(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n        return correctedDate;\n        // }\n        // return date;\n    }\n\n    /**\n     * Converts given value into date string in a \"YYYY-MM-DD\" format.\n     */\n    static mixedDateToDateString(value: Date|any): string|any {\n        if (value instanceof Date)\n            return this.formatZerolessValue(value.getFullYear()) + \"-\" + this.formatZerolessValue(value.getMonth() + 1) + \"-\" + this.formatZerolessValue(value.getDate());\n\n        return value;\n    }\n\n    /**\n     * Converts given value into date object.\n     */\n    static mixedDateToDate(mixedDate: Date|string, toUtc: boolean = false, useMilliseconds = true): Date {\n        let date = typeof mixedDate === \"string\" ? new Date(mixedDate) : mixedDate;\n\n        if (toUtc)\n            date = new Date(\n                date.getUTCFullYear(),\n                date.getUTCMonth(),\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds(),\n                date.getUTCMilliseconds()\n            );\n\n        if (!useMilliseconds)\n            date.setUTCMilliseconds(0);\n\n        return date;\n    }\n\n    /**\n     * Converts given value into time string in a \"HH:mm:ss\" format.\n     */\n    static mixedDateToTimeString(value: Date|any, skipSeconds: boolean = false): string|any {\n        if (value instanceof Date)\n            return this.formatZerolessValue(value.getHours()) +\n                \":\" + this.formatZerolessValue(value.getMinutes()) +\n                (!skipSeconds ? \":\" + this.formatZerolessValue(value.getSeconds()) : \"\");\n\n        return value;\n    }\n\n    /**\n     * Converts given value into time string in a \"HH:mm:ss\" format.\n     */\n    static mixedTimeToDate(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            const [hours, minutes, seconds] = value.split(\":\");\n            const date = new Date();\n            if (hours)\n                date.setHours(parseInt(hours));\n            if (minutes)\n                date.setMinutes(parseInt(minutes));\n            if (seconds)\n                date.setSeconds(parseInt(seconds));\n            return date;\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given string value with \"-\" separator into a \"HH:mm:ss\" format.\n     */\n    static mixedTimeToString(value: string|any, skipSeconds: boolean = false): string|any {\n        value = value instanceof Date ? (value.getHours() + \":\" + value.getMinutes() + (!skipSeconds ? \":\" + value.getSeconds() : \"\")) : value;\n        if (typeof value === \"string\") {\n            return value.split(\":\")\n                .map(v => v.length === 1 ? \"0\" + v : v) // append zero at beginning if we have a first-zero-less number\n                .join(\":\");\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given value into datetime string in a \"YYYY-MM-DD HH-mm-ss\" format.\n     */\n    static mixedDateToDatetimeString(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            value = new Date(value);\n        }\n        if (value instanceof Date) {\n            return this.formatZerolessValue(value.getFullYear()) + \"-\" +\n                this.formatZerolessValue(value.getMonth() + 1) + \"-\" +\n                this.formatZerolessValue(value.getDate()) + \" \" +\n                this.formatZerolessValue(value.getHours()) + \":\" +\n                this.formatZerolessValue(value.getMinutes()) + \":\" +\n                this.formatZerolessValue(value.getSeconds()) + \".\" +\n                this.formatMilliseconds(value.getUTCMilliseconds());\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given value into utc datetime string in a \"YYYY-MM-DD HH-mm-ss\" format.\n     */\n    static mixedDateToUtcDatetimeString(value: Date|any): string|any {\n        if (typeof value === \"string\") {\n            value = new Date(value);\n        }\n        if (value instanceof Date) {\n            return this.formatZerolessValue(value.getUTCFullYear()) + \"-\" +\n                this.formatZerolessValue(value.getUTCMonth() + 1) + \"-\" +\n                this.formatZerolessValue(value.getUTCDate()) + \" \" +\n                this.formatZerolessValue(value.getUTCHours()) + \":\" +\n                this.formatZerolessValue(value.getUTCMinutes()) + \":\" +\n                this.formatZerolessValue(value.getUTCSeconds()) + \".\" +\n                this.formatMilliseconds(value.getUTCMilliseconds());\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts each item in the given array to string joined by \",\" separator.\n     */\n    static simpleArrayToString(value: any[]|any): string[]|any {\n        if (value instanceof Array) {\n            return (value as any[])\n                .map(i => String(i))\n                .join(\",\");\n        }\n\n        return value;\n    }\n\n    /**\n     * Converts given string to simple array split by \",\" separator.\n     */\n    static stringToSimpleArray(value: string|any): string|any {\n        if (value instanceof String || typeof value === \"string\") {\n            if (value.length > 0) {\n                return value.split(\",\");\n            } else {\n                return [];\n            }\n        }\n\n        return value;\n    }\n\n    static simpleJsonToString(value: any): string {\n        return JSON.stringify(value);\n    }\n\n    static stringToSimpleJson(value: string) {\n        return JSON.parse(value);\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Static Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Formats given number to \"0x\" format, e.g. if it is 1 then it will return \"01\".\n     */\n    private static formatZerolessValue(value: number): string {\n        if (value < 10)\n            return \"0\" + value;\n\n        return String(value);\n    }\n\n    /**\n     * Formats given number to \"0x\" format, e.g. if it is 1 then it will return \"01\".\n     */\n    private static formatMilliseconds(value: number): string {\n        if (value < 100)\n            return \"0\" + value;\n\n        return String(value);\n    }\n\n}\n"],"sourceRoot":".."}
##############################################
/src/util/DateUtils.js-155-    DateUtils.stringToSimpleJson = function (value) {
/src/util/DateUtils.js:156:        return JSON.parse(value);
/src/util/DateUtils.js-157-    };
