/src/dist/plotly.min.js-33-var et=!1;P.Axes.list(t).forEach(function(t){t.autorange&&(et=!0)}),(y||_||b&&et)&&(t.calcdata=void 0);var rt;_?rt=[function(){var e=t.layout;return t.layout=void 0,P.plot(t,"",e)}]:y||x||b?rt=[P.plot]:(N.supplyDefaults(t),rt=[N.previousPromises],w&&rt.push(function(){var e,r,n;for(e=0;e<t.calcdata.length;e++)r=t.calcdata[e],n=(((r[0]||{}).trace||{})._module||{}).arraysToCalcdata,n&&n(r);return N.style(t),P.Legend.draw(t),N.previousPromises(t)}),k&&rt.push(function(){return t.calcdata.forEach(function(t){if((t[0].t||{}).cb){var e=t[0].trace,r=t[0].t.cb;N.traceIs(e,"contour")&&r.line({width:e.contours.showlines!==!1?e.line.width:0,dash:e.line.dash,color:"line"===e.contours.coloring?r._opts.line.color:e.line.color}),N.traceIs(e,"markerColorscale")?r.options(e.marker.colorbar)():r.options(e.colorbar)()}}),N.previousPromises(t)}));var nt=P.Lib.syncOrAsync(rt,t);return nt&&nt.then||(nt=Promise.resolve()),nt.then(function(){t.emit("plotly_restyle",P.Lib.extendDeep([],[M,i]))})},P.relayout=function H(t,e,r){function i(t,e){if(Array.isArray(t))return void t.forEach(function(t){i(t,e)});if(!(t in p)){var r=P.Lib.nestedProperty(f,t);t in k||(k[t]=r.get()),void 0!==e&&r.set(e)}}function o(t,e){var r=P.Axes.id2name(t[e+"ref"]||e);return(d[r]||{}).autorange}if(t=n(t),!t.framework||!t.framework.isPolar){var a,s,l,u,c,h,f=t.layout,d=t._fullLayout,p={},g=!1,v=!1,m=!1,y=!1,b=!1,x=!1;if("string"==typeof e)p[e]=r;else{if(!P.Lib.isPlainObject(e))return void console.log("relayout fail",e,r);p=e}Object.keys(p).length&&(t.changed=!0),l=Object.keys(p),s=P.Axes.list(t);for(var _=0;_<l.length;_++){if(0===l[_].indexOf("allaxes")){for(var w=0;w<s.length;w++)c=s[w]._id.substr(1),h=c.indexOf("scene")!==-1?c+".":"",a=l[_].replace("allaxes",h+s[w]._name),p[a]||(p[a]=p[l[_]]);delete p[l[_]]}l[_].match(/^annotations\[[0-9-]+\].ref$/)&&(u=p[l[_]].split("y"),p[l[_].replace("ref","xref")]=u[0],p[l[_].replace("ref","yref")]=2===u.length?"y"+u[1]:"paper",delete p[l[_]])}var A={},k={},T=["height","width"];for(var L in p){var E=P.Lib.nestedProperty(f,L),S=p[L],z=E.parts.length,O="string"==typeof E.parts[z-1]?z-1:z-2,j=E.parts[O],I=E.parts[O-1]+"."+j,D=E.parts.slice(0,O).join("."),F=P.Lib.nestedProperty(t.layout,D).get(),B=P.Lib.nestedProperty(d,D).get();if(A[L]=S,k[L]="reverse"===j?S:E.get(),T.indexOf(L)!==-1?i("autosize",!1):"autosize"===L?i(T,void 0):I.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/)?i(D+".autorange",!1):I.match(/^[xyz]axis[0-9]*\.autorange$/)?i([D+".range[0]",D+".range[1]"],void 0):I.match(/^aspectratio\.[xyz]$/)?i(E.parts[0]+".aspectmode","manual"):I.match(/^aspectmode$/)?i([D+".x",D+".y",D+".z"],void 0):"tick0"===j||"dtick"===j?i(D+".tickmode","linear"):"tickmode"===j&&i([D+".tick0",D+".dtick"],void 0),"type"===j&&"log"===B.type!=("log"===S)){var U=F;if(U&&U.range)if(B.autorange)"log"===S&&(U.range=U.range[1]>U.range[0]?[1,2]:[2,1]);else{var V=U.range[0],q=U.range[1];"log"===S?(V<=0&&q<=0&&i(D+".autorange",!0),V<=0?V=q/1e6:q<=0&&(q=V/1e6),i(D+".range[0]",Math.log(V)/Math.LN10),i(D+".range[1]",Math.log(q)/Math.LN10)):(i(D+".range[0]",Math.pow(10,V)),i(D+".range[1]",Math.pow(10,q)))}else i(D+".autorange",!0)}if("reverse"===j)F.range?F.range.reverse():(i(D+".autorange",!0),F.range=[1,0]),B.autorange?b=!0:y=!0;else if("annotations"===E.parts[0]||"shapes"===E.parts[0]){var G=E.parts[1],Y=E.parts[0],X=f[Y]||[],W=P[P.Lib.titleCase(Y)],Z=X[G]||{};2===E.parts.length&&("add"===p[L]||P.Lib.isPlainObject(p[L])?k[L]="remove":"remove"===p[L]?G===-1?(k[Y]=X,delete k[L]):k[L]=Z:console.log("???",p)),!o(Z,"x")&&!o(Z,"y")||P.Lib.containsAny(L,["color","opacity","align","dash"])||(b=!0),W.draw(t,G,E.parts.slice(2).join("."),p[L]),delete p[L]}else 0===E.parts[0].indexOf("scene")?y=!0:0===E.parts[0].indexOf("geo")?y=!0:!d._hasGL2D||L.indexOf("axis")===-1&&"plot_bgcolor"!==E.parts[0]?"hiddenlabels"===L?b=!0:E.parts[0].indexOf("legend")!==-1?g=!0:L.indexOf("title")!==-1?v=!0:E.parts[0].indexOf("bgcolor")!==-1?m=!0:E.parts.length>1&&P.Lib.containsAny(E.parts[1],["tick","exponent","grid","zeroline"])?v=!0:L.indexOf(".linewidth")!==-1&&L.indexOf("axis")!==-1?v=m=!0:E.parts.length>1&&E.parts[1].indexOf("line")!==-1?m=!0:E.parts.length>1&&"mirror"===E.parts[1]?v=m=!0:"margin.pad"===L?v=m=!0:"margin"===E.parts[0]||"autorange"===E.parts[1]||"rangemode"===E.parts[1]||"type"===E.parts[1]||"domain"===E.parts[1]||L.match(/^(bar|box|font)/)?b=!0:["hovermode","dragmode"].indexOf(L)!==-1?x=!0:["hovermode","dragmode","height","width","autosize"].indexOf(L)===-1&&(y=!0):y=!0,E.set(S)}P.Queue&&P.Queue.add(t,H,[t,k],H,[t,A]),p.autosize&&(p=M(t,p)),(p.height||p.width||p.autosize)&&(b=!0);var Q=Object.keys(p),K=[N.previousPromises];if(y||b)K.push(function(){return t.layout=void 0,b&&(t.calcdata=void 0),P.plot(t,"",f)});else if(Q.length&&(N.supplyDefaults(t),d=t._fullLayout,g&&K.push(function(){return P.Legend.draw(t),N.previousPromises(t)}),m&&K.push(C),v&&K.push(function(){return P.Axes.doTicks(t,"redraw"),P.Titles.draw(t,"gtitle"),N.previousPromises(t)}),x)){R(t);var $;for($=N.getSubplotIds(d,"gl3d"),_=0;_<$.length;_++)c=d[$[_]]._scene,c.handleDragmode(d.dragmode);for($=N.getSubplotIds(d,"gl2d"),_=0;_<$.length;_++)c=d._plots[$[_]]._scene2d,c.updateFx(d)}var J=P.Lib.syncOrAsync(K,t);return J&&J.then||(J=Promise.resolve()),J.then(function(){t.emit("plotly_relayout",P.Lib.extendDeep({},A))})}}},{"../components/modebar/manage":294,"../lib/events":308,"../plotly":329,d3:69,"fast-isnumeric":77,"gl-mat4/fromQuat":107}],326:[function(t,e,r){"use strict";function n(t,e){try{t._fullLayout._paper.style("background",e)}catch(r){console.log(r)}}e.exports={staticPlot:!1,editable:!1,autosizable:!1,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:n,topojsonURL:"https://cdn.plot.ly/"}},{}],327:[function(t,e,r){"use strict";function n(t){var e=g.Plots.attributes,r=l({type:t}),n=c(t),i=f(t),o={},h={};o.type=null,m(o,e),o=a(r.attributes,o,"attributes",t),void 0!==i.attributes&&m(o,i.attributes),o.type=t,o=u(o),s(o),M.traces[t]=v({},n,{attributes:o}),void 0!==r.layoutAttributes&&(h=a(r.layoutAttributes,h,"layoutAttributes",t),s(h),M.traces[t].layoutAttributes=h)}function i(){var t=g.Plots.layoutAttributes,e={};e=a(t,e,"layoutAttributes","*"),e=h(e),e=d(e),e=u(e),s(e),e=p(e),M.layout={layoutAttributes:e}}function o(){M.defs={valObjects:g.Lib.valObjects,metaKeys:k.concat(["description","role"])}}function a(t,e,r,n){var i,o,s,u,c;return Object.keys(t).forEach(function(h){return h===b?void Object.keys(t[h]).forEach(function(u){i=l({module:t[h][u]}),void 0!==i&&(o=i[r],s=a(o,{},r,n),g.Lib.nestedProperty(e,u).set(m({},s)))}):h===x?void Object.keys(t[h]).forEach(function(i){i===n&&(u=l({module:t[h][i]}),void 0!==u&&(c=u[r],c=a(c,{},r,n),y(e,c)))}):void(e[h]=g.Lib.isPlainObject(t[h])?y({},t[h]):t[h])}),e}function s(t){function e(t){return{valType:"string"}}function r(t,r,n){E.isValObject(t)?"data_array"===t.valType?(t.role="data",n[r+"src"]=e(r)):t.arrayOk===!0&&(n[r+"src"]=e(r)):g.Lib.isPlainObject(t)&&(t.role="object")}E.crawl(t,r)}function l(t){return"type"in t?"area"===t.type?{attributes:T}:g.Plots.getModule({type:t.type}):"module"in t?g[t.module]:void 0}function u(t){return Object.keys(t).forEach(function(e){"_"===e.charAt(0)&&k.indexOf(e)===-1&&delete t[e]}),t}function c(t){return"area"===t?{}:g.Plots.modules[t].meta||{}}function h(t){return v(t,{radialaxis:L.radialaxis,angularaxis:L.angularaxis}),v(t,L.layout),t}function f(t){var e=g.Plots.subplotsRegistry,r=Object.keys(e).filter(function(e){return g.Plots.traceIs({type:t},e)})[0];return"area"===t?{}:void 0===r?{}:e[r]}function d(t){var e=g.Plots.subplotsRegistry;return Object.keys(t).forEach(function(r){Object.keys(e).forEach(function(n){var i,o=e[n];i="cartesian"===n?o.attrRegex.x.test(r)||o.attrRegex.y.test(r):o.attrRegex.test(r),i&&(t[r][_]=!0)})}),t}function p(t){return Object.keys(t).forEach(function(e){var r=m({},t[e]);if(r[w]===!0){var n=e.substr(0,e.length-1);delete r[w],t[e]={items:{}},t[e].items[n]=r,t[e].role="object"}}),t}var g=t("../plotly"),v=g.Lib.extendFlat,m=g.Lib.extendDeep,y=g.Lib.extendDeepAll,b="_nestedModules",x="_composedModules",_="_isSubplotObj",w="_isLinkedToArray",A="_deprecated",k=[_,w,A],M={traces:{},layout:{},defs:{}},T=t("../plots/polar/area_attributes"),L=t("../plots/polar/axis_attributes"),E=e.exports={};E.get=function(){return g.Plots.allTypes.concat("area").forEach(n),i(),o(),M},E.crawl=function(t,e){Object.keys(t).forEach(function(r){var n=t[r];k.indexOf(r)===-1&&(e(n,r,t),E.isValObject(n)||g.Lib.isPlainObject(n)&&E.crawl(n,e))})},E.isValObject=function(t){return t&&void 0!==t.valType}},{"../plotly":329,"../plots/polar/area_attributes":364,"../plots/polar/axis_attributes":365}],328:[function(t,e,r){"use strict";var n=t("../plotly");e.exports=function(t){return n.Lib.extendFlat(n.defaultConfig,t)}},{"../plotly":329}],329:[function(t,e,r){t("es6-promise").polyfill(),r.Lib=t("./lib"),r.util=t("./lib/svg_text_utils"),r.Queue=t("./lib/queue"),t("../build/plotcss"),r.MathJaxConfig=t("./fonts/mathjax_config"),r.defaultConfig=t("./plot_api/plot_config"),r.Plots=t("./plots/plots"),r.Axes=t("./plots/cartesian/axes"),r.Fx=t("./plots/cartesian/graph_interact"),r.Scene=t("./plots/gl3d/scene"),r.Gl3dLayout=t("./plots/gl3d/layout"),r.Geo=t("./plots/geo/geo"),r.GeoLayout=t("./plots/geo/layout"),r.Scene2D=t("./plots/gl2d/scene2d"),r.micropolar=t("./plots/polar/micropolar"),r.Color=t("./components/color"),r.Drawing=t("./components/drawing"),r.Colorscale=t("./components/colorscale"),r.Colorbar=t("./components/colorbar"),r.ErrorBars=t("./components/errorbars"),r.Annotations=t("./components/annotations"),r.Shapes=t("./components/shapes"),r.Titles=t("./components/titles"),r.Legend=t("./components/legend"),r.ModeBar=t("./components/modebar"),r.Scatter=t("./traces/scatter"),r.Bars=t("./traces/bars"),r.Boxes=t("./traces/boxes"),r.Heatmap=t("./traces/heatmap"),r.Histogram=t("./traces/histogram"),r.Pie=t("./traces/pie"),r.Contour=t("./traces/contour"),r.Scatter3D=t("./traces/scatter3d"),r.Surface=t("./traces/surface"),r.Mesh3D=t("./traces/mesh3d"),r.ScatterGeo=t("./traces/scattergeo"),r.Choropleth=t("./traces/choropleth"),r.ScatterGl=t("./traces/scattergl"),t("./plot_api/plot_api"),r.PlotSchema=t("./plot_api/plot_schema"),r.Snapshot=t("./snapshot")},{"../build/plotcss":1,"./components/annotations":278,"./components/color":280,"./components/colorbar":282,"./components/colorscale":284,"./components/drawing":286,"./components/errorbars":289,"./components/legend":291,"./components/modebar":293,"./components/shapes":296,"./components/titles":297,"./fonts/mathjax_config":303,"./lib":313,"./lib/queue":318,"./lib/svg_text_utils":323,"./plot_api/plot_api":325,"./plot_api/plot_config":326,"./plot_api/plot_schema":327,"./plots/cartesian/axes":332,"./plots/cartesian/graph_interact":333,"./plots/geo/geo":336,"./plots/geo/layout":341,"./plots/gl2d/scene2d":349,"./plots/gl3d/layout":356,"./plots/gl3d/scene":361,"./plots/plots":363,"./plots/polar/micropolar":366,"./snapshot":370,"./traces/bars":375,"./traces/boxes":378,"./traces/choropleth":382,"./traces/contour":385,"./traces/heatmap":387,"./traces/histogram":389,"./traces/mesh3d":393,"./traces/pie":395,"./traces/scatter":397,"./traces/scatter3d":402,"./traces/scattergeo":405,"./traces/scattergl":410,"./traces/surface":414,"es6-promise":74}],330:[function(t,e,r){e.exports={type:{valType:"enumerated",values:[],dflt:"scatter"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0},showlegend:{valType:"boolean",dflt:!0},legendgroup:{valType:"string",dflt:""},opacity:{valType:"number",min:0,max:1,dflt:1},name:{valType:"string"},uid:{valType:"string",dflt:""},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none"],dflt:"all"},stream:{token:{valType:"string",noBlank:!0,strict:!0},maxpoints:{valType:"number",min:0}}}},{}],331:[function(t,e,r){e.exports={xaxis:{valType:"axisid",dflt:"x"},yaxis:{valType:"axisid",dflt:"y"}}},{}],332:[function(t,e,r){"use strict";function n(t,e){if("-"===t.type){var r=t._id,n=r.charAt(0);r.indexOf("scene")!==-1&&(r=n);var s=a(e,r,n);if(s){if("histogram"===s.type&&n==={v:"y",h:"x"}[s.orientation||"v"])return void(t.type="linear");if(o(s,n)){for(var l,u=i(s),c=[],h=0;h<e.length;h++)l=e[h],M.Plots.traceIs(l,"box")&&(l[n+"axis"]||n)===r&&(void 0!==l[u]?c.push(l[u][0]):void 0!==l.name?c.push(l.name):c.push("text"));t.type=E.autoType(c)}else t.type=E.autoType(s[n]||[s[n+"0"]])}}}function i(t){return{v:"x",h:"y"}[t.orientation||"v"]}function o(t,e){var r=i(t);return M.Plots.traceIs(t,"box")&&e===r&&void 0===t[r]&&void 0===t[r+"0"]}function a(t,e,r){for(var n,i=0;i<t.length;i++)if(n=t[i],(n[r+"axis"]||r)===e){if(o(n,r))return n;if((n[r]||[]).length||n[r+"0"])return n}}function s(t){if(!t)return!1;for(var e=0;e<t.length;e++)if(L(t[e]))return!0;return!1}function l(t){var e,r,n=t.tickvals,i=t.ticktext,o=new Array(n.length),a=1.0001*t.range[0]-1e-4*t.range[1],s=1.0001*t.range[1]-1e-4*t.range[0],l=Math.min(a,s),u=Math.max(a,s),c=0;for(Array.isArray(i)||(i=[]),r=0;r<n.length;r++)e=t.d2l(n[r]),e>l&&e<u&&(void 0===i[r]?o[c]=E.tickText(t,e):o[c]=f(t,e,String(i[r])),c++);return c<n.length&&o.splice(c,n.length-c),o}function u(t,e,r){return e*M.Lib.roundUp(t/e,r)}function c(t){var e,r=t.dtick;if(t._tickexponent=0,L(r)||"string"==typeof r||(r=1),"category"===t.type)t._tickround=null;else if(L(r)||"L"===r.charAt(0))if("date"===t.type)r>=864e5?t._tickround="d":r>=36e5?t._tickround="H":r>=6e4?t._tickround="M":r>=1e3?t._tickround="S":t._tickround=3-Math.round(Math.log(r/2)/Math.LN10);else{L(r)||(r=Number(r.substr(1))),t._tickround=2-Math.floor(Math.log(r)/Math.LN10+.01),e="log"===t.type?Math.pow(10,Math.max(t.range[0],t.range[1])):Math.max(Math.abs(t.range[0]),Math.abs(t.range[1]));var n=Math.floor(Math.log(e)/Math.LN10+.01);Math.abs(n)>3&&("SI"===t.exponentformat||"B"===t.exponentformat?t._tickexponent=3*Math.round((n-1)/3):t._tickexponent=n)}else"M"===r.charAt(0)?t._tickround=2===r.length?"m":"y":t._tickround=null}function h(t,e){var r=t.match(Y),n=new Date(e);if(r){var i=Math.min(+r[1]||6,6),o=String(e/1e3%1+2.0000005).substr(2,i).replace(/0+$/,"")||"0";return T.time.format(t.replace(Y,o))(n)}return T.time.format(t)(n)}function f(t,e,r){var n=t.tickfont||t._td._fullLayout.font;return{x:e,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}function d(t,e,r,n){var i,o=e.x,a=t._tickround,s=new Date(o),l="";r&&t.hoverformat?i=h(t.hoverformat,o):t.tickformat?i=h(t.tickformat,o):(n&&(L(a)?a+=2:a={y:"m",m:"d",d:"H",H:"M",M:"S",S:2}[a]),"y"===a?i=B(s):"m"===a?i=U(s):(o!==t._tmin||r||(l="<br>"+B(s)),"d"===a?i=V(s):"H"===a?i=q(s):(o!==t._tmin||r||(l="<br>"+V(s)+", "+B(s)),i=H(s),"M"!==a&&(i+=G(s),"S"!==a&&(i+=m(k(o/1e3,1),t,"none",r).substr(1)))))),e.text=i+l}function p(t,e,r,n,i){var o=t.dtick,a=e.x;if(!n||"string"==typeof o&&"L"===o.charAt(0)||(o="L3"),t.tickformat||"string"==typeof o&&"L"===o.charAt(0))e.text=m(Math.pow(10,a),t,i,n);else if(L(o)||"D"===o.charAt(0)&&k(a+.01,1)<.1)if(["e","E","power"].indexOf(t.exponentformat)!==-1){var s=Math.round(a);0===s?e.text=1:1===s?e.text="10":s>1?e.text="10<sup>"+s+"</sup>":e.text="10<sup>\u2212"+-s+"</sup>",e.fontSize*=1.25}else e.text=m(Math.pow(10,a),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6);else{if("D"!==o.charAt(0))throw"unrecognized dtick "+String(o);e.text=String(Math.round(Math.pow(10,k(a,1)))),e.fontSize*=.75}if("D1"===t.dtick){var l=String(e.text).charAt(0);"0"!==l&&"1"!==l||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(a<0?.5:.25)))}}function g(t,e){var r=t._categories[Math.round(e.x)];void 0===r&&(r=""),e.text=String(r)}function v(t,e,r,n,i){"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide"),e.text=m(e.x,t,i,n)}function m(t,e,r,n){var i=t<0,o=e._tickround,a=r||e.exponentformat||"B",s=e._tickexponent,l=e.tickformat;if(n){var u={exponentformat:e.exponentformat,dtick:"none"===e.showexponent?e.dtick:L(t)?Math.abs(t)||1:1,range:"none"===e.showexponent?e.range:[0,t||1]};c(u),o=(Number(u._tickround)||0)+4,s=u._tickexponent,e.hoverformat&&(l=e.hoverformat)}if(l)return T.format(l)(t).replace(/-/g,"\u2212");var h=Math.pow(10,-o)/2;if("none"===a&&(s=0),t=Math.abs(t),t<h)t="0",i=!1;else{if(t+=h,s&&(t*=Math.pow(10,-s),o+=s),0===o)t=String(Math.floor(t));else if(o<0){t=String(Math.round(t)),t=t.substr(0,t.length+o);for(var f=o;f<0;f++)t+="0"}else{t=String(t);var d=t.indexOf(".")+1;d&&(t=t.substr(0,d+o).replace(/\.?0+$/,""))}t=y(t,e._td._fullLayout.separators)}if(s&&"hide"!==a){var p;p=s<0?"\u2212"+-s:"power"!==a?"+"+s:String(s),"e"===a||("SI"===a||"B"===a)&&(s>12||s<-15)?t+="e"+p:"E"===a?t+="E"+p:"power"===a?t+="&times;10<sup>"+p+"</sup>":"B"===a&&9===s?t+="B":"SI"!==a&&"B"!==a||(t+=X[s/3+5])}return i?"\u2212"+t:t}function y(t,e){var r=e.charAt(0),n=e.charAt(1),i=t.split("."),o=i[0],a=i.length>1?r+i[1]:"";if(n&&(i.length>1||o.length>4))for(;W.test(o);)o=o.replace(W,"$1"+n+"$2");return o+a}function b(t,e,r){function n(t,r){for(var n=Object.keys(t),i=/^[xyz]axis[0-9]*/,o=[],a=0;a<n.length;a++){var s=n[a];e&&s.charAt(0)!==e||i.test(s)&&o.push(r+s)}return o.sort()}var i=t._fullLayout;if(!i)return[];var o=n(i,"");if(r)return o;for(var a=M.Plots.getSubplotIds(i,"gl3d")||[],s=0;s<a.length;s++){var l=a[s];o=o.concat(n(i[l],l+"."))}return o}function x(t,e){var r,n,i=[];for(r=0;r<e.length;r++){var o=[],a=t._fullData[e[r]].xaxis,s=t._fullData[e[r]].yaxis;if(a&&s){for(n=0;n<i.length;n++)i[n].x.indexOf(a)===-1&&i[n].y.indexOf(s)===-1||o.push(n);if(o.length){var l,u=i[o[0]];if(o.length>1)for(n=1;n<o.length;n++)l=i[o[n]],_(u.x,l.x),_(u.y,l.y);_(u.x,[a]),_(u.y,[s])}else i.push({x:[a],y:[s]})}}return i}function _(t,e){for(var r=0;r<e.length;r++)t.indexOf(e[r])===-1&&t.push(e[r])}function w(t,e,r){var n,i,o=[],a=[],s=t.layout;for(n=0;n<e.length;n++)o.push(E.getFromId(t,e[n]));for(n=0;n<r.length;n++)a.push(E.getFromId(t,r[n]));var l=Object.keys(o[0]),u=["anchor","domain","overlaying","position","side","tickangle"],c=["linear","log"];for(n=0;n<l.length;n++){var h=l[n],f=o[0][h],d=a[0][h],p=!0,g=!1,v=!1;if("_"!==h.charAt(0)&&"function"!=typeof f&&u.indexOf(h)===-1){for(i=1;i<o.length&&p;i++){var m=o[i][h];"type"===h&&c.indexOf(f)!==-1&&c.indexOf(m)!==-1&&f!==m?g=!0:m!==f&&(p=!1)}for(i=1;i<a.length&&p;i++){var y=a[i][h];"type"===h&&c.indexOf(d)!==-1&&c.indexOf(y)!==-1&&d!==y?v=!0:a[i][h]!==d&&(p=!1)}p&&(g&&(s[o[0]._name].type="linear"),v&&(s[a[0]._name].type="linear"),A(s,h,o,a))}}for(n=0;n<t._fullLayout.annotations.length;n++){var b=t._fullLayout.annotations[n];e.indexOf(b.xref)!==-1&&r.indexOf(b.yref)!==-1&&M.Lib.swapAttrs(s.annotations[n],["?"])}}function A(t,e,r,n){var i,o=M.Lib.nestedProperty,a=o(t[r[0]._name],e).get(),s=o(t[n[0]._name],e).get();for("title"===e&&("Click to enter X axis title"===a&&(a="Click to enter Y axis title"),"Click to enter Y axis title"===s&&(s="Click to enter X axis title")),i=0;i<r.length;i++)o(t,r[i]._name+"."+e).set(s);for(i=0;i<n.length;i++)o(t,n[i]._name+"."+e).set(a)}function k(t,e){return(t%e+e)%e}var M=t("../../plotly"),T=t("d3"),L=t("fast-isnumeric"),E=e.exports={};E.attributes=t("./attributes"),M.Plots.registerSubplot("cartesian",["xaxis","yaxis"],["x","y"],E.attributes),E.layoutAttributes=t("./layout_attributes");var C=/^xaxis[0-9]*$/,S=/^yaxis[0-9]*$/;E.supplyLayoutDefaults=function(t,e,r){function n(t,e){var r=Number(t.substr(5)||1),n=Number(e.substr(5)||1);return r-n}var i,o=Object.keys(t),a=[],s=[],l={},u={};for(i=0;i<o.length;i++){var c=o[i];C.test(c)?a.push(c):S.test(c)&&s.push(c)}for(i=0;i<r.length;i++){var h=r[i],f=E.id2name(h.xaxis),d=E.id2name(h.yaxis);if(f&&a.indexOf(f)===-1&&a.push(f),d&&s.indexOf(d)===-1&&s.push(d),M.Plots.traceIs(h,"2dMap")&&(l[f]=!0,l[d]=!0),M.Plots.traceIs(h,"oriented")){var p="h"===h.orientation?d:f;u[p]=!0}}(e._hasCartesian||e._hasGL2D||!r.length)&&(a.length?a.sort(n):a=["xaxis"],s.length?s.sort(n):s=["yaxis"]),a.concat(s).forEach(function(n){function i(t,e){return M.Lib.coerce(c,h,E.layoutAttributes,t,e)}var o=n.charAt(0),c=t[n]||{},h={},f={letter:o,font:e.font,outerTicks:l[n],showGrid:!u[n],name:n,data:r},d={letter:o,counterAxes:{x:s,y:a}[o].map(E.name2id),overlayableAxes:{x:a,y:s}[o].filter(function(e){return e!==n&&!(t[e]||{}).overlaying}).map(E.name2id)};E.handleAxisDefaults(c,h,i,f),E.handleAxisPositioningDefaults(c,h,i,d),e[n]=h,t[n]||"-"===c.type||(t[n]={type:c.type})}),a.length&&s.length&&M.Lib.coerce(t,e,M.Plots.layoutAttributes,"plot_bgcolor")},E.handleAxisDefaults=function(t,e,r,i){var o=i.letter,a=i.font||{},s="Click to enter "+(i.title||o.toUpperCase()+" axis")+" title";i.name&&(e._name=i.name,e._id=E.name2id(i.name));var l=r("type");"-"===l&&(n(e,i.data),"-"===e.type?e.type="linear":l=t.type=e.type),E.setConvert(e),r("title",s),M.Lib.coerceFont(r,"titlefont",{family:a.family,size:Math.round(1.2*a.size),color:a.color});var u=2===(t.range||[]).length&&L(t.range[0])&&L(t.range[1]),c=r("autorange",!u);c&&r("rangemode");var h=r("range",[-1,"x"===o?6:4]);h[0]===h[1]&&(e.range=[h[0]-1,h[0]+1]),M.Lib.noneOrAll(t.range,e.range,[0,1]),r("fixedrange"),E.handleTickValueDefaults(t,e,r,l),E.handleTickDefaults(t,e,r,l,i);var f=M.Lib.coerce2(t,e,E.layoutAttributes,"linecolor"),d=M.Lib.coerce2(t,e,E.layoutAttributes,"linewidth"),p=r("showline",!!f||!!d);p||(delete e.linecolor,delete e.linewidth),(p||e.ticks)&&r("mirror");var g=M.Lib.coerce2(t,e,E.layoutAttributes,"gridcolor"),v=M.Lib.coerce2(t,e,E.layoutAttributes,"gridwidth"),m=r("showgrid",i.showGrid||!!g||!!v);m||(delete e.gridcolor,delete e.gridwidth);var y=M.Lib.coerce2(t,e,E.layoutAttributes,"zerolinecolor"),b=M.Lib.coerce2(t,e,E.layoutAttributes,"zerolinewidth"),x=r("zeroline",i.showGrid||!!y||!!b);return x||(delete e.zerolinecolor,delete e.zerolinewidth),e},E.handleTickDefaults=function(t,e,r,n,i){var o=M.Lib.coerce2(t,e,E.layoutAttributes,"ticklen"),a=M.Lib.coerce2(t,e,E.layoutAttributes,"tickwidth"),s=M.Lib.coerce2(t,e,E.layoutAttributes,"tickcolor"),l=r("ticks",i.outerTicks||o||a||s?"outside":"");l||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor);var u=r("showticklabels");if(u){M.Lib.coerceFont(r,"tickfont",i.font||{}),r("tickangle");var c=E.getShowAttrDflt(t);if("category"!==n){var h=r("tickformat");i.noHover||r("hoverformat"),h||"date"===n||(r("showexponent",c),r("exponentformat"))}var f=r("tickprefix");f&&r("showtickprefix",c);var d=r("ticksuffix");d&&r("showticksuffix",c)}},E.handleTickValueDefaults=function(t,e,r,n){var i="auto";"array"!==t.tickmode||"log"!==n&&"date"!==n||(t.tickmode="auto"),Array.isArray(t.tickvals)?i="array":t.dtick&&L(t.dtick)&&(i="linear");var o=r("tickmode",i);if("auto"===o)r("nticks");else if("linear"===o)r("tick0"),r("dtick");else{var a=r("tickvals");void 0===a?e.tickmode="auto":r("ticktext")}},E.handleAxisPositioningDefaults=function(t,e,r,n){var i=n.counterAxes||[],o=n.overlayableAxes||[],a=n.letter,s=M.Lib.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:L(t.position)?"free":i[0]||"free"}},"anchor");"free"===s&&r("position"),M.Lib.coerce(t,e,{side:{valType:"enumerated",values:"x"===a?["bottom","top"]:["left","right"],dflt:"x"===a?"bottom":"left"}},"side");var l=!1;if(o.length&&(l=M.Lib.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying")),!l){var u=r("domain");u[0]>u[1]-.01&&(e.domain=[0,1]),M.Lib.noneOrAll(t.domain,e.domain,[0,1])}return e},E.coerceRef=function(t,e,r,n){var i=r._fullLayout._hasGL2D?[]:E.listIds(r,n),o=n+"ref",a={};return a[o]={valType:"enumerated",values:i.concat(["paper"]),dflt:i[0]||"paper"},M.Lib.coerce(t,e,a,o)},E.clearTypes=function(t,e){Array.isArray(e)&&e.length||(e=t._fullData.map(function(t,e){return e})),e.forEach(function(e){var r=t.data[e];delete(E.getFromId(t,r.xaxis)||{}).type,delete(E.getFromId(t,r.yaxis)||{}).type})};var P=/^[xyz][0-9]*$/,z=/^[xyz]axis[0-9]*$/;E.id2name=function(t){if("string"==typeof t&&t.match(P)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},E.name2id=function(t){if(t.match(z)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},E.cleanId=function(t,e){if(t.match(P)&&(!e||t.charAt(0)===e)){var r=t.substr(1).replace(/^0+/,"");return"1"===r&&(r=""),t.charAt(0)+r}},E.cleanName=function(t,e){if(t.match(P)&&(!e||t.charAt(0)===e)){var r=t.substr(5).replace(/^0+/,"");return"1"===r&&(r=""),t.charAt(0)+"axis"+r}},E.counterLetter=function(t){return{x:"y",y:"x"}[t.charAt(0)]},E.autoType=function(t){return E.moreDates(t)?"date":E.category(t)?"category":s(t)?"linear":"-"},E.getShowAttrDflt=function(t){var e=["showexponent","showtickprefix","showticksuffix"],r=e.filter(function(e){return void 0!==t[e]}),n=function(e){return t[e]===t[r[0]]};if(r.every(n)||1===r.length)return t[r[0]]},E.moreDates=function(t){for(var e,r=0,n=0,i=Math.max(1,(t.length-1)/1e3),o=0;o<t.length;o+=i)e=t[Math.round(o)],M.Lib.isDateTime(e)&&(r+=1),L(e)&&(n+=1);return r>2*n},E.category=function(t){for(var e,r=Math.max(1,(t.length-1)/1e3),n=0,i=0,o=0;o<t.length;o+=r)e=E.cleanDatum(t[Math.round(o)]),L(e)?n++:"string"==typeof e&&""!==e&&"None"!==e&&i++;return i>2*n},E.cleanDatum=function(t){try{if("object"==typeof t&&null!==t&&t.getTime)return M.Lib.ms2DateTime(t);if("string"!=typeof t&&!L(t))return"";t=t.toString().replace(/['"%,$# ]/g,"")}catch(e){console.log(e,t)}return t},E.BADNUM=void 0,E.setConvert=function(t){function e(e,r){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&r&&t.range&&2===t.range.length){var n=t.range[0],o=t.range[1];return.5*(n+o-3*i*Math.abs(n-o))}return E.BADNUM}function r(t){return Math.pow(10,t)}function n(t){return L(t)?Number(t):E.BADNUM}var i=10;if(t.c2l="log"===t.type?e:n,t.l2c="log"===t.type?r:n,t.l2d=function(e){return t.c2d(t.l2c(e))},t.setScale=function(){var e,r=t._td._fullLayout._size;if(t._categories||(t._categories=[]),t.overlaying){var n=E.getFromId(t._td,t.overlaying);t.domain=n.domain}for(t.range&&2===t.range.length&&t.range[0]!==t.range[1]||(t.range=[-1,1]),e=0;e<2;e++)L(t.range[e])||(t.range[e]=L(t.range[1-e])?t.range[1-e]*(e?10:.1):e?1:-1),t.range[e]<-(Number.MAX_VALUE/2)?t.range[e]=-(Number.MAX_VALUE/2):t.range[e]>Number.MAX_VALUE/2&&(t.range[e]=Number.MAX_VALUE/2);if("y"===t._id.charAt(0)?(t._offset=r.t+(1-t.domain[1])*r.h,t._length=r.h*(t.domain[1]-t.domain[0]),t._m=t._length/(t.range[0]-t.range[1]),t._b=-t._m*t.range[1]):(t._offset=r.l+t.domain[0]*r.w,t._length=r.w*(t.domain[1]-t.domain[0]),t._m=t._length/(t.range[1]-t.range[0]),t._b=-t._m*t.range[0]),!isFinite(t._m)||!isFinite(t._b))throw M.Lib.notifier("Something went wrong with axis scaling","long"),t._td._replotting=!1,new Error("axis scaling")},t.l2p=function(e){return L(e)?T.round(M.Lib.constrain(t._b+t._m*e,-i*t._length,(1+i)*t._length),2):E.BADNUM},t.p2l=function(e){return(e-t._b)/t._m},t.c2p=function(e,r){return t.l2p(t.c2l(e,r))},t.p2c=function(e){return t.l2c(t.p2l(e))},["linear","log","-"].indexOf(t.type)!==-1)t.c2d=n,t.d2c=function(t){return t=E.cleanDatum(t),L(t)?Number(t):E.BADNUM},t.d2l=function(e,r){return"log"===t.type?t.c2l(t.d2c(e),r):t.d2c(e)};else if("date"===t.type){if(t.c2d=function(t){return L(t)?M.Lib.ms2DateTime(t):E.BADNUM},t.d2c=function(t){return L(t)?Number(t):M.Lib.dateTime2ms(t)},t.d2l=t.d2c,t.range&&t.range.length>1)try{var o=t.range.map(M.Lib.dateTime2ms);!L(t.range[0])&&L(o[0])&&(t.range[0]=o[0]),!L(t.range[1])&&L(o[1])&&(t.range[1]=o[1])}catch(a){console.log(a,t.range)}}else"category"===t.type&&(t.c2d=function(e){return t._categories[Math.round(e)]},t.d2c=function(e){t._categories.indexOf(e)===-1&&t._categories.push(e);var r=t._categories.indexOf(e);return r===-1?E.BADNUM:r},t.d2l=t.d2c);t.makeCalcdata=function(e,r){var n,i,o;if(r in e)for(n=e[r],i=new Array(n.length),o=0;o<n.length;o++)i[o]=t.d2c(n[o]);else{var a=r+"0"in e?t.d2c(e[r+"0"]):0,s=e["d"+r]?Number(e["d"+r]):1;for(n=e[{x:"y",y:"x"}[r]],i=new Array(n.length),o=0;o<n.length;o++)i[o]=a+o*s}return i},t._min=[],t._max=[],t._minDtick=null,t._forceTick0=null},E.minDtick=function(t,e,r,n){["log","category"].indexOf(t.type)===-1&&n?null===t._minDtick?(t._minDtick=e,t._forceTick0=r):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((r-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=r):((e/t._minDtick+1e-6)%1>2e-6||((r-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},E.doAutoRange=function(t){if(t._length||t.setScale(),t.autorange&&t._min&&t._max&&t._min.length&&t._max.length){var e,r=t._min[0].val,n=t._max[0].val;for(e=1;e<t._min.length&&r===n;e++)r=Math.min(r,t._min[e].val);for(e=1;e<t._max.length&&r===n;e++)n=Math.max(n,t._max[e].val);var i,o,a,s,l,u,c,h=0,f=t.range&&t.range[1]<t.range[0];for("reversed"===t.autorange&&(f=!0,t.autorange=!0),e=0;e<t._min.length;e++)for(o=t._min[e],i=0;i<t._max.length;i++)a=t._max[i],c=a.val-o.val,u=t._length-o.pad-a.pad,c>0&&u>0&&c/u>h&&(s=o,l=a,h=c/u);r===n?t.range=f?[r+1,"normal"!==t.rangemode?0:r-1]:["normal"!==t.rangemode?0:r-1,r+1]:h&&("linear"!==t.type&&"-"!==t.type||("tozero"===t.rangemode&&s.val>=0?s={val:0,pad:0}:"nonnegative"===t.rangemode&&(s.val-h*s.pad<0&&(s={val:0,pad:0}),l.val<0&&(l={val:1,pad:0})),h=(l.val-s.val)/(t._length-s.pad-l.pad)),t.range=[s.val-h*s.pad,l.val+h*l.pad],t.range[0]===t.range[1]&&(t.range=[t.range[0]-1,t.range[0]+1]),f&&t.range.reverse());var d=t._td.layout[t._name];d||(t._td.layout[t._name]=d={}),d!==t&&(d.range=t.range.slice(),d.autorange=t.autorange)}},E.saveRangeInitial=function(t,e){for(var r,n,i,o=E.list(t,"",!0),a=!1,s=0;s<o.length;s++)r=o[s],n=void 0===r._rangeInitial,i=n||!(r.range[0]===r._rangeInitial[0]&&r.range[1]===r._rangeInitial[1]),(n&&r.autorange===!1||e&&i)&&(r._rangeInitial=r.range.slice(),a=!0);return a};var R=Number.MAX_VALUE/2;E.expand=function(t,e,r){function n(t){if(Array.isArray(t))return function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}function i(r){function n(t){return L(t)&&Math.abs(t)<R}if(l=e[r],L(l)){if(h=b(r)+m,f=x(r)+m,p=l-w(r),g=l+_(r),"log"===t.type&&p<g/10&&(p=g/10),u=t.c2l(p),c=t.c2l(g),y&&(u=Math.min(0,u),c=Math.max(0,c)),n(u)){for(d=!0,a=0;a<t._min.length&&d;a++)s=t._min[a],s.val<=u&&s.pad>=f?d=!1:s.val>=u&&s.pad<=f&&(t._min.splice(a,1),a--);d&&t._min.push({val:u,pad:y&&0===u?0:f})}if(n(c)){for(d=!0,a=0;a<t._max.length&&d;a++)s=t._max[a],s.val>=c&&s.pad>=h?d=!1:s.val<=c&&s.pad<=h&&(t._max.splice(a,1),a--);d&&t._max.push({val:c,pad:y&&0===c?0:h})}}}if(t.autorange&&e){t._min||(t._min=[]),t._max||(t._max=[]),r||(r={}),t._m||t.setScale();var o,a,s,l,u,c,h,f,d,p,g,v=e.length,m=r.padded?.05*t._length:0,y=r.tozero&&("linear"===t.type||"-"===t.type),b=n((t._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),x=n((t._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),_=n(r.vpadplus||r.vpad),w=n(r.vpadminus||r.vpad);for(o=0;o<6;o++)i(o);for(o=v-1;o>5;o--)i(o)}},E.autoBin=function(t,e,r,n){function i(t){return(1+100*(t-d)/h.dtick)%100<2}var o=M.Lib.aggNums(Math.min,null,t),a=M.Lib.aggNums(Math.max,null,t);if("category"===e.type)return{start:o-.5,end:a+.5,size:1};var s;if(r)s=(a-o)/r;else{var l=M.Lib.distinctVals(t),u=Math.pow(10,Math.floor(Math.log(l.minDiff)/Math.LN10)),c=u*M.Lib.roundUp(l.minDiff/u,[.9,1.9,4.9,9.9],!0);s=Math.max(c,2*M.Lib.stdev(t)/Math.pow(t.length,n?.25:.4))}var h={type:"log"===e.type?"linear":e.type,range:[o,a]};E.autoTicks(h,s);var f,d=E.tickIncrement(E.tickFirst(h),h.dtick,"reverse");if("number"==typeof h.dtick){for(var p=0,g=0,v=0,m=0,y=0;y<t.length;y++)t[y]%1===0?v++:L(t[y])||m++,i(t[y])&&p++,i(t[y]+h.dtick/2)&&g++;var b=t.length-m;if(v===b&&"date"!==e.type)h.dtick<1?d=o-.5*h.dtick:d-=.5;else if(g<.1*b&&(p>.3*b||i(o)||i(a))){var x=h.dtick/2;d+=d+x<o?x:-x}var _=1+Math.floor((a-d)/h.dtick);f=d+_*h.dtick}else for(f=d;f<=a;)f=E.tickIncrement(f,h.dtick);return{start:d,end:f,size:h.dtick}},E.calcTicks=function(t){if("array"===t.tickmode)return l(t);if("auto"===t.tickmode||!t.dtick){var e,r=t.nticks;r||("category"===t.type?(e=t.tickfont?1.2*(t.tickfont.size||12):15,
/src/dist/plotly.min.js:34:r=t._length/e):(e="y"===t._id.charAt(0)?40:80,r=M.Lib.constrain(t._length/e,4,9)+1)),E.autoTicks(t,Math.abs(t.range[1]-t.range[0])/r),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t._forceTick0)}t.tick0||(t.tick0="date"===t.type?new Date(2e3,0,1).getTime():0),c(t),t._tmin=E.tickFirst(t);var n=t.range[1]<t.range[0],i=[],o=1.0001*t.range[1]-1e-4*t.range[0];"category"===t.type&&(o=n?Math.max(-.5,o):Math.min(t._categories.length-.5,o));for(var a=t._tmin;(n?a>=o:a<=o)&&(i.push(a),!(i.length>1e3));a=E.tickIncrement(a,t.dtick,n));t._tmax=i[i.length-1];for(var s=new Array(i.length),u=0;u<i.length;u++)s[u]=E.tickText(t,i[u]);return s};var O=[2,5,10],j=[1,2,3,6,12],I=[1,2,5,10,15,30],N=[1,2,3,7,14],D=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],F=[-.301,0,.301,.699,1];E.autoTicks=function(t,e){var r;if("date"===t.type)t.tick0=new Date(2e3,0,1).getTime(),e>157788e5?(e/=315576e5,r=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),t.dtick="M"+12*u(e,r,O)):e>12096e5?(e/=26298e5,t.dtick="M"+u(e,1,j)):e>432e5?(t.dtick=u(e,864e5,N),t.tick0=new Date(2e3,0,2).getTime()):e>18e5?t.dtick=u(e,36e5,j):e>3e4?t.dtick=u(e,6e4,I):e>500?t.dtick=u(e,1e3,I):(r=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),t.dtick=u(e,r,O));else if("log"===t.type)if(t.tick0=0,e>.7)t.dtick=Math.ceil(e);else if(Math.abs(t.range[1]-t.range[0])<1){var n=1.5*Math.abs((t.range[1]-t.range[0])/e);e=Math.abs(Math.pow(10,t.range[1])-Math.pow(10,t.range[0]))/n,r=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),t.dtick="L"+u(e,r,O)}else t.dtick=e>.3?"D2":"D1";else"category"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):(t.tick0=0,r=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),t.dtick=u(e,r,O));if(0===t.dtick&&(t.dtick=1),!L(t.dtick)&&"string"!=typeof t.dtick){var i=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(i)}},E.tickIncrement=function(t,e,r){var n=r?-1:1;if(L(e))return t+n*e;var i=e.charAt(0),o=n*Number(e.substr(1));if("M"===i){var a=new Date(t);return a.setMonth(a.getMonth()+o)}if("L"===i)return Math.log(Math.pow(10,t)+o)/Math.LN10;if("D"===i){var s="D2"===e?F:D,l=t+.01*n,u=M.Lib.roundUp(k(l,1),s,r);return Math.floor(l)+Math.log(T.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(e)},E.tickFirst=function(t){var e=t.range[1]<t.range[0],r=e?Math.floor:Math.ceil,n=1.0001*t.range[0]-1e-4*t.range[1],i=t.dtick,o=t.tick0;if(L(i)){var a=r((n-o)/i)*i+o;return"category"===t.type&&(a=M.Lib.constrain(a,0,t._categories.length-1)),a}var s,l,u,c=i.charAt(0),h=Number(i.substr(1));if("M"===c){for(s=new Date(o),n=new Date(n),l=12*(n.getFullYear()-s.getFullYear())+n.getMonth()-s.getMonth(),u=s.setMonth(s.getMonth()+(Math.round(l/h)+(e?1:-1))*h);e?u>n:u<n;)u=E.tickIncrement(u,i,e);return u}if("L"===c)return Math.log(r((Math.pow(10,n)-o)/h)*h+o)/Math.LN10;if("D"===c){var f="D2"===i?F:D,d=M.Lib.roundUp(k(n,1),f,e);return Math.floor(n)+Math.log(T.round(Math.pow(10,d),1))/Math.LN10}throw"unrecognized dtick "+String(i)};var B=T.time.format("%Y"),U=T.time.format("%b %Y"),V=T.time.format("%b %-d"),q=T.time.format("%b %-d %Hh"),H=T.time.format("%H:%M"),G=T.time.format(":%S"),Y=/%(\d?)f/g;E.tickText=function(t,e,r){function n(n){var i;return void 0===n||(r?"none"===n:(i={first:t._tmin,last:t._tmax}[n],"all"!==n&&e!==i))}var i,o=f(t,e),a="array"===t.tickmode,s=r||a;if(a&&Array.isArray(t.ticktext)){for(var l=Math.abs(t.range[1]-t.range[0])/1e4,u=0;u<t.ticktext.length&&!(Math.abs(e-t.d2l(t.tickvals[u]))<l);u++);if(u<t.ticktext.length)return o.text=String(t.ticktext[u]),o}return i="none"!==t.exponentformat&&n(t.showexponent)?"hide":"","date"===t.type?d(t,o,r,s):"log"===t.type?p(t,o,r,s,i):"category"===t.type?g(t,o):v(t,o,r,s,i),t.tickprefix&&!n(t.showtickprefix)&&(o.text=t.tickprefix+o.text),t.ticksuffix&&!n(t.showticksuffix)&&(o.text+=t.ticksuffix),o};var X=["f","p","n","&mu;","m","","k","M","G","T"],W=/(\d+)(\d{3})/;E.list=function(t,e,r){return b(t,e,r).map(function(e){return M.Lib.nestedProperty(t._fullLayout,e).get()})},E.listIds=function(t,e){return b(t,e,!0).map(E.name2id)},E.getFromId=function(t,e,r){var n=t._fullLayout;return"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),n[E.id2name(e)]},E.getFromTrace=function(t,e,r){var n=t._fullLayout,i=null;if(M.Plots.traceIs(e,"gl3d")){var o=e.scene;"scene"===o.substr(0,5)&&(i=n[o][r+"axis"])}else i=E.getFromId(t,e[r+"axis"]||r);return i},E.subplotMatch=/^x([0-9]*)y([0-9]*)$/,E.getSubplots=function(t,e){function r(t,e){return t.indexOf(e._id)!==-1}var n,i,o,a=[],s=t.data||[];for(n=0;n<s.length;n++){var l=s[n];if(l.visible!==!1&&"legendonly"!==l.visible&&(M.Plots.traceIs(l,"cartesian")||M.Plots.traceIs(l,"gl2d"))){var u=l.xaxis||"x",c=l.yaxis||"y";o=u+c,a.indexOf(o)===-1&&a.push(o)}}var h=E.list(t,"",!0);for(n=0;n<h.length;n++){var f=h[n],d=f._id.charAt(0),p="free"===f.anchor?"x"===d?"y":"x":f.anchor,g=E.getFromId(t,p),v=!1;for(i=0;i<a.length;i++)if(r(a[i],f)){v=!0;break}if("free"!==f.anchor||!v){if(!g)return void console.log(["Warning: couldnt find anchor",p,"for axis",f._id].join(" "));o="x"===d?f._id+g._id:g._id+f._id,a.indexOf(o)===-1&&a.push(o)}}var m=E.subplotMatch,y=[];for(n=0;n<a.length;n++)o=a[n],m.test(o)&&y.push(o);return y.sort(function(t,e){var r=t.match(m),n=e.match(m);return r[1]===n[1]?+(r[2]||1)-(n[2]||1):+(r[1]||0)-(n[1]||0)}),e?E.findSubplotsWithAxis(y,e):y},E.findSubplotsWithAxis=function(t,e){for(var r=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),n=[],i=0;i<t.length;i++){var o=t[i];r.test(o)&&n.push(o)}return n},E.makeClipPaths=function(t){var e,r,n=t._fullLayout,i=n._defs,o={_offset:0,_length:n.width,_id:""},a={_offset:0,_length:n.height,_id:""},s=E.list(t,"x",!0),l=E.list(t,"y",!0),u=[];for(e=0;e<s.length;e++)for(u.push({x:s[e],y:a}),r=0;r<l.length;r++)0===e&&u.push({x:o,y:l[r]}),u.push({x:s[e],y:l[r]});var c=i.selectAll("g.clips").data([0]);c.enter().append("g").classed("clips",!0);var h=c.selectAll(".axesclip").data(u,function(t){return t.x._id+t.y._id});h.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+n._uid+t.x._id+t.y._id}).append("rect"),h.exit().remove(),h.each(function(t){T.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})},E.doTicks=function(t,e,r){function n(t){var e=l.l2p(t.x);return e>1&&e<l._length-1}function i(t,e){var r=t.selectAll("path."+x).data("inside"===l.ticks?O:y,b);e&&l.ticks?(r.enter().append("path").classed(x,1).classed("ticks",1).classed("crisp",1).call(M.Color.stroke,l.tickcolor).style("stroke-width",P+"px").attr("d",e),r.attr("transform",f),r.exit().remove()):r.remove()}function o(n,i){function o(t,e){t.each(function(t){var r=d(e),n=T.select(this),i=n.select(".text-math-group"),o=f(t)+(L(e)&&0!==+e?" rotate("+e+","+c(t)+","+(h(t)-t.fontSize/2)+")":"");if(i.empty()){var a=n.select("text").attr({transform:o,"text-anchor":r});a.empty()||a.selectAll("tspan.line").attr({x:a.attr("x"),y:a.attr("y")})}else{var s=M.Drawing.bBox(i.node()).width*{end:-.5,start:.5}[r];i.attr("transform",o+(s?"translate("+s+",0)":""))}})}function a(){return E.length&&Promise.all(E)}function s(){if(o(u,l.tickangle),"x"===v&&!L(l.tickangle)&&("log"!==l.type||"D"!==String(l.dtick).charAt(0))){var n=[];for(u.each(function(t){var e=T.select(this),r=e.select(".text-math-group"),i=l.l2p(t.x);r.empty()&&(r=e.select("text"));var o=M.Drawing.bBox(r.node());n.push({top:0,bottom:10,height:10,left:i-o.width/2,right:i+o.width/2+2,width:o.width+2})}),g=0;g<n.length-1;g++)if(M.Lib.bBoxIntersect(n[g],n[g+1])){w=30;break}if(w){var i=Math.abs((y[y.length-1].x-y[0].x)*l._m)/(y.length-1);i<2.5*_&&(w=90),o(u,w)}l._lastangle=w}return r||M.Titles.draw(t,e+"title"),e+" done"}var u=n.selectAll("g."+x).data(y,b);if(!l.showticklabels||!L(i))return u.remove(),void M.Titles.draw(t,e+"title");var c,h,d,p;if("x"===v){var m="bottom"===z?1:-1;c=function(t){return t.dx},p=i+(k+A)*m,h=function(t){return t.dy+p+t.fontSize*("bottom"===z?1:-.5)},d=function(t){return L(t)&&0!==t&&180!==t?t*m<0?"end":"start":"middle"}}else h=function(t){return t.dy+t.fontSize/2},c=function(t){return t.dx+i+(k+A+(90===Math.abs(l.tickangle)?t.fontSize/2:0))*("right"===z?1:-1)},d=function(t){return L(t)&&90===Math.abs(t)?"middle":"right"===z?"start":"end"};var _=0,w=0,E=[];u.enter().append("g").classed(x,1).append("text").attr("text-anchor","middle").each(function(e){var r=T.select(this),n=t._promises.length;r.call(M.Drawing.setPosition,c(e),h(e)).call(M.Drawing.font,e.font,e.fontSize,e.fontColor).text(e.text).call(M.util.convertToTspans),n=t._promises[n],n?E.push(t._promises.pop().then(function(){o(r,l.tickangle)})):o(r,l.tickangle)}),u.exit().remove(),u.each(function(t){_=Math.max(_,t.fontSize)}),o(u,l._lastangle||l.tickangle);var C=M.Lib.syncOrAsync([a,s]);return C&&C.then&&t._promises.push(C),C}function a(t,e){return t.visible===!0&&t.xaxis+t.yaxis===e&&(!(!M.Plots.traceIs(t,"bar")||t.orientation!=={x:"h",y:"v"}[v])||t.fill&&t.fill.charAt(t.fill.length-1)===v)}function s(e,r,i){var o=e.gridlayer,s=e.zerolinelayer,u=e["hidegrid"+v]?[]:O,c="M0,0"+("x"===v?"v":"h")+r._length,h=o.selectAll("path."+_).data(l.showgrid===!1?[]:u,b);h.enter().append("path").classed(_,1).classed("crisp",1).attr("d",c).each(function(t){l.zeroline&&("linear"===l.type||"-"===l.type)&&Math.abs(t.x)<l.dtick/100&&T.select(this).remove()}),h.attr("transform",f).call(M.Color.stroke,l.gridcolor||"#ddd").style("stroke-width",C+"px"),h.exit().remove();for(var d=!1,p=0;p<t._fullData.length;p++)if(a(t._fullData[p],i)){d=!0;break}var g=l.range[0]*l.range[1]<=0&&l.zeroline&&("linear"===l.type||"-"===l.type)&&u.length&&(d||n({x:0})||!l.showline),m=s.selectAll("path."+w).data(g?[{x:0}]:[]);m.enter().append("path").classed(w,1).classed("zl",1).classed("crisp",1).attr("d",c),m.attr("transform",f).call(M.Color.stroke,l.zerolinecolor||M.Color.defaultLine).style("stroke-width",S+"px"),m.exit().remove()}var l,u=t._fullLayout,c=!1;if("object"==typeof e)l=e,e=l._id,c=!0;else if(l=E.getFromId(t,e),"redraw"===e&&u._paper.selectAll("g.subplot").each(function(t){var e=u._plots[t],r=e.x(),n=e.y();e.plot.attr("viewBox","0 0 "+r._length+" "+n._length),e.xaxislayer.selectAll("."+r._id+"tick").remove(),e.yaxislayer.selectAll("."+n._id+"tick").remove(),e.gridlayer.selectAll("path").remove(),e.zerolinelayer.selectAll("path").remove()}),!e||"redraw"===e)return M.Lib.syncOrAsync(E.list(t,"",!0).map(function(r){return function(){if(r._id){var n=E.doTicks(t,r._id);return"redraw"===e&&(r._r=r.range.slice()),n}}}));l.tickformat||(["none","e","E","power","SI","B"].indexOf(l.exponentformat)===-1&&(l.exponentformat="e"),["all","first","last","none"].indexOf(l.showexponent)===-1&&(l.showexponent="all")),l.range=[+l.range[0],+l.range[1]],l.setScale();var h,f,d,p,g,v=e.charAt(0),m=E.counterLetter(e),y=E.calcTicks(l),b=function(t){return t.text+t.x+l.mirror},x=e+"tick",_=e+"grid",w=e+"zl",A=(l.linewidth||1)/2,k=("outside"===l.ticks?l.ticklen:1)+(l.linewidth||0),C=M.Drawing.crispRound(t,l.gridwidth,1),S=M.Drawing.crispRound(t,l.zerolinewidth,C),P=M.Drawing.crispRound(t,l.tickwidth,1);if("x"===v)h=["bottom","top"],f=function(t){return"translate("+l.l2p(t.x)+",0)"},d="M0,",p="v";else{if("y"!==v)return void console.log("unrecognized doTicks axis",e);h=["left","right"],f=function(t){return"translate(0,"+l.l2p(t.x)+")"},d="M",p=",0h"}var z=l.side||h[0],R=[-1,1,z===h[1]?1:-1];"inside"!==l.ticks==("x"===v)&&(R=R.map(function(t){return-t}));var O=y.filter(n);if(c)return i(l._axislayer,d+(l._pos+A*R[2])+p+R[2]*l.ticklen),o(l._axislayer,l._pos);var j=E.getSubplots(t,l).map(function(t){var e=u._plots[t];if(u._hasCartesian){var r=e[v+"axislayer"],n=l._linepositions[t]||[],a=e[m](),c=a._id===l.anchor,f=[!1,!1,!1],y="";if("allticks"===l.mirror?f=[!0,!0,!1]:c&&("ticks"===l.mirror?f=[!0,!0,!1]:f[h.indexOf(z)]=!0),l.mirrors)for(g=0;g<2;g++){var b=l.mirrors[a._id+h[g]];"ticks"!==b&&"labels"!==b||(f[g]=!0)}return void 0!==n[2]&&(f[2]=!0),f.forEach(function(t,e){var r=n[e],i=R[e];t&&L(r)&&(y+=d+(r+A*i)+p+i*l.ticklen)}),i(r,y),s(e,a,t),o(r,n[3])}}).filter(function(t){return t&&t.then});return j.length?Promise.all(j):0},E.swap=function(t,e){for(var r=x(t,e),n=0;n<r.length;n++)w(t,r[n].x,r[n].y)}},{"../../plotly":329,"./attributes":331,"./layout_attributes":334,d3:69,"fast-isnumeric":77}],333:[function(t,e,r){"use strict";function n(t,e){for(var r=[],n=t.length;n>0;n--)r.push(e);return r}function i(t,e){for(var r=[],n=0;n<t.length;n++)r.push(t[n].p2c(e));return r}function o(t,e){return function(r){var n=t(r),i=e(r);return Math.sqrt(n*n+i*i)}}function a(t,e,r){r||(r="xy");var o=t._fullLayout,a=o._plots[r],d=[r].concat(a.overlays.map(function(t){return t.id})),p=d.map(function(e){return x.Axes.getFromId(t,e,"x")}),g=d.map(function(e){return x.Axes.getFromId(t,e,"y")}),v=e.hovermode||o.hovermode;if(["x","y","closest"].indexOf(v)===-1||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return f(t,e);var m,y,b,_,w,T,L,E,C,S,P,z,R=[],O=[];if(Array.isArray(e))for(v="array",b=0;b<e.length;b++)w=t.calcdata[e[b].curveNumber||0],"none"!==w[0].trace.hoverinfo&&O.push(w);else{for(_=0;_<t.calcdata.length;_++)w=t.calcdata[_],T=w[0].trace,"none"!==T.hoverinfo&&d.indexOf(T.xaxis+T.yaxis)!==-1&&O.push(w);var j,I;if(e.target&&"clientX"in e&&"clientY"in e){if(k.triggerHandler(t,"plotly_beforehover",e)===!1)return;var N=e.target.getBoundingClientRect();if(j=e.clientX-N.left,I=e.clientY-N.top,j<0||j>N.width||I<0||I>N.height)return f(t,e)}else j="xpx"in e?e.xpx:p[0]._length/2,I="ypx"in e?e.ypx:g[0]._length/2;if(m="xval"in e?n(d,e.xval):i(p,j),y="yval"in e?n(d,e.yval):i(g,I),!A(m[0])||!A(y[0]))return console.log("Plotly.Fx.hover failed",e,t),f(t,e)}var D=1/0;for(_=0;_<O.length;_++)if(w=O[_],w&&w[0]&&w[0].trace&&w[0].trace.visible===!0){if(T=w[0].trace,L=d.indexOf(T.xaxis+T.yaxis),E=v,P={cd:w,trace:T,xa:p[L],ya:g[L],name:t.data.length>1||T.hoverinfo.indexOf("name")!==-1?T.name:void 0,index:!1,distance:Math.min(D,M.MAXDIST),color:x.Color.defaultLine,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},z=R.length,"array"===E){var F=e[_];"pointNumber"in F?(P.index=F.pointNumber,E="closest"):(E="","xval"in F&&(C=F.xval,E="x"),"yval"in F&&(S=F.yval,E=E?"closest":"y"))}else C=m[L],S=y[L];if(T._module&&T._module.hoverPoints){var B=T._module.hoverPoints(P,C,S,E);if(B)for(var U,V=0;V<B.length;V++)U=B[V],A(U.x0)&&A(U.y0)&&R.push(s(U,v))}else console.log("unrecognized trace type in hover",T);"closest"===v&&R.length>z&&(R.splice(0,z),D=R[0].distance)}if(0===R.length)return f(t,e);var q="y"===v&&O.length>1;R.sort(function(t,e){return t.distance-e.distance});var H={hovermode:v,rotateLabels:q,bgColor:x.Color.combine(o.plot_bgcolor,o.paper_bgcolor),container:o._hoverlayer,outerContainer:o._paperdiv},G=l(R,H);u(R,q?p[0]:g[0]),c(G,q);var Y=t._hoverdata,X=[];for(b=0;b<R.length;b++){var W=R[b],Z={data:W.trace._input,fullData:W.trace,curveNumber:W.trace.index,pointNumber:W.index,x:W.xVal,y:W.yVal,xaxis:W.xa,yaxis:W.ya};void 0!==W.zLabelVal&&(Z.z=W.zLabelVal),X.push(Z)}t._hoverdata=X,h(t,e,Y)&&(Y&&t.emit("plotly_unhover",{points:Y}),t.emit("plotly_hover",{points:t._hoverdata,xaxes:p,yaxes:g,xvals:m,yvals:y}))}function s(t,e){t.posref="y"===e?(t.x0+t.x1)/2:(t.y0+t.y1)/2,t.x0=x.Lib.constrain(t.x0,0,t.xa._length),t.x1=x.Lib.constrain(t.x1,0,t.xa._length),t.y0=x.Lib.constrain(t.y0,0,t.ya._length),t.y1=x.Lib.constrain(t.y1,0,t.ya._length);var r;if(void 0!==t.xLabelVal){r="log"===t.xa.type&&t.xLabelVal<=0;var n=x.Axes.tickText(t.xa,t.xa.c2l(r?-t.xLabelVal:t.xLabelVal),"hover");r?0===t.xLabelVal?t.xLabel="0":t.xLabel="-"+n.text:t.xLabel=n.text,t.xVal=t.xa.c2d(t.xLabelVal)}if(void 0!==t.yLabelVal){r="log"===t.ya.type&&t.yLabelVal<=0;var i=x.Axes.tickText(t.ya,t.ya.c2l(r?-t.yLabelVal:t.yLabelVal),"hover");r?0===t.yLabelVal?t.yLabel="0":t.yLabel="-"+i.text:t.yLabel=i.text,t.yVal=t.ya.c2d(t.yLabelVal)}if(void 0!==t.zLabelVal&&(t.zLabel=String(t.zLabelVal)),void 0!==t.xerr){var o=x.Axes.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+o+" / -"+x.Axes.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" &plusmn; "+o,"x"===e&&(t.distance+=1)}if(void 0!==t.yerr){var a=x.Axes.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+a+" / -"+x.Axes.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" &plusmn; "+a,"y"===e&&(t.distance+=1)}var s=t.trace.hoverinfo;return"all"!==s&&(s=s.split("+"),s.indexOf("x")===-1&&(t.xLabel=void 0),s.indexOf("y")===-1&&(t.yLabel=void 0),s.indexOf("z")===-1&&(t.zLabel=void 0),s.indexOf("text")===-1&&(t.text=void 0),s.indexOf("name")===-1&&(t.name=void 0)),t}function l(t,e){var r,n,i=e.hovermode,o=e.rotateLabels,a=e.bgColor,s=e.container,l=e.outerContainer,u=t[0],c=u.xa,h=u.ya,f="y"===i?"yLabel":"xLabel",d=u[f],p=(String(d)||"").split(" ")[0],g=l.node().getBoundingClientRect(),v=g.top,m=g.width,y=g.height,b=u.distance<=M.MAXDIST&&("x"===i||"y"===i);for(r=0;r<t.length;r++)if(n=t[r].trace.hoverinfo,n.indexOf("all")===-1&&n.indexOf(i)===-1){b=!1;break}var A=s.selectAll("g.axistext").data(b?[0]:[]);A.enter().append("g").classed("axistext",!0),A.exit().remove(),A.each(function(){var e=_.select(this),r=e.selectAll("path").data([0]),n=e.selectAll("text").data([0]);r.enter().append("path").style({fill:x.Color.defaultLine,"stroke-width":"1px",stroke:x.Color.background}),n.enter().append("text").call(x.Drawing.font,j,O,x.Color.background).attr("data-notex",1),n.text(d).call(x.util.convertToTspans).call(x.Drawing.setPosition,0,0).selectAll("tspan.line").call(x.Drawing.setPosition,0,0),e.attr("transform","");var o=n.node().getBoundingClientRect();if("x"===i){n.attr("text-anchor","middle").call(x.Drawing.setPosition,0,"top"===c.side?v-o.bottom-z-R:v-o.top+z+R).selectAll("tspan.line").attr({x:n.attr("x"),y:n.attr("y")});var a="top"===c.side?"-":"";r.attr("d","M0,0L"+z+","+a+z+"H"+(R+o.width/2)+"v"+a+(2*R+o.height)+"H-"+(R+o.width/2)+"V"+a+z+"H-"+z+"Z"),e.attr("transform","translate("+(c._offset+(u.x0+u.x1)/2)+","+(h._offset+("top"===c.side?0:h._length))+")")}else{n.attr("text-anchor","right"===h.side?"start":"end").call(x.Drawing.setPosition,("right"===h.side?1:-1)*(R+z),v-o.top-o.height/2).selectAll("tspan.line").attr({x:n.attr("x"),y:n.attr("y")});var s="right"===h.side?"":"-";r.attr("d","M0,0L"+s+z+","+z+"V"+(R+o.height/2)+"h"+s+(2*R+o.width)+"V-"+(R+o.height/2)+"H"+s+z+"V-"+z+"Z"),e.attr("transform","translate("+(c._offset+("right"===h.side?c._length:0))+","+(h._offset+(u.y0+u.y1)/2)+")")}t=t.filter(function(t){return void 0!==t.zLabelVal||(t[f]||"").split(" ")[0]===p})});var k=s.selectAll("g.hovertext").data(t,function(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr||""].join(",")});return k.enter().append("g").classed("hovertext",!0).each(function(){var t=_.select(this);t.append("rect").call(x.Color.fill,x.Color.addOpacity(a,.8)),t.append("text").classed("name",!0).call(x.Drawing.font,j,O),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(x.Drawing.font,j,O)}),k.exit().remove(),k.each(function(t){var e=_.select(this).attr("transform",""),r="",n="",s=x.Color.opacity(t.color)?t.color:x.Color.defaultLine,l=x.Color.combine(s,a),u=w(l).getBrightness()>128?"#000":x.Color.background;if(t.name&&void 0===t.zLabelVal){var f=document.createElement("p");f.innerHTML=t.name,r=f.textContent||"",r.length>15&&(r=r.substr(0,12)+"...")}void 0!==t.zLabel?(void 0!==t.xLabel&&(n+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(n+="y: "+t.yLabel+"<br>"),n+=(n?"z: ":"")+t.zLabel):b&&t[i+"Label"]===d?n=t[("x"===i?"y":"x")+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&(n=t.yLabel):n=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",t.text&&(n+=(n?"<br>":"")+t.text),""===n&&(""===r&&e.remove(),n=r);var p=e.select("text.nums").style("fill",u).call(x.Drawing.setPosition,0,0).text(n).attr("data-notex",1).call(x.util.convertToTspans);p.selectAll("tspan.line").call(x.Drawing.setPosition,0,0);var g=e.select("text.name"),A=0;r&&r!==n?(g.style("fill",l).text(r).call(x.Drawing.setPosition,0,0).attr("data-notex",1).call(x.util.convertToTspans),g.selectAll("tspan.line").call(x.Drawing.setPosition,0,0),A=g.node().getBoundingClientRect().width+2*R):(g.remove(),e.select("rect").remove()),e.select("path").style({fill:l,stroke:u});var k,M,T=p.node().getBoundingClientRect(),E=c._offset+(t.x0+t.x1)/2,C=h._offset+(t.y0+t.y1)/2,S=Math.abs(t.x1-t.x0),P=Math.abs(t.y1-t.y0),O=T.width+z+R+A;t.ty0=v-T.top,t.bx=T.width+2*R,t.by=T.height+2*R,t.anchor="start",t.txwidth=T.width,t.tx2width=A,t.offset=0,o?(t.pos=E,k=C+P/2+O<=y,M=C-P/2-O>=0,"top"!==t.idealAlign&&k||!M?k?(C+=P/2,t.anchor="start"):t.anchor="middle":(C-=P/2,t.anchor="end")):(t.pos=C,k=E+S/2+O<=m,M=E-S/2-O>=0,"left"!==t.idealAlign&&k||!M?k?(E+=S/2,t.anchor="start"):t.anchor="middle":(E-=S/2,t.anchor="end")),p.attr("text-anchor",t.anchor),A&&g.attr("text-anchor",t.anchor),e.attr("transform","translate("+E+","+C+")"+(o?"rotate("+L+")":""))}),k}function u(t,e){function r(t){var e=t[0],r=t[t.length-1];if(i=h-e.pos-e.dp+e.size,o=r.pos+r.dp+r.size-f,i>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=i;n=!1}if(!(o<.01)){if(i<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=o;n=!1}if(n){var u=0;for(a=0;a<t.length;a++)l=t[a],l.pos+l.dp+l.size>f&&u++;for(a=t.length-1;a>=0&&!(u<=0);a--)l=t[a],l.pos>f-1&&(l.del=!0,u--);for(a=0;a<t.length&&!(u<=0);a++)if(l=t[a],l.pos<h+1)for(l.del=!0,u--,o=2*l.size,s=t.length-1;s>=0;s--)t[s].dp-=o;for(a=t.length-1;a>=0&&!(u<=0);a--)l=t[a],l.pos+l.dp+l.size>f&&(l.del=!0,u--)}}}for(var n,i,o,a,s,l,u,c=0,h=e._offset,f=e._offset+e._length,d=t.map(function(t,r){return[{i:r,dp:0,pos:t.pos,posref:t.posref,size:t.by*("x"===e._id.charAt(0)?C:1)/2}]}).sort(function(t,e){return t[0].posref-e[0].posref});!n&&c<=t.length;){for(c++,n=!0,a=0;a<d.length-1;){var p=d[a],g=d[a+1],v=p[p.length-1],m=g[0];if(i=v.pos+v.dp+v.size-m.pos-m.dp+m.size,i>.01){for(s=g.length-1;s>=0;s--)g[s].dp+=i;for(p.push.apply(p,g),d.splice(a+1,1),u=0,s=p.length-1;s>=0;s--)u+=p[s].dp;for(o=u/p.length,s=p.length-1;s>=0;s--)p[s].dp-=o;n=!1}else a++}d.forEach(r)}for(a=d.length-1;a>=0;a--){var y=d[a];for(s=y.length-1;s>=0;s--){var b=y[s],x=t[b.i];x.offset=b.dp,x.del=b.del}}}function c(t,e){t.each(function(t){var r=_.select(this);if(t.del)return void r.remove();var n="end"===t.anchor?-1:1,i=r.select("text.nums"),o={start:1,end:-1,middle:0}[t.anchor],a=o*(z+R),s=a+o*(t.txwidth+R),l=0,u=t.offset;"middle"===t.anchor&&(a-=t.tx2width/2,s-=t.tx2width/2),e&&(u*=-P,l=t.offset*S),r.select("path").attr("d","middle"===t.anchor?"M-"+t.bx/2+",-"+t.by/2+"h"+t.bx+"v"+t.by+"h-"+t.bx+"Z":"M0,0L"+(n*z+l)+","+(z+u)+"v"+(t.by/2-z)+"h"+n*t.bx+"v-"+t.by+"H"+(n*z+l)+"V"+(u-z)+"Z"),i.call(x.Drawing.setPosition,a+l,u+t.ty0-t.by/2+R).selectAll("tspan.line").attr({x:i.attr("x"),y:i.attr("y")}),t.tx2width&&(r.select("text.name, text.name tspan.line").call(x.Drawing.setPosition,s+o*R+l,u+t.ty0-t.by/2+R),r.select("rect").call(x.Drawing.setRect,s+(o-1)*t.tx2width/2+l,u-t.by/2-1,t.tx2width,t.by+2))})}function h(t,e,r){if(!e.target)return!1;if(!r||r.length!==t._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var i=r[n],o=t._hoverdata[n];if(i.curveNumber!==o.curveNumber||String(i.pointNumber)!==String(o.pointNumber))return!0}return!1}function f(t,e){var r=t._fullLayout;e||(e={}),e.target&&k.triggerHandler(t,"plotly_beforehover",e)===!1||(r._hoverlayer.selectAll("g").remove(),e.target&&t._hoverdata&&t.emit("plotly_unhover",{points:t._hoverdata}),t._hoverdata=void 0)}function d(t,e){return t?"nsew"===t?"pan"===e?"move":"crosshair":t.toLowerCase()+"-resize":"pointer"}function p(t,e,r,n,i,o,a,s){function l(t,e){for(E=0;E<t.length;E++)if(!t[E].fixedrange)return e;return""}function u(t){t[0]=Number(t[0]),t[1]=Number(t[1])}function c(r,n,i){var o=H.getBoundingClientRect();for(Y=n-o.left,X=i-o.top,W={l:Y,r:Y,w:0,t:X,b:X,h:0},Z=t._hmpixcount?t._hmlumcount/t._hmpixcount:w(t._fullLayout.plot_bgcolor).getLuminance(),Q=Q="M0,0H"+j+"V"+I+"H0V0",K=!1,$="xy",J=e.plot.append("path").attr("class","zoombox").style({fill:Z>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",Q+"Z"),tt=e.plot.append("path").attr("class","zoombox-corners").style({fill:x.Color.background,stroke:x.Color.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),E=0;E<D.length;E++)u(D[E].range)}function h(t,e){var r=Math.max(0,Math.min(j,t+Y)),n=Math.max(0,Math.min(I,e+X)),i=Math.abs(r-Y),o=Math.abs(n-X),a=Math.floor(Math.min(o,i,M.MINZOOM)/2);W.l=Math.min(Y,r),W.r=Math.max(Y,r),W.t=Math.min(X,n),W.b=Math.max(X,n),!B||o<Math.min(Math.max(.6*i,M.MINDRAG),M.MINZOOM)?i<M.MINDRAG?($="",W.r=W.l,W.t=W.b,tt.attr("d","M0,0Z")):(W.t=0,W.b=I,$="x",tt.attr("d","M"+(W.l-.5)+","+(X-M.MINZOOM-.5)+"h-3v"+(2*M.MINZOOM+1)+"h3ZM"+(W.r+.5)+","+(X-M.MINZOOM-.5)+"h3v"+(2*M.MINZOOM+1)+"h-3Z")):!F||i<Math.min(.6*o,M.MINZOOM)?(W.l=0,W.r=j,$="y",tt.attr("d","M"+(Y-M.MINZOOM-.5)+","+(W.t-.5)+"v-3h"+(2*M.MINZOOM+1)+"v3ZM"+(Y-M.MINZOOM-.5)+","+(W.b+.5)+"v3h"+(2*M.MINZOOM+1)+"v-3Z")):($="xy",tt.attr("d","M"+(W.l-3.5)+","+(W.t-.5+a)+"h3v"+-a+"h"+a+"v-3h-"+(a+3)+"ZM"+(W.r+3.5)+","+(W.t-.5+a)+"h-3v"+-a+"h"+-a+"v-3h"+(a+3)+"ZM"+(W.r+3.5)+","+(W.b+.5-a)+"h-3v"+a+"h"+-a+"v3h"+(a+3)+"ZM"+(W.l-3.5)+","+(W.b+.5-a)+"h3v"+a+"h"+a+"v3h-"+(a+3)+"Z")),W.w=W.r-W.l,W.h=W.b-W.t,J.attr("d",Q+"M"+W.l+","+W.t+"v"+W.h+"h"+W.w+"v-"+W.h+"h-"+W.w+"Z"),K||(J.transition().style("fill",Z>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),tt.transition().style("opacity",1).duration(200),K=!0)}function f(t,e,r){var n,i,o;for(n=0;n<t.length;n++)i=t[n],i.fixedrange||(o=i.range,i.range=[o[0]+(o[1]-o[0])*e,o[0]+(o[1]-o[0])*r])}function p(e,r){return Math.min(W.h,W.w)<2*M.MINDRAG?(2===r?k():v(t),y(t)):("xy"!==$&&"x"!==$||f(R,W.l/j,W.r/j),"xy"!==$&&"y"!==$||f(O,(I-W.b)/I,(I-W.t)/I),y(t),T($),void(N&&t.data&&t._context.showTips&&(x.Lib.notifier("Double-click to<br>zoom back out","long"),N=!1)))}function m(e,r){var n=1===(a+s).length;if(e)T();else if(2!==r||n)if(1===r&&n){var i=a?O[0]:R[0],o="s"===a||"w"===s?0:1,l=i._name+".range["+o+"]",u=g(i,o),c="left",h="middle";if(i.fixedrange)return;a?(h="n"===a?"top":"bottom","right"===i.side&&(c="right")):"e"===s&&(c="right"),q.call(x.util.makeEditable,null,{immediate:!0,background:P.paper_bgcolor,text:String(u),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:c,verticalAlign:h}).on("edit",function(e){var r="category"===i.type?i.c2l(e):i.d2l(e);void 0!==r&&x.relayout(t,l,r)})}else v(t);else k()}function b(e){function r(t,e,r){if(!t.fixedrange){u(t.range);var n=t.range,i=n[0]+(n[1]-n[0])*e;t.range=[i+(n[0]-i)*r,i+(n[1]-i)*r]}}if(t._context.scrollZoom||P._enablescrollzoom){var n=t.querySelector(".plotly");if(!(n.scrollHeight-n.clientHeight>10||n.scrollWidth-n.clientWidth>10)){clearTimeout(rt);var i=-e.deltaY;if(isFinite(i)||(i=e.wheelDelta/10),!isFinite(i))return void console.log("did not find wheel motion attributes",e);var o,l=Math.exp(-Math.min(Math.max(i,-20),20)/100),c=it.draglayer.select(".nsewdrag").node().getBoundingClientRect(),h=(e.clientX-c.left)/c.width,f=et[0]+et[2]*h,d=(c.bottom-e.clientY)/c.height,p=et[1]+et[3]*(1-d);if(s){for(o=0;o<R.length;o++)r(R[o],h,l);et[2]*=l,et[0]=f-et[2]*h}if(a){for(o=0;o<O.length;o++)r(O[o],d,l);et[3]*=l,et[1]=p-et[3]*(1-d)}return L(et),A(a,s),rt=setTimeout(function(){et=[0,0,j,I],T()},nt),x.Lib.pauseEvent(e)}}}function _(t,e){function r(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.fixedrange||(n.range=[n._r[0]-e/n._m,n._r[1]-e/n._m])}}function n(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function i(t,e,r){for(var i=1-e,o=0,a=0;a<t.length;a++){var s=t[a];s.fixedrange||(o=a,s.range[e]=s._r[i]+(s._r[e]-s._r[i])/n(r/s._length))}return t[o]._length*(t[o]._r[e]-t[o].range[e])/(t[o]._r[e]-t[o]._r[i])}return"ew"===F||"ns"===B?(F&&r(R,t),B&&r(O,e),L([F?-t:0,B?-e:0,j,I]),void A(B,F)):("w"===F?t=i(R,0,t):"e"===F?t=i(R,1,-t):F||(t=0),"n"===B?e=i(O,1,e):"s"===B?e=i(O,0,-e):B||(e=0),L(["w"===F?t:0,"n"===B?e:0,j-t,I-e]),void A(B,F))}function A(e,r){function n(t){for(o=0;o<t.length;o++)t[o].fixedrange||a.push(t[o]._id)}function i(n,i){var s;for(o=0;o<n.length;o++)s=n[o],(r&&a.indexOf(s.xref)!==-1||e&&a.indexOf(s.yref)!==-1)&&i.draw(t,o)}var o,a=[];for(r&&n(R),e&&n(O),o=0;o<a.length;o++)x.Axes.doTicks(t,a[o],!0);i(P.annotations||[],x.Annotations),i(P.shapes||[],x.Shapes)}function k(){var e,r,n=t._context.doubleClick,i=(F?R:[]).concat(B?O:[]),o={};if("autosize"===n)for(r=0;r<i.length;r++)e=i[r],e.fixedrange||(o[e._name+".autorange"]=!0);else if("reset"===n)for(r=0;r<i.length;r++)e=i[r],o[e._name+".range"]=e._rangeInitial.slice();else if("reset+autosize"===n)for(r=0;r<i.length;r++)e=i[r],e.fixedrange||(void 0===e._rangeInitial||e.range[0]===e._rangeInitial[0]&&e.range[1]===e._rangeInitial[1]?o[e._name+".autorange"]=!0:o[e._name+".range"]=e._rangeInitial.slice());x.relayout(t,o)}function T(e){for(var r={},n=0;n<D.length;n++){var i=D[n];e&&e.indexOf(i._id.charAt(0))===-1||(i._r[0]!==i.range[0]&&(r[i._name+".range[0]"]=i.range[0]),i._r[1]!==i.range[1]&&(r[i._name+".range[1]"]=i.range[1]),i.range=i._r.slice())}L([0,0,j,I]),x.relayout(t,r)}function L(t){var e,r,n,i,o,l,u=P._plots,c=Object.keys(u);for(e=0;e<c.length;e++)if(r=u[c[e]],n=r.x(),i=r.y(),o=s&&R.indexOf(n)!==-1&&!n.fixedrange,l=a&&O.indexOf(i)!==-1&&!i.fixedrange,o||l){var h=[0,0,n._length,i._length];o&&(h[0]=t[0],h[2]=t[2]),l&&(h[1]=t[1],h[3]=t[3]),r.plot.attr("viewBox",h.join(" "))}}var E,C,S,P=t._fullLayout,z=[e].concat(a&&s?e.overlays:[]),R=[e.x()],O=[e.y()],j=R[0]._length,I=O[0]._length;for(E=1;E<z.length;E++)C=z[E].x(),S=z[E].y(),R.indexOf(C)===-1&&R.push(C),O.indexOf(S)===-1&&O.push(S);var D=R.concat(O),F=l(R,s),B=l(O,a),U=d(B+F,P.dragmode),V=a+s+"drag",q=e.draglayer.selectAll("."+V).data([0]);q.enter().append("rect").classed("drag",!0).classed(V,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id),q.call(x.Drawing.setRect,r,n,i,o).call(M.setCursor,U);var H=q.node();if(!B&&!F)return H.onmousedown=null,H.style.pointerEvents=a+s==="nsew"?"all":"none",H;var G={element:H,prepFn:function(t,e,r){a+s==="nsew"&&("zoom"===P.dragmode?!t.shiftKey:t.shiftKey)?(G.moveFn=h,G.doneFn=p,c(t,e,r)):(G.moveFn=_,G.doneFn=m)}};M.dragElement(G);var Y,X,W,Z,Q,K,$,J,tt,et=[0,0,j,I],rt=null,nt=300,it=e.mainplot?P._plots[e.mainplot]:e;return a.length*s.length!==1&&(void 0!==H.onwheel?H.onwheel=b:void 0!==H.onmousewheel&&(H.onmousewheel=b)),H}function g(t,e){var r,n=t.range[e],i=Math.abs(n-t.range[1-e]);return"date"===t.type?x.Lib.ms2DateTime(n,i):"log"===t.type?(r=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,_.format("."+r+"g")(Math.pow(10,n))):(r=Math.floor(Math.log(Math.abs(n))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,_.format("."+String(r)+"g")(n))}function v(t){t._dragging=!0;var e=t._replotPending;t._replotPending=!1,setTimeout(function(){t._replotPending=e,m(t)},M.DBLCLICKDELAY)}function m(t){t._dragging=!1,t._replotPending&&x.plot(t)}function y(t){_.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function b(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e["z-index"]=999999999,e.background="none",document.body.appendChild(t),t}var x=t("../../plotly"),_=t("d3"),w=t("tinycolor2"),A=t("fast-isnumeric"),k=t("../../lib/events"),M=e.exports={};M.layoutAttributes={dragmode:{valType:"enumerated",values:["zoom","pan","orbit","turntable"]},hovermode:{valType:"enumerated",values:["x","y","closest",!1]}},M.supplyLayoutDefaults=function(t,e,r){function n(r,n){return x.Lib.coerce(t,e,M.layoutAttributes,r,n)}var i,o;n("dragmode",e._hasGL3D?"turntable":"zoom"),e._hasCartesian?(i=e._isHoriz=M.isHoriz(r),o=i?"y":"x"):o="closest",n("hovermode",o)},M.isHoriz=function(t){var e,r,n=!0;for(e=0;e<t.length;e++)if(r=t[e],"h"!==r.orientation){n=!1;break}return n},M.DBLCLICKDELAY=600,M.MINDRAG=8,M.MINZOOM=20;var T=20;M.init=function(t){var e=t._fullLayout;if(!(e._hasGL3D||e._hasGeo||t._context.staticPlot)){var r=Object.keys(e._plots||{}).sort(function(t,r){if((e._plots[t].mainplot&&!0)===(e._plots[r].mainplot&&!0)){
/src/dist/plotly.min.js-35-var n=t.split("y"),i=r.split("y");return n[0]===i[0]?Number(n[1]||1)-Number(i[1]||1):Number(n[0]||1)-Number(i[0]||1)}return e._plots[t].mainplot?1:-1});r.forEach(function(r){var n=e._plots[r];if(e._hasCartesian){var i=n.x(),o=n.y(),a=(i._linepositions[r]||[])[3],s=(o._linepositions[r]||[])[3];if(A(a)&&"top"===i.side&&(a-=T),A(s)&&"right"!==o.side&&(s-=T),!n.mainplot){var l=p(t,n,0,0,i._length,o._length,"ns","ew");l.onmousemove=function(n){M.hover(t,n,r),e._lasthover=l,e._hoversubplot=r},l.onmouseout=function(e){t._dragging||M.unhover(t,e)},l.onclick=function(e){M.click(t,e)},p(t,n,-T,-T,T,T,"n","w"),p(t,n,i._length,-T,T,T,"n","e"),p(t,n,-T,o._length,T,T,"s","w"),p(t,n,i._length,o._length,T,T,"s","e")}A(a)&&("free"===i.anchor&&(a-=e._size.h*(1-o.domain[1])),p(t,n,.1*i._length,a,.8*i._length,T,"","ew"),p(t,n,0,a,.1*i._length,T,"","w"),p(t,n,.9*i._length,a,.1*i._length,T,"","e")),A(s)&&("free"===o.anchor&&(s-=e._size.w*i.domain[0]),p(t,n,s,.1*o._length,T,.8*o._length,"ns",""),p(t,n,s,.9*o._length,T,.1*o._length,"s",""),p(t,n,s,0,T,.1*o._length,"n",""))}});var n=e._hoverlayer.node();n.onmousemove=function(r){r.target=e._lasthover,M.hover(t,r,e._hoversubplot)},n.onclick=function(r){r.target=e._lasthover,M.click(t,r)},n.onmousedown=function(t){e._lasthover.onmousedown(t)}}};var L=60,E=Math.PI*L/180,C=1/Math.sin(E),S=Math.cos(E),P=Math.sin(E),z=6,R=3,O=13,j="Arial, sans-serif";M.MAXDIST=20;var I=100;M.hover=function(t,e,r){return"string"==typeof t&&(t=document.getElementById(t)),void 0===t._lastHoverTime&&(t._lastHoverTime=0),void 0!==t._hoverTimer&&(clearTimeout(t._hoverTimer),t._hoverTimer=void 0),Date.now()>t._lastHoverTime+I?(a(t,e,r),void(t._lastHoverTime=Date.now())):void(t._hoverTimer=setTimeout(function(){a(t,e,r),t._lastHoverTime=Date.now(),t._hoverTimer=void 0},I))},M.unhover=function(t,e,r){"string"==typeof t&&(t=document.getElementById(t)),t._hoverTimer&&(clearTimeout(t._hoverTimer),t._hoverTimer=void 0),f(t,e,r)},M.getDistanceFunction=function(t,e,r,n){return"closest"===t?n||o(e,r):"x"===t?e:r},M.getClosest=function(t,e,r){if(r.index!==!1)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var n=0;n<t.length;n++){var i=e(t[n]);i<r.distance&&(r.index=n,r.distance=i)}return r},M.loneHover=function(t,e){var r={color:t.color||x.Color.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},n=_.select(e.container),i=e.outerContainer?_.select(e.outerContainer):n,o={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||x.Color.background,container:n,outerContainer:i},a=l([r],o);return c(a,o.rotateLabels),a.node()},M.loneUnhover=function(t){var e=t instanceof _.selection?t:_.select(t);e.selectAll("g.hovertext").remove()},M.click=function(t,e){t._hoverdata&&e&&e.target&&(t.emit("plotly_click",{points:t._hoverdata}),e.stopImmediatePropagation())};var N=!0;M.dragAlign=function(t,e,r,n,i){var o=(t-r)/(n-r),a=o+e/(n-r),s=(o+a)/2;return"left"===i||"bottom"===i?o:"center"===i||"middle"===i?s:"right"===i||"top"===i?a:o<2/3-s?o:a>4/3-s?a:s};var D=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];M.dragCursors=function(t,e,r,n){return t="left"===r?0:"center"===r?1:"right"===r?2:x.Lib.constrain(Math.floor(3*t),0,2),e="bottom"===n?0:"middle"===n?1:"top"===n?2:x.Lib.constrain(Math.floor(3*e),0,2),D[e][t]},M.dragElement=function(t){function e(e){var h=document.querySelector(".plugin-editable");return h&&_.select(h).on("blur").call(h),u._dragged=!1,u._dragging=!0,i=e.clientX,o=e.clientY,l=e.target,a=(new Date).getTime(),a-u._mouseDownTime<M.DBLCLICKDELAY?c+=1:(c=1,u._mouseDownTime=a),t.prepFn&&t.prepFn(e,i,o),s=b(),s.onmousemove=r,s.onmouseup=n,s.onmouseout=n,x.Lib.pauseEvent(e)}function r(e){var r=e.clientX-i,n=e.clientY-o;return Math.abs(r)<M.MINDRAG&&(r=0),Math.abs(n)<M.MINDRAG&&(n=0),(r||n)&&(u._dragged=!0),t.moveFn&&t.moveFn(r,n,u._dragged),x.Lib.pauseEvent(e)}function n(e){if(s.onmousemove=null,s.onmouseup=null,s.onmouseout=null,x.Lib.removeElement(s),!u._dragging)return void(u._dragged=!1);if(u._dragging=!1,(new Date).getTime()-u._mouseDownTime>M.DBLCLICKDELAY&&(c=Math.max(c-1,1)),t.doneFn&&t.doneFn(u._dragged,c),!u._dragged){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),l.dispatchEvent(r)}return m(u),u._dragged=!1,x.Lib.pauseEvent(e)}var i,o,a,s,l,u=x.Lib.getPlotDiv(t.element)||{},c=1;u._mouseDownTime||(u._mouseDownTime=0),t.element.onmousedown=e,t.element.style.pointerEvents="all"},M.setCursor=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)},M.inbox=function(t,e){return t*e<0||0===t?M.MAXDIST*(.6-.3/Math.max(3,Math.abs(t-e))):1/0}},{"../../lib/events":308,"../../plotly":329,d3:69,"fast-isnumeric":77,tinycolor2:257}],334:[function(t,e,r){var n=t("../../plotly"),i=t("../font_attributes"),o=t("../../components/color/attributes"),a=t("../../lib/extend").extendFlat;e.exports={title:{valType:"string"},titlefont:a({},i,{}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal"},range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},fixedrange:{valType:"boolean",dflt:!1},tickmode:{valType:"enumerated",values:["auto","linear","array"]},nticks:{valType:"integer",min:0,dflt:0},tick0:{valType:"number",dflt:0},dtick:{valType:"any",dflt:1},tickvals:{valType:"data_array"},ticktext:{valType:"data_array"},ticks:{valType:"enumerated",values:["outside","inside",""]},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1},ticklen:{valType:"number",min:0,dflt:5},tickwidth:{valType:"number",min:0,dflt:1},tickcolor:{valType:"color",dflt:o.defaultLine},showticklabels:{valType:"boolean",dflt:!0},tickfont:a({},i,{}),tickangle:{valType:"angle",dflt:"auto"},tickprefix:{valType:"string",dflt:""},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},ticksuffix:{valType:"string",dflt:""},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B"},tickformat:{valType:"string",dflt:""},hoverformat:{valType:"string",dflt:""},showline:{valType:"boolean",dflt:!1},linecolor:{valType:"color",dflt:o.defaultLine},linewidth:{valType:"number",min:0,dflt:1},showgrid:{valType:"boolean"},gridcolor:{valType:"color",dflt:o.lightLine},gridwidth:{valType:"number",min:0,dflt:1},zeroline:{valType:"boolean"},zerolinecolor:{valType:"color",dflt:o.defaultLine},zerolinewidth:{valType:"number",dflt:1},anchor:{valType:"enumerated",values:["free",n.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),n.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},side:{valType:"enumerated",values:["top","bottom","left","right"]},overlaying:{valType:"enumerated",values:["free",n.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),n.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},position:{valType:"number",min:0,max:1,dflt:0},_deprecated:{autotick:{valType:"boolean"}}}},{"../../components/color/attributes":279,"../../lib/extend":309,"../../plotly":329,"../font_attributes":335}],335:[function(t,e,r){e.exports={family:{valType:"string",noBlank:!0,strict:!0},size:{valType:"number",min:1},color:{valType:"color"}}},{}],336:[function(t,e,r){"use strict";function n(t,e){this.id=t.id,this.container=t.container,this.topojsonURL=t.topojsonURL,h(),this.showHover="closest"===e.hovermode,this.hoverContainer=null,this.topojsonName=null,this.topojson=null,this.projectionType=null,this.projection=null,this.clipAngle=null,this.setScale=null,this.path=null,this.zoom=null,this.zoomReset=null,this.makeFramework()}function i(t,e,r){return c.geo.graticule().extent([[t[0],e[0]],[t[1],e[1]]]).step(r)}function o(t,e,r){var n=m.layerNameToAdjective[e];t.select("."+e).selectAll("path").attr("stroke","none").call(u.Color.fill,r[n+"color"])}function a(t,e,r){var n=m.layerNameToAdjective[e];t.select("."+e).selectAll("path").attr("fill","none").call(u.Color.stroke,r[n+"color"]).call(u.Drawing.dashLine,"",r[n+"width"])}function s(t,e,r){t.select("."+e+"graticule").selectAll("path").attr("fill","none").call(u.Color.stroke,r[e].gridcolor).call(u.Drawing.dashLine,"",r[e].gridwidth)}function l(t){var e={type:"linear",showexponent:"all",exponentformat:u.Axes.layoutAttributes.exponentformat.dflt,_td:{_fullLayout:t}};return u.Axes.setConvert(e),e}var u=t("../../plotly"),c=t("d3"),h=t("./projections"),f=t("./set_scale"),d=t("./zoom"),p=t("./zoom_reset"),g=t("../../traces/scattergeo/plot"),v=t("../../traces/choropleth/plot"),m=t("../../constants/geo_constants"),y=t("../../lib/topojson_utils"),b=t("topojson").feature;e.exports=n;var x=n.prototype;x.plot=function(t,e){var r,n,i=this,o=e[i.id],a=e._size;i.projection=null,i.setScale=f(o,a),i.makeProjection(o),i.makePath(),i.adjustLayout(o,a),i.zoom=d(i,o),i.zoomReset=p(i,o),i.mockAxis=l(e),i.framework.call(i.zoom).on("dblclick.zoom",i.zoomReset),r=y.getTopojsonName(o),null===i.topojson||r!==i.topojsonName?(i.topojsonName=r,void 0!==PlotlyGeoAssets.topojson[i.topojsonName]?(i.topojson=PlotlyGeoAssets.topojson[i.topojsonName],i.onceTopojsonIsLoaded(t,o)):(n=y.getTopojsonPath(i.topojsonURL,i.topojsonName),c.json(n,function(e,r){i.topojson=r,PlotlyGeoAssets.topojson[i.topojsonName]=r,i.onceTopojsonIsLoaded(t,o)}))):i.onceTopojsonIsLoaded(t,o)},x.onceTopojsonIsLoaded=function(t,e){var r,n,i=[],o=[];this.drawLayout(e);for(var a=0;a<t.length;a++)r=t[a],n=r.type,"scattergeo"===r.type?i.push(r):"choropleth"===r.type&&o.push(r);i.length>0&&g.plot(this,i),o.length>0&&v.plot(this,o,e),this.render()},x.makeProjection=function(t){var e,r=t.projection,n=r.type,i=null===this.projection||n!==this.projectionType;i?(this.projectionType=n,e=this.projection=c.geo[m.projNames[n]]()):e=this.projection,e.translate(r._translate0).precision(m.precision),t._isAlbersUsa||e.rotate(r._rotate).center(r._center),t._clipAngle?(this.clipAngle=t._clipAngle,e.clipAngle(t._clipAngle-m.clipPad)):this.clipAngle=null,r.parallels&&e.parallels(r.parallels),i&&this.setScale(e),e.translate(r._translate).scale(r._scale)},x.makePath=function(){this.path=c.geo.path().projection(this.projection)},x.makeFramework=function(){var t=this.geoDiv=c.select(this.container).append("div");t.attr("id",this.id).style("position","absolute");var e=this.hoverContainer=t.append("svg");e.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}).style({position:"absolute","z-index":20,"pointer-events":"none"});var r=this.framework=t.append("svg");r.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink",position:"absolute",preserveAspectRatio:"none"}),r.append("g").attr("class","bglayer").append("rect"),r.append("g").attr("class","baselayer"),r.append("g").attr("class","choroplethlayer"),r.append("g").attr("class","baselayeroverchoropleth"),r.append("g").attr("class","scattergeolayer"),r.on("dblclick.zoom",null)},x.adjustLayout=function(t,e){var r=t.domain;this.geoDiv.style({left:e.l+e.w*r.x[0]+t._marginX+"px",top:e.t+e.h*(1-r.y[1])+t._marginY+"px",width:t._width+"px",height:t._height+"px"}),this.hoverContainer.attr({width:t._width,height:t._height}),this.framework.attr({width:t._width,height:t._height}),this.framework.select(".bglayer").select("rect").attr({width:t._width,height:t._height}).style({fill:t.bgcolor,"stroke-width":0})},x.drawTopo=function(t,e,r){if(r["show"+e]===!0){var n=this.topojson,i="frame"===e?m.sphereSVG:b(n,n.objects[e]);t.append("g").datum(i).attr("class",e).append("path").attr("class","basepath")}},x.drawGraticule=function(t,e,r){var n=r[e];if(n.showgrid===!0){var o=m.scopeDefaults[r.scope],a=o.lonaxisRange,s=o.lataxisRange,l="lonaxis"===e?[n.dtick]:[0,n.dtick],u=i(a,s,l);t.append("g").datum(u).attr("class",e+"graticule").append("path").attr("class","graticulepath")}},x.drawLayout=function(t){var e,r=this.framework.select("g.baselayer"),n=m.baseLayers,i=m.axesNames;r.selectAll("*").remove();for(var o=0;o<n.length;o++)e=n[o],i.indexOf(e)!==-1?this.drawGraticule(r,e,t):this.drawTopo(r,e,t);this.styleLayout(t)},x.styleLayer=function(t,e,r){var n=m.fillLayers,i=m.lineLayers;n.indexOf(e)!==-1?o(t,e,r):i.indexOf(e)!==-1&&a(t,e,r)},x.styleLayout=function(t){for(var e,r=this.framework.select("g.baselayer"),n=m.baseLayers,i=m.axesNames,o=0;o<n.length;o++)e=n[o],i.indexOf(e)!==-1?s(r,e,t):this.styleLayer(r,e,t)},x.render=function(){function t(t){var e=o([t.lon,t.lat]);return e?"translate("+e[0]+","+e[1]+")":null}function e(t){var e=o.rotate(),r=c.geo.distance([t.lon,t.lat],[-e[0],-e[1]]),n=s*Math.PI/180;return r>n?"0":"1.0"}var r=this.framework,n=r.select("g.choroplethlayer"),i=r.select("g.scattergeolayer"),o=this.projection,a=this.path,s=this.clipAngle;r.selectAll("path.basepath").attr("d",a),r.selectAll("path.graticulepath").attr("d",a),n.selectAll("path.choroplethlocation").attr("d",a),n.selectAll("path.basepath").attr("d",a),i.selectAll("path.js-line").attr("d",a),null!==s?(i.selectAll("path.point").style("opacity",e).attr("transform",t),i.selectAll("text").style("opacity",e).attr("transform",t)):(i.selectAll("path.point").attr("transform",t),i.selectAll("text").attr("transform",t))}},{"../../constants/geo_constants":299,"../../lib/topojson_utils":324,"../../plotly":329,"../../traces/choropleth/plot":383,"../../traces/scattergeo/plot":406,"./projections":343,"./set_scale":344,"./zoom":345,"./zoom_reset":346,d3:69,topojson:259}],337:[function(t,e,r){e.exports={geo:{valType:"geoid",dflt:"geo"}}},{}],338:[function(t,e,r){var n=t("../../../components/color/attributes");e.exports={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:n.lightLine},gridwidth:{valType:"number",min:0,dflt:1}}},{"../../../components/color/attributes":279}],339:[function(t,e,r){"use strict";var n=t("../../../plotly"),i=t("../../../constants/geo_constants"),o=t("./axis_attributes");e.exports=function(t,e){function r(t,e){return n.Lib.coerce(c,h,o,t,e)}function a(t){var r,n,o,a,s,l,u=e.scope;return"world"===u?(r=e.projection,n=r.type,o=r.rotation,s=i[t+"Span"],l=void 0!==s[n]?s[n]/2:s["*"]/2,a="lonaxis"===t?o.lon:o.lat,[a-l,a+l]):i.scopeDefaults[u][t+"Range"]}for(var s=i.axesNames,l=0;l<s.length;l++){var u=s[l],c=t[u]||{},h={},f=a(u),d=r("range",f);n.Lib.noneOrAll(c.range,h.range,[0,1]),r("tick0",d[0]),r("dtick","lonaxis"===u?30:10);var p=r("showgrid");p&&(r("gridcolor"),r("gridwidth")),e[u]=h,e[u]._fullRange=f}}},{"../../../constants/geo_constants":299,"../../../plotly":329,"./axis_attributes":338}],340:[function(t,e,r){"use strict";function n(t,e,r){var n,i=r("scope"),a="world"!==i,l=o.scopeDefaults[i],u=r("resolution"),c=r("projection.type",l.projType),h="albers usa"===c,f=c.indexOf("conic")!==-1;if(f){var d=l.projParallels||[0,60];r("projection.parallels",d)}if(h)e.scope="usa";else{var p=l.projRotate||[0,0,0];r("projection.rotation.lon",p[0]),r("projection.rotation.lat",p[1]),r("projection.rotation.roll",p[2]),n=r("showcoastlines",!a),n&&(r("coastlinecolor"),r("coastlinewidth")),n=r("showocean"),n&&r("oceancolor")}r("projection.scale"),n=r("showland"),n&&r("landcolor"),n=r("showlakes"),n&&r("lakecolor"),n=r("showrivers"),n&&(r("rivercolor"),r("riverwidth")),n=r("showcountries",a),n&&(r("countrycolor"),r("countrywidth")),("usa"===i||"north america"===i&&50===u)&&(r("showsubunits",!0),r("subunitcolor"),r("subunitwidth")),a||(n=r("showframe",!0),n&&(r("framecolor"),r("framewidth"))),r("bgcolor"),s(t,e),e._isHighRes=50===u,e._clipAngle=o.lonaxisSpan[c]/2,e._isAlbersUsa=h,e._isConic=f,e._isScoped=a;var g=e.projection.rotation||{};e.projection._rotate=[-g.lon||0,-g.lat||0,g.roll||0]}var i=t("../../../plotly"),o=t("../../../constants/geo_constants"),a=t("./layout_attributes"),s=t("./axis_defaults");e.exports=function(t,e,r){function o(t,e){return i.Lib.coerce(h,f,a,t,e)}for(var s=i.Plots.getSubplotIdsInData(r,"geo"),l=s.length,u=0;u<l;u++){var c=s[u],h=t[c]||{},f={};o("domain.x"),o("domain.y",[u/l,(u+1)/l]),n(h,f,o),e[c]=f}}},{"../../../constants/geo_constants":299,"../../../plotly":329,"./axis_defaults":339,"./layout_attributes":342}],341:[function(t,e,r){"use strict";var n=t("../../../plotly"),i=t("./attributes");n.Plots.registerSubplot("geo","geo","geo",i),r.layoutAttributes=t("./layout_attributes"),r.supplyLayoutDefaults=t("./defaults")},{"../../../plotly":329,"./attributes":337,"./defaults":340,"./layout_attributes":342}],342:[function(t,e,r){var n=t("../../../components/color/attributes"),i=t("../../../constants/geo_constants"),o=t("./axis_attributes");e.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(i.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(i.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,max:10,dflt:1}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:n.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:i.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:i.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:i.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:i.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:n.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:n.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:n.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:n.background},lonaxis:o,lataxis:o}},{"../../../components/color/attributes":279,"../../../constants/geo_constants":299,"./axis_attributes":338}],343:[function(t,e,r){function n(){function t(t,r){return{type:"Feature",id:t.id,properties:t.properties,geometry:e(t.geometry,r)}}function e(t,r){if(!t)return null;if("GeometryCollection"===t.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(t){return e(t,r)})};if(!k.hasOwnProperty(t.type))return null;var n=k[t.type];return i.geo.stream(t,r(n)),n.result()}function r(){}function n(t){if((e=t.length)<4)return!1;for(var e,r=0,n=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++r<e;)n+=t[r-1][1]*t[r][0]-t[r-1][0]*t[r][1];return n<=0}function o(t,e){for(var r=e[0],n=e[1],i=!1,o=0,a=t.length,s=a-1;o<a;s=o++){var l=t[o],u=l[0],c=l[1],h=t[s],f=h[0],d=h[1];c>n^d>n&&r<(f-u)*(n-c)/(d-c)+u&&(i=!i)}return i}function a(t){return t>1?E:t<-1?-E:Math.asin(t)}function s(t,e){var r=(2+E)*Math.sin(e);e/=2;for(var n=0,i=1/0;n<10&&Math.abs(i)>M;n++){var o=Math.cos(e);e-=i=(e+Math.sin(e)*(o+2)-r)/(2*o*(1+o))}return[2/Math.sqrt(L*(4+L))*t*(1+Math.cos(e)),2*Math.sqrt(L/(4+L))*Math.sin(e)]}function l(t,e){function r(r,n){var i=R(r/e,n);return i[0]*=t,i}return arguments.length<2&&(e=t),1===e?R:e===1/0?c:(r.invert=function(r,n){var i=R.invert(r/t,n);return i[0]*=e,i},r)}function u(){var t=2,e=z(l),r=e(t);return r.coefficient=function(r){return arguments.length?e(t=+r):t},r}function c(t,e){return[t*Math.cos(e)/Math.cos(e/=2),2*Math.sin(e)]}function h(t,e){return[3*t/(2*L)*Math.sqrt(L*L/3-e*e),e]}function f(t,e){return[t,1.25*Math.log(Math.tan(L/4+.4*e))]}function d(t){return function(e){var r,n=t*Math.sin(e),i=30;do e-=r=(e+Math.sin(e)-n)/(1+Math.cos(e));while(Math.abs(r)>M&&--i>0);return e/2}}function p(t,e,r){function n(r,n){return[t*r*Math.cos(n=i(n)),e*Math.sin(n)]}var i=d(r);return n.invert=function(n,i){var o=a(i/e);return[n/(t*Math.cos(o)),a((2*o+Math.sin(2*o))/r)]},n}function g(t,e){var r=e*e,n=r*r;return[t*(.8707-.131979*r+n*(-.013791+n*(.003971*r-.001529*n))),e*(1.007226+r*(.015085+n*(-.044475+.028874*r-.005916*n)))]}function v(t,e){var r,n=Math.min(18,36*Math.abs(e)/L),i=Math.floor(n),o=n-i,a=(r=j[i])[0],s=r[1],l=(r=j[++i])[0],u=r[1],c=(r=j[Math.min(19,++i)])[0],h=r[1];return[t*(l+o*(c-a)/2+o*o*(c-2*l+a)/2),(e>0?E:-E)*(u+o*(h-s)/2+o*o*(h-2*u+s)/2)]}function m(t,e){return[t*Math.cos(e),e]}i.geo.project=function(t,r){var n=r.stream;if(!n)throw new Error("not yet supported");return(t&&y.hasOwnProperty(t.type)?y[t.type]:e)(t,n)};var y={Feature:t,FeatureCollection:function(e,r){return{type:"FeatureCollection",features:e.features.map(function(e){return t(e,r)})}}},b=[],x=[],_={point:function(t,e){b.push([t,e])},result:function(){var t=b.length?b.length<2?{type:"Point",coordinates:b[0]}:{type:"MultiPoint",coordinates:b}:null;return b=[],t}},w={lineStart:r,point:function(t,e){b.push([t,e])},lineEnd:function(){b.length&&(x.push(b),b=[])},result:function(){var t=x.length?x.length<2?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}:null;return x=[],t}},A={polygonStart:r,lineStart:r,point:function(t,e){b.push([t,e])},lineEnd:function(){var t=b.length;if(t){do b.push(b[0].slice());while(++t<4);x.push(b),b=[]}},polygonEnd:r,result:function(){if(!x.length)return null;var t=[],e=[];return x.forEach(function(r){n(r)?t.push([r]):e.push(r)}),e.forEach(function(e){var r=e[0];t.some(function(t){if(o(t[0],r))return t.push(e),!0})||t.push([e])}),x=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},k={Point:_,MultiPoint:_,LineString:w,MultiLineString:w,Polygon:A,MultiPolygon:A,Sphere:A},M=1e-6,T=M*M,L=Math.PI,E=L/2,C=(Math.sqrt(L),L/180),S=180/L,P=i.geo.projection,z=i.geo.projectionMutator;i.geo.interrupt=function(t){function e(e,r){for(var n=r<0?-1:1,i=l[+(r<0)],o=0,a=i.length-1;o<a&&e>i[o][2][0];++o);var s=t(e-i[o][1][0],r);return s[0]+=t(i[o][1][0],n*r>n*i[o][0][1]?i[o][0][1]:r)[0],s}function r(){s=l.map(function(e){return e.map(function(e){var r,n=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],o=t(e[1][0],e[0][1])[1],a=t(e[1][0],e[1][1])[1];return o>a&&(r=o,o=a,a=r),[[n,o],[i,a]]})})}function n(){for(var t=1e-6,e=[],r=0,n=l[0].length;r<n;++r){var a=l[0][r],s=180*a[0][0]/L,u=180*a[0][1]/L,c=180*a[1][1]/L,h=180*a[2][0]/L,f=180*a[2][1]/L;e.push(o([[s+t,u+t],[s+t,c-t],[h-t,c-t],[h-t,f+t]],30))}for(var r=l[1].length-1;r>=0;--r){var a=l[1][r],s=180*a[0][0]/L,u=180*a[0][1]/L,c=180*a[1][1]/L,h=180*a[2][0]/L,f=180*a[2][1]/L;e.push(o([[h-t,f-t],[h-t,c+t],[s+t,c+t],[s+t,u-t]],30))}return{type:"Polygon",coordinates:[i.merge(e)]}}function o(t,e){for(var r,n,i,o=-1,a=t.length,s=t[0],l=[];++o<a;){r=t[o],n=(r[0]-s[0])/e,i=(r[1]-s[1])/e;for(var u=0;u<e;++u)l.push([s[0]+u*n,s[1]+u*i]);s=r}return l.push(r),l}function a(t,e){return Math.abs(t[0]-e[0])<M&&Math.abs(t[1]-e[1])<M}var s,l=[[[[-L,0],[0,E],[L,0]]],[[[-L,0],[0,-E],[L,0]]]];t.invert&&(e.invert=function(r,n){for(var i=s[+(n<0)],o=l[+(n<0)],u=0,c=i.length;u<c;++u){var h=i[u];if(h[0][0]<=r&&r<h[1][0]&&h[0][1]<=n&&n<h[1][1]){var f=t.invert(r-t(o[u][1][0],0)[0],n);return f[0]+=o[u][1][0],a(e(f[0],f[1]),[r,n])?f:null}}});var u=i.geo.projection(e),c=u.stream;return u.stream=function(t){var e=u.rotate(),r=c(t),o=(u.rotate([0,0]),c(t));return u.rotate(e),r.sphere=function(){i.geo.stream(n(),o)},r},u.lobes=function(t){return arguments.length?(l=t.map(function(t){return t.map(function(t){return[[t[0][0]*L/180,t[0][1]*L/180],[t[1][0]*L/180,t[1][1]*L/180],[t[2][0]*L/180,t[2][1]*L/180]]})}),r(),u):l.map(function(t){return t.map(function(t){return[[180*t[0][0]/L,180*t[0][1]/L],[180*t[1][0]/L,180*t[1][1]/L],[180*t[2][0]/L,180*t[2][1]/L]]})})},u},s.invert=function(t,e){var r=.5*e*Math.sqrt((4+L)/L),n=a(r),i=Math.cos(n);return[t/(2/Math.sqrt(L*(4+L))*(1+i)),a((n+r*(i+2))/(2+E))]},(i.geo.eckert4=function(){return P(s)}).raw=s;var R=i.geo.azimuthalEqualArea.raw;c.invert=function(t,e){var r=2*a(e/2);return[t*Math.cos(r/2)/Math.cos(r),r]},(i.geo.hammer=u).raw=l,h.invert=function(t,e){return[2/3*L*t/Math.sqrt(L*L/3-e*e),e]},(i.geo.kavrayskiy7=function(){return P(h)}).raw=h,f.invert=function(t,e){return[t,2.5*Math.atan(Math.exp(.8*e))-.625*L]},(i.geo.miller=function(){return P(f)}).raw=f;var O=(d(L),p(Math.SQRT2/E,Math.SQRT2,L));(i.geo.mollweide=function(){return P(O)}).raw=O,g.invert=function(t,e){var r,n=e,i=25;do{var o=n*n,a=o*o;n-=r=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-e)/(1.007226+o*(.045255+a*(-.311325+.259866*o-.005916*11*a)))}while(Math.abs(r)>M&&--i>0);return[t/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]},(i.geo.naturalEarth=function(){return P(g)}).raw=g;var j=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];j.forEach(function(t){t[1]*=1.0144}),v.invert=function(t,e){var r=e/E,n=90*r,i=Math.min(18,Math.abs(n/5)),o=Math.max(0,Math.floor(i));do{var a=j[o][1],s=j[o+1][1],l=j[Math.min(19,o+2)][1],u=l-a,c=l-2*s+a,h=2*(Math.abs(r)-s)/u,f=c/u,d=h*(1-f*h*(1-2*f*h));if(d>=0||1===o){n=(e>=0?5:-5)*(d+i);var p,g=50;do i=Math.min(18,Math.abs(n)/5),o=Math.floor(i),d=i-o,a=j[o][1],s=j[o+1][1],l=j[Math.min(19,o+2)][1],n-=(p=(e>=0?E:-E)*(s+d*(l-a)/2+d*d*(l-2*s+a)/2)-e)*S;while(Math.abs(p)>T&&--g>0);break}}while(--o>=0);var v=j[o][0],m=j[o+1][0],y=j[Math.min(19,o+2)][0];return[t/(m+d*(y-v)/2+d*d*(y-2*m+v)/2),n*C]},(i.geo.robinson=function(){return P(v)}).raw=v,m.invert=function(t,e){return[t/Math.cos(e),e]},(i.geo.sinusoidal=function(){return P(m)}).raw=m}var i=t("d3");e.exports=n},{d3:69}],344:[function(t,e,r){"use strict";function n(t,e){var r=t.projection,n=t.lonaxis,a=t.lataxis,l=t.domain,u=t.framewidth||0,c=e.w*(l.x[1]-l.x[0]),h=e.h*(l.y[1]-l.y[0]),f=n.range[0]+s,d=n.range[1]-s,p=a.range[0]+s,g=a.range[1]-s,v=n._fullRange[0]+s,m=n._fullRange[1]-s,y=a._fullRange[0]+s,b=a._fullRange[1]-s;r._translate0=[e.l+c/2,e.t+h/2];var x=d-f,_=g-p,w=[f+x/2,p+_/2],A=r._rotate;r._center=[w[0]+A[0],w[1]+A[1]];var k=function(e){function n(t){return Math.min(_*c/(t[1][0]-t[0][0]),_*h/(t[1][1]-t[0][1]))}var a,s,l,x,_=e.scale(),w=r._translate0,A=i(f,p,d,g),k=i(v,y,m,b);l=o(e,A),a=n(l),x=o(e,k),r._fullScale=n(x),e.scale(a),l=o(e,A),s=[w[0]-l[0][0]+u,w[1]-l[0][1]+u],r._translate=s,e.translate(s),l=o(e,A),t._isAlbersUsa||e.clipExtent(l),a=r.scale*a,r._scale=a,t._width=Math.round(l[1][0])+u,t._height=Math.round(l[1][1])+u,t._marginX=(c-Math.round(l[1][0]))/2,t._marginY=(h-Math.round(l[1][1]))/2};return k}function i(t,e,r,n){var i=(r-t)/4;return{type:"Polygon",coordinates:[[[t,e],[t,n],[t+i,n],[t+2*i,n],[t+3*i,n],[r,n],[r,e],[r-i,e],[r-2*i,e],[r-3*i,e],[t,e]]]}}function o(t,e){return a.geo.path().projection(t).bounds(e)}var a=t("d3"),s=t("../../constants/geo_constants").clipPad;e.exports=n},{"../../constants/geo_constants":299,d3:69}],345:[function(t,e,r){"use strict";function n(t,e){var r;return(r=e._isScoped?o:e._clipAngle?s:a)(t,e.projection)}function i(t,e){var r=e._fullScale;return _.behavior.zoom().translate(t.translate()).scale(t.scale()).scaleExtent([.5*r,100*r])}function o(t,e){function r(){_.select(this).style(k)}function n(){a.scale(_.event.scale).translate(_.event.translate),t.render()}function o(){_.select(this).style(M)}var a=t.projection,s=i(a,e);return s.on("zoomstart",r).on("zoom",n).on("zoomend",o),s}function a(t,e){function r(t){return v.invert(t)}function n(t){var e=v(r(t));return Math.abs(e[0]-t[0])>y||Math.abs(e[1]-t[1])>y}function o(){_.select(this).style(k),l=_.mouse(this),u=v.rotate(),c=v.translate(),h=u,f=r(l)}function a(){return d=_.mouse(this),n(l)?(m.scale(v.scale()),void m.translate(v.translate())):(v.scale(_.event.scale),v.translate([c[0],_.event.translate[1]]),f?r(d)&&(g=r(d),p=[h[0]+(g[0]-f[0]),u[1],u[2]],v.rotate(p),h=p):(l=d,f=r(l)),void t.render())}function s(){_.select(this).style(M)}var l,u,c,h,f,d,p,g,v=t.projection,m=i(v,e),y=2;return m.on("zoomstart",o).on("zoom",a).on("zoomend",s),m}function s(t,e){function r(t){m++||t({type:"zoomstart"})}function n(t){t({type:"zoom"})}function o(t){--m||t({type:"zoomend"})}var a,s=t.projection,d={r:s.rotate(),k:s.scale()},p=i(s,e),g=x(p,"zoomstart","zoom","zoomend"),m=0,y=p.on;return p.on("zoomstart",function(){_.select(this).style(k);var t=_.mouse(this),e=s.rotate(),i=e,o=s.translate(),m=u(e);a=l(s,t),y.call(p,"zoom",function(){var r=_.mouse(this);if(s.scale(d.k=_.event.scale),a){if(l(s,r)){s.rotate(e).translate(o);var u=l(s,r),p=h(a,u),y=v(c(m,p)),b=d.r=f(y,a,i);isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])||(b=i),s.rotate(b),i=b}}else t=r,a=l(s,t);n(g.of(this,arguments))}),r(g.of(this,arguments))}).on("zoomend",function(){_.select(this).style(M),y.call(p,"zoom",null),o(g.of(this,arguments))}).on("zoom.redraw",function(){t.render()}),_.rebind(p,g,"on")}function l(t,e){var r=t.invert(e);return r&&isFinite(r[0])&&isFinite(r[1])&&m(r)}function u(t){var e=.5*t[0]*w,r=.5*t[1]*w,n=.5*t[2]*w,i=Math.sin(e),o=Math.cos(e),a=Math.sin(r),s=Math.cos(r),l=Math.sin(n),u=Math.cos(n);return[o*s*u+i*a*l,i*s*u-o*a*l,o*a*u+i*s*l,o*s*l-i*a*u]}function c(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=e[2],u=e[3];return[r*a-n*s-i*l-o*u,r*s+n*a+i*u-o*l,r*l-n*u+i*a+o*s,r*u+n*l-i*s+o*a]}function h(t,e){if(t&&e){var r=b(t,e),n=Math.sqrt(y(r,r)),i=.5*Math.acos(Math.max(-1,Math.min(1,y(t,e)))),o=Math.sin(i)/n;return n&&[Math.cos(i),r[2]*o,-r[1]*o,r[0]*o]}}function f(t,e,r){var n=g(e,2,t[0]);n=g(n,1,t[1]),n=g(n,0,t[2]-r[2]);var i,o,a=e[0],s=e[1],l=e[2],u=n[0],c=n[1],h=n[2],f=Math.atan2(s,a)*A,p=Math.sqrt(a*a+s*s);Math.abs(c)>p?(o=(c>0?90:-90)-f,i=0):(o=Math.asin(c/p)*A-f,i=Math.sqrt(p*p-c*c));var v=180-o-2*f,m=(Math.atan2(h,u)-Math.atan2(l,i))*A,y=(Math.atan2(h,u)-Math.atan2(l,-i))*A,b=d(r[0],r[1],o,m),x=d(r[0],r[1],v,y);return b<=x?[o,m,r[2]]:[v,y,r[2]]}function d(t,e,r,n){var i=p(r-t),o=p(n-e);return Math.sqrt(i*i+o*o)}function p(t){return(t%360+540)%360-180}function g(t,e,r){var n=r*w,i=t.slice(),o=0===e?1:0,a=2===e?1:2,s=Math.cos(n),l=Math.sin(n);return i[o]=t[o]*s-t[a]*l,i[a]=t[a]*s+t[o]*l,i}function v(t){return[Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*A,Math.asin(Math.max(-1,Math.min(1,2*(t[0]*t[2]-t[3]*t[1]))))*A,Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*A]}function m(t){var e=t[0]*w,r=t[1]*w,n=Math.cos(r);return[n*Math.cos(e),n*Math.sin(e),Math.sin(r)]}function y(t,e){for(var r=0,n=t.length,i=0;r<n;++r)i+=t[r]*e[r];return i}function b(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function x(t){for(var e=0,r=arguments.length,n=[];++e<r;)n.push(arguments[e]);var i=_.dispatch.apply(null,n);return i.of=function(e,r){return function(n){var o;try{o=n.sourceEvent=_.event,n.target=t,_.event=n,i[n.type].apply(e,r)}finally{_.event=o}}},i}var _=t("d3"),w=Math.PI/180,A=180/Math.PI,k={cursor:"pointer"},M={cursor:"auto"};e.exports=n},{d3:69}],346:[function(t,e,r){"use strict";function n(t,e){var r=t.projection,n=t.zoom,o=function(){t.makeProjection(e),t.makePath(),n.scale(r.scale()),n.translate(r.translate()),i(t.hoverContainer),t.render()};return o}var i=t("../../plotly").Fx.loneUnhover;e.exports=n},{"../../plotly":329}],347:[function(t,e,r){
